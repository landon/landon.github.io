/**
 * @version 1.0.0.0
 * @author Hewlett-Packard
 * @copyright Copyright Â© Hewlett-Packard 2017
 * @compiler Bridge.NET 16.0.1
 */
Bridge.assembly("Test", function ($asm, globals) {
    "use strict";

    Bridge.define("Algorithms.AssignmentEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _vertexCount: 0,
            _f: null,
            _potSize: 0,
            _start: 0,
            _step: 0
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$List$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._vertexCount = vertexCount;
                this._f = f;
                this._potSize = potSize;
                this._start = start;
                this._step = step;
            }
        },
        methods: {
            getEnumerator: function () {
                return new Algorithms.AssignmentEnumerator.Enumerator(this._vertexCount, this._f, this._potSize, this._start, this._step);
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            }
        }
    });

    Bridge.define("Algorithms.AssignmentEnumerator.Enumerator", {
        inherits: [System.Collections.Generic.IEnumerator$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _enumerators: null,
            _current: null,
            _step: 0
        },
        props: {
            Current: {
                get: function () {
                    return this._current;
                }
            },
            System$Collections$IEnumerator$Current: {
                get: function () {
                    return this.Current;
                }
            }
        },
        alias: [
            "Current", ["System$Collections$Generic$IEnumerator$1$System$Collections$Generic$List$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1"],
            "dispose", "System$IDisposable$dispose",
            "moveNext", "System$Collections$IEnumerator$moveNext"
        ],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._enumerators = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerator$1(System.Int64)))(vertexCount);
                var first = Algorithms.Int64Usage.ToInt64(System.Linq.Enumerable.range(0, f(0)));
                this._enumerators.add(function (_o1) {
                        _o1.add(first);
                        return _o1;
                    }(new (System.Collections.Generic.List$1(System.Int64))()).getEnumerator());
                for (var i = 1; i < vertexCount; i = (i + 1) | 0) {
                    this._enumerators.add(new Algorithms.SubsetEnumerator.Enumerator(potSize, f(i)));
                }

                this._step = step;

                for (var i1 = 0; i1 < start; i1 = (i1 + 1) | 0) {
                    if (!this.MoveNextInternal()) {
                        break;
                    }
                }
            }
        },
        methods: {
            dispose: function () { },
            moveNext: function () {
                for (var j = 0; j < this._step; j = (j + 1) | 0) {
                    if (!this.MoveNextInternal()) {
                        return false;
                    }
                }

                return true;
            },
            MoveNextInternal: function () {
                var $t, $t1, $t2;
                if (this._current == null) {
                    this._current = new (System.Collections.Generic.List$1(System.Int64))(this._enumerators.Count);

                    $t = Bridge.getEnumerator(this._enumerators);
                    try {
                        while ($t.moveNext()) {
                            var enumerator = $t.Current;
                            enumerator.System$Collections$IEnumerator$moveNext();
                            this._current.add(enumerator[Bridge.geti(enumerator, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return true;
                }

                var i = (this._enumerators.Count - 1) | 0;
                while (i >= 1) {
                    if (this._enumerators.getItem(i).System$Collections$IEnumerator$moveNext()) {
                        this._current.setItem(i, ($t1 = this._enumerators.getItem(i))[Bridge.geti($t1, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);
                        break;
                    }

                    this._enumerators.getItem(i).System$Collections$IEnumerator$reset();
                    this._enumerators.getItem(i).System$Collections$IEnumerator$moveNext();

                    this._current.setItem(i, ($t2 = this._enumerators.getItem(i))[Bridge.geti($t2, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);

                    i = (i - 1) | 0;
                }

                return i >= 1;
            },
            System$Collections$IEnumerator$reset: function () {
                throw new System.NotImplementedException();
            }
        }
    });

    Bridge.define("Algorithms.ChoosabilityResult", {
        props: {
            BadAssignment: null,
            Canceled: false,
            IsChoosable: {
                get: function () {
                    return this.BadAssignment == null;
                }
            }
        },
        ctors: {
            ctor: function (badAssignment, canceled) {
                if (canceled === void 0) { canceled = false; }

                this.$initialize();
                this.BadAssignment = badAssignment;
                this.Canceled = canceled;
            }
        }
    });

    Bridge.define("Algorithms.Counting", {
        statics: {
            methods: {
                BinomialCoefficient: function (n, k) {
                    if (k.lt(System.Int64(0))) {
                        return System.Int64(1);
                    }

                    var max = System.Int64.max(k, n.sub(k));
                    var min = System.Int64.min(k, n.sub(k));

                    var result = System.Int64(1);
                    while (n.gt(max)) {
                        result = result.mul(n);
                        n = n.dec();
                    }

                    while (min.gt(System.Int64(0))) {
                        result = result.div(min);

                        min = min.dec();
                    }

                    return result;
                },
                Factorial: function (n) {
                    var total = System.Int64(1);
                    for (var i = 1; i <= n; i = (i + 1) | 0) {
                        total = total.mul(System.Int64(i));
                    }

                    return total;
                }
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.Bijection$2", function (D, C) { return {
        fields: {
            _f: null,
            _finverse: null
        },
        ctors: {
            init: function () {
                this._f = new (System.Collections.Generic.Dictionary$2(D,C))();
                this._finverse = new (System.Collections.Generic.Dictionary$2(C,D))();
            }
        },
        methods: {
            getItem: function (d) {
                return this._f.get(d);
            },
            setItem: function (d, value) {
                this._f.set(d, value);
                this._finverse.set(value, d);
            },
            getItem$1: function (c) {
                return this._finverse.get(c);
            },
            setItem$1: function (c, value) {
                this._f.set(value, c);
                this._finverse.set(c, value);
            },
            Apply$1: function (e) {
                return System.Linq.Enumerable.from(e).select(Bridge.fn.bind(this, $asm.$.Algorithms.DataStructures.Bijection$2.f1));
            },
            Apply: function (e) {
                return System.Linq.Enumerable.from(e).select(Bridge.fn.bind(this, $asm.$.Algorithms.DataStructures.Bijection$2.f2));
            }
        }
    }; });

    Bridge.ns("Algorithms.DataStructures.Bijection$2", $asm.$);

    Bridge.apply($asm.$.Algorithms.DataStructures.Bijection$2, {
        f1: function (d) {
            return this.getItem(d);
        },
        f2: function (c) {
            return this.getItem$1(c);
        }
    });

    Bridge.define("Algorithms.DataStructures.BijectionExtensions", {
        statics: {
            methods: {
                NumberObjects: function (T, objects) {
                    var $t;
                    var numbering = new (Algorithms.DataStructures.Bijection$2(System.Int32,T))();

                    var i = 0;
                    $t = Bridge.getEnumerator(objects, T);
                    try {
                        while ($t.moveNext()) {
                            var o = $t.Current;
                            numbering.setItem(i, o);
                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return numbering;
                }
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.UnionFind$1", function (T) { return {
        methods: {
            MakeSet: function (t) {
                var node = new (Algorithms.DataStructures.UnionFind$1.Node(T))();
                node.Parent = node;
                node.Rank = 0;
                node.T = t;

                this.RootAdded(node);
                return node;
            },
            Union: function (nx, ny) {
                var xRoot = this.Find(nx);
                var yRoot = this.Find(ny);

                if (Bridge.referenceEquals(xRoot, yRoot)) {
                    return;
                }

                if (xRoot.Rank < yRoot.Rank) {
                    xRoot.Parent = yRoot;
                    this.RootRemoved(xRoot);
                } else if (xRoot.Rank > yRoot.Rank) {
                    yRoot.Parent = xRoot;
                    this.RootRemoved(yRoot);
                } else {
                    yRoot.Parent = xRoot;
                    xRoot.Rank = (xRoot.Rank + 1) | 0;
                    this.RootRemoved(yRoot);
                }
            },
            Find: function (n) {
                if (!Bridge.referenceEquals(n.Parent, n)) {
                    n.Parent = this.Find(n.Parent);
                }

                return n.Parent;
            },
            RootAdded: function (n) { },
            RootRemoved: function (n) { }
        }
    }; });

    Bridge.define("Algorithms.DataStructures.UnionFind$1.Node", function (T) { return {
        props: {
            Parent: null,
            Rank: 0,
            T: Bridge.getDefaultValue(T)
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.Board", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        statics: {
            fields: {
                StorePermutationInfo: false
            },
            methods: {
                UpdateHash: function (hash, value) {
                    hash.v = System.Int64.clip32(System.Int64(Bridge.Int.mul(37, hash.v)).add(value));
                },
                ApplyMapping$1: function (mapping, stack) {
                    return Algorithms.Int64Usage.ToInt64(Algorithms.FixerBreaker.Board.ApplyMapping(mapping, Algorithms.Int64Usage.ToSet(stack)));
                },
                ApplyMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item2.getItem(mapping.item1.indexOf(c));
                        });
                },
                ApplyInverseMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item1.getItem(mapping.item2.indexOf(c));
                        });
                },
                OtherTurn: function (turn) {
                    return ((1 - turn) | 0);
                }
            }
        },
        fields: {
            Stacks: null,
            _hashCode: 0,
            PotSet: null,
            Traces: null,
            TracesForPermutationInfo: null,
            TraceChangeIndices: null,
            Template: null,
            Pot: System.Int64(0),
            ColorCount: 0,
            Turn: 0,
            N: 0,
            LastMove: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            init: function () {
                this.LastMove = new Algorithms.FixerBreaker.Move();
            },
            ctor: function (stacks, pot, computeHash) {
                if (computeHash === void 0) { computeHash = true; }

                this.$initialize();
                this.Stacks = stacks;
                this.Pot = pot;
                this.Turn = Algorithms.FixerBreaker.Turn.Fixer;
                this.N = this.Stacks.Count;
                this.Template = new (Algorithms.Lazy$1(Algorithms.FixerBreaker.KnowledgeEngine.Template)).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Board.f2));
                this.PotSet = Algorithms.Int64Usage.ToSet(this.Pot);
                this.ColorCount = this.PotSet.Count;
                this.Traces = new (System.Collections.Generic.List$1(System.Int64))(this.ColorCount);

                if (Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    this.TracesForPermutationInfo = new (System.Collections.Generic.List$1(System.Object))(this.ColorCount);
                    this.TraceChangeIndices = new (System.Collections.Generic.List$1(System.Int32))();
                }

                if (computeHash) {
                    this.ComputeHashCode();
                }
            }
        },
        methods: {
            getItem: function (x) {
                return this.Stacks.getItem(x);
            },
            ComputeHashCode: function () {
                var $t, $t1, $t2;
                this._hashCode = this.N;
                Algorithms.FixerBreaker.Board.UpdateHash(Bridge.ref(this, "_hashCode"), this.Turn);

                this.Traces.clear();
                $t = Bridge.getEnumerator(this.PotSet);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        var t = this.GetTrace(c);
                        if (t.gt(System.Int64(0))) {
                            this.Traces.add(t);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Traces.sort();

                $t1 = Bridge.getEnumerator(this.Traces);
                try {
                    while ($t1.moveNext()) {
                        var t1 = $t1.Current;
                        Algorithms.FixerBreaker.Board.UpdateHash(Bridge.ref(this, "_hashCode"), t1);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                if (Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    this.TracesForPermutationInfo.clear();
                    this.TraceChangeIndices.clear();

                    $t2 = Bridge.getEnumerator(this.PotSet);
                    try {
                        while ($t2.moveNext()) {
                            var c1 = $t2.Current;
                            var t2 = this.GetTrace(c1);
                            if (t2.gt(System.Int64(0))) {
                                this.TracesForPermutationInfo.add({ item1: c1, item2: t2 });
                            }
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }
                    this.TracesForPermutationInfo.sort($asm.$.Algorithms.FixerBreaker.Board.f3);

                    var previousTrace = System.Int64(-1);
                    for (var i = 0; i < this.TracesForPermutationInfo.Count; i = (i + 1) | 0) {
                        var t3 = this.TracesForPermutationInfo.getItem(i);

                        if (t3.item2.ne(previousTrace)) {
                            this.TraceChangeIndices.add(i);
                            previousTrace = t3.item2;
                        }
                    }

                    this.TraceChangeIndices.add(this.TracesForPermutationInfo.Count);
                }
            },
            GetTrace: function (c) {
                var k = System.Int64(1).shl(c);
                var trace = System.Int64(0);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    if ((this.Stacks.getItem(i).and(k)).ne(System.Int64(0))) {
                        trace = trace.or((System.Int64(1).shl(i)));
                    }
                }

                return trace;
            },
            MakeMove: function (move) {
                this.LastMove = move.$clone();

                if (move.Stack >= 0) {
                    this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                }

                this.Turn = Algorithms.FixerBreaker.Board.OtherTurn(this.Turn);

                this.ComputeHashCode();
            },
            DoMoveCombination: function (moves) {
                var $t;
                $t = Bridge.getEnumerator(moves, Algorithms.FixerBreaker.Move);
                try {
                    while ($t.moveNext()) {
                        var move = $t.Current.$clone();
                        this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ComputeHashCode();
            },
            Clone: function () {
                var clone = new Algorithms.FixerBreaker.Board(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();
                clone._hashCode = this._hashCode;

                clone.ComputeHashCode();

                return clone;
            },
            DoMoveCombinationOnClone: function (swap) {
                var clone = new Algorithms.FixerBreaker.Board(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot, false);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();

                clone.DoMoveCombination(swap);

                return clone;
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.Board));
            },
            Equals: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }

                return System.Linq.Enumerable.from(this.Traces).sequenceEqual(other.Traces);
            },
            FindPermutation: function (other) {
                if (!Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    throw new System.Exception("not storing permutation info");
                }

                if (!System.Linq.Enumerable.from(this.TracesForPermutationInfo).select($asm.$.Algorithms.FixerBreaker.Board.f4).sequenceEqual(System.Linq.Enumerable.from(other.TracesForPermutationInfo).select($asm.$.Algorithms.FixerBreaker.Board.f4))) {
                    return null;
                }

                var mappingPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < ((this.TraceChangeIndices.Count - 1) | 0); i = (i + 1) | 0) {
                    var domain = new (System.Collections.Generic.List$1(System.Int32))();
                    var codomain = new (System.Collections.Generic.List$1(System.Int32))();

                    for (var j = this.TraceChangeIndices.getItem(i); j < this.TraceChangeIndices.getItem(((i + 1) | 0)); j = (j + 1) | 0) {
                        domain.add(this.TracesForPermutationInfo.getItem(j).item1);
                        codomain.add(other.TracesForPermutationInfo.getItem(j).item1);
                    }

                    mappingPairs.add({ item1: domain, item2: codomain });
                }

                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Object, System.Linq.Enumerable.from(mappingPairs).select($asm.$.Algorithms.FixerBreaker.Board.f5))).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Board.f6)).firstOrDefault(Bridge.fn.bind(this, function (mapping) {
                        return this.SequenceEqualPermuted(mapping, other);
                    }), null);
            },
            FlattenMapping: function (mapping) {
                return { item1: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.Board.f7).toList(System.Int32), item2: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.Board.f8).toList(System.Int32) };
            },
            SequenceEqualPermuted: function (mapping, other) {
                for (var i = 0; i < this.Stacks.Count; i = (i + 1) | 0) {
                    var permutedStack = Algorithms.FixerBreaker.Board.ApplyMapping$1(mapping, this.Stacks.getItem(i));
                    if (permutedStack.ne(other.Stacks.getItem(i))) {
                        return false;
                    }
                }

                if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                    return true;
                }

                if (this.LastMove.Stack !== other.LastMove.Stack) {
                    return false;
                }

                var ours = System.Array.init([this.LastMove.Added, this.LastMove.Removed], System.Int32);
                var theirs = function (_o2) {
                        _o2.add(other.LastMove.Added);
                        _o2.add(other.LastMove.Removed);
                        return _o2;
                    }(new (System.Collections.Generic.List$1(System.Int32))());

                return Algorithms.Utility.ListUtility.Equal(System.Int32, System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(mapping, ours)).toList(System.Int32), theirs);
            },
            getHashCode: function () {
                return this._hashCode;
            },
            getEnumerator: function () {
                return this.Stacks.getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f9)).join("|");
            },
            ToTex: function () {
                return Algorithms.GenericExtensions.JoinPretty(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f10), ", ");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.Board", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.Board, {
        f1: function (s) {
            return Algorithms.Int64Usage.PopulationCount(s);
        },
        f2: function () {
            return new Algorithms.FixerBreaker.KnowledgeEngine.Template.ctor(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f1).toList(System.Int32));
        },
        f3: function (x, y) {
            return x.item2.compareTo(y.item2);
        },
        f4: function (t) {
            return t.item2;
        },
        f5: function (mp) {
            return System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(mp.item2.Count)).select(function (p) {
                    return { item1: mp.item1, item2: p.Apply(System.Int32, mp.item2) };
                });
        },
        f6: function (mapping) {
            return this.FlattenMapping(mapping);
        },
        f7: function (x) {
            return x.item1;
        },
        f8: function (x) {
            return x.item2;
        },
        f9: function (x) {
            return Algorithms.Int64Usage.ToSetStringSmall(x);
        },
        f10: function (stack, i) {
            return System.String.concat("$L(v_" + (((i + 1) | 0)) + ") = ", System.String.replaceAll(System.String.replaceAll(Algorithms.Int64Usage.ToSetString$2(stack), "{", "\\{"), "}", "\\}"), "$");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Chronicle.BranchGenerator", {
        statics: {
            fields: {
                PartitionsCache: null
            },
            ctors: {
                init: function () {
                    this.PartitionsCache = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))))();
                }
            },
            methods: {
                GetPartitions: function (count) {
                    var partitions = { };
                    if (!Algorithms.FixerBreaker.Chronicle.BranchGenerator.PartitionsCache.tryGetValue(count, partitions)) {
                        partitions.v = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions$1(count)).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                        Algorithms.FixerBreaker.Chronicle.BranchGenerator.PartitionsCache.set(count, partitions.v);
                    }

                    return partitions.v;
                },
                EnumerateBranches: function (board, colorPair) {
                    var S = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, colorPair)).toList(System.Int32);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(S.Count);

                    return System.Linq.Enumerable.from(partitions).select(function (partition) {
                            return new Algorithms.FixerBreaker.Chronicle.ChronicledBranch(S, colorPair.item1, colorPair.item2, partition);
                        });
                },
                EnumeratePartitions$1: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            partition,
                            i,
                            $t1,
                            partition1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (n % 2 === 0) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            $t = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(System.Linq.Enumerable.range(0, n).toList(System.Int32)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 2;
                                                continue;
                                        }
                                        case 2: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 3;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 3: {
                                            $enumerator.current = partition;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 2;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 6: {
                                            i = 0;
                                                $step = 7;
                                                continue;
                                        }
                                        case 7: {
                                            if ( i < n ) {
                                                    $step = 8;
                                                    continue;
                                                }
                                            $step = 14;
                                            continue;
                                        }
                                        case 8: {
                                            $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(System.Linq.Enumerable.range(0, n).where(function (j) {
                                                    return j !== i;
                                                }).toList(System.Int32)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 9;
                                                continue;
                                        }
                                        case 9: {
                                            if ($t1.moveNext()) {
                                                    partition1 = $t1.Current;
                                                    $step = 10;
                                                    continue;
                                                }
                                            $step = 12;
                                            continue;
                                        }
                                        case 10: {
                                            partition1.insert(0, function (_o3) {
                                                        _o3.add(i);
                                                        return _o3;
                                                    }(new (System.Collections.Generic.List$1(System.Int32))()));
                                                $enumerator.current = partition1;
                                                $step = 11;
                                                return true;
                                        }
                                        case 11: {
                                            $step = 9;
                                            continue;
                                        }
                                        case 12: {
                                            $step = 13;
                                            continue;
                                        }
                                        case 13: {
                                            i = (i + 1) | 0;
                                            $step = 7;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumeratePartitions: function (indices) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (indices) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            first,
                            i,
                            part,
                            $t,
                            partition,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (indices.Count <= 0) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            $enumerator.current = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 12;
                                            continue;
                                        }
                                        case 3: {
                                            first = indices.getItem(0);
                                                indices.removeAt(0);
                                                i = 0;
                                                $step = 4;
                                                continue;
                                        }
                                        case 4: {
                                            if ( i < indices.Count ) {
                                                    $step = 5;
                                                    continue;
                                                }
                                            $step = 11;
                                            continue;
                                        }
                                        case 5: {
                                            part = function (_o4) {
                                                        _o4.add(first);
                                                        _o4.add(indices.getItem(i));
                                                        return _o4;
                                                    }(new (System.Collections.Generic.List$1(System.Int32))());
                                                indices.removeAt(i);

                                                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(indices), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 6;
                                                continue;
                                        }
                                        case 6: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 7;
                                                    continue;
                                                }
                                            $step = 9;
                                            continue;
                                        }
                                        case 7: {
                                            partition.add(part);
                                                $enumerator.current = partition;
                                                $step = 8;
                                                return true;
                                        }
                                        case 8: {
                                            $step = 6;
                                            continue;
                                        }
                                        case 9: {
                                            indices.insert(i, part.getItem(1));
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            i = (i + 1) | 0;
                                            $step = 4;
                                            continue;
                                        }
                                        case 11: {
                                            indices.insert(0, first);
                                            $step = 12;
                                            continue;
                                        }
                                        case 12: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateExactlyOneIntersecters: function (board, colorPair) {
                    return System.Linq.Enumerable.range(0, board.Stacks.Count).where(function (i) {
                        return Algorithms.Int64Usage.IsBitSet(board.Stacks.getItem(i), System.Int64(colorPair.item1)) ^ Algorithms.Int64Usage.IsBitSet(board.Stacks.getItem(i), System.Int64(colorPair.item2));
                    });
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Move", {
        $kind: "struct",
        statics: {
            methods: {
                getDefaultValue: function () { return new Algorithms.FixerBreaker.Move(); }
            }
        },
        fields: {
            Stack: 0,
            Added: 0,
            Removed: 0
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([1702260557, this.Stack, this.Added, this.Removed]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, Algorithms.FixerBreaker.Move)) {
                    return false;
                }
                return Bridge.equals(this.Stack, o.Stack) && Bridge.equals(this.Added, o.Added) && Bridge.equals(this.Removed, o.Removed);
            },
            $clone: function (to) {
                var s = to || new Algorithms.FixerBreaker.Move();
                s.Stack = this.Stack;
                s.Added = this.Added;
                s.Removed = this.Removed;
                return s;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge", {
        props: {
            Board: null,
            Reason: null,
            Depth: 0,
            ColorPair: null,
            Swaps: null
        },
        ctors: {
            ctor: function (board, reason) {
                this.$initialize();
                this.Board = board;
                this.Reason = reason;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer", {
        $kind: "interface"
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge", {
        props: {
            Graph: null,
            LineGraph: null,
            Edges: null,
            EdgeIndices: null,
            Leaves: null,
            ConnectedOrderings: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.Graph = g;
                this.Leaves = System.Linq.Enumerable.from(this.Graph.Vertices).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge.f1)).toList(System.Int32);
                this.BuildLineGraph();

                this.ConnectedOrderings = new (Algorithms.Lazy$1(System.Collections.Generic.Dictionary$2(System.Object,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var co = new (System.Collections.Generic.Dictionary$2(System.Object,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))();
                    $t = Bridge.getEnumerator(this.Edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            co.set(e, System.Linq.Enumerable.from(this.Graph.EnumerateConnectedOrderings((function ($me, e) {
                                        return function (_o5) {
                                            _o5.add(e.item1);
                                            _o5.add(e.item2);
                                            return _o5;
                                        };
                                    })(this, e)(new (System.Collections.Generic.List$1(System.Int32))()))).toList(System.Collections.Generic.List$1(System.Int32)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return co;
                }));
            }
        },
        methods: {
            BuildLineGraph: function () {
                var adjacent = this.Graph.Adjacent;
                var n = ((System.Array.getLength(adjacent, 0) - 1) + 1) | 0;

                this.Edges = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        if (adjacent.get([i, j])) {
                            this.Edges.add({ item1: i, item2: j });
                        }
                    }
                }

                this.EdgeIndices = System.Linq.Enumerable.range(0, this.Edges.Count).toList(System.Int32);

                var meets = System.Array.create(false, null, System.Boolean, this.Edges.Count, this.Edges.Count);
                for (var i1 = 0; i1 < this.Edges.Count; i1 = (i1 + 1) | 0) {
                    for (var j1 = (i1 + 1) | 0; j1 < this.Edges.Count; j1 = (j1 + 1) | 0) {
                        if (this.Edges.getItem(i1).item1 === this.Edges.getItem(j1).item1 || this.Edges.getItem(i1).item1 === this.Edges.getItem(j1).item2 || this.Edges.getItem(i1).item2 === this.Edges.getItem(j1).item1 || this.Edges.getItem(i1).item2 === this.Edges.getItem(j1).item2) {
                            meets.set([i1, j1], (meets.set([j1, i1], true), true));
                        }
                    }
                }

                this.LineGraph = new Algorithms.Graph.ctor(meets);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge, {
        f1: function (v) {
            return this.Graph.Degree(v) === 1;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.IMind", {
        $kind: "interface"
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Knowledge", {
        fields: {
            _templateLookup: null
        },
        props: {
            GraphKnowledge: null
        },
        ctors: {
            init: function () {
                this._templateLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Template,Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge))();
            },
            ctor: function (g) {
                this.$initialize();
                this.GraphKnowledge = new Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge(g);
            }
        },
        methods: {
            getItem: function (template) {
                var p = { };
                if (!this._templateLookup.tryGetValue(template, p)) {
                    p.v = new Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge(template);
                    this._templateLookup.set(template, p.v);
                }

                return p.v;
            },
            GetEdgeColorList: function (board, edgeIndex) {
                return board.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item1).and(board.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item2));
            },
            GetEdgeColorList$1: function (stacks, edgeIndex) {
                return stacks.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item1).and(stacks.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item2));
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Tree$1", function (T) { return {
        props: {
            Parent: Bridge.getDefaultValue(T),
            This: Bridge.getDefaultValue(T),
            Children: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                this.This = Bridge.cast(this, T);
                this.Children = new (System.Collections.Generic.List$1(T))();
            }
        },
        methods: {
            RemoveChild: function (child) {
                this.Children.remove(child);
            },
            AddChild: function (child) {
                child.Parent = this.This;
                this.Children.add(child);
            },
            GetDepth: function () {
                var $t;
                var depth = 0;
                $t = Bridge.getEnumerator(this.Children);
                try {
                    while ($t.moveNext()) {
                        var child = $t.Current;
                        depth = Math.max(depth, ((child.GetDepth() + 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return depth;
            },
            Traverse: function (onDescent, maxDepth) {
                if (maxDepth === void 0) { maxDepth = 2147483647; }
                this.TraverseInternal(onDescent, maxDepth, 0);
            },
            TraverseInternal: function (onDescent, maxDepth, depth) {
                var $t;
                if (depth >= ((maxDepth - 1) | 0)) {
                    return;
                }

                $t = Bridge.getEnumerator(this.Children);
                try {
                    while ($t.moveNext()) {
                        var child = $t.Current;
                        onDescent(this.This, child);
                        child.TraverseInternal(onDescent, maxDepth, ((depth + 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            BuildGraph: function (maxDepth) {
                if (maxDepth === void 0) { maxDepth = 2147483647; }
                var vertices = 0;
                var vertexLookup = new (System.Collections.Generic.Dictionary$2(T,System.Int32))();
                var treeLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,T))();
                var edges = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();

                this.Traverse(function (parent, child) {
                    var p = { };
                    if (!vertexLookup.tryGetValue(parent, p)) {
                        p.v = Bridge.identity(vertices, (vertices = (vertices + 1) | 0));
                        vertexLookup.set(parent, p.v);
                        treeLookup.set(p.v, parent);

                        edges.set(p.v, new (System.Collections.Generic.List$1(System.Int32))());
                    }

                    var c = { };
                    if (!vertexLookup.tryGetValue(child, c)) {
                        c.v = Bridge.identity(vertices, (vertices = (vertices + 1) | 0));
                        vertexLookup.set(child, c.v);
                        treeLookup.set(c.v, child);

                        edges.set(c.v, new (System.Collections.Generic.List$1(System.Int32))());
                    }

                    edges.get(p.v).add(c.v);
                }, maxDepth);

                if (vertices === 0) {
                    treeLookup.set(0, Bridge.cast(this, T));
                    edges.set(0, new (System.Collections.Generic.List$1(System.Int32))());
                }

                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < vertices; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < vertices; j = (j + 1) | 0) {
                        if (edges.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (edges.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return { item1: new Algorithms.Graph.$ctor1(edgeWeights), item2: treeLookup };
            }
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge", {
        statics: {
            fields: {
                Infinity: 0
            },
            ctors: {
                init: function () {
                    this.Infinity = 2147483647;
                }
            },
            methods: {
                Exists: function (o) {
                    return o != null;
                },
                Naturals: function () {
                    return System.Linq.Enumerable.range(0, Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity);
                },
                Interval: function (first, last) {
                    return System.Linq.Enumerable.range(first, ((((last - first) | 0) + 1) | 0));
                },
                TryParseInt: function (s) {
                    var x = { };
                    if (System.Int32.tryParse(s, x)) {
                        return x.v;
                    }

                    return null;
                },
                TryParseDouble: function (s) {
                    var x = { };
                    if (System.Double.tryParse(s, null, x)) {
                        return x.v;
                    }

                    return null;
                },
                DegreeCondition: function (g, b, missingEdges) {
                    if (missingEdges === void 0) { missingEdges = null; }
                    return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, b.Stacks, b.Pot);
                },
                DegreeCondition$1: function (g, stacks, pot, missingEdges) {
                    var $t;
                    if (missingEdges === void 0) { missingEdges = null; }
                    if (Bridge.staticEquals(missingEdges, null)) {
                        missingEdges = $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.f1;
                    }

                    var colorGraphs = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(stacks, pot);

                    $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, g.Vertices), System.Collections.Generic.List$1(System.Int32));
                    try {
                        while ($t.moveNext()) {
                            var X = $t.Current;
                            var e = (g.EdgesOn(X) - missingEdges(X)) | 0;

                            if (e <= 0) {
                                continue;
                            }

                            var value = System.Linq.Enumerable.from(colorGraphs).sum((function ($me, X) {
                                    return function (cg) {
                                        return ((Bridge.Int.div(Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, cg, X), 2)) | 0);
                                    };
                                })(this, X));

                            if (value < e) {
                                return false;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return true;
                },
                GetColorGraphs: function (stacks, pot) {
                    return System.Linq.Enumerable.from(Algorithms.Int64Usage.EnumerateBits(pot)).select(function (alpha) {
                            return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.G_alpha(alpha, stacks)).toList(System.Int32);
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                },
                G_alpha: function (alpha, stacks) {
                    return Algorithms.GenericExtensions.IndicesWhere(System.Int64, stacks, function (stack) {
                        return Algorithms.Int64Usage.IsBitSet(stack, System.Int64(alpha));
                    });
                },
                d_H: function (alpha, stacksInH) {
                    return System.Linq.Enumerable.from(stacksInH).count(function (stack) {
                            return Algorithms.Int64Usage.IsBitSet(stack, System.Int64(alpha));
                        });
                },
                Surplus: function (board, g) {
                    return ((System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).sum($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.f2) - g.E) | 0);
                },
                Surplus$1: function (board, g, vertices) {
                    return ((System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).sum(function (cg) {
                            return ((Bridge.Int.div(Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, cg, vertices), 2)) | 0);
                        }) - g.EdgesOn(vertices)) | 0);
                },
                ToConsole: function (s) { },
                MapMove: function (f, move) {
                    var $t;
                    var mappedMove = ($t = new Algorithms.FixerBreaker.Move(), $t.Stack = move.Stack, $t);
                    var m = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f, System.Array.init([move.Added, move.Removed], System.Int32))).toList(System.Int32);

                    mappedMove.Added = m.getItem(0);
                    mappedMove.Removed = m.getItem(1);

                    return mappedMove.$clone();
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge, {
        f1: function (Y) {
            return 0;
        },
        f2: function (cg) {
            return ((Bridge.Int.div(cg.Count, 2)) | 0);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Mind", {
        statics: {
            fields: {
                TreeNodeNumber: 0
            },
            ctors: {
                init: function () {
                    this.TreeNodeNumber = 1;
                }
            }
        },
        props: {
            StopAnalysisOnBreakerWin: false,
            FindCleanestWin: false,
            NearlyColorableOnly: false,
            SuperabundantOnly: false,
            MinPot: 0,
            MaxPot: 0,
            BreakerWonBoard: null,
            FixerWonAllNearlyColorableBoards: false,
            TotalPositions: 0,
            BoardAnalysisPipeline: null,
            Knowledge: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.FindCleanestWin = true;
                this.SuperabundantOnly = true;
                this.NearlyColorableOnly = false;
                this.MaxPot = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                this.Knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.Knowledge(g);

                this.BoardAnalysisPipeline = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer))();
                this.BoardAnalysisPipeline.add(new Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer());
            }
        },
        methods: {
            AddBoardAnalyzer: function (analyzer) {
                this.BoardAnalysisPipeline.add(analyzer);
            },
            Analyze: function (template, progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                this.TotalPositions = 0;
                this.FixerWonAllNearlyColorableBoards = true;

                this.EnsureSwapAnalyzerExistence();

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Interval(minimumColorCount, maximumColorCount), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var colorCount = $t.Current;
                        if (!Bridge.staticEquals(progress, null)) {
                            progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.IsInitialThought = true, $t1));
                        }

                        var boards = System.Linq.Enumerable.from(this.GenerateAllBoards(template, colorCount, progress)).toList(Algorithms.FixerBreaker.Board);
                        if (foundAtLeastOneBoard && boards.Count <= 0) {
                            break;
                        }

                        this.TotalPositions = (this.TotalPositions + boards.Count) | 0;
                        foundAtLeastOneBoard = true;

                        var breakerWin = !this.Analyze$1(boards, progress);
                        if (breakerWin && this.StopAnalysisOnBreakerWin) {
                            return false;
                        }

                        this.Knowledge.getItem(template).Promote(colorCount);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(this.Knowledge.getItem(template).LostBoards).count() <= 0;
            },
            Analyze$1: function (boards, progress) {
                var $t, $t1, $t2;
                if (progress === void 0) { progress = null; }
                var winLength = 0;

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(this.BoardAnalysisPipeline).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f1));
                try {
                    while ($t.moveNext()) {
                        var analyzer = $t.Current;
                        var chunk = { v : new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.Board))() };
                        Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.Board, boards, (function ($me, analyzer) {
                            return Bridge.fn.bind($me, function (b) {
                                return analyzer.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze(this.Knowledge, b);
                            });
                        })(this, analyzer), (function ($me, chunk) {
                            return function (removed) {
                                var $t1;
                                chunk.v.add(removed);

                                if (chunk.v.Count > 100) {
                                    if (!Bridge.staticEquals(progress, null)) {
                                        progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsRemoved = System.Linq.Enumerable.from(chunk.v).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = winLength, $t1));
                                    }

                                    chunk.v.clear();
                                }
                            };
                        })(this, chunk));

                        if (chunk.v.Count > 0) {
                            if (!Bridge.staticEquals(progress, null)) {
                                progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsRemoved = System.Linq.Enumerable.from(chunk.v).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = winLength, $t1));
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var knowledgeDependentAnalyzers = System.Linq.Enumerable.from(this.BoardAnalysisPipeline).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f2).toList(Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer);

                while (boards.Count > 0) {
                    winLength = (winLength + 1) | 0;

                    var count = boards.Count;

                    $t1 = Bridge.getEnumerator(knowledgeDependentAnalyzers);
                    try {
                        while ($t1.moveNext()) {
                            var analyzer1 = $t1.Current;
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.Board, boards, Bridge.fn.bind(this, function (b) {
                                return analyzer1.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze(this.Knowledge, b);
                            }), function (removed) {
                                var $t2;
                                if (!Bridge.staticEquals(progress, null)) {
                                    progress(($t2 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t2.BoardsRemoved = Algorithms.GenericExtensions.EnList(Algorithms.FixerBreaker.Board, removed), $t2.WinLength = winLength, $t2));
                                }
                            });
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (boards.Count === count) {
                        $t2 = Bridge.getEnumerator(boards);
                        try {
                            while ($t2.moveNext()) {
                                var b = $t2.Current;
                                this.Knowledge.getItem(b.Template.Value).getItem(b.ColorCount).AddLoss(b);
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                        var g = { v : this.Knowledge.GraphKnowledge.Graph };

                        var nearlyColorable = System.Linq.Enumerable.range(0, this.Knowledge.GraphKnowledge.LineGraph.N).all(Bridge.fn.bind(this, function (e) {
                            return System.Linq.Enumerable.from(boards).any(Bridge.fn.bind(this, function (b1) {
                                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, e);
                                }));
                        }));
                        if (nearlyColorable) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(boards).firstOrDefault((function ($me, g) {
                                    return Bridge.fn.bind($me, function (b1) {
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(g.v, b1) && Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, 0);
                                    });
                                })(this, g), null);
                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = System.Linq.Enumerable.from(boards).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f3));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            EnsureSwapAnalyzerExistence: function () {
                if (!System.Linq.Enumerable.from(this.BoardAnalysisPipeline).any($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f4)) {
                    this.BoardAnalysisPipeline.add(new Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer(this.FindCleanestWin, false));
                }
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                var boards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();

                var vertices = System.Linq.Enumerable.range(0, template.Sizes.Count).toList(System.Int32);
                var potSet = System.Linq.Enumerable.range(0, colorCount).toList(System.Int32);
                var pot = Algorithms.Int64Usage.ToInt64(potSet);

                var fix = System.Linq.Enumerable.from(vertices).orderBy(function (v) {
                        return Math.abs(((template.Sizes.getItem(v) - ((Bridge.Int.div(colorCount, 2)) | 0)) | 0));
                    }).first();

                var boardsChunk = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.Board))();
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(vertices).select(function (v) {
                        if (v === fix) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(potSet).take(template.Sizes.getItem(v)).toList(System.Int32));
                        }

                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, potSet, template.Sizes.getItem(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var assignmentSets = $t.Current;
                        var sets = System.Linq.Enumerable.from(assignmentSets).toList(System.Collections.Generic.List$1(System.Int32));
                        var totalColors = System.Linq.Enumerable.from(sets).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f5).distinct().count();
                        if (totalColors < colorCount) {
                            continue;
                        }

                        var stacks = System.Linq.Enumerable.from(sets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f6).toList(System.Int64);

                        var superAbundant = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(this.Knowledge.GraphKnowledge.Graph, stacks, pot);
                        var board = new Algorithms.FixerBreaker.Board(stacks, pot);

                        if (this.SuperabundantOnly && !superAbundant) {
                            continue;
                        }

                        boards.add(board);
                        boardsChunk.add(board);

                        if (boardsChunk.Count > 100) {
                            if (!Bridge.staticEquals(progress, null)) {
                                progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsAdded = System.Linq.Enumerable.from(boardsChunk).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = -1, $t1));
                            }

                            boardsChunk.clear();
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                if (boardsChunk.Count > 0 && !Bridge.staticEquals(progress, null)) {
                    progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsAdded = System.Linq.Enumerable.from(boardsChunk).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = -1, $t1));
                }

                return boards;
            },
            EnumerateKnowledgeTrees: function (template) {
                var templateKnowledge = this.Knowledge.getItem(template);
                var colorCount = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Naturals()).first(function (n) {
                        return templateKnowledge.KnowledgeExists(n) && !templateKnowledge.KnowledgeExists(((n + 1) | 0));
                    });

                return System.Linq.Enumerable.from(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge()).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f7));
            },
            GenerateKnowledgeTree: function (board) {
                Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber = 1;
                var seenCache = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Object))();
                var knowledgeTree = new Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree();
                this.FillKnowledgeTree(knowledgeTree, board, seenCache);

                return knowledgeTree;
            },
            FillKnowledgeTree: function (knowledgeTree, board, seenCache) {
                var $t, $t1;
                knowledgeTree.Board = board.toString();
                knowledgeTree.Number = Bridge.identity(Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber, ($t = (Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber + 1) | 0, Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber = $t, $t));

                var knowledge = this.Knowledge.getItem(board.Template.Value).getItem(board.ColorCount).getItem(board);
                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(knowledge)) {
                    if (!Bridge.referenceEquals(knowledge.Reason, "good swap")) {
                        knowledgeTree.Note = knowledge.Reason;
                    } else {
                        var seenBoard = { };
                        if (seenCache.tryGetValue(board, seenBoard)) {
                            knowledgeTree.Note = "same as #" + seenBoard.v.item1;
                            return;
                        }

                        var f = knowledge.Board.FindPermutation(board);
                        var colors = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f, System.Array.init([knowledge.ColorPair.item1, knowledge.ColorPair.item2], System.Int32))).toList(System.Int32);
                        var colorPair = { item1: colors.getItem(0), item2: colors.getItem(1) };

                        $t1 = Bridge.getEnumerator(knowledge.Swaps);
                        try {
                            while ($t1.moveNext()) {
                                var swap = $t1.Current;
                                var tempBoard = board.Clone();
                                var moves = System.Linq.Enumerable.from(swap.item2).select(function (m) {
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.MapMove(f, m.$clone());
                                    }).toList(Algorithms.FixerBreaker.Move);
                                tempBoard.DoMoveCombination(moves);

                                var childKnowledgeTree = knowledgeTree.AddChild$1(swap);
                                childKnowledgeTree.ColorPair = colorPair;
                                this.FillKnowledgeTree(childKnowledgeTree, tempBoard, seenCache);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }}
                } else {
                    throw new System.Exception("something went wrong in building search tree");
                }

                seenCache.set(board, { item1: knowledgeTree.Number, item2: board });
            },
            GenerateTemplateKnowledgeGraph: function (template) {
                var $t, $t1, $t2, $t3;
                var templateKnowledge = this.Knowledge.getItem(template);
                var colorCount = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Naturals()).first(function (n) {
                        return templateKnowledge.KnowledgeExists(n) && !templateKnowledge.KnowledgeExists(((n + 1) | 0));
                    });

                var nextVertexID = 0;
                var vertexLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Int32))();
                var swapLookup = new (System.Collections.Generic.Dictionary$2(System.Object,System.Object))();
                var boardLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge)))();
                var outEdges = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();

                $t = Bridge.getEnumerator(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge(), System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge));
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        vertexLookup.set(kvp.key, nextVertexID);
                        boardLookup.set(nextVertexID, kvp);
                        outEdges.set(nextVertexID, new (System.Collections.Generic.List$1(System.Int32))());
                        nextVertexID = (nextVertexID + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(templateKnowledge.LostBoards, Algorithms.FixerBreaker.Board);
                try {
                    while ($t1.moveNext()) {
                        var b = $t1.Current;
                        vertexLookup.set(b, nextVertexID);
                        boardLookup.set(nextVertexID, new (System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))(b, new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(b, "breaker wins")));
                        outEdges.set(nextVertexID, new (System.Collections.Generic.List$1(System.Int32))());
                        nextVertexID = (nextVertexID + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                $t2 = Bridge.getEnumerator(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge(), System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge));
                try {
                    while ($t2.moveNext()) {
                        var kvp1 = $t2.Current;
                        if (Bridge.referenceEquals(kvp1.value.Reason, "good swap")) {
                            var v = vertexLookup.get(kvp1.key);

                            var f = { v : kvp1.value.Board.FindPermutation(kvp1.key) };
                            var colors = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f.v, System.Array.init([kvp1.value.ColorPair.item1, kvp1.value.ColorPair.item2], System.Int32))).toList(System.Int32);
                            var colorPair = { item1: colors.getItem(0), item2: colors.getItem(1) };

                            $t3 = Bridge.getEnumerator(kvp1.value.Swaps);
                            try {
                                while ($t3.moveNext()) {
                                    var swap = $t3.Current;
                                    var tempBoard = kvp1.key.Clone();
                                    var moves = System.Linq.Enumerable.from(swap.item2).select((function ($me, f) {
                                            return function (m) {
                                                return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.MapMove(f.v, m.$clone());
                                            };
                                        })(this, f)).toList(Algorithms.FixerBreaker.Move);
                                    tempBoard.DoMoveCombination(moves);

                                    var w = vertexLookup.get(tempBoard);
                                    outEdges.get(v).add(w);

                                    swapLookup.set({ item1: v, item2: w }, swap);
                                }
                            } finally {
                                if (Bridge.is($t3, System.IDisposable)) {
                                    $t3.System$IDisposable$dispose();
                                }
                            }}
                    }
                } finally {
                    if (Bridge.is($t2, System.IDisposable)) {
                        $t2.System$IDisposable$dispose();
                    }
                }
                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < nextVertexID; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < nextVertexID; j = (j + 1) | 0) {
                        if (outEdges.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (outEdges.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return { item1: new Algorithms.Graph.$ctor1(edgeWeights), item2: boardLookup, item3: swapLookup };
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Mind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind, {
        f1: function (a) {
            return !a.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent;
        },
        f2: function (a) {
            return a.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent;
        },
        f3: function (b1) {
            return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, 0);
        },
        f4: function (a) {
            return Bridge.is(a, Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer);
        },
        f5: function (set) {
            return set;
        },
        f6: function (list) {
            return Algorithms.Int64Usage.ToInt64(list);
        },
        f7: function (kvp) {
            return this.GenerateKnowledgeTree(kvp.key);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge", {
        fields: {
            _boardLookup: null,
            _improvementLookup: null,
            _lostBoards: null
        },
        props: {
            ColorCount: 0,
            ColorPairs: null,
            LostBoards: {
                get: function () {
                    return this._lostBoards;
                }
            }
        },
        ctors: {
            init: function () {
                this._boardLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))();
                this._improvementLookup = new (System.Collections.Generic.Dictionary$2(System.String,System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge)))();
                this._lostBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();
            },
            ctor: function (colorCount) {
                this.$initialize();
                this.ColorCount = colorCount;
                this.SetupColorPairs();
            }
        },
        methods: {
            getItem: function (board) {
                var b = { };
                this._boardLookup.tryGetValue(board, b);
                return b.v;
            },
            getItem$1: function (reason, board) {
                var b = { };
                this.ImprovementLookup(reason).tryGetValue(board, b);
                return b.v;
            },
            setItem$1: function (reason, board, value) {
                this.ImprovementLookup(reason).set(board, value);
            },
            ImprovementLookup: function (reason) {
                var lookup = { };
                if (!this._improvementLookup.tryGetValue(reason, lookup)) {
                    lookup.v = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))();
                    this._improvementLookup.set(reason, lookup.v);
                }

                return lookup.v;
            },
            AddWin: function (board, reason) {
                var knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason);
                this._boardLookup.set(board, knowledge);

                return knowledge;
            },
            AddWin$1: function (board, reason, winDepth, colorPair, goodSwaps) {
                var $t;
                var knowledge = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason), $t.Depth = winDepth, $t.ColorPair = colorPair, $t.Swaps = goodSwaps, $t);
                this._boardLookup.set(board, knowledge);

                return knowledge;
            },
            AddImprovement: function (board, reason, winDepth, colorPair, goodSwaps) {
                var $t;
                var knowledge = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason), $t.Depth = winDepth, $t.ColorPair = colorPair, $t.Swaps = goodSwaps, $t);
                this.setItem$1(reason, board, knowledge);

                return knowledge;
            },
            AddLoss: function (b) {
                this._lostBoards.add(b);
            },
            SetupColorPairs: function () {
                this.ColorPairs = new (System.Collections.Generic.List$1(System.Object))();
                var colors = System.Linq.Enumerable.range(0, this.ColorCount).toList(System.Int32);

                for (var i = 0; i < colors.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < colors.Count; j = (j + 1) | 0) {
                        this.ColorPairs.add({ item1: colors.getItem(i), item2: colors.getItem(j) });
                    }
                }
            },
            CopyInto: function (potKnowledge) {
                var $t;
                $t = Bridge.getEnumerator(this._boardLookup);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        potKnowledge.AddWin$1(kvp.key, kvp.value.Reason, kvp.value.Depth, kvp.value.ColorPair, kvp.value.Swaps);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            EnumerateBoardKnowledge: function () {
                return System.Linq.Enumerable.from(this._boardLookup).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge.f1);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge, {
        f1: function (x) {
            return x.value.Depth;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer", {
        fields: {
            _knowledge: null,
            _boardLookup: null,
            _boardIDLookup: null,
            _shrubs: null,
            _useShrubs: false
        },
        ctors: {
            init: function () {
                this._shrubs = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList))))();
            },
            ctor: function (knowledge, boardLookup, boardIDLookup, useShrubs) {
                if (useShrubs === void 0) { useShrubs = false; }

                this.$initialize();
                this._knowledge = knowledge;
                this._boardLookup = boardLookup;
                this._boardIDLookup = boardIDLookup;
                this._useShrubs = useShrubs;
            }
        },
        methods: {
            Analyze: function (boardID, wonBoardIDs) {
                var $t;
                if (!this._useShrubs) {
                    return this.AnalyzeShrubFree(boardID, wonBoardIDs);
                }

                var shrub = { };
                if (!this._shrubs.tryGetValue(boardID, shrub)) {
                    return this.InitializeShrubs(boardID, wonBoardIDs);
                }

                $t = Bridge.getEnumerator(shrub.v);
                try {
                    while ($t.moveNext()) {
                        var colorPairList = $t.Current;
                        Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList, colorPairList, function (branchList) {
                            return branchList.Intersects(wonBoardIDs);
                        }, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer.f1);
                        if (colorPairList.Count <= 0) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            AnalyzeShrubFree: function (boardID, wonBoardIDs) {
                var $t, $t1, $t2;
                var board = this._boardLookup.get(boardID);
                var potKnowledge = this._knowledge.getItem(board.Template.Value).getItem(board.ColorCount);

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var winningSwapExists = false;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        board.DoMoveCombination(swap);
                                        var childID = this._boardIDLookup.get(board);
                                        board.DoMoveCombination(swap);

                                        if (wonBoardIDs.Contains(childID)) {
                                            winningSwapExists = true;
                                            break;
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            InitializeShrubs: function (boardID, wonBoardIDs) {
                var $t, $t1, $t2;
                var shrub = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList)))();
                this._shrubs.set(boardID, shrub);

                var board = this._boardLookup.get(boardID);
                var potKnowledge = this._knowledge.getItem(board.Template.Value).getItem(board.ColorCount);

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var colorPairList = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList))();
                        shrub.add(colorPairList);

                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var branchList = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList();
                                var winningSwapExists = false;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        board.DoMoveCombination(swap);
                                        var childID = this._boardIDLookup.get(board);
                                        board.DoMoveCombination(swap);

                                        if (wonBoardIDs.Contains(childID)) {
                                            winningSwapExists = true;
                                            break;
                                        }

                                        branchList.Add(childID);
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    colorPairList.add(branchList);
                                    winningSwapAlwaysExists = false;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer, {
        f1: function (x) { }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList", {
        fields: {
            _data: null,
            _length: 0
        },
        ctors: {
            ctor: function (initialCapacity) {
                if (initialCapacity === void 0) { initialCapacity = 16; }

                this.$initialize();
                this._data = System.Array.init(initialCapacity, 0, System.Int32);
            }
        },
        methods: {
            Add: function (x) {
                var i = System.Array.binarySearch(this._data, 0, this._length, x);
                if (i >= 0) {
                    return;
                }

                this.EnsureCapacity();

                i = ~i;
                if (i < this._length) {
                    System.Array.copy(this._data, i, this._data, ((i + 1) | 0), ((this._length - i) | 0));
                }

                this._data[System.Array.index(i, this._data)] = x;
                this._length = (this._length + 1) | 0;
            },
            Contains: function (x) {
                return System.Array.binarySearch(this._data, 0, this._length, x) >= 0;
            },
            Intersects: function (other) {
                var j = 0;
                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    var k = System.Array.binarySearch(other._data, j, ((other._length - j) | 0), this._data[System.Array.index(i, this._data)]);
                    if (k >= 0) {
                        return true;
                    }
                    j = ~k;
                }

                return false;
            },
            EnsureCapacity: function () {
                if (this._length >= this._data.length) {
                    var data = System.Array.init(Bridge.Int.mul(2, this._data.length), 0, System.Int32);
                    System.Array.copy(this._data, 0, data, 0, this._data.length);
                    this._data = data;
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier", {
        statics: {
            fields: {
                _lookup: null
            },
            ctors: {
                init: function () {
                    this._lookup = new (System.Collections.Generic.Dictionary$2(System.String,System.Object))();
                }
            },
            methods: {
                ToListStringInLexOrder: function (ss, pp, maxPot) {
                    if (maxPot === void 0) { maxPot = -1; }
                    var lists = System.Linq.Enumerable.from(ss).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f1).toList(System.Collections.Generic.List$1(System.Int32));
                    var pot = maxPot;
                    if (pot <= 0) {
                        pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f2).distinct().count();
                    }

                    var stacks = System.Linq.Enumerable.from(lists).where(function (s) {
                            return s.Count <= pot;
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.ToLexOrder(Bridge.toArray(System.Linq.Enumerable.from(stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f4)).join("|"), pp, maxPot);
                },
                ToLexOrder: function (stacksString, pp, maxPot) {
                    var $t;
                    var key = System.String.concat(stacksString, ";", maxPot);
                    var tup = { };
                    if (Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier._lookup.tryGetValue(key, tup)) {
                        pp.v = tup.v.item2;
                        return tup.v.item1;
                    }

                    pp.v = null;
                    var lexSmallest;
                    var stacks = System.Linq.Enumerable.from(System.String.split(stacksString, [124].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f6).toList(System.Collections.Generic.List$1(System.Int32));
                    lexSmallest = stacksString;

                    var pot = System.Linq.Enumerable.from(stacks).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f2).distinct().count();
                    if (maxPot > 0) {
                        pot = maxPot;
                    }

                    $t = Bridge.getEnumerator(Algorithms.Utility.Permutation.EnumerateAll(pot), Algorithms.Utility.Permutation);
                    try {
                        while ($t.moveNext()) {
                            var p = $t.Current;
                            var permutedString = Bridge.toArray(System.Linq.Enumerable.from(stacks).select((function ($me, p) {
                                        return function (s) {
                                            return Bridge.toArray(System.Linq.Enumerable.from(s).select(function (a) {
                                                        return p.getItem(a);
                                                    }).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f3)).join("");
                                        };
                                    })(this, p))).join("|");
                            if (System.String.compare(permutedString, lexSmallest) <= 0) {
                                lexSmallest = permutedString;
                                pp.v = p;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier._lookup.set(key, { item1: lexSmallest, item2: pp.v });
                    return lexSmallest;
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier, {
        f1: function (l) {
            return Algorithms.Int64Usage.ToSet(l);
        },
        f2: function (l) {
            return l;
        },
        f3: function (x) {
            return x;
        },
        f4: function (s) {
            return Bridge.toArray(System.Linq.Enumerable.from(s).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f3)).join("");
        },
        f5: function (c) {
            return System.Int32.parse(String.fromCharCode(c));
        },
        f6: function (s) {
            return System.Linq.Enumerable.from(System.String.toCharArray(s, 0, s.length)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f5).toList(System.Int32);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo", {
        props: {
            Alpha: 0,
            Beta: 0,
            Partition: null,
            Response: System.UInt64(0),
            SwapVertices: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.ColorPairOutcome", {
        fields: {
            Colors: null,
            FixerOutcomes: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome", {
        fields: {
            BreakerChoice: null,
            Exits: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter");

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing", {
        statics: {
            fields: {
                MaxLength: 0,
                _m: null
            },
            ctors: {
                init: function () {
                    this.MaxLength = 32;
                },
                ctor: function () {
                    Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m = new (System.Collections.Generic.List$1(System.UInt64))(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.MaxLength);

                    var RNG = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var b = System.Array.init(8, 0, System.Byte);

                    for (var i = 0; i < Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.MaxLength; i = (i + 1) | 0) {
                        RNG.nextBytes(b);
                        Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m.add(System.BitConverter.toUInt64(b, 0));
                    }
                }
            },
            methods: {
                Hash: function (list, length) {
                    var hash = list[System.Array.index(0, list)];

                    for (var i = 1; i < length; i = (i + 1) | 0) {
                        hash = hash.add((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m.getItem(((i - 1) | 0)).mul(list[System.Array.index(i, list)])));
                    }

                    return System.Int64.clip32(hash.shru(32));
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder", {
        props: {
            Mind: null,
            Cases: null,
            UsePermutations: false
        },
        ctors: {
            ctor: function (mind, usePermutations) {
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                this.Mind = mind;
                this.UsePermutations = usePermutations;
                this.ExtractCases();
            }
        },
        methods: {
            ExtractCases: function () {
                var $t, $t1;
                this.Cases = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase))();

                var caseNumber = 0;

                var colorableCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, 0, this.Mind.ColorableBoards);
                this.Cases.add(colorableCase);
                caseNumber = (caseNumber + 1) | 0;

                var remainingBoards = System.Linq.Enumerable.from(this.Mind.NonColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                var wonBoards = System.Linq.Enumerable.from(this.Mind.ColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                while (remainingBoards.Count > 0) {
                    var proofCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber);
                    this.Cases.add(proofCase);

                    var addedBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    $t = Bridge.getEnumerator(remainingBoards);
                    try {
                        while ($t.moveNext()) {
                            var board = $t.Current;
                            var treeInfo = this.Mind.GetWinTreeInfo(board);

                            if (System.Linq.Enumerable.from(treeInfo).all(function (bc) {
                                    return wonBoards.contains(new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount));
                                })) {
                                addedBoards.add(board);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t1 = Bridge.getEnumerator(addedBoards);
                    try {
                        while ($t1.moveNext()) {
                            var board1 = $t1.Current;
                            proofCase.AddBoard(board1);
                            wonBoards.add(board1);
                            remainingBoards.remove(board1);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    caseNumber = (caseNumber + 1) | 0;
                }
            },
            GetHandledCaseNumber: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return ((System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase, this.Cases, function (cc) {
                        return cc.Boards.contains(childBoard);
                    })).first() + 1) | 0);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions", {
        statics: {
            methods: {
                ToTex: function (matcher, lists, listSize) {
                    if (Bridge.referenceEquals(matcher.Name, "*")) {
                        return System.String.concat(Bridge.toArray(System.Linq.Enumerable.repeat("\\wild", listSize)).join(""), " ");
                    }

                    var i = { };
                    if (!System.Int32.tryParse(matcher.Name, i)) {
                        return "?";
                    }

                    return Bridge.toArray(lists.getItem(i.v)).join("");
                },
                GetActiveListIndex: function (i, b, maxPot) {
                    return ((System.Linq.Enumerable.from(b.Stacks.Value).take(((i + 1) | 0)).count(function (ss) {
                        return Algorithms.Int64Usage.PopulationCount(ss) < maxPot;
                    }) - 1) | 0);
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions", {
        statics: {
            methods: {
                GetArticle: function (letter) {
                    switch (letter) {
                        case "X": 
                            return "an";
                        case "Y": 
                            return "a";
                        case "Z": 
                            return "a";
                    }

                    return "";
                },
                Listify: function (T, strings, connector) {
                    if (connector === void 0) { connector = "and"; }
                    var ll = System.Linq.Enumerable.from(strings).toList(T);
                    if (ll.Count <= 0) {
                        return "";
                    }
                    if (ll.Count === 1) {
                        return ll.getItem(0).toString();
                    }

                    if (connector != null) {
                        return System.String.concat(Bridge.toArray(System.Linq.Enumerable.from(ll).take(((ll.Count - 1) | 0))).join(", "), " ", connector, " ", System.Linq.Enumerable.from(ll).last());
                    }

                    return Bridge.toArray(ll).join(", ");
                },
                Wordify: function (n) {
                    switch (n) {
                        case 0: 
                            return "first";
                        case 1: 
                            return "second";
                        case 2: 
                            return "third";
                        case 3: 
                            return "fourth";
                        case 4: 
                            return "fifth";
                        case 5: 
                            return "sixth";
                        case 6: 
                            return "seventh";
                        case 7: 
                            return "eighth";
                        case 8: 
                            return "ninth";
                        case 9: 
                            return "tenth";
                        case 10: 
                            return "eleventh";
                    }

                    return (((n + 1) | 0)) + "-th";
                },
                Except: function (T, list, t) {
                    return System.Linq.Enumerable.from(list).except(System.Array.init([t], T));
                },
                MaxIndex: function (T, list, value) {
                    var $t;
                    var maxIndex = -1;
                    var max = -2147483648;
                    var i = 0;
                    $t = Bridge.getEnumerator(list, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var v = value(t);
                            if (v > max) {
                                max = v;
                                maxIndex = i;
                            }

                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return maxIndex;
                },
                Distinct: function (T, S, list, value) {
                    var $t;
                    var distinct = new (System.Collections.Generic.List$1(T))();
                    $t = Bridge.getEnumerator(list, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            if (!System.Linq.Enumerable.from(distinct).any((function ($me, t) {
                                    return function (tt) {
                                        return Bridge.equals(value(tt), value(t));
                                    };
                                })(this, t))) {
                                distinct.add(t);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return distinct;
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions", {
        statics: {
            fields: {
                Alphabet: null
            },
            ctors: {
                init: function () {
                    this.Alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                }
            },
            methods: {
                ToXYZ: function (board) {
                    return Bridge.toArray(System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1)).join("");
                },
                ToXYZ$1: function (stack) {
                    switch (stack.toString()) {
                        case "3": 
                            return "X";
                        case "5": 
                            return "Y";
                        case "6": 
                            return "Z";
                    }

                    return "";
                },
                To012: function (board) {
                    return System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.To012$1).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f1).toList(System.Int32);
                },
                To012$1: function (stack) {
                    if (stack.gt(System.Int64(6))) {
                        return -1;
                    }
                    return (((((Bridge.Int.div(System.Int64.clip32(stack), 2)) | 0)) - 1) | 0);
                },
                ToCompactedPartitionId: function (board, partition) {
                    var xyz = System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1).toList(System.String);
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToPartitionId$1(xyz, partition);
                },
                ToPartitionId: function (board, partition) {
                    var xyz = System.Linq.Enumerable.from(board.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f2).toList(System.String);

                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToPartitionId$1(xyz, partition);
                },
                ToPartitionId$1: function (xyz, partition) {
                    var $t;
                    var pp = System.Linq.Enumerable.from(partition).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f3).toList(System.Collections.Generic.List$1(System.Int32));
                    for (var i = 0; i < pp.Count; i = (i + 1) | 0) {
                        var l = String.fromCharCode(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.Alphabet.charCodeAt(i));
                        $t = Bridge.getEnumerator(pp.getItem(i));
                        try {
                            while ($t.moveNext()) {
                                var j = $t.Current;
                                xyz.setItem(j, l);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    return Bridge.toArray(xyz).join("");
                },
                GetXYZIndex: function (i, b) {
                    return ((System.Linq.Enumerable.from(b.Stacks.Value).take(((i + 1) | 0)).count($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f4) - 1) | 0);
                },
                ToTex: function (matcher) {
                    switch (matcher.Name) {
                        case "*": 
                            return "\\wild ";
                        case "0": 
                            return "X";
                        case "1": 
                            return "Y";
                        case "2": 
                            return "Z";
                        case "!0": 
                            return "\\bar{{X}}";
                        case "!1": 
                            return "\\bar{{Y}}";
                        case "!2": 
                            return "\\bar{{Z}}";
                    }

                    return "?";
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions, {
        f1: function (x) {
            return x >= 0;
        },
        f2: function (stack) {
            var s = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1(stack);
            if (s.length <= 0) {
                return "*";
            }
            return s;
        },
        f3: function (part) {
            return System.Linq.Enumerable.from(part).min();
        },
        f4: function (ss) {
            return Algorithms.Int64Usage.PopulationCount(ss) === 2;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase", {
        props: {
            Mind: null,
            Boards: null,
            BreakerWin: false,
            CaseNumber: 0,
            Superabundant: false
        },
        ctors: {
            ctor: function (mind, caseNumber, boards) {
                if (boards === void 0) { boards = null; }

                this.$initialize();
                this.Mind = mind;
                this.CaseNumber = caseNumber;
                this.Boards = boards;
                if (this.Boards == null) {
                    this.Boards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                }
            }
        },
        methods: {
            AddBoard: function (board) {
                this.Boards.add(board);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard", {
        statics: {
            methods: {
                Create: function (T, lists) {
                    var pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f1).distinct().toList(T);
                    var numbering = Algorithms.DataStructures.BijectionExtensions.NumberObjects(T, pot);

                    var intLists = System.Linq.Enumerable.from(lists).select(function (l) {
                            return System.Linq.Enumerable.from(numbering.Apply(l)).toList(System.Int32);
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                    var trace = System.Array.init(pot.Count, System.UInt64(0), System.UInt64);

                    for (var i = 0; i < pot.Count; i = (i + 1) | 0) {
                        trace[System.Array.index(i, trace)] = Algorithms.Int64Usage.ToUInt64(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), intLists, function (ll) {
                            return ll.contains(i);
                        }));
                    }

                    pot = System.Linq.Enumerable.from(pot).orderBy(function (c) {
                            return trace[System.Array.index(pot.indexOf(c), trace)];
                        }).toList(T);
                    numbering = Algorithms.DataStructures.BijectionExtensions.NumberObjects(T, pot);

                    System.Array.sort(trace);
                    return { item1: new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, lists.Count), item2: numbering };
                },
                FromLists: function (lists) {
                    var pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f1).distinct().toList(System.Int32);
                    var trace = System.Array.init(pot.Count, System.UInt64(0), System.UInt64);

                    for (var i = 0; i < pot.Count; i = (i + 1) | 0) {
                        trace[System.Array.index(i, trace)] = Algorithms.Int64Usage.ToUInt64(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), lists, function (ll) {
                            return ll.contains(i);
                        }));
                    }

                    System.Array.sort(trace);
                    return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, lists.Count);
                }
            }
        },
        fields: {
            _trace: null,
            _length: 0,
            _stackCount: 0,
            _hashCode: 0
        },
        props: {
            Stacks: null
        },
        ctors: {
            ctor: function (trace, stackCount) {
                this.$initialize();
                this._trace = trace;
                this._length = this._trace.length;
                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);

                this.MakeLazyStacks();
            },
            $ctor1: function (trace, i, j, swap, stackCount) {
                this.$initialize();
                this._trace = System.Array.init(trace.length, System.UInt64(0), System.UInt64);
                this._length = 0;
                for (var k = 0; k < trace.length; k = (k + 1) | 0) {
                    var v = System.UInt64(0);
                    if (k === i || k === j) {
                        v = trace[System.Array.index(k, trace)].xor(swap);
                    } else {
                        v = trace[System.Array.index(k, trace)];
                    }

                    if (v.gt(System.UInt64(0))) {
                        var q = this._length;
                        while (q > 0 && this._trace[System.Array.index(((q - 1) | 0), this._trace)].gt(v)) {
                            q = (q - 1) | 0;
                        }

                        if (q < this._length) {
                            System.Array.copy(this._trace, q << 3, this._trace, (((q + 1) | 0)) << 3, (((this._length - q) | 0)) << 3);
                        }
                        this._trace[System.Array.index(q, this._trace)] = v;

                        this._length = (this._length + 1) | 0;
                    }
                }

                this._stackCount = stackCount;
                this.MakeLazyStacks();

                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            }
        },
        methods: {
            ToListStringInLexOrder$1: function (maxPot) {
                if (maxPot === void 0) { maxPot = -1; }
                var pp = { };
                return this.ToListStringInLexOrder(pp, maxPot);
            },
            ToListStringInLexOrder: function (pp, maxPot) {
                if (maxPot === void 0) { maxPot = -1; }
                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.ToListStringInLexOrder(this.Stacks.Value, pp, maxPot);
            },
            GetPermutation: function (i, j, swap) {
                var t = System.Linq.Enumerable.from(this._trace).toList(System.UInt64);

                t.setItem(i, t.getItem(i).xor(swap));
                t.setItem(j, t.getItem(j).xor(swap));

                if (t.getItem(i).equals(System.UInt64(0))) {
                    t.setItem(i, System.UInt64(2147483647));
                }
                if (t.getItem(j).equals(System.UInt64(0))) {
                    t.setItem(j, System.UInt64(2147483647));
                }

                var sequence = System.Linq.Enumerable.from(t).zip(System.Linq.Enumerable.range(0, t.Count), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f2).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f3).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f4).toList(System.Int32);

                return new Algorithms.Utility.Permutation.$ctor1(sequence);
            },
            Permute: function (p, indices) {
                var trace = System.Array.init(this._trace.length, System.UInt64(0), System.UInt64);

                var permutedIndices = p.Apply(System.Int32, indices);
                for (var i = 0; i < this._trace.length; i = (i + 1) | 0) {
                    var n = this._trace[System.Array.index(i, this._trace)];
                    var m = this._trace[System.Array.index(i, this._trace)];

                    for (var j = 0; j < indices.Count; j = (j + 1) | 0) {
                        m = m.and(((System.UInt64(1).shl(indices.getItem(j))).not()));
                    }

                    for (var j1 = 0; j1 < indices.Count; j1 = (j1 + 1) | 0) {
                        if ((n.and((System.UInt64(1).shl(indices.getItem(j1))))).ne(System.UInt64(0))) {
                            m = m.or((System.UInt64(1).shl(permutedIndices.getItem(j1))));
                        }
                    }

                    trace[System.Array.index(i, trace)] = m;
                }

                System.Array.sort(trace);

                return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, this._stackCount);
            },
            MakeLazyStacks: function () {
                this.Stacks = new (Algorithms.Lazy$1(System.Array.type(System.Int64))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this._stackCount, System.Int64(0), System.Int64);
                    var traceBits = System.Linq.Enumerable.from(this._trace).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f5).toList(System.Collections.Generic.List$1(System.Int32));
                    for (var c = 0; c < traceBits.Count; c = (c + 1) | 0) {
                        $t = Bridge.getEnumerator(traceBits.getItem(c));
                        try {
                            while ($t.moveNext()) {
                                var i = $t.Current;
                                s[System.Array.index(i, s)] = s[System.Array.index(i, s)].or((System.Int64(1).shl(c)));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                    return s;
                }));
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._trace[System.Array.index(i, this._trace)].ne(other._trace[System.Array.index(i, other._trace)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f6)).join("|");
            }
        }
    });

    Bridge.define("$AnonymousType$1", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (t, i) {
                this.T = t;
                this.I = i;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$1)) {
                    return false;
                }
                return Bridge.equals(this.T, o.T) && Bridge.equals(this.I, o.I);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196186, this.T, this.I]);
                return h;
            },
            toJSON: function () {
                return {
                    T : this.T,
                    I : this.I
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"I","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_I","t":8,"rt":System.Int32,"fg":"I"},"fn":"I"},{"a":2,"n":"T","t":16,"rt":System.UInt64,"g":{"a":2,"n":"get_T","t":8,"rt":System.UInt64,"fg":"T"},"fn":"T"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, {
        f1: function (l) {
            return l;
        },
        f2: function (tr, ii) {
            return new $asm.$AnonymousType$1(tr, ii);
        },
        f3: function (v) {
            return v.T;
        },
        f4: function (v) {
            return v.I;
        },
        f5: function (t) {
            return Algorithms.Int64Usage.ToSet$1(t);
        },
        f6: function (l) {
            return Bridge.toArray(Algorithms.Int64Usage.ToSet(l)).join("");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimColoringAnalyzer", {
        fields: {
            _lineGraph: null,
            _getEdgeColorList: null
        },
        ctors: {
            ctor: function (lineGraph, getEdgeColorList) {
                this.$initialize();
                this._lineGraph = lineGraph;
                this._getEdgeColorList = getEdgeColorList;
            }
        },
        methods: {
            Analyze: function (b) {
                return this._lineGraph.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64));
            },
            Analyze$1: function (b, coloring) {
                return this.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64), coloring);
            },
            ColorableWithoutEdge: function (b, edgeIndex) {
                return this._lineGraph.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    if (e === edgeIndex) {
                        return System.Int64(-1);
                    }

                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64));
            },
            AnalyzeWithoutEdge: function (b, coloring, edgeIndex) {
                return this.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    if (e === edgeIndex) {
                        return System.Int64(-1);
                    }

                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64), coloring);
            },
            IsChoosable: function (assignment, coloring) {
                coloring.v = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Int64))();
                return this.IsChoosable$1(assignment, 0, coloring.v);
            },
            IsChoosable$1: function (assignment, v, coloring) {
                var $t;
                if (v >= this._lineGraph.N) {
                    return true;
                }

                var colors = assignment.getItem(v);
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._lineGraph._laterNeighbors.Value.getItem(v));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$1(assignmentCopy, ((v + 1) | 0), coloring)) {
                        coloring.set(v, color);
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer", {
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        props: {
            LastWinChildCount: 0,
            ProofFindingMode: false,
            WeaklyFixable: false,
            WinTreeInfo: null,
            LossTreeInfo: null
        },
        ctors: {
            init: function () {
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            },
            ctor: function (n, proofFindingMode, weaklyFixable) {
                if (proofFindingMode === void 0) { proofFindingMode = false; }
                if (weaklyFixable === void 0) { weaklyFixable = false; }

                this.$initialize();
                this._fixerResponses = System.Array.init(8192, System.UInt64(0), System.UInt64);
                this.ProofFindingMode = proofFindingMode;
                this.WeaklyFixable = weaklyFixable;
                if (this.ProofFindingMode) {
                    this.WinTreeInfo = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo))();
                    this.LossTreeInfo = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo))();
                }
            }
        },
        methods: {
            Analyze: function (board, wonBoards) {
                if (this.ProofFindingMode) {
                    return this.AnalyzeForProofInternal(board, wonBoards);
                }

                return this.AnalyzeInternal(board, wonBoards);
            },
            AnalyzeInternal: function (board, wonBoards) {
                var $t;
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        var x = board._trace[System.Array.index(i, board._trace)];
                        var y = board._trace[System.Array.index(j, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t.moveNext()) {
                                var breakerChoice = $t.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                for (var k = 1; k < this._fixerResponseCount; k = (k + 1) | 0) {
                                    if (this.WeaklyFixable && Algorithms.Int64Usage.PopulationCount$1(this._fixerResponses[System.Array.index(k, this._fixerResponses)]) > 2) {
                                        continue;
                                    }

                                    var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i, j, this._fixerResponses[System.Array.index(k, this._fixerResponses)], board._stackCount);
                                    if (wonBoards.contains(childBoard)) {
                                        winningSwapExists = true;
                                        break;
                                    }
                                }

                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                }

                return false;
            },
            AnalyzeForProofInternal: function (board, wonBoards) {
                var $t, $t1, $t2;
                var winInfo = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo();
                this.WinTreeInfo.set(board, winInfo);

                var lossInfo = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo();
                this.LossTreeInfo.set(board, lossInfo);

                var colorPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        colorPairs.add({ item1: i, item2: j });
                    }
                }

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(colorPairs).orderBy(function (cp) {
                        return Algorithms.Int64Usage.PopulationCount$1((board._trace[System.Array.index(cp.item1, board._trace)].xor(board._trace[System.Array.index(cp.item2, board._trace)])));
                    }));
                try {
                    while ($t.moveNext()) {
                        var cp = $t.Current;
                        var i1 = cp.item1;
                        var j1 = cp.item2;

                        var x = board._trace[System.Array.index(i1, board._trace)];
                        var y = board._trace[System.Array.index(j1, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t1.moveNext()) {
                                var breakerChoice = $t1.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                var responses = System.Linq.Enumerable.range(1, ((this._fixerResponseCount - 1) | 0)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer.f1)).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer.f2);
                                $t2 = Bridge.getEnumerator(responses);
                                try {
                                    while ($t2.moveNext()) {
                                        var response = $t2.Current;
                                        if (this.WeaklyFixable && Algorithms.Int64Usage.PopulationCount$1(response) > 2) {
                                            break;
                                        }

                                        var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i1, j1, response, board._stackCount);
                                        if (wonBoards.contains(childBoard)) {
                                            winningSwapExists = true;
                                            winInfo.Add(breakerChoice, i1, j1, response);
                                            break;
                                        } else {
                                            lossInfo.Add(breakerChoice, i1, j1, response);
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    winInfo.clear();
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            this.LastWinChildCount = Algorithms.Int64Usage.PopulationCount$1(swappable);
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;
                var tableLength = this._fixerResponses.length;
                while (tableLength <= this._fixerResponseCount) {
                    tableLength = Bridge.Int.mul(tableLength, 2);
                }
                if (tableLength > this._fixerResponses.length) {
                    this._fixerResponses = System.Array.init(tableLength, System.UInt64(0), System.UInt64);
                }

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer, {
        f1: function (k) {
            return this._fixerResponses[System.Array.index(k, this._fixerResponses)];
        },
        f2: function (fr) {
            return Algorithms.Int64Usage.PopulationCount$1(fr);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Template", {
        statics: {
            methods: {
                op_Implicit: function (s) {
                    return new Algorithms.FixerBreaker.KnowledgeEngine.Template.$ctor1(s, null);
                    //return new Template(Regex.Split(s ?? "", @"\D+").Select(MetaKnowledge.TryParseInt).Where(x => x.HasValue).Select(x => x.Value).ToList());
                }
            }
        },
        props: {
            Sizes: null
        },
        ctors: {
            ctor: function (sizes) {
                this.$initialize();
                this.Sizes = sizes;
            },
            $ctor1: function (s, g) {
                this.$initialize();
            }
        },
        methods: {
            equals: function (o) {
                return this.Equals(Bridge.as(o, Algorithms.FixerBreaker.KnowledgeEngine.Template));
            },
            Equals: function (t) {
                if (!Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(t)) {
                    return false;
                }

                return System.Linq.Enumerable.from(this.Sizes).sequenceEqual(t.Sizes);
            },
            getHashCode: function () {
                return System.Linq.Enumerable.from(this.Sizes).aggregate(this.Sizes.Count, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Template.f1);
            },
            toString: function () {
                return Bridge.toArray(this.Sizes).join(",");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Template", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Template, {
        f1: function (t, s) {
            return ((Bridge.Int.mul(31, t) + s) | 0);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge", {
        fields: {
            _potLookup: null
        },
        props: {
            Template: null,
            LostBoards: {
                get: function () {
                    return System.Linq.Enumerable.from(this._potLookup.getValues()).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge.f1).distinct();
                }
            }
        },
        ctors: {
            init: function () {
                this._potLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge))();
            },
            ctor: function (template) {
                this.$initialize();
                this.Template = template;
            }
        },
        methods: {
            getItem: function (colorCount) {
                var p = { };
                if (!this._potLookup.tryGetValue(colorCount, p)) {
                    p.v = new Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge(colorCount);
                    this._potLookup.set(colorCount, p.v);
                }

                return p.v;
            },
            Promote: function (colorCount) {
                this.getItem(colorCount).CopyInto(this.getItem(((colorCount + 1) | 0)));
            },
            KnowledgeExists: function (colorCount) {
                return this._potLookup.containsKey(colorCount);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge, {
        f1: function (pk) {
            return pk.LostBoards;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress", {
        props: {
            IsInitialThought: false,
            BoardsAdded: null,
            BoardsRemoved: null,
            WinLength: 0
        }
    });

    Bridge.define("Algorithms.FixerBreaker.SlowBoard", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        statics: {
            methods: {
                UpdateHash: function (hash, value) {
                    hash.v = System.Int64.clip32(System.Int64(Bridge.Int.mul(100, hash.v)).add(value));
                },
                ApplyMapping$1: function (mapping, stack) {
                    return Algorithms.Int64Usage.ToInt64(Algorithms.FixerBreaker.SlowBoard.ApplyMapping(mapping, Algorithms.Int64Usage.ToSet(stack)));
                },
                ApplyMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item2.getItem(mapping.item1.indexOf(c));
                        });
                },
                ApplyInverseMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item1.getItem(mapping.item2.indexOf(c));
                        });
                },
                OtherTurn: function (turn) {
                    return ((1 - turn) | 0);
                }
            }
        },
        fields: {
            _hashCode: 0
        },
        props: {
            Stacks: null,
            PotSet: null,
            Degrees: null,
            DegreeChangeIndices: null,
            Template: null,
            Pot: System.Int64(0),
            ColorCount: 0,
            Turn: 0,
            N: 0,
            LastMove: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            init: function () {
                this.LastMove = new Algorithms.FixerBreaker.Move();
            },
            ctor: function (stacks, pot) {
                this.$initialize();
                this.Stacks = stacks;
                this.Pot = pot;
                this.Turn = Algorithms.FixerBreaker.Turn.Fixer;
                this.N = this.Stacks.Count;
                this.Template = new Algorithms.FixerBreaker.KnowledgeEngine.Template.ctor(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f1).toList(System.Int32));

                this.PotSet = Algorithms.Int64Usage.ToSet(this.Pot);
                this.ColorCount = System.Linq.Enumerable.from(this.PotSet).count();
                this.Degrees = new (System.Collections.Generic.List$1(System.Object))();
                this.DegreeChangeIndices = new (System.Collections.Generic.List$1(System.Int32))();
                this.ComputeHashCode();
            }
        },
        methods: {
            getItem: function (x) {
                return this.Stacks.getItem(x);
            },
            ComputeHashCode: function () {
                this._hashCode = this.N;
                Algorithms.FixerBreaker.SlowBoard.UpdateHash(Bridge.ref(this, "_hashCode"), this.Turn);

                this.Degrees.clear();
                this.DegreeChangeIndices.clear();

                this.Degrees.addRange(System.Linq.Enumerable.from(this.PotSet).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.SlowBoard.f2)).where($asm.$.Algorithms.FixerBreaker.SlowBoard.f3).orderBy($asm.$.Algorithms.FixerBreaker.SlowBoard.f4));

                var previousDegree = -1;
                for (var i = 0; i < this.Degrees.Count; i = (i + 1) | 0) {
                    var degree = this.Degrees.getItem(i);

                    Algorithms.FixerBreaker.SlowBoard.UpdateHash(Bridge.ref(this, "_hashCode"), System.Int64(degree.item2));

                    if (degree.item2 !== previousDegree) {
                        this.DegreeChangeIndices.add(i);
                        previousDegree = degree.item2;
                    }
                }

                this.DegreeChangeIndices.add(this.Degrees.Count);
            },
            MakeMove: function (move) {
                this.LastMove = move.$clone();

                if (move.Stack >= 0) {
                    this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                }

                this.Turn = Algorithms.FixerBreaker.SlowBoard.OtherTurn(this.Turn);

                this.ComputeHashCode();
            },
            DoMoveCombination: function (moves) {
                var $t;
                $t = Bridge.getEnumerator(moves, Algorithms.FixerBreaker.Move);
                try {
                    while ($t.moveNext()) {
                        var move = $t.Current.$clone();
                        this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ComputeHashCode();
            },
            Clone: function () {
                var clone = new Algorithms.FixerBreaker.SlowBoard(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();
                clone._hashCode = this._hashCode;

                clone.ComputeHashCode();

                return clone;
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.SlowBoard));
            },
            Equals: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }

                if (System.Linq.Enumerable.from(this.Stacks).sequenceEqual(other.Stacks)) {
                    if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                        return true;
                    }

                    if (this.LastMove.Stack === other.LastMove.Stack && (this.LastMove.Added === other.LastMove.Added && this.LastMove.Removed === other.LastMove.Removed || this.LastMove.Added === other.LastMove.Removed && this.LastMove.Removed === other.LastMove.Added)) {
                        return true;
                    }

                    return false;
                }

                return this.FindPermutation(other) != null;
            },
            FindPermutation: function (other) {
                if (!System.Linq.Enumerable.from(this.Degrees).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f4).sequenceEqual(System.Linq.Enumerable.from(other.Degrees).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f4))) {
                    return null;
                }

                var mappingPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < ((this.DegreeChangeIndices.Count - 1) | 0); i = (i + 1) | 0) {
                    var domain = new (System.Collections.Generic.List$1(System.Int32))();
                    var codomain = new (System.Collections.Generic.List$1(System.Int32))();

                    for (var j = this.DegreeChangeIndices.getItem(i); j < this.DegreeChangeIndices.getItem(((i + 1) | 0)); j = (j + 1) | 0) {
                        domain.add(this.Degrees.getItem(j).item1);
                        codomain.add(other.Degrees.getItem(j).item1);
                    }

                    mappingPairs.add({ item1: domain, item2: codomain });
                }

                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Object, System.Linq.Enumerable.from(mappingPairs).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f5))).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.SlowBoard.f6)).firstOrDefault(Bridge.fn.bind(this, function (mapping) {
                        return this.SequenceEqualPermuted(mapping, other);
                    }), null);
            },
            FlattenMapping: function (mapping) {
                return { item1: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.SlowBoard.f7).toList(System.Int32), item2: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.SlowBoard.f4).toList(System.Int32) };
            },
            SequenceEqualPermuted: function (mapping, other) {
                for (var i = 0; i < this.Stacks.Count; i = (i + 1) | 0) {
                    var permutedStack = Algorithms.FixerBreaker.SlowBoard.ApplyMapping$1(mapping, this.Stacks.getItem(i));
                    if (permutedStack.ne(other.Stacks.getItem(i))) {
                        return false;
                    }
                }

                if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                    return true;
                }

                if (this.LastMove.Stack !== other.LastMove.Stack) {
                    return false;
                }

                var ours = System.Array.init([this.LastMove.Added, this.LastMove.Removed], System.Int32);
                var theirs = function (_o9) {
                        _o9.add(other.LastMove.Added);
                        _o9.add(other.LastMove.Removed);
                        return _o9;
                    }(new (System.Collections.Generic.List$1(System.Int32))());

                return Algorithms.Utility.ListUtility.Equal(System.Int32, System.Linq.Enumerable.from(Algorithms.FixerBreaker.SlowBoard.ApplyMapping(mapping, ours)).toList(System.Int32), theirs);
            },
            ExactlyEqual: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }
                if (this.Pot.ne(other.Pot)) {
                    return false;
                }

                if (System.Linq.Enumerable.from(this.Stacks).sequenceEqual(other.Stacks)) {
                    if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                        return true;
                    }

                    if (this.LastMove.Stack === other.LastMove.Stack && (this.LastMove.Added === other.LastMove.Added && this.LastMove.Removed === other.LastMove.Removed || this.LastMove.Added === other.LastMove.Removed && this.LastMove.Removed === other.LastMove.Added)) {
                        return true;
                    }
                }

                return false;
            },
            getHashCode: function () {
                return this._hashCode;
            },
            getEnumerator: function () {
                return this.Stacks.getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f8)).join("|");
            },
            ToTex: function () {
                return Algorithms.GenericExtensions.JoinPretty(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f9), ", ");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.SlowBoard", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.SlowBoard, {
        f1: function (s) {
            return Algorithms.Int64Usage.PopulationCount(s);
        },
        f2: function (c) {
            return { item1: c, item2: System.Linq.Enumerable.from(this.Stacks).count(function (s) {
                        return Algorithms.Int64Usage.IsBitSet(s, System.Int64(c));
                    }) };
        },
        f3: function (x) {
            return x.item2 > 0;
        },
        f4: function (x) {
            return x.item2;
        },
        f5: function (mp) {
            return System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(mp.item2.Count)).select(function (p) {
                    return { item1: mp.item1, item2: p.Apply(System.Int32, mp.item2) };
                });
        },
        f6: function (mapping) {
            return this.FlattenMapping(mapping);
        },
        f7: function (x) {
            return x.item1;
        },
        f8: function (x) {
            return Algorithms.Int64Usage.ToSetStringSmall(x);
        },
        f9: function (stack, i) {
            return System.String.concat("$L(v_" + (((i + 1) | 0)) + ") = ", System.String.replaceAll(System.String.replaceAll(Algorithms.Int64Usage.ToSetString$2(stack), "{", "\\{"), "}", "\\}"), "$");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Turn", {
        $kind: "enum",
        statics: {
            fields: {
                Fixer: 0,
                Breaker: 1
            }
        }
    });

    Bridge.define("Algorithms.GenericExtensions", {
        statics: {
            methods: {
                Shuffle: function (T, list) {
                    var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var n = System.Array.getCount(list, T);
                    while (n > 1) {
                        n = (n - 1) | 0;
                        var k = rng.next$1(((n + 1) | 0));
                        var value = System.Array.getItem(list, k, T);
                        System.Array.setItem(list, k, System.Array.getItem(list, n, T), T);
                        System.Array.setItem(list, n, value, T);
                    }
                },
                ShuffleAll: function (lists) {
                    var $t;
                    var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var n = System.Array.getCount(System.Array.getItem(lists, 0, System.Collections.IList));
                    while (n > 1) {
                        n = (n - 1) | 0;
                        var k = rng.next$1(((n + 1) | 0));

                        $t = Bridge.getEnumerator(lists, System.Collections.IList);
                        try {
                            while ($t.moveNext()) {
                                var list = $t.Current;
                                var value = System.Array.getItem(list, k);
                                System.Array.setItem(list, k, System.Array.getItem(list, n));
                                System.Array.setItem(list, n, value);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                },
                EnList: function (T, t) {
                    return function (_o10) {
                            _o10.add(t);
                            return _o10;
                        }(new (System.Collections.Generic.List$1(T))());
                },
                IndicesWhere: function (T, source, condition) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (T, source, condition) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            $t,
                            t,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 0;
                                                $t = Bridge.getEnumerator(source, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    t = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            if (condition(t)) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            $enumerator.current = i;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            i = (i + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                FirstIndex: function (T, source, condition) {
                    var $t;
                    var i = 0;
                    $t = Bridge.getEnumerator(source, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            if (condition(t)) {
                                return i;
                            }

                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return -1;
                },
                JoinPretty: function (source, separator) {
                    var count = System.Linq.Enumerable.from(source).count();
                    if (count <= 0) {
                        return "";
                    }
                    if (count === 1) {
                        return System.Linq.Enumerable.from(source).first();
                    }
                    if (count === 2) {
                        return System.String.concat(System.Linq.Enumerable.from(source).elementAt(0), " and ", System.Linq.Enumerable.from(source).elementAt(1));
                    }

                    return System.String.concat(Bridge.toArray(System.Linq.Enumerable.from(source).take(((count - 1) | 0))).join(separator), " and ", System.Linq.Enumerable.from(source).elementAt(((count - 1) | 0)));
                },
                RemoveAll: function (T, list, predicate, onRemoved) {
                    var removed = 0;
                    for (var i = (list.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (predicate(list.getItem(i))) {
                            onRemoved(list.getItem(i));

                            list.removeAt(i);
                            removed = (removed + 1) | 0;
                        }
                    }

                    return removed;
                }
            }
        }
    });

    Bridge.define("Algorithms.Graph", {
        statics: {
            fields: {
                RNG: null,
                CacheHits: System.Int64(0),
                NodesVisited: System.Int64(0),
                DotColors: null,
                TikzColors: null
            },
            props: {
                MemoizeEulerianSubgraphCounting: false
            },
            ctors: {
                init: function () {
                    this.RNG = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    this.DotColors = $asm.$.Algorithms.Graph.f1(new (System.Collections.Generic.List$1(System.String))());
                    this.TikzColors = $asm.$.Algorithms.Graph.f2(new (System.Collections.Generic.List$1(System.String))());
                }
            },
            methods: {
                MaybeIsomorphic: function (A, B) {
                    if (A.N !== B.N) {
                        return false;
                    }
                    if (A.E !== B.E) {
                        return false;
                    }

                    A.TransitivePartition.Refine(A.DegreeSequence.Value, 1);
                    B.TransitivePartition.Refine(B.DegreeSequence.Value, 1);

                    A.TransitivePartition.Refine(A.NodeInvariantOne.Value, 2);
                    B.TransitivePartition.Refine(B.NodeInvariantOne.Value, 2);

                    A.TransitivePartition.Refine(A.NodeInvariantTwo.Value, 3);
                    B.TransitivePartition.Refine(B.NodeInvariantTwo.Value, 3);

                    if (!A.TransitivePartition.equals(B.TransitivePartition)) {
                        return false;
                    }

                    return true;
                },
                Isomorphic: function (A, B) {
                    if (!Algorithms.Graph.MaybeIsomorphic(A, B)) {
                        return false;
                    }

                    return A.Contains(B, true);
                },
                op_Equality: function (A, B) {
                    return A == null && B == null || A != null && B != null && A.equals(B);
                },
                op_Inequality: function (A, B) {
                    return !(Algorithms.Graph.op_Equality(A, B));
                },
                op_Addition: function (A, B) {
                    return A.DisjointUnion(B);
                },
                op_Multiply: function (A, B) {
                    return A.Join(B);
                },
                op_Multiply$1: function (k, A) {
                    var G = A.Clone();
                    for (var i = 1; i < k; i = (i + 1) | 0) {
                        G = Algorithms.Graph.op_Addition(G, A);
                    }

                    G.Initialize();
                    return G;
                }
            }
        },
        fields: {
            _adjacent: null,
            _neighbors: null,
            _complementNeighbors: null,
            _outNeighbors: null,
            _inNeighbors: null,
            _laterNeighbors: null,
            _vertices: null,
            _independentSets: null,
            _maximalIndependentSets: null,
            _independentTwoSets: null,
            _independentThreeSets: null,
            _vertexSubsets: null,
            _e: null
        },
        props: {
            N: 0,
            E: {
                get: function () {
                    return this._e.Value;
                }
            },
            Adjacent: {
                get: function () {
                    return this._adjacent;
                }
            },
            Directed: null,
            VertexWeight: null,
            Neighbors: {
                get: function () {
                    return this._neighbors.Value;
                }
            },
            ComplementNeighbors: {
                get: function () {
                    return this._complementNeighbors.Value;
                }
            },
            OutNeighbors: {
                get: function () {
                    return this._outNeighbors.Value;
                }
            },
            InNeighbors: {
                get: function () {
                    return this._inNeighbors.Value;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            },
            DegreeSequence: null,
            InDegreeSequence: null,
            OutDegreeSequence: null,
            NodeInvariantOne: null,
            NodeInvariantTwo: null,
            TransitivePartition: null,
            EdgeWeightsWithMultiplicity: null,
            IndependentSets: {
                get: function () {
                    return this._independentSets.Value;
                }
            },
            MaximalIndependentSets: {
                get: function () {
                    return this._maximalIndependentSets.Value;
                }
            },
            Size: {
                get: function () {
                    var t = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        t = (t + (this.OutDegree(i))) | 0;
                    }

                    return t;
                }
            },
            MaxDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.Degree(i));
                    }

                    return max;
                }
            },
            MinDegree: {
                get: function () {
                    var min = 2147483647;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        min = Math.min(min, this.Degree(i));
                    }

                    return min;
                }
            },
            MaxOutDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.OutDegree(i));
                    }

                    return max;
                }
            },
            MaxInDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.InDegree(i));
                    }

                    return max;
                }
            }
        },
        ctors: {
            $ctor1: function (edgeWeights, vertexWeight) {
                if (vertexWeight === void 0) { vertexWeight = null; }

                this.$initialize();
                this.N = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this.VertexWeight = vertexWeight;

                this._vertices = System.Linq.Enumerable.range(0, this.N).toList(System.Int32);
                this._adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                this.Directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (edgeWeights.getItem(k) !== 0) {
                            this._adjacent.set([i, j], true);
                            this._adjacent.set([j, i], true);

                            if (edgeWeights.getItem(k) > 0) {
                                this.Directed.set([i, j], true);
                            }
                            if (edgeWeights.getItem(k) < 0) {
                                this.Directed.set([j, i], true);
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                this.Initialize();
            },
            ctor: function (adjacent, vertexWeight) {
                if (vertexWeight === void 0) { vertexWeight = null; }

                this.$initialize();
                this._adjacent = adjacent;
                this.N = ((System.Array.getLength(this._adjacent, 0) - 1) + 1) | 0;
                this.VertexWeight = vertexWeight;

                this._vertices = System.Linq.Enumerable.range(0, this.N).toList(System.Int32);
                this.Directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                this.Initialize();
            }
        },
        methods: {
            getItem: function (x, y) {
                return this._adjacent.get([x, y]);
            },
            FromOutNeighborLists: function (outNeighbors) {
                var N = outNeighbors.count;

                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < N; j = (j + 1) | 0) {
                        if (outNeighbors.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (outNeighbors.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return new Algorithms.Graph.$ctor1(edgeWeights);
            },
            Initialize: function () {
                this._e = new (Algorithms.Lazy$1(System.Int32)).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f3));

                this.SetupNeighbors();
                this.InitializeLazyLoaders();
            },
            SetupNeighbors: function () {
                this._neighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f4));

                this._complementNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f5));

                this._outNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f6));

                this._inNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f7));

                this._laterNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f8));

                this.TransitivePartition = new Algorithms.TransitivePartition(this._vertices);

                this.DegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.Degree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.InDegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.InDegree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.OutDegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.OutDegree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.NodeInvariantOne = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t, $t1, $t2, $t3, $t4;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    var sp = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = ($t1 = this.DegreeSequence.Value)[System.Array.index(v, $t1)];
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var k = 3;
                    for (var i = 0; i < k; i = (i + 1) | 0) {
                        $t2 = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t2.moveNext()) {
                                var v1 = $t2.Current;
                                sp[System.Array.index(v1, sp)] = System.Int64.clip32(System.Int64((s[System.Array.index(v1, s)] << 13 | s[System.Array.index(v1, s)] >> 19)).xor(System.Int64(4278255360)));
                                $t3 = Bridge.getEnumerator(this.Neighbors.getItem(v1));
                                try {
                                    while ($t3.moveNext()) {
                                        var w = $t3.Current;
                                        sp[System.Array.index(v1, sp)] = (sp[System.Array.index(v1, sp)] + s[System.Array.index(w, s)]) | 0;
                                    }
                                } finally {
                                    if (Bridge.is($t3, System.IDisposable)) {
                                        $t3.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                        $t4 = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t4.moveNext()) {
                                var v2 = $t4.Current;
                                s[System.Array.index(v2, s)] = sp[System.Array.index(v2, sp)];
                            }
                        } finally {
                            if (Bridge.is($t4, System.IDisposable)) {
                                $t4.System$IDisposable$dispose();
                            }
                        }}

                    return s;
                }));

                this.NodeInvariantTwo = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t, $t1, $t2, $t3, $t4, $t5;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = ($t1 = this.DegreeSequence.Value)[System.Array.index(v, $t1)];

                            $t2 = Bridge.getEnumerator(this.Neighbors.getItem(v));
                            try {
                                while ($t2.moveNext()) {
                                    var w = $t2.Current;
                                    s[System.Array.index(v, s)] = (s[System.Array.index(v, s)] + (Bridge.Int.mul(3, ($t3 = this.DegreeSequence.Value)[System.Array.index(w, $t3)]))) | 0;

                                    $t4 = Bridge.getEnumerator(this.Neighbors.getItem(w));
                                    try {
                                        while ($t4.moveNext()) {
                                            var z = $t4.Current;
                                            if (z !== v) {
                                                s[System.Array.index(v, s)] = (s[System.Array.index(v, s)] + (Bridge.Int.mul(7, ($t5 = this.DegreeSequence.Value)[System.Array.index(z, $t5)]))) | 0;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t4, System.IDisposable)) {
                                            $t4.System$IDisposable$dispose();
                                        }
                                    }
                                }
                            } finally {
                                if (Bridge.is($t2, System.IDisposable)) {
                                    $t2.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));
            },
            InitializeLazyLoaders: function () {
                this._independentSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f9), true);
                this._independentTwoSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f11), true);
                this._independentThreeSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f13), true);
                this._vertexSubsets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f14));
                this._maximalIndependentSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f15), true);
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f16)).join(" ");
            },
            getHashCode: function () {
                return Bridge.getHashCode(this.toString());
            },
            equals: function (obj) {
                var H = Bridge.as(obj, Algorithms.Graph);
                if (Algorithms.Graph.op_Equality(H, null)) {
                    return false;
                }

                if (this.N !== H.N) {
                    return false;
                }
                if (this.E !== H.E) {
                    return false;
                }

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j]) !== H.getItem(i, j)) {
                            return false;
                        }
                    }
                }

                return true;
            },
            PermuteVertices: function (p) {
                var $t;
                var adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([p.getItem(i), p.getItem(j)], this._adjacent.get([i, j]));
                    }
                }

                var vertexWeight = null;
                if (this.VertexWeight != null) {
                    vertexWeight = new (System.Collections.Generic.List$1(System.Int32))();
                    var pp = p.Inverse();

                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            vertexWeight.add(this.VertexWeight.getItem(pp.getItem(v)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return new Algorithms.Graph.ctor(adjacent, vertexWeight);
            },
            Contains: function (A, induced) {
                return this.Contains$1(A, induced, $asm.$.Algorithms.Graph.f17);
            },
            Contains$1: function (A, induced, condition) {
                if (this.N < A.N) {
                    return false;
                }

                var tau = new (System.Collections.Generic.List$1(System.Int32))();
                return this.Contains$2(A, induced, condition, System.Array.init(A.N, 0, System.Int32), tau, 0);
            },
            Contains$2: function (A, induced, condition, tau, placed, v) {
                var $t;
                if (v === A.N) {
                    return true;
                }

                var images = System.Linq.Enumerable.from(placed).select(function (u) {
                        return tau[System.Array.index(u, tau)];
                    }).orderBy($asm.$.Algorithms.Graph.f18).toList(System.Int32);
                var requiredNeighbors = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.IntersectionSorted$1(A.Neighbors.getItem(v), placed)).select(function (u) {
                        return tau[System.Array.index(u, tau)];
                    }).orderBy($asm.$.Algorithms.Graph.f18).toList(System.Int32);
                var candidates = System.Linq.Enumerable.from(this.Vertices).except(images).where(Bridge.fn.bind(this, function (w) {
                    return A.Degree(v) <= this.Degree(w);
                })).where(Bridge.fn.bind(this, function (w) {
                    return induced ? System.Linq.Enumerable.from(requiredNeighbors).sequenceEqual(Algorithms.Utility.ListUtility.Intersection(System.Int32, this.Neighbors.getItem(w), images)) : Algorithms.Utility.ListUtility.SubsetEqualSorted(requiredNeighbors, this.Neighbors.getItem(w));
                })).where(Bridge.fn.bind(this, function (w) {
                    return condition(this, A, w, v);
                }));

                $t = Bridge.getEnumerator(candidates);
                try {
                    while ($t.moveNext()) {
                        var candidate = $t.Current;
                        tau[System.Array.index(v, tau)] = candidate;
                        placed.add(v);

                        if (this.Contains$2(A, induced, condition, tau, placed, ((v + 1) | 0))) {
                            return true;
                        }

                        placed.removeAt(((placed.Count - 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            ContainsInduced: function (A) {
                return this.Contains(A, true);
            },
            ContainsInducedOld: function (A) {
                var $t;
                if (this.N < A.N) {
                    return false;
                }

                var vertexSets = this._vertexSubsets.Value;

                $t = Bridge.getEnumerator(vertexSets);
                try {
                    while ($t.moveNext()) {
                        var vertices = $t.Current;
                        if (Algorithms.Graph.Isomorphic(this.InducedSubgraph(vertices), A)) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            EnumerateConnectedOrderings: function (initialVertices) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function (initialVertices) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        done,
                        $t,
                        v,
                        $t1,
                        ordering,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        done = true;
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(this.Vertices).except(initialVertices));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                v = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 2: {
                                        done = false;
                                            if (this.DegreeInSubgraph(v, initialVertices) > 0) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 8;
                                            continue;
                                    }
                                    case 3: {
                                        initialVertices.add(v);
                                            $t1 = Bridge.getEnumerator(this.EnumerateConnectedOrderings(initialVertices), System.Collections.Generic.List$1(System.Int32));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t1.moveNext()) {
                                                ordering = $t1.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        $enumerator.current = System.Linq.Enumerable.from(ordering).toList(System.Int32);
                                            $step = 6;
                                            return true;
                                    }
                                    case 6: {
                                        $step = 4;
                                        continue;
                                    }
                                    case 7: {
                                        initialVertices.removeAt(((initialVertices.Count - 1) | 0));
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 9: {
                                        if (done) {
                                                $step = 10;
                                                continue;
                                            } 
                                            $step = 12;
                                            continue;
                                    }
                                    case 10: {
                                        $enumerator.current = initialVertices;
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            IsSpanningSubgraphOf: function (A) {
                if (this.N !== A.N) {
                    return false;
                }

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j]) && !A.getItem(i, j)) {
                            return false;
                        }
                    }
                }

                return true;
            },
            GetEdgeWeights: function () {
                return this.GetEdgeWeights$4(System.Array.init([], System.Int32), System.Array.init([], System.Object));
            },
            GetEdgeWeights$2: function (subgraph) {
                var n = subgraph.Count;
                var w = new (System.Collections.Generic.List$1(System.Int32))(n);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        w.add(0);

                        if (this._adjacent.get([subgraph.getItem(i), subgraph.getItem(j)]) || this._adjacent.get([subgraph.getItem(j), subgraph.getItem(i)])) {
                            w.setItem(k, 1);
                        }

                        k = (k + 1) | 0;
                    }
                }

                return w;
            },
            GetEdgeWeights$1: function (adjacent, directed) {
                return this.GetEdgeWeights$3(adjacent, directed, System.Array.init([], System.Int32), System.Array.init([], System.Object));
            },
            GetEdgeWeights$4: function (removedVertices, removedEdges) {
                return this.GetEdgeWeights$3(this._adjacent, this.Directed, removedVertices, removedEdges);
            },
            GetEdgeWeights$3: function (adjacent, directed, removedVertices, removedEdges) {
                var w = new (System.Collections.Generic.List$1(System.Int32))();

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = { v : (i + 1) | 0 }; j.v < this.N; j.v = (j.v + 1) | 0) {
                        w.add(0);

                        if (!System.Linq.Enumerable.from(removedVertices).any((function ($me, j) {
                                return function (v) {
                                    return v === i || v === j.v;
                                };
                            })(this, j)) && !System.Linq.Enumerable.from(removedEdges).any((function ($me, j) {
                                return function (e) {
                                    return e.item1 === i && e.item2 === j.v || e.item1 === j.v && e.item2 === i;
                                };
                            })(this, j))) {
                            if (adjacent.get([i, j.v]) || adjacent.get([j.v, i])) {
                                w.setItem(k, 1);
                                if (directed.get([j.v, i])) {
                                    w.setItem(k, -1);
                                }
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                return w;
            },
            InducedSubgraph: function (subgraph) {
                var $t;
                var vertexWeight = null;
                if (this.VertexWeight != null) {
                    vertexWeight = new (System.Collections.Generic.List$1(System.Int32))(subgraph.Count);
                    $t = Bridge.getEnumerator(subgraph);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            vertexWeight.add(this.VertexWeight.getItem(v));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights$2(subgraph), vertexWeight);
            },
            ToDotWithFactors: function (labelEdges) {
                var $t, $t1;
                if (labelEdges === void 0) { labelEdges = false; }
                var sb = new System.Text.StringBuilder();

                var factors = this.Factor();
                var colorRanges = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerable$1(System.Int32)))();
                var last = 0;
                var G = Algorithms.Graphs.Empty;
                $t = Bridge.getEnumerator(factors, Algorithms.Graph);
                try {
                    while ($t.moveNext()) {
                        var factor = $t.Current;
                        colorRanges.add(System.Linq.Enumerable.range(last, factor.N));
                        last = (last + factor.N) | 0;

                        G = Algorithms.Graph.op_Multiply(G, factor);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                sb.appendLine("graph G {");
                sb.appendLine("overlap = false;");
                sb.appendLine("splines=true;");
                sb.appendLine("sep=0.3;");
                sb.appendLine("node[fontsize=20, style=bold, color=black; shape=circle, penwidth=1];");
                sb.appendLine("edge[style=bold, color=black, penwidth=2];");
                $t1 = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t1.moveNext()) {
                        var v = $t1.Current;
                        var colorIndex = System.Linq.Enumerable.from(colorRanges).select($asm.$.Algorithms.Graph.f19).first((function ($me, v) {
                            return function (p) {
                                return System.Linq.Enumerable.from(p.range).contains(v);
                            };
                        })(this, v)).index % Algorithms.Graph.DotColors.Count;
                        var label = v.toString();
                        sb.appendLine(System.String.format("{0} [label = \"{2}\", style = filled, fillcolor = \"{1}\"];", Bridge.box(v, System.Int32), Algorithms.Graph.DotColors.getItem(colorIndex), label));
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (G._adjacent.get([i, j])) {
                            if (labelEdges) {
                                sb.appendLine(System.String.format("{0} -- {1} [label = \"{2}\"]", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32), Bridge.box(k, System.Int32)));
                            } else {
                                sb.appendLine(System.String.format("{0} -- {1}", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32)));
                            }

                            k = (k + 1) | 0;
                        }
                    }
                }
                sb.appendLine("}");

                return sb.toString();
            },
            ToDotForTikz: function () {
                var $t, $t1;
                var sb = new System.Text.StringBuilder();

                var factors = this.Factor();
                var colorRanges = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerable$1(System.Int32)))();
                var last = 0;
                var G = Algorithms.Graphs.Empty;
                $t = Bridge.getEnumerator(factors, Algorithms.Graph);
                try {
                    while ($t.moveNext()) {
                        var factor = $t.Current;
                        colorRanges.add(System.Linq.Enumerable.range(last, factor.N));
                        last = (last + factor.N) | 0;

                        G = Algorithms.Graph.op_Multiply(G, factor);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                sb.appendLine("graph G {");
                $t1 = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t1.moveNext()) {
                        var v = $t1.Current;
                        var colorIndex = System.Linq.Enumerable.from(colorRanges).select($asm.$.Algorithms.Graph.f19).first((function ($me, v) {
                            return function (p) {
                                return System.Linq.Enumerable.from(p.range).contains(v);
                            };
                        })(this, v)).index % Algorithms.Graph.TikzColors.Count;
                        sb.appendLine(System.String.format("{0} [label = \"\", style = \"draw, circle, fill={1}\"];", Bridge.box(v, System.Int32), Algorithms.Graph.TikzColors.getItem(colorIndex)));
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (G._adjacent.get([i, j])) {
                            sb.appendLine(System.String.format("{0} -- {1}", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32)));
                        }
                    }
                }
                sb.appendLine("}");

                return sb.toString();
            },
            IsProperFactor: function (subset) {
                var $t;
                if (subset.Count <= 0) {
                    return true;
                }
                if (subset.Count >= this.N) {
                    return false;
                }

                var rest = Algorithms.Utility.ListUtility.Difference(System.Int32, this._vertices, subset);

                var pairs = System.Linq.Enumerable.from(subset).selectMany(function (i) {
                        return rest;
                    }, $asm.$.Algorithms.Graph.f20);

                $t = Bridge.getEnumerator(pairs);
                try {
                    while ($t.moveNext()) {
                        var pair = $t.Current;
                        if (!this._adjacent.get([pair.item1, pair.item2])) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            Factor: function () {
                var properFactors = System.Linq.Enumerable.from(this._vertexSubsets.Value).where(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f21)).toList(System.Collections.Generic.List$1(System.Int32));
                var maximalFactor = Algorithms.Utility.ListUtility.MaximalElements(System.Int32, properFactors).getItem(0);
                if (maximalFactor.Count <= 0) {
                    return Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f22)(new (System.Collections.Generic.List$1(Algorithms.Graph))());
                }

                var rest = Algorithms.Utility.ListUtility.Difference(System.Int32, this._vertices, maximalFactor);
                var maxFactor = this.InducedSubgraph(maximalFactor);
                var restGraph = this.InducedSubgraph(rest);
                return System.Linq.Enumerable.from(maxFactor.Factor()).concat(restGraph.Factor());
            },
            Clone: function () {
                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights());
            },
            Complement: function () {
                var adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        if (i === j) {
                            continue;
                        }
                        adjacent.set([i, j], !this._adjacent.get([i, j]));
                    }
                }

                return new Algorithms.Graph.ctor(adjacent);
            },
            RemoveVertex: function (v) {
                var subgraph = System.Linq.Enumerable.from(this.Vertices).toList(System.Int32);
                subgraph.remove(v);
                return this.InducedSubgraph(subgraph);
            },
            RemoveEdge$1: function (e) {
                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights$4(System.Array.init([], System.Int32), System.Array.init([e], System.Object)));
            },
            RemoveEdge: function (v1, v2) {
                return this.RemoveEdge$1({ item1: v1, item2: v2 });
            },
            AddEdge$1: function (v1, v2, directed) {
                var g = this.Clone();
                g._adjacent.set([v1, v2], (g._adjacent.set([v2, v1], true), true));
                if (directed) {
                    g.Directed.set([v1, v2], true);
                }

                return new Algorithms.Graph.$ctor1(g.GetEdgeWeights());
            },
            AddEdge: function (x, y) {
                var G = this.Clone();
                G._adjacent.set([x, y], true);
                G._adjacent.set([y, x], true);

                G.Initialize();
                return G;
            },
            GetArbitraryEdge: function () {
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            return { item1: i, item2: j };
                        }
                    }
                }

                return null;
            },
            GetEdgeTuples: function () {
                var tuples = new (System.Collections.Generic.List$1(System.Object))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            if (this.Directed.get([i, j])) {
                                tuples.add({ item1: i, item2: j });
                            } else {
                                tuples.add({ item1: j, item2: i });
                            }
                        }
                    }
                }

                return tuples;
            },
            DisjointUnion: function (H) {
                var n = (this.N + H.N) | 0;

                var adjacent = System.Array.create(false, null, System.Boolean, n, n);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([i, j], this._adjacent.get([i, j]));
                    }
                }

                for (var i1 = 0; i1 < H.N; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 < H.N; j1 = (j1 + 1) | 0) {
                        adjacent.set([((this.N + i1) | 0), ((this.N + j1) | 0)], H.getItem(i1, j1));
                    }
                }

                return new Algorithms.Graph.ctor(adjacent);
            },
            Join: function (H) {
                var G = this.DisjointUnion(H);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < H.N; j = (j + 1) | 0) {
                        G._adjacent.set([i, ((this.N + j) | 0)], true);
                        G._adjacent.set([((this.N + j) | 0), i], true);
                    }
                }

                G.Initialize();
                return G;
            },
            AttachNewVertex$1: function (neighbors) {
                if (neighbors === void 0) { neighbors = []; }
                return this.AttachNewVertex(Bridge.cast(neighbors, System.Collections.Generic.IList$1(System.Int32)));
            },
            AttachNewVertex: function (neighbors) {
                var $t;
                var adjacent = System.Array.create(false, null, System.Boolean, ((this.N + 1) | 0), ((this.N + 1) | 0));

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([i, j], this._adjacent.get([i, j]));
                    }
                }

                $t = Bridge.getEnumerator(neighbors, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var neighbor = $t.Current;
                        adjacent.set([this.N, neighbor], true);
                        adjacent.set([neighbor, this.N], true);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return new Algorithms.Graph.ctor(adjacent);
            },
            Square: function () {
                var $t, $t1;
                var g = this.Clone();
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        $t1 = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Int32, this.Neighbors.getItem(v), this.Neighbors.getItem(v)), System.Object);
                        try {
                            while ($t1.moveNext()) {
                                var pair = $t1.Current;
                                if (pair.item1 !== pair.item2) {
                                    g._adjacent.set([pair.item1, pair.item2], (g._adjacent.set([pair.item2, pair.item1], true), true));
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return g.Clone();
            },
            IsRegular: function () {
                if (this.N <= 0) {
                    return true;
                }

                return System.Linq.Enumerable.from(this.Neighbors).all(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f23));
            },
            Degree: function (v) {
                return this.Neighbors.getItem(v).Count;
            },
            OutDegree: function (v) {
                return this.OutNeighbors.getItem(v).Count;
            },
            InDegree: function (v) {
                return this.InNeighbors.getItem(v).Count;
            },
            DegreeInSubgraph: function (v, subgraph) {
                return Algorithms.Utility.ListUtility.IntersectionCountSorted(this.Neighbors.getItem(v), subgraph);
            },
            NeighborsInSubgraph: function (v, subgraph) {
                return Algorithms.Utility.ListUtility.IntersectionSorted$1(this.Neighbors.getItem(v), subgraph);
            },
            SumOverSubgraphNeighbors: function (v, subgraph, g) {
                return System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.IntersectionSorted$1(this.Neighbors.getItem(v), subgraph)).sum(function (w) {
                        return g[System.Array.index(w, g)];
                    });
            },
            GetDegreeMinusKFunc: function (k) {
                return Bridge.fn.bind(this, function (v) {
                    return ((this.Degree(v) - k) | 0);
                });
            },
            EdgesOn: function (A) {
                var edges = 0;
                for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < A.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([A.getItem(i), A.getItem(j)])) {
                            edges = (edges + 1) | 0;
                        }
                    }
                }

                return edges;
            },
            EdgeIndicesOn: function (A) {
                var edgeIndices = new (System.Collections.Generic.List$1(System.Int32))();

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            if (A.contains(i) && A.contains(j)) {
                                edgeIndices.add(k);
                            }

                            k = (k + 1) | 0;
                        }
                    }
                }

                return edgeIndices;
            },
            EdgesBetween: function (A, B) {
                var intersection = Algorithms.Utility.ListUtility.Intersection(System.Int32, A, B);
                A = Algorithms.Utility.ListUtility.Difference(System.Int32, A, B);

                var edges = 0;
                for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                    for (var j = 0; j < B.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([A.getItem(i), B.getItem(j)])) {
                            edges = (edges + 1) | 0;
                        }
                    }
                }

                return ((edges + this.EdgesOn(intersection)) | 0);
            },
            IndependentSetsInSubgraph: function (firstVertex) {
                if (firstVertex >= this.N) {
                    return $asm.$.Algorithms.Graph.f24(new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))());
                }

                var subgraphSets = this.IndependentSetsInSubgraph(((firstVertex + 1) | 0));

                return System.Linq.Enumerable.from(subgraphSets).union(System.Linq.Enumerable.from(subgraphSets).where(Bridge.fn.bind(this, function (set) {
                            return this.IsIndependentOf(firstVertex, set);
                        })).select(function (set) {
                        var bigger = function (_o15) {
                                _o15.add(firstVertex);
                                return _o15;
                            }(new (System.Collections.Generic.List$1(System.Int32))());
                        bigger.addRange(set);
                        return bigger;
                    }));
            },
            IsIndependentOf: function (v, set) {
                var $t;
                $t = Bridge.getEnumerator(set);
                try {
                    while ($t.moveNext()) {
                        var w = $t.Current;
                        if (w === v || this._adjacent.get([w, v])) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            IsClique: function (subset) {
                for (var i = 0; i < subset.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < subset.Count; j = (j + 1) | 0) {
                        if (!this._adjacent.get([subset.getItem(i), subset.getItem(j)])) {
                            return false;
                        }
                    }
                }

                return true;
            },
            IsIndependent: function (subset) {
                for (var i = 0; i < subset.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < subset.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([subset.getItem(i), subset.getItem(j)])) {
                            return false;
                        }
                    }
                }

                return true;
            },
            IsComplete: function () {
                return this.IsClique(this._vertices);
            },
            IsCliqueNumberAtLeast: function (k) {
                var $t;
                if (k > this._vertices.Count) {
                    return false;
                }
                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, this._vertices, k), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        if (this.IsClique(set)) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            IndependenceNumber: function () {
                return this.IndependenceNumber$1(this.Vertices);
            },
            IndependenceNumber$1: function (subgraph) {
                return System.Linq.Enumerable.from(this._independentSets.Value).max(function (I) {
                        return Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, I, subgraph);
                    });
            },
            MaximumIndependentSubset: function (subgraph) {
                var i = this.IndependenceNumber$1(subgraph);
                return System.Linq.Enumerable.from(this._independentSets.Value).first(function (I) {
                        return Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, I, subgraph) === i;
                    });
            },
            EnumerateMaximalIndependentSets$1: function (set) {
                return this.EnumerateBronKerbosch(set, new (System.Collections.Generic.List$1(System.Int32))(), new (System.Collections.Generic.List$1(System.Int32))());
            },
            EnumerateMaximalIndependentSets: function () {
                return this.EnumerateBronKerbosch(this.Vertices, new (System.Collections.Generic.List$1(System.Int32))(), new (System.Collections.Generic.List$1(System.Int32))());
            },
            EnumerateBronKerbosch: function (P, R, X) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function (P, R, X) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        PC,
                        XC,
                        u,
                        $t,
                        v,
                        $t1,
                        set,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (P.Count === 0 && X.Count === 0) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        $enumerator.current = System.Linq.Enumerable.from(R).toList(System.Int32);
                                            $step = 2;
                                            return true;
                                    }
                                    case 2: {
                                        $step = 11;
                                        continue;
                                    }
                                    case 3: {
                                        PC = System.Linq.Enumerable.from(P).toList(System.Int32);
                                            XC = System.Linq.Enumerable.from(X).toList(System.Int32);

                                            u = this.TomitaPivot(P, X);
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(P).except(this.ComplementNeighbors.getItem(u)));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t.moveNext()) {
                                                v = $t.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 10;
                                        continue;
                                    }
                                    case 5: {
                                        R.add(v);
                                            $t1 = Bridge.getEnumerator(this.EnumerateBronKerbosch(Algorithms.Utility.ListUtility.Intersection(System.Int32, PC, this.ComplementNeighbors.getItem(v)), R, Algorithms.Utility.ListUtility.Intersection(System.Int32, XC, this.ComplementNeighbors.getItem(v))), System.Collections.Generic.List$1(System.Int32));
                                            $step = 6;
                                            continue;
                                    }
                                    case 6: {
                                        if ($t1.moveNext()) {
                                                set = $t1.Current;
                                                $step = 7;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 7: {
                                        $enumerator.current = set;
                                            $step = 8;
                                            return true;
                                    }
                                    case 8: {
                                        $step = 6;
                                        continue;
                                    }
                                    case 9: {
                                        R.remove(v);
                                            PC.remove(v);
                                            XC.add(v);
                                        $step = 4;
                                        continue;
                                    }
                                    case 10: {
                                        $step = 11;
                                        continue;
                                    }
                                    case 11: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            TomitaPivot: function (P, X) {
                var $t;
                var max = -1;
                var best = -1;
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(P).concat(X));
                try {
                    while ($t.moveNext()) {
                        var u = $t.Current;
                        var n = Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, this.ComplementNeighbors.getItem(u), P);
                        if (n > max) {
                            max = n;
                            best = u;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return best;
            },
            FindChiColoring: function () {
                for (var K = 0; K < 2147483647; K = (K + 1) | 0) {
                    var c = this.FindKColoring(this.Vertices, K);
                    if (c != null) {
                        return c;
                    }
                }

                return null;
            },
            FindKColoring: function (subgraph, K) {
                var $t;
                if (subgraph.Count <= 0) {
                    return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                }
                if (K <= 0) {
                    return null;
                }

                $t = Bridge.getEnumerator(this.EnumerateMaximalIndependentSets$1(subgraph), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var I = $t.Current;
                        var c = this.FindKColoring(Algorithms.Utility.ListUtility.Difference(System.Int32, subgraph, I), ((K - 1) | 0));
                        if (c != null) {
                            c.insert(0, I);
                            return c;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            MaxColorableSubset: function (assignment, subset) {
                return this.MaxColorableSubset$1(assignment, 0, subset);
            },
            MaxColorableSubset$1: function (assignment, v, subset) {
                var $t;
                if (v >= subset.Count) {
                    return 0;
                }

                var max = this.MaxColorableSubset$1(assignment, ((v + 1) | 0), subset);

                var colors = assignment.getItem(subset.getItem(v));
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(subset.getItem(v)));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    max = Math.max(max, ((1 + this.MaxColorableSubset$1(assignmentCopy, ((v + 1) | 0), subset)) | 0));
                    if (max >= subset.Count) {
                        break;
                    }

                    colors = colors.xor(color);
                }

                return max;
            },
            GreedyColor: function (assignment, subset) {
                var $t;
                var coloring = System.Array.init(this.N, System.Int64(0), System.Int64);
                $t = Bridge.getEnumerator(subset);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        var lost = System.Linq.Enumerable.from(this.Neighbors.getItem(v)).aggregate(System.Int64(0), function (l, x) {
                                return l.or(coloring[System.Array.index(x, coloring)]);
                            });
                        var colors = assignment.getItem(v).and(lost.not());
                        coloring[System.Array.index(v, coloring)] = colors.and(colors.neg());
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(coloring).count($asm.$.Algorithms.Graph.f25);
            },
            IsChoosable$1: function (assignment, subset) {
                return this.IsChoosable$3(assignment, 0, subset);
            },
            IsChoosable$3: function (assignment, v, subset) {
                var $t;
                if (v >= subset.Count) {
                    return true;
                }

                var colors = assignment.getItem(subset.getItem(v));
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(subset.getItem(v)));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$3(assignmentCopy, ((v + 1) | 0), subset)) {
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            },
            IsChoosable: function (assignment) {
                return this.IsChoosable$2(assignment, 0);
            },
            IsChoosable$2: function (assignment, v) {
                var $t;
                if (v >= this.N) {
                    return true;
                }

                var colors = assignment.getItem(v);
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(v));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$2(assignmentCopy, ((v + 1) | 0))) {
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            },
            IsCliqueCovering: function (assignment) {
                var $t;
                $t = Bridge.getEnumerator(this._independentTwoSets.Value);
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        if ((assignment.getItem(set.getItem(0)).and(assignment.getItem(set.getItem(1)))).ne(System.Int64(0))) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            CheckFGChoosable: function (f, g) {
                var $t;
                var pot = System.Linq.Enumerable.range(0, ((System.Linq.Enumerable.from(this.Vertices).sum(function (v) {
                        return g(v);
                    }) - 1) | 0)).toList(System.Int32);
                var first = System.Linq.Enumerable.range(0, f(0)).toList(System.Int32);
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(Bridge.cast((System.Array.init([(System.Array.init([first], System.Collections.Generic.List$1(System.Int32)))], System.Array.type(System.Collections.Generic.List$1(System.Int32)))), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32))))).concat(System.Linq.Enumerable.from(this.Vertices).skip(1).select(function (v) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, pot, f(v));
                    }))), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var L = $t.Current;
                        var LL = System.Linq.Enumerable.from(L).toList(System.Collections.Generic.List$1(System.Int32));
                        if (!this.IsGColorable(LL, g)) {
                            return LL;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            IsGColorable: function (L, g) {
                var $t;
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(this.Vertices).select(function (v) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, L.getItem(v), g(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var coloring = $t.Current;
                        if (this.IsProperColoring(System.Linq.Enumerable.from(coloring).toList(System.Collections.Generic.List$1(System.Int32)))) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            IsProperColoring: function (coloring) {
                for (var v = 0; v < this.N; v = (v + 1) | 0) {
                    for (var w = (v + 1) | 0; w < this.N; w = (w + 1) | 0) {
                        if (!this._adjacent.get([v, w])) {
                            continue;
                        }

                        if (Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, coloring.getItem(v), coloring.getItem(w)) > 0) {
                            return false;
                        }
                    }
                }

                return true;
            },
            Mic: function () {
                var $t;
                var mic = 0;
                $t = Bridge.getEnumerator(this.EnumerateMaximalIndependentSets(), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        var t = System.Linq.Enumerable.from(set).sum(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f26));
                        mic = Math.max(mic, t);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return mic;
            },
            IsOnlineFChoosable: function (f) {
                var $t;
                Algorithms.Graph.NodesVisited = System.Int64(0);
                Algorithms.Graph.CacheHits = System.Int64(0);

                var fTrace = System.Array.init(this.N, 0, System.Int32);
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        fTrace[System.Array.index(v, fTrace)] = f(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var cache = new (System.Collections.Generic.Dictionary$2(Algorithms.OnlineChoiceHashGraph,System.Boolean))();

                return this.IsOnlineFChoosable$1(fTrace, System.Linq.Enumerable.repeat(1, this.N).toArray(System.Int32), cache);
            },
            IsOnlineFChoosable$1: function (f, g, cache) {
                var $step = 0,
                    $jumpFromFinally, 
                    key, 
                    result, 
                    gClone, 
                    liveVertices, 
                    freebies, 
                    $t, 
                    v, 
                    cachedResult, 
                    independentSets, 
                    $t1, 
                    V, 
                    $t2, 
                    v1, 
                    maximalIndependentSets, 
                    choosable, 
                    $t3, 
                    C, 
                    $t4, 
                    v2, 
                    $t5, 
                    v3, 
                    $t6, 
                    v4, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();

                                    key = null;

                                    result = true;
                                    gClone = null;

                                    liveVertices = System.Linq.Enumerable.from(g).select($asm.$.Algorithms.Graph.f27).where($asm.$.Algorithms.Graph.f28).toList(System.Int32);
                                    freebies = System.Linq.Enumerable.from(liveVertices).where(Bridge.fn.bind(this, function (v) {
                                        return this.DegreeInSubgraph(v, liveVertices) < f[System.Array.index(v, f)];
                                    })).toList(System.Int32);

                                    while (freebies.Count > 0) {
                                        if (gClone == null) {
                                            gClone = System.Array.init(g.length, 0, System.Int32);
                                            System.Array.copy(g, 0, gClone, 0, g.length);
                                        }

                                        $t = Bridge.getEnumerator(freebies);
                                        try {
                                            while ($t.moveNext()) {
                                                v = $t.Current;
                                                g[System.Array.index(v, g)] = 0;
                                            }
                                        } finally {
                                            if (Bridge.is($t, System.IDisposable)) {
                                                $t.System$IDisposable$dispose();
                                            }
                                        }
                                        liveVertices = System.Linq.Enumerable.from(g).select($asm.$.Algorithms.Graph.f29).where($asm.$.Algorithms.Graph.f28).toList(System.Int32);
                                        freebies = System.Linq.Enumerable.from(liveVertices).where(Bridge.fn.bind(this, function (v1) {
                                            return this.DegreeInSubgraph(v1, liveVertices) < f[System.Array.index(v1, f)];
                                        })).toList(System.Int32);
                                    }

                                    if (liveVertices.Count <= 0) {
                                        $step = 1;
                                        continue;
                                    } 
                                    $step = 2;
                                    continue;
                                }
                                case 1: {
                                    result = true;
                                    $step = 12;
                                    continue;
                                }
                                case 2: {
                                    if (System.Linq.Enumerable.from(liveVertices).any(function (v1) {
                                        return f[System.Array.index(v1, f)] <= 0;
                                    })) {
                                        $step = 3;
                                        continue;
                                    } 
                                    $step = 4;
                                    continue;
                                }
                                case 3: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 4: {
                                    key = new Algorithms.OnlineChoiceHashGraph(f, g);
                                    cachedResult = { };
                                    if (cache.tryGetValue(key, cachedResult)) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();

                                    key = null;
                                    result = cachedResult.v;
                                    $step = 12;
                                    continue;
                                }
                                case 6: {
                                    independentSets = System.Linq.Enumerable.from(this._independentSets.Value).where(function (set) {
                                        return set.Count >= 1 && Algorithms.Utility.ListUtility.SubsetEqualSorted(set, liveVertices);
                                    }).toList(System.Collections.Generic.List$1(System.Int32));

                                    $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, liveVertices), System.Collections.Generic.List$1(System.Int32));
                                    $step = 7;
                                    continue;
                                }
                                case 7: {
                                    if ($t1.moveNext()) {
                                        V = $t1.Current;
                                        $step = 8;
                                        continue;
                                    }
                                    $step = 11;
                                    continue;
                                }
                                case 8: {
                                    if (V.Count <= 1) {
                                        $step = 7;
                                        continue;
                                    }

                                    if (System.Linq.Enumerable.from(independentSets).any((function ($me, V) {
                                        return function (ss) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(V, ss);
                                        };
                                    })(this, V))) {
                                        $step = 7;
                                        continue;
                                    }

                                    $t2 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t2.moveNext()) {
                                            v1 = $t2.Current;
                                            f[System.Array.index(v1, f)] = (f[System.Array.index(v1, f)] - 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    maximalIndependentSets = Algorithms.Utility.ListUtility.MaximalElementsSorted$1(System.Linq.Enumerable.from(independentSets).where((function ($me, V) {
                                        return function (set) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(set, V);
                                        };
                                    })(this, V)).toList(System.Collections.Generic.List$1(System.Int32)));

                                    choosable = false;
                                    $t3 = Bridge.getEnumerator(maximalIndependentSets);
                                    try {
                                        while ($t3.moveNext()) {
                                            C = $t3.Current;
                                            $t4 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t4.moveNext()) {
                                                    v2 = $t4.Current;
                                                    g[System.Array.index(v2, g)] = (g[System.Array.index(v2, g)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t4, System.IDisposable)) {
                                                    $t4.System$IDisposable$dispose();
                                                }
                                            }
                                            choosable = this.IsOnlineFChoosable$1(f, g, cache);

                                            $t5 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t5.moveNext()) {
                                                    v3 = $t5.Current;
                                                    g[System.Array.index(v3, g)] = (g[System.Array.index(v3, g)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t5, System.IDisposable)) {
                                                    $t5.System$IDisposable$dispose();
                                                }
                                            }
                                            if (choosable) {
                                                break;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t3, System.IDisposable)) {
                                            $t3.System$IDisposable$dispose();
                                        }
                                    }
                                    $t6 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t6.moveNext()) {
                                            v4 = $t6.Current;
                                            f[System.Array.index(v4, f)] = (f[System.Array.index(v4, f)] + 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t6, System.IDisposable)) {
                                            $t6.System$IDisposable$dispose();
                                        }
                                    }
                                    if (!choosable) {
                                        $step = 9;
                                        continue;
                                    } 
                                    $step = 10;
                                    continue;
                                }
                                case 9: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 10: {
                                    $step = 7;
                                    continue;
                                }
                                case 11: {

                                }
                                case 12: {
                                    if (gClone != null) {
                                        System.Array.copy(gClone, 0, g, 0, g.length);
                                    }

                                    if (key != null) {
                                        cache.set(key, result);
                                    }

                                    return result;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            IsOnlineFGChoosable: function (f, g) {
                Algorithms.Graph.NodesVisited = System.Int64(0);
                Algorithms.Graph.CacheHits = System.Int64(0);

                var cache = new (System.Collections.Generic.Dictionary$2(Algorithms.OnlineChoiceHashGraph,System.Boolean))();
                return this.IsOnlineFGChoosable$1(System.Linq.Enumerable.from(this._vertices).select(function (v) {
                        return f(v);
                    }).toArray(System.Int32), System.Linq.Enumerable.from(this._vertices).select(function (v) {
                        return g(v);
                    }).toArray(System.Int32), cache);
            },
            IsOnlineFGChoosable$1: function (f, g, cache) {
                var $step = 0,
                    $jumpFromFinally, 
                    key, 
                    result, 
                    gClone, 
                    changed, 
                    $t, 
                    v, 
                    need, 
                    liveVertices, 
                    cachedResult, 
                    independentSets, 
                    $t1, 
                    V, 
                    $t2, 
                    v1, 
                    maximalIndependentSets, 
                    choosable, 
                    $t3, 
                    C, 
                    $t4, 
                    v2, 
                    $t5, 
                    v3, 
                    $t6, 
                    v4, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();
                                    key = null;

                                    result = true;
                                    gClone = System.Array.init(g.length, 0, System.Int32);
                                    System.Array.copy(g, 0, gClone, 0, g.length);

                                    while (true) {
                                        changed = false;
                                        $t = Bridge.getEnumerator(this._vertices);
                                        try {
                                            while ($t.moveNext()) {
                                                v = $t.Current;
                                                if (g[System.Array.index(v, g)] <= 0) {
                                                    continue;
                                                }

                                                need = (g[System.Array.index(v, g)] + System.Linq.Enumerable.from(this.Neighbors.getItem(v)).sum(function (w) {
                                                    return g[System.Array.index(w, g)];
                                                })) | 0;
                                                if (f[System.Array.index(v, f)] >= need) {
                                                    g[System.Array.index(v, g)] = 0;
                                                    changed = true;
                                                }
                                            }
                                        } finally {
                                            if (Bridge.is($t, System.IDisposable)) {
                                                $t.System$IDisposable$dispose();
                                            }
                                        }
                                        if (!changed) {
                                            break;
                                        }
                                    }

                                    liveVertices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Int32, g, $asm.$.Algorithms.Graph.f30)).toList(System.Int32);
                                    if (liveVertices.Count <= 0) {
                                        $step = 1;
                                        continue;
                                    } 
                                    $step = 2;
                                    continue;
                                }
                                case 1: {
                                    result = true;
                                    $step = 12;
                                    continue;
                                }
                                case 2: {
                                    if (System.Linq.Enumerable.from(liveVertices).any(function (v1) {
                                        return f[System.Array.index(v1, f)] < g[System.Array.index(v1, g)];
                                    })) {
                                        $step = 3;
                                        continue;
                                    } 
                                    $step = 4;
                                    continue;
                                }
                                case 3: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 4: {
                                    key = new Algorithms.OnlineChoiceHashGraph(f, g);
                                    cachedResult = { };
                                    if (cache.tryGetValue(key, cachedResult)) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();

                                    key = null;
                                    result = cachedResult.v;
                                    $step = 12;
                                    continue;
                                }
                                case 6: {
                                    independentSets = System.Linq.Enumerable.from(this._independentSets.Value).where(function (set) {
                                        return set.Count >= 1 && Algorithms.Utility.ListUtility.SubsetEqualSorted(set, liveVertices);
                                    }).toList(System.Collections.Generic.List$1(System.Int32));

                                    $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, liveVertices), System.Collections.Generic.List$1(System.Int32));
                                    $step = 7;
                                    continue;
                                }
                                case 7: {
                                    if ($t1.moveNext()) {
                                        V = $t1.Current;
                                        $step = 8;
                                        continue;
                                    }
                                    $step = 11;
                                    continue;
                                }
                                case 8: {
                                    if (V.Count <= 1) {
                                        $step = 7;
                                        continue;
                                    }

                                    if (System.Linq.Enumerable.from(independentSets).any((function ($me, V) {
                                        return function (ss) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(V, ss);
                                        };
                                    })(this, V))) {
                                        $step = 7;
                                        continue;
                                    }

                                    $t2 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t2.moveNext()) {
                                            v1 = $t2.Current;
                                            f[System.Array.index(v1, f)] = (f[System.Array.index(v1, f)] - 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    maximalIndependentSets = Algorithms.Utility.ListUtility.MaximalElementsSorted$1(System.Linq.Enumerable.from(independentSets).where((function ($me, V) {
                                        return function (set) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(set, V);
                                        };
                                    })(this, V)).toList(System.Collections.Generic.List$1(System.Int32)));

                                    choosable = false;
                                    $t3 = Bridge.getEnumerator(maximalIndependentSets);
                                    try {
                                        while ($t3.moveNext()) {
                                            C = $t3.Current;
                                            $t4 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t4.moveNext()) {
                                                    v2 = $t4.Current;
                                                    g[System.Array.index(v2, g)] = (g[System.Array.index(v2, g)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t4, System.IDisposable)) {
                                                    $t4.System$IDisposable$dispose();
                                                }
                                            }
                                            choosable = this.IsOnlineFGChoosable$1(f, g, cache);

                                            $t5 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t5.moveNext()) {
                                                    v3 = $t5.Current;
                                                    g[System.Array.index(v3, g)] = (g[System.Array.index(v3, g)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t5, System.IDisposable)) {
                                                    $t5.System$IDisposable$dispose();
                                                }
                                            }
                                            if (choosable) {
                                                break;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t3, System.IDisposable)) {
                                            $t3.System$IDisposable$dispose();
                                        }
                                    }
                                    $t6 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t6.moveNext()) {
                                            v4 = $t6.Current;
                                            f[System.Array.index(v4, f)] = (f[System.Array.index(v4, f)] + 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t6, System.IDisposable)) {
                                            $t6.System$IDisposable$dispose();
                                        }
                                    }
                                    if (!choosable) {
                                        $step = 9;
                                        continue;
                                    } 
                                    $step = 10;
                                    continue;
                                }
                                case 9: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 10: {
                                    $step = 7;
                                    continue;
                                }
                                case 11: {

                                }
                                case 12: {
                                    if (gClone != null) {
                                        System.Array.copy(gClone, 0, g, 0, g.length);
                                    }

                                    if (key != null) {
                                        cache.set(key, result);
                                    }

                                    return result;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            Direction: function (e) {
                if (!this._adjacent.get([e.item1, e.item2])) {
                    return 0;
                }

                return this.Directed.get([e.item2, e.item1]) ? -1 : 1;
            },
            MatchesOutMinusIn: function (outMinusIn) {
                return System.Linq.Enumerable.from(this._vertices).all(Bridge.fn.bind(this, function (v) {
                        return ((this.OutDegree(v) - this.InDegree(v)) | 0) === outMinusIn.getItem(v);
                    }));
            },
            SpanningOutMinusInSubgraphs: function (outMinusIn, edges, spanningEulerianOrientationsCache) {
                Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();

                var graphs = new (System.Collections.Generic.List$1(Algorithms.Graph))();

                if (System.Linq.Enumerable.from(this._vertices).any(Bridge.fn.bind(this, function (v) {
                        return outMinusIn.getItem(v) > this.OutDegree(v) || ((-outMinusIn.getItem(v)) | 0) > this.InDegree(v);
                    }))) {
                    return graphs;
                }

                var key = new Algorithms.OrientationHashGraph(this, outMinusIn);

                if (Algorithms.Graph.MemoizeEulerianSubgraphCounting) {
                    var spanners = { };
                    if (spanningEulerianOrientationsCache.tryGetValue(key, spanners)) {
                        Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();
                        return spanners.v;
                    }
                }

                if (edges.Count <= 0) {
                    if (this.MatchesOutMinusIn(outMinusIn)) {
                        graphs.add(this);
                    }

                    return graphs;
                }

                var e = System.Linq.Enumerable.from(edges).last();

                edges.remove(e);
                var g = this.RemoveEdge$1(e);

                graphs.addRange(g.SpanningOutMinusInSubgraphs(outMinusIn, edges, spanningEulerianOrientationsCache));

                var outMinusInPrime = System.Linq.Enumerable.from(outMinusIn).toList(System.Int32);
                var v1 = e.item1;
                var v2 = e.item2;

                if (this.Direction(e) === 1) {
                    outMinusInPrime.setItem(e.item1, (outMinusInPrime.getItem(e.item1) - 1) | 0);
                    outMinusInPrime.setItem(e.item2, (outMinusInPrime.getItem(e.item2) + 1) | 0);
                } else {
                    outMinusInPrime.setItem(e.item1, (outMinusInPrime.getItem(e.item1) + 1) | 0);
                    outMinusInPrime.setItem(e.item2, (outMinusInPrime.getItem(e.item2) - 1) | 0);

                    v1 = e.item2;
                    v2 = e.item1;
                }

                graphs.addRange(System.Linq.Enumerable.from(g.SpanningOutMinusInSubgraphs(outMinusInPrime, edges, spanningEulerianOrientationsCache)).select(function (graph) {
                        return graph.AddEdge$1(v1, v2, true);
                    }));

                if (Algorithms.Graph.MemoizeEulerianSubgraphCounting) {
                    spanningEulerianOrientationsCache.set(key, graphs);
                }

                edges.add(e);
                return graphs;
            },
            SpanningEulerianSubgraphs: function (edges, spanningEulerianOrientationsCache) {
                return this.SpanningOutMinusInSubgraphs(System.Linq.Enumerable.from(System.Array.init(this.N, 0, System.Int32)).toList(System.Int32), edges, spanningEulerianOrientationsCache);
            },
            CountSpanningEulerianSubgraphs: function (even, odd) {
                var $t;
                Algorithms.Graph.CacheHits = System.Int64(0);
                Algorithms.Graph.NodesVisited = System.Int64(0);
                var spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                var edges = this.GetEdgeTuples();

                even.v = 0;
                odd.v = 0;
                $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edges, spanningEulerianOrientationsCache));
                try {
                    while ($t.moveNext()) {
                        var g = $t.Current;
                        if (g.Size % 2 === 0) {
                            even.v = (even.v + 1) | 0;
                        } else {
                            odd.v = (odd.v + 1) | 0;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            CountSpanningEulerianSubgraphsUsingVertices: function (vertices, even, odd) {
                var $step = 0,
                    $jumpFromFinally, 
                    spanningEulerianOrientationsCache, 
                    edges, 
                    $t, 
                    g, 
                    $t1, 
                    v, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.CacheHits = System.Int64(0);
                                    Algorithms.Graph.NodesVisited = System.Int64(0);

                                    if (vertices == null) {
                                        vertices = new (System.Collections.Generic.List$1(System.Int32))();
                                    }

                                    spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                                    edges = this.GetEdgeTuples();

                                    even.v = 0;
                                    odd.v = 0;
                                    $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edges, spanningEulerianOrientationsCache));
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ($t.moveNext()) {
                                        g = $t.Current;
                                        $step = 2;
                                        continue;
                                    }
                                    $step = 9;
                                    continue;
                                }
                                case 2: {
                                    $t1 = Bridge.getEnumerator(vertices);
                                    $step = 3;
                                    continue;
                                }
                                case 3: {
                                    if ($t1.moveNext()) {
                                        v = $t1.Current;
                                        $step = 4;
                                        continue;
                                    }
                                    $step = 7;
                                    continue;
                                }
                                case 4: {
                                    if (g.Degree(v) <= 0) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    $step = 8;
                                    continue;
                                }
                                case 6: {
                                    $step = 3;
                                    continue;
                                }
                                case 7: {
                                    if (g.Size % 2 === 0) {
                                        even.v = (even.v + 1) | 0;
                                    } else {
                                        odd.v = (odd.v + 1) | 0;
                                    }
                                }
                                case 8: {
                                    ;
                                    $step = 1;
                                    continue;
                                }
                                case 9: {
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            CountSpanningEulerianSubgraphsUsingEdges: function (edges, even, odd) {
                var $step = 0,
                    $jumpFromFinally, 
                    spanningEulerianOrientationsCache, 
                    edgeTuples, 
                    $t, 
                    g, 
                    $t1, 
                    e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.CacheHits = System.Int64(0);
                                    Algorithms.Graph.NodesVisited = System.Int64(0);

                                    if (edges == null) {
                                        edges = new (System.Collections.Generic.List$1(System.Object))();
                                    }

                                    spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                                    edgeTuples = this.GetEdgeTuples();

                                    even.v = 0;
                                    odd.v = 0;
                                    $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edgeTuples, spanningEulerianOrientationsCache));
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ($t.moveNext()) {
                                        g = $t.Current;
                                        $step = 2;
                                        continue;
                                    }
                                    $step = 9;
                                    continue;
                                }
                                case 2: {
                                    $t1 = Bridge.getEnumerator(edges);
                                    $step = 3;
                                    continue;
                                }
                                case 3: {
                                    if ($t1.moveNext()) {
                                        e = $t1.Current;
                                        $step = 4;
                                        continue;
                                    }
                                    $step = 7;
                                    continue;
                                }
                                case 4: {
                                    if (!g._adjacent.get([e.item1, e.item2])) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    $step = 8;
                                    continue;
                                }
                                case 6: {
                                    $step = 3;
                                    continue;
                                }
                                case 7: {
                                    if (g.Size % 2 === 0) {
                                        even.v = (even.v + 1) | 0;
                                    } else {
                                        odd.v = (odd.v + 1) | 0;
                                    }
                                }
                                case 8: {
                                    ;
                                    $step = 1;
                                    continue;
                                }
                                case 9: {
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            EnumerateOrientations$1: function (requiredIndegree) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (requiredIndegree) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        gain,
                        $t,
                        inNeighborList,
                        adjacent,
                        directed,
                        i,
                        v,
                        $t1,
                        w,
                        outNeighbors,
                        $t2,
                        w1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        gain = System.Array.init(this.N, 0, System.Int32);

                                            $t = Bridge.getEnumerator(this.EnumerateOrientationsFor(0, requiredIndegree, gain), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                inNeighborList = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                                            directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                                            for (i = 0; i < inNeighborList.Count; i = (i + 1) | 0) {
                                                v = (((inNeighborList.Count - 1) | 0) - i) | 0;

                                                $t1 = Bridge.getEnumerator(inNeighborList.getItem(i));
                                                try {
                                                    while ($t1.moveNext()) {
                                                        w = $t1.Current;
                                                        adjacent.set([v, w], true);
                                                        adjacent.set([w, v], true);

                                                        directed.set([w, v], true);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t1, System.IDisposable)) {
                                                        $t1.System$IDisposable$dispose();
                                                    }
                                                }
                                                outNeighbors = Algorithms.Utility.ListUtility.Difference(System.Int32, this._laterNeighbors.Value.getItem(v), inNeighborList.getItem(i));

                                                $t2 = Bridge.getEnumerator(outNeighbors);
                                                try {
                                                    while ($t2.moveNext()) {
                                                        w1 = $t2.Current;
                                                        adjacent.set([v, w1], true);
                                                        adjacent.set([w1, v], true);

                                                        directed.set([v, w1], true);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t2, System.IDisposable)) {
                                                        $t2.System$IDisposable$dispose();
                                                    }
                                                }}

                                            $enumerator.current = new Algorithms.Graph.$ctor1(this.GetEdgeWeights$1(adjacent, directed));
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            EnumerateOrientations: function (fast) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (fast) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        undirectedWeights,
                        edgeIndices,
                        undirected,
                        $t,
                        list,
                        weights,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (fast === void 0) { fast = false; }
                                            undirectedWeights = System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f31).toList(System.Int32);
                                            edgeIndices = System.Linq.Enumerable.from(undirectedWeights).select($asm.$.Algorithms.Graph.f32).where($asm.$.Algorithms.Graph.f33).toList(System.Int32);

                                            undirected = new Algorithms.Graph.$ctor1(undirectedWeights);

                                            $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, edgeIndices), System.Collections.Generic.List$1(System.Int32));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                list = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        weights = System.Linq.Enumerable.from(undirectedWeights).select((function ($me, list) {
                                                    return function (w, i) {
                                                        return list.contains(i) ? ((-w) | 0) : w;
                                                    };
                                                })(this, list)).toList(System.Int32);

                                            $enumerator.current = new Algorithms.Graph.$ctor1(weights);
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            EnumerateOrientationsFor: function (v, requiredIndegree, gain) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (v, requiredIndegree, gain) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        $t,
                        ins,
                        outs,
                        $t1,
                        x,
                        $t2,
                        o,
                        $t3,
                        x1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (v >= ((this.N - 1) | 0)) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 6;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        if (gain[System.Array.index(v, gain)] < requiredIndegree(v)) {
                                                $step = 2;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 2: {
                                        return false;
                                    }
                                    case 3: {
                                        $enumerator.current = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $step = 4;
                                            return true;
                                    }
                                    case 4: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $step = 14;
                                        continue;
                                    }
                                    case 6: {
                                        $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, this._laterNeighbors.Value.getItem(v)), System.Collections.Generic.List$1(System.Int32));
                                            $step = 7;
                                            continue;
                                    }
                                    case 7: {
                                        if ($t.moveNext()) {
                                                ins = $t.Current;
                                                $step = 8;
                                                continue;
                                            }
                                        $step = 13;
                                        continue;
                                    }
                                    case 8: {
                                        if (ins.Count < ((requiredIndegree(v) - gain[System.Array.index(v, gain)]) | 0)) {
                                                $step = 7;
                                                continue;
                                            }

                                            outs = Algorithms.Utility.ListUtility.Difference(System.Int32, this._laterNeighbors.Value.getItem(v), ins);

                                            $t1 = Bridge.getEnumerator(outs);
                                            try {
                                                while ($t1.moveNext()) {
                                                    x = $t1.Current;
                                                    gain[System.Array.index(x, gain)] = (gain[System.Array.index(x, gain)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t1, System.IDisposable)) {
                                                    $t1.System$IDisposable$dispose();
                                                }
                                            }
                                            $t2 = Bridge.getEnumerator(this.EnumerateOrientationsFor(((v + 1) | 0), requiredIndegree, gain), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                            $step = 9;
                                            continue;
                                    }
                                    case 9: {
                                        if ($t2.moveNext()) {
                                                o = $t2.Current;
                                                $step = 10;
                                                continue;
                                            }
                                        $step = 12;
                                        continue;
                                    }
                                    case 10: {
                                        o.add(ins);

                                            $enumerator.current = o;
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 9;
                                        continue;
                                    }
                                    case 12: {
                                        $t3 = Bridge.getEnumerator(outs);
                                            try {
                                                while ($t3.moveNext()) {
                                                    x1 = $t3.Current;
                                                    gain[System.Array.index(x1, gain)] = (gain[System.Array.index(x1, gain)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t3, System.IDisposable)) {
                                                    $t3.System$IDisposable$dispose();
                                                }
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 13: {
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            GenerateRandomOrientation: function () {
                var $t;
                var undirectedWeights = System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f31).toList(System.Int32);
                var edgeIndices = System.Linq.Enumerable.from(undirectedWeights).select($asm.$.Algorithms.Graph.f32).where($asm.$.Algorithms.Graph.f33).toList(System.Int32);

                var list = new (System.Collections.Generic.List$1(System.Int32))(((Bridge.Int.div(this.E, 2)) | 0));
                $t = Bridge.getEnumerator(edgeIndices);
                try {
                    while ($t.moveNext()) {
                        var i = $t.Current;
                        if (Algorithms.Graph.RNG.next$1(2) === 0) {
                            list.add(i);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var weights = System.Linq.Enumerable.from(undirectedWeights).select(function (w, i1) {
                        return list.contains(i1) ? ((-w) | 0) : w;
                    }).toList(System.Int32);

                return new Algorithms.Graph.$ctor1(weights);
            },
            EnumerateAcyclicOrientations: function () {
                return this.EnumerateAcyclicOrientations$1(0, new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))());
            },
            EnumerateAcyclicOrientations$1: function (i, outNeighbors) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (i, outNeighbors) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        neighbors,
                        clone,
                        $t,
                        g,
                        sortedNeighbors,
                        $t1,
                        d,
                        clone1,
                        $t2,
                        v,
                        $t3,
                        g1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (i >= this.N) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        $enumerator.current = this.FromOutNeighborLists(outNeighbors);
                                            $step = 2;
                                            return true;
                                    }
                                    case 2: {
                                        $step = 18;
                                        continue;
                                    }
                                    case 3: {
                                        neighbors = this.NeighborsInSubgraph(i, System.Linq.Enumerable.range(0, i).toList(System.Int32));
                                            if (neighbors.Count <= 0) {
                                                $step = 4;
                                                continue;
                                            } else  {
                                                $step = 9;
                                                continue;
                                            }
                                    }
                                    case 4: {
                                        clone = this.CloneOutNeighbors(outNeighbors);

                                            clone.set(i, new (System.Collections.Generic.List$1(System.Int32))());
                                            $t = Bridge.getEnumerator(this.EnumerateAcyclicOrientations$1(((i + 1) | 0), clone), Algorithms.Graph);
                                            $step = 5;
                                            continue;
                                    }
                                    case 5: {
                                        if ($t.moveNext()) {
                                                g = $t.Current;
                                                $step = 6;
                                                continue;
                                            }
                                        $step = 8;
                                        continue;
                                    }
                                    case 6: {
                                        $enumerator.current = g;
                                            $step = 7;
                                            return true;
                                    }
                                    case 7: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 17;
                                        continue;
                                    }
                                    case 9: {
                                        sortedNeighbors = this.TopologicalSort(i, neighbors, outNeighbors);
                                            $t1 = Bridge.getEnumerator(this.EnumerateLegalDirectionAssignments(i, sortedNeighbors, outNeighbors), System.Int64);
                                            $step = 10;
                                            continue;
                                    }
                                    case 10: {
                                        if ($t1.moveNext()) {
                                                d = $t1.Current;
                                                $step = 11;
                                                continue;
                                            }
                                        $step = 16;
                                        continue;
                                    }
                                    case 11: {
                                        clone1 = this.CloneOutNeighbors(outNeighbors);

                                            clone1.set(i, System.Linq.Enumerable.from(Algorithms.Int64Usage.EnumerateBits(d)).select(function (b) {
                                                    return sortedNeighbors.getItem(((((sortedNeighbors.Count - 1) | 0) - b) | 0));
                                                }).toList(System.Int32));
                                            $t2 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.Difference(System.Int32, neighbors, clone1.get(i)));
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    clone1.get(v).add(i);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            $t3 = Bridge.getEnumerator(this.EnumerateAcyclicOrientations$1(((i + 1) | 0), clone1), Algorithms.Graph);
                                            $step = 12;
                                            continue;
                                    }
                                    case 12: {
                                        if ($t3.moveNext()) {
                                                g1 = $t3.Current;
                                                $step = 13;
                                                continue;
                                            }
                                        $step = 15;
                                        continue;
                                    }
                                    case 13: {
                                        $enumerator.current = g1;
                                            $step = 14;
                                            return true;
                                    }
                                    case 14: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 15: {
                                        $step = 10;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 17;
                                        continue;
                                    }
                                    case 17: {
                                        $step = 18;
                                        continue;
                                    }
                                    case 18: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            CloneOutNeighbors: function (outNeighbors) {
                var $t;
                var clone = new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))();

                $t = Bridge.getEnumerator(outNeighbors);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        clone.set(kvp.key, System.Linq.Enumerable.from(kvp.value).toList(System.Int32));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return clone;
            },
            TopologicalSort: function (i, vertices, outNeighbors) {
                var $t, $t1, $t2;
                var inNeighborCount = System.Array.init(i, 0, System.Int32);
                $t = Bridge.getEnumerator(outNeighbors);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        if (!vertices.contains(kvp.key)) {
                            continue;
                        }

                        $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(kvp.value).intersect(vertices));
                        try {
                            while ($t1.moveNext()) {
                                var v = $t1.Current;
                                inNeighborCount[System.Array.index(v, inNeighborCount)] = (inNeighborCount[System.Array.index(v, inNeighborCount)] + 1) | 0;
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var sorted = new (System.Collections.Generic.List$1(System.Int32))(i);
                var sources = System.Linq.Enumerable.from(vertices).where(function (v1) {
                        return inNeighborCount[System.Array.index(v1, inNeighborCount)] === 0;
                    }).toList(System.Int32);

                while (sources.Count > 0) {
                    var source = sources.getItem(((sources.Count - 1) | 0));
                    sources.removeAt(((sources.Count - 1) | 0));

                    sorted.add(source);
                    $t2 = Bridge.getEnumerator(System.Linq.Enumerable.from(outNeighbors.get(source)).intersect(vertices));
                    try {
                        while ($t2.moveNext()) {
                            var v1 = $t2.Current;
                            inNeighborCount[System.Array.index(v1, inNeighborCount)] = (inNeighborCount[System.Array.index(v1, inNeighborCount)] - 1) | 0;
                            if (inNeighborCount[System.Array.index(v1, inNeighborCount)] === 0) {
                                sources.add(v1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }}

                return sorted;
            },
            EnumerateLegalDirectionAssignments: function (i, sortedNeighbors, outNeighbors) {
                return new (Bridge.GeneratorEnumerable$1(System.Int64))(Bridge.fn.bind(this, function (i, sortedNeighbors, outNeighbors) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        d,
                        ancestorLists,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int64))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        d = System.Int64(0);

                                            ancestorLists = this.GetAncestorLists(i, outNeighbors);
                                            
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( true ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                    }
                                    case 2: {
                                        $enumerator.current = d;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        if (Algorithms.Int64Usage.AllSet(d, System.Int64(sortedNeighbors.Count))) {
                                                $step = 4;
                                                continue;
                                            }

                                            d = this.Closure(d.add(System.Int64(1)), sortedNeighbors, ancestorLists);

                                            $step = 1;
                                            continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            Closure: function (d, sortedNeighbors, ancestorLists) {
                var $t, $t1;
                var done = false;

                while (!done) {
                    done = true;

                    $t = Bridge.getEnumerator(sortedNeighbors);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            var vBit = (((sortedNeighbors.Count - 1) | 0) - sortedNeighbors.indexOf(v)) | 0;
                            $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(ancestorLists.get(v)).intersect(sortedNeighbors));
                            try {
                                while ($t1.moveNext()) {
                                    var w = $t1.Current;
                                    var wBit = (((sortedNeighbors.Count - 1) | 0) - sortedNeighbors.indexOf(w)) | 0;
                                    if (Algorithms.Int64Usage.IsBitSet(d, System.Int64(wBit)) && !Algorithms.Int64Usage.IsBitSet(d, System.Int64(vBit))) {
                                        d = Algorithms.Int64Usage.SetBit(d, System.Int64(vBit));
                                        done = false;
                                    }
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return d;
            },
            GetAncestorLists: function (i, outNeighbors) {
                var $t;
                var ancestorLists = new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))();

                for (var v = 0; v < i; v = (v + 1) | 0) {
                    ancestorLists.set(v, function (_o16) {
                            _o16.add(v);
                            return _o16;
                        }(new (System.Collections.Generic.List$1(System.Int32))()));
                }

                var done = false;
                while (!done) {
                    done = true;

                    for (var v1 = 0; v1 < i; v1 = (v1 + 1) | 0) {
                        $t = Bridge.getEnumerator(outNeighbors.get(v1));
                        try {
                            while ($t.moveNext()) {
                                var w = $t.Current;
                                if (w >= i) {
                                    continue;
                                }

                                var c = ancestorLists.get(w).Count;
                                ancestorLists.set(w, Algorithms.Utility.ListUtility.Union$1(System.Int32, ancestorLists.get(w), ancestorLists.get(v1)));

                                if (ancestorLists.get(w).Count > c) {
                                    done = false;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                }

                return ancestorLists;
            },
            FindFactors: function () {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(i);

                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (!this._adjacent.get([i, j])) {
                            equivalenceRelation.Relate(i, j);
                        }
                    }
                }

                return equivalenceRelation;
            },
            FindComponents: function () {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(i);

                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            equivalenceRelation.Relate(i, j);
                        }
                    }
                }

                return equivalenceRelation;
            },
            FindComponents$1: function (v) {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(v.getItem(i));

                    for (var j = (i + 1) | 0; j < v.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([v.getItem(i), v.getItem(j)])) {
                            equivalenceRelation.Relate(v.getItem(i), v.getItem(j));
                        }
                    }
                }

                return equivalenceRelation;
            },
            ComputeDiameter: function () {
                var $t, $t1;
                var distance = { };
                var next = { };
                this.FloydWarshall(distance, next);
                var diameter = 0;
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        $t1 = Bridge.getEnumerator(this.Vertices);
                        try {
                            while ($t1.moveNext()) {
                                var w = $t1.Current;
                                if (distance.v.get([v, w]) > diameter) {
                                    diameter = distance.v.get([v, w]);
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return diameter;
            },
            FloydWarshall: function (distance, next) {
                distance.v = System.Array.create(0, null, System.Int32, this.N, this.N);
                next.v = System.Array.create(0, null, System.Int32, this.N, this.N);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        distance.v.set([i, j], 715827882);
                    }
                }

                for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 < this.N; j1 = (j1 + 1) | 0) {
                        if (i1 === j1) {
                            distance.v.set([i1, j1], 0);
                        } else {
                            if (this._adjacent.get([i1, j1])) {
                                /* if (Directed[i, j])
                                   distance[i, j] = 1;

                                if (Directed[j, i])
                                   distance[j, i] = 1;*/

                                distance.v.set([i1, j1], 1);
                                distance.v.set([j1, i1], 1);
                            }
                        }
                    }
                }

                for (var i2 = 0; i2 < this.N; i2 = (i2 + 1) | 0) {
                    for (var j2 = 0; j2 < this.N; j2 = (j2 + 1) | 0) {
                        next.v.set([i2, j2], -1);
                    }
                }

                for (var k = 0; k < this.N; k = (k + 1) | 0) {
                    for (var i3 = 0; i3 < this.N; i3 = (i3 + 1) | 0) {
                        for (var j3 = 0; j3 < this.N; j3 = (j3 + 1) | 0) {
                            if (((distance.v.get([i3, k]) + distance.v.get([k, j3])) | 0) < distance.v.get([i3, j3])) {
                                distance.v.set([i3, j3], (distance.v.get([i3, k]) + distance.v.get([k, j3])) | 0);
                                next.v.set([i3, j3], k);
                            }
                        }
                    }
                }
            },
            FloydWarshallShortestPath: function (v, w, distance, next) {
                if (distance.get([v, w]) === 2147483647) {
                    return null;
                }

                if (next.get([v, w]) === -1) {
                    return System.Array.init([v, w], System.Int32);
                }

                return System.Linq.Enumerable.from(this.FloydWarshallShortestPath(v, next.get([v, w]), distance, next)).union(System.Linq.Enumerable.from(this.FloydWarshallShortestPath(next.get([v, w]), w, distance, next)).skip(1));
            }
        }
    });

    Bridge.define("$AnonymousType$2", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (range, index) {
                this.range = range;
                this.index = index;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$2)) {
                    return false;
                }
                return Bridge.equals(this.range, o.range) && Bridge.equals(this.index, o.index);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196187, this.range, this.index]);
                return h;
            },
            toJSON: function () {
                return {
                    range : this.range,
                    index : this.index
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"index","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_index","t":8,"rt":System.Int32,"fg":"index"},"fn":"index"},{"a":2,"n":"range","t":16,"rt":System.Collections.Generic.IEnumerable$1(System.Int32),"g":{"a":2,"n":"get_range","t":8,"rt":System.Collections.Generic.IEnumerable$1(System.Int32),"fg":"range"},"fn":"range"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.Graph", $asm.$);

    Bridge.apply($asm.$.Algorithms.Graph, {
        f1: function (_o11) {
            _o11.add("cadetblue");
            _o11.add("brown");
            _o11.add("dodgerblue");
            _o11.add("turquoise");
            _o11.add("orchid");
            _o11.add("blue");
            _o11.add("red");
            _o11.add("green");
            _o11.add("yellow");
            _o11.add("cyan");
            _o11.add("limegreen");
            _o11.add("pink");
            _o11.add("orange");
            _o11.add("goldenrod");
            _o11.add("aquamarine");
            _o11.add("black");
            return _o11;
        },
        f2: function (_o12) {
            _o12.add("blue");
            _o12.add("red");
            _o12.add("green");
            _o12.add("Orchid");
            _o12.add("yellow");
            _o12.add("cyan");
            _o12.add("Turquoise");
            _o12.add("CadetBlue");
            _o12.add("LimeGreen");
            _o12.add("brown");
            _o12.add("pink");
            _o12.add("orange");
            _o12.add("Cerulean");
            _o12.add("Goldenrod");
            _o12.add("Aquamarine");
            _o12.add("black");
            return _o12;
        },
        f3: function () {
            var e = 0;

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i, j])) {
                        e = (e + 1) | 0;
                    }
                }
            }

            return e;
        },
        f4: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j])) {
                        neighbors.getItem(i1).add(j);
                    }
                }
            }

            return neighbors;
        },
        f5: function () {
            var nn = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                nn.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (i1 !== j && !this._adjacent.get([i1, j])) {
                        nn.getItem(i1).add(j);
                    }
                }
            }

            return nn;
        },
        f6: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j]) && this.Directed.get([i1, j])) {
                        neighbors.getItem(i1).add(j);
                    }
                }
            }

            return neighbors;
        },
        f7: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j]) && this.Directed.get([i1, j])) {
                        neighbors.getItem(j).add(i1);
                    }
                }
            }

            return neighbors;
        },
        f8: function () {
            var later = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(this.Neighbors.Count);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                later.add(System.Linq.Enumerable.from(this.Neighbors.getItem(i)).where(function (n) {
                        return n > i;
                    }).toList(System.Int32));
            }

            return later;
        },
        f9: function () {
            return System.Linq.Enumerable.from(this.IndependentSetsInSubgraph(0)).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f10: function (set) {
            return set.Count === 2;
        },
        f11: function () {
            return System.Linq.Enumerable.from(this._independentSets.Value).where($asm.$.Algorithms.Graph.f10).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f12: function (set) {
            return set.Count === 3;
        },
        f13: function () {
            return System.Linq.Enumerable.from(this._independentSets.Value).where($asm.$.Algorithms.Graph.f12).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f14: function () {
            return Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, this._vertices);
        },
        f15: function () {
            return Algorithms.Utility.ListUtility.MaximalElements(System.Int32, this._independentSets.Value);
        },
        f16: function (x) {
            return x.toString();
        },
        f17: function (_, __, ___, ____) {
            return true;
        },
        f18: function (t) {
            return t;
        },
        f19: function (r, i) {
            return new $asm.$AnonymousType$2(r, i);
        },
        f20: function (i, j) {
            return { item1: i, item2: j };
        },
        f21: function (vertices) {
            return this.IsProperFactor(vertices);
        },
        f22: function (_o13) {
            _o13.add(this.Clone());
            return _o13;
        },
        f23: function (n) {
            return n.Count === this.Neighbors.getItem(0).Count;
        },
        f24: function (_o14) {
            _o14.add(new (System.Collections.Generic.List$1(System.Int32))());
            return _o14;
        },
        f25: function (c) {
            return c.ne(System.Int64(0));
        },
        f26: function (v) {
            return this.Degree(v);
        },
        f27: function (v, i) {
        return v > 0 ? i : -1;
    },
        f28: function (i) {
        return i >= 0;
    },
        f29: function (v1, i) {
        return v1 > 0 ? i : -1;
    },
        f30: function (v1) {
        return v1 > 0;
    },
        f31: function (w) {
            return Math.abs(w);
        },
        f32: function (w, i) {
            return w !== 0 ? i : -1;
        },
        f33: function (x) {
            return x > 0;
        }
    });

    Bridge.define("Algorithms.Graphs", {
        statics: {
            props: {
                Diamond: {
                    get: function () {
                        return Algorithms.Graph.op_Multiply(Algorithms.Graphs.E(2), Algorithms.Graphs.K(2));
                    }
                },
                Bull: {
                    get: function () {
                        return Algorithms.Graphs.K(3).AttachNewVertex$1([1]).AttachNewVertex$1([2]);
                    }
                },
                Kite: {
                    get: function () {
                        return Algorithms.Graphs.Diamond.AttachNewVertex$1([1]);
                    }
                },
                Dart: {
                    get: function () {
                        return Algorithms.Graphs.Diamond.AttachNewVertex$1([2]);
                    }
                },
                Chair: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AttachNewVertex$1([2]);
                    }
                },
                Empty: {
                    get: function () {
                        return new Algorithms.Graph.ctor(System.Array.create(false, null, System.Boolean, 0, 0));
                    }
                },
                Paw: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AddEdge(0, 2);
                    }
                },
                H: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AttachNewVertex$1([1]).AttachNewVertex$1([2]);
                    }
                }
            },
            methods: {
                E: function (n) {
                    return new Algorithms.Graph.ctor(System.Array.create(false, null, System.Boolean, n, n));
                },
                K: function (n) {
                    return Algorithms.Graphs.E(n).Complement();
                },
                P: function (n) {
                    var G = Algorithms.Graphs.E(n);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        G = G.AddEdge(i, ((i + 1) | 0));
                    }

                    return G;
                },
                Star: function (n) {
                    var G = Algorithms.Graphs.E(n);
                    for (var i = 1; i < n; i = (i + 1) | 0) {
                        G = G.AddEdge(0, i);
                    }

                    return G;
                },
                C: function (n) {
                    return Algorithms.Graphs.P(n).AddEdge(((n - 1) | 0), 0);
                }
            }
        }
    });

    Bridge.define("Algorithms.HashGraph", {
        fields: {
            _values: null,
            _outMinusIn: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (g, outMinusIn) {
                this.$initialize();                var $t;

                this._values = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(g.N, (((g.N - 1) | 0))), 2)) | 0), 0, System.Byte);
                this._outMinusIn = outMinusIn;

                var k = 0;
                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        var value = (g.getItem(i, j) ? 1 : 0) & 255;
                        this._values[System.Array.index(k, this._values)] = value;

                        if (g.getItem(i, j)) {
                            this._hashCode = (this._hashCode + (1 << (k % 32))) | 0;
                        }

                        k = (k + 1) | 0;
                    }
                }

                $t = Bridge.getEnumerator(outMinusIn);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.HashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._outMinusIn).sequenceEqual(other._outMinusIn) && System.Linq.Enumerable.from(this._values).sequenceEqual(other._values);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.HereditaryClassEnumeration", {
        statics: {
            fields: {
                _sizeComparer: null
            },
            ctors: {
                init: function () {
                    this._sizeComparer = new Algorithms.HereditaryClassEnumeration.SizeComparer();
                }
            },
            methods: {
                EnumerateClass: function (excluded) {
                    if (excluded === void 0) { excluded = []; }
                    return Algorithms.HereditaryClassEnumeration.EnumerateClass$1(System.Linq.Enumerable.from(excluded).toList(Algorithms.Graph));
                },
                EnumerateClass$1: function (excluded, maxVertices) {
                    return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (excluded, maxVertices) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            lastLevel,
                            currentLevel,
                            $t,
                            G,
                            neighborSets,
                            $t1,
                            neighborSet,
                            H,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (maxVertices === void 0) { maxVertices = 2147483647; }
                                                excluded.sort($asm.$.Algorithms.HereditaryClassEnumeration.f1);

                                                if (excluded.Count > 0 && excluded.getItem(0).N <= 1) {
                                                    $step = 1;
                                                    continue;
                                                } 
                                                $step = 2;
                                                continue;
                                        }
                                        case 1: {
                                            return false;
                                        }
                                        case 2: {
                                            $enumerator.current = new Algorithms.Graph.$ctor1(new (System.Collections.Generic.List$1(System.Int32))());
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            lastLevel = $asm.$.Algorithms.HereditaryClassEnumeration.f2(new (System.Collections.Generic.List$1(Algorithms.Graph))());

                                                
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            if ( lastLevel.Count > 0 ) {
                                                    $step = 5;
                                                    continue;
                                                } 
                                                $step = 15;
                                                continue;
                                        }
                                        case 5: {
                                            currentLevel = new (System.Collections.Generic.List$1(Algorithms.Graph))();

                                                $t = Bridge.getEnumerator(lastLevel);
                                                $step = 6;
                                                continue;
                                        }
                                        case 6: {
                                            if ($t.moveNext()) {
                                                    G = $t.Current;
                                                    $step = 7;
                                                    continue;
                                                }
                                            $step = 12;
                                            continue;
                                        }
                                        case 7: {
                                            if (G.IsComplete()) {
                                                    neighborSets = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, System.Linq.Enumerable.range(0, G.N).toList(System.Int32))).distinct(Algorithms.HereditaryClassEnumeration._sizeComparer).toList(System.Collections.Generic.List$1(System.Int32));
                                                } else {
                                                    neighborSets = Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, System.Linq.Enumerable.range(0, G.N).toList(System.Int32));
                                                }

                                                $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(neighborSets).where($asm.$.Algorithms.HereditaryClassEnumeration.f3));
                                                $step = 8;
                                                continue;
                                        }
                                        case 8: {
                                            if ($t1.moveNext()) {
                                                    neighborSet = $t1.Current;
                                                    $step = 9;
                                                    continue;
                                                }
                                            $step = 11;
                                            continue;
                                        }
                                        case 9: {
                                            H = { v : G.AttachNewVertex(neighborSet) };

                                                if (System.Linq.Enumerable.from(currentLevel).any((function ($me, H) {
                                                        return function (W) {
                                                            return Algorithms.Graph.Isomorphic(H.v, W);
                                                        };
                                                    })(this, H))) {
                                                    $step = 8;
                                                    continue;
                                                }
                                                if (System.Linq.Enumerable.from(excluded).any((function ($me, H) {
                                                        return function (W) {
                                                            return H.v.ContainsInduced(W);
                                                        };
                                                    })(this, H))) {
                                                    $step = 8;
                                                    continue;
                                                }

                                                currentLevel.add(H.v);
                                                $enumerator.current = H.v;
                                                $step = 10;
                                                return true;
                                        }
                                        case 10: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 11: {
                                            $step = 6;
                                            continue;
                                        }
                                        case 12: {
                                            if (currentLevel.Count > 0 && currentLevel.getItem(0).N >= maxVertices) {
                                                    $step = 13;
                                                    continue;
                                                } 
                                                $step = 14;
                                                continue;
                                        }
                                        case 13: {
                                            return false;
                                        }
                                        case 14: {
                                            lastLevel = currentLevel;

                                                $step = 4;
                                                continue;
                                        }
                                        case 15: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("Algorithms.HereditaryClassEnumeration", $asm.$);

    Bridge.apply($asm.$.Algorithms.HereditaryClassEnumeration, {
        f1: function (g1, g2) {
            return Bridge.compare(g1.N, g2.N);
        },
        f2: function (_o17) {
            _o17.add(new Algorithms.Graph.$ctor1(new (System.Collections.Generic.List$1(System.Int32))()));
            return _o17;
        },
        f3: function (l) {
            return l.Count > 0;
        }
    });

    Bridge.define("Algorithms.HereditaryClassEnumeration.SizeComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(System.Int32))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return x.Count === y.Count;
            },
            getHashCode2: function (obj) {
                return Bridge.getHashCode(obj.Count);
            }
        }
    });

    Bridge.define("Algorithms.Hypergraph$1", function (T) { return {
        fields: {
            _listComparer: null
        },
        props: {
            E: null
        },
        ctors: {
            init: function () {
                this._listComparer = new (Algorithms.Hypergraph$1.SortedListComparer(T))();
            },
            ctor: function (edges) {
                if (edges === void 0) { edges = null; }

                this.$initialize();                var $t;

                if (edges != null) {
                    $t = Bridge.getEnumerator(edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            e.sort();
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }this.E = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(T))).$ctor2(edges, this._listComparer);
                } else {
                    this.E = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(T))).$ctor3(this._listComparer);
                }
        }
    },
    methods: {
        Min: function () {
            var $t;
            var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

            $t = Bridge.getEnumerator(this.E);
            try {
                while ($t.moveNext()) {
                    var set = $t.Current;
                    var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                        return function (head) {
                            return Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, set, head);
                        };
                    })(this, set), $asm.$.Algorithms.Hypergraph$1.f1);
                    if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                            return function (head) {
                                return !Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, head, set);
                            };
                        })(this, set))) {
                        chainHeads.add(set);
                    }
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            return new (Algorithms.Hypergraph$1(T))(chainHeads);
        },
        Tr: function () {
            var $t;
            var H = new (Algorithms.Hypergraph$1(T))(function (_o18) {
                    _o18.add(new (System.Collections.Generic.List$1(T))());
                    return _o18;
                }(new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))()));

            $t = Bridge.getEnumerator(this.E);
            try {
                while ($t.moveNext()) {
                    var e = $t.Current;
                    H = H.Product(this.EdgeHypergraph(e)).Min();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            return H;
        },
        EdgeHypergraph: function (e) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(e).select(function (v) {
                    return Algorithms.GenericExtensions.EnList(T, v);
                }).toList(System.Collections.Generic.List$1(T)));
        },
        Union: function (other) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(this.E).union(other.E).toList(System.Collections.Generic.List$1(T)));
        },
        Product: function (other) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(this.E).selectMany(function (e_i) {
                    return System.Linq.Enumerable.from(other.E).select(function (e_j) {
                            return Algorithms.Utility.ListUtility.Union$1(T, e_i, e_j);
                        }).toList(System.Collections.Generic.List$1(T));
                }).toList(System.Collections.Generic.List$1(T)));
        }
    }
    }; });

    Bridge.ns("Algorithms.Hypergraph$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Hypergraph$1, {
        f1: function (x) { }
    });

    Bridge.define("Algorithms.Hypergraph$1.SortedListComparer", function (T) { return {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(T))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$" + Bridge.getTypeAlias(T) + "$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$" + Bridge.getTypeAlias(T) + "$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (list) {
                var $t;
                var hash = 19;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 31) | 0) + Bridge.getHashCode(x)) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    }; });

    Bridge.define("Algorithms.IndependenceRatio.MinorFinder", {
        statics: {
            methods: {
                FindWithJ: function (g, J) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Object)))(Bridge.fn.bind(this, function (g, J) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            triple,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Object)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (J.Count !== 3) {
                                                    $step = 1;
                                                    continue;
                                                } 
                                                $step = 2;
                                                continue;
                                        }
                                        case 1: {
                                            return false;
                                        }
                                        case 2: {
                                            $t = Bridge.getEnumerator(Algorithms.IndependenceRatio.MinorFinder.EnumerateConnectedThreePartPartitions(g, J), System.Object);
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    triple = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item3, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item1, triple.item2) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, triple.item2), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item1, triple.item3) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, triple.item3), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item2, triple.item3) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, triple.item2), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                $enumerator.current = (function ($me, triple) {
                                                        return function (_o19) {
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item1).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, J)) });
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item2).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, J)) });
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item3).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item3, J)) });
                                                            return _o19;
                                                        };
                                                    })(this, triple)(new (System.Collections.Generic.List$1(System.Object))());
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateConnectedThreePartPartitions: function (g, J) {
                    return new (Bridge.GeneratorEnumerable$1(System.Object))(Bridge.fn.bind(this, function (g, J) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            rest,
                            $t,
                            first,
                            rest2,
                            $t1,
                            second,
                            third,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Object))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            rest = System.Linq.Enumerable.from(g.Vertices).except(J).toList(System.Int32);
                                                Algorithms.GenericExtensions.Shuffle(System.Int32, rest);
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, rest), System.Collections.Generic.List$1(System.Int32));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    first = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 7;
                                            continue;
                                        }
                                        case 2: {
                                            first.add(J.getItem(0));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(first).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                rest2 = System.Linq.Enumerable.from(rest).except(first).toList(System.Int32);
                                                $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, rest2), System.Collections.Generic.List$1(System.Int32));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t1.moveNext()) {
                                                    second = $t1.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            second.add(J.getItem(1));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(second).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                third = System.Linq.Enumerable.from(rest2).except(second).toList(System.Int32);
                                                third.add(J.getItem(2));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(third).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                $enumerator.current = { item1: first, item2: second, item3: third };
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 7: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.Int32Usage", {
        statics: {
            fields: {
                DeBruijnMultiplier: 0,
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = 125613361;
                    this.DeBruijnLookup = System.Array.init([0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8, 31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9], System.Int32);
                }
            },
            methods: {
                LeastSignificantBit: function (x) {
                    return Algorithms.Int32Usage.DeBruijnLookup[System.Array.index((((((x & ((-x) | 0))) >>> 0) * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = x.v & ((-x.v) | 0);
                    x.v = x.v ^ m;
                    return Algorithms.Int32Usage.DeBruijnLookup[System.Array.index((((m >>> 0) * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b > 0) {
                        q = (q + 1) | 0;
                        b = (b & (((b - 1) >>> 0))) >>> 0;
                    }
                    return q;
                },
                ToSet: function (x) {
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x !== 0) {
                        var lsb = (x & (((0 - x) >>> 0))) >>> 0;
                        onBits.add(Algorithms.Int32Usage.DeBruijnLookup[System.Array.index(((lsb * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)]);

                        x = (x ^ lsb) >>> 0;
                    }

                    return onBits;
                }
            }
        }
    });

    Bridge.define("Algorithms.Int64Usage", {
        statics: {
            fields: {
                DeBruijnMultiplier: System.UInt64(0),
                DeBruijnLookup: null,
                BitMask: null,
                NotBitMask: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = System.UInt64(System.Int64([-1706153790,133027301]));
                    this.DeBruijnLookup = System.Array.init([
                        63, 
                        0, 
                        58, 
                        1, 
                        59, 
                        47, 
                        53, 
                        2, 
                        60, 
                        39, 
                        48, 
                        27, 
                        54, 
                        33, 
                        42, 
                        3, 
                        61, 
                        51, 
                        37, 
                        40, 
                        49, 
                        18, 
                        28, 
                        20, 
                        55, 
                        30, 
                        34, 
                        11, 
                        43, 
                        14, 
                        22, 
                        4, 
                        62, 
                        57, 
                        46, 
                        52, 
                        38, 
                        26, 
                        32, 
                        41, 
                        50, 
                        36, 
                        17, 
                        19, 
                        29, 
                        10, 
                        13, 
                        21, 
                        56, 
                        45, 
                        25, 
                        31, 
                        35, 
                        16, 
                        9, 
                        12, 
                        44, 
                        24, 
                        15, 
                        8, 
                        23, 
                        7, 
                        6, 
                        5
                    ], System.Int32);
                    this.BitMask = System.Array.init(64, System.Int64(0), System.Int64);
                    this.NotBitMask = System.Array.init(64, System.Int64(0), System.Int64);
                },
                ctor: function () {
                    var $t;
                    $t = Bridge.getEnumerator(System.Linq.Enumerable.range(0, 64));
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)] = (System.Int64(1)).shl(bit);
                            Algorithms.Int64Usage.NotBitMask[System.Array.index(bit, Algorithms.Int64Usage.NotBitMask)] = ((System.Int64(1)).shl(bit)).not();
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}
        },
        methods: {
            GeneratePairMasks: function (n) {
                var maskMap = new (System.Collections.Generic.Dictionary$2(System.Int64,System.Int64))();

                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        maskMap.set(Algorithms.Int64Usage.BitMask[System.Array.index(i, Algorithms.Int64Usage.BitMask)].or(Algorithms.Int64Usage.BitMask[System.Array.index(j, Algorithms.Int64Usage.BitMask)]), Algorithms.Int64Usage.BitMask[System.Array.index(j, Algorithms.Int64Usage.BitMask)]);
                    }
                }

                return maskMap;
            },
            ClearBit: function (x, bit) {
                return x.and(Algorithms.Int64Usage.NotBitMask[System.Array.index(bit, Algorithms.Int64Usage.NotBitMask)]);
            },
            SetBit: function (x, bit) {
                return x.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
            },
            IsBitSet: function (x, bit) {
                return (x.and(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)])).ne(System.Int64(0));
            },
            FlipBits: function (x, bit) {
                return x.xor(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
            },
            FlipBits$1: function (x, bit1, bit2) {
                return x.xor((Algorithms.Int64Usage.BitMask[System.Array.index(bit1, Algorithms.Int64Usage.BitMask)].or(Algorithms.Int64Usage.BitMask[System.Array.index(bit2, Algorithms.Int64Usage.BitMask)])));
            },
            FlipBits$2: function (x, bits) {
                var $t;
                if (bits === void 0) { bits = []; }
                if (bits == null) {
                    return x;
                }

                var mask = System.Int64(0);
                $t = Bridge.getEnumerator(bits);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        mask = mask.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return x.xor(mask);
            },
            LeastSignificantBit: function (b) {
                return Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(System.Int64.clipu64((b.and(b.neg()))).mul(Algorithms.Int64Usage.DeBruijnMultiplier).shru(58), Algorithms.Int64Usage.DeBruijnLookup)];
            },
            GetAndClearLeastSignificantBit: function (x) {
                var m = x.v.and(x.v.neg());
                x.v = x.v.xor(m);
                return Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(m).mul(Algorithms.Int64Usage.DeBruijnMultiplier)).shru(58)), Algorithms.Int64Usage.DeBruijnLookup)];
            },
            PopulationCount: function (b) {
                var q = 0;
                while (b.gt(System.Int64(0))) {
                    q = (q + 1) | 0;
                    b = b.and((b.sub(System.Int64(1))));
                }
                return q;
            },
            PopulationCount$1: function (x) {
                var k1 = System.UInt64([1431655765,1431655765]);
                var k2 = System.UInt64([858993459,858993459]);
                var k4 = System.UInt64([252645135,252645135]);
                x = x.sub(((x.shru(1)).and(k1)));
                x = (x.and(k2)).add(((x.shru(2)).and(k2)));
                x = (x.add((x.shru(4)))).and(k4);
                x = (x.mul(System.UInt64([16843009,16843009]))).shru(56);
                return System.Int64.clip32(x);
            },
            RightFillToMSB: function (x) {
                x = x.or((x.shru(1)));
                x = x.or((x.shru(2)));
                x = x.or((x.shru(4)));
                x = x.or((x.shru(8)));
                x = x.or((x.shru(16)));
                x = x.or((x.shru(32)));

                return x;
            },
            ToBitString: function (x, length) {
                if (length === void 0) { length = 64; }
                return Bridge.toArray(System.Linq.Enumerable.range(0, length).select(function (bit) {
                        return Algorithms.Int64Usage.IsBitSet(x, System.Int64(bit)) ? "1" : "0";
                    })).join("");
            },
            ToSet: function (x) {
                x = {v:x};
                var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                while (x.v.ne(System.Int64(0))) {
                    onBits.add(Algorithms.Int64Usage.GetAndClearLeastSignificantBit(x));
                }

                return onBits;
            },
            ToSet$1: function (x) {
                var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                while (x.ne(System.UInt64(0))) {
                    var lsb = x.and((System.UInt64(0).sub(x)));
                    onBits.add(Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(lsb.mul(Algorithms.Int64Usage.DeBruijnMultiplier).shru(58), Algorithms.Int64Usage.DeBruijnLookup)]);

                    x = x.xor(lsb);
                }

                return onBits;
            },
            EnumerateBits: function (x) {
                return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (x) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        lsb,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        x = {v:x};
                                            
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( x.v.ne(System.Int64(0)) ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                    }
                                    case 2: {
                                        lsb = Algorithms.Int64Usage.GetAndClearLeastSignificantBit(x);
                                            $enumerator.current = lsb;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        
                                            $step = 1;
                                            continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            ToInt64$1: function (bits) {
                var $t;
                if (bits === void 0) { bits = []; }
                var total = System.Int64(0);
                $t = Bridge.getEnumerator(bits);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ToInt64: function (set) {
                var $t;
                var total = System.Int64(0);
                $t = Bridge.getEnumerator(set, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ToUInt64: function (set) {
                var $t;
                var total = System.UInt64(0);
                $t = Bridge.getEnumerator(set, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or((System.UInt64(1).shl(bit)));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ExpandIntoLists: function (xs) {
                return System.Linq.Enumerable.from(xs).select($asm.$.Algorithms.Int64Usage.f1).toList(System.Collections.Generic.List$1(System.Int32));
            },
            ToSetString$2: function (x) {
                return Algorithms.Int64Usage.ToSetString(Algorithms.Int64Usage.ToSet(x));
            },
            ToSetString$1: function (list) {
                return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(list).select($asm.$.Algorithms.Int64Usage.f2)).join(", "), "}");
            },
            ToSetString: function (list) {
                return System.String.concat("{", Bridge.toArray(list).join(", "), "}");
            },
            ToSetStringSmall: function (x) {
                return [Bridge.toArray(Algorithms.Int64Usage.ToSet(x)).join("")].join("|");
            },
            AllSet: function (x, i) {
                return Algorithms.Int64Usage.IsBitSet((x.xor((x.add(System.Int64(1))))), System.Int64(i));
            },
            GetBits: function (x) {
                var setBits = new (System.Collections.Generic.List$1(System.Int64))();

                while (x.ne(System.Int64(0))) {
                    var lsb = x.and(x.neg());

                    setBits.add(lsb);

                    x = x.xor(lsb);
                }

                return setBits;
            },
            GetBits$1: function (x) {
                var setBits = new (System.Collections.Generic.List$1(System.UInt64))(16);

                while (x.ne(System.UInt64(0))) {
                    var lsb = x.and((System.UInt64(0).sub(x)));
                    setBits.add(lsb);
                    x = x.xor(lsb);
                }

                return setBits;
            }
        }
    }
    });

    Bridge.ns("Algorithms.Int64Usage", $asm.$);

    Bridge.apply($asm.$.Algorithms.Int64Usage, {
        f1: function (x) {
            return System.Linq.Enumerable.from(Algorithms.Int64Usage.ToSet(x)).toList(System.Int32);
        },
        f2: function (l) {
            return Algorithms.Int64Usage.ToSetString$2(l);
        }
    });

    Bridge.define("Algorithms.Lazy$1", function (T) { return {
        statics: {
            methods: {
                op_Implicit: function (da) {
                    return da.Value;
                }
            }
        },
        fields: {
            _creator: null,
            _value: null,
            _token: null
        },
        props: {
            Value: {
                get: function () {
                    if (this._value == null) {
                        this._token;
                        {
                            if (this._value == null) {
                                this._value = this._creator();
                            }
                        }
                    }

                    return this._value;
                }
            }
        },
        ctors: {
            init: function () {
                this._value = Bridge.getDefaultValue(T);
                this._token = {  };
            },
            ctor: function (creator) {
                this.$initialize();
                this._creator = creator;
            },
            $ctor1: function (creator, threadSafe) {
                Algorithms.Lazy$1(T).ctor.call(this, creator);
            }
        },
        methods: {
            Forget: function () {
                this._token;
                this._value = Bridge.getDefaultValue(T);
            }
        }
    }; });

    Bridge.define("Algorithms.OneFactorizationsOfCompleteGraph", {
        statics: {
            methods: {
                EnumerateOneFactorizations: function (n) {
                    var list = System.Int64(0);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list.or((System.Int64(1).shl(i)));
                    }

                    var coloring = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(n, (((n - 1) | 0))), 2)) | 0), 0, System.Int32);
                    for (var i1 = 0; i1 < ((n - 1) | 0); i1 = (i1 + 1) | 0) {
                        coloring[System.Array.index(i1, coloring)] = i1;
                    }

                    var lists = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list.xor(System.Int64((1 << (((i2 - 1) | 0)))));
                    }

                    var priorNeighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();


                    return Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(1, 2, n, lists, coloring);
                },
                EnumerateOneFactorizations$1: function (i, j, n, lists, coloring) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function (i, j, n, lists, coloring) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            copy,
                            $t,
                            of,
                            $t1,
                            c,
                            $t2,
                            of1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (i >= n) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            copy = System.Array.init(coloring.length, 0, System.Int32);
                                                System.Array.copy(coloring, 0, copy, 0, coloring.length);
                                                $enumerator.current = copy;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 3: {
                                            if (j >= n) {
                                                    $step = 4;
                                                    continue;
                                                } else  {
                                                    $step = 9;
                                                    continue;
                                                }
                                        }
                                        case 4: {
                                            $t = Bridge.getEnumerator(Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(((i + 1) | 0), ((i + 2) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 5;
                                                continue;
                                        }
                                        case 5: {
                                            if ($t.moveNext()) {
                                                    of = $t.Current;
                                                    $step = 6;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 6: {
                                            $enumerator.current = of;
                                                $step = 7;
                                                return true;
                                        }
                                        case 7: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 8: {
                                            $step = 17;
                                            continue;
                                        }
                                        case 9: {
                                            $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits((lists[System.Array.index(i, lists)].and(lists[System.Array.index(j, lists)]))), System.Int32);
                                                $step = 10;
                                                continue;
                                        }
                                        case 10: {
                                            if ($t1.moveNext()) {
                                                    c = $t1.Current;
                                                    $step = 11;
                                                    continue;
                                                }
                                            $step = 16;
                                            continue;
                                        }
                                        case 11: {
                                            lists[System.Array.index(i, lists)] = Algorithms.Int64Usage.ClearBit(lists[System.Array.index(i, lists)], System.Int64(c));
                                                lists[System.Array.index(j, lists)] = Algorithms.Int64Usage.ClearBit(lists[System.Array.index(j, lists)], System.Int64(c));

                                                coloring[System.Array.index(((((((((Bridge.Int.mul(i, n) - ((Bridge.Int.div(Bridge.Int.mul(i, (((i + 1) | 0))), 2)) | 0)) | 0) + j) | 0) - i) | 0) - 1) | 0), coloring)] = c;
                                                $t2 = Bridge.getEnumerator(Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(i, ((j + 1) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 12;
                                                continue;
                                        }
                                        case 12: {
                                            if ($t2.moveNext()) {
                                                    of1 = $t2.Current;
                                                    $step = 13;
                                                    continue;
                                                }
                                            $step = 15;
                                            continue;
                                        }
                                        case 13: {
                                            $enumerator.current = of1;
                                                $step = 14;
                                                return true;
                                        }
                                        case 14: {
                                            $step = 12;
                                            continue;
                                        }
                                        case 15: {
                                            lists[System.Array.index(i, lists)] = Algorithms.Int64Usage.SetBit(lists[System.Array.index(i, lists)], System.Int64(c));
                                                lists[System.Array.index(j, lists)] = Algorithms.Int64Usage.SetBit(lists[System.Array.index(j, lists)], System.Int64(c));
                                            $step = 10;
                                            continue;
                                        }
                                        case 16: {
                                            $step = 17;
                                            continue;
                                        }
                                        case 17: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 18: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                GetSignSum: function (n, plus, minus, progress) {
                    var $t;
                    plus.v = 0;
                    minus.v = 0;

                    var list = 0;
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list | (1 << i);
                    }

                    var of = System.Array.create(0, null, System.Int32, n, n);
                    for (var i1 = 1; i1 < n; i1 = (i1 + 1) | 0) {
                        of.set([0, i1], ($t = (i1 - 1) | 0, of.set([i1, 0], $t), $t));
                    }

                    var lists = System.Array.init(n, 0, System.Int32);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list ^ (1 << (((i2 - 1) | 0)));
                    }

                    var term = { v : Bridge.Int.mul(n, (((n - 1) | 0))) % 4 === 0 ? 1 : -1 };

                    Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(1, 2, n, lists, of, term, plus, minus, progress);

                    return ((plus.v - minus.v) | 0);
                },
                DoTerm: function (term, plus, minus, progress) {
                    if (term > 0) {
                        plus.v = (plus.v + 1) | 0;
                    } else {
                        minus.v = (minus.v + 1) | 0;
                    }

                    if ((((plus.v + minus.v) | 0)) % 1000000 === 0) {
                        if (!Bridge.staticEquals(progress, null)) {
                            progress(plus.v, minus.v);
                        }
                    }
                },
                DoSignSum: function (i, j, n, lists, of, term, plus, minus, progress) {
                    if (i >= ((n - 1) | 0)) {
                        Algorithms.OneFactorizationsOfCompleteGraph.DoTerm(term.v, plus, minus, progress);
                    } else {
                        var x = lists[System.Array.index(i, lists)] & lists[System.Array.index(j, lists)];
                        while (x !== 0) {
                            var c = x & ((-x) | 0);
                            x = x ^ c;
                            lists[System.Array.index(i, lists)] = lists[System.Array.index(i, lists)] ^ c;
                            lists[System.Array.index(j, lists)] = lists[System.Array.index(j, lists)] ^ c;

                            of.set([i, j], (of.set([j, i], c), c));

                            var factor = 1;
                            for (var k = 0; k < i; k = (k + 1) | 0) {
                                factor = Bridge.Int.mul(factor, (1 | ((((c - of.get([k, j])) | 0)) >> 31)));
                            }
                            for (var k1 = 0; k1 < j; k1 = (k1 + 1) | 0) {
                                factor = Bridge.Int.mul(factor, (1 | ((((c - of.get([i, k1])) | 0)) >> 31)));
                            }

                            term.v = Bridge.Int.mul(term.v, factor);
                            if (j >= ((n - 1) | 0)) {
                                Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(((i + 1) | 0), ((i + 2) | 0), n, lists, of, term, plus, minus, progress);
                            } else {
                                Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(i, ((j + 1) | 0), n, lists, of, term, plus, minus, progress);
                            }
                            term.v = Bridge.Int.mul(term.v, factor);

                            lists[System.Array.index(i, lists)] = lists[System.Array.index(i, lists)] ^ c;
                            lists[System.Array.index(j, lists)] = lists[System.Array.index(j, lists)] ^ c;
                        }
                    }
                }
            }
        }
    });

    Bridge.define("Algorithms.OnFactorizationsOfCompleteGraph", {
        statics: {
            methods: {
                EnumerateOneFactorizations: function (n) {
                    var list = System.Int64(0);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list.or((System.Int64(1).shl(i)));
                    }

                    var coloring = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(n, (((n - 1) | 0))), 2)) | 0), 0, System.Int32);
                    for (var i1 = 0; i1 < ((n - 1) | 0); i1 = (i1 + 1) | 0) {
                        coloring[System.Array.index(i1, coloring)] = i1;
                    }

                    var lists = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list.xor(System.Int64((1 << (((i2 - 1) | 0)))));

                        coloring[System.Array.index(((Bridge.Int.mul(i2, n) - ((Bridge.Int.div(Bridge.Int.mul(i2, (((i2 + 1) | 0))), 2)) | 0)) | 0), coloring)] = (i2 - 1) | 0;
                    }

                    return Algorithms.OnFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(1, 2, n, lists, coloring);
                },
                EnumerateOneFactorizations$1: function (i, j, n, lists, coloring) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function (i, j, n, lists, coloring) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            copy,
                            $t,
                            of,
                            $t1,
                            c,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (i >= n) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            copy = System.Array.init(coloring.length, 0, System.Int32);
                                                System.Array.copy(coloring, 0, copy, 0, coloring.length);
                                                $enumerator.current = copy;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 3: {
                                            if (j >= n) {
                                                    $step = 4;
                                                    continue;
                                                } else  {
                                                    $step = 9;
                                                    continue;
                                                }
                                        }
                                        case 4: {
                                            $t = Bridge.getEnumerator(Algorithms.OnFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(((i + 1) | 0), ((i + 2) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 5;
                                                continue;
                                        }
                                        case 5: {
                                            if ($t.moveNext()) {
                                                    of = $t.Current;
                                                    $step = 6;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 6: {
                                            $enumerator.current = of;
                                                $step = 7;
                                                return true;
                                        }
                                        case 7: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 8: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 9: {
                                            $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits((lists[System.Array.index(i, lists)].and(lists[System.Array.index(j, lists)]))), System.Int32);
                                                try {
                                                    while ($t1.moveNext()) {
                                                        c = $t1.Current;

                                                    }
                                                } finally {
                                                    if (Bridge.is($t1, System.IDisposable)) {
                                                        $t1.System$IDisposable$dispose();
                                                    }
                                                }
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 11: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.OnlineChoiceHashGraph", {
        fields: {
            _f: null,
            _g: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (f, g) {
                this.$initialize();                var $t, $t1;

                this._f = Bridge.cast(System.Array.clone(f), System.Array.type(System.Int32));
                this._g = Bridge.cast(System.Array.clone(g), System.Array.type(System.Int32));

                for (var i = 0; i < this._g.length; i = (i + 1) | 0) {
                    if (this._g[System.Array.index(i, this._g)] === 0) {
                        this._f[System.Array.index(i, this._f)] = 0;
                    }
                }

                $t = Bridge.getEnumerator(this._f);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(this._g);
                try {
                    while ($t1.moveNext()) {
                        var i2 = $t1.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i2) | 0;
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.OnlineChoiceHashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._g).sequenceEqual(other._g) && System.Linq.Enumerable.from(this._f).sequenceEqual(other._f);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.OrientationHashGraph", {
        fields: {
            _values: null,
            _outMinusIn: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (g, outMinusIn) {
                this.$initialize();                var $t;

                this._values = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(g.N, (((g.N - 1) | 0))), 2)) | 0), 0, System.Byte);
                this._outMinusIn = outMinusIn;

                var k = 0;
                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        var value = (g.getItem(i, j) ? 1 : 0) & 255;
                        this._values[System.Array.index(k, this._values)] = value;

                        if (g.getItem(i, j)) {
                            this._hashCode = (this._hashCode + (1 << (k % 32))) | 0;
                        }

                        k = (k + 1) | 0;
                    }
                }

                $t = Bridge.getEnumerator(outMinusIn);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.OrientationHashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._outMinusIn).sequenceEqual(other._outMinusIn) && System.Linq.Enumerable.from(this._values).sequenceEqual(other._values);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.OrientationResult", {
        props: {
            Graph: null,
            Even: 0,
            Odd: 0
        }
    });

    Bridge.define("Algorithms.Polynomials.FactoredRational", {
        statics: {
            fields: {
                Zero: null
            },
            ctors: {
                init: function () {
                    var $t;
                    this.Zero = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.Sign = 0, $t);
                }
            },
            methods: {
                op_Multiply: function (fi, fi2) {
                    var $t;
                    var sign = Bridge.Int.mul(fi.Sign, fi2.Sign);
                    var k = new (System.Collections.Generic.List$1(System.Int32))(Math.max(fi.K.Count, fi2.K.Count));

                    if (sign !== 0) {
                        for (var i = 0; i < Math.max(fi.K.Count, fi2.K.Count); i = (i + 1) | 0) {
                            k.add(0);
                            if (i < fi.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi.K.getItem(i)) | 0);
                            }
                            if (i < fi2.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi2.K.getItem(i)) | 0);
                            }
                        }
                    }

                    return ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = k, $t.Sign = sign, $t);
                },
                op_Division: function (fi, fi2) {
                    var $t;
                    var sign = Bridge.Int.mul(fi.Sign, fi2.Sign);
                    var k = new (System.Collections.Generic.List$1(System.Int32))(Math.max(fi.K.Count, fi2.K.Count));

                    if (sign !== 0) {
                        for (var i = 0; i < Math.max(fi.K.Count, fi2.K.Count); i = (i + 1) | 0) {
                            k.add(0);
                            if (i < fi.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi.K.getItem(i)) | 0);
                            }
                            if (i < fi2.K.Count) {
                                k.setItem(i, (k.getItem(i) - fi2.K.getItem(i)) | 0);
                            }
                        }
                    }

                    return ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = k, $t.Sign = sign, $t);
                }
            }
        },
        fields: {
            Sign: 0,
            K: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (n) {
                this.$initialize();
                var vv = System.Array.init(11, 0, System.Int32);
                for (var jj = 0; jj <= 10; jj = (jj + 1) | 0) {
                    vv[System.Array.index(jj, vv)] = this.Power(2, jj);
                }

                this.Sign = System.Decimal(n).sign();
                n = Bridge.Int.mul(n, this.Sign);

                this.K = new (System.Collections.Generic.List$1(System.Int32))();
                var i = 0;

                while (n > 1) {
                    this.K.add(0);
                    var p = Algorithms.Polynomials.PrimeNumbers.Get(i);
                    while (n % p === 0) {
                        this.K.setItem(i, (this.K.getItem(i) + 1) | 0);
                        n = (Bridge.Int.div(n, p)) | 0;
                    }

                    i = (i + 1) | 0;
                }
            }
        },
        methods: {
            ToRational: function (top, bottom) {
                if (this.K == null || this.Sign === 0) {
                    top.v = 0;
                    bottom.v = 1;
                    return;
                }

                top.v = this.Sign;
                bottom.v = 1;
                for (var i = 0; i < this.K.Count; i = (i + 1) | 0) {
                    if (this.K.getItem(i) > 0) {
                        top.v = Bridge.Int.mul(top.v, (this.Power(Algorithms.Polynomials.PrimeNumbers.Get(i), this.K.getItem(i))));
                    } else {
                        bottom.v = Bridge.Int.mul(bottom.v, (this.Power(Algorithms.Polynomials.PrimeNumbers.Get(i), ((-this.K.getItem(i)) | 0))));
                    }
                }
            },
            Power: function (p, k) {
                var m = 1;
                while (k > 0) {
                    var e = 1;
                    var n = p;
                    while (e <= k >> 1) {
                        n = Bridge.Int.mul(n, n);
                        e = e << 1;
                    }

                    k = (k - e) | 0;
                    m = Bridge.Int.mul(m, n);
                }

                return m;
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.GraphPolynomial", {
        fields: {
            _g: null,
            _priorNeighbors: null,
            _normalizer: null,
            _signLookup: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this._g = g;

                this._priorNeighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                for (var w = 0; w < this._g.N; w = (w + 1) | 0) {
                    this._priorNeighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
                    for (var v = 0; v < w; v = (v + 1) | 0) {
                        if (g.getItem(v, w)) {
                            this._priorNeighbors.getItem(w).add(v);
                        }
                    }
                }
            }
        },
        methods: {
            GetCoefficient: function (power) {
                var $t;
                this._normalizer = new Algorithms.Polynomials.Normalizer(power);

                var a = System.Array.init(power.length, 0, System.Int32);
                var top = { v : System.Int64(0) };
                var bottom = { v : System.Int64(1) };
                var partialProduct = { v : ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t) };
                this.SumTerms(0, a, power, partialProduct, top, bottom);

                return System.Int64.clip32(top.v.div(bottom.v));
            },
            GetSignSum: function (power) {
                this._signLookup = new Algorithms.Polynomials.SignLookup(power);

                var a = System.Array.init(power.length, 0, System.Int32);
                var sum = { v : 0 };
                var partialProduct = { v : 1 };
                this.SumSigns(0, a, power, partialProduct, sum);

                return sum.v;
            },
            SumSigns: function (w, a, power, partialProduct, sum) {
                var $t;
                if (w === power.length) {
                    sum.v = (sum.v + partialProduct.v) | 0;
                } else {
                    for (var j = 0; j <= power[System.Array.index(w, power)]; j = (j + 1) | 0) {
                        a[System.Array.index(w, a)] = j;

                        var current = 1;
                        $t = Bridge.getEnumerator(this._priorNeighbors.getItem(w));
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                current = Bridge.Int.mul(current, this._signLookup.Sign.get([a[System.Array.index(v, a)], a[System.Array.index(w, a)]]));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (current === 0) {
                            continue;
                        }

                        partialProduct.v = Bridge.Int.mul(partialProduct.v, current);
                        this.SumSigns(((w + 1) | 0), a, power, partialProduct, sum);
                        partialProduct.v = (Bridge.Int.div(partialProduct.v, current)) | 0;
                    }
                }
            },
            SumTerms: function (w, a, power, partialProduct, top, bottom) {
                var $t;
                if (w === power.length) {
                    var r = Algorithms.Polynomials.FactoredRational.op_Division(partialProduct.v, this._normalizer.Get(a));
                    var top2 = { };
                    var bottom2 = { };
                    r.ToRational(top2, bottom2);

                    top.v = top.v.mul(System.Int64(bottom2.v)).add(bottom.v.mul(System.Int64(top2.v)));
                    bottom.v = bottom.v.mul(System.Int64(bottom2.v));

                    var gcd = this.GCD(top.v, bottom.v);
                    top.v = top.v.div(gcd);
                    bottom.v = bottom.v.div(gcd);
                } else {
                    for (var j = 0; j <= power[System.Array.index(w, power)]; j = (j + 1) | 0) {
                        a[System.Array.index(w, a)] = j;

                        var current = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t);
                        $t = Bridge.getEnumerator(this._priorNeighbors.getItem(w));
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                current = Algorithms.Polynomials.FactoredRational.op_Multiply(current, this._normalizer.FactoredDifference.get([a[System.Array.index(v, a)], a[System.Array.index(w, a)]]));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (current.Sign === 0) {
                            continue;
                        }

                        partialProduct.v = Algorithms.Polynomials.FactoredRational.op_Multiply(partialProduct.v, current);
                        this.SumTerms(((w + 1) | 0), a, power, partialProduct, top, bottom);
                        partialProduct.v = Algorithms.Polynomials.FactoredRational.op_Division(partialProduct.v, current);
                    }
                }
            },
            GCD: function (x, y) {
                var tmp;
                x = x.abs();
                y = y.abs();
                while (x.gt(System.Int64(0))) {
                    tmp = x;
                    x = y.mod(x);
                    y = tmp;
                }
                return y;
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.GraphPolynomialExtensions", {
        statics: {
            methods: {
                GetCoefficient: function (g, power) {
                    var gp = new Algorithms.Polynomials.GraphPolynomial(g);
                    return gp.GetCoefficient(power);
                },
                GetSignSum: function (g, power) {
                    var gp = new Algorithms.Polynomials.GraphPolynomial(g);
                    return gp.GetSignSum(power);
                }
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.Normalizer", {
        fields: {
            FactoredDifference: null,
            InsideProduct: null
        },
        ctors: {
            ctor: function (height) {
                this.$initialize();                var $t;

                var m = System.Linq.Enumerable.from(height).max();

                this.FactoredDifference = System.Array.create(null, null, Algorithms.Polynomials.FactoredRational, ((m + 1) | 0), ((m + 1) | 0));
                for (var i = 0; i <= m; i = (i + 1) | 0) {
                    for (var j = 0; j <= m; j = (j + 1) | 0) {
                        this.FactoredDifference.set([i, j], new Algorithms.Polynomials.FactoredRational.$ctor1(((i - j) | 0)));
                    }
                }

                this.InsideProduct = System.Array.create(null, null, Algorithms.Polynomials.FactoredRational, height.length, ((m + 1) | 0));
                for (var i1 = 0; i1 < height.length; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 <= height[System.Array.index(i1, height)]; j1 = (j1 + 1) | 0) {
                        this.InsideProduct.set([i1, j1], ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t));
                        for (var k = 0; k <= height[System.Array.index(i1, height)]; k = (k + 1) | 0) {
                            if (k === j1) {
                                continue;
                            }

                            this.InsideProduct.set([i1, j1], Algorithms.Polynomials.FactoredRational.op_Multiply(this.InsideProduct.get([i1, j1]), this.FactoredDifference.get([j1, k])));
                        }
                    }
                }
        }
    },
    methods: {
        Get: function (a) {
            var $t;
            var normalizer = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t);
            for (var i = 0; i < a.length; i = (i + 1) | 0) {
                normalizer = Algorithms.Polynomials.FactoredRational.op_Multiply(normalizer, this.InsideProduct.get([i, a[System.Array.index(i, a)]]));
            }

            return normalizer;
        }
    }
    });

    Bridge.define("Algorithms.Polynomials.PrimeNumbers", {
        statics: {
            fields: {
                _primes: null
            },
            ctors: {
                init: function () {
                    this._primes = $asm.$.Algorithms.Polynomials.PrimeNumbers.f1(new (System.Collections.Generic.List$1(System.Int32))());
                }
            },
            methods: {
                Get: function (i) {
                    if (i >= Algorithms.Polynomials.PrimeNumbers._primes.Count) {
                        Algorithms.Polynomials.PrimeNumbers.ComputeMorePrimes(i);
                    }

                    return Algorithms.Polynomials.PrimeNumbers._primes.getItem(i);
                },
                ComputeMorePrimes: function (i) {
                    var m = Math.max(i, Bridge.Int.mul(2, Algorithms.Polynomials.PrimeNumbers._primes.Count));
                    var p = (Algorithms.Polynomials.PrimeNumbers._primes.getItem(((Algorithms.Polynomials.PrimeNumbers._primes.Count - 1) | 0)) + 2) | 0;

                    while (Algorithms.Polynomials.PrimeNumbers._primes.Count <= m) {
                        if (Algorithms.Polynomials.PrimeNumbers.IsPrime(p)) {
                            Algorithms.Polynomials.PrimeNumbers._primes.add(p);
                        }

                        p = (p + 2) | 0;
                    }
                },
                IsPrime: function (p) {
                    for (var k = 0; Bridge.Int.mul(Algorithms.Polynomials.PrimeNumbers._primes.getItem(k), Algorithms.Polynomials.PrimeNumbers._primes.getItem(k)) <= p; k = (k + 1) | 0) {
                        if (p % Algorithms.Polynomials.PrimeNumbers._primes.getItem(k) === 0) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.ns("Algorithms.Polynomials.PrimeNumbers", $asm.$);

    Bridge.apply($asm.$.Algorithms.Polynomials.PrimeNumbers, {
        f1: function (_o20) {
            _o20.add(2);
            _o20.add(3);
            _o20.add(5);
            _o20.add(7);
            _o20.add(11);
            _o20.add(13);
            _o20.add(17);
            _o20.add(19);
            return _o20;
        }
    });

    Bridge.define("Algorithms.Polynomials.SignLookup", {
        fields: {
            Sign: null
        },
        ctors: {
            ctor: function (height) {
                this.$initialize();
                var m = System.Linq.Enumerable.from(height).max();

                this.Sign = System.Array.create(0, null, System.Int32, ((m + 1) | 0), ((m + 1) | 0));
                for (var i = 0; i <= m; i = (i + 1) | 0) {
                    for (var j = 0; j <= m; j = (j + 1) | 0) {
                        this.Sign.set([i, j], System.Decimal(((i - j) | 0)).sign());
                    }
                }
            }
        }
    });

    Bridge.define("Algorithms.SubsetEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        fields: {
            _setSize: 0,
            _subsetSize: 0
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (setSize, subsetSize) {
                this.$initialize();
                this._setSize = setSize;
                this._subsetSize = subsetSize;
            }
        },
        methods: {
            getEnumerator: function () {
                return new Algorithms.SubsetEnumerator.Enumerator(this._setSize, this._subsetSize);
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            }
        }
    });

    Bridge.define("Algorithms.SubsetEnumerator.Enumerator", {
        inherits: [System.Collections.Generic.IEnumerator$1(System.Int64)],
        fields: {
            _isFirst: false,
            _setSize: 0,
            _subsetSize: 0,
            _current: System.Int64(0)
        },
        props: {
            Current: {
                get: function () {
                    return this._current;
                }
            },
            System$Collections$IEnumerator$Current: {
                get: function () {
                    return this.Current;
                }
            }
        },
        alias: [
            "Current", ["System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1"],
            "dispose", "System$IDisposable$dispose",
            "moveNext", "System$Collections$IEnumerator$moveNext",
            "reset", "System$Collections$IEnumerator$reset"
        ],
        ctors: {
            init: function () {
                this._isFirst = true;
            },
            ctor: function (setSize, subsetSize) {
                this.$initialize();
                this._setSize = setSize;
                this._subsetSize = subsetSize;
            }
        },
        methods: {
            dispose: function () { },
            moveNext: function () {
                if (this._isFirst) {
                    if (this._subsetSize > this._setSize) {
                        return false;
                    }

                    this._current = System.Int64(((((1 << this._subsetSize) - 1) | 0)) << (((this._setSize - this._subsetSize) | 0)));

                    this._isFirst = false;
                    return true;
                }

                var lsb = this._current.and(this._current.neg());

                if (lsb.gt(System.Int64(1))) {
                    this._current = this._current.xor(lsb).xor((lsb.shr(1)));

                    return true;
                }

                var high = this._current.and((this._current.add(System.Int64(1))));

                if (high.equals(System.Int64(0))) {
                    return false;
                }

                var low = this._current.xor(high);
                low = (low.shl(2)).add(System.Int64(3));

                while ((low.and(high)).equals(System.Int64(0))) {
                    low = low.shl(1);
                }

                this._current = high.xor(low);

                return true;
            },
            reset: function () {
                this._isFirst = true;
            }
        }
    });

    Bridge.define("Algorithms.TransitivePartition", {
        props: {
            Parts: null
        },
        ctors: {
            ctor: function (set) {
                this.$initialize();
                this.Parts = function (_o21) {
                        var $t;
                        _o21.add(($t = new Algorithms.TransitivePartition.Part(), $t.Set = set, $t.Scores = new (System.Collections.Generic.List$1(System.Int32))(), $t));
                        return _o21;
                    }(new (System.Collections.Generic.List$1(Algorithms.TransitivePartition.Part))());
            }
        },
        methods: {
            Refine: function (score, scoreNumber) {
                var $t, $t1;
                if (this.Parts.getItem(0).Scores.Count >= scoreNumber) {
                    return;
                }

                var refined = new (System.Collections.Generic.List$1(Algorithms.TransitivePartition.Part))(this.Parts.Count);
                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        var map = this.RefinePart(part, score);
                        $t1 = Bridge.getEnumerator(map);
                        try {
                            while ($t1.moveNext()) {
                                var kvp = $t1.Current;
                                var p = new Algorithms.TransitivePartition.Part();
                                p.Set = kvp.value;
                                p.Scores = new (System.Collections.Generic.List$1(System.Int32))(part.Scores);
                                p.Scores.add(kvp.key);

                                refined.add(p);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Parts = refined;
            },
            RefinePart: function (part, score) {
                var $t;
                var map = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();
                $t = Bridge.getEnumerator(part.Set);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        var x = score[System.Array.index(v, score)];
                        var l = { };
                        if (!map.tryGetValue(x, l)) {
                            l.v = new (System.Collections.Generic.List$1(System.Int32))();
                            map.set(x, l.v);
                        }

                        l.v.add(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return map;
            },
            equals: function (obj) {
                var $t;
                var tp = Bridge.as(obj, Algorithms.TransitivePartition);
                if (tp == null) {
                    return false;
                }

                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        var p = tp.FindPartWithScores(part.Scores);
                        if (p == null) {
                            return false;
                        }

                        if (p.Set.Count !== part.Set.Count) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            getHashCode: function () {
                return Bridge.getHashCode(this);
            },
            FindPartWithScores: function (scores) {
                var $t;
                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        if (System.Linq.Enumerable.from(part.Scores).sequenceEqual(scores)) {
                            return part;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            }
        }
    });

    Bridge.define("Algorithms.TransitivePartition.Part", {
        props: {
            Set: null,
            Scores: null
        }
    });

    Bridge.define("Algorithms.UnpermutedAssignmentEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _vertexCount: 0,
            _f: null,
            _potSize: 0,
            _start: 0,
            _step: 0,
            _pairMaskToBadMask: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$List$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._vertexCount = vertexCount;
                this._f = f;
                this._potSize = potSize;
                this._start = start;
                this._step = step;

                this._pairMaskToBadMask = Algorithms.Int64Usage.GeneratePairMasks(this._potSize);
            }
        },
        methods: {
            getEnumerator: function () {
                return System.Linq.Enumerable.from(this.GetEnumerable(this._vertexCount)).where(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f1)).getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            GetEnumerableRecursive: function (vertexCount) {
                if (vertexCount === 1) {
                    return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int64), Algorithms.GenericExtensions.EnList(System.Int64, ((System.Int64(1).shl(this._f(0))).sub(System.Int64(1)))));
                }

                return System.Linq.Enumerable.from(this.GetEnumerableRecursive(((vertexCount - 1) | 0))).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f2));
            },
            GetEnumerable: function (vertexCount) {
                var enumerable = Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int64), Algorithms.GenericExtensions.EnList(System.Int64, ((System.Int64(1).shl(this._f(0))).sub(System.Int64(1)))));

                for (var i = 1; i < vertexCount; i = (i + 1) | 0) {
                    enumerable = System.Linq.Enumerable.from(enumerable).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f2));
                }

                return enumerable;
            },
            GetExtensions: function (list) {
                var restricted = System.Linq.Enumerable.from(this._pairMaskToBadMask).where(Bridge.fn.bind(this, function (kvp) {
                        return this.IsRestricted(kvp.key, list);
                    }));

                var size = this._f(list.Count);

                return System.Linq.Enumerable.from(new Algorithms.SubsetEnumerator(this._potSize, size)).where(function (subset) {
                        return restricted.all(function (kvp) {
                            return (subset.and(kvp.key)).ne(kvp.value);
                        });
                    }).select(function (subset) {
                    return System.Linq.Enumerable.from(list).concat(System.Array.init([subset], System.Int64)).toList(System.Int64);
                });
            },
            IsRestricted: function (p, list) {
                var $t;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        var intersection = x.and(p);
                        if (intersection.ne(System.Int64(0)) && intersection.ne(x)) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            }
        }
    });

    Bridge.ns("Algorithms.UnpermutedAssignmentEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.UnpermutedAssignmentEnumerator, {
        f1: function (list, i) {
            return (((i - this._start) | 0)) % this._step === 0;
        },
        f2: function (list) {
            return this.GetExtensions(list);
        }
    });

    Bridge.define("Algorithms.Utility.EquivalenceRelation$1", function (T) { return {
        fields: {
            _nodeLookup: null
        },
        ctors: {
            init: function () {
                this._nodeLookup = new (System.Collections.Generic.Dictionary$2(T,Algorithms.Utility.EquivalenceRelation$1.Node(T)))();
            }
        },
        methods: {
            AddElement: function (t) {
                this.LookupNode(t);
            },
            Relate: function (x, y) {
                var nx = this.LookupNode(x);
                var ny = this.LookupNode(y);

                var xRoot = this.Find(nx);
                var yRoot = this.Find(ny);

                if (Bridge.referenceEquals(xRoot, yRoot)) {
                    return;
                }

                if (xRoot.Rank < yRoot.Rank) {
                    xRoot.Parent = yRoot;
                } else {
                    if (xRoot.Rank > yRoot.Rank) {
                        yRoot.Parent = xRoot;
                    } else {
                        yRoot.Parent = xRoot;
                        xRoot.Rank = (xRoot.Rank + 1) | 0;
                    }
                }
            },
            AreRelated: function (x, y) {
                var nx = this.LookupNode(x);
                var ny = this.LookupNode(y);

                return Bridge.referenceEquals(this.Find(nx), this.Find(ny));
            },
            GetEquivalenceClass: function (x) {
                var nx = this.LookupNode(x);
                var xRoot = this.Find(nx);

                return System.Linq.Enumerable.from(this._nodeLookup.getValues()).where(Bridge.fn.bind(this, function (node) {
                        return Bridge.referenceEquals(this.Find(node), xRoot);
                    })).select($asm.$.Algorithms.Utility.EquivalenceRelation$1.f1);
            },
            GetEquivalenceClasses: function () {
                return System.Linq.Enumerable.from(this._nodeLookup.getValues()).groupBy(Bridge.fn.bind(this, function (node) {
                        return this.Find(node);
                    })).select(function (group) {
                    return group.select($asm.$.Algorithms.Utility.EquivalenceRelation$1.f1);
                });
            },
            Find: function (n) {
                if (!Bridge.referenceEquals(n.Parent, n)) {
                    n.Parent = this.Find(n.Parent);
                }

                return n.Parent;
            },
            LookupNode: function (t) {
                var node = { };
                if (!this._nodeLookup.tryGetValue(t, node)) {
                    node.v = new (Algorithms.Utility.EquivalenceRelation$1.Node(T))();
                    node.v.Parent = node.v;
                    node.v.Rank = 0;
                    node.v.T = t;

                    this._nodeLookup.set(t, node.v);
                }

                return node.v;
            }
        }
    }; });

    Bridge.ns("Algorithms.Utility.EquivalenceRelation$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.EquivalenceRelation$1, {
        f1: function (node) {
            return node.T;
        }
    });

    Bridge.define("Algorithms.Utility.EquivalenceRelation$1.Node", function (T) { return {
        props: {
            Parent: null,
            Rank: 0,
            T: Bridge.getDefaultValue(T)
        }
    }; });

    Bridge.define("Algorithms.Utility.Factoradic", {
        props: {
            Digits: null,
            Value: System.Int64(0)
        },
        ctors: {
            $ctor1: function (value, n) {
                this.$initialize();
                this.Value = value;

                this.Digits = new (System.Collections.Generic.List$1(System.Int32))(n);
                this.Digits.add(0);

                var i = 1;
                while (value.gt(System.Int64(0))) {
                    this.Digits.add(System.Int64.clip32(value.mod(System.Int64(((i = (i + 1) | 0))))));
                    value = value.div(System.Int64(i));
                }

                for (i = this.Digits.Count; i < n; i = (i + 1) | 0) {
                    this.Digits.add(0);
                }
            },
            ctor: function (p) {
                this.$initialize();
                this.Digits = new (System.Collections.Generic.List$1(System.Int32))(p.N);

                var elements = new (System.Collections.Generic.List$1(System.Int32))(p.N);
                for (var i = 0; i < p.N; i = (i + 1) | 0) {
                    elements.add(i);
                }

                for (var i1 = 0; i1 < p.N; i1 = (i1 + 1) | 0) {
                    this.Digits.add(elements.indexOf(p.getItem(i1)));
                    elements.remove(p.getItem(i1));
                }

                this.Digits.reverse();

                this.Value = System.Int64(0);
                var n = 1;
                for (var i2 = 0; i2 < this.Digits.Count; i2 = (i2 + 1) | 0) {
                    this.Value = this.Value.add(System.Int64((Bridge.Int.mul(this.Digits.getItem(i2), n))));
                    n = Bridge.Int.mul(n, (((i2 + 1) | 0)));
                }

            }
        }
    });

    Bridge.define("Algorithms.Utility.Flows", {
        statics: {
            methods: {
                BipartiteMaximumMatching: function (n, adjacencies) {
                    var $t;
                    var capacity = System.Array.create(0, null, System.Int32, ((n + 2) | 0), ((n + 2) | 0));
                    var source = 0;
                    var target = 1;

                    var lo = 2;
                    var ro = (lo + adjacencies.Count) | 0;

                    for (var i = 0; i < adjacencies.Count; i = (i + 1) | 0) {
                        capacity.set([source, ((lo + i) | 0)], 1);

                        $t = Bridge.getEnumerator(adjacencies.getItem(i));
                        try {
                            while ($t.moveNext()) {
                                var j = $t.Current;
                                capacity.set([((lo + i) | 0), ((ro + j) | 0)], 1);
                                capacity.set([((ro + j) | 0), target], 1);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    return Algorithms.Utility.Flows.MaxFlow(capacity, source, target);
                },
                MaxFlow: function (capacity, source, target) {
                    return new Algorithms.Utility.Flows.FordFulkerson(capacity, source, target).MaxFlow();
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.Flows.FordFulkerson", {
        fields: {
            _n: 0,
            _source: 0,
            _target: 0,
            _capacity: null,
            _flow: null
        },
        ctors: {
            ctor: function (capacity, source, target) {
                this.$initialize();
                this._capacity = capacity;
                this._source = source;
                this._target = target;

                this._n = System.Array.getLength(capacity, 0);
                this._flow = System.Array.create(0, null, System.Int32, this._n, this._n);
            }
        },
        methods: {
            MaxFlow: function () {
                while (true) {
                    var path = $asm.$.Algorithms.Utility.Flows.FordFulkerson.f1(new (System.Collections.Generic.List$1(System.Int32))());
                    var done = !this.FindAugmentingPath(path);
                    if (done) {
                        break;
                    }

                    this.AddFlow(path);
                }

                return System.Linq.Enumerable.range(0, this._n).sum(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.Flows.FordFulkerson.f2));
            },
            FindAugmentingPath: function (path) {
                var $t;
                var last = path.getItem(((path.Count - 1) | 0));

                if (last === this._target) {
                    return true;
                }

                $t = Bridge.getEnumerator(this.OutNeighbors(last), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var j = $t.Current;
                        if (path.contains(j)) {
                            continue;
                        }

                        path.add(j);

                        var isAugmenting = this.FindAugmentingPath(path);
                        if (isAugmenting) {
                            return true;
                        }

                        path.remove(j);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            OutNeighbors: function (i) {
                return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (i) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        j,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        j = 0;
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ( j < this._n ) {
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 2: {
                                        if (((this._capacity.get([i, j]) - this._flow.get([i, j])) | 0) > 0) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 5;
                                            continue;
                                    }
                                    case 3: {
                                        $enumerator.current = j;
                                            $step = 4;
                                            return true;
                                    }
                                    case 4: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        j = (j + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 7: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            AddFlow: function (path) {
                var gain = this.FindGain(path);

                for (var i = 0; i < ((path.Count - 1) | 0); i = (i + 1) | 0) {
                    this._flow.set([path.getItem(i), path.getItem(((i + 1) | 0))], (this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))]) + gain) | 0);
                    this._flow.set([path.getItem(((i + 1) | 0)), path.getItem(i)], (-this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))])) | 0);
                }
            },
            FindGain: function (path) {
                var gain = 2147483647;

                for (var i = 0; i < ((path.Count - 1) | 0); i = (i + 1) | 0) {
                    gain = Math.min(gain, ((this._capacity.get([path.getItem(i), path.getItem(((i + 1) | 0))]) - this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))])) | 0));
                }

                return gain;
            }
        }
    });

    Bridge.ns("Algorithms.Utility.Flows.FordFulkerson", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.Flows.FordFulkerson, {
        f1: function (_o22) {
            _o22.add(0);
            return _o22;
        },
        f2: function (i) {
            return this._flow.get([this._source, i]);
        }
    });

    Bridge.define("Algorithms.Utility.LinqExtensions", {
        statics: {
            methods: {
                CartesianProduct$2: function (T, a, b) {
                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(T, System.Array.init([a, b], System.Collections.Generic.IEnumerable$1(T)))).select(function (s) {
                            return { item1: System.Linq.Enumerable.from(s).elementAt(0), item2: System.Linq.Enumerable.from(s).elementAt(1) };
                        });
                },
                CartesianProduct: function (T, sequences) {
                    var emptyProduct = System.Array.init([System.Linq.Enumerable.empty()], System.Linq.EnumerableInstance$1);

                    return System.Linq.Enumerable.from(sequences).aggregate(emptyProduct, function (accumulator, sequence) {
                            return System.Linq.Enumerable.from(accumulator).selectMany(function (accseq) {
                                    return sequence;
                                }, function (accseq, item) {
                                    return System.Linq.Enumerable.from(accseq).concat(System.Array.init([item], T));
                                });
                        });
                },
                CartesianProduct$1: function (T, sequences) {
                    var emptyProduct = System.Array.init([System.Linq.Enumerable.empty()], System.Linq.EnumerableInstance$1);

                    return System.Linq.Enumerable.from(sequences).aggregate(emptyProduct, function (accumulator, sequence) {
                            return System.Linq.Enumerable.from(accumulator).selectMany(function (accseq) {
                                    return sequence;
                                }, function (accseq, item) {
                                    return System.Linq.Enumerable.from(accseq).concat(System.Array.init([item], T));
                                });
                        });
                },
                Concat: function (T, e, value) {
                    return new (Bridge.GeneratorEnumerable$1(T))(Bridge.fn.bind(this, function (T, e, value) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            v,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            $t = Bridge.getEnumerator(e, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    v = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = v;
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = value;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                Distinct: function (T, source, areEqual) {
                    return new (Bridge.GeneratorEnumerable$1(T))(Bridge.fn.bind(this, function (T, source, areEqual) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            yielded,
                            $t,
                            t,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            yielded = new (System.Collections.Generic.List$1(T))();

                                                $t = Bridge.getEnumerator(source, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    t = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            if (System.Linq.Enumerable.from(yielded).all((function ($me, t) {
                                                        return function (x) {
                                                            return !areEqual(x, t);
                                                        };
                                                    })(this, t))) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            yielded.add(t);
                                                $enumerator.current = t;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.ListUtility", {
        statics: {
            methods: {
                DifferenceSorted: function (T, A, B) {
                    if (B == null) {
                        return System.Linq.Enumerable.from(A).toList(T);
                    }

                    var C = new (System.Collections.Generic.List$1(T))(Math.max(4, ((A.Count - B.Count) | 0)));
                    var j = 0;
                    for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                        while (j < B.Count && Bridge.compare(A.getItem(i), B.getItem(j)) > 0) {
                            j = (j + 1) | 0;
                        }

                        if (j >= B.Count || Bridge.compare(A.getItem(i), B.getItem(j)) < 0) {
                            C.add(A.getItem(i));
                        }
                    }

                    return C;
                },
                DifferenceSorted$1: function (A, B) {
                    if (B == null) {
                        return System.Linq.Enumerable.from(A).toList(System.Int32);
                    }

                    var C = new (System.Collections.Generic.List$1(System.Int32))(Math.max(4, ((A.Count - B.Count) | 0)));
                    var j = 0;
                    for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                        while (j < B.Count && A.getItem(i) > B.getItem(j)) {
                            j = (j + 1) | 0;
                        }

                        if (j >= B.Count || A.getItem(i) < B.getItem(j)) {
                            C.add(A.getItem(i));
                        }
                    }

                    return C;
                },
                IntersectionSorted: function (T, A, B) {
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var C = new (System.Collections.Generic.List$1(T))(Math.min(A.Count, B.Count));
                    var i = 0;
                    var j = 0;

                    while (i < A.Count && j < B.Count) {
                        var compare = Bridge.compare(A.getItem(i), B.getItem(j));

                        if (compare === 0) {
                            C.add(A.getItem(i));
                        }
                        if (compare <= 0) {
                            i = (i + 1) | 0;
                        }
                        if (compare >= 0) {
                            j = (j + 1) | 0;
                        }
                    }

                    return C;
                },
                IntersectionSorted$1: function (A, B) {
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(System.Int32))();
                    }

                    var C = new (System.Collections.Generic.List$1(System.Int32))(Math.min(A.Count, B.Count));
                    var i = 0;
                    var j = 0;

                    var ac = A.Count;
                    var bc = B.Count;
                    while (i < ac && j < bc) {
                        var a = A.getItem(i);
                        var b = B.getItem(j);

                        if (a === b) {
                            C.add(a);
                        }
                        if (a <= b) {
                            i = (i + 1) | 0;
                        }
                        if (a >= b) {
                            j = (j + 1) | 0;
                        }
                    }

                    return C;
                },
                IntersectionCountSorted$1: function (T, A, B) {
                    if (A == null || B == null) {
                        return 0;
                    }

                    var count = 0;
                    var i = 0;
                    var j = 0;

                    while (i < A.Count && j < B.Count) {
                        var compare = Bridge.compare(A.getItem(i), B.getItem(j));

                        if (compare === 0) {
                            count = (count + 1) | 0;
                        }
                        if (compare <= 0) {
                            i = (i + 1) | 0;
                        }
                        if (compare >= 0) {
                            j = (j + 1) | 0;
                        }
                    }

                    return count;
                },
                IntersectionCountSorted: function (A, B) {
                    if (A == null || B == null) {
                        return 0;
                    }

                    var count = 0;
                    var i = 0;
                    var j = 0;

                    var ac = A.Count;
                    var bc = B.Count;
                    while (i < ac && j < bc) {
                        var a = A.getItem(i);
                        var b = B.getItem(j);

                        if (a === b) {
                            count = (count + 1) | 0;
                        }
                        if (a <= b) {
                            i = (i + 1) | 0;
                        }
                        if (a >= b) {
                            j = (j + 1) | 0;
                        }
                    }

                    return count;
                },
                UnionSorted: function (T, A, B) {
                    var list = Algorithms.Utility.ListUtility.DifferenceSorted(T, A, B);
                    list.addRange(Algorithms.Utility.ListUtility.DifferenceSorted(T, B, A));

                    return list;
                },
                UnionSorted$1: function (A, B) {
                    var list = Algorithms.Utility.ListUtility.DifferenceSorted$1(A, B);
                    list.addRange(Algorithms.Utility.ListUtility.DifferenceSorted$1(B, A));

                    return list;
                },
                EqualSorted$1: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                EqualSorted: function (A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                SubsetEqualSorted$1: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                SubsetEqualSorted: function (A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                SubsetSorted$1: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                SubsetSorted: function (A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                MaximalElementsSorted: function (T, A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                MaximalElementsSorted$1: function (A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(System.Int32), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqualSorted(head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqualSorted(set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                MultiSetIntersection: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).MultiSetIntersection(A, B);
                },
                MultiSetIntersectionCount: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).MultiSetIntersectionCount(A, B);
                },
                MultiSetEqual: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                MultiSetSubsetEqual: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                MultiSetSubset: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                BinomialCoefficient: function (n, k) {
                    if (k.lt(System.Int64(0))) {
                        return System.Int64(1);
                    }

                    var max = System.Int64.max(k, n.sub(k));
                    var min = System.Int64.min(k, n.sub(k));

                    var result = System.Int64(1);
                    while (n.gt(max)) {
                        result = result.mul(n);
                        n = n.dec();
                    }

                    while (min.gt(System.Int64(0))) {
                        result = result.div(min);

                        min = min.dec();
                    }

                    return result;
                },
                ToString: function (T, A) {
                    var $t;
                    var sb = new System.Text.StringBuilder();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            sb.appendFormat("{0}, ", t.toString());
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return System.String.trimEnd(sb.toString(), [32, 44]);
                },
                Difference: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Difference(A, B);
                },
                Intersection: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Intersection(A, B);
                },
                IntersectionCount: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).IntersectionCount(A, B);
                },
                Union$1: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Union$1(A, B);
                },
                Union: function (T, A, b) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Union(A, b);
                },
                Equal: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                SubsetEqual: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                Subset: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                MaximalElements: function (T, A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqual(T, head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqual(T, set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                GenerateSublists: function (T, list) {
                    var sublists = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    sublists.add(new (System.Collections.Generic.List$1(T))());

                    var clone = new (System.Collections.Generic.List$1(T))(list);

                    while (clone.Count > 0) {
                        var head = clone.getItem(0);

                        var count = sublists.Count;
                        for (var i = 0; i < count; i = (i + 1) | 0) {
                            var union = new (System.Collections.Generic.List$1(T))(sublists.getItem(i));
                            union.add(head);

                            sublists.add(union);
                        }

                        clone.removeAt(0);
                    }

                    return sublists;
                },
                GenerateSublists$1: function (T, list, size) {
                    var $t;
                    var sublists = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    var n = list.Count;
                    $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, size), System.Collections.Generic.List$1(System.Boolean));
                    try {
                        while ($t.moveNext()) {
                            var inOut = $t.Current;
                            sublists.add(Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return sublists;
                },
                EnumerateSublists: function (T, list) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function (T, list) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            n,
                            $t,
                            inOut,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            n = list.Count;
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex(n), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    inOut = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateSublists$1: function (T, list, size) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function (T, list, size) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            n,
                            $t,
                            inOut,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            n = list.Count;
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, size), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    inOut = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                NextSublist: function (T, list, size, state) {
                    var n = list.Count;
                    var areMore = Algorithms.Utility.ListUtility.NextShortLex$1(n, size, state);

                    var sublist = Algorithms.Utility.ListUtility.ExtractSublist(T, list, state.v);

                    if (!areMore) {
                        state.v = null;
                    }

                    return sublist;
                },
                ExtractSublist: function (T, list, inOut) {
                    var sublist = new (System.Collections.Generic.List$1(T))();
                    for (var i = 0; i < inOut.Count; i = (i + 1) | 0) {
                        if (inOut.getItem(i)) {
                            sublist.add(list.getItem(i));
                        }
                    }

                    return sublist;
                },
                EnumerateShortLex$1: function (n, k) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n, k) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            list,
                            i,
                            i1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            k = Math.max(0, k);

                                                list = new (System.Collections.Generic.List$1(System.Boolean))(n);
                                                for (i = 0; i < k; i = (i + 1) | 0) {
                                                    list.add(true);
                                                }
                                                for (i1 = k; i1 < n; i1 = (i1 + 1) | 0) {
                                                    list.add(false);
                                                }

                                                
                                        }
                                        case 1: {
                                            $enumerator.current = list;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 3: {
                                            if ( Algorithms.Utility.ListUtility.NextSameTrueCount(list, k) ) {

                                                    $step = 1;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateShortLex: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            list,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            list = new (System.Collections.Generic.List$1(System.Boolean))(n);
                                                for (i = 0; i < n; i = (i + 1) | 0) {
                                                    list.add(false);
                                                }

                                                
                                        }
                                        case 1: {
                                            $enumerator.current = list;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 3: {
                                            if ( Algorithms.Utility.ListUtility.Next(list) ) {

                                                    $step = 1;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateShortLexNonempty: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            k,
                            $t,
                            list,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            k = 1;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( k <= n ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, k), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    list = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = list;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            k = (k + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 8: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                NextShortLex$1: function (n, k, state) {
                    if (state.v == null) {
                        k = Math.max(0, k);

                        state.v = new (System.Collections.Generic.List$1(System.Boolean))(n);
                        for (var i = 0; i < k; i = (i + 1) | 0) {
                            state.v.add(true);
                        }
                        for (var i1 = k; i1 < n; i1 = (i1 + 1) | 0) {
                            state.v.add(false);
                        }

                        return k > 0 && k < n;
                    }

                    return Algorithms.Utility.ListUtility.NextSameTrueCount(state.v, k);
                },
                NextShortLex: function (n, k, state) {
                    if (state.v == null) {
                        k = Math.max(0, k);

                        state.v = System.Array.init(n, 0, System.Int32);
                        for (var i = 0; i < k; i = (i + 1) | 0) {
                            state.v[System.Array.index(i, state.v)] = 1;
                        }

                        return k <= 0 || k >= n;
                    }

                    var done = !Algorithms.Utility.ListUtility.NextSameOnCount(state.v, k);

                    if (done) {
                        for (var i1 = 0; i1 < k; i1 = (i1 + 1) | 0) {
                            state.v[System.Array.index(i1, state.v)] = 1;
                        }

                        for (var i2 = k; i2 < n; i2 = (i2 + 1) | 0) {
                            state.v[System.Array.index(i2, state.v)] = 0;
                        }
                    }

                    return done;
                },
                Next: function (list) {
                    var trueCount = System.Linq.Enumerable.from(Bridge.cast(list, System.Collections.Generic.IEnumerable$1(System.Boolean))).count($asm.$.Algorithms.Utility.ListUtility.f2);
                    if (trueCount === list.Count) {
                        return false;
                    }

                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole(list);

                    if (firstHole >= list.Count) {
                        for (var i = 0; i < ((trueCount + 1) | 0); i = (i + 1) | 0) {
                            list.setItem(i, true);
                        }
                        for (var i1 = (trueCount + 1) | 0; i1 < list.Count; i1 = (i1 + 1) | 0) {
                            list.setItem(i1, false);
                        }
                    } else {
                        list.setItem(firstHole, true);

                        var initialTrues = trueCount;
                        for (var i2 = firstHole; i2 < list.Count; i2 = (i2 + 1) | 0) {
                            if (list.getItem(i2)) {
                                initialTrues = (initialTrues - 1) | 0;
                            }
                        }

                        for (var i3 = 0; i3 < initialTrues; i3 = (i3 + 1) | 0) {
                            list.setItem(i3, true);
                        }
                        for (var i4 = initialTrues; i4 < firstHole; i4 = (i4 + 1) | 0) {
                            list.setItem(i4, false);
                        }
                    }

                    return true;
                },
                NextSameTrueCount: function (list, trueCount) {
                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole(list);

                    if (firstHole >= list.Count) {
                        return false;
                    }

                    list.setItem(firstHole, true);

                    var initialTrues = trueCount;
                    for (var i = firstHole; i < list.Count; i = (i + 1) | 0) {
                        if (list.getItem(i)) {
                            initialTrues = (initialTrues - 1) | 0;
                        }
                    }

                    for (var i1 = 0; i1 < initialTrues; i1 = (i1 + 1) | 0) {
                        list.setItem(i1, true);
                    }
                    for (var i2 = initialTrues; i2 < firstHole; i2 = (i2 + 1) | 0) {
                        list.setItem(i2, false);
                    }

                    return true;
                },
                FindFirstHole: function (list) {
                    var i = 0;
                    while (i < ((list.Count - 1) | 0)) {
                        if (list.getItem(i) && !list.getItem(((i + 1) | 0))) {
                            break;
                        }

                        i = (i + 1) | 0;
                    }

                    return ((i + 1) | 0);
                },
                FindFirstHole$1: function (list) {
                    var i = 0;
                    while (i < ((list.length - 1) | 0)) {
                        if (list[System.Array.index(i, list)] === 1 && list[System.Array.index(((i + 1) | 0), list)] === 0) {
                            break;
                        }

                        i = (i + 1) | 0;
                    }

                    return ((i + 1) | 0);
                },
                NextSameOnCount: function (list, trueCount) {
                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole$1(list);

                    if (firstHole >= list.length) {
                        return false;
                    }

                    list[System.Array.index(firstHole, list)] = 1;

                    var initialOnes = trueCount;
                    for (var i = firstHole; i < list.length; i = (i + 1) | 0) {
                        initialOnes = (initialOnes - list[System.Array.index(i, list)]) | 0;
                    }

                    for (var i1 = 0; i1 < initialOnes; i1 = (i1 + 1) | 0) {
                        list[System.Array.index(i1, list)] = 1;
                    }
                    for (var i2 = initialOnes; i2 < firstHole; i2 = (i2 + 1) | 0) {
                        list[System.Array.index(i2, list)] = 0;
                    }

                    return true;
                },
                EnumeratePartitionsUnordered: function (sizes) {
                    return Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)), Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, 0), $asm.$.Algorithms.Utility.ListUtility.f4);
                },
                EnumeratePartitions: function (sizes) {
                    return Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, 0);
                },
                EnumeratePartitions$1: function (sizes, item) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (sizes, item) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            childless,
                            i,
                            $t,
                            partition,
                            partition1,
                            i1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            childless = true;
                                                i = 0;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i < sizes.length ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (sizes[System.Array.index(i, sizes)] <= 0) {
                                                    $step = 7;
                                                    continue;
                                                }

                                                childless = false;

                                                sizes[System.Array.index(i, sizes)] = (sizes[System.Array.index(i, sizes)] - 1) | 0;

                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, ((item + 1) | 0)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            partition.getItem(i).add(item);
                                                $enumerator.current = partition;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            sizes[System.Array.index(i, sizes)] = (sizes[System.Array.index(i, sizes)] + 1) | 0;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            i = (i + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 8: {
                                            if (childless) {
                                                    $step = 9;
                                                    continue;
                                                } 
                                                $step = 11;
                                                continue;
                                        }
                                        case 9: {
                                            partition1 = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                                for (i1 = 0; i1 < sizes.length; i1 = (i1 + 1) | 0) {
                                                    partition1.add(new (System.Collections.Generic.List$1(System.Int32))());
                                                }

                                                $enumerator.current = partition1;
                                                $step = 10;
                                                return true;
                                        }
                                        case 10: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 11: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("Algorithms.Utility.ListUtility", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.ListUtility, {
        f1: function (x) { },
        f2: function (b) {
            return b;
        },
        f3: function (a, b) {
            var $t;
            return Algorithms.Utility.ListUtility.Equal(System.Int32, a, b) ? ($t = new Algorithms.Utility.PartialOrderResult(), $t.AtMost = true, $t.AtLeast = true, $t) : new Algorithms.Utility.PartialOrderResult();
        },
        f4: function (aa, bb) {
            return Algorithms.Utility.PartialOrder.Embeds(System.Collections.Generic.List$1(System.Int32), aa, bb, $asm.$.Algorithms.Utility.ListUtility.f3);
        }
    });

    Bridge.define("Algorithms.Utility.ListUtility.ListUtilityGeneric$1", function (T) { return {
        statics: {
            fields: {
                _set: null,
                _multiSet: null
            },
            ctors: {
                init: function () {
                    this._set = new (System.Collections.Generic.HashSet$1(T)).ctor();
                    this._multiSet = new (System.Collections.Generic.Dictionary$2(T,System.Int32))();
                }
            },
            methods: {
                Intersection: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var intersection = new (System.Collections.Generic.List$1(T))(inB.Count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (inB.contains(t1)) {
                                intersection.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return intersection;
                },
                IntersectionCount: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return 0;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var count = 0;
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (inB.contains(t1)) {
                                count = (count + 1) | 0;
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return count;
                },
                Difference: function (A, B) {
                    var $t, $t1;
                    if (A == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }
                    if (B == null) {
                        B = new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var difference = new (System.Collections.Generic.List$1(T))(inB.Count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (!inB.contains(t1)) {
                                difference.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return difference;
                },
                Union$1: function (A, B) {
                    var $t, $t1;
                    if (A == null && B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }
                    if (A == null) {
                        return B;
                    }
                    if (B == null) {
                        return A;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var union = new (System.Collections.Generic.List$1(T))(B);
                    $t1 = Bridge.getEnumerator(A);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (!inB.contains(t1)) {
                                union.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return union;
                },
                Union: function (A, b) {
                    var union = new (System.Collections.Generic.List$1(T))(A);
                    if (!union.contains(b)) {
                        union.add(b);
                    }

                    return union;
                },
                MultiSetIntersection: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._multiSet;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var count = { };
                            inB.tryGetValue(t, count);

                            inB.set(t, (count.v + 1) | 0);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var intersection = new (System.Collections.Generic.List$1(T))(inB.count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            var count1 = { };
                            inB.tryGetValue(t1, count1);

                            if (count1.v > 0) {
                                intersection.add(t1);
                                inB.set(t1, (count1.v - 1) | 0);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return intersection;
                },
                MultiSetIntersectionCount: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return 0;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._multiSet;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var count = { };
                            inB.tryGetValue(t, count);

                            inB.set(t, (count.v + 1) | 0);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var total = 0;
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            var count1 = { };
                            inB.tryGetValue(t1, count1);

                            if (count1.v > 0) {
                                total = (total + 1) | 0;
                                inB.set(t1, (count1.v - 1) | 0);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return total;
                }
            }
        }
    }; });

    Bridge.define("Algorithms.Utility.PartialOrder", {
        statics: {
            methods: {
                Embeds: function (T, A, B, order) {
                    var $t;
                    if (A.Count > B.Count) {
                        return false;
                    }

                    var n = (A.Count + B.Count) | 0;
                    var adjacencies = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(A.Count);

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var a = $t.Current;
                            var neighbors = new (System.Collections.Generic.List$1(System.Int32))();
                            for (var i = 0; i < B.Count; i = (i + 1) | 0) {
                                var result = order(a, B.getItem(i));
                                if (result.AtMost) {
                                    neighbors.add(i);
                                }
                            }

                            adjacencies.add(neighbors);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return Algorithms.Utility.Flows.BipartiteMaximumMatching(n, adjacencies) === A.Count;
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.PartialOrderResult", {
        $kind: "struct",
        statics: {
            methods: {
                getDefaultValue: function () { return new Algorithms.Utility.PartialOrderResult(); }
            }
        },
        fields: {
            AtMost: false,
            AtLeast: false
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([7175930089, this.AtMost, this.AtLeast]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, Algorithms.Utility.PartialOrderResult)) {
                    return false;
                }
                return Bridge.equals(this.AtMost, o.AtMost) && Bridge.equals(this.AtLeast, o.AtLeast);
            },
            $clone: function (to) {
                var s = to || new Algorithms.Utility.PartialOrderResult();
                s.AtMost = this.AtMost;
                s.AtLeast = this.AtLeast;
                return s;
            }
        }
    });

    Bridge.define("Algorithms.Utility.Permutation", {
        statics: {
            methods: {
                EnumerateAll: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(Algorithms.Utility.Permutation))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            count,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Utility.Permutation))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            count = Algorithms.Counting.Factorial(n);

                                                i = System.Int64(0);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i.lt(count) ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = new Algorithms.Utility.Permutation.ctor(new Algorithms.Utility.Factoradic.$ctor1(i, n));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            i = i.inc();
                                            $step = 1;
                                            continue;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                op_Multiply: function (p1, p2) {
                    if (Algorithms.Utility.Permutation.op_Equality(p1, null) || Algorithms.Utility.Permutation.op_Equality(p2, null)) {
                        return null;
                    }

                    if (p1.N !== p2.N) {
                        throw new System.Exception("You tried to multiply permutations of different sets.");
                    }

                    var sequence = new (System.Collections.Generic.List$1(System.Int32))(p2.N);

                    for (var i = 0; i < p2.N; i = (i + 1) | 0) {
                        sequence.add(p1.getItem(p2.getItem(i)));
                    }

                    return new Algorithms.Utility.Permutation.$ctor1(sequence);
                },
                op_Equality: function (p1, p2) {
                    if (p1 == null && p2 == null) {
                        return true;
                    }
                    if (p1 == null || p2 == null) {
                        return false;
                    }

                    return p1.equals(p2);
                },
                op_Inequality: function (p1, p2) {
                    return !(Algorithms.Utility.Permutation.op_Equality(p1, p2));
                }
            }
        },
        props: {
            Sequence: null,
            N: 0
        },
        ctors: {
            ctor: function (f) {
                this.$initialize();
                var sequence = new (System.Collections.Generic.List$1(System.Int32))(f.Digits.Count);
                for (var i = 0; i < f.Digits.Count; i = (i + 1) | 0) {
                    sequence.add(i);
                }

                for (var i1 = 0; i1 < f.Digits.Count; i1 = (i1 + 1) | 0) {
                    var j = (f.Digits.getItem(((((f.Digits.Count - 1) | 0) - i1) | 0)) + i1) | 0;

                    sequence.insert(i1, sequence.getItem(j));
                    sequence.removeAt(((j + 1) | 0));
                }

                this.Sequence = sequence;
                this.N = this.Sequence.Count;
            },
            $ctor1: function (sequence) {
                this.$initialize();                var $t;

                this.Sequence = new (System.Collections.Generic.List$1(System.Int32))(sequence);
                this.N = this.Sequence.Count;

                var hash = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Boolean))();
                $t = Bridge.getEnumerator(sequence);
                try {
                    while ($t.moveNext()) {
                        var i = $t.Current;
                        if (hash.containsKey(i)) {
                            throw new System.Exception("The supplied sequence has duplicates.");
                        }

                        if (i < 0 || i > ((this.N - 1) | 0)) {
                            throw new System.Exception("The supplied sequence has elements that are out of range.");
                        }

                        hash.set(i, true);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        getItem: function (i) {
            return this.Sequence.getItem(i);
        },
        Apply: function (T, list) {
            if (list == null || list.Count !== this.N) {
                throw new System.Exception("The permutation cannot be applied to the given list.");
            }

            var permutedList = new (System.Collections.Generic.List$1(T))(this.N);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                permutedList.add(list.getItem(this.getItem(i)));
            }

            return permutedList;
        },
        Inverse: function () {
            var sequence = System.Array.init(this.N, 0, System.Int32);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                sequence[System.Array.index(this.getItem(i), sequence)] = i;
            }

            return new Algorithms.Utility.Permutation.$ctor1(new (System.Collections.Generic.List$1(System.Int32))(sequence));
        },
        equals: function (obj) {
            if (obj == null) {
                return false;
            }

            return Bridge.referenceEquals(this.toString(), obj.toString());
        },
        toString: function () {
            return System.String.concat("(", Bridge.toArray(System.Linq.Enumerable.from(this.Sequence).select($asm.$.Algorithms.Utility.Permutation.f1)).join(" "), ")");
        },
        getHashCode: function () {
            return Bridge.getHashCode(this.toString());
        }
    }
    });

    Bridge.ns("Algorithms.Utility.Permutation", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.Permutation, {
        f1: function (i) {
            return ((i + 1) | 0);
        }
    });

    Bridge.define("Algorithms.Utility.SafeCollection$1", function (T) { return {
        inherits: [System.Collections.Generic.ICollection$1(T)],
        fields: {
            _count: 0,
            _first: null,
            _last: null
        },
        props: {
            Count: {
                get: function () {
                    return this._count;
                }
            },
            IsReadOnly: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "add", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$add",
            "clear", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$clear",
            "contains", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$contains",
            "copyTo", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$copyTo",
            "Count", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$Count",
            "IsReadOnly", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$IsReadOnly",
            "remove", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$remove",
            "getEnumerator", ["System$Collections$Generic$IEnumerable$1$" + Bridge.getTypeAlias(T) + "$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]
        ],
        ctors: {
            ctor: function () {
                this.$initialize();
                this._first = new (Algorithms.Utility.SafeCollection$1.Node(T))();
                this._last = this._first;
            }
        },
        methods: {
            add: function (item) {
                var $t;
                this._last.Next = ($t = new (Algorithms.Utility.SafeCollection$1.Node(T))(), $t.Item = item, $t);
                this._last = this._last.Next;
                this._count = (this._count + 1) | 0;
            },
            clear: function () {
                this._first.Next = null;
                this._last = this._first;
                this._count = 0;
            },
            contains: function (item) {
                return this.FindPreviousNode(item) != null;
            },
            copyTo: function (array, arrayIndex) {
                var node = this._first;
                while (true) {
                    var next = node.Next;
                    if (next == null) {
                        break;
                    }

                    array[System.Array.index(Bridge.identity(arrayIndex, (arrayIndex = (arrayIndex + 1) | 0)), array)] = next.Item;
                    node = next;
                }
            },
            remove: function (item) {
                var node = this.FindPreviousNode(item);
                if (node == null) {
                    return false;
                }

                var next = node.Next;
                if (next == null) {
                    return false;
                }

                node.Next = next.Next;
                this._count = (this._count - 1) | 0;
                return true;
            },
            getEnumerator: function () {
                var $step = 0,
                    $jumpFromFinally,
                    $returnValue,
                    node,
                    next,
                    $async_e;

                var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                    try {
                        for (;;) {
                            switch ($step) {
                                case 0: {
                                    node = this._first;
                                        
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ( true ) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                }
                                case 2: {
                                    next = node.Next;
                                        if (next == null) {
                                            $step = 4;
                                            continue;
                                        }

                                        $enumerator.current = next.Item;
                                        $step = 3;
                                        return true;
                                }
                                case 3: {
                                    node = next;

                                        $step = 1;
                                        continue;
                                }
                                case 4: {

                                }
                                default: {
                                    return false;
                                }
                            }
                        }
                    } catch($async_e1) {
                        $async_e = System.Exception.create($async_e1);
                        throw $async_e;
                    }
                }));
                return $enumerator;
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            FindPreviousNode: function (item) {
                var node = this._first;
                while (true) {
                    var next = node.Next;
                    if (next == null) {
                        break;
                    }

                    if (System.Collections.Generic.EqualityComparer$1(T).def.equals2(next.Item, item)) {
                        return node;
                    }

                    node = next;
                }

                return null;
            }
        }
    }; });

    Bridge.define("Algorithms.Utility.SafeCollection$1.Node", function (T) { return {
        fields: {
            Item: Bridge.getDefaultValue(T),
            Next: null
        }
    }; });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1", function (T) { return {
        fields: {
            _length: 0,
            _alphabet: null,
            _matchers: null,
            _generalizers: null,
            _vectorComparer: null
        },
        ctors: {
            init: function () {
                this._matchers = new (System.Collections.Generic.List$1(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T)))();
                this._vectorComparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(T))();
            },
            ctor: function (length, alphabet) {
                this.$initialize();                var $t;

                this._length = length;
                this._alphabet = alphabet;

                $t = Bridge.getEnumerator(alphabet);
                try {
                    while ($t.moveNext()) {
                        var t = $t.Current;
                        this.AddMatcher(t.toString(), (function ($me, t) {
                            return function (tt) {
                                return Bridge.equals(t, tt);
                            };
                        })(this, t));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.AddMatcher("*", $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f1);
        }
    },
    methods: {
        AddMatcher: function (name, match) {
            var $t;
            this._matchers.add(($t = new (Algorithms.Utility.SequenceGeneralizer$1.Matcher(T))(), $t.Name = name, $t.Match = match, $t));
        },
        Generalize: function (examples, nonExamples, mostGeneral) {
            var $t, $t1;
            if (mostGeneral === void 0) { mostGeneral = false; }
            this.BuildMatcherLattice();

            var possibles = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            $t = Bridge.getEnumerator(examples);
            try {
                while ($t.moveNext()) {
                    var example = $t.Current;
                    var asMatcherIndices = System.Linq.Enumerable.from(example).select(Bridge.fn.bind(this, function (t) {
                            return Algorithms.GenericExtensions.FirstIndex(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T), this._matchers, function (m) {
                                return Bridge.referenceEquals(m.Name, t.toString());
                            });
                        })).toList(System.Int32);
                    possibles.addRange(System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.from(asMatcherIndices).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f2)))).select($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f3));
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            possibles = System.Linq.Enumerable.from(possibles).distinct(this._vectorComparer).toList(System.Collections.Generic.List$1(System.Int32));

            $t1 = Bridge.getEnumerator(nonExamples);
            try {
                while ($t1.moveNext()) {
                    var nonExample = $t1.Current;
                    var asMatcherIndices1 = System.Linq.Enumerable.from(nonExample).select(Bridge.fn.bind(this, function (t) {
                            return Algorithms.GenericExtensions.FirstIndex(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T), this._matchers, function (m) {
                                return Bridge.referenceEquals(m.Name, t.toString());
                            });
                        })).toList(System.Int32);
                    possibles = System.Linq.Enumerable.from(possibles).except(System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.from(asMatcherIndices1).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f2)))).select($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f3), this._vectorComparer).toList(System.Collections.Generic.List$1(System.Int32));
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }
            var generalizations = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            var remaining = System.Linq.Enumerable.from(examples).toList(System.Collections.Generic.List$1(T));
            while (remaining.Count > 0) {
                var ordered = { v : System.Linq.Enumerable.from(possibles).select(Bridge.fn.bind(this, function (pp) {
                        return new $asm.$AnonymousType$3(pp, System.Linq.Enumerable.from(remaining).count(Bridge.fn.bind(this, function (r) {
                                return this.IsMatch(r, pp);
                            })));
                    })).orderByDescending($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f4).toList(System.Object) };
                var maxers = System.Linq.Enumerable.from(ordered.v).takeWhile((function ($me, ordered) {
                        return function (xx) {
                            return xx.Count === ordered.v.getItem(0).Count;
                        };
                    })(this, ordered)).orderByDescending(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f6));

                var best = { v : mostGeneral ? maxers.first().Vector : maxers.last().Vector };

                generalizations.add(best.v);
                Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), remaining, (function ($me, best) {
                    return Bridge.fn.bind($me, function (r) {
                        return this.IsMatch(r, best.v);
                    });
                })(this, best), $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f7);
            }

            return System.Linq.Enumerable.from(generalizations).select(Bridge.fn.bind(this, function (l) {
                    return System.Linq.Enumerable.from(l).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f8)).toList(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T));
                })).toList(System.Collections.Generic.List$1(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T)));
        },
        BuildMatcherLattice: function () {
            this._generalizers = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this._matchers.Count; i = (i + 1) | 0) {
                this._generalizers.set(i, new (System.Collections.Generic.List$1(System.Int32))());
                var matches = System.Linq.Enumerable.from(this._alphabet).where(Bridge.fn.bind(this, function (a) {
                        return this._matchers.getItem(i).Match(a);
                    })).toList(T);

                for (var j = { v : 0 }; j.v < this._matchers.Count; j.v = (j.v + 1) | 0) {
                    if (Algorithms.Utility.ListUtility.SubsetEqual(T, matches, System.Linq.Enumerable.from(this._alphabet).where((function ($me, j) {
                            return Bridge.fn.bind($me, function (a) {
                                return this._matchers.getItem(j.v).Match(a);
                            });
                        })(this, j)).toList(T))) {
                        this._generalizers.get(i).add(j.v);
                    }
                }
            }
        },
        IsMatch: function (vector, m) {
            for (var i = 0; i < vector.Count; i = (i + 1) | 0) {
                if (!this._matchers.getItem(m.getItem(i)).Match(vector.getItem(i))) {
                    return false;
                }
            }

            return true;
        }
    }
    }; });

    Bridge.define("$AnonymousType$3", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (vector, count) {
                this.Vector = vector;
                this.Count = count;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$3)) {
                    return false;
                }
                return Bridge.equals(this.Vector, o.Vector) && Bridge.equals(this.Count, o.Count);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196188, this.Vector, this.Count]);
                return h;
            },
            toJSON: function () {
                return {
                    Vector : this.Vector,
                    Count : this.Count
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"Count","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_Count","t":8,"rt":System.Int32,"fg":"Count"},"fn":"Count"},{"a":2,"n":"Vector","t":16,"rt":System.Collections.Generic.List$1(System.Int32),"g":{"a":2,"n":"get_Vector","t":8,"rt":System.Collections.Generic.List$1(System.Int32),"fg":"Vector"},"fn":"Vector"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.Utility.SequenceGeneralizer$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.SequenceGeneralizer$1, {
        f1: function (tt) {
            return true;
        },
        f2: function (i) {
            return this._generalizers.get(i);
        },
        f3: function (v) {
            return System.Linq.Enumerable.from(v).toList(System.Int32);
        },
        f4: function (xx) {
            return xx.Count;
        },
        f5: function (total, x) {
            if (Bridge.referenceEquals(this._matchers.getItem(x).Name, "*")) {
                return Bridge.Int.mul(total, this._alphabet.Count);
            }
            if (System.String.startsWith(this._matchers.getItem(x).Name, "!")) {
                return Bridge.Int.mul(total, (((this._alphabet.Count - 1) | 0)));
            }

            return total;
        },
        f6: function (xx) {
            return System.Linq.Enumerable.from(xx.Vector).aggregate(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f5));
        },
        f7: function (x) { },
        f8: function (i) {
            return this._matchers.getItem(i);
        }
    });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1.Matcher", function (T) { return {
        fields: {
            Name: null,
            Match: null
        }
    }; });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1.VectorComparer", function (T) { return {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(System.Int32))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (l) {
                var $t;
                var hash = 17;
                $t = Bridge.getEnumerator(l);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 23) | 0) + x) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    }; });

    Bridge.define("Algorithms.WordGame.AccessibilityChecker", {
        fields: {
            _alphabet: null
        },
        ctors: {
            ctor: function (alphabet) {
                this.$initialize();
                this._alphabet = System.Linq.Enumerable.from(alphabet).toList(System.Char);
            }
        },
        methods: {
            IsAccessible: function (w, S) {
                var $t, $t1, $t2;
                $t = Bridge.getEnumerator(this._alphabet);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        var goodChoiceAlwaysExists = true;

                        var swappers = System.Linq.Enumerable.from(this._alphabet).except(System.Array.init([c], System.Char)).toList(System.Char);
                        $t1 = Bridge.getEnumerator(this.EnumeratePartitions(w, swappers), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                        try {
                            while ($t1.moveNext()) {
                                var partition = $t1.Current;
                                var goodChoiceExists = false;
                                $t2 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, System.Linq.Enumerable.range(0, partition.Count).toList(System.Int32)));
                                try {
                                    while ($t2.moveNext()) {
                                        var choice = $t2.Current;
                                        if (choice.Count <= 0) {
                                            continue;
                                        }

                                        var ww = this.MakeMove(w, partition, choice, swappers);
                                        if (S.contains(ww)) {
                                            goodChoiceExists = true;
                                            break;
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!goodChoiceExists) {
                                    goodChoiceAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (goodChoiceAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            EnumeratePartitions: function (w, swappers) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (w, swappers) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        chars,
                        indices,
                        indexPartitions,
                        $t,
                        indexPartition,
                        partition,
                        $t1,
                        indexPart,
                        part,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        chars = System.String.toCharArray(w, 0, w.length);
                                            indices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Char, chars, function (c) {
                                                    return swappers.contains(c);
                                                })).toList(System.Int32);

                                            indexPartitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(indices.Count);
                                            $t = Bridge.getEnumerator(indexPartitions);
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                indexPartition = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        partition = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(indexPartition.Count);
                                            $t1 = Bridge.getEnumerator(indexPartition);
                                            try {
                                                while ($t1.moveNext()) {
                                                    indexPart = $t1.Current;
                                                    part = System.Linq.Enumerable.from(indexPart).select(function (i) {
                                                            return indices.getItem(i);
                                                        }).toList(System.Int32);
                                                    partition.add(part);
                                                }
                                            } finally {
                                                if (Bridge.is($t1, System.IDisposable)) {
                                                    $t1.System$IDisposable$dispose();
                                                }
                                            }
                                            $enumerator.current = partition;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            MakeMove: function (w, partition, choice, swappers) {
                var $t;
                var chars = System.String.toCharArray(w, 0, w.length);
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(choice).selectMany(function (i) {
                        return partition.getItem(i);
                    }));
                try {
                    while ($t.moveNext()) {
                        var j = $t.Current;
                        chars[System.Array.index(j, chars)] = swappers.getItem(((1 - swappers.indexOf(chars[System.Array.index(j, chars)])) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return String.fromCharCode.apply(null, chars);
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Boxification", {
        statics: {
            methods: {
                Split: function (T, allPoints) {
                    var chunks = new (System.Collections.Generic.List$1(System.Object))();

                    var points = System.Linq.Enumerable.from(allPoints).toList(System.Collections.Generic.List$1(T));
                    var n = allPoints.getItem(0).Count;

                    while (points.Count > 0) {
                        var bestT = 1;
                        var bestSplit = { v : 1 };

                        for (var split = { v : 1 }; split.v < ((n - 1) | 0); split.v = (split.v + 1) | 0) {
                            var left = { v : System.Linq.Enumerable.from(points).select((function ($me, split) {
                                    return function (p) {
                                        return System.Linq.Enumerable.from(p).take(split.v).toList(T);
                                    };
                                })(this, split)).toList(System.Collections.Generic.List$1(T)) };
                            var right = { v : System.Linq.Enumerable.from(points).select((function ($me, split) {
                                    return function (p) {
                                        return System.Linq.Enumerable.from(p).skip(split.v).toList(T);
                                    };
                                })(this, split)).toList(System.Collections.Generic.List$1(T)) };

                            var t = (Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), (function ($me, left, right) {
                                return function (i) {
                                    var lefts = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(left.v).take(i), function (l1, l2) {
                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                        })).toList(System.Collections.Generic.List$1(T));
                                    var rights = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(right.v).take(i), function (l1, l2) {
                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                        })).toList(System.Collections.Generic.List$1(T));

                                    var span = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(T), lefts, rights)).select(function (tup) {
                                            return System.Linq.Enumerable.from(tup.item1).concat(tup.item2).toList(T);
                                        }).toList(System.Collections.Generic.List$1(T));
                                    var allExist = System.Linq.Enumerable.from(span).all(function (p) {
                                            return System.Linq.Enumerable.from(points).any(function (pp) {
                                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                                });
                                        });

                                    return allExist ? 1 : -1;
                                };
                            })(this, left, right)) - 1) | 0;

                            if (t >= bestT) {
                                if (t > bestT || Math.abs(((((Bridge.Int.div(n, 2)) | 0) - split.v) | 0)) < Math.abs(((((Bridge.Int.div(n, 2)) | 0) - bestSplit.v) | 0))) {
                                    bestT = t;
                                    bestSplit.v = split.v;
                                }
                            }
                        }

                        var l = System.Linq.Enumerable.from(points).select((function ($me, bestSplit) {
                                return function (p) {
                                    return System.Linq.Enumerable.from(p).take(bestSplit.v).toList(T);
                                };
                            })(this, bestSplit)).toList(System.Collections.Generic.List$1(T));
                        var r = System.Linq.Enumerable.from(points).select((function ($me, bestSplit) {
                                return function (p) {
                                    return System.Linq.Enumerable.from(p).skip(bestSplit.v).toList(T);
                                };
                            })(this, bestSplit)).toList(System.Collections.Generic.List$1(T));
                        var ls = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(l).take(bestT), function (l1, l2) {
                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                            })).toList(System.Collections.Generic.List$1(T));
                        var rs = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(r).take(bestT), function (l1, l2) {
                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                            })).toList(System.Collections.Generic.List$1(T));
                        var s = { v : System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(T), ls, rs)).select(function (tup) {
                                return System.Linq.Enumerable.from(tup.item1).concat(tup.item2).toList(T);
                            }).toList(System.Collections.Generic.List$1(T)) };

                        chunks.add({ item1: ls, item2: rs });
                        Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), points, (function ($me, s) {
                            return function (p) {
                                return System.Linq.Enumerable.from(s.v).any(function (pp) {
                                        return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                    });
                            };
                        })(this, s), $asm.$.Algorithms.WordGame.Boxification.f1);
                    }

                    return chunks;
                },
                SplitMultiway: function (T, allPoints) {
                    var $t;
                    var chunks = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))))();

                    var points = System.Linq.Enumerable.from(allPoints).toList(System.Collections.Generic.List$1(T));
                    var n = allPoints.getItem(0).Count;

                    while (points.Count > 0) {
                        var bestT = 1;
                        var bestSplit = { v : new (System.Collections.Generic.List$1(System.Int32))() };

                        $t = Bridge.getEnumerator(System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, System.Linq.Enumerable.range(0, n).toList(System.Int32))).select($asm.$.Algorithms.WordGame.Boxification.f3));
                        try {
                            while ($t.moveNext()) {
                                var split = $t.Current;
                                if (Algorithms.WordGame.Boxification.ExtractRanges(T, split, points.getItem(0)).Count <= 1) {
                                    continue;
                                }

                                var t = (Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), function (i) {
                                    var ranges = System.Linq.Enumerable.from(points).take(i).select(function (p) {
                                        return Algorithms.WordGame.Boxification.ExtractRanges(T, split, p);
                                    }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                    var rangeValues = System.Linq.Enumerable.from(ranges).aggregate(System.Linq.Enumerable.range(0, ranges.getItem(0).Count).select(function (__) {
                                            return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))), function (union, next) {
                                            return System.Linq.Enumerable.from(union).zip(next, function (A, B) {
                                                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), Algorithms.Utility.LinqExtensions.Concat(System.Collections.Generic.List$1(T), A, B), function (l1, l2) {
                                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                                        })).toList(System.Collections.Generic.List$1(T));
                                                }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                        });

                                    var cp = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Collections.Generic.List$1(T), rangeValues)).select(function (ll) {
                                            return System.Linq.Enumerable.from(ll).toList(System.Collections.Generic.List$1(T));
                                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                    var span = System.Linq.Enumerable.from(cp).select(function (ll) {
                                            return System.Linq.Enumerable.from(ll).selectMany($asm.$.Algorithms.WordGame.Boxification.f4).toList(T);
                                        }).toList(System.Collections.Generic.List$1(T));
                                    var allExist = System.Linq.Enumerable.from(span).all(function (p) {
                                            return System.Linq.Enumerable.from(points).any(function (pp) {
                                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                                });
                                        });

                                    return allExist ? 1 : -1;
                                }) - 1) | 0;

                                if (t > bestT) {
                                    bestT = t;
                                    bestSplit.v = split;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        var rr = System.Linq.Enumerable.from(points).take(bestT).select((function ($me, bestSplit) {
                            return function (p) {
                                return Algorithms.WordGame.Boxification.ExtractRanges(T, bestSplit.v, p);
                            };
                        })(this, bestSplit)).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                        var rrv = System.Linq.Enumerable.from(rr).aggregate(System.Linq.Enumerable.range(0, rr.getItem(0).Count).select(function (__) {
                                return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                            }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))), function (union, next) {
                                return System.Linq.Enumerable.from(union).zip(next, function (A, B) {
                                        return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), Algorithms.Utility.LinqExtensions.Concat(System.Collections.Generic.List$1(T), A, B), function (l1, l2) {
                                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                            })).toList(System.Collections.Generic.List$1(T));
                                    }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                            });

                        var s = { v : System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Collections.Generic.List$1(T), rrv)).select(function (ll) {
                                return System.Linq.Enumerable.from(ll).selectMany($asm.$.Algorithms.WordGame.Boxification.f4).toList(T);
                            }).toList(System.Collections.Generic.List$1(T)) };

                        chunks.add(rrv);
                        Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), points, (function ($me, s) {
                            return function (p) {
                                return System.Linq.Enumerable.from(s.v).any(function (pp) {
                                        return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                    });
                            };
                        })(this, s), $asm.$.Algorithms.WordGame.Boxification.f1);
                    }

                    return chunks;
                },
                ExtractRanges: function (T, stops, l) {
                    var $t;
                    var ranges = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    var left = 0;
                    $t = Bridge.getEnumerator(stops);
                    try {
                        while ($t.moveNext()) {
                            var stop = $t.Current;
                            ranges.add(l.getRange(left, ((((stop - left) | 0) + 1) | 0)));
                            left = (stop + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (left < l.Count) {
                        ranges.add(l.getRange(left, ((l.Count - left) | 0)));
                    }

                    return ranges;
                },
                Boxify: function (T, points) {
                    var boxes = System.Linq.Enumerable.from(points).select(function (p) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(T), p);
                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                    while (true) {
                        var boxContainers = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)), boxes, boxes)).where(function (pair) {
                                return !System.Linq.Enumerable.from(pair.item1).sequenceEqual(pair.item2);
                            }).select(function (pair) {
                            return new $asm.$AnonymousType$4(pair, Algorithms.WordGame.Boxification.BoxContainer(T, System.Linq.Enumerable.from(pair.item1).concat(pair.item2).toList(System.Collections.Generic.List$1(T))));
                        });

                        var grown = boxContainers.firstOrDefault(function (bc) {
                                return Algorithms.WordGame.Boxification.ContainsBoxContainer(T, points, bc.BoxedUnion);
                            }, null);
                        if (grown == null) {
                            break;
                        }

                        var count = boxes.Count;
                        boxes.remove(grown.Pair.item1);
                        boxes.remove(grown.Pair.item2);
                        boxes.add(grown.BoxedUnion);

                        if (boxes.Count === count) {
                            break;
                        }
                    }

                    return boxes;
                },
                PrefixBoxify: function (T, points) {
                    var allPoints = System.Linq.Enumerable.from(points).toList(System.Collections.Generic.List$1(T));
                    var boxes = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))))();

                    while (true) {
                        var t = Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), function (i) {
                            return Algorithms.WordGame.Boxification.ContainsBox(T, allPoints, System.Linq.Enumerable.from(points).take(i).toList(System.Collections.Generic.List$1(T))) ? 1 : -1;
                        });

                        boxes.add(Algorithms.WordGame.Boxification.BoxContainer(T, System.Linq.Enumerable.from(points).take(t).toList(System.Collections.Generic.List$1(T))));
                        points = System.Linq.Enumerable.from(points).skip(t).toList(System.Collections.Generic.List$1(T));
                        if (points.Count <= 0) {
                            break;
                        }
                    }

                    return boxes;
                },
                ContainsBox: function (T, allPoints, points) {
                    var box = Algorithms.WordGame.Boxification.BoxContainer(T, points);
                    return Algorithms.WordGame.Boxification.ContainsBoxContainer(T, allPoints, box);
                },
                ContainsBoxContainer: function (T, allPoints, boxContainer) {
                    return System.Linq.Enumerable.from(boxContainer).all(function (p) {
                            return System.Linq.Enumerable.from(allPoints).any(function (pp) {
                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                });
                        });
                },
                BoxContainer: function (T, points) {
                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(T, System.Linq.Enumerable.range(0, points.getItem(0).Count).select(function (i) {
                            return System.Linq.Enumerable.from(points).select(function (p) {
                                    return p.getItem(i);
                                }).distinct().toList(T);
                        }))).select(function (e) {
                            return System.Linq.Enumerable.from(e).toList(T);
                        }).toList(System.Collections.Generic.List$1(T));
                },
                IsBox: function (T, points) {
                    return points.Count === Algorithms.WordGame.Boxification.BoxContainer(T, points).Count;
                },
                ToBoxString: function (T, points) {
                    return Bridge.toArray(System.Linq.Enumerable.range(0, points.getItem(0).Count).select(function (i) {
                            return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(points).select(function (p) {
                                        return p.getItem(i);
                                    }).distinct()).join(","), "}");
                        })).join(" * ");
                },
                ToMultiChunkString: function (T, multiChunk) {
                    return Bridge.toArray(System.Linq.Enumerable.from(multiChunk).select(function (chunk) {
                                return Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk);
                            })).join(" * ");
                },
                ToChunkString: function (T, chunk) {
                    return System.String.concat(Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk.item1), " * ", Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk.item2));
                },
                ToListOfListsString: function (T, l) {
                    return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(l).select(function (sl) {
                                return System.String.concat("{", Bridge.toArray(sl).join(","), "}");
                            })).join(","), "}");
                },
                Binary: function (first, last, targetDirection) {
                    var left = (first - 1) | 0;
                    var right = (last + 1) | 0;

                    while (((right - left) | 0) >= 2) {
                        var middle = (left + ((Bridge.Int.div((((right - left) | 0)), 2)) | 0)) | 0;
                        var direction = targetDirection(middle);

                        if (direction === 0) {
                            return middle;
                        } else {
                            if (direction < 0) {
                                right = middle;
                            } else {
                                left = middle;
                            }
                        }
                    }

                    if (left < first) {
                        return ((first - 1) | 0);
                    }
                    if (right > last) {
                        return ((last + 1) | 0);
                    }

                    return left;
                }
            }
        }
    });

    Bridge.define("$AnonymousType$4", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (pair, boxedUnion) {
                this.Pair = pair;
                this.BoxedUnion = boxedUnion;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$4)) {
                    return false;
                }
                return Bridge.equals(this.Pair, o.Pair) && Bridge.equals(this.BoxedUnion, o.BoxedUnion);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196189, this.Pair, this.BoxedUnion]);
                return h;
            },
            toJSON: function () {
                return {
                    Pair : this.Pair,
                    BoxedUnion : this.BoxedUnion
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"BoxedUnion","t":16,"rt":System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Object)),"g":{"a":2,"n":"get_BoxedUnion","t":8,"rt":System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Object)),"fg":"BoxedUnion"},"fn":"BoxedUnion"},{"a":2,"n":"Pair","t":16,"rt":System.Object,"g":{"a":2,"n":"get_Pair","t":8,"rt":System.Object,"fg":"Pair"},"fn":"Pair"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.Boxification", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.Boxification, {
        f1: function (x) { },
        f2: function (x) {
            return x;
        },
        f3: function (l) {
            return System.Linq.Enumerable.from(l).orderBy($asm.$.Algorithms.WordGame.Boxification.f2).toList(System.Int32);
        },
        f4: function (pp) {
            return pp;
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastAccessibilityChecker", {
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        ctors: {
            init: function () {
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            },
            ctor: function (n) {
                this.$initialize();
                this._fixerResponses = System.Array.init(1 << ((((n + 1) | 0)) >> 1), System.UInt64(0), System.UInt64);
            }
        },
        methods: {
            IsAccessible: function (board, wonBoards) {
                var $t;
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        var x = board._trace[System.Array.index(i, board._trace)];
                        var y = board._trace[System.Array.index(j, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t.moveNext()) {
                                var breakerChoice = $t.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                for (var k = 1; k < this._fixerResponseCount; k = (k + 1) | 0) {
                                    var childBoard = new Algorithms.WordGame.Optimized.FastWord.$ctor1(board._trace, i, j, this._fixerResponses[System.Array.index(k, this._fixerResponses)], board._stackCount);
                                    if (wonBoards.contains(childBoard)) {
                                        winningSwapExists = true;
                                        break;
                                    }
                                }

                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                }

                return false;
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.TarpitEnumerator", {
        statics: {
            fields: {
                Alphabet: null
            },
            ctors: {
                init: function () {
                    this.Alphabet = $asm.$.Algorithms.WordGame.TarpitEnumerator.f1(new (System.Collections.Generic.List$1(System.Char))());
                }
            },
            methods: {
                IsPermutationClosed: function (S) {
                    return System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.EnumerateAlphabetPermutations(S)).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f3).distinct().count() === 1;
                },
                RemovePermutationRedundancies: function (S) {
                    var hash = new (System.Collections.Generic.HashSet$1(System.String)).ctor();
                    var permutedLists = System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.EnumerateAlphabetPermutations(S)).toList(System.Collections.Generic.List$1(System.String));
                    for (var i = 0; i < S.Count; i = (i + 1) | 0) {
                        hash.add(System.Linq.Enumerable.from(permutedLists).select(function (l) {
                                return l.getItem(i);
                            }).orderBy($asm.$.Algorithms.WordGame.TarpitEnumerator.f2).first());
                    }

                    return System.Linq.Enumerable.from(hash).toList(System.String);
                },
                ReorderAlphabetByOccurenceRate: function (S) {
                    return System.Linq.Enumerable.from(S).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f5).toList(System.String);
                },
                EnumerateAlphabetPermutations: function (S) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function (S) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            uppered,
                            $t,
                            permutation,
                            p,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            uppered = System.Linq.Enumerable.from(S).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f6).toList(System.String);
                                                $t = Bridge.getEnumerator(Algorithms.Utility.Permutation.EnumerateAll(3), Algorithms.Utility.Permutation);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    permutation = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            p = { v : permutation.Apply(System.Char, Algorithms.WordGame.TarpitEnumerator.Alphabet) };
                                                $enumerator.current = System.Linq.Enumerable.from(uppered).select((function ($me, p) {
                                                        return function (s) {
                                                            return System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, String.fromCharCode(88), String.fromCharCode(p.v.getItem(0))), String.fromCharCode(89), String.fromCharCode(p.v.getItem(1))), String.fromCharCode(90), String.fromCharCode(p.v.getItem(2)));
                                                        };
                                                    })(this, p)).toList(System.String);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        },
        methods: {
            GenerateMinimalTarpits: function (foundTarpit) { }
        }
    });

    Bridge.define("$AnonymousType$5", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (c, rate) {
                this.C = c;
                this.Rate = rate;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$5)) {
                    return false;
                }
                return Bridge.equals(this.C, o.C) && Bridge.equals(this.Rate, o.Rate);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196190, this.C, this.Rate]);
                return h;
            },
            toJSON: function () {
                return {
                    C : this.C,
                    Rate : this.Rate
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"C","t":16,"rt":System.Char,"g":{"a":2,"n":"get_C","t":8,"rt":System.Char,"fg":"C"},"fn":"C"},{"a":2,"n":"Rate","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_Rate","t":8,"rt":System.Int32,"fg":"Rate"},"fn":"Rate"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.TarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.TarpitEnumerator, {
        f1: function (_o23) {
            _o23.add(120);
            _o23.add(121);
            _o23.add(122);
            return _o23;
        },
        f2: function (s) {
            return s;
        },
        f3: function (T) {
            return Bridge.toArray(System.Linq.Enumerable.from(T).orderBy($asm.$.Algorithms.WordGame.TarpitEnumerator.f2)).join(",");
        },
        f4: function (d) {
            return d.Rate;
        },
        f5: function (s) {
            var chars = System.String.toCharArray(s, 0, s.length);
            var p = System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.Alphabet).select(function (c) {
                    return new $asm.$AnonymousType$5(c, System.Linq.Enumerable.from(chars).count(function (cc) {
                            return cc === c;
                        }));
                }).orderByDescending($asm.$.Algorithms.WordGame.TarpitEnumerator.f4).toList(System.Object);

            return System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, String.fromCharCode(p.getItem(0).C), String.fromCharCode(88)), String.fromCharCode(p.getItem(1).C), String.fromCharCode(89)), String.fromCharCode(p.getItem(2).C), String.fromCharCode(90)).toLowerCase();

        },
        f6: function (s) {
            return s.toUpperCase();
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWord", {
        fields: {
            _trace: null,
            _length: 0,
            _stackCount: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (trace, stackCount) {
                this.$initialize();
                this._trace = trace;
                this._length = this._trace.length;
                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            },
            $ctor1: function (trace, i, j, swap, stackCount) {
                this.$initialize();
                this._trace = System.Array.init(trace.length, System.UInt64(0), System.UInt64);
                this._length = 0;
                for (var k = 0; k < trace.length; k = (k + 1) | 0) {
                    var v = System.UInt64(0);
                    if (k === i || k === j) {
                        v = trace[System.Array.index(k, trace)].xor(swap);
                    } else {
                        v = trace[System.Array.index(k, trace)];
                    }

                    var q = this._length;
                    while (q > 0 && this._trace[System.Array.index(((q - 1) | 0), this._trace)].gt(v)) {
                        q = (q - 1) | 0;
                    }

                    if (q < this._length) {
                        System.Array.copy(this._trace, q << 3, this._trace, (((q + 1) | 0)) << 3, (((this._length - q) | 0)) << 3);
                    }
                    this._trace[System.Array.index(q, this._trace)] = v;

                    this._length = (this._length + 1) | 0;
                }

                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            }
        },
        methods: {
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.WordGame.Optimized.FastWord));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._trace[System.Array.index(i, this._trace)].ne(other._trace[System.Array.index(i, other._trace)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWordGenerator", {
        methods: {
            GenerateWords: function (length) {
                var words = System.Linq.Enumerable.from(Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate(System.Linq.Enumerable.repeat(1, length), 3)).select(function (trace) {
                        return new Algorithms.WordGame.Optimized.FastWord.ctor(trace, length);
                    }).toList(Algorithms.WordGame.Optimized.FastWord);
                return words;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine", {
        statics: {
            methods: {
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    return Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate$1(sizeVector, assignment, r, 0, System.UInt64(0), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = Algorithms.Int64Usage.RightFillToMSB(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = Algorithms.Int64Usage.RightFillToMSB(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.UInt64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                                                x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.UInt64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.WordGame.WordEnumerator", {
        fields: {
            _alphabet: null
        },
        ctors: {
            ctor: function (alphabet) {
                if (alphabet === void 0) { alphabet = []; }

                Algorithms.WordGame.WordEnumerator.$ctor1.call(this, Bridge.cast(alphabet, System.Collections.Generic.IEnumerable$1(System.Char)));
            },
            $ctor1: function (alphabet) {
                this.$initialize();
                this._alphabet = System.Linq.Enumerable.from(alphabet).toList(System.Char);
            }
        },
        methods: {
            EnumerateWords: function (length) {
                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Char, System.Linq.Enumerable.repeat(this._alphabet, length))).select($asm.$.Algorithms.WordGame.WordEnumerator.f1);
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.WordEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.WordEnumerator, {
        f1: function (chars) {
            return String.fromCharCode.apply(null, System.Linq.Enumerable.from(chars).toArray());
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_byte", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_byte.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.Byte)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.Byte);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Byte));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_byte.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_byte.Zeroes(sizeVector))) & 255;
                    BitLevelGeneration.Assignments_byte.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = (care & ~last) & 255;
                    var q = (~care & ~dontCare & last) & 255;

                    if (g > q) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB(g);
                        x = ((care & f) | (last & ~f)) & 255;
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB(q);
                        var t = (~f1 & last) & 255;
                        var y = (dontCare & ~f1 & ~t) & 255;
                        if (y === 0) {
                            return;
                        }

                        var y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 255;

                        x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 255;
                    } else {
                        x = last;
                    }

                    var end = (care | dontCare) & 255;
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.Byte);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_byte.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_byte.Zeroes(sizes);

                            if ((c & z) === 0) {
                                var dc = (~(c | z)) & 255;
                                BitLevelGeneration.Assignments_byte.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_byte.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_byte.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.Byte);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Byte));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_byte.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_byte.Zeroes(sizeVector))) & 255;
                    return BitLevelGeneration.Assignments_byte.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Byte)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Byte)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = (care & ~last) & 255;
                                                q = (~care & ~dontCare & last) & 255;

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB(g);
                                                x = ((care & f) | (last & ~f)) & 255;
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB(q);
                                                t = (~f1 & last) & 255;
                                                y = (dontCare & ~f1 & ~t) & 255;
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 255;

                                                x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 255;
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = (care | dontCare) & 255;
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.Byte);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_byte.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_byte.Zeroes(sizes);

                                                if ((c & z) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (~(c | z)) & 255;
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_byte.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.Byte));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_byte.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_long", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_long.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.Int64)))(countEstimate);
                    var assignment = System.Array.init(potSize, System.Int64(0), System.Int64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Int64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_long.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_long.Zeroes(sizeVector))).not();
                    BitLevelGeneration.Assignments_long.Generate$1(sizeVector, assignments, assignment, r, 0, System.Int64(1), c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = care.and(last.not());
                    var q = care.not().and(dontCare.not()).and(last);

                    if (g.gt(q)) {
                        var f = BitLevelGeneration.BitUsage_long.RightFillToMSB(g);
                        x = (care.and(f)).or((last.and(f.not())));
                    } else if (q.gt(g)) {
                        var f1 = BitLevelGeneration.BitUsage_long.RightFillToMSB(q);
                        var t = f1.not().and(last);
                        var y = dontCare.and(f1.not()).and(t.not());
                        if (y.equals(System.Int64(0))) {
                            return;
                        }

                        var y2 = dontCare.and(t).and((y.or((y.sub(System.Int64(1))))));

                        x = (care.and((f1.shr(1)))).or((t.and(y2.not()))).or((y.and((System.Int64(0).sub(y)))));
                    } else {
                        x = last;
                    }

                    var end = care.or(dontCare);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, System.Int64(0), System.Int64);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_long.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_long.Zeroes(sizes);

                            if ((c.and(z)).equals(System.Int64(0))) {
                                var dc = (c.or(z)).not();
                                BitLevelGeneration.Assignments_long.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_long.Increment(sizes, x);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_long.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.Int64(0), System.Int64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Int64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_long.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_long.Zeroes(sizeVector))).not();
                    return BitLevelGeneration.Assignments_long.Enumerate$1(sizeVector, assignment, r, 0, System.Int64(1), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitUsage_long.RightFillToMSB(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitUsage_long.RightFillToMSB(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.Int64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.Int64(1))))));

                                                x = (care.and((f1.shr(1)))).or((t.and(y2.not()))).or((y.and((System.Int64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.Int64(0), System.Int64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_long.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_long.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_long.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.Int64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_long.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.Int64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_long.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_uint", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_uint.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt32)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.UInt32);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt32));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_uint.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = ~(((c | BitLevelGeneration.BitVectors_uint.Zeroes(sizeVector)) >>> 0));
                    BitLevelGeneration.Assignments_uint.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = ((care & ~last) >>> 0);
                    var q = ((((~care & ~dontCare) >>> 0) & last) >>> 0);

                    if (g > q) {
                        var f = BitLevelGeneration.BitUsage_uint.RightFillToMSB(g);
                        x = (((((care & f) >>> 0)) | (((last & ~f) >>> 0))) >>> 0);
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitUsage_uint.RightFillToMSB(q);
                        var t = ((~f1 & last) >>> 0);
                        var y = ((((dontCare & ~f1) >>> 0) & ~t) >>> 0);
                        if (y === 0) {
                            return;
                        }

                        var y2 = ((((dontCare & t) >>> 0) & (((y | (((y - 1) >>> 0))) >>> 0))) >>> 0);

                        x = (((((((care & (f1 >>> 1)) >>> 0)) | (((t & ~y2) >>> 0))) >>> 0) | (((y & (((0 - y) >>> 0))) >>> 0))) >>> 0);
                    } else {
                        x = last;
                    }

                    var end = ((care | dontCare) >>> 0);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.UInt32);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_uint.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_uint.Zeroes(sizes);

                            if ((((c & z) >>> 0)) === 0) {
                                var dc = ~(((c | z) >>> 0));
                                BitLevelGeneration.Assignments_uint.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_uint.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_uint.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.UInt32);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt32));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_uint.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = ~(((c | BitLevelGeneration.BitVectors_uint.Zeroes(sizeVector)) >>> 0));
                    return BitLevelGeneration.Assignments_uint.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt32)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = ((care & ~last) >>> 0);
                                                q = ((((~care & ~dontCare) >>> 0) & last) >>> 0);

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitUsage_uint.RightFillToMSB(g);
                                                x = (((((care & f) >>> 0)) | (((last & ~f) >>> 0))) >>> 0);
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitUsage_uint.RightFillToMSB(q);
                                                t = ((~f1 & last) >>> 0);
                                                y = ((((dontCare & ~f1) >>> 0) & ~t) >>> 0);
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = ((((dontCare & t) >>> 0) & (((y | (((y - 1) >>> 0))) >>> 0))) >>> 0);

                                                x = (((((((care & (f1 >>> 1)) >>> 0)) | (((t & ~y2) >>> 0))) >>> 0) | (((y & (((0 - y) >>> 0))) >>> 0))) >>> 0);
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = ((care | dontCare) >>> 0);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.UInt32);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_uint.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_uint.Zeroes(sizes);

                                                if ((((c & z) >>> 0)) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = ~(((c | z) >>> 0));
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_uint.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt32));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_uint.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_ulong", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt64)))(countEstimate);
                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    BitLevelGeneration.Assignments_ulong.Generate$1(sizeVector, assignments, assignment, r, 0, System.UInt64(1), c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = care.and(last.not());
                    var q = care.not().and(dontCare.not()).and(last);

                    if (g.gt(q)) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB$2(g);
                        x = (care.and(f)).or((last.and(f.not())));
                    } else if (q.gt(g)) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB$2(q);
                        var t = f1.not().and(last);
                        var y = dontCare.and(f1.not()).and(t.not());
                        if (y.equals(System.UInt64(0))) {
                            return;
                        }

                        var y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                        x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                    } else {
                        x = last;
                    }

                    var end = care.or(dontCare);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                            if ((c.and(z)).equals(System.UInt64(0))) {
                                var dc = (c.or(z)).not();
                                BitLevelGeneration.Assignments_ulong.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    return BitLevelGeneration.Assignments_ulong.Enumerate$1(sizeVector, assignment, r, 0, System.UInt64(1), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB$2(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB$2(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.UInt64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                                                x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.UInt64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ulong.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_ushort", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ushort.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt16)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.UInt16);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt16));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ushort.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_ushort.Zeroes(sizeVector))) & 65535;
                    BitLevelGeneration.Assignments_ushort.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = (care & ~last) & 65535;
                    var q = (~care & ~dontCare & last) & 65535;

                    if (g > q) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB$1(g);
                        x = ((care & f) | (last & ~f)) & 65535;
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB$1(q);
                        var t = (~f1 & last) & 65535;
                        var y = (dontCare & ~f1 & ~t) & 65535;
                        if (y === 0) {
                            return;
                        }

                        var y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 65535;

                        x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 65535;
                    } else {
                        x = last;
                    }

                    var end = (care | dontCare) & 65535;
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.UInt16);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_ushort.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_ushort.Zeroes(sizes);

                            if ((c & z) === 0) {
                                var dc = (~(c | z)) & 65535;
                                BitLevelGeneration.Assignments_ushort.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_ushort.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ushort.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.UInt16);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt16));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ushort.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_ushort.Zeroes(sizeVector))) & 65535;
                    return BitLevelGeneration.Assignments_ushort.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt16)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt16)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = (care & ~last) & 65535;
                                                q = (~care & ~dontCare & last) & 65535;

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB$1(g);
                                                x = ((care & f) | (last & ~f)) & 65535;
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB$1(q);
                                                t = (~f1 & last) & 65535;
                                                y = (dontCare & ~f1 & ~t) & 65535;
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 65535;

                                                x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 65535;
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = (care | dontCare) & 65535;
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.UInt16);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ushort.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ushort.Zeroes(sizes);

                                                if ((c & z) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (~(c | z)) & 65535;
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ushort.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt16));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ushort.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.IGraph_long", {
        $kind: "interface"
    });

    Bridge.define("BitLevelGeneration.IGraph_uint", {
        $kind: "interface"
    });

    Bridge.define("BitLevelGeneration.BitOperations", {
        statics: {
            methods: {
                To_ulong: function (bits) {
                    var $t;
                    var x = System.UInt64(0);
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = x.or((System.UInt64(1).shl(bit)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                To_ushort: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | ((1 << bit) & 65535)) & 65535;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                To_byte: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | ((1 << bit) & 255)) & 255;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                RightFillToMSB$2: function (x) {
                    x = x.or((x.shru(1)));
                    x = x.or((x.shru(2)));
                    x = x.or((x.shru(4)));
                    x = x.or((x.shru(8)));
                    x = x.or((x.shru(16)));
                    x = x.or((x.shru(32)));

                    return x;
                },
                RightFillToMSB$1: function (x) {
                    x = (x | ((x >> 1) & 65535)) & 65535;
                    x = (x | ((x >> 2) & 65535)) & 65535;
                    x = (x | ((x >> 4) & 65535)) & 65535;
                    x = (x | ((x >> 8) & 65535)) & 65535;

                    return x;
                },
                RightFillToMSB: function (x) {
                    x = (x | ((x >> 1) & 255)) & 255;
                    x = (x | ((x >> 2) & 255)) & 255;
                    x = (x | ((x >> 4) & 255)) & 255;

                    return x;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitUsage_long", {
        statics: {
            fields: {
                DeBruijnMultiplier: System.UInt64(0),
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = System.UInt64(System.Int64([-1706153790,133027301]));
                    this.DeBruijnLookup = System.Array.init([
                        63, 
                        0, 
                        58, 
                        1, 
                        59, 
                        47, 
                        53, 
                        2, 
                        60, 
                        39, 
                        48, 
                        27, 
                        54, 
                        33, 
                        42, 
                        3, 
                        61, 
                        51, 
                        37, 
                        40, 
                        49, 
                        18, 
                        28, 
                        20, 
                        55, 
                        30, 
                        34, 
                        11, 
                        43, 
                        14, 
                        22, 
                        4, 
                        62, 
                        57, 
                        46, 
                        52, 
                        38, 
                        26, 
                        32, 
                        41, 
                        50, 
                        36, 
                        17, 
                        19, 
                        29, 
                        10, 
                        13, 
                        21, 
                        56, 
                        45, 
                        25, 
                        31, 
                        35, 
                        16, 
                        9, 
                        12, 
                        44, 
                        24, 
                        15, 
                        8, 
                        23, 
                        7, 
                        6, 
                        5
                    ], System.Int32);
                }
            },
            methods: {
                Extract: function (x) {
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(x).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier)).shru(58)), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                LeastSignificantBit: function (x) {
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.clipu64((x.and(x.neg()))).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier).shru(58), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = x.v.and(x.v.neg());
                    x.v = x.v.xor(m);
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(m).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier)).shru(58)), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b.gt(System.Int64(0))) {
                        q = (q + 1) | 0;
                        b = b.and((b.sub(System.Int64(1))));
                    }
                    return q;
                },
                PopulationCountDense: function (x) {
                    x = x.sub(((x.shr(1)).and(System.Int64([1431655765,1431655765]))));
                    x = (x.and(System.Int64([858993459,858993459]))).add(((x.shr(2)).and(System.Int64([858993459,858993459]))));
                    x = (x.add((x.shr(4)))).and(System.Int64([252645135,252645135]));
                    x = (x.mul(System.Int64([16843009,16843009]))).shr(56);

                    return System.Int64.clip32(x);
                },
                ToSet: function (x) {
                    x = {v:x};
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x.v.ne(System.Int64(0))) {
                        onBits.add(BitLevelGeneration.BitUsage_long.GetAndClearLeastSignificantBit(x));
                    }

                    return onBits;
                },
                RightFillToMSB: function (x) {
                    x = x.or((x.shr(1)));
                    x = x.or((x.shr(2)));
                    x = x.or((x.shr(4)));
                    x = x.or((x.shr(8)));
                    x = x.or((x.shr(16)));

                    return x;
                },
                To_long: function (bits) {
                    var $t;
                    var x = System.Int64(0);
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = x.or((System.Int64(1).shl(bit)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                Or: function (colorGraph, offset) {
                    var result = System.Int64(0);
                    for (var i = offset; i < colorGraph.length; i = (i + 1) | 0) {
                        result = result.or(colorGraph[System.Array.index(i, colorGraph)]);
                    }
                    return result;
                },
                TrueForAllBitIndices: function (x, predicate) {
                    x = {v:x};
                    while (x.v.ne(System.Int64(0))) {
                        if (!predicate(BitLevelGeneration.BitUsage_long.GetAndClearLeastSignificantBit(x))) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitUsage_uint", {
        statics: {
            fields: {
                DeBruijnMultiplier: 0,
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = 125613361;
                    this.DeBruijnLookup = System.Array.init([0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8, 31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9], System.Int32);
                }
            },
            methods: {
                Extract: function (x) {
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul(x, BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                LeastSignificantBit: function (x) {
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul((((x & (((~x + 1) >>> 0))) >>> 0)), BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = (x.v & (((~x.v + 1) >>> 0))) >>> 0;
                    x.v = (x.v ^ m) >>> 0;
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul(m, BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b > 0) {
                        q = (q + 1) | 0;
                        b = (b & (((b - 1) >>> 0))) >>> 0;
                    }
                    return q;
                },
                ToSet: function (x) {
                    x = {v:x};
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x.v !== 0) {
                        onBits.add(BitLevelGeneration.BitUsage_uint.GetAndClearLeastSignificantBit(x));
                    }

                    return onBits;
                },
                RightFillToMSB: function (x) {
                    x = (x | (x >>> 1)) >>> 0;
                    x = (x | (x >>> 2)) >>> 0;
                    x = (x | (x >>> 4)) >>> 0;
                    x = (x | (x >>> 8)) >>> 0;
                    x = (x | (x >>> 16)) >>> 0;

                    return x;
                },
                To_uint: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | (((1 << bit) >>> 0))) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                Or: function (colorGraph, offset) {
                    var result = 0;
                    for (var i = offset; i < colorGraph.length; i = (i + 1) | 0) {
                        result = (result | colorGraph[System.Array.index(i, colorGraph)]) >>> 0;
                    }
                    return result;
                },
                TrueForAllBitIndices: function (x, predicate) {
                    x = {v:x};
                    while (x.v !== 0) {
                        if (!predicate(BitLevelGeneration.BitUsage_uint.GetAndClearLeastSignificantBit(x))) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_byte", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(8);
                    for (var i = 0; i < 8; i = (i + 1) | 0) {
                        var b = (1 << i) & 255;
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b & n.getItem(j)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.Byte))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) & 255)) & 255;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & n.getItem(i)) & 255;
                        var t2 = (m ^ n.getItem(i)) & 255;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & ~n.getItem(i)) & 255;
                        var t2 = (m ^ n.getItem(i)) & 255;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) & 255;
                    }

                    return ((~m) & 255);
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) & 255;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) & 255;
                            } else {
                                a = (a | ((~b & n.getItem(i) & ~k.getItem(i)) & 255)) & 255;
                                b = (b | ((~a & ~n.getItem(i) & k.getItem(i)) & 255)) & 255;
                            }
                        }
                    }

                    return ((a & ~b) & 255);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_long", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(64);
                    for (var i = 0; i < 64; i = (i + 1) | 0) {
                        var b = System.Int64(1).shl(i);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b.and(n.getItem(j))).ne(System.Int64(0))) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.Int64))();
                    while (true) {
                        var m = System.Int64(0);
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = m.or(System.Int64(1).shl(i));
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m.ne(System.Int64(0))) {
                        var t1 = m.and(n.getItem(i));
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m.ne(System.Int64(0))) {
                        var t1 = m.and(n.getItem(i).not());
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = System.Int64(0);
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = m.or(n.getItem(i));
                    }

                    return m.not();
                },
                GreaterThan: function (n, k) {
                    var a = System.Int64(0);
                    var b = System.Int64(0);
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = a.or(n.getItem(i));
                        } else {
                            if (i >= n.Count) {
                                b = b.or(k.getItem(i));
                            } else {
                                a = a.or(b.not().and(n.getItem(i)).and(k.getItem(i).not()));
                                b = b.or(a.not().and(n.getItem(i).not()).and(k.getItem(i)));
                            }
                        }
                    }

                    return a.and(b.not());
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_uint", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(32);
                    for (var i = 0; i < 32; i = (i + 1) | 0) {
                        var b = ((1 << i) >>> 0);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((((b & n.getItem(j)) >>> 0)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt32))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) >>> 0)) >>> 0;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = ((m & n.getItem(i)) >>> 0);
                        var t2 = ((m ^ n.getItem(i)) >>> 0);

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = ((m & ~n.getItem(i)) >>> 0);
                        var t2 = ((m ^ n.getItem(i)) >>> 0);

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) >>> 0;
                    }

                    return ~m;
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) >>> 0;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) >>> 0;
                            } else {
                                a = (a | ((((~b & n.getItem(i)) >>> 0) & ~k.getItem(i)) >>> 0)) >>> 0;
                                b = (b | ((((~a & ~n.getItem(i)) >>> 0) & k.getItem(i)) >>> 0)) >>> 0;
                            }
                        }
                    }

                    return ((a & ~b) >>> 0);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_ulong", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(64);
                    for (var i = 0; i < 64; i = (i + 1) | 0) {
                        var b = System.UInt64(1).shl(i);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b.and(n.getItem(j))).ne(System.UInt64(0))) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt64))();
                    while (true) {
                        var m = System.UInt64(0);
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = m.or(System.UInt64(1).shl(i));
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m.ne(System.UInt64(0))) {
                        var t1 = m.and(n.getItem(i));
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m.ne(System.UInt64(0))) {
                        var t1 = m.and(n.getItem(i).not());
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = System.UInt64(0);
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = m.or(n.getItem(i));
                    }

                    return m.not();
                },
                GreaterThan: function (n, k) {
                    var a = System.UInt64(0);
                    var b = System.UInt64(0);
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = a.or(n.getItem(i));
                        } else {
                            if (i >= n.Count) {
                                b = b.or(k.getItem(i));
                            } else {
                                a = a.or(b.not().and(n.getItem(i)).and(k.getItem(i).not()));
                                b = b.or(a.not().and(n.getItem(i).not()).and(k.getItem(i)));
                            }
                        }
                    }

                    return a.and(b.not());
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_ushort", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(16);
                    for (var i = 0; i < 16; i = (i + 1) | 0) {
                        var b = (1 << i) & 65535;
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b & n.getItem(j)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt16))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) & 65535)) & 65535;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & n.getItem(i)) & 65535;
                        var t2 = (m ^ n.getItem(i)) & 65535;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & ~n.getItem(i)) & 65535;
                        var t2 = (m ^ n.getItem(i)) & 65535;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) & 65535;
                    }

                    return ((~m) & 65535);
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) & 65535;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) & 65535;
                            } else {
                                a = (a | ((~b & n.getItem(i) & ~k.getItem(i)) & 65535)) & 65535;
                                b = (b | ((~a & ~n.getItem(i) & k.getItem(i)) & 65535)) & 65535;
                            }
                        }
                    }

                    return ((a & ~b) & 65535);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.GraphChoosability_long", {
        statics: {
            methods: {
                IsFChoosable: function (graph, f, badAssignment) {
                    var $step = 0,
                        $jumpFromFinally, 
                        liveVertexBits, 
                        sizes, 
                        maxListSize, 
                        potSize, 
                        $t, 
                        colorGraph, 
                        xx, 
                        i, 
                        i1, 
                        j, 
                        $t1, 
                        color, 
                        $t2, 
                        v, 
                        list, 
                        bit, 
                        i2, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,18,20,21,22,23,24,25,27,28,30,31], $step);
                                switch ($step) {
                                    case 0: {
                                        badAssignment.v = null;

                                        liveVertexBits = BitLevelGeneration.BitUsage_long.To_long(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_long$N));
                                        sizes = System.Linq.Enumerable.from(graph.BitLevelGeneration$IGraph_long$Vertices).select(function (v) {
                                            return f(v);
                                        }).toList(System.Int32);
                                        maxListSize = System.Linq.Enumerable.from(sizes).max();

                                        potSize = maxListSize;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( potSize < graph.BitLevelGeneration$IGraph_long$N ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 31;
                                        continue;
                                    }
                                    case 2: {
                                        $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_long.Enumerate(sizes, potSize), System.Array.type(System.Int64));
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                            colorGraph = $t.Current;
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 29;
                                        continue;
                                    }
                                    case 4: {
                                        if (potSize > maxListSize) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 5: {
                                        xx = System.Int64(0);
                                        i = 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        if ( i < colorGraph.length ) {
                                            $step = 7;
                                            continue;
                                        }
                                        $step = 11;
                                        continue;
                                    }
                                    case 7: {
                                        xx = xx.or(colorGraph[System.Array.index(i, colorGraph)]);

                                        if (BitLevelGeneration.BitUsage_long.PopulationCount(xx) <= ((i + 1) | 0)) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 9;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 10: {
                                        i = (i + 1) | 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 11: {
                                        i1 = 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {
                                        if ( i1 < colorGraph.length ) {
                                            $step = 13;
                                            continue;
                                        }
                                        $step = 21;
                                        continue;
                                    }
                                    case 13: {
                                        j = (i1 + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {
                                        if ( j < colorGraph.length ) {
                                            $step = 15;
                                            continue;
                                        }
                                        $step = 19;
                                        continue;
                                    }
                                    case 15: {
                                        if ((colorGraph[System.Array.index(i1, colorGraph)].and(colorGraph[System.Array.index(j, colorGraph)])).equals(System.Int64(0))) {
                                            $step = 16;
                                            continue;
                                        } 
                                        $step = 17;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 18: {
                                        j = (j + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }

                                    case 20: {
                                        i1 = (i1 + 1) | 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 21: {
                                        $t1 = Bridge.getEnumerator(colorGraph);
                                        $step = 22;
                                        continue;
                                    }
                                    case 22: {
                                        if ($t1.moveNext()) {
                                            color = $t1.Current;
                                            $step = 23;
                                            continue;
                                        }
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        if (graph.BitLevelGeneration$IGraph_long$IsIndependent(color)) {
                                            $step = 24;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 24: {
                                        $step = 28;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 22;
                                        continue;
                                    }

                                    case 27: {
                                        if (!BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, liveVertexBits, System.Int64(0))) {
                                            badAssignment.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $t2 = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_long$Vertices, System.Int32);
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    list = new (System.Collections.Generic.List$1(System.Int32))();
                                                    bit = System.Int64(1).shl(v);
                                                    for (i2 = 0; i2 < colorGraph.length; i2 = (i2 + 1) | 0) {
                                                        if ((bit.and(colorGraph[System.Array.index(i2, colorGraph)])).ne(System.Int64(0))) {
                                                            list.add(i2);
                                                        }
                                                    }

                                                    badAssignment.v.add(list);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            return false;
                                        }
                                    }
                                    case 28: {
                                        ;
                                        $step = 3;
                                        continue;
                                    }

                                    case 30: {
                                        potSize = (potSize + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 31: {
                                        return true;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                IsChoosable: function (graph, colorGraph) {
                    return BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, BitLevelGeneration.BitUsage_long.To_long(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_long$N)), System.Int64(0));
                },
                IsChoosable$1: function (graph, colorGraph, subset) {
                    return BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, subset, System.Int64(0));
                },
                IsChoosable$2: function (graph, colorGraph, liveVertexBits, c) {
                    var $t;
                    liveVertexBits = {v:liveVertexBits};
                    BitLevelGeneration.GraphChoosability_long.BeGreedy(graph, colorGraph, liveVertexBits, c);
                    if (liveVertexBits.v.equals(System.Int64(0))) {
                        return true;
                    }
                    if ((liveVertexBits.v.and(BitLevelGeneration.BitUsage_long.Or(colorGraph, c).not())).ne(System.Int64(0))) {
                        return false;
                    }

                    var choosable = false;
                    var V = colorGraph[System.Array.index(c, colorGraph)].and(liveVertexBits.v);
                    $t = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_long$MaximalIndependentSubsets(V), System.Int64);
                    try {
                        while ($t.moveNext()) {
                            var C = $t.Current;
                            if (BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, liveVertexBits.v.xor(C), System.Int64(c + 1))) {
                                choosable = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return choosable;
                },
                BeGreedy: function (graph, colorGraph, liveVertexBits, c) {
                    while (true) {
                        var originalBits = liveVertexBits.v;
                        var bits = liveVertexBits.v;
                        while (bits.ne(System.Int64(0))) {
                            var bit = bits.and(bits.neg());
                            bits = bits.xor(bit);

                            var colorCount = 0;
                            for (var i = c; i < colorGraph.length; i = (i + 1) | 0) {
                                if ((bit.and(colorGraph[System.Array.index(i, colorGraph)])).ne(System.Int64(0))) {
                                    colorCount = (colorCount + 1) | 0;
                                }
                            }

                            if (colorCount > graph.BitLevelGeneration$IGraph_long$DegreeInSet(BitLevelGeneration.BitUsage_long.Extract(bit), liveVertexBits.v)) {
                                liveVertexBits.v = liveVertexBits.v.xor(bit);
                            }
                        }

                        if (liveVertexBits.v.equals(originalBits)) {
                            break;
                        }
                    }
                },
                IsSubsetTwoColorable: function (g, set) {
                    var c = System.Array.init(g.N, 0, System.Int32);
                    var q = System.Array.init(g.N, 0, System.Int32);

                    var leftover = set;
                    var s = 0;
                    while (leftover.ne(System.Int64(0))) {
                        var r = BitLevelGeneration.BitUsage_long.LeastSignificantBit(leftover);
                        q[System.Array.index(s, q)] = r;
                        c[System.Array.index(r, c)] = 1;
                        var e = s;

                        while (s <= e) {
                            var v = q[System.Array.index(Bridge.identity(s, (s = (s + 1) | 0)), q)];
                            var n = g.NeighborsInSet(v, set);

                            while (n.ne(System.Int64(0))) {
                                var bit = n.and(n.neg());
                                var w = BitLevelGeneration.BitUsage_long.Extract(bit);

                                if (c[System.Array.index(w, c)] === 0) {
                                    q[System.Array.index(((e = (e + 1) | 0)), q)] = w;
                                    c[System.Array.index(w, c)] = (3 - c[System.Array.index(v, c)]) | 0;
                                } else if (c[System.Array.index(w, c)] !== ((3 - c[System.Array.index(v, c)]) | 0)) {
                                    return false;
                                }

                                n = n.xor(bit);
                            }

                            leftover = leftover.xor((System.Int64(1).shl(v)));
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.GraphChoosability_uint", {
        statics: {
            methods: {
                IsFChoosable: function (graph, f, badAssignment) {
                    var nodesVisited = { }, cacheHits = { };
                    return BitLevelGeneration.GraphChoosability_uint.IsFChoosable$1(graph, f, badAssignment, nodesVisited, cacheHits);
                },
                IsFChoosable$1: function (graph, f, badAssignment, nodesVisited, cacheHits) {
                    var $step = 0,
                        $jumpFromFinally, 
                        liveVertexBits, 
                        sizes, 
                        maxListSize, 
                        potSize, 
                        cache, 
                        $t, 
                        colorGraph, 
                        xx, 
                        i, 
                        i1, 
                        j, 
                        $t1, 
                        color, 
                        $t2, 
                        v, 
                        list, 
                        bit, 
                        i2, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,18,20,21,22,23,24,25,27,28,30,31], $step);
                                switch ($step) {
                                    case 0: {
                                        badAssignment.v = null;

                                        nodesVisited.v = System.Int64(0);
                                        cacheHits.v = System.Int64(0);
                                        liveVertexBits = BitLevelGeneration.BitUsage_uint.To_uint(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_uint$N));
                                        sizes = System.Linq.Enumerable.from(graph.BitLevelGeneration$IGraph_uint$Vertices).select(function (v) {
                                            return f(v);
                                        }).toList(System.Int32);
                                        maxListSize = System.Linq.Enumerable.from(sizes).max();

                                        potSize = maxListSize;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( potSize < graph.BitLevelGeneration$IGraph_uint$N ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 31;
                                        continue;
                                    }
                                    case 2: {
                                        //var cache = new Dictionary<BitLevelGeneration.HashedAssignment_uint, bool>();
                                        cache = null;

                                        $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_uint.Enumerate(sizes, potSize), System.Array.type(System.UInt32));
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                            colorGraph = $t.Current;
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 29;
                                        continue;
                                    }
                                    case 4: {
                                        if (potSize > maxListSize) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 5: {
                                        xx = 0;
                                        i = 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        if ( i < colorGraph.length ) {
                                            $step = 7;
                                            continue;
                                        }
                                        $step = 11;
                                        continue;
                                    }
                                    case 7: {
                                        xx = (xx | colorGraph[System.Array.index(i, colorGraph)]) >>> 0;

                                        if (BitLevelGeneration.BitUsage_uint.PopulationCount(xx) <= ((i + 1) | 0)) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 9;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 10: {
                                        i = (i + 1) | 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 11: {
                                        i1 = 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {
                                        if ( i1 < colorGraph.length ) {
                                            $step = 13;
                                            continue;
                                        }
                                        $step = 21;
                                        continue;
                                    }
                                    case 13: {
                                        j = (i1 + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {
                                        if ( j < colorGraph.length ) {
                                            $step = 15;
                                            continue;
                                        }
                                        $step = 19;
                                        continue;
                                    }
                                    case 15: {
                                        if ((((colorGraph[System.Array.index(i1, colorGraph)] & colorGraph[System.Array.index(j, colorGraph)]) >>> 0)) === 0) {
                                            $step = 16;
                                            continue;
                                        } 
                                        $step = 17;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 18: {
                                        j = (j + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }

                                    case 20: {
                                        i1 = (i1 + 1) | 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 21: {
                                        $t1 = Bridge.getEnumerator(colorGraph);
                                        $step = 22;
                                        continue;
                                    }
                                    case 22: {
                                        if ($t1.moveNext()) {
                                            color = $t1.Current;
                                            $step = 23;
                                            continue;
                                        }
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        if (graph.BitLevelGeneration$IGraph_uint$IsIndependent(color)) {
                                            $step = 24;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 24: {
                                        $step = 28;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 22;
                                        continue;
                                    }

                                    case 27: {
                                        if (!BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, liveVertexBits, 0, cache, nodesVisited, cacheHits)) {
                                            badAssignment.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $t2 = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_uint$Vertices, System.Int32);
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    list = new (System.Collections.Generic.List$1(System.Int32))();
                                                    bit = (1 << v) >>> 0;
                                                    for (i2 = 0; i2 < colorGraph.length; i2 = (i2 + 1) | 0) {
                                                        if ((((bit & colorGraph[System.Array.index(i2, colorGraph)]) >>> 0)) !== 0) {
                                                            list.add(i2);
                                                        }
                                                    }

                                                    badAssignment.v.add(list);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            return false;
                                        }
                                    }
                                    case 28: {
                                        ;
                                        $step = 3;
                                        continue;
                                    }

                                    case 30: {
                                        potSize = (potSize + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 31: {
                                        return true;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                IsChoosable: function (graph, colorGraph) {
                    var nodesVisited = { }, cacheHits = { };
                    return BitLevelGeneration.GraphChoosability_uint.IsChoosable$1(graph, colorGraph, nodesVisited, cacheHits);
                },
                IsChoosable$1: function (graph, colorGraph, nodesVisited, cacheHits) {
                    nodesVisited.v = System.Int64(0);
                    cacheHits.v = System.Int64(0);
                    //var cache = new Dictionary<BitLevelGeneration.HashedAssignment_uint, bool>();
                    var cache = null;

                    return BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, BitLevelGeneration.BitUsage_uint.To_uint(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_uint$N)), 0, cache, nodesVisited, cacheHits);
                },
                IsChoosable$2: function (graph, colorGraph, liveVertexBits, c, cache, nodesVisited, cacheHits) {
                    var $t;
                    liveVertexBits = {v:liveVertexBits};
                    nodesVisited.v = nodesVisited.v.inc();

                    BitLevelGeneration.GraphChoosability_uint.BeGreedy(graph, colorGraph, liveVertexBits, c);
                    if (liveVertexBits.v === 0) {
                        return true;
                    }
                    if ((((liveVertexBits.v & ~BitLevelGeneration.BitUsage_uint.Or(colorGraph, c)) >>> 0)) !== 0) {
                        return false;
                    }

                    //bool cachedResult;
                    //var key = new BitLevelGeneration.HashedAssignment_uint(colorGraph, c, liveVertexBits);
                    //if (cache.TryGetValue(key, out cachedResult))
                    //{
                    //    cacheHits++;
                    //    return cachedResult;
                    //}

                    var choosable = false;
                    var V = (colorGraph[System.Array.index(c, colorGraph)] & liveVertexBits.v) >>> 0;
                    $t = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_uint$MaximalIndependentSubsets(V), System.UInt32);
                    try {
                        while ($t.moveNext()) {
                            var C = $t.Current;
                            if (BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, ((liveVertexBits.v ^ C) >>> 0), ((c + 1) | 0), cache, nodesVisited, cacheHits)) {
                                choosable = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    //cache[key] = choosable;
                    return choosable;
                },
                BeGreedy: function (graph, colorGraph, liveVertexBits, c) {
                    while (true) {
                        var originalBits = liveVertexBits.v;
                        var bits = liveVertexBits.v;
                        while (bits !== 0) {
                            var bit = (bits & (((~bits + 1) >>> 0))) >>> 0;
                            bits = (bits ^ bit) >>> 0;

                            var colorCount = 0;
                            for (var i = c; i < colorGraph.length; i = (i + 1) | 0) {
                                if ((((bit & colorGraph[System.Array.index(i, colorGraph)]) >>> 0)) !== 0) {
                                    colorCount = (colorCount + 1) | 0;
                                }
                            }

                            if (colorCount > graph.BitLevelGeneration$IGraph_uint$DegreeInSet(BitLevelGeneration.BitUsage_uint.Extract(bit), liveVertexBits.v)) {
                                liveVertexBits.v = (liveVertexBits.v ^ bit) >>> 0;
                            }
                        }

                        if (liveVertexBits.v === originalBits) {
                            break;
                        }
                    }
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_byte", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.Byte);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = (assignment[System.Array.index(i, assignment)] & on) & 255;
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_byte));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_uint", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.UInt32);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = ((assignment[System.Array.index(i, assignment)] & on) >>> 0);
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_uint));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_ulong", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), System.UInt64(0), System.UInt64);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = assignment[System.Array.index(i, assignment)].and(on);
                    if (x.ne(System.UInt64(0))) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = list[System.Array.index(i, list)].add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_ulong));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)].ne(other._assignment[System.Array.index(i, other._assignment)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_ushort", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.UInt16);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = (assignment[System.Array.index(i, assignment)] & on) & 65535;
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_ushort));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.MaximalndependentSetSearching", {
        statics: {
            methods: {
                GenerateMaximalIndependentSubsets: function (g, set) {
                    var d = System.Array.init(64, 0, System.Int32);

                    var n = BitLevelGeneration.BitUsage_long.PopulationCountDense(set);
                    var D = System.Array.init(n, System.Int64(0), System.Int64);

                    var q = set;
                    while (q.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);

                        d[System.Array.index(v, d)] = g.DegreeInSet(v, set);
                        D[System.Array.index(d[System.Array.index(v, d)], D)] = D[System.Array.index(d[System.Array.index(v, d)], D)].or(bit);

                        q = q.xor(bit);
                    }

                    var bits = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        for (var j = 0; j < n; j = (j + 1) | 0) {
                            if (D[System.Array.index(j, D)].ne(System.Int64(0))) {
                                var bit1 = D[System.Array.index(j, D)].and(D[System.Array.index(j, D)].neg());
                                bits[System.Array.index(((((n - 1) | 0) - i) | 0), bits)] = bit1;

                                var v1 = BitLevelGeneration.BitUsage_long.Extract(bit1);
                                q = g.NeighborsInSet(v1, set);

                                while (q.ne(System.Int64(0))) {
                                    var b = q.and(q.neg());
                                    var x = BitLevelGeneration.BitUsage_long.Extract(b);

                                    D[System.Array.index(d[System.Array.index(x, d)], D)] = D[System.Array.index(d[System.Array.index(x, d)], D)].xor(b);
                                    d[System.Array.index(x, d)] = (d[System.Array.index(x, d)] - 1) | 0;
                                    D[System.Array.index(d[System.Array.index(x, d)], D)] = D[System.Array.index(d[System.Array.index(x, d)], D)].or(b);

                                    q = q.xor(b);
                                }

                                set = set.xor(bit1);
                                D[System.Array.index(j, D)] = D[System.Array.index(j, D)].xor(bit1);
                                break;
                            }
                        }
                    }

                    return BitLevelGeneration.MaximalndependentSetSearching.GenerateMaximalIndependentSubsets$1(g, bits);
                },
                GenerateMaximalIndependentSubsets$1: function (g, bits) {
                    var $step = 0,
                        $jumpFromFinally, 
                        mis, 
                        earlier, 
                        j, 
                        bit, 
                        v, 
                        count, 
                        i, 
                        m, 
                        N, 
                        mp, 
                        mpp, 
                        q, 
                        l, 
                        b, 
                        w, 
                        qq, 
                        bb, 
                        z, 
                        X, 
                        b1, 
                        w1, 
                        Z, 
                        mm, 
                        b2, 
                        w2, 
                        qq1, 
                        bb1, 
                        z1, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,28,29,31,32,33,34], $step);
                                switch ($step) {
                                    case 0: {
                                        mis = new (System.Collections.Generic.List$1(System.Int64))(8);
                                        mis.add(System.Int64(0));

                                        earlier = System.Int64(0);
                                        j = 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( j < bits.length ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 34;
                                        continue;
                                    }
                                    case 2: {
                                        bit = bits[System.Array.index(j, bits)];
                                        v = BitLevelGeneration.BitUsage_long.Extract(bit);

                                        count = mis.Count;
                                        i = 0;
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ( i < count ) {
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 32;
                                        continue;
                                    }
                                    case 4: {
                                        m = mis.getItem(i);
                                        N = g.NeighborsInSet(v, m);
                                        if (N.equals(System.Int64(0))) {
                                            $step = 5;
                                            continue;
                                        } else  {
                                            $step = 6;
                                            continue;
                                        }
                                    }
                                    case 5: {
                                        mis.setItem(i, mis.getItem(i).or(bit));
                                        $step = 30;
                                        continue;
                                    }
                                    case 6: {
                                        mp = m.and(N.not());
                                        mpp = mp.or(bit);
                                        q = N;
                                        l = earlier.and(mpp.not());

                                        
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        if ( q.ne(System.Int64(0)) ) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 14;
                                        continue;
                                    }
                                    case 8: {
                                        b = q.and(q.neg());
                                        w = BitLevelGeneration.BitUsage_long.Extract(b);

                                        qq = g.NeighborsInSet(w, l);
                                        
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {
                                        if ( qq.ne(System.Int64(0)) ) {
                                            $step = 10;
                                            continue;
                                        } 
                                        $step = 13;
                                        continue;
                                    }
                                    case 10: {
                                        bb = qq.and(qq.neg());
                                        z = BitLevelGeneration.BitUsage_long.Extract(bb);

                                        if (g.NeighborsInSet(z, mpp).equals(System.Int64(0))) {
                                            $step = 11;
                                            continue;
                                        } 
                                        $step = 12;
                                        continue;
                                    }
                                    case 11: {
                                        $step = 29;
                                        continue;
                                    }
                                    case 12: {
                                        qq = qq.xor(bb);

                                        $step = 9;
                                        continue;
                                    }
                                    case 13: {
                                        q = q.xor(b);

                                        $step = 7;
                                        continue;
                                    }
                                    case 14: {
                                        X = g.NeighborsInSet(v, earlier);
                                        q = X.and(N.not());

                                        while (q.ne(System.Int64(0))) {
                                            b1 = q.and(q.neg());
                                            w1 = BitLevelGeneration.BitUsage_long.Extract(b1);

                                            if (g.NeighborsInSet(w1, mp).ne(System.Int64(0))) {
                                                X = X.xor(b1);
                                            }
                                            q = q.xor(b1);
                                        }

                                        if (X.ne(N)) {
                                            $step = 15;
                                            continue;
                                        } 
                                        $step = 28;
                                        continue;
                                    }
                                    case 15: {
                                        Z = System.Int64(0);
                                        
                                        $step = 16;
                                        continue;
                                    }
                                    case 16: {
                                        if ( Z.lt(N) ) {
                                            $step = 17;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 17: {
                                        Z = (Z.sub(X)).and(X);

                                        if ((Z.and(N)).equals(Z)) {
                                            $step = 16;
                                            continue;
                                        }

                                        if (!g.IsIndependent(Z)) {
                                            $step = 16;
                                            continue;
                                        }

                                        mm = mp.or(Z);
                                        l = earlier.and(mm.not());
                                        q = N.and(Z.not());

                                        
                                        $step = 18;
                                        continue;
                                    }
                                    case 18: {
                                        if ( q.ne(System.Int64(0)) ) {
                                            $step = 19;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 19: {
                                        b2 = q.and(q.neg());
                                        w2 = BitLevelGeneration.BitUsage_long.Extract(b2);

                                        qq1 = g.NeighborsInSet(w2, l);
                                        
                                        $step = 20;
                                        continue;
                                    }
                                    case 20: {
                                        if ( qq1.ne(System.Int64(0)) ) {
                                            $step = 21;
                                            continue;
                                        } 
                                        $step = 24;
                                        continue;
                                    }
                                    case 21: {
                                        bb1 = qq1.and(qq1.neg());
                                        z1 = BitLevelGeneration.BitUsage_long.Extract(bb1);

                                        if (g.NeighborsInSet(z1, mm).equals(System.Int64(0))) {
                                            $step = 22;
                                            continue;
                                        } 
                                        $step = 23;
                                        continue;
                                    }
                                    case 22: {
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        qq1 = qq1.xor(bb1);

                                        $step = 20;
                                        continue;
                                    }
                                    case 24: {
                                        q = q.xor(b2);

                                        $step = 18;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 29;
                                        continue;
                                    }
                                    case 26: {
                                        ;

                                        $step = 16;
                                        continue;
                                    }

                                    case 28: {
                                        mis.add((m.or(bit)).and(N.not()));
                                    }
                                    case 29: {
                                        ;
                                        $step = 30;
                                        continue;
                                    }

                                    case 31: {
                                        i = (i + 1) | 0;
                                        $step = 3;
                                        continue;
                                    }
                                    case 32: {
                                        earlier = earlier.or(bit);
                                        $step = 33;
                                        continue;
                                    }
                                    case 33: {
                                        j = (j + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 34: {
                                        return mis;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                LexicographicallyFirstContaining: function (g, set, S) {
                    set = set.xor(S);
                    while (set.ne(System.Int64(0))) {
                        var bit = set.and(set.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);

                        if (g.NeighborsInSet(v, S).equals(System.Int64(0))) {
                            S = S.or(bit);
                        }

                        set = set.xor(bit);
                    }

                    return S;
                },
                Parent: function (g, set, LFMIS, S) {
                    var a = LFMIS.and(S.not());
                    var bit = a.and(a.neg());
                    var v = BitLevelGeneration.BitUsage_long.Extract(bit);
                    var N = g.NeighborsInSet(v, S);

                    return BitLevelGeneration.MaximalndependentSetSearching.LexicographicallyFirstContaining(g, set, (S.or(bit)).xor(N));
                },
                Later: function (g, set, LFMIS, v) {
                    var q = g.NeighborsInSet(v, set.xor(LFMIS));

                    var earlier = ((System.Int64(1).shl(v)).sub(System.Int64(1))).and(LFMIS);
                    var later = System.Int64(0);
                    while (set.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var w = BitLevelGeneration.BitUsage_long.Extract(bit);

                        if (g.NeighborsInSet(w, earlier).equals(System.Int64(0))) {
                            later = later.or(bit);
                        }

                        q = q.xor(bit);
                    }

                    return later;
                }
            }
        }
    });

    Bridge.define("GraphicsLayer.ARGB", {
        statics: {
            methods: {
                BasicPalette: function (q) {
                    if (q === -1) {
                        return new GraphicsLayer.ARGB.ctor(255, 255, 255);
                    }

                    return GraphicsLayer.ARGB.FromHSL(0.6 + GraphicsLayer.ARGB.ReverseBits((q >>> 0)) / Math.pow(2.0, 32), 1.0, 0.65);
                },
                FromFractional: function (a, r, g, b) {
                    return new GraphicsLayer.ARGB.$ctor1(Bridge.Int.clip32(a * 255), Bridge.Int.clip32(r * 255), Bridge.Int.clip32(g * 255), Bridge.Int.clip32(b * 255));
                },
                FromHSL: function (h, s, l) {
                    while (h > 1.0) {
                        h -= 1.0;
                    }
                    while (s > 1.0) {
                        s -= 1.0;
                    }
                    while (l > 1.0) {
                        l -= 1.0;
                    }

                    if (s === 0.0) {
                        return GraphicsLayer.ARGB.FromFractional(1.0, l, l, l);
                    }

                    var q = l < 0.5 ? l * (1.0 + s) : l + s - l * s;
                    var p = 2.0 * l - q;
                    var r = GraphicsLayer.ARGB.HueToRgb(p, q, h + 0.33333333333333331);
                    var g = GraphicsLayer.ARGB.HueToRgb(p, q, h);
                    var b = GraphicsLayer.ARGB.HueToRgb(p, q, h - 0.33333333333333331);

                    return GraphicsLayer.ARGB.FromFractional(1.0, r, g, b);
                },
                HueToRgb: function (p, q, t) {
                    if (t < 0.0) {
                        t += 1.0;
                    }
                    if (t > 1.0) {
                        t -= 1.0;
                    }
                    if (t < 0.16666666666666666) {
                        return p + (q - p) * 6.0 * t;
                    }
                    if (t < 0.5) {
                        return q;
                    }
                    if (t < 0.66666666666666663) {
                        return p + (q - p) * (0.66666666666666663 - t) * 6.0;
                    }
                    return p;
                },
                ReverseBits: function (x) {
                    var y = 0;
                    for (var i = 0; i < 32; i = (i + 1) | 0) {
                        y = (y | System.Int64.clipu32((System.Int64(x).and(System.Int64((1 << i)))).shl((((31 - Bridge.Int.mul(2, i)) | 0))))) >>> 0;
                    }

                    return y;
                }
            }
        },
        props: {
            A: 0,
            R: 0,
            G: 0,
            B: 0
        },
        ctors: {
            $ctor1: function (a, r, g, b) {
                this.$initialize();
                this.A = a;
                this.R = r;
                this.G = g;
                this.B = b;
            },
            ctor: function (r, g, b) {
                GraphicsLayer.ARGB.$ctor1.call(this, 255, r, g, b);
            }
        },
        methods: {
            toString: function () {
                return System.String.format("{0},{1},{2},{3}", Bridge.box(this.A, System.Int32), Bridge.box(this.R, System.Int32), Bridge.box(this.G, System.Int32), Bridge.box(this.B, System.Int32));
            }
        }
    });

    Bridge.define("GraphicsLayer.Box", {
        statics: {
            fields: {
                Empty: null
            },
            ctors: {
                init: function () {
                    this.Empty = new GraphicsLayer.Box.ctor(0, 0);
                }
            }
        },
        props: {
            Top: 0,
            Left: 0,
            Width: 0,
            Height: 0,
            X: {
                get: function () {
                    return this.Left;
                }
            },
            Y: {
                get: function () {
                    return this.Top;
                }
            },
            Right: {
                get: function () {
                    return this.Left + this.Width;
                }
            },
            Bottom: {
                get: function () {
                    return this.Top + this.Height;
                }
            }
        },
        ctors: {
            ctor: function (left, top) {
                this.$initialize();
                this.Left = left;
                this.Top = top;
            },
            $ctor1: function (left, top, width, height) {
                this.$initialize();
                this.Left = left;
                this.Top = top;
                this.Width = width;
                this.Height = height;
            }
        },
        methods: {
            Inflate: function (x, y) {
                this.Left -= x;
                this.Top -= y;
                this.Width += 2 * x;
                this.Height += 2 * y;
            },
            Contains$1: function (x, y) {
                return this.Left <= x && x <= this.Right && this.Top <= y && y <= this.Bottom;
            },
            Contains: function (box) {
                return this.Left <= box.Left && box.Right <= this.Right && this.Top <= box.Top && box.Bottom <= this.Bottom;
            }
        }
    });

    Bridge.define("GraphicsLayer.Font", {
        props: {
            Name: null,
            Size: 0
        },
        ctors: {
            ctor: function (name, size) {
                this.$initialize();
                this.Name = name;
                this.Size = size;
            }
        }
    });

    Bridge.define("GraphicsLayer.IProduceMouseEvents", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.IGraphics", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.IPaintable", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.MouseButton", {
        $kind: "enum",
        statics: {
            fields: {
                Left: 0,
                Middle: 1,
                Right: 2
            }
        }
    });

    Bridge.define("Graphs.Ascii85", {
        statics: {
            fields: {
                _asciiOffset: 0
            },
            ctors: {
                init: function () {
                    this._asciiOffset = 33;
                }
            }
        },
        fields: {
            
            PrefixMark: null,
            /**
             * Suffix mark that identifies an encoded ASCII85 string, traditionally '~&gt;'
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default ""
             * @type string
             */
            SuffixMark: null,
            /**
             * Maximum line length for encoded ASCII85 string; 
             set to zero for one unbroken line.
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default 0
             * @type number
             */
            LineLength: 0,
            /**
             * Add the Prefix and Suffix marks when encoding, and enforce their presence for decoding
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default false
             * @type boolean
             */
            EnforceMarks: false,
            _encodedBlock: null,
            _decodedBlock: null,
            _tuple: 0,
            _linePos: 0,
            pow85: null
        },
        ctors: {
            init: function () {
                this.PrefixMark = "";
                this.SuffixMark = "";
                this.LineLength = 0;
                this.EnforceMarks = false;
                this._encodedBlock = System.Array.init(5, 0, System.Byte);
                this._decodedBlock = System.Array.init(4, 0, System.Byte);
                this._tuple = 0;
                this._linePos = 0;
                this.pow85 = System.Array.init([
                    52200625, 
                    614125, 
                    7225, 
                    85, 
                    1
                ], System.UInt32);
            }
        },
        methods: {
            /**
             * Decodes an ASCII85 encoded string into the original binary data
             *
             * @instance
             * @public
             * @this Graphs.Ascii85
             * @memberof Graphs.Ascii85
             * @param   {string}            s    ASCII85 encoded string
             * @return  {Array.<number>}         byte array of decoded binary data
             */
            Decode: function (s) {
                var $t;
                if (this.EnforceMarks) {
                    if (!!(!System.String.startsWith(s, this.PrefixMark) | !System.String.endsWith(s, this.SuffixMark))) {
                        throw new System.Exception(System.String.concat("ASCII85 encoded data should begin with '", this.PrefixMark, "' and end with '", this.SuffixMark, "'"));
                    }
                }

                // strip prefix and suffix if present
                if (System.String.startsWith(s, this.PrefixMark)) {
                    s = s.substr(this.PrefixMark.length);
                }
                if (System.String.endsWith(s, this.SuffixMark)) {
                    s = s.substr(0, ((s.length - this.SuffixMark.length) | 0));
                }

                var ms = new (System.Collections.Generic.List$1(System.Byte))();
                var count = 0;
                var processChar = false;

                $t = Bridge.getEnumerator(s);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        switch (c) {
                            case 122: 
                                if (count !== 0) {
                                    throw new System.Exception("The character 'z' is invalid inside an ASCII85 block.");
                                }
                                this._decodedBlock[System.Array.index(0, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(1, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(2, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(3, this._decodedBlock)] = 0;
                                ms.addRange(this._decodedBlock);
                                processChar = false;
                                break;
                            case 10: 
                            case 13: 
                            case 9: 
                            case 0: 
                            case 12: 
                            case 8: 
                                processChar = false;
                                break;
                            default: 
                                if (c < 33 || c > 117) {
                                    throw new System.Exception("Bad character '" + String.fromCharCode(c) + "' found. ASCII85 only allows characters '!' to 'u'.");
                                }
                                processChar = true;
                                break;
                        }

                        if (processChar) {
                            this._tuple = (this._tuple + (Bridge.Int.umul((((((c - Graphs.Ascii85._asciiOffset) | 0))) >>> 0), this.pow85[System.Array.index(count, this.pow85)]))) >>> 0;
                            count = (count + 1) | 0;
                            if (count === this._encodedBlock.length) {
                                this.DecodeBlock();
                                ms.addRange(this._decodedBlock);
                                this._tuple = 0;
                                count = 0;
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                // if we have some bytes left over at the end..
                if (count !== 0) {
                    if (count === 1) {
                        throw new System.Exception("The last block of ASCII85 data cannot be a single byte.");
                    }
                    count = (count - 1) | 0;
                    this._tuple = (this._tuple + this.pow85[System.Array.index(count, this.pow85)]) >>> 0;
                    this.DecodeBlock$1(count);
                    for (var i = 0; i < count; i = (i + 1) | 0) {
                        ms.add(this._decodedBlock[System.Array.index(i, this._decodedBlock)]);
                    }
                }

                return ms.toArray();
            },
            /**
             * Encodes binary data into a plaintext ASCII85 format string
             *
             * @instance
             * @public
             * @this Graphs.Ascii85
             * @memberof Graphs.Ascii85
             * @param   {Array.<number>}    ba    binary data to encode
             * @return  {string}                  ASCII85 encoded string
             */
            Encode: function (ba) {
                var $t;
                var sb = new System.Text.StringBuilder("", Bridge.Int.mul(ba.length, (((Bridge.Int.div(this._encodedBlock.length, this._decodedBlock.length)) | 0))));
                this._linePos = 0;

                if (this.EnforceMarks) {
                    this.AppendString(sb, this.PrefixMark);
                }

                var count = 0;
                this._tuple = 0;
                $t = Bridge.getEnumerator(ba);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (count >= ((this._decodedBlock.length - 1) | 0)) {
                            this._tuple = (this._tuple | b) >>> 0;
                            if (this._tuple === 0) {
                                this.AppendChar(sb, 122);
                            } else {
                                this.EncodeBlock$1(sb);
                            }
                            this._tuple = 0;
                            count = 0;
                        } else {
                            this._tuple = (this._tuple | ((b << (((24 - (Bridge.Int.mul(count, 8))) | 0))) >>> 0)) >>> 0;
                            count = (count + 1) | 0;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                // if we have some bytes left over at the end..
                if (count > 0) {
                    this.EncodeBlock(((count + 1) | 0), sb);
                }

                if (this.EnforceMarks) {
                    this.AppendString(sb, this.SuffixMark);
                }
                return sb.toString();
            },
            EncodeBlock$1: function (sb) {
                this.EncodeBlock(this._encodedBlock.length, sb);
            },
            EncodeBlock: function (count, sb) {
                for (var i = (this._encodedBlock.length - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    this._encodedBlock[System.Array.index(i, this._encodedBlock)] = ((((this._tuple % 85) + Graphs.Ascii85._asciiOffset) >>> 0)) & 255;
                    this._tuple = (Bridge.Int.div(this._tuple, 85)) >>> 0;
                }

                for (var i1 = 0; i1 < count; i1 = (i1 + 1) | 0) {
                    var c = this._encodedBlock[System.Array.index(i1, this._encodedBlock)];
                    this.AppendChar(sb, c);
                }

            },
            DecodeBlock: function () {
                this.DecodeBlock$1(this._decodedBlock.length);
            },
            DecodeBlock$1: function (bytes) {
                for (var i = 0; i < bytes; i = (i + 1) | 0) {
                    this._decodedBlock[System.Array.index(i, this._decodedBlock)] = (this._tuple >>> ((24 - (Bridge.Int.mul(i, 8))) | 0)) & 255;
                }
            },
            AppendString: function (sb, s) {
                if (this.LineLength > 0 && (((this._linePos + s.length) | 0) > this.LineLength)) {
                    this._linePos = 0;
                    sb.append(String.fromCharCode(13));
                    sb.append(String.fromCharCode(10));
                } else {
                    this._linePos = (this._linePos + s.length) | 0;
                }
                sb.append(s);
            },
            AppendChar: function (sb, c) {
                sb.append(String.fromCharCode(c));
                this._linePos = (this._linePos + 1) | 0;
                if (this.LineLength > 0 && (this._linePos >= this.LineLength)) {
                    this._linePos = 0;
                    sb.append(String.fromCharCode(13));
                    sb.append(String.fromCharCode(10));
                }
            }
        }
    });

    Bridge.define("Graphs.IHittable", {
        $kind: "interface"
    });

    Bridge.define("Graphs.Edge.Orientations", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                Forward: 1,
                Backward: 2
            }
        }
    });

    Bridge.define("Graphs.GraphCanvas.HistoricalGraph", {
        props: {
            Graph: null,
            ViewScale: 0,
            Zoom: 0
        }
    });

    Bridge.define("Graphs.GraphCanvas.States", {
        $kind: "enum",
        statics: {
            fields: {
                Idle: 0,
                DraggingVertex: 1,
                DraggingSelectionRegion: 2,
                DraggingSelectedVertices: 3
            }
        }
    });

    Bridge.define("Graphs.PolygonContainer", {
        fields: {
            _dots: null,
            _boundingBox: null
        },
        ctors: {
            ctor: function (dots) {
                this.$initialize();
                this._dots = dots;

                var minx = System.Linq.Enumerable.from(this._dots).min($asm.$.Graphs.PolygonContainer.f1);
                var maxx = System.Linq.Enumerable.from(this._dots).max($asm.$.Graphs.PolygonContainer.f1);
                var miny = System.Linq.Enumerable.from(this._dots).min($asm.$.Graphs.PolygonContainer.f2);
                var maxy = System.Linq.Enumerable.from(this._dots).max($asm.$.Graphs.PolygonContainer.f2);

                this._boundingBox = new GraphicsLayer.Box.$ctor1(minx, miny, maxx - minx, maxy - miny);
            }
        },
        methods: {
            Contains: function (dot) {
                if (!this._boundingBox.Contains(dot)) {
                    return false;
                }

                var contains = false;
                var j = (System.Array.getCount(this._dots, GraphicsLayer.Box) - 1) | 0;

                for (var i = 0; i < System.Array.getCount(this._dots, GraphicsLayer.Box); i = (i + 1) | 0) {
                    if ((System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y <= dot.Y && dot.Y < System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y || System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y <= dot.Y && dot.Y < System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) && dot.X < (System.Array.getItem(this._dots, j, GraphicsLayer.Box).X - System.Array.getItem(this._dots, i, GraphicsLayer.Box).X) * (dot.Y - System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) / (System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y - System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) + System.Array.getItem(this._dots, i, GraphicsLayer.Box).X) {
                        contains = !contains;
                    }

                    j = i;
                }

                return contains;
            }
        }
    });

    Bridge.ns("Graphs.PolygonContainer", $asm.$);

    Bridge.apply($asm.$.Graphs.PolygonContainer, {
        f1: function (dot) {
            return dot.X;
        },
        f2: function (dot) {
            return dot.Y;
        }
    });

    Bridge.define("Graphs.SerializationEdge", {
        fields: {
            IndexV1: 0,
            IndexV2: 0,
            Orientation: 0,
            Thickness: 0,
            Multiplicity: 0,
            Style: null,
            Label: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (e, vertices) {
                this.$initialize();                var $t, $t1;

                this.IndexV1 = vertices.indexOf(e.V1);
                this.IndexV2 = vertices.indexOf(e.V2);
                this.Orientation = e.Orientation;
                this.Thickness = e.Thickness;
                this.Multiplicity = e.Multiplicity;
                this.Style = ($t = e.Style, $t != null ? $t : "");
                this.Label = ($t1 = e.Label, $t1 != null ? $t1 : "");

                if (Bridge.referenceEquals(this.Style, "")) {
                    if (this.Orientation === Graphs.Edge.Orientations.Forward) {
                        this.Style = (e.Style = "post", "post");
                    } else {
                        if (this.Orientation === Graphs.Edge.Orientations.Backward) {
                            this.Style = (e.Style = "pre", "pre");
                        }
                    }
                }
        }
    }
    });

    Bridge.define("Graphs.SerializationGraph", {
        fields: {
            Vertices: null,
            Edges: null,
            Name: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (g) {
                this.$initialize();
                this.Vertices = System.Linq.Enumerable.from(g.Vertices).select($asm.$.Graphs.SerializationGraph.f1).toList(Graphs.SerializationVertex);
                this.Edges = System.Linq.Enumerable.from(g.Edges).select(function (e) {
                        return new Graphs.SerializationEdge.$ctor1(e, g.Vertices);
                    }).toList(Graphs.SerializationEdge);
                this.Name = g.Name;
            }
        }
    });

    Bridge.ns("Graphs.SerializationGraph", $asm.$);

    Bridge.apply($asm.$.Graphs.SerializationGraph, {
        f1: function (v) {
            return new Graphs.SerializationVertex.$ctor1(v);
        }
    });

    Bridge.define("Graphs.SerializationVector", {
        fields: {
            X: 0,
            Y: 0
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (v) {
                this.$initialize();
                this.X = v.X;
                this.Y = v.Y;
            }
        }
    });

    Bridge.define("Graphs.SerializationVertex", {
        fields: {
            Location: null,
            Label: null,
            Padding: 0,
            Style: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (v) {
                this.$initialize();                var $t;

                this.Location = new Graphs.SerializationVector.$ctor1(v.Location);
                this.Label = v.Label;
                this.Padding = v.Padding;
                this.Style = ($t = v.Style, $t != null ? $t : "");
        }
    }
    });

    Bridge.define("Graphs.Utility", {
        statics: {
            methods: {
                RotateAroundPoint: function (v, center, angle) {
                    var x = center.X + (v.X - center.X) * Math.cos(angle) - (v.Y - center.Y) * Math.sin(angle);
                    var y = center.Y + (v.X - center.X) * Math.sin(angle) + (v.Y - center.Y) * Math.cos(angle);

                    return new GraphicsLayer.Box.ctor(x, y);
                },
                RotateAroundPoint$1: function (v, center, angle) {
                    var x = center.X + (v.X - center.X) * Math.cos(angle) - (v.Y - center.Y) * Math.sin(angle);
                    var y = center.Y + (v.X - center.X) * Math.sin(angle) + (v.Y - center.Y) * Math.cos(angle);

                    return new Graphs.Vector(x, y);
                },
                PolarToRectangular: function (r, theta) {
                    return new Graphs.Vector(r * Math.cos(theta), r * Math.sin(theta));
                },
                HaveIntersection: function (start1, end1, start2, end2) {
                    var denom = ((end1.X - start1.X) * (end2.Y - start2.Y)) - ((end1.Y - start1.Y) * (end2.X - start2.X));

                    if (denom === 0) {
                        return false;
                    }

                    var numer = ((start1.Y - start2.Y) * (end2.X - start2.X)) - ((start1.X - start2.X) * (end2.Y - start2.Y));
                    var r = numer / denom;
                    var numer2 = ((start1.Y - start2.Y) * (end1.X - start1.X)) - ((start1.X - start2.X) * (end1.Y - start1.Y));
                    var s = numer2 / denom;

                    if (r < 0 || r > 1 || s < 0 || s > 1) {
                        return false;
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("Graphs.Vector", {
        statics: {
            methods: {
                op_Addition: function (a, b) {
                    return new Graphs.Vector(a._X + b._X, a._Y + b._Y);
                },
                op_UnaryNegation: function (a) {
                    return new Graphs.Vector(-a._X, -a._Y);
                },
                op_Subtraction: function (a, b) {
                    return new Graphs.Vector(a._X - b._X, a._Y - b._Y);
                },
                op_Multiply: function (a, b) {
                    return new Graphs.Vector(a._X * b, a._Y * b);
                },
                op_Multiply$1: function (a, b) {
                    return new Graphs.Vector(a._X * b, a._Y * b);
                },
                op_Equality: function (a, b) {
                    return a.Equals(b);
                },
                op_Inequality: function (a, b) {
                    return !(Graphs.Vector.op_Equality(a, b));
                },
                op_Implicit: function (v) {
                    return new GraphicsLayer.Box.ctor(v.X, v.Y);
                }
            }
        },
        fields: {
            _X: 0,
            _Y: 0
        },
        props: {
            Length: {
                get: function () {
                    return Math.sqrt(this._X * this._X + this._Y * this._Y);
                }
            },
            X: {
                get: function () {
                    return this._X;
                },
                set: function (value) {
                    this._X = value;
                }
            },
            Y: {
                get: function () {
                    return this._Y;
                },
                set: function (value) {
                    this._Y = value;
                }
            }
        },
        ctors: {
            ctor: function (x, y) {
                this.$initialize();
                this._X = x;
                this._Y = y;
            }
        },
        methods: {
            Normalize: function () {
                var length = this.Length;

                this._X = this._X / length;
                this._Y = this._Y / length;

                return length > 0;
            },
            Dot: function (vector) {
                return this._X * vector._X + this._Y * vector._Y;
            },
            Distance: function (vector) {
                return Math.sqrt(Math.pow(vector._X - this._X, 2) + Math.pow(vector._Y - this._Y, 2));
            },
            equals: function (obj) {
                if (!(Bridge.is(obj, Graphs.Vector))) {
                    return false;
                }

                var v = Bridge.cast(obj, Graphs.Vector);

                return this.Equals(v);
            },
            Equals: function (v) {
                return this._X === v._X && this._Y === v._Y;
            },
            getHashCode: function () {
                return Bridge.getHashCode(this.toString());
            },
            toString: function () {
                return "(" + System.Double.format(this._X) + ", " + System.Double.format(this._Y) + ")";
            }
        }
    });

    Bridge.define("GraphsCore.CompactSerializer", {
        statics: {
            fields: {
                Scale: 0,
                Prefix: null,
                ASCII: null
            },
            ctors: {
                init: function () {
                    this.Scale = 10000;
                    this.Prefix = "webgraph:";
                    this.ASCII = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";
                }
            },
            methods: {
                LooksLikeASerializedGraph: function (s) {
                    return !System.String.isNullOrEmpty(s) && System.String.startsWith(s, GraphsCore.CompactSerializer.Prefix);
                },
                Serialize: function (g) {
                    var bytes = GraphsCore.CompactSerializer.SerializeToByteArray(g);
                    var compressed = QuickLZ.compress(bytes);
                    var Ascii85 = new Graphs.Ascii85();
                    return System.String.concat(GraphsCore.CompactSerializer.Prefix, Ascii85.Encode(compressed));
                },
                SerializeToByteArray: function (g) {
                    var $t, $t1, $t2, $t3, $t4;
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    bytes.add(((g.Vertices.Count) & 255));
                    $t = Bridge.getEnumerator(g.Vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.X * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.Y * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.Padding * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(v.Label));
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(($t1 = v.Style, $t1 != null ? $t1 : "")));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    bytes.addRange(System.BitConverter.getBytes$7(((g.Edges.Count) & 65535)));
                    $t2 = Bridge.getEnumerator(g.Edges);
                    try {
                        while ($t2.moveNext()) {
                            var e = $t2.Current;
                            bytes.add(((g.Vertices.indexOf(e.V1)) & 255));
                            bytes.add(((g.Vertices.indexOf(e.V2)) & 255));
                            bytes.add(((e.Multiplicity) & 255));
                            bytes.add(((e.Orientation) & 255));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(e.Thickness * 100, 0, 6))));

                            var label = ($t3 = e.Label, $t3 != null ? $t3 : "");
                            var hackedStyle = System.String.concat((($t4 = e.Style, $t4 != null ? $t4 : "")), "~~|~|~~", label);
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(hackedStyle));
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }
                    return bytes.toArray();
                },
                Deserialize: function (s) {
                    try {
                        var Ascii85 = new Graphs.Ascii85();
                        var compressed = Ascii85.Decode(s.substr(GraphsCore.CompactSerializer.Prefix.length));
                        var bytes = QuickLZ.decompress(compressed);
                        return GraphsCore.CompactSerializer.DeserializeFromByteArray(bytes);
                    }
                    catch (ex) {
                        ex = System.Exception.create(ex);
                        System.Console.WriteLine(ex.Message);
                    }

                    return null;
                },
                DeserializeFromByteArray: function (bytes) {
                    var $t;
                    var offset = { v : 0 };
                    var n = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                    var vertices = new (System.Collections.Generic.List$1(Graphs.Vertex))();
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        var x = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var y = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var padding = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var label = GraphsCore.CompactSerializer.ReadString(bytes, offset);
                        var style = GraphsCore.CompactSerializer.ReadString(bytes, offset);
                        vertices.add(($t = new Graphs.Vertex.$ctor3(x, y), $t.Padding = padding, $t.Label = label, $t.Style = style, $t));
                    }

                    var e = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset);
                    var edges = new (System.Collections.Generic.List$1(Graphs.Edge))();
                    for (var i1 = 0; i1 < e; i1 = (i1 + 1) | 0) {
                        var v1 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var v2 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var multiplicity = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var orientation = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var thickness = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / 100;
                        var style1 = GraphsCore.CompactSerializer.ReadString(bytes, offset);

                        edges.add(($t = new Graphs.Edge.$ctor1(vertices.getItem(v1), vertices.getItem(v2)), $t.Multiplicity = multiplicity, $t.Orientation = orientation, $t.Thickness = thickness, $t.Style = style1, $t));
                    }

                    return new Graphs.Graph.$ctor3(vertices, edges);
                },
                ReadByte: function (bytes, offset) {
                    return bytes[System.Array.index(Bridge.identity(offset.v, (offset.v = (offset.v + 1) | 0)), bytes)];
                },
                ReadUInt16: function (bytes, offset) {
                    var x = System.BitConverter.toUInt16(bytes, offset.v);
                    offset.v = (offset.v + 2) | 0;
                    return x;
                },
                ReadUInt32: function (bytes, offset) {
                    var x = System.BitConverter.toUInt32(bytes, offset.v);
                    offset.v = (offset.v + 4) | 0;
                    return x;
                },
                Get7BitEncodedInt: function (value) {
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    var num = value >>> 0;
                    while (num >= 128) {
                        bytes.add(((((num | 128) >>> 0)) & 255));
                        num = num >>> 7;
                    }
                    bytes.add((num & 255));

                    return bytes.toArray();
                },
                Read7BitEncodedInt: function (bytes, offset) {
                    var num1 = 0;
                    var num2 = 0;
                    while (num2 !== 35) {
                        var num3 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        num1 = num1 | ((num3 & 127) << num2);
                        num2 = (num2 + 7) | 0;
                        if ((num3 & 128) === 0) {
                            return num1;
                        }
                    }
                    throw new System.FormatException("bad 7-bit encoded int");
                },
                GetBytes: function (s) {
                    var $t, $t1;
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    $t = Bridge.getEnumerator(System.String.toCharArray(s, 0, s.length));
                    try {
                        while ($t.moveNext()) {
                            var c = $t.Current;
                            bytes.addRange(System.BitConverter.getBytes$1(c));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(Bridge.cast(GraphsCore.CompactSerializer.Get7BitEncodedInt(bytes.Count), System.Collections.Generic.IEnumerable$1(System.Byte))).reverse());
                    try {
                        while ($t1.moveNext()) {
                            var b = $t1.Current;
                            bytes.insert(0, b);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return bytes.toArray();
                },
                ReadString: function (bytes, offset) {
                    var length = GraphsCore.CompactSerializer.Read7BitEncodedInt(bytes, offset);

                    var s = "";
                    while (Bridge.identity(length, (length = (length - 1) | 0)) > 0) {
                        s = System.String.concat(s, String.fromCharCode(GraphsCore.CompactSerializer.ASCII.charCodeAt(((bytes[System.Array.index(Bridge.identity(offset.v, (offset.v = (offset.v + 1) | 0)), bytes)] - 32) | 0))));
                    }
                    return s;
                }
            }
        }
    });

    Bridge.define("GraphsCore.GraphIO", {
        statics: {
            fields: {
                ASCII: null
            },
            ctors: {
                init: function () {
                    this.ASCII = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";
                }
            },
            methods: {
                ToAdjacencyMatrix: function (edgeWeights, isDirected) {
                    var $t;
                    if (isDirected === void 0) { isDirected = false; }
                    var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                    var m = System.Array.create(0, null, System.Char, n, n);

                    var k = 0;
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                            var ew = edgeWeights.getItem(k);
                            if (isDirected) {
                                m.set([i, j], (m.set([j, i], 48), 48));

                                if (ew > 0) {
                                    m.set([i, j], 49);
                                } else {
                                    if (ew < 0) {
                                        m.set([j, i], 49);
                                    }
                                }
                            } else {
                                m.set([i, j], ($t = ew !== 0 ? 49 : 48, m.set([j, i], $t), $t));
                            }

                            k = (k + 1) | 0;
                        }
                    }

                    for (var i1 = 0; i1 < n; i1 = (i1 + 1) | 0) {
                        m.set([i1, i1], 48);
                    }

                    var s = "";
                    for (var i2 = 0; i2 < n; i2 = (i2 + 1) | 0) {
                        for (var j1 = 0; j1 < n; j1 = (j1 + 1) | 0) {
                            s = System.String.concat(s, String.fromCharCode(m.get([i2, j1])));
                        }
                        s = System.String.concat(s, '\n');
                    }

                    return s;
                },
                ToGraph6: function (g) {
                    return GraphsCore.GraphIO.ToGraph6$1(g.GetEdgeWeights());
                },
                ToGraph6$1: function (w) {
                    var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, w.Count)) | 0))) / 2);
                    if (n > 62) {
                        throw new System.NotImplementedException("i have yet to write/read graph6 files with more than 62 vertices.");
                    }

                    var p = System.Linq.Enumerable.from(GraphsCore.GraphIO.RowToColumnPermutation(n)).toList(System.Int32);
                    var wp = new (System.Collections.Generic.List$1(System.Int32))(w.Count);

                    for (var i = 0; i < p.Count; i = (i + 1) | 0) {
                        wp.add(Math.abs(w.getItem(p.indexOf(i))));
                    }

                    while (wp.Count % 6 !== 0) {
                        wp.add(0);
                    }

                    var bb = System.Linq.Enumerable.from(MoreLinq.MoreEnumerable.Prepend(System.Byte, MoreLinq.MoreEnumerable.Batch(System.Int32, System.Byte, wp, 6, $asm.$.GraphsCore.GraphIO.f2), ((((n + 63) | 0)) & 255))).toArray();
                    return Bridge.toArray(System.Linq.Enumerable.from(bb).select($asm.$.GraphsCore.GraphIO.f3)).join("");
                },
                RowToColumnPermutation: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            j,
                            y,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            x = 0;
                                                j = 0;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( j < ((n - 1) | 0) ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 9;
                                            continue;
                                        }
                                        case 2: {
                                            y = x;
                                                i = 0;
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ( i < ((((n - 1) | 0) - j) | 0) ) {
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 7;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = y;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            y = (y + (((((1 + j) | 0) + i) | 0))) | 0;
                                            $step = 6;
                                            continue;
                                        }
                                        case 6: {
                                            i = (i + 1) | 0;
                                            $step = 3;
                                            continue;
                                        }
                                        case 7: {
                                            x = (x + (((2 + j) | 0))) | 0;
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            j = (j + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 9: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                Low6: function (b) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (b) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 5;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i >= 0 ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = (b & (1 << i)) >> i;
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            i = (i - 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("GraphsCore.GraphIO", $asm.$);

    Bridge.apply($asm.$.GraphsCore.GraphIO, {
        f1: function (pair) {
            return pair.value << pair.key;
        },
        f2: function (bits) {
            return ((((System.Linq.Enumerable.from(MoreLinq.MoreEnumerable.Index(System.Int32, System.Linq.Enumerable.from(bits).reverse())).select($asm.$.GraphsCore.GraphIO.f1).sum() + 63) | 0)) & 255);
        },
        f3: function (b) {
            return String.fromCharCode(GraphsCore.GraphIO.ASCII.charCodeAt(((b - 32) | 0)));
        }
    });

    /** @namespace System */

    /**
     * @memberof System
     * @callback System.Func
     * @param   {System.Collections.Generic.IEnumerable$1}    arg
     * @return  {TResult}
     */

    Bridge.define("MoreLinq.MoreEnumerable", {
        statics: {
            methods: {
                /**
                 * Batches the source sequence into sized buckets.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The source sequence.
                 * @param   {number}                                      size       Size of buckets.
                 * @return  {System.Collections.Generic.IEnumerable$1}               A sequence of equally sized buckets containing elements of the source collection.
                 */
                Batch$1: function (TSource, source, size) {
                    return MoreLinq.MoreEnumerable.Batch(TSource, System.Collections.Generic.IEnumerable$1(TSource), source, size, $asm.$.MoreLinq.MoreEnumerable.f1);
                },
                /**
                 * Batches the source sequence into sized buckets and applies a projection to each bucket.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource           Type of elements in <b>TSource</b> sequence.
                 * @param   {Function}                                    TResult           Type of result returned by <b>TResult</b>.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source            The source sequence.
                 * @param   {number}                                      size              Size of buckets.
                 * @param   {System.Func}                                 resultSelector    The projection to apply to each bucket.
                 * @return  {System.Collections.Generic.IEnumerable$1}                      A sequence of projections on equally sized buckets containing elements of the source collection.
                 */
                Batch: function (TSource, TResult, source, size, resultSelector) {
                    return MoreLinq.MoreEnumerable.BatchImpl(TSource, TResult, source, size, resultSelector);
                },
                BatchImpl: function (TSource, TResult, source, size, resultSelector) {
                    return new (Bridge.GeneratorEnumerable$1(TResult))(Bridge.fn.bind(this, function (TSource, TResult, source, size, resultSelector) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            bucket,
                            count,
                            $t,
                            item,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(TResult))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            bucket = null;
                                                count = 0;

                                                $t = Bridge.getEnumerator(source, TSource);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    item = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            if (bucket == null) {
                                                    bucket = System.Array.init(size, function (){
                                                        return Bridge.getDefaultValue(TSource);
                                                    }, TSource);
                                                }

                                                bucket[System.Array.index(Bridge.identity(count, (count = (count + 1) | 0)), bucket)] = item;

                                                // The bucket is fully buffered before it's yielded
                                                if (count !== size) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                // Select is necessary so bucket contents are streamed too
                                                $enumerator.current = resultSelector(System.Linq.Enumerable.from(bucket).select($asm.$.MoreLinq.MoreEnumerable.f1));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            bucket = null;
                                                count = 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            // Return the last bucket with all remaining elements
                                                if (bucket != null && count > 0) {
                                                    $step = 5;
                                                    continue;
                                                } 
                                                $step = 7;
                                                continue;
                                        }
                                        case 5: {
                                            $enumerator.current = resultSelector(System.Linq.Enumerable.from(bucket).take(count));
                                                $step = 6;
                                                return true;
                                        }
                                        case 6: {
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                /**
                 * Returns a sequence of {@link } 
                 where the key is the zero-based index of the value in the source 
                 sequence.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The source sequence.
                 * @return  {System.Collections.Generic.IEnumerable$1}               A sequence of {@link }.
                 */
                Index: function (TSource, source) {
                    return MoreLinq.MoreEnumerable.Index$1(TSource, source, 0);
                },
                /**
                 * Returns a sequence of {@link } 
                 where the key is the index of the value in the source sequence.
                 An additional parameter specifies the starting index.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource       Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source        The source sequence.
                 * @param   {number}                                      startIndex
                 * @return  {System.Collections.Generic.IEnumerable$1}                  A sequence of {@link }.
                 */
                Index$1: function (TSource, source, startIndex) {
                    return System.Linq.Enumerable.from(source).select(function (item, index) {
                            return new (System.Collections.Generic.KeyValuePair$2(System.Int32,TSource))(((startIndex + index) | 0), item);
                        });
                },
                /**
                 * Prepends a single value to a sequence.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    The type of the elements of <b>TSource</b>.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The sequence to prepend to.
                 * @param   {TSource}                                     value      The value to prepend.
                 * @return  {System.Collections.Generic.IEnumerable$1}               Returns a sequence where a value is prepended to it.
                 */
                Prepend: function (TSource, source, value) {
                    if (source == null) {
                        throw new System.ArgumentNullException("source");
                    }
                    return System.Linq.Enumerable.from(System.Linq.Enumerable.repeat(value, 1)).concat(source);
                }
            }
        }
    });

    Bridge.ns("MoreLinq.MoreEnumerable", $asm.$);

    Bridge.apply($asm.$.MoreLinq.MoreEnumerable, {
        f1: function (x) {
            return x;
        }
    });

    Bridge.define("QuickLZ", {
        statics: {
            fields: {
                QLZ_VERSION_MAJOR: 0,
                QLZ_VERSION_MINOR: 0,
                QLZ_VERSION_REVISION: 0,
                QLZ_STREAMING_BUFFER: 0,
                QLZ_MEMORY_SAFE: 0,
                HASH_VALUES: 0,
                MINOFFSET: 0,
                UNCONDITIONAL_MATCHLEN: 0,
                UNCOMPRESSED_END: 0,
                CWORD_LEN: 0,
                DEFAULT_HEADERLEN: 0,
                QLZ_POINTERS_1: 0,
                QLZ_POINTERS_3: 0
            },
            ctors: {
                init: function () {
                    this.QLZ_VERSION_MAJOR = 1;
                    this.QLZ_VERSION_MINOR = 5;
                    this.QLZ_VERSION_REVISION = 0;
                    this.QLZ_STREAMING_BUFFER = 0;
                    this.QLZ_MEMORY_SAFE = 0;
                    this.HASH_VALUES = 4096;
                    this.MINOFFSET = 2;
                    this.UNCONDITIONAL_MATCHLEN = 6;
                    this.UNCOMPRESSED_END = 4;
                    this.CWORD_LEN = 4;
                    this.DEFAULT_HEADERLEN = 9;
                    this.QLZ_POINTERS_1 = 1;
                    this.QLZ_POINTERS_3 = 16;
                }
            },
            methods: {
                headerLen: function (source) {
                    return ((source[System.Array.index(0, source)] & 2) === 2) ? 9 : 3;
                },
                sizeDecompressed: function (source) {
                    if (QuickLZ.headerLen(source) === 9) {
                        return source[System.Array.index(5, source)] | (source[System.Array.index(6, source)] << 8) | (source[System.Array.index(7, source)] << 16) | (source[System.Array.index(8, source)] << 24);
                    } else {
                        return source[System.Array.index(2, source)];
                    }
                },
                sizeCompressed: function (source) {
                    if (QuickLZ.headerLen(source) === 9) {
                        return source[System.Array.index(1, source)] | (source[System.Array.index(2, source)] << 8) | (source[System.Array.index(3, source)] << 16) | (source[System.Array.index(4, source)] << 24);
                    } else {
                        return source[System.Array.index(1, source)];
                    }
                },
                write_header: function (dst, level, compressible, size_compressed, size_decompressed) {
                    dst[System.Array.index(0, dst)] = (2 | (compressible ? 1 : 0)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | ((level << 2) & 255)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | (64)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | (0)) & 255;
                    QuickLZ.fast_write(dst, 1, size_decompressed, 4);
                    QuickLZ.fast_write(dst, 5, size_compressed, 4);
                },
                compress: function (source, level) {
                    var $t;
                    if (level === void 0) { level = 1; }
                    var src = 0;
                    var dst = 13;
                    var cword_val = 2147483648;
                    var cword_ptr = QuickLZ.DEFAULT_HEADERLEN;
                    var destination = System.Array.init(((source.length + 400) | 0), 0, System.Byte);
                    var hashtable;
                    var cachetable = System.Array.init(QuickLZ.HASH_VALUES, 0, System.Int32);
                    var hash_counter = System.Array.init(QuickLZ.HASH_VALUES, 0, System.Byte);
                    var d2;
                    var fetch = 0;
                    var last_matchstart = (((((((source.length - QuickLZ.UNCONDITIONAL_MATCHLEN) | 0) - QuickLZ.UNCOMPRESSED_END) | 0) - 1) | 0));
                    var lits = 0;

                    if (level !== 1 && level !== 3) {
                        throw new System.ArgumentException("C# version only supports level 1 and 3");
                    }

                    if (level === 1) {
                        hashtable = System.Array.create(0, null, System.Int32, 4096, 1);
                    } else {
                        hashtable = System.Array.create(0, null, System.Int32, 4096, 16);
                    }

                    if (source.length === 0) {
                        return System.Array.init(0, 0, System.Byte);
                    }

                    if (src <= last_matchstart) {
                        fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                    }

                    while (src <= last_matchstart) {
                        if ((((cword_val & 1) >>> 0)) === 1) {
                            if (src > source.length >> 1 && dst > ((src - (src >> 5)) | 0)) {
                                d2 = System.Array.init(((source.length + QuickLZ.DEFAULT_HEADERLEN) | 0), 0, System.Byte);
                                QuickLZ.write_header(d2, level, false, source.length, ((source.length + QuickLZ.DEFAULT_HEADERLEN) | 0));
                                System.Array.copy(source, 0, d2, QuickLZ.DEFAULT_HEADERLEN, source.length);
                                return d2;
                            }

                            QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), 4);
                            cword_ptr = dst;
                            dst = (dst + QuickLZ.CWORD_LEN) | 0;
                            cword_val = 2147483648;
                        }

                        if (level === 1) {
                            var hash = ((fetch >> 12) ^ fetch) & (4095);
                            var o = hashtable.get([hash, 0]);
                            var cache = cachetable[System.Array.index(hash, cachetable)] ^ fetch;
                            cachetable[System.Array.index(hash, cachetable)] = fetch;
                            hashtable.set([hash, 0], src);

                            if (cache === 0 && hash_counter[System.Array.index(hash, hash_counter)] !== 0 && (((src - o) | 0) > QuickLZ.MINOFFSET || (src === ((o + 1) | 0) && lits >= 3 && src > 3 && source[System.Array.index(src, source)] === source[System.Array.index(((src - 3) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src - 2) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src - 1) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src + 1) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src + 2) | 0), source)]))) {
                                cword_val = ((((cword_val >>> 1) | 2147483648) >>> 0));
                                if (source[System.Array.index(((o + 3) | 0), source)] !== source[System.Array.index(((src + 3) | 0), source)]) {
                                    var f = 1 | (hash << 4);
                                    destination[System.Array.index(((dst + 0) | 0), destination)] = (f >> 0) & 255;
                                    destination[System.Array.index(((dst + 1) | 0), destination)] = (f >> 8) & 255;
                                    src = (src + 3) | 0;
                                    dst = (dst + 2) | 0;
                                } else {
                                    var old_src = src;
                                    var remaining = ((((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)) > 255 ? 255 : (((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)));

                                    src = (src + 4) | 0;
                                    if (source[System.Array.index(((((o + src) | 0) - old_src) | 0), source)] === source[System.Array.index(src, source)]) {
                                        src = (src + 1) | 0;
                                        if (source[System.Array.index(((((o + src) | 0) - old_src) | 0), source)] === source[System.Array.index(src, source)]) {
                                            src = (src + 1) | 0;
                                            while (source[System.Array.index(((o + (((src - old_src) | 0))) | 0), source)] === source[System.Array.index(src, source)] && (((src - old_src) | 0)) < remaining) {
                                                src = (src + 1) | 0;
                                            }
                                        }
                                    }

                                    var matchlen = (src - old_src) | 0;

                                    hash = hash << 4;
                                    if (matchlen < 18) {
                                        var f1 = (hash | (((matchlen - 2) | 0)));
                                        destination[System.Array.index(((dst + 0) | 0), destination)] = (f1 >> 0) & 255;
                                        destination[System.Array.index(((dst + 1) | 0), destination)] = (f1 >> 8) & 255;
                                        dst = (dst + 2) | 0;
                                    } else {
                                        QuickLZ.fast_write(destination, dst, hash | (matchlen << 16), 3);
                                        dst = (dst + 3) | 0;
                                    }
                                }
                                fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                                lits = 0;
                            } else {
                                lits = (lits + 1) | 0;
                                hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                cword_val = (cword_val >>> 1);
                                src = (src + 1) | 0;
                                dst = (dst + 1) | 0;
                                fetch = ((fetch >> 8) & 65535) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                            }

                        } else {
                            fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);

                            var o1, offset2;
                            var matchlen1, k, m, best_k = 0;
                            var c;
                            var remaining1 = ((((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)) > 255 ? 255 : (((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)));
                            var hash1 = ((fetch >> 12) ^ fetch) & (4095);

                            c = hash_counter[System.Array.index(hash1, hash_counter)];
                            matchlen1 = 0;
                            offset2 = 0;
                            for (k = 0; k < QuickLZ.QLZ_POINTERS_3 && c > k; k = (k + 1) | 0) {
                                o1 = hashtable.get([hash1, k]);
                                if ((fetch & 255) === source[System.Array.index(o1, source)] && (((fetch >> 8)) & 255) === source[System.Array.index(((o1 + 1) | 0), source)] && (((fetch >> 16)) & 255) === source[System.Array.index(((o1 + 2) | 0), source)] && o1 < ((src - QuickLZ.MINOFFSET) | 0)) {
                                    m = 3;
                                    while (source[System.Array.index(((o1 + m) | 0), source)] === source[System.Array.index(((src + m) | 0), source)] && m < remaining1) {
                                        m = (m + 1) | 0;
                                    }
                                    if ((m > matchlen1) || (m === matchlen1 && o1 > offset2)) {
                                        offset2 = o1;
                                        matchlen1 = m;
                                        best_k = k;
                                    }
                                }
                            }
                            o1 = offset2;
                            hashtable.set([hash1, c & (15)], src);
                            c = (c + 1) & 255;
                            hash_counter[System.Array.index(hash1, hash_counter)] = c;

                            if (matchlen1 >= 3 && ((src - o1) | 0) < 131071) {
                                var offset = (src - o1) | 0;

                                for (var u = 1; u < matchlen1; u = (u + 1) | 0) {
                                    fetch = source[System.Array.index(((src + u) | 0), source)] | (source[System.Array.index(((((src + u) | 0) + 1) | 0), source)] << 8) | (source[System.Array.index(((((src + u) | 0) + 2) | 0), source)] << 16);
                                    hash1 = ((fetch >> 12) ^ fetch) & (4095);
                                    c = Bridge.identity(hash_counter[System.Array.index(hash1, hash_counter)], ($t = (hash_counter[System.Array.index(hash1, hash_counter)] + 1) & 255, hash_counter[System.Array.index(hash1, hash_counter)] = $t, $t));
                                    hashtable.set([hash1, c & (15)], (src + u) | 0);
                                }

                                src = (src + matchlen1) | 0;
                                cword_val = ((((cword_val >>> 1) | 2147483648) >>> 0));

                                if (matchlen1 === 3 && offset <= 63) {
                                    QuickLZ.fast_write(destination, dst, offset << 2, 1);
                                    dst = (dst + 1) | 0;
                                } else if (matchlen1 === 3 && offset <= 16383) {
                                    QuickLZ.fast_write(destination, dst, (offset << 2) | 1, 2);
                                    dst = (dst + 2) | 0;
                                } else if (matchlen1 <= 18 && offset <= 1023) {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 3) | 0)) << 2) | (offset << 6) | 2, 2);
                                    dst = (dst + 2) | 0;
                                } else if (matchlen1 <= 33) {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 2) | 0)) << 2) | (offset << 7) | 3, 3);
                                    dst = (dst + 3) | 0;
                                } else {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 3) | 0)) << 7) | (offset << 15) | 3, 4);
                                    dst = (dst + 4) | 0;
                                }
                                lits = 0;
                            } else {
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                cword_val = (cword_val >>> 1);
                                src = (src + 1) | 0;
                                dst = (dst + 1) | 0;
                            }
                        }
                    }
                    while (src <= ((source.length - 1) | 0)) {
                        if ((((cword_val & 1) >>> 0)) === 1) {
                            QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), 4);
                            cword_ptr = dst;
                            dst = (dst + QuickLZ.CWORD_LEN) | 0;
                            cword_val = 2147483648;
                        }

                        destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                        src = (src + 1) | 0;
                        dst = (dst + 1) | 0;
                        cword_val = (cword_val >>> 1);
                    }
                    while ((((cword_val & 1) >>> 0)) !== 1) {
                        cword_val = (cword_val >>> 1);
                    }
                    QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), QuickLZ.CWORD_LEN);
                    QuickLZ.write_header(destination, level, true, source.length, dst);
                    d2 = System.Array.init(dst, 0, System.Byte);
                    System.Array.copy(destination, 0, d2, 0, dst);
                    return d2;
                },
                fast_write: function (a, i, value, numbytes) {
                    for (var j = 0; j < numbytes; j = (j + 1) | 0) {
                        a[System.Array.index(((i + j) | 0), a)] = (value >> (Bridge.Int.mul(j, 8))) & 255;
                    }
                },
                decompress: function (source) {
                    var level;
                    var size = QuickLZ.sizeDecompressed(source);
                    var src = QuickLZ.headerLen(source);
                    var dst = 0;
                    var cword_val = 1;
                    var destination = System.Array.init(size, 0, System.Byte);
                    var hashtable = System.Array.init(4096, 0, System.Int32);
                    var hash_counter = System.Array.init(4096, 0, System.Byte);
                    var last_matchstart = (((((size - QuickLZ.UNCONDITIONAL_MATCHLEN) | 0) - QuickLZ.UNCOMPRESSED_END) | 0) - 1) | 0;
                    var last_hashed = -1;
                    var hash;
                    var fetch = 0;

                    level = (source[System.Array.index(0, source)] >> 2) & 3;

                    if (level !== 1 && level !== 3) {
                        throw new System.ArgumentException("C# version only supports level 1 and 3");
                    }

                    if ((source[System.Array.index(0, source)] & 1) !== 1) {
                        var d2 = System.Array.init(size, 0, System.Byte);
                        System.Array.copy(source, QuickLZ.headerLen(source), d2, 0, size);
                        return d2;
                    }

                    for (; ; ) {
                        if (cword_val === 1) {
                            cword_val = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                            src = (src + 4) | 0;
                            if (dst <= last_matchstart) {
                                if (level === 1) {
                                    fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0;
                                } else {
                                    fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                                }
                            }
                        }

                        if ((((cword_val & 1) >>> 0)) === 1) {
                            var matchlen;
                            var offset2;

                            cword_val = cword_val >>> 1;

                            if (level === 1) {
                                hash = ((fetch | 0) >> 4) & 4095;
                                offset2 = (hashtable[System.Array.index(hash, hashtable)]) >>> 0;

                                if ((((fetch & 15) >>> 0)) !== 0) {
                                    matchlen = ((((fetch & 15) >>> 0)) + 2) >>> 0;
                                    src = (src + 2) | 0;
                                } else {
                                    matchlen = source[System.Array.index(((src + 2) | 0), source)];
                                    src = (src + 3) | 0;
                                }
                            } else {
                                var offset;
                                if ((((fetch & 3) >>> 0)) === 0) {
                                    offset = (((fetch & 255) >>> 0)) >>> 2;
                                    matchlen = 3;
                                    src = (src + 1) | 0;
                                } else if ((((fetch & 2) >>> 0)) === 0) {
                                    offset = (((fetch & 65535) >>> 0)) >>> 2;
                                    matchlen = 3;
                                    src = (src + 2) | 0;
                                } else if ((((fetch & 1) >>> 0)) === 0) {
                                    offset = (((fetch & 65535) >>> 0)) >>> 6;
                                    matchlen = (((((fetch >>> 2) & 15) >>> 0)) + 3) >>> 0;
                                    src = (src + 2) | 0;
                                } else if ((((fetch & 127) >>> 0)) !== 3) {
                                    offset = ((fetch >>> 7) & 131071) >>> 0;
                                    matchlen = (((((fetch >>> 2) & 31) >>> 0)) + 2) >>> 0;
                                    src = (src + 3) | 0;
                                } else {
                                    offset = (fetch >>> 15);
                                    matchlen = (((((fetch >>> 7) & 255) >>> 0)) + 3) >>> 0;
                                    src = (src + 4) | 0;
                                }
                                offset2 = System.Int64.clipu32(System.Int64(dst).sub(System.Int64(offset)));
                            }

                            destination[System.Array.index(((dst + 0) | 0), destination)] = destination[System.Array.index(((offset2 + 0) >>> 0), destination)];
                            destination[System.Array.index(((dst + 1) | 0), destination)] = destination[System.Array.index(((offset2 + 1) >>> 0), destination)];
                            destination[System.Array.index(((dst + 2) | 0), destination)] = destination[System.Array.index(((offset2 + 2) >>> 0), destination)];

                            for (var i = 3; System.Int64(i).lt(System.Int64(matchlen)); i = (i + 1) | 0) {
                                destination[System.Array.index(((dst + i) | 0), destination)] = destination[System.Array.index(System.Int64.toNumber(System.Int64(offset2).add(System.Int64(i))), destination)];
                            }

                            dst = (dst + (matchlen | 0)) | 0;

                            if (level === 1) {
                                fetch = (destination[System.Array.index(((last_hashed + 1) | 0), destination)] | (destination[System.Array.index(((last_hashed + 2) | 0), destination)] << 8) | (destination[System.Array.index(((last_hashed + 3) | 0), destination)] << 16)) >>> 0;
                                while (System.Int64(last_hashed).lt(System.Int64(dst).sub(System.Int64(matchlen)))) {
                                    last_hashed = (last_hashed + 1) | 0;
                                    hash = (((((((fetch >>> 12) ^ fetch) >>> 0)) & (4095)) >>> 0)) | 0;
                                    hashtable[System.Array.index(hash, hashtable)] = last_hashed;
                                    hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                    fetch = ((((fetch >>> 8 & 65535) >>> 0) | (((destination[System.Array.index(((last_hashed + 3) | 0), destination)] << 16)) >>> 0)) >>> 0);
                                }
                                fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0;
                            } else {
                                fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                            }
                            last_hashed = (dst - 1) | 0;
                        } else {
                            if (dst <= last_matchstart) {
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                dst = (dst + 1) | 0;
                                src = (src + 1) | 0;
                                cword_val = cword_val >>> 1;

                                if (level === 1) {
                                    while (last_hashed < ((dst - 3) | 0)) {
                                        last_hashed = (last_hashed + 1) | 0;
                                        var fetch2 = destination[System.Array.index(last_hashed, destination)] | (destination[System.Array.index(((last_hashed + 1) | 0), destination)] << 8) | (destination[System.Array.index(((last_hashed + 2) | 0), destination)] << 16);
                                        hash = ((fetch2 >> 12) ^ fetch2) & (4095);
                                        hashtable[System.Array.index(hash, hashtable)] = last_hashed;
                                        hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                    }
                                    fetch = ((((fetch >>> 8 & 65535) >>> 0) | (((source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0)) >>> 0);
                                } else {
                                    fetch = ((((((fetch >>> 8 & 65535) >>> 0) | (((source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0)) >>> 0) | (((source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0)) >>> 0);
                                }
                            } else {
                                while (dst <= ((size - 1) | 0)) {
                                    if (cword_val === 1) {
                                        src = (src + QuickLZ.CWORD_LEN) | 0;
                                        cword_val = 2147483648;
                                    }

                                    destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                    dst = (dst + 1) | 0;
                                    src = (src + 1) | 0;
                                    cword_val = cword_val >>> 1;
                                }
                                return destination;
                            }
                        }
                    }
                }
            }
        }
    });

    Bridge.define("Test.App", {
        main: function Main () {
            window.onload = Bridge.fn.combine(window.onload, Test.App.OnWindowLoad);
        },
        statics: {
            fields: {
                _sageContainer: null,
                _newSheetTab: null,
                _currentTabCanvas: null,
                _tabID: 0,
                _canvasLookup: null
            },
            props: {
                CurrentTabCanvas: {
                    get: function () {
                        return Test.App._canvasLookup.get(Test.App._currentTabCanvas);
                    }
                }
            },
            ctors: {
                init: function () {
                    this._tabID = 1;
                    this._canvasLookup = new (System.Collections.Generic.Dictionary$2(System.String,Test.TabCanvas))();
                }
            },
            methods: {
                OnWindowLoad: function (eee) {
                    window.addEventListener("copy", $asm.$.Test.App.f1);

                    window.addEventListener("paste", $asm.$.Test.App.f2);

                    $(document).on("keydown", Test.App.OnKeyDown);
                    $(document).on("contextmenu", ".IAmAGraphCanvas", $asm.$.Test.App.f3);

                    Test.App._sageContainer = document.getElementById("SageContainer");
                    $("#SageManual").on("click", $asm.$.Test.App.f4);
                    $("#SageGraph6").on("click", $asm.$.Test.App.f5);
                    $("#SageSparse6").on("click", $asm.$.Test.App.f6);
                    $("#SageChromaticNumber").on("click", $asm.$.Test.App.f7);
                    $("#SageChromaticPolynomial").on("click", $asm.$.Test.App.f8);
                    $("#SageColoring").on("click", $asm.$.Test.App.f9);
                    $("#SageIndependentSet").on("click", $asm.$.Test.App.f10);
                    $("#SageIsPerfect").on("click", $asm.$.Test.App.f11);
                    $("#SageMatchingPolynomial").on("click", $asm.$.Test.App.f12);
                    $("#SagePathwidth").on("click", $asm.$.Test.App.f13);
                    $("#SageTreewidth").on("click", $asm.$.Test.App.f14);
                    $("#SageTuttePolynomial").on("click", $asm.$.Test.App.f15);
                    $("#SageVertexCover").on("click", $asm.$.Test.App.f16);
                    $("#SageCliqueComplex").on("click", $asm.$.Test.App.f17);
                    $("#SageCliqueMaximum").on("click", $asm.$.Test.App.f18);
                    $("#SageCliqueNumber").on("click", $asm.$.Test.App.f19);
                    $("#SageCliquePolynomial").on("click", $asm.$.Test.App.f20);
                    $("#SageBridges").on("click", $asm.$.Test.App.f21);
                    $("#SageGomoryHuTree").on("click", $asm.$.Test.App.f22);
                    $("#SageRandomSpanningTree").on("click", $asm.$.Test.App.f23);
                    $("#SageApexVertices").on("click", $asm.$.Test.App.f24);
                    $("#SageIsApex").on("click", $asm.$.Test.App.f25);
                    $("#SageIsArcTransitive").on("click", $asm.$.Test.App.f26);
                    $("#SageIsAsteroidalTripleFree").on("click", $asm.$.Test.App.f27);
                    $("#SageIsBiconnected").on("click", $asm.$.Test.App.f28);
                    $("#SageIsBipartite").on("click", $asm.$.Test.App.f29);
                    $("#SageIsBlockGraph").on("click", $asm.$.Test.App.f30);
                    $("#SageIsCartesianProduct").on("click", $asm.$.Test.App.f31);
                    $("#SageIsDistanceRegular").on("click", $asm.$.Test.App.f32);
                    $("#SageIsEdgeTransitive").on("click", $asm.$.Test.App.f33);
                    $("#SageIsEvenHoleFree").on("click", $asm.$.Test.App.f34);
                    $("#SageIsForest").on("click", $asm.$.Test.App.f35);
                    $("#SageIsHalfTransitive").on("click", $asm.$.Test.App.f36);
                    $("#SageIsLineGraph").on("click", $asm.$.Test.App.f37);
                    $("#SageIsLongAntiholeFree").on("click", $asm.$.Test.App.f38);
                    $("#SageIsLongHoleFree").on("click", $asm.$.Test.App.f39);
                    $("#SageIsOddHoleFree").on("click", $asm.$.Test.App.f40);
                    $("#SageIsOverfull").on("click", $asm.$.Test.App.f41);
                    $("#SageIsPartialCube").on("click", $asm.$.Test.App.f42);
                    $("#SageIsPrime").on("click", $asm.$.Test.App.f43);
                    $("#SageIsSemiSymmetric").on("click", $asm.$.Test.App.f44);
                    $("#SageIsSplit").on("click", $asm.$.Test.App.f45);
                    $("#SageIsStronglyRegular").on("click", $asm.$.Test.App.f46);
                    $("#SageIsTree").on("click", $asm.$.Test.App.f47);
                    $("#SageIsTriangleFree").on("click", $asm.$.Test.App.f48);
                    $("#SageIsWeaklyChordal").on("click", $asm.$.Test.App.f49);
                    $("#SageOddGirth").on("click", $asm.$.Test.App.f50);
                    $("#SageFractionalChromaticIndex").on("click", $asm.$.Test.App.f51);
                    $("#SageHasPerfectMatching").on("click", $asm.$.Test.App.f52);
                    $("#SageKirchhoffSymanzikPolynomial").on("click", $asm.$.Test.App.f53);
                    $("#SageLovaszTheta").on("click", $asm.$.Test.App.f54);
                    $("#SageMatching").on("click", $asm.$.Test.App.f55);
                    $("#SageMaximumAverageDegree").on("click", $asm.$.Test.App.f56);
                    $("#SageSeidelAdjacencyMatrix").on("click", $asm.$.Test.App.f57);
                    $("#SageNetworkxGraph").on("click", $asm.$.Test.App.f58);
                    $("#SageAdjacencyMatrix").on("click", $asm.$.Test.App.f59);
                    $("#SageIncidenceMatrix").on("click", $asm.$.Test.App.f60);
                    $("#SageDistanceMatrix").on("click", $asm.$.Test.App.f61);
                    $("#SageKirchhoffMatrix").on("click", $asm.$.Test.App.f62);
                    $("#SageDensity").on("click", $asm.$.Test.App.f63);
                    $("#SageOrder").on("click", $asm.$.Test.App.f64);
                    $("#SageSize").on("click", $asm.$.Test.App.f65);
                    $("#SageAverageDegree").on("click", $asm.$.Test.App.f66);
                    $("#SageDegreeSequence").on("click", $asm.$.Test.App.f67);
                    $("#SageCycleBasis").on("click", $asm.$.Test.App.f68);
                    $("#SageAllPaths").on("click", $asm.$.Test.App.f69);
                    $("#SageTrianglesCount").on("click", $asm.$.Test.App.f70);
                    $("#SageSpectrum").on("click", $asm.$.Test.App.f71);
                    $("#SageEigenvectors").on("click", $asm.$.Test.App.f72);
                    $("#SageEigenspaces").on("click", $asm.$.Test.App.f73);
                    $("#SageAutomorphismGroup").on("click", $asm.$.Test.App.f74);
                    $("#SageIsVertexTransitive").on("click", $asm.$.Test.App.f75);
                    $("#SageCanonicalLabel").on("click", $asm.$.Test.App.f76);
                    $("#SageIsCayley").on("click", $asm.$.Test.App.f77);
                    $("#SageIsEulerian").on("click", $asm.$.Test.App.f78);
                    $("#SageIsPlanar").on("click", $asm.$.Test.App.f79);
                    $("#SageIsRegular").on("click", $asm.$.Test.App.f80);
                    $("#SageIsChordal").on("click", $asm.$.Test.App.f81);
                    $("#SageIsCirculant").on("click", $asm.$.Test.App.f82);
                    $("#SageIsInterval").on("click", $asm.$.Test.App.f83);
                    $("#SageIsGallaiTree").on("click", $asm.$.Test.App.f84);
                    $("#SageIsClique").on("click", $asm.$.Test.App.f85);
                    $("#SageIsCycle").on("click", $asm.$.Test.App.f86);
                    $("#SageIsIndependentSet").on("click", $asm.$.Test.App.f87);
                    $("#SageIsTransitivelyReduced").on("click", $asm.$.Test.App.f88);
                    $("#SageIsEquitable").on("click", $asm.$.Test.App.f89);
                    $("#SageEccentricity").on("click", $asm.$.Test.App.f90);
                    $("#SageRadius").on("click", $asm.$.Test.App.f91);
                    $("#SageDiameter").on("click", $asm.$.Test.App.f92);
                    $("#SageGirth").on("click", $asm.$.Test.App.f93);
                    $("#SageEdgeConnectivity").on("click", $asm.$.Test.App.f94);
                    $("#SageVertexConnectivity").on("click", $asm.$.Test.App.f95);
                    $("#SageIsHamiltonian").on("click", $asm.$.Test.App.f96);
                    $("#SageCharacteristicPolynomial").on("click", $asm.$.Test.App.f97);
                    $("#SageGenus").on("click", $asm.$.Test.App.f98);


                    $("#SageLayoutSprings").on("click", $asm.$.Test.App.f99);
                    $("#SageLayoutRanked").on("click", $asm.$.Test.App.f100);
                    $("#SageLayoutRandom").on("click", $asm.$.Test.App.f101);
                    $("#SageLayoutCircular").on("click", $asm.$.Test.App.f102);
                    $("#SageLayoutTree").on("click", $asm.$.Test.App.f103);
                    $("#SageLayoutGraphViz").on("click", $asm.$.Test.App.f104);
                    $("#SageLayoutPlanar").on("click", $asm.$.Test.App.f105);

                    $(".NamedGraph").on("click", $asm.$.Test.App.f106);



                    Test.App.NewTab();
                    Test.App.AddNewSheetTab();

                    $(".nav-tabs").on("click", "a", $asm.$.Test.App.f107);

                    $(".new-sheet-anchor").on("click", $asm.$.Test.App.f108);
                },
                AddNewSheetTab: function () {
                    var tabControl = document.getElementById("TabControl");
                    Test.App._newSheetTab = document.createElement('li');
                    Test.App._newSheetTab.id = "new-sheet";

                    var anchor = document.createElement('a');
                    anchor.className = "new-sheet-anchor";
                    anchor.textContent = "+";
                    anchor.href = "#";

                    Test.App._newSheetTab.appendChild(anchor);
                    tabControl.appendChild(Test.App._newSheetTab);
                },
                NewTab: function (name, G) {
                    var $t, $t1;
                    if (name === void 0) { name = null; }
                    if (G === void 0) { G = null; }
                    if (System.String.isNullOrEmpty(name)) {
                        name = "sheet " + Test.App._tabID;
                    }

                    var canvas = document.createElement('canvas');
                    canvas.id = "Tab" + Test.App._tabID;
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    canvas.className = "IAmAGraphCanvas";

                    canvas.onshow = Bridge.fn.combine(canvas.onshow, function () {
                        canvas.width = canvas.parentElement.clientWidth;
                        canvas.height = canvas.parentElement.clientHeight;
                    });

                    if (G == null) {
                        G = new Graphs.Graph.ctor();
                    }
                    var graphCanvas = new Graphs.GraphCanvas(G);
                    var tc = new Test.TabCanvas(canvas, graphCanvas);
                    tc.Invalidate();

                    var tabPane = document.createElement('div');
                    tabPane.className = "tab-pane active";
                    tabPane.id = "Tab" + Test.App._tabID;
                    tabPane.appendChild(canvas);

                    var tabControlContent = document.getElementById("TabControlContent");
                    $t = Bridge.getEnumerator(tabControlContent.children);
                    try {
                        while ($t.moveNext()) {
                            var child = $t.Current;
                            child.className = "tab-pane";
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }tabControlContent.appendChild(tabPane);

                    var tab = document.createElement('li');
                    tab.className = "active";

                    var anchor = document.createElement('a');
                    anchor.setAttribute("data-toggle", "tab");
                    anchor.textContent = name;
                    anchor.href = "#Tab" + Test.App._tabID;
                    Test.App._canvasLookup.set(anchor.href, tc);
                    Test.App._currentTabCanvas = anchor.href;

                    tab.appendChild(anchor);

                    var tabControl = document.getElementById("TabControl");
                    $t1 = Bridge.getEnumerator(tabControl.children);
                    try {
                        while ($t1.moveNext()) {
                            var child1 = $t1.Current;
                            child1.className = "narf";
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }tabControl.insertBefore(tab, Test.App._newSheetTab);

                    Test.App._tabID = (Test.App._tabID + 1) | 0;
                },
                OnKeyDown: function (e) {
                    var tc = Test.App.CurrentTabCanvas;

                    switch (e.key) {
                        case "f": 
                            tc.GraphCanvas.DoZoomFit();
                            break;
                        case "-": 
                            tc.GraphCanvas.DoZoom(-1, new GraphicsLayer.Box.ctor(0.5, 0.5));
                            break;
                        case "+": 
                            tc.GraphCanvas.DoZoom(1, new GraphicsLayer.Box.ctor(0.5, 0.5));
                            break;
                        case "i": 
                            tc.GraphCanvas.ToggleVertexIndices();
                            break;
                        case "I": 
                            tc.GraphCanvas.RotateVertexIndices();
                            break;
                        case "j": 
                            tc.GraphCanvas.ToggleEdgeIndices();
                            break;
                        case "J": 
                            tc.GraphCanvas.RotateEdgeIndices();
                            break;
                        case "r": 
                            tc.GraphCanvas.DoReverseSelectedEdges();
                            break;
                        case "R": 
                            tc.GraphCanvas.DoRotateSelectedEdges();
                            break;
                        case "y": 
                            if (e.ctrlKey) {
                                tc.GraphCanvas.DoRedo();
                            }
                            break;
                        case "z": 
                            if (e.ctrlKey) {
                                tc.GraphCanvas.DoUndo();
                            }
                            break;
                    }
                },
                AskSage: function (s) {
                    var div = Test.App.AppendSageDiv(s);

                    sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "fullScreen"], autoeval:false});
                    $("#SageModal").modal('show');
                },
                AskSageAuto: function (s) {
                    Test.App.AppendSageDiv(s);

                    sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "evalButton", "fullScreen", "editor"], autoeval:true});
                    $("#SageModal").modal('show');
                },
                AskSageAsync: function (G, sageCodeAboutG) {
                    var $step = 0,
                        $task1, 
                        $taskResult1, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([0,1], $step);
                                    switch ($step) {
                                        case 0: {
                                            $task1 = Test.App.AskSageAsync$1(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(G.GetEdgeWeights()), "')", '\n', sageCodeAboutG));
                                            $step = 1;
                                            $task1.continueWith($asyncBody);
                                            return;
                                        }
                                        case 1: {
                                            $taskResult1 = $task1.getAwaitedResult();
                                            $tcs.setResult($taskResult1);
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                },
                AskSageAsync$1: function (sageCode) {
                    var $step = 0,
                        $task1, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        output, 
                        response, 
                        ss, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([0,1,2,3,4], $step);
                                    switch ($step) {
                                        case 0: {
                                            output = document.getElementById("SageSecretOutputHole");
                                            output.textContent = "working";
                                            Test.App.AppendSageDiv(sageCode);

                                            sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "evalButton", "fullScreen", "editor"], autoeval:true, outputLocation:"#SageSecretOutputHole"});

                                            
                                            $step = 1;
                                            continue;
                                        }
                                        case 1: {
                                            if ( !System.String.contains(output.textContent,"Accepted:") ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $task1 = System.Threading.Tasks.Task.delay(100);
                                            $step = 3;
                                            $task1.continueWith($asyncBody);
                                            return;
                                        }
                                        case 3: {
                                            $task1.getAwaitedResult();
                                            
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            response = output.textContent;
                                            if (System.String.isNullOrEmpty(response)) {
                                                $tcs.setResult("flibble");
                                                return;
                                            }

                                            ss = System.Linq.Enumerable.from(System.String.split(response, System.Array.init(['\n'], System.String), null, 1)).firstOrDefault($asm.$.Test.App.f109, null);
                                            if (System.String.isNullOrEmpty(ss)) {
                                                $tcs.setResult("flabble");
                                                return;
                                            }

                                            ss = ss.substr(((((System.String.indexOf(ss, "text/plain") + ("text/plain").length) | 0) + 3) | 0));
                                            ss = ss.substr(0, System.String.indexOf(ss, "\""));

                                            $tcs.setResult(ss);
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                },
                AppendSageDiv: function (s) {
                    var $t;
                    if (Test.App._sageContainer.childElementCount > 0) {
                        Test.App._sageContainer.removeChild(($t = Test.App._sageContainer.children)[System.Array.index(0, $t)]);
                    }
                    var div = document.createElement('div');
                    div.className = "compute";
                    div.textContent = s;
                    Test.App._sageContainer.appendChild(div);

                    return div;
                }
            }
        }
    });

    Bridge.ns("Test.App", $asm.$);

    Bridge.apply($asm.$.Test.App, {
        f1: function (e) {
            if ((Bridge.is(e.target, HTMLSpanElement)) || (Bridge.is(e.target, HTMLAnchorElement))) {
                e.preventDefault();
            }
            var tc = Test.App._canvasLookup.get(Test.App._currentTabCanvas);
            var s = tc.GraphCanvas.DoCopy();
            if (!System.String.isNullOrEmpty(s)) {
                e.clipboardData.setData("Text", s);
            }
        },
        f2: function (e) {
            e.preventDefault();
            var s = e.clipboardData.getData("Text");
            var tc = Test.App._canvasLookup.get(Test.App._currentTabCanvas);
            tc.GraphCanvas.DoPaste(s || "");
        },
        f3: function (e) {
            e.preventDefault();
        },
        f4: function () {
            Test.App.CurrentTabCanvas.SageManual();
        },
        f5: function () {
            Test.App.CurrentTabCanvas.SageGraph6();
        },
        f6: function () {
            Test.App.CurrentTabCanvas.SageSparse6();
        },
        f7: function () {
            Test.App.CurrentTabCanvas.SageChromaticNumber();
        },
        f8: function () {
            Test.App.CurrentTabCanvas.SageChromaticPolynomial();
        },
        f9: function () {
            Test.App.CurrentTabCanvas.SageColoring();
        },
        f10: function () {
            Test.App.CurrentTabCanvas.SageIndependentSet();
        },
        f11: function () {
            Test.App.CurrentTabCanvas.SageIsPerfect();
        },
        f12: function () {
            Test.App.CurrentTabCanvas.SageMatchingPolynomial();
        },
        f13: function () {
            Test.App.CurrentTabCanvas.SagePathwidth();
        },
        f14: function () {
            Test.App.CurrentTabCanvas.SageTreewidth();
        },
        f15: function () {
            Test.App.CurrentTabCanvas.SageTuttePolynomial();
        },
        f16: function () {
            Test.App.CurrentTabCanvas.SageVertexCover();
        },
        f17: function () {
            Test.App.CurrentTabCanvas.SageCliqueComplex();
        },
        f18: function () {
            Test.App.CurrentTabCanvas.SageCliqueMaximum();
        },
        f19: function () {
            Test.App.CurrentTabCanvas.SageCliqueNumber();
        },
        f20: function () {
            Test.App.CurrentTabCanvas.SageCliquePolynomial();
        },
        f21: function () {
            Test.App.CurrentTabCanvas.SageBridges();
        },
        f22: function () {
            Test.App.CurrentTabCanvas.SageGomoryHuTree();
        },
        f23: function () {
            Test.App.CurrentTabCanvas.SageRandomSpanningTree();
        },
        f24: function () {
            Test.App.CurrentTabCanvas.SageApexVertices();
        },
        f25: function () {
            Test.App.CurrentTabCanvas.SageIsApex();
        },
        f26: function () {
            Test.App.CurrentTabCanvas.SageIsArcTransitive();
        },
        f27: function () {
            Test.App.CurrentTabCanvas.SageIsAsteroidalTripleFree();
        },
        f28: function () {
            Test.App.CurrentTabCanvas.SageIsBiconnected();
        },
        f29: function () {
            Test.App.CurrentTabCanvas.SageIsBipartite();
        },
        f30: function () {
            Test.App.CurrentTabCanvas.SageIsBlockGraph();
        },
        f31: function () {
            Test.App.CurrentTabCanvas.SageIsCartesianProduct();
        },
        f32: function () {
            Test.App.CurrentTabCanvas.SageIsDistanceRegular();
        },
        f33: function () {
            Test.App.CurrentTabCanvas.SageIsEdgeTransitive();
        },
        f34: function () {
            Test.App.CurrentTabCanvas.SageIsEvenHoleFree();
        },
        f35: function () {
            Test.App.CurrentTabCanvas.SageIsForest();
        },
        f36: function () {
            Test.App.CurrentTabCanvas.SageIsHalfTransitive();
        },
        f37: function () {
            Test.App.CurrentTabCanvas.SageIsLineGraph();
        },
        f38: function () {
            Test.App.CurrentTabCanvas.SageIsLongAntiholeFree();
        },
        f39: function () {
            Test.App.CurrentTabCanvas.SageIsLongHoleFree();
        },
        f40: function () {
            Test.App.CurrentTabCanvas.SageIsOddHoleFree();
        },
        f41: function () {
            Test.App.CurrentTabCanvas.SageIsOverfull();
        },
        f42: function () {
            Test.App.CurrentTabCanvas.SageIsPartialCube();
        },
        f43: function () {
            Test.App.CurrentTabCanvas.SageIsPrime();
        },
        f44: function () {
            Test.App.CurrentTabCanvas.SageIsSemiSymmetric();
        },
        f45: function () {
            Test.App.CurrentTabCanvas.SageIsSplit();
        },
        f46: function () {
            Test.App.CurrentTabCanvas.SageIsStronglyRegular();
        },
        f47: function () {
            Test.App.CurrentTabCanvas.SageIsTree();
        },
        f48: function () {
            Test.App.CurrentTabCanvas.SageIsTriangleFree();
        },
        f49: function () {
            Test.App.CurrentTabCanvas.SageIsWeaklyChordal();
        },
        f50: function () {
            Test.App.CurrentTabCanvas.SageOddGirth();
        },
        f51: function () {
            Test.App.CurrentTabCanvas.SageFractionalChromaticIndex();
        },
        f52: function () {
            Test.App.CurrentTabCanvas.SageHasPerfectMatching();
        },
        f53: function () {
            Test.App.CurrentTabCanvas.SageKirchhoffSymanzikPolynomial();
        },
        f54: function () {
            Test.App.CurrentTabCanvas.SageLovaszTheta();
        },
        f55: function () {
            Test.App.CurrentTabCanvas.SageMatching();
        },
        f56: function () {
            Test.App.CurrentTabCanvas.SageMaximumAverageDegree();
        },
        f57: function () {
            Test.App.CurrentTabCanvas.SageSeidelAdjacencyMatrix();
        },
        f58: function () {
            Test.App.CurrentTabCanvas.SageNetworkxGraph();
        },
        f59: function () {
            Test.App.CurrentTabCanvas.SageAdjacencyMatrix();
        },
        f60: function () {
            Test.App.CurrentTabCanvas.SageIncidenceMatrix();
        },
        f61: function () {
            Test.App.CurrentTabCanvas.SageDistanceMatrix();
        },
        f62: function () {
            Test.App.CurrentTabCanvas.SageKirchhoffMatrix();
        },
        f63: function () {
            Test.App.CurrentTabCanvas.SageDensity();
        },
        f64: function () {
            Test.App.CurrentTabCanvas.SageOrder();
        },
        f65: function () {
            Test.App.CurrentTabCanvas.SageSize();
        },
        f66: function () {
            Test.App.CurrentTabCanvas.SageAverageDegree();
        },
        f67: function () {
            Test.App.CurrentTabCanvas.SageDegreeSequence();
        },
        f68: function () {
            Test.App.CurrentTabCanvas.SageCycleBasis();
        },
        f69: function () {
            Test.App.CurrentTabCanvas.SageAllPaths();
        },
        f70: function () {
            Test.App.CurrentTabCanvas.SageTrianglesCount();
        },
        f71: function () {
            Test.App.CurrentTabCanvas.SageSpectrum();
        },
        f72: function () {
            Test.App.CurrentTabCanvas.SageEigenvectors();
        },
        f73: function () {
            Test.App.CurrentTabCanvas.SageEigenspaces();
        },
        f74: function () {
            Test.App.CurrentTabCanvas.SageAutomorphismGroup();
        },
        f75: function () {
            Test.App.CurrentTabCanvas.SageIsVertexTransitive();
        },
        f76: function () {
            Test.App.CurrentTabCanvas.SageCanonicalLabel();
        },
        f77: function () {
            Test.App.CurrentTabCanvas.SageIsCayley();
        },
        f78: function () {
            Test.App.CurrentTabCanvas.SageIsEulerian();
        },
        f79: function () {
            Test.App.CurrentTabCanvas.SageIsPlanar();
        },
        f80: function () {
            Test.App.CurrentTabCanvas.SageIsRegular();
        },
        f81: function () {
            Test.App.CurrentTabCanvas.SageIsChordal();
        },
        f82: function () {
            Test.App.CurrentTabCanvas.SageIsCirculant();
        },
        f83: function () {
            Test.App.CurrentTabCanvas.SageIsInterval();
        },
        f84: function () {
            Test.App.CurrentTabCanvas.SageIsGallaiTree();
        },
        f85: function () {
            Test.App.CurrentTabCanvas.SageIsClique();
        },
        f86: function () {
            Test.App.CurrentTabCanvas.SageIsCycle();
        },
        f87: function () {
            Test.App.CurrentTabCanvas.SageIsIndependentSet();
        },
        f88: function () {
            Test.App.CurrentTabCanvas.SageIsTransitivelyReduced();
        },
        f89: function () {
            Test.App.CurrentTabCanvas.SageIsEquitable();
        },
        f90: function () {
            Test.App.CurrentTabCanvas.SageEccentricity();
        },
        f91: function () {
            Test.App.CurrentTabCanvas.SageRadius();
        },
        f92: function () {
            Test.App.CurrentTabCanvas.SageDiameter();
        },
        f93: function () {
            Test.App.CurrentTabCanvas.SageGirth();
        },
        f94: function () {
            Test.App.CurrentTabCanvas.SageEdgeConnectivity();
        },
        f95: function () {
            Test.App.CurrentTabCanvas.SageVertexConnectivity();
        },
        f96: function () {
            Test.App.CurrentTabCanvas.SageIsHamiltonian();
        },
        f97: function () {
            Test.App.CurrentTabCanvas.SageCharacteristicPolynomial();
        },
        f98: function () {
            Test.App.CurrentTabCanvas.SageGenus();
        },
        f99: function () {
            Test.App.CurrentTabCanvas.SageLayoutSpring();
        },
        f100: function () {
            Test.App.CurrentTabCanvas.SageLayoutRanked();
        },
        f101: function () {
            Test.App.CurrentTabCanvas.SageLayoutExtendRandomly();
        },
        f102: function () {
            Test.App.CurrentTabCanvas.SageLayoutCircular();
        },
        f103: function () {
            Test.App.CurrentTabCanvas.SageLayoutTree();
        },
        f104: function () {
            Test.App.CurrentTabCanvas.SageLayoutGraphviz();
        },
        f105: function () {
            Test.App.CurrentTabCanvas.SageLayoutPlanar();
        },
        f106: function (ee) {
            Test.App.CurrentTabCanvas.SageLoadNamedGraph(Bridge.cast(ee.currentTarget, HTMLElement).textContent);
        },
        f107: function (ee) {
            ee.preventDefault();
            if (!$(this).hasClass("new-sheet-anchor")) {
                var d = $(this);
                Test.App._currentTabCanvas = ee.target.href;
                var canvas = Test.App.CurrentTabCanvas.Canvas;
                d.tab("show");
            }
        },
        f108: function (ee) {
            ee.preventDefault();
            Test.App.NewTab();
        },
        f109: function (line) {
        return System.String.contains(line,"Accepted:");
    }
    });

    Bridge.define("Test.HelperExtensions", {
        statics: {
            methods: {
                ToColor: function (argb) {
                    return System.String.format("rgba({0},{1},{2},{3:0.00})", Bridge.box(argb.R, System.Int32), Bridge.box(argb.G, System.Int32), Bridge.box(argb.B, System.Int32), Bridge.box(argb.A / 255.0, System.Double, System.Double.format, System.Double.getHashCode));
                }
            }
        }
    });

    Bridge.define("Test.LayoutAnimation", {
        statics: {
            fields: {
                Steps: 0
            },
            ctors: {
                init: function () {
                    this.Steps = 100;
                }
            }
        },
        fields: {
            _update: null,
            _finalUpdate: null,
            _layout: null,
            _xstep: null,
            _ystep: null,
            _step: 0,
            _G: null
        },
        ctors: {
            init: function () {
                this._step = 0;
            },
            ctor: function (update, finalUpdate, layout, G) {
                this.$initialize();
                this._G = G;
                this._update = update;
                this._finalUpdate = finalUpdate;
                this._layout = layout;

                try {
                    this._xstep = System.Array.init(this._layout.Count, 0, System.Double);
                    this._ystep = System.Array.init(this._layout.Count, 0, System.Double);
                    for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                        this._xstep[System.Array.index(i, this._xstep)] = (this._layout.getItem(i).X - this._G.Vertices.getItem(i).X) / Test.LayoutAnimation.Steps;
                        this._ystep[System.Array.index(i, this._ystep)] = (this._layout.getItem(i).Y - this._G.Vertices.getItem(i).Y) / Test.LayoutAnimation.Steps;
                    }
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            }
        },
        methods: {
            Animate: function () {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([1,2,3,4], $step);
                                switch ($step) {

                                    case 1: {
                                        if ( this._step < Test.LayoutAnimation.Steps ) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        this.DoStep();
                                        $task1 = System.Threading.Tasks.Task.delay(10);
                                        $step = 3;
                                        $task1.continueWith($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $task1.getAwaitedResult();
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoStep: function () {
                var $t, $t1;
                for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                    $t = this._G.Vertices.getItem(i);
                    $t.X += this._xstep[System.Array.index(i, this._xstep)];
                    $t1 = this._G.Vertices.getItem(i);
                    $t1.Y += this._ystep[System.Array.index(i, this._ystep)];
                }

                this._update();
                this._step = (this._step + 1) | 0;
                if (this._step >= Test.LayoutAnimation.Steps) {
                    this.OnFinish();
                }
            },
            OnFinish: function () {
                for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                    this._G.Vertices.getItem(i).X = this._layout.getItem(i).X;
                    this._G.Vertices.getItem(i).Y = this._layout.getItem(i).Y;
                }
                this._finalUpdate();
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.UnionFindTrackedRoots$1", function (T) { return {
        inherits: [Algorithms.DataStructures.UnionFind$1(T)],
        fields: {
            _roots: null
        },
        ctors: {
            init: function () {
                this._roots = new (System.Collections.Generic.List$1(Algorithms.DataStructures.UnionFind$1.Node(T)))();
            }
        },
        methods: {
            FindAllExcept: function (nodes) {
                return System.Linq.Enumerable.from(this._roots).except(System.Linq.Enumerable.from(nodes).select(Bridge.fn.bind(this, function (n) {
                            return this.Find(n);
                        })));
            },
            RootAdded: function (n) {
                this._roots.add(n);
            },
            RootRemoved: function (n) {
                this._roots.remove(n);
            }
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.Chronicle.ChronicledBranch", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.IEnumerable$1(Algorithms.FixerBreaker.Move))],
        props: {
            Alpha: 0,
            Beta: 0,
            SwapComponents: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$IEnumerable$1$Algorithms$FixerBreaker$Move$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (S, alpha, beta, partitions) {
                this.$initialize();
                this.Alpha = alpha;
                this.Beta = beta;
                this.SwapComponents = System.Linq.Enumerable.from(partitions).select(function (p) {
                        return System.Linq.Enumerable.from(p).select(function (i) {
                                return S.getItem(i);
                            }).toList(System.Int32);
                    }).toList(System.Collections.Generic.List$1(System.Int32));
            }
        },
        methods: {
            getEnumerator: function () {
                return System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateShortLexNonempty(this.SwapComponents.Count)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Chronicle.ChronicledBranch.f1)).getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            EnumerateMoves: function (cf) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.FixerBreaker.Move))(Bridge.fn.bind(this, function (cf) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        i,
                        $t,
                        s,
                        $t1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.FixerBreaker.Move))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        i = 0;
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ( i < cf.Count ) {
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 8;
                                        continue;
                                    }
                                    case 2: {
                                        if (!cf.getItem(i)) {
                                                $step = 7;
                                                continue;
                                            }

                                            $t = Bridge.getEnumerator(this.SwapComponents.getItem(i));
                                            $step = 3;
                                            continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                                s = $t.Current;
                                                $step = 4;
                                                continue;
                                            }
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $enumerator.current = ($t1 = new Algorithms.FixerBreaker.Move(), $t1.Added = this.Alpha, $t1.Removed = this.Beta, $t1.Stack = s, $t1);
                                            $step = 5;
                                            return true;
                                    }
                                    case 5: {
                                        $step = 3;
                                        continue;
                                    }
                                    case 6: {
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        i = (i + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 8: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.Chronicle.ChronicledBranch", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.Chronicle.ChronicledBranch, {
        f1: function (cf) {
            return this.EnumerateMoves(cf);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        statics: {
            methods: {
                ColorableWithoutEdge: function (knowledge, board, edgeIndex) {
                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge$1(knowledge, board.Stacks, edgeIndex);
                },
                ColorableWithoutEdge$1: function (knowledge, stacks, edgeIndex) {
                    var lg = knowledge.GraphKnowledge.LineGraph;

                    return lg.IsChoosable(System.Linq.Enumerable.range(0, lg.N).select(function (e) {
                        if (e === edgeIndex) {
                            return System.Int64(-1);
                        }

                        return knowledge.GetEdgeColorList$1(stacks, e);
                    }).toList(System.Int64));
                }
            }
        },
        props: {
            Reason: {
                get: function () {
                    return "color all";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var lineGraph = knowledge.GraphKnowledge.LineGraph;
                var canColor = lineGraph.IsChoosable(System.Linq.Enumerable.range(0, lineGraph.N).select(function (e) {
                    return knowledge.GetEdgeColorList(board, e);
                }).toList(System.Int64));

                if (canColor) {
                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, this.Reason);
                }

                return canColor;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            Reason: {
                get: function () {
                    return "common color";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var commonColor = System.Linq.Enumerable.from(board.Stacks).aggregate(System.Int64(-1), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer.f1).ne(System.Int64(0));

                if (commonColor) {
                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, this.Reason);
                }

                return commonColor;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer, {
        f1: function (t, s) {
            return t.and(s);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            FindCleanestWin: false,
            DoSuperabundantCheck: false,
            Reason: {
                get: function () {
                    return "good swap";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return true;
                }
            },
            ChildReason: {
                get: function () {
                    return "";
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        ctors: {
            ctor: function (findCleanestWin, superabundantOnly) {
                if (findCleanestWin === void 0) { findCleanestWin = true; }
                if (superabundantOnly === void 0) { superabundantOnly = true; }

                this.$initialize();
                this.FindCleanestWin = findCleanestWin;
                this.DoSuperabundantCheck = superabundantOnly;
            }
        },
        methods: {
            IsChildBoardBetter: function (knowledge, board, childBoard) {
                return false;
            },
            Analyze: function (knowledge, board) {
                var $t, $t1, $t2;
                var potKnowledge = knowledge.getItem(board.Template.Value).getItem(board.ColorCount);
                var graphKnowledge = knowledge.GraphKnowledge;

                var boardKnowledge = potKnowledge.getItem(board);
                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(boardKnowledge)) {
                    return true;
                }

                var win = false;
                var winDepth = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var colorPairWinDepth = 0;
                        var winningSwaps = new (System.Collections.Generic.List$1(System.Object))();
                        var improvingSwaps = new (System.Collections.Generic.List$1(System.Object))();
                        var winningSwapAlwaysExists = true;
                        var improvingSwapAlwaysExists = true;

                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var winningSwap = null;
                                var improvingSwap = null;

                                var branchWinDepth = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        var childBoard = board.Clone();
                                        childBoard.DoMoveCombination(swap);

                                        if (this.DoSuperabundantCheck && !Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(graphKnowledge.Graph, childBoard)) {
                                            continue;
                                        }

                                        var childBoardKnowledge = potKnowledge.getItem(childBoard);
                                        if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(childBoardKnowledge) && ((childBoardKnowledge.Depth + 1) | 0) < branchWinDepth) {
                                            branchWinDepth = (childBoardKnowledge.Depth + 1) | 0;
                                            winningSwap = { item1: branch.SwapComponents, item2: System.Linq.Enumerable.from(swap).toList(Algorithms.FixerBreaker.Move), item3: childBoardKnowledge.Reason };

                                            if (!this.FindCleanestWin) {
                                                break;
                                            }
                                        } else if (this.IsChildBoardBetter(knowledge, board, childBoard)) {
                                            improvingSwap = { item1: branch.SwapComponents, item2: System.Linq.Enumerable.from(swap).toList(Algorithms.FixerBreaker.Move), item3: System.String.concat(this.ChildReason, " better") };
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                colorPairWinDepth = Math.max(colorPairWinDepth, branchWinDepth);

                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(winningSwap)) {
                                    winningSwaps.add(winningSwap);
                                    improvingSwaps.add(winningSwap);
                                } else {
                                    winningSwapAlwaysExists = false;
                                    if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(improvingSwap)) {
                                        improvingSwaps.add(improvingSwap);
                                    } else {
                                        improvingSwapAlwaysExists = false;
                                        break;
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            if (colorPairWinDepth < winDepth) {
                                winDepth = colorPairWinDepth;

                                win = true;
                                potKnowledge.AddWin$1(board, this.Reason, winDepth, colorPair, winningSwaps);

                                if (!this.FindCleanestWin) {
                                    break;
                                }
                            }
                        } else if (improvingSwapAlwaysExists) {
                            potKnowledge.AddImprovement(board, this.ChildReason, colorPairWinDepth, colorPair, improvingSwaps);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return win;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        statics: {
            methods: {
                IsKierstead: function (knowledge, board, enforceDegreeRequirement, reason) {
                    if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                    if (reason === void 0) { reason = ""; }
                    return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.EnumerateKiersteadEdgeIndices(knowledge, board, enforceDegreeRequirement, reason)).any();
                },
                IsKierstead$1: function (knowledge, board, edgeIndex, enforceDegreeRequirement) {
                    var $t;
                    if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                    $t = Bridge.getEnumerator(knowledge.GraphKnowledge.ConnectedOrderings.Value.get(knowledge.GraphKnowledge.Edges.getItem(edgeIndex)));
                    try {
                        while ($t.moveNext()) {
                            var ordering = $t.Current;
                            var penultimate = ordering.getItem(((ordering.Count - 2) | 0));
                            if (enforceDegreeRequirement && Algorithms.Int64Usage.PopulationCount(board.Stacks.getItem(penultimate)) <= knowledge.GraphKnowledge.Graph.Degree(penultimate)) {
                                continue;
                            }

                            if (Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead$2(knowledge, board, edgeIndex, ordering)) {
                                return true;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return false;
                },
                IsKierstead$2: function (knowledge, board, edgeIndex, ordering) {
                    var gn = knowledge.GraphKnowledge;

                    return gn.LineGraph.IsChoosable(System.Linq.Enumerable.range(0, gn.LineGraph.N).select(function (e) {
                        var $t;
                        if (e === edgeIndex) {
                            return System.Int64(-1);
                        }

                        var edge = gn.Edges.getItem(e);
                        var j = Math.max(ordering.indexOf(edge.item1), ordering.indexOf(edge.item2));
                        var priorStacks = System.Linq.Enumerable.from(board.Stacks).where(function (stack, i) {
                                return ordering.indexOf(i) < j;
                            }).toList(System.Int64);

                        var allowedList = System.Int64(0);
                        var list = knowledge.GetEdgeColorList(board, e);
                        $t = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits(list), System.Int32);
                        try {
                            while ($t.moveNext()) {
                                var alpha = $t.Current;
                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.d_H(alpha, priorStacks) % 2 === 0) {
                                    allowedList = Algorithms.Int64Usage.SetBit(allowedList, System.Int64(alpha));
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return allowedList;
                    }).toList(System.Int64));
                },
                EnumerateKiersteadEdgeIndices: function (knowledge, board, enforceDegreeRequirement, reason) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (knowledge, board, enforceDegreeRequirement, reason) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            g,
                            internalVertices,
                            $t,
                            edgeIndex,
                            e,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                                                if (reason === void 0) { reason = ""; }
                                                g = knowledge.GraphKnowledge.Graph;
                                                internalVertices = System.Linq.Enumerable.from(g.Vertices).where(function (v) {
                                                        return g.Degree(v) >= 2;
                                                    }).toList(System.Int32);

                                                $t = Bridge.getEnumerator(knowledge.GraphKnowledge.EdgeIndices);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    edgeIndex = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            e = knowledge.GraphKnowledge.Edges.getItem(edgeIndex);
                                                if (internalVertices.contains(e.item1) && internalVertices.contains(e.item2)) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                if (Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead$1(knowledge, board, edgeIndex)) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, reason);
                                                $enumerator.current = edgeIndex;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        },
        props: {
            Reason: {
                get: function () {
                    return "run kierstead";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                return Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead(knowledge, board, true, this.Reason);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree", {
        inherits: function () { return [Algorithms.FixerBreaker.Tree$1(Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree)]; },
        props: {
            Swap: null,
            ColorPair: null,
            Board: null,
            Note: null,
            Number: 0
        },
        methods: {
            AddChild$1: function (swap) {
                var $t;
                var child = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree(), $t.Swap = swap, $t);
                this.AddChild(child);

                return child;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ReductionAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            Reason: {
                get: function () {
                    return "reducible";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var $t, $t1;
                var g = knowledge.GraphKnowledge.Graph;

                $t = Bridge.getEnumerator(knowledge.GraphKnowledge.Edges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var x = { v : Math.min(e.item1, e.item2) };
                        var y = { v : Math.max(e.item1, e.item2) };

                        var common = board.Stacks.getItem(x.v).and(board.Stacks.getItem(y.v));
                        var stacks = System.Linq.Enumerable.from(board.Stacks).toList(System.Int64);

                        $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits(common), System.Int32);
                        try {
                            while ($t1.moveNext()) {
                                var c = $t1.Current;
                                stacks.setItem(x.v, Algorithms.Int64Usage.ClearBit(board.Stacks.getItem(x.v), System.Int64(c)));
                                stacks.setItem(y.v, Algorithms.Int64Usage.ClearBit(board.Stacks.getItem(y.v), System.Int64(c)));

                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, stacks, board.Pot, (function ($me, x, y) {
                                    return function (X) {
                                        return X.contains(x.v) && X.contains(y.v) ? 1 : 0;
                                    };
                                })(this, x, y))) {
                                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, System.String.format("color {0}{1} with {2}", Bridge.box(((x.v + 1) | 0), System.Int32), Bridge.box(((y.v + 1) | 0), System.Int32), Bridge.box(c, System.Int32)));
                                    return true;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IMind],
        props: {
            StopAnalysisOnBreakerWin: false,
            NearlyColorableOnly: false,
            SuperabundantOnly: false,
            MinPot: 0,
            MaxPot: 0,
            BreakerWonBoard: null,
            FixerWonAllNearlyColorableBoards: false,
            TotalPositions: 0,
            Knowledge: null,
            ColoringAnalyzer: null,
            SwapAnalyzer: null,
            BoardLookup: null,
            BoardIDLookup: null,
            RemainingBoardIDs: null,
            WonBoardIDs: null,
            NextBoardID: 0
        },
        alias: [
            "MaxPot", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$MaxPot",
            "FixerWonAllNearlyColorableBoards", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$FixerWonAllNearlyColorableBoards",
            "TotalPositions", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$TotalPositions",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$Analyze"
        ],
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.SuperabundantOnly = false;
                this.NearlyColorableOnly = false;
                this.MaxPot = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                this.Knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.Knowledge(g);

                this.ColoringAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer();
            }
        },
        methods: {
            Analyze: function (template, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                this.BoardLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,Algorithms.FixerBreaker.Board))();
                this.BoardIDLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Int32))();
                this.WonBoardIDs = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList();
                this.SwapAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer(this.Knowledge, this.BoardLookup, this.BoardIDLookup);

                this.FixerWonAllNearlyColorableBoards = true;

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Interval(minimumColorCount, maximumColorCount), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var colorCount = $t.Current;
                        this.GenerateAllBoards(template, colorCount, progress);
                        if (foundAtLeastOneBoard && this.BoardLookup.count <= 0) {
                            break;
                        }

                        this.TotalPositions = this.BoardLookup.count;
                        foundAtLeastOneBoard = true;
                        this.RemainingBoardIDs = System.Linq.Enumerable.from(this.BoardLookup.getKeys()).toList(System.Int32);

                        var breakerWin = !this.Analyze$1(progress);
                        if (breakerWin && this.StopAnalysisOnBreakerWin) {
                            return false;
                        }

                        this.Knowledge.getItem(template).Promote(colorCount);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(this.Knowledge.getItem(template).LostBoards).count() <= 0;
            },
            Analyze$1: function (progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                var winLength = 0;

                var totalBoards = this.RemainingBoardIDs.Count;
                var lastP = -1;

                for (var i = (this.RemainingBoardIDs.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    var id = this.RemainingBoardIDs.getItem(i);

                    var b = this.BoardLookup.get(id);
                    if (this.ColoringAnalyzer.Analyze(this.Knowledge, b)) {
                        this.RemainingBoardIDs.removeAt(i);
                        this.WonBoardIDs.Add(id);

                        if (!Bridge.staticEquals(progress, null)) {
                            var p = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this.RemainingBoardIDs.Count) | 0))), totalBoards)) | 0;
                            if (p > lastP) {
                                progress({ item1: "Finding all colorable positions...", item2: p });
                                lastP = p;
                            }
                        }
                    }
                }

                while (this.RemainingBoardIDs.Count > 0) {
                    winLength = (winLength + 1) | 0;

                    var count = this.RemainingBoardIDs.Count;

                    for (var i1 = (this.RemainingBoardIDs.Count - 1) | 0; i1 >= 0; i1 = (i1 - 1) | 0) {
                        var id1 = this.RemainingBoardIDs.getItem(i1);

                        var b1 = this.BoardLookup.get(id1);
                        if (this.SwapAnalyzer.Analyze(id1, this.WonBoardIDs)) {
                            this.RemainingBoardIDs.removeAt(i1);
                            this.WonBoardIDs.Add(id1);

                            if (!Bridge.staticEquals(progress, null)) {
                                var p1 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this.RemainingBoardIDs.Count) | 0))), totalBoards)) | 0;
                                if (p1 > lastP) {
                                    progress({ item1: System.String.format("Finding all {0} move wins...", Bridge.box(winLength, System.Int32)), item2: p1 });
                                    lastP = p1;
                                }
                            }
                        }
                    }

                    if (this.RemainingBoardIDs.Count === count) {
                        $t = Bridge.getEnumerator(this.RemainingBoardIDs);
                        try {
                            while ($t.moveNext()) {
                                var id2 = $t.Current;
                                var b2 = this.BoardLookup.get(id2);
                                this.Knowledge.getItem(b2.Template.Value).getItem(b2.ColorCount).AddLoss(b2);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        var g = { v : this.Knowledge.GraphKnowledge.Graph };

                        var nearlyColorable = System.Linq.Enumerable.range(0, this.Knowledge.GraphKnowledge.LineGraph.N).all(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f1));
                        if (nearlyColorable) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(this.RemainingBoardIDs).where((function ($me, g) {
                                    return Bridge.fn.bind($me, function (id3) {
                                        var b3 = this.BoardLookup.get(id3);
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(g.v, b3) && Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b3, 0);
                                    });
                                })(this, g)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f2)).firstOrDefault(null, null);

                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = this.BoardLookup.get(System.Linq.Enumerable.from(this.RemainingBoardIDs).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f3)));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                var boards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();

                var vertices = System.Linq.Enumerable.range(0, template.Sizes.Count).toList(System.Int32);
                var potSet = System.Linq.Enumerable.range(0, colorCount).toList(System.Int32);
                var pot = Algorithms.Int64Usage.ToInt64(potSet);

                var fix = System.Linq.Enumerable.from(vertices).orderBy(function (v) {
                        return Math.abs(((template.Sizes.getItem(v) - ((Bridge.Int.div(colorCount, 2)) | 0)) | 0));
                    }).first();
                var lastP = -1;
                var current = 0;
                var total = System.Linq.Enumerable.from(vertices).aggregate(System.Int64(1), function (x, v) {
                        if (v === fix) {
                            return x;
                        }

                        return x.mul(Algorithms.Utility.ListUtility.BinomialCoefficient(System.Int64(potSet.Count), System.Int64(template.Sizes.getItem(v))));
                    });

                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(vertices).select(function (v) {
                        if (v === fix) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(potSet).take(template.Sizes.getItem(v)).toList(System.Int32));
                        }

                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, potSet, template.Sizes.getItem(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var assignmentSets = $t.Current;
                        var sets = System.Linq.Enumerable.from(assignmentSets).toList(System.Collections.Generic.List$1(System.Int32));
                        var totalColors = System.Linq.Enumerable.from(sets).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f4).distinct().count();
                        if (totalColors < colorCount) {
                            continue;
                        }

                        var stacks = System.Linq.Enumerable.from(sets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f5).toList(System.Int64);

                        if (this.SuperabundantOnly && !Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(this.Knowledge.GraphKnowledge.Graph, stacks, pot)) {
                            continue;
                        }

                        var board = new Algorithms.FixerBreaker.Board(stacks, pot);

                        var count = boards.Count;
                        boards.add(board);

                        if (boards.Count > count) {
                            this.BoardLookup.set(this.NextBoardID, board);
                            this.BoardIDLookup.set(board, this.NextBoardID);

                            this.NextBoardID = (this.NextBoardID + 1) | 0;
                        }

                        if (!Bridge.staticEquals(progress, null)) {
                            var p = System.Int64.clip32(System.Int64(Bridge.Int.mul(100, current)).div(total));
                            if (p > lastP) {
                                progress({ item1: "Finding all positions...", item2: p });
                                lastP = p;
                            }
                        }

                        current = (current + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind, {
        f1: function (e) {
            return System.Linq.Enumerable.from(this.RemainingBoardIDs).any(Bridge.fn.bind(this, function (id3) {
                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, this.BoardLookup.get(id3), e);
                }));
        },
        f2: function (id3) {
            return this.BoardLookup.get(id3);
        },
        f3: function (id3) {
            return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, this.BoardLookup.get(id3), 0);
        },
        f4: function (set) {
            return set;
        },
        f5: function (list) {
            return Algorithms.Int64Usage.ToInt64(list);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree", {
        inherits: function () { return [Algorithms.FixerBreaker.Tree$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree)]; },
        props: {
            Board: null,
            IsColorable: false,
            IsSuperabundant: false,
            IsFixerWin: false,
            GameTreeIndex: 0,
            SameAsIndex: 0,
            Info: null
        },
        methods: {
            AddChild$1: function (tree, info) {
                tree.Info = info;
                this.AddChild(tree);
            },
            equals: function (obj) {
                var gg = Bridge.as(obj, Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree);
                if (gg == null) {
                    return false;
                }

                return gg.Board.Equals(this.Board);
            },
            getHashCode: function () {
                return this.Board.getHashCode();
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo", {
        inherits: [System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo)],
        methods: {
            Add: function (breakerChoice, i, j, fixerResponse) {
                var $t;
                this.add(($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo(), $t.Partition = System.Linq.Enumerable.from(breakerChoice).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo.f1).toList(System.Collections.Generic.List$1(System.Int32)), $t.Alpha = i, $t.Beta = j, $t.Response = fixerResponse, $t.SwapVertices = Algorithms.Int64Usage.ToSet$1(fixerResponse), $t));
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo, {
        f1: function (choice) {
            return Algorithms.Int64Usage.ToSet$1(choice);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GreedyWinFilter", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter],
        fields: {
            _swapAnalyzer: null
        },
        ctors: {
            ctor: function (swapAnalyzer) {
                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter.ctor.call(this);
                this._swapAnalyzer = swapAnalyzer;
            }
        },
        methods: {
            Filter: function (R, W) {
                return Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, R, Bridge.fn.bind(this, function (b) {
                    return this._swapAnalyzer.Analyze(b, W);
                }));
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder],
        fields: {
            _permutationLinked: null
        },
        ctors: {
            ctor: function (mind, usePermutations) {
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder.ctor.call(this, mind, usePermutations);

            }
        },
        methods: {
            ExtractCases: function () {
                var $t, $t1, $t2, $t3, $t4, $t5, $t6;
                this.Cases = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase))();

                this._permutationLinked = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,System.Collections.Generic.List$1(System.Object)))();

                var indices = System.Linq.Enumerable.range(0, this.Mind.ColorableBoards.getItem(0).Stacks.Value.length).toList(System.Int32);
                var permutations = System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(indices.Count)).toList(Algorithms.Utility.Permutation);

                var caseNumber = 0;

                var colorableCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, 0, this.Mind.ColorableBoards);
                this.Cases.add(colorableCase);
                caseNumber = (caseNumber + 1) | 0;

                var remainingBoards = System.Linq.Enumerable.from(this.Mind.NonColorableBoards).except(this.Mind.BreakerWonBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                var wonBoards = System.Linq.Enumerable.from(this.Mind.ColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                while (remainingBoards.Count > 0) {
                    var proofCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber);
                    this.Cases.add(proofCase);

                    var addedRootBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    var addedBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    $t = Bridge.getEnumerator(remainingBoards);
                    try {
                        while ($t.moveNext()) {
                            var board = $t.Current;
                            if (addedBoards.contains(board)) {
                                continue;
                            }

                            var treeInfo = this.Mind.GetWinTreeInfo(board);
                            var childBoards = System.Linq.Enumerable.from(treeInfo).select(function (bc) {
                                    return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount);
                                }).distinct().toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                            if (Algorithms.Utility.ListUtility.SubsetEqual(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, childBoards, wonBoards)) {
                                addedRootBoards.add(board);
                                addedBoards.add(board);
                                this._permutationLinked.set(board, new (System.Collections.Generic.List$1(System.Object))());

                                if (this.UsePermutations) {
                                    $t1 = Bridge.getEnumerator(permutations);
                                    try {
                                        while ($t1.moveNext()) {
                                            var p = $t1.Current;
                                            var pb = board.Permute(p, indices);
                                            if (wonBoards.contains(pb) || addedBoards.contains(pb)) {
                                                continue;
                                            }

                                            var closed = true;
                                            $t2 = Bridge.getEnumerator(childBoards);
                                            try {
                                                while ($t2.moveNext()) {
                                                    var cb = $t2.Current;
                                                    if (!wonBoards.contains(cb.Permute(p, indices))) {
                                                        closed = false;
                                                        break;
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            if (closed) {
                                                this._permutationLinked.get(board).add({ item1: p, item2: pb });
                                                addedBoards.add(pb);
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }}
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t3 = Bridge.getEnumerator(addedRootBoards);
                    try {
                        while ($t3.moveNext()) {
                            var board1 = $t3.Current;
                            proofCase.AddBoard(board1);
                        }
                    } finally {
                        if (Bridge.is($t3, System.IDisposable)) {
                            $t3.System$IDisposable$dispose();
                        }
                    }
                    $t4 = Bridge.getEnumerator(addedBoards);
                    try {
                        while ($t4.moveNext()) {
                            var board2 = $t4.Current;
                            wonBoards.add(board2);
                            remainingBoards.remove(board2);
                        }
                    } finally {
                        if (Bridge.is($t4, System.IDisposable)) {
                            $t4.System$IDisposable$dispose();
                        }
                    }
                    caseNumber = (caseNumber + 1) | 0;
                }

                if (this.Mind.BreakerWonBoards.Count > 0) {
                    $t5 = Bridge.getEnumerator(System.Linq.Enumerable.from(this.Mind.BreakerWonBoards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f1)));
                    try {
                        while ($t5.moveNext()) {
                            var group = $t5.Current;
                            var lostCase = ($t6 = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber, group.toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)), $t6.BreakerWin = true, $t6.Superabundant = group.key(), $t6);
                            this.Cases.add(lostCase);
                        }
                    } finally {
                        if (Bridge.is($t5, System.IDisposable)) {
                            $t5.System$IDisposable$dispose();
                        }
                    }}
            },
            GetHandledCaseNumber: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                if (this.Cases.getItem(0).Boards.contains(childBoard)) {
                    return 1;
                }

                return ((System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase, System.Linq.Enumerable.from(this.Cases).skip(1), Bridge.fn.bind(this, function (cc) {
                        return System.Linq.Enumerable.from(cc.Boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f3)).contains(childBoard);
                    }))).first() + 2) | 0);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder, {
        f1: function (b) {
            return this.Mind.IsSuperabundant(b);
        },
        f2: function (tup) {
            return tup.item2;
        },
        f3: function (bb) {
            return System.Linq.Enumerable.from(System.Array.init([bb], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(bb)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f2));
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter],
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        ctors: {
            init: function () {
                this._fixerResponses = System.Array.init(8192, System.UInt64(0), System.UInt64);
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            }
        },
        methods: {
            Filter: function (R, W) {
                throw new System.NotImplementedException();
            },
            Analyze: function (board) {
                var colorPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        colorPairs.add({ item1: i, item2: j });
                    }
                }

                return System.Linq.Enumerable.from(colorPairs).orderBy(function (cp) {
                        return Algorithms.Int64Usage.PopulationCount$1((board._trace[System.Array.index(cp.item1, board._trace)].xor(board._trace[System.Array.index(cp.item2, board._trace)])));
                    }).select(Bridge.fn.bind(this, function (cp) {
                    var $t;
                    return ($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.ColorPairOutcome(), $t.Colors = cp, $t.FixerOutcomes = this.AnalyzeColorPair(cp, board), $t);
                }));
            },
            AnalyzeColorPair: function (colors, board) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome))(Bridge.fn.bind(this, function (colors, board) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        i,
                        j,
                        x,
                        y,
                        swappable,
                        $t,
                        breakerChoice,
                        responses,
                        $t1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        i = colors.item1;
                                            j = colors.item2;

                                            x = board._trace[System.Array.index(i, board._trace)];
                                            y = board._trace[System.Array.index(j, board._trace)];
                                            swappable = x.xor(y);

                                            $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                breakerChoice = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        this.GetFixerResponses(breakerChoice);
                                            responses = System.Linq.Enumerable.range(1, ((this._fixerResponseCount - 1) | 0)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter.f1)).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter.f2);

                                            $enumerator.current = ($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome(), $t1.BreakerChoice = breakerChoice, $t1.Exits = responses.select(function (response) {
                                                return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i, j, response, board._stackCount);
                                            }).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard), $t1);
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;
                var tableLength = this._fixerResponses.length;
                while (tableLength <= this._fixerResponseCount) {
                    tableLength = Bridge.Int.mul(tableLength, 2);
                }
                if (tableLength > this._fixerResponses.length) {
                    this._fixerResponses = System.Array.init(tableLength, System.UInt64(0), System.UInt64);
                }

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter, {
        f1: function (k) {
            return this._fixerResponses[System.Array.index(k, this._fixerResponses)];
        },
        f2: function (fr) {
            return Algorithms.Int64Usage.PopulationCount$1(fr) <= 1;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IMind],
        fields: {
            _remainingBoards: null,
            _wonBoards: null,
            _swapAnalyzer: null,
            _coloringAnalyzer: null,
            _graph: null,
            _lineGraph: null,
            _edges: null,
            _totalPositions: 0,
            _gameTreeIndex: 0
        },
        props: {
            MinPot: 0,
            MaxPot: 0,
            FixerWonAllNearlyColorableBoards: false,
            HasNonSuperabundantBoardThatIsNearlyColorable: false,
            TotalPositions: {
                get: function () {
                    return this._totalPositions;
                }
            },
            BreakerWonBoard: null,
            BoardCounts: null,
            BoardCountsList: null,
            OnlyConsiderNearlyColorableBoards: false,
            ExcludeNonNearlyColorableNonSuperabundantBoards: false,
            MissingEdgeIndex: 0,
            SuperabundantOnly: false,
            ThinkHarder: false,
            PerformCompleteAnalysis: false,
            ColoringAnalyzer: {
                get: function () {
                    return this._coloringAnalyzer;
                }
            },
            NonColorableBoards: null,
            ColorableBoards: null,
            BreakerWonBoards: null,
            FixerWonBoards: {
                get: function () {
                    return this._wonBoards;
                }
            },
            BoardsOfDepth: null,
            ExtraPsi: 0,
            WinFilter: null
        },
        alias: [
            "MaxPot", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$MaxPot",
            "FixerWonAllNearlyColorableBoards", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$FixerWonAllNearlyColorableBoards",
            "TotalPositions", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$TotalPositions",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$Analyze"
        ],
        ctors: {
            ctor: function (g, proofFindingMode, weaklyFixable) {
                if (proofFindingMode === void 0) { proofFindingMode = false; }
                if (weaklyFixable === void 0) { weaklyFixable = false; }

                this.$initialize();
                this._graph = g;
                this.BuildLineGraph();

                this._coloringAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimColoringAnalyzer(this._lineGraph, Bridge.fn.cacheBind(this, this.GetEdgeColorList));
                this._swapAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer(g.N, proofFindingMode, proofFindingMode || weaklyFixable);
                this._wonBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).ctor();
                this._remainingBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                this.MissingEdgeIndex = -1;
            }
        },
        methods: {
            Analyze: function (template, progress) {
                if (progress === void 0) { progress = null; }
                this._wonBoards.clear();
                this._remainingBoards.clear();
                this.BoardCountsList = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                this.BreakerWonBoard = null;
                this.NonColorableBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                this.ColorableBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                this.BreakerWonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                if (this.WinFilter == null) {
                    this.WinFilter = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GreedyWinFilter(this._swapAnalyzer);
                }

                this.FixerWonAllNearlyColorableBoards = true;

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                var fixerWin = true;
                for (var colorCount = minimumColorCount; colorCount <= maximumColorCount; colorCount = (colorCount + 1) | 0) {
                    this.GenerateAllBoards(template, colorCount, progress);
                    if (this.OnlyConsiderNearlyColorableBoards) {
                        if (this.MissingEdgeIndex >= 0) {
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this._remainingBoards, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f1), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f2);
                        } else {
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this._remainingBoards, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f3), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f2);
                        }
                    }

                    if (foundAtLeastOneBoard && this._remainingBoards.Count <= 0) {
                        break;
                    }

                    this._totalPositions = (this._remainingBoards.Count + this._wonBoards.Count) | 0;
                    foundAtLeastOneBoard = true;

                    fixerWin = !!(fixerWin & this.Analyze$1(progress));
                }

                return fixerWin;
            },
            Analyze$1: function (progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                var winLength = 0;
                var totalBoards = this._remainingBoards.Count;
                var lastP = -1;

                this.BoardsOfDepth = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)))();
                this.BoardCounts = new (System.Collections.Generic.List$1(System.Int32))();
                this.BoardCountsList.add(this.BoardCounts);
                this.BoardCounts.add(this._remainingBoards.Count);

                for (var i = (this._remainingBoards.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    var b = this._remainingBoards.getItem(i);
                    if (this._coloringAnalyzer.Analyze(b)) {
                        this._remainingBoards.removeAt(i);
                        this._wonBoards.add(b);
                        this.ColorableBoards.add(b);
                    }

                    if (!Bridge.staticEquals(progress, null)) {
                        var p = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p > lastP) {
                            progress({ item1: "Finding all colorable positions...", item2: p });
                            lastP = p;
                        }
                    }
                }

                this.BoardsOfDepth.set(winLength, System.Linq.Enumerable.from(this._wonBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
                this.BoardCounts.add(this._remainingBoards.Count);

                var nonSuperabundantBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                for (var i1 = (this._remainingBoards.Count - 1) | 0; i1 >= 0; i1 = (i1 - 1) | 0) {
                    var b1 = this._remainingBoards.getItem(i1);
                    if (!this.IsSuperabundant(b1)) {
                        if (this.OnlyConsiderNearlyColorableBoards && this.MissingEdgeIndex >= 0) {
                            this.HasNonSuperabundantBoardThatIsNearlyColorable = true;
                            this.BreakerWonBoard = b1;

                            if (!this.PerformCompleteAnalysis) {
                                return false;
                            }
                        }

                        this._remainingBoards.removeAt(i1);
                        nonSuperabundantBoards.add(b1);
                    }

                    if (!Bridge.staticEquals(progress, null)) {
                        var p1 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p1 > lastP) {
                            progress({ item1: "Finding all non-superabundant positions...", item2: p1 });
                            lastP = p1;
                        }
                    }
                }

                if (nonSuperabundantBoards.Count > 0 && !this.SuperabundantOnly) {
                    if (!this.OnlyConsiderNearlyColorableBoards && !this.ExcludeNonNearlyColorableNonSuperabundantBoards) {
                        this.FixerWonAllNearlyColorableBoards = false;
                        this.BreakerWonBoard = nonSuperabundantBoards.getItem(0);
                        this.BreakerWonBoards.addRange(nonSuperabundantBoards);

                        if (!this.PerformCompleteAnalysis) {
                            return false;
                        }
                    } else if (this.ExistsNearlyColorableBoardForEachEdge(nonSuperabundantBoards)) {
                        this.FixerWonAllNearlyColorableBoards = false;
                        this.HasNonSuperabundantBoardThatIsNearlyColorable = true;
                        this.BreakerWonBoard = nonSuperabundantBoards.getItem(0);
                        this.BreakerWonBoards.addRange(nonSuperabundantBoards);
                        if (!this.PerformCompleteAnalysis) {
                            return false;
                        }
                    }
                }

                this.BoardCounts.add(this._remainingBoards.Count);
                this.NonColorableBoards.addRange(this._remainingBoards);

                while (this._remainingBoards.Count > 0) {
                    var count = this._remainingBoards.Count;
                    winLength = (winLength + 1) | 0;

                    var boardIndicesToAdd = { v : System.Linq.Enumerable.from(this.WinFilter.Filter(this._remainingBoards, this._wonBoards)).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f4).toList(System.Int32) };
                    var wonBoards = System.Linq.Enumerable.from(this._remainingBoards).where((function ($me, boardIndicesToAdd) {
                            return function (b2, i2) {
                                return boardIndicesToAdd.v.contains(i2);
                            };
                        })(this, boardIndicesToAdd)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    $t = Bridge.getEnumerator(wonBoards);
                    try {
                        while ($t.moveNext()) {
                            var b2 = $t.Current;
                            this._wonBoards.add(b2);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }this.BoardsOfDepth.set(winLength, wonBoards);

                    $t1 = Bridge.getEnumerator(boardIndicesToAdd.v);
                    try {
                        while ($t1.moveNext()) {
                            var i2 = $t1.Current;
                            this._remainingBoards.removeAt(i2);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (!Bridge.staticEquals(progress, null)) {
                        var p2 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p2 > lastP) {
                            progress({ item1: System.String.format("Finding all {0} move wins...", Bridge.box(winLength, System.Int32)), item2: p2 });
                            lastP = p2;
                        }
                    }

                    this.BoardCounts.add(this._remainingBoards.Count);

                    if (this._remainingBoards.Count === count) {
                        this.BreakerWonBoards.addRange(this._remainingBoards);

                        if (this.BreakerWonBoard == null) {
                            this.BreakerWonBoard = this._remainingBoards.getItem(0);
                        }

                        if (this.OnlyConsiderNearlyColorableBoards && this.MissingEdgeIndex >= 0) {
                            this.FixerWonAllNearlyColorableBoards = false;
                        } else if (this.ExistsNearlyColorableBoardForEachEdge(this._remainingBoards)) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(this._remainingBoards).firstOrDefault(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f5), null);

                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = System.Linq.Enumerable.from(this._remainingBoards).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f5));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            NearlyColorableForEdge: function (board, edgeIndex) {
                return this._coloringAnalyzer.ColorableWithoutEdge(board, edgeIndex);
            },
            ExistsNearlyColorableBoardForEachEdge: function (boards) {
                return System.Linq.Enumerable.range(0, this._lineGraph.N).all(Bridge.fn.bind(this, function (e) {
                    return System.Linq.Enumerable.from(boards).any(Bridge.fn.bind(this, function (b) {
                            return this.NearlyColorableForEdge(b, e);
                        }));
                }));
            },
            NearlyColorableForSomeEdge: function (board) {
                return System.Linq.Enumerable.range(0, this._lineGraph.N).any(Bridge.fn.bind(this, function (e) {
                    return this.NearlyColorableForEdge(board, e);
                }));
            },
            LookAtSuperabundance: function () {
                var packs = System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f6)).toList(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
                var goodPacks = System.Linq.Enumerable.from(packs).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f8)).toList(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
            },
            IsSuperabundant: function (b) {
                var subset = System.UInt64(0);

                var total = 0;
                while (subset.lt((System.UInt64(1).shl(b._stackCount)))) {
                    total = 0;
                    for (var i = 0; i < b._length; i = (i + 1) | 0) {
                        total = (total + (((Bridge.Int.div(Algorithms.Int64Usage.PopulationCount$1((subset.and(b._trace[System.Array.index(i, b._trace)]))), 2)) | 0))) | 0;
                    }

                    var e = this._graph.EdgesOn(Algorithms.Int64Usage.ToSet$1(subset));
                    if (total < e) {
                        return false;
                    }

                    subset = subset.inc();
                }

                if (this.ExtraPsi > 0) {
                    return total >= ((this._graph.E + this.ExtraPsi) | 0);
                }

                return true;
            },
            ComputeAbundanceSurplus: function (b) {
                var total = 0;
                for (var i = 0; i < b._length; i = (i + 1) | 0) {
                    total = (total + (((Bridge.Int.div(Algorithms.Int64Usage.PopulationCount$1(b._trace[System.Array.index(i, b._trace)]), 2)) | 0))) | 0;
                }

                return ((total - this._graph.E) | 0);
            },
            ComputeMatchingAbundanceShadow: function (b) {
                var shadow = new (System.Collections.Generic.List$1(System.Int32))();

                var subset = System.UInt64(0);
                while (subset.lt((System.UInt64(1).shl(b._stackCount)))) {
                    var e = { };
                    if (!this.IsMatchingAbundant(b, subset, e)) {
                        shadow.add(e.v);
                    }
                    subset = subset.inc();
                }

                shadow.sort();

                return shadow;
            },
            IsMatchingAbundant: function (b, subset, e) {
                e.v = this._graph.EdgesOn(Algorithms.Int64Usage.ToSet$1(subset));

                var total = 0;
                for (var i = 0; i < b._length; i = (i + 1) | 0) {
                    var vc = Algorithms.Int64Usage.ToSet$1((subset.and(b._trace[System.Array.index(i, b._trace)])));
                    total = (total + (this._lineGraph.IndependenceNumber$1(this._graph.EdgeIndicesOn(vc)))) | 0;
                }

                return total >= e.v;
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                if (!Bridge.staticEquals(progress, null)) {
                    progress({ item1: "Finding all positions...", item2: 0 });
                }

                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ulong.Generate(template.Sizes, colorCount));
                try {
                    while ($t.moveNext()) {
                        var t = $t.Current;
                        var b = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(t, template.Sizes.Count);
                        this._remainingBoards.add(b);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            BuildLineGraph: function () {
                var adjacent = this._graph.Adjacent;
                var n = ((System.Array.getLength(adjacent, 0) - 1) + 1) | 0;

                this._edges = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        if (adjacent.get([i, j])) {
                            this._edges.add({ item1: i, item2: j });
                        }
                    }
                }

                var meets = System.Array.create(false, null, System.Boolean, this._edges.Count, this._edges.Count);
                for (var i1 = 0; i1 < this._edges.Count; i1 = (i1 + 1) | 0) {
                    for (var j1 = (i1 + 1) | 0; j1 < this._edges.Count; j1 = (j1 + 1) | 0) {
                        if (this._edges.getItem(i1).item1 === this._edges.getItem(j1).item1 || this._edges.getItem(i1).item1 === this._edges.getItem(j1).item2 || this._edges.getItem(i1).item2 === this._edges.getItem(j1).item1 || this._edges.getItem(i1).item2 === this._edges.getItem(j1).item2) {
                            meets.set([i1, j1], (meets.set([j1, i1], true), true));
                        }
                    }
                }

                this._lineGraph = new Algorithms.Graph.ctor(meets);
            },
            GetEdgeColorList: function (b, e) {
                var v1 = this._edges.getItem(e).item1;
                var v2 = this._edges.getItem(e).item2;
                var stacks = b.Stacks.Value;

                return stacks[System.Array.index(v1, stacks)].and(stacks[System.Array.index(v2, stacks)]);
            },
            GetWinTreeInfo: function (board) {
                return this._swapAnalyzer.WinTreeInfo.get(board);
            },
            BuildGameTree: function (board, win) {
                if (win === void 0) { win = true; }
                var seenBoards = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,System.Int32))();
                this._gameTreeIndex = 1;
                return this.BuildGameTree$1(board, seenBoards, win);
            },
            BuildGameTree$1: function (board, seenBoards, win, depth) {
                var $t;
                if (win === void 0) { win = true; }
                if (depth === void 0) { depth = 0; }
                seenBoards.set(board, this._gameTreeIndex);
                var tree = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree(), $t.Board = board, $t.IsFixerWin = win, $t);
                tree.IsColorable = this._coloringAnalyzer.Analyze(board);
                tree.IsSuperabundant = win || this.IsSuperabundant(board);
                tree.GameTreeIndex = this._gameTreeIndex;
                this._gameTreeIndex = (this._gameTreeIndex + 1) | 0;

                if (tree.IsColorable) {
                    return tree;
                }

                if (!tree.IsSuperabundant) {
                    return tree;
                }

                var treeInfo = { };
                if (win) {
                    this._swapAnalyzer.WinTreeInfo.tryGetValue(board, treeInfo);
                } else {
                    this._swapAnalyzer.LossTreeInfo.tryGetValue(board, treeInfo);
                }

                if (treeInfo.v != null) {
                    var localSeenBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).ctor();
                    $t = Bridge.getEnumerator(treeInfo.v);
                    try {
                        while ($t.moveNext()) {
                            var bc = $t.Current;
                            var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount);
                            if (localSeenBoards.contains(childBoard)) {
                                continue;
                            }
                            localSeenBoards.add(childBoard);

                            if (!win && seenBoards.containsKey(childBoard)) {
                                continue;
                            }

                            var childTree = this.BuildGameTree$1(childBoard, seenBoards, win, ((depth + 1) | 0));
                            tree.AddChild$1(childTree, bc);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return tree;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind, {
        f1: function (b) {
            return !this.NearlyColorableForEdge(b, this.MissingEdgeIndex);
        },
        f2: function (x) { },
        f3: function (b) {
            return !this.NearlyColorableForSomeEdge(b);
        },
        f4: function (x) {
            return x;
        },
        f5: function (b3) {
            return this._coloringAnalyzer.ColorableWithoutEdge(b3, 0);
        },
        f6: function (e) {
            return System.Linq.Enumerable.from(this._remainingBoards).where(Bridge.fn.bind(this, function (b) {
                    return this._coloringAnalyzer.ColorableWithoutEdge(b, e);
                })).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
        },
        f7: function (ssb) {
            return this.IsSuperabundant(ssb);
        },
        f8: function (pack) {
            return System.Linq.Enumerable.from(pack).all(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f7));
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            SubTemplates: null,
            Reason: {
                get: function () {
                    return "sub template";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        ctors: {
            ctor: function (subTemplates) {
                if (subTemplates === void 0) { subTemplates = []; }

                this.$initialize();
                this.SubTemplates = System.Linq.Enumerable.from(subTemplates).toList(Algorithms.FixerBreaker.KnowledgeEngine.Template);
            }
        },
        methods: {
            Analyze: function (knowledge, board) {
                var $t;
                $t = Bridge.getEnumerator(this.SubTemplates);
                try {
                    while ($t.moveNext()) {
                        var template = $t.Current;
                        var color = { };
                        var x = { };
                        if (this.ContainsSuberabundantSubStacksAboveTemplate(knowledge, board, template, color, x)) {
                            knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, System.String.format("set L({0}) = L({0}) - {1}", Bridge.box(((x.v + 1) | 0), System.Int32), Bridge.box(color.v, System.Int32)));
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            ContainsSuberabundantSubStacksAboveTemplate: function (knowledge, board, template, color, x) {
                var $t;
                color.v = -1;
                x.v = -1;
                var g = knowledge.GraphKnowledge.Graph;
                var stackSets = System.Linq.Enumerable.from(board.Stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer.f1).toList(System.Collections.Generic.List$1(System.Int32));
                var bigs = System.Linq.Enumerable.range(0, stackSets.Count).count(function (i) {
                    return stackSets.getItem(i).Count > template.Sizes.getItem(i);
                });
                if (bigs <= 0 || bigs > 1) {
                    return false;
                }

                var shrinkable = System.Linq.Enumerable.range(0, stackSets.Count).where(function (i) {
                    return stackSets.getItem(i).Count === ((template.Sizes.getItem(i) + 1) | 0);
                }).toList(System.Int32);
                if (shrinkable.Count <= 0) {
                    return false;
                }

                x.v = shrinkable.getItem(0);
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(stackSets.getItem(x.v)).toList(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        stackSets.getItem(x.v).remove(c);

                        if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, System.Linq.Enumerable.from(stackSets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer.f2).toList(System.Int64), board.Pot)) {
                            color.v = c;
                            return true;
                        }

                        stackSets.getItem(x.v).add(c);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer, {
        f1: function (s) {
            return Algorithms.Int64Usage.ToSet(s);
        },
        f2: function (s) {
            return Algorithms.Int64Usage.ToInt64(s);
        }
    });

    Bridge.define("Algorithms.Graph.IsomorphismComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(Algorithms.Graph)],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$Algorithms$Graph$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$Algorithms$Graph$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return Algorithms.Graph.Isomorphic(x, y);
            },
            getHashCode2: function (g) {
                return 0;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastTarpitEnumerator", {
        inherits: [Algorithms.WordGame.TarpitEnumerator],
        statics: {
            fields: {
                EmptyList: null
            },
            ctors: {
                init: function () {
                    this.EmptyList = new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))();
                }
            }
        },
        fields: {
            _words: null,
            _accessibilityChecker: null
        },
        ctors: {
            ctor: function (n) {
                this.$initialize();
                Algorithms.WordGame.TarpitEnumerator.ctor.call(this);
                this._words = new Algorithms.WordGame.Optimized.FastWordGenerator().GenerateWords(n);
                this._accessibilityChecker = new Algorithms.WordGame.Optimized.FastAccessibilityChecker(n);
            }
        },
        methods: {
            GenerateMinimalTarpits: function (foundTarpit) {
                this.GenerateMinimalTarpitsFast(Bridge.fn.bind(this, function (l) {
                    foundTarpit(System.Linq.Enumerable.from(l).select(Bridge.fn.bind(this, $asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f1)).toList(System.String));
                }));
            },
            GenerateMinimalTarpitsFast: function (foundTarpit) {
                this.GenerateMinimalTarpitsFastIn(this._words, new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))(), foundTarpit);
            },
            GenerateMinimalTarpitsFastIn: function (S, mustHaves, foundTarpit) {
                var $t, $t1;
                var excluded = false;

                var extendedMustHaves = System.Linq.Enumerable.from(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord);
                var T = System.Linq.Enumerable.from(S).except(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord);

                $t = Bridge.getEnumerator(T);
                try {
                    while ($t.moveNext()) {
                        var w = $t.Current;
                        var W = this.RunEscape$1(System.Linq.Enumerable.from(S).except(System.Array.init([w], Algorithms.WordGame.Optimized.FastWord)), extendedMustHaves);

                        if (W != null && W.Count > 0) {
                            excluded = true;
                            this.GenerateMinimalTarpitsFastIn(W, extendedMustHaves, foundTarpit);
                        }

                        extendedMustHaves.add(w);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                if (!excluded) {
                    $t1 = Bridge.getEnumerator(mustHaves);
                    try {
                        while ($t1.moveNext()) {
                            var w1 = $t1.Current;
                            var W1 = this.RunEscape(System.Linq.Enumerable.from(S).except(System.Array.init([w1], Algorithms.WordGame.Optimized.FastWord)));
                            if (W1.Count > 0) {
                                excluded = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (!excluded) {
                        foundTarpit(S);
                    }
                }
            },
            RunEscape$1: function (S, mustHaves) {
                var $t;
                var T = System.Linq.Enumerable.from(S).toList(Algorithms.WordGame.Optimized.FastWord);
                var R = new (System.Collections.Generic.HashSet$1(Algorithms.WordGame.Optimized.FastWord)).$ctor1(System.Linq.Enumerable.from(this._words).except(T));
                while (true) {
                    if (System.Linq.Enumerable.from(mustHaves).any(Bridge.fn.bind(this, function (w) {
                            return this._accessibilityChecker.IsAccessible(w, R);
                        }))) {
                        return null;
                    }

                    var escapers = System.Linq.Enumerable.from(T).except(mustHaves).where(Bridge.fn.bind(this, function (w) {
                        return this._accessibilityChecker.IsAccessible(w, R);
                    })).toList(Algorithms.WordGame.Optimized.FastWord);

                    $t = Bridge.getEnumerator(escapers);
                    try {
                        while ($t.moveNext()) {
                            var w = $t.Current;
                            T.remove(w);
                            R.add(w);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (escapers.Count <= 0) {
                        break;
                    }
                }

                return T;
            },
            RunEscape: function (S) {
                return this.RunEscape$1(S, Algorithms.WordGame.Optimized.FastTarpitEnumerator.EmptyList);
            },
            Wordify: function (b) {
                var $t;
                var st = System.Array.init(b._stackCount, System.Int64(0), System.Int64);
                var traceBits = System.Linq.Enumerable.from(b._trace).select($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f2).toList(System.Collections.Generic.List$1(System.Int32));
                for (var c = 0; c < traceBits.Count; c = (c + 1) | 0) {
                    $t = Bridge.getEnumerator(traceBits.getItem(c));
                    try {
                        while ($t.moveNext()) {
                            var i = $t.Current;
                            st[System.Array.index(i, st)] = st[System.Array.index(i, st)].or((System.Int64(1).shl(c)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return Bridge.toArray(System.Linq.Enumerable.from(st).select($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f3)).join("");
            },
            EnumerateMinimalTarpits: function () {
                return System.Linq.Enumerable.from(this.EnumerateMinimalTarpitsFast()).select(Bridge.fn.bind(this, $asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f4));
            },
            EnumerateMinimalTarpitsFast: function () {
                var explored = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))).$ctor3(new Algorithms.WordGame.Optimized.FastTarpitEnumerator.SortedListComparer());
                return this.EnumerateMinimalTarpitsFastIn(this._words, explored, new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))());
            },
            EnumerateMinimalTarpitsFastIn: function (S, explored, mustHaves) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord)))(Bridge.fn.bind(this, function (S, explored, mustHaves) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        excluded,
                        $t,
                        w,
                        W,
                        $t1,
                        TP,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        excluded = false;

                                            $t = Bridge.getEnumerator(S);
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                w = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 2: {
                                        W = this.RunEscape(System.Linq.Enumerable.from(S).except(System.Array.init([w], Algorithms.WordGame.Optimized.FastWord)));
                                            if (W.Count <= 0) {
                                                $step = 1;
                                                continue;
                                            }

                                            excluded = true;

                                            if (Algorithms.Utility.ListUtility.SubsetEqual(Algorithms.WordGame.Optimized.FastWord, mustHaves, W) && !explored.contains(W)) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 8;
                                            continue;
                                    }
                                    case 3: {
                                        $t1 = Bridge.getEnumerator(this.EnumerateMinimalTarpitsFastIn(W, explored, System.Linq.Enumerable.from(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord)), System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t1.moveNext()) {
                                                TP = $t1.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        $enumerator.current = TP;
                                            $step = 6;
                                            return true;
                                    }
                                    case 6: {
                                        $step = 4;
                                        continue;
                                    }
                                    case 7: {
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        explored.add(W);
                                            mustHaves.add(w);
                                        $step = 1;
                                        continue;
                                    }
                                    case 9: {
                                        if (!excluded) {
                                                $step = 10;
                                                continue;
                                            } 
                                            $step = 12;
                                            continue;
                                    }
                                    case 10: {
                                        $enumerator.current = System.Linq.Enumerable.from(S).toList(Algorithms.WordGame.Optimized.FastWord);
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.Optimized.FastTarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator, {
        f1: function (s) {
            return this.Wordify(s);
        },
        f2: function (t) {
            return Algorithms.Int64Usage.ToSet$1(t);
        },
        f3: function (s) {
            switch (s.toString()) {
                case "1": 
                    return 120;
                case "2": 
                    return 121;
                case "4": 
                    return 122;
                default: 
                    return 63;
            }
        },
        f4: function (list) {
            return System.Linq.Enumerable.from(list).select(Bridge.fn.cacheBind(this, this.Wordify)).toList(System.String);
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastTarpitEnumerator.SortedListComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$Algorithms$WordGame$Optimized$FastWord$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$Algorithms$WordGame$Optimized$FastWord$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (list) {
                var $t;
                var hash = 19;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 31) | 0) + x.getHashCode()) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.ReferenceTarpitEnumerator", {
        inherits: [Algorithms.WordGame.TarpitEnumerator],
        fields: {
            _words: null,
            _accessibilityChecker: null
        },
        ctors: {
            ctor: function (n) {
                this.$initialize();
                Algorithms.WordGame.TarpitEnumerator.ctor.call(this);
                this._words = System.Linq.Enumerable.from(new Algorithms.WordGame.WordEnumerator.$ctor1(Algorithms.WordGame.TarpitEnumerator.Alphabet).EnumerateWords(n)).toList(System.String);
                this._accessibilityChecker = new Algorithms.WordGame.AccessibilityChecker(Algorithms.WordGame.TarpitEnumerator.Alphabet);
            }
        },
        methods: {
            EnumerateMinimalTarpits: function () {
                var seen = new (System.Collections.Generic.HashSet$1(System.String)).ctor();
                return this.EnumerateMinimalTarpitsIn(this._words, seen);
            },
            EnumerateMinimalTarpitsIn: function (S, seen) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function (S, seen) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        excluded,
                        $t,
                        T,
                        W,
                        key,
                        $t1,
                        TP,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        excluded = false;
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(S).select(function (w) {
                                                    return System.Linq.Enumerable.from(S).except(System.Array.init([w], System.String)).toList(System.String);
                                                }));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                T = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 2: {
                                        W = this.RunEscape(T);
                                            if (W.Count <= 0) {
                                                $step = 1;
                                                continue;
                                            }

                                            excluded = true;

                                            key = this.GenerateSimpleKey(W);
                                            if (seen.contains(key)) {
                                                $step = 1;
                                                continue;
                                            }

                                            seen.add(key);
                                            $t1 = Bridge.getEnumerator(this.EnumerateMinimalTarpitsIn(W, seen), System.Collections.Generic.List$1(System.String));
                                            $step = 3;
                                            continue;
                                    }
                                    case 3: {
                                        if ($t1.moveNext()) {
                                                TP = $t1.Current;
                                                $step = 4;
                                                continue;
                                            }
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $enumerator.current = TP;
                                            $step = 5;
                                            return true;
                                    }
                                    case 5: {
                                        $step = 3;
                                        continue;
                                    }
                                    case 6: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 7: {
                                        if (!excluded) {
                                                $step = 8;
                                                continue;
                                            } 
                                            $step = 10;
                                            continue;
                                    }
                                    case 8: {
                                        $enumerator.current = System.Linq.Enumerable.from(S).orderBy($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f1).toList(System.String);
                                            $step = 9;
                                            return true;
                                    }
                                    case 9: {
                                        $step = 10;
                                        continue;
                                    }
                                    case 10: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            RunEscape: function (S) {
                var T = System.Linq.Enumerable.from(S).toList(System.String);
                while (true) {
                    var R = { v : Algorithms.Utility.ListUtility.Difference(System.String, this._words, T) };
                    if (Algorithms.GenericExtensions.RemoveAll(System.String, T, (function ($me, R) {
                        return Bridge.fn.bind($me, function (w) {
                            return this._accessibilityChecker.IsAccessible(w, R.v);
                        });
                    })(this, R), $asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f2) <= 0) {
                        break;
                    }
                }

                return T;
            },
            GenerateSimpleKey: function (S) {
                return Bridge.toArray(System.Linq.Enumerable.from(S).orderBy($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f1)).join(",");
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.ReferenceTarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator, {
        f1: function (s) {
            return s;
        },
        f2: function (x) { }
    });

    Bridge.define("BitLevelGeneration.BitGraph_long", {
        inherits: [BitLevelGeneration.IGraph_long],
        fields: {
            _vertices: null,
            _neighborhood: null
        },
        props: {
            N: {
                get: function () {
                    return this._vertices.length;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            }
        },
        alias: [
            "N", "BitLevelGeneration$IGraph_long$N",
            "Vertices", "BitLevelGeneration$IGraph_long$Vertices",
            "IsIndependent", "BitLevelGeneration$IGraph_long$IsIndependent",
            "Degree", "BitLevelGeneration$IGraph_long$Degree",
            "DegreeInSet", "BitLevelGeneration$IGraph_long$DegreeInSet",
            "NeighborsInSet", "BitLevelGeneration$IGraph_long$NeighborsInSet",
            "MaximalIndependentSubsets", "BitLevelGeneration$IGraph_long$MaximalIndependentSubsets"
        ],
        ctors: {
            ctor: function (edgeWeights) {
                this.$initialize();
                var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);

                this._neighborhood = System.Array.init(n, System.Int64(0), System.Int64);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    var iBit = System.Int64(1).shl(i);
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        var jBit = System.Int64(1).shl(j);

                        if (edgeWeights.getItem(k) !== 0) {
                            this._neighborhood[System.Array.index(i, this._neighborhood)] = this._neighborhood[System.Array.index(i, this._neighborhood)].or(jBit);
                            this._neighborhood[System.Array.index(j, this._neighborhood)] = this._neighborhood[System.Array.index(j, this._neighborhood)].or(iBit);
                        }

                        k = (k + 1) | 0;
                    }
                }
            },
            $ctor1: function (n, neighborhood) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);
                this._neighborhood = neighborhood;
            }
        },
        methods: {
            IsIndependent: function (set) {
                return BitLevelGeneration.BitUsage_long.TrueForAllBitIndices(set, Bridge.fn.bind(this, function (i) {
                    return (this._neighborhood[System.Array.index(i, this._neighborhood)].and(set)).equals(System.Int64(0));
                }));
            },
            Degree: function (v) {
                return BitLevelGeneration.BitUsage_long.PopulationCount(this._neighborhood[System.Array.index(v, this._neighborhood)]);
            },
            DegreeInSet: function (v, set) {
                return BitLevelGeneration.BitUsage_long.PopulationCount((this._neighborhood[System.Array.index(v, this._neighborhood)].and(set)));
            },
            NeighborsInSet: function (v, set) {
                return this._neighborhood[System.Array.index(v, this._neighborhood)].and(set);
            },
            MaximalIndependentSubsets: function (set) {
                var list = new (System.Collections.Generic.List$1(System.Int64))(8);
                this.BronKerbosch(set, System.Int64(0), System.Int64(0), list);
                return list;
            },
            BronKerbosch: function (P, R, X, list) {
                if (P.equals(System.Int64(0)) && X.equals(System.Int64(0))) {
                    list.add(R);
                } else {
                    var u = this.TomitaPivot(P, X);
                    var q = P.and(((System.Int64(1).shl(u)).or(this._neighborhood[System.Array.index(u, this._neighborhood)])));

                    while (q.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);
                        var non = (bit.or(this._neighborhood[System.Array.index(v, this._neighborhood)])).not();

                        this.BronKerbosch(P.and(non), R.or(bit), X.and(non), list);

                        q = q.xor(bit);
                        P = P.xor(bit);
                        X = X.or(bit);
                    }
                }
            },
            TomitaPivot: function (P, X) {
                var min = 2147483647;
                var best = -1;
                var q = P.or(X);

                while (q.ne(System.Int64(0))) {
                    var bit = q.and(q.neg());
                    var u = BitLevelGeneration.BitUsage_long.Extract(bit);

                    var n = BitLevelGeneration.BitUsage_long.PopulationCount(((bit.or(this._neighborhood[System.Array.index(u, this._neighborhood)])).and(P)));
                    if (n < min) {
                        min = n;
                        best = u;
                    }

                    q = q.xor(bit);
                }

                return best;
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitGraph_uint", {
        inherits: [BitLevelGeneration.IGraph_uint],
        fields: {
            _vertices: null,
            _neighborhood: null
        },
        props: {
            N: {
                get: function () {
                    return this._vertices.length;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            }
        },
        alias: [
            "N", "BitLevelGeneration$IGraph_uint$N",
            "Vertices", "BitLevelGeneration$IGraph_uint$Vertices",
            "IsIndependent", "BitLevelGeneration$IGraph_uint$IsIndependent",
            "Degree", "BitLevelGeneration$IGraph_uint$Degree",
            "DegreeInSet", "BitLevelGeneration$IGraph_uint$DegreeInSet",
            "NeighborsInSet", "BitLevelGeneration$IGraph_uint$NeighborsInSet",
            "MaximalIndependentSubsets", "BitLevelGeneration$IGraph_uint$MaximalIndependentSubsets"
        ],
        ctors: {
            ctor: function (edgeWeights) {
                this.$initialize();
                var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);

                this._neighborhood = System.Array.init(n, 0, System.UInt32);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    var iBit = (1 << i) >>> 0;
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        var jBit = (1 << j) >>> 0;

                        if (edgeWeights.getItem(k) !== 0) {
                            this._neighborhood[System.Array.index(i, this._neighborhood)] = (this._neighborhood[System.Array.index(i, this._neighborhood)] | jBit) >>> 0;
                            this._neighborhood[System.Array.index(j, this._neighborhood)] = (this._neighborhood[System.Array.index(j, this._neighborhood)] | iBit) >>> 0;
                        }

                        k = (k + 1) | 0;
                    }
                }
            },
            $ctor1: function (n, neighborhood) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);
                this._neighborhood = neighborhood;
            }
        },
        methods: {
            IsIndependent: function (set) {
                return BitLevelGeneration.BitUsage_uint.TrueForAllBitIndices(set, Bridge.fn.bind(this, function (i) {
                    return (((this._neighborhood[System.Array.index(i, this._neighborhood)] & set) >>> 0)) === 0;
                }));
            },
            Degree: function (v) {
                return BitLevelGeneration.BitUsage_uint.PopulationCount(this._neighborhood[System.Array.index(v, this._neighborhood)]);
            },
            DegreeInSet: function (v, set) {
                return BitLevelGeneration.BitUsage_uint.PopulationCount((((this._neighborhood[System.Array.index(v, this._neighborhood)] & set) >>> 0)));
            },
            NeighborsInSet: function (v, set) {
                return ((this._neighborhood[System.Array.index(v, this._neighborhood)] & set) >>> 0);
            },
            MaximalIndependentSubsets: function (set) {
                var list = new (System.Collections.Generic.List$1(System.UInt32))(8);
                this.BronKerbosch(set, 0, 0, list);
                return list;
            },
            BronKerbosch: function (P, R, X, list) {
                if (P === 0 && X === 0) {
                    list.add(R);
                } else {
                    var u = this.TomitaPivot(P, X);
                    var q = (P & ((((((1 << u) >>> 0)) | this._neighborhood[System.Array.index(u, this._neighborhood)]) >>> 0))) >>> 0;

                    while (q !== 0) {
                        var bit = (q & (((~q + 1) >>> 0))) >>> 0;
                        var v = BitLevelGeneration.BitUsage_uint.Extract(bit);
                        var non = ~(((bit | this._neighborhood[System.Array.index(v, this._neighborhood)]) >>> 0));

                        this.BronKerbosch(((P & non) >>> 0), ((R | bit) >>> 0), ((X & non) >>> 0), list);

                        q = (q ^ bit) >>> 0;
                        P = (P ^ bit) >>> 0;
                        X = (X | bit) >>> 0;
                    }
                }
            },
            TomitaPivot: function (P, X) {
                var min = 2147483647;
                var best = -1;
                var q = (P | X) >>> 0;

                while (q !== 0) {
                    var bit = (q & (((~q + 1) >>> 0))) >>> 0;
                    var u = BitLevelGeneration.BitUsage_uint.Extract(bit);

                    var n = BitLevelGeneration.BitUsage_uint.PopulationCount(((((((bit | this._neighborhood[System.Array.index(u, this._neighborhood)]) >>> 0)) & P) >>> 0)));
                    if (n < min) {
                        min = n;
                        best = u;
                    }

                    q = (q ^ bit) >>> 0;
                }

                return best;
            }
        }
    });

    Bridge.define("GraphicsLayer.ICanvas", {
        inherits: [GraphicsLayer.IProduceMouseEvents],
        $kind: "interface"
    });

    Bridge.define("Graphs.Edge", {
        inherits: [GraphicsLayer.IPaintable,Graphs.IHittable],
        statics: {
            fields: {
                LabelFont: null,
                LabelBrushColor: null,
                IndexFont: null,
                IndexBrushColor: null
            },
            ctors: {
                init: function () {
                    this.LabelFont = new GraphicsLayer.Font("Times New Roman", 18);
                    this.LabelBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 255);
                    this.IndexFont = new GraphicsLayer.Font("System", 8);
                    this.IndexBrushColor = new GraphicsLayer.ARGB.$ctor1(200, 200, 0, 0);
                }
            }
        },
        fields: {
            _V1: null,
            _V2: null,
            _Orientation: 0,
            _thickness: 0,
            _Color: null,
            _penColor: null,
            _IsSelected: false,
            _Multiplicity: 0,
            _style: null,
            _showIndex: false
        },
        props: {
            ParentIndex: 0,
            IndexAngle: 0,
            V1: {
                get: function () {
                    return this._V1;
                },
                set: function (value) {
                    this._V1 = value;
                }
            },
            V2: {
                get: function () {
                    return this._V2;
                },
                set: function (value) {
                    this._V2 = value;
                }
            },
            Orientation: {
                get: function () {
                    return this._Orientation;
                },
                set: function (value) {
                    this._Orientation = value;

                    this.UpdateStyle();
                }
            },
            Thickness: {
                get: function () {
                    return this._thickness;
                },
                set: function (value) {
                    this._thickness = value;
                }
            },
            Color: {
                get: function () {
                    return this._Color;
                },
                set: function (value) {
                    this._Color = value;
                    this._penColor = this._Color;
                }
            },
            IsSelected: {
                get: function () {
                    return this._IsSelected;
                },
                set: function (value) {
                    if (value === this._IsSelected) {
                        return;
                    }

                    this._IsSelected = value;

                    this.Color = this._IsSelected ? new GraphicsLayer.ARGB.ctor(50, 205, 50) : new GraphicsLayer.ARGB.ctor(0, 0, 0);
                }
            },
            Multiplicity: {
                get: function () {
                    return this._Multiplicity;
                },
                set: function (value) {
                    this._Multiplicity = Math.max(1, value);
                }
            },
            Style: {
                get: function () {
                    return this._style;
                },
                set: function (value) {
                    if (value == null) {
                        return;
                    }

                    var style = value;
                    if (System.String.contains(style,"~~|~|~~")) {
                        var parts = System.String.split(style, System.Array.init(["~~|~|~~"], System.String), null, 0);
                        if (parts.length >= 2) {
                            style = parts[System.Array.index(0, parts)];
                            this.Label = parts[System.Array.index(1, parts)];
                        }
                    }

                    if (System.String.startsWith(style, "+") && !System.String.isNullOrEmpty(this._style)) {
                        this._style = System.String.concat(this._style, (System.String.concat(", ", System.String.trimStart(style, [43]))));
                    } else {
                        this._style = System.String.trimStart(style, [43]);
                    }
                }
            },
            Label: null
        },
        alias: [
            "Paint", "GraphicsLayer$IPaintable$Paint",
            "Hit", "Graphs$IHittable$Hit"
        ],
        ctors: {
            init: function () {
                this._thickness = 4;
                this._Color = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                this._penColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                this._showIndex = false;
            },
            $ctor1: function (v1, v2) {
                Graphs.Edge.$ctor2.call(this, v1, v2, Graphs.Edge.Orientations.None);
            },
            $ctor2: function (v1, v2, orientation) {
                this.$initialize();
                this._V1 = v1;
                this._V2 = v2;
                this._Orientation = orientation;
                this._Multiplicity = 1;
            },
            ctor: function (e, vertices) {
                this.$initialize();
                this.V1 = vertices.getItem(e.IndexV1);
                this.V2 = vertices.getItem(e.IndexV2);
                this.Orientation = e.Orientation;
                this.Thickness = e.Thickness;
                this.Multiplicity = e.Multiplicity;
                this.Style = e.Style;
                this.Label = e.Label;
            }
        },
        methods: {
            Paint: function (g, width, height) {
                if (Bridge.referenceEquals(this._V1, this._V2)) {
                    // Draw self loop.
                } else {
                    var maxRadius1 = Math.max(this._V1.LocalBounds.Width, this._V1.LocalBounds.Height) / 2;
                    var maxRadius2 = Math.max(this._V2.LocalBounds.Width, this._V2.LocalBounds.Height) / 2;

                    var cos = (this._V2.X - this._V1.X) / Math.sqrt((this._V2.X - this._V1.X) * (this._V2.X - this._V1.X) + (this._V2.Y - this._V1.Y) * (this._V2.Y - this._V1.Y));
                    cos = Math.min(Math.max(cos, -1), 1);

                    var sin = (this._V2.Y - this._V1.Y) / Math.sqrt((this._V2.X - this._V1.X) * (this._V2.X - this._V1.X) + (this._V2.Y - this._V1.Y) * (this._V2.Y - this._V1.Y));
                    sin = Math.min(Math.max(sin, -1), 1);

                    var angle = Math.acos(cos);
                    if (this._V1.Y > this._V2.Y) {
                        angle = -angle;
                    }

                    if (isNaN(angle)) {
                        return;
                    }

                    var angleStep = 1.5707963267948966 / this._Multiplicity;
                    var evenModifier = (this._Multiplicity % 2 === 0) ? 0.5 : 0;

                    var topStart = new GraphicsLayer.Box.ctor(0, 0);
                    var topFinish = new GraphicsLayer.Box.ctor(0, 0);
                    var first = true;
                    for (var i = (Bridge.Int.div(((-(((this._Multiplicity - 1) | 0))) | 0), 2)) | 0; i < Math.ceil((((this._Multiplicity + 1) | 0)) / 2.0); i = (i + 1) | 0) {
                        var startAngle = angle + angleStep * (i - evenModifier);
                        var finishAngle = angle - angleStep * (i - evenModifier);

                        var start = this.LocalToGlobal(Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.01, startAngle)), width, height);
                        var finish = this.LocalToGlobal(Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.01, finishAngle)), width, height);


                        if (first) {
                            first = false;
                            topStart = start;
                            topFinish = finish;
                        }

                        g.GraphicsLayer$IGraphics$DrawLine(this._penColor, start, finish, this._thickness);
                    }

                    if (this._Orientation !== Graphs.Edge.Orientations.None) {
                        var points = System.Array.init(3, null, GraphicsLayer.Box);
                        if (this._Orientation === Graphs.Edge.Orientations.Forward) {
                            var sweep = Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.025, angle));

                            points[System.Array.index(0, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep, this._V2.Location, 0.17453292519943295), width, height);
                            points[System.Array.index(1, points)] = this.LocalToGlobal(Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.005, angle)), width, height);
                            points[System.Array.index(2, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep, this._V2.Location, -0.17453292519943295), width, height);
                        } else if (this._Orientation === Graphs.Edge.Orientations.Backward) {
                            var sweep1 = Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.025, angle));

                            points[System.Array.index(0, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep1, this._V1.Location, 0.17453292519943295), width, height);
                            points[System.Array.index(1, points)] = this.LocalToGlobal(Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.005, angle)), width, height);
                            points[System.Array.index(2, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep1, this._V1.Location, -0.17453292519943295), width, height);
                        }

                        g.GraphicsLayer$IGraphics$FillPolygon(new GraphicsLayer.ARGB.ctor(0, 0, 0), points);
                    }

                    var label = this.Label;
                    if (!System.String.isNullOrEmpty(label)) {
                        var box = g.GraphicsLayer$IGraphics$MeasureString(label, Graphs.Edge.LabelFont);
                        var bounds = new GraphicsLayer.Box.$ctor1(topStart.X + (topFinish.X - topStart.X) / 2 - box.Width / 2 - 0.75 * box.Width * sin, topStart.Y + (topFinish.Y - topStart.Y) / 2 - box.Height / 2 + 0.75 * box.Height * cos, box.Width, box.Height);
                        g.GraphicsLayer$IGraphics$DrawString(label, Graphs.Edge.LabelFont, Graphs.Edge.LabelBrushColor, bounds);
                    }

                    if (this._showIndex) {
                        var bounds1 = new GraphicsLayer.Box.$ctor1(topStart.X + (topFinish.X - topStart.X) / 2, topStart.Y + (topFinish.Y - topStart.Y) / 2, 10, 10);
                        var cx = (bounds1.Left + bounds1.Right) / 2;
                        var cy = (bounds1.Bottom + bounds1.Top) / 2;
                        var r = Math.max(bounds1.Width, bounds1.Height) / 2 + 5;
                        var bb = new GraphicsLayer.Box.$ctor1(cx + r * Math.cos(this.IndexAngle) - 5, cy + r * Math.sin(this.IndexAngle) - 5, 10, 10);
                        g.GraphicsLayer$IGraphics$DrawString(this.ParentIndex.toString(), Graphs.Edge.IndexFont, Graphs.Edge.IndexBrushColor, bb);
                    }
                }
            },
            LocalToGlobal: function (local, width, height) {
                return new GraphicsLayer.Box.ctor(width * local.X, height * local.Y);
            },
            Hit: function (x, y) {
                return false;
            },
            Meets: function (other) {
                return Bridge.referenceEquals(this._V1, other.V1) || Bridge.referenceEquals(this._V2, other.V1) || Bridge.referenceEquals(this._V1, other.V2) || Bridge.referenceEquals(this._V2, other.V2);
            },
            UpdateStyle: function () {
                if (this.Style == null) {
                    this.Style = "";
                }

                var sb = new System.Text.StringBuilder();
                this.Style = sb.toString();
            },
            ToggleIndex: function () {
                this._showIndex = !this._showIndex;
            },
            RotateIndex: function () {
                this.IndexAngle += 0.19634954084936207;
                if (this.IndexAngle >= 6.2831853071795862) {
                    this.IndexAngle = 0;
                }
            }
        }
    });

    Bridge.define("Graphs.Graph", {
        inherits: [GraphicsLayer.IPaintable],
        statics: {
            fields: {
                GraphExtension: null,
                EdgeWeightExtension: null
            },
            ctors: {
                init: function () {
                    this.GraphExtension = ".graph";
                    this.EdgeWeightExtension = ".edge weight";
                }
            }
        },
        fields: {
            _vertices: null,
            _edges: null,
            _ModifyListsToken: null,
            _FileName: null,
            _showVertexIndices: false,
            _showEdgeIndices: false
        },
        props: {
            IsDirected: {
                get: function () {
                    return System.Linq.Enumerable.from(this._edges).any($asm.$.Graphs.Graph.f1);
                }
            },
            SelectedItems: {
                get: function () {
                    var $t, $t1;
                    this._ModifyListsToken;
                    {
                        var selectedItems = new (System.Collections.Generic.List$1(Graphs.IHittable))();
                        $t = Bridge.getEnumerator(this.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var i = $t.Current;
                                selectedItems.add(i);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }$t1 = Bridge.getEnumerator(this.SelectedEdges);
                        try {
                            while ($t1.moveNext()) {
                                var i1 = $t1.Current;
                                selectedItems.add(i1);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        return selectedItems;
                    }
                }
            },
            SelectedVertices: {
                get: function () {
                    this._ModifyListsToken;
                    return System.Linq.Enumerable.from(this._vertices).where($asm.$.Graphs.Graph.f2).toList(Graphs.Vertex);
                }
            },
            SelectedEdges: {
                get: function () {
                    this._ModifyListsToken;
                    return System.Linq.Enumerable.from(this._edges).where($asm.$.Graphs.Graph.f3).toList(Graphs.Edge);
                }
            },
            BoundingRectangle: {
                get: function () {
                    var $t;
                    this._ModifyListsToken;
                    {
                        var left = System.Double.max;
                        var right = System.Double.min;
                        var top = System.Double.max;
                        var bottom = System.Double.min;

                        $t = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                left = Math.min(left, v.LocalBounds.Left);
                                right = Math.max(right, v.LocalBounds.Right);
                                top = Math.min(top, v.LocalBounds.Top);
                                bottom = Math.max(bottom, v.LocalBounds.Bottom);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return new GraphicsLayer.Box.$ctor1(left, top, right - left, bottom - top);
                    }
                }
            },
            SelectedBoundingRectangle: {
                get: function () {
                    var $t;
                    var sv = System.Linq.Enumerable.from(this.SelectedVertices).toList(Graphs.Vertex);
                    if (sv.Count <= 0) {
                        return this.BoundingRectangle;
                    }

                    this._ModifyListsToken;
                    {
                        var left = System.Double.max;
                        var right = System.Double.min;
                        var top = System.Double.max;
                        var bottom = System.Double.min;

                        $t = Bridge.getEnumerator(sv);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                left = Math.min(left, v.LocalBounds.Left);
                                right = Math.max(right, v.LocalBounds.Right);
                                top = Math.min(top, v.LocalBounds.Top);
                                bottom = Math.max(bottom, v.LocalBounds.Bottom);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return new GraphicsLayer.Box.$ctor1(left, top, right - left, bottom - top);
                    }
                }
            },
            Name: {
                get: function () {
                    return this._FileName;
                },
                set: function (value) {
                    this._FileName = value;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            },
            Edges: {
                get: function () {
                    return this._edges;
                }
            },
            ParametersDirty: false
        },
        alias: ["Paint", "GraphicsLayer$IPaintable$Paint"],
        ctors: {
            init: function () {
                this._vertices = new (System.Collections.Generic.List$1(Graphs.Vertex))();
                this._edges = new (System.Collections.Generic.List$1(Graphs.Edge))();
                this._ModifyListsToken = {  };
            },
            ctor: function () {
                this.$initialize();
                this.ParametersDirty = true;
            },
            $ctor2: function (g) {
                Graphs.Graph.ctor.call(this);
                this._vertices = System.Linq.Enumerable.from(g.Vertices).select($asm.$.Graphs.Graph.f4).toList(Graphs.Vertex);
                this._edges = System.Linq.Enumerable.from(g.Edges).select(Bridge.fn.bind(this, $asm.$.Graphs.Graph.f5)).toList(Graphs.Edge);
                this.Name = g.Name;
            },
            $ctor3: function (vertices, edges) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.from(vertices).toList(Graphs.Vertex);
                this._edges = System.Linq.Enumerable.from(edges).toList(Graphs.Edge);
            },
            $ctor1: function (g, position, directed) {
                if (directed === void 0) { directed = true; }

                Graphs.Graph.ctor.call(this);
                if (g.VertexWeight != null && g.VertexWeight.Count === g.N) {
                    this._vertices = System.Linq.Enumerable.from(g.Vertices).select(function (v) {
                            return new Graphs.Vertex.$ctor4(position.getItem(v).X, position.getItem(v).Y, g.VertexWeight.getItem(v).toString());
                        }).toList(Graphs.Vertex);
                } else {
                    this._vertices = System.Linq.Enumerable.from(g.Vertices).select(function (v) {
                            return new Graphs.Vertex.$ctor3(position.getItem(v).X, position.getItem(v).Y);
                        }).toList(Graphs.Vertex);
                }
                this._edges = new (System.Collections.Generic.List$1(Graphs.Edge))();

                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        if (directed) {
                            if (g.Directed.get([i, j])) {
                                this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(i), this._vertices.getItem(j), Graphs.Edge.Orientations.Forward));
                            } else {
                                if (g.Adjacent.get([i, j])) {
                                    this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(j), this._vertices.getItem(i), Graphs.Edge.Orientations.Forward));
                                }
                            }
                        } else if (g.Adjacent.get([i, j])) {
                            this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(i), this._vertices.getItem(j), Graphs.Edge.Orientations.None));
                        }
                    }
                }
            }
        },
        methods: {
            Paint: function (g, width, height) {
                var $t, $t1;
                this._ModifyListsToken;
                {
                    if (this.ParametersDirty) {
                        var graph = new Algorithms.Graph.$ctor1(this.GetEdgeWeights());
                        var n = this.Vertices.Count;

                        for (var i = 0; i < this.Vertices.Count; i = (i + 1) | 0) {
                            this.Vertices.getItem(i).IsUniversal = graph.Degree(i) === ((n - 1) | 0);
                        }

                        this.ParametersDirty = false;
                    }

                    var jj = 0;
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            v.ParentIndex = Bridge.identity(jj, (jj = (jj + 1) | 0));
                            v.Paint(g, width, height);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    jj = 0;
                    $t1 = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t1.moveNext()) {
                            var e = $t1.Current;
                            e.ParentIndex = Bridge.identity(jj, (jj = (jj + 1) | 0));
                            e.Paint(g, width, height);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }}
            },
            GetEdgeWeights: function () {
                var weights = new (System.Collections.Generic.List$1(System.Int32))();

                for (var i = 0; i < this._vertices.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this._vertices.Count; j = (j + 1) | 0) {
                        var e = { };
                        if (this.EdgeExists$1(this._vertices.getItem(i), this._vertices.getItem(j), e)) {
                            weights.add(1);
                        } else {
                            if (this.EdgeExists$1(this._vertices.getItem(j), this._vertices.getItem(i), e)) {
                                if (e.v.Orientation === Graphs.Edge.Orientations.None) {
                                    weights.add(1);
                                } else {
                                    weights.add(-1);
                                }
                            } else {
                                weights.add(0);
                            }
                        }
                    }
                }

                return weights;
            },
            ModifyOrientation: function (edgeWeights) {
                var k = 0;
                for (var i = 0; i < this._vertices.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this._vertices.Count; j = (j + 1) | 0) {
                        var w = edgeWeights.getItem(k);

                        if (w !== 0) {
                            var e = this.GetEdge(this._vertices.getItem(i), this._vertices.getItem(j));

                            if (Bridge.referenceEquals(e.V1, this._vertices.getItem(i)) && Bridge.referenceEquals(e.V2, this._vertices.getItem(j))) {
                                if (w < 0) {
                                    e.Orientation = Graphs.Edge.Orientations.Backward;
                                } else {
                                    e.Orientation = Graphs.Edge.Orientations.Forward;
                                }
                            } else {
                                if (w < 0) {
                                    e.Orientation = Graphs.Edge.Orientations.Forward;
                                } else {
                                    e.Orientation = Graphs.Edge.Orientations.Backward;
                                }
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                this.ParametersDirty = true;
            },
            Clone: function () {
                var s = GraphsCore.CompactSerializer.Serialize(this);
                var g = GraphsCore.CompactSerializer.Deserialize(s);
                if (g != null) {
                    g.ParametersDirty = true;
                } else {
                    System.Console.WriteLine("clone is null");
                }
                return g;
            },
            HitTest: function (x, y) {
                var $t, $t1;
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        if (v.Hit(x, y)) {
                            return v;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(this._edges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        if (e.Hit(x, y)) {
                            return e;
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            UnselectAll: function () {
                this.UnselectAllVertices();
                this.UnselectAllEdges();
            },
            UnselectAllVertices: function () {
                var $t;
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        v.IsSelected = false;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            UnselectAllEdges: function () {
                var $t;
                $t = Bridge.getEnumerator(this._edges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        e.IsSelected = false;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectEdges: function (edges, symmetricDifference) {
                var $t;
                this.UnselectAllVertices();
                if (!symmetricDifference) {
                    this.UnselectAllEdges();
                }

                $t = Bridge.getEnumerator(edges, Graphs.Edge);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        e.IsSelected = symmetricDifference ? !e.IsSelected : true;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectVertices: function (vertices, symmetricDifference) {
                var $t;
                this.UnselectAllEdges();
                if (!symmetricDifference) {
                    this.UnselectAllVertices();
                }

                $t = Bridge.getEnumerator(vertices, Graphs.Vertex);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        v.IsSelected = symmetricDifference ? !v.IsSelected : true;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectObjects: function (selectionPoints, symmetricDifference) {
                try {
                    var bounds = new Graphs.PolygonContainer(selectionPoints.toArray());

                    var verticesInPolygon = System.Linq.Enumerable.from(this._vertices).where(function (v) {
                            return bounds.Contains(new GraphicsLayer.Box.ctor(v.X, v.Y));
                        }).toList(Graphs.Vertex);

                    if (verticesInPolygon.Count > 0) {
                        this.SelectVertices(verticesInPolygon, symmetricDifference);
                    } else {
                        var edgesHittingPolygon = System.Linq.Enumerable.from(this._edges).where(function (e) {
                                for (var i = 0; i < selectionPoints.Count; i = (i + 1) | 0) {
                                    var start = selectionPoints.getItem(i);
                                    var end = selectionPoints.getItem((((i + 1) | 0)) % selectionPoints.Count);

                                    if (Graphs.Utility.HaveIntersection(start, end, Graphs.Vector.op_Implicit(e.V1.Location), Graphs.Vector.op_Implicit(e.V2.Location))) {
                                        return true;
                                    }
                                }

                                return false;
                            }).toList(Graphs.Edge);

                        this.SelectEdges(edgesHittingPolygon, symmetricDifference);
                    }
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            },
            AddVertex: function (v) {
                if (this._showVertexIndices) {
                    v.ToggleIndex();
                }
                this._ModifyListsToken;
                this._vertices.add(v);

                this.ParametersDirty = true;
                return true;
            },
            RemoveVertex: function (v) {
                var $t;
                var neighbors = this.FindNeighbors(v);
                $t = Bridge.getEnumerator(neighbors);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        this.RemoveEdge(v, x);
                        this.RemoveEdge(x, v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this._ModifyListsToken;
                this._vertices.remove(v);

                this.ParametersDirty = neighbors.Count > 0;

                return neighbors.Count > 0;
            },
            AddEdge$1: function (v1, v2, multiplicity) {
                if (multiplicity === void 0) { multiplicity = 1; }
                return this.AddEdge(v1, v2, Graphs.Edge.Orientations.None, multiplicity);
            },
            AddEdge: function (v1, v2, orientation, multiplicity, thickness, style, label) {
                if (multiplicity === void 0) { multiplicity = 1; }
                if (thickness === void 0) { thickness = 3.0; }
                if (style === void 0) { style = ""; }
                if (label === void 0) { label = ""; }
                if (Bridge.referenceEquals(v1, v2)) {
                    // Not allowing self-loops for now.
                    return false;
                }

                if (!this.EdgeExists(v1, v2) && !this.EdgeExists(v2, v1)) {
                    this._ModifyListsToken;
                    {
                        var edge = new Graphs.Edge.$ctor2(v1, v2, orientation);
                        edge.Multiplicity = multiplicity;
                        edge.Thickness = thickness;
                        edge.Style = style;
                        edge.Label = label;
                        if (this._showEdgeIndices) {
                            edge.ToggleIndex();
                        }
                        this._edges.add(edge);
                        this.ParametersDirty = true;

                        return true;
                    }
                }

                return false;
            },
            AddEdge$2: function (e) {
                this.AddEdge(e.V1, e.V2, e.Orientation, Math.max(1, e.Multiplicity), e.Thickness, e.Style, e.Label);
            },
            RemoveEdge: function (v1, v2) {
                var $t;
                var toRemove;

                this._ModifyListsToken;
                {
                    toRemove = System.Linq.Enumerable.from(this._edges).where(function (e) {
                            return Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2);
                        }).toList(Graphs.Edge);
                }

                $t = Bridge.getEnumerator(toRemove);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        this._edges.remove(e);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ParametersDirty = toRemove.Count > 0;
                return toRemove.Count > 0;
            },
            EdgeExists: function (v1, v2) {
                var edge = { };
                return this.EdgeExists$1(v1, v2, edge);
            },
            EdgeExists$1: function (v1, v2, edge) {
                var $t;
                edge.v = null;

                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            edge.v = e;
                            if (Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2) && (e.Orientation === Graphs.Edge.Orientations.None || e.Orientation === Graphs.Edge.Orientations.Forward)) {
                                return true;
                            }

                            if (Bridge.referenceEquals(e.V1, v2) && Bridge.referenceEquals(e.V2, v1) && e.Orientation === Graphs.Edge.Orientations.Backward) {
                                return true;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return false;
            },
            GetEdge: function (v1, v2) {
                var $t;
                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            if (Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2) || Bridge.referenceEquals(e.V1, v2) && Bridge.referenceEquals(e.V2, v1)) {
                                return e;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return null;
            },
            InducedSubgraph: function (vertices) {
                var $t, $t1, $t2;
                var induced = new Graphs.Graph.ctor();
                $t = Bridge.getEnumerator(vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        induced.AddVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(induced.Vertices);
                try {
                    while ($t1.moveNext()) {
                        var v1 = $t1.Current;
                        $t2 = Bridge.getEnumerator(induced.Vertices);
                        try {
                            while ($t2.moveNext()) {
                                var v2 = $t2.Current;
                                var e = { };
                                if (this.EdgeExists$1(v1, v2, e)) {
                                    induced.AddEdge(v1, v2, e.v.Orientation !== Graphs.Edge.Orientations.None ? Graphs.Edge.Orientations.Forward : Graphs.Edge.Orientations.None, e.v.Multiplicity, e.v.Thickness, e.v.Style, e.v.Label);
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                return induced.Clone();
            },
            DisjointUnion: function (g) {
                var $t, $t1;
                $t = Bridge.getEnumerator(g.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        this.AddVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(g.Edges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        this.AddEdge$2(e);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }},
            FindNeighbors: function (v) {
                var $t;
                var neighbors = new (System.Collections.Generic.List$1(Graphs.Vertex))();

                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            if (Bridge.referenceEquals(e.V1, v)) {
                                neighbors.add(e.V2);
                            }
                            if (Bridge.referenceEquals(e.V2, v)) {
                                neighbors.add(e.V1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return neighbors;
            },
            Translate: function (offset) {
                var $t;
                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            v.X += offset.X;
                            v.Y += offset.Y;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}
            },
            ToggleEdgeIndices: function () {
                var $t;
                this._showEdgeIndices = !this._showEdgeIndices;
                $t = Bridge.getEnumerator(this.Edges);
                try {
                    while ($t.moveNext()) {
                        var a = $t.Current;
                        a.ToggleIndex();
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            ToggleVertexIndices: function () {
                var $t;
                this._showVertexIndices = !this._showVertexIndices;
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var a = $t.Current;
                        a.ToggleIndex();
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
        }
    });

    Bridge.ns("Graphs.Graph", $asm.$);

    Bridge.apply($asm.$.Graphs.Graph, {
        f1: function (e) {
            return e.Orientation !== Graphs.Edge.Orientations.None;
        },
        f2: function (v) {
            return v.IsSelected;
        },
        f3: function (e) {
            return e.IsSelected;
        },
        f4: function (v) {
            return new Graphs.Vertex.ctor(v);
        },
        f5: function (e) {
            return new Graphs.Edge.ctor(e, this._vertices);
        }
    });

    Bridge.define("Graphs.GraphCanvas", {
        inherits: [GraphicsLayer.IPaintable],
        statics: {
            fields: {
                DefaultBaseViewScale: 0,
                MaxZoomScale: 0,
                _gridStep: 0,
                SelectionPenColor: null,
                GridPenColor: null,
                BackgroundColor: null
            },
            ctors: {
                init: function () {
                    this.DefaultBaseViewScale = 800;
                    this.MaxZoomScale = 6000;
                    this._gridStep = 0.04;
                    this.SelectionPenColor = new GraphicsLayer.ARGB.ctor(0, 0, 255);
                    this.GridPenColor = new GraphicsLayer.ARGB.$ctor1(75, 0, 10, 0);
                    this.BackgroundColor = new GraphicsLayer.ARGB.ctor(247, 247, 247);
                }
            }
        },
        fields: {
            BaseViewScale: 0,
            ZoomDelta: 0,
            MinZoom: 0,
            _zoomFitNextPaint: false,
            _snapToGrid: false,
            _drawGrid: false,
            _graph: null,
            _DraggedVertex: null,
            _selectionPoints: null,
            _SelectionPointsToken: null,
            _controlWasDown: false,
            _canvas: null,
            _state: 0,
            _viewScale: 0,
            _Zoom: 0,
            _secondaryConverter: null,
            _history: null,
            _historyIndex: 0
        },
        events: {
            GraphModified: null,
            NameModified: null
        },
        props: {
            SnapToGrid: {
                get: function () {
                    return this._snapToGrid;
                },
                set: function (value) {
                    var needRedraw = value && !this._snapToGrid;
                    this._snapToGrid = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            GridStep: {
                get: function () {
                    return Graphs.GraphCanvas._gridStep;
                },
                set: function (value) {
                    var needRedraw = this.SnapToGrid && value !== Graphs.GraphCanvas._gridStep;
                    Graphs.GraphCanvas._gridStep = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            DrawGrid: {
                get: function () {
                    return this._drawGrid;
                },
                set: function (value) {
                    var needRedraw = this._drawGrid !== value;
                    this._drawGrid = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            HasPainted: false,
            Width: 0,
            Height: 0,
            Graph: {
                get: function () {
                    return this._graph;
                }
            },
            Canvas: {
                get: function () {
                    return this._canvas;
                },
                set: function (value) {
                    this._canvas = value;

                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseMoved(Bridge.fn.cacheBind(this, this.OnMouseMove));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonDown(Bridge.fn.cacheBind(this, this.OnMouseDown));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonUp(Bridge.fn.cacheBind(this, this.OnMouseUp));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonDoubleClicked(Bridge.fn.cacheBind(this, this.OnMouseDoubleClick));
                }
            },
            Zoom: {
                set: function (value) {
                    if (value === this._Zoom) {
                        return;
                    }

                    this._Zoom = value;
                    var scale = Bridge.Int.clip32(this._Zoom * this.BaseViewScale);
                    if (scale > Graphs.GraphCanvas.MaxZoomScale) {
                        scale = Graphs.GraphCanvas.MaxZoomScale;
                        this._Zoom = (Bridge.Int.div(scale, this.BaseViewScale)) | 0;
                    }

                    this.ViewScale = scale;
                }
            },
            ViewScale: {
                get: function () {
                    return this._viewScale;
                },
                set: function (value) {
                    if (value === this._viewScale) {
                        return;
                    }

                    this._viewScale = value;
                }
            },
            IsEmpty: {
                get: function () {
                    return this._graph.Vertices.Count <= 0;
                }
            }
        },
        alias: ["Paint", "GraphicsLayer$IPaintable$Paint"],
        ctors: {
            init: function () {
                this.BaseViewScale = Graphs.GraphCanvas.DefaultBaseViewScale;
                this.ZoomDelta = 0.15;
                this.MinZoom = 0.15;
                this._snapToGrid = true;
                this._drawGrid = true;
                this._selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))();
                this._SelectionPointsToken = {  };
                this._state = Graphs.GraphCanvas.States.Idle;
                this._viewScale = Graphs.GraphCanvas.DefaultBaseViewScale;
                this._Zoom = 1.0;
                this._history = new (System.Collections.Generic.List$1(Graphs.GraphCanvas.HistoricalGraph))();
                this._historyIndex = 0;
            },
            ctor: function (graph, secondaryConverter) {
                if (secondaryConverter === void 0) { secondaryConverter = null; }

                this.$initialize();                var $t;

                this._graph = graph != null ? graph : new Graphs.Graph.ctor();
                this._secondaryConverter = secondaryConverter;
                this._history.add(($t = new Graphs.GraphCanvas.HistoricalGraph(), $t.Graph = this._graph.Clone(), $t.Zoom = this._Zoom, $t.ViewScale = this._viewScale, $t));
        }
    },
    methods: {
        SetZoomDelta: function (d) {
            this.ZoomDelta = d;
            this.MinZoom = d;
        },
        Invalidate: function () {
            if (this.Canvas != null) {
                this.Canvas.GraphicsLayer$ICanvas$Invalidate();
            }
        },
        GraphChanged: function () {
            var $t;
            if (((((this._history.Count - this._historyIndex) | 0) - 1) | 0) > 0) {
                this._history.removeRange(((this._historyIndex + 1) | 0), ((((this._history.Count - this._historyIndex) | 0) - 1) | 0));
            }

            this._history.add(($t = new Graphs.GraphCanvas.HistoricalGraph(), $t.Graph = this._graph.Clone(), $t.Zoom = this._Zoom, $t.ViewScale = this._viewScale, $t));
            this._historyIndex = (this._history.Count - 1) | 0;

            if (!Bridge.staticEquals(this.GraphModified, null)) {
                this.GraphModified(this.Graph);
            }
        },
        DoUndo: function () {
            if (this._historyIndex <= 0) {
                return false;
            }

            this._historyIndex = (this._historyIndex - 1) | 0;
            this.ObeyHistory();

            return this._historyIndex > 0;
        },
        DoRedo: function () {
            if (this._historyIndex >= ((this._history.Count - 1) | 0)) {
                return false;
            }

            this._historyIndex = (this._historyIndex + 1) | 0;
            this.ObeyHistory();

            return this._historyIndex < ((this._history.Count - 1) | 0);
        },
        ObeyHistory: function () {
            this._graph = this._history.getItem(this._historyIndex).Graph.Clone();
            this.ViewScale = this._history.getItem(this._historyIndex).ViewScale;
            this.Zoom = this._history.getItem(this._historyIndex).Zoom;
            this._graph.ParametersDirty = true;

            if (!Bridge.staticEquals(this.GraphModified, null)) {
                this.GraphModified(this.Graph);
            }

            this.Invalidate();
        },
        Save: function (name) {
            this._graph.Name = name;
            return ""; // _graph.Serialize();
        },
        DoZoom: function (amount, location) {
            var width = this.Width;
            var height = this.Height;

            var oldCenter = new Graphs.Vector(width / this._viewScale * location.X, height / this._viewScale * location.Y);

            this.Zoom = Math.max(this.MinZoom, this._Zoom + this.ZoomDelta * amount);

            var center = new Graphs.Vector(width / this._viewScale * location.X, height / this._viewScale * location.Y);

            this._graph.Translate(Graphs.Vector.op_Subtraction(center, oldCenter));

            this.Invalidate();
        },
        DoZoomFit: function () {
            if (this._graph.Vertices.Count <= 0) {
                this.Zoom = 1;
                this.Invalidate();
                return;
            }

            var width = this.Width;
            var height = this.Height;
            var bounds = this._graph.SelectedBoundingRectangle;
            var c = new Graphs.Vector(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2);

            var actual = Math.min(width, height);
            this.Zoom = 0.9 * actual / Math.max(bounds.Width, bounds.Height) / this.BaseViewScale;

            var center = new Graphs.Vector(width / this._viewScale * 0.5, height / this._viewScale * 0.5);
            this._graph.Translate(Graphs.Vector.op_Subtraction(center, c));

            this.Invalidate();
        },
        DoDelete: function () {
            var $t, $t1;
            if (this._graph.SelectedVertices.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        this._graph.RemoveVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}

            if (this._graph.SelectedEdges.Count > 0) {
                $t1 = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        this._graph.RemoveEdge(e.V1, e.V2);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }}

            this.Invalidate();
            this.GraphChanged();
        },
        DoReverseSelectedEdges: function () {
            var $t;
            if (this._graph.SelectedEdges.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var oo = e.Orientation;
                        if (oo === Graphs.Edge.Orientations.Forward) {
                            oo = Graphs.Edge.Orientations.Backward;
                        } else {
                            if (oo === Graphs.Edge.Orientations.Backward) {
                                oo = Graphs.Edge.Orientations.Forward;
                            }
                        }

                        e.Orientation = oo;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Invalidate();
                this.GraphChanged();
            }
        },
        DoRotateSelectedEdges: function () {
            var $t;
            if (this._graph.SelectedEdges.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var oo = e.Orientation;
                        if (oo === Graphs.Edge.Orientations.Forward) {
                            oo = Graphs.Edge.Orientations.Backward;
                        } else {
                            if (oo === Graphs.Edge.Orientations.Backward) {
                                oo = Graphs.Edge.Orientations.None;
                            } else {
                                if (oo === Graphs.Edge.Orientations.None) {
                                    oo = Graphs.Edge.Orientations.Forward;
                                }
                            }
                        }

                        e.Orientation = oo;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Invalidate();
                this.GraphChanged();
            }
        },
        DoCut: function () {
            this.DoCopy();
            this.DoDelete();
        },
        DoCopy: function (verbose) {
            if (verbose === void 0) { verbose = false; }
            var h = this._graph.InducedSubgraph(this._graph.SelectedVertices);
            return GraphsCore.CompactSerializer.Serialize(h);
        },
        DoPaste: function (s) {
            var g = null;
            if (System.String.contains(s,"tikzpicture")) {
                //g = TeXConverter.FromTikz(s);
            } else if (GraphsCore.CompactSerializer.LooksLikeASerializedGraph(s)) {
                g = GraphsCore.CompactSerializer.Deserialize(s);
            } else {
                //g = Graph.Deserialize(s);
            }

            if (g != null) {
                this._graph.DisjointUnion(g);

                this.Invalidate();
                this.GraphChanged();
            } else if (System.Linq.Enumerable.from(System.String.split(s.trim(), [32].map(function(i) {{ return String.fromCharCode(i); }}))).all($asm.$.Graphs.GraphCanvas.f1)) {
                try {
                    //g = GraphIO.GraphFromEdgeWeightString(s);
                    if (g != null) {
                        this._graph.DisjointUnion(g);

                        this.Invalidate();
                        this.GraphChanged();
                    }

                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            } else {
                try {
                    //g = GraphIO.GraphFromGraph6(s.Trim());

                    if (g != null) {
                        var empty = this._graph.Vertices.Count <= 0;
                        this._graph.DisjointUnion(g);

                        if (empty) {
                            this.NameModified(g.Name);
                        }

                        this.Invalidate();
                        this.GraphChanged();
                    }
                }
                catch ($e2) {
                    $e2 = System.Exception.create($e2);
                }
            }
        },
        DoComplement: function () {
            for (var i = 0; i < this._graph.SelectedVertices.Count; i = (i + 1) | 0) {
                for (var j = (i + 1) | 0; j < this._graph.SelectedVertices.Count; j = (j + 1) | 0) {
                    var v1 = this._graph.SelectedVertices.getItem(i);
                    var v2 = this._graph.SelectedVertices.getItem(j);

                    var edgeExists = this._graph.EdgeExists(v1, v2) || this._graph.EdgeExists(v2, v1);

                    if (edgeExists) {
                        this._graph.RemoveEdge(v1, v2);
                        this._graph.RemoveEdge(v2, v1);
                    } else {
                        this._graph.AddEdge$1(v1, v2);
                    }
                }
            }

            this.Invalidate();

            this.GraphChanged();
        },
        DoSquare: function () {
            var $t, $t1;
            var g = new Graphs.Graph.ctor();

            var vertexMap = new (System.Collections.Generic.Dictionary$2(Graphs.Vertex,Graphs.Vertex))();
            $t = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    var w = new Graphs.Vertex.$ctor4(v.X, v.Y, v.Label);
                    g.AddVertex(w);

                    vertexMap.set(v, w);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            $t1 = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t1.moveNext()) {
                    var v1 = $t1.Current;
                    var q = System.Linq.Enumerable.from(this._graph.FindNeighbors(v1)).union(System.Array.init([v1], Graphs.Vertex)).toList(Graphs.Vertex);

                    for (var i = 0; i < q.Count; i = (i + 1) | 0) {
                        for (var j = (i + 1) | 0; j < q.Count; j = (j + 1) | 0) {
                            g.AddEdge$1(vertexMap.get(q.getItem(i)), vertexMap.get(q.getItem(j)));
                        }
                    }
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }

            return g;
        },
        DoLineGraph: function () {
            var $t, $t1, $t2, $t3;
            var g = new Graphs.Graph.ctor();

            var edgeToCliqueMap = new (System.Collections.Generic.Dictionary$2(Graphs.Edge,System.Collections.Generic.List$1(Graphs.Vertex)))();
            $t = Bridge.getEnumerator(this._graph.Edges);
            try {
                while ($t.moveNext()) {
                    var e = $t.Current;
                    var clique = new (System.Collections.Generic.List$1(Graphs.Vertex))();

                    for (var i = 0; i < e.Multiplicity; i = (i + 1) | 0) {
                        var v = new Graphs.Vertex.$ctor3((e.V1.X + e.V2.X) / 2, (e.V1.Y + e.V2.Y) / 2);
                        g.AddVertex(v);
                        v.Label = e.Label;

                        $t1 = Bridge.getEnumerator(clique);
                        try {
                            while ($t1.moveNext()) {
                                var other = $t1.Current;
                                g.AddEdge$1(other, v);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        clique.add(v);
                    }

                    edgeToCliqueMap.set(e, clique);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            for (var i1 = 0; i1 < this._graph.Edges.Count; i1 = (i1 + 1) | 0) {
                for (var j = (i1 + 1) | 0; j < this._graph.Edges.Count; j = (j + 1) | 0) {
                    if (this._graph.Edges.getItem(i1).Meets(this._graph.Edges.getItem(j))) {
                        $t2 = Bridge.getEnumerator(edgeToCliqueMap.get(this._graph.Edges.getItem(i1)));
                        try {
                            while ($t2.moveNext()) {
                                var v1 = $t2.Current;
                                $t3 = Bridge.getEnumerator(edgeToCliqueMap.get(this._graph.Edges.getItem(j)));
                                try {
                                    while ($t3.moveNext()) {
                                        var v2 = $t3.Current;
                                        g.AddEdge$1(v1, v2);
                                    }
                                } finally {
                                    if (Bridge.is($t3, System.IDisposable)) {
                                        $t3.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }}
                }
            }

            return g;
        },
        DoContractSelectedSubgraph: function () {
            var $t, $t1;
            var selected = this._graph.SelectedVertices;
            if (selected.Count <= 0) {
                return;
            }

            var x = System.Linq.Enumerable.from(selected).average($asm.$.Graphs.GraphCanvas.f2);
            var y = System.Linq.Enumerable.from(selected).average($asm.$.Graphs.GraphCanvas.f3);

            var contractedVertex = new Graphs.Vertex.$ctor3(x, y);
            this._graph.AddVertex(contractedVertex);

            var neighbors = System.Linq.Enumerable.from(selected).selectMany(Bridge.fn.bind(this, $asm.$.Graphs.GraphCanvas.f4)).distinct();

            $t = Bridge.getEnumerator(neighbors);
            try {
                while ($t.moveNext()) {
                    var neighbor = $t.Current;
                    this._graph.AddEdge$1(contractedVertex, neighbor);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            $t1 = Bridge.getEnumerator(selected);
            try {
                while ($t1.moveNext()) {
                    var v = $t1.Current;
                    this._graph.RemoveVertex(v);
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }
            this.Invalidate();

            this.GraphChanged();
        },
        DoIndexLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = i.toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.Degree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoInDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.InDegree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoOutDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.OutDegree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoOutDegreePlusOneLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = (((g.OutDegree(i) + 1) | 0)).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoClearLabels: function (s, vertices) {
            var $t;
            if (s === void 0) { s = ""; }
            if (vertices === void 0) { vertices = null; }
            if (vertices == null || System.Linq.Enumerable.from(vertices).count() <= 0) {
                vertices = System.Linq.Enumerable.range(0, this._graph.Vertices.Count);
            }

            $t = Bridge.getEnumerator(vertices, System.Int32);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    this._graph.Vertices.getItem(v).Label = s;
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
            this.GraphChanged();
        },
        DoSnapToGrid: function () {
            var $t;
            if (this.GridStep <= 0) {
                return;
            }

            $t = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    v.X = Graphs.GraphCanvas._gridStep * Bridge.Math.round(v.X / Graphs.GraphCanvas._gridStep, 0, 6);
                    v.Y = Graphs.GraphCanvas._gridStep * Bridge.Math.round(v.Y / Graphs.GraphCanvas._gridStep, 0, 6);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }},
        PaintGrid: function (g) {
            if (!this.DrawGrid || this.GridStep <= 0) {
                return;
            }

            var x = 0.0;
            while (x <= this.Width) {
                g.GraphicsLayer$IGraphics$DrawLine$1(Graphs.GraphCanvas.GridPenColor, x, 0, x, this.Height, 1.0);
                x += this.GridStep * this._viewScale;
            }

            var y = 0.0;
            while (y <= this.Height) {
                g.GraphicsLayer$IGraphics$DrawLine$1(Graphs.GraphCanvas.GridPenColor, 0, y, this.Width, y, 1.0);
                y += this.GridStep * this._viewScale;
            }
        },
        GetHit: function (x, y) {
            return this._graph.HitTest(x, y);
        },
        Paint: function (g, width, height) {
            var $t;
            if (width === 0 || height === 0) {
                return;
            }

            try {
                this.Width = width;
                this.Height = height;

                if (this.SnapToGrid) {
                    this.DoSnapToGrid();
                }

                g.GraphicsLayer$IGraphics$Clear(Graphs.GraphCanvas.BackgroundColor);
                this.PaintGrid(g);

                this._graph.Paint(g, this._viewScale, this._viewScale);

                switch (this._state) {
                    case Graphs.GraphCanvas.States.Idle: 
                        break;
                    case Graphs.GraphCanvas.States.DraggingVertex: 
                        break;
                    case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                        {
                            var selectionPoints;
                            this._SelectionPointsToken;
                            {
                                selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))(this._selectionPoints.Count);
                                $t = Bridge.getEnumerator(this._selectionPoints);
                                try {
                                    while ($t.moveNext()) {
                                        var p = $t.Current;
                                        selectionPoints.add(new GraphicsLayer.Box.ctor(p.X * this._viewScale, p.Y * this._viewScale));
                                    }
                                } finally {
                                    if (Bridge.is($t, System.IDisposable)) {
                                        $t.System$IDisposable$dispose();
                                    }
                                }}

                            if (selectionPoints.Count > 1) {
                                g.GraphicsLayer$IGraphics$DrawLines(Graphs.GraphCanvas.SelectionPenColor, selectionPoints, 1.0);
                            }

                            break;
                        }
                }
            }
            catch ($e1) {
                $e1 = System.Exception.create($e1);
            }

            this.HasPainted = true;

            if (this._zoomFitNextPaint) {
                this._zoomFitNextPaint = false;
                this.DoZoomFit();
                this.DoZoom(4, new GraphicsLayer.Box.ctor(0.5, 0.5));
            }
        },
        OnMouseMove: function (X, Y) {
            var $t;
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    break;
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    {
                        this._DraggedVertex.X = this._DraggedVertex.DragOffset.X + x;
                        this._DraggedVertex.Y = this._DraggedVertex.DragOffset.Y + y;

                        this.Invalidate();
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    {
                        this._SelectionPointsToken;
                        {
                            this._selectionPoints.add(new GraphicsLayer.Box.ctor(x, y));

                            this.Invalidate();
                        }
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectedVertices: 
                    {
                        $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                v.X = v.DragOffset.X + x;
                                v.Y = v.DragOffset.Y + y;
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        this.Invalidate();
                        break;
                    }
            }
        },
        ToggleEdgeIndices: function () {
            this._graph.ToggleEdgeIndices();

            this.Invalidate();
        },
        RotateVertexIndices: function () {
            var $t;
            var x = this._graph.SelectedVertices;
            if (x.Count <= 0) {
                x = this._graph.Vertices;
            }

            $t = Bridge.getEnumerator(x);
            try {
                while ($t.moveNext()) {
                    var a = $t.Current;
                    a.RotateIndex();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
        },
        RotateEdgeIndices: function () {
            var $t;
            var x = this._graph.SelectedEdges;
            if (x.Count <= 0) {
                x = this._graph.Edges;
            }

            $t = Bridge.getEnumerator(x);
            try {
                while ($t.moveNext()) {
                    var a = $t.Current;
                    a.RotateIndex();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
        },
        SetIndex: function (n) {
            var x = this._graph.SelectedVertices;
            if (x.Count === 1) {
                var v = x.getItem(0);
                var i = this._graph.Vertices.indexOf(v);
                if (i !== n) {
                    this._graph.Vertices.remove(v);
                    if (n >= this._graph.Vertices.Count) {
                        this._graph.Vertices.add(v);
                    } else if (n < i) {
                        this._graph.Vertices.insert(n, v);
                    } else {
                        this._graph.Vertices.insert(n, v);
                    }
                }
            } else {
                var y = this._graph.SelectedEdges;
                if (y.Count === 1) {
                    var v1 = y.getItem(0);
                    var i1 = this._graph.Edges.indexOf(v1);
                    if (i1 !== n) {
                        this._graph.Edges.remove(v1);
                        if (n >= this._graph.Edges.Count) {
                            this._graph.Edges.add(v1);
                        } else if (n < i1) {
                            this._graph.Edges.insert(n, v1);
                        } else {
                            this._graph.Edges.insert(n, v1);
                        }
                    }
                }
            }

            this.Invalidate();
        },
        ToggleVertexIndices: function () {
            this._graph.ToggleVertexIndices();

            this.Invalidate();
        },
        OnMouseDown: function (X, Y, button) {
            var $t;
            this._controlWasDown = this.Canvas.GraphicsLayer$ICanvas$IsControlKeyDown;

            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            if (o == null) {
                                this._selectionPoints.clear();
                                this._selectionPoints.add(new GraphicsLayer.Box.ctor(x, y));
                                this._state = Graphs.GraphCanvas.States.DraggingSelectionRegion;
                            } else if (Bridge.is(o, Graphs.Vertex)) {
                                if (Bridge.cast(o, Graphs.Vertex).IsSelected) {
                                    $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                                    try {
                                        while ($t.moveNext()) {
                                            var v = $t.Current;
                                            v.DragOffset = new GraphicsLayer.Box.ctor(v.X - x, v.Y - y);
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    this._state = Graphs.GraphCanvas.States.DraggingSelectedVertices;
                                } else {
                                    this._DraggedVertex = Bridge.cast(o, Graphs.Vertex);
                                    this._DraggedVertex.DragOffset = new GraphicsLayer.Box.ctor(this._DraggedVertex.X - x, this._DraggedVertex.Y - y);
                                    this._state = Graphs.GraphCanvas.States.DraggingVertex;
                                }
                            } else if (Bridge.is(o, Graphs.Edge)) {
                            }
                        } else if (button === GraphicsLayer.MouseButton.Right) {
                            if (o == null) {
                            } else if (Bridge.is(o, Graphs.Vertex)) {
                            } else if (Bridge.is(o, Graphs.Edge)) {
                            }
                        }

                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    break;
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    break;
            }
        },
        OnMouseUp: function (X, Y, button) {
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    {
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;

                            if (this.SnapToGrid) {
                                this.DoSnapToGrid();
                            }

                            this.GraphChanged();
                        }
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;

                            var selectionPoints;
                            this._SelectionPointsToken;
                            {
                                selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))(this._selectionPoints);

                                if (selectionPoints.Count > 2) {
                                    this._graph.SelectObjects(selectionPoints, this._controlWasDown);
                                }

                                this.Canvas.GraphicsLayer$ICanvas$SelectedObjects = System.Linq.Enumerable.from(this._graph.SelectedItems).select(function(x) { return Bridge.cast(x, System.Object); });
                                this.Invalidate();
                            }
                        }

                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectedVertices: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;
                            this.GraphChanged();
                        }
                        break;
                    }
            }

            this.Invalidate();
        },
        OnMouseDoubleClick: function (X, Y, button) {
            var $t;
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            var graphChanged = false;
            if (this._state === Graphs.GraphCanvas.States.Idle && !this.Canvas.GraphicsLayer$ICanvas$IsControlKeyDown) {
                if (button === GraphicsLayer.MouseButton.Left) {
                    if (o == null) {
                        var v = new Graphs.Vertex.$ctor3(x, y);
                        if (this._graph.AddVertex(v)) {
                            graphChanged = true;
                        }
                    } else if (Bridge.is(o, Graphs.Vertex)) {
                        var endVertex = Bridge.cast(o, Graphs.Vertex);
                        $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var v1 = $t.Current;
                                if (this._graph.AddEdge$1(v1, endVertex)) {
                                    graphChanged = true;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                } else if (button === GraphicsLayer.MouseButton.Right) {
                    if (Bridge.is(o, Graphs.Vertex)) {
                        if (this._graph.RemoveVertex(Bridge.cast(o, Graphs.Vertex))) {
                            graphChanged = true;
                        }
                    }
                }
            }

            this.Invalidate();

            if (graphChanged) {
                this.GraphChanged();
            }
        },
        ZoomFitNextPaint: function () {
            this._zoomFitNextPaint = true;
            this.Invalidate();
        }
    }
    });

    Bridge.ns("Graphs.GraphCanvas", $asm.$);

    Bridge.apply($asm.$.Graphs.GraphCanvas, {
        f1: function (x) {
            var d = { };
            return System.String.startsWith(x, "[") || System.Int32.tryParse(x, d);
        },
        f2: function (z) {
            return z.X;
        },
        f3: function (z) {
            return z.Y;
        },
        f4: function (v) {
            return this._graph.FindNeighbors(v);
        }
    });

    Bridge.define("Graphs.Vertex", {
        inherits: [GraphicsLayer.IPaintable,Graphs.IHittable],
        statics: {
            fields: {
                LabelFont: null,
                IndexFont: null,
                LabelBrushColor: null,
                IndexBrushColor: null,
                BoundaryPenColor: null,
                BoundarySelectedPenColor: null,
                BoundarySelectedPenWidth: 0,
                DefaultFillBrushColor: null,
                UniversalVertexFillBrushColor: null,
                SelectedFillBrushColor: null
            },
            ctors: {
                init: function () {
                    this.LabelFont = new GraphicsLayer.Font("Times New Roman", 12);
                    this.IndexFont = new GraphicsLayer.Font("System", 8);
                    this.LabelBrushColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                    this.IndexBrushColor = new GraphicsLayer.ARGB.$ctor1(200, 200, 0, 0);
                    this.BoundaryPenColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                    this.BoundarySelectedPenColor = new GraphicsLayer.ARGB.$ctor1(255, 0, 255, 0);
                    this.BoundarySelectedPenWidth = 2;
                    this.DefaultFillBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 0);
                    this.UniversalVertexFillBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 255);
                    this.SelectedFillBrushColor = new GraphicsLayer.ARGB.$ctor1(255, 0, 255, 127);
                }
            }
        },
        fields: {
            _Location: null,
            _DragOffset: null,
            _label: null,
            _Style: null,
            _IsSelected: false,
            _padding: 0,
            _LocalBounds: null,
            _showIndex: false
        },
        props: {
            ParentIndex: 0,
            IndexAngle: 0,
            Color: null,
            Modifier: 0,
            X: {
                get: function () {
                    return this._Location.X;
                },
                set: function (value) {
                    this._Location.X = value;
                }
            },
            Y: {
                get: function () {
                    return this._Location.Y;
                },
                set: function (value) {
                    this._Location.Y = value;
                }
            },
            Location: {
                get: function () {
                    return this._Location;
                },
                set: function (value) {
                    this._Location = value;
                }
            },
            Label: {
                get: function () {
                    return this._label;
                },
                set: function (value) {
                    if (Bridge.referenceEquals(value, this._label)) {
                        return;
                    }

                    this._label = value;
                }
            },
            Padding: {
                get: function () {
                    return this._padding;
                },
                set: function (value) {
                    if (value === this._padding) {
                        return;
                    }

                    this._padding = value;
                }
            },
            LocalBounds: {
                get: function () {
                    return this._LocalBounds;
                }
            },
            IsSelected: {
                get: function () {
                    return this._IsSelected;
                },
                set: function (value) {
                    if (value === this._IsSelected) {
                        return;
                    }

                    this._IsSelected = value;
                }
            },
            DragOffset: {
                get: function () {
                    return this._DragOffset;
                },
                set: function (value) {
                    this._DragOffset = value;
                }
            },
            Style: {
                get: function () {
                    return this._Style;
                },
                set: function (value) {
                    if (System.String.startsWith(value, "+") && !System.String.isNullOrEmpty(this._Style)) {
                        this._Style = System.String.concat(this._Style, (System.String.concat(", ", System.String.trimStart(value, [43]))));
                    } else {
                        this._Style = System.String.trimStart(value, [43]);
                    }
                }
            },
            IsUniversal: false
        },
        alias: [
            "Paint", "GraphicsLayer$IPaintable$Paint",
            "Hit", "Graphs$IHittable$Hit"
        ],
        ctors: {
            init: function () {
                this._DragOffset = GraphicsLayer.Box.Empty;
                this._padding = 0.02;
                this._LocalBounds = GraphicsLayer.Box.Empty;
                this._showIndex = false;
            },
            $ctor3: function (x, y) {
                Graphs.Vertex.$ctor4.call(this, x, y, "");
            },
            $ctor1: function (v) {
                Graphs.Vertex.$ctor2.call(this, v, "");
            },
            $ctor2: function (v, label) {
                Graphs.Vertex.$ctor4.call(this, v.X, v.Y, label);
            },
            $ctor4: function (x, y, label) {
                this.$initialize();
                this._Location = new Graphs.Vector(x, y);
                this._label = label;
            },
            ctor: function (v) {
                this.$initialize();
                this.Location = new Graphs.Vector(v.Location.X, v.Location.Y);
                this.Label = v.Label;
                this.Padding = v.Padding;
                this.Style = v.Style;
            }
        },
        methods: {
            Paint: function (g, width, height) {
                var bounds = this.ComputeBounds(g, width, height);

                if (!System.String.isNullOrEmpty(this._label)) {
                    if (Bridge.equals(this.Color, null)) {
                        if (this.IsUniversal) {
                            g.GraphicsLayer$IGraphics$FillEllipse(Graphs.Vertex.UniversalVertexFillBrushColor, bounds);
                        }
                    } else {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.Color, bounds);
                    }

                    g.GraphicsLayer$IGraphics$DrawEllipse(this._IsSelected ? Graphs.Vertex.BoundarySelectedPenColor : Graphs.Vertex.BoundaryPenColor, bounds, this._IsSelected ? Graphs.Vertex.BoundarySelectedPenWidth : 1);
                    g.GraphicsLayer$IGraphics$DrawString(this._label, Graphs.Vertex.LabelFont, Graphs.Vertex.LabelBrushColor, bounds);
                } else {
                    if (Bridge.equals(this.Color, null)) {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.IsUniversal ? Graphs.Vertex.UniversalVertexFillBrushColor : Graphs.Vertex.DefaultFillBrushColor, bounds);
                    } else {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.Color, bounds);
                    }


                    g.GraphicsLayer$IGraphics$DrawEllipse(this._IsSelected ? Graphs.Vertex.BoundarySelectedPenColor : Graphs.Vertex.BoundaryPenColor, bounds, this._IsSelected ? Graphs.Vertex.BoundarySelectedPenWidth : 1);
                }

                if (this._showIndex) {
                    var cx = (bounds.Left + bounds.Right) / 2;
                    var cy = (bounds.Bottom + bounds.Top) / 2;
                    var r = Math.max(bounds.Width, bounds.Height) / 2 + 5;
                    var bb = new GraphicsLayer.Box.$ctor1(cx + r * Math.cos(this.IndexAngle) - 5, cy + r * Math.sin(this.IndexAngle) - 5, 10, 10);
                    g.GraphicsLayer$IGraphics$DrawString(this.ParentIndex.toString(), Graphs.Vertex.IndexFont, Graphs.Vertex.IndexBrushColor, bb);
                }
            },
            Hit: function (x, y) {
                var hit = this._LocalBounds.Contains$1(x, y);
                return hit;
            },
            ComputeBounds: function (g, width, height) {
                var bounds;

                if (!System.String.isNullOrEmpty(this._label)) {
                    var size = g.GraphicsLayer$IGraphics$MeasureString(this._label, Graphs.Vertex.LabelFont);

                    bounds = new GraphicsLayer.Box.$ctor1(this.X * width - size.Width / 2, this.Y * height - size.Height / 2, size.Width, size.Height);
                } else {
                    bounds = new GraphicsLayer.Box.$ctor1(this.X * width, this.Y * height, 0, 0);
                }

                bounds.Inflate(this._padding * width, this._padding * height);

                this._LocalBounds = new GraphicsLayer.Box.$ctor1(bounds.X / width, bounds.Y / height, bounds.Width / width, bounds.Height / height);

                return bounds;
            },
            RotateIndex: function () {
                this.IndexAngle += 0.19634954084936207;
                if (this.IndexAngle >= 6.2831853071795862) {
                    this.IndexAngle = 0;
                }
            },
            ToggleIndex: function () {
                this._showIndex = !this._showIndex;
            }
        }
    });

    Bridge.define("Test.Graphics", {
        inherits: [GraphicsLayer.IGraphics],
        fields: {
            _canvas: null,
            _context: null
        },
        alias: [
            "Clear", "GraphicsLayer$IGraphics$Clear",
            "DrawLine", "GraphicsLayer$IGraphics$DrawLine",
            "DrawLine$1", "GraphicsLayer$IGraphics$DrawLine$1",
            "DrawLines", "GraphicsLayer$IGraphics$DrawLines",
            "FillPolygon", "GraphicsLayer$IGraphics$FillPolygon",
            "DrawEllipse", "GraphicsLayer$IGraphics$DrawEllipse",
            "FillEllipse", "GraphicsLayer$IGraphics$FillEllipse",
            "DrawString", "GraphicsLayer$IGraphics$DrawString",
            "MeasureString", "GraphicsLayer$IGraphics$MeasureString"
        ],
        ctors: {
            ctor: function (canvas) {
                this.$initialize();
                this._canvas = canvas;
                this._context = canvas.getContext("2d");
            }
        },
        methods: {
            Clear: function (argb) {
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.clearRect(0, 0, this._canvas.width, this._canvas.height);
                this._context.fillRect(0, 0, this._canvas.width, this._canvas.height);
            },
            DrawLine: function (argb, p1, p2, width) {
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.lineWidth = width;
                this._context.globalAlpha = Math.min(1.0, Math.max(0.0, argb.A / 255.0));
                this._context.beginPath();
                this._context.moveTo(p1.X, p1.Y);
                this._context.lineTo(p2.X, p2.Y);
                this._context.stroke();
            },
            DrawLine$1: function (argb, x1, y1, x2, y2, width) {
                if (width === void 0) { width = 1.0; }
                this.DrawLine(argb, new GraphicsLayer.Box.ctor(x1, y1), new GraphicsLayer.Box.ctor(x2, y2), width);
            },
            DrawLines: function (argb, points, width) {
                var $t;
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.lineWidth = width;
                this._context.beginPath();
                var first = true;
                $t = Bridge.getEnumerator(points, GraphicsLayer.Box);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (first) {
                            this._context.moveTo(b.X, b.Y);
                            first = false;
                        } else {
                            this._context.lineTo(b.X, b.Y);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }this._context.stroke();
            },
            FillPolygon: function (argb, points) {
                var $t;
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.beginPath();
                var first = true;
                $t = Bridge.getEnumerator(points, GraphicsLayer.Box);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (first) {
                            this._context.moveTo(b.X, b.Y);
                            first = false;
                        } else {
                            this._context.lineTo(b.X, b.Y);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }this._context.fill();
            },
            DrawEllipse: function (argb, bounds, width) {
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.beginPath();
                this._context.arc(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2, bounds.Width / 2, 0, 6.2831853071795862);
                this._context.stroke();
            },
            FillEllipse: function (argb, bounds) {
                this._context.beginPath();
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.arc(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2, bounds.Width / 2, 0, 6.2831853071795862);
                this._context.fill();
            },
            DrawString: function (s, font, argb, bounds) {
                this._context.font = System.String.concat(font.Name, " ", font.Size, "px");
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.strokeText(s, bounds.X, bounds.Y);
            },
            MeasureString: function (s, font) {
                this._context.font = System.String.concat(font.Name, " ", font.Size, "px");
                var metrics = this._context.measureText(s);

                return new GraphicsLayer.Box.$ctor1(0, 0, metrics.width, metrics.emHeightAscent + metrics.emHeightDescent);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer],
        props: {
            ChildReason: {
                get: function () {
                    return "goodness increased";
                }
            }
        },
        ctors: {
            ctor: function (findCleanestWin) {
                if (findCleanestWin === void 0) { findCleanestWin = true; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer.ctor.call(this, findCleanestWin);
            }
        },
        methods: {
            IsChildBoardBetter: function (knowledge, board, childBoard) {
                var x = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(childBoard.Stacks, childBoard.Pot)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Int32);
                var y = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Int32);

                return this.StandardDeviation(x) < this.StandardDeviation(y);
            },
            Mean: function (x) {
                return ((Bridge.Int.div(System.Linq.Enumerable.from(x).sum(), x.Count)) | 0);
            },
            Median: function (x) {
                return System.Linq.Enumerable.from(x).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f2).elementAt(((Bridge.Int.div(x.Count, 2)) | 0));
            },
            StandardDeviation: function (x) {
                var mu = this.Mean(x);

                return Math.sqrt(System.Linq.Enumerable.from(x).sum(function (a) {
                        return (a - mu) * (a - mu);
                    }) / x.Count);
            },
            AbsoluteDeviation: function (x) {
                var mu = this.Median(x);

                return System.Linq.Enumerable.from(x).sum(function (a) {
                        return Math.abs(mu - a);
                    });
            },
            PushLeftOrdering: function (knowledge, board, childBoard) {
                var x = this.GetVectors(childBoard);
                var y = this.GetVectors(board);

                for (var i = 0; i < Math.min(x.Count, y.Count); i = (i + 1) | 0) {
                    var c = this.CompareVectors(x.getItem(i), y.getItem(i));

                    if (c > 0) {
                        return true;
                    }
                    if (c < 0) {
                        return false;
                    }
                }

                return x.Count < y.Count;
            },
            GetVectors: function (b) {
                return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(b.Stacks, b.Pot)).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Collections.Generic.List$1(System.Int32));
            },
            CompareVectors: function (x, y) {
                if (x.Count > y.Count) {
                    return -1;
                }
                if (x.Count < y.Count) {
                    return 1;
                }

                for (var i = 0; i < x.Count; i = (i + 1) | 0) {
                    if (x.getItem(i) < y.getItem(i)) {
                        return 1;
                    }
                    if (x.getItem(i) > y.getItem(i)) {
                        return -1;
                    }
                }

                return 0;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer, {
        f1: function (c) {
            return c.Count;
        },
        f2: function (a) {
            return a;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder],
        statics: {
            methods: {
                BeginProof: function (sb) {
                    sb.appendLine("\\begin{proof}");
                },
                EndProof: function (sb) {
                    sb.appendLine("\\end{proof}");
                }
            }
        },
        fields: {
            _figureTikz: null,
            _maxPot: 0,
            _activeIndices: null,
            _activeListSizes: null,
            _possibleListIndices: null,
            _possibleLists: null,
            _allBoards: null,
            _sequenceComparer: null,
            _sequenceGeneralizer: null,
            _orderFilter: null,
            _isWin: false
        },
        props: {
            UseWildCards: false
        },
        ctors: {
            init: function () {
                this._orderFilter = new (System.Collections.Generic.Dictionary$2(System.String,System.String))();
            },
            ctor: function (mind, figureTikz, usePermutations) {
                if (figureTikz === void 0) { figureTikz = ""; }
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.ctor.call(this, mind, usePermutations);
                this._figureTikz = figureTikz;
                this._maxPot = mind.MaxPot;
                this.UseWildCards = true;
            }
        },
        methods: {
            WriteProof: function () {
                var $t, $t1, $t2, $t3;
                var sb = new System.Text.StringBuilder();

                this._isWin = System.Linq.Enumerable.from(this.Cases).all($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f1);

                this.AddFigure(sb);
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.BeginProof(sb);
                this.GeneratePossibleLists();
                this.GeneralizeAllBoards(sb);

                var wonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                for (var caseNumber = 1; caseNumber <= this.Cases.Count; caseNumber = (caseNumber + 1) | 0) {
                    var c = this.Cases.getItem(((caseNumber - 1) | 0));
                    var boards = System.Linq.Enumerable.from(c.Boards).orderBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f2)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                    var thisClaimBoards;
                    if (caseNumber > 1 && !c.BreakerWin) {
                        thisClaimBoards = System.Linq.Enumerable.from(boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f4)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    } else {
                        thisClaimBoards = boards;
                    }

                    if (!c.BreakerWin) {
                        wonBoards.addRange(thisClaimBoards);
                    }

                    var thisClaimBoardsTex = this.GeneralizeBoards(thisClaimBoards);

                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    sb.appendLine(System.String.format(System.String.concat("\\case{{{0}}}{{$B$ is one of the {1} following boards:\n ", thisClaimBoardsTex, ".}}"), Bridge.box(caseNumber, System.Int32), Bridge.box(thisClaimBoards.Count, System.Int32)));
                    sb.appendLine();
                    sb.appendLine("\\bigskip");

                    if (c.BreakerWin) {
                        sb.appendLine();

                        if (c.Superabundant) {
                            sb.appendLine("No single Kempe exchange gets from these boards to a previous case.");
                        } else {
                            sb.appendLine("These boards are not superabundant.");
                        }
                    } else if (caseNumber === 1) {
                        sb.appendLine();
                        sb.appendLine("In all these cases, $H$ is immediately colorable from the lists.");
                    } else {
                        sb.appendLine();

                        var swapCountGroups = System.Linq.Enumerable.from(boards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f6)).toList(System.Linq.Grouping$2);
                        $t = Bridge.getEnumerator(swapCountGroups);
                        try {
                            while ($t.moveNext()) {
                                var swapCountGroup = $t.Current;
                                if (swapCountGroup.key() === 1) {
                                    sb.appendLine("Each of the following boards can be handled by a single Kempe change that has an endpoint at infinity.");

                                    $t1 = Bridge.getEnumerator(swapCountGroup);
                                    try {
                                        while ($t1.moveNext()) {
                                            var b = $t1.Current;
                                            var pp = { };
                                            var listString = b.ToListStringInLexOrder(pp);

                                            var treeInfo = this.Mind.GetWinTreeInfo(b);
                                            var alpha = Math.min(pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Alpha), pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Beta));
                                            var beta = Math.max(pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Alpha), pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Beta));
                                            var groups = System.Linq.Enumerable.from(treeInfo).groupBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f7);

                                            if (!this.CheckPermutationGoodNess(alpha, beta, listString, System.Linq.Enumerable.from(treeInfo).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f7).distinct().toList(System.Int32))) {
                                                sb.appendLine();
                                                sb.appendLine("there is badness here");
                                                sb.appendLine();
                                            }

                                            sb.append(System.String.concat("$\\K_{" + alpha + "" + beta + ",\\infty}(", listString, ",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f8).select(Bridge.fn.bind(this, function (gg) {
                                                return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(gg.key(), b, this._maxPot) + 1) | 0);
                                            })), null), ")"));
                                            sb.appendLine(System.String.concat("\\Rightarrow $ ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f8).select(Bridge.fn.bind(this, function (gg) {
                                                return System.String.concat("$", this.GetChildBoardName(b, gg.first()), "$ (Case ", this.GetHandledCaseNumber(b, gg.first()), ")");
                                            })), null), "."));
                                            sb.appendLine();

                                            if (this._permutationLinked.get(b).Count > 0) {
                                                sb.appendLine();
                                                sb.appendLine();
                                                sb.appendLine(System.String.concat("Free by vertex permutation: ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f9)))));
                                                sb.appendLine();
                                                sb.appendLine();
                                            }

                                            sb.appendLine("\\bigskip");
                                            sb.appendLine();
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }} else if (swapCountGroup.key() === 2) {
                                    sb.appendLine("\\bigskip");
                                    sb.appendLine();
                                    sb.appendLine("Each of the following boards can be handled by a single Kempe change.");
                                    $t2 = Bridge.getEnumerator(swapCountGroup);
                                    try {
                                        while ($t2.moveNext()) {
                                            var b1 = $t2.Current;
                                            var pp1 = { };
                                            var listString1 = b1.ToListStringInLexOrder(pp1);

                                            var treeInfo1 = this.Mind.GetWinTreeInfo(b1);
                                            var alpha1 = Math.min(pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Alpha), pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Beta));
                                            var beta1 = Math.max(pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Alpha), pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Beta));
                                            var leftover = { v : System.Linq.Enumerable.from(treeInfo1).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo) };

                                            if (!this.CheckPermutationGoodNess(alpha1, beta1, listString1, System.Linq.Enumerable.from(treeInfo1).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f10).distinct().toList(System.Int32))) {
                                                sb.appendLine();
                                                sb.appendLine("there is badness here");
                                                sb.appendLine();
                                            }

                                            while (leftover.v.Count > 0) {
                                                var commonestSwapper = { v : Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.MaxIndex(System.Int32, System.Linq.Enumerable.range(0, b1._stackCount), (function ($me, leftover) {
                                                    return function (v) {
                                                        return System.Linq.Enumerable.from(leftover.v).count(function (bc) {
                                                                return bc.SwapVertices.contains(v);
                                                            });
                                                    };
                                                })(this, leftover)) };
                                                var handledAll = System.Linq.Enumerable.from(leftover.v).where((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.contains(commonestSwapper.v);
                                                        };
                                                    })(this, commonestSwapper)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);
                                                var handled = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Distinct(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo, System.Int32, handledAll, (function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper))).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);

                                                sb.append(System.String.concat("$\\K_{" + alpha1 + "" + beta1 + "," + (((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(commonestSwapper.v, b1, this._maxPot) + 1) | 0)) + "}(", listString1));

                                                var single = System.Linq.Enumerable.from(handled).firstOrDefault($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f11, null);
                                                if (single != null) {
                                                    sb.append(",\\infty");
                                                }

                                                if (System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f12).count() > 0) {
                                                    sb.append(System.String.concat(",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f12).orderBy((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper)).select((function ($me, commonestSwapper) {
                                                        return Bridge.fn.bind($me, function (bc) {
                                                            return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first(), b1, this._maxPot) + 1) | 0);
                                                        });
                                                    })(this, commonestSwapper)), null)));
                                                }
                                                sb.append(")");

                                                sb.appendLine(System.String.concat("\\Rightarrow $ ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(handled).orderBy((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper)).select(Bridge.fn.bind(this, function (bc) {
                                                    return System.String.concat("$", this.GetChildBoardName(b1, bc), "$ (Case ", this.GetHandledCaseNumber(b1, bc), ")");
                                                })), null), "."));
                                                sb.appendLine();

                                                $t3 = Bridge.getEnumerator(handledAll);
                                                try {
                                                    while ($t3.moveNext()) {
                                                        var bc = $t3.Current;
                                                        leftover.v.remove(bc);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t3, System.IDisposable)) {
                                                        $t3.System$IDisposable$dispose();
                                                    }
                                                }}

                                            if (this._permutationLinked.get(b1).Count > 0) {
                                                sb.appendLine();
                                                sb.appendLine();
                                                sb.appendLine(System.String.concat("Free by vertex permutation: ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b1)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f9)))));
                                                sb.appendLine();
                                                sb.appendLine();
                                            }

                                            sb.appendLine();
                                            sb.appendLine("\\bigskip");
                                            sb.appendLine();
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }}
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                }

                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.EndProof(sb);

                return sb.toString();
            },
            CheckPermutationGoodNess: function (alpha, beta, stacksString, swapVertices) {
                var $t;
                var stacks = System.Linq.Enumerable.from(System.String.split(stacksString, [124].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f14).toList(System.Collections.Generic.List$1(System.Int32));

                var colors = function (_o6) {
                        _o6.add(alpha);
                        _o6.add(beta);
                        return _o6;
                    }(new (System.Collections.Generic.List$1(System.Int32))());
                $t = Bridge.getEnumerator(swapVertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        if (Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, colors, stacks.getItem(v)) !== 1) {
                            debugger;
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            GetChildBoardName: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return childBoard.ToListStringInLexOrder$1(this._maxPot);
            },
            GeneralizeAllBoards: function (sb) {
                this._allBoards = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this.Mind.ColorableBoards, this.Mind.NonColorableBoards), this.Mind.BreakerWonBoards)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                this._sequenceComparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(System.Int32))();
                this._sequenceGeneralizer = new (Algorithms.Utility.SequenceGeneralizer$1(System.Int32))(this._activeIndices.Count, this._possibleListIndices);

                var allBoardsTex = this.GeneralizeBoards(this._allBoards);

                if (this.Mind.OnlyConsiderNearlyColorableBoards) {
                    sb.appendLine(System.String.concat("We need to handle all boards that are nearly colorable for edge $e$ up to permutation of colors, so it will suffice to handle the following " + this._allBoards.Count + " boards: ", allBoardsTex, "."));
                } else {
                    sb.appendLine(System.String.concat("We need to handle all boards up to permutation of colors, so it will suffice to handle the following " + this._allBoards.Count + " boards: ", allBoardsTex, "."));
                }

                if (this.Mind.BreakerWonBoards.Count > 0) {
                    sb.appendLine(System.String.concat("Unfortunately, the following " + this.Mind.BreakerWonBoards.Count + " boards cannot be handled: ", this.GeneralizeBoards(this.Mind.BreakerWonBoards), "."));
                }

                sb.appendLine();
            },
            GeneralizeBoards: function (boards) {
                if (this.UseWildCards) {
                    var examples = System.Linq.Enumerable.from(boards).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f15)).toList(System.Collections.Generic.List$1(System.Int32));
                    var nonExamples = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.repeat(this._possibleListIndices, this._activeIndices.Count))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f16).except(System.Linq.Enumerable.from(examples).distinct(this._sequenceComparer), this._sequenceComparer).toList(System.Collections.Generic.List$1(System.Int32));

                    var generalized = this._sequenceGeneralizer.Generalize(examples, nonExamples, false);
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f18)), "and");
                }

                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(boards).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f2)).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f19).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f20), "and");
            },
            ToListIndices: function (b) {
                var stacks = System.Linq.Enumerable.from(b.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f21).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f22)).toList(System.Collections.Generic.List$1(System.Int32));
                return System.Linq.Enumerable.from(stacks).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f23)).toList(System.Int32);
            },
            GeneratePossibleLists: function () {
                var stacks = System.Linq.Enumerable.from(this.Mind.ColorableBoards.getItem(0).Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f21).toList(System.Collections.Generic.List$1(System.Int32));
                this._activeIndices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), stacks, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f22))).toList(System.Int32);
                this._activeListSizes = System.Linq.Enumerable.from(stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f24).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f25)).toList(System.Int32);

                var pot = System.Linq.Enumerable.range(0, this._maxPot).toList(System.Int32);
                this._possibleLists = System.Linq.Enumerable.from(System.Linq.Enumerable.from(this._activeListSizes).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f26).toList(System.Int32)).selectMany(function (c) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, pot, c);
                    }).toList(System.Collections.Generic.List$1(System.Int32));
                this._possibleListIndices = System.Linq.Enumerable.range(0, this._possibleLists.Count).toList(System.Int32);
            },
            AddFigure: function (sb) {
                var figureID = System.String.concat("fig:", System.Guid.newGuid().toString());

                sb.appendLine("\\begin{figure}");
                sb.appendLine("\\centering");
                sb.appendLine(this._figureTikz);
                sb.appendLine(System.String.concat("\\caption{Vertices are ordered as labeled.}\\label{", figureID, "}"));
                sb.appendLine("\\end{figure}");

                sb.appendLine("\\begin{lem}");
                if (this._isWin) {
                    sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is reducible."));
                } else {
                    sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is not reducible."));
                }
                sb.appendLine("\\end{lem}");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder, {
        f1: function (c) {
            return !c.BreakerWin;
        },
        f2: function (b) {
            return b.ToListStringInLexOrder$1(this._maxPot);
        },
        f3: function (tup) {
            return tup.item2;
        },
        f4: function (b) {
            return System.Linq.Enumerable.from(System.Array.init([b], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f3));
        },
        f5: function (ti) {
            return ti.SwapVertices.Count;
        },
        f6: function (b) {
            return System.Linq.Enumerable.from(this.Mind.GetWinTreeInfo(b)).max($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f5);
        },
        f7: function (ss) {
            return ss.SwapVertices.getItem(0);
        },
        f8: function (gg) {
            return gg.key();
        },
        f9: function (ppp) {
            return System.String.concat("$", ppp.item1, "\\Rightarrow ", ppp.item2.ToListStringInLexOrder$1(this._maxPot), "$");
        },
        f10: function (ss) {
            return ss.SwapVertices;
        },
        f11: function (bc) {
            return bc.SwapVertices.Count === 1;
        },
        f12: function (bc) {
            return bc.SwapVertices.Count > 1;
        },
        f13: function (c) {
            return System.Int32.parse(String.fromCharCode(c));
        },
        f14: function (s) {
            return System.Linq.Enumerable.from(System.String.toCharArray(s, 0, s.length)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f13).toList(System.Int32);
        },
        f15: function (b) {
            return this.ToListIndices(b);
        },
        f16: function (ll) {
            return System.Linq.Enumerable.from(ll).toList(System.Int32);
        },
        f17: function (_, i) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.ToTex(_, this._possibleLists, this._activeListSizes.getItem(i));
        },
        f18: function (gg) {
            return System.String.concat("$", Bridge.toArray(System.Linq.Enumerable.from(gg).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f17))).join("|"), "$");
        },
        f19: function (x) {
            return x;
        },
        f20: function (s) {
            return System.String.concat("$", s, "$");
        },
        f21: function (l) {
            return Algorithms.Int64Usage.ToSet(l);
        },
        f22: function (s) {
            return s.Count < this._maxPot;
        },
        f23: function (s) {
            return Algorithms.GenericExtensions.FirstIndex(System.Collections.Generic.List$1(System.Int32), this._possibleLists, function (ss) {
                return System.Linq.Enumerable.from(ss).sequenceEqual(s);
            });
        },
        f24: function (s) {
            return s.Count;
        },
        f25: function (c) {
            return c < this._maxPot;
        },
        f26: function (c) {
            return c;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder],
        fields: {
            _figureTikz: null
        },
        ctors: {
            ctor: function (mind, figureTikz) {
                if (figureTikz === void 0) { figureTikz = ""; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.ctor.call(this, mind);
                this._figureTikz = figureTikz;
            }
        },
        methods: {
            WriteProof: function () {
                var $t, $t1, $t2, $t3, $t4;
                var length = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(this.Mind.ColorableBoards.getItem(0)).length;
                var allBoards = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this.Mind.ColorableBoards, this.Mind.NonColorableBoards)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                var comparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(System.Int32))();
                var sg = new (Algorithms.Utility.SequenceGeneralizer$1(System.Int32))(length, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f1(new (System.Collections.Generic.List$1(System.Int32))()));

                var zot2 = System.Linq.Enumerable.from(allBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                var examples2 = System.Linq.Enumerable.from(allBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));

                var nonExamples2 = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Int32, System.Linq.Enumerable.repeat(System.Linq.Enumerable.range(0, 3), length))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f3).except(System.Linq.Enumerable.from(zot2).distinct(comparer), comparer).toList(System.Collections.Generic.List$1(System.Int32));

                var generalized2 = sg.Generalize(examples2, nonExamples2, false);
                var allBoardsXYZ = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized2).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f5), "or");

                var sb = new System.Text.StringBuilder();
                var figureID = System.String.concat("fig:", System.Guid.newGuid().toString());

                sb.appendLine("\\begin{figure}");
                sb.appendLine("\\centering");
                sb.appendLine(this._figureTikz);
                sb.appendLine(System.String.concat("\\caption{Solid vertices have lists of size 3 and the labeled vertices have lists of size 2.}\\label{", figureID, "}"));
                sb.appendLine("\\end{figure}");

                sb.appendLine("\\begin{lem}");
                sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is reducible."));
                sb.appendLine("\\end{lem}");

                var letters = $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f6(new (System.Collections.Generic.List$1(System.String))());
                var stringLength = System.Linq.Enumerable.from(this.Mind.ColorableBoards.getItem(0).Stacks.Value).count($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f7);
                var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                var randomString = "";
                for (var i = 0; i < stringLength; i = (i + 1) | 0) {
                    randomString = System.String.concat(randomString, letters.getItem(rng.next$1(3)));
                }

                var randomString2 = "";
                for (var i1 = 0; i1 < stringLength; i1 = (i1 + 1) | 0) {
                    randomString2 = System.String.concat(randomString2, letters.getItem(rng.next$1(3)));
                }

                var randomString3 = "";
                for (var i2 = 0; i2 < stringLength; i2 = (i2 + 1) | 0) {
                    randomString3 = System.String.concat(randomString3, letters.getItem(rng.next$1(3)));
                }

                sb.append("\\begin{proof}");
                sb.appendLine(System.String.concat("Let $X = \\{0,1\\}$, $Y = \\{0,2\\}$ and $Z = \\{1,2\\}$. Then with the vertex ordering in Figure \\ref{", figureID, "}, a string such as ", randomString, ", "));
                sb.appendLine("represents a possible list assignment on $V(H)$ arising from a $3$-edge-coloring of $G-E(H)$.");
                sb.appendLine("By an $X$-Kempe change, we mean flipping colors $0$ and $1$ on a two-colored path in $G-E(H)$.  We call such a path an $X$-path. ");
                sb.appendLine("Any endpoint of an $X$-path in $H$ must end at a $Y$ or $Z$ vertex.  The meanings of $Y$-Kempe change, $Z$-Kempe change, $Y$-path and $Z$-path are analogous.");
                sb.appendLine("Note that if there are an odd number of $Y$'s and $Z$'s, then at least one $X$-path has only one endpoint in $H$.");
                sb.appendLine(System.String.concat("We use shorthand notation like $\\K_{X, 2}(", randomString, ",5,6) \\Rightarrow ", randomString2, ",", randomString3, "$ (Case 1)."));
                sb.appendLine(System.String.concat("This means the $X$-Kempe change on ", randomString, " starting at the second vertex and ending at the fifth and sixth result in boards ", randomString2, " and ", randomString3, " respectively and these are handled by Case 1."));
                sb.appendLine("The $\\infty$ symbol means starting (or ending) outside $H$.");
                sb.appendLine();

                if (this.Mind.OnlyConsiderNearlyColorableBoards) {
                    sb.appendLine(System.String.concat("We need to handle all boards that are nearly colorable for edge $e$ up to permutations of $\\{X,Y,Z\\}$, so it will suffice to handle all boards of the form ", allBoardsXYZ, "."));
                } else {
                    sb.appendLine(System.String.concat("We need to handle all boards up to permutations of $\\{X,Y,Z\\}$, so it will suffice to handle all boards of the form ", allBoardsXYZ, "."));
                }

                sb.appendLine();
                var wonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                for (var caseNumber = 1; caseNumber <= this.Cases.Count; caseNumber = (caseNumber + 1) | 0) {
                    var c = this.Cases.getItem(((caseNumber - 1) | 0));

                    var boards = c.Boards;
                    var thisClaimBoards;
                    if (caseNumber > 1) {
                        thisClaimBoards = System.Linq.Enumerable.from(boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f9)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    } else {
                        thisClaimBoards = boards;
                    }

                    wonBoards.addRange(thisClaimBoards);

                    var zot = System.Linq.Enumerable.from(thisClaimBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                    var examples = System.Linq.Enumerable.from(thisClaimBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                    var nonExamples = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Int32, System.Linq.Enumerable.repeat(System.Linq.Enumerable.range(0, 3), length))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f3).except(System.Linq.Enumerable.from(zot).distinct(comparer), comparer).toList(System.Collections.Generic.List$1(System.Int32));

                    var generalized = sg.Generalize(examples, nonExamples);
                    var boardsXYZ = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f5), "or");

                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    sb.appendLine(System.String.format(System.String.concat("\\case{{{0}}}{{$B$ is one of ", boardsXYZ, ".}}"), Bridge.box(caseNumber, System.Int32)));
                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    if (caseNumber === 1) {
                        sb.appendLine();
                        sb.appendLine("In all these cases, $H$ is immediately colorable from the lists.");
                    } else {
                        sb.appendLine();
                        var fixGroups = System.Linq.Enumerable.from(boards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f10));

                        $t = Bridge.getEnumerator(fixGroups);
                        try {
                            while ($t.moveNext()) {
                                var fixGroup = $t.Current;
                                var others = System.Linq.Enumerable.from(letters).toList(System.String);
                                others.remove(fixGroup.key());

                                var swapCountGroups = fixGroup.groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f12)).toList(System.Linq.Grouping$2);
                                $t1 = Bridge.getEnumerator(swapCountGroups);
                                try {
                                    while ($t1.moveNext()) {
                                        var swapCountGroup = $t1.Current;
                                        if (swapCountGroup.key() === 1) {
                                            $t2 = Bridge.getEnumerator(swapCountGroup);
                                            try {
                                                while ($t2.moveNext()) {
                                                    var b = $t2.Current;
                                                    var treeInfo = this.Mind.GetWinTreeInfo(b);
                                                    var groups = System.Linq.Enumerable.from(treeInfo).groupBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f13);

                                                    sb.append(System.String.concat("$\\K_{", fixGroup.key(), ",\\infty}(", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(b), ",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f14).select(function (gg) {
                                                        return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(gg.key(), b) + 1) | 0);
                                                    }), null), ")"));
                                                    sb.appendLine(System.String.concat("\\Rightarrow $", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f14).select(Bridge.fn.bind(this, function (gg) {
                                                        return System.String.concat("$", this.GetChildBoardName(b, gg.first()), "$");
                                                    })), null), "( Case ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(treeInfo).select(Bridge.fn.bind(this, function (bc) {
                                                            return this.GetHandledCaseNumber(b, bc);
                                                        })).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f15)), ")."));
                                                    sb.appendLine();

                                                    if (this._permutationLinked.get(b).Count > 0) {
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                        sb.appendLine(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f16)));
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }} else if (swapCountGroup.key() === 2) {
                                            $t3 = Bridge.getEnumerator(swapCountGroup);
                                            try {
                                                while ($t3.moveNext()) {
                                                    var b1 = $t3.Current;
                                                    var treeInfo1 = this.Mind.GetWinTreeInfo(b1);
                                                    var leftover = { v : System.Linq.Enumerable.from(treeInfo1).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo) };

                                                    while (leftover.v.Count > 0) {
                                                        var commonestSwapper = { v : Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.MaxIndex(System.Int32, System.Linq.Enumerable.range(0, b1._stackCount), (function ($me, leftover) {
                                                            return function (v) {
                                                                return System.Linq.Enumerable.from(leftover.v).count(function (bc) {
                                                                        return bc.SwapVertices.contains(v);
                                                                    });
                                                            };
                                                        })(this, leftover)) };
                                                        var handledAll = System.Linq.Enumerable.from(leftover.v).where((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.contains(commonestSwapper.v);
                                                                };
                                                            })(this, commonestSwapper)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);
                                                        var handled = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Distinct(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo, System.Int32, handledAll, (function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper))).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);

                                                        sb.append(System.String.concat("$\\K_{", fixGroup.key(), ",", (((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(commonestSwapper.v, b1) + 1) | 0)), "}(", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(b1)));

                                                        var single = System.Linq.Enumerable.from(handled).firstOrDefault($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f17, null);
                                                        if (single != null) {
                                                            sb.append(",\\infty");
                                                        }

                                                        if (System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f18).count() > 0) {
                                                            sb.append(System.String.concat(",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f18).orderBy((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper)).select((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first(), b1) + 1) | 0);
                                                                };
                                                            })(this, commonestSwapper)), null)));
                                                        }
                                                        sb.append(")");

                                                        sb.appendLine(System.String.concat("\\Rightarrow $", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(handled).orderBy((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper)).select(Bridge.fn.bind(this, function (bc) {
                                                            return System.String.concat("$", this.GetChildBoardName(b1, bc), "$");
                                                        })), null), "(Case ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).select(Bridge.fn.bind(this, function (bc) {
                                                                return this.GetHandledCaseNumber(b1, bc);
                                                            })).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f15)), ")."));
                                                        sb.appendLine();

                                                        $t4 = Bridge.getEnumerator(handledAll);
                                                        try {
                                                            while ($t4.moveNext()) {
                                                                var bc = $t4.Current;
                                                                leftover.v.remove(bc);
                                                            }
                                                        } finally {
                                                            if (Bridge.is($t4, System.IDisposable)) {
                                                                $t4.System$IDisposable$dispose();
                                                            }
                                                        }}

                                                    if (this._permutationLinked.get(b1).Count > 0) {
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                        sb.appendLine(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b1)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f16)));
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t3, System.IDisposable)) {
                                                    $t3.System$IDisposable$dispose();
                                                }
                                            }}
                                    }
                                } finally {
                                    if (Bridge.is($t1, System.IDisposable)) {
                                        $t1.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    sb.appendLine();
                }

                sb.appendLine("\\end{proof}");
                return sb.toString();
            },
            GetChildBoardName: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(childBoard);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder, {
        f1: function (_o7) {
            _o7.add(0);
            _o7.add(1);
            _o7.add(2);
            return _o7;
        },
        f2: function (b) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.To012(b);
        },
        f3: function (ll) {
            return System.Linq.Enumerable.from(ll).toList(System.Int32);
        },
        f4: function (_) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToTex(_);
        },
        f5: function (gg) {
            return System.String.concat("$", Bridge.toArray(System.Linq.Enumerable.from(gg).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f4)).join(""), "$");
        },
        f6: function (_o8) {
            _o8.add("X");
            _o8.add("Y");
            _o8.add("Z");
            return _o8;
        },
        f7: function (ss) {
            return Algorithms.Int64Usage.PopulationCount(ss) === 2;
        },
        f8: function (tup) {
            return tup.item2;
        },
        f9: function (b) {
            return System.Linq.Enumerable.from(System.Array.init([b], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f8));
        },
        f10: function (b) {
            var treeInfo = this.Mind.GetWinTreeInfo(b);
            var fixLetter = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1(System.Int64((1 << System.Linq.Enumerable.from(treeInfo).first().Alpha) | (1 << System.Linq.Enumerable.from(treeInfo).first().Beta)));

            return fixLetter;
        },
        f11: function (ti) {
            return ti.SwapVertices.Count;
        },
        f12: function (b) {
            return System.Linq.Enumerable.from(this.Mind.GetWinTreeInfo(b)).max($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f11);
        },
        f13: function (ss) {
            return ss.SwapVertices.getItem(0);
        },
        f14: function (gg) {
            return gg.key();
        },
        f15: function (xx) {
            return xx;
        },
        f16: function (ppp) {
            return System.String.concat("$", ppp.item1, "\\Rightarrow ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(ppp.item2), "$");
        },
        f17: function (bc) {
            return bc.SwapVertices.Count === 1;
        },
        f18: function (bc) {
            return bc.SwapVertices.Count > 1;
        }
    });

    Bridge.define("Test.TabCanvas", {
        inherits: [GraphicsLayer.ICanvas],
        statics: {
            fields: {
                Colors: null
            },
            ctors: {
                init: function () {
                    this.Colors = $asm.$.Test.TabCanvas.f1(new (System.Collections.Generic.List$1(GraphicsLayer.ARGB))());
                }
            },
            methods: {
                ExtractPoints: function (x) {
                    return new (Bridge.GeneratorEnumerable$1(Graphs.Vector))(Bridge.fn.bind(this, function (x) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            j,
                            p,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Graphs.Vector))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 0;
                                                
                                            $step = 1;
                                            continue;
                                        }
                                        case 1: {
                                            if ( true ) {
                                                    $step = 2;
                                                    continue;
                                                } 
                                                $step = 4;
                                                continue;
                                        }
                                        case 2: {
                                            j = System.String.indexOf(x, "[", i);
                                                if (j < 0) {
                                                    j = System.String.indexOf(x, "(", i);
                                                    if (j < 0) {
                                                        $step = 4;
                                                        continue;
                                                    }
                                                }
                                                i = j;

                                                j = System.String.indexOf(x, "]", i);
                                                if (j < 0) {
                                                    j = System.String.indexOf(x, ")", i);
                                                    if (j < 0) {
                                                        $step = 4;
                                                        continue;
                                                    }
                                                }
                                                p = System.String.split(x.substr(i, ((j - i) | 0)), [44].map(function(i) {{ return String.fromCharCode(i); }}));
                                                $enumerator.current = new Graphs.Vector(System.Double.parse(System.String.trim(p[System.Array.index(0, p)], [91, 93, 40, 41])), System.Double.parse(System.String.trim(p[System.Array.index(1, p)], [91, 93, 40, 41])));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            i = j;

                                                $step = 1;
                                                continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                ParseAdjacencyMatrix: function (a) {
                    var $t;
                    var bits = System.String.split(System.String.replaceAll(a, "'", ""), System.Array.init([",", "\\\\n", "[", "]", " "], System.String), null, 1);
                    var n = Bridge.Int.clip32(Math.sqrt(bits.length));
                    var adj = System.Array.create(false, null, System.Boolean, n, n);

                    var i = 0;
                    $t = Bridge.getEnumerator(bits);
                    try {
                        while ($t.moveNext()) {
                            var b = $t.Current;
                            adj.set([((Bridge.Int.div(i, n)) | 0), i % n], Bridge.referenceEquals(b, "1"));
                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return adj;
                }
            }
        },
        fields: {
            _ctrlDown: false,
            _title: null
        },
        events: {
            MouseMoved: null,
            MouseButtonUp: null,
            MouseButtonDown: null,
            MouseButtonDoubleClicked: null
        },
        props: {
            Canvas: null,
            GraphCanvas: null,
            IsControlKeyDown: {
                get: function () {
                    return this._ctrlDown;
                }
            },
            SelectedObjects: {
                set: function (value) { }
            },
            Title: {
                get: function () {
                    return this._title;
                },
                set: function (value) {
                    this._title = value;
                    this.Invalidate();
                }
            }
        },
        alias: [
            "SetClipboardText", "GraphicsLayer$ICanvas$SetClipboardText",
            "GetClipboardText", "GraphicsLayer$ICanvas$GetClipboardText",
            "IsControlKeyDown", "GraphicsLayer$ICanvas$IsControlKeyDown",
            "SelectedObjects", "GraphicsLayer$ICanvas$SelectedObjects",
            "Invalidate", "GraphicsLayer$ICanvas$Invalidate",
            "Title", "GraphicsLayer$ICanvas$Title",
            "addMouseMoved", "GraphicsLayer$IProduceMouseEvents$addMouseMoved",
            "removeMouseMoved", "GraphicsLayer$IProduceMouseEvents$removeMouseMoved",
            "addMouseButtonUp", "GraphicsLayer$IProduceMouseEvents$addMouseButtonUp",
            "removeMouseButtonUp", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonUp",
            "addMouseButtonDown", "GraphicsLayer$IProduceMouseEvents$addMouseButtonDown",
            "removeMouseButtonDown", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonDown",
            "addMouseButtonDoubleClicked", "GraphicsLayer$IProduceMouseEvents$addMouseButtonDoubleClicked",
            "removeMouseButtonDoubleClicked", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonDoubleClicked"
        ],
        ctors: {
            ctor: function (canvas, graphCanvas) {
                this.$initialize();
                this.GraphCanvas = graphCanvas;
                this.Canvas = canvas;
                this.GraphCanvas.Canvas = this;

                this.Canvas.ondblclick = Bridge.fn.combine(this.Canvas.ondblclick, Bridge.fn.cacheBind(this, this.OnMouseDoubleClick));
                this.Canvas.onmousedown = Bridge.fn.combine(this.Canvas.onmousedown, Bridge.fn.cacheBind(this, this.OnMouseButtonDown));
                this.Canvas.onmouseup = Bridge.fn.combine(this.Canvas.onmouseup, Bridge.fn.cacheBind(this, this.OnMouseButtonUp));
                this.Canvas.onmousemove = Bridge.fn.combine(this.Canvas.onmousemove, Bridge.fn.cacheBind(this, this.OnMouseMove));

                this.Canvas.onload = Bridge.fn.cacheBind(this, this.OnLoad);

                this.GraphCanvas.addGraphModified(Bridge.fn.cacheBind(this, this.OnGraphModified));
                this.GraphCanvas.addNameModified(Bridge.fn.cacheBind(this, this.OnNameModified));
            }
        },
        methods: {
            OnNameModified: function (name) {
                this.Title = name;
            },
            SageManual: function () {
                Test.App.AskSage(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n'));
            },
            SageChromaticPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_polynomial()"));
            },
            SageGraph6: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graph6_string()"));
            },
            SageSparse6: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.sparse6_string()"));
            },
            SageChromaticNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_number()"));
            },
            SageChromaticQuasisymmetricFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_quasisymmetric_function()"));
            },
            SageChromaticSymmetricFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_symmetric_function()"));
            },
            SageColoring: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    i, 
                    $t, 
                    v, 
                    c, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.coloring()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(coloring, System.Array.init(["],"], System.String), null, 1)).select($asm.$.Test.TabCanvas.f3).toList(System.Collections.Generic.List$1(System.Int32));

                                    i = 0;
                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            c = Algorithms.GenericExtensions.FirstIndex(System.Collections.Generic.List$1(System.Int32), cc, function (l) {
                                                return l.contains(i);
                                            });
                                            v.Color = Test.TabCanvas.Colors.getItem(c % Test.TabCanvas.Colors.Count);
                                            i = (i + 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageConvexityProperties: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.convexity_properties()"));
            },
            SageHasHomomorphismTo: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_homomorphism_to()"));
            },
            SageIndependentSet: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.independent_set()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageIndependentSetOfRepresentatives: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.independent_set_of_representatives()"));
            },
            SageIsPerfect: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_perfect()"));
            },
            SageMatchingPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.matching_polynomial()"));
            },
            SageMinor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.minor()"));
            },
            SagePathwidth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.pathwidth()"));
            },
            SageRankDecomposition: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.rank_decomposition()"));
            },
            SageTopologicalMinor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.topological_minor()"));
            },
            SageTreewidth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.treewidth()"));
            },
            SageTuttePolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.tutte_polynomial()"));
            },
            SageVertexCover: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.vertex_cover()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageBipartiteColor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bipartite_color()"));
            },
            SageBipartiteSets: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bipartite_sets()"));
            },
            SageGraph6String: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graph6_string()"));
            },
            SageIsDirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_directed()"));
            },
            SageJoin: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.join()"));
            },
            SageSparse6String: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.sparse6_string()"));
            },
            SageToDirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_directed()"));
            },
            SageToUndirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_undirected()"));
            },
            SageWriteToEps: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.write_to_eps()"));
            },
            SageCliqueComplex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_complex()"));
            },
            SageCliqueMaximum: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.clique_maximum()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageCliqueNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_number()"));
            },
            SageCliquePolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_polynomial()"));
            },
            SageCliquesContainingVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_containing_vertex()"));
            },
            SageCliquesGetCliqueBipartite: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_get_clique_bipartite()"));
            },
            SageCliquesGetMaxCliqueGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_get_max_clique_graph()"));
            },
            SageCliquesMaximal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_maximal()"));
            },
            SageCliquesMaximum: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_maximum()"));
            },
            SageCliquesNumberOf: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_number_of()"));
            },
            SageCliquesVertexCliqueNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_vertex_clique_number()"));
            },
            SageBoundedOutdegreeOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bounded_outdegree_orientation()"));
            },
            SageBridges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bridges()"));
            },
            SageDegreeConstrainedSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_constrained_subgraph()"));
            },
            SageGomoryHuTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.gomory_hu_tree().plot()"));
            },
            SageMinimumOutdegreeOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.minimum_outdegree_orientation()"));
            },
            SageOrientations: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.orientations()"));
            },
            SageRandomSpanningTree: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    edges, 
                    ee, 
                    $t, 
                    v, 
                    $t1, 
                    e, 
                    $t2, 
                    e1, 
                    v1, 
                    v2, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.random_spanning_tree()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    edges = $taskResult1;
                                    ee = System.Linq.Enumerable.from(System.String.split(edges, System.Array.init(["),"], System.String), null, 1)).select($asm.$.Test.TabCanvas.f4).toList(System.Collections.Generic.List$1(System.Int32));

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(this.GraphCanvas.Graph.Edges);
                                    try {
                                        while ($t1.moveNext()) {
                                            e = $t1.Current;
                                            e.Color = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    $t2 = Bridge.getEnumerator(ee);
                                    try {
                                        while ($t2.moveNext()) {
                                            e1 = $t2.Current;
                                            v1 = { v : this.GraphCanvas.Graph.Vertices.getItem(e1.getItem(0)) };
                                            v2 = { v : this.GraphCanvas.Graph.Vertices.getItem(e1.getItem(1)) };
                                            System.Linq.Enumerable.from(this.GraphCanvas.Graph.Edges).first((function ($me, v1, v2) {
                                                return function (x) {
                                                    return Bridge.referenceEquals(x.V1, v1.v) && Bridge.referenceEquals(x.V2, v2.v) || Bridge.referenceEquals(x.V1, v2.v) && Bridge.referenceEquals(x.V2, v1.v);
                                                };
                                            })(this, v1, v2)).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageSpanningTrees: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spanning_trees()"));
            },
            SageStrongOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.strong_orientation()"));
            },
            SageApexVertices: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.apex_vertices()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageIsApex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_apex()"));
            },
            SageIsArcTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_arc_transitive()"));
            },
            SageIsAsteroidalTripleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_asteroidal_triple_free()"));
            },
            SageIsBiconnected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_biconnected()"));
            },
            SageIsBipartite: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_bipartite()"));
            },
            SageIsBlockGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_block_graph()"));
            },
            SageIsCartesianProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cartesian_product()"));
            },
            SageIsDistanceRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_distance_regular()"));
            },
            SageIsEdgeTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_edge_transitive()"));
            },
            SageIsEvenHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_even_hole_free()"));
            },
            SageIsForest: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_forest()"));
            },
            SageIsHalfTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_half_transitive()"));
            },
            SageIsLineGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_line_graph()"));
            },
            SageIsLongAntiholeFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_long_antihole_free()"));
            },
            SageIsLongHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_long_hole_free()"));
            },
            SageIsOddHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_odd_hole_free()"));
            },
            SageIsOverfull: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_overfull()"));
            },
            SageIsPartialCube: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_partial_cube()"));
            },
            SageIsPrime: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_prime()"));
            },
            SageIsSemiSymmetric: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_semi_symmetric()"));
            },
            SageIsSplit: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_split()"));
            },
            SageIsStronglyRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_strongly_regular()"));
            },
            SageIsTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_tree()"));
            },
            SageIsTriangleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_triangle_free()"));
            },
            SageIsWeaklyChordal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_weakly_chordal()"));
            },
            SageOddGirth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.odd_girth()"));
            },
            SageCores: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cores()"));
            },
            SageFractionalChromaticIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.fractional_chromatic_index()"));
            },
            SageHasPerfectMatching: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_perfect_matching()"));
            },
            SageIharaZetaFunctionInverse: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.ihara_zeta_function_inverse()"));
            },
            SageKirchhoffSymanzikPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.kirchhoff_symanzik_polynomial()"));
            },
            SageLovaszTheta: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lovasz_theta()"));
            },
            SageMagnitudeFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.magnitude_function()"));
            },
            SageMatching: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.matching()"));
            },
            SageMaximumAverageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.maximum_average_degree()"));
            },
            SageModularDecomposition: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.modular_decomposition()"));
            },
            SagePerfectMatchings: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.perfect_matchings()"));
            },
            SageSeidelAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.seidel_adjacency_matrix()"));
            },
            SageNetworkxGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.networkx_graph()"));
            },
            SageIgraphGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.igraph_graph()"));
            },
            SageToDictionary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_dictionary()"));
            },
            SageCopy: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.copy()"));
            },
            SageExportToFile: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.export_to_file()"));
            },
            SageAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.adjacency_matrix()"));
            },
            SageIncidenceMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.incidence_matrix()"));
            },
            SageDistanceMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_matrix()"));
            },
            SageWeightedAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.weighted_adjacency_matrix()"));
            },
            SageKirchhoffMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.kirchhoff_matrix()"));
            },
            SageHasLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_loops()"));
            },
            SageAllowsLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allows_loops()"));
            },
            SageAllowLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allow_loops()"));
            },
            SageLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loops()"));
            },
            SageLoopEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loop_edges()"));
            },
            SageNumberOfLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.number_of_loops()"));
            },
            SageLoopVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loop_vertices()"));
            },
            SageRemoveLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.remove_loops()"));
            },
            SageHasMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_multiple_edges()"));
            },
            SageAllowsMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allows_multiple_edges()"));
            },
            SageAllowMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allow_multiple_edges()"));
            },
            SageMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multiple_edges()"));
            },
            SageName: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.name()"));
            },
            SageIsImmutable: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_immutable()"));
            },
            SageWeighted: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.weighted()"));
            },
            SageAntisymmetric: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.antisymmetric()"));
            },
            SageDensity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.density()"));
            },
            SageOrder: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.order()"));
            },
            SageSize: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.size()"));
            },
            SageAddVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_vertex()"));
            },
            SageAddVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_vertices()"));
            },
            SageDeleteVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_vertex()"));
            },
            SageDeleteVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_vertices()"));
            },
            SageHasVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_vertex()"));
            },
            SageRandomVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_vertex()"));
            },
            SageRandomVertexIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_vertex_iterator()"));
            },
            SageRandomEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_edge()"));
            },
            SageRandomEdgeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_edge_iterator()"));
            },
            SageVertexBoundary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_boundary()"));
            },
            SageSetVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_vertices()"));
            },
            SageSetVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_vertex()"));
            },
            SageGetVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_vertex()"));
            },
            SageGetVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_vertices()"));
            },
            SageVertexIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_iterator()"));
            },
            SageNeighborIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.neighbor_iterator()"));
            },
            SageVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertices()"));
            },
            SageNeighbors: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.neighbors()"));
            },
            SageMergeVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.merge_vertices()"));
            },
            SageAddEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_edge()"));
            },
            SageAddEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_edges()"));
            },
            SageSubdivideEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subdivide_edge()"));
            },
            SageSubdivideEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subdivide_edges()"));
            },
            SageDeleteEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_edge()"));
            },
            SageDeleteEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_edges()"));
            },
            SageDeleteMultiedge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_multiedge()"));
            },
            SageSetEdgeLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_edge_label()"));
            },
            SageHasEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_edge()"));
            },
            SageEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edges()"));
            },
            SageEdgeBoundary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_boundary()"));
            },
            SageEdgeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_iterator()"));
            },
            SageEdgesIncident: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edges_incident()"));
            },
            SageEdgeLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_label()"));
            },
            SageEdgeLabels: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_labels()"));
            },
            SageRemoveMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.remove_multiple_edges()"));
            },
            SageClear: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clear()"));
            },
            SageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree()"));
            },
            SageAverageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.average_degree()"));
            },
            SageDegreeHistogram: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_histogram()"));
            },
            SageDegreeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_iterator()"));
            },
            SageDegreeSequence: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_sequence()"));
            },
            SageRandomSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_subgraph()"));
            },
            SageAddClique: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_clique()"));
            },
            SageAddCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_cycle()"));
            },
            SageAddPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_path()"));
            },
            SageComplement: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.complement()"));
            },
            SageLineGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.line_graph()"));
            },
            SageToSimple: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_simple()"));
            },
            SageDisjointUnion: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjoint_union()"));
            },
            SageUnion: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.union()"));
            },
            SageRelabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.relabel()"));
            },
            SageDegreeToCell: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_to_cell()"));
            },
            SageSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph()"));
            },
            SageIsSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_subgraph()"));
            },
            SageCartesianProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cartesian_product()"));
            },
            SageTensorProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.tensor_product()"));
            },
            SageLexicographicProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lexicographic_product()"));
            },
            SageStrongProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.strong_product()"));
            },
            SageDisjunctiveProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjunctive_product()"));
            },
            SageEulerianOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eulerian_orientation()"));
            },
            SageEulerianCircuit: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eulerian_circuit()"));
            },
            SageCycleBasis: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cycle_basis()"));
            },
            SageAllPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.all_paths()"));
            },
            SageTrianglesCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.triangles_count()"));
            },
            SageSpectrum: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spectrum()"));
            },
            SageEigenvectors: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eigenvectors()"));
            },
            SageEigenspaces: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eigenspaces()"));
            },
            SageClusterTriangles: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cluster_triangles()"));
            },
            SageClusteringAverage: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clustering_average()"));
            },
            SageClusteringCoeff: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clustering_coeff()"));
            },
            SageClusterTransitivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cluster_transitivity()"));
            },
            SageSzegedIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.szeged_index()"));
            },
            SageCoarsestEquitableRefinement: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.coarsest_equitable_refinement()"));
            },
            SageAutomorphismGroup: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.automorphism_group()"));
            },
            SageIsVertexTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_vertex_transitive()"));
            },
            SageIsIsomorphic: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_isomorphic()"));
            },
            SageCanonicalLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.canonical_label().plot()"));
            },
            SageIsCayley: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cayley()"));
            },
            SageIsEulerian: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_eulerian()"));
            },
            SageIsPlanar: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_planar()"));
            },
            SageIsCircularPlanar: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_circular_planar()"));
            },
            SageIsRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_regular()"));
            },
            SageIsChordal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_chordal()"));
            },
            SageIsCirculant: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_circulant()"));
            },
            SageIsInterval: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_interval()"));
            },
            SageIsGallaiTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_gallai_tree()"));
            },
            SageIsClique: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_clique()"));
            },
            SageIsCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cycle()"));
            },
            SageIsIndependentSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_independent_set()"));
            },
            SageIsTransitivelyReduced: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_transitively_reduced()"));
            },
            SageIsEquitable: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_equitable()"));
            },
            SageBreadthFirstSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.breadth_first_search()"));
            },
            SageDepthFirstSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.depth_first_search()"));
            },
            SageLexBFS: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lex_BFS()"));
            },
            SageCentralityBetweenness: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.centrality_betweenness()"));
            },
            SageCentralityCloseness: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.centrality_closeness()"));
            },
            SageDistance: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance()"));
            },
            SageDistanceAllPairs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_all_pairs()"));
            },
            SageDistancesDistribution: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distances_distribution()"));
            },
            SageEccentricity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eccentricity()"));
            },
            SageRadius: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.radius()"));
            },
            SageCenter: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.center()"));
            },
            SageDiameter: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.diameter()"));
            },
            SageDistanceGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_graph()"));
            },
            SageGirth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.girth()"));
            },
            SagePeriphery: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.periphery()"));
            },
            SageShortestPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path()"));
            },
            SageShortestPathLength: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_length()"));
            },
            SageShortestPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_paths()"));
            },
            SageShortestPathLengths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_lengths()"));
            },
            SageShortestPathAllPairs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_all_pairs()"));
            },
            SageWienerIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.wiener_index()"));
            },
            SageAverageDistance: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.average_distance()"));
            },
            SageIsConnected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_connected()"));
            },
            SageConnectedComponents: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components()"));
            },
            SageConnectedComponentsNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_number()"));
            },
            SageConnectedComponentsSubgraphs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_subgraphs()"));
            },
            SageConnectedComponentContainingVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_component_containing_vertex()"));
            },
            SageConnectedComponentsSizes: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_sizes()"));
            },
            SageBlocksAndCutVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.blocks_and_cut_vertices()"));
            },
            SageBlocksAndCutsTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.blocks_and_cuts_tree()"));
            },
            SageIsCutEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cut_edge()"));
            },
            SageIsCutVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cut_vertex()"));
            },
            SageEdgeCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_cut()"));
            },
            SageVertexCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_cut()"));
            },
            SageFlow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.flow()"));
            },
            SageEdgeDisjointPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_disjoint_paths()"));
            },
            SageVertexDisjointPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_disjoint_paths()"));
            },
            SageEdgeConnectivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_connectivity()"));
            },
            SageVertexConnectivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_connectivity()"));
            },
            SageTransitiveClosure: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.transitive_closure()"));
            },
            SageTransitiveReduction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.transitive_reduction()"));
            },
            SageMinSpanningTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.min_spanning_tree()"));
            },
            SageSpanningTreesCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spanning_trees_count()"));
            },
            SageDominatorTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.dominator_tree()"));
            },
            SageSetEmbedding: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_embedding()"));
            },
            SageGetEmbedding: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_embedding()"));
            },
            SageFaces: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.faces()"));
            },
            SageGetPos: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_pos()"));
            },
            SageSetPos: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_pos()"));
            },
            SageSetPlanarPositions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_planar_positions()"));
            },
            SageIsDrawnFreeOfEdgeCrossings: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_drawn_free_of_edge_crossings()"));
            },
            SageLatexOptions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.latex_options()"));
            },
            SageSetLatexOptions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_latex_options()"));
            },
            SageLayout: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.layout()"));
            },
            SageGraphplot: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphplot()"));
            },
            SagePlot: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.plot()"));
            },
            SageShow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.show()"));
            },
            SagePlot3d: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.plot3d()"));
            },
            SageShow3d: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.show3d()"));
            },
            SageGraphvizString: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphviz_string()"));
            },
            SageGraphvizToFileNamed: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphviz_to_file_named()"));
            },
            SageSteinerTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.steiner_tree()"));
            },
            SageEdgeDisjointSpanningTrees: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_disjoint_spanning_trees()"));
            },
            SageFeedbackVertexSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.feedback_vertex_set()"));
            },
            SageMultiwayCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multiway_cut()"));
            },
            SageMaxCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.max_cut()"));
            },
            SageLongestPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.longest_path()"));
            },
            SageTravelingSalesmanProblem: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.traveling_salesman_problem()"));
            },
            SageIsHamiltonian: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_hamiltonian()"));
            },
            SageHamiltonianCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.hamiltonian_cycle()"));
            },
            SageHamiltonianPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.hamiltonian_path()"));
            },
            SageMulticommodityFlow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multicommodity_flow()"));
            },
            SageDisjointRoutedPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjoint_routed_paths()"));
            },
            SageDominatingSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.dominating_set()"));
            },
            SageSubgraphSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search()"));
            },
            SageSubgraphSearchCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search_count()"));
            },
            SageSubgraphSearchIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search_iterator()"));
            },
            SageCharacteristicPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.characteristic_polynomial()"));
            },
            SageGenus: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.genus()"));
            },
            SageLayoutSpring: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_spring()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutRanked: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_ranked()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutExtendRandomly: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_extend_randomly()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutCircular: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_circular()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutTree: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_tree()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutGraphviz: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_graphviz()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutPlanar: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_planar()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLoadNamedGraph: function (name) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $jumpFromFinally, 
                    a, 
                    layout, 
                    positions, 
                    adj, 
                    g, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync$1(System.String.concat("G = graphs.", name, "()", '\n', "G.adjacency_matrix().str()"));
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    a = $taskResult1;
                                    $task2 = Test.App.AskSageAsync$1(System.String.concat("G = graphs.", name, "()", '\n', "G.layout()"));
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $taskResult2 = $task2.getAwaitedResult();
                                    layout = $taskResult2;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    adj = Test.TabCanvas.ParseAdjacencyMatrix(a);

                                    g = new Algorithms.Graph.ctor(adj);

                                    Test.App.NewTab(name, new Graphs.Graph.$ctor1(g, positions, false));
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            Scale: function (positions) {
                var l = System.Linq.Enumerable.from(positions).toList(Graphs.Vector);
                var minX = System.Linq.Enumerable.from(l).min($asm.$.Test.TabCanvas.f5);
                var minY = System.Linq.Enumerable.from(l).min($asm.$.Test.TabCanvas.f6);
                var maxX = System.Linq.Enumerable.from(l).max($asm.$.Test.TabCanvas.f5);
                var maxY = System.Linq.Enumerable.from(l).max($asm.$.Test.TabCanvas.f6);

                var w = maxX - minX;
                var h = maxY - minY;

                return System.Linq.Enumerable.from(positions).select(function (p) {
                        return new Graphs.Vector(0.1 + 0.8 * (p.X - minX) / w, 0.1 + 0.8 * (p.Y - minY) / h);
                    }).toList(Graphs.Vector);
            },
            LayoutGraph: function (positions) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    a, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        this.SnapPositionsToGrid(positions);
                                        a = new Test.LayoutAnimation(Bridge.fn.bind(this, $asm.$.Test.TabCanvas.f7), Bridge.fn.bind(this, $asm.$.Test.TabCanvas.f8), positions, this.GraphCanvas.Graph);

                                        this.GraphCanvas.SnapToGrid = false;
                                        $task1 = a.Animate();
                                        $step = 1;
                                        $task1.continueWith($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        this.GraphCanvas.SnapToGrid = true;
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            SnapPositionsToGrid: function (positions) {
                for (var i = 0; i < positions.Count; i = (i + 1) | 0) {
                    positions.getItem(i).X = Graphs.GraphCanvas._gridStep * Bridge.Math.round(positions.getItem(i).X / Graphs.GraphCanvas._gridStep, 0, 6);
                    positions.getItem(i).Y = Graphs.GraphCanvas._gridStep * Bridge.Math.round(positions.getItem(i).Y / Graphs.GraphCanvas._gridStep, 0, 6);
                }
            },
            OnGraphModified: function (g) {
                this.Invalidate();
            },
            OnLoad: function (e) {
                this.Invalidate();
            },
            OnMouseMove: function (e) {
                this._ctrlDown = e.ctrlKey;
                if (!Bridge.staticEquals(this.MouseMoved, null)) {
                    this.MouseMoved(e.layerX, e.layerY);
                }
            },
            OnMouseButtonDown: function (e) {
                this._ctrlDown = e.ctrlKey;
                // Canvas.SetCapture(true);  // chrome does not seem to support this, what?

                if (e.shiftKey) {
                    if (!Bridge.staticEquals(this.MouseButtonDoubleClicked, null)) {
                        this.MouseButtonDoubleClicked(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                    }
                } else {
                    if (!Bridge.staticEquals(this.MouseButtonDown, null)) {
                        this.MouseButtonDown(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                    }
                }
            },
            OnMouseButtonUp: function (e) {
                this._ctrlDown = e.ctrlKey;
                // Canvas.SetCapture(false);
                if (e.shiftKey) {
                    return;
                }


                if (!Bridge.staticEquals(this.MouseButtonUp, null)) {
                    this.MouseButtonUp(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                }

                if (e.ctrlKey && e.altKey) {
                    Test.App.AskSage(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')"));
                }
            },
            OnMouseDoubleClick: function (e) { },
            SetClipboardText: function (text) { },
            GetClipboardText: function () {
                return "";
            },
            Invalidate: function () {
                var graphics = new Test.Graphics(this.Canvas);
                this.GraphCanvas.Paint(graphics, this.Canvas.width, this.Canvas.height);
            }
        }
    });

    Bridge.ns("Test.TabCanvas", $asm.$);

    Bridge.apply($asm.$.Test.TabCanvas, {
        f1: function (_o24) {
            _o24.add(new GraphicsLayer.ARGB.ctor(255, 0, 0));
            _o24.add(new GraphicsLayer.ARGB.ctor(0, 0, 255));
            _o24.add(new GraphicsLayer.ARGB.ctor(0, 255, 0));
            _o24.add(new GraphicsLayer.ARGB.ctor(255, 255, 0));
            _o24.add(new GraphicsLayer.ARGB.ctor(95, 158, 160));
            _o24.add(new GraphicsLayer.ARGB.ctor(139, 69, 19));
            _o24.add(new GraphicsLayer.ARGB.ctor(30, 144, 255));
            _o24.add(new GraphicsLayer.ARGB.ctor(64, 224, 208));
            _o24.add(new GraphicsLayer.ARGB.ctor(218, 112, 214));
            return _o24;
        },
        f2: function (x) {
        return System.Int32.parse(x);
    },
        f3: function (s) {
        return System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);
    },
        f4: function (s) {
        return System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, "[", ""), "]", ""), "(", ""), ")", ""), " ", ""), '\n', ""), "\\n", ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);
    },
        f5: function (p) {
            return p.X;
        },
        f6: function (p) {
            return p.Y;
        },
        f7: function () {
        this.GraphCanvas.Invalidate();

    },
        f8: function () {
        this.GraphCanvas.Invalidate();
    }
    });
});

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICJUZXN0LmpzIiwKICAic291cmNlUm9vdCI6ICIiLAogICJzb3VyY2VzIjogWyJBbGdvcml0aG1zL0Fzc2lnbm1lbnRFbnVtZXJhdG9yLmNzIiwiQWxnb3JpdGhtcy9DaG9vc2FiaWxpdHlSZXN1bHQuY3MiLCJBbGdvcml0aG1zL0NvdW50aW5nLmNzIiwiQWxnb3JpdGhtcy9EYXRhU3RydWN0dXJlcy9CaWplY3Rpb24uY3MiLCJBbGdvcml0aG1zL0RhdGFTdHJ1Y3R1cmVzL1VuaW9uRmluZC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0JvYXJkLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvQ2hyb25pY2xlL0JyYW5jaEdlbmVyYXRvci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Cb2FyZEtub3dsZWRnZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9HcmFwaEtub3dsZWRnZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Lbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9UcmVlLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL01ldGFLbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvTWluZC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Qb3RLbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TbGltU3dhcEFuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU29ydGVkSW50TGlzdC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL0JvYXJkTGV4aWZpZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9IYXNoaW5nLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvUHJvb2ZzL1Byb29mQnVpbGRlci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1Byb29mcy9FeHRlbnNpb25zLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvUHJvb2ZzL1Byb29mQ2FzZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1N1cGVyU2xpbUJvYXJkLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvU3VwZXJTbGltQ29sb3JpbmdBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1N1cGVyU2xpbVN3YXBBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9UZW1wbGF0ZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9UZW1wbGF0ZUtub3dsZWRnZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL1Nsb3dCb2FyZC5jcyIsIkFsZ29yaXRobXMvR2VuZXJpY0V4dGVuc2lvbnMuY3MiLCJBbGdvcml0aG1zL0dyYXBoLmNzIiwiQWxnb3JpdGhtcy9HcmFwaHMuY3MiLCJBbGdvcml0aG1zL0hhc2hHcmFwaC5jcyIsIkFsZ29yaXRobXMvSGVyZWRpdGFyeUNsYXNzRW51bWVyYXRpb24uY3MiLCJBbGdvcml0aG1zL0h5cGVyZ3JhcGguY3MiLCJBbGdvcml0aG1zL0luZGVwZW5kZW5jZVJhdGlvL01pbm9yRmluZGVyLmNzIiwiQWxnb3JpdGhtcy9JbnQzMlVzYWdlLmNzIiwiQWxnb3JpdGhtcy9JbnQ2NFVzYWdlLmNzIiwiQWxnb3JpdGhtcy9MYXp5LmNzIiwiQWxnb3JpdGhtcy9PbmVGYWN0b3JpemF0aW9uc09mQ29tcGxldGVHcmFwaC5jcyIsIkFsZ29yaXRobXMvT25GYWN0b3JpemF0aW9uc09mQ29tcGxldGVHcmFwaC5jcyIsIkFsZ29yaXRobXMvT25saW5lQ2hvaWNlSGFzaEdyYXBoLmNzIiwiQWxnb3JpdGhtcy9PcmllbnRhdGlvbkhhc2hHcmFwaC5jcyIsIkFsZ29yaXRobXMvUG9seW5vbWlhbHMvRmFjdG9yZWRSYXRpb25hbC5jcyIsIkFsZ29yaXRobXMvUG9seW5vbWlhbHMvR3JhcGhQb2x5bm9taWFsLmNzIiwiQWxnb3JpdGhtcy9Qb2x5bm9taWFscy9Ob3JtYWxpemVyLmNzIiwiQWxnb3JpdGhtcy9Qb2x5bm9taWFscy9QcmltZU51bWJlcnMuY3MiLCJBbGdvcml0aG1zL1BvbHlub21pYWxzL1NpZ25Mb29rdXAuY3MiLCJBbGdvcml0aG1zL1N1YnNldEVudW1lcmF0b3IuY3MiLCJBbGdvcml0aG1zL1RyYW5zaXRpdmVQYXJ0aXRpb24uY3MiLCJBbGdvcml0aG1zL1VucGVybXV0ZWRBc3NpZ25tZW50RW51bWVyYXRvci5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9FcXVpdmFsZW5jZVJlbGF0aW9uLmNzIiwiQWxnb3JpdGhtcy9VdGlsaXR5L0ZhY3RvcmFkaWMuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvRmxvd3MuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvTGlucUV4dGVuc2lvbnMuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvTGlzdFV0aWxpdHkuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvUGFydGlhbE9yZGVycy5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9QZXJtdXRhdGlvbi5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9TYWZlQ29sbGVjdGlvbi5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9TZXF1ZW5jZUdlbmVyYWxpemVyLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9BY2Nlc3NpYmlsaXR5Q2hlY2tlci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvQm94aWZpY2F0aW9uLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9PcHRpbWl6ZWQvRmFzdEFjY2Vzc2liaWxpdHlDaGVja2VyLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9UYXJwaXRFbnVtZXJhdG9yLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9PcHRpbWl6ZWQvRmFzdFdvcmQuY3MiLCJBbGdvcml0aG1zL1dvcmRHYW1lL09wdGltaXplZC9GYXN0V29yZEdlbmVyYXRvci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvV29yZEVudW1lcmF0b3IuY3MiLCJCaXRMZXZlbEdlbmVyYXRpb24vQXNzaWdubWVudHNfdHlwZS5jcyIsIkJpdExldmVsR2VuZXJhdGlvbi9CaXRPcGVyYXRpb25zLmNzIiwiQml0TGV2ZWxHZW5lcmF0aW9uL0JpdFZlY3RvcnMuY3MiLCJCaXRMZXZlbEdlbmVyYXRpb24vR3JhcGhDaG9vc2FiaWxpdHkuY3MiLCJCaXRMZXZlbEdlbmVyYXRpb24vSGFzaGVkQXNzaWdubWVudC5jcyIsIkJpdExldmVsR2VuZXJhdGlvbi9NYXhpbWFsbmRlcGVuZGVudFNldFNlYXJjaGluZy5jcyIsIkdyYXBoaWNzTGF5ZXIvQVJHQi5jcyIsIkdyYXBoaWNzTGF5ZXIvQm94LmNzIiwiR3JhcGhpY3NMYXllci9Gb250LmNzIiwiR3JhcGhzQ29yZS9Bc2NpaTg1LmNzIiwiR3JhcGhzQ29yZS9Qb2x5Z29uQ29udGFpbmVyLmNzIiwiR3JhcGhzQ29yZS9TZXJpYWxpemF0aW9uQ2xhc3Nlcy5jcyIsIkdyYXBoc0NvcmUvVXRpbGl0eS5jcyIsIkdyYXBoc0NvcmUvVmVjdG9yLmNzIiwiR3JhcGhzQ29yZS9Db21wYWN0U2VyaWFsaXplci5jcyIsIkdyYXBoc0NvcmUvR3JhcGhJTy5jcyIsIkdyYXBoc0NvcmUvQmF0Y2guY3MiLCJHcmFwaHNDb3JlL1F1aWNrTFouY3MiLCJBcHAuY3MiLCJIZWxwZXJFeHRlbnNpb25zLmNzIiwiTGF5b3V0QW5pbWF0aW9uLmNzIiwiQWxnb3JpdGhtcy9EYXRhU3RydWN0dXJlcy9VbmlvbkZpbmRUcmFja2VkUm9vdHMuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9DaHJvbmljbGUvQ2hyb25pY2xlZEJyYW5jaC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Db2xvcmluZ0FuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL0NvbW1vbkNvbG9yQW5hbHl6ZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU3dhcEFuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL0tpZXJzdGVhZEFuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL0tub3dsZWRnZVRyZWUuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvUmVkdWN0aW9uQW5hbHl6ZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TbGltTWluZC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL0dhbWVUcmVlLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvR2FtZVRyZWVJbmZvLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvR3JlZWR5V2luRmlsdGVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvUHJvb2ZzL1Blcm11dGF0aW9uQXdhcmVQcm9vZkJ1aWxkZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9TbWFydEZpbHRlci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1N1cGVyU2xpbU1pbmQuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU3ViVGVtcGxhdGVBbmFseXplci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvT3B0aW1pemVkL0Zhc3RUYXJwaXRFbnVtZXJhdG9yLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9SZWZlcmVuY2VUYXJwaXRFbnVtZXJhdG9yLmNzIiwiQml0TGV2ZWxHZW5lcmF0aW9uL0JpdEdyYXBoX3R5cGUuY3MiLCJHcmFwaHNDb3JlL0VkZ2UuY3MiLCJHcmFwaHNDb3JlL0dyYXBoLmNzIiwiR3JhcGhzQ29yZS9HcmFwaENhbnZhcy5jcyIsIkdyYXBoc0NvcmUvVmVydGV4LmNzIiwiR3JhcGhpY3MuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvR29vZG5lc3NBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1Byb29mcy9BcmJpdHJhcnlEZWdyZWVQcm9vZkJ1aWxkZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9Qcm9vZnMvTWF4aW11bURlZ3JlZVRocmVlUHJvb2ZCdWlsZGVyLmNzIiwiVGFiQ2FudmFzLmNzIl0sCiAgIm5hbWVzIjogWyIiXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkFlb0NBLGFBQWlCQSxHQUFrQkEsU0FBYUEsT0FBZUE7Ozs7O2dCQUV2RkEsb0JBQWVBO2dCQUNmQSxVQUFLQTtnQkFDTEEsZ0JBQVdBO2dCQUNYQSxjQUFTQTtnQkFDVEEsYUFBUUE7Ozs7O2dCQU9SQSxPQUFPQSxJ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O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFLdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBS3ZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4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Z0JBQ1pBLElBQUlBLHNDQUFjQTtvQkFDZEEsZ0JBQVdBLFVBQVVBOzs7eUNBR05BO2dCQUVuQkEsaUJBQVlBOzs7Z0JBR1pBLElBQUlBO29CQUVBQSxJQUFJQSxvREFBNEJBO3dCQUM1QkEsOEJBQXlCQSxVQUFVQSxVQUFVQSxpQkFBZ0JBLGlDQUFtQkE7OztvQkFJcEZBLElBQUlBLDJDQUFtQkE7d0JBQ25CQSxxQkFBZ0JBLFVBQVVBLFVBQVVBLGlCQUFnQkEsaUNBQW1CQTs7Ozt1Q0FJOURBO2dCQUVqQkEsaUJBQVlBOztnQkFFWkEsSUFBSUE7b0JBQ0FBOzs7O2dCQUdKQSxJQUFJQSx5Q0FBaUJBO29CQUNqQkEsbUJBQWNBLFVBQVVBLFVBQVVBLGlCQUFnQkEsaUNBQW1CQTs7O2dCQUV6RUEsSUFBSUEsYUFBYUE7b0JBRWJBLGlCQUFZQSxvQ0FBZ0JBOzs7MENBSVpBO3dDQUlLQTs7Z0JBTXpCQTs7O2dCQWlCQUEsZUFBZUEsSUFBSUEsY0FBU0E7Z0JBQzVCQSx1QkFBa0JBLFVBQVVBLG1CQUFjQTs7Ozs7Ozs7c0JBaDVDcUJBO1lBQVFBLFNBQVNBLElBQUlBO1lBQWlCQSxTQUFTQSxJQUFJQTtZQUFpQkEsU0FBU0EsSUFBSUE7WUFBaUJBLFNBQVNBLElBQUlBO1lBQW1CQSxTQUFTQSxJQUFJQTtZQUFvQkEsU0FBU0EsSUFBSUE7WUFBbUJBLFNBQVNBLElBQUlBO1lBQW9CQSxTQUFTQSxJQUFJQTtZQUFvQkEsU0FBU0EsSUFBSUE7WUFBcUJBLE9BQU9BOzs7ZUF3RDRFQSxtQkFBVUE7OztlQUFoTkEsNEJBQTBDQSxrTEFBNkRBLDJGQUF1REEsQUFBbUNBOzs7ZUFzTXBNQSw0QkFBMENBLGlSQUE4RkEsdUdBQXlFQSxBQUFtQ0E7OzttQkFraUMzV0E7OzttQkFDQUE7OztRQWNySEE7Ozs7UUFFS0EiLAogICJzb3VyY2VzQ29udGVudCI6IFsidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEFzc2lnbm1lbnRFbnVtZXJhdG9yOiBJRW51bWVyYWJsZTxMaXN0PEludDY0Pj5cclxuICAgIHtcclxuICAgICAgICBpbnQgX3ZlcnRleENvdW50O1xyXG4gICAgICAgIEZ1bmM8aW50LCBpbnQ+IF9mO1xyXG4gICAgICAgIGludCBfcG90U2l6ZTtcclxuICAgICAgICBpbnQgX3N0YXJ0O1xyXG4gICAgICAgIGludCBfc3RlcDtcclxuXHJcbiAgICAgICAgcHVibGljIEFzc2lnbm1lbnRFbnVtZXJhdG9yKGludCB2ZXJ0ZXhDb3VudCwgRnVuYzxpbnQsIGludD4gZiwgaW50IHBvdFNpemUsIGludCBzdGFydCA9IDAsIGludCBzdGVwID0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF92ZXJ0ZXhDb3VudCA9IHZlcnRleENvdW50O1xyXG4gICAgICAgICAgICBfZiA9IGY7XHJcbiAgICAgICAgICAgIF9wb3RTaXplID0gcG90U2l6ZTtcclxuICAgICAgICAgICAgX3N0YXJ0ID0gc3RhcnQ7XHJcbiAgICAgICAgICAgIF9zdGVwID0gc3RlcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gSUVudW1lcmFibGU8bG9uZ1tdPiBNZW1iZXJzXHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxMaXN0PEludDY0Pj4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEVudW1lcmF0b3IoX3ZlcnRleENvdW50LCBfZiwgX3BvdFNpemUsIF9zdGFydCwgX3N0ZXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIElFbnVtZXJhYmxlIE1lbWJlcnNcclxuXHJcbiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG5cclxuICAgICAgICBjbGFzcyBFbnVtZXJhdG9yIDogSUVudW1lcmF0b3I8TGlzdDxJbnQ2ND4+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PElFbnVtZXJhdG9yPEludDY0Pj4gX2VudW1lcmF0b3JzO1xyXG4gICAgICAgICAgICBMaXN0PEludDY0PiBfY3VycmVudDtcclxuICAgICAgICAgICAgaW50IF9zdGVwO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIEVudW1lcmF0b3IoaW50IHZlcnRleENvdW50LCBGdW5jPGludCwgaW50PiBmLCBpbnQgcG90U2l6ZSwgaW50IHN0YXJ0ID0gMCwgaW50IHN0ZXAgPSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfZW51bWVyYXRvcnMgPSBuZXcgTGlzdDxJRW51bWVyYXRvcjxJbnQ2ND4+KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IEVudW1lcmFibGUuUmFuZ2UoMCwgZigwKSkuVG9JbnQ2NCgpO1xyXG4gICAgICAgICAgICAgICAgX2VudW1lcmF0b3JzLkFkZChCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8SW50NjQ+KCksKF9vMSk9PntfbzEuQWRkKGZpcnN0KTtyZXR1cm4gX28xO30pLkdldEVudW1lcmF0b3IoKSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IHZlcnRleENvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgX2VudW1lcmF0b3JzLkFkZChuZXcgU3Vic2V0RW51bWVyYXRvci5FbnVtZXJhdG9yKHBvdFNpemUsIGYoaSkpKTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgX3N0ZXAgPSBzdGVwO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RhcnQ7IGkrKykgaWYgKCFNb3ZlTmV4dEludGVybmFsKCkpIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjcmVnaW9uIElFbnVtZXJhdG9yPGxvbmdbXT4gTWVtYmVyc1xyXG5cclxuICAgICAgICAgICAgcHVibGljIExpc3Q8SW50NjQ+IEN1cnJlbnRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9jdXJyZW50OyB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gSURpc3Bvc2FibGUgTWVtYmVyc1xyXG5cclxuICAgICAgICAgICAgcHVibGljIHZvaWQgRGlzcG9zZSgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBJRW51bWVyYXRvciBNZW1iZXJzXHJcblxyXG4gICAgICAgICAgICBvYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yLkN1cnJlbnRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEN1cnJlbnQ7IH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGJvb2wgTW92ZU5leHQoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IF9zdGVwOyBqKyspIGlmICghTW92ZU5leHRJbnRlcm5hbCgpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJvb2wgTW92ZU5leHRJbnRlcm5hbCgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfY3VycmVudCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jdXJyZW50ID0gbmV3IExpc3Q8SW50NjQ+KF9lbnVtZXJhdG9ycy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGVudW1lcmF0b3IgaW4gX2VudW1lcmF0b3JzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYXRvci5Nb3ZlTmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY3VycmVudC5BZGQoZW51bWVyYXRvci5DdXJyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGludCBpID0gX2VudW1lcmF0b3JzLkNvdW50IC0gMTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChpID49IDEpXHJcbiAgICAgICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZW51bWVyYXRvcnNbaV0uTW92ZU5leHQoKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jdXJyZW50W2ldID0gX2VudW1lcmF0b3JzW2ldLkN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2VudW1lcmF0b3JzW2ldLlJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2VudW1lcmF0b3JzW2ldLk1vdmVOZXh0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9jdXJyZW50W2ldID0gX2VudW1lcmF0b3JzW2ldLkN1cnJlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaSA+PSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2b2lkIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvci5SZXNldCgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDaG9vc2FiaWxpdHlSZXN1bHRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IEJhZEFzc2lnbm1lbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDtcclxuICAgICAgICAgICAgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDYW5jZWxlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0O1xyXG4gICAgICAgICAgICBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ2hvb3NhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gQmFkQXNzaWdubWVudCA9PSBudWxsOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQ2hvb3NhYmlsaXR5UmVzdWx0KExpc3Q8TGlzdDxpbnQ+PiBiYWRBc3NpZ25tZW50LCBib29sIGNhbmNlbGVkID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCYWRBc3NpZ25tZW50ID0gYmFkQXNzaWdubWVudDtcclxuICAgICAgICAgICAgQ2FuY2VsZWQgPSBjYW5jZWxlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE9yaWVudGF0aW9uUmVzdWx0XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEdyYXBoIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IEV2ZW4geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgT2RkIHsgZ2V0OyBzZXQ7IH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIENvdW50aW5nXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIEJpbm9taWFsQ29lZmZpY2llbnQobG9uZyBuLCBsb25nIGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoayA8IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb25nIG1heCA9IE1hdGguTWF4KGssIG4gLSBrKTtcclxuICAgICAgICAgICAgbG9uZyBtaW4gPSBNYXRoLk1pbihrLCBuIC0gayk7XHJcblxyXG4gICAgICAgICAgICBsb25nIHJlc3VsdCA9IDE7XHJcbiAgICAgICAgICAgIHdoaWxlIChuID4gbWF4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKj0gbjtcclxuICAgICAgICAgICAgICAgIG4tLTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2hpbGUgKG1pbiA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCAvPSBtaW47XHJcblxyXG4gICAgICAgICAgICAgICAgbWluLS07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgRmFjdG9yaWFsKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyB0b3RhbCA9IDE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IG47IGkrKylcclxuICAgICAgICAgICAgICAgIHRvdGFsICo9IGk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCaWplY3Rpb248RCwgQz5cclxuICAgIHtcclxuICAgICAgICBEaWN0aW9uYXJ5PEQsIEM+IF9mID0gbmV3IERpY3Rpb25hcnk8RCwgQz4oKTtcclxuICAgICAgICBEaWN0aW9uYXJ5PEMsIEQ+IF9maW52ZXJzZSA9IG5ldyBEaWN0aW9uYXJ5PEMsIEQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBDIHRoaXNbRCBkXVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9mW2RdOyB9XHJcbiAgICAgICAgICAgIHNldCBcclxuICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgIF9mW2RdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBfZmludmVyc2VbdmFsdWVdID0gZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEQgdGhpc1tDIGNdXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2ZpbnZlcnNlW2NdOyB9XHJcbiAgICAgICAgICAgIHNldCBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2ZbdmFsdWVdID0gYztcclxuICAgICAgICAgICAgICAgIF9maW52ZXJzZVtjXSA9IHZhbHVlOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEM+IEFwcGx5KElFbnVtZXJhYmxlPEQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8RCxDPihlLChnbG9iYWw6OlN5c3RlbS5GdW5jPEQsIEM+KShkID0+IHRoaXNbZF0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxEPiBBcHBseShJRW51bWVyYWJsZTxDPiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PEMsRD4oZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxDLCBEPikoYyA9PiB0aGlzW2NdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQmlqZWN0aW9uRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQmlqZWN0aW9uPGludCwgVD4gTnVtYmVyT2JqZWN0czxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IG9iamVjdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbnVtYmVyaW5nID0gbmV3IEJpamVjdGlvbjxpbnQsIFQ+KCk7XHJcblxyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvIGluIG9iamVjdHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG51bWJlcmluZ1tpXSA9IG87XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudW1iZXJpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBVbmlvbkZpbmQ8VD5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTm9kZSBNYWtlU2V0KFQgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gbmV3IE5vZGUoKTtcclxuICAgICAgICAgICAgbm9kZS5QYXJlbnQgPSBub2RlO1xyXG4gICAgICAgICAgICBub2RlLlJhbmsgPSAwO1xyXG4gICAgICAgICAgICBub2RlLlQgPSB0O1xyXG5cclxuICAgICAgICAgICAgUm9vdEFkZGVkKG5vZGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVuaW9uKE5vZGUgbngsIE5vZGUgbnkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeFJvb3QgPSBGaW5kKG54KTtcclxuICAgICAgICAgICAgdmFyIHlSb290ID0gRmluZChueSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoeFJvb3QgPT0geVJvb3QpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAoeFJvb3QuUmFuayA8IHlSb290LlJhbmspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHhSb290LlBhcmVudCA9IHlSb290O1xyXG4gICAgICAgICAgICAgICAgUm9vdFJlbW92ZWQoeFJvb3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHhSb290LlJhbmsgPiB5Um9vdC5SYW5rKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB5Um9vdC5QYXJlbnQgPSB4Um9vdDtcclxuICAgICAgICAgICAgICAgIFJvb3RSZW1vdmVkKHlSb290KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHlSb290LlBhcmVudCA9IHhSb290O1xyXG4gICAgICAgICAgICAgICAgeFJvb3QuUmFuaysrO1xyXG4gICAgICAgICAgICAgICAgUm9vdFJlbW92ZWQoeVJvb3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTm9kZSBGaW5kKE5vZGUgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChuLlBhcmVudCAhPSBuKVxyXG4gICAgICAgICAgICAgICAgbi5QYXJlbnQgPSBGaW5kKG4uUGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuLlBhcmVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBOb2RlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgTm9kZSBQYXJlbnQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IFJhbmsgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICAgICBwdWJsaWMgVCBUIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgUm9vdEFkZGVkKE5vZGUgbikgeyB9XHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBSb290UmVtb3ZlZChOb2RlIG4pIHsgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmU7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEJvYXJkIDogSUVudW1lcmFibGU8bG9uZz5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU3RvcmVQZXJtdXRhdGlvbkluZm87XHJcblxyXG4jaWYgREVCVUdcclxuICAgICAgICBwdWJsaWMgTGlzdDxzdHJpbmc+IFN0YWNrU3RyaW5ncyB7IGdldCB7IHJldHVybiBTdGFja3MuU2VsZWN0KHMgPT4gcy5Ub1NldFN0cmluZygpKS5Ub0xpc3QoKTsgfSB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBQb3RTdHJpbmcgeyBnZXQgeyByZXR1cm4gUG90LlRvU2V0U3RyaW5nKCk7IH0gfVxyXG4jZW5kaWZcclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8bG9uZz4gU3RhY2tzO1xyXG4gICAgICAgIGludCBfaGFzaENvZGU7XHJcbiAgICAgICAgTGlzdDxpbnQ+IFBvdFNldDtcclxuICAgICAgICBMaXN0PEludDY0PiBUcmFjZXM7XHJcbiAgICAgICAgTGlzdDxUdXBsZTxpbnQsIEludDY0Pj4gVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvO1xyXG4gICAgICAgIExpc3Q8aW50PiBUcmFjZUNoYW5nZUluZGljZXM7XHJcbiAgICAgICAgcHVibGljIExhenk8VGVtcGxhdGU+IFRlbXBsYXRlO1xyXG5cclxuICAgICAgICBwdWJsaWMgbG9uZyBQb3Q7XHJcbiAgICAgICAgcHVibGljIGludCBDb2xvckNvdW50O1xyXG5cclxuICAgICAgICBwdWJsaWMgVHVybiBUdXJuO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgTjtcclxuICAgICAgICBwdWJsaWMgTW92ZSBMYXN0TW92ZTtcclxuICAgICAgICBwdWJsaWMgbG9uZyB0aGlzW2ludCB4XSB7IGdldCB7IHJldHVybiBTdGFja3NbeF07IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm9hcmQoTGlzdDxsb25nPiBzdGFja3MsIGxvbmcgcG90LCBib29sIGNvbXB1dGVIYXNoID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN0YWNrcyA9IHN0YWNrcztcclxuICAgICAgICAgICAgUG90ID0gcG90O1xyXG4gICAgICAgICAgICBUdXJuID0gVHVybi5GaXhlcjtcclxuICAgICAgICAgICAgTiA9IFN0YWNrcy5Db3VudDtcclxuICAgICAgICAgICAgVGVtcGxhdGUgPSBuZXcgTGF6eTxUZW1wbGF0ZT4oKCkgPT4gbmV3IFRlbXBsYXRlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsaW50PihTdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50PikocyA9PiBzLlBvcHVsYXRpb25Db3VudCgpKSkuVG9MaXN0KCkpKTtcclxuICAgICAgICAgICAgUG90U2V0ID0gUG90LlRvU2V0KCk7XHJcbiAgICAgICAgICAgIENvbG9yQ291bnQgPSBQb3RTZXQuQ291bnQ7XHJcbiAgICAgICAgICAgIFRyYWNlcyA9IG5ldyBMaXN0PEludDY0PihDb2xvckNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChTdG9yZVBlcm11dGF0aW9uSW5mbylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvID0gbmV3IExpc3Q8VHVwbGU8aW50LCBJbnQ2ND4+KENvbG9yQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgVHJhY2VDaGFuZ2VJbmRpY2VzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY29tcHV0ZUhhc2gpXHJcbiAgICAgICAgICAgICAgICBDb21wdXRlSGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQ29tcHV0ZUhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IChpbnQpKE4pO1xyXG4gICAgICAgICAgICBVcGRhdGVIYXNoKHJlZiBfaGFzaENvZGUsIChsb25nKShUdXJuKSk7XHJcblxyXG4gICAgICAgICAgICBUcmFjZXMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGMgaW4gUG90U2V0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IEdldFRyYWNlKGMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIFRyYWNlcy5BZGQodCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFRyYWNlcy5Tb3J0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBUcmFjZXMpXHJcbiAgICAgICAgICAgICAgICBVcGRhdGVIYXNoKHJlZiBfaGFzaENvZGUsIHQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFN0b3JlUGVybXV0YXRpb25JbmZvKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUcmFjZXNGb3JQZXJtdXRhdGlvbkluZm8uQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgIFRyYWNlQ2hhbmdlSW5kaWNlcy5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjIGluIFBvdFNldClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IEdldFRyYWNlKGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvLkFkZChuZXcgVHVwbGU8aW50LCBJbnQ2ND4oYywgdCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mby5Tb3J0KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgbG9uZz4sIGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgbG9uZz4sIGludD4pKCh4LCB5KSA9PiB4Lkl0ZW0yLkNvbXBhcmVUbyh5Lkl0ZW0yKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIEludDY0IHByZXZpb3VzVHJhY2UgPSAtMTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBUcmFjZXNGb3JQZXJtdXRhdGlvbkluZm9baV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0Lkl0ZW0yICE9IHByZXZpb3VzVHJhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBUcmFjZUNoYW5nZUluZGljZXMuQWRkKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1RyYWNlID0gdC5JdGVtMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgVHJhY2VDaGFuZ2VJbmRpY2VzLkFkZChUcmFjZXNGb3JQZXJtdXRhdGlvbkluZm8uQ291bnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBVcGRhdGVIYXNoKHJlZiBpbnQgaGFzaCwgbG9uZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGhhc2ggPSAoaW50KSgzNyAqIGhhc2ggKyB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJbnQ2NCBHZXRUcmFjZShpbnQgYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBrID0gMUwgPDwgYztcclxuICAgICAgICAgICAgSW50NjQgdHJhY2UgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKChTdGFja3NbaV0gJiBrKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHRyYWNlIHw9ICgxTCA8PCBpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRyYWNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTWFrZU1vdmUoTW92ZSBtb3ZlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGFzdE1vdmUgPSBtb3ZlO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1vdmUuU3RhY2sgPj0gMClcclxuICAgICAgICAgICAgICAgIFN0YWNrc1ttb3ZlLlN0YWNrXSA9IFN0YWNrc1ttb3ZlLlN0YWNrXS5GbGlwQml0cyhtb3ZlLkFkZGVkLCBtb3ZlLlJlbW92ZWQpO1xyXG5cclxuICAgICAgICAgICAgVHVybiA9IE90aGVyVHVybihUdXJuKTtcclxuXHJcbiAgICAgICAgICAgIENvbXB1dGVIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9Nb3ZlQ29tYmluYXRpb24oSUVudW1lcmFibGU8TW92ZT4gbW92ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbW92ZSBpbiBtb3ZlcylcclxuICAgICAgICAgICAgICAgIFN0YWNrc1ttb3ZlLlN0YWNrXSA9IFN0YWNrc1ttb3ZlLlN0YWNrXS5GbGlwQml0cyhtb3ZlLkFkZGVkLCBtb3ZlLlJlbW92ZWQpO1xyXG5cclxuICAgICAgICAgICAgQ29tcHV0ZUhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm9hcmQgQ2xvbmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNsb25lID0gbmV3IEJvYXJkKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGxvbmc+KFN0YWNrcyksIFBvdCk7XHJcbiAgICAgICAgICAgIGNsb25lLlR1cm4gPSBUdXJuO1xyXG4gICAgICAgICAgICBjbG9uZS5MYXN0TW92ZSA9IExhc3RNb3ZlO1xyXG4gICAgICAgICAgICBjbG9uZS5faGFzaENvZGUgPSBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgICAgICBjbG9uZS5Db21wdXRlSGFzaENvZGUoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjbG9uZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBCb2FyZCBEb01vdmVDb21iaW5hdGlvbk9uQ2xvbmUoSUVudW1lcmFibGU8TW92ZT4gc3dhcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjbG9uZSA9IG5ldyBCb2FyZChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxsb25nPihTdGFja3MpLCBQb3QsIGZhbHNlKTtcclxuICAgICAgICAgICAgY2xvbmUuVHVybiA9IFR1cm47XHJcbiAgICAgICAgICAgIGNsb25lLkxhc3RNb3ZlID0gTGFzdE1vdmU7XHJcblxyXG4gICAgICAgICAgICBjbG9uZS5Eb01vdmVDb21iaW5hdGlvbihzd2FwKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjbG9uZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyhvYmogYXMgQm9hcmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKEJvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChUdXJuICE9IG90aGVyLlR1cm4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChOICE9IG90aGVyLk4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGxvbmc+KFRyYWNlcyxvdGhlci5UcmFjZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBGaW5kUGVybXV0YXRpb24oQm9hcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIVN0b3JlUGVybXV0YXRpb25JbmZvKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIm5vdCBzdG9yaW5nIHBlcm11dGF0aW9uIGluZm9cIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgbG9uZz4sbG9uZz4oVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgbG9uZz4sIGxvbmc+KSh0ID0+IHQuSXRlbTIpKS5TZXF1ZW5jZUVxdWFsKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgbG9uZz4sbG9uZz4ob3RoZXIuVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgbG9uZz4sIGxvbmc+KSh0ID0+IHQuSXRlbTIpKSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHZhciBtYXBwaW5nUGFpcnMgPSBuZXcgTGlzdDxUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgVHJhY2VDaGFuZ2VJbmRpY2VzLkNvdW50IC0gMTsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9tYWluID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvZG9tYWluID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBUcmFjZUNoYW5nZUluZGljZXNbaV07IGogPCBUcmFjZUNoYW5nZUluZGljZXNbaSArIDFdOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluLkFkZChUcmFjZXNGb3JQZXJtdXRhdGlvbkluZm9bal0uSXRlbTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvZG9tYWluLkFkZChvdGhlci5UcmFjZXNGb3JQZXJtdXRhdGlvbkluZm9bal0uSXRlbTEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG1hcHBpbmdQYWlycy5BZGQobmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+Pihkb21haW4sIGNvZG9tYWluKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+LGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sZ2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4+KG1hcHBpbmdQYWlycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OlN5c3RlbS5MaW5xLkVudW1lcmFibGVJbnN0YW5jZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+Pj4pKG1wID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KFBlcm11dGF0aW9uLkVudW1lcmF0ZUFsbChtcC5JdGVtMi5Db3VudCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KShwID0+IG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4obXAuSXRlbTEsIHAuQXBwbHk8aW50PihtcC5JdGVtMikpKSkpKVxyXG4pXHJcbiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+LCBnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikobWFwcGluZyA9PiBGbGF0dGVuTWFwcGluZyhtYXBwaW5nKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuRmlyc3RPckRlZmF1bHQoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgYm9vbD4pKG1hcHBpbmcgPT4gU2VxdWVuY2VFcXVhbFBlcm11dGVkKG1hcHBpbmcsIG90aGVyKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IEZsYXR0ZW5NYXBwaW5nKElFbnVtZXJhYmxlPFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+Pj4gbWFwcGluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LGludD4obWFwcGluZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KSh4ID0+IHguSXRlbTEpKS5Ub0xpc3QoKSwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4saW50PihtYXBwaW5nLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKHggPT4geC5JdGVtMikpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgU2VxdWVuY2VFcXVhbFBlcm11dGVkKFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBtYXBwaW5nLCBCb2FyZCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgU3RhY2tzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwZXJtdXRlZFN0YWNrID0gQXBwbHlNYXBwaW5nKG1hcHBpbmcsIFN0YWNrc1tpXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGVybXV0ZWRTdGFjayAhPSBvdGhlci5TdGFja3NbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoVHVybiA9PSBGaXhlckJyZWFrZXIuVHVybi5GaXhlcilcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKExhc3RNb3ZlLlN0YWNrICE9IG90aGVyLkxhc3RNb3ZlLlN0YWNrKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG91cnMgPSBuZXdbXSB7IExhc3RNb3ZlLkFkZGVkLCBMYXN0TW92ZS5SZW1vdmVkIH07XHJcbiAgICAgICAgICAgIHZhciB0aGVpcnMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzIpPT57X28yLkFkZChvdGhlci5MYXN0TW92ZS5BZGRlZCk7X28yLkFkZChvdGhlci5MYXN0TW92ZS5SZW1vdmVkKTtyZXR1cm4gX28yO30pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5FcXVhbDxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQXBwbHlNYXBwaW5nKG1hcHBpbmcsIG91cnMpKSx0aGVpcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGxvbmcgQXBwbHlNYXBwaW5nKFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBtYXBwaW5nLCBsb25nIHN0YWNrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFwcGx5TWFwcGluZyhtYXBwaW5nLCBzdGFjay5Ub1NldCgpKS5Ub0ludDY0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gQXBwbHlNYXBwaW5nKFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBtYXBwaW5nLCBJRW51bWVyYWJsZTxpbnQ+IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihzZXQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShjID0+IG1hcHBpbmcuSXRlbTJbbWFwcGluZy5JdGVtMS5JbmRleE9mKGMpXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gQXBwbHlJbnZlcnNlTWFwcGluZyhUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgSUVudW1lcmFibGU8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oc2V0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYyA9PiBtYXBwaW5nLkl0ZW0xW21hcHBpbmcuSXRlbTIuSW5kZXhPZihjKV0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVHVybiBPdGhlclR1cm4oVHVybiB0dXJuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEgLSB0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhdG9yPGxvbmc+IEdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN0YWNrcy5HZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhYmxlLkdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwifFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4oU3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIHN0cmluZz4pKHggPT4geC5Ub1NldFN0cmluZ1NtYWxsKCkpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRvVGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4oU3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGludCwgc3RyaW5nPikoKHN0YWNrLCBpKSA9PiBcIiRMKHZfXCIgKyAoaSArIDEpICsgXCIpID0gXCIgKyBzdGFjay5Ub1NldFN0cmluZygpLlJlcGxhY2UoXCJ7XCIsIFwiXFxcXHtcIikuUmVwbGFjZShcIn1cIiwgXCJcXFxcfVwiKSArIFwiJFwiKSkuSm9pblByZXR0eShcIiwgXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGVcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCcmFuY2hHZW5lcmF0b3JcclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgRGljdGlvbmFyeTxpbnQsIExpc3Q8TGlzdDxMaXN0PGludD4+Pj4gUGFydGl0aW9uc0NhY2hlID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PExpc3Q8TGlzdDxpbnQ+Pj4+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PExpc3Q8aW50Pj4+IEdldFBhcnRpdGlvbnMoaW50IGNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxMaXN0PExpc3Q8aW50Pj4+IHBhcnRpdGlvbnM7XHJcbiAgICAgICAgICAgIGlmICghUGFydGl0aW9uc0NhY2hlLlRyeUdldFZhbHVlKGNvdW50LCBvdXQgcGFydGl0aW9ucykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhcnRpdGlvbnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihFbnVtZXJhdGVQYXJ0aXRpb25zKGNvdW50KSk7XHJcbiAgICAgICAgICAgICAgICBQYXJ0aXRpb25zQ2FjaGVbY291bnRdID0gcGFydGl0aW9ucztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBhcnRpdGlvbnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8Q2hyb25pY2xlZEJyYW5jaD4gRW51bWVyYXRlQnJhbmNoZXMoQm9hcmQgYm9hcmQsIFR1cGxlPGludCwgaW50PiBjb2xvclBhaXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgUyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oRW51bWVyYXRlRXhhY3RseU9uZUludGVyc2VjdGVycyhib2FyZCwgY29sb3JQYWlyKSk7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0aXRpb25zID0gR2V0UGFydGl0aW9ucyhTLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlLkNocm9uaWNsZWRCcmFuY2g+KHBhcnRpdGlvbnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGUuQ2hyb25pY2xlZEJyYW5jaD4pKHBhcnRpdGlvbiA9PiBuZXcgQ2hyb25pY2xlZEJyYW5jaChTLCBjb2xvclBhaXIuSXRlbTEsIGNvbG9yUGFpci5JdGVtMiwgcGFydGl0aW9uKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8TGlzdDxpbnQ+Pj4gRW51bWVyYXRlUGFydGl0aW9ucyhpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChuICUgMiA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydGl0aW9uIGluIEVudW1lcmF0ZVBhcnRpdGlvbnMoRW51bWVyYWJsZS5SYW5nZSgwLCBuKS5Ub0xpc3QoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHBhcnRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0aXRpb24gaW4gRW51bWVyYXRlUGFydGl0aW9ucyhFbnVtZXJhYmxlLlJhbmdlKDAsIG4pLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGogPT4gaiAhPSBpKSkuVG9MaXN0KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydGl0aW9uLkluc2VydCgwLCBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzMpPT57X28zLkFkZChpKTtyZXR1cm4gX28zO30pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHBhcnRpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PExpc3Q8aW50Pj4+IEVudW1lcmF0ZVBhcnRpdGlvbnMoTGlzdDxpbnQ+IGluZGljZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaW5kaWNlcy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSBpbmRpY2VzWzBdO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNlcy5SZW1vdmVBdCgwKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5kaWNlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX280KT0+e19vNC5BZGQoZmlyc3QpO19vNC5BZGQoaW5kaWNlc1tpXSk7cmV0dXJuIF9vNDt9KTtcclxuICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLlJlbW92ZUF0KGkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydGl0aW9uIGluIEVudW1lcmF0ZVBhcnRpdGlvbnMoaW5kaWNlcykpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aXRpb24uQWRkKHBhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gcGFydGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kaWNlcy5JbnNlcnQoaSwgcGFydFsxXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaW5kaWNlcy5JbnNlcnQoMCwgZmlyc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gRW51bWVyYXRlRXhhY3RseU9uZUludGVyc2VjdGVycyhCb2FyZCBib2FyZCwgVHVwbGU8aW50LCBpbnQ+IGNvbG9yUGFpcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhYmxlLlJhbmdlKDAsIGJvYXJkLlN0YWNrcy5Db3VudCkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaSA9PiBib2FyZC5TdGFja3NbaV0uSXNCaXRTZXQoY29sb3JQYWlyLkl0ZW0xKSBeIGJvYXJkLlN0YWNrc1tpXS5Jc0JpdFNldChjb2xvclBhaXIuSXRlbTIpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEJvYXJkS25vd2xlZGdlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEJvYXJkIEJvYXJkIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUmVhc29uIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IERlcHRoIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgVHVwbGU8aW50LCBpbnQ+IENvbG9yUGFpciB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8VHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+PiBTd2FwcyB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBCb2FyZEtub3dsZWRnZShCb2FyZCBib2FyZCwgc3RyaW5nIHJlYXNvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJvYXJkID0gYm9hcmQ7XHJcbiAgICAgICAgICAgIFJlYXNvbiA9IHJlYXNvbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JhcGhLbm93bGVkZ2VcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgR3JhcGggR3JhcGggeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIExpbmVHcmFwaCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxUdXBsZTxpbnQsIGludD4+IEVkZ2VzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gRWRnZUluZGljZXMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBMZWF2ZXMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExhenk8RGljdGlvbmFyeTxUdXBsZTxpbnQsIGludD4sIExpc3Q8TGlzdDxpbnQ+Pj4+IENvbm5lY3RlZE9yZGVyaW5ncyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoS25vd2xlZGdlKEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcmFwaCA9IGc7XHJcbiAgICAgICAgICAgIExlYXZlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8aW50PihHcmFwaC5WZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IEdyYXBoLkRlZ3JlZSh2KSA9PSAxKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIEJ1aWxkTGluZUdyYXBoKCk7XHJcblxyXG4gICAgICAgICAgICBDb25uZWN0ZWRPcmRlcmluZ3MgPSBuZXcgTGF6eTxEaWN0aW9uYXJ5PFR1cGxlPGludCwgaW50PiwgTGlzdDxMaXN0PGludD4+Pj4oKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvID0gbmV3IERpY3Rpb25hcnk8VHVwbGU8aW50LCBpbnQ+LCBMaXN0PExpc3Q8aW50Pj4+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBFZGdlcylcclxuICAgICAgICAgICAgICAgICAgICBjb1tlXSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihHcmFwaC5FbnVtZXJhdGVDb25uZWN0ZWRPcmRlcmluZ3MoQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX281KT0+e19vNS5BZGQoZS5JdGVtMSk7X281LkFkZChlLkl0ZW0yKTtyZXR1cm4gX281O30pKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQnVpbGRMaW5lR3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gR3JhcGguQWRqYWNlbnQ7XHJcbiAgICAgICAgICAgIGludCBuID0gYWRqYWNlbnQuR2V0VXBwZXJCb3VuZCgwKSArIDE7XHJcblxyXG4gICAgICAgICAgICBFZGdlcyA9IG5ldyBMaXN0PFR1cGxlPGludCwgaW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBFZGdlcy5BZGQobmV3IFR1cGxlPGludCwgaW50PihpLCBqKSk7XHJcblxyXG4gICAgICAgICAgICBFZGdlSW5kaWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgRWRnZXMuQ291bnQpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1lZXRzID0gbmV3IGJvb2xbRWRnZXMuQ291bnQsIEVkZ2VzLkNvdW50XTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBFZGdlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgRWRnZXMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRWRnZXNbaV0uSXRlbTEgPT0gRWRnZXNbal0uSXRlbTEgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgRWRnZXNbaV0uSXRlbTEgPT0gRWRnZXNbal0uSXRlbTIgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgRWRnZXNbaV0uSXRlbTIgPT0gRWRnZXNbal0uSXRlbTEgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgRWRnZXNbaV0uSXRlbTIgPT0gRWRnZXNbal0uSXRlbTIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lZXRzW2ksIGpdID0gbWVldHNbaiwgaV0gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgTGluZUdyYXBoID0gbmV3IEdyYXBoKG1lZXRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgS25vd2xlZGdlXHJcbiAgICB7XHJcbiAgICAgICAgRGljdGlvbmFyeTxUZW1wbGF0ZSwgVGVtcGxhdGVLbm93bGVkZ2U+IF90ZW1wbGF0ZUxvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PFRlbXBsYXRlLCBUZW1wbGF0ZUtub3dsZWRnZT4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoS25vd2xlZGdlIEdyYXBoS25vd2xlZGdlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBUZW1wbGF0ZUtub3dsZWRnZSB0aGlzW1RlbXBsYXRlIHRlbXBsYXRlXVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRlbXBsYXRlS25vd2xlZGdlIHA7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV90ZW1wbGF0ZUxvb2t1cC5UcnlHZXRWYWx1ZSh0ZW1wbGF0ZSwgb3V0IHApKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHAgPSBuZXcgVGVtcGxhdGVLbm93bGVkZ2UodGVtcGxhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90ZW1wbGF0ZUxvb2t1cFt0ZW1wbGF0ZV0gPSBwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBLbm93bGVkZ2UoR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdyYXBoS25vd2xlZGdlID0gbmV3IEdyYXBoS25vd2xlZGdlKGcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGxvbmcgR2V0RWRnZUNvbG9yTGlzdChCb2FyZCBib2FyZCwgaW50IGVkZ2VJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBib2FyZFtHcmFwaEtub3dsZWRnZS5FZGdlc1tlZGdlSW5kZXhdLkl0ZW0xXSAmIGJvYXJkW0dyYXBoS25vd2xlZGdlLkVkZ2VzW2VkZ2VJbmRleF0uSXRlbTJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgbG9uZyBHZXRFZGdlQ29sb3JMaXN0KExpc3Q8bG9uZz4gc3RhY2tzLCBpbnQgZWRnZUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YWNrc1tHcmFwaEtub3dsZWRnZS5FZGdlc1tlZGdlSW5kZXhdLkl0ZW0xXSAmIHN0YWNrc1tHcmFwaEtub3dsZWRnZS5FZGdlc1tlZGdlSW5kZXhdLkl0ZW0yXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBUcmVlPFQ+ICB3aGVyZSBUIDogVHJlZTxUPlxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBUIFBhcmVudCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBUIFRoaXMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFQ+IENoaWxkcmVuIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUaGlzID0gKFQpdGhpcztcclxuICAgICAgICAgICAgQ2hpbGRyZW4gPSBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVtb3ZlQ2hpbGQoVCBjaGlsZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENoaWxkcmVuLlJlbW92ZShjaGlsZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdm9pZCBBZGRDaGlsZChUIGNoaWxkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2hpbGQuUGFyZW50ID0gVGhpcztcclxuICAgICAgICAgICAgQ2hpbGRyZW4uQWRkKGNoaWxkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgR2V0RGVwdGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRlcHRoID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNoaWxkIGluIENoaWxkcmVuKVxyXG4gICAgICAgICAgICAgICAgZGVwdGggPSBNYXRoLk1heChkZXB0aCwgY2hpbGQuR2V0RGVwdGgoKSArIDEpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRlcHRoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgVHJhdmVyc2UoQWN0aW9uPFQsIFQ+IG9uRGVzY2VudCwgaW50IG1heERlcHRoID0gaW50Lk1heFZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVHJhdmVyc2VJbnRlcm5hbCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPFQsIFQ+KW9uRGVzY2VudCwgbWF4RGVwdGgsIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBUcmF2ZXJzZUludGVybmFsKEFjdGlvbjxULCBUPiBvbkRlc2NlbnQsIGludCBtYXhEZXB0aCwgaW50IGRlcHRoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRlcHRoID49IG1heERlcHRoIC0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjaGlsZCBpbiBDaGlsZHJlbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgb25EZXNjZW50KFRoaXMsIGNoaWxkKTtcclxuICAgICAgICAgICAgICAgIGNoaWxkLlRyYXZlcnNlSW50ZXJuYWwoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxULCBUPilvbkRlc2NlbnQsIG1heERlcHRoLCBkZXB0aCArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHVwbGU8R3JhcGgsIERpY3Rpb25hcnk8aW50LCBUPj4gQnVpbGRHcmFwaChpbnQgbWF4RGVwdGggPSBpbnQuTWF4VmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdmVydGljZXMgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdmVydGV4TG9va3VwID0gbmV3IERpY3Rpb25hcnk8VCwgaW50PigpO1xyXG4gICAgICAgICAgICB2YXIgdHJlZUxvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PGludCwgVD4oKTtcclxuICAgICAgICAgICAgdmFyIGVkZ2VzID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+KCk7XHJcblxyXG4gICAgICAgICAgICBUcmF2ZXJzZSgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPFQsIFQ+KSgocGFyZW50LCBjaGlsZCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IHA7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXZlcnRleExvb2t1cC5UcnlHZXRWYWx1ZShwYXJlbnQsIG91dCBwKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwID0gdmVydGljZXMrKztcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhMb29rdXBbcGFyZW50XSA9IHA7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZUxvb2t1cFtwXSA9IHBhcmVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZXNbcF0gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaW50IGM7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXZlcnRleExvb2t1cC5UcnlHZXRWYWx1ZShjaGlsZCwgb3V0IGMpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGMgPSB2ZXJ0aWNlcysrO1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleExvb2t1cFtjaGlsZF0gPSBjO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVMb29rdXBbY10gPSBjaGlsZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZXNbY10gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZWRnZXNbcF0uQWRkKGMpO1xyXG4gICAgICAgICAgICB9KSwgbWF4RGVwdGgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZlcnRpY2VzID09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyZWVMb29rdXBbMF0gPSAoVCl0aGlzO1xyXG4gICAgICAgICAgICAgICAgZWRnZXNbMF0gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlZGdlV2VpZ2h0cyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2ZXJ0aWNlczsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCB2ZXJ0aWNlczsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlZGdlc1tpXS5Db250YWlucyhqKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVdlaWdodHMuQWRkKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVkZ2VzW2pdLkNvbnRhaW5zKGkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlV2VpZ2h0cy5BZGQoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVdlaWdodHMuQWRkKDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR1cGxlPEdyYXBoLCBEaWN0aW9uYXJ5PGludCwgVD4+KG5ldyBHcmFwaChlZGdlV2VpZ2h0cyksIHRyZWVMb29rdXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBNZXRhS25vd2xlZGdlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpbnQgSW5maW5pdHkgPSBpbnQuTWF4VmFsdWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBFeGlzdHModGhpcyBvYmplY3QgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBvICE9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gTmF0dXJhbHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmFibGUuUmFuZ2UoMCwgSW5maW5pdHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEludGVydmFsKGludCBmaXJzdCwgaW50IGxhc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYWJsZS5SYW5nZShmaXJzdCwgbGFzdCAtIGZpcnN0ICsgMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludD8gVHJ5UGFyc2VJbnQodGhpcyBzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB4O1xyXG4gICAgICAgICAgICBpZiAoaW50LlRyeVBhcnNlKHMsIG91dCB4KSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB4O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZG91YmxlPyBUcnlQYXJzZURvdWJsZSh0aGlzIHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZG91YmxlIHg7XHJcbiAgICAgICAgICAgIGlmIChkb3VibGUuVHJ5UGFyc2Uocywgb3V0IHgpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgRGVncmVlQ29uZGl0aW9uKHRoaXMgR3JhcGggZywgQm9hcmQgYiwgRnVuYzxMaXN0PGludD4sIGludD4gbWlzc2luZ0VkZ2VzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBEZWdyZWVDb25kaXRpb24oZywgYi5TdGFja3MsIGIuUG90KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBEZWdyZWVDb25kaXRpb24odGhpcyBHcmFwaCBnLCBMaXN0PGxvbmc+IHN0YWNrcywgbG9uZyBwb3QsIEZ1bmM8TGlzdDxpbnQ+LCBpbnQ+IG1pc3NpbmdFZGdlcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobWlzc2luZ0VkZ2VzID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICBtaXNzaW5nRWRnZXMgPSBZID0+IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JHcmFwaHMgPSBHZXRDb2xvckdyYXBocyhzdGFja3MsIHBvdCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgWCBpbiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KGcuVmVydGljZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGcuRWRnZXNPbihYKSAtIG1pc3NpbmdFZGdlcyhYKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihjb2xvckdyYXBocywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoY2cgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbkNvdW50PGludD4oY2csWCkgLyAyKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8aW50Pj4gR2V0Q29sb3JHcmFwaHMoTGlzdDxsb25nPiBzdGFja3MsIGxvbmcgcG90KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4ocG90LkVudW1lcmF0ZUJpdHMoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoYWxwaGEgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihHX2FscGhhKGFscGhhLCBzdGFja3MpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEdfYWxwaGEoaW50IGFscGhhLCBMaXN0PGxvbmc+IHN0YWNrcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxsb25nPihzdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgYm9vbD4pKHN0YWNrID0+IHN0YWNrLklzQml0U2V0KGFscGhhKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgZF9IKGludCBhbHBoYSwgSUVudW1lcmFibGU8bG9uZz4gc3RhY2tzSW5IKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8bG9uZz4oc3RhY2tzSW5ILChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGJvb2w+KShzdGFjayA9PiBzdGFjay5Jc0JpdFNldChhbHBoYSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFN1cnBsdXModGhpcyBCb2FyZCBib2FyZCwgR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oR2V0Q29sb3JHcmFwaHMoYm9hcmQuU3RhY2tzLCBib2FyZC5Qb3QpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShjZyA9PiBjZy5Db3VudCAvIDIpKSAtIGcuRTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFN1cnBsdXModGhpcyBCb2FyZCBib2FyZCwgR3JhcGggZywgTGlzdDxpbnQ+IHZlcnRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihHZXRDb2xvckdyYXBocyhib2FyZC5TdGFja3MsIGJvYXJkLlBvdCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGludD4pKGNnID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudDxpbnQ+KGNnLHZlcnRpY2VzKSAvIDIpKSAtIGcuRWRnZXNPbih2ZXJ0aWNlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgVG9Db25zb2xlKHRoaXMgc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBNb3ZlIE1hcE1vdmUoVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IGYsIE1vdmUgbW92ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtYXBwZWRNb3ZlID0gbmV3IE1vdmUoKSB7IFN0YWNrID0gbW92ZS5TdGFjayB9O1xyXG4gICAgICAgICAgICB2YXIgbSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQm9hcmQuQXBwbHlNYXBwaW5nKGYsIG5ld1tdIHsgbW92ZS5BZGRlZCwgbW92ZS5SZW1vdmVkIH0pKTtcclxuXHJcbiAgICAgICAgICAgIG1hcHBlZE1vdmUuQWRkZWQgPSBtWzBdO1xyXG4gICAgICAgICAgICBtYXBwZWRNb3ZlLlJlbW92ZWQgPSBtWzFdO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1hcHBlZE1vdmU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZTtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEFsZ29yaXRobXM7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBNaW5kXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGJvb2wgU3RvcEFuYWx5c2lzT25CcmVha2VyV2luIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBGaW5kQ2xlYW5lc3RXaW4geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIE5lYXJseUNvbG9yYWJsZU9ubHkgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIFN1cGVyYWJ1bmRhbnRPbmx5IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE1pblBvdCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBNYXhQb3QgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBCb2FyZCBCcmVha2VyV29uQm9hcmQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IFRvdGFsUG9zaXRpb25zIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBMaXN0PElCb2FyZEFuYWx5emVyPiBCb2FyZEFuYWx5c2lzUGlwZWxpbmUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIEtub3dsZWRnZSBLbm93bGVkZ2UgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTWluZChHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRmluZENsZWFuZXN0V2luID0gdHJ1ZTtcclxuICAgICAgICAgICAgU3VwZXJhYnVuZGFudE9ubHkgPSB0cnVlO1xyXG4gICAgICAgICAgICBOZWFybHlDb2xvcmFibGVPbmx5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIE1heFBvdCA9IE1ldGFLbm93bGVkZ2UuSW5maW5pdHk7XHJcbiAgICAgICAgICAgIEtub3dsZWRnZSA9IG5ldyBLbm93bGVkZ2UoZyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBCb2FyZEFuYWx5c2lzUGlwZWxpbmUgPSBuZXcgTGlzdDxJQm9hcmRBbmFseXplcj4oKTtcclxuICAgICAgICAgICAgQm9hcmRBbmFseXNpc1BpcGVsaW5lLkFkZChuZXcgQ29sb3JpbmdBbmFseXplcigpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZEJvYXJkQW5hbHl6ZXIoSUJvYXJkQW5hbHl6ZXIgYW5hbHl6ZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCb2FyZEFuYWx5c2lzUGlwZWxpbmUuQWRkKGFuYWx5emVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoVGVtcGxhdGUgdGVtcGxhdGUsIEFjdGlvbjxUaG91Z2h0UHJvZ3Jlc3M+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRvdGFsUG9zaXRpb25zID0gMDtcclxuICAgICAgICAgICAgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgRW5zdXJlU3dhcEFuYWx5emVyRXhpc3RlbmNlKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWluaW11bUNvbG9yQ291bnQgPSBNYXRoLk1heChNaW5Qb3QsIHRlbXBsYXRlLlNpemVzLk1heCgpKTtcclxuICAgICAgICAgICAgdmFyIG1heGltdW1Db2xvckNvdW50ID0gTWF0aC5NaW4oTWF4UG90LCB0ZW1wbGF0ZS5TaXplcy5TdW0oKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm91bmRBdExlYXN0T25lQm9hcmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yQ291bnQgaW4gTWV0YUtub3dsZWRnZS5JbnRlcnZhbChtaW5pbXVtQ29sb3JDb3VudCwgbWF4aW11bUNvbG9yQ291bnQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVGhvdWdodFByb2dyZXNzKCkgeyBJc0luaXRpYWxUaG91Z2h0ID0gdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oR2VuZXJhdGVBbGxCb2FyZHModGVtcGxhdGUsIGNvbG9yQ291bnQsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuVGhvdWdodFByb2dyZXNzPilwcm9ncmVzcykpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kQXRMZWFzdE9uZUJvYXJkICYmIGJvYXJkcy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIFRvdGFsUG9zaXRpb25zICs9IGJvYXJkcy5Db3VudDtcclxuICAgICAgICAgICAgICAgIGZvdW5kQXRMZWFzdE9uZUJvYXJkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYnJlYWtlcldpbiA9ICFBbmFseXplKGJvYXJkcywgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5UaG91Z2h0UHJvZ3Jlc3M+KXByb2dyZXNzKTtcclxuICAgICAgICAgICAgICAgIGlmIChicmVha2VyV2luICYmIFN0b3BBbmFseXNpc09uQnJlYWtlcldpbilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgS25vd2xlZGdlW3RlbXBsYXRlXS5Qcm9tb3RlKGNvbG9yQ291bnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihLbm93bGVkZ2VbdGVtcGxhdGVdLkxvc3RCb2FyZHMpIDw9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIEFuYWx5emUoTGlzdDxCb2FyZD4gYm9hcmRzLCBBY3Rpb248VGhvdWdodFByb2dyZXNzPiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgd2luTGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhbmFseXplciBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLklCb2FyZEFuYWx5emVyPihCb2FyZEFuYWx5c2lzUGlwZWxpbmUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuSUJvYXJkQW5hbHl6ZXIsIGJvb2w+KShhID0+ICFhLklzS25vd2xlZGdlRGVwZW5kZW50KSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaHVuayA9IG5ldyBMaXN0PEJvYXJkPigpO1xyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPiggICAgICAgICAgICAgICAgYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGJvb2w+KShiID0+IGFuYWx5emVyLkFuYWx5emUoS25vd2xlZGdlLCBiKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4pKChyZW1vdmVkKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rLkFkZChyZW1vdmVkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rLkNvdW50ID4gMTAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVGhvdWdodFByb2dyZXNzKCkgeyBCb2FyZHNSZW1vdmVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oY2h1bmspLCBXaW5MZW5ndGggPSB3aW5MZW5ndGggfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5DbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2h1bmsuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVGhvdWdodFByb2dyZXNzKCkgeyBCb2FyZHNSZW1vdmVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oY2h1bmspLCBXaW5MZW5ndGggPSB3aW5MZW5ndGggfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBrbm93bGVkZ2VEZXBlbmRlbnRBbmFseXplcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLklCb2FyZEFuYWx5emVyPihCb2FyZEFuYWx5c2lzUGlwZWxpbmUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuSUJvYXJkQW5hbHl6ZXIsIGJvb2w+KShhID0+IGEuSXNLbm93bGVkZ2VEZXBlbmRlbnQpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChib2FyZHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aW5MZW5ndGgrKztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBib2FyZHMuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGFuYWx5emVyIGluIGtub3dsZWRnZURlcGVuZGVudEFuYWx5emVycylcclxuICAgICAgICAgICAgICAgIHtcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oICAgICAgICAgICAgICAgICAgICBib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgYm9vbD4pKGIgPT4gYW5hbHl6ZXIuQW5hbHl6ZShLbm93bGVkZ2UsIGIpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPikoKHJlbW92ZWQpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUaG91Z2h0UHJvZ3Jlc3MoKSB7IEJvYXJkc1JlbW92ZWQgPSBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkVuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihyZW1vdmVkKSwgV2luTGVuZ3RoID0gd2luTGVuZ3RoIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJvYXJkcy5Db3VudCA9PSBjb3VudClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiBib2FyZHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEtub3dsZWRnZVtiLlRlbXBsYXRlLlZhbHVlXVtiLkNvbG9yQ291bnRdLkFkZExvc3MoYik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBnID0gS25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkdyYXBoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmVhcmx5Q29sb3JhYmxlID0gRW51bWVyYWJsZS5SYW5nZSgwLCBLbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuTGluZUdyYXBoLk4pLkFsbCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShlID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkLCBib29sPikoYiA9PiBDb2xvcmluZ0FuYWx5emVyLkNvbG9yYWJsZVdpdGhvdXRFZGdlKEtub3dsZWRnZSwgYiwgZSkpKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZWFybHlDb2xvcmFibGUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0T3JEZWZhdWx0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkLCBib29sPikoYiA9PiBnLkRlZ3JlZUNvbmRpdGlvbihiKSAmJiBDb2xvcmluZ0FuYWx5emVyLkNvbG9yYWJsZVdpdGhvdXRFZGdlKEtub3dsZWRnZSwgYiwgMCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEJyZWFrZXJXb25Cb2FyZCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgYm9vbD4pKGIgPT4gQ29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2UsIGIsIDApKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBFbnN1cmVTd2FwQW5hbHl6ZXJFeGlzdGVuY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5JQm9hcmRBbmFseXplcj4oQm9hcmRBbmFseXNpc1BpcGVsaW5lLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLklCb2FyZEFuYWx5emVyLCBib29sPikoYSA9PiBhIGlzIFN3YXBBbmFseXplcikpKVxyXG4gICAgICAgICAgICAgICAgQm9hcmRBbmFseXNpc1BpcGVsaW5lLkFkZChuZXcgU3dhcEFuYWx5emVyKEZpbmRDbGVhbmVzdFdpbiwgZmFsc2UpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEhhc2hTZXQ8Qm9hcmQ+IEdlbmVyYXRlQWxsQm9hcmRzKFRlbXBsYXRlIHRlbXBsYXRlLCBpbnQgY29sb3JDb3VudCwgQWN0aW9uPFRob3VnaHRQcm9ncmVzcz4gcHJvZ3Jlc3MgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJvYXJkcyA9IG5ldyBIYXNoU2V0PEJvYXJkPigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCB0ZW1wbGF0ZS5TaXplcy5Db3VudCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBwb3RTZXQgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIGNvbG9yQ291bnQpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgcG90ID0gcG90U2V0LlRvSW50NjQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmaXggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8aW50LGludD4odmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IE1hdGguQWJzKHRlbXBsYXRlLlNpemVzW3ZdIC0gY29sb3JDb3VudCAvIDIpKSkuRmlyc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBib2FyZHNDaHVuayA9IG5ldyBMaXN0PEJvYXJkPigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYXNzaWdubWVudFNldHMgaW4gQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4odmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4pKHYgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHYgPT0gZml4KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkVuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGludD4ocG90U2V0LHRlbXBsYXRlLlNpemVzW3ZdKS5Ub0xpc3QoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4ocG90U2V0LCB0ZW1wbGF0ZS5TaXplc1t2XSk7XHJcbiAgICAgICAgICAgIH0pKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZXRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGFzc2lnbm1lbnRTZXRzKTtcclxuICAgICAgICAgICAgICAgIHZhciB0b3RhbENvbG9ycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KHNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKHNldCA9PiBzZXQpKS5EaXN0aW5jdCgpLkNvdW50KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodG90YWxDb2xvcnMgPCBjb2xvckNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pixsb25nPihzZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBsb25nPikobGlzdCA9PiBsaXN0LlRvSW50NjQoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzdXBlckFidW5kYW50ID0gS25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkdyYXBoLkRlZ3JlZUNvbmRpdGlvbihzdGFja3MsIHBvdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm9hcmQgPSBuZXcgQm9hcmQoc3RhY2tzLCBwb3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChTdXBlcmFidW5kYW50T25seSAmJiAhc3VwZXJBYnVuZGFudClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBib2FyZHMuQWRkKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgIGJvYXJkc0NodW5rLkFkZChib2FyZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJvYXJkc0NodW5rLkNvdW50ID4gMTAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVGhvdWdodFByb2dyZXNzKCkgeyBCb2FyZHNBZGRlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KGJvYXJkc0NodW5rKSwgV2luTGVuZ3RoID0gLTEgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJvYXJkc0NodW5rLkNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChib2FyZHNDaHVuay5Db3VudCA+IDAgJiYgcHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUaG91Z2h0UHJvZ3Jlc3MoKSB7IEJvYXJkc0FkZGVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oYm9hcmRzQ2h1bmspLCBXaW5MZW5ndGggPSAtMSB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBib2FyZHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgaW50IFRyZWVOb2RlTnVtYmVyID0gMTtcclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8S25vd2xlZGdlVHJlZT4gRW51bWVyYXRlS25vd2xlZGdlVHJlZXMoVGVtcGxhdGUgdGVtcGxhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVLbm93bGVkZ2UgPSBLbm93bGVkZ2VbdGVtcGxhdGVdO1xyXG4gICAgICAgICAgICB2YXIgY29sb3JDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihNZXRhS25vd2xlZGdlLk5hdHVyYWxzKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikobiA9PiB0ZW1wbGF0ZUtub3dsZWRnZS5Lbm93bGVkZ2VFeGlzdHMobikgJiYgIXRlbXBsYXRlS25vd2xlZGdlLktub3dsZWRnZUV4aXN0cyhuICsgMSkpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5Cb2FyZEtub3dsZWRnZT4sZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuS25vd2xlZGdlVHJlZT4odGVtcGxhdGVLbm93bGVkZ2VbY29sb3JDb3VudF0uRW51bWVyYXRlQm9hcmRLbm93bGVkZ2UoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5Cb2FyZEtub3dsZWRnZT4sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLktub3dsZWRnZVRyZWU+KShrdnAgPT4gR2VuZXJhdGVLbm93bGVkZ2VUcmVlKGt2cC5LZXkpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBLbm93bGVkZ2VUcmVlIEdlbmVyYXRlS25vd2xlZGdlVHJlZShCb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRyZWVOb2RlTnVtYmVyID0gMTtcclxuICAgICAgICAgICAgdmFyIHNlZW5DYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PEJvYXJkLCBUdXBsZTxpbnQsIEJvYXJkPj4oKTtcclxuICAgICAgICAgICAgdmFyIGtub3dsZWRnZVRyZWUgPSBuZXcgS25vd2xlZGdlVHJlZSgpO1xyXG4gICAgICAgICAgICBGaWxsS25vd2xlZGdlVHJlZShrbm93bGVkZ2VUcmVlLCBib2FyZCwgc2VlbkNhY2hlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBrbm93bGVkZ2VUcmVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2b2lkIEZpbGxLbm93bGVkZ2VUcmVlKEtub3dsZWRnZVRyZWUga25vd2xlZGdlVHJlZSwgQm9hcmQgYm9hcmQsIERpY3Rpb25hcnk8Qm9hcmQsIFR1cGxlPGludCwgQm9hcmQ+PiBzZWVuQ2FjaGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBrbm93bGVkZ2VUcmVlLkJvYXJkID0gYm9hcmQuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAga25vd2xlZGdlVHJlZS5OdW1iZXIgPSBUcmVlTm9kZU51bWJlcisrO1xyXG5cclxuICAgICAgICAgICAgdmFyIGtub3dsZWRnZSA9IEtub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF1bYm9hcmRdO1xyXG4gICAgICAgICAgICBpZiAoa25vd2xlZGdlLkV4aXN0cygpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa25vd2xlZGdlLlJlYXNvbiAhPSBcImdvb2Qgc3dhcFwiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtub3dsZWRnZVRyZWUuTm90ZSA9IGtub3dsZWRnZS5SZWFzb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVHVwbGU8aW50LCBCb2FyZD4gc2VlbkJvYXJkO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWVuQ2FjaGUuVHJ5R2V0VmFsdWUoYm9hcmQsIG91dCBzZWVuQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga25vd2xlZGdlVHJlZS5Ob3RlID0gXCJzYW1lIGFzICNcIiArIHNlZW5Cb2FyZC5JdGVtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBrbm93bGVkZ2UuQm9hcmQuRmluZFBlcm11dGF0aW9uKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihCb2FyZC5BcHBseU1hcHBpbmcoZiwgbmV3W10geyBrbm93bGVkZ2UuQ29sb3JQYWlyLkl0ZW0xLCBrbm93bGVkZ2UuQ29sb3JQYWlyLkl0ZW0yIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JQYWlyID0gbmV3IFR1cGxlPGludCwgaW50Pihjb2xvcnNbMF0sIGNvbG9yc1sxXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzd2FwIGluIGtub3dsZWRnZS5Td2FwcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wQm9hcmQgPSBib2FyZC5DbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW92ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmUsZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPihzd2FwLkl0ZW0yLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZSwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPikobSA9PiBNZXRhS25vd2xlZGdlLk1hcE1vdmUoZiwgbSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcEJvYXJkLkRvTW92ZUNvbWJpbmF0aW9uKG1vdmVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEtub3dsZWRnZVRyZWUgPSBrbm93bGVkZ2VUcmVlLkFkZENoaWxkKHN3YXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEtub3dsZWRnZVRyZWUuQ29sb3JQYWlyID0gY29sb3JQYWlyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGaWxsS25vd2xlZGdlVHJlZShjaGlsZEtub3dsZWRnZVRyZWUsIHRlbXBCb2FyZCwgc2VlbkNhY2hlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwic29tZXRoaW5nIHdlbnQgd3JvbmcgaW4gYnVpbGRpbmcgc2VhcmNoIHRyZWVcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNlZW5DYWNoZVtib2FyZF0gPSBuZXcgVHVwbGU8aW50LCBCb2FyZD4oa25vd2xlZGdlVHJlZS5OdW1iZXIsIGJvYXJkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUdXBsZTxHcmFwaCwgRGljdGlvbmFyeTxpbnQsIEtleVZhbHVlUGFpcjxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+PiwgRGljdGlvbmFyeTxUdXBsZTxpbnQsIGludD4sIFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPj4+IEdlbmVyYXRlVGVtcGxhdGVLbm93bGVkZ2VHcmFwaChUZW1wbGF0ZSB0ZW1wbGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUtub3dsZWRnZSA9IEtub3dsZWRnZVt0ZW1wbGF0ZV07XHJcbiAgICAgICAgICAgIHZhciBjb2xvckNvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KE1ldGFLbm93bGVkZ2UuTmF0dXJhbHMoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShuID0+IHRlbXBsYXRlS25vd2xlZGdlLktub3dsZWRnZUV4aXN0cyhuKSAmJiAhdGVtcGxhdGVLbm93bGVkZ2UuS25vd2xlZGdlRXhpc3RzKG4gKyAxKSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5leHRWZXJ0ZXhJRCA9IDA7XHJcbiAgICAgICAgICAgIHZhciB2ZXJ0ZXhMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxCb2FyZCwgaW50PigpO1xyXG4gICAgICAgICAgICB2YXIgc3dhcExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PFR1cGxlPGludCwgaW50PiwgVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+PigpO1xyXG4gICAgICAgICAgICB2YXIgYm9hcmRMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxpbnQsIEtleVZhbHVlUGFpcjxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+PigpO1xyXG4gICAgICAgICAgICB2YXIgb3V0RWRnZXMgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBrdnAgaW4gdGVtcGxhdGVLbm93bGVkZ2VbY29sb3JDb3VudF0uRW51bWVyYXRlQm9hcmRLbm93bGVkZ2UoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmVydGV4TG9va3VwW2t2cC5LZXldID0gbmV4dFZlcnRleElEO1xyXG4gICAgICAgICAgICAgICAgYm9hcmRMb29rdXBbbmV4dFZlcnRleElEXSA9IGt2cDtcclxuICAgICAgICAgICAgICAgIG91dEVkZ2VzW25leHRWZXJ0ZXhJRF0gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICBuZXh0VmVydGV4SUQrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGIgaW4gdGVtcGxhdGVLbm93bGVkZ2UuTG9zdEJvYXJkcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmVydGV4TG9va3VwW2JdID0gbmV4dFZlcnRleElEO1xyXG4gICAgICAgICAgICAgICAgYm9hcmRMb29rdXBbbmV4dFZlcnRleElEXSA9IG5ldyBLZXlWYWx1ZVBhaXI8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPihiLCBuZXcgQm9hcmRLbm93bGVkZ2UoYiwgXCJicmVha2VyIHdpbnNcIikpO1xyXG4gICAgICAgICAgICAgICAgb3V0RWRnZXNbbmV4dFZlcnRleElEXSA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIG5leHRWZXJ0ZXhJRCsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIHRlbXBsYXRlS25vd2xlZGdlW2NvbG9yQ291bnRdLkVudW1lcmF0ZUJvYXJkS25vd2xlZGdlKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChrdnAuVmFsdWUuUmVhc29uID09IFwiZ29vZCBzd2FwXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSB2ZXJ0ZXhMb29rdXBba3ZwLktleV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0ga3ZwLlZhbHVlLkJvYXJkLkZpbmRQZXJtdXRhdGlvbihrdnAuS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihCb2FyZC5BcHBseU1hcHBpbmcoZiwgbmV3W10geyBrdnAuVmFsdWUuQ29sb3JQYWlyLkl0ZW0xLCBrdnAuVmFsdWUuQ29sb3JQYWlyLkl0ZW0yIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JQYWlyID0gbmV3IFR1cGxlPGludCwgaW50Pihjb2xvcnNbMF0sIGNvbG9yc1sxXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzd2FwIGluIGt2cC5WYWx1ZS5Td2FwcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wQm9hcmQgPSBrdnAuS2V5LkNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZSxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmU+KHN3YXAuSXRlbTIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmU+KShtID0+IE1ldGFLbm93bGVkZ2UuTWFwTW92ZShmLCBtKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wQm9hcmQuRG9Nb3ZlQ29tYmluYXRpb24obW92ZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSB2ZXJ0ZXhMb29rdXBbdGVtcEJvYXJkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0RWRnZXNbdl0uQWRkKHcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dhcExvb2t1cFtuZXcgVHVwbGU8aW50LCBpbnQ+KHYsIHcpXSA9IHN3YXA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZWRnZVdlaWdodHMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbmV4dFZlcnRleElEOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG5leHRWZXJ0ZXhJRDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRFZGdlc1tpXS5Db250YWlucyhqKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVdlaWdodHMuQWRkKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG91dEVkZ2VzW2pdLkNvbnRhaW5zKGkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlV2VpZ2h0cy5BZGQoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVdlaWdodHMuQWRkKDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR1cGxlPEdyYXBoLCBEaWN0aW9uYXJ5PGludCwgS2V5VmFsdWVQYWlyPEJvYXJkLCBCb2FyZEtub3dsZWRnZT4+LCBEaWN0aW9uYXJ5PFR1cGxlPGludCwgaW50PiwgVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+Pj4obmV3IEdyYXBoKGVkZ2VXZWlnaHRzKSwgYm9hcmRMb29rdXAsIHN3YXBMb29rdXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBQb3RLbm93bGVkZ2VcclxuICAgIHtcclxuICAgICAgICBEaWN0aW9uYXJ5PEJvYXJkLCBCb2FyZEtub3dsZWRnZT4gX2JvYXJkTG9va3VwID0gbmV3IERpY3Rpb25hcnk8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPigpO1xyXG4gICAgICAgIERpY3Rpb25hcnk8c3RyaW5nLCBEaWN0aW9uYXJ5PEJvYXJkLCBCb2FyZEtub3dsZWRnZT4+IF9pbXByb3ZlbWVudExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgRGljdGlvbmFyeTxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+PigpO1xyXG4gICAgICAgIEhhc2hTZXQ8Qm9hcmQ+IF9sb3N0Qm9hcmRzID0gbmV3IEhhc2hTZXQ8Qm9hcmQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29sb3JDb3VudCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8VHVwbGU8aW50LCBpbnQ+PiBDb2xvclBhaXJzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxCb2FyZD4gTG9zdEJvYXJkcyB7IGdldCB7IHJldHVybiBfbG9zdEJvYXJkczsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBCb2FyZEtub3dsZWRnZSB0aGlzW0JvYXJkIGJvYXJkXSBcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgICBnZXQgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEJvYXJkS25vd2xlZGdlIGI7XHJcbiAgICAgICAgICAgICAgICBfYm9hcmRMb29rdXAuVHJ5R2V0VmFsdWUoYm9hcmQsIG91dCBiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgRGljdGlvbmFyeTxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+IEltcHJvdmVtZW50TG9va3VwKHN0cmluZyByZWFzb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEaWN0aW9uYXJ5PEJvYXJkLCBCb2FyZEtub3dsZWRnZT4gbG9va3VwO1xyXG4gICAgICAgICAgICBpZiAoIV9pbXByb3ZlbWVudExvb2t1cC5UcnlHZXRWYWx1ZShyZWFzb24sIG91dCBsb29rdXApKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb29rdXAgPSBuZXcgRGljdGlvbmFyeTxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+KCk7XHJcbiAgICAgICAgICAgICAgICBfaW1wcm92ZW1lbnRMb29rdXBbcmVhc29uXSA9IGxvb2t1cDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxvb2t1cDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEJvYXJkS25vd2xlZGdlIHRoaXNbc3RyaW5nIHJlYXNvbiwgQm9hcmQgYm9hcmRdXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQm9hcmRLbm93bGVkZ2UgYjtcclxuICAgICAgICAgICAgICAgIEltcHJvdmVtZW50TG9va3VwKHJlYXNvbikuVHJ5R2V0VmFsdWUoYm9hcmQsIG91dCBiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBJbXByb3ZlbWVudExvb2t1cChyZWFzb24pW2JvYXJkXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUG90S25vd2xlZGdlKGludCBjb2xvckNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ29sb3JDb3VudCA9IGNvbG9yQ291bnQ7XHJcbiAgICAgICAgICAgIFNldHVwQ29sb3JQYWlycygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEJvYXJkS25vd2xlZGdlIEFkZFdpbihCb2FyZCBib2FyZCwgc3RyaW5nIHJlYXNvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBrbm93bGVkZ2UgPSBuZXcgQm9hcmRLbm93bGVkZ2UoYm9hcmQsIHJlYXNvbik7XHJcbiAgICAgICAgICAgIF9ib2FyZExvb2t1cFtib2FyZF0gPSBrbm93bGVkZ2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ga25vd2xlZGdlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEJvYXJkS25vd2xlZGdlIEFkZFdpbihCb2FyZCBib2FyZCwgc3RyaW5nIHJlYXNvbiwgaW50IHdpbkRlcHRoLCBUdXBsZTxpbnQsIGludD4gY29sb3JQYWlyLCBMaXN0PFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPj4gZ29vZFN3YXBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGtub3dsZWRnZSA9IG5ldyBCb2FyZEtub3dsZWRnZShib2FyZCwgcmVhc29uKSB7IERlcHRoID0gd2luRGVwdGgsIENvbG9yUGFpciA9IGNvbG9yUGFpciwgU3dhcHMgPSBnb29kU3dhcHMgfTtcclxuICAgICAgICAgICAgX2JvYXJkTG9va3VwW2JvYXJkXSA9IGtub3dsZWRnZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBrbm93bGVkZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm9hcmRLbm93bGVkZ2UgQWRkSW1wcm92ZW1lbnQoQm9hcmQgYm9hcmQsIHN0cmluZyByZWFzb24sIGludCB3aW5EZXB0aCwgVHVwbGU8aW50LCBpbnQ+IGNvbG9yUGFpciwgTGlzdDxUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4+IGdvb2RTd2FwcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBrbm93bGVkZ2UgPSBuZXcgQm9hcmRLbm93bGVkZ2UoYm9hcmQsIHJlYXNvbikgeyBEZXB0aCA9IHdpbkRlcHRoLCBDb2xvclBhaXIgPSBjb2xvclBhaXIsIFN3YXBzID0gZ29vZFN3YXBzIH07XHJcbiAgICAgICAgICAgIHRoaXNbcmVhc29uLCBib2FyZF0gPSBrbm93bGVkZ2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ga25vd2xlZGdlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkTG9zcyhCb2FyZCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2xvc3RCb2FyZHMuQWRkKGIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBTZXR1cENvbG9yUGFpcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ29sb3JQYWlycyA9IG5ldyBMaXN0PFR1cGxlPGludCwgaW50Pj4oKTtcclxuICAgICAgICAgICAgdmFyIGNvbG9ycyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgQ29sb3JDb3VudCkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbG9ycy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgY29sb3JzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgQ29sb3JQYWlycy5BZGQobmV3IFR1cGxlPGludCwgaW50Pihjb2xvcnNbaV0sIGNvbG9yc1tqXSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ29weUludG8oUG90S25vd2xlZGdlIHBvdEtub3dsZWRnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBrdnAgaW4gX2JvYXJkTG9va3VwKVxyXG4gICAgICAgICAgICAgICAgcG90S25vd2xlZGdlLkFkZFdpbihrdnAuS2V5LCBrdnAuVmFsdWUuUmVhc29uLCBrdnAuVmFsdWUuRGVwdGgsIGt2cC5WYWx1ZS5Db2xvclBhaXIsIGt2cC5WYWx1ZS5Td2Fwcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8S2V5VmFsdWVQYWlyPEJvYXJkLCBCb2FyZEtub3dsZWRnZT4+IEVudW1lcmF0ZUJvYXJkS25vd2xlZGdlKClcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5RGVzY2VuZGluZzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5Cb2FyZEtub3dsZWRnZT4saW50PihfYm9hcmRMb29rdXAsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuQm9hcmRLbm93bGVkZ2U+LCBpbnQ+KSh4ID0+IHguVmFsdWUuRGVwdGgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW1cclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNsaW1Td2FwQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBLbm93bGVkZ2UgX2tub3dsZWRnZTtcclxuICAgICAgICBEaWN0aW9uYXJ5PGludCwgQm9hcmQ+IF9ib2FyZExvb2t1cDtcclxuICAgICAgICBEaWN0aW9uYXJ5PEJvYXJkLCBpbnQ+IF9ib2FyZElETG9va3VwO1xyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBMaXN0PExpc3Q8U29ydGVkSW50TGlzdD4+PiBfc2hydWJzID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PExpc3Q8U29ydGVkSW50TGlzdD4+PigpO1xyXG4gICAgICAgIGJvb2wgX3VzZVNocnVicztcclxuXHJcbiAgICAgICAgcHVibGljIFNsaW1Td2FwQW5hbHl6ZXIoS25vd2xlZGdlIGtub3dsZWRnZSwgRGljdGlvbmFyeTxpbnQsIEJvYXJkPiBib2FyZExvb2t1cCwgRGljdGlvbmFyeTxCb2FyZCwgaW50PiBib2FyZElETG9va3VwLCBib29sIHVzZVNocnVicyA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2tub3dsZWRnZSA9IGtub3dsZWRnZTtcclxuICAgICAgICAgICAgX2JvYXJkTG9va3VwID0gYm9hcmRMb29rdXA7XHJcbiAgICAgICAgICAgIF9ib2FyZElETG9va3VwID0gYm9hcmRJRExvb2t1cDtcclxuICAgICAgICAgICAgX3VzZVNocnVicyA9IHVzZVNocnVicztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoaW50IGJvYXJkSUQsIFNvcnRlZEludExpc3Qgd29uQm9hcmRJRHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIV91c2VTaHJ1YnMpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQW5hbHl6ZVNocnViRnJlZShib2FyZElELCB3b25Cb2FyZElEcyk7XHJcblxyXG4gICAgICAgICAgICBMaXN0PExpc3Q8U29ydGVkSW50TGlzdD4+IHNocnViO1xyXG4gICAgICAgICAgICBpZiAoIV9zaHJ1YnMuVHJ5R2V0VmFsdWUoYm9hcmRJRCwgb3V0IHNocnViKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBJbml0aWFsaXplU2hydWJzKGJvYXJkSUQsIHdvbkJvYXJkSURzKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvclBhaXJMaXN0IGluIHNocnViKVxyXG4gICAgICAgICAgICB7XHJcbkFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU29ydGVkSW50TGlzdD4oICAgICAgICAgICAgICAgIGNvbG9yUGFpckxpc3QsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5Tb3J0ZWRJbnRMaXN0LCBib29sPikoYnJhbmNoTGlzdCA9PiBicmFuY2hMaXN0LkludGVyc2VjdHMod29uQm9hcmRJRHMpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlNvcnRlZEludExpc3Q+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sb3JQYWlyTGlzdC5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIEFuYWx5emVTaHJ1YkZyZWUoaW50IGJvYXJkSUQsIFNvcnRlZEludExpc3Qgd29uQm9hcmRJRHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYm9hcmQgPSBfYm9hcmRMb29rdXBbYm9hcmRJRF07XHJcbiAgICAgICAgICAgIHZhciBwb3RLbm93bGVkZ2UgPSBfa25vd2xlZGdlW2JvYXJkLlRlbXBsYXRlLlZhbHVlXVtib2FyZC5Db2xvckNvdW50XTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvclBhaXIgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5RGVzY2VuZGluZzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4saW50Pihwb3RLbm93bGVkZ2UuQ29sb3JQYWlycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGludD4pKHBhaXIgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KENocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuRW51bWVyYXRlRXhhY3RseU9uZUludGVyc2VjdGVycyhib2FyZCwgcGFpcikpICUgMikpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJyYW5jaCBpbiBDaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkVudW1lcmF0ZUJyYW5jaGVzKGJvYXJkLCBjb2xvclBhaXIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcEV4aXN0cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgc3dhcCBpbiBicmFuY2gpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2FyZC5Eb01vdmVDb21iaW5hdGlvbihzd2FwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkSUQgPSBfYm9hcmRJRExvb2t1cFtib2FyZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvYXJkLkRvTW92ZUNvbWJpbmF0aW9uKHN3YXApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvbkJvYXJkSURzLkNvbnRhaW5zKGNoaWxkSUQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5uaW5nU3dhcEV4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAod2lubmluZ1N3YXBBbHdheXNFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgSW5pdGlhbGl6ZVNocnVicyhpbnQgYm9hcmRJRCwgU29ydGVkSW50TGlzdCB3b25Cb2FyZElEcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaHJ1YiA9IG5ldyBMaXN0PExpc3Q8U29ydGVkSW50TGlzdD4+KCk7XHJcbiAgICAgICAgICAgIF9zaHJ1YnNbYm9hcmRJRF0gPSBzaHJ1YjtcclxuXHJcbiAgICAgICAgICAgIHZhciBib2FyZCA9IF9ib2FyZExvb2t1cFtib2FyZElEXTtcclxuICAgICAgICAgICAgdmFyIHBvdEtub3dsZWRnZSA9IF9rbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yUGFpciBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnlEZXNjZW5kaW5nPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PixpbnQ+KHBvdEtub3dsZWRnZS5Db2xvclBhaXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikocGFpciA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5FbnVtZXJhdGVFeGFjdGx5T25lSW50ZXJzZWN0ZXJzKGJvYXJkLCBwYWlyKSkgJSAyKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xvclBhaXJMaXN0ID0gbmV3IExpc3Q8U29ydGVkSW50TGlzdD4oKTtcclxuICAgICAgICAgICAgICAgIHNocnViLkFkZChjb2xvclBhaXJMaXN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJyYW5jaCBpbiBDaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkVudW1lcmF0ZUJyYW5jaGVzKGJvYXJkLCBjb2xvclBhaXIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBicmFuY2hMaXN0ID0gbmV3IFNvcnRlZEludExpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBFeGlzdHMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHN3YXAgaW4gYnJhbmNoKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9hcmQuRG9Nb3ZlQ29tYmluYXRpb24oc3dhcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZElEID0gX2JvYXJkSURMb29rdXBbYm9hcmRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2FyZC5Eb01vdmVDb21iaW5hdGlvbihzd2FwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b25Cb2FyZElEcy5Db250YWlucyhjaGlsZElEKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyYW5jaExpc3QuQWRkKGNoaWxkSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5uaW5nU3dhcEV4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yUGFpckxpc3QuQWRkKGJyYW5jaExpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAod2lubmluZ1N3YXBBbHdheXNFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTb3J0ZWRJbnRMaXN0XHJcbiAgICB7XHJcbiAgICAgICAgaW50W10gX2RhdGE7XHJcbiAgICAgICAgaW50IF9sZW5ndGg7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTb3J0ZWRJbnRMaXN0KGludCBpbml0aWFsQ2FwYWNpdHkgPSAxNilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9kYXRhID0gbmV3IGludFtpbml0aWFsQ2FwYWNpdHldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkKGludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSBBcnJheS5CaW5hcnlTZWFyY2g8aW50PihfZGF0YSwgMCwgX2xlbmd0aCwgeCk7XHJcbiAgICAgICAgICAgIGlmIChpID49IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBFbnN1cmVDYXBhY2l0eSgpO1xyXG5cclxuICAgICAgICAgICAgaSA9IH5pO1xyXG4gICAgICAgICAgICBpZiAoaSA8IF9sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICBBcnJheS5Db3B5KF9kYXRhLCBpLCBfZGF0YSwgaSArIDEsIF9sZW5ndGggLSBpKTtcclxuXHJcbiAgICAgICAgICAgIF9kYXRhW2ldID0geDtcclxuICAgICAgICAgICAgX2xlbmd0aCsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnMoaW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuQmluYXJ5U2VhcmNoPGludD4oX2RhdGEsIDAsIF9sZW5ndGgsIHgpID49IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJbnRlcnNlY3RzKFNvcnRlZEludExpc3Qgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgaiA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgayA9IEFycmF5LkJpbmFyeVNlYXJjaDxpbnQ+KG90aGVyLl9kYXRhLCBqLCBvdGhlci5fbGVuZ3RoIC0gaiwgX2RhdGFbaV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGsgPj0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGogPSB+aztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEVuc3VyZUNhcGFjaXR5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfbGVuZ3RoID49IF9kYXRhLkxlbmd0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBuZXcgaW50WzIgKiBfZGF0YS5MZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgQXJyYXkuQ29weShfZGF0YSwgZGF0YSwgX2RhdGEuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIF9kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJvYXJkTGV4aWZpZXJcclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgRGljdGlvbmFyeTxzdHJpbmcsIFR1cGxlPHN0cmluZywgUGVybXV0YXRpb24+PiBfbG9va3VwID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBUdXBsZTxzdHJpbmcsIFBlcm11dGF0aW9uPj4oKTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0xpc3RTdHJpbmdJbkxleE9yZGVyKGxvbmdbXSBzcywgb3V0IFBlcm11dGF0aW9uIHBwLCBpbnQgbWF4UG90ID0gLTEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGlzdHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihzcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGwgPT4gbC5Ub1NldCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBwb3QgPSBtYXhQb3Q7XHJcbiAgICAgICAgICAgIGlmIChwb3QgPD0gMClcclxuICAgICAgICAgICAgICAgIHBvdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KGxpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KShsID0+IGwpKS5EaXN0aW5jdCgpLkNvdW50KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4obGlzdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzID0+IHMuQ291bnQgPD0gcG90KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBUb0xleE9yZGVyKHN0cmluZy5Kb2luKFwifFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixzdHJpbmc+KHN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Piwgc3RyaW5nPikocyA9PiBzdHJpbmcuSm9pbjxpbnQ+KFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxpbnQsaW50PihzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoeCA9PiB4KSkpKSkpLCBvdXQgcHAsIG1heFBvdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgc3RyaW5nIFRvTGV4T3JkZXIoc3RyaW5nIHN0YWNrc1N0cmluZywgb3V0IFBlcm11dGF0aW9uIHBwLCBpbnQgbWF4UG90KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHN0YWNrc1N0cmluZyArIFwiO1wiICsgbWF4UG90O1xyXG4gICAgICAgICAgICBUdXBsZTxzdHJpbmcsIFBlcm11dGF0aW9uPiB0dXA7XHJcbiAgICAgICAgICAgIGlmIChfbG9va3VwLlRyeUdldFZhbHVlKGtleSwgb3V0IHR1cCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBwID0gdHVwLkl0ZW0yO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR1cC5JdGVtMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHAgPSBudWxsO1xyXG4gICAgICAgICAgICBzdHJpbmcgbGV4U21hbGxlc3Q7XHJcbiAgICAgICAgICAgIHZhciBzdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHN0YWNrc1N0cmluZy5TcGxpdCgnfCcpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShzID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGNoYXIsaW50PihzLlRvQ2hhckFycmF5KCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Y2hhciwgaW50PikoYyA9PiBpbnQuUGFyc2UoYy5Ub1N0cmluZygpKSkpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIGxleFNtYWxsZXN0ID0gc3RhY2tzU3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KHN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PikobCA9PiBsKSkuRGlzdGluY3QoKS5Db3VudCgpO1xyXG4gICAgICAgICAgICBpZiAobWF4UG90ID4gMClcclxuICAgICAgICAgICAgICAgIHBvdCA9IG1heFBvdDtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwIGluIFBlcm11dGF0aW9uLkVudW1lcmF0ZUFsbChwb3QpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGVybXV0ZWRTdHJpbmcgPSBzdHJpbmcuSm9pbihcInxcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sc3RyaW5nPihzdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIHN0cmluZz4pKHMgPT4gc3RyaW5nLkpvaW48aW50PihcIlwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYSA9PiBwW2FdKSkuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoeCA9PiB4KSkpKSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBlcm11dGVkU3RyaW5nLkNvbXBhcmVUbyhsZXhTbWFsbGVzdCkgPD0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXhTbWFsbGVzdCA9IHBlcm11dGVkU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIHBwID0gcDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgX2xvb2t1cFtrZXldID0gbmV3IFR1cGxlPHN0cmluZywgUGVybXV0YXRpb24+KGxleFNtYWxsZXN0LCBwcCk7XHJcbiAgICAgICAgICAgIHJldHVybiBsZXhTbWFsbGVzdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyXHJcbntcclxuICAgIHN0YXRpYyBjbGFzcyBIYXNoaW5nXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgaW50IE1heExlbmd0aCA9IDMyO1xyXG4gICAgICAgIHN0YXRpYyBMaXN0PHVsb25nPiBfbTtcclxuXHJcbiAgICAgICAgc3RhdGljIEhhc2hpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX20gPSBuZXcgTGlzdDx1bG9uZz4oTWF4TGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBSTkcgPSBuZXcgUmFuZG9tKERhdGVUaW1lLk5vdy5NaWxsaXNlY29uZCk7XHJcbiAgICAgICAgICAgIHZhciBiID0gbmV3IGJ5dGVbOF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE1heExlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSTkcuTmV4dEJ5dGVzKGIpO1xyXG4gICAgICAgICAgICAgICAgX20uQWRkKEJpdENvbnZlcnRlci5Ub1VJbnQ2NChiLCAwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEhhc2godWxvbmdbXSBsaXN0LCBpbnQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgaGFzaCA9IGxpc3RbMF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaGFzaCArPSBfbVtpIC0gMV0gKiBsaXN0W2ldO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpKGhhc2ggPj4gMzIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzXHJcbntcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBQcm9vZkJ1aWxkZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltTWluZCBNaW5kIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFByb29mQ2FzZT4gQ2FzZXMgeyBnZXQ7IHByb3RlY3RlZCBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBVc2VQZXJtdXRhdGlvbnMgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUHJvb2ZCdWlsZGVyKFN1cGVyU2xpbU1pbmQgbWluZCwgYm9vbCB1c2VQZXJtdXRhdGlvbnMgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1pbmQgPSBtaW5kO1xyXG4gICAgICAgICAgICBVc2VQZXJtdXRhdGlvbnMgPSB1c2VQZXJtdXRhdGlvbnM7XHJcbiAgICAgICAgICAgIEV4dHJhY3RDYXNlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBFeHRyYWN0Q2FzZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2FzZXMgPSBuZXcgTGlzdDxQcm9vZkNhc2U+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FzZU51bWJlciA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JhYmxlQ2FzZSA9IG5ldyBQcm9vZkNhc2UoTWluZCwgMCwgTWluZC5Db2xvcmFibGVCb2FyZHMpO1xyXG4gICAgICAgICAgICBDYXNlcy5BZGQoY29sb3JhYmxlQ2FzZSk7XHJcbiAgICAgICAgICAgIGNhc2VOdW1iZXIrKztcclxuXHJcbiAgICAgICAgICAgIHZhciByZW1haW5pbmdCb2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihNaW5kLk5vbkNvbG9yYWJsZUJvYXJkcyk7XHJcbiAgICAgICAgICAgIHZhciB3b25Cb2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihNaW5kLkNvbG9yYWJsZUJvYXJkcyk7XHJcbiAgICAgICAgICAgIHdoaWxlIChyZW1haW5pbmdCb2FyZHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvb2ZDYXNlID0gbmV3IFByb29mQ2FzZShNaW5kLCBjYXNlTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgIENhc2VzLkFkZChwcm9vZkNhc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhZGRlZEJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJvYXJkIGluIHJlbWFpbmluZ0JvYXJkcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHJlZUluZm8gPSBNaW5kLkdldFdpblRyZWVJbmZvKGJvYXJkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiB3b25Cb2FyZHMuQ29udGFpbnMobmV3IFN1cGVyU2xpbUJvYXJkKGJvYXJkLl90cmFjZSwgYmMuQWxwaGEsIGJjLkJldGEsIGJjLlJlc3BvbnNlLCBib2FyZC5fc3RhY2tDb3VudCkpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkQm9hcmRzLkFkZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJvYXJkIGluIGFkZGVkQm9hcmRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb29mQ2FzZS5BZGRCb2FyZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd29uQm9hcmRzLkFkZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nQm9hcmRzLlJlbW92ZShib2FyZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZU51bWJlcisrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBpbnQgR2V0SGFuZGxlZENhc2VOdW1iZXIoU3VwZXJTbGltQm9hcmQgYiwgQnJlYWtlckNob2ljZUluZm8gYmMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBTdXBlclNsaW1Cb2FyZChiLl90cmFjZSwgYmMuQWxwaGEsIGJjLkJldGEsIGJjLlJlc3BvbnNlLCBiLl9zdGFja0NvdW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5Qcm9vZkNhc2U+KENhc2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLlByb29mQ2FzZSwgYm9vbD4pKGNjID0+IGNjLkJvYXJkcy5Db250YWlucyhjaGlsZEJvYXJkKSkpKSArIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3Qgc3RyaW5nIFdyaXRlUHJvb2YoKTtcclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0QXJ0aWNsZSh0aGlzIHN0cmluZyBsZXR0ZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGxldHRlcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlhcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhblwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIllcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiWlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImFcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBMaXN0aWZ5PFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gc3RyaW5ncywgc3RyaW5nIGNvbm5lY3RvciA9IFwiYW5kXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGwgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxUPihzdHJpbmdzKTtcclxuICAgICAgICAgICAgaWYgKGxsLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgaWYgKGxsLkNvdW50ID09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGxbMF0uVG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb25uZWN0b3IgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbjxUPihcIiwgXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxUPihsbCxsbC5Db3VudCAtIDEpKSArIFwiIFwiICsgY29ubmVjdG9yICsgXCIgXCIgKyBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkxhc3Q8VD4obGwpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luPFQ+KFwiLCBcIiwgbGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgV29yZGlmeSh0aGlzIGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3dpdGNoIChuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZmlyc3RcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzZWNvbmRcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0aGlyZFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImZvdXJ0aFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImZpZnRoXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2l4dGhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzZXZlbnRoXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZWlnaHRoXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibmludGhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0ZW50aFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlbGV2ZW50aFwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKG4gKyAxKSArIFwiLXRoXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPFQ+IEV4Y2VwdDxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IGxpc3QsIFQgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxUPihsaXN0LG5ld1tdIHsgdCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IE1heEluZGV4PFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gbGlzdCwgRnVuYzxULCBpbnQ+IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1heEluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIHZhciBtYXggPSBpbnQuTWluVmFsdWU7XHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gbGlzdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZSh0KTtcclxuICAgICAgICAgICAgICAgIGlmICh2ID4gbWF4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4SW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1heEluZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxUPiBEaXN0aW5jdDxULCBTPih0aGlzIElFbnVtZXJhYmxlPFQ+IGxpc3QsIEZ1bmM8VCwgUz4gdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZGlzdGluY3QgPSBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBsaXN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PFQ+KGRpc3RpbmN0LChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGJvb2w+KSh0dCA9PiB2YWx1ZSh0dCkuRXF1YWxzKHZhbHVlKHQpKSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RpbmN0LkFkZCh0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRpc3RpbmN0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5BcmJpdHJhcnlNYXhEZWdyZWVcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9UZXgodGhpcyBTZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlciBtYXRjaGVyLCBMaXN0PExpc3Q8aW50Pj4gbGlzdHMsIGludCBsaXN0U2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaGVyLk5hbWUgPT0gXCIqXCIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCJcIiwgRW51bWVyYWJsZS5SZXBlYXQ8c3RyaW5nPihcIlxcXFx3aWxkXCIsIGxpc3RTaXplKSkgKyBcIiBcIjtcclxuXHJcbiAgICAgICAgICAgIGludCBpO1xyXG4gICAgICAgICAgICBpZiAoIWludC5UcnlQYXJzZShtYXRjaGVyLk5hbWUsIG91dCBpKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIj9cIjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbjxpbnQ+KFwiXCIsIGxpc3RzW2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldEFjdGl2ZUxpc3RJbmRleCh0aGlzIGludCBpLCBTdXBlclNsaW1Cb2FyZCBiLCBpbnQgbWF4UG90KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxsb25nPihiLlN0YWNrcy5WYWx1ZSxpICsgMSkuQ291bnQoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgYm9vbD4pKHNzID0+IHNzLlBvcHVsYXRpb25Db3VudCgpIDwgbWF4UG90KSkgLSAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5NYXhEZWdyZWVUaHJlZVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzdHJpbmcgQWxwaGFiZXQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvWFlaKHRoaXMgU3VwZXJTbGltQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCJcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KGJvYXJkLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KVRvWFlaKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBUbzAxMih0aGlzIFN1cGVyU2xpbUJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsaW50Pihib2FyZC5TdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50PilUbzAxMikuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoeCA9PiB4ID49IDApKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvQ29tcGFjdGVkUGFydGl0aW9uSWQodGhpcyBTdXBlclNsaW1Cb2FyZCBib2FyZCwgTGlzdDxMaXN0PGludD4+IHBhcnRpdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4eXogPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4oYm9hcmQuU3RhY2tzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIHN0cmluZz4pVG9YWVopLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICByZXR1cm4geHl6LlRvUGFydGl0aW9uSWQocGFydGl0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvUGFydGl0aW9uSWQodGhpcyBTdXBlclNsaW1Cb2FyZCBib2FyZCwgTGlzdDxMaXN0PGludD4+IHBhcnRpdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4eXogPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4oYm9hcmQuU3RhY2tzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIHN0cmluZz4pKHN0YWNrID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBzdGFjay5Ub1hZWigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzLkxlbmd0aCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIqXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgICAgICAgICB9KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geHl6LlRvUGFydGl0aW9uSWQocGFydGl0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvUGFydGl0aW9uSWQodGhpcyBMaXN0PHN0cmluZz4geHl6LCBMaXN0PExpc3Q8aW50Pj4gcGFydGl0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHBwID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4ocGFydGl0aW9uLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShwYXJ0ID0+IHBhcnQuTWluKCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwcC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbCA9IEFscGhhYmV0W2ldLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaiBpbiBwcFtpXSlcclxuICAgICAgICAgICAgICAgICAgICB4eXpbal0gPSBsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCJcIiwgeHl6KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvWFlaKHRoaXMgbG9uZyBzdGFjaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoc3RhY2spXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJYXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiWVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlpcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBUbzAxMih0aGlzIGxvbmcgc3RhY2spXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc3RhY2sgPiA2KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICByZXR1cm4gKChpbnQpc3RhY2sgLyAyKSAtIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRYWVpJbmRleCh0aGlzIGludCBpLCBTdXBlclNsaW1Cb2FyZCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxsb25nPihiLlN0YWNrcy5WYWx1ZSxpICsgMSkuQ291bnQoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgYm9vbD4pKHNzID0+IHNzLlBvcHVsYXRpb25Db3VudCgpID09IDIpKSAtIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1RleCh0aGlzIFNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyIG1hdGNoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG1hdGNoZXIuTmFtZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIipcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcXFxcd2lsZCBcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIwXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiWFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIjFcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJZXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiMlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlpcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIhMFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlxcXFxiYXJ7e1h9fVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIiExXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXFxcXGJhcnt7WX19XCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiITJcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcXFxcYmFye3tafX1cIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFwiP1wiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBQcm9vZkNhc2VcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltTWluZCBNaW5kIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFN1cGVyU2xpbUJvYXJkPiBCb2FyZHMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgQnJlYWtlcldpbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBDYXNlTnVtYmVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIFN1cGVyYWJ1bmRhbnQgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUHJvb2ZDYXNlKFN1cGVyU2xpbU1pbmQgbWluZCwgaW50IGNhc2VOdW1iZXIsIExpc3Q8U3VwZXJTbGltQm9hcmQ+IGJvYXJkcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNaW5kID0gbWluZDtcclxuICAgICAgICAgICAgQ2FzZU51bWJlciA9IGNhc2VOdW1iZXI7XHJcbiAgICAgICAgICAgIEJvYXJkcyA9IGJvYXJkcztcclxuICAgICAgICAgICAgaWYgKEJvYXJkcyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRCb2FyZChTdXBlclNsaW1Cb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJvYXJkcy5BZGQoYm9hcmQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzO1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3VwZXJTbGltQm9hcmRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGF6eTxsb25nW10+IFN0YWNrcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgdWxvbmdbXSBfdHJhY2U7XHJcbiAgICAgICAgcHVibGljIGludCBfbGVuZ3RoO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgX3N0YWNrQ291bnQ7XHJcbiAgICAgICAgaW50IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUdXBsZTxTdXBlclNsaW1Cb2FyZCwgQmlqZWN0aW9uPGludCwgVD4+IENyZWF0ZTxUPihMaXN0PExpc3Q8VD4+IGxpc3RzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHBvdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sVD4obGlzdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+PikobCA9PiBsKSkuRGlzdGluY3QoKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIG51bWJlcmluZyA9IEFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXMuQmlqZWN0aW9uRXh0ZW5zaW9ucy5OdW1iZXJPYmplY3RzPFQ+KHBvdCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW50TGlzdHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGxpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4obnVtYmVyaW5nLkFwcGx5KGwpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgdHJhY2UgPSBuZXcgdWxvbmdbcG90LkNvdW50XTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB0cmFjZVtpXSA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuSW5kaWNlc1doZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihpbnRMaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKGxsID0+IGxsLkNvbnRhaW5zKGkpKSkuVG9VSW50NjQoKTtcclxuXHJcbiAgICAgICAgICAgIHBvdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxULHVsb25nPihwb3QsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgdWxvbmc+KShjID0+IHRyYWNlW3BvdC5JbmRleE9mKGMpXSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBudW1iZXJpbmcgPSBBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzLkJpamVjdGlvbkV4dGVuc2lvbnMuTnVtYmVyT2JqZWN0czxUPihwb3QpO1xyXG5cclxuICAgICAgICAgICAgQXJyYXkuU29ydDx1bG9uZz4odHJhY2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR1cGxlPFN1cGVyU2xpbUJvYXJkLCBCaWplY3Rpb248aW50LCBUPj4obmV3IFN1cGVyU2xpbUJvYXJkKHRyYWNlLCBsaXN0cy5Db3VudCksIG51bWJlcmluZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFN1cGVyU2xpbUJvYXJkIEZyb21MaXN0cyhMaXN0PExpc3Q8aW50Pj4gbGlzdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcG90ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4obGlzdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKGwgPT4gbCkpLkRpc3RpbmN0KCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciB0cmFjZSA9IG5ldyB1bG9uZ1twb3QuQ291bnRdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3QuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHRyYWNlW2ldID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGxpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikobGwgPT4gbGwuQ29udGFpbnMoaSkpKS5Ub1VJbnQ2NCgpO1xyXG5cclxuICAgICAgICAgICAgQXJyYXkuU29ydDx1bG9uZz4odHJhY2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFN1cGVyU2xpbUJvYXJkKHRyYWNlLCBsaXN0cy5Db3VudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRvTGlzdFN0cmluZ0luTGV4T3JkZXIoaW50IG1heFBvdCA9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUGVybXV0YXRpb24gcHA7XHJcbiAgICAgICAgICAgIHJldHVybiBUb0xpc3RTdHJpbmdJbkxleE9yZGVyKG91dCBwcCwgbWF4UG90KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihvdXQgUGVybXV0YXRpb24gcHAsIGludCBtYXhQb3QgPSAtMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBCb2FyZExleGlmaWVyLlRvTGlzdFN0cmluZ0luTGV4T3JkZXIoU3RhY2tzLlZhbHVlLCBvdXQgcHAsIG1heFBvdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltQm9hcmQodWxvbmdbXSB0cmFjZSwgaW50IHN0YWNrQ291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdHJhY2UgPSB0cmFjZTtcclxuICAgICAgICAgICAgX2xlbmd0aCA9IF90cmFjZS5MZW5ndGg7XHJcbiAgICAgICAgICAgIF9zdGFja0NvdW50ID0gc3RhY2tDb3VudDtcclxuICAgICAgICAgICAgX2hhc2hDb2RlID0gSGFzaGluZy5IYXNoKF90cmFjZSwgX2xlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBNYWtlTGF6eVN0YWNrcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbUJvYXJkKHVsb25nW10gdHJhY2UsIGludCBpLCBpbnQgaiwgdWxvbmcgc3dhcCwgaW50IHN0YWNrQ291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdHJhY2UgPSBuZXcgdWxvbmdbdHJhY2UuTGVuZ3RoXTtcclxuICAgICAgICAgICAgX2xlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDwgdHJhY2UuTGVuZ3RoOyBrKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVsb25nIHYgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGsgPT0gaSB8fCBrID09IGopXHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IHRyYWNlW2tdIF4gc3dhcDtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB2ID0gdHJhY2Vba107XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHYgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBxID0gX2xlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocSA+IDAgJiYgX3RyYWNlW3EgLSAxXSA+IHYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHEtLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHEgPCBfbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5Db3B5KF90cmFjZSwgcSA8PCAzLCBfdHJhY2UsIChxICsgMSkgPDwgMywgKF9sZW5ndGggLSBxKSA8PCAzKTtcclxuICAgICAgICAgICAgICAgICAgICBfdHJhY2VbcV0gPSB2O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfbGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF9zdGFja0NvdW50ID0gc3RhY2tDb3VudDtcclxuICAgICAgICAgICAgTWFrZUxhenlTdGFja3MoKTtcclxuXHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IEhhc2hpbmcuSGFzaChfdHJhY2UsIF9sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFBlcm11dGF0aW9uIEdldFBlcm11dGF0aW9uKGludCBpLCBpbnQgaiwgdWxvbmcgc3dhcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8dWxvbmc+KF90cmFjZSk7XHJcblxyXG4gICAgICAgICAgICB0W2ldID0gdFtpXSBeIHN3YXA7XHJcbiAgICAgICAgICAgIHRbal0gPSB0W2pdIF4gc3dhcDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0W2ldID09IDApXHJcbiAgICAgICAgICAgICAgICB0W2ldID0gaW50Lk1heFZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodFtqXSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgdFtqXSA9IGludC5NYXhWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZXF1ZW5jZSA9IHQuWmlwKEVudW1lcmFibGUuUmFuZ2UoMCwgdC5Db3VudCksICh0ciwgaWkpID0+IG5ldyB7IFQgPSB0ciwgSSA9IGlpIH0pLk9yZGVyQnk8dWxvbmc+KHYgPT4gdi5UKS5TZWxlY3Q8aW50Pih2ID0+IHYuSSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcm11dGF0aW9uKHNlcXVlbmNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1Cb2FyZCBQZXJtdXRlKFBlcm11dGF0aW9uIHAsIExpc3Q8aW50PiBpbmRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRyYWNlID0gbmV3IHVsb25nW190cmFjZS5MZW5ndGhdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBlcm11dGVkSW5kaWNlcyA9IHAuQXBwbHk8aW50PihpbmRpY2VzKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfdHJhY2UuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuID0gX3RyYWNlW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIG0gPSBfdHJhY2VbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBpbmRpY2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbSAmPSB+KDFVTCA8PCBpbmRpY2VzW2pdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGluZGljZXMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKG4gJiAoMVVMIDw8IGluZGljZXNbal0pKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtIHw9ICgxVUwgPDwgcGVybXV0ZWRJbmRpY2VzW2pdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0cmFjZVtpXSA9IG07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFycmF5LlNvcnQ8dWxvbmc+KHRyYWNlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3VwZXJTbGltQm9hcmQodHJhY2UsIF9zdGFja0NvdW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgTWFrZUxhenlTdGFja3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU3RhY2tzID0gbmV3IExhenk8bG9uZ1tdPigoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IG5ldyBsb25nW19zdGFja0NvdW50XTtcclxuICAgICAgICAgICAgICAgIHZhciB0cmFjZUJpdHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDx1bG9uZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX3RyYWNlLChnbG9iYWw6OlN5c3RlbS5GdW5jPHVsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHQgPT4gdC5Ub1NldCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBjID0gMDsgYyA8IHRyYWNlQml0cy5Db3VudDsgYysrKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIHRyYWNlQml0c1tjXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgc1tpXSB8PSAxTCA8PCBjO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKG9iaiBhcyBTdXBlclNsaW1Cb2FyZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoU3VwZXJTbGltQm9hcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbCB8fCBfbGVuZ3RoICE9IG90aGVyLl9sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGlmIChfdHJhY2VbaV0gIT0gb3RoZXIuX3RyYWNlW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCJ8XCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihTdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgc3RyaW5nPikobCA9PiBzdHJpbmcuSm9pbjxpbnQ+KFwiXCIsIGwuVG9TZXQoKSkpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEJpdExldmVsR2VuZXJhdGlvbjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTdXBlclNsaW1Db2xvcmluZ0FuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgR3JhcGggX2xpbmVHcmFwaDtcclxuICAgICAgICBGdW5jPFN1cGVyU2xpbUJvYXJkLCBpbnQsIGxvbmc+IF9nZXRFZGdlQ29sb3JMaXN0O1xyXG5cclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltQ29sb3JpbmdBbmFseXplcihHcmFwaCBsaW5lR3JhcGgsIEZ1bmM8U3VwZXJTbGltQm9hcmQsIGludCwgbG9uZz4gZ2V0RWRnZUNvbG9yTGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9saW5lR3JhcGggPSBsaW5lR3JhcGg7XHJcbiAgICAgICAgICAgIF9nZXRFZGdlQ29sb3JMaXN0ID0gZ2V0RWRnZUNvbG9yTGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoU3VwZXJTbGltQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfbGluZUdyYXBoLklzQ2hvb3NhYmxlKEVudW1lcmFibGUuUmFuZ2UoMCwgX2xpbmVHcmFwaC5OKS5TZWxlY3Q8bG9uZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBsb25nPikoZSA9PiBfZ2V0RWRnZUNvbG9yTGlzdChiLCBlKSkpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbG9yYWJsZVdpdGhvdXRFZGdlKFN1cGVyU2xpbUJvYXJkIGIsIGludCBlZGdlSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2xpbmVHcmFwaC5Jc0Nob29zYWJsZShFbnVtZXJhYmxlLlJhbmdlKDAsIF9saW5lR3JhcGguTikuU2VsZWN0PGxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgbG9uZz4pKGUgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUgPT0gZWRnZUluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2dldEVkZ2VDb2xvckxpc3QoYiwgZSk7XHJcbiAgICAgICAgICAgIH0pKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShTdXBlclNsaW1Cb2FyZCBiLCBvdXQgRGljdGlvbmFyeTxpbnQsIGxvbmc+IGNvbG9yaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIElzQ2hvb3NhYmxlKEVudW1lcmFibGUuUmFuZ2UoMCwgX2xpbmVHcmFwaC5OKS5TZWxlY3Q8bG9uZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBsb25nPikoZSA9PiBfZ2V0RWRnZUNvbG9yTGlzdChiLCBlKSkpLlRvTGlzdCgpLCBvdXQgY29sb3JpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZVdpdGhvdXRFZGdlKFN1cGVyU2xpbUJvYXJkIGIsIG91dCBEaWN0aW9uYXJ5PGludCwgbG9uZz4gY29sb3JpbmcsIGludCBlZGdlSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSXNDaG9vc2FibGUoRW51bWVyYWJsZS5SYW5nZSgwLCBfbGluZUdyYXBoLk4pLlNlbGVjdDxsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGxvbmc+KShlID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlID09IGVkZ2VJbmRleClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9nZXRFZGdlQ29sb3JMaXN0KGIsIGUpO1xyXG4gICAgICAgICAgICB9KSkuVG9MaXN0KCksIG91dCBjb2xvcmluZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0Nob29zYWJsZShMaXN0PGxvbmc+IGFzc2lnbm1lbnQsIG91dCBEaWN0aW9uYXJ5PGludCwgbG9uZz4gY29sb3JpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb2xvcmluZyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgbG9uZz4oKTtcclxuICAgICAgICAgICAgcmV0dXJuIElzQ2hvb3NhYmxlKGFzc2lnbm1lbnQsIDAsIGNvbG9yaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9vbCBJc0Nob29zYWJsZShMaXN0PGxvbmc+IGFzc2lnbm1lbnQsIGludCB2LCBEaWN0aW9uYXJ5PGludCwgbG9uZz4gY29sb3JpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodiA+PSBfbGluZUdyYXBoLk4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JzID0gYXNzaWdubWVudFt2XTtcclxuICAgICAgICAgICAgd2hpbGUgKGNvbG9ycyAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBjb2xvcnMgJiAtY29sb3JzO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyBMaXN0PGxvbmc+KGFzc2lnbm1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG5laWdoYm9yIGluIF9saW5lR3JhcGguX2xhdGVyTmVpZ2hib3JzLlZhbHVlW3ZdKVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRDb3B5W25laWdoYm9yXSAmPSB+Y29sb3I7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKElzQ2hvb3NhYmxlKGFzc2lnbm1lbnRDb3B5LCB2ICsgMSwgY29sb3JpbmcpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yaW5nW3ZdID0gY29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29sb3JzIF49IGNvbG9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3VwZXJTbGltU3dhcEFuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGludCBMYXN0V2luQ2hpbGRDb3VudCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBib29sIFByb29mRmluZGluZ01vZGUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIGJvb2wgV2Vha2x5Rml4YWJsZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIERpY3Rpb25hcnk8U3VwZXJTbGltQm9hcmQsIEdhbWVUcmVlSW5mbz4gV2luVHJlZUluZm8geyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIERpY3Rpb25hcnk8U3VwZXJTbGltQm9hcmQsIEdhbWVUcmVlSW5mbz4gTG9zc1RyZWVJbmZvIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICB1bG9uZ1tdIF9maXhlclJlc3BvbnNlcztcclxuICAgICAgICBpbnQgX2ZpeGVyUmVzcG9uc2VDb3VudDtcclxuICAgICAgICBEaWN0aW9uYXJ5PHVsb25nLCBMaXN0PExpc3Q8dWxvbmc+Pj4gX2JyZWFrZXJDaG9pY2VzQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTx1bG9uZywgTGlzdDxMaXN0PHVsb25nPj4+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1Td2FwQW5hbHl6ZXIoaW50IG4sIGJvb2wgcHJvb2ZGaW5kaW5nTW9kZSA9IGZhbHNlLCBib29sIHdlYWtseUZpeGFibGUgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maXhlclJlc3BvbnNlcyA9IG5ldyB1bG9uZ1s4MTkyXTtcclxuICAgICAgICAgICAgUHJvb2ZGaW5kaW5nTW9kZSA9IHByb29mRmluZGluZ01vZGU7XHJcbiAgICAgICAgICAgIFdlYWtseUZpeGFibGUgPSB3ZWFrbHlGaXhhYmxlO1xyXG4gICAgICAgICAgICBpZiAoUHJvb2ZGaW5kaW5nTW9kZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgV2luVHJlZUluZm8gPSBuZXcgRGljdGlvbmFyeTxTdXBlclNsaW1Cb2FyZCwgR2FtZVRyZWVJbmZvPigpO1xyXG4gICAgICAgICAgICAgICAgTG9zc1RyZWVJbmZvID0gbmV3IERpY3Rpb25hcnk8U3VwZXJTbGltQm9hcmQsIEdhbWVUcmVlSW5mbz4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShTdXBlclNsaW1Cb2FyZCBib2FyZCwgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4gd29uQm9hcmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFByb29mRmluZGluZ01vZGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQW5hbHl6ZUZvclByb29mSW50ZXJuYWwoYm9hcmQsIHdvbkJvYXJkcyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQW5hbHl6ZUludGVybmFsKGJvYXJkLCB3b25Cb2FyZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgIFxyXG4gICAgICAgIGJvb2wgQW5hbHl6ZUludGVybmFsKFN1cGVyU2xpbUJvYXJkIGJvYXJkLCBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPiB3b25Cb2FyZHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJvYXJkLl9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgYm9hcmQuX2xlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gYm9hcmQuX3RyYWNlW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gYm9hcmQuX3RyYWNlW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzd2FwcGFibGUgPSB4IF4geTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBicmVha2VyQ2hvaWNlIGluIEdldEJyZWFrZXJDaG9pY2VzKHN3YXBwYWJsZSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBFeGlzdHMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdldEZpeGVyUmVzcG9uc2VzKGJyZWFrZXJDaG9pY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBrID0gMTsgayA8IF9maXhlclJlc3BvbnNlQ291bnQ7IGsrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFdlYWtseUZpeGFibGUgJiYgX2ZpeGVyUmVzcG9uc2VzW2tdLlBvcHVsYXRpb25Db3VudCgpID4gMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBTdXBlclNsaW1Cb2FyZChib2FyZC5fdHJhY2UsIGksIGosIF9maXhlclJlc3BvbnNlc1trXSwgYm9hcmQuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvbkJvYXJkcy5Db250YWlucyhjaGlsZEJvYXJkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd2lubmluZ1N3YXBFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBBbmFseXplRm9yUHJvb2ZJbnRlcm5hbChTdXBlclNsaW1Cb2FyZCBib2FyZCwgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4gd29uQm9hcmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHdpbkluZm8gPSBuZXcgR2FtZVRyZWVJbmZvKCk7XHJcbiAgICAgICAgICAgIFdpblRyZWVJbmZvW2JvYXJkXSA9IHdpbkluZm87XHJcblxyXG4gICAgICAgICAgICB2YXIgbG9zc0luZm8gPSBuZXcgR2FtZVRyZWVJbmZvKCk7XHJcbiAgICAgICAgICAgIExvc3NUcmVlSW5mb1tib2FyZF0gPSBsb3NzSW5mbztcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvclBhaXJzID0gbmV3IExpc3Q8VHVwbGU8aW50LCBpbnQ+PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJvYXJkLl9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGJvYXJkLl9sZW5ndGg7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBjb2xvclBhaXJzLkFkZChuZXcgVHVwbGU8aW50LCBpbnQ+KGksIGopKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjcCBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LGludD4oY29sb3JQYWlycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGludD4pKGNwID0+IChib2FyZC5fdHJhY2VbY3AuSXRlbTFdIF4gYm9hcmQuX3RyYWNlW2NwLkl0ZW0yXSkuUG9wdWxhdGlvbkNvdW50KCkpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSBjcC5JdGVtMTtcclxuICAgICAgICAgICAgICAgIHZhciBqID0gY3AuSXRlbTI7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBib2FyZC5fdHJhY2VbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IGJvYXJkLl90cmFjZVtqXTtcclxuICAgICAgICAgICAgICAgIHZhciBzd2FwcGFibGUgPSB4IF4geTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJyZWFrZXJDaG9pY2UgaW4gR2V0QnJlYWtlckNob2ljZXMoc3dhcHBhYmxlKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBFeGlzdHMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgR2V0Rml4ZXJSZXNwb25zZXMoYnJlYWtlckNob2ljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMSwgX2ZpeGVyUmVzcG9uc2VDb3VudCAtIDEpLlNlbGVjdDx1bG9uZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCB1bG9uZz4pKGsgPT4gX2ZpeGVyUmVzcG9uc2VzW2tdKSkuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPHVsb25nLCBpbnQ+KShmciA9PiBmci5Qb3B1bGF0aW9uQ291bnQoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciByZXNwb25zZSBpbiByZXNwb25zZXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoV2Vha2x5Rml4YWJsZSAmJiByZXNwb25zZS5Qb3B1bGF0aW9uQ291bnQoKSA+IDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IFN1cGVyU2xpbUJvYXJkKGJvYXJkLl90cmFjZSwgaSwgaiwgcmVzcG9uc2UsIGJvYXJkLl9zdGFja0NvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvbkJvYXJkcy5Db250YWlucyhjaGlsZEJvYXJkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luSW5mby5BZGQoYnJlYWtlckNob2ljZSwgaSwgaiwgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3NzSW5mby5BZGQoYnJlYWtlckNob2ljZSwgaSwgaiwgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbm5pbmdTd2FwRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luSW5mby5DbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIExhc3RXaW5DaGlsZENvdW50ID0gc3dhcHBhYmxlLlBvcHVsYXRpb25Db3VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEdldEZpeGVyUmVzcG9uc2VzKExpc3Q8dWxvbmc+IHBvc3NpYmxlTW92ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZml4ZXJSZXNwb25zZUNvdW50ID0gMSA8PCBwb3NzaWJsZU1vdmVzLkNvdW50O1xyXG4gICAgICAgICAgICB2YXIgdGFibGVMZW5ndGggPSBfZml4ZXJSZXNwb25zZXMuTGVuZ3RoO1xyXG4gICAgICAgICAgICB3aGlsZSAodGFibGVMZW5ndGggPD0gX2ZpeGVyUmVzcG9uc2VDb3VudClcclxuICAgICAgICAgICAgICAgIHRhYmxlTGVuZ3RoICo9IDI7XHJcbiAgICAgICAgICAgIGlmICh0YWJsZUxlbmd0aCA+IF9maXhlclJlc3BvbnNlcy5MZW5ndGgpXHJcbiAgICAgICAgICAgICAgICBfZml4ZXJSZXNwb25zZXMgPSBuZXcgdWxvbmdbdGFibGVMZW5ndGhdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHN1YnNldCA9IDE7XHJcbiAgICAgICAgICAgIHdoaWxlIChzdWJzZXQgPCBfZml4ZXJSZXNwb25zZUNvdW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSAwVUw7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IHN1YnNldDtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlIHw9IHBvc3NpYmxlTW92ZXNbSW50MzJVc2FnZS5HZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBfZml4ZXJSZXNwb25zZXNbc3Vic2V0XSA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgc3Vic2V0Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8TGlzdDx1bG9uZz4+IEdldEJyZWFrZXJDaG9pY2VzKHVsb25nIHN3YXBwYWJsZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8TGlzdDx1bG9uZz4+IGNob2ljZXM7XHJcbiAgICAgICAgICAgIGlmICghX2JyZWFrZXJDaG9pY2VzQ2FjaGUuVHJ5R2V0VmFsdWUoc3dhcHBhYmxlLCBvdXQgY2hvaWNlcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiaXRzID0gc3dhcHBhYmxlLkdldEJpdHMoKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0aXRpb25zID0gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5HZXRQYXJ0aXRpb25zKGJpdHMuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgY2hvaWNlcyA9IG5ldyBMaXN0PExpc3Q8dWxvbmc+PihwYXJ0aXRpb25zLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydGl0aW9uIGluIHBhcnRpdGlvbnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNob2ljZSA9IG5ldyBMaXN0PHVsb25nPihwYXJ0aXRpb24uQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNob2ljZXMuQWRkKGNob2ljZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0IGluIHBhcnRpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gMFVMO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBwYXJ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCB8PSBiaXRzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlLkFkZCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX2JyZWFrZXJDaG9pY2VzQ2FjaGVbc3dhcHBhYmxlXSA9IGNob2ljZXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaG9pY2VzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UZXh0LlJlZ3VsYXJFeHByZXNzaW9ucztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRlbXBsYXRlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBTaXplcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFRlbXBsYXRlKExpc3Q8aW50PiBzaXplcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFNpemVzID0gc2l6ZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGVtcGxhdGUoc3RyaW5nIHMsIEdyYXBoIGcpXHJcbiAgICAgICAgeyB9XHJcbiAgICAgICAgLy9wdWJsaWMgVGVtcGxhdGUoc3RyaW5nIHMsIEdyYXBoIGcpXHJcbiAgICAgICAgLy8gICAgOiB0aGlzKFJlZ2V4LlNwbGl0KHMgPz8gXCJcIiwgQFwiXFxXK1wiKS5TZWxlY3QoKHgsIHYpID0+XHJcbiAgICAgICAgLy8gICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgIHZhciB4eCA9IHguVG9Mb3dlcigpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgICAgIGlmICh4eC5TdGFydHNXaXRoKFwiZFwiKSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICByZXR1cm4gZy5EZWdyZWUodikgKyAoeC5MZW5ndGggPiAxID8geHguU3Vic3RyaW5nKDEpLlRyeVBhcnNlSW50KCkuVmFsdWUgOiAwKTtcclxuICAgICAgICAvLyAgICAgICAgICAgIGlmICh4eC5TdGFydHNXaXRoKFwicFwiKSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICByZXR1cm4gZy5EZWdyZWUodikgLSAoeC5MZW5ndGggPiAxID8geHguU3Vic3RyaW5nKDEpLlRyeVBhcnNlSW50KCkuVmFsdWUgOiAwKTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICByZXR1cm4geHguVHJ5UGFyc2VJbnQoKS5WYWx1ZTtcclxuICAgICAgICAvLyAgICAgICAgfSkuVG9MaXN0KCkpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3QgbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMobyBhcyBUZW1wbGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoVGVtcGxhdGUgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghdC5FeGlzdHMoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8aW50PihTaXplcyx0LlNpemVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGludCxpbnQ+KFNpemVzLFNpemVzLkNvdW50LCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludCwgaW50PikoKHQsIHMpID0+IDMxICogdCArIHMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luPGludD4oXCIsXCIsIFNpemVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW1wbGljaXQgb3BlcmF0b3IgVGVtcGxhdGUoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRlbXBsYXRlKHMsIG51bGwpO1xyXG4gICAgICAgICAgICAvL3JldHVybiBuZXcgVGVtcGxhdGUoUmVnZXguU3BsaXQocyA/PyBcIlwiLCBAXCJcXEQrXCIpLlNlbGVjdChNZXRhS25vd2xlZGdlLlRyeVBhcnNlSW50KS5XaGVyZSh4ID0+IHguSGFzVmFsdWUpLlNlbGVjdCh4ID0+IHguVmFsdWUpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVGVtcGxhdGVLbm93bGVkZ2VcclxuICAgIHtcclxuICAgICAgICBEaWN0aW9uYXJ5PGludCwgUG90S25vd2xlZGdlPiBfcG90TG9va3VwID0gbmV3IERpY3Rpb25hcnk8aW50LCBQb3RLbm93bGVkZ2U+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZW1wbGF0ZSBUZW1wbGF0ZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8Qm9hcmQ+IExvc3RCb2FyZHMgeyBnZXQgeyByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlBvdEtub3dsZWRnZSxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihfcG90TG9va3VwLlZhbHVlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5Qb3RLbm93bGVkZ2UsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4+KShwayA9PiBway5Mb3N0Qm9hcmRzKSkuRGlzdGluY3QoKTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQb3RLbm93bGVkZ2UgdGhpc1tpbnQgY29sb3JDb3VudF1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBQb3RLbm93bGVkZ2UgcDtcclxuICAgICAgICAgICAgICAgIGlmICghX3BvdExvb2t1cC5UcnlHZXRWYWx1ZShjb2xvckNvdW50LCBvdXQgcCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcCA9IG5ldyBQb3RLbm93bGVkZ2UoY29sb3JDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvdExvb2t1cFtjb2xvckNvdW50XSA9IHA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZW1wbGF0ZUtub3dsZWRnZShUZW1wbGF0ZSB0ZW1wbGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBQcm9tb3RlKGludCBjb2xvckNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpc1tjb2xvckNvdW50XS5Db3B5SW50byh0aGlzW2NvbG9yQ291bnQgKyAxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEtub3dsZWRnZUV4aXN0cyhpbnQgY29sb3JDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfcG90TG9va3VwLkNvbnRhaW5zS2V5KGNvbG9yQ291bnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTbG93Qm9hcmQgOiBJRW51bWVyYWJsZTxsb25nPlxyXG4gICAge1xyXG4jaWYgREVCVUdcclxuICAgICAgICBwdWJsaWMgTGlzdDxzdHJpbmc+IFN0YWNrU3RyaW5ncyB7IGdldCB7IHJldHVybiBTdGFja3MuU2VsZWN0KHMgPT4gcy5Ub1NldFN0cmluZygpKS5Ub0xpc3QoKTsgfSB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBQb3RTdHJpbmcgeyBnZXQgeyByZXR1cm4gUG90LlRvU2V0U3RyaW5nKCk7IH0gfVxyXG4jZW5kaWZcclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8bG9uZz4gU3RhY2tzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIGludCBfaGFzaENvZGU7XHJcbiAgICAgICAgTGlzdDxpbnQ+IFBvdFNldCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgTGlzdDxUdXBsZTxpbnQsIGludD4+IERlZ3JlZXMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIExpc3Q8aW50PiBEZWdyZWVDaGFuZ2VJbmRpY2VzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgVGVtcGxhdGUgVGVtcGxhdGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBsb25nIFBvdCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IENvbG9yQ291bnQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUdXJuIFR1cm4geyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBOIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBNb3ZlIExhc3RNb3ZlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBsb25nIHRoaXNbaW50IHhdIHsgZ2V0IHsgcmV0dXJuIFN0YWNrc1t4XTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTbG93Qm9hcmQoTGlzdDxsb25nPiBzdGFja3MsIGxvbmcgcG90KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU3RhY2tzID0gc3RhY2tzO1xyXG4gICAgICAgICAgICBQb3QgPSBwb3Q7XHJcbiAgICAgICAgICAgIFR1cm4gPSBUdXJuLkZpeGVyO1xyXG4gICAgICAgICAgICBOID0gU3RhY2tzLkNvdW50O1xyXG4gICAgICAgICAgICBUZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGludD4oU3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGludD4pKHMgPT4gcy5Qb3B1bGF0aW9uQ291bnQoKSkpLlRvTGlzdCgpKTtcclxuXHJcbiAgICAgICAgICAgIFBvdFNldCA9IFBvdC5Ub1NldCgpO1xyXG4gICAgICAgICAgICBDb2xvckNvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KFBvdFNldCk7XHJcbiAgICAgICAgICAgIERlZ3JlZXMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcbiAgICAgICAgICAgIERlZ3JlZUNoYW5nZUluZGljZXMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIENvbXB1dGVIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBDb21wdXRlSGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2hhc2hDb2RlID0gKGludCkoTik7XHJcbiAgICAgICAgICAgIFVwZGF0ZUhhc2gocmVmIF9oYXNoQ29kZSwgKGxvbmcpKFR1cm4pKTtcclxuXHJcbiAgICAgICAgICAgIERlZ3JlZXMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgRGVncmVlQ2hhbmdlSW5kaWNlcy5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgRGVncmVlcy5BZGRSYW5nZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+PihQb3RTZXQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4+KShjID0+IG5ldyBUdXBsZTxpbnQsIGludD4oYywgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxsb25nPihTdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgYm9vbD4pKHMgPT4gcy5Jc0JpdFNldChjKSkpKSkpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgYm9vbD4pKHggPT4geC5JdGVtMiA+IDApKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBpbnQ+KSh4ID0+IHguSXRlbTIpKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNEZWdyZWUgPSAtMTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBEZWdyZWVzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWdyZWUgPSBEZWdyZWVzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIFVwZGF0ZUhhc2gocmVmIF9oYXNoQ29kZSwgZGVncmVlLkl0ZW0yKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGVncmVlLkl0ZW0yICE9IHByZXZpb3VzRGVncmVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIERlZ3JlZUNoYW5nZUluZGljZXMuQWRkKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRGVncmVlID0gZGVncmVlLkl0ZW0yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBEZWdyZWVDaGFuZ2VJbmRpY2VzLkFkZChEZWdyZWVzLkNvdW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIFVwZGF0ZUhhc2gocmVmIGludCBoYXNoLCBsb25nIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaGFzaCA9IChpbnQpKDEwMCAqIGhhc2ggKyB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBNYWtlTW92ZShNb3ZlIG1vdmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMYXN0TW92ZSA9IG1vdmU7XHJcblxyXG4gICAgICAgICAgICBpZiAobW92ZS5TdGFjayA+PSAwKVxyXG4gICAgICAgICAgICAgICAgU3RhY2tzW21vdmUuU3RhY2tdID0gU3RhY2tzW21vdmUuU3RhY2tdLkZsaXBCaXRzKG1vdmUuQWRkZWQsIG1vdmUuUmVtb3ZlZCk7XHJcblxyXG4gICAgICAgICAgICBUdXJuID0gT3RoZXJUdXJuKFR1cm4pO1xyXG5cclxuICAgICAgICAgICAgQ29tcHV0ZUhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb01vdmVDb21iaW5hdGlvbihJRW51bWVyYWJsZTxNb3ZlPiBtb3ZlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBtb3ZlIGluIG1vdmVzKVxyXG4gICAgICAgICAgICAgICAgU3RhY2tzW21vdmUuU3RhY2tdID0gU3RhY2tzW21vdmUuU3RhY2tdLkZsaXBCaXRzKG1vdmUuQWRkZWQsIG1vdmUuUmVtb3ZlZCk7XHJcblxyXG4gICAgICAgICAgICBDb21wdXRlSGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTbG93Qm9hcmQgQ2xvbmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNsb25lID0gbmV3IFNsb3dCb2FyZChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxsb25nPihTdGFja3MpLCBQb3QpO1xyXG4gICAgICAgICAgICBjbG9uZS5UdXJuID0gVHVybjtcclxuICAgICAgICAgICAgY2xvbmUuTGFzdE1vdmUgPSBMYXN0TW92ZTtcclxuICAgICAgICAgICAgY2xvbmUuX2hhc2hDb2RlID0gX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICAgICAgY2xvbmUuQ29tcHV0ZUhhc2hDb2RlKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIFNsb3dCb2FyZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoU2xvd0JvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChUdXJuICE9IG90aGVyLlR1cm4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChOICE9IG90aGVyLk4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGxvbmc+KFN0YWNrcyxvdGhlci5TdGFja3MpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoVHVybiA9PSBGaXhlckJyZWFrZXIuVHVybi5GaXhlcilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoTGFzdE1vdmUuU3RhY2sgPT0gb3RoZXIuTGFzdE1vdmUuU3RhY2sgJiZcclxuICAgICAgICAgICAgICAgICAgIChMYXN0TW92ZS5BZGRlZCA9PSBvdGhlci5MYXN0TW92ZS5BZGRlZCAmJiBMYXN0TW92ZS5SZW1vdmVkID09IG90aGVyLkxhc3RNb3ZlLlJlbW92ZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICBMYXN0TW92ZS5BZGRlZCA9PSBvdGhlci5MYXN0TW92ZS5SZW1vdmVkICYmIExhc3RNb3ZlLlJlbW92ZWQgPT0gb3RoZXIuTGFzdE1vdmUuQWRkZWQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEZpbmRQZXJtdXRhdGlvbihvdGhlcikgIT0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gRmluZFBlcm11dGF0aW9uKFNsb3dCb2FyZCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LGludD4oRGVncmVlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGludD4pKHggPT4geC5JdGVtMikpLlNlcXVlbmNlRXF1YWwoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LGludD4ob3RoZXIuRGVncmVlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGludD4pKHggPT4geC5JdGVtMikpKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1hcHBpbmdQYWlycyA9IG5ldyBMaXN0PFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+Pj4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBEZWdyZWVDaGFuZ2VJbmRpY2VzLkNvdW50IC0gMTsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9tYWluID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvZG9tYWluID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBEZWdyZWVDaGFuZ2VJbmRpY2VzW2ldOyBqIDwgRGVncmVlQ2hhbmdlSW5kaWNlc1tpICsgMV07IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkb21haW4uQWRkKERlZ3JlZXNbal0uSXRlbTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvZG9tYWluLkFkZChvdGhlci5EZWdyZWVzW2pdLkl0ZW0xKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBtYXBwaW5nUGFpcnMuQWRkKG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4oZG9tYWluLCBjb2RvbWFpbikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PixnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LGdsb2JhbDo6U3lzdGVtLkxpbnEuRW51bWVyYWJsZUluc3RhbmNlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+PihtYXBwaW5nUGFpcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgZ2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4+KShtcCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbixnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihQZXJtdXRhdGlvbi5FbnVtZXJhdGVBbGwobXAuSXRlbTIuQ291bnQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikocCA9PiBuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KG1wLkl0ZW0xLCBwLkFwcGx5PGludD4obXAuSXRlbTIpKSkpKSlcclxuKVxyXG4sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PiwgZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4pKG1hcHBpbmcgPT4gRmxhdHRlbk1hcHBpbmcobWFwcGluZykpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLkZpcnN0T3JEZWZhdWx0KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGJvb2w+KShtYXBwaW5nID0+IFNlcXVlbmNlRXF1YWxQZXJtdXRlZChtYXBwaW5nLCBvdGhlcikpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBGbGF0dGVuTWFwcGluZyhJRW51bWVyYWJsZTxUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4+IG1hcHBpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PixpbnQ+KG1hcHBpbmcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PikoeCA9PiB4Lkl0ZW0xKSkuVG9MaXN0KCksIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LGludD4obWFwcGluZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KSh4ID0+IHguSXRlbTIpKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIFNlcXVlbmNlRXF1YWxQZXJtdXRlZChUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgU2xvd0JvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBTdGFja3MuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBlcm11dGVkU3RhY2sgPSBBcHBseU1hcHBpbmcobWFwcGluZywgU3RhY2tzW2ldKTtcclxuICAgICAgICAgICAgICAgIGlmIChwZXJtdXRlZFN0YWNrICE9IG90aGVyLlN0YWNrc1tpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChUdXJuID09IEZpeGVyQnJlYWtlci5UdXJuLkZpeGVyKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoTGFzdE1vdmUuU3RhY2sgIT0gb3RoZXIuTGFzdE1vdmUuU3RhY2spXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3VycyA9IG5ld1tdIHsgTGFzdE1vdmUuQWRkZWQsIExhc3RNb3ZlLlJlbW92ZWQgfTtcclxuICAgICAgICAgICAgdmFyIHRoZWlycyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vOSk9PntfbzkuQWRkKG90aGVyLkxhc3RNb3ZlLkFkZGVkKTtfbzkuQWRkKG90aGVyLkxhc3RNb3ZlLlJlbW92ZWQpO3JldHVybiBfbzk7fSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkVxdWFsPGludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihBcHBseU1hcHBpbmcobWFwcGluZywgb3VycykpLHRoZWlycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgbG9uZyBBcHBseU1hcHBpbmcoVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IG1hcHBpbmcsIGxvbmcgc3RhY2spXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQXBwbHlNYXBwaW5nKG1hcHBpbmcsIHN0YWNrLlRvU2V0KCkpLlRvSW50NjQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBBcHBseU1hcHBpbmcoVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IG1hcHBpbmcsIElFbnVtZXJhYmxlPGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHNldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGMgPT4gbWFwcGluZy5JdGVtMlttYXBwaW5nLkl0ZW0xLkluZGV4T2YoYyldKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBBcHBseUludmVyc2VNYXBwaW5nKFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBtYXBwaW5nLCBJRW51bWVyYWJsZTxpbnQ+IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihzZXQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShjID0+IG1hcHBpbmcuSXRlbTFbbWFwcGluZy5JdGVtMi5JbmRleE9mKGMpXSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXhhY3RseUVxdWFsKFNsb3dCb2FyZCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoVHVybiAhPSBvdGhlci5UdXJuKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoTiAhPSBvdGhlci5OKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoUG90ICE9IG90aGVyLlBvdClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8bG9uZz4oU3RhY2tzLG90aGVyLlN0YWNrcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChUdXJuID09IEZpeGVyQnJlYWtlci5UdXJuLkZpeGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChMYXN0TW92ZS5TdGFjayA9PSBvdGhlci5MYXN0TW92ZS5TdGFjayAmJlxyXG4gICAgICAgICAgICAgICAgICAgKExhc3RNb3ZlLkFkZGVkID09IG90aGVyLkxhc3RNb3ZlLkFkZGVkICYmIExhc3RNb3ZlLlJlbW92ZWQgPT0gb3RoZXIuTGFzdE1vdmUuUmVtb3ZlZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIExhc3RNb3ZlLkFkZGVkID09IG90aGVyLkxhc3RNb3ZlLlJlbW92ZWQgJiYgTGFzdE1vdmUuUmVtb3ZlZCA9PSBvdGhlci5MYXN0TW92ZS5BZGRlZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVHVybiBPdGhlclR1cm4oVHVybiB0dXJuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEgLSB0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhdG9yPGxvbmc+IEdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN0YWNrcy5HZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhYmxlLkdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwifFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4oU3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIHN0cmluZz4pKHggPT4geC5Ub1NldFN0cmluZ1NtYWxsKCkpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRvVGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4oU3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGludCwgc3RyaW5nPikoKHN0YWNrLCBpKSA9PiBcIiRMKHZfXCIgKyAoaSArIDEpICsgXCIpID0gXCIgKyBzdGFjay5Ub1NldFN0cmluZygpLlJlcGxhY2UoXCJ7XCIsIFwiXFxcXHtcIikuUmVwbGFjZShcIn1cIiwgXCJcXFxcfVwiKSArIFwiJFwiKSkuSm9pblByZXR0eShcIiwgXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucztcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgR2VuZXJpY0V4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2h1ZmZsZTxUPih0aGlzIElMaXN0PFQ+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcm5nID0gbmV3IFJhbmRvbShEYXRlVGltZS5Ob3cuTWlsbGlzZWNvbmQpO1xyXG4gICAgICAgICAgICBpbnQgbiA9IGxpc3QuQ291bnQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChuID4gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbi0tO1xyXG4gICAgICAgICAgICAgICAgaW50IGsgPSBybmcuTmV4dChuICsgMSk7XHJcbiAgICAgICAgICAgICAgICBUIHZhbHVlID0gbGlzdFtrXTtcclxuICAgICAgICAgICAgICAgIGxpc3Rba10gPSBsaXN0W25dO1xyXG4gICAgICAgICAgICAgICAgbGlzdFtuXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2h1ZmZsZUFsbCh0aGlzIElMaXN0PElMaXN0PiBsaXN0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBybmcgPSBuZXcgUmFuZG9tKERhdGVUaW1lLk5vdy5NaWxsaXNlY29uZCk7XHJcbiAgICAgICAgICAgIGludCBuID0gbGlzdHNbMF0uQ291bnQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChuID4gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbi0tO1xyXG4gICAgICAgICAgICAgICAgaW50IGsgPSBybmcuTmV4dChuICsgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGxpc3QgaW4gbGlzdHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbGlzdFtrXTtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0W2tdID0gbGlzdFtuXTtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0W25dID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBFbkxpc3Q8VD4odGhpcyBUIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PFQ+KCksKF9vMTApPT57X28xMC5BZGQodCk7cmV0dXJuIF9vMTA7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gSW5kaWNlc1doZXJlPFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gc291cmNlLCBGdW5jPFQsIGJvb2w+IGNvbmRpdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgdCBpbiBzb3VyY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24odCkpXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGk7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBGaXJzdEluZGV4PFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gc291cmNlLCBGdW5jPFQsIGJvb2w+IGNvbmRpdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gc291cmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKHQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgSm9pblByZXR0eSh0aGlzIElFbnVtZXJhYmxlPHN0cmluZz4gc291cmNlLCBzdHJpbmcgc2VwYXJhdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxzdHJpbmc+KHNvdXJjZSk7XHJcbiAgICAgICAgICAgIGlmIChjb3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgIGlmIChjb3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8c3RyaW5nPihzb3VyY2UpO1xyXG4gICAgICAgICAgICBpZiAoY291bnQgPT0gMilcclxuICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkVsZW1lbnRBdDxzdHJpbmc+KHNvdXJjZSwwKSArIFwiIGFuZCBcIiArIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRWxlbWVudEF0PHN0cmluZz4oc291cmNlLDEpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKHNlcGFyYXRvciwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPHN0cmluZz4oc291cmNlLGNvdW50IC0gMSkpICsgXCIgYW5kIFwiICsgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FbGVtZW50QXQ8c3RyaW5nPihzb3VyY2UsY291bnQgLSAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFJlbW92ZUFsbDxUPih0aGlzIExpc3Q8VD4gbGlzdCwgRnVuYzxULCBib29sPiBwcmVkaWNhdGUsIEFjdGlvbjxUPiBvblJlbW92ZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcmVtb3ZlZCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBsaXN0LkNvdW50IC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGUobGlzdFtpXSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVkKGxpc3RbaV0pO1xyXG4gICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3QuUmVtb3ZlQXQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVtb3ZlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdyYXBoXHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIFJhbmRvbSBSTkcgPSBuZXcgUmFuZG9tKERhdGVUaW1lLk5vdy5NaWxsaXNlY29uZCk7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIENhY2hlSGl0cztcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgTm9kZXNWaXNpdGVkO1xyXG5cclxuICAgICAgICBib29sWyxdIF9hZGphY2VudDtcclxuICAgICAgICBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX25laWdoYm9ycztcclxuICAgICAgICBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX2NvbXBsZW1lbnROZWlnaGJvcnM7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF9vdXROZWlnaGJvcnM7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF9pbk5laWdoYm9ycztcclxuICAgICAgICBwdWJsaWMgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF9sYXRlck5laWdoYm9ycztcclxuICAgICAgICBMaXN0PGludD4gX3ZlcnRpY2VzO1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfaW5kZXBlbmRlbnRTZXRzO1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfbWF4aW1hbEluZGVwZW5kZW50U2V0cztcclxuICAgICAgICBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX2luZGVwZW5kZW50VHdvU2V0cztcclxuICAgICAgICBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX2luZGVwZW5kZW50VGhyZWVTZXRzO1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfdmVydGV4U3Vic2V0cztcclxuICAgICAgICBMYXp5PGludD4gX2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgTiB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IEUgeyBnZXQgeyByZXR1cm4gX2UuVmFsdWU7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbFssXSBBZGphY2VudCB7IGdldCB7IHJldHVybiBfYWRqYWNlbnQ7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBib29sIHRoaXNbaW50IHgsIGludCB5XVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9hZGphY2VudFt4LCB5XTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2xbLF0gRGlyZWN0ZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDtcclxuICAgICAgICAgICAgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IFZlcnRleFdlaWdodCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBOZWlnaGJvcnMgeyBnZXQgeyByZXR1cm4gX25laWdoYm9ycy5WYWx1ZTsgfSB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBDb21wbGVtZW50TmVpZ2hib3JzIHsgZ2V0IHsgcmV0dXJuIF9jb21wbGVtZW50TmVpZ2hib3JzLlZhbHVlOyB9IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IE91dE5laWdoYm9ycyB7IGdldCB7IHJldHVybiBfb3V0TmVpZ2hib3JzLlZhbHVlOyB9IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IEluTmVpZ2hib3JzIHsgZ2V0IHsgcmV0dXJuIF9pbk5laWdoYm9ycy5WYWx1ZTsgfSB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBWZXJ0aWNlcyB7IGdldCB7IHJldHVybiBfdmVydGljZXM7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBMYXp5PGludFtdPiBEZWdyZWVTZXF1ZW5jZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGF6eTxpbnRbXT4gSW5EZWdyZWVTZXF1ZW5jZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGF6eTxpbnRbXT4gT3V0RGVncmVlU2VxdWVuY2UgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExhenk8aW50W10+IE5vZGVJbnZhcmlhbnRPbmUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExhenk8aW50W10+IE5vZGVJbnZhcmlhbnRUd28geyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgVHJhbnNpdGl2ZVBhcnRpdGlvbiBUcmFuc2l0aXZlUGFydGl0aW9uIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IEVkZ2VXZWlnaHRzV2l0aE11bHRpcGxpY2l0eSB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gSW5kZXBlbmRlbnRTZXRzIHsgZ2V0IHsgcmV0dXJuIF9pbmRlcGVuZGVudFNldHMuVmFsdWU7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gTWF4aW1hbEluZGVwZW5kZW50U2V0cyB7IGdldCB7IHJldHVybiBfbWF4aW1hbEluZGVwZW5kZW50U2V0cy5WYWx1ZTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBGcm9tT3V0TmVpZ2hib3JMaXN0cyhEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgTiA9IG91dE5laWdoYm9ycy5Db3VudDtcclxuXHJcbiAgICAgICAgICAgIHZhciBlZGdlV2VpZ2h0cyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3V0TmVpZ2hib3JzW2ldLkNvbnRhaW5zKGopKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlV2VpZ2h0cy5BZGQoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3V0TmVpZ2hib3JzW2pdLkNvbnRhaW5zKGkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlV2VpZ2h0cy5BZGQoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVdlaWdodHMuQWRkKDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKGVkZ2VXZWlnaHRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaChMaXN0PGludD4gZWRnZVdlaWdodHMsIExpc3Q8aW50PiB2ZXJ0ZXhXZWlnaHQgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTiA9IChpbnQpKCgxICsgTWF0aC5TcXJ0KDEgKyA4ICogZWRnZVdlaWdodHMuQ291bnQpKSAvIDIpO1xyXG4gICAgICAgICAgICBWZXJ0ZXhXZWlnaHQgPSB2ZXJ0ZXhXZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBfdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIE4pLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBfYWRqYWNlbnQgPSBuZXcgYm9vbFtOLCBOXTtcclxuICAgICAgICAgICAgRGlyZWN0ZWQgPSBuZXcgYm9vbFtOLCBOXTtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWRnZVdlaWdodHNba10gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hZGphY2VudFtpLCBqXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hZGphY2VudFtqLCBpXSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRnZVdlaWdodHNba10gPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlyZWN0ZWRbaSwgal0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRnZVdlaWdodHNba10gPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlyZWN0ZWRbaiwgaV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaChib29sWyxdIGFkamFjZW50LCBMaXN0PGludD4gdmVydGV4V2VpZ2h0ID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9hZGphY2VudCA9IGFkamFjZW50O1xyXG4gICAgICAgICAgICBOID0gX2FkamFjZW50LkdldFVwcGVyQm91bmQoMCkgKyAxO1xyXG4gICAgICAgICAgICBWZXJ0ZXhXZWlnaHQgPSB2ZXJ0ZXhXZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBfdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIE4pLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBEaXJlY3RlZCA9IG5ldyBib29sW04sIE5dO1xyXG5cclxuICAgICAgICAgICAgSW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBJbml0aWFsaXplKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9lID0gbmV3IExhenk8aW50PigoKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBlID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgU2V0dXBOZWlnaGJvcnMoKTtcclxuICAgICAgICAgICAgSW5pdGlhbGl6ZUxhenlMb2FkZXJzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIFNldHVwTmVpZ2hib3JzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9uZWlnaGJvcnMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5laWdoYm9ycyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzLkFkZChuZXcgTGlzdDxpbnQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9yc1tpXS5BZGQoaik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZWlnaGJvcnM7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIF9jb21wbGVtZW50TmVpZ2hib3JzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm4gPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBubi5BZGQobmV3IExpc3Q8aW50PigpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT0gaiAmJiAhX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm5baV0uQWRkKGopO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBubjtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBfb3V0TmVpZ2hib3JzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzLkFkZChuZXcgTGlzdDxpbnQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdICYmIERpcmVjdGVkW2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzW2ldLkFkZChqKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmVpZ2hib3JzO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIF9pbk5laWdoYm9ycyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5laWdoYm9ycyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIG5laWdoYm9ycy5BZGQobmV3IExpc3Q8aW50PigpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtpLCBqXSAmJiBEaXJlY3RlZFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9yc1tqXS5BZGQoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5laWdoYm9ycztcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBfbGF0ZXJOZWlnaGJvcnMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhdGVyID0gbmV3IExpc3Q8TGlzdDxpbnQ+PihOZWlnaGJvcnMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXRlci5BZGQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxpbnQ+KE5laWdoYm9yc1tpXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShuID0+IG4gPiBpKSkuVG9MaXN0KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGF0ZXI7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIFRyYW5zaXRpdmVQYXJ0aXRpb24gPSBuZXcgVHJhbnNpdGl2ZVBhcnRpdGlvbihfdmVydGljZXMpO1xyXG5cclxuICAgICAgICAgICAgRGVncmVlU2VxdWVuY2UgPSBuZXcgTGF6eTxpbnRbXT4oKCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG5ldyBpbnRbTl07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzW3ZdID0gRGVncmVlKHYpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgSW5EZWdyZWVTZXF1ZW5jZSA9IG5ldyBMYXp5PGludFtdPigoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IG5ldyBpbnRbTl07XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgc1t2XSA9IEluRGVncmVlKHYpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIE91dERlZ3JlZVNlcXVlbmNlID0gbmV3IExhenk8aW50W10+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICBzW3ZdID0gT3V0RGVncmVlKHYpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIE5vZGVJbnZhcmlhbnRPbmUgPSBuZXcgTGF6eTxpbnRbXT4oKCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG5ldyBpbnRbTl07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNbdl0gPSBEZWdyZWVTZXF1ZW5jZS5WYWx1ZVt2XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgazsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcFt2XSA9IChpbnQpKChzW3ZdIDw8IDEzIHwgc1t2XSA+PiAxOSkgXiAweGZmMDBmZjAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIE5laWdoYm9yc1t2XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcFt2XSArPSBzW3ddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzW3ZdID0gc3Bbdl07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgTm9kZUludmFyaWFudFR3byA9IG5ldyBMYXp5PGludFtdPigoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IG5ldyBpbnRbTl07XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc1t2XSA9IERlZ3JlZVNlcXVlbmNlLlZhbHVlW3ZdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBOZWlnaGJvcnNbdl0pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzW3ZdICs9IDMgKiBEZWdyZWVTZXF1ZW5jZS5WYWx1ZVt3XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB6IGluIE5laWdoYm9yc1t3XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHogIT0gdilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzW3ZdICs9IDcgKiBEZWdyZWVTZXF1ZW5jZS5WYWx1ZVt6XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZvaWQgSW5pdGlhbGl6ZUxhenlMb2FkZXJzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9pbmRlcGVuZGVudFNldHMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihJbmRlcGVuZGVudFNldHNJblN1YmdyYXBoKDApKSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIF9pbmRlcGVuZGVudFR3b1NldHMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF9pbmRlcGVuZGVudFNldHMuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzZXQgPT4gc2V0LkNvdW50ID09IDIpKS5Ub0xpc3QoKSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIF9pbmRlcGVuZGVudFRocmVlU2V0cyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX2luZGVwZW5kZW50U2V0cy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNldCA9PiBzZXQuQ291bnQgPT0gMykpLlRvTGlzdCgpLCB0cnVlKTtcclxuICAgICAgICAgICAgX3ZlcnRleFN1YnNldHMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+IExpc3RVdGlsaXR5LkdlbmVyYXRlU3VibGlzdHM8aW50PihfdmVydGljZXMpKTtcclxuICAgICAgICAgICAgX21heGltYWxJbmRlcGVuZGVudFNldHMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+IExpc3RVdGlsaXR5Lk1heGltYWxFbGVtZW50czxpbnQ+KF9pbmRlcGVuZGVudFNldHMuVmFsdWUpLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gRXF1YWxpdHkgYW5kIElzb21vcnBoaXNtXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCIgXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxzdHJpbmc+KEdldEVkZ2VXZWlnaHRzKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBzdHJpbmc+KSh4ID0+IHguVG9TdHJpbmcoKSkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVG9TdHJpbmcoKS5HZXRIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBIID0gb2JqIGFzIEdyYXBoO1xyXG4gICAgICAgICAgICBpZiAoSCA9PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoTiAhPSBILk4pIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKEUgIT0gSC5FKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdICE9IEhbaSwgal0pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yID09KEdyYXBoIEEsIEdyYXBoIEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKG9iamVjdClBID09IG51bGwgJiYgKG9iamVjdClCID09IG51bGwgfHxcclxuICAgICAgICAgICAgICAgICAgIChvYmplY3QpQSAhPSBudWxsICYmIChvYmplY3QpQiAhPSBudWxsICYmIEEuRXF1YWxzKEIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgIT0oR3JhcGggQSwgR3JhcGggQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAhKEEgPT0gQik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBQZXJtdXRlVmVydGljZXMoUGVybXV0YXRpb24gcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhZGphY2VudCA9IG5ldyBib29sW04sIE5dO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBhZGphY2VudFtwW2ldLCBwW2pdXSA9IF9hZGphY2VudFtpLCBqXTtcclxuXHJcbiAgICAgICAgICAgIExpc3Q8aW50PiB2ZXJ0ZXhXZWlnaHQgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoVmVydGV4V2VpZ2h0ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZlcnRleFdlaWdodCA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIHZhciBwcCA9IHAuSW52ZXJzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHQuQWRkKFZlcnRleFdlaWdodFtwcFt2XV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKGFkamFjZW50LCB2ZXJ0ZXhXZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgTWF5YmVJc29tb3JwaGljKEdyYXBoIEEsIEdyYXBoIEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQS5OICE9IEIuTikgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoQS5FICE9IEIuRSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgQS5UcmFuc2l0aXZlUGFydGl0aW9uLlJlZmluZShBLkRlZ3JlZVNlcXVlbmNlLlZhbHVlLCAxKTtcclxuICAgICAgICAgICAgQi5UcmFuc2l0aXZlUGFydGl0aW9uLlJlZmluZShCLkRlZ3JlZVNlcXVlbmNlLlZhbHVlLCAxKTtcclxuXHJcbiAgICAgICAgICAgIEEuVHJhbnNpdGl2ZVBhcnRpdGlvbi5SZWZpbmUoQS5Ob2RlSW52YXJpYW50T25lLlZhbHVlLCAyKTtcclxuICAgICAgICAgICAgQi5UcmFuc2l0aXZlUGFydGl0aW9uLlJlZmluZShCLk5vZGVJbnZhcmlhbnRPbmUuVmFsdWUsIDIpO1xyXG5cclxuICAgICAgICAgICAgQS5UcmFuc2l0aXZlUGFydGl0aW9uLlJlZmluZShBLk5vZGVJbnZhcmlhbnRUd28uVmFsdWUsIDMpO1xyXG4gICAgICAgICAgICBCLlRyYW5zaXRpdmVQYXJ0aXRpb24uUmVmaW5lKEIuTm9kZUludmFyaWFudFR3by5WYWx1ZSwgMyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIUEuVHJhbnNpdGl2ZVBhcnRpdGlvbi5FcXVhbHMoQi5UcmFuc2l0aXZlUGFydGl0aW9uKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNvbW9ycGhpYyhHcmFwaCBBLCBHcmFwaCBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFNYXliZUlzb21vcnBoaWMoQSwgQikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQS5Db250YWlucyhCLCBpbmR1Y2VkOiB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGNsYXNzIElzb21vcnBoaXNtQ29tcGFyZXIgOiBJRXF1YWxpdHlDb21wYXJlcjxHcmFwaD5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhHcmFwaCB4LCBHcmFwaCB5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gR3JhcGguSXNvbW9ycGhpYyh4LCB5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IEdldEhhc2hDb2RlKEdyYXBoIGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWlucyhHcmFwaCBBLCBib29sIGluZHVjZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29udGFpbnMoQSwgaW5kdWNlZCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGludCwgaW50LCBib29sPikoKF8sIF9fLCBfX18sIF9fX18pID0+IHRydWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKEdyYXBoIEEsIGJvb2wgaW5kdWNlZCwgRnVuYzxHcmFwaCwgR3JhcGgsIGludCwgaW50LCBib29sPiBjb25kaXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoTiA8IEEuTikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRhdSA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRhaW5zKEEsIGluZHVjZWQsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgZ2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBpbnQsIGludCwgYm9vbD4pY29uZGl0aW9uLCBuZXcgaW50W0EuTl0sIHRhdSwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIENvbnRhaW5zKEdyYXBoIEEsIGJvb2wgaW5kdWNlZCwgRnVuYzxHcmFwaCwgR3JhcGgsIGludCwgaW50LCBib29sPiBjb25kaXRpb24sIGludFtdIHRhdSwgTGlzdDxpbnQ+IHBsYWNlZCwgaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodiA9PSBBLk4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbWFnZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihwbGFjZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh1ID0+IHRhdVt1XSkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHQgPT4gdCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgcmVxdWlyZWROZWlnaGJvcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihBLk5laWdoYm9yc1t2XS5JbnRlcnNlY3Rpb25Tb3J0ZWQocGxhY2VkKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHUgPT4gdGF1W3VdKSkuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodCA9PiB0KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBjYW5kaWRhdGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8aW50PihWZXJ0aWNlcyxpbWFnZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodyA9PiBBLkRlZ3JlZSh2KSA8PSBEZWdyZWUodykpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHcgPT4gaW5kdWNlZCA/IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KHJlcXVpcmVkTmVpZ2hib3JzLEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb248aW50PihOZWlnaGJvcnNbd10saW1hZ2VzKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByZXF1aXJlZE5laWdoYm9ycy5TdWJzZXRFcXVhbFNvcnRlZChOZWlnaGJvcnNbd10pKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh3ID0+IGNvbmRpdGlvbih0aGlzLCBBLCB3LCB2KSkpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNhbmRpZGF0ZSBpbiBjYW5kaWRhdGVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0YXVbdl0gPSBjYW5kaWRhdGU7XHJcbiAgICAgICAgICAgICAgICBwbGFjZWQuQWRkKHYpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChDb250YWlucyhBLCBpbmR1Y2VkLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgaW50LCBpbnQsIGJvb2w+KWNvbmRpdGlvbiwgdGF1LCBwbGFjZWQsIHYgKyAxKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBwbGFjZWQuUmVtb3ZlQXQocGxhY2VkLkNvdW50IC0gMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zSW5kdWNlZChHcmFwaCBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRhaW5zKEEsIGluZHVjZWQ6IHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnNJbmR1Y2VkT2xkKEdyYXBoIEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoTiA8IEEuTikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZlcnRleFNldHMgPSBfdmVydGV4U3Vic2V0cy5WYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2ZXJ0aWNlcyBpbiB2ZXJ0ZXhTZXRzKVxyXG4gICAgICAgICAgICAgICAgaWYgKEdyYXBoLklzb21vcnBoaWMoSW5kdWNlZFN1YmdyYXBoKHZlcnRpY2VzKSwgQSkpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8TGlzdDxpbnQ+PiBFbnVtZXJhdGVDb25uZWN0ZWRPcmRlcmluZ3MoTGlzdDxpbnQ+IGluaXRpYWxWZXJ0aWNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8aW50PihWZXJ0aWNlcyxpbml0aWFsVmVydGljZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkb25lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoRGVncmVlSW5TdWJncmFwaCh2LCBpbml0aWFsVmVydGljZXMpID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmVydGljZXMuQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvcmRlcmluZyBpbiBFbnVtZXJhdGVDb25uZWN0ZWRPcmRlcmluZ3MoaW5pdGlhbFZlcnRpY2VzKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4ob3JkZXJpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxWZXJ0aWNlcy5SZW1vdmVBdChpbml0aWFsVmVydGljZXMuQ291bnQgLSAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGRvbmUpXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gaW5pdGlhbFZlcnRpY2VzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNTcGFubmluZ1N1YmdyYXBoT2YoR3JhcGggQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChOICE9IEEuTikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtpLCBqXSAmJiAhQVtpLCBqXSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBFeHBvcnRcclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IEdldEVkZ2VXZWlnaHRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFZGdlV2VpZ2h0cyhuZXcgaW50W10geyB9LCBuZXcgVHVwbGU8aW50LCBpbnQ+W10geyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBJbmR1Y2VkU3ViZ3JhcGgoTGlzdDxpbnQ+IHN1YmdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxpbnQ+IHZlcnRleFdlaWdodCA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChWZXJ0ZXhXZWlnaHQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0ID0gbmV3IExpc3Q8aW50PihzdWJncmFwaC5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBzdWJncmFwaClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHQuQWRkKFZlcnRleFdlaWdodFt2XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoR2V0RWRnZVdlaWdodHMoc3ViZ3JhcGgpLCB2ZXJ0ZXhXZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IEdldEVkZ2VXZWlnaHRzKExpc3Q8aW50PiBzdWJncmFwaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuID0gc3ViZ3JhcGguQ291bnQ7XHJcbiAgICAgICAgICAgIHZhciB3ID0gbmV3IExpc3Q8aW50PihuKTtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3LkFkZCgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtzdWJncmFwaFtpXSwgc3ViZ3JhcGhbal1dIHx8IF9hZGphY2VudFtzdWJncmFwaFtqXSwgc3ViZ3JhcGhbaV1dKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3W2tdID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gR2V0RWRnZVdlaWdodHMoYm9vbFssXSBhZGphY2VudCwgYm9vbFssXSBkaXJlY3RlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFZGdlV2VpZ2h0cyhhZGphY2VudCwgZGlyZWN0ZWQsIG5ldyBpbnRbXSB7IH0sIG5ldyBUdXBsZTxpbnQsIGludD5bXSB7IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxpbnQ+IEdldEVkZ2VXZWlnaHRzKElFbnVtZXJhYmxlPGludD4gcmVtb3ZlZFZlcnRpY2VzLCBJRW51bWVyYWJsZTxUdXBsZTxpbnQsIGludD4+IHJlbW92ZWRFZGdlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFZGdlV2VpZ2h0cyhfYWRqYWNlbnQsIERpcmVjdGVkLCByZW1vdmVkVmVydGljZXMsIHJlbW92ZWRFZGdlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PGludD4gR2V0RWRnZVdlaWdodHMoYm9vbFssXSBhZGphY2VudCwgYm9vbFssXSBkaXJlY3RlZCwgSUVudW1lcmFibGU8aW50PiByZW1vdmVkVmVydGljZXMsIElFbnVtZXJhYmxlPFR1cGxlPGludCwgaW50Pj4gcmVtb3ZlZEVkZ2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHcgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdy5BZGQoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8aW50PihyZW1vdmVkVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiB2ID09IGkgfHwgdiA9PSBqKSkgJiYgIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50Pj4ocmVtb3ZlZEVkZ2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgYm9vbD4pKGUgPT4gZS5JdGVtMSA9PSBpICYmIGUuSXRlbTIgPT0gaiB8fCBlLkl0ZW0xID09IGogJiYgZS5JdGVtMiA9PSBpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRqYWNlbnRbaSwgal0gfHwgYWRqYWNlbnRbaiwgaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdba10gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGVkW2osIGldKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdba10gPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBMaXN0PHN0cmluZz4gRG90Q29sb3JzID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PHN0cmluZz4oKSwoX28xMSk9PntfbzExLkFkZChcImNhZGV0Ymx1ZVwiKTtfbzExLkFkZChcImJyb3duXCIpO19vMTEuQWRkKFwiZG9kZ2VyYmx1ZVwiKTtfbzExLkFkZChcInR1cnF1b2lzZVwiKTtfbzExLkFkZChcIm9yY2hpZFwiKTtfbzExLkFkZChcImJsdWVcIik7X28xMS5BZGQoXCJyZWRcIik7X28xMS5BZGQoXCJncmVlblwiKTtfbzExLkFkZChcInllbGxvd1wiKTtfbzExLkFkZChcImN5YW5cIik7X28xMS5BZGQoXCJsaW1lZ3JlZW5cIik7X28xMS5BZGQoXCJwaW5rXCIpO19vMTEuQWRkKFwib3JhbmdlXCIpO19vMTEuQWRkKFwiZ29sZGVucm9kXCIpO19vMTEuQWRkKFwiYXF1YW1hcmluZVwiKTtfbzExLkFkZChcImJsYWNrXCIpO3JldHVybiBfbzExO30pO1xyXG5cclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgTGlzdDxzdHJpbmc+IFRpa3pDb2xvcnMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8c3RyaW5nPigpLChfbzEyKT0+e19vMTIuQWRkKFwiYmx1ZVwiKTtfbzEyLkFkZChcInJlZFwiKTtfbzEyLkFkZChcImdyZWVuXCIpO19vMTIuQWRkKFwiT3JjaGlkXCIpO19vMTIuQWRkKFwieWVsbG93XCIpO19vMTIuQWRkKFwiY3lhblwiKTtfbzEyLkFkZChcIlR1cnF1b2lzZVwiKTtfbzEyLkFkZChcIkNhZGV0Qmx1ZVwiKTtfbzEyLkFkZChcIkxpbWVHcmVlblwiKTtfbzEyLkFkZChcImJyb3duXCIpO19vMTIuQWRkKFwicGlua1wiKTtfbzEyLkFkZChcIm9yYW5nZVwiKTtfbzEyLkFkZChcIkNlcnVsZWFuXCIpO19vMTIuQWRkKFwiR29sZGVucm9kXCIpO19vMTIuQWRkKFwiQXF1YW1hcmluZVwiKTtfbzEyLkFkZChcImJsYWNrXCIpO3JldHVybiBfbzEyO30pO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRvRG90V2l0aEZhY3RvcnMoYm9vbCBsYWJlbEVkZ2VzID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZhY3RvcnMgPSBGYWN0b3IoKTtcclxuICAgICAgICAgICAgdmFyIGNvbG9yUmFuZ2VzID0gbmV3IExpc3Q8SUVudW1lcmFibGU8aW50Pj4oKTtcclxuICAgICAgICAgICAgaW50IGxhc3QgPSAwO1xyXG4gICAgICAgICAgICB2YXIgRyA9IEdyYXBocy5FbXB0eTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGZhY3RvciBpbiBmYWN0b3JzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb2xvclJhbmdlcy5BZGQoRW51bWVyYWJsZS5SYW5nZShsYXN0LCBmYWN0b3IuTikpO1xyXG4gICAgICAgICAgICAgICAgbGFzdCArPSBmYWN0b3IuTjtcclxuXHJcbiAgICAgICAgICAgICAgICBHICo9IGZhY3RvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcImdyYXBoIEcge1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIm92ZXJsYXAgPSBmYWxzZTtcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJzcGxpbmVzPXRydWU7XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwic2VwPTAuMztcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJub2RlW2ZvbnRzaXplPTIwLCBzdHlsZT1ib2xkLCBjb2xvcj1ibGFjazsgc2hhcGU9Y2lyY2xlLCBwZW53aWR0aD0xXTtcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJlZGdlW3N0eWxlPWJvbGQsIGNvbG9yPWJsYWNrLCBwZW53aWR0aD0yXTtcIik7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKGludCB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGNvbG9ySW5kZXggPSBjb2xvclJhbmdlcy5TZWxlY3QoKHIsIGkpID0+IG5ldyB7IHJhbmdlID0gciwgaW5kZXggPSBpIH0pLkZpcnN0KHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxpbnQ+KHAucmFuZ2UsdikpLmluZGV4ICUgRG90Q29sb3JzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gdi5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShzdHJpbmcuRm9ybWF0KEBcInswfSBbbGFiZWwgPSBcIlwiezJ9XCJcIiwgc3R5bGUgPSBmaWxsZWQsIGZpbGxjb2xvciA9IFwiXCJ7MX1cIlwiXTtcIiwgdiwgRG90Q29sb3JzW2NvbG9ySW5kZXhdLCBsYWJlbCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChHLl9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbEVkZ2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShzdHJpbmcuRm9ybWF0KEBcInswfSAtLSB7MX0gW2xhYmVsID0gXCJcInsyfVwiXCJdXCIsIGksIGosIGspKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShzdHJpbmcuRm9ybWF0KFwiezB9IC0tIHsxfVwiLCBpLCBqKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwifVwiKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzYi5Ub1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUb0RvdEZvclRpa3ooKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmYWN0b3JzID0gRmFjdG9yKCk7XHJcbiAgICAgICAgICAgIHZhciBjb2xvclJhbmdlcyA9IG5ldyBMaXN0PElFbnVtZXJhYmxlPGludD4+KCk7XHJcbiAgICAgICAgICAgIGludCBsYXN0ID0gMDtcclxuICAgICAgICAgICAgdmFyIEcgPSBHcmFwaHMuRW1wdHk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBmYWN0b3IgaW4gZmFjdG9ycylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29sb3JSYW5nZXMuQWRkKEVudW1lcmFibGUuUmFuZ2UobGFzdCwgZmFjdG9yLk4pKTtcclxuICAgICAgICAgICAgICAgIGxhc3QgKz0gZmFjdG9yLk47XHJcblxyXG4gICAgICAgICAgICAgICAgRyAqPSBmYWN0b3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJncmFwaCBHIHtcIik7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKGludCB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGNvbG9ySW5kZXggPSBjb2xvclJhbmdlcy5TZWxlY3QoKHIsIGkpID0+IG5ldyB7IHJhbmdlID0gciwgaW5kZXggPSBpIH0pLkZpcnN0KHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxpbnQ+KHAucmFuZ2UsdikpLmluZGV4ICUgVGlrekNvbG9ycy5Db3VudDtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoc3RyaW5nLkZvcm1hdChAXCJ7MH0gW2xhYmVsID0gXCJcIlwiXCIsIHN0eWxlID0gXCJcImRyYXcsIGNpcmNsZSwgZmlsbD17MX1cIlwiXTtcIiwgdiwgVGlrekNvbG9yc1tjb2xvckluZGV4XSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRy5fYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoc3RyaW5nLkZvcm1hdChcInswfSAtLSB7MX1cIiwgaSwgaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwifVwiKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzYi5Ub1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gT3BlcmF0aW9uc1xyXG4gICAgICAgIGJvb2wgSXNQcm9wZXJGYWN0b3IoTGlzdDxpbnQ+IHN1YnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzdWJzZXQuQ291bnQgPD0gMCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGlmIChzdWJzZXQuQ291bnQgPj0gTikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3QgPSBMaXN0VXRpbGl0eS5EaWZmZXJlbmNlPGludD4oX3ZlcnRpY2VzLCBzdWJzZXQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBhaXJzID0gZnJvbSBpIGluIHN1YnNldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tIGogaW4gcmVzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QgbmV3IFR1cGxlPGludCwgaW50PihpLCBqKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYWlyIGluIHBhaXJzKVxyXG4gICAgICAgICAgICAgICAgaWYgKCFfYWRqYWNlbnRbcGFpci5JdGVtMSwgcGFpci5JdGVtMl0pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8R3JhcGg+IEZhY3RvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVyRmFjdG9ycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF92ZXJ0ZXhTdWJzZXRzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikodmVydGljZXMgPT4gSXNQcm9wZXJGYWN0b3IodmVydGljZXMpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBtYXhpbWFsRmFjdG9yID0gTGlzdFV0aWxpdHkuTWF4aW1hbEVsZW1lbnRzPGludD4ocHJvcGVyRmFjdG9ycylbMF07XHJcbiAgICAgICAgICAgIGlmIChtYXhpbWFsRmFjdG9yLkNvdW50IDw9IDApIHJldHVybiBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8R3JhcGg+KCksKF9vMTMpPT57X28xMy5BZGQoQ2xvbmUoKSk7cmV0dXJuIF9vMTM7fSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzdCA9IExpc3RVdGlsaXR5LkRpZmZlcmVuY2U8aW50PihfdmVydGljZXMsIG1heGltYWxGYWN0b3IpO1xyXG4gICAgICAgICAgICB2YXIgbWF4RmFjdG9yID0gSW5kdWNlZFN1YmdyYXBoKG1heGltYWxGYWN0b3IpO1xyXG4gICAgICAgICAgICB2YXIgcmVzdEdyYXBoID0gSW5kdWNlZFN1YmdyYXBoKHJlc3QpO1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoPihtYXhGYWN0b3IuRmFjdG9yKCkscmVzdEdyYXBoLkZhY3RvcigpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIENsb25lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoR2V0RWRnZVdlaWdodHMoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBDb21wbGVtZW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhZGphY2VudCA9IG5ldyBib29sW04sIE5dO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09IGopIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkamFjZW50W2ksIGpdID0gIV9hZGphY2VudFtpLCBqXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoYWRqYWNlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggUmVtb3ZlVmVydGV4KGludCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHN1YmdyYXBoID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihWZXJ0aWNlcyk7XHJcbiAgICAgICAgICAgIHN1YmdyYXBoLlJlbW92ZSh2KTtcclxuICAgICAgICAgICAgcmV0dXJuIEluZHVjZWRTdWJncmFwaChzdWJncmFwaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBSZW1vdmVFZGdlKFR1cGxlPGludCwgaW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChHZXRFZGdlV2VpZ2h0cyhuZXcgaW50W10geyB9LCBuZXcgVHVwbGU8aW50LCBpbnQ+W10geyBlIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIFJlbW92ZUVkZ2UoaW50IHYxLCBpbnQgdjIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVtb3ZlRWRnZShuZXcgVHVwbGU8aW50LCBpbnQ+KHYxLCB2MikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggQWRkRWRnZShpbnQgdjEsIGludCB2MiwgYm9vbCBkaXJlY3RlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gQ2xvbmUoKTtcclxuICAgICAgICAgICAgZy5fYWRqYWNlbnRbdjEsIHYyXSA9IGcuX2FkamFjZW50W3YyLCB2MV0gPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoZGlyZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICBnLkRpcmVjdGVkW3YxLCB2Ml0gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChnLkdldEVkZ2VXZWlnaHRzKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBUdXBsZTxpbnQsIGludD4gR2V0QXJiaXRyYXJ5RWRnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFR1cGxlPGludCwgaW50PihpLCBqKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBMaXN0PFR1cGxlPGludCwgaW50Pj4gR2V0RWRnZVR1cGxlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdHVwbGVzID0gbmV3IExpc3Q8VHVwbGU8aW50LCBpbnQ+PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEaXJlY3RlZFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR1cGxlcy5BZGQobmV3IFR1cGxlPGludCwgaW50PihpLCBqKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR1cGxlcy5BZGQobmV3IFR1cGxlPGludCwgaW50PihqLCBpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHR1cGxlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIERpc2pvaW50VW5pb24oR3JhcGggSClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBuID0gTiArIEguTjtcclxuXHJcbiAgICAgICAgICAgIHZhciBhZGphY2VudCA9IG5ldyBib29sW24sIG5dO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGFkamFjZW50W2ksIGpdID0gX2FkamFjZW50W2ksIGpdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBILk47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgSC5OOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbTiArIGksIE4gKyBqXSA9IEhbaSwgal07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKGFkamFjZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEpvaW4oR3JhcGggSClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBHID0gRGlzam9pbnRVbmlvbihIKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBILk47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBHLl9hZGphY2VudFtpLCBOICsgal0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIEcuX2FkamFjZW50W04gKyBqLCBpXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBHLkluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIEc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBBZGRFZGdlKGludCB4LCBpbnQgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBHID0gQ2xvbmUoKTtcclxuICAgICAgICAgICAgRy5fYWRqYWNlbnRbeCwgeV0gPSB0cnVlO1xyXG4gICAgICAgICAgICBHLl9hZGphY2VudFt5LCB4XSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBHLkluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIEc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBBdHRhY2hOZXdWZXJ0ZXgocGFyYW1zIGludFtdIG5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBdHRhY2hOZXdWZXJ0ZXgoKElMaXN0PGludD4pbmVpZ2hib3JzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEF0dGFjaE5ld1ZlcnRleChJTGlzdDxpbnQ+IG5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhZGphY2VudCA9IG5ldyBib29sW04gKyAxLCBOICsgMV07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGFkamFjZW50W2ksIGpdID0gX2FkamFjZW50W2ksIGpdO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG5laWdoYm9yIGluIG5laWdoYm9ycylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYWRqYWNlbnRbTiwgbmVpZ2hib3JdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGFkamFjZW50W25laWdoYm9yLCBOXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoYWRqYWNlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIG9wZXJhdG9yICsoR3JhcGggQSwgR3JhcGggQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBLkRpc2pvaW50VW5pb24oQik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggb3BlcmF0b3IgKihHcmFwaCBBLCBHcmFwaCBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuSm9pbihCKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBvcGVyYXRvciAqKGludCBrLCBHcmFwaCBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIEcgPSBBLkNsb25lKCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgazsgaSsrKVxyXG4gICAgICAgICAgICAgICAgRyArPSBBO1xyXG5cclxuICAgICAgICAgICAgRy5Jbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBHO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoIFNxdWFyZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IENsb25lKCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIFZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFpciBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxpbnQ+KE5laWdoYm9yc1t2XSxOZWlnaGJvcnNbdl0pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWlyLkl0ZW0xICE9IHBhaXIuSXRlbTIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGcuX2FkamFjZW50W3BhaXIuSXRlbTEsIHBhaXIuSXRlbTJdID0gZy5fYWRqYWNlbnRbcGFpci5JdGVtMiwgcGFpci5JdGVtMV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZy5DbG9uZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gRWRnZXNcclxuICAgICAgICBwdWJsaWMgaW50IFNpemVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB0ICs9IE91dERlZ3JlZShpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IE1heERlZ3JlZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBtYXggPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5NYXgobWF4LCBEZWdyZWUoaSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBNaW5EZWdyZWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgbWluID0gaW50Lk1heFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbWluID0gTWF0aC5NaW4obWluLCBEZWdyZWUoaSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBtaW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBNYXhPdXREZWdyZWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgbWF4ID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IE1hdGguTWF4KG1heCwgT3V0RGVncmVlKGkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWF4SW5EZWdyZWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgbWF4ID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IE1hdGguTWF4KG1heCwgSW5EZWdyZWUoaSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzUmVndWxhcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoTiA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KE5laWdoYm9ycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKG4gPT4gbi5Db3VudCA9PSBOZWlnaGJvcnNbMF0uQ291bnQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVncmVlKGludCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5laWdoYm9yc1t2XS5Db3VudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBPdXREZWdyZWUoaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gT3V0TmVpZ2hib3JzW3ZdLkNvdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IEluRGVncmVlKGludCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEluTmVpZ2hib3JzW3ZdLkNvdW50OyAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IERlZ3JlZUluU3ViZ3JhcGgoaW50IHYsIExpc3Q8aW50PiBzdWJncmFwaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudFNvcnRlZChOZWlnaGJvcnNbdl0sIHN1YmdyYXBoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gTmVpZ2hib3JzSW5TdWJncmFwaChpbnQgdiwgTGlzdDxpbnQ+IHN1YmdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5LkludGVyc2VjdGlvblNvcnRlZChOZWlnaGJvcnNbdl0sIHN1YmdyYXBoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgU3VtT3ZlclN1YmdyYXBoTmVpZ2hib3JzKGludCB2LCBMaXN0PGludD4gc3ViZ3JhcGgsIGludFtdIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TdW08aW50PihMaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Tb3J0ZWQoTmVpZ2hib3JzW3ZdLCBzdWJncmFwaCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh3ID0+IGdbd10pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBGdW5jPGludCwgaW50PiBHZXREZWdyZWVNaW51c0tGdW5jKGludCBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHYgPT4gRGVncmVlKHYpIC0gaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRWRnZXNPbihMaXN0PGludD4gQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBlZGdlcyA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgQS5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgQS5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbQVtpXSwgQVtqXV0pIGVkZ2VzKys7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZWRnZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IEVkZ2VJbmRpY2VzT24oTGlzdDxpbnQ+IEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZWRnZUluZGljZXMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBLkNvbnRhaW5zKGkpICYmIEEuQ29udGFpbnMoaikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGdlSW5kaWNlcy5BZGQoayk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZWRnZUluZGljZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgRWRnZXNCZXR3ZWVuKExpc3Q8aW50PiBBLCBMaXN0PGludD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbnRlcnNlY3Rpb24gPSBMaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb248aW50PihBLCBCKTtcclxuICAgICAgICAgICAgQSA9IExpc3RVdGlsaXR5LkRpZmZlcmVuY2U8aW50PihBLCBCKTtcclxuXHJcbiAgICAgICAgICAgIGludCBlZGdlcyA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgQS5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBCLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtBW2ldLCBCW2pdXSkgZWRnZXMrKztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlZGdlcyArIEVkZ2VzT24oaW50ZXJzZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIEluZGVwZW5kZW50IHNldHNcclxuICAgICBcclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PGludD4+IEluZGVwZW5kZW50U2V0c0luU3ViZ3JhcGgoaW50IGZpcnN0VmVydGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGZpcnN0VmVydGV4ID49IE4pIHJldHVybiBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8TGlzdDxpbnQ+PigpLChfbzE0KT0+e19vMTQuQWRkKG5ldyBMaXN0PGludD4oKSk7cmV0dXJuIF9vMTQ7fSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3ViZ3JhcGhTZXRzID0gSW5kZXBlbmRlbnRTZXRzSW5TdWJncmFwaChmaXJzdFZlcnRleCArIDEpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVW5pb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHN1YmdyYXBoU2V0cyxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihzdWJncmFwaFNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzZXQgPT4gSXNJbmRlcGVuZGVudE9mKGZpcnN0VmVydGV4LCBzZXQpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHNldCA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaWdnZXIgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzE1KT0+e19vMTUuQWRkKGZpcnN0VmVydGV4KTtyZXR1cm4gX28xNTt9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaWdnZXIuQWRkUmFuZ2Uoc2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmlnZ2VyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9vbCBJc0luZGVwZW5kZW50T2YoaW50IHYsIExpc3Q8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBzZXQpIGlmICh3ID09IHYgfHwgX2FkamFjZW50W3csIHZdKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNDbGlxdWUoTGlzdDxpbnQ+IHN1YnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3Vic2V0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBzdWJzZXQuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV9hZGphY2VudFtzdWJzZXRbaV0sIHN1YnNldFtqXV0pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0luZGVwZW5kZW50KExpc3Q8aW50PiBzdWJzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN1YnNldC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgc3Vic2V0LkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtzdWJzZXRbaV0sIHN1YnNldFtqXV0pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0NvbXBsZXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJc0NsaXF1ZShfdmVydGljZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0NsaXF1ZU51bWJlckF0TGVhc3QoaW50IGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoayA+IF92ZXJ0aWNlcy5Db3VudClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNldCBpbiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KF92ZXJ0aWNlcywgaykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChJc0NsaXF1ZShzZXQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEluZGVwZW5kZW5jZU51bWJlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSW5kZXBlbmRlbmNlTnVtYmVyKFZlcnRpY2VzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBJbmRlcGVuZGVuY2VOdW1iZXIoSUVudW1lcmFibGU8aW50PiBzdWJncmFwaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX2luZGVwZW5kZW50U2V0cy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoSSA9PiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uQ291bnQ8aW50PihJLHN1YmdyYXBoKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IE1heGltdW1JbmRlcGVuZGVudFN1YnNldChJRW51bWVyYWJsZTxpbnQ+IHN1YmdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSBJbmRlcGVuZGVuY2VOdW1iZXIoc3ViZ3JhcGgpO1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX2luZGVwZW5kZW50U2V0cy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKEkgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbkNvdW50PGludD4oSSxzdWJncmFwaCkgPT0gaSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPExpc3Q8aW50Pj4gRW51bWVyYXRlTWF4aW1hbEluZGVwZW5kZW50U2V0cyhMaXN0PGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZUJyb25LZXJib3NjaChzZXQsIG5ldyBMaXN0PGludD4oKSwgbmV3IExpc3Q8aW50PigpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxMaXN0PGludD4+IEVudW1lcmF0ZU1heGltYWxJbmRlcGVuZGVudFNldHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZUJyb25LZXJib3NjaChWZXJ0aWNlcywgbmV3IExpc3Q8aW50PigpLCBuZXcgTGlzdDxpbnQ+KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxpbnQ+PiBFbnVtZXJhdGVCcm9uS2VyYm9zY2goTGlzdDxpbnQ+IFAsIExpc3Q8aW50PiBSLCBMaXN0PGludD4gWClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQLkNvdW50ID09IDAgJiYgWC5Db3VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oUik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIFBDID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihQKTtcclxuICAgICAgICAgICAgICAgIHZhciBYQyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oWCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHUgPSBUb21pdGFQaXZvdChQLCBYKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGludD4oUCxDb21wbGVtZW50TmVpZ2hib3JzW3VdKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBSLkFkZCh2KTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIEVudW1lcmF0ZUJyb25LZXJib3NjaChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uPGludD4oUEMsQ29tcGxlbWVudE5laWdoYm9yc1t2XSksIFIsIEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb248aW50PihYQyxDb21wbGVtZW50TmVpZ2hib3JzW3ZdKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFIuUmVtb3ZlKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBDLlJlbW92ZSh2KTtcclxuICAgICAgICAgICAgICAgICAgICBYQy5BZGQodik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBUb21pdGFQaXZvdChMaXN0PGludD4gUCwgTGlzdDxpbnQ+IFgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWF4ID0gLTE7XHJcbiAgICAgICAgICAgIHZhciBiZXN0ID0gLTE7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB1IGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PGludD4oUCxYKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG4gPSBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uQ291bnQ8aW50PihDb21wbGVtZW50TmVpZ2hib3JzW3VdLFApO1xyXG4gICAgICAgICAgICAgICAgaWYgKG4gPiBtYXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gbjtcclxuICAgICAgICAgICAgICAgICAgICBiZXN0ID0gdTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJlc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IEZpbmRDaGlDb2xvcmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBLID0gMDsgSyA8IGludC5NYXhWYWx1ZTsgSysrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IEZpbmRLQ29sb3JpbmcoVmVydGljZXMsIEspO1xyXG4gICAgICAgICAgICAgICAgaWYgKGMgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IEZpbmRLQ29sb3JpbmcoTGlzdDxpbnQ+IHN1YmdyYXBoLCBpbnQgSylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzdWJncmFwaC5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgaWYgKEsgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIEkgaW4gRW51bWVyYXRlTWF4aW1hbEluZGVwZW5kZW50U2V0cyhzdWJncmFwaCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gRmluZEtDb2xvcmluZyhBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRGlmZmVyZW5jZTxpbnQ+KHN1YmdyYXBoLEkpLCBLIC0gMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGMuSW5zZXJ0KDAsIEkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBMaXN0IGNvbG9yaW5nXHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWF4Q29sb3JhYmxlU3Vic2V0KExpc3Q8bG9uZz4gYXNzaWdubWVudCwgTGlzdDxpbnQ+IHN1YnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXhDb2xvcmFibGVTdWJzZXQoYXNzaWdubWVudCwgMCwgc3Vic2V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBNYXhDb2xvcmFibGVTdWJzZXQoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBpbnQgdiwgTGlzdDxpbnQ+IHN1YnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2ID49IHN1YnNldC5Db3VudClcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1heCA9IE1heENvbG9yYWJsZVN1YnNldChhc3NpZ25tZW50LCB2ICsgMSwgc3Vic2V0KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvcnMgPSBhc3NpZ25tZW50W3N1YnNldFt2XV07XHJcbiAgICAgICAgICAgIHdoaWxlIChjb2xvcnMgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gY29sb3JzICYgLWNvbG9ycztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgTGlzdDxsb25nPihhc3NpZ25tZW50KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuZWlnaGJvciBpbiBfbGF0ZXJOZWlnaGJvcnMuVmFsdWVbc3Vic2V0W3ZdXSlcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50Q29weVtuZWlnaGJvcl0gJj0gfmNvbG9yO1xyXG5cclxuICAgICAgICAgICAgICAgIG1heCA9IE1hdGguTWF4KG1heCwgMSArIE1heENvbG9yYWJsZVN1YnNldChhc3NpZ25tZW50Q29weSwgdiArIDEsIHN1YnNldCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1heCA+PSBzdWJzZXQuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY29sb3JzIF49IGNvbG9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWF4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBHcmVlZHlDb2xvcihMaXN0PGxvbmc+IGFzc2lnbm1lbnQsIExpc3Q8aW50PiBzdWJzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY29sb3JpbmcgPSBuZXcgbG9uZ1tOXTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gc3Vic2V0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9zdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGludCxsb25nPihOZWlnaGJvcnNbdl0sMEwsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGludCwgbG9uZz4pKChsLCB4KSA9PiBsIHwgY29sb3JpbmdbeF0pKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xvcnMgPSBhc3NpZ25tZW50W3ZdICYgfmxvc3Q7XHJcbiAgICAgICAgICAgICAgICBjb2xvcmluZ1t2XSA9IGNvbG9ycyAmIC1jb2xvcnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGxvbmc+KGNvbG9yaW5nLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGJvb2w+KShjID0+IGMgIT0gMCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNDaG9vc2FibGUoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIElzQ2hvb3NhYmxlKGFzc2lnbm1lbnQsIDAsIHN1YnNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJvb2wgSXNDaG9vc2FibGUoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBpbnQgdiwgTGlzdDxpbnQ+IHN1YnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2ID49IHN1YnNldC5Db3VudClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9ycyA9IGFzc2lnbm1lbnRbc3Vic2V0W3ZdXTtcclxuICAgICAgICAgICAgd2hpbGUgKGNvbG9ycyAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBjb2xvcnMgJiAtY29sb3JzO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyBMaXN0PGxvbmc+KGFzc2lnbm1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG5laWdoYm9yIGluIF9sYXRlck5laWdoYm9ycy5WYWx1ZVtzdWJzZXRbdl1dKVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRDb3B5W25laWdoYm9yXSAmPSB+Y29sb3I7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKElzQ2hvb3NhYmxlKGFzc2lnbm1lbnRDb3B5LCB2ICsgMSwgc3Vic2V0KSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb2xvcnMgXj0gY29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNDaG9vc2FibGUoTGlzdDxsb25nPiBhc3NpZ25tZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIElzQ2hvb3NhYmxlKGFzc2lnbm1lbnQsIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBib29sIElzQ2hvb3NhYmxlKExpc3Q8bG9uZz4gYXNzaWdubWVudCwgaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodiA+PSBOKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JzID0gYXNzaWdubWVudFt2XTtcclxuICAgICAgICAgICAgd2hpbGUgKGNvbG9ycyAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBjb2xvcnMgJiAtY29sb3JzO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyBMaXN0PGxvbmc+KGFzc2lnbm1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG5laWdoYm9yIGluIF9sYXRlck5laWdoYm9ycy5WYWx1ZVt2XSlcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50Q29weVtuZWlnaGJvcl0gJj0gfmNvbG9yO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChJc0Nob29zYWJsZShhc3NpZ25tZW50Q29weSwgdiArIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbG9ycyBePSBjb2xvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0NsaXF1ZUNvdmVyaW5nKExpc3Q8bG9uZz4gYXNzaWdubWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzZXQgaW4gX2luZGVwZW5kZW50VHdvU2V0cy5WYWx1ZSkgXHJcbiAgICAgICAgICAgICAgICBpZiAoKGFzc2lnbm1lbnRbc2V0WzBdXSAmIGFzc2lnbm1lbnRbc2V0WzFdXSkgIT0gMCkgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IENoZWNrRkdDaG9vc2FibGUoRnVuYzxpbnQsIGludD4gZiwgRnVuYzxpbnQsIGludD4gZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwb3QgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGludD4oVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IGcodikpKSAtIDEpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgZmlyc3QgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIGYoMCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgTCBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KCgoSUVudW1lcmFibGU8SUVudW1lcmFibGU8TGlzdDxpbnQ+Pj4pKG5ld1tdIHsgKG5ld1tdIHsgZmlyc3QgfSkgfSkpLFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2tpcDxpbnQ+KFZlcnRpY2VzLDEpLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4pKHYgPT4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50Pihwb3QsIGYodikpKSkpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIExMID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFJc0dDb2xvcmFibGUoTEwsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PilnKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTEw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBJc0dDb2xvcmFibGUoTGlzdDxMaXN0PGludD4+IEwsIEZ1bmM8aW50LCBpbnQ+IGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JpbmcgaW4gQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4pKHYgPT4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihMW3ZdLCBnKHYpKSkpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKElzUHJvcGVyQ29sb3JpbmcoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGNvbG9yaW5nKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgSXNQcm9wZXJDb2xvcmluZyhMaXN0PExpc3Q8aW50Pj4gY29sb3JpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCB2ID0gMDsgdiA8IE47IHYrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgdyA9IHYgKyAxOyB3IDwgTjsgdysrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghX2FkamFjZW50W3YsIHddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudDxpbnQ+KGNvbG9yaW5nW3ZdLGNvbG9yaW5nW3ddKSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gT25saW5lIGxpc3QgY29sb3JpbmdcclxuICAgICAgICBwdWJsaWMgaW50IE1pYygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWljID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNldCBpbiBFbnVtZXJhdGVNYXhpbWFsSW5kZXBlbmRlbnRTZXRzKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TdW08aW50PihzZXQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IERlZ3JlZSh2KSkpO1xyXG4gICAgICAgICAgICAgICAgbWljID0gTWF0aC5NYXgobWljLCB0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1pYztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNPbmxpbmVGQ2hvb3NhYmxlKEZ1bmM8aW50LCBpbnQ+IGYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOb2Rlc1Zpc2l0ZWQgPSAwO1xyXG4gICAgICAgICAgICBDYWNoZUhpdHMgPSAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZUcmFjZSA9IG5ldyBpbnRbTl07XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIGZUcmFjZVt2XSA9IGYodik7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FjaGUgPSBuZXcgRGljdGlvbmFyeTxPbmxpbmVDaG9pY2VIYXNoR3JhcGgsIGJvb2w+KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gSXNPbmxpbmVGQ2hvb3NhYmxlKGZUcmFjZSwgRW51bWVyYWJsZS5SZXBlYXQ8aW50PigxLCBOKS5Ub0FycmF5KCksIGNhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9vbCBJc09ubGluZUZDaG9vc2FibGUoaW50W10gZiwgaW50W10gZywgRGljdGlvbmFyeTxPbmxpbmVDaG9pY2VIYXNoR3JhcGgsIGJvb2w+IGNhY2hlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTm9kZXNWaXNpdGVkKys7XHJcblxyXG4gICAgICAgICAgICBPbmxpbmVDaG9pY2VIYXNoR3JhcGgga2V5ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpbnRbXSBnQ2xvbmUgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxpdmVWZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KGcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh2LCBpKSA9PiB2ID4gMCA/IGkgOiAtMSkpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gaSA+PSAwKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBmcmVlYmllcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8aW50PihsaXZlVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBEZWdyZWVJblN1YmdyYXBoKHYsIGxpdmVWZXJ0aWNlcykgPCBmW3ZdKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoZnJlZWJpZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ0Nsb25lID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ0Nsb25lID0gbmV3IGludFtnLkxlbmd0aF07XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuQ29weShnLCBnQ2xvbmUsIGcuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBmcmVlYmllcylcclxuICAgICAgICAgICAgICAgICAgICBnW3ZdID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBsaXZlVmVydGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihnLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50LCBpbnQ+KSgodiwgaSkgPT4gdiA+IDAgPyBpIDogLTEpKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShpID0+IGkgPj0gMCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgZnJlZWJpZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGludD4obGl2ZVZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gRGVncmVlSW5TdWJncmFwaCh2LCBsaXZlVmVydGljZXMpIDwgZlt2XSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobGl2ZVZlcnRpY2VzLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBnb3RvIGRvbmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGludD4obGl2ZVZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gZlt2XSA8PSAwKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZ290byBkb25lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBrZXkgPSBuZXcgT25saW5lQ2hvaWNlSGFzaEdyYXBoKGYsIGcpO1xyXG4gICAgICAgICAgICBib29sIGNhY2hlZFJlc3VsdDtcclxuICAgICAgICAgICAgaWYgKGNhY2hlLlRyeUdldFZhbHVlKGtleSwgb3V0IGNhY2hlZFJlc3VsdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENhY2hlSGl0cysrO1xyXG5cclxuICAgICAgICAgICAgICAgIGtleSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjYWNoZWRSZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICBnb3RvIGRvbmU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRlcGVuZGVudFNldHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfaW5kZXBlbmRlbnRTZXRzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc2V0ID0+IHNldC5Db3VudCA+PSAxICYmIExpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkKHNldCwgbGl2ZVZlcnRpY2VzKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIFYgaW4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihsaXZlVmVydGljZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoVi5Db3VudCA8PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oaW5kZXBlbmRlbnRTZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc3MgPT4gTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQoViwgc3MpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gVilcclxuICAgICAgICAgICAgICAgICAgICBmW3ZdLS07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG1heGltYWxJbmRlcGVuZGVudFNldHMgPSBMaXN0VXRpbGl0eS5NYXhpbWFsRWxlbWVudHNTb3J0ZWQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oaW5kZXBlbmRlbnRTZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc2V0ID0+IExpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkKHNldCwgVikpKS5Ub0xpc3QoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNob29zYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIEMgaW4gbWF4aW1hbEluZGVwZW5kZW50U2V0cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBDKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnW3ZdLS07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNob29zYWJsZSA9IElzT25saW5lRkNob29zYWJsZShmLCBnLCBjYWNoZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIEMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdbdl0rKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNob29zYWJsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gVilcclxuICAgICAgICAgICAgICAgICAgICBmW3ZdKys7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFjaG9vc2FibGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZ290byBkb25lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvbmU6XHJcblxyXG4gICAgICAgICAgICBpZiAoZ0Nsb25lICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBBcnJheS5Db3B5KGdDbG9uZSwgZywgZy5MZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGtleSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgY2FjaGVba2V5XSA9IHJlc3VsdDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNyZWdpb24gb25saW5lIChmOmcpLWNob29zYWJpbGl0eVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzT25saW5lRkdDaG9vc2FibGUoRnVuYzxpbnQsIGludD4gZiwgRnVuYzxpbnQsIGludD4gZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCA9IDA7XHJcbiAgICAgICAgICAgIENhY2hlSGl0cyA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FjaGUgPSBuZXcgRGljdGlvbmFyeTxPbmxpbmVDaG9pY2VIYXNoR3JhcGgsIGJvb2w+KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBJc09ubGluZUZHQ2hvb3NhYmxlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KF92ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gZih2KSkpLlRvQXJyYXkoKSwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oX3ZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBnKHYpKSkuVG9BcnJheSgpLCBjYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJvb2wgSXNPbmxpbmVGR0Nob29zYWJsZShpbnRbXSBmLCBpbnRbXSBnLCBEaWN0aW9uYXJ5PE9ubGluZUNob2ljZUhhc2hHcmFwaCwgYm9vbD4gY2FjaGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOb2Rlc1Zpc2l0ZWQrKztcclxuICAgICAgICAgICAgT25saW5lQ2hvaWNlSGFzaEdyYXBoIGtleSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgaW50W10gZ0Nsb25lID0gbmV3IGludFtnLkxlbmd0aF07XHJcbiAgICAgICAgICAgIEFycmF5LkNvcHkoZywgZ0Nsb25lLCBnLkxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnW3ZdIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmVlZCA9IGdbdl0gKyBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxpbnQ+KE5laWdoYm9yc1t2XSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHcgPT4gZ1t3XSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmW3ZdID49IG5lZWQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnW3ZdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghY2hhbmdlZClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGxpdmVWZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8aW50PihnLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gdiA+IDApKSk7XHJcbiAgICAgICAgICAgIGlmIChsaXZlVmVydGljZXMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGdvdG8gZG9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8aW50PihsaXZlVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBmW3ZdIDwgZ1t2XSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGdvdG8gZG9uZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAga2V5ID0gbmV3IE9ubGluZUNob2ljZUhhc2hHcmFwaChmLCBnKTtcclxuICAgICAgICAgICAgYm9vbCBjYWNoZWRSZXN1bHQ7XHJcbiAgICAgICAgICAgIGlmIChjYWNoZS5UcnlHZXRWYWx1ZShrZXksIG91dCBjYWNoZWRSZXN1bHQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDYWNoZUhpdHMrKztcclxuXHJcbiAgICAgICAgICAgICAgICBrZXkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gY2FjaGVkUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgZ290byBkb25lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXBlbmRlbnRTZXRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX2luZGVwZW5kZW50U2V0cy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNldCA9PiBzZXQuQ291bnQgPj0gMSAmJiBMaXN0VXRpbGl0eS5TdWJzZXRFcXVhbFNvcnRlZChzZXQsIGxpdmVWZXJ0aWNlcykpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBWIGluIExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4obGl2ZVZlcnRpY2VzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFYuQ291bnQgPD0gMSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGluZGVwZW5kZW50U2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNzID0+IExpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkKFYsIHNzKSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIFYpXHJcbiAgICAgICAgICAgICAgICAgICAgZlt2XS0tO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtYXhpbWFsSW5kZXBlbmRlbnRTZXRzID0gTGlzdFV0aWxpdHkuTWF4aW1hbEVsZW1lbnRzU29ydGVkKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGluZGVwZW5kZW50U2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNldCA9PiBMaXN0VXRpbGl0eS5TdWJzZXRFcXVhbFNvcnRlZChzZXQsIFYpKSkuVG9MaXN0KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjaG9vc2FibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBDIGluIG1heGltYWxJbmRlcGVuZGVudFNldHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gQylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ1t2XS0tO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjaG9vc2FibGUgPSBJc09ubGluZUZHQ2hvb3NhYmxlKGYsIGcsIGNhY2hlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gQylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ1t2XSsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hvb3NhYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBWKVxyXG4gICAgICAgICAgICAgICAgICAgIGZbdl0rKztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWNob29zYWJsZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBnb3RvIGRvbmU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgZG9uZTpcclxuXHJcbiAgICAgICAgICAgIGlmIChnQ2xvbmUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoZ0Nsb25lLCBnLCBnLkxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoa2V5ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBjYWNoZVtrZXldID0gcmVzdWx0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBPcmllbnRhdGlvbnNcclxuICAgICAgICBwdWJsaWMgaW50IERpcmVjdGlvbihUdXBsZTxpbnQsIGludD4gZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghX2FkamFjZW50W2UuSXRlbTEsIGUuSXRlbTJdKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRGlyZWN0ZWRbZS5JdGVtMiwgZS5JdGVtMV0gPyAtMSA6IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJvb2wgTWF0Y2hlc091dE1pbnVzSW4oTGlzdDxpbnQ+IG91dE1pbnVzSW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8aW50PihfdmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBPdXREZWdyZWUodikgLSBJbkRlZ3JlZSh2KSA9PSBvdXRNaW51c0luW3ZdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBNZW1vaXplRXVsZXJpYW5TdWJncmFwaENvdW50aW5nIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxHcmFwaD4gU3Bhbm5pbmdPdXRNaW51c0luU3ViZ3JhcGhzKExpc3Q8aW50PiBvdXRNaW51c0luLCBMaXN0PFR1cGxlPGludCwgaW50Pj4gZWRnZXMsIERpY3Rpb25hcnk8T3JpZW50YXRpb25IYXNoR3JhcGgsIExpc3Q8R3JhcGg+PiBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOb2Rlc1Zpc2l0ZWQrKztcclxuXHJcbiAgICAgICAgICAgIHZhciBncmFwaHMgPSBuZXcgTGlzdDxHcmFwaD4oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxpbnQ+KF92ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IG91dE1pbnVzSW5bdl0gPiBPdXREZWdyZWUodikgfHwgLW91dE1pbnVzSW5bdl0gPiBJbkRlZ3JlZSh2KSkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyYXBocztcclxuXHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBuZXcgT3JpZW50YXRpb25IYXNoR3JhcGgodGhpcywgb3V0TWludXNJbik7XHJcblxyXG4gICAgICAgICAgICBpZiAoTWVtb2l6ZUV1bGVyaWFuU3ViZ3JhcGhDb3VudGluZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTGlzdDxHcmFwaD4gc3Bhbm5lcnM7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlLlRyeUdldFZhbHVlKGtleSwgb3V0IHNwYW5uZXJzKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDYWNoZUhpdHMrKztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3Bhbm5lcnM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlZGdlcy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0Y2hlc091dE1pbnVzSW4ob3V0TWludXNJbikpXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGhzLkFkZCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3JhcGhzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4+KGVkZ2VzKTtcclxuXHJcbiAgICAgICAgICAgIGVkZ2VzLlJlbW92ZShlKTtcclxuICAgICAgICAgICAgdmFyIGcgPSBSZW1vdmVFZGdlKGUpO1xyXG5cclxuICAgICAgICAgICAgZ3JhcGhzLkFkZFJhbmdlKGcuU3Bhbm5pbmdPdXRNaW51c0luU3ViZ3JhcGhzKG91dE1pbnVzSW4sIGVkZ2VzLCBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvdXRNaW51c0luUHJpbWUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KG91dE1pbnVzSW4pO1xyXG4gICAgICAgICAgICB2YXIgdjEgPSBlLkl0ZW0xO1xyXG4gICAgICAgICAgICB2YXIgdjIgPSBlLkl0ZW0yO1xyXG5cclxuICAgICAgICAgICAgaWYgKERpcmVjdGlvbihlKSA9PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvdXRNaW51c0luUHJpbWVbZS5JdGVtMV0tLTtcclxuICAgICAgICAgICAgICAgIG91dE1pbnVzSW5QcmltZVtlLkl0ZW0yXSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgb3V0TWludXNJblByaW1lW2UuSXRlbTFdKys7XHJcbiAgICAgICAgICAgICAgICBvdXRNaW51c0luUHJpbWVbZS5JdGVtMl0tLTtcclxuXHJcbiAgICAgICAgICAgICAgICB2MSA9IGUuSXRlbTI7XHJcbiAgICAgICAgICAgICAgICB2MiA9IGUuSXRlbTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGdyYXBocy5BZGRSYW5nZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsZ2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoPihnLlNwYW5uaW5nT3V0TWludXNJblN1YmdyYXBocyhvdXRNaW51c0luUHJpbWUsIGVkZ2VzLCBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgZ2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoPikoZ3JhcGggPT4gZ3JhcGguQWRkRWRnZSh2MSwgdjIsIHRydWUpKSkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKE1lbW9pemVFdWxlcmlhblN1YmdyYXBoQ291bnRpbmcpXHJcbiAgICAgICAgICAgICAgICBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGVba2V5XSA9IGdyYXBocztcclxuXHJcbiAgICAgICAgICAgIGVkZ2VzLkFkZChlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGdyYXBocztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8R3JhcGg+IFNwYW5uaW5nRXVsZXJpYW5TdWJncmFwaHMoTGlzdDxUdXBsZTxpbnQsIGludD4+IGVkZ2VzLCBEaWN0aW9uYXJ5PE9yaWVudGF0aW9uSGFzaEdyYXBoLCBMaXN0PEdyYXBoPj4gc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNwYW5uaW5nT3V0TWludXNJblN1YmdyYXBocyhTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KG5ldyBpbnRbTl0pLCBlZGdlcywgc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgQ291bnRTcGFubmluZ0V1bGVyaWFuU3ViZ3JhcGhzKG91dCBpbnQgZXZlbiwgb3V0IGludCBvZGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDYWNoZUhpdHMgPSAwO1xyXG4gICAgICAgICAgICBOb2Rlc1Zpc2l0ZWQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlID0gbmV3IERpY3Rpb25hcnk8T3JpZW50YXRpb25IYXNoR3JhcGgsIExpc3Q8R3JhcGg+PigpO1xyXG4gICAgICAgICAgICB2YXIgZWRnZXMgPSBHZXRFZGdlVHVwbGVzKCk7XHJcblxyXG4gICAgICAgICAgICBldmVuID0gMDtcclxuICAgICAgICAgICAgb2RkID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGcgaW4gU3Bhbm5pbmdFdWxlcmlhblN1YmdyYXBocyhlZGdlcywgc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGcuU2l6ZSAlIDIgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBldmVuKys7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgb2RkKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgQ291bnRTcGFubmluZ0V1bGVyaWFuU3ViZ3JhcGhzVXNpbmdWZXJ0aWNlcyhMaXN0PGludD4gdmVydGljZXMsIG91dCBpbnQgZXZlbiwgb3V0IGludCBvZGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDYWNoZUhpdHMgPSAwO1xyXG4gICAgICAgICAgICBOb2Rlc1Zpc2l0ZWQgPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZlcnRpY2VzID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTxPcmllbnRhdGlvbkhhc2hHcmFwaCwgTGlzdDxHcmFwaD4+KCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlcyA9IEdldEVkZ2VUdXBsZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGV2ZW4gPSAwO1xyXG4gICAgICAgICAgICBvZGQgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZyBpbiBTcGFubmluZ0V1bGVyaWFuU3ViZ3JhcGhzKGVkZ2VzLCBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiB2ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZy5EZWdyZWUodikgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChnLlNpemUgJSAyID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbisrO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIG9kZCsrO1xyXG5cclxuICAgICAgICAgICAgc2tpcDogO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENvdW50U3Bhbm5pbmdFdWxlcmlhblN1YmdyYXBoc1VzaW5nRWRnZXMoTGlzdDxUdXBsZTxpbnQsIGludD4+IGVkZ2VzLCBvdXQgaW50IGV2ZW4sIG91dCBpbnQgb2RkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2FjaGVIaXRzID0gMDtcclxuICAgICAgICAgICAgTm9kZXNWaXNpdGVkID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChlZGdlcyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgZWRnZXMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlID0gbmV3IERpY3Rpb25hcnk8T3JpZW50YXRpb25IYXNoR3JhcGgsIExpc3Q8R3JhcGg+PigpO1xyXG4gICAgICAgICAgICB2YXIgZWRnZVR1cGxlcyA9IEdldEVkZ2VUdXBsZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGV2ZW4gPSAwO1xyXG4gICAgICAgICAgICBvZGQgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZyBpbiBTcGFubmluZ0V1bGVyaWFuU3ViZ3JhcGhzKGVkZ2VUdXBsZXMsIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGVkZ2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZy5fYWRqYWNlbnRbZS5JdGVtMSwgZS5JdGVtMl0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZy5TaXplICUgMiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW4rKztcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBvZGQrKztcclxuXHJcbiAgICAgICAgICAgIHNraXA6IDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8R3JhcGg+IEVudW1lcmF0ZU9yaWVudGF0aW9ucyhGdW5jPGludCwgaW50PiByZXF1aXJlZEluZGVncmVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGdhaW4gPSBuZXcgaW50W05dO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGluTmVpZ2hib3JMaXN0IGluIEVudW1lcmF0ZU9yaWVudGF0aW9uc0ZvcigwLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pcmVxdWlyZWRJbmRlZ3JlZSwgZ2FpbikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBhZGphY2VudCA9IG5ldyBib29sW04sIE5dO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGVkID0gbmV3IGJvb2xbTiwgTl07XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpbk5laWdoYm9yTGlzdC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gaW5OZWlnaGJvckxpc3QuQ291bnQgLSAxIC0gaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gaW5OZWlnaGJvckxpc3RbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGphY2VudFt2LCB3XSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkamFjZW50W3csIHZdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGVkW3csIHZdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvdXROZWlnaGJvcnMgPSBMaXN0VXRpbGl0eS5EaWZmZXJlbmNlPGludD4oX2xhdGVyTmVpZ2hib3JzLlZhbHVlW3ZdLCBpbk5laWdoYm9yTGlzdFtpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIG91dE5laWdoYm9ycylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkamFjZW50W3YsIHddID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbdywgdl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0ZWRbdiwgd10gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IEdyYXBoKEdldEVkZ2VXZWlnaHRzKGFkamFjZW50LCBkaXJlY3RlZCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIElFbnVtZXJhYmxlPExpc3Q8TGlzdDxpbnQ+Pj4gRW51bWVyYXRlT3JpZW50YXRpb25zRm9yKGludCB2LCBGdW5jPGludCwgaW50PiByZXF1aXJlZEluZGVncmVlLCBpbnRbXSBnYWluKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHYgPj0gTiAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChnYWluW3ZdIDwgcmVxdWlyZWRJbmRlZ3JlZSh2KSlcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBicmVhaztcclxuICAgICAgICAgICAgICAgIGVsc2UgXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpbnMgaW4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihfbGF0ZXJOZWlnaGJvcnMuVmFsdWVbdl0pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnMuQ291bnQgPCByZXF1aXJlZEluZGVncmVlKHYpIC0gZ2Fpblt2XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvdXRzID0gTGlzdFV0aWxpdHkuRGlmZmVyZW5jZTxpbnQ+KF9sYXRlck5laWdoYm9ycy5WYWx1ZVt2XSwgaW5zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHggaW4gb3V0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2Fpblt4XSsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbyBpbiBFbnVtZXJhdGVPcmllbnRhdGlvbnNGb3IodiArIDEsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PilyZXF1aXJlZEluZGVncmVlLCBnYWluKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uQWRkKGlucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB4IGluIG91dHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhaW5beF0tLTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8R3JhcGg+IEVudW1lcmF0ZU9yaWVudGF0aW9ucyhib29sIGZhc3QgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB1bmRpcmVjdGVkV2VpZ2h0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KEdldEVkZ2VXZWlnaHRzKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh3ID0+IE1hdGguQWJzKHcpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlSW5kaWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHVuZGlyZWN0ZWRXZWlnaHRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50LCBpbnQ+KSgodywgaSkgPT4gdyAhPSAwID8gaSA6IC0xKSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoeCA9PiB4ID4gMCkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHVuZGlyZWN0ZWQgPSBuZXcgR3JhcGgodW5kaXJlY3RlZFdlaWdodHMpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGxpc3QgaW4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihlZGdlSW5kaWNlcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB3ZWlnaHRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4odW5kaXJlY3RlZFdlaWdodHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh3LCBpKSA9PiBsaXN0LkNvbnRhaW5zKGkpID8gLXcgOiB3KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5ldyBHcmFwaCh3ZWlnaHRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggR2VuZXJhdGVSYW5kb21PcmllbnRhdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdW5kaXJlY3RlZFdlaWdodHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihHZXRFZGdlV2VpZ2h0cygpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodyA9PiBNYXRoLkFicyh3KSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgZWRnZUluZGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50Pih1bmRpcmVjdGVkV2VpZ2h0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludCwgaW50PikoKHcsIGkpID0+IHcgIT0gMCA/IGkgOiAtMSkpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHggPT4geCA+IDApKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3Q8aW50PihFIC8gMik7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIGVkZ2VJbmRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUk5HLk5leHQoMikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBsaXN0LkFkZChpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHdlaWdodHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50Pih1bmRpcmVjdGVkV2VpZ2h0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludCwgaW50PikoKHcsIGkpID0+IGxpc3QuQ29udGFpbnMoaSkgPyAtdyA6IHcpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgod2VpZ2h0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxHcmFwaD4gRW51bWVyYXRlQWN5Y2xpY09yaWVudGF0aW9ucygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlQWN5Y2xpY09yaWVudGF0aW9ucygwLCBuZXcgRGljdGlvbmFyeTxpbnQsTGlzdDxpbnQ+PihOKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIElFbnVtZXJhYmxlPEdyYXBoPiBFbnVtZXJhdGVBY3ljbGljT3JpZW50YXRpb25zKGludCBpLCBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBOKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIEZyb21PdXROZWlnaGJvckxpc3RzKG91dE5laWdoYm9ycyk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5laWdoYm9ycyA9IE5laWdoYm9yc0luU3ViZ3JhcGgoaSwgRW51bWVyYWJsZS5SYW5nZSgwLCBpKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmVpZ2hib3JzLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lID0gQ2xvbmVPdXROZWlnaGJvcnMob3V0TmVpZ2hib3JzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVbaV0gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGcgaW4gRW51bWVyYXRlQWN5Y2xpY09yaWVudGF0aW9ucyhpICsgMSwgY2xvbmUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydGVkTmVpZ2hib3JzID0gVG9wb2xvZ2ljYWxTb3J0KGksIG5laWdoYm9ycywgb3V0TmVpZ2hib3JzKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZCBpbiBFbnVtZXJhdGVMZWdhbERpcmVjdGlvbkFzc2lnbm1lbnRzKGksIHNvcnRlZE5laWdoYm9ycywgb3V0TmVpZ2hib3JzKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZSA9IENsb25lT3V0TmVpZ2hib3JzKG91dE5laWdoYm9ycyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZVtpXSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KGQuRW51bWVyYXRlQml0cygpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYiA9PiBzb3J0ZWROZWlnaGJvcnNbc29ydGVkTmVpZ2hib3JzLkNvdW50IC0gMSAtIGJdKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5EaWZmZXJlbmNlPGludD4obmVpZ2hib3JzLGNsb25lW2ldKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lW3ZdLkFkZChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBnIGluIEVudW1lcmF0ZUFjeWNsaWNPcmllbnRhdGlvbnMoaSArIDEsIGNsb25lKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBDbG9uZU91dE5laWdoYm9ycyhEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2xvbmUgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4ob3V0TmVpZ2hib3JzLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBrdnAgaW4gb3V0TmVpZ2hib3JzKVxyXG4gICAgICAgICAgICAgICAgY2xvbmVba3ZwLktleV0gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KGt2cC5WYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIExpc3Q8aW50PiBUb3BvbG9naWNhbFNvcnQoaW50IGksIExpc3Q8aW50PiB2ZXJ0aWNlcywgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gb3V0TmVpZ2hib3JzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGluTmVpZ2hib3JDb3VudCA9IG5ldyBpbnRbaV07XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBrdnAgaW4gb3V0TmVpZ2hib3JzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXZlcnRpY2VzLkNvbnRhaW5zKGt2cC5LZXkpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuSW50ZXJzZWN0PGludD4oa3ZwLlZhbHVlLHZlcnRpY2VzKSlcclxuICAgICAgICAgICAgICAgICAgICBpbk5laWdoYm9yQ291bnRbdl0rKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHNvcnRlZCA9IG5ldyBMaXN0PGludD4oaSk7XHJcbiAgICAgICAgICAgIHZhciBzb3VyY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxpbnQ+KHZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gaW5OZWlnaGJvckNvdW50W3ZdID09IDApKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChzb3VyY2VzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbc291cmNlcy5Db3VudCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgc291cmNlcy5SZW1vdmVBdChzb3VyY2VzLkNvdW50IC0gMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc29ydGVkLkFkZChzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5JbnRlcnNlY3Q8aW50PihvdXROZWlnaGJvcnNbc291cmNlXSx2ZXJ0aWNlcykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5OZWlnaGJvckNvdW50W3ZdLS07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluTmVpZ2hib3JDb3VudFt2XSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzLkFkZCh2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNvcnRlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgSUVudW1lcmFibGU8bG9uZz4gRW51bWVyYXRlTGVnYWxEaXJlY3Rpb25Bc3NpZ25tZW50cyhpbnQgaSwgTGlzdDxpbnQ+IHNvcnRlZE5laWdoYm9ycywgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gb3V0TmVpZ2hib3JzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyBkID0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBhbmNlc3Rvckxpc3RzID0gR2V0QW5jZXN0b3JMaXN0cyhpLCBvdXROZWlnaGJvcnMpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGQuQWxsU2V0KHNvcnRlZE5laWdoYm9ycy5Db3VudCkpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgZCA9IENsb3N1cmUoZCArIDEsIHNvcnRlZE5laWdoYm9ycywgYW5jZXN0b3JMaXN0cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbG9uZyBDbG9zdXJlKGxvbmcgZCwgTGlzdDxpbnQ+IHNvcnRlZE5laWdoYm9ycywgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gYW5jZXN0b3JMaXN0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkb25lID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoIWRvbmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIHYgaW4gc29ydGVkTmVpZ2hib3JzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2Qml0ID0gc29ydGVkTmVpZ2hib3JzLkNvdW50IC0gMSAtIHNvcnRlZE5laWdoYm9ycy5JbmRleE9mKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuSW50ZXJzZWN0PGludD4oYW5jZXN0b3JMaXN0c1t2XSxzb3J0ZWROZWlnaGJvcnMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdCaXQgPSBzb3J0ZWROZWlnaGJvcnMuQ291bnQgLSAxIC0gc29ydGVkTmVpZ2hib3JzLkluZGV4T2Yodyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLklzQml0U2V0KHdCaXQpICYmICFkLklzQml0U2V0KHZCaXQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gZC5TZXRCaXQodkJpdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBHZXRBbmNlc3Rvckxpc3RzKGludCBpLCBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYW5jZXN0b3JMaXN0cyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PihpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IHYgPSAwOyB2IDwgaTsgdisrKVxyXG4gICAgICAgICAgICAgICAgYW5jZXN0b3JMaXN0c1t2XSA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vMTYpPT57X28xNi5BZGQodik7cmV0dXJuIF9vMTY7fSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZG9uZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB3aGlsZSAoIWRvbmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IHYgPSAwOyB2IDwgaTsgdisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIG91dE5laWdoYm9yc1t2XSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3ID49IGkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gYW5jZXN0b3JMaXN0c1t3XS5Db3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5jZXN0b3JMaXN0c1t3XSA9IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KGFuY2VzdG9yTGlzdHNbd10sYW5jZXN0b3JMaXN0c1t2XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW5jZXN0b3JMaXN0c1t3XS5Db3VudCA+IGMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYW5jZXN0b3JMaXN0cztcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIENsYXNzaWMgQWxnb3JpdGhtc1xyXG4gICAgICAgIHB1YmxpYyBFcXVpdmFsZW5jZVJlbGF0aW9uPGludD4gRmluZEZhY3RvcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGVxdWl2YWxlbmNlUmVsYXRpb24gPSBuZXcgQWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248aW50PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVxdWl2YWxlbmNlUmVsYXRpb24uQWRkRWxlbWVudChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWl2YWxlbmNlUmVsYXRpb24uUmVsYXRlKGksIGopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXF1aXZhbGVuY2VSZWxhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEVxdWl2YWxlbmNlUmVsYXRpb248aW50PiBGaW5kQ29tcG9uZW50cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZXF1aXZhbGVuY2VSZWxhdGlvbiA9IG5ldyBBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXF1aXZhbGVuY2VSZWxhdGlvbi5BZGRFbGVtZW50KGkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcXVpdmFsZW5jZVJlbGF0aW9uLlJlbGF0ZShpLCBqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVxdWl2YWxlbmNlUmVsYXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBFcXVpdmFsZW5jZVJlbGF0aW9uPGludD4gRmluZENvbXBvbmVudHMoTGlzdDxpbnQ+IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZXF1aXZhbGVuY2VSZWxhdGlvbiA9IG5ldyBBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHYuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXF1aXZhbGVuY2VSZWxhdGlvbi5BZGRFbGVtZW50KHZbaV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IHYuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W3ZbaV0sIHZbal1dKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcXVpdmFsZW5jZVJlbGF0aW9uLlJlbGF0ZSh2W2ldLCB2W2pdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVxdWl2YWxlbmNlUmVsYXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBGaW5kU3Ryb25nQ29tcG9uZW50c1RhcmphbigpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgdmFyIHN0cm9uZ0NvbXBvbmVudHMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgIHZhciBpbmRpY2VzID0gRW51bWVyYWJsZS5SZXBlYXQoLTEsIE4pLlRvQXJyYXkoKTtcclxuICAgICAgICAvLyAgICB2YXIgbG93bGluayA9IEVudW1lcmFibGUuUmVwZWF0KC0xLCBOKS5Ub0FycmF5KCk7XHJcbiAgICAgICAgLy8gICAgdmFyIFMgPSBuZXcgU3RhY2s8aW50PigpO1xyXG4gICAgICAgIC8vICAgIHZhciBpbmRleCA9IDA7XHJcblxyXG4gICAgICAgIC8vICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAvLyAgICB7XHJcbiAgICAgICAgLy8gICAgICAgIGlmIChpbmRpY2VzW3ZdIDwgMClcclxuICAgICAgICAvLyAgICAgICAgICAgIFN0cm9uZ0Nvbm5lY3QodiwgcmVmIGluZGV4LCBpbmRpY2VzLCBsb3dsaW5rLCBTLCBzdHJvbmdDb21wb25lbnRzKTtcclxuICAgICAgICAvLyAgICB9XHJcblxyXG4gICAgICAgIC8vICAgIHJldHVybiBzdHJvbmdDb21wb25lbnRzO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vdm9pZCBTdHJvbmdDb25uZWN0KGludCB2LCByZWYgaW50IGluZGV4LCBpbnRbXSBpbmRpY2VzLCBpbnRbXSBsb3dsaW5rLCBTdGFjazxpbnQ+IFMsIExpc3Q8TGlzdDxpbnQ+PiBzdHJvbmdDb21wb25lbnRzKVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vICAgIGluZGljZXNbdl0gPSBpbmRleDtcclxuICAgICAgICAvLyAgICBsb3dsaW5rW3ZdID0gaW5kZXg7XHJcbiAgICAgICAgLy8gICAgaW5kZXgrKztcclxuICAgICAgICAvLyAgICBTLlB1c2godik7XHJcblxyXG4gICAgICAgIC8vICAgIGZvcmVhY2ggKHZhciB3IGluIE91dE5laWdoYm9yc1t2XSlcclxuICAgICAgICAvLyAgICB7XHJcbiAgICAgICAgLy8gICAgICAgIGlmIChpbmRpY2VzW3ddIDwgMClcclxuICAgICAgICAvLyAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgU3Ryb25nQ29ubmVjdCh3LCByZWYgaW5kZXgsIGluZGljZXMsIGxvd2xpbmssIFMsIHN0cm9uZ0NvbXBvbmVudHMpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgbG93bGlua1t2XSA9IE1hdGguTWluKGxvd2xpbmtbdl0sIGxvd2xpbmtbd10pO1xyXG4gICAgICAgIC8vICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgIGVsc2UgaWYgKFMuQ29udGFpbnModykpXHJcbiAgICAgICAgLy8gICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgIGxvd2xpbmtbdl0gPSBNYXRoLk1pbihsb3dsaW5rW3ZdLCBpbmRpY2VzW3ddKTtcclxuICAgICAgICAvLyAgICAgICAgfVxyXG4gICAgICAgIC8vICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgaWYgKGxvd2xpbmtbdl0gPT0gaW5kaWNlc1t2XSlcclxuICAgICAgICAvLyAgICB7XHJcbiAgICAgICAgLy8gICAgICAgIHZhciBjb21wb25lbnQgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAvLyAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgLy8gICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgIHZhciB3ID0gUy5Qb3AoKTtcclxuICAgICAgICAvLyAgICAgICAgICAgIGNvbXBvbmVudC5BZGQodyk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgICAgaWYgKHcgPT0gdilcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAvLyAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgICAgICAgc3Ryb25nQ29tcG9uZW50cy5BZGQoY29tcG9uZW50KTtcclxuICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29tcHV0ZURpYW1ldGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludFssXSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgaW50WyxdIG5leHQ7XHJcbiAgICAgICAgICAgIEZsb3lkV2Fyc2hhbGwob3V0IGRpc3RhbmNlLCBvdXQgbmV4dCk7XHJcbiAgICAgICAgICAgIGludCBkaWFtZXRlciA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIFZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBWZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2Vbdiwgd10gPiBkaWFtZXRlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXIgPSBkaXN0YW5jZVt2LCB3XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRpYW1ldGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRmxveWRXYXJzaGFsbChvdXQgaW50WyxdIGRpc3RhbmNlLCBvdXQgaW50WyxdIG5leHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkaXN0YW5jZSA9IG5ldyBpbnRbTiwgTl07XHJcbiAgICAgICAgICAgIG5leHQgPSBuZXcgaW50W04sIE5dO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVtpLCBqXSA9IGludC5NYXhWYWx1ZSAvIDM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gailcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VbaSwgal0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKF9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qaWYgKERpcmVjdGVkW2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VbaSwgal0gPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERpcmVjdGVkW2osIGldKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VbaiwgaV0gPSAxOyovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVtpLCBqXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlW2osIGldID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFtpLCBqXSA9IC0xO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgayA9IDA7IGsgPCBOOyBrKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlW2ksIGtdICsgZGlzdGFuY2Vbaywgal0gPCBkaXN0YW5jZVtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VbaSwgal0gPSBkaXN0YW5jZVtpLCBrXSArIGRpc3RhbmNlW2ssIGpdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFtpLCBqXSA9IGs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPGludD4gRmxveWRXYXJzaGFsbFNob3J0ZXN0UGF0aChpbnQgdiwgaW50IHcsIGludFssXSBkaXN0YW5jZSwgaW50WyxdIG5leHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2Vbdiwgd10gPT0gaW50Lk1heFZhbHVlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICBpZiAobmV4dFt2LCB3XSA9PSAtMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdbXSB7IHYsIHcgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlVuaW9uPGludD4oRmxveWRXYXJzaGFsbFNob3J0ZXN0UGF0aCh2LCBuZXh0W3YsIHddLCBkaXN0YW5jZSwgbmV4dCksU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ta2lwPGludD4oRmxveWRXYXJzaGFsbFNob3J0ZXN0UGF0aChuZXh0W3YsIHddLCB3LCBkaXN0YW5jZSwgbmV4dCksMSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3B1YmxpYyBMaXN0PGludD4gRmluZFNob3J0ZXN0Q3ljbGUoKVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vICAgIHZhciBzaG9ydGVzdExlbmd0aCA9IGludC5NYXhWYWx1ZTtcclxuICAgICAgICAvLyAgICB2YXIgc2hvcnRlc3RDeWNsZSA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgLy8gICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgIC8vICAgIHtcclxuICAgICAgICAvLyAgICAgICAgdmFyIGRpc3RhbmNlID0gbmV3IGludFtOXTtcclxuICAgICAgICAvLyAgICAgICAgdmFyIHBhcmVudCA9IEVudW1lcmFibGUuUmVwZWF0KC0xLCBOKS5Ub0FycmF5KCk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICB2YXIgdmlzaXRlZCA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAvLyAgICAgICAgdmFyIGxlYXZlcyA9IG5ldyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5RdWV1ZTxpbnQ+KCk7XHJcbiAgICAgICAgLy8gICAgICAgIGxlYXZlcy5FbnF1ZXVlKHYpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgd2hpbGUgKGxlYXZlcy5Db3VudCA+IDApXHJcbiAgICAgICAgLy8gICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgIHZhciB4ID0gbGVhdmVzLkRlcXVldWUoKTtcclxuICAgICAgICAvLyAgICAgICAgICAgIHZpc2l0ZWQuQWRkKHgpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgICAgIGZvcmVhY2ggKHZhciB5IGluIE5laWdoYm9yc1t4XSlcclxuICAgICAgICAvLyAgICAgICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICBpZiAoeSA9PSBwYXJlbnRbeF0pXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICBpZiAoIXZpc2l0ZWQuQ29udGFpbnMoeSkpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICBwYXJlbnRbeV0gPSB4O1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVt5XSA9IGRpc3RhbmNlW3hdICsgMTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgbGVhdmVzLkVucXVldWUoeSk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRpc3RhbmNlW3hdICsgZGlzdGFuY2VbeV0gKyAxIDwgc2hvcnRlc3RMZW5ndGgpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICBzaG9ydGVzdExlbmd0aCA9IGRpc3RhbmNlW3hdICsgZGlzdGFuY2VbeV0gKyAxO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICBzaG9ydGVzdEN5Y2xlLkNsZWFyKCk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IHg7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHdoaWxlICh3ICE9IC0xKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGVzdEN5Y2xlLkFkZCh3KTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBwYXJlbnRbd107XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIGlmICh5ICE9IHYpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHcgPSB5O1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHcgIT0gLTEpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRlc3RDeWNsZS5JbnNlcnQoMCwgdyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHBhcmVudFt3XTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgfVxyXG4gICAgICAgIC8vICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgcmV0dXJuIHNob3J0ZXN0Q3ljbGU7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgR3JhcGhzXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBFKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChuZXcgYm9vbFtuLCBuXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggSyhpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFKG4pLkNvbXBsZW1lbnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBQKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIEcgPSBFKG4pO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4gLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICBHID0gRy5BZGRFZGdlKGksIGkgKyAxKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBHO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIFN0YXIoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgRyA9IEUobik7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgRyA9IEcuQWRkRWRnZSgwLCBpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBHO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIEMoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gUChuKS5BZGRFZGdlKG4gLSAxLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBEaWFtb25kXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gRSgyKSAqIEsoMik7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBCdWxsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gSygzKS5BdHRhY2hOZXdWZXJ0ZXgoMSkuQXR0YWNoTmV3VmVydGV4KDIpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggS2l0ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIERpYW1vbmQuQXR0YWNoTmV3VmVydGV4KDEpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggRGFydFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIERpYW1vbmQuQXR0YWNoTmV3VmVydGV4KDIpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggQ2hhaXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBQKDQpLkF0dGFjaE5ld1ZlcnRleCgyKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIEVtcHR5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gbmV3IEdyYXBoKG5ldyBib29sWzAsIDBdKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIFBhd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIFAoNCkuQWRkRWRnZSgwLCAyKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIEhcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBQKDQpLkF0dGFjaE5ld1ZlcnRleCgxKS5BdHRhY2hOZXdWZXJ0ZXgoMik7IH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEhhc2hHcmFwaFxyXG4gICAge1xyXG4gICAgICAgIGJ5dGVbXSBfdmFsdWVzO1xyXG4gICAgICAgIExpc3Q8aW50PiBfb3V0TWludXNJbjtcclxuICAgICAgICBpbnQgX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgSGFzaEdyYXBoKEdyYXBoIGcsIExpc3Q8aW50PiBvdXRNaW51c0luKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3ZhbHVlcyA9IG5ldyBieXRlW2cuTiAqIChnLk4gLSAxKSAvIDJdO1xyXG4gICAgICAgICAgICBfb3V0TWludXNJbiA9IG91dE1pbnVzSW47XHJcblxyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZy5OOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGcuTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IChieXRlKShnW2ksIGpdID8gMSA6IDApO1xyXG4gICAgICAgICAgICAgICAgICAgIF92YWx1ZXNba10gPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oYXNoQ29kZSArPSAxIDw8IChrICUgMzIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIG91dE1pbnVzSW4pXHJcbiAgICAgICAgICAgICAgICBfaGFzaENvZGUgPSBfaGFzaENvZGUgKiAzMyArIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvdGhlciA9IG9iaiBhcyBIYXNoR3JhcGg7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KF9vdXRNaW51c0luLG90aGVyLl9vdXRNaW51c0luKSAmJiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8Ynl0ZT4oX3ZhbHVlcyxvdGhlci5fdmFsdWVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEhlcmVkaXRhcnlDbGFzc0VudW1lcmF0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IFNpemVDb21wYXJlciBfc2l6ZUNvbXBhcmVyID0gbmV3IFNpemVDb21wYXJlcigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPEdyYXBoPiBFbnVtZXJhdGVDbGFzcyhwYXJhbXMgR3JhcGhbXSBleGNsdWRlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVDbGFzcyhTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGg+KGV4Y2x1ZGVkKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPEdyYXBoPiBFbnVtZXJhdGVDbGFzcyhMaXN0PEdyYXBoPiBleGNsdWRlZCwgaW50IG1heFZlcnRpY2VzID0gaW50Lk1heFZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZXhjbHVkZWQuU29ydCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgaW50PikoKGcxLCBnMikgPT4gZzEuTi5Db21wYXJlVG8oZzIuTikpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChleGNsdWRlZC5Db3VudCA+IDAgJiYgZXhjbHVkZWRbMF0uTiA8PSAxKSB5aWVsZCBicmVhaztcclxuICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5ldyBHcmFwaChuZXcgTGlzdDxpbnQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxhc3RMZXZlbCA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxHcmFwaD4oKSwoX28xNyk9PntfbzE3LkFkZChuZXcgR3JhcGgobmV3IExpc3Q8aW50PigpKSk7cmV0dXJuIF9vMTc7fSk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAobGFzdExldmVsLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRMZXZlbCA9IG5ldyBMaXN0PEdyYXBoPigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBHIGluIGxhc3RMZXZlbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBMaXN0PExpc3Q8aW50Pj4gbmVpZ2hib3JTZXRzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoRy5Jc0NvbXBsZXRlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvclNldHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgRy5OKS5Ub0xpc3QoKSksX3NpemVDb21wYXJlcikuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9yU2V0cyA9IExpc3RVdGlsaXR5LkdlbmVyYXRlU3VibGlzdHM8aW50PihFbnVtZXJhYmxlLlJhbmdlKDAsIEcuTikuVG9MaXN0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbmVpZ2hib3JTZXQgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4obmVpZ2hib3JTZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikobCA9PiBsLkNvdW50ID4gMCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEggPSBHLkF0dGFjaE5ld1ZlcnRleChuZWlnaGJvclNldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoPihjdXJyZW50TGV2ZWwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBib29sPikoVyA9PiBHcmFwaC5Jc29tb3JwaGljKEgsIFcpKSkpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoPihleGNsdWRlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGJvb2w+KShXID0+IEguQ29udGFpbnNJbmR1Y2VkKFcpKSkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudExldmVsLkFkZChIKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIEg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50TGV2ZWwuQ291bnQgPiAwICYmIGN1cnJlbnRMZXZlbFswXS5OID49IG1heFZlcnRpY2VzKSB5aWVsZCBicmVhaztcclxuICAgICAgICAgICAgICAgIGxhc3RMZXZlbCA9IGN1cnJlbnRMZXZlbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xhc3MgU2l6ZUNvbXBhcmVyIDogSUVxdWFsaXR5Q29tcGFyZXI8TGlzdDxpbnQ+PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKExpc3Q8aW50PiB4LCBMaXN0PGludD4geSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHguQ291bnQgPT0geS5Db3VudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGludCBHZXRIYXNoQ29kZShMaXN0PGludD4gb2JqKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLkNvdW50LkdldEhhc2hDb2RlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSHlwZXJncmFwaDxUPlxyXG4gICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAge1xyXG4gICAgICAgIFNvcnRlZExpc3RDb21wYXJlciBfbGlzdENvbXBhcmVyID0gbmV3IFNvcnRlZExpc3RDb21wYXJlcigpO1xyXG4gICAgICAgIHB1YmxpYyBIYXNoU2V0PExpc3Q8VD4+IEUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBIeXBlcmdyYXBoKExpc3Q8TGlzdDxUPj4gZWRnZXMgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGVkZ2VzICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGVkZ2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIGUuU29ydCgpO1xyXG4gICAgICAgICAgICAgICAgRSA9IG5ldyBIYXNoU2V0PExpc3Q8VD4+KGVkZ2VzLCBfbGlzdENvbXBhcmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBFID0gbmV3IEhhc2hTZXQ8TGlzdDxUPj4oX2xpc3RDb21wYXJlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSHlwZXJncmFwaDxUPiBNaW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNoYWluSGVhZHMgPSBuZXcgTGlzdDxMaXN0PFQ+PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNldCBpbiBFKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlZCA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oY2hhaW5IZWFkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShoZWFkID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbFNvcnRlZDxUPihzZXQsaGVhZCkpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKCh4KSA9PiB7IH0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZW1vdmVkID4gMCB8fCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGNoYWluSGVhZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoaGVhZCA9PiAhQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkPFQ+KGhlYWQsc2V0KSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSGVhZHMuQWRkKHNldCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSHlwZXJncmFwaDxUPihjaGFpbkhlYWRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBIeXBlcmdyYXBoPFQ+IFRyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBIID0gbmV3IEh5cGVyZ3JhcGg8VD4oQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PExpc3Q8VD4+KCksKF9vMTgpPT57X28xOC5BZGQobmV3IExpc3Q8VD4oKSk7cmV0dXJuIF9vMTg7fSkpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gRSlcclxuICAgICAgICAgICAgICAgIEggPSBILlByb2R1Y3QoRWRnZUh5cGVyZ3JhcGgoZSkpLk1pbigpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBIeXBlcmdyYXBoPFQ+IEVkZ2VIeXBlcmdyYXBoKExpc3Q8VD4gZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSHlwZXJncmFwaDxUPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxULGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSh2ID0+IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRW5MaXN0PFQ+KHYpKSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEh5cGVyZ3JhcGg8VD4gVW5pb24oSHlwZXJncmFwaDxUPiBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSHlwZXJncmFwaDxUPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlVuaW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oRSxvdGhlci5FKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSHlwZXJncmFwaDxUPiBQcm9kdWN0KEh5cGVyZ3JhcGg8VD4gb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEh5cGVyZ3JhcGg8VD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KShlX2kgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ob3RoZXIuRSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKGVfaiA9PiBMaXN0VXRpbGl0eS5VbmlvbjxUPihlX2ksIGVfaikpKS5Ub0xpc3QoKSkpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNsYXNzIFNvcnRlZExpc3RDb21wYXJlciA6IElFcXVhbGl0eUNvbXBhcmVyPExpc3Q8VD4+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoTGlzdDxUPiB4LCBMaXN0PFQ+IHkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4oeCx5KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGludCBHZXRIYXNoQ29kZShMaXN0PFQ+IGxpc3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVuY2hlY2tlZFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBoYXNoID0gMTk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHggaW4gbGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaCA9IGhhc2ggKiAzMSArIHguR2V0SGFzaENvZGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc2g7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5JbmRlcGVuZGVuY2VSYXRpb1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIE1pbm9yRmluZGVyXHJcbiAgICB7XHJcbiAgICAgICAgLy8gVE9ETzogcmVwbGFjZSBuYWl2ZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHdpdGggZmFzdCB2ZXJzaW9uIGlmIG5lY2Vzc2FyeS5cclxuICAgICAgICAvLyBhbHNvLCB8SnwgaXMgaGFyZGNvZGVkIHRvIDMsIHdoaWNoIGlzIGFsbCB3ZSBuZWVkIG5vdy5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8VHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+Pj4gRmluZFdpdGhKKEdyYXBoIGcsIExpc3Q8aW50PiBKKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEouQ291bnQgIT0gMylcclxuICAgICAgICAgICAgICAgIHlpZWxkIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHRyaXBsZSBpbiBFbnVtZXJhdGVDb25uZWN0ZWRUaHJlZVBhcnRQYXJ0aXRpb25zKGcsIEopKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZy5JbmRlcGVuZGVuY2VOdW1iZXIoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4odHJpcGxlLkl0ZW0xLEopKSA8IDQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZy5JbmRlcGVuZGVuY2VOdW1iZXIoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4odHJpcGxlLkl0ZW0yLEopKSA8IDQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZy5JbmRlcGVuZGVuY2VOdW1iZXIoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4odHJpcGxlLkl0ZW0zLEopKSA8IDQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZy5FZGdlc0JldHdlZW4odHJpcGxlLkl0ZW0xLCB0cmlwbGUuSXRlbTIpIDw9IDAgJiYgZy5JbmRlcGVuZGVuY2VOdW1iZXIoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4oQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4odHJpcGxlLkl0ZW0xLHRyaXBsZS5JdGVtMiksSikpIDwgNSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmIChnLkVkZ2VzQmV0d2Vlbih0cmlwbGUuSXRlbTEsIHRyaXBsZS5JdGVtMykgPD0gMCAmJiBnLkluZGVwZW5kZW5jZU51bWJlcihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50PihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTEsdHJpcGxlLkl0ZW0zKSxKKSkgPCA1KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGcuRWRnZXNCZXR3ZWVuKHRyaXBsZS5JdGVtMiwgdHJpcGxlLkl0ZW0zKSA8PSAwICYmIGcuSW5kZXBlbmRlbmNlTnVtYmVyKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KHRyaXBsZS5JdGVtMix0cmlwbGUuSXRlbTIpLEopKSA8IDUpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4+KCksKF9vMTkpPT57X28xOS5BZGQobmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHRyaXBsZS5JdGVtMSksIGcuTWF4aW11bUluZGVwZW5kZW50U3Vic2V0KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KHRyaXBsZS5JdGVtMSxKKSkpKTtfbzE5LkFkZChuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4odHJpcGxlLkl0ZW0yKSwgZy5NYXhpbXVtSW5kZXBlbmRlbnRTdWJzZXQoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4odHJpcGxlLkl0ZW0yLEopKSkpO19vMTkuQWRkKG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih0cmlwbGUuSXRlbTMpLCBnLk1heGltdW1JbmRlcGVuZGVudFN1YnNldChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTMsSikpKSk7cmV0dXJuIF9vMTk7fSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50PiwgTGlzdDxpbnQ+Pj4gRW51bWVyYXRlQ29ubmVjdGVkVGhyZWVQYXJ0UGFydGl0aW9ucyhHcmFwaCBnLCBMaXN0PGludD4gSilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByZXN0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8aW50PihnLlZlcnRpY2VzLEopLlRvTGlzdCgpO1xyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlNodWZmbGU8aW50PiggICAgICAgICAgICByZXN0KTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGZpcnN0IGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KHJlc3QpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmaXJzdC5BZGQoSlswXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KGcuRmluZENvbXBvbmVudHMoZmlyc3QpLkdldEVxdWl2YWxlbmNlQ2xhc3NlcygpKSAhPSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciByZXN0MiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGludD4ocmVzdCxmaXJzdCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgc2Vjb25kIGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KHJlc3QyKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWNvbmQuQWRkKEpbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4oZy5GaW5kQ29tcG9uZW50cyhzZWNvbmQpLkdldEVxdWl2YWxlbmNlQ2xhc3NlcygpKSAhPSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXJkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8aW50PihyZXN0MixzZWNvbmQpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXJkLkFkZChKWzJdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KGcuRmluZENvbXBvbmVudHModGhpcmQpLkdldEVxdWl2YWxlbmNlQ2xhc3NlcygpKSAhPSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50PiwgTGlzdDxpbnQ+PihmaXJzdCwgc2Vjb25kLCB0aGlyZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBJbnQzMlVzYWdlXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgVUludDMyIERlQnJ1aWpuTXVsdGlwbGllciA9IDB4MDc3Q0I1MzFVO1xyXG4gICAgICAgIHN0YXRpYyBpbnRbXSBEZUJydWlqbkxvb2t1cCA9IG5ldyBpbnRbMzJdIHsgMCwgMSwgMjgsIDIsIDI5LCAxNCwgMjQsIDMsIDMwLCAyMiwgMjAsIDE1LCAyNSwgMTcsIDQsIDgsIDMxLCAyNywgMTMsIDIzLCAyMSwgMTksIDE2LCA3LCAyNiwgMTIsIDE4LCA2LCAxMSwgNSwgMTAsIDkgfTtcclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBMZWFzdFNpZ25pZmljYW50Qml0KHRoaXMgaW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbdW5jaGVja2VkKCh1aW50KSh4ICYgLXgpICogRGVCcnVpam5NdWx0aXBsaWVyID4+IDI3KV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIGludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSB4ICYgLXg7XHJcbiAgICAgICAgICAgIHggXj0gbTtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwW3VuY2hlY2tlZCgodWludCltICogRGVCcnVpam5NdWx0aXBsaWVyID4+IDI3KV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBQb3B1bGF0aW9uQ291bnQodGhpcyB1aW50IGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgcSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChiID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcSsrO1xyXG4gICAgICAgICAgICAgICAgYiAmPSBiIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gVG9TZXQodGhpcyB1aW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb25CaXRzID0gbmV3IExpc3Q8aW50PigxMCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBsc2IgPSB4ICYgKDAgLSB4KTtcclxuICAgICAgICAgICAgICAgIG9uQml0cy5BZGQoRGVCcnVpam5Mb29rdXBbdW5jaGVja2VkKGxzYiAqIERlQnJ1aWpuTXVsdGlwbGllciA+PiAyNyldKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4IF49IGxzYjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9uQml0cztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBJbnQ2NFVzYWdlXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgVUludDY0IERlQnJ1aWpuTXVsdGlwbGllciA9IDB4MDdFREQ1RTU5QTRFMjhDMjtcclxuICAgICAgICBzdGF0aWMgaW50W10gRGVCcnVpam5Mb29rdXAgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MywgIDAsIDU4LCAgMSwgNTksIDQ3LCA1MywgIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MCwgMzksIDQ4LCAyNywgNTQsIDMzLCA0MiwgIDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MSwgNTEsIDM3LCA0MCwgNDksIDE4LCAyOCwgMjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA1NSwgMzAsIDM0LCAxMSwgNDMsIDE0LCAyMiwgIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MiwgNTcsIDQ2LCA1MiwgMzgsIDI2LCAzMiwgNDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA1MCwgMzYsIDE3LCAxOSwgMjksIDEwLCAxMywgMjEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA1NiwgNDUsIDI1LCAzMSwgMzUsIDE2LCAgOSwgMTIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0NCwgMjQsIDE1LCAgOCwgMjMsICA3LCAgNiwgIDVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEludDY0W10gQml0TWFzayA9IG5ldyBJbnQ2NFs2NF07XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEludDY0W10gTm90Qml0TWFzayA9IG5ldyBJbnQ2NFs2NF07XHJcblxyXG4gICAgICAgIHN0YXRpYyBJbnQ2NFVzYWdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKGludCBiaXQgaW4gRW51bWVyYWJsZS5SYW5nZSgwLCA2NCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEJpdE1hc2tbYml0XSA9ICgoSW50NjQpMSkgPDwgYml0O1xyXG4gICAgICAgICAgICAgICAgTm90Qml0TWFza1tiaXRdID0gfigoKEludDY0KTEpIDw8IGJpdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGljdGlvbmFyeTxsb25nLCBsb25nPiBHZW5lcmF0ZVBhaXJNYXNrcyhpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtYXNrTWFwID0gbmV3IERpY3Rpb25hcnk8bG9uZywgbG9uZz4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFza01hcFtCaXRNYXNrW2ldIHwgQml0TWFza1tqXV0gPSBCaXRNYXNrW2pdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWFza01hcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSW50NjQgQ2xlYXJCaXQodGhpcyBJbnQ2NCB4LCBpbnQgYml0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHggJiBOb3RCaXRNYXNrW2JpdF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEludDY0IFNldEJpdCh0aGlzIEludDY0IHgsIGludCBiaXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4geCB8IEJpdE1hc2tbYml0XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0JpdFNldCh0aGlzIEludDY0IHgsIGludCBiaXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKHggJiBCaXRNYXNrW2JpdF0pICE9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEludDY0IEZsaXBCaXRzKHRoaXMgSW50NjQgeCwgaW50IGJpdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB4IF4gQml0TWFza1tiaXRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEludDY0IEZsaXBCaXRzKHRoaXMgSW50NjQgeCwgaW50IGJpdDEsIGludCBiaXQyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHggXiAoQml0TWFza1tiaXQxXSB8IEJpdE1hc2tbYml0Ml0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEludDY0IEZsaXBCaXRzKHRoaXMgSW50NjQgeCwgcGFyYW1zIGludFtdIGJpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoYml0cyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XHJcblxyXG4gICAgICAgICAgICBJbnQ2NCBtYXNrID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBiaXRzKVxyXG4gICAgICAgICAgICAgICAgbWFzayB8PSBCaXRNYXNrW2JpdF07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geCBeIG1hc2s7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBMZWFzdFNpZ25pZmljYW50Qml0KHRoaXMgSW50NjQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFt1bmNoZWNrZWQoKFVJbnQ2NCkoYiAmIC1iKSAqIERlQnJ1aWpuTXVsdGlwbGllciA+PiA1OCldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIEludDY0IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IHggJiAteDtcclxuICAgICAgICAgICAgeCBePSBtO1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbKChVSW50NjQpbSAqIERlQnJ1aWpuTXVsdGlwbGllcikgPj4gNThdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgUG9wdWxhdGlvbkNvdW50KHRoaXMgSW50NjQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBxID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGIgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBxKys7XHJcbiAgICAgICAgICAgICAgICBiICY9IGIgLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgUG9wdWxhdGlvbkNvdW50KHRoaXMgdWxvbmcgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVsb25nIGsxID0gMHg1NTU1NTU1NTU1NTU1NTU1VUw7XHJcbiAgICAgICAgICAgIGNvbnN0IHVsb25nIGsyID0gMHgzMzMzMzMzMzMzMzMzMzMzVUw7XHJcbiAgICAgICAgICAgIGNvbnN0IHVsb25nIGs0ID0gMHgwZjBmMGYwZjBmMGYwZjBmVUw7XHJcbiAgICAgICAgICAgIHggPSB4IC0gKCh4ID4+IDEpICYgazEpO1xyXG4gICAgICAgICAgICB4ID0gKHggJiBrMikgKyAoKHggPj4gMikgJiBrMik7XHJcbiAgICAgICAgICAgIHggPSAoeCArICh4ID4+IDQpKSAmIGs0O1xyXG4gICAgICAgICAgICB4ID0gKHggKiAweDAxMDEwMTAxMDEwMTAxMDFVTCkgPj4gNTY7XHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVsb25nIFJpZ2h0RmlsbFRvTVNCKHRoaXMgdWxvbmcgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMjtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDQ7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiA4O1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMTY7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAzMjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9CaXRTdHJpbmcodGhpcyBJbnQ2NCB4LCBpbnQgbGVuZ3RoID0gNjQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCJcIiwgRW51bWVyYWJsZS5SYW5nZSgwLCBsZW5ndGgpLlNlbGVjdDxzdHJpbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgc3RyaW5nPikoYml0ID0+IHguSXNCaXRTZXQoYml0KSA/IFwiMVwiIDogXCIwXCIpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBUb1NldCh0aGlzIEludDY0IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb25CaXRzID0gbmV3IExpc3Q8aW50PigxMCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICBvbkJpdHMuQWRkKEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9uQml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IFRvU2V0KHRoaXMgVUludDY0IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb25CaXRzID0gbmV3IExpc3Q8aW50PigxMCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBsc2IgPSB4ICYgKDAgLSB4KTtcclxuICAgICAgICAgICAgICAgIG9uQml0cy5BZGQoRGVCcnVpam5Mb29rdXBbdW5jaGVja2VkKGxzYiAqIERlQnJ1aWpuTXVsdGlwbGllciA+PiA1OCldKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4IF49IGxzYjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9uQml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBFbnVtZXJhdGVCaXRzKHRoaXMgSW50NjQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBsc2IgPSBHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpO1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGxzYjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBUb0ludDY0KHBhcmFtcyBpbnRbXSBiaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiaXQgaW4gYml0cylcclxuICAgICAgICAgICAgICAgIHRvdGFsIHw9IEJpdE1hc2tbYml0XTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBUb0ludDY0KHRoaXMgSUVudW1lcmFibGU8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBzZXQpXHJcbiAgICAgICAgICAgICAgICB0b3RhbCB8PSBCaXRNYXNrW2JpdF07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWxvbmcgVG9VSW50NjQodGhpcyBJRW51bWVyYWJsZTxpbnQ+IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBzZXQpXHJcbiAgICAgICAgICAgICAgICB0b3RhbCB8PSAxVUwgPDwgYml0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8aW50Pj4gRXhwYW5kSW50b0xpc3RzKHRoaXMgTGlzdDxJbnQ2ND4geHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oeHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KSh4ID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oeC5Ub1NldCgpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9TZXRTdHJpbmcodGhpcyBJbnQ2NCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHguVG9TZXQoKS5Ub1NldFN0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9TZXRTdHJpbmdTbWFsbCh0aGlzIEludDY0IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCJ8XCIsIHN0cmluZy5Kb2luPGludD4oXCJcIiwgeC5Ub1NldCgpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgQWxsU2V0KHRoaXMgSW50NjQgeCwgaW50IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKHggXiAoeCArIDEpKS5Jc0JpdFNldChpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxsb25nPiBHZXRCaXRzKHRoaXMgbG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNldEJpdHMgPSBuZXcgTGlzdDxsb25nPigpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9uZyBsc2IgPSB4ICYgLXg7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0Qml0cy5BZGQobHNiKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4IF49IGxzYjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNldEJpdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8dWxvbmc+IEdldEJpdHModGhpcyB1bG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNldEJpdHMgPSBuZXcgTGlzdDx1bG9uZz4oMTYpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWxvbmcgbHNiID0geCAmICgwIC0geCk7XHJcbiAgICAgICAgICAgICAgICBzZXRCaXRzLkFkZChsc2IpO1xyXG4gICAgICAgICAgICAgICAgeCBePSBsc2I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZXRCaXRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9TZXRTdHJpbmcodGhpcyBJRW51bWVyYWJsZTxJbnQ2ND4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIntcIiArIHN0cmluZy5Kb2luKFwiLCBcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KGxpc3QsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgc3RyaW5nPikobCA9PiBsLlRvU2V0U3RyaW5nKCkpKSkgKyBcIn1cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvU2V0U3RyaW5nKHRoaXMgSUVudW1lcmFibGU8aW50PiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwie1wiICsgc3RyaW5nLkpvaW48aW50PihcIiwgXCIsIGxpc3QpICsgXCJ9XCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbnsgXHJcbiAgICBwdWJsaWMgY2xhc3MgTGF6eTxUPlxyXG4gICAge1xyXG4gICAgICAgIEZ1bmM8VD4gX2NyZWF0b3I7XHJcbiAgICAgICAgVCBfdmFsdWUgPSBkZWZhdWx0KFQpO1xyXG4gICAgICAgIG9iamVjdCBfdG9rZW4gPSBuZXcgb2JqZWN0KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBUIFZhbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF92YWx1ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2sgKF90b2tlbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdmFsdWUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92YWx1ZSA9IF9jcmVhdG9yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBfdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXp5KEZ1bmM8VD4gY3JlYXRvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jcmVhdG9yID0gY3JlYXRvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXp5KEZ1bmM8VD4gY3JlYXRvciwgYm9vbCB0aHJlYWRTYWZlKVxyXG4gICAgICAgICAgICA6IHRoaXMoY3JlYXRvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBGb3JnZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAoX3Rva2VuKVxyXG4gICAgICAgICAgICAgICAgX3ZhbHVlID0gZGVmYXVsdChUKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW1wbGljaXQgb3BlcmF0b3IgVChMYXp5PFQ+IGRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhLlZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgT25lRmFjdG9yaXphdGlvbnNPZkNvbXBsZXRlR3JhcGhcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludFtdPiBFbnVtZXJhdGVPbmVGYWN0b3JpemF0aW9ucyhpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgbGlzdCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDE7IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3QgfD0gMUwgPDwgaTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvcmluZyA9IG5ldyBpbnRbbiAqIChuIC0gMSkgLyAyXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuIC0gMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgY29sb3JpbmdbaV0gPSBpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxpc3RzID0gbmV3IGxvbmdbbl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdHNbaV0gPSBsaXN0IF4gKDEgPDwgKGkgLSAxKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJpb3JOZWlnaGJvcnMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcblxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZU9uZUZhY3Rvcml6YXRpb25zKDEsIDIsIG4sIGxpc3RzLCBjb2xvcmluZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8aW50W10+IEVudW1lcmF0ZU9uZUZhY3Rvcml6YXRpb25zKGludCBpLCBpbnQgaiwgaW50IG4sIGxvbmdbXSBsaXN0cywgaW50W10gY29sb3JpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29weSA9IG5ldyBpbnRbY29sb3JpbmcuTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoY29sb3JpbmcsIGNvcHksIGNvbG9yaW5nLkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gY29weTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChqID49IG4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvZiBpbiBFbnVtZXJhdGVPbmVGYWN0b3JpemF0aW9ucyhpICsgMSwgaSArIDIsIG4sIGxpc3RzLCBjb2xvcmluZykpXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG9mO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGMgaW4gKGxpc3RzW2ldICYgbGlzdHNbal0pLkVudW1lcmF0ZUJpdHMoKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0c1tpXSA9IGxpc3RzW2ldLkNsZWFyQml0KGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RzW2pdID0gbGlzdHNbal0uQ2xlYXJCaXQoYyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yaW5nW2kgKiBuIC0gaSAqIChpICsgMSkgLyAyICsgaiAtIGkgLSAxXSA9IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG9mIGluIEVudW1lcmF0ZU9uZUZhY3Rvcml6YXRpb25zKGksIGogKyAxLCBuLCBsaXN0cywgY29sb3JpbmcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gb2Y7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RzW2ldID0gbGlzdHNbaV0uU2V0Qml0KGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RzW2pdID0gbGlzdHNbal0uU2V0Qml0KGMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRTaWduU3VtKGludCBuLCBvdXQgaW50IHBsdXMsIG91dCBpbnQgbWludXMsIEFjdGlvbjxpbnQsIGludD4gcHJvZ3Jlc3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwbHVzID0gMDtcclxuICAgICAgICAgICAgbWludXMgPSAwO1xyXG5cclxuICAgICAgICAgICAgaW50IGxpc3QgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4gLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0IHw9IDEgPDwgaTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvZiA9IG5ldyBpbnRbbiwgbl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgb2ZbMCwgaV0gPSBvZltpLCAwXSA9IGkgLSAxO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxpc3RzID0gbmV3IGludFtuXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0c1tpXSA9IGxpc3QgXiAoMSA8PCAoaSAtIDEpKTtcclxuXHJcbiAgICAgICAgICAgIGludCB0ZXJtID0gbiAqIChuIC0gMSkgJSA0ID09IDAgPyAxIDogLTE7XHJcblxyXG4gICAgICAgICAgICBEb1NpZ25TdW0oMSwgMiwgbiwgbGlzdHMsIG9mLCByZWYgdGVybSwgcmVmIHBsdXMsIHJlZiBtaW51cywgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxpbnQsIGludD4pcHJvZ3Jlc3MpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBsdXMgLSBtaW51cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIERvVGVybShpbnQgdGVybSwgcmVmIGludCBwbHVzLCByZWYgaW50IG1pbnVzLCBBY3Rpb248aW50LCBpbnQ+IHByb2dyZXNzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRlcm0gPiAwKVxyXG4gICAgICAgICAgICAgICAgcGx1cysrO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBtaW51cysrO1xyXG5cclxuICAgICAgICAgICAgaWYgKChwbHVzICsgbWludXMpICUgMTAwMDAwMCA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhwbHVzLCBtaW51cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIERvU2lnblN1bShpbnQgaSwgaW50IGosIGludCBuLCBpbnRbXSBsaXN0cywgaW50WyxdIG9mLCByZWYgaW50IHRlcm0sIHJlZiBpbnQgcGx1cywgcmVmIGludCBtaW51cywgQWN0aW9uPGludCwgaW50PiBwcm9ncmVzcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpID49IG4gLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEb1Rlcm0odGVybSwgcmVmIHBsdXMsIHJlZiBtaW51cywgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxpbnQsIGludD4pcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBsaXN0c1tpXSAmIGxpc3RzW2pdO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHggJiAteDtcclxuICAgICAgICAgICAgICAgICAgICB4IF49IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbaV0gXj0gYztcclxuICAgICAgICAgICAgICAgICAgICBsaXN0c1tqXSBePSBjO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBvZltpLCBqXSA9IG9mW2osIGldID0gYztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZhY3RvciA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgayA9IDA7IGsgPCBpOyBrKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY3RvciAqPSAxIHwgKChjIC0gb2Zbaywgal0pID4+IDMxKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBrID0gMDsgayA8IGo7IGsrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjdG9yICo9IDEgfCAoKGMgLSBvZltpLCBrXSkgPj4gMzEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0ZXJtICo9IGZhY3RvcjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaiA+PSBuIC0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgRG9TaWduU3VtKGkgKyAxLCBpICsgMiwgbiwgbGlzdHMsIG9mLCByZWYgdGVybSwgcmVmIHBsdXMsIHJlZiBtaW51cywgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxpbnQsIGludD4pcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgRG9TaWduU3VtKGksIGogKyAxLCBuLCBsaXN0cywgb2YsIHJlZiB0ZXJtLCByZWYgcGx1cywgcmVmIG1pbnVzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGludCwgaW50Pilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVybSAqPSBmYWN0b3I7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RzW2ldIF49IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbal0gXj0gYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgT25GYWN0b3JpemF0aW9uc09mQ29tcGxldGVHcmFwaFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50W10+IEVudW1lcmF0ZU9uZUZhY3Rvcml6YXRpb25zKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyBsaXN0ID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuIC0gMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdCB8PSAxTCA8PCBpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9yaW5nID0gbmV3IGludFtuICogKG4gLSAxKSAvIDJdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4gLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICBjb2xvcmluZ1tpXSA9IGk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGlzdHMgPSBuZXcgbG9uZ1tuXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxpc3RzW2ldID0gbGlzdCBeICgxIDw8IChpIC0gMSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbG9yaW5nW2kgKiBuIC0gaSAqIChpICsgMSkgLyAyXSA9IGkgLSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoMSwgMiwgbiwgbGlzdHMsIGNvbG9yaW5nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxpbnRbXT4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoaW50IGksIGludCBqLCBpbnQgbiwgbG9uZ1tdIGxpc3RzLCBpbnRbXSBjb2xvcmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpID49IG4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb3B5ID0gbmV3IGludFtjb2xvcmluZy5MZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgQXJyYXkuQ29weShjb2xvcmluZywgY29weSwgY29sb3JpbmcuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBjb3B5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGogPj0gbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG9mIGluIEVudW1lcmF0ZU9uZUZhY3Rvcml6YXRpb25zKGkgKyAxLCBpICsgMiwgbiwgbGlzdHMsIGNvbG9yaW5nKSlcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gb2Y7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYyBpbiAobGlzdHNbaV0gJiBsaXN0c1tqXSkuRW51bWVyYXRlQml0cygpKVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBjbGFzcyBPbmxpbmVDaG9pY2VIYXNoR3JhcGhcclxuICAgIHtcclxuICAgICAgICBpbnRbXSBfZjtcclxuICAgICAgICBpbnRbXSBfZztcclxuICAgICAgICBpbnQgX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgT25saW5lQ2hvaWNlSGFzaEdyYXBoKGludFtdIGYsIGludFtdIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZiA9IChpbnRbXSlmLkNsb25lKCk7XHJcbiAgICAgICAgICAgIF9nID0gKGludFtdKWcuQ2xvbmUoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2cuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfZ1tpXSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIF9mW2ldID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gX2YpXHJcbiAgICAgICAgICAgICAgICBfaGFzaENvZGUgPSBfaGFzaENvZGUgKiAzMyArIGk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciBpIGluIF9nKVxyXG4gICAgICAgICAgICAgICAgX2hhc2hDb2RlID0gX2hhc2hDb2RlICogMzMgKyBpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb3RoZXIgPSBvYmogYXMgT25saW5lQ2hvaWNlSGFzaEdyYXBoO1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8aW50PihfZyxvdGhlci5fZykgJiYgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4oX2Ysb3RoZXIuX2YpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgT3JpZW50YXRpb25IYXNoR3JhcGhcclxuICAgIHtcclxuICAgICAgICBieXRlW10gX3ZhbHVlcztcclxuICAgICAgICBMaXN0PGludD4gX291dE1pbnVzSW47XHJcbiAgICAgICAgaW50IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgcHVibGljIE9yaWVudGF0aW9uSGFzaEdyYXBoKEdyYXBoIGcsIExpc3Q8aW50PiBvdXRNaW51c0luKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3ZhbHVlcyA9IG5ldyBieXRlW2cuTiAqIChnLk4gLSAxKSAvIDJdO1xyXG4gICAgICAgICAgICBfb3V0TWludXNJbiA9IG91dE1pbnVzSW47XHJcblxyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZy5OOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGcuTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IChieXRlKShnW2ksIGpdID8gMSA6IDApO1xyXG4gICAgICAgICAgICAgICAgICAgIF92YWx1ZXNba10gPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oYXNoQ29kZSArPSAxIDw8IChrICUgMzIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIG91dE1pbnVzSW4pXHJcbiAgICAgICAgICAgICAgICBfaGFzaENvZGUgPSBfaGFzaENvZGUgKiAzMyArIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvdGhlciA9IG9iaiBhcyBPcmllbnRhdGlvbkhhc2hHcmFwaDtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4oX291dE1pbnVzSW4sb3RoZXIuX291dE1pbnVzSW4pICYmIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxieXRlPihfdmFsdWVzLG90aGVyLl92YWx1ZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Qb2x5bm9taWFsc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRmFjdG9yZWRSYXRpb25hbFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBzdGF0aWMgRmFjdG9yZWRSYXRpb25hbCBaZXJvID0gbmV3IEZhY3RvcmVkUmF0aW9uYWwoKSB7IFNpZ24gPSAwIH07XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgU2lnbjtcclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IEs7XHJcblxyXG4gICAgICAgIHB1YmxpYyBGYWN0b3JlZFJhdGlvbmFsKCkgeyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBGYWN0b3JlZFJhdGlvbmFsKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHZ2ID0gbmV3IGludFsxMV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGpqID0gMDsgamogPD0gMTA7IGpqKyspXHJcbiAgICAgICAgICAgICAgICB2dltqal0gPSBQb3dlcigyLCBqaik7XHJcblxyXG4gICAgICAgICAgICBTaWduID0gTWF0aC5TaWduKChkZWNpbWFsKW4pO1xyXG4gICAgICAgICAgICBuICo9IFNpZ247XHJcblxyXG4gICAgICAgICAgICBLID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAobiA+IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEsuQWRkKDApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBQcmltZU51bWJlcnMuR2V0KGkpO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gJSBwID09IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgS1tpXSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIG4gLz0gcDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRmFjdG9yZWRSYXRpb25hbCBvcGVyYXRvciAqKEZhY3RvcmVkUmF0aW9uYWwgZmksIEZhY3RvcmVkUmF0aW9uYWwgZmkyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpZ24gPSBmaS5TaWduICogZmkyLlNpZ247XHJcbiAgICAgICAgICAgIHZhciBrID0gbmV3IExpc3Q8aW50PihNYXRoLk1heChmaS5LLkNvdW50LCBmaTIuSy5Db3VudCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNpZ24gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBNYXRoLk1heChmaS5LLkNvdW50LCBmaTIuSy5Db3VudCk7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrLkFkZCgwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IGZpLksuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtbaV0gKz0gZmkuS1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IGZpMi5LLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrW2ldICs9IGZpMi5LW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZhY3RvcmVkUmF0aW9uYWwoKSB7IEsgPSBrLCBTaWduID0gc2lnbiB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBGYWN0b3JlZFJhdGlvbmFsIG9wZXJhdG9yIC8oRmFjdG9yZWRSYXRpb25hbCBmaSwgRmFjdG9yZWRSYXRpb25hbCBmaTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2lnbiA9IGZpLlNpZ24gKiBmaTIuU2lnbjtcclxuICAgICAgICAgICAgdmFyIGsgPSBuZXcgTGlzdDxpbnQ+KE1hdGguTWF4KGZpLksuQ291bnQsIGZpMi5LLkNvdW50KSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2lnbiAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE1hdGguTWF4KGZpLksuQ291bnQsIGZpMi5LLkNvdW50KTsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGsuQWRkKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpIDwgZmkuSy5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICAgICAga1tpXSArPSBmaS5LW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpIDwgZmkyLksuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtbaV0gLT0gZmkyLktbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmFjdG9yZWRSYXRpb25hbCgpIHsgSyA9IGssIFNpZ24gPSBzaWduIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBUb1JhdGlvbmFsKG91dCBpbnQgdG9wLCBvdXQgaW50IGJvdHRvbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChLID09IG51bGwgfHwgU2lnbiA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0b3AgPSAwO1xyXG4gICAgICAgICAgICAgICAgYm90dG9tID0gMTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdG9wID0gU2lnbjtcclxuICAgICAgICAgICAgYm90dG9tID0gMTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBLLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChLW2ldID4gMClcclxuICAgICAgICAgICAgICAgICAgICB0b3AgKj0gUG93ZXIoUHJpbWVOdW1iZXJzLkdldChpKSwgS1tpXSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tICo9IFBvd2VyKFByaW1lTnVtYmVycy5HZXQoaSksIC1LW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IFBvd2VyKGludCBwLCBpbnQgaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0gMTtcclxuICAgICAgICAgICAgd2hpbGUgKGsgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgbiA9IHA7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoZSA8PSBrID4+IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbiAqPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgIGUgPDw9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgayAtPSBlO1xyXG4gICAgICAgICAgICAgICAgbSAqPSBuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuUG9seW5vbWlhbHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdyYXBoUG9seW5vbWlhbFxyXG4gICAge1xyXG4gICAgICAgIEFsZ29yaXRobXMuR3JhcGggX2c7XHJcbiAgICAgICAgTGlzdDxMaXN0PGludD4+IF9wcmlvck5laWdoYm9ycztcclxuICAgICAgICBOb3JtYWxpemVyIF9ub3JtYWxpemVyO1xyXG4gICAgICAgIFNpZ25Mb29rdXAgX3NpZ25Mb29rdXA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIEdyYXBoUG9seW5vbWlhbChBbGdvcml0aG1zLkdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZyA9IGc7XHJcbiAgICAgICBcclxuICAgICAgICAgICAgX3ByaW9yTmVpZ2hib3JzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCB3ID0gMDsgdyA8IF9nLk47IHcrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3ByaW9yTmVpZ2hib3JzLkFkZChuZXcgTGlzdDxpbnQ+KCkpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgdiA9IDA7IHYgPCB3OyB2KyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdbdiwgd10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wcmlvck5laWdoYm9yc1t3XS5BZGQodik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgR2V0Q29lZmZpY2llbnQoaW50W10gcG93ZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfbm9ybWFsaXplciA9IG5ldyBOb3JtYWxpemVyKHBvd2VyKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhID0gbmV3IGludFtwb3dlci5MZW5ndGhdO1xyXG4gICAgICAgICAgICBsb25nIHRvcCA9IDBMO1xyXG4gICAgICAgICAgICBsb25nIGJvdHRvbSA9IDFMO1xyXG4gICAgICAgICAgICB2YXIgcGFydGlhbFByb2R1Y3QgPSBuZXcgRmFjdG9yZWRSYXRpb25hbCgpIHsgSyA9IG5ldyBMaXN0PGludD4oKSwgU2lnbiA9IDEgfTtcclxuICAgICAgICAgICAgU3VtVGVybXMoMCwgYSwgcG93ZXIsIHJlZiBwYXJ0aWFsUHJvZHVjdCwgcmVmIHRvcCwgcmVmIGJvdHRvbSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGludCkodG9wIC8gYm90dG9tKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgR2V0U2lnblN1bShpbnRbXSBwb3dlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9zaWduTG9va3VwID0gbmV3IFNpZ25Mb29rdXAocG93ZXIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGEgPSBuZXcgaW50W3Bvd2VyLkxlbmd0aF07XHJcbiAgICAgICAgICAgIHZhciBzdW0gPSAwO1xyXG4gICAgICAgICAgICB2YXIgcGFydGlhbFByb2R1Y3QgPSAxO1xyXG4gICAgICAgICAgICBTdW1TaWducygwLCBhLCBwb3dlciwgcmVmIHBhcnRpYWxQcm9kdWN0LCByZWYgc3VtKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIFN1bVNpZ25zKGludCB3LCBpbnRbXSBhLCBpbnRbXSBwb3dlciwgcmVmIGludCBwYXJ0aWFsUHJvZHVjdCwgcmVmIGludCBzdW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodyA9PSBwb3dlci5MZW5ndGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN1bSArPSBwYXJ0aWFsUHJvZHVjdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDw9IHBvd2VyW3ddOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYVt3XSA9IGo7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfcHJpb3JOZWlnaGJvcnNbd10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgKj0gX3NpZ25Mb29rdXAuU2lnblthW3ZdLCBhW3ddXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpYWxQcm9kdWN0ICo9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgU3VtU2lnbnModyArIDEsIGEsIHBvd2VyLCByZWYgcGFydGlhbFByb2R1Y3QsIHJlZiBzdW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpYWxQcm9kdWN0IC89IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU3VtVGVybXMoaW50IHcsIGludFtdIGEsIGludFtdIHBvd2VyLCByZWYgRmFjdG9yZWRSYXRpb25hbCBwYXJ0aWFsUHJvZHVjdCwgcmVmIGxvbmcgdG9wLCByZWYgbG9uZyBib3R0b20pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodyA9PSBwb3dlci5MZW5ndGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByID0gcGFydGlhbFByb2R1Y3QgLyBfbm9ybWFsaXplci5HZXQoYSk7XHJcbiAgICAgICAgICAgICAgICBpbnQgdG9wMjtcclxuICAgICAgICAgICAgICAgIGludCBib3R0b20yO1xyXG4gICAgICAgICAgICAgICAgci5Ub1JhdGlvbmFsKG91dCB0b3AyLCBvdXQgYm90dG9tMik7XHJcblxyXG4gICAgICAgICAgICAgICAgdG9wID0gdG9wICogYm90dG9tMiArIGJvdHRvbSAqIHRvcDI7XHJcbiAgICAgICAgICAgICAgICBib3R0b20gPSBib3R0b20gKiBib3R0b20yO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBnY2QgPSBHQ0QodG9wLCBib3R0b20pO1xyXG4gICAgICAgICAgICAgICAgdG9wIC89IGdjZDtcclxuICAgICAgICAgICAgICAgIGJvdHRvbSAvPSBnY2Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8PSBwb3dlclt3XTsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFbd10gPSBqO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IG5ldyBGYWN0b3JlZFJhdGlvbmFsKCkgeyBLID0gbmV3IExpc3Q8aW50PigpLCBTaWduID0gMSB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9wcmlvck5laWdoYm9yc1t3XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCAqPSBfbm9ybWFsaXplci5GYWN0b3JlZERpZmZlcmVuY2VbYVt2XSwgYVt3XV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LlNpZ24gPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpYWxQcm9kdWN0ICo9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgU3VtVGVybXModyArIDEsIGEsIHBvd2VyLCByZWYgcGFydGlhbFByb2R1Y3QsIHJlZiB0b3AsIHJlZiBib3R0b20pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpYWxQcm9kdWN0IC89IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvbmcgR0NEKGxvbmcgeCwgbG9uZyB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyB0bXA7XHJcbiAgICAgICAgICAgIHggPSBNYXRoLkFicyh4KTtcclxuICAgICAgICAgICAgeSA9IE1hdGguQWJzKHkpO1xyXG4gICAgICAgICAgICB3aGlsZSAoeCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRtcCA9IHg7XHJcbiAgICAgICAgICAgICAgICB4ID0geSAlIHg7XHJcbiAgICAgICAgICAgICAgICB5ID0gdG1wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEdyYXBoUG9seW5vbWlhbEV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRDb2VmZmljaWVudCh0aGlzIEFsZ29yaXRobXMuR3JhcGggZywgaW50W10gcG93ZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZ3AgPSBuZXcgR3JhcGhQb2x5bm9taWFsKGcpO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3AuR2V0Q29lZmZpY2llbnQocG93ZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0U2lnblN1bSh0aGlzIEFsZ29yaXRobXMuR3JhcGggZywgaW50W10gcG93ZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZ3AgPSBuZXcgR3JhcGhQb2x5bm9taWFsKGcpO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3AuR2V0U2lnblN1bShwb3dlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlBvbHlub21pYWxzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBOb3JtYWxpemVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEZhY3RvcmVkUmF0aW9uYWxbLF0gRmFjdG9yZWREaWZmZXJlbmNlO1xyXG4gICAgICAgIHB1YmxpYyBGYWN0b3JlZFJhdGlvbmFsWyxdIEluc2lkZVByb2R1Y3Q7XHJcblxyXG4gICAgICAgIHB1YmxpYyBOb3JtYWxpemVyKGludFtdIGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0gaGVpZ2h0Lk1heCgpO1xyXG5cclxuICAgICAgICAgICAgRmFjdG9yZWREaWZmZXJlbmNlID0gbmV3IEZhY3RvcmVkUmF0aW9uYWxbbSArIDEsIG0gKyAxXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPD0gbTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPD0gbTsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIEZhY3RvcmVkRGlmZmVyZW5jZVtpLCBqXSA9IG5ldyBGYWN0b3JlZFJhdGlvbmFsKGkgLSBqKTtcclxuXHJcbiAgICAgICAgICAgIEluc2lkZVByb2R1Y3QgPSBuZXcgRmFjdG9yZWRSYXRpb25hbFtoZWlnaHQuTGVuZ3RoLCBtICsgMV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaGVpZ2h0Lkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8PSBoZWlnaHRbaV07IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBJbnNpZGVQcm9kdWN0W2ksIGpdID0gbmV3IEZhY3RvcmVkUmF0aW9uYWwoKSB7IEsgPSBuZXcgTGlzdDxpbnQ+KCksIFNpZ24gPSAxIH07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgayA9IDA7IGsgPD0gaGVpZ2h0W2ldOyBrKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PSBqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBJbnNpZGVQcm9kdWN0W2ksIGpdICo9IEZhY3RvcmVkRGlmZmVyZW5jZVtqLCBrXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBGYWN0b3JlZFJhdGlvbmFsIEdldChpbnRbXSBhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG5vcm1hbGl6ZXIgPSBuZXcgRmFjdG9yZWRSYXRpb25hbCgpIHsgSyA9IG5ldyBMaXN0PGludD4oKSwgU2lnbiA9IDEgfTtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGEuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBub3JtYWxpemVyICo9IEluc2lkZVByb2R1Y3RbaSwgYVtpXV07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuUG9seW5vbWlhbHNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBQcmltZU51bWJlcnNcclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgTGlzdDxpbnQ+IF9wcmltZXMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzIwKT0+e19vMjAuQWRkKDIpO19vMjAuQWRkKDMpO19vMjAuQWRkKDUpO19vMjAuQWRkKDcpO19vMjAuQWRkKDExKTtfbzIwLkFkZCgxMyk7X28yMC5BZGQoMTcpO19vMjAuQWRkKDE5KTtyZXR1cm4gX28yMDt9KTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0KGludCBpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGkgPj0gX3ByaW1lcy5Db3VudClcclxuICAgICAgICAgICAgICAgIENvbXB1dGVNb3JlUHJpbWVzKGkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIF9wcmltZXNbaV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBDb21wdXRlTW9yZVByaW1lcyhpbnQgaSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0gTWF0aC5NYXgoaSwgMiAqIF9wcmltZXMuQ291bnQpO1xyXG4gICAgICAgICAgICB2YXIgcCA9IF9wcmltZXNbX3ByaW1lcy5Db3VudCAtIDFdICsgMjtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChfcHJpbWVzLkNvdW50IDw9IG0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChJc1ByaW1lKHApKVxyXG4gICAgICAgICAgICAgICAgICAgIF9wcmltZXMuQWRkKHApO1xyXG5cclxuICAgICAgICAgICAgICAgIHAgKz0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgSXNQcmltZShpbnQgcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcihpbnQgayA9IDA7IF9wcmltZXNba10gKiBfcHJpbWVzW2tdIDw9IHA7IGsrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgJSBfcHJpbWVzW2tdID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuUG9seW5vbWlhbHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNpZ25Mb29rdXBcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgaW50WyxdIFNpZ247XHJcbiAgICAgICAgcHVibGljIFNpZ25Mb29rdXAoaW50W10gaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBoZWlnaHQuTWF4KCk7XHJcblxyXG4gICAgICAgICAgICBTaWduID0gbmV3IGludFttICsgMSwgbSArIDFdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8PSBtOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8PSBtOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgU2lnbltpLCBqXSA9IE1hdGguU2lnbigoZGVjaW1hbCkoaSAtIGopKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN1YnNldEVudW1lcmF0b3IgOiBJRW51bWVyYWJsZTxJbnQ2ND5cclxuICAgIHtcclxuICAgICAgICBpbnQgX3NldFNpemU7XHJcbiAgICAgICAgaW50IF9zdWJzZXRTaXplO1xyXG5cclxuICAgICAgICBwdWJsaWMgU3Vic2V0RW51bWVyYXRvcihpbnQgc2V0U2l6ZSwgaW50IHN1YnNldFNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfc2V0U2l6ZSA9IHNldFNpemU7XHJcbiAgICAgICAgICAgIF9zdWJzZXRTaXplID0gc3Vic2V0U2l6ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gSUVudW1lcmFibGU8bG9uZz4gTWVtYmVyc1xyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmF0b3I8SW50NjQ+IEdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKF9zZXRTaXplLCBfc3Vic2V0U2l6ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gSUVudW1lcmFibGUgTWVtYmVyc1xyXG5cclxuICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhYmxlLkdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgcHVibGljIGNsYXNzIEVudW1lcmF0b3IgOiBJRW51bWVyYXRvcjxJbnQ2ND5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJvb2wgX2lzRmlyc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICBpbnQgX3NldFNpemU7XHJcbiAgICAgICAgICAgIGludCBfc3Vic2V0U2l6ZTtcclxuXHJcbiAgICAgICAgICAgIEludDY0IF9jdXJyZW50O1xyXG5cclxuICAgICAgICAgICAgcHVibGljIEVudW1lcmF0b3IoaW50IHNldFNpemUsIGludCBzdWJzZXRTaXplKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfc2V0U2l6ZSA9IHNldFNpemU7XHJcbiAgICAgICAgICAgICAgICBfc3Vic2V0U2l6ZSA9IHN1YnNldFNpemU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gSUVudW1lcmF0b3I8bG9uZz4gTWVtYmVyc1xyXG5cclxuICAgICAgICAgICAgcHVibGljIGxvbmcgQ3VycmVudFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnZXQgeyByZXR1cm4gX2N1cnJlbnQ7IH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBJRGlzcG9zYWJsZSBNZW1iZXJzXHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBEaXNwb3NlKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICAgICAjcmVnaW9uIElFbnVtZXJhdG9yIE1lbWJlcnNcclxuXHJcbiAgICAgICAgICAgIG9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IuQ3VycmVudFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnZXQgeyByZXR1cm4gQ3VycmVudDsgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBNb3ZlTmV4dCgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfaXNGaXJzdClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3N1YnNldFNpemUgPiBfc2V0U2l6ZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfY3VycmVudCA9ICgoMSA8PCBfc3Vic2V0U2l6ZSkgLSAxKSA8PCAoX3NldFNpemUgLSBfc3Vic2V0U2l6ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9pc0ZpcnN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgSW50NjQgbHNiID0gX2N1cnJlbnQgJiAtX2N1cnJlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxzYiA+IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2N1cnJlbnQgPSBfY3VycmVudCBeIGxzYiBeIChsc2IgPj4gMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEludDY0IGhpZ2ggPSBfY3VycmVudCAmIChfY3VycmVudCArIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChoaWdoID09IDApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBJbnQ2NCBsb3cgPSBfY3VycmVudCBeIGhpZ2g7XHJcbiAgICAgICAgICAgICAgICBsb3cgPSAobG93IDw8IDIpICsgMztcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoKGxvdyAmIGhpZ2gpID09IDApIGxvdyA8PD0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICBfY3VycmVudCA9IGhpZ2ggXiBsb3c7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIFJlc2V0KClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2lzRmlyc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBUcmFuc2l0aXZlUGFydGl0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIExpc3Q8UGFydD4gUGFydHMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFRyYW5zaXRpdmVQYXJ0aXRpb24oTGlzdDxpbnQ+IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFBhcnRzID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PFBhcnQ+KCksKF9vMjEpPT57X28yMS5BZGQobmV3IFBhcnQoKSB7IFNldCA9IHNldCwgU2NvcmVzID0gbmV3IExpc3Q8aW50PigpIH0pO3JldHVybiBfbzIxO30pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVmaW5lKGludFtdIHNjb3JlLCBpbnQgc2NvcmVOdW1iZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoUGFydHNbMF0uU2NvcmVzLkNvdW50ID49IHNjb3JlTnVtYmVyKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlZmluZWQgPSBuZXcgTGlzdDxQYXJ0PihQYXJ0cy5Db3VudCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0IGluIFBhcnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gUmVmaW5lUGFydChwYXJ0LCBzY29yZSk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIG1hcClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IG5ldyBQYXJ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5TZXQgPSBrdnAuVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5TY29yZXMgPSBuZXcgTGlzdDxpbnQ+KHBhcnQuU2NvcmVzKTtcclxuICAgICAgICAgICAgICAgICAgICBwLlNjb3Jlcy5BZGQoa3ZwLktleSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlZmluZWQuQWRkKHApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBQYXJ0cyA9IHJlZmluZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBSZWZpbmVQYXJ0KFBhcnQgcGFydCwgaW50W10gc2NvcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWFwID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHBhcnQuU2V0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IHNjb3JlW3ZdO1xyXG4gICAgICAgICAgICAgICAgTGlzdDxpbnQ+IGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1hcC5UcnlHZXRWYWx1ZSh4LCBvdXQgbCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbCA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXBbeF0gPSBsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGwuQWRkKHYpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWFwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdHAgPSBvYmogYXMgVHJhbnNpdGl2ZVBhcnRpdGlvbjtcclxuICAgICAgICAgICAgaWYgKHRwID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydCBpbiBQYXJ0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSB0cC5GaW5kUGFydFdpdGhTY29yZXMocGFydC5TY29yZXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHAuU2V0LkNvdW50ICE9IHBhcnQuU2V0LkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlLkdldEhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBQYXJ0IEZpbmRQYXJ0V2l0aFNjb3JlcyhMaXN0PGludD4gc2NvcmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnQgaW4gUGFydHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChFbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8aW50PihwYXJ0LlNjb3Jlcywgc2NvcmVzKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFydDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgUGFydFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIExpc3Q8aW50PiBTZXQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IFNjb3JlcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBVbnBlcm11dGVkQXNzaWdubWVudEVudW1lcmF0b3IgOiBJRW51bWVyYWJsZTxMaXN0PEludDY0Pj5cclxuICAgIHtcclxuICAgICAgICBpbnQgX3ZlcnRleENvdW50O1xyXG4gICAgICAgIEZ1bmM8aW50LCBpbnQ+IF9mO1xyXG4gICAgICAgIGludCBfcG90U2l6ZTtcclxuICAgICAgICBpbnQgX3N0YXJ0O1xyXG4gICAgICAgIGludCBfc3RlcDtcclxuXHJcbiAgICAgICAgRGljdGlvbmFyeTxsb25nLCBsb25nPiBfcGFpck1hc2tUb0JhZE1hc2s7XHJcblxyXG4gICAgICAgIHB1YmxpYyBVbnBlcm11dGVkQXNzaWdubWVudEVudW1lcmF0b3IoaW50IHZlcnRleENvdW50LCBGdW5jPGludCwgaW50PiBmLCBpbnQgcG90U2l6ZSwgaW50IHN0YXJ0ID0gMCwgaW50IHN0ZXAgPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3ZlcnRleENvdW50ID0gdmVydGV4Q291bnQ7XHJcbiAgICAgICAgICAgIF9mID0gZjtcclxuICAgICAgICAgICAgX3BvdFNpemUgPSBwb3RTaXplO1xyXG4gICAgICAgICAgICBfc3RhcnQgPSBzdGFydDtcclxuICAgICAgICAgICAgX3N0ZXAgPSBzdGVwO1xyXG5cclxuICAgICAgICAgICAgX3BhaXJNYXNrVG9CYWRNYXNrID0gSW50NjRVc2FnZS5HZW5lcmF0ZVBhaXJNYXNrcyhfcG90U2l6ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmF0b3I8TGlzdDxsb25nPj4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4+KEdldEVudW1lcmFibGUoX3ZlcnRleENvdW50KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4sIGludCwgYm9vbD4pKChsaXN0LCBpKSA9PiAoaSAtIF9zdGFydCkgJSBfc3RlcCA9PSAwKSkuR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxsb25nPj4gR2V0RW51bWVyYWJsZVJlY3Vyc2l2ZShpbnQgdmVydGV4Q291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodmVydGV4Q291bnQgPT0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkVuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4+KEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRW5MaXN0PGxvbmc+KCgoKGxvbmcpMSA8PCBfZigwKSkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+PihHZXRFbnVtZXJhYmxlUmVjdXJzaXZlKHZlcnRleENvdW50IC0gMSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPj4+KShsaXN0ID0+IEdldEV4dGVuc2lvbnMobGlzdCkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPExpc3Q8bG9uZz4+IEdldEVudW1lcmFibGUoaW50IHZlcnRleENvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSUVudW1lcmFibGU8TGlzdDxsb25nPj4gZW51bWVyYWJsZSA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRW5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPj4oQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8bG9uZz4oKCgobG9uZykxIDw8IF9mKDApKSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IHZlcnRleENvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4+KGVudW1lcmFibGUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPj4+KShsaXN0ID0+IEdldEV4dGVuc2lvbnMobGlzdCkpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlbnVtZXJhYmxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxsb25nPj4gR2V0RXh0ZW5zaW9ucyhMaXN0PGxvbmc+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcmVzdHJpY3RlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8bG9uZywgbG9uZz4+KF9wYWlyTWFza1RvQmFkTWFzaywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxsb25nLCBsb25nPiwgYm9vbD4pKGt2cCA9PiBJc1Jlc3RyaWN0ZWQoa3ZwLktleSwgbGlzdCkpKTtcclxuXHJcbiAgICAgICAgICAgIGludCBzaXplID0gX2YobGlzdC5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZnJvbSBzdWJzZXQgaW4gbmV3IFN1YnNldEVudW1lcmF0b3IoX3BvdFNpemUsIHNpemUpXHJcbiAgICAgICAgICAgICAgICAgICB3aGVyZSByZXN0cmljdGVkLkFsbCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxsb25nLCBsb25nPiwgYm9vbD4pKGt2cCA9PiAoc3Vic2V0ICYga3ZwLktleSkgIT0ga3ZwLlZhbHVlKSlcclxuICAgICAgICAgICAgICAgICAgIHNlbGVjdCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbmNhdDxsb25nPihsaXN0LG5ld1tdIHsgc3Vic2V0IH0pLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBJc1Jlc3RyaWN0ZWQobG9uZyBwLCBMaXN0PGxvbmc+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgeCBpbiBsaXN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJzZWN0aW9uID0geCAmIHA7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uICE9IDAgJiYgaW50ZXJzZWN0aW9uICE9IHgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvciBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBFcXVpdmFsZW5jZVJlbGF0aW9uPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgRGljdGlvbmFyeTxULCBOb2RlPiBfbm9kZUxvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PFQsIE5vZGU+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZEVsZW1lbnQoVCB0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTG9va3VwTm9kZSh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlbGF0ZShUIHgsIFQgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBueCA9IExvb2t1cE5vZGUoeCk7XHJcbiAgICAgICAgICAgIHZhciBueSA9IExvb2t1cE5vZGUoeSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgeFJvb3QgPSBGaW5kKG54KTtcclxuICAgICAgICAgICAgdmFyIHlSb290ID0gRmluZChueSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoeFJvb3QgPT0geVJvb3QpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAoeFJvb3QuUmFuayA8IHlSb290LlJhbmspXHJcbiAgICAgICAgICAgICAgICB4Um9vdC5QYXJlbnQgPSB5Um9vdDtcclxuICAgICAgICAgICAgZWxzZSBpZiAoeFJvb3QuUmFuayA+IHlSb290LlJhbmspXHJcbiAgICAgICAgICAgICAgICB5Um9vdC5QYXJlbnQgPSB4Um9vdDtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB5Um9vdC5QYXJlbnQgPSB4Um9vdDtcclxuICAgICAgICAgICAgICAgIHhSb290LlJhbmsrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQXJlUmVsYXRlZChUIHgsIFQgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBueCA9IExvb2t1cE5vZGUoeCk7XHJcbiAgICAgICAgICAgIHZhciBueSA9IExvb2t1cE5vZGUoeSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRmluZChueCkgPT0gRmluZChueSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8VD4gR2V0RXF1aXZhbGVuY2VDbGFzcyhUIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbnggPSBMb29rdXBOb2RlKHgpO1xyXG4gICAgICAgICAgICB2YXIgeFJvb3QgPSBGaW5kKG54KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZT4oX25vZGVMb29rdXAuVmFsdWVzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZSwgYm9vbD4pKG5vZGUgPT4gRmluZChub2RlKSA9PSB4Um9vdCkpLlNlbGVjdDxUPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGUsIFQ+KShub2RlID0+IG5vZGUuVCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPElFbnVtZXJhYmxlPFQ+PiBHZXRFcXVpdmFsZW5jZUNsYXNzZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuR3JvdXBCeTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGUsZ2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlPihfbm9kZUxvb2t1cC5WYWx1ZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlLCBnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGU+KShub2RlID0+IEZpbmQobm9kZSkpKS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8VD4+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlLCBnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGU+LCBnbG9iYWw6OlN5c3RlbS5MaW5xLkVudW1lcmFibGVJbnN0YW5jZTxUPj4pKGdyb3VwID0+IGdyb3VwLlNlbGVjdDxUPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGUsIFQ+KShub2RlID0+IG5vZGUuVCkpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBOb2RlIEZpbmQoTm9kZSBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG4uUGFyZW50ICE9IG4pXHJcbiAgICAgICAgICAgICAgICBuLlBhcmVudCA9IEZpbmQobi5QYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG4uUGFyZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTm9kZSBMb29rdXBOb2RlKFQgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5vZGUgbm9kZTtcclxuICAgICAgICAgICAgaWYgKCFfbm9kZUxvb2t1cC5UcnlHZXRWYWx1ZSh0LCBvdXQgbm9kZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXcgTm9kZSgpO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5QYXJlbnQgPSBub2RlO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5SYW5rID0gMDtcclxuICAgICAgICAgICAgICAgIG5vZGUuVCA9IHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgX25vZGVMb29rdXBbdF0gPSBub2RlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNsYXNzIE5vZGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBOb2RlIFBhcmVudCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgUmFuayB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgICAgIHB1YmxpYyBUIFQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZhY3RvcmFkaWNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRmFjdG9yYWRpYyhsb25nIHZhbHVlLCBpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFZhbHVlID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICBEaWdpdHMgPSBuZXcgTGlzdDxpbnQ+KG4pO1xyXG4gICAgICAgICAgICBEaWdpdHMuQWRkKDApO1xyXG5cclxuICAgICAgICAgICAgaW50IGkgPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAodmFsdWUgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEaWdpdHMuQWRkKChpbnQpKHZhbHVlICUgKytpKSk7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlIC8gaTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpID0gRGlnaXRzLkNvdW50OyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgRGlnaXRzLkFkZCgwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBGYWN0b3JhZGljKFBlcm11dGF0aW9uIHApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEaWdpdHMgPSBuZXcgTGlzdDxpbnQ+KHAuTik7XHJcblxyXG4gICAgICAgICAgICBMaXN0PGludD4gZWxlbWVudHMgPSBuZXcgTGlzdDxpbnQ+KHAuTik7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcC5OOyBpKyspXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5BZGQoaSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHAuTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEaWdpdHMuQWRkKGVsZW1lbnRzLkluZGV4T2YocFtpXSkpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuUmVtb3ZlKHBbaV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBEaWdpdHMuUmV2ZXJzZSgpO1xyXG5cclxuICAgICAgICAgICAgVmFsdWUgPSAwO1xyXG4gICAgICAgICAgICBpbnQgbiA9IDE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRGlnaXRzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFZhbHVlICs9IERpZ2l0c1tpXSAqIG47XHJcbiAgICAgICAgICAgICAgICBuICo9IChpICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBEaWdpdHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDtcclxuICAgICAgICAgICAgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbG9uZyBWYWx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0O1xyXG4gICAgICAgICAgICBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgRmxvd3NcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBCaXBhcnRpdGVNYXhpbXVtTWF0Y2hpbmcoaW50IG4sIExpc3Q8TGlzdDxpbnQ+PiBhZGphY2VuY2llcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjYXBhY2l0eSA9IG5ldyBpbnRbbiArIDIsIG4gKyAyXTtcclxuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IDA7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAxO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxvID0gMjtcclxuICAgICAgICAgICAgdmFyIHJvID0gbG8gKyBhZGphY2VuY2llcy5Db3VudDtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYWRqYWNlbmNpZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FwYWNpdHlbc291cmNlLCBsbyArIGldID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaiBpbiBhZGphY2VuY2llc1tpXSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXBhY2l0eVtsbyArIGksIHJvICsgal0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcGFjaXR5W3JvICsgaiwgdGFyZ2V0XSA9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBNYXhGbG93KGNhcGFjaXR5LCBzb3VyY2UsIHRhcmdldCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBNYXhGbG93KGludFssXSBjYXBhY2l0eSwgaW50IHNvdXJjZSwgaW50IHRhcmdldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRm9yZEZ1bGtlcnNvbihjYXBhY2l0eSwgc291cmNlLCB0YXJnZXQpLk1heEZsb3coKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNsYXNzIEZvcmRGdWxrZXJzb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBfbjtcclxuICAgICAgICAgICAgaW50IF9zb3VyY2U7XHJcbiAgICAgICAgICAgIGludCBfdGFyZ2V0O1xyXG4gICAgICAgICAgICBpbnRbLF0gX2NhcGFjaXR5O1xyXG4gICAgICAgICAgICBpbnRbLF0gX2Zsb3c7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgRm9yZEZ1bGtlcnNvbihpbnRbLF0gY2FwYWNpdHksIGludCBzb3VyY2UsIGludCB0YXJnZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9jYXBhY2l0eSA9IGNhcGFjaXR5O1xyXG4gICAgICAgICAgICAgICAgX3NvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgICAgIF90YXJnZXQgPSB0YXJnZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgX24gPSBjYXBhY2l0eS5HZXRMZW5ndGgoMCk7XHJcbiAgICAgICAgICAgICAgICBfZmxvdyA9IG5ldyBpbnRbX24sIF9uXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGludCBNYXhGbG93KClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGggPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzIyKT0+e19vMjIuQWRkKDApO3JldHVybiBfbzIyO30pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkb25lID0gIUZpbmRBdWdtZW50aW5nUGF0aChwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIEFkZEZsb3cocGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVudW1lcmFibGUuUmFuZ2UoMCwgX24pLlN1bSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGkgPT4gX2Zsb3dbX3NvdXJjZSwgaV0pKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYm9vbCBGaW5kQXVnbWVudGluZ1BhdGgoTGlzdDxpbnQ+IHBhdGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBsYXN0ID0gcGF0aFtwYXRoLkNvdW50IC0gMV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3QgPT0gX3RhcmdldClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaiBpbiBPdXROZWlnaGJvcnMobGFzdCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGguQ29udGFpbnMoaikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwYXRoLkFkZChqKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQXVnbWVudGluZyA9IEZpbmRBdWdtZW50aW5nUGF0aChwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBdWdtZW50aW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5SZW1vdmUoaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJRW51bWVyYWJsZTxpbnQ+IE91dE5laWdoYm9ycyhpbnQgaSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBfbjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfY2FwYWNpdHlbaSwgal0gLSBfZmxvd1tpLCBqXSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBqO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2b2lkIEFkZEZsb3coTGlzdDxpbnQ+IHBhdGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBnYWluID0gRmluZEdhaW4ocGF0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwYXRoLkNvdW50IC0gMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9mbG93W3BhdGhbaV0sIHBhdGhbaSArIDFdXSArPSBnYWluO1xyXG4gICAgICAgICAgICAgICAgICAgIF9mbG93W3BhdGhbaSArIDFdLCBwYXRoW2ldXSA9IC1fZmxvd1twYXRoW2ldLCBwYXRoW2kgKyAxXV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGludCBGaW5kR2FpbihMaXN0PGludD4gcGF0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdhaW4gPSBpbnQuTWF4VmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwYXRoLkNvdW50IC0gMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIGdhaW4gPSBNYXRoLk1pbihnYWluLCBfY2FwYWNpdHlbcGF0aFtpXSwgcGF0aFtpICsgMV1dIC0gX2Zsb3dbcGF0aFtpXSwgcGF0aFtpICsgMV1dKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2FpbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgTGlucUV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPFR1cGxlPFQsIFQ+PiBDYXJ0ZXNpYW5Qcm9kdWN0PFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gYSwgSUVudW1lcmFibGU8VD4gYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+LGdsb2JhbDo6U3lzdGVtLlR1cGxlPFQsIFQ+PihDYXJ0ZXNpYW5Qcm9kdWN0PFQ+KG5ld1tdIHsgYSwgYiB9KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+LCBnbG9iYWw6OlN5c3RlbS5UdXBsZTxULCBUPj4pKHMgPT4gbmV3IFR1cGxlPFQsIFQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRWxlbWVudEF0PFQ+KHMsMCksIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRWxlbWVudEF0PFQ+KHMsMSkpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8SUVudW1lcmFibGU8VD4+IENhcnRlc2lhblByb2R1Y3Q8VD4odGhpcyBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxUPj4gc2VxdWVuY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSUVudW1lcmFibGU8SUVudW1lcmFibGU8VD4+IGVtcHR5UHJvZHVjdCA9IG5ld1tdIHsgRW51bWVyYWJsZS5FbXB0eTxUPigpIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4+Pihcclxuc2VxdWVuY2VzLCAgICAgICAgICAgICAgZW1wdHlQcm9kdWN0LFxyXG4oZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4+PikoICAgICAgICAgICAgICAoYWNjdW11bGF0b3IsIHNlcXVlbmNlKSA9PlxyXG4gICAgICAgICAgICAgICAgZnJvbSBhY2NzZXEgaW4gYWNjdW11bGF0b3JcclxuICAgICAgICAgICAgICAgIGZyb20gaXRlbSBpbiBzZXF1ZW5jZVxyXG4gICAgICAgICAgICAgICAgc2VsZWN0IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PFQ+KGFjY3NlcSxuZXdbXSB7IGl0ZW0gfSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8SUVudW1lcmFibGU8VD4+IENhcnRlc2lhblByb2R1Y3Q8VD4odGhpcyBJRW51bWVyYWJsZTxMaXN0PFQ+PiBzZXF1ZW5jZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxUPj4gZW1wdHlQcm9kdWN0ID0gbmV3W10geyBFbnVtZXJhYmxlLkVtcHR5PFQ+KCkgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+Pj4oXHJcbnNlcXVlbmNlcywgICAgICAgICAgICAgIGVtcHR5UHJvZHVjdCxcclxuKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4+PikoICAgICAgICAgICAgICAoYWNjdW11bGF0b3IsIHNlcXVlbmNlKSA9PlxyXG4gICAgICAgICAgICAgICAgZnJvbSBhY2NzZXEgaW4gYWNjdW11bGF0b3JcclxuICAgICAgICAgICAgICAgIGZyb20gaXRlbSBpbiBzZXF1ZW5jZVxyXG4gICAgICAgICAgICAgICAgc2VsZWN0IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PFQ+KGFjY3NlcSxuZXdbXSB7IGl0ZW0gfSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8VD4gQ29uY2F0PFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gZSwgVCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGUpXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gdjtcclxuICAgICAgICAgICAgeWllbGQgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxUPiBEaXN0aW5jdDxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IHNvdXJjZSwgRnVuYzxULCBULCBib29sPiBhcmVFcXVhbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB5aWVsZGVkID0gbmV3IExpc3Q8VD4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIHNvdXJjZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPFQ+KHlpZWxkZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgYm9vbD4pKHggPT4gIWFyZUVxdWFsKHgsIHQpKSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGRlZC5BZGQodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuVXRpbGl0eVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIExpc3RVdGlsaXR5XHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIGNsYXNzIExpc3RVdGlsaXR5R2VuZXJpYzxUPlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RhdGljIEhhc2hTZXQ8VD4gX3NldCA9IG5ldyBIYXNoU2V0PFQ+KCk7XHJcbiAgICAgICAgICAgIHN0YXRpYyBEaWN0aW9uYXJ5PFQsIGludD4gX211bHRpU2V0ID0gbmV3IERpY3Rpb25hcnk8VCwgaW50PigpO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IEludGVyc2VjdGlvbihJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8VD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5CID0gX3NldDtcclxuICAgICAgICAgICAgICAgIGluQi5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEIpXHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLkFkZCh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJzZWN0aW9uID0gbmV3IExpc3Q8VD4oaW5CLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluQi5Db250YWlucyh0KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uLkFkZCh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW50ZXJzZWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIGludCBJbnRlcnNlY3Rpb25Db3VudChJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5CID0gX3NldDtcclxuICAgICAgICAgICAgICAgIGluQi5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEIpXHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLkFkZCh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5CLkNvbnRhaW5zKHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjb3VudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IERpZmZlcmVuY2UoSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEEgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICAgICAgICAgIGlmIChCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgQiA9IG5ldyBMaXN0PFQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGluQiA9IF9zZXQ7XHJcbiAgICAgICAgICAgICAgICBpbkIuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBCKVxyXG4gICAgICAgICAgICAgICAgICAgIGluQi5BZGQodCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRpZmZlcmVuY2UgPSBuZXcgTGlzdDxUPihpbkIuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWluQi5Db250YWlucyh0KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZS5BZGQodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpZmZlcmVuY2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBVbmlvbihMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCAmJiBCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PFQ+KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoQSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBCO1xyXG4gICAgICAgICAgICAgICAgaWYgKEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5CID0gX3NldDtcclxuICAgICAgICAgICAgICAgIGluQi5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKFQgdCBpbiBCKVxyXG4gICAgICAgICAgICAgICAgICAgIGluQi5BZGQodCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHVuaW9uID0gbmV3IExpc3Q8VD4oQik7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChUIHQgaW4gQSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWluQi5Db250YWlucyh0KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pb24uQWRkKHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IFVuaW9uKExpc3Q8VD4gQSwgVCBiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdW5pb24gPSBuZXcgTGlzdDxUPihBKTtcclxuICAgICAgICAgICAgICAgIGlmICghdW5pb24uQ29udGFpbnMoYikpXHJcbiAgICAgICAgICAgICAgICAgICAgdW5pb24uQWRkKGIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IE11bHRpU2V0SW50ZXJzZWN0aW9uKElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxUPigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbkIgPSBfbXVsdGlTZXQ7XHJcbiAgICAgICAgICAgICAgICBpbkIuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBCKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBjb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBpbkIuVHJ5R2V0VmFsdWUodCwgb3V0IGNvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5CW3RdID0gY291bnQgKyAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbnRlcnNlY3Rpb24gPSBuZXcgTGlzdDxUPihpbkIuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLlRyeUdldFZhbHVlKHQsIG91dCBjb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24uQWRkKHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbkJbdF0gPSBjb3VudCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcnNlY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IE11bHRpU2V0SW50ZXJzZWN0aW9uQ291bnQoSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGluQiA9IF9tdWx0aVNldDtcclxuICAgICAgICAgICAgICAgIGluQi5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGluQi5UcnlHZXRWYWx1ZSh0LCBvdXQgY291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbkJbdF0gPSBjb3VudCArIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGluQi5UcnlHZXRWYWx1ZSh0LCBvdXQgY291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5CW3RdID0gY291bnQgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gc29ydGVkIGxpc3RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IERpZmZlcmVuY2VTb3J0ZWQ8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICAgICAgd2hlcmUgVCA6IElDb21wYXJhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PFQ+KEEpO1xyXG5cclxuICAgICAgICAgICAgdmFyIEMgPSBuZXcgTGlzdDxUPihNYXRoLk1heCg0LCBBLkNvdW50IC0gQi5Db3VudCkpO1xyXG4gICAgICAgICAgICBpbnQgaiA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgQS5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoaiA8IEIuQ291bnQgJiYgQVtpXS5Db21wYXJlVG8oQltqXSkgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGorKztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaiA+PSBCLkNvdW50IHx8IEFbaV0uQ29tcGFyZVRvKEJbal0pIDwgMClcclxuICAgICAgICAgICAgICAgICAgICBDLkFkZChBW2ldKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gSW50ZXJzZWN0aW9uU29ydGVkPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8VD4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBDID0gbmV3IExpc3Q8VD4oTWF0aC5NaW4oQS5Db3VudCwgQi5Db3VudCkpO1xyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIGludCBqID0gMDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChpIDwgQS5Db3VudCAmJiBqIDwgQi5Db3VudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBhcmUgPSBBW2ldLkNvbXBhcmVUbyhCW2pdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIEMuQWRkKEFbaV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmUgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZSA+PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGorKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBJbnRlcnNlY3Rpb25Db3VudFNvcnRlZDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIGludCBqID0gMDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChpIDwgQS5Db3VudCAmJiBqIDwgQi5Db3VudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBhcmUgPSBBW2ldLkNvbXBhcmVUbyhCW2pdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlID49IDApXHJcbiAgICAgICAgICAgICAgICAgICAgaisrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gVW5pb25Tb3J0ZWQ8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICAgICAgd2hlcmUgVCA6IElDb21wYXJhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGlzdCA9IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5EaWZmZXJlbmNlU29ydGVkPFQ+KEEsQik7XHJcbiAgICAgICAgICAgIGxpc3QuQWRkUmFuZ2UoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkRpZmZlcmVuY2VTb3J0ZWQ8VD4oQixBKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBFcXVhbFNvcnRlZDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBLkNvdW50ID09IEIuQ291bnQgJiYgSW50ZXJzZWN0aW9uQ291bnRTb3J0ZWQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBTdWJzZXRFcXVhbFNvcnRlZDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJbnRlcnNlY3Rpb25Db3VudFNvcnRlZDxUPihBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFN1YnNldFNvcnRlZDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBLkNvdW50IDwgQi5Db3VudCAmJiBJbnRlcnNlY3Rpb25Db3VudFNvcnRlZDxUPihBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8VD4+IE1heGltYWxFbGVtZW50c1NvcnRlZDxUPih0aGlzIExpc3Q8TGlzdDxUPj4gQSlcclxuICAgICAgICAgICAgd2hlcmUgVCA6IElDb21wYXJhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEEuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxMaXN0PFQ+PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNoYWluSGVhZHMgPSBuZXcgTGlzdDxMaXN0PFQ+PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNldCBpbiBBKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlZCA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oY2hhaW5IZWFkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShoZWFkID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbFNvcnRlZDxUPihoZWFkLHNldCkpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKCh4KSA9PiB7IH0gKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVtb3ZlZCA+IDAgfHwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKGhlYWQgPT4gIUFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbFNvcnRlZDxUPihzZXQsaGVhZCkpKSlcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbkhlYWRzLkFkZChzZXQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hhaW5IZWFkcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gaW50IHNwZWNpZmljXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gRGlmZmVyZW5jZVNvcnRlZCh0aGlzIExpc3Q8aW50PiBBLCBMaXN0PGludD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihBKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBDID0gbmV3IExpc3Q8aW50PihNYXRoLk1heCg0LCBBLkNvdW50IC0gQi5Db3VudCkpO1xyXG4gICAgICAgICAgICBpbnQgaiA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgQS5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoaiA8IEIuQ291bnQgJiYgQVtpXSA+IEJbal0pXHJcbiAgICAgICAgICAgICAgICAgICAgaisrO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChqID49IEIuQ291bnQgfHwgQVtpXSA8IEJbal0pXHJcbiAgICAgICAgICAgICAgICAgICAgQy5BZGQoQVtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gSW50ZXJzZWN0aW9uU29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIEMgPSBuZXcgTGlzdDxpbnQ+KE1hdGguTWluKEEuQ291bnQsIEIuQ291bnQpKTtcclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICBpbnQgaiA9IDA7XHJcblxyXG4gICAgICAgICAgICBpbnQgYWMgPSBBLkNvdW50O1xyXG4gICAgICAgICAgICBpbnQgYmMgPSBCLkNvdW50O1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IGFjICYmIGogPCBiYylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBBW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBCW2pdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhID09IGIpXHJcbiAgICAgICAgICAgICAgICAgICAgQy5BZGQoYSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYSA8PSBiKVxyXG4gICAgICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgIGlmIChhID49IGIpXHJcbiAgICAgICAgICAgICAgICAgICAgaisrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEludGVyc2VjdGlvbkNvdW50U29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuICAgICAgICAgICAgaW50IGogPSAwO1xyXG5cclxuICAgICAgICAgICAgaW50IGFjID0gQS5Db3VudDtcclxuICAgICAgICAgICAgaW50IGJjID0gQi5Db3VudDtcclxuICAgICAgICAgICAgd2hpbGUgKGkgPCBhYyAmJiBqIDwgYmMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBhID0gQVtpXTtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gQltqXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYSA9PSBiKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICBpZiAoYSA8PSBiKVxyXG4gICAgICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgIGlmIChhID49IGIpXHJcbiAgICAgICAgICAgICAgICAgICAgaisrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBVbmlvblNvcnRlZCh0aGlzIExpc3Q8aW50PiBBLCBMaXN0PGludD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gQS5EaWZmZXJlbmNlU29ydGVkKEIpO1xyXG4gICAgICAgICAgICBsaXN0LkFkZFJhbmdlKEIuRGlmZmVyZW5jZVNvcnRlZChBKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBFcXVhbFNvcnRlZCh0aGlzIExpc3Q8aW50PiBBLCBMaXN0PGludD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBLkNvdW50ID09IEIuQ291bnQgJiYgSW50ZXJzZWN0aW9uQ291bnRTb3J0ZWQoQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBTdWJzZXRFcXVhbFNvcnRlZCh0aGlzIExpc3Q8aW50PiBBLCBMaXN0PGludD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJbnRlcnNlY3Rpb25Db3VudFNvcnRlZChBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFN1YnNldFNvcnRlZCh0aGlzIExpc3Q8aW50PiBBLCBMaXN0PGludD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBLkNvdW50IDwgQi5Db3VudCAmJiBJbnRlcnNlY3Rpb25Db3VudFNvcnRlZChBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8aW50Pj4gTWF4aW1hbEVsZW1lbnRzU29ydGVkKHRoaXMgTGlzdDxMaXN0PGludD4+IEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEEuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2hhaW5IZWFkcyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzZXQgaW4gQSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlbW92ZWQgPSBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oY2hhaW5IZWFkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKGhlYWQgPT4gaGVhZC5TdWJzZXRFcXVhbFNvcnRlZChzZXQpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKCh4KSA9PiB7IH0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZW1vdmVkID4gMCB8fCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oY2hhaW5IZWFkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKGhlYWQgPT4gIXNldC5TdWJzZXRFcXVhbFNvcnRlZChoZWFkKSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSGVhZHMuQWRkKHNldCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaGFpbkhlYWRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gTXVsdGlTZXRJbnRlcnNlY3Rpb248VD4odGhpcyBJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5R2VuZXJpYzxUPi5NdWx0aVNldEludGVyc2VjdGlvbihBLCBCKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IE11bHRpU2V0SW50ZXJzZWN0aW9uQ291bnQ8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5R2VuZXJpYzxUPi5NdWx0aVNldEludGVyc2VjdGlvbkNvdW50KEEsIEIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIE11bHRpU2V0RXF1YWw8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBLkNvdW50ID09IEIuQ291bnQgJiYgTXVsdGlTZXRJbnRlcnNlY3Rpb25Db3VudDxUPihBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIE11bHRpU2V0U3Vic2V0RXF1YWw8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBNdWx0aVNldEludGVyc2VjdGlvbkNvdW50PFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgTXVsdGlTZXRTdWJzZXQ8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBLkNvdW50IDwgQi5Db3VudCAmJiBNdWx0aVNldEludGVyc2VjdGlvbkNvdW50PFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgQmlub21pYWxDb2VmZmljaWVudChsb25nIG4sIGxvbmcgaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChrIDwgMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxvbmcgbWF4ID0gTWF0aC5NYXgoaywgbiAtIGspO1xyXG4gICAgICAgICAgICBsb25nIG1pbiA9IE1hdGguTWluKGssIG4gLSBrKTtcclxuXHJcbiAgICAgICAgICAgIGxvbmcgcmVzdWx0ID0gMTtcclxuICAgICAgICAgICAgd2hpbGUgKG4gPiBtYXgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCAqPSBuO1xyXG4gICAgICAgICAgICAgICAgbi0tO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAobWluID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0IC89IG1pbjtcclxuXHJcbiAgICAgICAgICAgICAgICBtaW4tLTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvU3RyaW5nPFQ+KExpc3Q8VD4gQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoIChUIHQgaW4gQSlcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZEZvcm1hdChcInswfSwgXCIsIHQuVG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2IuVG9TdHJpbmcoKS5UcmltRW5kKCcgJywgJywnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBEaWZmZXJlbmNlPFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eUdlbmVyaWM8VD4uRGlmZmVyZW5jZShBLCBCKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBJbnRlcnNlY3Rpb248VD4odGhpcyBJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5R2VuZXJpYzxUPi5JbnRlcnNlY3Rpb24oQSwgQik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBJbnRlcnNlY3Rpb25Db3VudDxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHlHZW5lcmljPFQ+LkludGVyc2VjdGlvbkNvdW50KEEsIEIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IFVuaW9uPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHlHZW5lcmljPFQ+LlVuaW9uKEEsIEIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IFVuaW9uPFQ+KHRoaXMgTGlzdDxUPiBBLCBUIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHlHZW5lcmljPFQ+LlVuaW9uKEEsIGIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEVxdWFsPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5Db3VudCA9PSBCLkNvdW50ICYmIEludGVyc2VjdGlvbkNvdW50PFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU3Vic2V0RXF1YWw8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJbnRlcnNlY3Rpb25Db3VudDxUPihBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFN1YnNldDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPCBCLkNvdW50ICYmIEludGVyc2VjdGlvbkNvdW50PFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxUPj4gTWF4aW1hbEVsZW1lbnRzPFQ+KHRoaXMgTGlzdDxMaXN0PFQ+PiBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBBLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8TGlzdDxUPj4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjaGFpbkhlYWRzID0gbmV3IExpc3Q8TGlzdDxUPj4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzZXQgaW4gQSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlbW92ZWQgPSBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGNoYWluSGVhZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoaGVhZCA9PiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWw8VD4oaGVhZCxzZXQpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVtb3ZlZCA+IDAgfHwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKGhlYWQgPT4gIUFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbDxUPihzZXQsaGVhZCkpKSlcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbkhlYWRzLkFkZChzZXQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hhaW5IZWFkcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PFQ+PiBHZW5lcmF0ZVN1Ymxpc3RzPFQ+KHRoaXMgTGlzdDxUPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxMaXN0PFQ+PiBzdWJsaXN0cyA9IG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcbiAgICAgICAgICAgIHN1Ymxpc3RzLkFkZChuZXcgTGlzdDxUPigpKTtcclxuXHJcbiAgICAgICAgICAgIExpc3Q8VD4gY2xvbmUgPSBuZXcgTGlzdDxUPihsaXN0KTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChjbG9uZS5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFQgaGVhZCA9IGNsb25lWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgIGludCBjb3VudCA9IHN1Ymxpc3RzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIExpc3Q8VD4gdW5pb24gPSBuZXcgTGlzdDxUPihzdWJsaXN0c1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5pb24uQWRkKGhlYWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdWJsaXN0cy5BZGQodW5pb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNsb25lLlJlbW92ZUF0KDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3VibGlzdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxUPj4gR2VuZXJhdGVTdWJsaXN0czxUPih0aGlzIExpc3Q8VD4gbGlzdCwgaW50IHNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PExpc3Q8VD4+IHN1Ymxpc3RzID0gbmV3IExpc3Q8TGlzdDxUPj4oKTtcclxuICAgICAgICAgICAgaW50IG4gPSBsaXN0LkNvdW50O1xyXG4gICAgICAgICAgICBmb3JlYWNoIChMaXN0PGJvb2w+IGluT3V0IGluIEVudW1lcmF0ZVNob3J0TGV4KG4sIHNpemUpKVxyXG4gICAgICAgICAgICAgICAgc3VibGlzdHMuQWRkKEV4dHJhY3RTdWJsaXN0PFQ+KGxpc3QsIGluT3V0KSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3VibGlzdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8VD4+IEVudW1lcmF0ZVN1Ymxpc3RzPFQ+KHRoaXMgTGlzdDxUPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IG4gPSBsaXN0LkNvdW50O1xyXG4gICAgICAgICAgICBmb3JlYWNoIChMaXN0PGJvb2w+IGluT3V0IGluIEVudW1lcmF0ZVNob3J0TGV4KG4pKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIEV4dHJhY3RTdWJsaXN0PFQ+KGxpc3QsIGluT3V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxUPj4gRW51bWVyYXRlU3VibGlzdHM8VD4odGhpcyBMaXN0PFQ+IGxpc3QsIGludCBzaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IG4gPSBsaXN0LkNvdW50O1xyXG4gICAgICAgICAgICBmb3JlYWNoIChMaXN0PGJvb2w+IGluT3V0IGluIEVudW1lcmF0ZVNob3J0TGV4KG4sIHNpemUpKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIEV4dHJhY3RTdWJsaXN0PFQ+KGxpc3QsIGluT3V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBOZXh0U3VibGlzdDxUPihMaXN0PFQ+IGxpc3QsIGludCBzaXplLCByZWYgTGlzdDxib29sPiBzdGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBuID0gbGlzdC5Db3VudDtcclxuICAgICAgICAgICAgYm9vbCBhcmVNb3JlID0gTmV4dFNob3J0TGV4KG4sIHNpemUsIHJlZiBzdGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBMaXN0PFQ+IHN1Ymxpc3QgPSBFeHRyYWN0U3VibGlzdDxUPihsaXN0LCBzdGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWFyZU1vcmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN1Ymxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgTGlzdDxUPiBFeHRyYWN0U3VibGlzdDxUPihMaXN0PFQ+IGxpc3QsIExpc3Q8Ym9vbD4gaW5PdXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PFQ+IHN1Ymxpc3QgPSBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGluT3V0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbk91dFtpXSlcclxuICAgICAgICAgICAgICAgICAgICBzdWJsaXN0LkFkZChsaXN0W2ldKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN1Ymxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxib29sPj4gRW51bWVyYXRlU2hvcnRMZXgoaW50IG4sIGludCBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgayA9IE1hdGguTWF4KDAsIGspO1xyXG5cclxuICAgICAgICAgICAgTGlzdDxib29sPiBsaXN0ID0gbmV3IExpc3Q8Ym9vbD4obik7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgazsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdC5BZGQodHJ1ZSk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBrOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdC5BZGQoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgZG9cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2hpbGUgKE5leHRTYW1lVHJ1ZUNvdW50KGxpc3QsIGspKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxib29sPj4gRW51bWVyYXRlU2hvcnRMZXgoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGlzdCA9IG5ldyBMaXN0PGJvb2w+KG4pO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3QuQWRkKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGRvXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBsaXN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdoaWxlIChOZXh0KGxpc3QpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxib29sPj4gRW51bWVyYXRlU2hvcnRMZXhOb25lbXB0eShpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGsgPSAxOyBrIDw9IG47IGsrKylcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBsaXN0IGluIEVudW1lcmF0ZVNob3J0TGV4KG4sIGspKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgTmV4dFNob3J0TGV4KGludCBuLCBpbnQgaywgcmVmIExpc3Q8Ym9vbD4gc3RhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgayA9IE1hdGguTWF4KDAsIGspO1xyXG5cclxuICAgICAgICAgICAgICAgIHN0YXRlID0gbmV3IExpc3Q8Ym9vbD4obik7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGs7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5BZGQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gazsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5BZGQoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBrID4gMCAmJiBrIDwgbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE5leHRTYW1lVHJ1ZUNvdW50KHN0YXRlLCBrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIE5leHQoTGlzdDxib29sPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHRydWVDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Ym9vbD4oKChJRW51bWVyYWJsZTxib29sPilsaXN0KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxib29sLCBib29sPikoYiA9PiBiKSk7XHJcbiAgICAgICAgICAgIGlmICh0cnVlQ291bnQgPT0gbGlzdC5Db3VudClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGludCBmaXJzdEhvbGUgPSBGaW5kRmlyc3RIb2xlKGxpc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZpcnN0SG9sZSA+PSBsaXN0LkNvdW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHRydWVDb3VudCArIDE7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBsaXN0W2ldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSB0cnVlQ291bnQgKyAxOyBpIDwgbGlzdC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RbaV0gPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxpc3RbZmlyc3RIb2xlXSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaW50IGluaXRpYWxUcnVlcyA9IHRydWVDb3VudDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBmaXJzdEhvbGU7IGkgPCBsaXN0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxUcnVlcy0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5pdGlhbFRydWVzOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdFtpXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gaW5pdGlhbFRydWVzOyBpIDwgZmlyc3RIb2xlOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdFtpXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIE5leHRTYW1lVHJ1ZUNvdW50KExpc3Q8Ym9vbD4gbGlzdCwgaW50IHRydWVDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBmaXJzdEhvbGUgPSBGaW5kRmlyc3RIb2xlKGxpc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZpcnN0SG9sZSA+PSBsaXN0LkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgbGlzdFtmaXJzdEhvbGVdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGludCBpbml0aWFsVHJ1ZXMgPSB0cnVlQ291bnQ7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBmaXJzdEhvbGU7IGkgPCBsaXN0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChsaXN0W2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxUcnVlcy0tO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGluaXRpYWxUcnVlczsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdFtpXSA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBpbml0aWFsVHJ1ZXM7IGkgPCBmaXJzdEhvbGU7IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3RbaV0gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGludCBGaW5kRmlyc3RIb2xlKExpc3Q8Ym9vbD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGkgPCBsaXN0LkNvdW50IC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RbaV0gJiYgIWxpc3RbaSArIDFdKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGkgKyAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBpbnQgYmFzZWRcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgTmV4dFNob3J0TGV4KGludCBuLCBpbnQgaywgcmVmIGludFtdIHN0YXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN0YXRlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGsgPSBNYXRoLk1heCgwLCBrKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IG5ldyBpbnRbbl07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGs7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZVtpXSA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGsgPD0gMCB8fCBrID49IG47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJvb2wgZG9uZSA9ICFOZXh0U2FtZU9uQ291bnQoc3RhdGUsIGspO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRvbmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgazsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlW2ldID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gazsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZVtpXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkb25lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgTmV4dFNhbWVPbkNvdW50KGludFtdIGxpc3QsIGludCB0cnVlQ291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgZmlyc3RIb2xlID0gRmluZEZpcnN0SG9sZShsaXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmaXJzdEhvbGUgPj0gbGlzdC5MZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBsaXN0W2ZpcnN0SG9sZV0gPSAxO1xyXG5cclxuICAgICAgICAgICAgaW50IGluaXRpYWxPbmVzID0gdHJ1ZUNvdW50O1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gZmlyc3RIb2xlOyBpIDwgbGlzdC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5pdGlhbE9uZXMgLT0gbGlzdFtpXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpbml0aWFsT25lczsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdFtpXSA9IDE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBpbml0aWFsT25lczsgaSA8IGZpcnN0SG9sZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdFtpXSA9IDA7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBpbnQgRmluZEZpcnN0SG9sZShpbnRbXSBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IGxpc3QuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RbaV0gPT0gMSAmJiBsaXN0W2kgKyAxXSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGkgKyAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIHBhcnRpdGlvbnNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8TGlzdDxpbnQ+Pj4gRW51bWVyYXRlUGFydGl0aW9uc1Vub3JkZXJlZChpbnRbXSBzaXplcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oRW51bWVyYXRlUGFydGl0aW9ucyhzaXplcywgMCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgYm9vbD4pKChhYSwgYmIpID0+IFBhcnRpYWxPcmRlci5FbWJlZHM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGFhLCBiYiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QYXJ0aWFsT3JkZXJSZXN1bHQ+KSgoYSwgYikgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkVxdWFsPGludD4oYSxiKSA/IG5ldyBQYXJ0aWFsT3JkZXJSZXN1bHQoKSB7IEF0TW9zdCA9IHRydWUsIEF0TGVhc3QgPSB0cnVlIH0gOiBuZXcgUGFydGlhbE9yZGVyUmVzdWx0KCkpKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PExpc3Q8aW50Pj4+IEVudW1lcmF0ZVBhcnRpdGlvbnMoaW50W10gc2l6ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlUGFydGl0aW9ucyhzaXplcywgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxMaXN0PGludD4+PiBFbnVtZXJhdGVQYXJ0aXRpb25zKGludFtdIHNpemVzLCBpbnQgaXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZGxlc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNpemVzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2l6ZXNbaV0gPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjaGlsZGxlc3MgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBzaXplc1tpXS0tO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0aXRpb24gaW4gRW51bWVyYXRlUGFydGl0aW9ucyhzaXplcywgaXRlbSArIDEpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpdGlvbltpXS5BZGQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHBhcnRpdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzaXplc1tpXSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY2hpbGRsZXNzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydGl0aW9uID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzaXplcy5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0aXRpb24uQWRkKG5ldyBMaXN0PGludD4oKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHBhcnRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuVXRpbGl0eVxyXG57XHJcbiAgICBwdWJsaWMgc3RydWN0IFBhcnRpYWxPcmRlclJlc3VsdFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBib29sIEF0TW9zdDtcclxuICAgICAgICBwdWJsaWMgYm9vbCBBdExlYXN0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgUGFydGlhbE9yZGVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEVtYmVkczxUPihMaXN0PFQ+IEEsIExpc3Q8VD4gQiwgRnVuYzxULCBULCBQYXJ0aWFsT3JkZXJSZXN1bHQ+IG9yZGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEEuQ291bnQgPiBCLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG4gPSBBLkNvdW50ICsgQi5Db3VudDtcclxuICAgICAgICAgICAgdmFyIGFkamFjZW5jaWVzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PihBLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhIGluIEEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZWlnaGJvcnMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgQi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBvcmRlcihhLCBCW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LkF0TW9zdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzLkFkZChpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBhZGphY2VuY2llcy5BZGQobmVpZ2hib3JzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEZsb3dzLkJpcGFydGl0ZU1heGltdW1NYXRjaGluZyhuLCBhZGphY2VuY2llcykgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuVXRpbGl0eVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUGVybXV0YXRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgUGVybXV0YXRpb24oRmFjdG9yYWRpYyBmKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNlcXVlbmNlID0gbmV3IExpc3Q8aW50PihmLkRpZ2l0cy5Db3VudCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZi5EaWdpdHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlLkFkZChpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZi5EaWdpdHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGogPSBmLkRpZ2l0c1tmLkRpZ2l0cy5Db3VudCAtIDEgLSBpXSArIGk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2UuSW5zZXJ0KGksIHNlcXVlbmNlW2pdKTtcclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlLlJlbW92ZUF0KGogKyAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU2VxdWVuY2UgPSBzZXF1ZW5jZTtcclxuICAgICAgICAgICAgTiA9IFNlcXVlbmNlLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFBlcm11dGF0aW9uKExpc3Q8aW50PiBzZXF1ZW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFNlcXVlbmNlID0gbmV3IExpc3Q8aW50PihzZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgIE4gPSBTZXF1ZW5jZS5Db3VudDtcclxuXHJcbiAgICAgICAgICAgIHZhciBoYXNoID0gbmV3IERpY3Rpb25hcnk8aW50LCBib29sPigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChpbnQgaSBpbiBzZXF1ZW5jZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhc2guQ29udGFpbnNLZXkoaSkpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlRoZSBzdXBwbGllZCBzZXF1ZW5jZSBoYXMgZHVwbGljYXRlcy5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCAwIHx8IGkgPiBOIC0gMSlcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiVGhlIHN1cHBsaWVkIHNlcXVlbmNlIGhhcyBlbGVtZW50cyB0aGF0IGFyZSBvdXQgb2YgcmFuZ2UuXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGhhc2hbaV0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxUPiBBcHBseTxUPihMaXN0PFQ+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobGlzdCA9PSBudWxsIHx8IGxpc3QuQ291bnQgIT0gTilcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJUaGUgcGVybXV0YXRpb24gY2Fubm90IGJlIGFwcGxpZWQgdG8gdGhlIGdpdmVuIGxpc3QuXCIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBlcm11dGVkTGlzdCA9IG5ldyBMaXN0PFQ+KE4pO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBwZXJtdXRlZExpc3QuQWRkKGxpc3RbdGhpc1tpXV0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBlcm11dGVkTGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQZXJtdXRhdGlvbiBJbnZlcnNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzZXF1ZW5jZSA9IG5ldyBpbnRbTl07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlW3RoaXNbaV1dID0gaTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVybXV0YXRpb24obmV3IExpc3Q8aW50PihzZXF1ZW5jZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBQZXJtdXRhdGlvbiBvcGVyYXRvciAqKFBlcm11dGF0aW9uIHAxLCBQZXJtdXRhdGlvbiBwMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChwMSA9PSBudWxsIHx8IHAyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmIChwMS5OICE9IHAyLk4pXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiWW91IHRyaWVkIHRvIG11bHRpcGx5IHBlcm11dGF0aW9ucyBvZiBkaWZmZXJlbnQgc2V0cy5cIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VxdWVuY2UgPSBuZXcgTGlzdDxpbnQ+KHAyLk4pO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwMi5OOyBpKyspXHJcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZS5BZGQocDFbcDJbaV1dKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVybXV0YXRpb24oc2VxdWVuY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yID09KFBlcm11dGF0aW9uIHAxLCBQZXJtdXRhdGlvbiBwMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgob2JqZWN0KXAxID09IG51bGwgJiYgKG9iamVjdClwMiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGlmICgob2JqZWN0KXAxID09IG51bGwgfHwgKG9iamVjdClwMiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHAxLkVxdWFscyhwMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgIT0oUGVybXV0YXRpb24gcDEsIFBlcm11dGF0aW9uIHAyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICEocDEgPT0gcDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob2JqID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gVG9TdHJpbmcoKSA9PSBvYmouVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiKFwiICsgc3RyaW5nLkpvaW48aW50PihcIiBcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oU2VxdWVuY2UsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShpID0+IGkgKyAxKSkpICsgXCIpXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBUb1N0cmluZygpLkdldEhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPFBlcm11dGF0aW9uPiBFbnVtZXJhdGVBbGwoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSBDb3VudGluZy5GYWN0b3JpYWwobik7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxvbmcgaSA9IDA7IGkgPCBjb3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5ldyBQZXJtdXRhdGlvbihuZXcgRmFjdG9yYWRpYyhpLCBuKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IHRoaXNbaW50IGldXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFNlcXVlbmNlW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IFNlcXVlbmNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQ7XHJcbiAgICAgICAgICAgIHByaXZhdGUgc2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBOXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQ7XHJcbiAgICAgICAgICAgIHByaXZhdGUgc2V0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNhZmVDb2xsZWN0aW9uPFQ+IDogSUNvbGxlY3Rpb248VD5cclxuICAgIHtcclxuICAgICAgICBpbnQgX2NvdW50O1xyXG4gICAgICAgIE5vZGUgX2ZpcnN0O1xyXG4gICAgICAgIE5vZGUgX2xhc3Q7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTYWZlQ29sbGVjdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZmlyc3QgPSBuZXcgTm9kZSgpO1xyXG4gICAgICAgICAgICBfbGFzdCA9IF9maXJzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZChUIGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfbGFzdC5OZXh0ID0gbmV3IE5vZGUoKSB7IEl0ZW0gPSBpdGVtIH07XHJcbiAgICAgICAgICAgIF9sYXN0ID0gX2xhc3QuTmV4dDtcclxuICAgICAgICAgICAgX2NvdW50Kys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbGVhcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZmlyc3QuTmV4dCA9IG51bGw7XHJcbiAgICAgICAgICAgIF9sYXN0ID0gX2ZpcnN0O1xyXG4gICAgICAgICAgICBfY291bnQgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnMoVCBpdGVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEZpbmRQcmV2aW91c05vZGUoaXRlbSkgIT0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENvcHlUbyhUW10gYXJyYXksIGludCBhcnJheUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBfZmlyc3Q7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IG5vZGUuTmV4dDtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgYXJyYXlbYXJyYXlJbmRleCsrXSA9IG5leHQuSXRlbTtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IENvdW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2NvdW50OyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1JlYWRPbmx5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFJlbW92ZShUIGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IEZpbmRQcmV2aW91c05vZGUoaXRlbSk7XHJcbiAgICAgICAgICAgIGlmIChub2RlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmV4dCA9IG5vZGUuTmV4dDtcclxuICAgICAgICAgICAgaWYgKG5leHQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgXHJcbiAgICAgICAgICAgIG5vZGUuTmV4dCA9IG5leHQuTmV4dDtcclxuICAgICAgICAgICAgX2NvdW50LS07XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhdG9yPFQ+IEdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBfZmlyc3Q7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IG5vZGUuTmV4dDtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXh0Lkl0ZW07XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbmV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBOb2RlIEZpbmRQcmV2aW91c05vZGUoVCBpdGVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBfZmlyc3Q7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IG5vZGUuTmV4dDtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEVxdWFsaXR5Q29tcGFyZXI8VD4uRGVmYXVsdC5FcXVhbHMobmV4dC5JdGVtLCBpdGVtKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuXHJcbiAgICAgICAgICAgICAgICBub2RlID0gbmV4dDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjbGFzcyBOb2RlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgVCBJdGVtO1xyXG4gICAgICAgICAgICBwdWJsaWMgTm9kZSBOZXh0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTZXF1ZW5jZUdlbmVyYWxpemVyPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgaW50IF9sZW5ndGg7XHJcbiAgICAgICAgTGlzdDxUPiBfYWxwaGFiZXQ7XHJcbiAgICAgICAgTGlzdDxNYXRjaGVyPiBfbWF0Y2hlcnMgPSBuZXcgTGlzdDxNYXRjaGVyPigpO1xyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IF9nZW5lcmFsaXplcnM7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXF1ZW5jZUdlbmVyYWxpemVyKGludCBsZW5ndGgsIExpc3Q8VD4gYWxwaGFiZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfbGVuZ3RoID0gbGVuZ3RoO1xyXG4gICAgICAgICAgICBfYWxwaGFiZXQgPSBhbHBoYWJldDtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIGFscGhhYmV0KVxyXG4gICAgICAgICAgICAgICAgQWRkTWF0Y2hlcih0LlRvU3RyaW5nKCksIChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGJvb2w+KSh0dCA9PiB0LkVxdWFscyh0dCkpKTtcclxuXHJcbiAgICAgICAgICAgIEFkZE1hdGNoZXIoXCIqXCIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGJvb2w+KSh0dCA9PiB0cnVlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRNYXRjaGVyKHN0cmluZyBuYW1lLCBGdW5jPFQsIGJvb2w+IG1hdGNoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX21hdGNoZXJzLkFkZChuZXcgTWF0Y2hlcigpIHsgTmFtZSA9IG5hbWUsIE1hdGNoID0gbWF0Y2ggfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBWZWN0b3JDb21wYXJlciBfdmVjdG9yQ29tcGFyZXIgPSBuZXcgVmVjdG9yQ29tcGFyZXIoKTtcclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PE1hdGNoZXI+PiBHZW5lcmFsaXplKExpc3Q8TGlzdDxUPj4gZXhhbXBsZXMsIExpc3Q8TGlzdDxUPj4gbm9uRXhhbXBsZXMsIGJvb2wgbW9zdEdlbmVyYWwgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJ1aWxkTWF0Y2hlckxhdHRpY2UoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwb3NzaWJsZXMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBleGFtcGxlIGluIGV4YW1wbGVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXNNYXRjaGVySW5kaWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PFQsaW50PihleGFtcGxlLChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGludD4pKHQgPT4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5GaXJzdEluZGV4PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8VD4uTWF0Y2hlcj4oX21hdGNoZXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8VD4uTWF0Y2hlciwgYm9vbD4pKG0gPT4gbS5OYW1lID09IHQuVG9TdHJpbmcoKSkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBwb3NzaWJsZXMuQWRkUmFuZ2UoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYXNNYXRjaGVySW5kaWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoaSA9PiBfZ2VuZXJhbGl6ZXJzW2ldKSkpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KSh2ID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4odikpKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBvc3NpYmxlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHBvc3NpYmxlcyxfdmVjdG9yQ29tcGFyZXIpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG5vbkV4YW1wbGUgaW4gbm9uRXhhbXBsZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBhc01hdGNoZXJJbmRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8VCxpbnQ+KG5vbkV4YW1wbGUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgaW50PikodCA9PiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkZpcnN0SW5kZXg8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyPihfbWF0Y2hlcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyLCBib29sPikobSA9PiBtLk5hbWUgPT0gdC5Ub1N0cmluZygpKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHBvc3NpYmxlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihwb3NzaWJsZXMsU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYXNNYXRjaGVySW5kaWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoaSA9PiBfZ2VuZXJhbGl6ZXJzW2ldKSkpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KSh2ID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4odikpKSwgX3ZlY3RvckNvbXBhcmVyKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGdlbmVyYWxpemF0aW9ucyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgdmFyIHJlbWFpbmluZyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oZXhhbXBsZXMpO1xyXG4gICAgICAgICAgICB3aGlsZSAocmVtYWluaW5nLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yZGVyZWQgPSBwb3NzaWJsZXMuU2VsZWN0KHBwID0+IG5ldyB7VmVjdG9yID0gcHAsIENvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHJlbWFpbmluZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShyID0+IElzTWF0Y2gociwgcHApKSl9KS5PcmRlckJ5RGVzY2VuZGluZzxpbnQ+KHh4ID0+IHh4LkNvdW50KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXhlcnMgPSBvcmRlcmVkLlRha2VXaGlsZSh4eCA9PiB4eC5Db3VudCA9PSBvcmRlcmVkWzBdLkNvdW50KS5PcmRlckJ5RGVzY2VuZGluZzxpbnQ+KHh4ID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGludD4oeHguVmVjdG9yLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50LCBpbnQ+KSgodG90YWwsIHgpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX21hdGNoZXJzW3hdLk5hbWUgPT0gXCIqXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG90YWwgKiBfYWxwaGFiZXQuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfbWF0Y2hlcnNbeF0uTmFtZS5TdGFydHNXaXRoKFwiIVwiKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b3RhbCAqIChfYWxwaGFiZXQuQ291bnQgLSAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgICAgICAgICAgICAgICAgICB9KSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBiZXN0ID0gbW9zdEdlbmVyYWwgPyBtYXhlcnMuRmlyc3QoKS5WZWN0b3IgOiBtYXhlcnMuTGFzdCgpLlZlY3RvcjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZ2VuZXJhbGl6YXRpb25zLkFkZChiZXN0KTtcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiggICAgICAgICAgICAgICAgcmVtYWluaW5nLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHIgPT4gSXNNYXRjaChyLCBiZXN0KSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8VD4uTWF0Y2hlcj4+KGdlbmVyYWxpemF0aW9ucywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8VD4uTWF0Y2hlcj4+KShsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPFQ+Lk1hdGNoZXI+KGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPFQ+Lk1hdGNoZXI+KShpID0+IF9tYXRjaGVyc1tpXSkpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgVmVjdG9yQ29tcGFyZXIgOiBJRXF1YWxpdHlDb21wYXJlcjxMaXN0PGludD4+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoTGlzdDxpbnQ+IHgsIExpc3Q8aW50PiB5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4oeCx5KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGludCBHZXRIYXNoQ29kZShMaXN0PGludD4gbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdW5jaGVja2VkXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGhhc2ggPSAxNztcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgeCBpbiBsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNoID0gaGFzaCAqIDIzICsgeDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc2g7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQnVpbGRNYXRjaGVyTGF0dGljZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZ2VuZXJhbGl6ZXJzID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBfbWF0Y2hlcnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2dlbmVyYWxpemVyc1tpXSA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxUPihfYWxwaGFiZXQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgYm9vbD4pKGEgPT4gX21hdGNoZXJzW2ldLk1hdGNoKGEpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGludCBqID0gMDsgaiA8IF9tYXRjaGVycy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWw8VD4obWF0Y2hlcyxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPFQ+KF9hbHBoYWJldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBib29sPikoYSA9PiBfbWF0Y2hlcnNbal0uTWF0Y2goYSkpKS5Ub0xpc3QoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nZW5lcmFsaXplcnNbaV0uQWRkKGopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIElzTWF0Y2goTGlzdDxUPiB2ZWN0b3IsIExpc3Q8aW50PiBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2ZWN0b3IuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfbWF0Y2hlcnNbbVtpXV0uTWF0Y2godmVjdG9yW2ldKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsYXNzIE1hdGNoZXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBzdHJpbmcgTmFtZTtcclxuICAgICAgICAgICAgcHVibGljIEZ1bmM8VCwgYm9vbD4gTWF0Y2g7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEFjY2Vzc2liaWxpdHlDaGVja2VyXHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxjaGFyPiBfYWxwaGFiZXQ7XHJcbiAgICAgICAgcHVibGljIEFjY2Vzc2liaWxpdHlDaGVja2VyKElFbnVtZXJhYmxlPGNoYXI+IGFscGhhYmV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2FscGhhYmV0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Y2hhcj4oYWxwaGFiZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNBY2Nlc3NpYmxlKHN0cmluZyB3LCBMaXN0PHN0cmluZz4gUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2godmFyIGMgaW4gX2FscGhhYmV0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ29vZENob2ljZUFsd2F5c0V4aXN0cyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHN3YXBwZXJzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Y2hhcj4oX2FscGhhYmV0LG5ld1tdIHsgYyB9KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIHBhcnRpdGlvbiBpbiBFbnVtZXJhdGVQYXJ0aXRpb25zKHcsIHN3YXBwZXJzKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ29vZENob2ljZUV4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjaG9pY2UgaW4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkdlbmVyYXRlU3VibGlzdHM8aW50PihFbnVtZXJhYmxlLlJhbmdlKDAsIHBhcnRpdGlvbi5Db3VudCkuVG9MaXN0KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNob2ljZS5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd3cgPSBNYWtlTW92ZSh3LCBwYXJ0aXRpb24sIGNob2ljZSwgc3dhcHBlcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoUy5Db250YWlucyh3dykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2RDaG9pY2VFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZ29vZENob2ljZUV4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2RDaG9pY2VBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChnb29kQ2hvaWNlQWx3YXlzRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PExpc3Q8aW50Pj4+IEVudW1lcmF0ZVBhcnRpdGlvbnMoc3RyaW5nIHcsIExpc3Q8Y2hhcj4gc3dhcHBlcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hhcnMgPSB3LlRvQ2hhckFycmF5KCk7XHJcbiAgICAgICAgICAgIHZhciBpbmRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxjaGFyPihjaGFycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxjaGFyLCBib29sPikoYyA9PiBzd2FwcGVycy5Db250YWlucyhjKSkpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleFBhcnRpdGlvbnMgPSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkdldFBhcnRpdGlvbnMoaW5kaWNlcy5Db3VudCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpbmRleFBhcnRpdGlvbiBpbiBpbmRleFBhcnRpdGlvbnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0aXRpb24gPSBuZXcgTGlzdDxMaXN0PGludD4+KGluZGV4UGFydGl0aW9uLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpbmRleFBhcnQgaW4gaW5kZXhQYXJ0aXRpb24pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihpbmRleFBhcnQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShpID0+IGluZGljZXNbaV0pKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0aXRpb24uQWRkKHBhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBwYXJ0aXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0cmluZyBNYWtlTW92ZShzdHJpbmcgdywgTGlzdDxMaXN0PGludD4+IHBhcnRpdGlvbiwgTGlzdDxpbnQ+IGNob2ljZSwgTGlzdDxjaGFyPiBzd2FwcGVycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGFycyA9IHcuVG9DaGFyQXJyYXkoKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGogaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGludCxpbnQ+KGNob2ljZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKGkgPT4gcGFydGl0aW9uW2ldKSkpXHJcbiAgICAgICAgICAgICAgICBjaGFyc1tqXSA9IHN3YXBwZXJzWzEgLSBzd2FwcGVycy5JbmRleE9mKGNoYXJzW2pdKV07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IHN0cmluZyhjaGFycyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWVcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCb3hpZmljYXRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VHVwbGU8TGlzdDxMaXN0PFQ+PiwgTGlzdDxMaXN0PFQ+Pj4+IFNwbGl0PFQ+KExpc3Q8TGlzdDxUPj4gYWxsUG9pbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNodW5rcyA9IG5ldyBMaXN0PFR1cGxlPExpc3Q8TGlzdDxUPj4sIExpc3Q8TGlzdDxUPj4+PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvaW50cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oYWxsUG9pbnRzKTtcclxuICAgICAgICAgICAgaW50IG4gPSBhbGxQb2ludHNbMF0uQ291bnQ7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAocG9pbnRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGJlc3RUID0gMTtcclxuICAgICAgICAgICAgICAgIGludCBiZXN0U3BsaXQgPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IHNwbGl0ID0gMTsgc3BsaXQgPCBuIC0gMTsgc3BsaXQrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPFQ+KHAsc3BsaXQpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNraXA8VD4ocCxzcGxpdCkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBCaW5hcnkoMSwgcG9pbnRzLkNvdW50IC0gMSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGxlZnQsaSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KSgobDEsIGwyKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4obDEsbDIpKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihyaWdodCxpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKChsMSwgbDIpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihsMSxsMikpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhbiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4obGVmdHMscmlnaHRzKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKHR1cCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbmNhdDxUPih0dXAuSXRlbTEsdHVwLkl0ZW0yKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxsRXhpc3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHNwYW4sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwcCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4ocHAscCkpKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFsbEV4aXN0ID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKSAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ID49IGJlc3RUKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPiBiZXN0VCB8fCBNYXRoLkFicyhuLzIgLSBzcGxpdCkgPCBNYXRoLkFicyhuLzIgLSBiZXN0U3BsaXQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0VCA9IHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0U3BsaXQgPSBzcGxpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPFQ+KHAsYmVzdFNwbGl0KS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2tpcDxUPihwLGJlc3RTcGxpdCkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciBscyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4obCxiZXN0VCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KSgobDEsIGwyKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4obDEsbDIpKSkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihyLGJlc3RUKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKChsMSwgbDIpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihsMSxsMikpKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4obHMscnMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikodHVwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PFQ+KHR1cC5JdGVtMSx0dXAuSXRlbTIpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2h1bmtzLkFkZChuZXcgVHVwbGU8TGlzdDxMaXN0PFQ+PiwgTGlzdDxMaXN0PFQ+Pj4obHMsIHJzKSk7XHJcbkFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oICAgICAgICAgICAgICAgIHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwcCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4ocHAscCkpKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2h1bmtzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8TGlzdDxMaXN0PFQ+Pj4+IFNwbGl0TXVsdGl3YXk8VD4oTGlzdDxMaXN0PFQ+PiBhbGxQb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2h1bmtzID0gbmV3IExpc3Q8TGlzdDxMaXN0PExpc3Q8VD4+Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGFsbFBvaW50cyk7XHJcbiAgICAgICAgICAgIGludCBuID0gYWxsUG9pbnRzWzBdLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHBvaW50cy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBiZXN0VCA9IDE7XHJcbiAgICAgICAgICAgICAgICBMaXN0PGludD4gYmVzdFNwbGl0ID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzcGxpdCBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4oRW51bWVyYWJsZS5SYW5nZSgwLCBuKS5Ub0xpc3QoKSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikobCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8aW50LGludD4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHggPT4geCkpLlRvTGlzdCgpKSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEV4dHJhY3RSYW5nZXM8VD4oc3BsaXQsIHBvaW50c1swXSkuQ291bnQgPD0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gQmluYXJ5KDEsIHBvaW50cy5Db3VudCAtIDEsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoaSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmdlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cyxpKS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KShwID0+IEV4dHJhY3RSYW5nZXM8VD4oc3BsaXQsIHApKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYW5nZVZhbHVlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4+KHJhbmdlcyxFbnVtZXJhYmxlLlJhbmdlKDAsIHJhbmdlc1swXS5Db3VudCkuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikoX18gPT4gbmV3IExpc3Q8TGlzdDxUPj4oKSkpLlRvTGlzdCgpLFxyXG4oZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pj4pKCAgICAgICAgICAgICAgICAgICAgICAgICAgICAodW5pb24sIG5leHQpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuWmlwPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4odW5pb24sbmV4dCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KSgoQSwgQikgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ29uY2F0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQSxCKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKChsMSwgbDIpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihsMSxsMikpKSkpKS5Ub0xpc3QoKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNwID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHJhbmdlVmFsdWVzKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikobGwgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihsbCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW4gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGNwLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KShsbCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LFQ+KGxsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4pKHBwID0+IHBwKSkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsbEV4aXN0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihzcGFuLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KHBwLHApKSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbGxFeGlzdCA/IDEgOiAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9KSkgLSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCA+IGJlc3RUKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFQgPSB0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0U3BsaXQgPSBzcGxpdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJyID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLGJlc3RUKS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KShwID0+IEV4dHJhY3RSYW5nZXM8VD4oYmVzdFNwbGl0LCBwKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJydiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4+KHJyLEVudW1lcmFibGUuUmFuZ2UoMCwgcnJbMF0uQ291bnQpLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKF9fID0+IG5ldyBMaXN0PExpc3Q8VD4+KCkpKS5Ub0xpc3QoKSxcclxuKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4+KSggICAgICAgICAgICAgICAgICAgICh1bmlvbiwgbmV4dCkgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5aaXA8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pih1bmlvbixuZXh0LCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKChBLCBCKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5Db25jYXQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBLEIpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoKGwxLCBsMikgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KGwxLGwyKSkpKSkpLlRvTGlzdCgpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHJydiksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KShsbCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LFQ+KGxsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4pKHBwID0+IHBwKSkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjaHVua3MuQWRkKHJydik7XHJcbkFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oICAgICAgICAgICAgICAgIHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwcCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4ocHAscCkpKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2h1bmtzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIExpc3Q8TGlzdDxUPj4gRXh0cmFjdFJhbmdlczxUPihMaXN0PGludD4gc3RvcHMsIExpc3Q8VD4gbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByYW5nZXMgPSBuZXcgTGlzdDxMaXN0PFQ+PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxlZnQgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc3RvcCBpbiBzdG9wcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmFuZ2VzLkFkZChsLkdldFJhbmdlKGxlZnQsIHN0b3AgLSBsZWZ0ICsgMSkpO1xyXG4gICAgICAgICAgICAgICAgbGVmdCA9IHN0b3AgKyAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobGVmdCA8IGwuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByYW5nZXMuQWRkKGwuR2V0UmFuZ2UobGVmdCwgbC5Db3VudCAtIGxlZnQpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByYW5nZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxMaXN0PFQ+Pj4gQm94aWZ5PFQ+KExpc3Q8TGlzdDxUPj4gcG9pbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJveGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pihwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKHAgPT4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihwKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJveENvbnRhaW5lcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pihib3hlcyxib3hlcyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PiwgYm9vbD4pKHBhaXIgPT4gIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBhaXIuSXRlbTEscGFpci5JdGVtMikpKS5TZWxlY3QocGFpciA9PiBuZXcgeyBQYWlyID0gcGFpciwgQm94ZWRVbmlvbiA9IEJveENvbnRhaW5lcjxUPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbmNhdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBhaXIuSXRlbTEscGFpci5JdGVtMikuVG9MaXN0KCkpIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBncm93biA9IGJveENvbnRhaW5lcnMuRmlyc3RPckRlZmF1bHQoYmMgPT4gQ29udGFpbnNCb3hDb250YWluZXI8VD4ocG9pbnRzLCBiYy5Cb3hlZFVuaW9uKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3Jvd24gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBib3hlcy5Db3VudDtcclxuICAgICAgICAgICAgICAgIGJveGVzLlJlbW92ZShncm93bi5QYWlyLkl0ZW0xKTtcclxuICAgICAgICAgICAgICAgIGJveGVzLlJlbW92ZShncm93bi5QYWlyLkl0ZW0yKTtcclxuICAgICAgICAgICAgICAgIGJveGVzLkFkZChncm93bi5Cb3hlZFVuaW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYm94ZXMuQ291bnQgPT0gY291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBib3hlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PExpc3Q8VD4+PiBQcmVmaXhCb3hpZnk8VD4oTGlzdDxMaXN0PFQ+PiBwb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYWxsUG9pbnRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMpO1xyXG4gICAgICAgICAgICB2YXIgYm94ZXMgPSBuZXcgTGlzdDxMaXN0PExpc3Q8VD4+PigpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gQmluYXJ5KDEsIHBvaW50cy5Db3VudCAtIDEsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoaSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnRhaW5zQm94PFQ+KGFsbFBvaW50cywgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLGkpLlRvTGlzdCgpKSA/IDEgOiAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYm94ZXMuQWRkKEJveENvbnRhaW5lcjxUPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsdCkuVG9MaXN0KCkpKTtcclxuICAgICAgICAgICAgICAgIHBvaW50cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2tpcDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cyx0KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGlmIChwb2ludHMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJveGVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIENvbnRhaW5zQm94PFQ+KExpc3Q8TGlzdDxUPj4gYWxsUG9pbnRzLCBMaXN0PExpc3Q8VD4+IHBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBib3ggPSBCb3hDb250YWluZXI8VD4ocG9pbnRzKTtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRhaW5zQm94Q29udGFpbmVyPFQ+KGFsbFBvaW50cywgYm94KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIENvbnRhaW5zQm94Q29udGFpbmVyPFQ+KExpc3Q8TGlzdDxUPj4gYWxsUG9pbnRzLCBMaXN0PExpc3Q8VD4+IGJveENvbnRhaW5lcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGJveENvbnRhaW5lciwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oYWxsUG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHBwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihwcCxwKSkpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxUPj4gQm94Q29udGFpbmVyPFQ+KExpc3Q8TGlzdDxUPj4gcG9pbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxUPihFbnVtZXJhYmxlLlJhbmdlKDAsIHBvaW50c1swXS5Db3VudCkuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KShpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixUPihwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBUPikocCA9PiBwW2ldKSkuRGlzdGluY3QoKS5Ub0xpc3QoKSkpXHJcbilcclxuLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKGUgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8VD4oZSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzQm94PFQ+KExpc3Q8TGlzdDxUPj4gcG9pbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBvaW50cy5Db3VudCA9PSBCb3hDb250YWluZXI8VD4ocG9pbnRzKS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvQm94U3RyaW5nPFQ+KExpc3Q8TGlzdDxUPj4gcG9pbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiICogXCIsIEVudW1lcmFibGUuUmFuZ2UoMCwgcG9pbnRzWzBdLkNvdW50KS5TZWxlY3Q8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIHN0cmluZz4pKGkgPT4gXCJ7XCIgKyBzdHJpbmcuSm9pbjxUPihcIixcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LFQ+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIFQ+KShwID0+IHBbaV0pKS5EaXN0aW5jdCgpKSArIFwifVwiKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9NdWx0aUNodW5rU3RyaW5nPFQ+KExpc3Q8TGlzdDxMaXN0PFQ+Pj4gbXVsdGlDaHVuaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcIiAqIFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixzdHJpbmc+KG11bHRpQ2h1bmssKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIHN0cmluZz4pKGNodW5rID0+IFRvTGlzdE9mTGlzdHNTdHJpbmc8VD4oY2h1bmspKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9DaHVua1N0cmluZzxUPihUdXBsZTxMaXN0PExpc3Q8VD4+LCBMaXN0PExpc3Q8VD4+PiBjaHVuaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBUb0xpc3RPZkxpc3RzU3RyaW5nPFQ+KGNodW5rLkl0ZW0xKSArIFwiICogXCIgKyBUb0xpc3RPZkxpc3RzU3RyaW5nPFQ+KGNodW5rLkl0ZW0yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBzdHJpbmcgVG9MaXN0T2ZMaXN0c1N0cmluZzxUPihMaXN0PExpc3Q8VD4+IGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ7XCIgKyBzdHJpbmcuSm9pbihcIixcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LHN0cmluZz4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIHN0cmluZz4pKHNsID0+IFwie1wiICsgc3RyaW5nLkpvaW48VD4oXCIsXCIsIHNsKSArIFwifVwiKSkpICsgXCJ9XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgaW50IEJpbmFyeShpbnQgZmlyc3QsIGludCBsYXN0LCBGdW5jPGludCwgaW50PiB0YXJnZXREaXJlY3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGVmdCA9IGZpcnN0IC0gMTtcclxuICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbGFzdCArIDE7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAocmlnaHQgLSBsZWZ0ID49IDIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBtaWRkbGUgPSBsZWZ0ICsgKHJpZ2h0IC0gbGVmdCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgaW50IGRpcmVjdGlvbiA9IHRhcmdldERpcmVjdGlvbihtaWRkbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWlkZGxlO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uIDwgMClcclxuICAgICAgICAgICAgICAgICAgICByaWdodCA9IG1pZGRsZTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gbWlkZGxlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobGVmdCA8IGZpcnN0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0IC0gMTtcclxuICAgICAgICAgICAgaWYgKHJpZ2h0ID4gbGFzdClcclxuICAgICAgICAgICAgICAgIHJldHVybiBsYXN0ICsgMTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsZWZ0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlcjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBGYXN0QWNjZXNzaWJpbGl0eUNoZWNrZXJcclxuICAgIHtcclxuICAgICAgICB1bG9uZ1tdIF9maXhlclJlc3BvbnNlcztcclxuICAgICAgICBpbnQgX2ZpeGVyUmVzcG9uc2VDb3VudDtcclxuICAgICAgICBEaWN0aW9uYXJ5PHVsb25nLCBMaXN0PExpc3Q8dWxvbmc+Pj4gX2JyZWFrZXJDaG9pY2VzQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTx1bG9uZywgTGlzdDxMaXN0PHVsb25nPj4+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBGYXN0QWNjZXNzaWJpbGl0eUNoZWNrZXIoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZml4ZXJSZXNwb25zZXMgPSBuZXcgdWxvbmdbMSA8PCAoKG4gKyAxKSA+PiAxKV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0FjY2Vzc2libGUoRmFzdFdvcmQgYm9hcmQsIEhhc2hTZXQ8RmFzdFdvcmQ+IHdvbkJvYXJkcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYm9hcmQuX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBib2FyZC5fbGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBib2FyZC5fdHJhY2VbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBib2FyZC5fdHJhY2Vbal07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN3YXBwYWJsZSA9IHggXiB5O1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJyZWFrZXJDaG9pY2UgaW4gR2V0QnJlYWtlckNob2ljZXMoc3dhcHBhYmxlKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcEV4aXN0cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgR2V0Rml4ZXJSZXNwb25zZXMoYnJlYWtlckNob2ljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGsgPSAxOyBrIDwgX2ZpeGVyUmVzcG9uc2VDb3VudDsgaysrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBGYXN0V29yZChib2FyZC5fdHJhY2UsIGksIGosIF9maXhlclJlc3BvbnNlc1trXSwgYm9hcmQuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvbkJvYXJkcy5Db250YWlucyhjaGlsZEJvYXJkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd2lubmluZ1N3YXBFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBHZXRGaXhlclJlc3BvbnNlcyhMaXN0PHVsb25nPiBwb3NzaWJsZU1vdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VDb3VudCA9IDEgPDwgcG9zc2libGVNb3Zlcy5Db3VudDtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdWJzZXQgPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAoc3Vic2V0IDwgX2ZpeGVyUmVzcG9uc2VDb3VudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gMFVMO1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBzdWJzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSB8PSBwb3NzaWJsZU1vdmVzW0ludDMyVXNhZ2UuR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KV07XHJcblxyXG4gICAgICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VzW3N1YnNldF0gPSByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIHN1YnNldCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIExpc3Q8TGlzdDx1bG9uZz4+IEdldEJyZWFrZXJDaG9pY2VzKHVsb25nIHN3YXBwYWJsZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8TGlzdDx1bG9uZz4+IGNob2ljZXM7XHJcbiAgICAgICAgICAgIGlmICghX2JyZWFrZXJDaG9pY2VzQ2FjaGUuVHJ5R2V0VmFsdWUoc3dhcHBhYmxlLCBvdXQgY2hvaWNlcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiaXRzID0gc3dhcHBhYmxlLkdldEJpdHMoKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0aXRpb25zID0gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5HZXRQYXJ0aXRpb25zKGJpdHMuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgY2hvaWNlcyA9IG5ldyBMaXN0PExpc3Q8dWxvbmc+PihwYXJ0aXRpb25zLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBwYXJ0aXRpb25zKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaG9pY2UgPSBuZXcgTGlzdDx1bG9uZz4ocGFydGl0aW9uLkNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjaG9pY2VzLkFkZChjaG9pY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydCBpbiBwYXJ0aXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IDBVTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gcGFydClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggfD0gYml0c1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZS5BZGQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9icmVha2VyQ2hvaWNlc0NhY2hlW3N3YXBwYWJsZV0gPSBjaG9pY2VzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hvaWNlcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZVxyXG57XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgVGFycGl0RW51bWVyYXRvclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTGlzdDxjaGFyPiBBbHBoYWJldCA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxjaGFyPigpLChfbzIzKT0+e19vMjMuQWRkKCd4Jyk7X28yMy5BZGQoJ3knKTtfbzIzLkFkZCgneicpO3JldHVybiBfbzIzO30pO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNQZXJtdXRhdGlvbkNsb3NlZChMaXN0PHN0cmluZz4gUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8c3RyaW5nPixzdHJpbmc+KEVudW1lcmF0ZUFscGhhYmV0UGVybXV0YXRpb25zKFMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxzdHJpbmc+LCBzdHJpbmc+KShUID0+IHN0cmluZy5Kb2luKFwiLFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8c3RyaW5nLHN0cmluZz4oVCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT4gcykpKSkpLkRpc3RpbmN0KCkuQ291bnQoKSA9PSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PHN0cmluZz4gUmVtb3ZlUGVybXV0YXRpb25SZWR1bmRhbmNpZXMoTGlzdDxzdHJpbmc+IFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaGFzaCA9IG5ldyBIYXNoU2V0PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgdmFyIHBlcm11dGVkTGlzdHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8c3RyaW5nPj4oRW51bWVyYXRlQWxwaGFiZXRQZXJtdXRhdGlvbnMoUykpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaGFzaC5BZGQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4sc3RyaW5nPihwZXJtdXRlZExpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxzdHJpbmc+LCBzdHJpbmc+KShsID0+IGxbaV0pKS5PcmRlckJ5PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBzdHJpbmc+KShzID0+IHMpKS5GaXJzdCgpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PHN0cmluZz4oaGFzaCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8c3RyaW5nPiBSZW9yZGVyQWxwaGFiZXRCeU9jY3VyZW5jZVJhdGUoTGlzdDxzdHJpbmc+IFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLHN0cmluZz4oUywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoYXJzID0gcy5Ub0NoYXJBcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBBbHBoYWJldC5TZWxlY3QoYyA9PiBuZXcgeyBDID0gYywgUmF0ZSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Y2hhcj4oY2hhcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Y2hhciwgYm9vbD4pKGNjID0+IGNjID09IGMpKSB9KS5PcmRlckJ5RGVzY2VuZGluZzxpbnQ+KGQgPT4gZC5SYXRlKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcy5SZXBsYWNlKHBbMF0uQywgJ1gnKS5SZXBsYWNlKHBbMV0uQywgJ1knKS5SZXBsYWNlKHBbMl0uQywgJ1onKS5Ub0xvd2VyKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PHN0cmluZz4+IEVudW1lcmF0ZUFscGhhYmV0UGVybXV0YXRpb25zKExpc3Q8c3RyaW5nPiBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHVwcGVyZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsc3RyaW5nPihTLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgc3RyaW5nPikocyA9PiBzLlRvVXBwZXIoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgcGVybXV0YXRpb24gaW4gUGVybXV0YXRpb24uRW51bWVyYXRlQWxsKDMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHBlcm11dGF0aW9uLkFwcGx5PGNoYXI+KEFscGhhYmV0KTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsc3RyaW5nPih1cHBlcmVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgc3RyaW5nPikocyA9PiBzLlJlcGxhY2UoJ1gnLCBwWzBdKS5SZXBsYWNlKCdZJywgcFsxXSkuUmVwbGFjZSgnWicsIHBbMl0pKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBJRW51bWVyYWJsZTxMaXN0PHN0cmluZz4+IEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzKCk7XHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBHZW5lcmF0ZU1pbmltYWxUYXJwaXRzKEFjdGlvbjxMaXN0PHN0cmluZz4+IGZvdW5kVGFycGl0KSB7IH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlcjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBGYXN0V29yZFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyB1bG9uZ1tdIF90cmFjZTtcclxuICAgICAgICBwdWJsaWMgaW50IF9sZW5ndGg7XHJcbiAgICAgICAgcHVibGljIGludCBfc3RhY2tDb3VudDtcclxuICAgICAgICBpbnQgX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgRmFzdFdvcmQodWxvbmdbXSB0cmFjZSwgaW50IHN0YWNrQ291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdHJhY2UgPSB0cmFjZTtcclxuICAgICAgICAgICAgX2xlbmd0aCA9IF90cmFjZS5MZW5ndGg7XHJcbiAgICAgICAgICAgIF9zdGFja0NvdW50ID0gc3RhY2tDb3VudDtcclxuICAgICAgICAgICAgX2hhc2hDb2RlID0gSGFzaGluZy5IYXNoKF90cmFjZSwgX2xlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRmFzdFdvcmQodWxvbmdbXSB0cmFjZSwgaW50IGksIGludCBqLCB1bG9uZyBzd2FwLCBpbnQgc3RhY2tDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF90cmFjZSA9IG5ldyB1bG9uZ1t0cmFjZS5MZW5ndGhdO1xyXG4gICAgICAgICAgICBfbGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgayA9IDA7IGsgPCB0cmFjZS5MZW5ndGg7IGsrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWxvbmcgdiA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoayA9PSBpIHx8IGsgPT0gailcclxuICAgICAgICAgICAgICAgICAgICB2ID0gdHJhY2Vba10gXiBzd2FwO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHYgPSB0cmFjZVtrXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgcSA9IF9sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocSA+IDAgJiYgX3RyYWNlW3EgLSAxXSA+IHYpXHJcbiAgICAgICAgICAgICAgICAgICAgcS0tO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChxIDwgX2xlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICBBcnJheS5Db3B5KF90cmFjZSwgcSA8PCAzLCBfdHJhY2UsIChxICsgMSkgPDwgMywgKF9sZW5ndGggLSBxKSA8PCAzKTtcclxuICAgICAgICAgICAgICAgIF90cmFjZVtxXSA9IHY7XHJcblxyXG4gICAgICAgICAgICAgICAgX2xlbmd0aCsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfc3RhY2tDb3VudCA9IHN0YWNrQ291bnQ7XHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IEhhc2hpbmcuSGFzaChfdHJhY2UsIF9sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKG9iaiBhcyBGYXN0V29yZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoRmFzdFdvcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbCB8fCBfbGVuZ3RoICE9IG90aGVyLl9sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGlmIChfdHJhY2VbaV0gIT0gb3RoZXIuX3RyYWNlW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBCaXRMZXZlbEdlbmVyYXRpb247XHJcbnVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZhc3RXb3JkR2VuZXJhdG9yXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIExpc3Q8RmFzdFdvcmQ+IEdlbmVyYXRlV29yZHMoaW50IGxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB3b3JkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nW10sZ2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oVGhlRW51bWVyYXRpb25NYWNoaW5lLkVudW1lcmF0ZShFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KDEsIGxlbmd0aCksIDMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHVsb25nW10sIGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KSh0cmFjZSA9PiBuZXcgRmFzdFdvcmQodHJhY2UsIGxlbmd0aCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdvcmRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjbGFzcyBUaGVFbnVtZXJhdGlvbk1hY2hpbmVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8dWxvbmdbXT4gRW51bWVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfdWxvbmcuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IHVsb25nW3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8dWxvbmc+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfdWxvbmcuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB1bG9uZyBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgICAgIHVsb25nIGRjID0gKHVsb25nKSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnQsIHIsIDAsIDAsIGMsIGRjKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPHVsb25nW10+IEVudW1lcmF0ZShMaXN0PHVsb25nPiBzaXplcywgdWxvbmdbXSBhc3NpZ25tZW50LCBMaXN0PHVsb25nPltdIHIsIGludCBpLCB1bG9uZyBsYXN0LCB1bG9uZyBjYXJlLCB1bG9uZyBkb250Q2FyZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWxvbmcgeDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZyA9ICh1bG9uZykoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciBxID0gKHVsb25nKSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAodWxvbmcpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSAodWxvbmcpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5MiA9ICh1bG9uZykoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9ICh1bG9uZykoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IHVsb25nW2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBhc3NpZ25tZW50Q29weTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKHVsb25nKSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYSBpbiBFbnVtZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbnVzaW5nIEFsZ29yaXRobXM7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLldvcmRHYW1lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBXb3JkRW51bWVyYXRvclxyXG4gICAge1xyXG4gICAgICAgIExpc3Q8Y2hhcj4gX2FscGhhYmV0O1xyXG5cclxuICAgICAgICBwdWJsaWMgV29yZEVudW1lcmF0b3IocGFyYW1zIGNoYXJbXSBhbHBoYWJldCkgOiB0aGlzKCgoSUVudW1lcmFibGU8Y2hhcj4pYWxwaGFiZXQpKSB7IH1cclxuICAgICAgICBwdWJsaWMgV29yZEVudW1lcmF0b3IoSUVudW1lcmFibGU8Y2hhcj4gYWxwaGFiZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfYWxwaGFiZXQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxjaGFyPihhbHBoYWJldCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8c3RyaW5nPiBFbnVtZXJhdGVXb3JkcyhpbnQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Y2hhcj4sc3RyaW5nPihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxjaGFyPihFbnVtZXJhYmxlLlJlcGVhdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Y2hhcj4+KF9hbHBoYWJldCwgbGVuZ3RoKSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxjaGFyPiwgc3RyaW5nPikoY2hhcnMgPT4gbmV3IHN0cmluZyhTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvQXJyYXk8Y2hhcj4oY2hhcnMpKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBBc3NpZ25tZW50c191bG9uZ1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDx1bG9uZ1tdPiBHZW5lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSwgaW50IGNvdW50RXN0aW1hdGUgPSAyMDQ4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfdWxvbmcuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRzID0gbmV3IExpc3Q8dWxvbmdbXT4oY291bnRFc3RpbWF0ZSk7XHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IHVsb25nW3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDx1bG9uZz5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfdWxvbmcuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIHVsb25nIGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICB1bG9uZyBkYyA9ICh1bG9uZykofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICBHZW5lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbm1lbnRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgR2VuZXJhdGUoTGlzdDx1bG9uZz4gc2l6ZXMsIExpc3Q8dWxvbmdbXT4gYXNzaWdubWVudHMsIHVsb25nW10gYXNzaWdubWVudCwgTGlzdDx1bG9uZz5bXSByLCBpbnQgaSwgdWxvbmcgbGFzdCwgdWxvbmcgY2FyZSwgdWxvbmcgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAodWxvbmcpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKHVsb25nKSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAodWxvbmcpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9ICh1bG9uZykoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9ICh1bG9uZykoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKHVsb25nKShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgdWxvbmdbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50cy5BZGQoYXNzaWdubWVudENvcHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9ICh1bG9uZykofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmF0ZShzaXplcywgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8dWxvbmdbXT4gRW51bWVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfdWxvbmcuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgdWxvbmdbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PHVsb25nPltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc191bG9uZy5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgdWxvbmcgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIHVsb25nIGRjID0gKHVsb25nKSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPHVsb25nW10+IEVudW1lcmF0ZShMaXN0PHVsb25nPiBzaXplcywgdWxvbmdbXSBhc3NpZ25tZW50LCBMaXN0PHVsb25nPltdIHIsIGludCBpLCB1bG9uZyBsYXN0LCB1bG9uZyBjYXJlLCB1bG9uZyBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9ICh1bG9uZykoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAodWxvbmcpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICh1bG9uZykofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKHVsb25nKShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSAodWxvbmcpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9ICh1bG9uZykoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IHVsb25nW2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYXNzaWdubWVudENvcHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKHVsb25nKSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGEgaW4gRW51bWVyYXRlKHNpemVzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpKVxyXG5cdFx0XHRcdFx0XHRcdHlpZWxkIHJldHVybiBhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBBc3NpZ25tZW50c19sb25nXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGxvbmdbXT4gR2VuZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUsIGludCBjb3VudEVzdGltYXRlID0gMjA0OClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX2xvbmcuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRzID0gbmV3IExpc3Q8bG9uZ1tdPihjb3VudEVzdGltYXRlKTtcclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgbG9uZ1twb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8bG9uZz5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfbG9uZy5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgbG9uZyBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgbG9uZyBkYyA9IChsb25nKSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIEdlbmVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnRzLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXNzaWdubWVudHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBHZW5lcmF0ZShMaXN0PGxvbmc+IHNpemVzLCBMaXN0PGxvbmdbXT4gYXNzaWdubWVudHMsIGxvbmdbXSBhc3NpZ25tZW50LCBMaXN0PGxvbmc+W10gciwgaW50IGksIGxvbmcgbGFzdCwgbG9uZyBjYXJlLCBsb25nIGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAobG9uZykoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAobG9uZykofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAobG9uZykofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKGxvbmcpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSAobG9uZykoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9IChsb25nKSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAobG9uZykoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IGxvbmdbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50cy5BZGQoYXNzaWdubWVudENvcHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKGxvbmcpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnRzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8bG9uZ1tdPiBFbnVtZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc19sb25nLlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IGxvbmdbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PGxvbmc+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX2xvbmcuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIGxvbmcgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIGxvbmcgZGMgPSAobG9uZykofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxsb25nW10+IEVudW1lcmF0ZShMaXN0PGxvbmc+IHNpemVzLCBsb25nW10gYXNzaWdubWVudCwgTGlzdDxsb25nPltdIHIsIGludCBpLCBsb25nIGxhc3QsIGxvbmcgY2FyZSwgbG9uZyBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKGxvbmcpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKGxvbmcpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9IChsb25nKSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKGxvbmcpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IChsb25nKShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSAobG9uZykoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9IChsb25nKSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAobG9uZykoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IGxvbmdbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHRcdHlpZWxkIHJldHVybiBhc3NpZ25tZW50Q29weTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IChsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9IChsb25nKSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGEgaW4gRW51bWVyYXRlKHNpemVzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpKVxyXG5cdFx0XHRcdFx0XHRcdHlpZWxkIHJldHVybiBhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEFzc2lnbm1lbnRzX3VpbnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8dWludFtdPiBHZW5lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSwgaW50IGNvdW50RXN0aW1hdGUgPSAyMDQ4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfdWludC5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudHMgPSBuZXcgTGlzdDx1aW50W10+KGNvdW50RXN0aW1hdGUpO1xyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyB1aW50W3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDx1aW50Pltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc191aW50LlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB1aW50IGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICB1aW50IGRjID0gKHVpbnQpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ25tZW50cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEdlbmVyYXRlKExpc3Q8dWludD4gc2l6ZXMsIExpc3Q8dWludFtdPiBhc3NpZ25tZW50cywgdWludFtdIGFzc2lnbm1lbnQsIExpc3Q8dWludD5bXSByLCBpbnQgaSwgdWludCBsYXN0LCB1aW50IGNhcmUsIHVpbnQgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9ICh1aW50KShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9ICh1aW50KSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAodWludCkoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICh1aW50KSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAodWludCkoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9ICh1aW50KShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKHVpbnQpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9ICh1aW50KShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgdWludFthc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRzLkFkZChhc3NpZ25tZW50Q29weSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWludCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodWludCkofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmF0ZShzaXplcywgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWludCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTx1aW50W10+IEVudW1lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX3VpbnQuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgdWludFtwb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8dWludD5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfdWludC5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgdWludCBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgdWludCBkYyA9ICh1aW50KSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPHVpbnRbXT4gRW51bWVyYXRlKExpc3Q8dWludD4gc2l6ZXMsIHVpbnRbXSBhc3NpZ25tZW50LCBMaXN0PHVpbnQ+W10gciwgaW50IGksIHVpbnQgbGFzdCwgdWludCBjYXJlLCB1aW50IGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWludCB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAodWludCkoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAodWludCkofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKHVpbnQpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAodWludCkofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKHVpbnQpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9ICh1aW50KShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKHVpbnQpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9ICh1aW50KShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgdWludFthc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0eWllbGQgcmV0dXJuIGFzc2lnbm1lbnRDb3B5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVpbnQpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKHVpbnQpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgYSBpbiBFbnVtZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYykpXHJcblx0XHRcdFx0XHRcdFx0eWllbGQgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWludCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQXNzaWdubWVudHNfdXNob3J0XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PHVzaG9ydFtdPiBHZW5lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSwgaW50IGNvdW50RXN0aW1hdGUgPSAyMDQ4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfdXNob3J0LlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50cyA9IG5ldyBMaXN0PHVzaG9ydFtdPihjb3VudEVzdGltYXRlKTtcclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgdXNob3J0W3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDx1c2hvcnQ+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX3VzaG9ydC5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgdXNob3J0IGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICB1c2hvcnQgZGMgPSAodXNob3J0KSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIEdlbmVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnRzLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXNzaWdubWVudHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBHZW5lcmF0ZShMaXN0PHVzaG9ydD4gc2l6ZXMsIExpc3Q8dXNob3J0W10+IGFzc2lnbm1lbnRzLCB1c2hvcnRbXSBhc3NpZ25tZW50LCBMaXN0PHVzaG9ydD5bXSByLCBpbnQgaSwgdXNob3J0IGxhc3QsIHVzaG9ydCBjYXJlLCB1c2hvcnQgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1c2hvcnQgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKHVzaG9ydCkoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAodXNob3J0KSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAodXNob3J0KSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKHVzaG9ydCkofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKHVzaG9ydCkoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9ICh1c2hvcnQpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAodXNob3J0KSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAodXNob3J0KShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgdXNob3J0W2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudHMuQWRkKGFzc2lnbm1lbnRDb3B5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKHVzaG9ydCkofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmF0ZShzaXplcywgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodXNob3J0KSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPHVzaG9ydFtdPiBFbnVtZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191c2hvcnQuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgdXNob3J0W3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDx1c2hvcnQ+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX3VzaG9ydC5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgdXNob3J0IGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICB1c2hvcnQgZGMgPSAodXNob3J0KSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPHVzaG9ydFtdPiBFbnVtZXJhdGUoTGlzdDx1c2hvcnQ+IHNpemVzLCB1c2hvcnRbXSBhc3NpZ25tZW50LCBMaXN0PHVzaG9ydD5bXSByLCBpbnQgaSwgdXNob3J0IGxhc3QsIHVzaG9ydCBjYXJlLCB1c2hvcnQgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1c2hvcnQgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKHVzaG9ydCkoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAodXNob3J0KSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAodXNob3J0KSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKHVzaG9ydCkofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKHVzaG9ydCkoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKHVzaG9ydCkoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9ICh1c2hvcnQpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyB1c2hvcnRbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHRcdHlpZWxkIHJldHVybiBhc3NpZ25tZW50Q29weTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKHVzaG9ydCkofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciBhIGluIEVudW1lcmF0ZShzaXplcywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKSlcclxuXHRcdFx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEFzc2lnbm1lbnRzX2J5dGVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8Ynl0ZVtdPiBHZW5lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSwgaW50IGNvdW50RXN0aW1hdGUgPSAyMDQ4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfYnl0ZS5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudHMgPSBuZXcgTGlzdDxieXRlW10+KGNvdW50RXN0aW1hdGUpO1xyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyBieXRlW3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDxieXRlPltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc19ieXRlLlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICBieXRlIGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICBieXRlIGRjID0gKGJ5dGUpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ25tZW50cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEdlbmVyYXRlKExpc3Q8Ynl0ZT4gc2l6ZXMsIExpc3Q8Ynl0ZVtdPiBhc3NpZ25tZW50cywgYnl0ZVtdIGFzc2lnbm1lbnQsIExpc3Q8Ynl0ZT5bXSByLCBpbnQgaSwgYnl0ZSBsYXN0LCBieXRlIGNhcmUsIGJ5dGUgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBieXRlIHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9IChieXRlKShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9IChieXRlKSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IChieXRlKSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAoYnl0ZSkoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9IChieXRlKShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKGJ5dGUpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9IChieXRlKShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgYnl0ZVthc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRzLkFkZChhc3NpZ25tZW50Q29weSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAoYnl0ZSkofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmF0ZShzaXplcywgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxieXRlW10+IEVudW1lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX2J5dGUuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgYnl0ZVtwb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8Ynl0ZT5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfYnl0ZS5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgYnl0ZSBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgYnl0ZSBkYyA9IChieXRlKSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPGJ5dGVbXT4gRW51bWVyYXRlKExpc3Q8Ynl0ZT4gc2l6ZXMsIGJ5dGVbXSBhc3NpZ25tZW50LCBMaXN0PGJ5dGU+W10gciwgaW50IGksIGJ5dGUgbGFzdCwgYnl0ZSBjYXJlLCBieXRlIGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYnl0ZSB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAoYnl0ZSkoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAoYnl0ZSkofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKGJ5dGUpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAoYnl0ZSkofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKGJ5dGUpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9IChieXRlKShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKGJ5dGUpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9IChieXRlKShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgYnl0ZVthc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0eWllbGQgcmV0dXJuIGFzc2lnbm1lbnRDb3B5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKGJ5dGUpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKGJ5dGUpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgYSBpbiBFbnVtZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYykpXHJcblx0XHRcdFx0XHRcdFx0eWllbGQgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQml0T3BlcmF0aW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWxvbmcgVG9fdWxvbmcodGhpcyBJRW51bWVyYWJsZTxpbnQ+IGJpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyB4ID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBiaXRzKVxyXG4gICAgICAgICAgICAgICAgeCB8PSAxVUwgPDwgYml0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVzaG9ydCBUb191c2hvcnQodGhpcyBJRW51bWVyYWJsZTxpbnQ+IGJpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1c2hvcnQgeCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiaXQgaW4gYml0cylcclxuICAgICAgICAgICAgICAgIHggfD0gKHVzaG9ydCkoMSA8PCBiaXQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJ5dGUgVG9fYnl0ZSh0aGlzIElFbnVtZXJhYmxlPGludD4gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJ5dGUgeCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiaXQgaW4gYml0cylcclxuICAgICAgICAgICAgICAgIHggfD0gKGJ5dGUpKDEgPDwgYml0KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHVsb25nIFJpZ2h0RmlsbFRvTVNCKHRoaXMgdWxvbmcgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMjtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDQ7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiA4O1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMTY7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAzMjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVzaG9ydCBSaWdodEZpbGxUb01TQih0aGlzIHVzaG9ydCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgeCB8PSAodXNob3J0KSh4ID4+IDEpO1xyXG4gICAgICAgICAgICB4IHw9ICh1c2hvcnQpKHggPj4gMik7XHJcbiAgICAgICAgICAgIHggfD0gKHVzaG9ydCkoeCA+PiA0KTtcclxuICAgICAgICAgICAgeCB8PSAodXNob3J0KSh4ID4+IDgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYnl0ZSBSaWdodEZpbGxUb01TQih0aGlzIGJ5dGUgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHggfD0gKGJ5dGUpKHggPj4gMSk7XHJcbiAgICAgICAgICAgIHggfD0gKGJ5dGUpKHggPj4gMik7XHJcbiAgICAgICAgICAgIHggfD0gKGJ5dGUpKHggPj4gNCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcblx0fVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQml0VXNhZ2VfdWludFxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHVpbnQgRGVCcnVpam5NdWx0aXBsaWVyID0gMHgwNzdDQjUzMVU7XHJcbiAgICAgICAgc3RhdGljIGludFtdIERlQnJ1aWpuTG9va3VwID0gbmV3IGludFszMl0geyAwLCAxLCAyOCwgMiwgMjksIDE0LCAyNCwgMywgMzAsIDIyLCAyMCwgMTUsIDI1LCAxNywgNCwgOCwgMzEsIDI3LCAxMywgMjMsIDIxLCAxOSwgMTYsIDcsIDI2LCAxMiwgMTgsIDYsIDExLCA1LCAxMCwgOSB9O1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBFeHRyYWN0KHRoaXMgdWludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwWyh4ICogRGVCcnVpam5NdWx0aXBsaWVyKSA+PiAyN107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBMZWFzdFNpZ25pZmljYW50Qml0KHRoaXMgdWludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwWygoeCAmICh+eCArIDEpKSAqIERlQnJ1aWpuTXVsdGlwbGllcikgPj4gMjddO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB1aW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IHggJiAofnggKyAxKTtcclxuICAgICAgICAgICAgeCBePSBtO1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbKG0gKiBEZUJydWlqbk11bHRpcGxpZXIpID4+IDI3XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFBvcHVsYXRpb25Db3VudCh0aGlzIHVpbnQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBxID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGIgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBxKys7XHJcbiAgICAgICAgICAgICAgICBiICY9IGIgLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBUb1NldCh0aGlzIHVpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvbkJpdHMgPSBuZXcgTGlzdDxpbnQ+KDEwKTtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAgICAgIG9uQml0cy5BZGQoR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb25CaXRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVpbnQgUmlnaHRGaWxsVG9NU0IodGhpcyB1aW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMTtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDI7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiA0O1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gODtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDE2O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWludCBUb191aW50KHRoaXMgSUVudW1lcmFibGU8aW50PiBiaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWludCB4ID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBiaXRzKVxyXG4gICAgICAgICAgICAgICAgeCB8PSAxVSA8PCBiaXQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWludCBPcih0aGlzIHVpbnRbXSBjb2xvckdyYXBoLCBpbnQgb2Zmc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IDBVO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gb2Zmc2V0OyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHJlc3VsdCB8PSBjb2xvckdyYXBoW2ldO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFRydWVGb3JBbGxCaXRJbmRpY2VzKHRoaXMgdWludCB4LCBGdW5jPGludCwgYm9vbD4gcHJlZGljYXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVkaWNhdGUoR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRVc2FnZV9sb25nXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgVUludDY0IERlQnJ1aWpuTXVsdGlwbGllciA9IDB4MDdFREQ1RTU5QTRFMjhDMjtcclxuICAgICAgICBzdGF0aWMgaW50W10gRGVCcnVpam5Mb29rdXAgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MywgIDAsIDU4LCAgMSwgNTksIDQ3LCA1MywgIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MCwgMzksIDQ4LCAyNywgNTQsIDMzLCA0MiwgIDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MSwgNTEsIDM3LCA0MCwgNDksIDE4LCAyOCwgMjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA1NSwgMzAsIDM0LCAxMSwgNDMsIDE0LCAyMiwgIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA2MiwgNTcsIDQ2LCA1MiwgMzgsIDI2LCAzMiwgNDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA1MCwgMzYsIDE3LCAxOSwgMjksIDEwLCAxMywgMjEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA1NiwgNDUsIDI1LCAzMSwgMzUsIDE2LCAgOSwgMTIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0NCwgMjQsIDE1LCAgOCwgMjMsICA3LCAgNiwgIDVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgRXh0cmFjdCh0aGlzIGxvbmcgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFsoKFVJbnQ2NCl4ICogRGVCcnVpam5NdWx0aXBsaWVyKSA+PiA1OF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBMZWFzdFNpZ25pZmljYW50Qml0KHRoaXMgbG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwW3VuY2hlY2tlZCgoVUludDY0KSh4ICYgLXgpICogRGVCcnVpam5NdWx0aXBsaWVyID4+IDU4KV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIGxvbmcgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0geCAmIC14O1xyXG4gICAgICAgICAgICB4IF49IG07XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFsoKFVJbnQ2NCltICogRGVCcnVpam5NdWx0aXBsaWVyKSA+PiA1OF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBQb3B1bGF0aW9uQ291bnQodGhpcyBsb25nIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgcSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChiID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcSsrO1xyXG4gICAgICAgICAgICAgICAgYiAmPSBiIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFBvcHVsYXRpb25Db3VudERlbnNlKHRoaXMgbG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgeCA9IHggLSAoKHggPj4gMSkgJiAweDU1NTU1NTU1NTU1NTU1NTVMKTtcclxuICAgICAgICAgICAgeCA9ICh4ICYgMHgzMzMzMzMzMzMzMzMzMzMzTCkgKyAoKHggPj4gMikgJiAweDMzMzMzMzMzMzMzMzMzMzNMKTtcclxuICAgICAgICAgICAgeCA9ICh4ICsgKHggPj4gNCkpICYgMHgwZjBmMGYwZjBmMGYwZjBmTDtcclxuICAgICAgICAgICAgeCA9ICh4ICogMHgwMTAxMDEwMTAxMDEwMTAxTCkgPj4gNTY7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGludCl4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gVG9TZXQobG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG9uQml0cyA9IG5ldyBMaXN0PGludD4oMTApO1xyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgb25CaXRzLkFkZChHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvbkJpdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBSaWdodEZpbGxUb01TQih0aGlzIGxvbmcgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMjtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDQ7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiA4O1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMTY7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIFRvX2xvbmcodGhpcyBJRW51bWVyYWJsZTxpbnQ+IGJpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIHggPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIGJpdHMpXHJcbiAgICAgICAgICAgICAgICB4IHw9IDFMIDw8IGJpdDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIE9yKHRoaXMgbG9uZ1tdIGNvbG9yR3JhcGgsIGludCBvZmZzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMEw7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBvZmZzZXQ7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0IHw9IGNvbG9yR3JhcGhbaV07XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgVHJ1ZUZvckFsbEJpdEluZGljZXModGhpcyBsb25nIHgsIEZ1bmM8aW50LCBib29sPiBwcmVkaWNhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZWRpY2F0ZShHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJpdFZlY3RvcnNfdWxvbmdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBGcm9tQml0VmVjdG9yKHRoaXMgTGlzdDx1bG9uZz4gbikgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IG5ldyBMaXN0PGludD4oNjQpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDY0OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gKHVsb25nKSgxVUwgPDwgaSk7XHJcbiAgICAgICAgICAgICAgICBpbnQgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG4uQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGIgJiBuW2pdKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtICs9IDEgPDwgajtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2LkFkZChtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8dWxvbmc+IFRvQml0VmVjdG9yKElFbnVtZXJhYmxlPGludD4gdylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih3KTtcclxuICAgICAgICAgICAgdmFyIG4gPSBuZXcgTGlzdDx1bG9uZz4oKTtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVsb25nIG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHplcm8gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZbaV0gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgemVybyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHZbaV0gJiAxKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtIHw9ICh1bG9uZykoMVVMIDw8IGkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2W2ldID4+PSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG4uQWRkKG0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh6ZXJvKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBJbmNyZW1lbnQodGhpcyBMaXN0PHVsb25nPiBuLCB1bG9uZyBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDEgPSAodWxvbmcpKG0gJiBuW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9ICh1bG9uZykobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEZWNyZW1lbnQodGhpcyBMaXN0PHVsb25nPiBuLCB1bG9uZyBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDEgPSAodWxvbmcpKG0gJiB+bltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAodWxvbmcpKG0gXiBuW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtID0gdDE7XHJcbiAgICAgICAgICAgICAgICBuW2ldID0gdDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVsb25nIFplcm9lcyh0aGlzIExpc3Q8dWxvbmc+IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyBtID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBtIHw9IG5baV07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKHVsb25nKX5tO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1bG9uZyBHcmVhdGVyVGhhbih0aGlzIExpc3Q8dWxvbmc+IG4sIExpc3Q8dWxvbmc+IGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyBhID0gMDtcclxuICAgICAgICAgICAgdWxvbmcgYiA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBNYXRoLk1heChuLkNvdW50LCBrLkNvdW50KSAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSBrLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGEgfD0gbltpXTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPj0gbi5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBiIHw9IGtbaV07XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSAodWxvbmcpKH5iICYgbltpXSAmIH5rW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBiIHw9ICh1bG9uZykofmEgJiB+bltpXSAmIGtbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKHVsb25nKShhICYgfmIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQml0VmVjdG9yc19sb25nXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gRnJvbUJpdFZlY3Rvcih0aGlzIExpc3Q8bG9uZz4gbikgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IG5ldyBMaXN0PGludD4oNjQpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDY0OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gKGxvbmcpKDFMIDw8IGkpO1xyXG4gICAgICAgICAgICAgICAgaW50IG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChiICYgbltqXSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSArPSAxIDw8IGo7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdi5BZGQobSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGxvbmc+IFRvQml0VmVjdG9yKElFbnVtZXJhYmxlPGludD4gdylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih3KTtcclxuICAgICAgICAgICAgdmFyIG4gPSBuZXcgTGlzdDxsb25nPigpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9uZyBtID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciB6ZXJvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2W2ldICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHplcm8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2W2ldICYgMSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSB8PSAobG9uZykoMUwgPDwgaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZbaV0gPj49IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbi5BZGQobSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHplcm8pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEluY3JlbWVudCh0aGlzIExpc3Q8bG9uZz4gbiwgbG9uZyBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDEgPSAobG9uZykobSAmIG5baV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gKGxvbmcpKG0gXiBuW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtID0gdDE7XHJcbiAgICAgICAgICAgICAgICBuW2ldID0gdDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRGVjcmVtZW50KHRoaXMgTGlzdDxsb25nPiBuLCBsb25nIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9IChsb25nKShtICYgfm5baV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gKGxvbmcpKG0gXiBuW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtID0gdDE7XHJcbiAgICAgICAgICAgICAgICBuW2ldID0gdDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgWmVyb2VzKHRoaXMgTGlzdDxsb25nPiBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyBtID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBtIHw9IG5baV07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGxvbmcpfm07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgR3JlYXRlclRoYW4odGhpcyBMaXN0PGxvbmc+IG4sIExpc3Q8bG9uZz4gaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgYSA9IDA7XHJcbiAgICAgICAgICAgIGxvbmcgYiA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBNYXRoLk1heChuLkNvdW50LCBrLkNvdW50KSAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSBrLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGEgfD0gbltpXTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPj0gbi5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBiIHw9IGtbaV07XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSAobG9uZykofmIgJiBuW2ldICYgfmtbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0gKGxvbmcpKH5hICYgfm5baV0gJiBrW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChsb25nKShhICYgfmIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQml0VmVjdG9yc191aW50XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gRnJvbUJpdFZlY3Rvcih0aGlzIExpc3Q8dWludD4gbikgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IG5ldyBMaXN0PGludD4oMzIpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDMyOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gKHVpbnQpKDFVIDw8IGkpO1xyXG4gICAgICAgICAgICAgICAgaW50IG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChiICYgbltqXSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSArPSAxIDw8IGo7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdi5BZGQobSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PHVpbnQ+IFRvQml0VmVjdG9yKElFbnVtZXJhYmxlPGludD4gdylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih3KTtcclxuICAgICAgICAgICAgdmFyIG4gPSBuZXcgTGlzdDx1aW50PigpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWludCBtID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciB6ZXJvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2W2ldICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHplcm8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2W2ldICYgMSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSB8PSAodWludCkoMVUgPDwgaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZbaV0gPj49IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbi5BZGQobSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHplcm8pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEluY3JlbWVudCh0aGlzIExpc3Q8dWludD4gbiwgdWludCBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDEgPSAodWludCkobSAmIG5baV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gKHVpbnQpKG0gXiBuW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtID0gdDE7XHJcbiAgICAgICAgICAgICAgICBuW2ldID0gdDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRGVjcmVtZW50KHRoaXMgTGlzdDx1aW50PiBuLCB1aW50IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9ICh1aW50KShtICYgfm5baV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gKHVpbnQpKG0gXiBuW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtID0gdDE7XHJcbiAgICAgICAgICAgICAgICBuW2ldID0gdDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVpbnQgWmVyb2VzKHRoaXMgTGlzdDx1aW50PiBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWludCBtID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBtIHw9IG5baV07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKHVpbnQpfm07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVpbnQgR3JlYXRlclRoYW4odGhpcyBMaXN0PHVpbnQ+IG4sIExpc3Q8dWludD4gaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVpbnQgYSA9IDA7XHJcbiAgICAgICAgICAgIHVpbnQgYiA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBNYXRoLk1heChuLkNvdW50LCBrLkNvdW50KSAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSBrLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGEgfD0gbltpXTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPj0gbi5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBiIHw9IGtbaV07XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSAodWludCkofmIgJiBuW2ldICYgfmtbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0gKHVpbnQpKH5hICYgfm5baV0gJiBrW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuICh1aW50KShhICYgfmIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQml0VmVjdG9yc191c2hvcnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBGcm9tQml0VmVjdG9yKHRoaXMgTGlzdDx1c2hvcnQ+IG4pIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBuZXcgTGlzdDxpbnQ+KDE2KTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxNjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9ICh1c2hvcnQpKDEgPDwgaSk7XHJcbiAgICAgICAgICAgICAgICBpbnQgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG4uQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGIgJiBuW2pdKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtICs9IDEgPDwgajtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2LkFkZChtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8dXNob3J0PiBUb0JpdFZlY3RvcihJRW51bWVyYWJsZTxpbnQ+IHcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4odyk7XHJcbiAgICAgICAgICAgIHZhciBuID0gbmV3IExpc3Q8dXNob3J0PigpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdXNob3J0IG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHplcm8gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZbaV0gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgemVybyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHZbaV0gJiAxKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtIHw9ICh1c2hvcnQpKDEgPDwgaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZbaV0gPj49IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbi5BZGQobSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHplcm8pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEluY3JlbWVudCh0aGlzIExpc3Q8dXNob3J0PiBuLCB1c2hvcnQgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKHVzaG9ydCkobSAmIG5baV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gKHVzaG9ydCkobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEZWNyZW1lbnQodGhpcyBMaXN0PHVzaG9ydD4gbiwgdXNob3J0IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9ICh1c2hvcnQpKG0gJiB+bltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAodXNob3J0KShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1c2hvcnQgWmVyb2VzKHRoaXMgTGlzdDx1c2hvcnQ+IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1c2hvcnQgbSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbSB8PSBuW2ldO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICh1c2hvcnQpfm07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVzaG9ydCBHcmVhdGVyVGhhbih0aGlzIExpc3Q8dXNob3J0PiBuLCBMaXN0PHVzaG9ydD4gaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVzaG9ydCBhID0gMDtcclxuICAgICAgICAgICAgdXNob3J0IGIgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gTWF0aC5NYXgobi5Db3VudCwgay5Db3VudCkgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gay5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBhIHw9IG5baV07XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpID49IG4uQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSBrW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGEgfD0gKHVzaG9ydCkofmIgJiBuW2ldICYgfmtbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0gKHVzaG9ydCkofmEgJiB+bltpXSAmIGtbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKHVzaG9ydCkoYSAmIH5iKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJpdFZlY3RvcnNfYnl0ZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IEZyb21CaXRWZWN0b3IodGhpcyBMaXN0PGJ5dGU+IG4pIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBuZXcgTGlzdDxpbnQ+KDgpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSAoYnl0ZSkoMSA8PCBpKTtcclxuICAgICAgICAgICAgICAgIGludCBtID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbi5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYiAmIG5bal0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gMSA8PCBqO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHYuQWRkKG0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxieXRlPiBUb0JpdFZlY3RvcihJRW51bWVyYWJsZTxpbnQ+IHcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4odyk7XHJcbiAgICAgICAgICAgIHZhciBuID0gbmV3IExpc3Q8Ynl0ZT4oKTtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ5dGUgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgemVybyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHYuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodltpXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB6ZXJvID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgodltpXSAmIDEpICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gfD0gKGJ5dGUpKDEgPDwgaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZbaV0gPj49IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbi5BZGQobSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHplcm8pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEluY3JlbWVudCh0aGlzIExpc3Q8Ynl0ZT4gbiwgYnl0ZSBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDEgPSAoYnl0ZSkobSAmIG5baV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gKGJ5dGUpKG0gXiBuW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtID0gdDE7XHJcbiAgICAgICAgICAgICAgICBuW2ldID0gdDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRGVjcmVtZW50KHRoaXMgTGlzdDxieXRlPiBuLCBieXRlIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9IChieXRlKShtICYgfm5baV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gKGJ5dGUpKG0gXiBuW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtID0gdDE7XHJcbiAgICAgICAgICAgICAgICBuW2ldID0gdDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJ5dGUgWmVyb2VzKHRoaXMgTGlzdDxieXRlPiBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYnl0ZSBtID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBtIHw9IG5baV07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGJ5dGUpfm07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJ5dGUgR3JlYXRlclRoYW4odGhpcyBMaXN0PGJ5dGU+IG4sIExpc3Q8Ynl0ZT4gaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJ5dGUgYSA9IDA7XHJcbiAgICAgICAgICAgIGJ5dGUgYiA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBNYXRoLk1heChuLkNvdW50LCBrLkNvdW50KSAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSBrLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGEgfD0gbltpXTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPj0gbi5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBiIHw9IGtbaV07XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSAoYnl0ZSkofmIgJiBuW2ldICYgfmtbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0gKGJ5dGUpKH5hICYgfm5baV0gJiBrW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChieXRlKShhICYgfmIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEdyYXBoQ2hvb3NhYmlsaXR5X3VpbnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNGQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX3VpbnQgZ3JhcGgsIEZ1bmM8aW50LCBpbnQ+IGYsIG91dCBMaXN0PExpc3Q8aW50Pj4gYmFkQXNzaWdubWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgbm9kZXNWaXNpdGVkLCBjYWNoZUhpdHM7XHJcbiAgICAgICAgICAgIHJldHVybiBncmFwaC5Jc0ZDaG9vc2FibGUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KWYsIG91dCBiYWRBc3NpZ25tZW50LCBvdXQgbm9kZXNWaXNpdGVkLCBvdXQgY2FjaGVIaXRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzRkNob29zYWJsZSh0aGlzIElHcmFwaF91aW50IGdyYXBoLCBGdW5jPGludCwgaW50PiBmLCBvdXQgTGlzdDxMaXN0PGludD4+IGJhZEFzc2lnbm1lbnQsIG91dCBsb25nIG5vZGVzVmlzaXRlZCwgb3V0IGxvbmcgY2FjaGVIaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFkQXNzaWdubWVudCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBub2Rlc1Zpc2l0ZWQgPSAwO1xyXG4gICAgICAgICAgICBjYWNoZUhpdHMgPSAwO1xyXG4gICAgICAgICAgICB2YXIgbGl2ZVZlcnRleEJpdHMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIGdyYXBoLk4pLlRvX3VpbnQoKTtcclxuICAgICAgICAgICAgdmFyIHNpemVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oZ3JhcGguVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IGYodikpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIG1heExpc3RTaXplID0gc2l6ZXMuTWF4KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGludCBwb3RTaXplID0gbWF4TGlzdFNpemU7IHBvdFNpemUgPCBncmFwaC5OOyBwb3RTaXplKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vdmFyIGNhY2hlID0gbmV3IERpY3Rpb25hcnk8Qml0TGV2ZWxHZW5lcmF0aW9uLkhhc2hlZEFzc2lnbm1lbnRfdWludCwgYm9vbD4oKTtcclxuICAgICAgICAgICAgICAgIERpY3Rpb25hcnk8Qml0TGV2ZWxHZW5lcmF0aW9uLkhhc2hlZEFzc2lnbm1lbnRfdWludCwgYm9vbD4gY2FjaGUgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvckdyYXBoIGluIEJpdExldmVsR2VuZXJhdGlvbi5Bc3NpZ25tZW50c191aW50LkVudW1lcmF0ZShzaXplcywgcG90U2l6ZSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvdFNpemUgPiBtYXhMaXN0U2l6ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgeHggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHh4IHw9IGNvbG9yR3JhcGhbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHh4LlBvcHVsYXRpb25Db3VudCgpIDw9IGkgKyAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgY29sb3JHcmFwaC5MZW5ndGg7IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNvbG9yR3JhcGhbaV0gJiBjb2xvckdyYXBoW2pdKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3IgaW4gY29sb3JHcmFwaClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChncmFwaC5Jc0luZGVwZW5kZW50KGNvbG9yKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWdyYXBoLklzQ2hvb3NhYmxlKGNvbG9yR3JhcGgsIGxpdmVWZXJ0ZXhCaXRzLCAwLCBjYWNoZSwgcmVmIG5vZGVzVmlzaXRlZCwgcmVmIGNhY2hlSGl0cykpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWRBc3NpZ25tZW50ID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBncmFwaC5WZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50IGJpdCA9IDFVIDw8IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChiaXQgJiBjb2xvckdyYXBoW2ldKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0LkFkZChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWRBc3NpZ25tZW50LkFkZChsaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBza2lwOiA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX3VpbnQgZ3JhcGgsIHVpbnRbXSBjb2xvckdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyBub2Rlc1Zpc2l0ZWQsIGNhY2hlSGl0cztcclxuICAgICAgICAgICAgcmV0dXJuIGdyYXBoLklzQ2hvb3NhYmxlKGNvbG9yR3JhcGgsIG91dCBub2Rlc1Zpc2l0ZWQsIG91dCBjYWNoZUhpdHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX3VpbnQgZ3JhcGgsIHVpbnRbXSBjb2xvckdyYXBoLCBvdXQgbG9uZyBub2Rlc1Zpc2l0ZWQsIG91dCBsb25nIGNhY2hlSGl0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5vZGVzVmlzaXRlZCA9IDA7XHJcbiAgICAgICAgICAgIGNhY2hlSGl0cyA9IDA7XHJcbiAgICAgICAgICAgIC8vdmFyIGNhY2hlID0gbmV3IERpY3Rpb25hcnk8Qml0TGV2ZWxHZW5lcmF0aW9uLkhhc2hlZEFzc2lnbm1lbnRfdWludCwgYm9vbD4oKTtcclxuICAgICAgICAgICAgRGljdGlvbmFyeTxCaXRMZXZlbEdlbmVyYXRpb24uSGFzaGVkQXNzaWdubWVudF91aW50LCBib29sPiBjYWNoZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgRW51bWVyYWJsZS5SYW5nZSgwLCBncmFwaC5OKS5Ub191aW50KCksIDAsIGNhY2hlLCByZWYgbm9kZXNWaXNpdGVkLCByZWYgY2FjaGVIaXRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIElzQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX3VpbnQgZ3JhcGgsIHVpbnRbXSBjb2xvckdyYXBoLCB1aW50IGxpdmVWZXJ0ZXhCaXRzLCBpbnQgYywgRGljdGlvbmFyeTxCaXRMZXZlbEdlbmVyYXRpb24uSGFzaGVkQXNzaWdubWVudF91aW50LCBib29sPiBjYWNoZSwgcmVmIGxvbmcgbm9kZXNWaXNpdGVkLCByZWYgbG9uZyBjYWNoZUhpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBub2Rlc1Zpc2l0ZWQrKztcclxuXHJcbiAgICAgICAgICAgIGdyYXBoLkJlR3JlZWR5KGNvbG9yR3JhcGgsIHJlZiBsaXZlVmVydGV4Qml0cywgYyk7XHJcbiAgICAgICAgICAgIGlmIChsaXZlVmVydGV4Qml0cyA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGlmICgobGl2ZVZlcnRleEJpdHMgJiB+Y29sb3JHcmFwaC5PcihjKSkgIT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vYm9vbCBjYWNoZWRSZXN1bHQ7XHJcbiAgICAgICAgICAgIC8vdmFyIGtleSA9IG5ldyBCaXRMZXZlbEdlbmVyYXRpb24uSGFzaGVkQXNzaWdubWVudF91aW50KGNvbG9yR3JhcGgsIGMsIGxpdmVWZXJ0ZXhCaXRzKTtcclxuICAgICAgICAgICAgLy9pZiAoY2FjaGUuVHJ5R2V0VmFsdWUoa2V5LCBvdXQgY2FjaGVkUmVzdWx0KSlcclxuICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgIC8vICAgIGNhY2hlSGl0cysrO1xyXG4gICAgICAgICAgICAvLyAgICByZXR1cm4gY2FjaGVkUmVzdWx0O1xyXG4gICAgICAgICAgICAvL31cclxuXHJcbiAgICAgICAgICAgIHZhciBjaG9vc2FibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIFYgPSBjb2xvckdyYXBoW2NdICYgbGl2ZVZlcnRleEJpdHM7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBDIGluIGdyYXBoLk1heGltYWxJbmRlcGVuZGVudFN1YnNldHMoVikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChncmFwaC5Jc0Nob29zYWJsZShjb2xvckdyYXBoLCBsaXZlVmVydGV4Qml0cyBeIEMsIGMgKyAxLCBjYWNoZSwgcmVmIG5vZGVzVmlzaXRlZCwgcmVmIGNhY2hlSGl0cykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hvb3NhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9jYWNoZVtrZXldID0gY2hvb3NhYmxlO1xyXG4gICAgICAgICAgICByZXR1cm4gY2hvb3NhYmxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgQmVHcmVlZHkodGhpcyBJR3JhcGhfdWludCBncmFwaCwgdWludFtdIGNvbG9yR3JhcGgsIHJlZiB1aW50IGxpdmVWZXJ0ZXhCaXRzLCBpbnQgYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdoaWxlKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbEJpdHMgPSBsaXZlVmVydGV4Qml0cztcclxuICAgICAgICAgICAgICAgIHZhciBiaXRzID0gbGl2ZVZlcnRleEJpdHM7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoYml0cyAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSBiaXRzICYgKH5iaXRzICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYml0cyBePSBiaXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvckNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gYzsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGJpdCAmIGNvbG9yR3JhcGhbaV0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvckNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3JDb3VudCA+IGdyYXBoLkRlZ3JlZUluU2V0KGJpdC5FeHRyYWN0KCksIGxpdmVWZXJ0ZXhCaXRzKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGl2ZVZlcnRleEJpdHMgXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsaXZlVmVydGV4Qml0cyA9PSBvcmlnaW5hbEJpdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBHcmFwaENob29zYWJpbGl0eV9sb25nXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzRkNob29zYWJsZSh0aGlzIElHcmFwaF9sb25nIGdyYXBoLCBGdW5jPGludCwgaW50PiBmLCBvdXQgTGlzdDxMaXN0PGludD4+IGJhZEFzc2lnbm1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYWRBc3NpZ25tZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHZhciBsaXZlVmVydGV4Qml0cyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgZ3JhcGguTikuVG9fbG9uZygpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihncmFwaC5WZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gZih2KSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgbWF4TGlzdFNpemUgPSBzaXplcy5NYXgoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IHBvdFNpemUgPSBtYXhMaXN0U2l6ZTsgcG90U2l6ZSA8IGdyYXBoLk47IHBvdFNpemUrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yR3JhcGggaW4gQml0TGV2ZWxHZW5lcmF0aW9uLkFzc2lnbm1lbnRzX2xvbmcuRW51bWVyYXRlKHNpemVzLCBwb3RTaXplKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocG90U2l6ZSA+IG1heExpc3RTaXplKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHh4ID0gMEw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeHggfD0gY29sb3JHcmFwaFtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeHguUG9wdWxhdGlvbkNvdW50KCkgPD0gaSArIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBjb2xvckdyYXBoLkxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY29sb3JHcmFwaFtpXSAmIGNvbG9yR3JhcGhbal0pID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvciBpbiBjb2xvckdyYXBoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyYXBoLklzSW5kZXBlbmRlbnQoY29sb3IpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWdyYXBoLklzQ2hvb3NhYmxlKGNvbG9yR3JhcGgsIGxpdmVWZXJ0ZXhCaXRzLCAwKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhZEFzc2lnbm1lbnQgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGdyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAxTCA8PCB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoYml0ICYgY29sb3JHcmFwaFtpXSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5BZGQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFkQXNzaWdubWVudC5BZGQobGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2tpcDogO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0Nob29zYWJsZSh0aGlzIElHcmFwaF9sb25nIGdyYXBoLCBsb25nW10gY29sb3JHcmFwaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBncmFwaC5Jc0Nob29zYWJsZShjb2xvckdyYXBoLCBFbnVtZXJhYmxlLlJhbmdlKDAsIGdyYXBoLk4pLlRvX2xvbmcoKSwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNDaG9vc2FibGUodGhpcyBJR3JhcGhfbG9uZyBncmFwaCwgbG9uZ1tdIGNvbG9yR3JhcGgsIGxvbmcgc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdyYXBoLklzQ2hvb3NhYmxlKGNvbG9yR3JhcGgsIHN1YnNldCwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBJc0Nob29zYWJsZSh0aGlzIElHcmFwaF9sb25nIGdyYXBoLCBsb25nW10gY29sb3JHcmFwaCwgbG9uZyBsaXZlVmVydGV4Qml0cywgaW50IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBncmFwaC5CZUdyZWVkeShjb2xvckdyYXBoLCByZWYgbGl2ZVZlcnRleEJpdHMsIGMpO1xyXG4gICAgICAgICAgICBpZiAobGl2ZVZlcnRleEJpdHMgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoKGxpdmVWZXJ0ZXhCaXRzICYgfmNvbG9yR3JhcGguT3IoYykpICE9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2hvb3NhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBWID0gY29sb3JHcmFwaFtjXSAmIGxpdmVWZXJ0ZXhCaXRzO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgQyBpbiBncmFwaC5NYXhpbWFsSW5kZXBlbmRlbnRTdWJzZXRzKFYpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgbGl2ZVZlcnRleEJpdHMgXiBDLCBjICsgMSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hvb3NhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNob29zYWJsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEJlR3JlZWR5KHRoaXMgSUdyYXBoX2xvbmcgZ3JhcGgsIGxvbmdbXSBjb2xvckdyYXBoLCByZWYgbG9uZyBsaXZlVmVydGV4Qml0cywgaW50IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsQml0cyA9IGxpdmVWZXJ0ZXhCaXRzO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdHMgPSBsaXZlVmVydGV4Qml0cztcclxuICAgICAgICAgICAgICAgIHdoaWxlIChiaXRzICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpdCA9IGJpdHMgJiAtYml0cztcclxuICAgICAgICAgICAgICAgICAgICBiaXRzIF49IGJpdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBjOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoYml0ICYgY29sb3JHcmFwaFtpXSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvckNvdW50ID4gZ3JhcGguRGVncmVlSW5TZXQoYml0LkV4dHJhY3QoKSwgbGl2ZVZlcnRleEJpdHMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXZlVmVydGV4Qml0cyBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxpdmVWZXJ0ZXhCaXRzID09IG9yaWdpbmFsQml0cylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzU3Vic2V0VHdvQ29sb3JhYmxlKEJpdEdyYXBoX2xvbmcgZywgbG9uZyBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYyA9IG5ldyBpbnRbZy5OXTtcclxuICAgICAgICAgICAgdmFyIHEgPSBuZXcgaW50W2cuTl07XHJcblxyXG4gICAgICAgICAgICB2YXIgbGVmdG92ZXIgPSBzZXQ7XHJcbiAgICAgICAgICAgIHZhciBzID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGxlZnRvdmVyICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByID0gbGVmdG92ZXIuTGVhc3RTaWduaWZpY2FudEJpdCgpO1xyXG4gICAgICAgICAgICAgICAgcVtzXSA9IHI7XHJcbiAgICAgICAgICAgICAgICBjW3JdID0gMTtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gcztcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocyA8PSBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gcVtzKytdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuID0gZy5OZWlnaGJvcnNJblNldCh2LCBzZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobiAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJpdCA9IG4gJiAtbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSBiaXQuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNbd10gPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcVsrK2VdID0gdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNbd10gPSAzIC0gY1t2XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjW3ddICE9IDMgLSBjW3ZdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdG92ZXIgXj0gKDFMIDw8IHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIGNsYXNzIEhhc2hlZEFzc2lnbm1lbnRfdWxvbmdcclxuICAgIHtcclxuICAgICAgICB1bG9uZ1tdIF9hc3NpZ25tZW50OyBcclxuICAgICAgICBpbnQgX2xlbmd0aDtcclxuXHRcdGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIYXNoZWRBc3NpZ25tZW50X3Vsb25nKHVsb25nW10gYXNzaWdubWVudCwgaW50IGluZGV4LCB1bG9uZyBvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9hc3NpZ25tZW50ID0gbmV3IHVsb25nW2Fzc2lnbm1lbnQuTGVuZ3RoIC0gaW5kZXhdO1xyXG4gICAgICAgICAgICBfbGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBpbmRleDsgaSA8IGFzc2lnbm1lbnQuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gKHVsb25nKShhc3NpZ25tZW50W2ldICYgb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHggIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfYXNzaWdubWVudFtfbGVuZ3RoXSA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgX2xlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBBcnJheS5Tb3J0PHVsb25nPihfYXNzaWdubWVudCwgMCwgX2xlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoKF9hc3NpZ25tZW50LCBfbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBIYXNoKHVsb25nW10gbGlzdCwgaW50IGxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIGhhc2ggPSA1MzgxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaGFzaCA9ICh1bG9uZykobGlzdFtpXSArIChoYXNoIDw8IDUpICsgaGFzaCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGludCloYXNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKG9iaiBhcyBIYXNoZWRBc3NpZ25tZW50X3Vsb25nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhIYXNoZWRBc3NpZ25tZW50X3Vsb25nIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwgfHwgX2xlbmd0aCAhPSBvdGhlci5fbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBpZiAoX2Fzc2lnbm1lbnRbaV0gIT0gb3RoZXIuX2Fzc2lnbm1lbnRbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIGNsYXNzIEhhc2hlZEFzc2lnbm1lbnRfdWludFxyXG4gICAge1xyXG4gICAgICAgIHVpbnRbXSBfYXNzaWdubWVudDsgXHJcbiAgICAgICAgaW50IF9sZW5ndGg7XHJcblx0XHRpbnQgX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgSGFzaGVkQXNzaWdubWVudF91aW50KHVpbnRbXSBhc3NpZ25tZW50LCBpbnQgaW5kZXgsIHVpbnQgb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfYXNzaWdubWVudCA9IG5ldyB1aW50W2Fzc2lnbm1lbnQuTGVuZ3RoIC0gaW5kZXhdO1xyXG4gICAgICAgICAgICBfbGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBpbmRleDsgaSA8IGFzc2lnbm1lbnQuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gKHVpbnQpKGFzc2lnbm1lbnRbaV0gJiBvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9hc3NpZ25tZW50W19sZW5ndGhdID0geDtcclxuICAgICAgICAgICAgICAgICAgICBfbGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFycmF5LlNvcnQ8dWludD4oX2Fzc2lnbm1lbnQsIDAsIF9sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgX2hhc2hDb2RlID0gSGFzaChfYXNzaWdubWVudCwgX2xlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgSGFzaCh1aW50W10gbGlzdCwgaW50IGxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIGhhc2ggPSA1MzgxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaGFzaCA9ICh1bG9uZykobGlzdFtpXSArIChoYXNoIDw8IDUpICsgaGFzaCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGludCloYXNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKG9iaiBhcyBIYXNoZWRBc3NpZ25tZW50X3VpbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKEhhc2hlZEFzc2lnbm1lbnRfdWludCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsIHx8IF9sZW5ndGggIT0gb3RoZXIuX2xlbmd0aClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaWYgKF9hc3NpZ25tZW50W2ldICE9IG90aGVyLl9hc3NpZ25tZW50W2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBIYXNoZWRBc3NpZ25tZW50X3VzaG9ydFxyXG4gICAge1xyXG4gICAgICAgIHVzaG9ydFtdIF9hc3NpZ25tZW50OyBcclxuICAgICAgICBpbnQgX2xlbmd0aDtcclxuXHRcdGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIYXNoZWRBc3NpZ25tZW50X3VzaG9ydCh1c2hvcnRbXSBhc3NpZ25tZW50LCBpbnQgaW5kZXgsIHVzaG9ydCBvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9hc3NpZ25tZW50ID0gbmV3IHVzaG9ydFthc3NpZ25tZW50Lkxlbmd0aCAtIGluZGV4XTtcclxuICAgICAgICAgICAgX2xlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gaW5kZXg7IGkgPCBhc3NpZ25tZW50Lkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9ICh1c2hvcnQpKGFzc2lnbm1lbnRbaV0gJiBvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9hc3NpZ25tZW50W19sZW5ndGhdID0geDtcclxuICAgICAgICAgICAgICAgICAgICBfbGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFycmF5LlNvcnQ8dXNob3J0PihfYXNzaWdubWVudCwgMCwgX2xlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoKF9hc3NpZ25tZW50LCBfbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBIYXNoKHVzaG9ydFtdIGxpc3QsIGludCBsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyBoYXNoID0gNTM4MTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGhhc2ggPSAodWxvbmcpKGxpc3RbaV0gKyAoaGFzaCA8PCA1KSArIGhhc2gpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpaGFzaDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyhvYmogYXMgSGFzaGVkQXNzaWdubWVudF91c2hvcnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKEhhc2hlZEFzc2lnbm1lbnRfdXNob3J0IG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwgfHwgX2xlbmd0aCAhPSBvdGhlci5fbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBpZiAoX2Fzc2lnbm1lbnRbaV0gIT0gb3RoZXIuX2Fzc2lnbm1lbnRbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIGNsYXNzIEhhc2hlZEFzc2lnbm1lbnRfYnl0ZVxyXG4gICAge1xyXG4gICAgICAgIGJ5dGVbXSBfYXNzaWdubWVudDsgXHJcbiAgICAgICAgaW50IF9sZW5ndGg7XHJcblx0XHRpbnQgX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgSGFzaGVkQXNzaWdubWVudF9ieXRlKGJ5dGVbXSBhc3NpZ25tZW50LCBpbnQgaW5kZXgsIGJ5dGUgb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfYXNzaWdubWVudCA9IG5ldyBieXRlW2Fzc2lnbm1lbnQuTGVuZ3RoIC0gaW5kZXhdO1xyXG4gICAgICAgICAgICBfbGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBpbmRleDsgaSA8IGFzc2lnbm1lbnQuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gKGJ5dGUpKGFzc2lnbm1lbnRbaV0gJiBvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9hc3NpZ25tZW50W19sZW5ndGhdID0geDtcclxuICAgICAgICAgICAgICAgICAgICBfbGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFycmF5LlNvcnQ8Ynl0ZT4oX2Fzc2lnbm1lbnQsIDAsIF9sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgX2hhc2hDb2RlID0gSGFzaChfYXNzaWdubWVudCwgX2xlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgSGFzaChieXRlW10gbGlzdCwgaW50IGxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIGhhc2ggPSA1MzgxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaGFzaCA9ICh1bG9uZykobGlzdFtpXSArIChoYXNoIDw8IDUpICsgaGFzaCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGludCloYXNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKG9iaiBhcyBIYXNoZWRBc3NpZ25tZW50X2J5dGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKEhhc2hlZEFzc2lnbm1lbnRfYnl0ZSBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsIHx8IF9sZW5ndGggIT0gb3RoZXIuX2xlbmd0aClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaWYgKF9hc3NpZ25tZW50W2ldICE9IG90aGVyLl9hc3NpZ25tZW50W2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTWF4aW1hbG5kZXBlbmRlbnRTZXRTZWFyY2hpbmdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8bG9uZz4gR2VuZXJhdGVNYXhpbWFsSW5kZXBlbmRlbnRTdWJzZXRzKEJpdEdyYXBoX2xvbmcgZywgbG9uZyBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZCA9IG5ldyBpbnRbNjRdO1xyXG5cclxuICAgICAgICAgICAgdmFyIG4gPSBzZXQuUG9wdWxhdGlvbkNvdW50RGVuc2UoKTtcclxuICAgICAgICAgICAgdmFyIEQgPSBuZXcgbG9uZ1tuXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBxID0gc2V0O1xyXG4gICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0ID0gcSAmIC1xO1xyXG4gICAgICAgICAgICAgICAgdmFyIHYgPSBiaXQuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRbdl0gPSBnLkRlZ3JlZUluU2V0KHYsIHNldCk7XHJcbiAgICAgICAgICAgICAgICBEW2Rbdl1dIHw9IGJpdDtcclxuXHJcbiAgICAgICAgICAgICAgICBxIF49IGJpdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGJpdHMgPSBuZXcgbG9uZ1tuXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChEW2pdICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gRFtqXSAmIC1EW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiaXRzW24gLSAxIC0gaV0gPSBiaXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGJpdC5FeHRyYWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBnLk5laWdoYm9yc0luU2V0KHYsIHNldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHEgJiAtcTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gYi5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRFtkW3hdXSBePSBiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZFt4XS0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRFtkW3hdXSB8PSBiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgXj0gYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0IF49IGJpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRFtqXSBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEdlbmVyYXRlTWF4aW1hbEluZGVwZW5kZW50U3Vic2V0cyhnLCBiaXRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBMaXN0PGxvbmc+IEdlbmVyYXRlTWF4aW1hbEluZGVwZW5kZW50U3Vic2V0cyhCaXRHcmFwaF9sb25nIGcsIGxvbmdbXSBiaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1pcyA9IG5ldyBMaXN0PGxvbmc+KDgpO1xyXG4gICAgICAgICAgICBtaXMuQWRkKDBMKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBlYXJsaWVyID0gMEw7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgYml0cy5MZW5ndGg7IGorKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdCA9IGJpdHNbal07XHJcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGJpdC5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gbWlzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtID0gbWlzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBOID0gZy5OZWlnaGJvcnNJblNldCh2LCBtKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWlzW2ldIHw9IGJpdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1wID0gbSAmIH5OO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXBwID0gbXAgfCBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxID0gTjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBlYXJsaWVyICYgfm1wcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gcSAmIC1xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSBiLkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXEgPSBnLk5laWdoYm9yc0luU2V0KHcsIGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHFxICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJiID0gcXEgJiAtcXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBiYi5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnLk5laWdoYm9yc0luU2V0KHosIG1wcCkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxcSBePSBiYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxIF49IGI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBYID0gZy5OZWlnaGJvcnNJblNldCh2LCBlYXJsaWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcSA9IFggJiB+TjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gcSAmIC1xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSBiLkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZy5OZWlnaGJvcnNJblNldCh3LCBtcCkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYIF49IGI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxIF49IGI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChYICE9IE4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBaID0gMEw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoWiA8IE4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWiA9IChaIC0gWCkgJiBYO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKFogJiBOKSA9PSBaKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnLklzSW5kZXBlbmRlbnQoWikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW0gPSBtcCB8IFo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGVhcmxpZXIgJiB+bW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IE4gJiB+WjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gcSAmIC1xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IGIuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHFxID0gZy5OZWlnaGJvcnNJblNldCh3LCBsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHFxICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYiA9IHFxICYgLXFxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBiYi5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGcuTmVpZ2hib3JzSW5TZXQoeiwgbW0pID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBub3RNYXhpbWFsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHFxIF49IGJiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxIF49IGI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcbm5vdE1heGltYWw6IDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWlzLkFkZCgobSB8IGJpdCkgJiB+Tik7XHJcbnNraXA6IDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZWFybGllciB8PSBiaXQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtaXM7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIExleGljb2dyYXBoaWNhbGx5Rmlyc3RDb250YWluaW5nKEJpdEdyYXBoX2xvbmcgZywgbG9uZyBzZXQsIGxvbmcgUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNldCBePSBTO1xyXG4gICAgICAgICAgICB3aGlsZSAoc2V0ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiaXQgPSBzZXQgJiAtc2V0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHYgPSBiaXQuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChnLk5laWdoYm9yc0luU2V0KHYsIFMpID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgUyB8PSBiaXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0IF49IGJpdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgUGFyZW50KEJpdEdyYXBoX2xvbmcgZywgbG9uZyBzZXQsIGxvbmcgTEZNSVMsIGxvbmcgUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhID0gTEZNSVMgJiB+UztcclxuICAgICAgICAgICAgdmFyIGJpdCA9IGEgJiAtYTtcclxuICAgICAgICAgICAgdmFyIHYgPSBiaXQuRXh0cmFjdCgpO1xyXG4gICAgICAgICAgICB2YXIgTiA9IGcuTmVpZ2hib3JzSW5TZXQodiwgUyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTGV4aWNvZ3JhcGhpY2FsbHlGaXJzdENvbnRhaW5pbmcoZywgc2V0LCAoUyB8IGJpdCkgXiBOKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBMYXRlcihCaXRHcmFwaF9sb25nIGcsIGxvbmcgc2V0LCBsb25nIExGTUlTLCBpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBxID0gZy5OZWlnaGJvcnNJblNldCh2LCBzZXQgXiBMRk1JUyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZWFybGllciA9ICgoMUwgPDwgdikgLSAxKSAmIExGTUlTO1xyXG4gICAgICAgICAgICB2YXIgbGF0ZXIgPSAwTDtcclxuICAgICAgICAgICAgd2hpbGUgKHNldCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0ID0gcSAmIC1xO1xyXG4gICAgICAgICAgICAgICAgdmFyIHcgPSBiaXQuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChnLk5laWdoYm9yc0luU2V0KHcsIGVhcmxpZXIpID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXIgfD0gYml0O1xyXG5cclxuICAgICAgICAgICAgICAgIHEgXj0gYml0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbGF0ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaGljc0xheWVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBBUkdCXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBBUkdCIEJhc2ljUGFsZXR0ZShpbnQgcSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChxID09IC0xKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBUkdCKDI1NSwgMjU1LCAyNTUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEZyb21IU0woMC42ICsgKGRvdWJsZSlSZXZlcnNlQml0cygodWludClxKSAvIE1hdGguUG93KDIuMGYsIDMyKSwgMS4wLCAwLjY1KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQVJHQiBGcm9tRnJhY3Rpb25hbChkb3VibGUgYSwgZG91YmxlIHIsIGRvdWJsZSBnLCBkb3VibGUgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQVJHQigoaW50KShhICogMjU1KSwgKGludCkociAqIDI1NSksIChpbnQpKGcgKiAyNTUpLCAoaW50KShiICogMjU1KSk7IFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBBUkdCIEZyb21IU0woZG91YmxlIGgsIGRvdWJsZSBzLCBkb3VibGUgbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdoaWxlIChoID4gMS4wKVxyXG4gICAgICAgICAgICAgICAgaCAtPSAxLjA7XHJcbiAgICAgICAgICAgIHdoaWxlIChzID4gMS4wKVxyXG4gICAgICAgICAgICAgICAgcyAtPSAxLjA7XHJcbiAgICAgICAgICAgIHdoaWxlIChsID4gMS4wKVxyXG4gICAgICAgICAgICAgICAgbCAtPSAxLjA7XHJcblxyXG4gICAgICAgICAgICBpZiAocyA9PSAwLjApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRnJvbUZyYWN0aW9uYWwoMS4wLCBsLCBsLCBsKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBxID0gbCA8IDAuNSA/IGwgKiAoMS4wICsgcykgOiBsICsgcyAtIGwgKiBzO1xyXG4gICAgICAgICAgICB2YXIgcCA9IDIuMCAqIGwgLSBxO1xyXG4gICAgICAgICAgICB2YXIgciA9IEh1ZVRvUmdiKHAsIHEsIGggKyAxLjAgLyAzLjApO1xyXG4gICAgICAgICAgICB2YXIgZyA9IEh1ZVRvUmdiKHAsIHEsIGgpO1xyXG4gICAgICAgICAgICB2YXIgYiA9IEh1ZVRvUmdiKHAsIHEsIGggLSAxLjAgLyAzLjApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEZyb21GcmFjdGlvbmFsKDEuMCwgciwgZywgYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgZG91YmxlIEh1ZVRvUmdiKGRvdWJsZSBwLCBkb3VibGUgcSwgZG91YmxlIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodCA8IDAuMCkgdCArPSAxLjBmO1xyXG4gICAgICAgICAgICBpZiAodCA+IDEuMCkgdCAtPSAxLjA7XHJcbiAgICAgICAgICAgIGlmICh0IDwgMS4wIC8gNi4wKSByZXR1cm4gcCArIChxIC0gcCkgKiA2LjAgKiB0O1xyXG4gICAgICAgICAgICBpZiAodCA8IDEuMCAvIDIuMCkgcmV0dXJuIHE7XHJcbiAgICAgICAgICAgIGlmICh0IDwgMi4wIC8gMy4wKSByZXR1cm4gcCArIChxIC0gcCkgKiAoMi4wIC8gMy4wIC0gdCkgKiA2LjA7XHJcbiAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHVpbnQgUmV2ZXJzZUJpdHModWludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWludCB5ID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAzMjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgeSB8PSAodWludCkoKHggJiAoMSA8PCBpKSkgPDwgKDMxIC0gMiAqIGkpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBBIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IFIgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgRyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBCIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEFSR0IoaW50IGEsIGludCByLCBpbnQgZywgaW50IGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBID0gYTtcclxuICAgICAgICAgICAgUiA9IHI7XHJcbiAgICAgICAgICAgIEcgPSBnO1xyXG4gICAgICAgICAgICBCID0gYjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEFSR0IoaW50IHIsIGludCBnLCBpbnQgYilcclxuICAgICAgICAgICAgOiB0aGlzKDI1NSwgciwgZywgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KFwiezB9LHsxfSx7Mn0sezN9XCIsIEEsIFIsIEcsIEIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhpY3NMYXllclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQm94XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBCb3ggRW1wdHkgPSBuZXcgQm94KDAsIDApO1xyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFRvcCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBMZWZ0IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFdpZHRoIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIEhlaWdodCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgWCB7IGdldCB7IHJldHVybiBMZWZ0OyB9IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFkgeyBnZXQgeyByZXR1cm4gVG9wOyB9IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFJpZ2h0IHsgZ2V0IHsgcmV0dXJuIExlZnQgKyBXaWR0aDsgfSB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBCb3R0b20geyBnZXQgeyByZXR1cm4gVG9wICsgSGVpZ2h0OyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIEJveChkb3VibGUgbGVmdCwgZG91YmxlIHRvcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExlZnQgPSBsZWZ0O1xyXG4gICAgICAgICAgICBUb3AgPSB0b3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBCb3goZG91YmxlIGxlZnQsIGRvdWJsZSB0b3AsIGRvdWJsZSB3aWR0aCwgZG91YmxlIGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExlZnQgPSBsZWZ0O1xyXG4gICAgICAgICAgICBUb3AgPSB0b3A7XHJcbiAgICAgICAgICAgIFdpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIEhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEluZmxhdGUoZG91YmxlIHgsIGRvdWJsZSB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGVmdCAtPSB4O1xyXG4gICAgICAgICAgICBUb3AgLT0geTtcclxuICAgICAgICAgICAgV2lkdGggKz0gMiAqIHg7XHJcbiAgICAgICAgICAgIEhlaWdodCArPSAyICogeTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnMoZG91YmxlIHgsIGRvdWJsZSB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExlZnQgPD0geCAmJiB4IDw9IFJpZ2h0ICYmXHJcbiAgICAgICAgICAgICAgICAgICBUb3AgPD0geSAmJiB5IDw9IEJvdHRvbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnMoQm94IGJveClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMZWZ0IDw9IGJveC5MZWZ0ICYmIGJveC5SaWdodCA8PSBSaWdodCAmJlxyXG4gICAgICAgICAgICAgICAgICAgVG9wIDw9IGJveC5Ub3AgJiYgYm94LkJvdHRvbSA8PSBCb3R0b207XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaGljc0xheWVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBGb250XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IFNpemUgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRm9udChzdHJpbmcgbmFtZSwgaW50IHNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgU2l6ZSA9IHNpemU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5JTztcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcblxyXG4vLy8gPHN1bW1hcnk+XHJcbi8vLyBDIyBpbXBsZW1lbnRhdGlvbiBvZiBBU0NJSTg1IGVuY29kaW5nLiBcclxuLy8vIEJhc2VkIG9uIEMgY29kZSBmcm9tIGh0dHA6Ly93d3cuc3RpbGxocS5jb20vY2dpLWJpbi9jdnN3ZWIvYXNjaWk4NS9cclxuLy8vIDwvc3VtbWFyeT5cclxuLy8vIDxyZW1hcmtzPlxyXG4vLy8gSmVmZiBBdHdvb2RcclxuLy8vIGh0dHA6Ly93d3cuY29kaW5naG9ycm9yLmNvbS9ibG9nL2FyY2hpdmVzLzAwMDQxMC5odG1sXHJcbi8vLyA8L3JlbWFya3M+XHJcbm5hbWVzcGFjZSBHcmFwaHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEFzY2lpODVcclxuICAgIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIFByZWZpeCBtYXJrIHRoYXQgaWRlbnRpZmllcyBhbiBlbmNvZGVkIEFTQ0lJODUgc3RyaW5nLCB0cmFkaXRpb25hbGx5ICc8fidcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUHJlZml4TWFyayA9IFwiXCI7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBTdWZmaXggbWFyayB0aGF0IGlkZW50aWZpZXMgYW4gZW5jb2RlZCBBU0NJSTg1IHN0cmluZywgdHJhZGl0aW9uYWxseSAnfj4nXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFN1ZmZpeE1hcmsgPSBcIlwiO1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gTWF4aW11bSBsaW5lIGxlbmd0aCBmb3IgZW5jb2RlZCBBU0NJSTg1IHN0cmluZzsgXHJcbiAgICAgICAgLy8vIHNldCB0byB6ZXJvIGZvciBvbmUgdW5icm9rZW4gbGluZS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBpbnQgTGluZUxlbmd0aCA9IDA7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBBZGQgdGhlIFByZWZpeCBhbmQgU3VmZml4IG1hcmtzIHdoZW4gZW5jb2RpbmcsIGFuZCBlbmZvcmNlIHRoZWlyIHByZXNlbmNlIGZvciBkZWNvZGluZ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIGJvb2wgRW5mb3JjZU1hcmtzID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHByaXZhdGUgY29uc3QgaW50IF9hc2NpaU9mZnNldCA9IDMzO1xyXG4gICAgICAgIHByaXZhdGUgYnl0ZVtdIF9lbmNvZGVkQmxvY2sgPSBuZXcgYnl0ZVs1XTtcclxuICAgICAgICBwcml2YXRlIGJ5dGVbXSBfZGVjb2RlZEJsb2NrID0gbmV3IGJ5dGVbNF07XHJcbiAgICAgICAgcHJpdmF0ZSB1aW50IF90dXBsZSA9IDA7XHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgX2xpbmVQb3MgPSAwO1xyXG5cclxuICAgICAgICBwcml2YXRlIHVpbnRbXSBwb3c4NSA9IHsgODUgKiA4NSAqIDg1ICogODUsIDg1ICogODUgKiA4NSwgODUgKiA4NSwgODUsIDEgfTtcclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBEZWNvZGVzIGFuIEFTQ0lJODUgZW5jb2RlZCBzdHJpbmcgaW50byB0aGUgb3JpZ2luYWwgYmluYXJ5IGRhdGFcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNcIj5BU0NJSTg1IGVuY29kZWQgc3RyaW5nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+Ynl0ZSBhcnJheSBvZiBkZWNvZGVkIGJpbmFyeSBkYXRhPC9yZXR1cm5zPlxyXG4gICAgICAgIHB1YmxpYyBieXRlW10gRGVjb2RlKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEVuZm9yY2VNYXJrcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzLlN0YXJ0c1dpdGgoUHJlZml4TWFyaykgfCAhcy5FbmRzV2l0aChTdWZmaXhNYXJrKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiQVNDSUk4NSBlbmNvZGVkIGRhdGEgc2hvdWxkIGJlZ2luIHdpdGggJ1wiICsgUHJlZml4TWFyayArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiJyBhbmQgZW5kIHdpdGggJ1wiICsgU3VmZml4TWFyayArIFwiJ1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gc3RyaXAgcHJlZml4IGFuZCBzdWZmaXggaWYgcHJlc2VudFxyXG4gICAgICAgICAgICBpZiAocy5TdGFydHNXaXRoKFByZWZpeE1hcmspKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzID0gcy5TdWJzdHJpbmcoUHJlZml4TWFyay5MZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzLkVuZHNXaXRoKFN1ZmZpeE1hcmspKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzID0gcy5TdWJzdHJpbmcoMCwgcy5MZW5ndGggLSBTdWZmaXhNYXJrLkxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBtcyA9IG5ldyBMaXN0PGJ5dGU+KCk7XHJcbiAgICAgICAgICAgIGludCBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIGJvb2wgcHJvY2Vzc0NoYXIgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKGNoYXIgYyBpbiBzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiVGhlIGNoYXJhY3RlciAneicgaXMgaW52YWxpZCBpbnNpZGUgYW4gQVNDSUk4NSBibG9jay5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RlY29kZWRCbG9ja1swXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWNvZGVkQmxvY2tbMV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGVjb2RlZEJsb2NrWzJdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RlY29kZWRCbG9ja1szXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zLkFkZFJhbmdlKF9kZWNvZGVkQmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzQ2hhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdcXG4nOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1xccic6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXFx0JzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdcXDAnOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1xcZic6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXFxiJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0NoYXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPCAnIScgfHwgYyA+ICd1JylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIkJhZCBjaGFyYWN0ZXIgJ1wiICsgYyArIFwiJyBmb3VuZC4gQVNDSUk4NSBvbmx5IGFsbG93cyBjaGFyYWN0ZXJzICchJyB0byAndScuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDaGFyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3NDaGFyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF90dXBsZSArPSAoKHVpbnQpKGMgLSBfYXNjaWlPZmZzZXQpICogcG93ODVbY291bnRdKTtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PSBfZW5jb2RlZEJsb2NrLkxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZUJsb2NrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zLkFkZFJhbmdlKF9kZWNvZGVkQmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdHVwbGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIHNvbWUgYnl0ZXMgbGVmdCBvdmVyIGF0IHRoZSBlbmQuLlxyXG4gICAgICAgICAgICBpZiAoY291bnQgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlRoZSBsYXN0IGJsb2NrIG9mIEFTQ0lJODUgZGF0YSBjYW5ub3QgYmUgYSBzaW5nbGUgYnl0ZS5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb3VudC0tO1xyXG4gICAgICAgICAgICAgICAgX3R1cGxlICs9IHBvdzg1W2NvdW50XTtcclxuICAgICAgICAgICAgICAgIERlY29kZUJsb2NrKGNvdW50KTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtcy5BZGQoX2RlY29kZWRCbG9ja1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtcy5Ub0FycmF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEVuY29kZXMgYmluYXJ5IGRhdGEgaW50byBhIHBsYWludGV4dCBBU0NJSTg1IGZvcm1hdCBzdHJpbmdcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImJhXCI+YmluYXJ5IGRhdGEgdG8gZW5jb2RlPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+QVNDSUk4NSBlbmNvZGVkIHN0cmluZzwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEVuY29kZShieXRlW10gYmEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdHJpbmdCdWlsZGVyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKGludCkoYmEuTGVuZ3RoICogKF9lbmNvZGVkQmxvY2suTGVuZ3RoIC8gX2RlY29kZWRCbG9jay5MZW5ndGgpKSk7XHJcbiAgICAgICAgICAgIF9saW5lUG9zID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChFbmZvcmNlTWFya3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFwcGVuZFN0cmluZyhzYiwgUHJlZml4TWFyayk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGludCBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIF90dXBsZSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKGJ5dGUgYiBpbiBiYSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID49IF9kZWNvZGVkQmxvY2suTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfdHVwbGUgfD0gYjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3R1cGxlID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcHBlbmRDaGFyKHNiLCAneicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBFbmNvZGVCbG9jayhzYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF90dXBsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF90dXBsZSB8PSAodWludCkoYiA8PCAoMjQgLSAoY291bnQgKiA4KSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgc29tZSBieXRlcyBsZWZ0IG92ZXIgYXQgdGhlIGVuZC4uXHJcbiAgICAgICAgICAgIGlmIChjb3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEVuY29kZUJsb2NrKGNvdW50ICsgMSwgc2IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoRW5mb3JjZU1hcmtzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBBcHBlbmRTdHJpbmcoc2IsIFN1ZmZpeE1hcmspO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzYi5Ub1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIEVuY29kZUJsb2NrKFN0cmluZ0J1aWxkZXIgc2IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFbmNvZGVCbG9jayhfZW5jb2RlZEJsb2NrLkxlbmd0aCwgc2IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIEVuY29kZUJsb2NrKGludCBjb3VudCwgU3RyaW5nQnVpbGRlciBzYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBfZW5jb2RlZEJsb2NrLkxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfZW5jb2RlZEJsb2NrW2ldID0gKGJ5dGUpKChfdHVwbGUgJSA4NSkgKyBfYXNjaWlPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgX3R1cGxlIC89IDg1O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNoYXIgYyA9IChjaGFyKV9lbmNvZGVkQmxvY2tbaV07XHJcbiAgICAgICAgICAgICAgICBBcHBlbmRDaGFyKHNiLCBjKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBEZWNvZGVCbG9jaygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEZWNvZGVCbG9jayhfZGVjb2RlZEJsb2NrLkxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgRGVjb2RlQmxvY2soaW50IGJ5dGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBieXRlczsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfZGVjb2RlZEJsb2NrW2ldID0gKGJ5dGUpKF90dXBsZSA+PiAyNCAtIChpICogOCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgQXBwZW5kU3RyaW5nKFN0cmluZ0J1aWxkZXIgc2IsIHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKExpbmVMZW5ndGggPiAwICYmIChfbGluZVBvcyArIHMuTGVuZ3RoID4gTGluZUxlbmd0aCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9saW5lUG9zID0gMDtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZCgnXFxyJyk7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmQoJ1xcbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2xpbmVQb3MgKz0gcy5MZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2IuQXBwZW5kKHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIEFwcGVuZENoYXIoU3RyaW5nQnVpbGRlciBzYiwgY2hhciBjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc2IuQXBwZW5kKGMpO1xyXG4gICAgICAgICAgICBfbGluZVBvcysrO1xyXG4gICAgICAgICAgICBpZiAoTGluZUxlbmd0aCA+IDAgJiYgKF9saW5lUG9zID49IExpbmVMZW5ndGgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfbGluZVBvcyA9IDA7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmQoJ1xccicpO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kKCdcXG4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgR3JhcGhpY3NMYXllcjtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFBvbHlnb25Db250YWluZXJcclxuICAgIHtcclxuICAgICAgICBJTGlzdDxCb3g+IF9kb3RzO1xyXG4gICAgICAgIEJveCBfYm91bmRpbmdCb3g7XHJcblxyXG4gICAgICAgIHB1YmxpYyBQb2x5Z29uQ29udGFpbmVyKElMaXN0PEJveD4gZG90cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9kb3RzID0gZG90cztcclxuXHJcbiAgICAgICAgICAgIHZhciBtaW54ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5NaW48Z2xvYmFsOjpHcmFwaGljc0xheWVyLkJveD4oX2RvdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaGljc0xheWVyLkJveCwgZG91YmxlPikoZG90ID0+IGRvdC5YKSk7XHJcbiAgICAgICAgICAgIHZhciBtYXh4ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5NYXg8Z2xvYmFsOjpHcmFwaGljc0xheWVyLkJveD4oX2RvdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaGljc0xheWVyLkJveCwgZG91YmxlPikoZG90ID0+IGRvdC5YKSk7XHJcbiAgICAgICAgICAgIHZhciBtaW55ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5NaW48Z2xvYmFsOjpHcmFwaGljc0xheWVyLkJveD4oX2RvdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaGljc0xheWVyLkJveCwgZG91YmxlPikoZG90ID0+IGRvdC5ZKSk7XHJcbiAgICAgICAgICAgIHZhciBtYXh5ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5NYXg8Z2xvYmFsOjpHcmFwaGljc0xheWVyLkJveD4oX2RvdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaGljc0xheWVyLkJveCwgZG91YmxlPikoZG90ID0+IGRvdC5ZKSk7XHJcblxyXG4gICAgICAgICAgICBfYm91bmRpbmdCb3ggPSBuZXcgQm94KG1pbngsIG1pbnksIG1heHggLSBtaW54LCBtYXh5IC0gbWlueSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWlucyhCb3ggZG90KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFfYm91bmRpbmdCb3guQ29udGFpbnMoZG90KSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb250YWlucyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgaiA9IF9kb3RzLkNvdW50IC0gMTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX2RvdHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKChfZG90c1tpXS5ZIDw9IGRvdC5ZICYmIGRvdC5ZIDwgX2RvdHNbal0uWSB8fCBfZG90c1tqXS5ZIDw9IGRvdC5ZICYmIGRvdC5ZIDwgX2RvdHNbaV0uWSkgJiYgIGRvdC5YIDwgKF9kb3RzW2pdLlggLSBfZG90c1tpXS5YKSAqIChkb3QuWSAtIF9kb3RzW2ldLlkpIC8gKF9kb3RzW2pdLlkgLSBfZG90c1tpXS5ZKSArIF9kb3RzW2ldLlgpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbnMgPSAhY29udGFpbnM7XHJcblxyXG4gICAgICAgICAgICAgICAgaiA9IGk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb250YWlucztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uUnVudGltZS5TZXJpYWxpemF0aW9uO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNcclxue1xyXG4gICAgW0RhdGFDb250cmFjdChOYW1lID0gXCJWZWN0b3JcIildXHJcbiAgICBwdWJsaWMgY2xhc3MgU2VyaWFsaXphdGlvblZlY3RvclxyXG4gICAge1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgWDtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uVmVjdG9yKCkgeyB9XHJcbiAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25WZWN0b3IoVmVjdG9yIHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBYID0gdi5YO1xyXG4gICAgICAgICAgICBZID0gdi5ZO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFtEYXRhQ29udHJhY3QoTmFtZSA9IFwiVmVydGV4XCIpXVxyXG4gICAgcHVibGljIGNsYXNzIFNlcmlhbGl6YXRpb25WZXJ0ZXhcclxuICAgIHtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvblZlY3RvciBMb2NhdGlvbjtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIExhYmVsO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBQYWRkaW5nO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgU3R5bGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uVmVydGV4KCkgeyB9XHJcbiAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25WZXJ0ZXgoVmVydGV4IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMb2NhdGlvbiA9IG5ldyBTZXJpYWxpemF0aW9uVmVjdG9yKHYuTG9jYXRpb24pO1xyXG4gICAgICAgICAgICBMYWJlbCA9IHYuTGFiZWw7XHJcbiAgICAgICAgICAgIFBhZGRpbmcgPSB2LlBhZGRpbmc7XHJcbiAgICAgICAgICAgIFN0eWxlID0gdi5TdHlsZSA/PyBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFtEYXRhQ29udHJhY3QoTmFtZSA9IFwiRWRnZVwiKV1cclxuICAgIHB1YmxpYyBjbGFzcyBTZXJpYWxpemF0aW9uRWRnZVxyXG4gICAge1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5kZXhWMTtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgaW50IEluZGV4VjI7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIEVkZ2UuT3JpZW50YXRpb25zIE9yaWVudGF0aW9uO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBUaGlja25lc3M7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIGludCBNdWx0aXBsaWNpdHk7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTdHlsZTtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIExhYmVsO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvbkVkZ2UoKSB7IH1cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvbkVkZ2UoRWRnZSBlLCBMaXN0PFZlcnRleD4gdmVydGljZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJbmRleFYxID0gdmVydGljZXMuSW5kZXhPZihlLlYxKTtcclxuICAgICAgICAgICAgSW5kZXhWMiA9IHZlcnRpY2VzLkluZGV4T2YoZS5WMik7XHJcbiAgICAgICAgICAgIE9yaWVudGF0aW9uID0gZS5PcmllbnRhdGlvbjtcclxuICAgICAgICAgICAgVGhpY2tuZXNzID0gZS5UaGlja25lc3M7XHJcbiAgICAgICAgICAgIE11bHRpcGxpY2l0eSA9IGUuTXVsdGlwbGljaXR5O1xyXG4gICAgICAgICAgICBTdHlsZSA9IGUuU3R5bGUgPz8gXCJcIjtcclxuICAgICAgICAgICAgTGFiZWwgPSBlLkxhYmVsID8/IFwiXCI7XHJcblxyXG4gICAgICAgICAgICBpZiAoU3R5bGUgPT0gXCJcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKE9yaWVudGF0aW9uID09IEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgU3R5bGUgPSBlLlN0eWxlID0gXCJwb3N0XCI7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChPcmllbnRhdGlvbiA9PSBFZGdlLk9yaWVudGF0aW9ucy5CYWNrd2FyZClcclxuICAgICAgICAgICAgICAgICAgICBTdHlsZSA9IGUuU3R5bGUgPSBcInByZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgW0RhdGFDb250cmFjdChOYW1lID0gXCJHcmFwaFwiKV1cclxuICAgIHB1YmxpYyBjbGFzcyBTZXJpYWxpemF0aW9uR3JhcGhcclxuICAgIHtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgTGlzdDxTZXJpYWxpemF0aW9uVmVydGV4PiBWZXJ0aWNlcztcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgTGlzdDxTZXJpYWxpemF0aW9uRWRnZT4gRWRnZXM7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvbkdyYXBoKCkgeyB9XHJcbiAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25HcmFwaChHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVmVydGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsZ2xvYmFsOjpHcmFwaHMuU2VyaWFsaXphdGlvblZlcnRleD4oZy5WZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsIGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25WZXJ0ZXg+KSh2ID0+IG5ldyBTZXJpYWxpemF0aW9uVmVydGV4KHYpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIEVkZ2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpHcmFwaHMuRWRnZSxnbG9iYWw6OkdyYXBocy5TZXJpYWxpemF0aW9uRWRnZT4oZy5FZGdlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5FZGdlLCBnbG9iYWw6OkdyYXBocy5TZXJpYWxpemF0aW9uRWRnZT4pKGUgPT4gbmV3IFNlcmlhbGl6YXRpb25FZGdlKGUsIGcuVmVydGljZXMpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIE5hbWUgPSBnLk5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbnVzaW5nIFN5c3RlbS5JTztcclxudXNpbmcgU3lzdGVtLlJ1bnRpbWUuU2VyaWFsaXphdGlvbjtcclxudXNpbmcgR3JhcGhpY3NMYXllcjtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBVdGlsaXR5XHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBnZW9tZXRyeSBzdHVmZlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQm94IFJvdGF0ZUFyb3VuZFBvaW50KEJveCB2LCBCb3ggY2VudGVyLCBkb3VibGUgYW5nbGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IGNlbnRlci5YICsgKHYuWCAtIGNlbnRlci5YKSAqIE1hdGguQ29zKGFuZ2xlKSAtICh2LlkgLSBjZW50ZXIuWSkgKiBNYXRoLlNpbihhbmdsZSk7XHJcbiAgICAgICAgICAgIHZhciB5ID0gY2VudGVyLlkgKyAodi5YIC0gY2VudGVyLlgpICogTWF0aC5TaW4oYW5nbGUpICsgKHYuWSAtIGNlbnRlci5ZKSAqIE1hdGguQ29zKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQm94KHgsIHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IgUm90YXRlQXJvdW5kUG9pbnQoVmVjdG9yIHYsIFZlY3RvciBjZW50ZXIsIGRvdWJsZSBhbmdsZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gY2VudGVyLlggKyAodi5YIC0gY2VudGVyLlgpICogTWF0aC5Db3MoYW5nbGUpIC0gKHYuWSAtIGNlbnRlci5ZKSAqIE1hdGguU2luKGFuZ2xlKTtcclxuICAgICAgICAgICAgdmFyIHkgPSBjZW50ZXIuWSArICh2LlggLSBjZW50ZXIuWCkgKiBNYXRoLlNpbihhbmdsZSkgKyAodi5ZIC0gY2VudGVyLlkpICogTWF0aC5Db3MoYW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoeCwgeSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvciBQb2xhclRvUmVjdGFuZ3VsYXIoZG91YmxlIHIsIGRvdWJsZSB0aGV0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHIgKiBNYXRoLkNvcyh0aGV0YSksIHIgKiBNYXRoLlNpbih0aGV0YSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEhhdmVJbnRlcnNlY3Rpb24oQm94IHN0YXJ0MSwgQm94IGVuZDEsIEJveCBzdGFydDIsIEJveCBlbmQyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRlbm9tID0gKChlbmQxLlggLSBzdGFydDEuWCkgKiAoZW5kMi5ZIC0gc3RhcnQyLlkpKSAtICgoZW5kMS5ZIC0gc3RhcnQxLlkpICogKGVuZDIuWCAtIHN0YXJ0Mi5YKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGVub20gPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBudW1lciA9ICgoc3RhcnQxLlkgLSBzdGFydDIuWSkgKiAoZW5kMi5YIC0gc3RhcnQyLlgpKSAtICgoc3RhcnQxLlggLSBzdGFydDIuWCkgKiAoZW5kMi5ZIC0gc3RhcnQyLlkpKTtcclxuICAgICAgICAgICAgdmFyIHIgPSBudW1lciAvIGRlbm9tO1xyXG4gICAgICAgICAgICB2YXIgbnVtZXIyID0gKChzdGFydDEuWSAtIHN0YXJ0Mi5ZKSAqIChlbmQxLlggLSBzdGFydDEuWCkpIC0gKChzdGFydDEuWCAtIHN0YXJ0Mi5YKSAqIChlbmQxLlkgLSBzdGFydDEuWSkpO1xyXG4gICAgICAgICAgICB2YXIgcyA9IG51bWVyMiAvIGRlbm9tO1xyXG5cclxuICAgICAgICAgICAgaWYgKHIgPCAwIHx8IHIgPiAxIHx8IHMgPCAwIHx8IHMgPiAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgLy8jcmVnaW9uIHN0cmluZyBzdHVmZlxyXG4gICAgICAgIC8vcHVibGljIHN0YXRpYyBzdHJpbmcgQ29tcHJlc3Moc3RyaW5nIHMpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgdmFyIHVuY29tcHJlc3NlZCA9IEVuY29kaW5nLlVuaWNvZGUuR2V0Qnl0ZXMocyk7XHJcbiAgICAgICAgLy8gICAgdmFyIGNvbXByZXNzZWQgPSBRdWlja0xaLmNvbXByZXNzKHVuY29tcHJlc3NlZCk7XHJcbiAgICAgICAgLy8gICAgcmV0dXJuIENvbnZlcnQuVG9CYXNlNjRTdHJpbmcoY29tcHJlc3NlZCk7XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIC8vcHVibGljIHN0YXRpYyBzdHJpbmcgRGVjb21wcmVzcyhzdHJpbmcgcylcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB2YXIgY29tcHJlc3NlZCA9IENvbnZlcnQuRnJvbUJhc2U2NFN0cmluZyhzKTtcclxuICAgICAgICAvLyAgICB2YXIgdW5jb21wcmVzc2VkID0gUXVpY2tMWi5kZWNvbXByZXNzKGNvbXByZXNzZWQpO1xyXG4gICAgICAgIC8vICAgIHJldHVybiBFbmNvZGluZy5Vbmljb2RlLkdldFN0cmluZyh1bmNvbXByZXNzZWQsIDAsIHVuY29tcHJlc3NlZC5MZW5ndGgpO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBHcmFwaGljc0xheWVyO1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVmVjdG9yXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFZlY3Rvcihkb3VibGUgeCwgZG91YmxlIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfWCA9IHg7XHJcbiAgICAgICAgICAgIF9ZID0geTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgTGVuZ3RoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguU3FydChfWCAqIF9YICsgX1kgKiBfWSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIE5vcm1hbGl6ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gTGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgX1ggPSBfWCAvIGxlbmd0aDtcclxuICAgICAgICAgICAgX1kgPSBfWSAvIGxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsZW5ndGggPiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBEb3QoVmVjdG9yIHZlY3RvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfWCAqIHZlY3Rvci5fWCArIF9ZICogdmVjdG9yLl9ZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBEaXN0YW5jZShWZWN0b3IgdmVjdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChkb3VibGUpTWF0aC5TcXJ0KE1hdGguUG93KHZlY3Rvci5fWCAtIF9YLCAyKSArIE1hdGguUG93KHZlY3Rvci5fWSAtIF9ZLCAyKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvciBvcGVyYXRvciArKFZlY3RvciBhLCBWZWN0b3IgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKGEuX1ggKyBiLl9YLCBhLl9ZICsgYi5fWSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvciBvcGVyYXRvciAtKFZlY3RvciBhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoLWEuX1gsIC1hLl9ZKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yIG9wZXJhdG9yIC0oVmVjdG9yIGEsIFZlY3RvciBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoYS5fWCAtIGIuX1gsIGEuX1kgLSBiLl9ZKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yIG9wZXJhdG9yICooVmVjdG9yIGEsIGRvdWJsZSBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoYS5fWCAqIGIsIGEuX1kgKiBiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yIG9wZXJhdG9yICooVmVjdG9yIGEsIGludCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoYS5fWCAqIGIsIGEuX1kgKiBiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCEob2JqIGlzIFZlY3RvcikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBWZWN0b3IgdiA9IChWZWN0b3Ipb2JqO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyh2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhWZWN0b3IgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfWCA9PSB2Ll9YICYmIF9ZID09IHYuX1k7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBUb1N0cmluZygpLkdldEhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgPT0oVmVjdG9yIGEsIFZlY3RvciBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEuRXF1YWxzKGIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yICE9KFZlY3RvciBhLCBWZWN0b3IgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAhKGEgPT0gYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGltcGxpY2l0IG9wZXJhdG9yIEJveChWZWN0b3IgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQm94KHYuWCwgdi5ZKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiKFwiICsgX1ggKyBcIiwgXCIgKyBfWSArIFwiKVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBYXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9YO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfWCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgWVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfWTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX1kgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZG91YmxlIF9YO1xyXG4gICAgICAgIGRvdWJsZSBfWTtcclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBHcmFwaHM7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5JTztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzQ29yZVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIENvbXBhY3RTZXJpYWxpemVyXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgaW50IFNjYWxlID0gMTAwMDA7XHJcbiAgICAgICAgY29uc3Qgc3RyaW5nIFByZWZpeCA9IFwid2ViZ3JhcGg6XCI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBMb29rc0xpa2VBU2VyaWFsaXplZEdyYXBoKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICFzdHJpbmcuSXNOdWxsT3JFbXB0eShzKSAmJiBzLlN0YXJ0c1dpdGgoUHJlZml4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFNlcmlhbGl6ZShHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJ5dGVzID0gU2VyaWFsaXplVG9CeXRlQXJyYXkoZyk7XHJcbiAgICAgICAgICAgIHZhciBjb21wcmVzc2VkID0gUXVpY2tMWi5jb21wcmVzcyhieXRlcyk7XHJcbiAgICAgICAgICAgIHZhciBBc2NpaTg1ID0gbmV3IEFzY2lpODUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByZWZpeCArIEFzY2lpODUuRW5jb2RlKGNvbXByZXNzZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJ5dGVbXSBTZXJpYWxpemVUb0J5dGVBcnJheShHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJ5dGVzID0gbmV3IExpc3Q8Ynl0ZT4oKTtcclxuICAgICAgICAgICAgYnl0ZXMuQWRkKChieXRlKWcuVmVydGljZXMuQ291bnQpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBnLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGRSYW5nZShCaXRDb252ZXJ0ZXIuR2V0Qnl0ZXMoKFVJbnQxNilNYXRoLlJvdW5kKHYuWCAqIFNjYWxlKSkpO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkUmFuZ2UoQml0Q29udmVydGVyLkdldEJ5dGVzKChVSW50MTYpTWF0aC5Sb3VuZCh2LlkgKiBTY2FsZSkpKTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEJpdENvbnZlcnRlci5HZXRCeXRlcygoVUludDE2KU1hdGguUm91bmQodi5QYWRkaW5nICogU2NhbGUpKSk7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGRSYW5nZShHZXRCeXRlcyh2LkxhYmVsKSk7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGRSYW5nZShHZXRCeXRlcyh2LlN0eWxlID8/IFwiXCIpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnl0ZXMuQWRkUmFuZ2UoQml0Q29udmVydGVyLkdldEJ5dGVzKChVSW50MTYpZy5FZGdlcy5Db3VudCkpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBnLkVkZ2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGQoKGJ5dGUpKGcuVmVydGljZXMuSW5kZXhPZihlLlYxKSkpO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkKChieXRlKShnLlZlcnRpY2VzLkluZGV4T2YoZS5WMikpKTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZCgoYnl0ZSllLk11bHRpcGxpY2l0eSk7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGQoKGJ5dGUpZS5PcmllbnRhdGlvbik7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGRSYW5nZShCaXRDb252ZXJ0ZXIuR2V0Qnl0ZXMoKFVJbnQxNilNYXRoLlJvdW5kKGUuVGhpY2tuZXNzICogMTAwKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IGUuTGFiZWwgPz8gXCJcIjtcclxuICAgICAgICAgICAgICAgIHZhciBoYWNrZWRTdHlsZSA9IChlLlN0eWxlID8/IFwiXCIpICsgXCJ+fnx+fH5+XCIgKyBsYWJlbDtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEdldEJ5dGVzKGhhY2tlZFN0eWxlKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBieXRlcy5Ub0FycmF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIERlc2VyaWFsaXplKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBBc2NpaTg1ID0gbmV3IEFzY2lpODUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb21wcmVzc2VkID0gQXNjaWk4NS5EZWNvZGUocy5TdWJzdHJpbmcoUHJlZml4Lkxlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ5dGVzID0gUXVpY2tMWi5kZWNvbXByZXNzKGNvbXByZXNzZWQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERlc2VyaWFsaXplRnJvbUJ5dGVBcnJheShieXRlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBleClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoZXguTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIEdyYXBoIERlc2VyaWFsaXplRnJvbUJ5dGVBcnJheShieXRlW10gYnl0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgdmFyIG4gPSBSZWFkQnl0ZShieXRlcywgcmVmIG9mZnNldCk7XHJcbiAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IG5ldyBMaXN0PFZlcnRleD4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gKGRvdWJsZSlSZWFkVUludDE2KGJ5dGVzLCByZWYgb2Zmc2V0KSAvIFNjYWxlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAoZG91YmxlKVJlYWRVSW50MTYoYnl0ZXMsIHJlZiBvZmZzZXQpIC8gU2NhbGU7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFkZGluZyA9IChmbG9hdClSZWFkVUludDE2KGJ5dGVzLCByZWYgb2Zmc2V0KSAvIFNjYWxlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gUmVhZFN0cmluZyhieXRlcywgcmVmIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSBSZWFkU3RyaW5nKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2VzLkFkZChuZXcgVmVydGV4KHgsIHkpIHsgUGFkZGluZyA9IHBhZGRpbmcsIExhYmVsID0gbGFiZWwsIFN0eWxlID0gc3R5bGUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlID0gUmVhZFVJbnQxNihieXRlcywgcmVmIG9mZnNldCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlcyA9IG5ldyBMaXN0PEVkZ2U+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZTsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdjEgPSBSZWFkQnl0ZShieXRlcywgcmVmIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdjIgPSBSZWFkQnl0ZShieXRlcywgcmVmIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXVsdGlwbGljaXR5ID0gUmVhZEJ5dGUoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yaWVudGF0aW9uID0gKEVkZ2UuT3JpZW50YXRpb25zKVJlYWRCeXRlKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGlja25lc3MgPSAoZmxvYXQpUmVhZFVJbnQxNihieXRlcywgcmVmIG9mZnNldCkgLyAxMDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSBSZWFkU3RyaW5nKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBlZGdlcy5BZGQobmV3IEVkZ2UodmVydGljZXNbdjFdLCB2ZXJ0aWNlc1t2Ml0pIHsgTXVsdGlwbGljaXR5ID0gbXVsdGlwbGljaXR5LCBPcmllbnRhdGlvbiA9IG9yaWVudGF0aW9uLCBUaGlja25lc3MgPSB0aGlja25lc3MsIFN0eWxlID0gc3R5bGUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgodmVydGljZXMsIGVkZ2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBieXRlIFJlYWRCeXRlKGJ5dGVbXSBieXRlcywgcmVmIGludCBvZmZzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYnl0ZXNbb2Zmc2V0KytdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIFVJbnQxNiBSZWFkVUludDE2KGJ5dGVbXSBieXRlcywgcmVmIGludCBvZmZzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IEJpdENvbnZlcnRlci5Ub1VJbnQxNihieXRlcywgb2Zmc2V0KTtcclxuICAgICAgICAgICAgb2Zmc2V0ICs9IDI7XHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIFVJbnQzMiBSZWFkVUludDMyKGJ5dGVbXSBieXRlcywgcmVmIGludCBvZmZzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IEJpdENvbnZlcnRlci5Ub1VJbnQzMihieXRlcywgb2Zmc2V0KTtcclxuICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJ5dGVbXSBHZXQ3Qml0RW5jb2RlZEludChpbnQgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSBuZXcgTGlzdDxieXRlPigpO1xyXG4gICAgICAgICAgICB1aW50IG51bSA9ICh1aW50KXZhbHVlO1xyXG4gICAgICAgICAgICB3aGlsZSAobnVtID49IDEyOFUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZCgoYnl0ZSkobnVtIHwgMTI4VSkpO1xyXG4gICAgICAgICAgICAgICAgbnVtID4+PSA3O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJ5dGVzLkFkZCgoYnl0ZSludW0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJ5dGVzLlRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBpbnQgUmVhZDdCaXRFbmNvZGVkSW50KGJ5dGVbXSBieXRlcywgcmVmIGludCBvZmZzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgbnVtMSA9IDA7XHJcbiAgICAgICAgICAgIGludCBudW0yID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG51bTIgIT0gMzUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ5dGUgbnVtMyA9IFJlYWRCeXRlKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIG51bTEgfD0gKChpbnQpbnVtMyAmIChpbnQpc2J5dGUuTWF4VmFsdWUpIDw8IG51bTI7XHJcbiAgICAgICAgICAgICAgICBudW0yICs9IDc7XHJcbiAgICAgICAgICAgICAgICBpZiAoKChpbnQpbnVtMyAmIDEyOCkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKFwiYmFkIDctYml0IGVuY29kZWQgaW50XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJ5dGVbXSBHZXRCeXRlcyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBieXRlcyA9IG5ldyBMaXN0PGJ5dGU+KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2godmFyIGMgaW4gcy5Ub0NoYXJBcnJheSgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGRSYW5nZShCaXRDb252ZXJ0ZXIuR2V0Qnl0ZXMoYykpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlJldmVyc2U8Ynl0ZT4oKChJRW51bWVyYWJsZTxieXRlPilHZXQ3Qml0RW5jb2RlZEludChieXRlcy5Db3VudCkpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuSW5zZXJ0KDAsIGIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYnl0ZXMuVG9BcnJheSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3RyaW5nIEFTQ0lJID0gXCIgIVxcXCIjJCUmXFwnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xcXFxdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+XCI7XHJcbiAgICAgICAgc3RhdGljIHN0cmluZyBSZWFkU3RyaW5nKGJ5dGVbXSBieXRlcywgcmVmIGludCBvZmZzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gUmVhZDdCaXRFbmNvZGVkSW50KGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzID0gXCJcIjtcclxuICAgICAgICAgICAgd2hpbGUobGVuZ3RoLS0gPiAwKSBzICs9IEFTQ0lJW2J5dGVzW29mZnNldCsrXSAtIDMyXTtcclxuICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgTW9yZUxpbnE7XHJcbnVzaW5nIEdyYXBocztcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNDb3JlXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgR3JhcGhJT1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvQWRqYWNlbmN5TWF0cml4KHRoaXMgTGlzdDxpbnQ+IGVkZ2VXZWlnaHRzLCBib29sIGlzRGlyZWN0ZWQgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuID0gKGludCkoKDEgKyBNYXRoLlNxcnQoMSArIDggKiBlZGdlV2VpZ2h0cy5Db3VudCkpIC8gMik7XHJcbiAgICAgICAgICAgIHZhciBtID0gbmV3IGNoYXJbbiwgbl07XHJcblxyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV3ID0gZWRnZVdlaWdodHNba107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGlyZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtW2ksIGpdID0gbVtqLCBpXSA9ICcwJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldyA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtW2ksIGpdID0gJzEnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChldyA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtW2osIGldID0gJzEnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtW2ksIGpdID0gbVtqLCBpXSA9IGV3ICE9IDAgPyAnMScgOiAnMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbVtpLCBpXSA9ICcwJztcclxuXHJcbiAgICAgICAgICAgIHZhciBzID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIHMgKz0gbVtpLCBqXTtcclxuICAgICAgICAgICAgICAgIHMgKz0gRW52aXJvbm1lbnQuTmV3TGluZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL3B1YmxpYyBzdGF0aWMgR3JhcGhzLkdyYXBoIEdyYXBoRnJvbUdyYXBoNihzdHJpbmcgZ3JhcGg2KVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vICAgIHZhciB3ID0gR2V0RWRnZVdlaWdodHMoZ3JhcGg2KTtcclxuICAgICAgICAvLyAgICB2YXIgaCA9IG5ldyBDaG9vc2FiaWxpdHkuR3JhcGgodyk7XHJcblxyXG4gICAgICAgIC8vICAgIHZhciBnID0gbmV3IEdyYXBocy5HcmFwaChoLCBoLkdldFNwcmluZ3NMYXlvdXQoMTIpLCBmYWxzZSk7XHJcbiAgICAgICAgLy8gICAgZy5OYW1lID0gZ3JhcGg2O1xyXG4gICAgICAgIC8vICAgIHJldHVybiBnO1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICAvL3B1YmxpYyBzdGF0aWMgR3JhcGhzLkdyYXBoIEdyYXBoRnJvbUVkZ2VXZWlnaHRTdHJpbmcoc3RyaW5nIHMpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgdmFyIGlzRGlyZWN0ZWQgPSBzLkNvbnRhaW5zKFwiLTFcIik7XHJcblxyXG4gICAgICAgIC8vICAgIHZhciBwYXJ0cyA9IHMuU3BsaXQoJyAnKTtcclxuICAgICAgICAvLyAgICB2YXIgZWRnZVdlaWdodHMgPSBwYXJ0cy5XaGVyZShwID0+ICFwLlN0YXJ0c1dpdGgoXCJbXCIpKS5TZWxlY3QoeCA9PiBpbnQuUGFyc2UoeCkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAvLyAgICBMaXN0PGludD4gdmVydGV4V2VpZ2h0cyA9IG51bGw7XHJcbiAgICAgICAgLy8gICAgdmFyIHZ3cCA9IHBhcnRzLkZpcnN0T3JEZWZhdWx0KHAgPT4gcC5TdGFydHNXaXRoKFwiW1wiKSk7XHJcbiAgICAgICAgLy8gICAgaWYgKHZ3cCAhPSBudWxsKVxyXG4gICAgICAgIC8vICAgICAgICB2ZXJ0ZXhXZWlnaHRzID0gdndwLlRyaW0oJ1snKS5UcmltKCddJykuU3BsaXQoJywnKS5TZWxlY3QoeCA9PiBpbnQuUGFyc2UoeCkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAvLyAgICB2YXIgaCA9IG5ldyBDaG9vc2FiaWxpdHkuR3JhcGgoZWRnZVdlaWdodHMsIHZlcnRleFdlaWdodHMpO1xyXG5cclxuICAgICAgICAvLyAgICByZXR1cm4gbmV3IEdyYXBocy5HcmFwaChoLCBoLkdldFNwcmluZ3NMYXlvdXQoMTIpLCBpc0RpcmVjdGVkKTtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RhdGljIExpc3Q8aW50PiBHZXRFZGdlV2VpZ2h0cyhzdHJpbmcgZ3JhcGg2KVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vICAgIHZhciBjaGFycyA9IGdyYXBoNi5Ub0NoYXJBcnJheSgpO1xyXG5cclxuICAgICAgICAvLyAgICB2YXIgYnl0ZXMgPSBVVEY4RW5jb2RpbmcuVVRGOC5HZXRCeXRlcyhjaGFycyk7XHJcblxyXG4gICAgICAgIC8vICAgIHZhciBOID0gYnl0ZXNbMF0gLSA2MztcclxuICAgICAgICAvLyAgICB2YXIgaCA9IE4gKiAoTiAtIDEpIC8gMjtcclxuICAgICAgICAvLyAgICB2YXIgdyA9IGJ5dGVzLlNraXAoMSkuU2VsZWN0TWFueShiID0+IExvdzYoKGJ5dGUpKGIgLSA2MykpKS5UYWtlKGgpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAvLyAgICB2YXIgcCA9IFJvd1RvQ29sdW1uUGVybXV0YXRpb24oTikuVG9MaXN0KCk7XHJcbiAgICAgICAgLy8gICAgdmFyIHdwID0gbmV3IExpc3Q8aW50PihoKTtcclxuXHJcbiAgICAgICAgLy8gICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwLkNvdW50OyBpKyspXHJcbiAgICAgICAgLy8gICAgICAgIHdwLkFkZCh3W3BbaV1dKTtcclxuXHJcbiAgICAgICAgLy8gICAgcmV0dXJuIHdwO1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICAvL3B1YmxpYyBzdGF0aWMgYm9vbFssXSBHZXRBZGphY2VuY3lNYXRyaXgoc3RyaW5nIGFkamFjZW5jeUxpc3RTdHJpbmcpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KGFkamFjZW5jeUxpc3RTdHJpbmcpKVxyXG4gICAgICAgIC8vICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gICAgdHJ5XHJcbiAgICAgICAgLy8gICAge1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgbGluZXMgPSBhZGphY2VuY3lMaXN0U3RyaW5nLlNwbGl0KG5ld1tdIHsgRW52aXJvbm1lbnQuTmV3TGluZSB9LCBTdHJpbmdTcGxpdE9wdGlvbnMuUmVtb3ZlRW1wdHlFbnRyaWVzKTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgIHZhciBhZGphY2VuY3lMaXN0ID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+KCk7XHJcbiAgICAgICAgLy8gICAgICAgIGZvcmVhY2ggKHZhciBsaW5lIGluIGxpbmVzLldoZXJlKGwgPT4gbC5Db250YWlucyhcIjpcIikpKVxyXG4gICAgICAgIC8vICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICB2YXIgY2h1bmtzID0gbGluZS5TcGxpdCgnOicsICcsJyk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgICAgYWRqYWNlbmN5TGlzdFtpbnQuUGFyc2UoY2h1bmtzWzBdKV0gPSBjaHVua3MuU2tpcCgxKS5TZWxlY3QoYyA9PiBpbnQuUGFyc2UoYykpLlRvTGlzdCgpO1xyXG4gICAgICAgIC8vICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICAgICAgICB2YXIgbWluID0gYWRqYWNlbmN5TGlzdC5NaW4oa3ZwID0+IGt2cC5LZXkpO1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgbWF4ID0gYWRqYWNlbmN5TGlzdC5NYXgoa3ZwID0+IGt2cC5LZXkpO1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgTiA9IG1heCArIDEgLSBtaW47XHJcblxyXG4gICAgICAgIC8vICAgICAgICB2YXIgYWRqYWNlbmN5TWF0cml4ID0gbmV3IGJvb2xbTiwgTl07XHJcblxyXG4gICAgICAgIC8vICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIGFkamFjZW5jeUxpc3QpXHJcbiAgICAgICAgLy8gICAgICAgICAgICBmb3JlYWNoICh2YXIgbmVpZ2hib3IgaW4ga3ZwLlZhbHVlKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIGFkamFjZW5jeU1hdHJpeFtrdnAuS2V5IC0gbWluLCBuZWlnaGJvciAtIG1pbl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgcmV0dXJuIGFkamFjZW5jeU1hdHJpeDtcclxuICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgLy8gICAgY2F0Y2ggeyB9XHJcblxyXG4gICAgICAgIC8vICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0dyYXBoNih0aGlzIEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZy5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzdHJpbmcgQVNDSUkgPSBcIiAhXFxcIiMkJSZcXCcoKSorLC0uLzAxMjM0NTY3ODk6Ozw9Pj9AQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXFxcXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5cIjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0dyYXBoNih0aGlzIExpc3Q8aW50PiB3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG4gPSAoaW50KSgoMSArIE1hdGguU3FydCgxICsgOCAqIHcuQ291bnQpKSAvIDIpO1xyXG4gICAgICAgICAgICBpZiAobiA+IDYyKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXhjZXB0aW9uKFwiaSBoYXZlIHlldCB0byB3cml0ZS9yZWFkIGdyYXBoNiBmaWxlcyB3aXRoIG1vcmUgdGhhbiA2MiB2ZXJ0aWNlcy5cIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgcCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oUm93VG9Db2x1bW5QZXJtdXRhdGlvbihuKSk7XHJcbiAgICAgICAgICAgIHZhciB3cCA9IG5ldyBMaXN0PGludD4ody5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHAuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHdwLkFkZChNYXRoLkFicyh3W3AuSW5kZXhPZihpKV0pKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICh3cC5Db3VudCAlIDYgIT0gMClcclxuICAgICAgICAgICAgICAgIHdwLkFkZCgwKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBiYiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9BcnJheTxieXRlPihNb3JlTGlucS5Nb3JlRW51bWVyYWJsZS5QcmVwZW5kPGJ5dGU+KHdwLkJhdGNoPGludCwgYnl0ZT4oNiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LCBieXRlPikoYml0cyA9PiAoYnl0ZSkoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBpbnQ+LGludD4oTW9yZUxpbnEuTW9yZUVudW1lcmFibGUuSW5kZXg8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlJldmVyc2U8aW50PihiaXRzKSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBpbnQ+LCBpbnQ+KShwYWlyID0+IHBhaXIuVmFsdWUgPDwgcGFpci5LZXkpKS5TdW0oKSArIDYzKSkpLChieXRlKShuICsgNjMpKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcIlwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxieXRlLHN0cmluZz4oYmIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Ynl0ZSwgc3RyaW5nPikoYiA9PiBBU0NJSVtiIC0gMzJdLlRvU3RyaW5nKCkpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBSb3dUb0NvbHVtblBlcm11dGF0aW9uKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG4gLSAxOyBqKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0geDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDEgLSBqOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHkgKz0gMSArIGogKyBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHggKz0gMiArIGo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IExvdzYoYnl0ZSBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDU7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIChiICYgKDEgPDwgaSkpID4+IGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIiNyZWdpb24gTGljZW5zZSBhbmQgVGVybXNcclxuLy8gTW9yZUxJTlEgLSBFeHRlbnNpb25zIHRvIExJTlEgdG8gT2JqZWN0c1xyXG4vLyBDb3B5cmlnaHQgKGMpIDIwMDgtMjAxMSBKb25hdGhhbiBTa2VldC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbi8vIFxyXG4vLyAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbi8vIFxyXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiNlbmRyZWdpb25cclxuXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5EaWFnbm9zdGljcztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcblxyXG5uYW1lc3BhY2UgTW9yZUxpbnFcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBwYXJ0aWFsIGNsYXNzIE1vcmVFbnVtZXJhYmxlXHJcbiAgICB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBCYXRjaGVzIHRoZSBzb3VyY2Ugc2VxdWVuY2UgaW50byBzaXplZCBidWNrZXRzLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDx0eXBlcGFyYW0gbmFtZT1cIlRTb3VyY2VcIj5UeXBlIG9mIGVsZW1lbnRzIGluIDxwYXJhbXJlZiBuYW1lPVwic291cmNlXCIvPiBzZXF1ZW5jZS48L3R5cGVwYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzb3VyY2VcIj5UaGUgc291cmNlIHNlcXVlbmNlLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic2l6ZVwiPlNpemUgb2YgYnVja2V0cy48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz5BIHNlcXVlbmNlIG9mIGVxdWFsbHkgc2l6ZWQgYnVja2V0cyBjb250YWluaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgY29sbGVjdGlvbi48L3JldHVybnM+XHJcbiAgICAgICAgLy8vIDxyZW1hcmtzPiBUaGlzIG9wZXJhdG9yIHVzZXMgZGVmZXJyZWQgZXhlY3V0aW9uIGFuZCBzdHJlYW1zIGl0cyByZXN1bHRzIChidWNrZXRzIGFuZCBidWNrZXQgY29udGVudCkuPC9yZW1hcmtzPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8SUVudW1lcmFibGU8VFNvdXJjZT4+IEJhdGNoPFRTb3VyY2U+KHRoaXMgSUVudW1lcmFibGU8VFNvdXJjZT4gc291cmNlLCBpbnQgc2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBCYXRjaDxUU291cmNlLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VFNvdXJjZT4+KHNvdXJjZSwgc2l6ZSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUU291cmNlPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUU291cmNlPj4pKHggPT4geCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBCYXRjaGVzIHRoZSBzb3VyY2Ugc2VxdWVuY2UgaW50byBzaXplZCBidWNrZXRzIGFuZCBhcHBsaWVzIGEgcHJvamVjdGlvbiB0byBlYWNoIGJ1Y2tldC5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8dHlwZXBhcmFtIG5hbWU9XCJUU291cmNlXCI+VHlwZSBvZiBlbGVtZW50cyBpbiA8cGFyYW1yZWYgbmFtZT1cInNvdXJjZVwiLz4gc2VxdWVuY2UuPC90eXBlcGFyYW0+XHJcbiAgICAgICAgLy8vIDx0eXBlcGFyYW0gbmFtZT1cIlRSZXN1bHRcIj5UeXBlIG9mIHJlc3VsdCByZXR1cm5lZCBieSA8cGFyYW1yZWYgbmFtZT1cInJlc3VsdFNlbGVjdG9yXCIvPi48L3R5cGVwYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzb3VyY2VcIj5UaGUgc291cmNlIHNlcXVlbmNlLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic2l6ZVwiPlNpemUgb2YgYnVja2V0cy48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInJlc3VsdFNlbGVjdG9yXCI+VGhlIHByb2plY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBidWNrZXQuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+QSBzZXF1ZW5jZSBvZiBwcm9qZWN0aW9ucyBvbiBlcXVhbGx5IHNpemVkIGJ1Y2tldHMgY29udGFpbmluZyBlbGVtZW50cyBvZiB0aGUgc291cmNlIGNvbGxlY3Rpb24uPC9yZXR1cm5zPlxyXG4gICAgICAgIC8vLyA8cmVtYXJrcz4gVGhpcyBvcGVyYXRvciB1c2VzIGRlZmVycmVkIGV4ZWN1dGlvbiBhbmQgc3RyZWFtcyBpdHMgcmVzdWx0cyAoYnVja2V0cyBhbmQgYnVja2V0IGNvbnRlbnQpLjwvcmVtYXJrcz5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPFRSZXN1bHQ+IEJhdGNoPFRTb3VyY2UsIFRSZXN1bHQ+KHRoaXMgSUVudW1lcmFibGU8VFNvdXJjZT4gc291cmNlLCBpbnQgc2l6ZSxcclxuICAgICAgICAgICAgRnVuYzxJRW51bWVyYWJsZTxUU291cmNlPiwgVFJlc3VsdD4gcmVzdWx0U2VsZWN0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQmF0Y2hJbXBsPFRTb3VyY2UsVFJlc3VsdD4oc291cmNlLCBzaXplLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFRTb3VyY2U+LCBUUmVzdWx0PilyZXN1bHRTZWxlY3Rvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBJRW51bWVyYWJsZTxUUmVzdWx0PiBCYXRjaEltcGw8VFNvdXJjZSwgVFJlc3VsdD4odGhpcyBJRW51bWVyYWJsZTxUU291cmNlPiBzb3VyY2UsIGludCBzaXplLFxyXG4gICAgICAgICAgICBGdW5jPElFbnVtZXJhYmxlPFRTb3VyY2U+LCBUUmVzdWx0PiByZXN1bHRTZWxlY3RvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRTb3VyY2VbXSBidWNrZXQgPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGl0ZW0gaW4gc291cmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnVja2V0ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0ID0gbmV3IFRTb3VyY2Vbc2l6ZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYnVja2V0W2NvdW50KytdID0gaXRlbTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgYnVja2V0IGlzIGZ1bGx5IGJ1ZmZlcmVkIGJlZm9yZSBpdCdzIHlpZWxkZWRcclxuICAgICAgICAgICAgICAgIGlmIChjb3VudCAhPSBzaXplKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNlbGVjdCBpcyBuZWNlc3Nhcnkgc28gYnVja2V0IGNvbnRlbnRzIGFyZSBzdHJlYW1lZCB0b29cclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiByZXN1bHRTZWxlY3RvcihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxUU291cmNlLFRTb3VyY2U+KGJ1Y2tldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxUU291cmNlLCBUU291cmNlPikoeCA9PiB4KSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ1Y2tldCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgbGFzdCBidWNrZXQgd2l0aCBhbGwgcmVtYWluaW5nIGVsZW1lbnRzXHJcbiAgICAgICAgICAgIGlmIChidWNrZXQgIT0gbnVsbCAmJiBjb3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiByZXN1bHRTZWxlY3RvcihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8VFNvdXJjZT4oYnVja2V0LGNvdW50KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLyBRdWlja0xaIGRhdGEgY29tcHJlc3Npb24gbGlicmFyeVxyXG4vLyBDb3B5cmlnaHQgKEMpIDIwMDYtMjAxMSBMYXNzZSBNaWtrZWwgUmVpbmhvbGRcclxuLy8gbGFyQHF1aWNrbHouY29tXHJcbi8vXHJcbi8vIFF1aWNrTFogY2FuIGJlIHVzZWQgZm9yIGZyZWUgdW5kZXIgdGhlIEdQTCAxLCAyIG9yIDMgbGljZW5zZSAod2hlcmUgYW55dGhpbmcgXHJcbi8vIHJlbGVhc2VkIGludG8gcHVibGljIG11c3QgYmUgb3BlbiBzb3VyY2UpIG9yIHVuZGVyIGEgY29tbWVyY2lhbCBsaWNlbnNlIGlmIHN1Y2ggXHJcbi8vIGhhcyBiZWVuIGFjcXVpcmVkIChzZWUgaHR0cDovL3d3dy5xdWlja2x6LmNvbS9vcmRlci5odG1sKS4gVGhlIGNvbW1lcmNpYWwgbGljZW5zZSBcclxuLy8gZG9lcyBub3QgY292ZXIgZGVyaXZlZCBvciBwb3J0ZWQgdmVyc2lvbnMgY3JlYXRlZCBieSB0aGlyZCBwYXJ0aWVzIHVuZGVyIEdQTC5cclxuLy9cclxuLy8gT25seSBhIHN1YnNldCBvZiB0aGUgQyBsaWJyYXJ5IGhhcyBiZWVuIHBvcnRlZCwgbmFtZWx5IGxldmVsIDEgYW5kIDMgbm90IGluIFxyXG4vLyBzdHJlYW1pbmcgbW9kZS4gXHJcbi8vXHJcbi8vIFZlcnNpb246IDEuNS4wIGZpbmFsXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uSU87XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxuc3RhdGljIGNsYXNzIFF1aWNrTFpcclxue1xyXG4gICAgcHVibGljIGNvbnN0IGludCBRTFpfVkVSU0lPTl9NQUpPUiA9IDE7XHJcbiAgICBwdWJsaWMgY29uc3QgaW50IFFMWl9WRVJTSU9OX01JTk9SID0gNTtcclxuICAgIHB1YmxpYyBjb25zdCBpbnQgUUxaX1ZFUlNJT05fUkVWSVNJT04gPSAwO1xyXG5cclxuICAgIC8vIFN0cmVhbWluZyBtb2RlIG5vdCBzdXBwb3J0ZWRcclxuICAgIHB1YmxpYyBjb25zdCBpbnQgUUxaX1NUUkVBTUlOR19CVUZGRVIgPSAwO1xyXG5cclxuICAgIC8vIEJvdW5kcyBjaGVja2luZyBub3Qgc3VwcG9ydGVkICBVc2UgdHJ5Li4uY2F0Y2ggaW5zdGVhZFxyXG4gICAgcHVibGljIGNvbnN0IGludCBRTFpfTUVNT1JZX1NBRkUgPSAwO1xyXG5cclxuICAgIC8vIERlY3JlYXNlIFFMWl9QT0lOVEVSU18zIHRvIGluY3JlYXNlIGxldmVsIDMgY29tcHJlc3Npb24gc3BlZWQuIERvIG5vdCBlZGl0IGFueSBvdGhlciB2YWx1ZXMhXHJcbiAgICBwcml2YXRlIGNvbnN0IGludCBIQVNIX1ZBTFVFUyA9IDQwOTY7XHJcbiAgICBwcml2YXRlIGNvbnN0IGludCBNSU5PRkZTRVQgPSAyO1xyXG4gICAgcHJpdmF0ZSBjb25zdCBpbnQgVU5DT05ESVRJT05BTF9NQVRDSExFTiA9IDY7XHJcbiAgICBwcml2YXRlIGNvbnN0IGludCBVTkNPTVBSRVNTRURfRU5EID0gNDtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IENXT1JEX0xFTiA9IDQ7XHJcbiAgICBwcml2YXRlIGNvbnN0IGludCBERUZBVUxUX0hFQURFUkxFTiA9IDk7XHJcbiAgICBwcml2YXRlIGNvbnN0IGludCBRTFpfUE9JTlRFUlNfMSA9IDE7XHJcbiAgICBwcml2YXRlIGNvbnN0IGludCBRTFpfUE9JTlRFUlNfMyA9IDE2O1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGludCBoZWFkZXJMZW4oYnl0ZVtdIHNvdXJjZSlcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gKChzb3VyY2VbMF0gJiAyKSA9PSAyKSA/IDkgOiAzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgaW50IHNpemVEZWNvbXByZXNzZWQoYnl0ZVtdIHNvdXJjZSlcclxuICAgIHtcclxuICAgICAgICBpZiAoaGVhZGVyTGVuKHNvdXJjZSkgPT0gOSlcclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZVs1XSB8IChzb3VyY2VbNl0gPDwgOCkgfCAoc291cmNlWzddIDw8IDE2KSB8IChzb3VyY2VbOF0gPDwgMjQpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZVsyXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGludCBzaXplQ29tcHJlc3NlZChieXRlW10gc291cmNlKVxyXG4gICAge1xyXG4gICAgICAgIGlmIChoZWFkZXJMZW4oc291cmNlKSA9PSA5KVxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlWzFdIHwgKHNvdXJjZVsyXSA8PCA4KSB8IChzb3VyY2VbM10gPDwgMTYpIHwgKHNvdXJjZVs0XSA8PCAyNCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlWzFdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHZvaWQgd3JpdGVfaGVhZGVyKGJ5dGVbXSBkc3QsIGludCBsZXZlbCwgYm9vbCBjb21wcmVzc2libGUsIGludCBzaXplX2NvbXByZXNzZWQsIGludCBzaXplX2RlY29tcHJlc3NlZClcclxuICAgIHtcclxuICAgICAgICBkc3RbMF0gPSAoYnl0ZSkoMiB8IChjb21wcmVzc2libGUgPyAxIDogMCkpO1xyXG4gICAgICAgIGRzdFswXSB8PSAoYnl0ZSkobGV2ZWwgPDwgMik7XHJcbiAgICAgICAgZHN0WzBdIHw9ICgxIDw8IDYpO1xyXG4gICAgICAgIGRzdFswXSB8PSAoMCA8PCA0KTtcclxuICAgICAgICBmYXN0X3dyaXRlKGRzdCwgMSwgc2l6ZV9kZWNvbXByZXNzZWQsIDQpO1xyXG4gICAgICAgIGZhc3Rfd3JpdGUoZHN0LCA1LCBzaXplX2NvbXByZXNzZWQsIDQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYnl0ZVtdIGNvbXByZXNzKGJ5dGVbXSBzb3VyY2UsIGludCBsZXZlbCA9IDEpXHJcbiAgICB7XHJcbiAgICAgICAgaW50IHNyYyA9IDA7XHJcbiAgICAgICAgaW50IGRzdCA9IERFRkFVTFRfSEVBREVSTEVOICsgQ1dPUkRfTEVOO1xyXG4gICAgICAgIHVpbnQgY3dvcmRfdmFsID0gMHg4MDAwMDAwMDtcclxuICAgICAgICBpbnQgY3dvcmRfcHRyID0gREVGQVVMVF9IRUFERVJMRU47XHJcbiAgICAgICAgYnl0ZVtdIGRlc3RpbmF0aW9uID0gbmV3IGJ5dGVbc291cmNlLkxlbmd0aCArIDQwMF07XHJcbiAgICAgICAgaW50WyxdIGhhc2h0YWJsZTtcclxuICAgICAgICBpbnRbXSBjYWNoZXRhYmxlID0gbmV3IGludFtIQVNIX1ZBTFVFU107XHJcbiAgICAgICAgYnl0ZVtdIGhhc2hfY291bnRlciA9IG5ldyBieXRlW0hBU0hfVkFMVUVTXTtcclxuICAgICAgICBieXRlW10gZDI7XHJcbiAgICAgICAgaW50IGZldGNoID0gMDtcclxuICAgICAgICBpbnQgbGFzdF9tYXRjaHN0YXJ0ID0gKHNvdXJjZS5MZW5ndGggLSBVTkNPTkRJVElPTkFMX01BVENITEVOIC0gVU5DT01QUkVTU0VEX0VORCAtIDEpO1xyXG4gICAgICAgIGludCBsaXRzID0gMDtcclxuXHJcbiAgICAgICAgaWYgKGxldmVsICE9IDEgJiYgbGV2ZWwgIT0gMylcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiQyMgdmVyc2lvbiBvbmx5IHN1cHBvcnRzIGxldmVsIDEgYW5kIDNcIik7XHJcblxyXG4gICAgICAgIGlmIChsZXZlbCA9PSAxKVxyXG4gICAgICAgICAgICBoYXNodGFibGUgPSBuZXcgaW50W0hBU0hfVkFMVUVTLCBRTFpfUE9JTlRFUlNfMV07XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBoYXNodGFibGUgPSBuZXcgaW50W0hBU0hfVkFMVUVTLCBRTFpfUE9JTlRFUlNfM107XHJcblxyXG4gICAgICAgIGlmIChzb3VyY2UuTGVuZ3RoID09IDApXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgYnl0ZVswXTtcclxuXHJcbiAgICAgICAgaWYgKHNyYyA8PSBsYXN0X21hdGNoc3RhcnQpXHJcbiAgICAgICAgICAgIGZldGNoID0gc291cmNlW3NyY10gfCAoc291cmNlW3NyYyArIDFdIDw8IDgpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNik7XHJcblxyXG4gICAgICAgIHdoaWxlIChzcmMgPD0gbGFzdF9tYXRjaHN0YXJ0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKChjd29yZF92YWwgJiAxKSA9PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3JjID4gc291cmNlLkxlbmd0aCA+PiAxICYmIGRzdCA+IHNyYyAtIChzcmMgPj4gNSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZDIgPSBuZXcgYnl0ZVtzb3VyY2UuTGVuZ3RoICsgREVGQVVMVF9IRUFERVJMRU5dO1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlX2hlYWRlcihkMiwgbGV2ZWwsIGZhbHNlLCBzb3VyY2UuTGVuZ3RoLCBzb3VyY2UuTGVuZ3RoICsgREVGQVVMVF9IRUFERVJMRU4pO1xyXG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5BcnJheS5Db3B5KHNvdXJjZSwgMCwgZDIsIERFRkFVTFRfSEVBREVSTEVOLCBzb3VyY2UuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZmFzdF93cml0ZShkZXN0aW5hdGlvbiwgY3dvcmRfcHRyLCAoaW50KSgoY3dvcmRfdmFsID4+IDEpIHwgMHg4MDAwMDAwMCksIDQpO1xyXG4gICAgICAgICAgICAgICAgY3dvcmRfcHRyID0gZHN0O1xyXG4gICAgICAgICAgICAgICAgZHN0ICs9IENXT1JEX0xFTjtcclxuICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9IDB4ODAwMDAwMDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsZXZlbCA9PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgaGFzaCA9ICgoZmV0Y2ggPj4gMTIpIF4gZmV0Y2gpICYgKEhBU0hfVkFMVUVTIC0gMSk7XHJcbiAgICAgICAgICAgICAgICBpbnQgbyA9IGhhc2h0YWJsZVtoYXNoLCAwXTtcclxuICAgICAgICAgICAgICAgIGludCBjYWNoZSA9IGNhY2hldGFibGVbaGFzaF0gXiBmZXRjaDtcclxuICAgICAgICAgICAgICAgIGNhY2hldGFibGVbaGFzaF0gPSBmZXRjaDtcclxuICAgICAgICAgICAgICAgIGhhc2h0YWJsZVtoYXNoLCAwXSA9IHNyYztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGUgPT0gMCAmJiBoYXNoX2NvdW50ZXJbaGFzaF0gIT0gMCAmJiAoc3JjIC0gbyA+IE1JTk9GRlNFVCB8fCAoc3JjID09IG8gKyAxICYmIGxpdHMgPj0gMyAmJiBzcmMgPiAzICYmIHNvdXJjZVtzcmNdID09IHNvdXJjZVtzcmMgLSAzXSAmJiBzb3VyY2Vbc3JjXSA9PSBzb3VyY2Vbc3JjIC0gMl0gJiYgc291cmNlW3NyY10gPT0gc291cmNlW3NyYyAtIDFdICYmIHNvdXJjZVtzcmNdID09IHNvdXJjZVtzcmMgKyAxXSAmJiBzb3VyY2Vbc3JjXSA9PSBzb3VyY2Vbc3JjICsgMl0pKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAoKGN3b3JkX3ZhbCA+PiAxKSB8IDB4ODAwMDAwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VbbyArIDNdICE9IHNvdXJjZVtzcmMgKyAzXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBmID0gMyAtIDIgfCAoaGFzaCA8PCA0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0ICsgMF0gPSAoYnl0ZSkoZiA+PiAwICogOCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdCArIDFdID0gKGJ5dGUpKGYgPj4gMSAqIDgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHN0ICs9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBvbGRfc3JjID0gc3JjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQgcmVtYWluaW5nID0gKChzb3VyY2UuTGVuZ3RoIC0gVU5DT01QUkVTU0VEX0VORCAtIHNyYyArIDEgLSAxKSA+IDI1NSA/IDI1NSA6IChzb3VyY2UuTGVuZ3RoIC0gVU5DT01QUkVTU0VEX0VORCAtIHNyYyArIDEgLSAxKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZVtvICsgc3JjIC0gb2xkX3NyY10gPT0gc291cmNlW3NyY10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZVtvICsgc3JjIC0gb2xkX3NyY10gPT0gc291cmNlW3NyY10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNvdXJjZVtvICsgKHNyYyAtIG9sZF9zcmMpXSA9PSBzb3VyY2Vbc3JjXSAmJiAoc3JjIC0gb2xkX3NyYykgPCByZW1haW5pbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQgbWF0Y2hsZW4gPSBzcmMgLSBvbGRfc3JjO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaCA8PD0gNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNobGVuIDwgMTgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBmID0gKGhhc2ggfCAobWF0Y2hsZW4gLSAyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3QgKyAwXSA9IChieXRlKShmID4+IDAgKiA4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdCArIDFdID0gKGJ5dGUpKGYgPj4gMSAqIDgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0ICs9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBkc3QsIGhhc2ggfCAobWF0Y2hsZW4gPDwgMTYpLCAzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzdCArPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZldGNoID0gc291cmNlW3NyY10gfCAoc291cmNlW3NyYyArIDFdIDw8IDgpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGl0cyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGl0cysrO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc2hfY291bnRlcltoYXNoXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0XSA9IHNvdXJjZVtzcmNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9IChjd29yZF92YWwgPj4gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjKys7XHJcbiAgICAgICAgICAgICAgICAgICAgZHN0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAoKGZldGNoID4+IDgpICYgMHhmZmZmKSB8IChzb3VyY2Vbc3JjICsgMl0gPDwgMTYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZldGNoID0gc291cmNlW3NyY10gfCAoc291cmNlW3NyYyArIDFdIDw8IDgpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNik7XHJcblxyXG4gICAgICAgICAgICAgICAgaW50IG8sIG9mZnNldDI7XHJcbiAgICAgICAgICAgICAgICBpbnQgbWF0Y2hsZW4sIGssIG0sIGJlc3RfayA9IDA7XHJcbiAgICAgICAgICAgICAgICBieXRlIGM7XHJcbiAgICAgICAgICAgICAgICBpbnQgcmVtYWluaW5nID0gKChzb3VyY2UuTGVuZ3RoIC0gVU5DT01QUkVTU0VEX0VORCAtIHNyYyArIDEgLSAxKSA+IDI1NSA/IDI1NSA6IChzb3VyY2UuTGVuZ3RoIC0gVU5DT01QUkVTU0VEX0VORCAtIHNyYyArIDEgLSAxKSk7XHJcbiAgICAgICAgICAgICAgICBpbnQgaGFzaCA9ICgoZmV0Y2ggPj4gMTIpIF4gZmV0Y2gpICYgKEhBU0hfVkFMVUVTIC0gMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYyA9IGhhc2hfY291bnRlcltoYXNoXTtcclxuICAgICAgICAgICAgICAgIG1hdGNobGVuID0gMDtcclxuICAgICAgICAgICAgICAgIG9mZnNldDIgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IFFMWl9QT0lOVEVSU18zICYmIGMgPiBrOyBrKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbyA9IGhhc2h0YWJsZVtoYXNoLCBrXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGJ5dGUpZmV0Y2ggPT0gc291cmNlW29dICYmIChieXRlKShmZXRjaCA+PiA4KSA9PSBzb3VyY2VbbyArIDFdICYmIChieXRlKShmZXRjaCA+PiAxNikgPT0gc291cmNlW28gKyAyXSAmJiBvIDwgc3JjIC0gTUlOT0ZGU0VUKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChzb3VyY2VbbyArIG1dID09IHNvdXJjZVtzcmMgKyBtXSAmJiBtIDwgcmVtYWluaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG0gPiBtYXRjaGxlbikgfHwgKG0gPT0gbWF0Y2hsZW4gJiYgbyA+IG9mZnNldDIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQyID0gbztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNobGVuID0gbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RfayA9IGs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvID0gb2Zmc2V0MjtcclxuICAgICAgICAgICAgICAgIGhhc2h0YWJsZVtoYXNoLCBjICYgKFFMWl9QT0lOVEVSU18zIC0gMSldID0gc3JjO1xyXG4gICAgICAgICAgICAgICAgYysrO1xyXG4gICAgICAgICAgICAgICAgaGFzaF9jb3VudGVyW2hhc2hdID0gYztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hsZW4gPj0gMyAmJiBzcmMgLSBvIDwgMTMxMDcxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBvZmZzZXQgPSBzcmMgLSBvO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCB1ID0gMTsgdSA8IG1hdGNobGVuOyB1KyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCA9IHNvdXJjZVtzcmMgKyB1XSB8IChzb3VyY2Vbc3JjICsgdSArIDFdIDw8IDgpIHwgKHNvdXJjZVtzcmMgKyB1ICsgMl0gPDwgMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNoID0gKChmZXRjaCA+PiAxMikgXiBmZXRjaCkgJiAoSEFTSF9WQUxVRVMgLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGhhc2hfY291bnRlcltoYXNoXSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNodGFibGVbaGFzaCwgYyAmIChRTFpfUE9JTlRFUlNfMyAtIDEpXSA9IHNyYyArIHU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzcmMgKz0gbWF0Y2hsZW47XHJcbiAgICAgICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gKChjd29yZF92YWwgPj4gMSkgfCAweDgwMDAwMDAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNobGVuID09IDMgJiYgb2Zmc2V0IDw9IDYzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFzdF93cml0ZShkZXN0aW5hdGlvbiwgZHN0LCBvZmZzZXQgPDwgMiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChtYXRjaGxlbiA9PSAzICYmIG9mZnNldCA8PSAxNjM4MylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGRzdCwgKG9mZnNldCA8PCAyKSB8IDEsIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3QgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobWF0Y2hsZW4gPD0gMTggJiYgb2Zmc2V0IDw9IDEwMjMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBkc3QsICgobWF0Y2hsZW4gLSAzKSA8PCAyKSB8IChvZmZzZXQgPDwgNikgfCAyLCAyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHN0ICs9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNobGVuIDw9IDMzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFzdF93cml0ZShkZXN0aW5hdGlvbiwgZHN0LCAoKG1hdGNobGVuIC0gMikgPDwgMikgfCAob2Zmc2V0IDw8IDcpIHwgMywgMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdCArPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBkc3QsICgobWF0Y2hsZW4gLSAzKSA8PCA3KSB8IChvZmZzZXQgPDwgMTUpIHwgMywgNCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdCArPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsaXRzID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3RdID0gc291cmNlW3NyY107XHJcbiAgICAgICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gKGN3b3JkX3ZhbCA+PiAxKTtcclxuICAgICAgICAgICAgICAgICAgICBzcmMrKztcclxuICAgICAgICAgICAgICAgICAgICBkc3QrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAoc3JjIDw9IHNvdXJjZS5MZW5ndGggLSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKChjd29yZF92YWwgJiAxKSA9PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBjd29yZF9wdHIsIChpbnQpKChjd29yZF92YWwgPj4gMSkgfCAweDgwMDAwMDAwKSwgNCk7XHJcbiAgICAgICAgICAgICAgICBjd29yZF9wdHIgPSBkc3Q7XHJcbiAgICAgICAgICAgICAgICBkc3QgKz0gQ1dPUkRfTEVOO1xyXG4gICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gMHg4MDAwMDAwMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0XSA9IHNvdXJjZVtzcmNdO1xyXG4gICAgICAgICAgICBzcmMrKztcclxuICAgICAgICAgICAgZHN0Kys7XHJcbiAgICAgICAgICAgIGN3b3JkX3ZhbCA9IChjd29yZF92YWwgPj4gMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlICgoY3dvcmRfdmFsICYgMSkgIT0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGN3b3JkX3ZhbCA9IChjd29yZF92YWwgPj4gMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGN3b3JkX3B0ciwgKGludCkoKGN3b3JkX3ZhbCA+PiAxKSB8IDB4ODAwMDAwMDApLCBDV09SRF9MRU4pO1xyXG4gICAgICAgIHdyaXRlX2hlYWRlcihkZXN0aW5hdGlvbiwgbGV2ZWwsIHRydWUsIHNvdXJjZS5MZW5ndGgsIGRzdCk7XHJcbiAgICAgICAgZDIgPSBuZXcgYnl0ZVtkc3RdO1xyXG4gICAgICAgIFN5c3RlbS5BcnJheS5Db3B5KGRlc3RpbmF0aW9uLCBkMiwgZHN0KTtcclxuICAgICAgICByZXR1cm4gZDI7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHZvaWQgZmFzdF93cml0ZShieXRlW10gYSwgaW50IGksIGludCB2YWx1ZSwgaW50IG51bWJ5dGVzKVxyXG4gICAge1xyXG4gICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbnVtYnl0ZXM7IGorKylcclxuICAgICAgICAgICAgYVtpICsgal0gPSAoYnl0ZSkodmFsdWUgPj4gKGogKiA4KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBieXRlW10gZGVjb21wcmVzcyhieXRlW10gc291cmNlKVxyXG4gICAge1xyXG4gICAgICAgIGludCBsZXZlbDtcclxuICAgICAgICBpbnQgc2l6ZSA9IHNpemVEZWNvbXByZXNzZWQoc291cmNlKTtcclxuICAgICAgICBpbnQgc3JjID0gaGVhZGVyTGVuKHNvdXJjZSk7XHJcbiAgICAgICAgaW50IGRzdCA9IDA7XHJcbiAgICAgICAgdWludCBjd29yZF92YWwgPSAxO1xyXG4gICAgICAgIGJ5dGVbXSBkZXN0aW5hdGlvbiA9IG5ldyBieXRlW3NpemVdO1xyXG4gICAgICAgIGludFtdIGhhc2h0YWJsZSA9IG5ldyBpbnRbNDA5Nl07XHJcbiAgICAgICAgYnl0ZVtdIGhhc2hfY291bnRlciA9IG5ldyBieXRlWzQwOTZdO1xyXG4gICAgICAgIGludCBsYXN0X21hdGNoc3RhcnQgPSBzaXplIC0gVU5DT05ESVRJT05BTF9NQVRDSExFTiAtIFVOQ09NUFJFU1NFRF9FTkQgLSAxO1xyXG4gICAgICAgIGludCBsYXN0X2hhc2hlZCA9IC0xO1xyXG4gICAgICAgIGludCBoYXNoO1xyXG4gICAgICAgIHVpbnQgZmV0Y2ggPSAwO1xyXG5cclxuICAgICAgICBsZXZlbCA9IChzb3VyY2VbMF0gPj4gMikgJiAweDM7XHJcblxyXG4gICAgICAgIGlmIChsZXZlbCAhPSAxICYmIGxldmVsICE9IDMpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIkMjIHZlcnNpb24gb25seSBzdXBwb3J0cyBsZXZlbCAxIGFuZCAzXCIpO1xyXG5cclxuICAgICAgICBpZiAoKHNvdXJjZVswXSAmIDEpICE9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBieXRlW10gZDIgPSBuZXcgYnl0ZVtzaXplXTtcclxuICAgICAgICAgICAgU3lzdGVtLkFycmF5LkNvcHkoc291cmNlLCBoZWFkZXJMZW4oc291cmNlKSwgZDIsIDAsIHNpemUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZDI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKDsgOyApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoY3dvcmRfdmFsID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9ICh1aW50KShzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KSB8IChzb3VyY2Vbc3JjICsgM10gPDwgMjQpKTtcclxuICAgICAgICAgICAgICAgIHNyYyArPSA0O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRzdCA8PSBsYXN0X21hdGNoc3RhcnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxldmVsID09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoID0gKHVpbnQpKHNvdXJjZVtzcmNdIHwgKHNvdXJjZVtzcmMgKyAxXSA8PCA4KSB8IChzb3VyY2Vbc3JjICsgMl0gPDwgMTYpKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoID0gKHVpbnQpKHNvdXJjZVtzcmNdIHwgKHNvdXJjZVtzcmMgKyAxXSA8PCA4KSB8IChzb3VyY2Vbc3JjICsgMl0gPDwgMTYpIHwgKHNvdXJjZVtzcmMgKyAzXSA8PCAyNCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoKGN3b3JkX3ZhbCAmIDEpID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVpbnQgbWF0Y2hsZW47XHJcbiAgICAgICAgICAgICAgICB1aW50IG9mZnNldDI7XHJcblxyXG4gICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gY3dvcmRfdmFsID4+IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzaCA9ICgoaW50KWZldGNoID4+IDQpICYgMHhmZmY7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0MiA9ICh1aW50KWhhc2h0YWJsZVtoYXNoXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChmZXRjaCAmIDB4ZikgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNobGVuID0gKGZldGNoICYgMHhmKSArIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGxlbiA9IHNvdXJjZVtzcmMgKyAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHVpbnQgb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoZmV0Y2ggJiAzKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGZldGNoICYgMHhmZikgPj4gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKGZldGNoICYgMikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IChmZXRjaCAmIDB4ZmZmZikgPj4gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKGZldGNoICYgMSkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IChmZXRjaCAmIDB4ZmZmZikgPj4gNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSAoKGZldGNoID4+IDIpICYgMTUpICsgMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChmZXRjaCAmIDEyNykgIT0gMylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IChmZXRjaCA+PiA3KSAmIDB4MWZmZmY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNobGVuID0gKChmZXRjaCA+PiAyKSAmIDB4MWYpICsgMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IChmZXRjaCA+PiAxNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNobGVuID0gKChmZXRjaCA+PiA3KSAmIDI1NSkgKyAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gNDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0MiA9ICh1aW50KShkc3QgLSBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdCArIDBdID0gZGVzdGluYXRpb25bb2Zmc2V0MiArIDBdO1xyXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0ICsgMV0gPSBkZXN0aW5hdGlvbltvZmZzZXQyICsgMV07XHJcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3QgKyAyXSA9IGRlc3RpbmF0aW9uW29mZnNldDIgKyAyXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMzsgaSA8IG1hdGNobGVuOyBpICs9IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0ICsgaV0gPSBkZXN0aW5hdGlvbltvZmZzZXQyICsgaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZHN0ICs9IChpbnQpbWF0Y2hsZW47XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAodWludCkoZGVzdGluYXRpb25bbGFzdF9oYXNoZWQgKyAxXSB8IChkZXN0aW5hdGlvbltsYXN0X2hhc2hlZCArIDJdIDw8IDgpIHwgKGRlc3RpbmF0aW9uW2xhc3RfaGFzaGVkICsgM10gPDwgMTYpKTtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobGFzdF9oYXNoZWQgPCBkc3QgLSBtYXRjaGxlbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RfaGFzaGVkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2ggPSAoaW50KSgoKGZldGNoID4+IDEyKSBeIGZldGNoKSAmIChIQVNIX1ZBTFVFUyAtIDEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaHRhYmxlW2hhc2hdID0gbGFzdF9oYXNoZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hfY291bnRlcltoYXNoXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoID0gKHVpbnQpKGZldGNoID4+IDggJiAweGZmZmYgfCAodWludCkoZGVzdGluYXRpb25bbGFzdF9oYXNoZWQgKyAzXSA8PCAxNikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAodWludCkoc291cmNlW3NyY10gfCAoc291cmNlW3NyYyArIDFdIDw8IDgpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNikgfCAoc291cmNlW3NyYyArIDNdIDw8IDI0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYXN0X2hhc2hlZCA9IGRzdCAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZHN0IDw9IGxhc3RfbWF0Y2hzdGFydClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3RdID0gc291cmNlW3NyY107XHJcbiAgICAgICAgICAgICAgICAgICAgZHN0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gY3dvcmRfdmFsID4+IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsZXZlbCA9PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGxhc3RfaGFzaGVkIDwgZHN0IC0gMylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9oYXNoZWQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBmZXRjaDIgPSBkZXN0aW5hdGlvbltsYXN0X2hhc2hlZF0gfCAoZGVzdGluYXRpb25bbGFzdF9oYXNoZWQgKyAxXSA8PCA4KSB8IChkZXN0aW5hdGlvbltsYXN0X2hhc2hlZCArIDJdIDw8IDE2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2ggPSAoKGZldGNoMiA+PiAxMikgXiBmZXRjaDIpICYgKEhBU0hfVkFMVUVTIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNodGFibGVbaGFzaF0gPSBsYXN0X2hhc2hlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hfY291bnRlcltoYXNoXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAodWludCkoZmV0Y2ggPj4gOCAmIDB4ZmZmZiB8ICh1aW50KShzb3VyY2Vbc3JjICsgMl0gPDwgMTYpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAodWludCkoZmV0Y2ggPj4gOCAmIDB4ZmZmZiB8ICh1aW50KShzb3VyY2Vbc3JjICsgMl0gPDwgMTYpIHwgKHVpbnQpKHNvdXJjZVtzcmMgKyAzXSA8PCAyNCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoZHN0IDw9IHNpemUgLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN3b3JkX3ZhbCA9PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gQ1dPUkRfTEVOO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gMHg4MDAwMDAwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0XSA9IHNvdXJjZVtzcmNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3QrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9IGN3b3JkX3ZhbCA+PiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzdGluYXRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiB9XHJcbiAiLCJ1c2luZyBCcmlkZ2U7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgR3JhcGhzO1xyXG51c2luZyBHcmFwaGljc0xheWVyO1xyXG51c2luZyBOZXd0b25zb2Z0Lkpzb247XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgQnJpZGdlLmpRdWVyeTI7XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgR3JhcGhzQ29yZTtcclxuXHJcbm5hbWVzcGFjZSBUZXN0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBBcHBcclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgSFRNTEVsZW1lbnQgX3NhZ2VDb250YWluZXI7XHJcbiAgICAgICAgc3RhdGljIEhUTUxMSUVsZW1lbnQgX25ld1NoZWV0VGFiO1xyXG4gICAgICAgIHN0YXRpYyBzdHJpbmcgX2N1cnJlbnRUYWJDYW52YXM7XHJcbiAgICAgICAgc3RhdGljIGludCBfdGFiSUQgPSAxO1xyXG5cclxuICAgICAgICBzdGF0aWMgRGljdGlvbmFyeTxzdHJpbmcsIFRhYkNhbnZhcz4gX2NhbnZhc0xvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgVGFiQ2FudmFzPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgTWFpbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBXaW5kb3cuT25Mb2FkICs9IE9uV2luZG93TG9hZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIE9uV2luZG93TG9hZChFdmVudCBlZWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBXaW5kb3cuQWRkRXZlbnRMaXN0ZW5lcihcImNvcHlcIiwgKEFjdGlvbjxFdmVudD4pKChFdmVudCBlKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKGUuVGFyZ2V0IGlzIEhUTUxTcGFuRWxlbWVudCkgfHwgKGUuVGFyZ2V0IGlzIEhUTUxBbmNob3JFbGVtZW50KSlcclxuICAgICAgICAgICAgICAgICAgICBlLlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGMgPSBfY2FudmFzTG9va3VwW19jdXJyZW50VGFiQ2FudmFzXTtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gdGMuR3JhcGhDYW52YXMuRG9Db3B5KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KHMpKVxyXG4gICAgICAgICAgICAgICAgICAgIGUuVG9EeW5hbWljKCkuY2xpcGJvYXJkRGF0YS5zZXREYXRhKFwiVGV4dFwiLCBzKTtcclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgV2luZG93LkFkZEV2ZW50TGlzdGVuZXIoXCJwYXN0ZVwiLCAoQWN0aW9uPEV2ZW50PikoKEV2ZW50IGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGUuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gZS5Ub0R5bmFtaWMoKS5jbGlwYm9hcmREYXRhLmdldERhdGEoXCJUZXh0XCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRjID0gX2NhbnZhc0xvb2t1cFtfY3VycmVudFRhYkNhbnZhc107XHJcbiAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Eb1Bhc3RlKHMgPz8gXCJcIik7XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIGpRdWVyeS5Eb2N1bWVudC5PbihcImtleWRvd25cIiwgKEFjdGlvbjxLZXlib2FyZEV2ZW50PilPbktleURvd24pO1xyXG4gICAgICAgICAgICBqUXVlcnkuRG9jdW1lbnQuT24oXCJjb250ZXh0bWVudVwiLCBcIi5JQW1BR3JhcGhDYW52YXNcIiwgKEFjdGlvbjxFdmVudD4pKChFdmVudCBlKSA9PiB7IGUuUHJldmVudERlZmF1bHQoKTsgfSkpO1xyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBTYWdlXHJcbiAgICAgICAgICAgIF9zYWdlQ29udGFpbmVyID0gRG9jdW1lbnQuR2V0RWxlbWVudEJ5SWQoXCJTYWdlQ29udGFpbmVyXCIpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VNYW51YWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VNYW51YWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VHcmFwaDZcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VHcmFwaDYoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VTcGFyc2U2XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlU3BhcnNlNigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNocm9tYXRpY051bWJlclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNocm9tYXRpY051bWJlcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNocm9tYXRpY1BvbHlub21pYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDaHJvbWF0aWNQb2x5bm9taWFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ29sb3JpbmdcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDb2xvcmluZygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUluZGVwZW5kZW50U2V0XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSW5kZXBlbmRlbnRTZXQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1BlcmZlY3RcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1BlcmZlY3QoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VNYXRjaGluZ1BvbHlub21pYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VNYXRjaGluZ1BvbHlub21pYWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VQYXRod2lkdGhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VQYXRod2lkdGgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VUcmVld2lkdGhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VUcmVld2lkdGgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VUdXR0ZVBvbHlub21pYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VUdXR0ZVBvbHlub21pYWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VWZXJ0ZXhDb3ZlclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVZlcnRleENvdmVyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ2xpcXVlQ29tcGxleFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNsaXF1ZUNvbXBsZXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDbGlxdWVNYXhpbXVtXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQ2xpcXVlTWF4aW11bSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNsaXF1ZU51bWJlclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNsaXF1ZU51bWJlcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNsaXF1ZVBvbHlub21pYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDbGlxdWVQb2x5bm9taWFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQnJpZGdlc1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUJyaWRnZXMoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VHb21vcnlIdVRyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VHb21vcnlIdVRyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VSYW5kb21TcGFubmluZ1RyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VSYW5kb21TcGFubmluZ1RyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VBcGV4VmVydGljZXNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VBcGV4VmVydGljZXMoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0FwZXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0FwZXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0FyY1RyYW5zaXRpdmVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0FyY1RyYW5zaXRpdmUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0FzdGVyb2lkYWxUcmlwbGVGcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNBc3Rlcm9pZGFsVHJpcGxlRnJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQmljb25uZWN0ZWRcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0JpY29ubmVjdGVkKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNCaXBhcnRpdGVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0JpcGFydGl0ZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQmxvY2tHcmFwaFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQmxvY2tHcmFwaCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQ2FydGVzaWFuUHJvZHVjdFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQ2FydGVzaWFuUHJvZHVjdCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzRGlzdGFuY2VSZWd1bGFyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNEaXN0YW5jZVJlZ3VsYXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0VkZ2VUcmFuc2l0aXZlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNFZGdlVHJhbnNpdGl2ZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzRXZlbkhvbGVGcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNFdmVuSG9sZUZyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0ZvcmVzdFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzRm9yZXN0KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNIYWxmVHJhbnNpdGl2ZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzSGFsZlRyYW5zaXRpdmUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0xpbmVHcmFwaFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzTGluZUdyYXBoKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNMb25nQW50aWhvbGVGcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNMb25nQW50aWhvbGVGcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNMb25nSG9sZUZyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0xvbmdIb2xlRnJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzT2RkSG9sZUZyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc09kZEhvbGVGcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNPdmVyZnVsbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzT3ZlcmZ1bGwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1BhcnRpYWxDdWJlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNQYXJ0aWFsQ3ViZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzUHJpbWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1ByaW1lKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNTZW1pU3ltbWV0cmljXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNTZW1pU3ltbWV0cmljKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNTcGxpdFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzU3BsaXQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1N0cm9uZ2x5UmVndWxhclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzU3Ryb25nbHlSZWd1bGFyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNUcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNUcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNUcmlhbmdsZUZyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1RyaWFuZ2xlRnJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzV2Vha2x5Q2hvcmRhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzV2Vha2x5Q2hvcmRhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZU9kZEdpcnRoXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlT2RkR2lydGgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VGcmFjdGlvbmFsQ2hyb21hdGljSW5kZXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VGcmFjdGlvbmFsQ2hyb21hdGljSW5kZXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VIYXNQZXJmZWN0TWF0Y2hpbmdcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VIYXNQZXJmZWN0TWF0Y2hpbmcoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VLaXJjaGhvZmZTeW1hbnppa1BvbHlub21pYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VLaXJjaGhvZmZTeW1hbnppa1BvbHlub21pYWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMb3Zhc3pUaGV0YVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUxvdmFzelRoZXRhKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTWF0Y2hpbmdcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VNYXRjaGluZygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZU1heGltdW1BdmVyYWdlRGVncmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTWF4aW11bUF2ZXJhZ2VEZWdyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VTZWlkZWxBZGphY2VuY3lNYXRyaXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VTZWlkZWxBZGphY2VuY3lNYXRyaXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VOZXR3b3JreEdyYXBoXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTmV0d29ya3hHcmFwaCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUFkamFjZW5jeU1hdHJpeFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUFkamFjZW5jeU1hdHJpeCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUluY2lkZW5jZU1hdHJpeFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUluY2lkZW5jZU1hdHJpeCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZURpc3RhbmNlTWF0cml4XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRGlzdGFuY2VNYXRyaXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VLaXJjaGhvZmZNYXRyaXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VLaXJjaGhvZmZNYXRyaXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VEZW5zaXR5XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRGVuc2l0eSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZU9yZGVyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlT3JkZXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VTaXplXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlU2l6ZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUF2ZXJhZ2VEZWdyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VBdmVyYWdlRGVncmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRGVncmVlU2VxdWVuY2VcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VEZWdyZWVTZXF1ZW5jZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUN5Y2xlQmFzaXNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDeWNsZUJhc2lzKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQWxsUGF0aHNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VBbGxQYXRocygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVRyaWFuZ2xlc0NvdW50XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlVHJpYW5nbGVzQ291bnQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VTcGVjdHJ1bVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVNwZWN0cnVtKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRWlnZW52ZWN0b3JzXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRWlnZW52ZWN0b3JzKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRWlnZW5zcGFjZXNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VFaWdlbnNwYWNlcygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUF1dG9tb3JwaGlzbUdyb3VwXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQXV0b21vcnBoaXNtR3JvdXAoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1ZlcnRleFRyYW5zaXRpdmVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1ZlcnRleFRyYW5zaXRpdmUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDYW5vbmljYWxMYWJlbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNhbm9uaWNhbExhYmVsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNDYXlsZXlcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0NheWxleSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzRXVsZXJpYW5cIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0V1bGVyaWFuKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNQbGFuYXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1BsYW5hcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzUmVndWxhclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzUmVndWxhcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQ2hvcmRhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQ2hvcmRhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQ2lyY3VsYW50XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNDaXJjdWxhbnQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0ludGVydmFsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNJbnRlcnZhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzR2FsbGFpVHJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzR2FsbGFpVHJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQ2xpcXVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNDbGlxdWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0N5Y2xlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNDeWNsZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzSW5kZXBlbmRlbnRTZXRcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0luZGVwZW5kZW50U2V0KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNUcmFuc2l0aXZlbHlSZWR1Y2VkXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNUcmFuc2l0aXZlbHlSZWR1Y2VkKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNFcXVpdGFibGVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0VxdWl0YWJsZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUVjY2VudHJpY2l0eVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUVjY2VudHJpY2l0eSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVJhZGl1c1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVJhZGl1cygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZURpYW1ldGVyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRGlhbWV0ZXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VHaXJ0aFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUdpcnRoKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRWRnZUNvbm5lY3Rpdml0eVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUVkZ2VDb25uZWN0aXZpdHkoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VWZXJ0ZXhDb25uZWN0aXZpdHlcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VWZXJ0ZXhDb25uZWN0aXZpdHkoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0hhbWlsdG9uaWFuXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNIYW1pbHRvbmlhbigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNoYXJhY3RlcmlzdGljUG9seW5vbWlhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNoYXJhY3RlcmlzdGljUG9seW5vbWlhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUdlbnVzXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlR2VudXMoKSkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gTGF5b3V0XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUxheW91dFNwcmluZ3NcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMYXlvdXRTcHJpbmcoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMYXlvdXRSYW5rZWRcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMYXlvdXRSYW5rZWQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMYXlvdXRSYW5kb21cIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMYXlvdXRFeHRlbmRSYW5kb21seSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUxheW91dENpcmN1bGFyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTGF5b3V0Q2lyY3VsYXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMYXlvdXRUcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTGF5b3V0VHJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUxheW91dEdyYXBoVml6XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTGF5b3V0R3JhcGh2aXooKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMYXlvdXRQbGFuYXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMYXlvdXRQbGFuYXIoKSkpO1xyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiLk5hbWVkR3JhcGhcIikuT24oXCJjbGlja1wiLCAoQWN0aW9uPEV2ZW50PikoKEV2ZW50IGVlKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMb2FkTmFtZWRHcmFwaCgoKEhUTUxFbGVtZW50KWVlLkN1cnJlbnRUYXJnZXQpLlRleHRDb250ZW50KTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIE5ld1RhYigpO1xyXG4gICAgICAgICAgICBBZGROZXdTaGVldFRhYigpO1xyXG5cclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIi5uYXYtdGFic1wiKS5PbihcImNsaWNrXCIsIFwiYVwiLCAoQWN0aW9uPEV2ZW50PikoKEV2ZW50IGVlKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlZS5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFqUXVlcnkuVGhpcy5IYXNDbGFzcyhcIm5ldy1zaGVldC1hbmNob3JcIikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBqUXVlcnkuVGhpcy5Ub0R5bmFtaWMoKTtcclxuICAgICAgICAgICAgICAgICAgICBfY3VycmVudFRhYkNhbnZhcyA9IGVlLlRhcmdldC5BczxIVE1MQW5jaG9yRWxlbWVudD4oKS5IcmVmO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBDdXJyZW50VGFiQ2FudmFzLkNhbnZhcztcclxuICAgICAgICAgICAgICAgICAgICBkLnRhYihcInNob3dcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIubmV3LXNoZWV0LWFuY2hvclwiKS5PbihcImNsaWNrXCIsIChBY3Rpb248RXZlbnQ+KSgoRXZlbnQgZWUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVlLlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBOZXdUYWIoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgQWRkTmV3U2hlZXRUYWIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRhYkNvbnRyb2wgPSBEb2N1bWVudC5HZXRFbGVtZW50QnlJZChcIlRhYkNvbnRyb2xcIik7XHJcbiAgICAgICAgICAgIF9uZXdTaGVldFRhYiA9IG5ldyBIVE1MTElFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIF9uZXdTaGVldFRhYi5JZCA9IFwibmV3LXNoZWV0XCI7XHJcblxyXG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gbmV3IEhUTUxBbmNob3JFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIGFuY2hvci5DbGFzc05hbWUgPSBcIm5ldy1zaGVldC1hbmNob3JcIjtcclxuICAgICAgICAgICAgYW5jaG9yLlRleHRDb250ZW50ID0gXCIrXCI7XHJcbiAgICAgICAgICAgIGFuY2hvci5IcmVmID0gXCIjXCI7XHJcblxyXG4gICAgICAgICAgICBfbmV3U2hlZXRUYWIuQXBwZW5kQ2hpbGQoYW5jaG9yKTtcclxuICAgICAgICAgICAgdGFiQ29udHJvbC5BcHBlbmRDaGlsZChfbmV3U2hlZXRUYWIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIE5ld1RhYihzdHJpbmcgbmFtZSA9IG51bGwsIEdyYXBoIEcgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KG5hbWUpKVxyXG4gICAgICAgICAgICAgICAgbmFtZSA9IFwic2hlZXQgXCIgKyBfdGFiSUQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FudmFzID0gbmV3IEhUTUxDYW52YXNFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIGNhbnZhcy5JZCA9IFwiVGFiXCIgKyBfdGFiSUQ7XHJcbiAgICAgICAgICAgIGNhbnZhcy5XaWR0aCA9IChpbnQpKFdpbmRvdy5Jbm5lcldpZHRoKTtcclxuICAgICAgICAgICAgY2FudmFzLkhlaWdodCA9IChpbnQpKFdpbmRvdy5Jbm5lckhlaWdodCk7XHJcbiAgICAgICAgICAgIGNhbnZhcy5DbGFzc05hbWUgPSBcIklBbUFHcmFwaENhbnZhc1wiO1xyXG5cclxuICAgICAgICAgICAgY2FudmFzLk9uU2hvdyArPSBkZWxlZ2F0ZSBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FudmFzLldpZHRoID0gY2FudmFzLlBhcmVudEVsZW1lbnQuQ2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuSGVpZ2h0ID0gY2FudmFzLlBhcmVudEVsZW1lbnQuQ2xpZW50SGVpZ2h0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKEcgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIEcgPSBuZXcgR3JhcGgoKTtcclxuICAgICAgICAgICAgdmFyIGdyYXBoQ2FudmFzID0gbmV3IEdyYXBoQ2FudmFzKEcpO1xyXG4gICAgICAgICAgICB2YXIgdGMgPSBuZXcgVGFiQ2FudmFzKGNhbnZhcywgZ3JhcGhDYW52YXMpO1xyXG4gICAgICAgICAgICB0Yy5JbnZhbGlkYXRlKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGFiUGFuZSA9IG5ldyBIVE1MRGl2RWxlbWVudCgpO1xyXG4gICAgICAgICAgICB0YWJQYW5lLkNsYXNzTmFtZSA9IFwidGFiLXBhbmUgYWN0aXZlXCI7XHJcbiAgICAgICAgICAgIHRhYlBhbmUuSWQgPSBcIlRhYlwiICsgX3RhYklEO1xyXG4gICAgICAgICAgICB0YWJQYW5lLkFwcGVuZENoaWxkKGNhbnZhcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGFiQ29udHJvbENvbnRlbnQgPSBEb2N1bWVudC5HZXRFbGVtZW50QnlJZChcIlRhYkNvbnRyb2xDb250ZW50XCIpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY2hpbGQgaW4gdGFiQ29udHJvbENvbnRlbnQuQ2hpbGRyZW4pXHJcbiAgICAgICAgICAgICAgICBjaGlsZC5DbGFzc05hbWUgPSBcInRhYi1wYW5lXCI7XHJcbiAgICAgICAgICAgIHRhYkNvbnRyb2xDb250ZW50LkFwcGVuZENoaWxkKHRhYlBhbmUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRhYiA9IG5ldyBIVE1MTElFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIHRhYi5DbGFzc05hbWUgPSBcImFjdGl2ZVwiO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIGFuY2hvciA9IG5ldyBIVE1MQW5jaG9yRWxlbWVudCgpO1xyXG4gICAgICAgICAgICBhbmNob3IuU2V0QXR0cmlidXRlKFwiZGF0YS10b2dnbGVcIiwgXCJ0YWJcIik7XHJcbiAgICAgICAgICAgIGFuY2hvci5UZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgICAgIGFuY2hvci5IcmVmID0gXCIjVGFiXCIgKyBfdGFiSUQ7XHJcbiAgICAgICAgICAgIF9jYW52YXNMb29rdXBbYW5jaG9yLkhyZWZdID0gdGM7XHJcbiAgICAgICAgICAgIF9jdXJyZW50VGFiQ2FudmFzID0gYW5jaG9yLkhyZWY7XHJcblxyXG4gICAgICAgICAgICB0YWIuQXBwZW5kQ2hpbGQoYW5jaG9yKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0YWJDb250cm9sID0gRG9jdW1lbnQuR2V0RWxlbWVudEJ5SWQoXCJUYWJDb250cm9sXCIpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY2hpbGQgaW4gdGFiQ29udHJvbC5DaGlsZHJlbilcclxuICAgICAgICAgICAgICAgIGNoaWxkLkNsYXNzTmFtZSA9IFwibmFyZlwiO1xyXG4gICAgICAgICAgICB0YWJDb250cm9sLkluc2VydEJlZm9yZSh0YWIsIF9uZXdTaGVldFRhYik7XHJcblxyXG4gICAgICAgICAgICBfdGFiSUQrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVGFiQ2FudmFzIEN1cnJlbnRUYWJDYW52YXMgeyBnZXQgeyByZXR1cm4gX2NhbnZhc0xvb2t1cFtfY3VycmVudFRhYkNhbnZhc107IH0gfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBPbktleURvd24oS2V5Ym9hcmRFdmVudCBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRjID0gQ3VycmVudFRhYkNhbnZhcztcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZS5LZXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJmXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuRG9ab29tRml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiLVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLkRvWm9vbSgtMSwgbmV3IEJveCgwLjUsIDAuNSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIitcIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Eb1pvb20oMSwgbmV3IEJveCgwLjUsIDAuNSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImlcIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Ub2dnbGVWZXJ0ZXhJbmRpY2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiSVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLlJvdGF0ZVZlcnRleEluZGljZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJqXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuVG9nZ2xlRWRnZUluZGljZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJKXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuUm90YXRlRWRnZUluZGljZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuRG9SZXZlcnNlU2VsZWN0ZWRFZGdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJcIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Eb1JvdGF0ZVNlbGVjdGVkRWRnZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ5XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuQ3RybEtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuRG9SZWRvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwielwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLkN0cmxLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLkRvVW5kbygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEFza1NhZ2Uoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gQXBwZW5kU2FnZURpdihzKTtcclxuXHJcbiAgICAgICAgICAgIFNjcmlwdC5Xcml0ZShcInNhZ2VjZWxsLm1ha2VTYWdlY2VsbCh7XFxcImlucHV0TG9jYXRpb25cXFwiOiBcXFwiZGl2LmNvbXB1dGVcXFwiLCBoaWRlOiBbXFxcInBlcm1hbGlua1xcXCIsIFxcXCJmdWxsU2NyZWVuXFxcIl0sIGF1dG9ldmFsOmZhbHNlfSk7XCIpO1xyXG4gICAgICAgICAgICBTY3JpcHQuV3JpdGUoXCIkKFxcXCIjU2FnZU1vZGFsXFxcIikubW9kYWwoJ3Nob3cnKTtcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQXNrU2FnZUF1dG8oc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHBlbmRTYWdlRGl2KHMpO1xyXG5cclxuICAgICAgICAgICAgU2NyaXB0LldyaXRlKFwic2FnZWNlbGwubWFrZVNhZ2VjZWxsKHtcXFwiaW5wdXRMb2NhdGlvblxcXCI6IFxcXCJkaXYuY29tcHV0ZVxcXCIsIGhpZGU6IFtcXFwicGVybWFsaW5rXFxcIiwgXFxcImV2YWxCdXR0b25cXFwiLCBcXFwiZnVsbFNjcmVlblxcXCIsIFxcXCJlZGl0b3JcXFwiXSwgYXV0b2V2YWw6dHJ1ZX0pO1wiKTtcclxuICAgICAgICAgICAgU2NyaXB0LldyaXRlKFwiJChcXFwiI1NhZ2VNb2RhbFxcXCIpLm1vZGFsKCdzaG93Jyk7XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBhc3luYyBUYXNrPHN0cmluZz4gQXNrU2FnZUFzeW5jKEdyYXBoIEcsIHN0cmluZyBzYWdlQ29kZUFib3V0RylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKFwiRyA9IEdyYXBoKCdcIiArIEcuR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIHNhZ2VDb2RlQWJvdXRHKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgVGFzazxzdHJpbmc+IEFza1NhZ2VBc3luYyhzdHJpbmcgc2FnZUNvZGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gRG9jdW1lbnQuR2V0RWxlbWVudEJ5SWQoXCJTYWdlU2VjcmV0T3V0cHV0SG9sZVwiKTtcclxuICAgICAgICAgICAgb3V0cHV0LlRleHRDb250ZW50ID0gXCJ3b3JraW5nXCI7XHJcbiAgICAgICAgICAgIEFwcGVuZFNhZ2VEaXYoc2FnZUNvZGUpO1xyXG5cclxuICAgICAgICAgICAgU2NyaXB0LldyaXRlKFwic2FnZWNlbGwubWFrZVNhZ2VjZWxsKHtcXFwiaW5wdXRMb2NhdGlvblxcXCI6IFxcXCJkaXYuY29tcHV0ZVxcXCIsIGhpZGU6IFtcXFwicGVybWFsaW5rXFxcIiwgXFxcImV2YWxCdXR0b25cXFwiLCBcXFwiZnVsbFNjcmVlblxcXCIsIFxcXCJlZGl0b3JcXFwiXSwgYXV0b2V2YWw6dHJ1ZSwgb3V0cHV0TG9jYXRpb246XFxcIiNTYWdlU2VjcmV0T3V0cHV0SG9sZVxcXCJ9KTtcIik7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoIW91dHB1dC5UZXh0Q29udGVudC5Db250YWlucyhcIkFjY2VwdGVkOlwiKSlcclxuICAgICAgICAgICAgICAgIGF3YWl0IFRhc2suRGVsYXkoMTAwKTtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXNwb25zZSA9IG91dHB1dC5UZXh0Q29udGVudDtcclxuICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHJlc3BvbnNlKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImZsaWJibGVcIjtcclxuXHJcbiAgICAgICAgICAgIHZhciBzcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3RPckRlZmF1bHQ8c3RyaW5nPihyZXNwb25zZS5TcGxpdChuZXdbXSB7IEVudmlyb25tZW50Lk5ld0xpbmUgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBib29sPikobGluZSA9PiBsaW5lLkNvbnRhaW5zKFwiQWNjZXB0ZWQ6XCIpKSk7XHJcbiAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShzcykpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmbGFiYmxlXCI7XHJcblxyXG4gICAgICAgICAgICBzcyA9IHNzLlN1YnN0cmluZyhzcy5JbmRleE9mKFwidGV4dC9wbGFpblwiKSArIFwidGV4dC9wbGFpblwiLkxlbmd0aCArIDMpO1xyXG4gICAgICAgICAgICBzcyA9IHNzLlN1YnN0cmluZygwLCBzcy5JbmRleE9mKFwiXFxcIlwiKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSFRNTERpdkVsZW1lbnQgQXBwZW5kU2FnZURpdihzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfc2FnZUNvbnRhaW5lci5DaGlsZEVsZW1lbnRDb3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICBfc2FnZUNvbnRhaW5lci5SZW1vdmVDaGlsZChfc2FnZUNvbnRhaW5lci5DaGlsZHJlblswXSk7XHJcbiAgICAgICAgICAgIHZhciBkaXYgPSBuZXcgSFRNTERpdkVsZW1lbnQoKTtcclxuICAgICAgICAgICAgZGl2LkNsYXNzTmFtZSA9IFwiY29tcHV0ZVwiO1xyXG4gICAgICAgICAgICBkaXYuVGV4dENvbnRlbnQgPSBzO1xyXG4gICAgICAgICAgICBfc2FnZUNvbnRhaW5lci5BcHBlbmRDaGlsZChkaXYpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRpdjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBHcmFwaGljc0xheWVyO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgVGVzdFxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEhlbHBlckV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0NvbG9yKHRoaXMgQVJHQiBhcmdiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJyZ2JhKHswfSx7MX0sezJ9LHszOjAuMDB9KVwiLCBhcmdiLlIsIGFyZ2IuRywgYXJnYi5CLCBhcmdiLkEgLyAyNTUuMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBUZXN0XHJcbntcclxuICAgIGNsYXNzIExheW91dEFuaW1hdGlvblxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGludCBTdGVwcyA9IDEwMDtcclxuXHJcbiAgICAgICAgQWN0aW9uIF91cGRhdGU7XHJcbiAgICAgICAgQWN0aW9uIF9maW5hbFVwZGF0ZTtcclxuICAgICAgICBMaXN0PEdyYXBocy5WZWN0b3I+IF9sYXlvdXQ7XHJcbiAgICAgICAgZG91YmxlW10gX3hzdGVwO1xyXG4gICAgICAgIGRvdWJsZVtdIF95c3RlcDtcclxuICAgICAgICBpbnQgX3N0ZXAgPSAwO1xyXG4gICAgICAgIEdyYXBocy5HcmFwaCBfRztcclxuXHJcbiAgICAgICAgcHVibGljIExheW91dEFuaW1hdGlvbihBY3Rpb24gdXBkYXRlLCBBY3Rpb24gZmluYWxVcGRhdGUsIExpc3Q8R3JhcGhzLlZlY3Rvcj4gbGF5b3V0LCBHcmFwaHMuR3JhcGggRylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9HID0gRztcclxuICAgICAgICAgICAgX3VwZGF0ZSA9IHVwZGF0ZTtcclxuICAgICAgICAgICAgX2ZpbmFsVXBkYXRlID0gZmluYWxVcGRhdGU7XHJcbiAgICAgICAgICAgIF9sYXlvdXQgPSBsYXlvdXQ7XHJcblxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3hzdGVwID0gbmV3IGRvdWJsZVtfbGF5b3V0LkNvdW50XTtcclxuICAgICAgICAgICAgICAgIF95c3RlcCA9IG5ldyBkb3VibGVbX2xheW91dC5Db3VudF07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sYXlvdXQuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfeHN0ZXBbaV0gPSAoX2xheW91dFtpXS5YIC0gX0cuVmVydGljZXNbaV0uWCkgLyBTdGVwcztcclxuICAgICAgICAgICAgICAgICAgICBfeXN0ZXBbaV0gPSAoX2xheW91dFtpXS5ZIC0gX0cuVmVydGljZXNbaV0uWSkgLyBTdGVwcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEFuaW1hdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUoX3N0ZXAgPCBTdGVwcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRG9TdGVwKCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBUYXNrLkRlbGF5KDEwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBEb1N0ZXAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGF5b3V0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9HLlZlcnRpY2VzW2ldLlggKz0gX3hzdGVwW2ldO1xyXG4gICAgICAgICAgICAgICAgX0cuVmVydGljZXNbaV0uWSArPSBfeXN0ZXBbaV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF91cGRhdGUoKTtcclxuICAgICAgICAgICAgX3N0ZXArKztcclxuICAgICAgICAgICAgaWYgKF9zdGVwID49IFN0ZXBzKVxyXG4gICAgICAgICAgICAgICAgT25GaW5pc2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25GaW5pc2goKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGF5b3V0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9HLlZlcnRpY2VzW2ldLlggPSBfbGF5b3V0W2ldLlg7XHJcbiAgICAgICAgICAgICAgICBfRy5WZXJ0aWNlc1tpXS5ZID0gX2xheW91dFtpXS5ZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9maW5hbFVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVW5pb25GaW5kVHJhY2tlZFJvb3RzPFQ+IDogVW5pb25GaW5kPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxOb2RlPiBfcm9vdHMgPSBuZXcgTGlzdDxOb2RlPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8Tm9kZT4gRmluZEFsbEV4Y2VwdChJRW51bWVyYWJsZTxOb2RlPiBub2RlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXMuVW5pb25GaW5kPFQ+Lk5vZGU+KF9yb290cyxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXMuVW5pb25GaW5kPFQ+Lk5vZGUsZ2xvYmFsOjpBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzLlVuaW9uRmluZDxUPi5Ob2RlPihub2RlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXMuVW5pb25GaW5kPFQ+Lk5vZGUsIGdsb2JhbDo6QWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlcy5VbmlvbkZpbmQ8VD4uTm9kZT4pKG4gPT4gRmluZChuKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFJvb3RBZGRlZChOb2RlIG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfcm9vdHMuQWRkKG4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgUm9vdFJlbW92ZWQoTm9kZSBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3Jvb3RzLlJlbW92ZShuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDaHJvbmljbGVkQnJhbmNoIDogSUVudW1lcmFibGU8SUVudW1lcmFibGU8TW92ZT4+XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGludCBBbHBoYSB7Z2V0OyBwcml2YXRlIHNldDt9XHJcbiAgICAgICAgcHVibGljIGludCBCZXRhIHtnZXQ7IHByaXZhdGUgc2V0O31cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IFN3YXBDb21wb25lbnRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQ2hyb25pY2xlZEJyYW5jaChMaXN0PGludD4gUywgaW50IGFscGhhLCBpbnQgYmV0YSwgTGlzdDxMaXN0PGludD4+IHBhcnRpdGlvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBbHBoYSA9IGFscGhhO1xyXG4gICAgICAgICAgICBCZXRhID0gYmV0YTtcclxuICAgICAgICAgICAgU3dhcENvbXBvbmVudHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4ocGFydGl0aW9ucywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHAsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShpID0+IFNbaV0pKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhdG9yPElFbnVtZXJhYmxlPE1vdmU+PiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Ym9vbD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmU+PihMaXN0VXRpbGl0eS5FbnVtZXJhdGVTaG9ydExleE5vbmVtcHR5KFN3YXBDb21wb25lbnRzLkNvdW50KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Ym9vbD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPj4pKGNmID0+IEVudW1lcmF0ZU1vdmVzKGNmKSkpLkdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPE1vdmU+IEVudW1lcmF0ZU1vdmVzKExpc3Q8Ym9vbD4gY2YpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNmLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2ZbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHMgaW4gU3dhcENvbXBvbmVudHNbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5ldyBNb3ZlKCkgeyBBZGRlZCA9IEFscGhhLCBSZW1vdmVkID0gQmV0YSwgU3RhY2sgPSBzIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvciBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDb2xvcmluZ0FuYWx5emVyIDogSUJvYXJkQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlYXNvbiB7IGdldCB7IHJldHVybiBcImNvbG9yIGFsbFwiOyB9IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0tub3dsZWRnZURlcGVuZGVudCB7IGdldCB7IHJldHVybiBmYWxzZTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGluZUdyYXBoID0ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkxpbmVHcmFwaDtcclxuICAgICAgICAgICAgdmFyIGNhbkNvbG9yID0gbGluZUdyYXBoLklzQ2hvb3NhYmxlKEVudW1lcmFibGUuUmFuZ2UoMCwgbGluZUdyYXBoLk4pLlNlbGVjdDxsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGxvbmc+KShlID0+IGtub3dsZWRnZS5HZXRFZGdlQ29sb3JMaXN0KGJvYXJkLCBlKSkpLlRvTGlzdCgpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYW5Db2xvcilcclxuICAgICAgICAgICAgICAgIGtub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF0uQWRkV2luKGJvYXJkLCBSZWFzb24pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNhbkNvbG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIENvbG9yYWJsZVdpdGhvdXRFZGdlKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBpbnQgZWRnZUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbG9yYWJsZVdpdGhvdXRFZGdlKGtub3dsZWRnZSwgYm9hcmQuU3RhY2tzLCBlZGdlSW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIENvbG9yYWJsZVdpdGhvdXRFZGdlKEtub3dsZWRnZSBrbm93bGVkZ2UsIExpc3Q8bG9uZz4gc3RhY2tzLCBpbnQgZWRnZUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxnID0ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkxpbmVHcmFwaDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsZy5Jc0Nob29zYWJsZShFbnVtZXJhYmxlLlJhbmdlKDAsIGxnLk4pLlNlbGVjdDxsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGxvbmc+KShlID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlID09IGVkZ2VJbmRleClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtub3dsZWRnZS5HZXRFZGdlQ29sb3JMaXN0KHN0YWNrcywgZSk7XHJcbiAgICAgICAgICAgIH0pKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIENvbW1vbkNvbG9yQW5hbHl6ZXIgOiBJQm9hcmRBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUmVhc29uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gXCJjb21tb24gY29sb3JcIjsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNLbm93bGVkZ2VEZXBlbmRlbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb21tb25Db2xvciA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGxvbmcsbG9uZz4oYm9hcmQuU3RhY2tzLC0xTCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgbG9uZywgbG9uZz4pKCh0LCBzKSA9PiB0ICYgcykpICE9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29tbW9uQ29sb3IpXHJcbiAgICAgICAgICAgICAgICBrbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdLkFkZFdpbihib2FyZCwgUmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb21tb25Db2xvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3dhcEFuYWx5emVyIDogSUJvYXJkQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBib29sIEZpbmRDbGVhbmVzdFdpbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgYm9vbCBEb1N1cGVyYWJ1bmRhbnRDaGVjayB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgc3RyaW5nIFJlYXNvbiB7IGdldCB7IHJldHVybiBcImdvb2Qgc3dhcFwiOyB9IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0tub3dsZWRnZURlcGVuZGVudCB7IGdldCB7IHJldHVybiB0cnVlOyB9IH1cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBzdHJpbmcgQ2hpbGRSZWFzb24geyBnZXQgeyByZXR1cm4gc3RyaW5nLkVtcHR5OyB9IH1cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBib29sIElzQ2hpbGRCb2FyZEJldHRlcihLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZCwgQm9hcmQgY2hpbGRCb2FyZCkgeyByZXR1cm4gZmFsc2U7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFN3YXBBbmFseXplcihib29sIGZpbmRDbGVhbmVzdFdpbiA9IHRydWUsIGJvb2wgc3VwZXJhYnVuZGFudE9ubHkgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRmluZENsZWFuZXN0V2luID0gZmluZENsZWFuZXN0V2luO1xyXG4gICAgICAgICAgICBEb1N1cGVyYWJ1bmRhbnRDaGVjayA9IHN1cGVyYWJ1bmRhbnRPbmx5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwb3RLbm93bGVkZ2UgPSBrbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdO1xyXG4gICAgICAgICAgICB2YXIgZ3JhcGhLbm93bGVkZ2UgPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgYm9hcmRLbm93bGVkZ2UgPSBwb3RLbm93bGVkZ2VbYm9hcmRdO1xyXG4gICAgICAgICAgICBpZiAoYm9hcmRLbm93bGVkZ2UuRXhpc3RzKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciB3aW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIHdpbkRlcHRoID0gTWV0YUtub3dsZWRnZS5JbmZpbml0eTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yUGFpciBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnlEZXNjZW5kaW5nPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PixpbnQ+KHBvdEtub3dsZWRnZS5Db2xvclBhaXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikocGFpciA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5FbnVtZXJhdGVFeGFjdGx5T25lSW50ZXJzZWN0ZXJzKGJvYXJkLCBwYWlyKSkgJSAyKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xvclBhaXJXaW5EZXB0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBzID0gbmV3IExpc3Q8VHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+PigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGltcHJvdmluZ1N3YXBzID0gbmV3IExpc3Q8VHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+PigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBpbXByb3ZpbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYnJhbmNoIGluIENocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuRW51bWVyYXRlQnJhbmNoZXMoYm9hcmQsIGNvbG9yUGFpcikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+IHdpbm5pbmdTd2FwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4gaW1wcm92aW5nU3dhcCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBicmFuY2hXaW5EZXB0aCA9IE1ldGFLbm93bGVkZ2UuSW5maW5pdHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzd2FwIGluIGJyYW5jaClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gYm9hcmQuQ2xvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRCb2FyZC5Eb01vdmVDb21iaW5hdGlvbihzd2FwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEb1N1cGVyYWJ1bmRhbnRDaGVjayAmJiAhZ3JhcGhLbm93bGVkZ2UuR3JhcGguRGVncmVlQ29uZGl0aW9uKGNoaWxkQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRCb2FyZEtub3dsZWRnZSA9IHBvdEtub3dsZWRnZVtjaGlsZEJvYXJkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkQm9hcmRLbm93bGVkZ2UuRXhpc3RzKCkgJiYgY2hpbGRCb2FyZEtub3dsZWRnZS5EZXB0aCArIDEgPCBicmFuY2hXaW5EZXB0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmNoV2luRGVwdGggPSBjaGlsZEJvYXJkS25vd2xlZGdlLkRlcHRoICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwID0gbmV3IFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPihicmFuY2guU3dhcENvbXBvbmVudHMsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZT4oc3dhcCksIGNoaWxkQm9hcmRLbm93bGVkZ2UuUmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUZpbmRDbGVhbmVzdFdpbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChJc0NoaWxkQm9hcmRCZXR0ZXIoa25vd2xlZGdlLCBib2FyZCwgY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcHJvdmluZ1N3YXAgPSBuZXcgVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+KGJyYW5jaC5Td2FwQ29tcG9uZW50cywgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPihzd2FwKSwgQ2hpbGRSZWFzb24gKyBcIiBiZXR0ZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGFpcldpbkRlcHRoID0gTWF0aC5NYXgoY29sb3JQYWlyV2luRGVwdGgsIGJyYW5jaFdpbkRlcHRoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbm5pbmdTd2FwLkV4aXN0cygpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBzLkFkZCh3aW5uaW5nU3dhcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcHJvdmluZ1N3YXBzLkFkZCh3aW5uaW5nU3dhcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbXByb3ZpbmdTd2FwLkV4aXN0cygpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wcm92aW5nU3dhcHMuQWRkKGltcHJvdmluZ1N3YXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcHJvdmluZ1N3YXBBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3JQYWlyV2luRGVwdGggPCB3aW5EZXB0aClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbkRlcHRoID0gY29sb3JQYWlyV2luRGVwdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3RLbm93bGVkZ2UuQWRkV2luKGJvYXJkLCBSZWFzb24sIHdpbkRlcHRoLCBjb2xvclBhaXIsIHdpbm5pbmdTd2Fwcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUZpbmRDbGVhbmVzdFdpbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGltcHJvdmluZ1N3YXBBbHdheXNFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG90S25vd2xlZGdlLkFkZEltcHJvdmVtZW50KGJvYXJkLCBDaGlsZFJlYXNvbiwgY29sb3JQYWlyV2luRGVwdGgsIGNvbG9yUGFpciwgaW1wcm92aW5nU3dhcHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gd2luO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBLaWVyc3RlYWRBbmFseXplciA6IElCb2FyZEFuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZWFzb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBcInJ1biBraWVyc3RlYWRcIjsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNLbm93bGVkZ2VEZXBlbmRlbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJc0tpZXJzdGVhZChrbm93bGVkZ2UsIGJvYXJkLCB0cnVlLCBSZWFzb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzS2llcnN0ZWFkKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBib29sIGVuZm9yY2VEZWdyZWVSZXF1aXJlbWVudCA9IGZhbHNlLCBzdHJpbmcgcmVhc29uID0gXCJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxpbnQ+KEVudW1lcmF0ZUtpZXJzdGVhZEVkZ2VJbmRpY2VzKGtub3dsZWRnZSwgYm9hcmQsIGVuZm9yY2VEZWdyZWVSZXF1aXJlbWVudCwgcmVhc29uKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gRW51bWVyYXRlS2llcnN0ZWFkRWRnZUluZGljZXMoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIGJvb2wgZW5mb3JjZURlZ3JlZVJlcXVpcmVtZW50ID0gZmFsc2UsIHN0cmluZyByZWFzb24gPSBcIlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuR3JhcGg7XHJcbiAgICAgICAgICAgIHZhciBpbnRlcm5hbFZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxpbnQ+KGcuVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBnLkRlZ3JlZSh2KSA+PSAyKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZWRnZUluZGV4IGluIGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5FZGdlSW5kaWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuRWRnZXNbZWRnZUluZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChpbnRlcm5hbFZlcnRpY2VzLkNvbnRhaW5zKGUuSXRlbTEpICYmIGludGVybmFsVmVydGljZXMuQ29udGFpbnMoZS5JdGVtMikpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKElzS2llcnN0ZWFkKGtub3dsZWRnZSwgYm9hcmQsIGVkZ2VJbmRleCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga25vd2xlZGdlW2JvYXJkLlRlbXBsYXRlLlZhbHVlXVtib2FyZC5Db2xvckNvdW50XS5BZGRXaW4oYm9hcmQsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGVkZ2VJbmRleDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzS2llcnN0ZWFkKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBpbnQgZWRnZUluZGV4LCBib29sIGVuZm9yY2VEZWdyZWVSZXF1aXJlbWVudCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG9yZGVyaW5nIGluIGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5Db25uZWN0ZWRPcmRlcmluZ3MuVmFsdWVba25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkVkZ2VzW2VkZ2VJbmRleF1dKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGVudWx0aW1hdGUgPSBvcmRlcmluZ1tvcmRlcmluZy5Db3VudCAtIDJdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVuZm9yY2VEZWdyZWVSZXF1aXJlbWVudCAmJiBib2FyZC5TdGFja3NbcGVudWx0aW1hdGVdLlBvcHVsYXRpb25Db3VudCgpIDw9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaC5EZWdyZWUocGVudWx0aW1hdGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChJc0tpZXJzdGVhZChrbm93bGVkZ2UsIGJvYXJkLCBlZGdlSW5kZXgsIG9yZGVyaW5nKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzS2llcnN0ZWFkKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBpbnQgZWRnZUluZGV4LCBMaXN0PGludD4gb3JkZXJpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZ24gPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZ24uTGluZUdyYXBoLklzQ2hvb3NhYmxlKEVudW1lcmFibGUuUmFuZ2UoMCwgZ24uTGluZUdyYXBoLk4pLlNlbGVjdDxsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGxvbmc+KShlID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlID09IGVkZ2VJbmRleClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVkZ2UgPSBnbi5FZGdlc1tlXTtcclxuICAgICAgICAgICAgICAgIHZhciBqID0gTWF0aC5NYXgob3JkZXJpbmcuSW5kZXhPZihlZGdlLkl0ZW0xKSwgb3JkZXJpbmcuSW5kZXhPZihlZGdlLkl0ZW0yKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJpb3JTdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGxvbmc+KGJvYXJkLlN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBpbnQsIGJvb2w+KSgoc3RhY2ssIGkpID0+IG9yZGVyaW5nLkluZGV4T2YoaSkgPCBqKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbG9uZyBhbGxvd2VkTGlzdCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IGtub3dsZWRnZS5HZXRFZGdlQ29sb3JMaXN0KGJvYXJkLCBlKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhbHBoYSBpbiBsaXN0LkVudW1lcmF0ZUJpdHMoKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTWV0YUtub3dsZWRnZS5kX0goYWxwaGEsIHByaW9yU3RhY2tzKSAlIDIgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dlZExpc3QgPSBhbGxvd2VkTGlzdC5TZXRCaXQoYWxwaGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBhbGxvd2VkTGlzdDtcclxuICAgICAgICAgICAgfSkpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgS25vd2xlZGdlVHJlZSA6IFRyZWU8S25vd2xlZGdlVHJlZT5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+IFN3YXAgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFR1cGxlPGludCwgaW50PiBDb2xvclBhaXIgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgQm9hcmQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTm90ZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBOdW1iZXIgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgS25vd2xlZGdlVHJlZSBBZGRDaGlsZChUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4gc3dhcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IG5ldyBLbm93bGVkZ2VUcmVlKCkgeyBTd2FwID0gc3dhcCB9O1xyXG4gICAgICAgICAgICBBZGRDaGlsZChjaGlsZCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFJlZHVjdGlvbkFuYWx5emVyIDogSUJvYXJkQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlYXNvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIFwicmVkdWNpYmxlXCI7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzS25vd2xlZGdlRGVwZW5kZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaDtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5FZGdlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBNYXRoLk1pbihlLkl0ZW0xLCBlLkl0ZW0yKTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gTWF0aC5NYXgoZS5JdGVtMSwgZS5JdGVtMik7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbW1vbiA9IGJvYXJkLlN0YWNrc1t4XSAmIGJvYXJkLlN0YWNrc1t5XTtcclxuICAgICAgICAgICAgICAgIHZhciBzdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxsb25nPihib2FyZC5TdGFja3MpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYyBpbiBjb21tb24uRW51bWVyYXRlQml0cygpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrc1t4XSA9IGJvYXJkLlN0YWNrc1t4XS5DbGVhckJpdChjKTtcclxuICAgICAgICAgICAgICAgICAgICBzdGFja3NbeV0gPSBib2FyZC5TdGFja3NbeV0uQ2xlYXJCaXQoYyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnLkRlZ3JlZUNvbmRpdGlvbihzdGFja3MsIGJvYXJkLlBvdCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGludD4pKFggPT4gWC5Db250YWlucyh4KSAmJiBYLkNvbnRhaW5zKHkpID8gMSA6IDApKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF0uQWRkV2luKGJvYXJkLCBzdHJpbmcuRm9ybWF0KFwiY29sb3IgezB9ezF9IHdpdGggezJ9XCIsIHggKyAxLCB5ICsgMSwgYykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlO1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQWxnb3JpdGhtcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2xpbU1pbmQgOiBJTWluZFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBib29sIFN0b3BBbmFseXNpc09uQnJlYWtlcldpbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgTmVhcmx5Q29sb3JhYmxlT25seSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgU3VwZXJhYnVuZGFudE9ubHkgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWluUG90IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE1heFBvdCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIEJvYXJkIEJyZWFrZXJXb25Cb2FyZCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgVG90YWxQb3NpdGlvbnMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIEtub3dsZWRnZSBLbm93bGVkZ2UgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIENvbG9yaW5nQW5hbHl6ZXIgQ29sb3JpbmdBbmFseXplciB7Z2V0OyBzZXQ7fVxyXG4gICAgICAgIFNsaW1Td2FwQW5hbHl6ZXIgU3dhcEFuYWx5emVyIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBEaWN0aW9uYXJ5PGludCwgQm9hcmQ+IEJvYXJkTG9va3VwIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBEaWN0aW9uYXJ5PEJvYXJkLCBpbnQ+IEJvYXJkSURMb29rdXAgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIExpc3Q8aW50PiBSZW1haW5pbmdCb2FyZElEcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgU29ydGVkSW50TGlzdCBXb25Cb2FyZElEcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgaW50IE5leHRCb2FyZElEIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFNsaW1NaW5kKEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdXBlcmFidW5kYW50T25seSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBOZWFybHlDb2xvcmFibGVPbmx5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIE1heFBvdCA9IE1ldGFLbm93bGVkZ2UuSW5maW5pdHk7XHJcbiAgICAgICAgICAgIEtub3dsZWRnZSA9IG5ldyBLbm93bGVkZ2UoZyk7XHJcblxyXG4gICAgICAgICAgICBDb2xvcmluZ0FuYWx5emVyID0gbmV3IENvbG9yaW5nQW5hbHl6ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoVGVtcGxhdGUgdGVtcGxhdGUsIEFjdGlvbjxUdXBsZTxzdHJpbmcsIGludD4+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJvYXJkTG9va3VwID0gbmV3IERpY3Rpb25hcnk8aW50LCBCb2FyZD4oKTtcclxuICAgICAgICAgICAgQm9hcmRJRExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PEJvYXJkLCBpbnQ+KCk7XHJcbiAgICAgICAgICAgIFdvbkJvYXJkSURzID0gbmV3IFNvcnRlZEludExpc3QoKTtcclxuICAgICAgICAgICAgU3dhcEFuYWx5emVyID0gbmV3IFNsaW1Td2FwQW5hbHl6ZXIoS25vd2xlZGdlLCBCb2FyZExvb2t1cCwgQm9hcmRJRExvb2t1cCk7XHJcblxyXG4gICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWluaW11bUNvbG9yQ291bnQgPSBNYXRoLk1heChNaW5Qb3QsIHRlbXBsYXRlLlNpemVzLk1heCgpKTtcclxuICAgICAgICAgICAgdmFyIG1heGltdW1Db2xvckNvdW50ID0gTWF0aC5NaW4oTWF4UG90LCB0ZW1wbGF0ZS5TaXplcy5TdW0oKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm91bmRBdExlYXN0T25lQm9hcmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yQ291bnQgaW4gTWV0YUtub3dsZWRnZS5JbnRlcnZhbChtaW5pbXVtQ29sb3JDb3VudCwgbWF4aW11bUNvbG9yQ291bnQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBHZW5lcmF0ZUFsbEJvYXJkcyh0ZW1wbGF0ZSwgY29sb3JDb3VudCwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5UdXBsZTxzdHJpbmcsIGludD4+KXByb2dyZXNzKTtcclxuICAgICAgICAgICAgICAgIGlmIChmb3VuZEF0TGVhc3RPbmVCb2FyZCAmJiBCb2FyZExvb2t1cC5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIFRvdGFsUG9zaXRpb25zID0gQm9hcmRMb29rdXAuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEF0TGVhc3RPbmVCb2FyZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBSZW1haW5pbmdCb2FyZElEcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQm9hcmRMb29rdXAuS2V5cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJyZWFrZXJXaW4gPSAhQW5hbHl6ZSgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLlR1cGxlPHN0cmluZywgaW50Pj4pcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJyZWFrZXJXaW4gJiYgU3RvcEFuYWx5c2lzT25CcmVha2VyV2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBLbm93bGVkZ2VbdGVtcGxhdGVdLlByb21vdGUoY29sb3JDb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KEtub3dsZWRnZVt0ZW1wbGF0ZV0uTG9zdEJvYXJkcykgPD0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQW5hbHl6ZShBY3Rpb248VHVwbGU8c3RyaW5nLCBpbnQ+PiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgd2luTGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciB0b3RhbEJvYXJkcyA9IFJlbWFpbmluZ0JvYXJkSURzLkNvdW50O1xyXG4gICAgICAgICAgICB2YXIgbGFzdFAgPSAtMTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBSZW1haW5pbmdCb2FyZElEcy5Db3VudCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBSZW1haW5pbmdCb2FyZElEc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IEJvYXJkTG9va3VwW2lkXTtcclxuICAgICAgICAgICAgICAgIGlmIChDb2xvcmluZ0FuYWx5emVyLkFuYWx5emUoS25vd2xlZGdlLCBiKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBSZW1haW5pbmdCb2FyZElEcy5SZW1vdmVBdChpKTtcclxuICAgICAgICAgICAgICAgICAgICBXb25Cb2FyZElEcy5BZGQoaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gMTAwICogKHRvdGFsQm9hcmRzIC0gUmVtYWluaW5nQm9hcmRJRHMuQ291bnQpIC8gdG90YWxCb2FyZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwID4gbGFzdFApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUdXBsZTxzdHJpbmcsIGludD4oXCJGaW5kaW5nIGFsbCBjb2xvcmFibGUgcG9zaXRpb25zLi4uXCIsIHApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQID0gcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2hpbGUgKFJlbWFpbmluZ0JvYXJkSURzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2luTGVuZ3RoKys7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gUmVtYWluaW5nQm9hcmRJRHMuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IFJlbWFpbmluZ0JvYXJkSURzLkNvdW50IC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gUmVtYWluaW5nQm9hcmRJRHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiID0gQm9hcmRMb29rdXBbaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChTd2FwQW5hbHl6ZXIuQW5hbHl6ZShpZCwgV29uQm9hcmRJRHMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVtYWluaW5nQm9hcmRJRHMuUmVtb3ZlQXQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFdvbkJvYXJkSURzLkFkZChpZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSAxMDAgKiAodG90YWxCb2FyZHMgLSBSZW1haW5pbmdCb2FyZElEcy5Db3VudCkgLyB0b3RhbEJvYXJkcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwID4gbGFzdFApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFR1cGxlPHN0cmluZywgaW50PihzdHJpbmcuRm9ybWF0KFwiRmluZGluZyBhbGwgezB9IG1vdmUgd2lucy4uLlwiLCB3aW5MZW5ndGgpLCBwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFAgPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChSZW1haW5pbmdCb2FyZElEcy5Db3VudCA9PSBjb3VudClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaWQgaW4gUmVtYWluaW5nQm9hcmRJRHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IEJvYXJkTG9va3VwW2lkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgS25vd2xlZGdlW2IuVGVtcGxhdGUuVmFsdWVdW2IuQ29sb3JDb3VudF0uQWRkTG9zcyhiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBnID0gS25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkdyYXBoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmVhcmx5Q29sb3JhYmxlID0gRW51bWVyYWJsZS5SYW5nZSgwLCBLbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuTGluZUdyYXBoLk4pLkFsbCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShlID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGludD4oUmVtYWluaW5nQm9hcmRJRHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaWQgPT4gQ29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2UsIEJvYXJkTG9va3VwW2lkXSwgZSkpKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZWFybHlDb2xvcmFibGUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGludD4oUmVtYWluaW5nQm9hcmRJRHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaWQgPT4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBCb2FyZExvb2t1cFtpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGcuRGVncmVlQ29uZGl0aW9uKGIpICYmIENvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoS25vd2xlZGdlLCBiLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPikoaWQgPT4gQm9hcmRMb29rdXBbaWRdKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLkZpcnN0T3JEZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQnJlYWtlcldvbkJvYXJkID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBCb2FyZExvb2t1cFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oUmVtYWluaW5nQm9hcmRJRHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaWQgPT4gQ29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2UsIEJvYXJkTG9va3VwW2lkXSwgMCkpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBHZW5lcmF0ZUFsbEJvYXJkcyhUZW1wbGF0ZSB0ZW1wbGF0ZSwgaW50IGNvbG9yQ291bnQsIEFjdGlvbjxUdXBsZTxzdHJpbmcsIGludD4+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBib2FyZHMgPSBuZXcgSGFzaFNldDxCb2FyZD4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgdGVtcGxhdGUuU2l6ZXMuQ291bnQpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgcG90U2V0ID0gRW51bWVyYWJsZS5SYW5nZSgwLCBjb2xvckNvdW50KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHBvdCA9IHBvdFNldC5Ub0ludDY0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZml4ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGludCxpbnQ+KHZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBNYXRoLkFicyh0ZW1wbGF0ZS5TaXplc1t2XSAtIGNvbG9yQ291bnQgLyAyKSkpLkZpcnN0KCk7XHJcbiAgICAgICAgICAgIHZhciBsYXN0UCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudCA9IDA7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGludCxsb25nPih2ZXJ0aWNlcywxTCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50LCBsb25nPikoKHgsIHYpID0+IFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2ID09IGZpeClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4ICogTGlzdFV0aWxpdHkuQmlub21pYWxDb2VmZmljaWVudChwb3RTZXQuQ291bnQsIHRlbXBsYXRlLlNpemVzW3ZdKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhc3NpZ25tZW50U2V0cyBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+Pih2ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikodiA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodiA9PSBmaXgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRW5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8aW50Pihwb3RTZXQsdGVtcGxhdGUuU2l6ZXNbdl0pLlRvTGlzdCgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50Pihwb3RTZXQsIHRlbXBsYXRlLlNpemVzW3ZdKTtcclxuICAgICAgICAgICAgfSkpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNldHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYXNzaWdubWVudFNldHMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvdGFsQ29sb3JzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4oc2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+Pikoc2V0ID0+IHNldCkpLkRpc3RpbmN0KCkuQ291bnQoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0b3RhbENvbG9ycyA8IGNvbG9yQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGxvbmc+KHNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGxvbmc+KShsaXN0ID0+IGxpc3QuVG9JbnQ2NCgpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFN1cGVyYWJ1bmRhbnRPbmx5ICYmICFLbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuR3JhcGguRGVncmVlQ29uZGl0aW9uKHN0YWNrcywgcG90KSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYm9hcmQgPSBuZXcgQm9hcmQoc3RhY2tzLCBwb3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IGJvYXJkcy5Db3VudDtcclxuICAgICAgICAgICAgICAgIGJvYXJkcy5BZGQoYm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChib2FyZHMuQ291bnQgPiBjb3VudClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBCb2FyZExvb2t1cFtOZXh0Qm9hcmRJRF0gPSBib2FyZDtcclxuICAgICAgICAgICAgICAgICAgICBCb2FyZElETG9va3VwW2JvYXJkXSA9IE5leHRCb2FyZElEO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBOZXh0Qm9hcmRJRCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gKGludCkoMTAwICogY3VycmVudCAvIHRvdGFsKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocCA+IGxhc3RQKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFR1cGxlPHN0cmluZywgaW50PihcIkZpbmRpbmcgYWxsIHBvc2l0aW9ucy4uLlwiLCBwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQID0gcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY3VycmVudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR2FtZVRyZWUgOiBUcmVlPEdhbWVUcmVlPlxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1Cb2FyZCBCb2FyZCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNDb2xvcmFibGUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzU3VwZXJhYnVuZGFudCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNGaXhlcldpbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBHYW1lVHJlZUluZGV4IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IFNhbWVBc0luZGV4IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgQnJlYWtlckNob2ljZUluZm8gSW5mbyB7Z2V0OyBzZXQ7fVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRDaGlsZChHYW1lVHJlZSB0cmVlLCBCcmVha2VyQ2hvaWNlSW5mbyBpbmZvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHJlZS5JbmZvID0gaW5mbztcclxuICAgICAgICAgICAgQWRkQ2hpbGQodHJlZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnZyA9IG9iaiBhcyBHYW1lVHJlZTtcclxuICAgICAgICAgICAgaWYgKGdnID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZ2cuQm9hcmQuRXF1YWxzKEJvYXJkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJvYXJkLkdldEhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR2FtZVRyZWVJbmZvIDogTGlzdDxCcmVha2VyQ2hvaWNlSW5mbz5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGQoTGlzdDx1bG9uZz4gYnJlYWtlckNob2ljZSwgaW50IGksIGludCBqLCB1bG9uZyBmaXhlclJlc3BvbnNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQWRkKG5ldyBCcmVha2VyQ2hvaWNlSW5mbygpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFBhcnRpdGlvbiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihicmVha2VyQ2hvaWNlLChnbG9iYWw6OlN5c3RlbS5GdW5jPHVsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGNob2ljZSA9PiBjaG9pY2UuVG9TZXQoKSkpLlRvTGlzdCgpLFxyXG4gICAgICAgICAgICAgICAgQWxwaGEgPSBpLFxyXG4gICAgICAgICAgICAgICAgQmV0YSA9IGosXHJcbiAgICAgICAgICAgICAgICBSZXNwb25zZSA9IGZpeGVyUmVzcG9uc2UsXHJcbiAgICAgICAgICAgICAgICBTd2FwVmVydGljZXMgPSBmaXhlclJlc3BvbnNlLlRvU2V0KClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBCcmVha2VyQ2hvaWNlSW5mb1xyXG4gICAge1xyXG4gICAgICAgICBwdWJsaWMgaW50IEFscGhhIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgcHVibGljIGludCBCZXRhIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBQYXJ0aXRpb24geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICBwdWJsaWMgdWxvbmcgUmVzcG9uc2UgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IFN3YXBWZXJ0aWNlcyB7IGdldDsgc2V0OyB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHcmVlZHlXaW5GaWx0ZXIgOiBJV2luRmlsdGVyXHJcbiAgICB7XHJcbiAgICAgICAgU3VwZXJTbGltU3dhcEFuYWx5emVyIF9zd2FwQW5hbHl6ZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmVlZHlXaW5GaWx0ZXIoU3VwZXJTbGltU3dhcEFuYWx5emVyIHN3YXBBbmFseXplcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9zd2FwQW5hbHl6ZXIgPSBzd2FwQW5hbHl6ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgSUVudW1lcmFibGU8aW50PiBGaWx0ZXIoTGlzdDxTdXBlclNsaW1Cb2FyZD4gUiwgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4gVylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihSLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShiID0+IF9zd2FwQW5hbHl6ZXIuQW5hbHl6ZShiLCBXKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnNcclxue1xyXG4gICAgcHVibGljIGFic3RyYWN0IGNsYXNzIFBlcm11dGF0aW9uQXdhcmVQcm9vZkJ1aWxkZXIgOiBQcm9vZkJ1aWxkZXJcclxuICAgIHtcclxuICAgICAgICBwcm90ZWN0ZWQgRGljdGlvbmFyeTxTdXBlclNsaW1Cb2FyZCwgTGlzdDxUdXBsZTxQZXJtdXRhdGlvbiwgU3VwZXJTbGltQm9hcmQ+Pj4gX3Blcm11dGF0aW9uTGlua2VkO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBwdWJsaWMgUGVybXV0YXRpb25Bd2FyZVByb29mQnVpbGRlcihTdXBlclNsaW1NaW5kIG1pbmQsIGJvb2wgdXNlUGVybXV0YXRpb25zID0gZmFsc2UpXHJcbiAgICAgICAgICAgIDogYmFzZShtaW5kLCB1c2VQZXJtdXRhdGlvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIEV4dHJhY3RDYXNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDYXNlcyA9IG5ldyBMaXN0PFByb29mQ2FzZT4oKTtcclxuXHJcbiAgICAgICAgICAgIF9wZXJtdXRhdGlvbkxpbmtlZCA9IG5ldyBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBMaXN0PFR1cGxlPFBlcm11dGF0aW9uLCBTdXBlclNsaW1Cb2FyZD4+PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIE1pbmQuQ29sb3JhYmxlQm9hcmRzWzBdLlN0YWNrcy5WYWx1ZS5MZW5ndGgpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgcGVybXV0YXRpb25zID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24+KFBlcm11dGF0aW9uLkVudW1lcmF0ZUFsbChpbmRpY2VzLkNvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FzZU51bWJlciA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JhYmxlQ2FzZSA9IG5ldyBQcm9vZkNhc2UoTWluZCwgMCwgTWluZC5Db2xvcmFibGVCb2FyZHMpO1xyXG4gICAgICAgICAgICBDYXNlcy5BZGQoY29sb3JhYmxlQ2FzZSk7XHJcbiAgICAgICAgICAgIGNhc2VOdW1iZXIrKztcclxuXHJcbiAgICAgICAgICAgIHZhciByZW1haW5pbmdCb2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihNaW5kLk5vbkNvbG9yYWJsZUJvYXJkcyxNaW5kLkJyZWFrZXJXb25Cb2FyZHMpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgd29uQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oTWluZC5Db2xvcmFibGVCb2FyZHMpO1xyXG4gICAgICAgICAgICB3aGlsZSAocmVtYWluaW5nQm9hcmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb29mQ2FzZSA9IG5ldyBQcm9vZkNhc2UoTWluZCwgY2FzZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICBDYXNlcy5BZGQocHJvb2ZDYXNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYWRkZWRSb290Qm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWRkZWRCb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBib2FyZCBpbiByZW1haW5pbmdCb2FyZHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGVkQm9hcmRzLkNvbnRhaW5zKGJvYXJkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmVlSW5mbyA9IE1pbmQuR2V0V2luVHJlZUluZm8oYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4pKGJjID0+IG5ldyBTdXBlclNsaW1Cb2FyZChib2FyZC5fdHJhY2UsIGJjLkFscGhhLCBiYy5CZXRhLCBiYy5SZXNwb25zZSwgYm9hcmQuX3N0YWNrQ291bnQpKSkuRGlzdGluY3QoKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihjaGlsZEJvYXJkcyx3b25Cb2FyZHMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRSb290Qm9hcmRzLkFkZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkQm9hcmRzLkFkZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wZXJtdXRhdGlvbkxpbmtlZFtib2FyZF0gPSBuZXcgTGlzdDxUdXBsZTxQZXJtdXRhdGlvbiwgU3VwZXJTbGltQm9hcmQ+PigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFVzZVBlcm11dGF0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHAgaW4gcGVybXV0YXRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYiA9IGJvYXJkLlBlcm11dGUocCwgaW5kaWNlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvbkJvYXJkcy5Db250YWlucyhwYikgfHwgYWRkZWRCb2FyZHMuQ29udGFpbnMocGIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsb3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNiIGluIGNoaWxkQm9hcmRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3b25Cb2FyZHMuQ29udGFpbnMoY2IuUGVybXV0ZShwLCBpbmRpY2VzKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGVybXV0YXRpb25MaW5rZWRbYm9hcmRdLkFkZChuZXcgVHVwbGU8UGVybXV0YXRpb24sIFN1cGVyU2xpbUJvYXJkPihwLCBwYikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEJvYXJkcy5BZGQocGIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYm9hcmQgaW4gYWRkZWRSb290Qm9hcmRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb29mQ2FzZS5BZGRCb2FyZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJvYXJkIGluIGFkZGVkQm9hcmRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvbkJvYXJkcy5BZGQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbWFpbmluZ0JvYXJkcy5SZW1vdmUoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNhc2VOdW1iZXIrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKE1pbmQuQnJlYWtlcldvbkJvYXJkcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBncm91cCBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkdyb3VwQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxib29sPihNaW5kLkJyZWFrZXJXb25Cb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gTWluZC5Jc1N1cGVyYWJ1bmRhbnQoYikpKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbG9zdENhc2UgPSBuZXcgUHJvb2ZDYXNlKE1pbmQsIGNhc2VOdW1iZXIsIGdyb3VwLlRvTGlzdCgpKSB7IEJyZWFrZXJXaW4gPSB0cnVlLCBTdXBlcmFidW5kYW50ID0gZ3JvdXAuS2V5IH07XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FzZXMuQWRkKGxvc3RDYXNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIGludCBHZXRIYW5kbGVkQ2FzZU51bWJlcihTdXBlclNsaW1Cb2FyZCBiLCBCcmVha2VyQ2hvaWNlSW5mbyBiYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IFN1cGVyU2xpbUJvYXJkKGIuX3RyYWNlLCBiYy5BbHBoYSwgYmMuQmV0YSwgYmMuUmVzcG9uc2UsIGIuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICBpZiAoQ2FzZXNbMF0uQm9hcmRzLkNvbnRhaW5zKGNoaWxkQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuSW5kaWNlc1doZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLlByb29mQ2FzZT4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ta2lwPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLlByb29mQ2FzZT4oQ2FzZXMsMSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuUHJvb2ZDYXNlLCBib29sPikoY2MgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oY2MuQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4+KShiYiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlVuaW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KG5ld1tdIHsgYmIgfSxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oX3Blcm11dGF0aW9uTGlua2VkW2JiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KSh0dXAgPT4gdHVwLkl0ZW0yKSkpKSkuQ29udGFpbnMoY2hpbGRCb2FyZCkpKSkgKyAyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNtYXJ0RmlsdGVyIDogSVdpbkZpbHRlclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBJRW51bWVyYWJsZTxpbnQ+IEZpbHRlcihMaXN0PFN1cGVyU2xpbUJvYXJkPiBSLCBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPiBXKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxDb2xvclBhaXJPdXRjb21lPiBBbmFseXplKFN1cGVyU2xpbUJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yUGFpcnMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYm9hcmQuX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgYm9hcmQuX2xlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGFpcnMuQWRkKG5ldyBUdXBsZTxpbnQsIGludD4oaSwgaikpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4saW50Pihjb2xvclBhaXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikoY3AgPT4gKGJvYXJkLl90cmFjZVtjcC5JdGVtMV0gXiBib2FyZC5fdHJhY2VbY3AuSXRlbTJdKS5Qb3B1bGF0aW9uQ291bnQoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkNvbG9yUGFpck91dGNvbWU+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Db2xvclBhaXJPdXRjb21lPikoY3AgPT4gbmV3IENvbG9yUGFpck91dGNvbWUoKSB7IENvbG9ycyA9IGNwLCBGaXhlck91dGNvbWVzID0gQW5hbHl6ZUNvbG9yUGFpcihjcCwgYm9hcmQpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPEZpeGVyT3V0Y29tZT4gQW5hbHl6ZUNvbG9yUGFpcihUdXBsZTxpbnQsIGludD4gY29sb3JzLCBTdXBlclNsaW1Cb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gY29sb3JzLkl0ZW0xO1xyXG4gICAgICAgICAgICB2YXIgaiA9IGNvbG9ycy5JdGVtMjtcclxuXHJcbiAgICAgICAgICAgIHZhciB4ID0gYm9hcmQuX3RyYWNlW2ldO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGJvYXJkLl90cmFjZVtqXTtcclxuICAgICAgICAgICAgdmFyIHN3YXBwYWJsZSA9IHggXiB5O1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJyZWFrZXJDaG9pY2UgaW4gR2V0QnJlYWtlckNob2ljZXMoc3dhcHBhYmxlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgR2V0Rml4ZXJSZXNwb25zZXMoYnJlYWtlckNob2ljZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2VzID0gRW51bWVyYWJsZS5SYW5nZSgxLCBfZml4ZXJSZXNwb25zZUNvdW50IC0gMSkuU2VsZWN0PHVsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIHVsb25nPikoayA9PiBfZml4ZXJSZXNwb25zZXNba10pKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzx1bG9uZywgYm9vbD4pKGZyID0+IGZyLlBvcHVsYXRpb25Db3VudCgpIDw9IDEpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IEZpeGVyT3V0Y29tZSgpIHsgQnJlYWtlckNob2ljZSA9IGJyZWFrZXJDaG9pY2UsIEV4aXRzID0gcmVzcG9uc2VzLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzx1bG9uZywgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4pKHJlc3BvbnNlID0+IG5ldyBTdXBlclNsaW1Cb2FyZChib2FyZC5fdHJhY2UsIGksIGosIHJlc3BvbnNlLCBib2FyZC5fc3RhY2tDb3VudCkpKS5Ub0xpc3QoKSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIGd1dHNcclxuICAgICAgICB1bG9uZ1tdIF9maXhlclJlc3BvbnNlcyA9IG5ldyB1bG9uZ1s4MTkyXTtcclxuICAgICAgICBpbnQgX2ZpeGVyUmVzcG9uc2VDb3VudDtcclxuICAgICAgICBEaWN0aW9uYXJ5PHVsb25nLCBMaXN0PExpc3Q8dWxvbmc+Pj4gX2JyZWFrZXJDaG9pY2VzQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTx1bG9uZywgTGlzdDxMaXN0PHVsb25nPj4+KCk7XHJcbiAgICAgICAgdm9pZCBHZXRGaXhlclJlc3BvbnNlcyhMaXN0PHVsb25nPiBwb3NzaWJsZU1vdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VDb3VudCA9IDEgPDwgcG9zc2libGVNb3Zlcy5Db3VudDtcclxuICAgICAgICAgICAgdmFyIHRhYmxlTGVuZ3RoID0gX2ZpeGVyUmVzcG9uc2VzLkxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKHRhYmxlTGVuZ3RoIDw9IF9maXhlclJlc3BvbnNlQ291bnQpXHJcbiAgICAgICAgICAgICAgICB0YWJsZUxlbmd0aCAqPSAyO1xyXG4gICAgICAgICAgICBpZiAodGFibGVMZW5ndGggPiBfZml4ZXJSZXNwb25zZXMuTGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VzID0gbmV3IHVsb25nW3RhYmxlTGVuZ3RoXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdWJzZXQgPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAoc3Vic2V0IDwgX2ZpeGVyUmVzcG9uc2VDb3VudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gMFVMO1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBzdWJzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSB8PSBwb3NzaWJsZU1vdmVzW0ludDMyVXNhZ2UuR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KV07XHJcblxyXG4gICAgICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VzW3N1YnNldF0gPSByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIHN1YnNldCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PExpc3Q8dWxvbmc+PiBHZXRCcmVha2VyQ2hvaWNlcyh1bG9uZyBzd2FwcGFibGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PExpc3Q8dWxvbmc+PiBjaG9pY2VzO1xyXG4gICAgICAgICAgICBpZiAoIV9icmVha2VyQ2hvaWNlc0NhY2hlLlRyeUdldFZhbHVlKHN3YXBwYWJsZSwgb3V0IGNob2ljZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0cyA9IHN3YXBwYWJsZS5HZXRCaXRzKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydGl0aW9ucyA9IEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuR2V0UGFydGl0aW9ucyhiaXRzLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIGNob2ljZXMgPSBuZXcgTGlzdDxMaXN0PHVsb25nPj4ocGFydGl0aW9ucy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBwYXJ0aXRpb25zKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaG9pY2UgPSBuZXcgTGlzdDx1bG9uZz4ocGFydGl0aW9uLkNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjaG9pY2VzLkFkZChjaG9pY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydCBpbiBwYXJ0aXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IDBVTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gcGFydClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggfD0gYml0c1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZS5BZGQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9icmVha2VyQ2hvaWNlc0NhY2hlW3N3YXBwYWJsZV0gPSBjaG9pY2VzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hvaWNlcztcclxuICAgICAgICB9IFxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN1cGVyU2xpbU1pbmQgOiBJTWluZFxyXG4gICAge1xyXG4gICAgICAgIExpc3Q8U3VwZXJTbGltQm9hcmQ+IF9yZW1haW5pbmdCb2FyZHM7XHJcbiAgICAgICAgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4gX3dvbkJvYXJkcztcclxuICAgICAgICBTdXBlclNsaW1Td2FwQW5hbHl6ZXIgX3N3YXBBbmFseXplcjtcclxuICAgICAgICBTdXBlclNsaW1Db2xvcmluZ0FuYWx5emVyIF9jb2xvcmluZ0FuYWx5emVyO1xyXG4gICAgICAgIEdyYXBoIF9ncmFwaDtcclxuICAgICAgICBHcmFwaCBfbGluZUdyYXBoO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PFR1cGxlPGludCwgaW50Pj4gX2VkZ2VzO1xyXG4gICAgICAgIGludCBfdG90YWxQb3NpdGlvbnM7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWluUG90IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE1heFBvdCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSGFzTm9uU3VwZXJhYnVuZGFudEJvYXJkVGhhdElzTmVhcmx5Q29sb3JhYmxlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgVG90YWxQb3NpdGlvbnMgeyBnZXQgeyByZXR1cm4gX3RvdGFsUG9zaXRpb25zOyB9IH1cclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltQm9hcmQgQnJlYWtlcldvbkJvYXJkIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gQm9hcmRDb3VudHMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBCb2FyZENvdW50c0xpc3QgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgT25seUNvbnNpZGVyTmVhcmx5Q29sb3JhYmxlQm9hcmRzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBFeGNsdWRlTm9uTmVhcmx5Q29sb3JhYmxlTm9uU3VwZXJhYnVuZGFudEJvYXJkcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBNaXNzaW5nRWRnZUluZGV4IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBTdXBlcmFidW5kYW50T25seSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgVGhpbmtIYXJkZXIgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIFBlcmZvcm1Db21wbGV0ZUFuYWx5c2lzIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbUNvbG9yaW5nQW5hbHl6ZXIgQ29sb3JpbmdBbmFseXplciB7IGdldCB7IHJldHVybiBfY29sb3JpbmdBbmFseXplcjsgfSB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8U3VwZXJTbGltQm9hcmQ+IE5vbkNvbG9yYWJsZUJvYXJkcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxTdXBlclNsaW1Cb2FyZD4gQ29sb3JhYmxlQm9hcmRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFN1cGVyU2xpbUJvYXJkPiBCcmVha2VyV29uQm9hcmRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPiBGaXhlcldvbkJvYXJkcyB7IGdldCB7IHJldHVybiBfd29uQm9hcmRzOyB9IH1cclxuICAgICAgICBwdWJsaWMgRGljdGlvbmFyeTxpbnQsIExpc3Q8U3VwZXJTbGltQm9hcmQ+PiBCb2FyZHNPZkRlcHRoIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgRXh0cmFQc2kgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIElXaW5GaWx0ZXIgV2luRmlsdGVyIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbU1pbmQoR3JhcGggZywgYm9vbCBwcm9vZkZpbmRpbmdNb2RlID0gZmFsc2UsIGJvb2wgd2Vha2x5Rml4YWJsZSA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2dyYXBoID0gZztcclxuICAgICAgICAgICAgQnVpbGRMaW5lR3JhcGgoKTtcclxuXHJcbiAgICAgICAgICAgIF9jb2xvcmluZ0FuYWx5emVyID0gbmV3IFN1cGVyU2xpbUNvbG9yaW5nQW5hbHl6ZXIoX2xpbmVHcmFwaCwgR2V0RWRnZUNvbG9yTGlzdCk7XHJcbiAgICAgICAgICAgIF9zd2FwQW5hbHl6ZXIgPSBuZXcgU3VwZXJTbGltU3dhcEFuYWx5emVyKGcuTiwgcHJvb2ZGaW5kaW5nTW9kZSwgcHJvb2ZGaW5kaW5nTW9kZSB8fCB3ZWFrbHlGaXhhYmxlKTtcclxuICAgICAgICAgICAgX3dvbkJvYXJkcyA9IG5ldyBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcblxyXG4gICAgICAgICAgICBNaXNzaW5nRWRnZUluZGV4ID0gLTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKFRlbXBsYXRlIHRlbXBsYXRlLCBBY3Rpb248VHVwbGU8c3RyaW5nLCBpbnQ+PiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfd29uQm9hcmRzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIF9yZW1haW5pbmdCb2FyZHMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgQm9hcmRDb3VudHNMaXN0ID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBudWxsO1xyXG4gICAgICAgICAgICBOb25Db2xvcmFibGVCb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgQ29sb3JhYmxlQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChXaW5GaWx0ZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIFdpbkZpbHRlciA9IG5ldyBHcmVlZHlXaW5GaWx0ZXIoX3N3YXBBbmFseXplcik7XHJcblxyXG4gICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWluaW11bUNvbG9yQ291bnQgPSBNYXRoLk1heChNaW5Qb3QsIHRlbXBsYXRlLlNpemVzLk1heCgpKTtcclxuICAgICAgICAgICAgdmFyIG1heGltdW1Db2xvckNvdW50ID0gTWF0aC5NaW4oTWF4UG90LCB0ZW1wbGF0ZS5TaXplcy5TdW0oKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm91bmRBdExlYXN0T25lQm9hcmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGZpeGVyV2luID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yIChpbnQgY29sb3JDb3VudCA9IG1pbmltdW1Db2xvckNvdW50OyBjb2xvckNvdW50IDw9IG1heGltdW1Db2xvckNvdW50OyBjb2xvckNvdW50KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEdlbmVyYXRlQWxsQm9hcmRzKHRlbXBsYXRlLCBjb2xvckNvdW50LCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLlR1cGxlPHN0cmluZywgaW50Pj4pcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKE9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTWlzc2luZ0VkZ2VJbmRleCA+PSAwKVxyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiggICAgICAgICAgICAgICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShiID0+ICFOZWFybHlDb2xvcmFibGVGb3JFZGdlKGIsIE1pc3NpbmdFZGdlSW5kZXgpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oICAgICAgICAgICAgICAgICAgICAgICAgX3JlbWFpbmluZ0JvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBib29sPikoYiA9PiAhTmVhcmx5Q29sb3JhYmxlRm9yU29tZUVkZ2UoYikpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kQXRMZWFzdE9uZUJvYXJkICYmIF9yZW1haW5pbmdCb2FyZHMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBfdG90YWxQb3NpdGlvbnMgPSBfcmVtYWluaW5nQm9hcmRzLkNvdW50ICsgX3dvbkJvYXJkcy5Db3VudDtcclxuICAgICAgICAgICAgICAgIGZvdW5kQXRMZWFzdE9uZUJvYXJkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmaXhlcldpbiAmPSBBbmFseXplKChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8c3RyaW5nLCBpbnQ+Pilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmaXhlcldpbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQW5hbHl6ZShBY3Rpb248VHVwbGU8c3RyaW5nLCBpbnQ+PiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgd2luTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgdmFyIHRvdGFsQm9hcmRzID0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudDtcclxuICAgICAgICAgICAgdmFyIGxhc3RQID0gLTE7XHJcblxyXG4gICAgICAgICAgICBCb2FyZHNPZkRlcHRoID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PFN1cGVyU2xpbUJvYXJkPj4oKTtcclxuICAgICAgICAgICAgQm9hcmRDb3VudHMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIEJvYXJkQ291bnRzTGlzdC5BZGQoQm9hcmRDb3VudHMpO1xyXG4gICAgICAgICAgICBCb2FyZENvdW50cy5BZGQoX3JlbWFpbmluZ0JvYXJkcy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IF9yZW1haW5pbmdCb2FyZHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoX2NvbG9yaW5nQW5hbHl6ZXIuQW5hbHl6ZShiKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzLlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIF93b25Cb2FyZHMuQWRkKGIpO1xyXG4gICAgICAgICAgICAgICAgICAgIENvbG9yYWJsZUJvYXJkcy5BZGQoYik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSAxMDAgKiAodG90YWxCb2FyZHMgLSBfcmVtYWluaW5nQm9hcmRzLkNvdW50KSAvIHRvdGFsQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwID4gbGFzdFApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVHVwbGU8c3RyaW5nLCBpbnQ+KFwiRmluZGluZyBhbGwgY29sb3JhYmxlIHBvc2l0aW9ucy4uLlwiLCBwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQID0gcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEJvYXJkc09mRGVwdGhbd2luTGVuZ3RoXSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KF93b25Cb2FyZHMpO1xyXG4gICAgICAgICAgICBCb2FyZENvdW50cy5BZGQoX3JlbWFpbmluZ0JvYXJkcy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbm9uU3VwZXJhYnVuZGFudEJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IF9yZW1haW5pbmdCb2FyZHMuQ291bnQgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBfcmVtYWluaW5nQm9hcmRzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFJc1N1cGVyYWJ1bmRhbnQoYikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcyAmJiBNaXNzaW5nRWRnZUluZGV4ID49IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBIYXNOb25TdXBlcmFidW5kYW50Qm9hcmRUaGF0SXNOZWFybHlDb2xvcmFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFQZXJmb3JtQ29tcGxldGVBbmFseXNpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9yZW1haW5pbmdCb2FyZHMuUmVtb3ZlQXQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9uU3VwZXJhYnVuZGFudEJvYXJkcy5BZGQoYik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSAxMDAgKiAodG90YWxCb2FyZHMgLSBfcmVtYWluaW5nQm9hcmRzLkNvdW50KSAvIHRvdGFsQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwID4gbGFzdFApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVHVwbGU8c3RyaW5nLCBpbnQ+KFwiRmluZGluZyBhbGwgbm9uLXN1cGVyYWJ1bmRhbnQgcG9zaXRpb25zLi4uXCIsIHApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFAgPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG5vblN1cGVyYWJ1bmRhbnRCb2FyZHMuQ291bnQgPiAwICYmICFTdXBlcmFidW5kYW50T25seSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFPbmx5Q29uc2lkZXJOZWFybHlDb2xvcmFibGVCb2FyZHMgJiYgIUV4Y2x1ZGVOb25OZWFybHlDb2xvcmFibGVOb25TdXBlcmFidW5kYW50Qm9hcmRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gbm9uU3VwZXJhYnVuZGFudEJvYXJkc1swXTtcclxuICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmRzLkFkZFJhbmdlKG5vblN1cGVyYWJ1bmRhbnRCb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVBlcmZvcm1Db21wbGV0ZUFuYWx5c2lzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChFeGlzdHNOZWFybHlDb2xvcmFibGVCb2FyZEZvckVhY2hFZGdlKG5vblN1cGVyYWJ1bmRhbnRCb2FyZHMpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgSGFzTm9uU3VwZXJhYnVuZGFudEJvYXJkVGhhdElzTmVhcmx5Q29sb3JhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBub25TdXBlcmFidW5kYW50Qm9hcmRzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZHMuQWRkUmFuZ2Uobm9uU3VwZXJhYnVuZGFudEJvYXJkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFQZXJmb3JtQ29tcGxldGVBbmFseXNpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBCb2FyZENvdW50cy5BZGQoX3JlbWFpbmluZ0JvYXJkcy5Db3VudCk7XHJcbiAgICAgICAgICAgIE5vbkNvbG9yYWJsZUJvYXJkcy5BZGRSYW5nZShfcmVtYWluaW5nQm9hcmRzKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChfcmVtYWluaW5nQm9hcmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudDtcclxuICAgICAgICAgICAgICAgIHdpbkxlbmd0aCsrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBib2FyZEluZGljZXNUb0FkZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeURlc2NlbmRpbmc8aW50LGludD4oV2luRmlsdGVyLkZpbHRlcihfcmVtYWluaW5nQm9hcmRzLCBfd29uQm9hcmRzKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHggPT4geCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHdvbkJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oX3JlbWFpbmluZ0JvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBpbnQsIGJvb2w+KSgoYiwgaSkgPT4gYm9hcmRJbmRpY2VzVG9BZGQuQ29udGFpbnMoaSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHdvbkJvYXJkcylcclxuICAgICAgICAgICAgICAgICAgICBfd29uQm9hcmRzLkFkZChiKTtcclxuICAgICAgICAgICAgICAgIEJvYXJkc09mRGVwdGhbd2luTGVuZ3RoXSA9IHdvbkJvYXJkcztcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBib2FyZEluZGljZXNUb0FkZClcclxuICAgICAgICAgICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzLlJlbW92ZUF0KGkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gMTAwICogKHRvdGFsQm9hcmRzIC0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudCkgLyB0b3RhbEJvYXJkcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAocCA+IGxhc3RQKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFR1cGxlPHN0cmluZywgaW50PihzdHJpbmcuRm9ybWF0KFwiRmluZGluZyBhbGwgezB9IG1vdmUgd2lucy4uLlwiLCB3aW5MZW5ndGgpLCBwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQID0gcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgQm9hcmRDb3VudHMuQWRkKF9yZW1haW5pbmdCb2FyZHMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfcmVtYWluaW5nQm9hcmRzLkNvdW50ID09IGNvdW50KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZHMuQWRkUmFuZ2UoX3JlbWFpbmluZ0JvYXJkcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChCcmVha2VyV29uQm9hcmQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gX3JlbWFpbmluZ0JvYXJkc1swXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcyAmJiBNaXNzaW5nRWRnZUluZGV4ID49IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChFeGlzdHNOZWFybHlDb2xvcmFibGVCb2FyZEZvckVhY2hFZGdlKF9yZW1haW5pbmdCb2FyZHMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdE9yRGVmYXVsdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihfcmVtYWluaW5nQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShiID0+IF9jb2xvcmluZ0FuYWx5emVyLkNvbG9yYWJsZVdpdGhvdXRFZGdlKGIsIDApKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQnJlYWtlcldvbkJvYXJkID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KF9yZW1haW5pbmdCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gX2NvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoYiwgMCkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIE5lYXJseUNvbG9yYWJsZUZvckVkZ2UoU3VwZXJTbGltQm9hcmQgYm9hcmQsIGludCBlZGdlSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2NvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoYm9hcmQsIGVkZ2VJbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIEV4aXN0c05lYXJseUNvbG9yYWJsZUJvYXJkRm9yRWFjaEVkZ2UoTGlzdDxTdXBlclNsaW1Cb2FyZD4gYm9hcmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmFibGUuUmFuZ2UoMCwgX2xpbmVHcmFwaC5OKS5BbGwoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoZSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gTmVhcmx5Q29sb3JhYmxlRm9yRWRnZShiLCBlKSkpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBOZWFybHlDb2xvcmFibGVGb3JTb21lRWRnZShTdXBlclNsaW1Cb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhYmxlLlJhbmdlKDAsIF9saW5lR3JhcGguTikuQW55KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGUgPT4gTmVhcmx5Q29sb3JhYmxlRm9yRWRnZShib2FyZCwgZSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgTG9va0F0U3VwZXJhYnVuZGFuY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHBhY2tzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBfbGluZUdyYXBoLk4pLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+PikoZSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KF9yZW1haW5pbmdCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gX2NvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoYiwgZSkpKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgZ29vZFBhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4+KHBhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiwgYm9vbD4pKHBhY2sgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4ocGFjaywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBib29sPikoc3NiID0+IElzU3VwZXJhYnVuZGFudChzc2IpKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzU3VwZXJhYnVuZGFudChTdXBlclNsaW1Cb2FyZCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgc3Vic2V0ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGludCB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChzdWJzZXQgPCAoMVVMIDw8IGIuX3N0YWNrQ291bnQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGIuX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsICs9IChzdWJzZXQgJiBiLl90cmFjZVtpXSkuUG9wdWxhdGlvbkNvdW50KCkgLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBlID0gX2dyYXBoLkVkZ2VzT24oc3Vic2V0LlRvU2V0KCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRvdGFsIDwgZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgc3Vic2V0Kys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChFeHRyYVBzaSA+IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG90YWwgPj0gX2dyYXBoLkUgKyBFeHRyYVBzaTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBDb21wdXRlQWJ1bmRhbmNlU3VycGx1cyhTdXBlclNsaW1Cb2FyZCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHRvdGFsID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBiLl9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IGIuX3RyYWNlW2ldLlBvcHVsYXRpb25Db3VudCgpIC8gMjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbCAtIF9ncmFwaC5FO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxpbnQ+IENvbXB1dGVNYXRjaGluZ0FidW5kYW5jZVNoYWRvdyhTdXBlclNsaW1Cb2FyZCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNoYWRvdyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIHVsb25nIHN1YnNldCA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChzdWJzZXQgPCAoMVVMIDw8IGIuX3N0YWNrQ291bnQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgZTtcclxuICAgICAgICAgICAgICAgIGlmICghSXNNYXRjaGluZ0FidW5kYW50KGIsIHN1YnNldCwgb3V0IGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIHNoYWRvdy5BZGQoZSk7XHJcbiAgICAgICAgICAgICAgICBzdWJzZXQrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2hhZG93LlNvcnQoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzaGFkb3c7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIElzTWF0Y2hpbmdBYnVuZGFudChTdXBlclNsaW1Cb2FyZCBiLCB1bG9uZyBzdWJzZXQsIG91dCBpbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGUgPSBfZ3JhcGguRWRnZXNPbihzdWJzZXQuVG9TZXQoKSk7XHJcblxyXG4gICAgICAgICAgICBpbnQgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGIuX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmMgPSAoc3Vic2V0ICYgYi5fdHJhY2VbaV0pLlRvU2V0KCk7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBfbGluZUdyYXBoLkluZGVwZW5kZW5jZU51bWJlcihfZ3JhcGguRWRnZUluZGljZXNPbih2YykpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWwgPj0gZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgR2VuZXJhdGVBbGxCb2FyZHMoVGVtcGxhdGUgdGVtcGxhdGUsIGludCBjb2xvckNvdW50LCBBY3Rpb248VHVwbGU8c3RyaW5nLCBpbnQ+PiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUdXBsZTxzdHJpbmcsIGludD4oXCJGaW5kaW5nIGFsbCBwb3NpdGlvbnMuLi5cIiwgMCkpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQml0TGV2ZWxHZW5lcmF0aW9uLkFzc2lnbm1lbnRzX3Vsb25nLkdlbmVyYXRlKHRlbXBsYXRlLlNpemVzLCBjb2xvckNvdW50KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBuZXcgU3VwZXJTbGltQm9hcmQodCwgdGVtcGxhdGUuU2l6ZXMuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgX3JlbWFpbmluZ0JvYXJkcy5BZGQoYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQnVpbGRMaW5lR3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gX2dyYXBoLkFkamFjZW50O1xyXG4gICAgICAgICAgICBpbnQgbiA9IGFkamFjZW50LkdldFVwcGVyQm91bmQoMCkgKyAxO1xyXG5cclxuICAgICAgICAgICAgX2VkZ2VzID0gbmV3IExpc3Q8VHVwbGU8aW50LCBpbnQ+PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlcy5BZGQobmV3IFR1cGxlPGludCwgaW50PihpLCBqKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWVldHMgPSBuZXcgYm9vbFtfZWRnZXMuQ291bnQsIF9lZGdlcy5Db3VudF07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2VkZ2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBfZWRnZXMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2VkZ2VzW2ldLkl0ZW0xID09IF9lZGdlc1tqXS5JdGVtMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZWRnZXNbaV0uSXRlbTEgPT0gX2VkZ2VzW2pdLkl0ZW0yIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlc1tpXS5JdGVtMiA9PSBfZWRnZXNbal0uSXRlbTEgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2VkZ2VzW2ldLkl0ZW0yID09IF9lZGdlc1tqXS5JdGVtMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVldHNbaSwgal0gPSBtZWV0c1tqLCBpXSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBfbGluZUdyYXBoID0gbmV3IEdyYXBoKG1lZXRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvbmcgR2V0RWRnZUNvbG9yTGlzdChTdXBlclNsaW1Cb2FyZCBiLCBpbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2MSA9IF9lZGdlc1tlXS5JdGVtMTtcclxuICAgICAgICAgICAgdmFyIHYyID0gX2VkZ2VzW2VdLkl0ZW0yO1xyXG4gICAgICAgICAgICB2YXIgc3RhY2tzID0gYi5TdGFja3MuVmFsdWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RhY2tzW3YxXSAmIHN0YWNrc1t2Ml07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR2FtZVRyZWVJbmZvIEdldFdpblRyZWVJbmZvKFN1cGVyU2xpbUJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9zd2FwQW5hbHl6ZXIuV2luVHJlZUluZm9bYm9hcmRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IF9nYW1lVHJlZUluZGV4O1xyXG4gICAgICAgIHB1YmxpYyBHYW1lVHJlZSBCdWlsZEdhbWVUcmVlKFN1cGVyU2xpbUJvYXJkIGJvYXJkLCBib29sIHdpbiA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2VlbkJvYXJkcyA9ICBuZXcgRGljdGlvbmFyeTxTdXBlclNsaW1Cb2FyZCwgaW50PigpO1xyXG4gICAgICAgICAgICBfZ2FtZVRyZWVJbmRleCA9IDE7XHJcbiAgICAgICAgICAgIHJldHVybiBCdWlsZEdhbWVUcmVlKGJvYXJkLCBzZWVuQm9hcmRzLCB3aW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2FtZVRyZWUgQnVpbGRHYW1lVHJlZShTdXBlclNsaW1Cb2FyZCBib2FyZCwgRGljdGlvbmFyeTxTdXBlclNsaW1Cb2FyZCwgaW50PiBzZWVuQm9hcmRzLCBib29sIHdpbiA9IHRydWUsIGludCBkZXB0aCA9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzZWVuQm9hcmRzW2JvYXJkXSA9IF9nYW1lVHJlZUluZGV4O1xyXG4gICAgICAgICAgICB2YXIgdHJlZSA9IG5ldyBHYW1lVHJlZSgpIHsgQm9hcmQgPSBib2FyZCwgSXNGaXhlcldpbiA9IHdpbiB9O1xyXG4gICAgICAgICAgICB0cmVlLklzQ29sb3JhYmxlID0gX2NvbG9yaW5nQW5hbHl6ZXIuQW5hbHl6ZShib2FyZCk7XHJcbiAgICAgICAgICAgIHRyZWUuSXNTdXBlcmFidW5kYW50ID0gd2luIHx8IElzU3VwZXJhYnVuZGFudChib2FyZCk7XHJcbiAgICAgICAgICAgIHRyZWUuR2FtZVRyZWVJbmRleCA9IF9nYW1lVHJlZUluZGV4O1xyXG4gICAgICAgICAgICBfZ2FtZVRyZWVJbmRleCsrO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRyZWUuSXNDb2xvcmFibGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJlZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdHJlZS5Jc1N1cGVyYWJ1bmRhbnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJlZTtcclxuXHJcbiAgICAgICAgICAgIEdhbWVUcmVlSW5mbyB0cmVlSW5mbztcclxuICAgICAgICAgICAgaWYgKHdpbilcclxuICAgICAgICAgICAgICAgIF9zd2FwQW5hbHl6ZXIuV2luVHJlZUluZm8uVHJ5R2V0VmFsdWUoYm9hcmQsIG91dCB0cmVlSW5mbyk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIF9zd2FwQW5hbHl6ZXIuTG9zc1RyZWVJbmZvLlRyeUdldFZhbHVlKGJvYXJkLCBvdXQgdHJlZUluZm8pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRyZWVJbmZvICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb2NhbFNlZW5Cb2FyZHMgPSBuZXcgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiYyBpbiB0cmVlSW5mbylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBTdXBlclNsaW1Cb2FyZChib2FyZC5fdHJhY2UsIGJjLkFscGhhLCBiYy5CZXRhLCBiYy5SZXNwb25zZSwgYm9hcmQuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbFNlZW5Cb2FyZHMuQ29udGFpbnMoY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU2VlbkJvYXJkcy5BZGQoY2hpbGRCb2FyZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghd2luICYmIHNlZW5Cb2FyZHMuQ29udGFpbnNLZXkoY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRUcmVlID0gQnVpbGRHYW1lVHJlZShjaGlsZEJvYXJkLCBzZWVuQm9hcmRzLCB3aW4sIGRlcHRoICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZS5BZGRDaGlsZChjaGlsZFRyZWUsIGJjKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRyZWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3ViVGVtcGxhdGVBbmFseXplciA6IElCb2FyZEFuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxUZW1wbGF0ZT4gU3ViVGVtcGxhdGVzIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZWFzb24geyBnZXQgeyByZXR1cm4gXCJzdWIgdGVtcGxhdGVcIjsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzS25vd2xlZGdlRGVwZW5kZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdWJUZW1wbGF0ZUFuYWx5emVyKHBhcmFtcyBUZW1wbGF0ZVtdIHN1YlRlbXBsYXRlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN1YlRlbXBsYXRlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlRlbXBsYXRlPihzdWJUZW1wbGF0ZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0ZW1wbGF0ZSBpbiBTdWJUZW1wbGF0ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBjb2xvcjtcclxuICAgICAgICAgICAgICAgIGludCB4O1xyXG4gICAgICAgICAgICAgICAgaWYgKENvbnRhaW5zU3ViZXJhYnVuZGFudFN1YlN0YWNrc0Fib3ZlVGVtcGxhdGUoa25vd2xlZGdlLCBib2FyZCwgdGVtcGxhdGUsIG91dCBjb2xvciwgb3V0IHgpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF0uQWRkV2luKGJvYXJkLCBzdHJpbmcuRm9ybWF0KFwic2V0IEwoezB9KSA9IEwoezB9KSAtIHsxfVwiLCB4ICsgMSwgY29sb3IpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBDb250YWluc1N1YmVyYWJ1bmRhbnRTdWJTdGFja3NBYm92ZVRlbXBsYXRlKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBUZW1wbGF0ZSB0ZW1wbGF0ZSwgb3V0IGludCBjb2xvciwgb3V0IGludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29sb3IgPSAtMTtcclxuICAgICAgICAgICAgeCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgZyA9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaDtcclxuICAgICAgICAgICAgdmFyIHN0YWNrU2V0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGJvYXJkLlN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHMgPT4gcy5Ub1NldCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBiaWdzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBzdGFja1NldHMuQ291bnQpLkNvdW50KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gc3RhY2tTZXRzW2ldLkNvdW50ID4gdGVtcGxhdGUuU2l6ZXNbaV0pKTtcclxuICAgICAgICAgICAgaWYgKGJpZ3MgPD0gMCB8fCBiaWdzID4gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzaHJpbmthYmxlID0gRW51bWVyYWJsZS5SYW5nZSgwLCBzdGFja1NldHMuQ291bnQpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gc3RhY2tTZXRzW2ldLkNvdW50ID09IHRlbXBsYXRlLlNpemVzW2ldICsgMSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBpZiAoc2hyaW5rYWJsZS5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgeCA9IHNocmlua2FibGVbMF07XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oc3RhY2tTZXRzW3hdKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhY2tTZXRzW3hdLlJlbW92ZShjKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZy5EZWdyZWVDb25kaXRpb24oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sbG9uZz4oc3RhY2tTZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBsb25nPikocyA9PiBzLlRvSW50NjQoKSkpLlRvTGlzdCgpLCBib2FyZC5Qb3QpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gYztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzdGFja1NldHNbeF0uQWRkKGMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBGYXN0VGFycGl0RW51bWVyYXRvciA6IFRhcnBpdEVudW1lcmF0b3JcclxuICAgIHtcclxuICAgICAgICBMaXN0PEZhc3RXb3JkPiBfd29yZHM7XHJcbiAgICAgICAgRmFzdEFjY2Vzc2liaWxpdHlDaGVja2VyIF9hY2Nlc3NpYmlsaXR5Q2hlY2tlcjtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgTGlzdDxGYXN0V29yZD4gRW1wdHlMaXN0ID0gbmV3IExpc3Q8RmFzdFdvcmQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBGYXN0VGFycGl0RW51bWVyYXRvcihpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF93b3JkcyA9IG5ldyBGYXN0V29yZEdlbmVyYXRvcigpLkdlbmVyYXRlV29yZHMobik7XHJcbiAgICAgICAgICAgIF9hY2Nlc3NpYmlsaXR5Q2hlY2tlciA9IG5ldyBGYXN0QWNjZXNzaWJpbGl0eUNoZWNrZXIobik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBHZW5lcmF0ZU1pbmltYWxUYXJwaXRzKEFjdGlvbjxMaXN0PHN0cmluZz4+IGZvdW5kVGFycGl0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR2VuZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3QoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4+KShsID0+IGZvdW5kVGFycGl0KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQsc3RyaW5nPihsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQsIHN0cmluZz4pKHMgPT4gV29yZGlmeShzKSkpLlRvTGlzdCgpKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgR2VuZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3QoQWN0aW9uPExpc3Q8RmFzdFdvcmQ+PiBmb3VuZFRhcnBpdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdlbmVyYXRlTWluaW1hbFRhcnBpdHNGYXN0SW4oX3dvcmRzLCBuZXcgTGlzdDxGYXN0V29yZD4oKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4+KWZvdW5kVGFycGl0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgR2VuZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3RJbihMaXN0PEZhc3RXb3JkPiBTLCBMaXN0PEZhc3RXb3JkPiBtdXN0SGF2ZXMsIEFjdGlvbjxMaXN0PEZhc3RXb3JkPj4gZm91bmRUYXJwaXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZXhjbHVkZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBleHRlbmRlZE11c3RIYXZlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KG11c3RIYXZlcyk7XHJcbiAgICAgICAgICAgIHZhciBUID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oUyxtdXN0SGF2ZXMpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gVClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIFcgPSBSdW5Fc2NhcGUoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oUyxuZXdbXSB7IHcgfSksIGV4dGVuZGVkTXVzdEhhdmVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoVyAhPSBudWxsICYmIFcuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBHZW5lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdEluKFcsIGV4dGVuZGVkTXVzdEhhdmVzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPj4pZm91bmRUYXJwaXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGV4dGVuZGVkTXVzdEhhdmVzLkFkZCh3KTsgICAgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghZXhjbHVkZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIG11c3RIYXZlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgVyA9IFJ1bkVzY2FwZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihTLG5ld1tdIHsgdyB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFcuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhjbHVkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFleGNsdWRlZClcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZFRhcnBpdChTKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxGYXN0V29yZD4gUnVuRXNjYXBlKElFbnVtZXJhYmxlPEZhc3RXb3JkPiBTLCBMaXN0PEZhc3RXb3JkPiBtdXN0SGF2ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgVCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KFMpO1xyXG4gICAgICAgICAgICB2YXIgUiA9IG5ldyBIYXNoU2V0PEZhc3RXb3JkPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihfd29yZHMsVCkpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KG11c3RIYXZlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkLCBib29sPikodyA9PiBfYWNjZXNzaWJpbGl0eUNoZWNrZXIuSXNBY2Nlc3NpYmxlKHcsIFIpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVzY2FwZXJzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oVCxtdXN0SGF2ZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQsIGJvb2w+KSh3ID0+IF9hY2Nlc3NpYmlsaXR5Q2hlY2tlci5Jc0FjY2Vzc2libGUodywgUikpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBlc2NhcGVycylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBULlJlbW92ZSh3KTtcclxuICAgICAgICAgICAgICAgICAgICBSLkFkZCh3KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZXNjYXBlcnMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PEZhc3RXb3JkPiBSdW5Fc2NhcGUoSUVudW1lcmFibGU8RmFzdFdvcmQ+IFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gUnVuRXNjYXBlKFMsIEVtcHR5TGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHJpbmcgV29yZGlmeShGYXN0V29yZCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHN0ID0gbmV3IGxvbmdbYi5fc3RhY2tDb3VudF07XHJcbiAgICAgICAgICAgIHZhciB0cmFjZUJpdHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDx1bG9uZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYi5fdHJhY2UsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8dWxvbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikodCA9PiB0LlRvU2V0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgYyA9IDA7IGMgPCB0cmFjZUJpdHMuQ291bnQ7IGMrKylcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIHRyYWNlQml0c1tjXSlcclxuICAgICAgICAgICAgICAgICAgICBzdFtpXSB8PSAxTCA8PCBjO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luPGNoYXI+KFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsY2hhcj4oc3QsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgY2hhcj4pKHMgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuICd4JztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gJ3onO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiAnPyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIGVudW5tZXJhYmxlIHdheVxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBJRW51bWVyYWJsZTxMaXN0PHN0cmluZz4+IEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4+KEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdCgpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4+KShsaXN0ID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQsc3RyaW5nPihsaXN0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQsIHN0cmluZz4pV29yZGlmeSkuVG9MaXN0KCkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxMaXN0PEZhc3RXb3JkPj4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHNGYXN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBleHBsb3JlZCA9IG5ldyBIYXNoU2V0PExpc3Q8RmFzdFdvcmQ+PihuZXcgU29ydGVkTGlzdENvbXBhcmVyKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHNGYXN0SW4oX3dvcmRzLCBleHBsb3JlZCwgbmV3IExpc3Q8RmFzdFdvcmQ+KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxGYXN0V29yZD4+IEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdEluKExpc3Q8RmFzdFdvcmQ+IFMsIEhhc2hTZXQ8TGlzdDxGYXN0V29yZD4+IGV4cGxvcmVkLCBMaXN0PEZhc3RXb3JkPiBtdXN0SGF2ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZXhjbHVkZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIFMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBXID0gUnVuRXNjYXBlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KFMsbmV3W10geyB3IH0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChXLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZXhjbHVkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWw8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4obXVzdEhhdmVzLFcpICYmICFleHBsb3JlZC5Db250YWlucyhXKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgVFAgaW4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHNGYXN0SW4oVywgZXhwbG9yZWQsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KG11c3RIYXZlcykpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gVFA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZXhwbG9yZWQuQWRkKFcpO1xyXG4gICAgICAgICAgICAgICAgbXVzdEhhdmVzLkFkZCh3KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFleGNsdWRlZClcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihTKTtcclxuICAgICAgICB9IFxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgY2xhc3MgU29ydGVkTGlzdENvbXBhcmVyIDogSUVxdWFsaXR5Q29tcGFyZXI8TGlzdDxGYXN0V29yZD4+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoTGlzdDxGYXN0V29yZD4geCwgTGlzdDxGYXN0V29yZD4geSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPih4LHkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IEdldEhhc2hDb2RlKExpc3Q8RmFzdFdvcmQ+IGxpc3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVuY2hlY2tlZFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBoYXNoID0gMTk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHggaW4gbGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaCA9IGhhc2ggKiAzMSArIHguR2V0SGFzaENvZGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc2g7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFJlZmVyZW5jZVRhcnBpdEVudW1lcmF0b3IgOiBUYXJwaXRFbnVtZXJhdG9yXHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxzdHJpbmc+IF93b3JkcztcclxuICAgICAgICBBY2Nlc3NpYmlsaXR5Q2hlY2tlciBfYWNjZXNzaWJpbGl0eUNoZWNrZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBSZWZlcmVuY2VUYXJwaXRFbnVtZXJhdG9yKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3dvcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8c3RyaW5nPihuZXcgV29yZEVudW1lcmF0b3IoQWxwaGFiZXQpLkVudW1lcmF0ZVdvcmRzKG4pKTtcclxuICAgICAgICAgICAgX2FjY2Vzc2liaWxpdHlDaGVja2VyID0gbmV3IEFjY2Vzc2liaWxpdHlDaGVja2VyKEFscGhhYmV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBJRW51bWVyYWJsZTxMaXN0PHN0cmluZz4+IEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzZWVuID0gbmV3IEhhc2hTZXQ8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHNJbihfd29yZHMsIHNlZW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxzdHJpbmc+PiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0c0luKExpc3Q8c3RyaW5nPiBTLCBIYXNoU2V0PHN0cmluZz4gc2VlbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBleGNsdWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgVCBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4+KFMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8c3RyaW5nPj4pKHcgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8c3RyaW5nPihTLG5ld1tdIHsgdyB9KS5Ub0xpc3QoKSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgVyA9IFJ1bkVzY2FwZShUKTtcclxuICAgICAgICAgICAgICAgIGlmIChXLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZXhjbHVkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBHZW5lcmF0ZVNpbXBsZUtleShXKTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWVuLkNvbnRhaW5zKGtleSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgc2Vlbi5BZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBUUCBpbiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0c0luKFcsIHNlZW4pKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBUUDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFleGNsdWRlZClcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8c3RyaW5nLHN0cmluZz4oUywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT4gcykpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxzdHJpbmc+IFJ1bkVzY2FwZShMaXN0PHN0cmluZz4gUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBUID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8c3RyaW5nPihTKTtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBSID0gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkRpZmZlcmVuY2U8c3RyaW5nPihfd29yZHMsVCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8c3RyaW5nPihULChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgYm9vbD4pKHcgPT4gX2FjY2Vzc2liaWxpdHlDaGVja2VyLklzQWNjZXNzaWJsZSh3LCBSKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248c3RyaW5nPikoKHgpID0+IHsgfSkpIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBUO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RyaW5nIEdlbmVyYXRlU2ltcGxlS2V5KExpc3Q8c3RyaW5nPiBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiLFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8c3RyaW5nLHN0cmluZz4oUywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT4gcykpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCaXRHcmFwaF9sb25nIDogSUdyYXBoX2xvbmdcclxuICAgIHtcclxuICAgICAgICBpbnRbXSBfdmVydGljZXM7XHJcbiAgICAgICAgbG9uZ1tdIF9uZWlnaGJvcmhvb2Q7XHJcblxyXG4gICAgICAgIHB1YmxpYyBCaXRHcmFwaF9sb25nKExpc3Q8aW50PiBlZGdlV2VpZ2h0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuID0gKGludCkoKDEgKyBNYXRoLlNxcnQoMSArIDggKiBlZGdlV2VpZ2h0cy5Db3VudCkpIC8gMik7XHJcbiAgICAgICAgICAgIF92ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgbikuVG9BcnJheSgpO1xyXG5cclxuICAgICAgICAgICAgX25laWdoYm9yaG9vZCA9IG5ldyBsb25nW25dO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlCaXQgPSAxTCA8PCBpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqQml0ID0gMUwgPDwgajtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2VXZWlnaHRzW2tdICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbmVpZ2hib3Job29kW2ldIHw9IGpCaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9uZWlnaGJvcmhvb2Rbal0gfD0gaUJpdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgQml0R3JhcGhfbG9uZyhpbnQgbiwgbG9uZ1tdIG5laWdoYm9yaG9vZClcclxuICAgICAgICB7XHJcblx0XHRcdF92ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgbikuVG9BcnJheSgpO1xyXG5cdFx0XHRfbmVpZ2hib3Job29kID0gbmVpZ2hib3Job29kO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IE4geyBnZXQgeyByZXR1cm4gX3ZlcnRpY2VzLkxlbmd0aDsgfSB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPGludD4gVmVydGljZXMgeyBnZXQgeyByZXR1cm4gX3ZlcnRpY2VzOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNJbmRlcGVuZGVudChsb25nIHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXQuVHJ1ZUZvckFsbEJpdEluZGljZXMoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaSA9PiAoX25laWdoYm9yaG9vZFtpXSAmIHNldCkgPT0gMCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBEZWdyZWUoaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX25laWdoYm9yaG9vZFt2XS5Qb3B1bGF0aW9uQ291bnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBEZWdyZWVJblNldChpbnQgdiwgbG9uZyBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKF9uZWlnaGJvcmhvb2Rbdl0gJiBzZXQpLlBvcHVsYXRpb25Db3VudCgpO1xyXG4gICAgICAgIH1cclxuXHRcdHB1YmxpYyBsb25nIE5laWdoYm9yc0luU2V0KGludCB2LCBsb25nIHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfbmVpZ2hib3Job29kW3ZdICYgc2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8bG9uZz4gTWF4aW1hbEluZGVwZW5kZW50U3Vic2V0cyhsb25nIHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3Q8bG9uZz4oOCk7XHJcbiAgICAgICAgICAgIEJyb25LZXJib3NjaChzZXQsIDBMLCAwTCwgbGlzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBCcm9uS2VyYm9zY2gobG9uZyBQLCBsb25nIFIsIGxvbmcgWCwgTGlzdDxsb25nPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFAgPT0gMCAmJiBYID09IDApXHJcbiAgICAgICAgICAgICAgICBsaXN0LkFkZChSKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdSA9IFRvbWl0YVBpdm90KFAsIFgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHEgPSBQICYgKCgxTCA8PCB1KSB8IF9uZWlnaGJvcmhvb2RbdV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpdCA9IHEgJiAtcTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGJpdC5FeHRyYWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vbiA9IH4oYml0IHwgX25laWdoYm9yaG9vZFt2XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIEJyb25LZXJib3NjaChQICYgbm9uLCBSIHwgYml0LCBYICYgbm9uLCBsaXN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcSBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgUCBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgWCB8PSBiaXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBUb21pdGFQaXZvdChsb25nIFAsIGxvbmcgWClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtaW4gPSBpbnQuTWF4VmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBiZXN0ID0gLTE7XHJcbiAgICAgICAgICAgIHZhciBxID0gUCB8IFg7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0ID0gcSAmIC1xO1xyXG4gICAgICAgICAgICAgICAgdmFyIHUgPSBiaXQuRXh0cmFjdCgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBuID0gKChiaXQgfCBfbmVpZ2hib3Job29kW3VdKSAmIFApLlBvcHVsYXRpb25Db3VudCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG4gPCBtaW4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluID0gbjtcclxuICAgICAgICAgICAgICAgICAgICBiZXN0ID0gdTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBxIF49IGJpdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJlc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQml0R3JhcGhfdWludCA6IElHcmFwaF91aW50XHJcbiAgICB7XHJcbiAgICAgICAgaW50W10gX3ZlcnRpY2VzO1xyXG4gICAgICAgIHVpbnRbXSBfbmVpZ2hib3Job29kO1xyXG5cclxuICAgICAgICBwdWJsaWMgQml0R3JhcGhfdWludChMaXN0PGludD4gZWRnZVdlaWdodHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbiA9IChpbnQpKCgxICsgTWF0aC5TcXJ0KDEgKyA4ICogZWRnZVdlaWdodHMuQ291bnQpKSAvIDIpO1xyXG4gICAgICAgICAgICBfdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIG4pLlRvQXJyYXkoKTtcclxuXHJcbiAgICAgICAgICAgIF9uZWlnaGJvcmhvb2QgPSBuZXcgdWludFtuXTtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBpQml0ID0gMVUgPDwgaTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgakJpdCA9IDFVIDw8IGo7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlZGdlV2VpZ2h0c1trXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX25laWdoYm9yaG9vZFtpXSB8PSBqQml0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbmVpZ2hib3Job29kW2pdIHw9IGlCaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIEJpdEdyYXBoX3VpbnQoaW50IG4sIHVpbnRbXSBuZWlnaGJvcmhvb2QpXHJcbiAgICAgICAge1xyXG5cdFx0XHRfdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIG4pLlRvQXJyYXkoKTtcclxuXHRcdFx0X25laWdoYm9yaG9vZCA9IG5laWdoYm9yaG9vZDtcclxuXHRcdH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBOIHsgZ2V0IHsgcmV0dXJuIF92ZXJ0aWNlcy5MZW5ndGg7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxpbnQ+IFZlcnRpY2VzIHsgZ2V0IHsgcmV0dXJuIF92ZXJ0aWNlczsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzSW5kZXBlbmRlbnQodWludCBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0LlRydWVGb3JBbGxCaXRJbmRpY2VzKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gKF9uZWlnaGJvcmhvb2RbaV0gJiBzZXQpID09IDApKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVncmVlKGludCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9uZWlnaGJvcmhvb2Rbdl0uUG9wdWxhdGlvbkNvdW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVncmVlSW5TZXQoaW50IHYsIHVpbnQgc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChfbmVpZ2hib3Job29kW3ZdICYgc2V0KS5Qb3B1bGF0aW9uQ291bnQoKTtcclxuICAgICAgICB9XHJcblx0XHRwdWJsaWMgdWludCBOZWlnaGJvcnNJblNldChpbnQgdiwgdWludCBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX25laWdoYm9yaG9vZFt2XSAmIHNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPHVpbnQ+IE1heGltYWxJbmRlcGVuZGVudFN1YnNldHModWludCBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGlzdCA9IG5ldyBMaXN0PHVpbnQ+KDgpO1xyXG4gICAgICAgICAgICBCcm9uS2VyYm9zY2goc2V0LCAwVSwgMFUsIGxpc3QpO1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQnJvbktlcmJvc2NoKHVpbnQgUCwgdWludCBSLCB1aW50IFgsIExpc3Q8dWludD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQID09IDAgJiYgWCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgbGlzdC5BZGQoUik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHUgPSBUb21pdGFQaXZvdChQLCBYKTtcclxuICAgICAgICAgICAgICAgIHZhciBxID0gUCAmICgoMVUgPDwgdSkgfCBfbmVpZ2hib3Job29kW3VdKTtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSBxICYgKH5xICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBiaXQuRXh0cmFjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBub24gPSB+KGJpdCB8IF9uZWlnaGJvcmhvb2Rbdl0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBCcm9uS2VyYm9zY2goUCAmIG5vbiwgUiB8IGJpdCwgWCAmIG5vbiwgbGlzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHEgXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgIFAgXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgIFggfD0gYml0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgVG9taXRhUGl2b3QodWludCBQLCB1aW50IFgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWluID0gaW50Lk1heFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgYmVzdCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgcSA9IFAgfCBYO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdCA9IHEgJiAofnEgKyAxKTtcclxuICAgICAgICAgICAgICAgIHZhciB1ID0gYml0LkV4dHJhY3QoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgbiA9ICgoYml0IHwgX25laWdoYm9yaG9vZFt1XSkgJiBQKS5Qb3B1bGF0aW9uQ291bnQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChuIDwgbWluKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgYmVzdCA9IHU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcSBePSBiaXQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBiZXN0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxuXHJcbnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbDtcclxudXNpbmcgU3lzdGVtLlJ1bnRpbWUuU2VyaWFsaXphdGlvbjtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEVkZ2UgOiBHcmFwaGljc0xheWVyLklQYWludGFibGUsIElIaXR0YWJsZVxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkZvbnQgTGFiZWxGb250ID0gbmV3IEdyYXBoaWNzTGF5ZXIuRm9udChcIlRpbWVzIE5ldyBSb21hblwiLCAxOCk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuQVJHQiBMYWJlbEJydXNoQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDEyMCwgMCwgMCwgMjU1KTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5Gb250IEluZGV4Rm9udCA9IG5ldyBHcmFwaGljc0xheWVyLkZvbnQoXCJTeXN0ZW1cIiwgOCk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuQVJHQiBJbmRleEJydXNoQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDIwMCwgMjAwLCAwLCAwKTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBQYXJlbnRJbmRleCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBJbmRleEFuZ2xlIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGVudW0gT3JpZW50YXRpb25zXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOb25lLFxyXG4gICAgICAgICAgICBGb3J3YXJkLFxyXG4gICAgICAgICAgICBCYWNrd2FyZFxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgRWRnZShWZXJ0ZXggdjEsIFZlcnRleCB2MilcclxuICAgICAgICAgICAgOiB0aGlzKHYxLCB2MiwgT3JpZW50YXRpb25zLk5vbmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEVkZ2UoVmVydGV4IHYxLCBWZXJ0ZXggdjIsIE9yaWVudGF0aW9ucyBvcmllbnRhdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9WMSA9IHYxO1xyXG4gICAgICAgICAgICBfVjIgPSB2MjtcclxuICAgICAgICAgICAgX09yaWVudGF0aW9uID0gb3JpZW50YXRpb247XHJcbiAgICAgICAgICAgIF9NdWx0aXBsaWNpdHkgPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEVkZ2UoU2VyaWFsaXphdGlvbkVkZ2UgZSwgTGlzdDxWZXJ0ZXg+IHZlcnRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVjEgPSB2ZXJ0aWNlc1tlLkluZGV4VjFdO1xyXG4gICAgICAgICAgICBWMiA9IHZlcnRpY2VzW2UuSW5kZXhWMl07XHJcbiAgICAgICAgICAgIE9yaWVudGF0aW9uID0gZS5PcmllbnRhdGlvbjtcclxuICAgICAgICAgICAgVGhpY2tuZXNzID0gZS5UaGlja25lc3M7XHJcbiAgICAgICAgICAgIE11bHRpcGxpY2l0eSA9IGUuTXVsdGlwbGljaXR5O1xyXG4gICAgICAgICAgICBTdHlsZSA9IGUuU3R5bGU7XHJcbiAgICAgICAgICAgIExhYmVsID0gZS5MYWJlbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFBhaW50KEdyYXBoaWNzTGF5ZXIuSUdyYXBoaWNzIGcsIGludCB3aWR0aCwgaW50IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfVjEgPT0gX1YyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyBEcmF3IHNlbGYgbG9vcC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXhSYWRpdXMxID0gTWF0aC5NYXgoX1YxLkxvY2FsQm91bmRzLldpZHRoLCBfVjEuTG9jYWxCb3VuZHMuSGVpZ2h0KSAvIDI7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4UmFkaXVzMiA9IE1hdGguTWF4KF9WMi5Mb2NhbEJvdW5kcy5XaWR0aCwgX1YyLkxvY2FsQm91bmRzLkhlaWdodCkgLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3MgPSAoX1YyLlggLSBfVjEuWCkgLyBNYXRoLlNxcnQoKF9WMi5YIC0gX1YxLlgpICogKF9WMi5YIC0gX1YxLlgpICsgKF9WMi5ZIC0gX1YxLlkpICogKF9WMi5ZIC0gX1YxLlkpKTtcclxuICAgICAgICAgICAgICAgIGNvcyA9IE1hdGguTWluKE1hdGguTWF4KGNvcywgLTEpLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2luID0gKF9WMi5ZIC0gX1YxLlkpIC8gTWF0aC5TcXJ0KChfVjIuWCAtIF9WMS5YKSAqIChfVjIuWCAtIF9WMS5YKSArIChfVjIuWSAtIF9WMS5ZKSAqIChfVjIuWSAtIF9WMS5ZKSk7XHJcbiAgICAgICAgICAgICAgICBzaW4gPSBNYXRoLk1pbihNYXRoLk1heChzaW4sIC0xKSwgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5BY29zKGNvcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX1YxLlkgPiBfVjIuWSlcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IC1hbmdsZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZG91YmxlLklzTmFOKGFuZ2xlKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFuZ2xlU3RlcCA9IE1hdGguUEkgLyAyLjAgLyBfTXVsdGlwbGljaXR5O1xyXG4gICAgICAgICAgICAgICAgdmFyIGV2ZW5Nb2RpZmllciA9IChfTXVsdGlwbGljaXR5ICUgMiA9PSAwKSA/IDAuNSA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgR3JhcGhpY3NMYXllci5Cb3ggdG9wU3RhcnQgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3goMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBHcmFwaGljc0xheWVyLkJveCB0b3BGaW5pc2ggPSBuZXcgR3JhcGhpY3NMYXllci5Cb3goMCwgMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IC0oX011bHRpcGxpY2l0eSAtIDEpIC8gMjsgaSA8IE1hdGguQ2VpbGluZygoX011bHRpcGxpY2l0eSArIDEpIC8gMi4wKTsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGFydEFuZ2xlID0gYW5nbGUgKyBhbmdsZVN0ZXAgKiAoaSAtIGV2ZW5Nb2RpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmlzaEFuZ2xlID0gYW5nbGUgLSBhbmdsZVN0ZXAgKiAoaSAtIGV2ZW5Nb2RpZmllcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IExvY2FsVG9HbG9iYWwoX1YxLkxvY2F0aW9uICsgVXRpbGl0eS5Qb2xhclRvUmVjdGFuZ3VsYXIobWF4UmFkaXVzMSArIDAuMDEsIHN0YXJ0QW5nbGUpLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmluaXNoID0gTG9jYWxUb0dsb2JhbChfVjIuTG9jYXRpb24gLSBVdGlsaXR5LlBvbGFyVG9SZWN0YW5ndWxhcihtYXhSYWRpdXMyICsgMC4wMSwgZmluaXNoQW5nbGUpLCB3aWR0aCwgaGVpZ2h0KTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcFN0YXJ0ID0gc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcEZpbmlzaCA9IGZpbmlzaDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGcuRHJhd0xpbmUoX3BlbkNvbG9yLCBzdGFydCwgZmluaXNoLCBfdGhpY2tuZXNzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoX09yaWVudGF0aW9uICE9IE9yaWVudGF0aW9ucy5Ob25lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb2ludHMgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3hbM107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9PcmllbnRhdGlvbiA9PSBPcmllbnRhdGlvbnMuRm9yd2FyZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzd2VlcCA9IF9WMi5Mb2NhdGlvbiAtIFV0aWxpdHkuUG9sYXJUb1JlY3Rhbmd1bGFyKG1heFJhZGl1czIgKyAwLjAyNWYsIGFuZ2xlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1swXSA9IExvY2FsVG9HbG9iYWwoVXRpbGl0eS5Sb3RhdGVBcm91bmRQb2ludChzd2VlcCwgX1YyLkxvY2F0aW9uLCBNYXRoLlBJIC8gMTgwLjAgKiAxMC4wKSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1sxXSA9IExvY2FsVG9HbG9iYWwoX1YyLkxvY2F0aW9uIC0gVXRpbGl0eS5Qb2xhclRvUmVjdGFuZ3VsYXIobWF4UmFkaXVzMiArIDAuMDA1ZiwgYW5nbGUpLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzWzJdID0gTG9jYWxUb0dsb2JhbChVdGlsaXR5LlJvdGF0ZUFyb3VuZFBvaW50KHN3ZWVwLCBfVjIuTG9jYXRpb24sIC1NYXRoLlBJIC8gMTgwLjAgKiAxMC4wKSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKF9PcmllbnRhdGlvbiA9PSBPcmllbnRhdGlvbnMuQmFja3dhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3dlZXAgPSBfVjEuTG9jYXRpb24gKyBVdGlsaXR5LlBvbGFyVG9SZWN0YW5ndWxhcihtYXhSYWRpdXMxICsgMC4wMjVmLCBhbmdsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbMF0gPSBMb2NhbFRvR2xvYmFsKFV0aWxpdHkuUm90YXRlQXJvdW5kUG9pbnQoc3dlZXAsIF9WMS5Mb2NhdGlvbiwgTWF0aC5QSSAvIDE4MC4wICogMTAuMCksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbMV0gPSBMb2NhbFRvR2xvYmFsKF9WMS5Mb2NhdGlvbiArIFV0aWxpdHkuUG9sYXJUb1JlY3Rhbmd1bGFyKG1heFJhZGl1czEgKyAwLjAwNWYsIGFuZ2xlKSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1syXSA9IExvY2FsVG9HbG9iYWwoVXRpbGl0eS5Sb3RhdGVBcm91bmRQb2ludChzd2VlcCwgX1YxLkxvY2F0aW9uLCAtTWF0aC5QSSAvIDE4MC4wICogMTAuMCksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZy5GaWxsUG9seWdvbihuZXcgR3JhcGhpY3NMYXllci5BUkdCKDAsIDAsIDApLCBwb2ludHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IExhYmVsO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShsYWJlbCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJveCA9IGcuTWVhc3VyZVN0cmluZyhsYWJlbCwgTGFiZWxGb250KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KHRvcFN0YXJ0LlggKyAodG9wRmluaXNoLlggLSB0b3BTdGFydC5YKSAvIDIgLSBib3guV2lkdGggLyAyIC0gMC43NSAqIGJveC5XaWR0aCAqIHNpbiwgdG9wU3RhcnQuWSArICh0b3BGaW5pc2guWSAtIHRvcFN0YXJ0LlkpIC8gMiAtIGJveC5IZWlnaHQgLyAyICsgMC43NSAqIGJveC5IZWlnaHQgKiBjb3MsIGJveC5XaWR0aCwgYm94LkhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZy5EcmF3U3RyaW5nKGxhYmVsLCBMYWJlbEZvbnQsIExhYmVsQnJ1c2hDb2xvciwgYm91bmRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoX3Nob3dJbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KHRvcFN0YXJ0LlggKyAodG9wRmluaXNoLlggLSB0b3BTdGFydC5YKSAvIDIsIHRvcFN0YXJ0LlkgKyAodG9wRmluaXNoLlkgLSB0b3BTdGFydC5ZKSAvIDIsIDEwLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN4ID0gKGJvdW5kcy5MZWZ0ICsgYm91bmRzLlJpZ2h0KSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN5ID0gKGJvdW5kcy5Cb3R0b20gKyBib3VuZHMuVG9wKSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLk1heChib3VuZHMuV2lkdGgsIGJvdW5kcy5IZWlnaHQpIC8gMiArIDU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJiID0gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KGN4ICsgciAqIE1hdGguQ29zKEluZGV4QW5nbGUpIC0gNSwgY3kgKyByICogTWF0aC5TaW4oSW5kZXhBbmdsZSkgLSA1LCAxMCwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIGcuRHJhd1N0cmluZyhQYXJlbnRJbmRleC5Ub1N0cmluZygpLCBJbmRleEZvbnQsIEluZGV4QnJ1c2hDb2xvciwgYmIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHcmFwaGljc0xheWVyLkJveCBMb2NhbFRvR2xvYmFsKFZlY3RvciBsb2NhbCwgaW50IHdpZHRoLCBpbnQgaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaGljc0xheWVyLkJveCh3aWR0aCAqIGxvY2FsLlgsIGhlaWdodCAqIGxvY2FsLlkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSGl0KGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIE1lZXRzKEVkZ2Ugb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX1YxID09IG90aGVyLlYxIHx8XHJcbiAgICAgICAgICAgICAgICAgICBfVjIgPT0gb3RoZXIuVjEgfHxcclxuICAgICAgICAgICAgICAgICAgIF9WMSA9PSBvdGhlci5WMiB8fFxyXG4gICAgICAgICAgICAgICAgICAgX1YyID09IG90aGVyLlYyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIFZlcnRleCBWMVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfVjE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9WMSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgVmVydGV4IFYyXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9WMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX1YyID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBPcmllbnRhdGlvbnMgT3JpZW50YXRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX09yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfT3JpZW50YXRpb24gPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBVcGRhdGVTdHlsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIFVwZGF0ZVN0eWxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChTdHlsZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgU3R5bGUgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuICAgICAgICAgICAgU3R5bGUgPSBzYi5Ub1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIGZsb2F0IFRoaWNrbmVzc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpY2tuZXNzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfdGhpY2tuZXNzID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljc0xheWVyLkFSR0IgQ29sb3JcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0NvbG9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfQ29sb3IgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIF9wZW5Db2xvciA9IF9Db2xvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNTZWxlY3RlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfSXNTZWxlY3RlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IF9Jc1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBfSXNTZWxlY3RlZCA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIENvbG9yID0gX0lzU2VsZWN0ZWQgPyBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDUwLCAyMDUsIDUwKSA6IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBpbnQgTXVsdGlwbGljaXR5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9NdWx0aXBsaWNpdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9NdWx0aXBsaWNpdHkgPSBNYXRoLk1heCgxLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgU3R5bGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3N0eWxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUuQ29udGFpbnMoXCJ+fnx+fH5+XCIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IHN0eWxlLlNwbGl0KG5ldyBzdHJpbmdbXSB7IFwifn58fnx+flwiIH0sIFN0cmluZ1NwbGl0T3B0aW9ucy5Ob25lKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMuTGVuZ3RoID49IDIpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IHBhcnRzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBMYWJlbCA9IHBhcnRzWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUuU3RhcnRzV2l0aChcIitcIikgJiYgIXN0cmluZy5Jc051bGxPckVtcHR5KF9zdHlsZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgX3N0eWxlICs9IFwiLCBcIiArIHN0eWxlLlRyaW1TdGFydCgnKycpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIF9zdHlsZSA9IHN0eWxlLlRyaW1TdGFydCgnKycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIExhYmVsIHsgZ2V0OyBzZXQ7IH1cclxuICAgXHJcbiAgICAgICAgVmVydGV4IF9WMTtcclxuICAgICAgICBWZXJ0ZXggX1YyO1xyXG4gICAgICAgIE9yaWVudGF0aW9ucyBfT3JpZW50YXRpb247XHJcbiAgICAgICAgZmxvYXQgX3RoaWNrbmVzcyA9IDQ7XHJcbiAgICAgICAgR3JhcGhpY3NMYXllci5BUkdCIF9Db2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMCwgMCwgMCk7XHJcbiAgICAgICAgR3JhcGhpY3NMYXllci5BUkdCIF9wZW5Db2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMCwgMCwgMCk7XHJcbiAgICAgICAgYm9vbCBfSXNTZWxlY3RlZDtcclxuICAgICAgICBpbnQgX011bHRpcGxpY2l0eTtcclxuICAgICAgICBzdHJpbmcgX3N0eWxlO1xyXG4gICAgICAgIGJvb2wgX3Nob3dJbmRleCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFRvZ2dsZUluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9zaG93SW5kZXggPSAhX3Nob3dJbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgUm90YXRlSW5kZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSW5kZXhBbmdsZSArPSBNYXRoLlBJIC8gMTY7XHJcbiAgICAgICAgICAgIGlmIChJbmRleEFuZ2xlID49IDIgKiBNYXRoLlBJKVxyXG4gICAgICAgICAgICAgICAgSW5kZXhBbmdsZSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdyYXBoIDogR3JhcGhpY3NMYXllci5JUGFpbnRhYmxlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IHN0cmluZyBHcmFwaEV4dGVuc2lvbiA9IFwiLmdyYXBoXCI7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IHN0cmluZyBFZGdlV2VpZ2h0RXh0ZW5zaW9uID0gXCIuZWRnZSB3ZWlnaHRcIjtcclxuXHJcbiAgICAgICAgTGlzdDxWZXJ0ZXg+IF92ZXJ0aWNlcyA9IG5ldyBMaXN0PFZlcnRleD4oKTtcclxuICAgICAgICBMaXN0PEVkZ2U+IF9lZGdlcyA9IG5ldyBMaXN0PEVkZ2U+KCk7XHJcbiAgICAgICAgb2JqZWN0IF9Nb2RpZnlMaXN0c1Rva2VuID0gbmV3IG9iamVjdCgpO1xyXG5cclxuICAgICAgICBzdHJpbmcgX0ZpbGVOYW1lID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNEaXJlY3RlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6R3JhcGhzLkVkZ2U+KF9lZGdlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5FZGdlLCBib29sPikoZSA9PiBlLk9yaWVudGF0aW9uICE9IEVkZ2UuT3JpZW50YXRpb25zLk5vbmUpKTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8SUhpdHRhYmxlPiBTZWxlY3RlZEl0ZW1zXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkSXRlbXMgPSBuZXcgTGlzdDxJSGl0dGFibGU+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gU2VsZWN0ZWRWZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy5BZGQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gU2VsZWN0ZWRFZGdlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy5BZGQoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZEl0ZW1zO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxWZXJ0ZXg+IFNlbGVjdGVkVmVydGljZXNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KF92ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsIGJvb2w+KSh2ID0+IHYuSXNTZWxlY3RlZCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxFZGdlPiBTZWxlY3RlZEVkZ2VzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpHcmFwaHMuRWRnZT4oX2VkZ2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLkVkZ2UsIGJvb2w+KShlID0+IGUuSXNTZWxlY3RlZCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5Cb3ggQm91bmRpbmdSZWN0YW5nbGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IGRvdWJsZS5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHQgPSBkb3VibGUuTWluVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IGRvdWJsZS5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm90dG9tID0gZG91YmxlLk1pblZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gTWF0aC5NaW4obGVmdCwgdi5Mb2NhbEJvdW5kcy5MZWZ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSBNYXRoLk1heChyaWdodCwgdi5Mb2NhbEJvdW5kcy5SaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IE1hdGguTWluKHRvcCwgdi5Mb2NhbEJvdW5kcy5Ub3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3R0b20gPSBNYXRoLk1heChib3R0b20sIHYuTG9jYWxCb3VuZHMuQm90dG9tKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGhpY3NMYXllci5Cb3gobGVmdCwgdG9wLCByaWdodCAtIGxlZnQsIGJvdHRvbSAtIHRvcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljc0xheWVyLkJveCBTZWxlY3RlZEJvdW5kaW5nUmVjdGFuZ2xlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN2ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpHcmFwaHMuVmVydGV4PihTZWxlY3RlZFZlcnRpY2VzKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdi5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBCb3VuZGluZ1JlY3RhbmdsZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IGRvdWJsZS5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHQgPSBkb3VibGUuTWluVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IGRvdWJsZS5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm90dG9tID0gZG91YmxlLk1pblZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBzdilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSBNYXRoLk1pbihsZWZ0LCB2LkxvY2FsQm91bmRzLkxlZnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodCA9IE1hdGguTWF4KHJpZ2h0LCB2LkxvY2FsQm91bmRzLlJpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gTWF0aC5NaW4odG9wLCB2LkxvY2FsQm91bmRzLlRvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbSA9IE1hdGguTWF4KGJvdHRvbSwgdi5Mb2NhbEJvdW5kcy5Cb3R0b20pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaGljc0xheWVyLkJveChsZWZ0LCB0b3AsIHJpZ2h0IC0gbGVmdCwgYm90dG9tIC0gdG9wKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTmFtZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfRmlsZU5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9GaWxlTmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxWZXJ0ZXg+IFZlcnRpY2VzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF92ZXJ0aWNlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8RWRnZT4gRWRnZXNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2VkZ2VzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBQYXJhbWV0ZXJzRGlydHkgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUGFyYW1ldGVyc0RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaChTZXJpYWxpemF0aW9uR3JhcGggZylcclxuICAgICAgICAgICAgOiB0aGlzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF92ZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25WZXJ0ZXgsZ2xvYmFsOjpHcmFwaHMuVmVydGV4PihnLlZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25WZXJ0ZXgsIGdsb2JhbDo6R3JhcGhzLlZlcnRleD4pKHYgPT4gbmV3IFZlcnRleCh2KSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBfZWRnZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkdyYXBocy5TZXJpYWxpemF0aW9uRWRnZSxnbG9iYWw6OkdyYXBocy5FZGdlPihnLkVkZ2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25FZGdlLCBnbG9iYWw6OkdyYXBocy5FZGdlPikoZSA9PiBuZXcgRWRnZShlLCBfdmVydGljZXMpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIE5hbWUgPSBnLk5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGgoSUVudW1lcmFibGU8VmVydGV4PiB2ZXJ0aWNlcywgSUVudW1lcmFibGU8RWRnZT4gZWRnZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdmVydGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KHZlcnRpY2VzKTtcclxuICAgICAgICAgICAgX2VkZ2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpHcmFwaHMuRWRnZT4oZWRnZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoKEFsZ29yaXRobXMuR3JhcGggZywgTGlzdDxWZWN0b3I+IHBvc2l0aW9uLCBib29sIGRpcmVjdGVkID0gdHJ1ZSlcclxuICAgICAgICAgICAgOiB0aGlzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChnLlZlcnRleFdlaWdodCAhPSBudWxsICYmIGcuVmVydGV4V2VpZ2h0LkNvdW50ID09IGcuTilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3ZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oZy5WZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6R3JhcGhzLlZlcnRleD4pKHYgPT4gbmV3IFZlcnRleChwb3NpdGlvblt2XS5YLCBwb3NpdGlvblt2XS5ZLCBnLlZlcnRleFdlaWdodFt2XS5Ub1N0cmluZygpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3ZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oZy5WZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6R3JhcGhzLlZlcnRleD4pKHYgPT4gbmV3IFZlcnRleChwb3NpdGlvblt2XS5YLCBwb3NpdGlvblt2XS5ZKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9lZGdlcyA9IG5ldyBMaXN0PEVkZ2U+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGcuTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBnLk47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZy5EaXJlY3RlZFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlcy5BZGQobmV3IEVkZ2UoX3ZlcnRpY2VzW2ldLCBfdmVydGljZXNbal0sIEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZy5BZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlcy5BZGQobmV3IEVkZ2UoX3ZlcnRpY2VzW2pdLCBfdmVydGljZXNbaV0sIEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZy5BZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlcy5BZGQobmV3IEVkZ2UoX3ZlcnRpY2VzW2ldLCBfdmVydGljZXNbal0sIEVkZ2UuT3JpZW50YXRpb25zLk5vbmUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFBhaW50KEdyYXBoaWNzTGF5ZXIuSUdyYXBoaWNzIGcsIGludCB3aWR0aCwgaW50IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUGFyYW1ldGVyc0RpcnR5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBncmFwaCA9IG5ldyBBbGdvcml0aG1zLkdyYXBoKEdldEVkZ2VXZWlnaHRzKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuID0gVmVydGljZXMuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgVmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmVydGljZXNbaV0uSXNVbml2ZXJzYWwgPSBncmFwaC5EZWdyZWUoaSkgPT0gbiAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBhcmFtZXRlcnNEaXJ0eSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBqaiA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdi5QYXJlbnRJbmRleCA9IGpqKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdi5QYWludChnLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBqaiA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5QYXJlbnRJbmRleCA9IGpqKys7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5QYWludChnLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBHZXRFZGdlV2VpZ2h0cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgd2VpZ2h0cyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3ZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IF92ZXJ0aWNlcy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEVkZ2UgZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRWRnZUV4aXN0cyhfdmVydGljZXNbaV0sIF92ZXJ0aWNlc1tqXSwgb3V0IGUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzLkFkZCgxKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChFZGdlRXhpc3RzKF92ZXJ0aWNlc1tqXSwgX3ZlcnRpY2VzW2ldLCBvdXQgZSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5PcmllbnRhdGlvbiA9PSBFZGdlLk9yaWVudGF0aW9ucy5Ob25lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cy5BZGQoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHMuQWRkKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzLkFkZCgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHdlaWdodHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBNb2RpZnlPcmllbnRhdGlvbihMaXN0PGludD4gZWRnZVdlaWdodHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3ZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IF92ZXJ0aWNlcy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3ID0gZWRnZVdlaWdodHNba107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3ICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IEdldEVkZ2UoX3ZlcnRpY2VzW2ldLCBfdmVydGljZXNbal0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuVjEgPT0gX3ZlcnRpY2VzW2ldICYmIGUuVjIgPT0gX3ZlcnRpY2VzW2pdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodyA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5PcmllbnRhdGlvbiA9IEVkZ2UuT3JpZW50YXRpb25zLkJhY2t3YXJkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuT3JpZW50YXRpb24gPSBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHcgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuT3JpZW50YXRpb24gPSBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuT3JpZW50YXRpb24gPSBFZGdlLk9yaWVudGF0aW9ucy5CYWNrd2FyZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBQYXJhbWV0ZXJzRGlydHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgR3JhcGggQ2xvbmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHMgPSBHcmFwaHNDb3JlLkNvbXBhY3RTZXJpYWxpemVyLlNlcmlhbGl6ZSh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIGcgPSBHcmFwaHNDb3JlLkNvbXBhY3RTZXJpYWxpemVyLkRlc2VyaWFsaXplKHMpO1xyXG4gICAgICAgICAgICBpZiAoZyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgZy5QYXJhbWV0ZXJzRGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShcImNsb25lIGlzIG51bGxcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElIaXR0YWJsZSBIaXRUZXN0KGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHYuSGl0KHgsIHkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZWRnZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLkhpdCh4LCB5KSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBVbnNlbGVjdEFsbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBVbnNlbGVjdEFsbFZlcnRpY2VzKCk7XHJcbiAgICAgICAgICAgIFVuc2VsZWN0QWxsRWRnZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVuc2VsZWN0QWxsVmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgdi5Jc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBVbnNlbGVjdEFsbEVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9lZGdlcylcclxuICAgICAgICAgICAgICAgIGUuSXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2VsZWN0RWRnZXMoSUVudW1lcmFibGU8RWRnZT4gZWRnZXMsIGJvb2wgc3ltbWV0cmljRGlmZmVyZW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFVuc2VsZWN0QWxsVmVydGljZXMoKTtcclxuICAgICAgICAgICAgaWYgKCFzeW1tZXRyaWNEaWZmZXJlbmNlKVxyXG4gICAgICAgICAgICAgICAgVW5zZWxlY3RBbGxFZGdlcygpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZWRnZXMpXHJcbiAgICAgICAgICAgICAgICBlLklzU2VsZWN0ZWQgPSBzeW1tZXRyaWNEaWZmZXJlbmNlID8gIWUuSXNTZWxlY3RlZCA6IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZWxlY3RWZXJ0aWNlcyhJRW51bWVyYWJsZTxWZXJ0ZXg+IHZlcnRpY2VzLCBib29sIHN5bW1ldHJpY0RpZmZlcmVuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBVbnNlbGVjdEFsbEVkZ2VzKCk7XHJcbiAgICAgICAgICAgIGlmICghc3ltbWV0cmljRGlmZmVyZW5jZSlcclxuICAgICAgICAgICAgICAgIFVuc2VsZWN0QWxsVmVydGljZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgdi5Jc1NlbGVjdGVkID0gc3ltbWV0cmljRGlmZmVyZW5jZSA/ICF2LklzU2VsZWN0ZWQgOiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZWxlY3RPYmplY3RzKExpc3Q8R3JhcGhpY3NMYXllci5Cb3g+IHNlbGVjdGlvblBvaW50cywgYm9vbCBzeW1tZXRyaWNEaWZmZXJlbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgUG9seWdvbkNvbnRhaW5lcihzZWxlY3Rpb25Qb2ludHMuVG9BcnJheSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdmVydGljZXNJblBvbHlnb24gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oX3ZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlcnRleCwgYm9vbD4pKHYgPT4gYm91bmRzLkNvbnRhaW5zKG5ldyBHcmFwaGljc0xheWVyLkJveCh2LlgsIHYuWSkpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHZlcnRpY2VzSW5Qb2x5Z29uLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTZWxlY3RWZXJ0aWNlcyh2ZXJ0aWNlc0luUG9seWdvbiwgc3ltbWV0cmljRGlmZmVyZW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVkZ2VzSGl0dGluZ1BvbHlnb24gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6R3JhcGhzLkVkZ2U+KF9lZGdlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5FZGdlLCBib29sPikoZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzZWxlY3Rpb25Qb2ludHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gc2VsZWN0aW9uUG9pbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IHNlbGVjdGlvblBvaW50c1soaSArIDEpICUgc2VsZWN0aW9uUG9pbnRzLkNvdW50XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoVXRpbGl0eS5IYXZlSW50ZXJzZWN0aW9uKHN0YXJ0LCBlbmQsIGUuVjEuTG9jYXRpb24sIGUuVjIuTG9jYXRpb24pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBTZWxlY3RFZGdlcyhlZGdlc0hpdHRpbmdQb2x5Z29uLCBzeW1tZXRyaWNEaWZmZXJlbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgQWRkVmVydGV4KFZlcnRleCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9zaG93VmVydGV4SW5kaWNlcylcclxuICAgICAgICAgICAgICAgIHYuVG9nZ2xlSW5kZXgoKTtcclxuICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICBfdmVydGljZXMuQWRkKHYpO1xyXG5cclxuICAgICAgICAgICAgUGFyYW1ldGVyc0RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIFJlbW92ZVZlcnRleChWZXJ0ZXggdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvcnMgPSBGaW5kTmVpZ2hib3JzKHYpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgeCBpbiBuZWlnaGJvcnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFJlbW92ZUVkZ2UodiwgeCk7XHJcbiAgICAgICAgICAgICAgICBSZW1vdmVFZGdlKHgsIHYpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgIF92ZXJ0aWNlcy5SZW1vdmUodik7XHJcblxyXG4gICAgICAgICAgICBQYXJhbWV0ZXJzRGlydHkgPSBuZWlnaGJvcnMuQ291bnQgPiAwO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5laWdoYm9ycy5Db3VudCA+IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEFkZEVkZ2UoVmVydGV4IHYxLCBWZXJ0ZXggdjIsIGludCBtdWx0aXBsaWNpdHkgPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFkZEVkZ2UodjEsIHYyLCBFZGdlLk9yaWVudGF0aW9ucy5Ob25lLCBtdWx0aXBsaWNpdHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBBZGRFZGdlKFZlcnRleCB2MSwgVmVydGV4IHYyLCBFZGdlLk9yaWVudGF0aW9ucyBvcmllbnRhdGlvbiwgaW50IG11bHRpcGxpY2l0eSA9IDEsIGZsb2F0IHRoaWNrbmVzcyA9IDMsIHN0cmluZyBzdHlsZSA9IFwiXCIsIHN0cmluZyBsYWJlbCA9IFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodjEgPT0gdjIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vdCBhbGxvd2luZyBzZWxmLWxvb3BzIGZvciBub3cuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghRWRnZUV4aXN0cyh2MSwgdjIpICYmICFFZGdlRXhpc3RzKHYyLCB2MSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlZGdlID0gbmV3IEVkZ2UodjEsIHYyLCBvcmllbnRhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZS5NdWx0aXBsaWNpdHkgPSBtdWx0aXBsaWNpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZS5UaGlja25lc3MgPSB0aGlja25lc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZS5TdHlsZSA9IHN0eWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2UuTGFiZWwgPSBsYWJlbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3Nob3dFZGdlSW5kaWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZS5Ub2dnbGVJbmRleCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9lZGdlcy5BZGQoZWRnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgUGFyYW1ldGVyc0RpcnR5ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFJlbW92ZUVkZ2UoVmVydGV4IHYxLCBWZXJ0ZXggdjIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PEVkZ2U+IHRvUmVtb3ZlO1xyXG5cclxuICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvUmVtb3ZlID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkdyYXBocy5FZGdlPihfZWRnZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuRWRnZSwgYm9vbD4pKGUgPT4gZS5WMSA9PSB2MSAmJiBlLlYyID09IHYyKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIHRvUmVtb3ZlKVxyXG4gICAgICAgICAgICAgICAgX2VkZ2VzLlJlbW92ZShlKTtcclxuXHJcbiAgICAgICAgICAgIFBhcmFtZXRlcnNEaXJ0eSA9IHRvUmVtb3ZlLkNvdW50ID4gMDtcclxuICAgICAgICAgICAgcmV0dXJuIHRvUmVtb3ZlLkNvdW50ID4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgRWRnZUV4aXN0cyhWZXJ0ZXggdjEsIFZlcnRleCB2MilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVkZ2UgZWRnZTtcclxuICAgICAgICAgICAgcmV0dXJuIEVkZ2VFeGlzdHModjEsIHYyLCBvdXQgZWRnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEVkZ2VFeGlzdHMoVmVydGV4IHYxLCBWZXJ0ZXggdjIsIG91dCBFZGdlIGVkZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlZGdlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZSA9IGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuVjEgPT0gdjEgJiYgZS5WMiA9PSB2MiAmJiAoZS5PcmllbnRhdGlvbiA9PSBFZGdlLk9yaWVudGF0aW9ucy5Ob25lIHx8IGUuT3JpZW50YXRpb24gPT0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5WMSA9PSB2MiAmJiBlLlYyID09IHYxICYmIGUuT3JpZW50YXRpb24gPT0gRWRnZS5PcmllbnRhdGlvbnMuQmFja3dhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRWRnZSBHZXRFZGdlKFZlcnRleCB2MSwgVmVydGV4IHYyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9lZGdlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5WMSA9PSB2MSAmJiBlLlYyID09IHYyIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuVjEgPT0gdjIgJiYgZS5WMiA9PSB2MSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGggSW5kdWNlZFN1YmdyYXBoKExpc3Q8VmVydGV4PiB2ZXJ0aWNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbmR1Y2VkID0gbmV3IEdyYXBoKCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgaW5kdWNlZC5BZGRWZXJ0ZXgodik7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdjEgaW4gaW5kdWNlZC5WZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYyIGluIGluZHVjZWQuVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRWRnZSBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChFZGdlRXhpc3RzKHYxLCB2Miwgb3V0IGUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmR1Y2VkLkFkZEVkZ2UodjEsIHYyLCBlLk9yaWVudGF0aW9uICE9IEVkZ2UuT3JpZW50YXRpb25zLk5vbmUgPyBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkIDogRWRnZS5PcmllbnRhdGlvbnMuTm9uZSwgZS5NdWx0aXBsaWNpdHksIGUuVGhpY2tuZXNzLCBlLlN0eWxlLCBlLkxhYmVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGluZHVjZWQuQ2xvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERpc2pvaW50VW5pb24oR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGcuVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICBBZGRWZXJ0ZXgodik7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBnLkVkZ2VzKVxyXG4gICAgICAgICAgICAgICAgQWRkRWRnZShlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQWRkRWRnZShFZGdlIGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBZGRFZGdlKGUuVjEsIGUuVjIsIGUuT3JpZW50YXRpb24sIE1hdGguTWF4KDEsIGUuTXVsdGlwbGljaXR5KSwgZS5UaGlja25lc3MsIGUuU3R5bGUsIGUuTGFiZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8VmVydGV4PiBGaW5kTmVpZ2hib3JzKFZlcnRleCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG5laWdoYm9ycyA9IG5ldyBMaXN0PFZlcnRleD4oKTtcclxuXHJcbiAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuVjEgPT0gdilcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzLkFkZChlLlYyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5WMiA9PSB2KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnMuQWRkKGUuVjEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmVpZ2hib3JzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVHJhbnNsYXRlKFZlY3RvciBvZmZzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHYuWCArPSBvZmZzZXQuWDtcclxuICAgICAgICAgICAgICAgICAgICB2LlkgKz0gb2Zmc2V0Llk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgX3Nob3dWZXJ0ZXhJbmRpY2VzO1xyXG4gICAgICAgIGJvb2wgX3Nob3dFZGdlSW5kaWNlcztcclxuICAgICAgICBwdWJsaWMgdm9pZCBUb2dnbGVFZGdlSW5kaWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfc2hvd0VkZ2VJbmRpY2VzID0gIV9zaG93RWRnZUluZGljZXM7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhIGluIEVkZ2VzKVxyXG4gICAgICAgICAgICAgICAgYS5Ub2dnbGVJbmRleCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVG9nZ2xlVmVydGV4SW5kaWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfc2hvd1ZlcnRleEluZGljZXMgPSAhX3Nob3dWZXJ0ZXhJbmRpY2VzO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYSBpbiBWZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIGEuVG9nZ2xlSW5kZXgoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgR3JhcGhpY3NMYXllcjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIEdyYXBoc0NvcmU7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHcmFwaENhbnZhcyA6IEdyYXBoaWNzTGF5ZXIuSVBhaW50YWJsZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBldmVudCBBY3Rpb248R3JhcGg+IEdyYXBoTW9kaWZpZWQ7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxzdHJpbmc+IE5hbWVNb2RpZmllZDtcclxuXHJcbiAgICAgICAgY29uc3QgaW50IERlZmF1bHRCYXNlVmlld1NjYWxlID0gODAwO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgQmFzZVZpZXdTY2FsZSA9IERlZmF1bHRCYXNlVmlld1NjYWxlO1xyXG4gICAgICAgIGNvbnN0IGludCBNYXhab29tU2NhbGUgPSA2MDAwO1xyXG4gICAgICAgIGRvdWJsZSBab29tRGVsdGEgPSAwLjE1O1xyXG4gICAgICAgIGRvdWJsZSBNaW5ab29tID0gMC4xNTtcclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0Wm9vbURlbHRhKGRvdWJsZSBkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgWm9vbURlbHRhID0gZDtcclxuICAgICAgICAgICAgTWluWm9vbSA9IGQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIF96b29tRml0TmV4dFBhaW50O1xyXG4gICAgICAgIGJvb2wgX3NuYXBUb0dyaWQgPSB0cnVlO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZG91YmxlIF9ncmlkU3RlcCA9IDAuMDQ7XHJcbiAgICAgICAgYm9vbCBfZHJhd0dyaWQgPSB0cnVlO1xyXG4gICAgICAgIHB1YmxpYyBib29sIFNuYXBUb0dyaWQgeyBnZXQgeyByZXR1cm4gX3NuYXBUb0dyaWQ7IH0gc2V0IHsgdmFyIG5lZWRSZWRyYXcgPSB2YWx1ZSAmJiAhX3NuYXBUb0dyaWQ7IF9zbmFwVG9HcmlkID0gdmFsdWU7IGlmIChuZWVkUmVkcmF3KSBJbnZhbGlkYXRlKCk7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgR3JpZFN0ZXAgeyBnZXQgeyByZXR1cm4gX2dyaWRTdGVwOyB9IHNldCB7IHZhciBuZWVkUmVkcmF3ID0gU25hcFRvR3JpZCAmJiB2YWx1ZSAhPSBfZ3JpZFN0ZXA7IF9ncmlkU3RlcCA9IHZhbHVlOyBpZiAobmVlZFJlZHJhdykgSW52YWxpZGF0ZSgpOyB9IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBEcmF3R3JpZCB7IGdldCB7IHJldHVybiBfZHJhd0dyaWQ7IH0gc2V0IHsgdmFyIG5lZWRSZWRyYXcgPSBfZHJhd0dyaWQgIT0gdmFsdWU7IF9kcmF3R3JpZCA9IHZhbHVlOyBpZiAobmVlZFJlZHJhdykgSW52YWxpZGF0ZSgpOyB9IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBIYXNQYWludGVkIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBHcmFwaCBfZ3JhcGg7XHJcblxyXG4gICAgICAgIGludCBXaWR0aCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgaW50IEhlaWdodCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgICNyZWdpb24gZHJhZ2dpbmcgdmVydGV4IHZhcmlhYmxlc1xyXG4gICAgICAgIFZlcnRleCBfRHJhZ2dlZFZlcnRleCA9IG51bGw7XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIGRyYWdnaW5nIHNlbGVjdGlvbiB2YXJpYWJsZXNcclxuICAgICAgICBMaXN0PEJveD4gX3NlbGVjdGlvblBvaW50cyA9IG5ldyBMaXN0PEJveD4oKTtcclxuICAgICAgICBvYmplY3QgX1NlbGVjdGlvblBvaW50c1Rva2VuID0gbmV3IG9iamVjdCgpO1xyXG4gICAgICAgIGJvb2wgX2NvbnRyb2xXYXNEb3duO1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBjaGlsZHJlbiBpdGVtc1xyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBHcmFwaCB7IGdldCB7IHJldHVybiBfZ3JhcGg7IH0gfVxyXG4gICAgICAgIElDYW52YXMgX2NhbnZhcztcclxuICAgICAgICBwdWJsaWMgSUNhbnZhcyBDYW52YXMgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2NhbnZhczsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2NhbnZhcyA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIF9jYW52YXMuTW91c2VNb3ZlZCArPSBPbk1vdXNlTW92ZTtcclxuICAgICAgICAgICAgICAgIF9jYW52YXMuTW91c2VCdXR0b25Eb3duICs9IE9uTW91c2VEb3duO1xyXG4gICAgICAgICAgICAgICAgX2NhbnZhcy5Nb3VzZUJ1dHRvblVwICs9IE9uTW91c2VVcDtcclxuICAgICAgICAgICAgICAgIF9jYW52YXMuTW91c2VCdXR0b25Eb3VibGVDbGlja2VkICs9IE9uTW91c2VEb3VibGVDbGljaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIGRvdWJsZSBab29tXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IF9ab29tKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBfWm9vbSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gKGludCkoX1pvb20gKiBCYXNlVmlld1NjYWxlKTtcclxuICAgICAgICAgICAgICAgIGlmIChzY2FsZSA+IE1heFpvb21TY2FsZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZSA9IE1heFpvb21TY2FsZTtcclxuICAgICAgICAgICAgICAgICAgICBfWm9vbSA9IHNjYWxlIC8gQmFzZVZpZXdTY2FsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBWaWV3U2NhbGUgPSBzY2FsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IFZpZXdTY2FsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdmlld1NjYWxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByb3RlY3RlZCBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IF92aWV3U2NhbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIF92aWV3U2NhbGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0VtcHR5IHsgZ2V0IHsgcmV0dXJuIF9ncmFwaC5WZXJ0aWNlcy5Db3VudCA8PSAwOyB9IH1cclxuXHJcbiAgICAgICAgU3RhdGVzIF9zdGF0ZSA9IFN0YXRlcy5JZGxlO1xyXG4gICAgICAgIGludCBfdmlld1NjYWxlID0gRGVmYXVsdEJhc2VWaWV3U2NhbGU7XHJcbiAgICAgICAgZG91YmxlIF9ab29tID0gMS4wO1xyXG4gICAgICAgIEZ1bmM8c3RyaW5nLCBHcmFwaD4gX3NlY29uZGFyeUNvbnZlcnRlcjtcclxuXHJcbiAgICAgICAgTGlzdDxIaXN0b3JpY2FsR3JhcGg+IF9oaXN0b3J5ID0gbmV3IExpc3Q8SGlzdG9yaWNhbEdyYXBoPigpO1xyXG4gICAgICAgIGludCBfaGlzdG9yeUluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEFSR0IgU2VsZWN0aW9uUGVuQ29sb3IgPSBuZXcgQVJHQigwLCAwLCAyNTUpO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBBUkdCIEdyaWRQZW5Db2xvciA9IG5ldyBBUkdCKDc1LCAwLCAxMCwgMCk7XHJcblxyXG4gICAgICAgIGVudW0gU3RhdGVzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJZGxlLFxyXG4gICAgICAgICAgICBEcmFnZ2luZ1ZlcnRleCxcclxuICAgICAgICAgICAgRHJhZ2dpbmdTZWxlY3Rpb25SZWdpb24sXHJcbiAgICAgICAgICAgIERyYWdnaW5nU2VsZWN0ZWRWZXJ0aWNlc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEFSR0IgQmFja2dyb3VuZENvbG9yID0gbmV3IEFSR0IoMHhmNywgMHhmNywgMHhmNyk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaENhbnZhcyhHcmFwaCBncmFwaCwgIEZ1bmM8c3RyaW5nLCBHcmFwaD4gc2Vjb25kYXJ5Q29udmVydGVyID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9ncmFwaCA9IGdyYXBoICE9IG51bGwgPyBncmFwaCA6IG5ldyBHcmFwaCgpO1xyXG4gICAgICAgICAgICBfc2Vjb25kYXJ5Q29udmVydGVyID0gc2Vjb25kYXJ5Q29udmVydGVyO1xyXG4gICAgICAgICAgICBfaGlzdG9yeS5BZGQobmV3IEhpc3RvcmljYWxHcmFwaCgpIHsgR3JhcGggPSBfZ3JhcGguQ2xvbmUoKSwgWm9vbSA9IF9ab29tLCBWaWV3U2NhbGUgPSBfdmlld1NjYWxlIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgSW52YWxpZGF0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQ2FudmFzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBDYW52YXMuSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgR3JhcGhDaGFuZ2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfaGlzdG9yeS5Db3VudCAtIF9oaXN0b3J5SW5kZXggLSAxID4gMClcclxuICAgICAgICAgICAgICAgIF9oaXN0b3J5LlJlbW92ZVJhbmdlKF9oaXN0b3J5SW5kZXggKyAxLCBfaGlzdG9yeS5Db3VudCAtIF9oaXN0b3J5SW5kZXggLSAxKTtcclxuXHJcbiAgICAgICAgICAgIF9oaXN0b3J5LkFkZChuZXcgSGlzdG9yaWNhbEdyYXBoKCkgeyBHcmFwaCA9IF9ncmFwaC5DbG9uZSgpLCBab29tID0gX1pvb20sIFZpZXdTY2FsZSA9IF92aWV3U2NhbGUgfSk7XHJcbiAgICAgICAgICAgIF9oaXN0b3J5SW5kZXggPSBfaGlzdG9yeS5Db3VudCAtIDE7XHJcblxyXG4gICAgICAgICAgICBpZiAoR3JhcGhNb2RpZmllZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgR3JhcGhNb2RpZmllZChHcmFwaCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBEb1VuZG8oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9oaXN0b3J5SW5kZXggPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIF9oaXN0b3J5SW5kZXgtLTtcclxuICAgICAgICAgICAgT2JleUhpc3RvcnkoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBfaGlzdG9yeUluZGV4ID4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgRG9SZWRvKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfaGlzdG9yeUluZGV4ID49IF9oaXN0b3J5LkNvdW50IC0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIF9oaXN0b3J5SW5kZXgrKztcclxuICAgICAgICAgICAgT2JleUhpc3RvcnkoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBfaGlzdG9yeUluZGV4IDwgX2hpc3RvcnkuQ291bnQgLSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBPYmV5SGlzdG9yeSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZ3JhcGggPSBfaGlzdG9yeVtfaGlzdG9yeUluZGV4XS5HcmFwaC5DbG9uZSgpO1xyXG4gICAgICAgICAgICBWaWV3U2NhbGUgPSBfaGlzdG9yeVtfaGlzdG9yeUluZGV4XS5WaWV3U2NhbGU7XHJcbiAgICAgICAgICAgIFpvb20gPSBfaGlzdG9yeVtfaGlzdG9yeUluZGV4XS5ab29tO1xyXG4gICAgICAgICAgICBfZ3JhcGguUGFyYW1ldGVyc0RpcnR5ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChHcmFwaE1vZGlmaWVkICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBHcmFwaE1vZGlmaWVkKEdyYXBoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gYWN0aW9uc1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFNhdmUoc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZ3JhcGguTmFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiOy8vIF9ncmFwaC5TZXJpYWxpemUoKTtcclxuICAgICAgICB9XHJcbiAgICAgXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9ab29tKGludCBhbW91bnQsIEJveCBsb2NhdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB3aWR0aCA9IFdpZHRoO1xyXG4gICAgICAgICAgICBpbnQgaGVpZ2h0ID0gSGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgdmFyIG9sZENlbnRlciA9IG5ldyBWZWN0b3IoKGRvdWJsZSl3aWR0aCAvIChkb3VibGUpX3ZpZXdTY2FsZSAqIGxvY2F0aW9uLlgsIChkb3VibGUpaGVpZ2h0IC8gKGRvdWJsZSlfdmlld1NjYWxlICogbG9jYXRpb24uWSk7XHJcblxyXG4gICAgICAgICAgICBab29tID0gTWF0aC5NYXgoTWluWm9vbSwgX1pvb20gKyBab29tRGVsdGEgKiBhbW91bnQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNlbnRlciA9IG5ldyBWZWN0b3IoKGRvdWJsZSl3aWR0aCAvIChkb3VibGUpX3ZpZXdTY2FsZSAqIGxvY2F0aW9uLlgsIChkb3VibGUpaGVpZ2h0IC8gKGRvdWJsZSlfdmlld1NjYWxlICogbG9jYXRpb24uWSk7XHJcblxyXG4gICAgICAgICAgICBfZ3JhcGguVHJhbnNsYXRlKGNlbnRlciAtIG9sZENlbnRlcik7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb1pvb21GaXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9ncmFwaC5WZXJ0aWNlcy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBab29tID0gMTtcclxuICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50IHdpZHRoID0gV2lkdGg7XHJcbiAgICAgICAgICAgIGludCBoZWlnaHQgPSBIZWlnaHQ7XHJcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBfZ3JhcGguU2VsZWN0ZWRCb3VuZGluZ1JlY3RhbmdsZTtcclxuICAgICAgICAgICAgdmFyIGMgPSBuZXcgVmVjdG9yKGJvdW5kcy5MZWZ0ICsgYm91bmRzLldpZHRoIC8gMiwgYm91bmRzLlRvcCArIGJvdW5kcy5IZWlnaHQgLyAyKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhY3R1YWwgPSBNYXRoLk1pbih3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgWm9vbSA9IDAuOSAqIGFjdHVhbCAvIE1hdGguTWF4KGJvdW5kcy5XaWR0aCwgYm91bmRzLkhlaWdodCkgLyBCYXNlVmlld1NjYWxlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNlbnRlciA9IG5ldyBWZWN0b3IoKGRvdWJsZSl3aWR0aCAvIChkb3VibGUpX3ZpZXdTY2FsZSAqIDAuNSwgKGRvdWJsZSloZWlnaHQgLyAoZG91YmxlKV92aWV3U2NhbGUgKiAwLjUpO1xyXG4gICAgICAgICAgICBfZ3JhcGguVHJhbnNsYXRlKGNlbnRlciAtIGMpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9EZWxldGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX2dyYXBoLlNlbGVjdGVkVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlJlbW92ZVZlcnRleCh2KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKF9ncmFwaC5TZWxlY3RlZEVkZ2VzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2dyYXBoLlNlbGVjdGVkRWRnZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlJlbW92ZUVkZ2UoZS5WMSwgZS5WMik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb1JldmVyc2VTZWxlY3RlZEVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfZ3JhcGguU2VsZWN0ZWRFZGdlcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9ncmFwaC5TZWxlY3RlZEVkZ2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvbyA9IGUuT3JpZW50YXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9vID09IEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9vID0gRWRnZS5PcmllbnRhdGlvbnMuQmFja3dhcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob28gPT0gRWRnZS5PcmllbnRhdGlvbnMuQmFja3dhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9vID0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZS5PcmllbnRhdGlvbiA9IG9vO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb1JvdGF0ZVNlbGVjdGVkRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9ncmFwaC5TZWxlY3RlZEVkZ2VzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2dyYXBoLlNlbGVjdGVkRWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9vID0gZS5PcmllbnRhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob28gPT0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgb28gPSBFZGdlLk9yaWVudGF0aW9ucy5CYWNrd2FyZDtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbyA9PSBFZGdlLk9yaWVudGF0aW9ucy5CYWNrd2FyZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgb28gPSBFZGdlLk9yaWVudGF0aW9ucy5Ob25lO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9vID09IEVkZ2UuT3JpZW50YXRpb25zLk5vbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9vID0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZS5PcmllbnRhdGlvbiA9IG9vO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb0N1dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEb0NvcHkoKTtcclxuICAgICAgICAgICAgRG9EZWxldGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRG9Db3B5KGJvb2wgdmVyYm9zZSA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGggPSAgX2dyYXBoLkluZHVjZWRTdWJncmFwaChfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wYWN0U2VyaWFsaXplci5TZXJpYWxpemUoaCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgdm9pZCBEb1Bhc3RlKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR3JhcGggZyA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChzLkNvbnRhaW5zKFwidGlrenBpY3R1cmVcIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vZyA9IFRlWENvbnZlcnRlci5Gcm9tVGlreihzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChDb21wYWN0U2VyaWFsaXplci5Mb29rc0xpa2VBU2VyaWFsaXplZEdyYXBoKHMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnID0gQ29tcGFjdFNlcmlhbGl6ZXIuRGVzZXJpYWxpemUocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL2cgPSBHcmFwaC5EZXNlcmlhbGl6ZShzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGcgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2dyYXBoLkRpc2pvaW50VW5pb24oZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8c3RyaW5nPihzLlRyaW0oKS5TcGxpdCgnICcpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgYm9vbD4pKHggPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5TdGFydHNXaXRoKFwiW1wiKSB8fCBpbnQuVHJ5UGFyc2UoeCwgb3V0IGQpO1xyXG4gICAgICAgICAgICAgICAgfSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2cgPSBHcmFwaElPLkdyYXBoRnJvbUVkZ2VXZWlnaHRTdHJpbmcocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGcgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5EaXNqb2ludFVuaW9uKGcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2cgPSBHcmFwaElPLkdyYXBoRnJvbUdyYXBoNihzLlRyaW0oKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW1wdHkgPSBfZ3JhcGguVmVydGljZXMuQ291bnQgPD0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLkRpc2pvaW50VW5pb24oZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW1wdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOYW1lTW9kaWZpZWQoZy5OYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvQ29tcGxlbWVudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYxID0gX2dyYXBoLlNlbGVjdGVkVmVydGljZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYyID0gX2dyYXBoLlNlbGVjdGVkVmVydGljZXNbal07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlZGdlRXhpc3RzID0gX2dyYXBoLkVkZ2VFeGlzdHModjEsIHYyKSB8fCBfZ3JhcGguRWRnZUV4aXN0cyh2MiwgdjEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWRnZUV4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5SZW1vdmVFZGdlKHYxLCB2Mik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5SZW1vdmVFZGdlKHYyLCB2MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5BZGRFZGdlKHYxLCB2Mik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcblxyXG4gICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBEb1NxdWFyZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBHcmFwaCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZlcnRleE1hcCA9IG5ldyBEaWN0aW9uYXJ5PFZlcnRleCwgVmVydGV4PigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfZ3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICB2YXIgdyA9IG5ldyBWZXJ0ZXgodi5YLCB2LlksIHYuTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgIGcuQWRkVmVydGV4KHcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZlcnRleE1hcFt2XSA9IHc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9ncmFwaC5WZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHEgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlVuaW9uPGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oX2dyYXBoLkZpbmROZWlnaGJvcnModiksbmV3W10geyB2IH0pLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcS5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IHEuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGcuQWRkRWRnZSh2ZXJ0ZXhNYXBbcVtpXV0sIHZlcnRleE1hcFtxW2pdXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBEb0xpbmVHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBHcmFwaCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVkZ2VUb0NsaXF1ZU1hcCA9IG5ldyBEaWN0aW9uYXJ5PEVkZ2UsIExpc3Q8VmVydGV4Pj4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2dyYXBoLkVkZ2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2xpcXVlID0gbmV3IExpc3Q8VmVydGV4PigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZS5NdWx0aXBsaWNpdHk7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IG5ldyBWZXJ0ZXgoKGUuVjEuWCArIGUuVjIuWCkgLyAyLCAoZS5WMS5ZICsgZS5WMi5ZKSAvIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGcuQWRkVmVydGV4KHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIHYuTGFiZWwgPSBlLkxhYmVsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgb3RoZXIgaW4gY2xpcXVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnLkFkZEVkZ2Uob3RoZXIsIHYpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbGlxdWUuQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGVkZ2VUb0NsaXF1ZU1hcFtlXSA9IGNsaXF1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZ3JhcGguRWRnZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgX2dyYXBoLkVkZ2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9ncmFwaC5FZGdlc1tpXS5NZWV0cyhfZ3JhcGguRWRnZXNbal0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYxIGluIGVkZ2VUb0NsaXF1ZU1hcFtfZ3JhcGguRWRnZXNbaV1dKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdjIgaW4gZWRnZVRvQ2xpcXVlTWFwW19ncmFwaC5FZGdlc1tqXV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5BZGRFZGdlKHYxLCB2Mik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9Db250cmFjdFNlbGVjdGVkU3ViZ3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gX2dyYXBoLlNlbGVjdGVkVmVydGljZXM7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZC5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyIHggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkF2ZXJhZ2U8Z2xvYmFsOjpHcmFwaHMuVmVydGV4PihzZWxlY3RlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsIGRvdWJsZT4pKHogPT4gei5YKSk7XHJcbiAgICAgICAgICAgIHZhciB5ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BdmVyYWdlPGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oc2VsZWN0ZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVydGV4LCBkb3VibGU+KSh6ID0+IHouWSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbnRyYWN0ZWRWZXJ0ZXggPSBuZXcgVmVydGV4KHgsIHkpO1xyXG4gICAgICAgICAgICBfZ3JhcGguQWRkVmVydGV4KGNvbnRyYWN0ZWRWZXJ0ZXgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5laWdoYm9ycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsZ2xvYmFsOjpHcmFwaHMuVmVydGV4PihzZWxlY3RlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpHcmFwaHMuVmVydGV4Pj4pKHYgPT4gX2dyYXBoLkZpbmROZWlnaGJvcnModikpKS5EaXN0aW5jdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG5laWdoYm9yIGluIG5laWdoYm9ycylcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5BZGRFZGdlKGNvbnRyYWN0ZWRWZXJ0ZXgsIG5laWdoYm9yKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHNlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLlJlbW92ZVZlcnRleCh2KTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9JbmRleExhYmVsaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gbmV3IEFsZ29yaXRobXMuR3JhcGgoX2dyYXBoLkdldEVkZ2VXZWlnaHRzKCkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZ3JhcGguVmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlc1tpXS5MYWJlbCA9IGkuVG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvRGVncmVlTGFiZWxpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBuZXcgQWxnb3JpdGhtcy5HcmFwaChfZ3JhcGguR2V0RWRnZVdlaWdodHMoKSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9ncmFwaC5WZXJ0aWNlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzW2ldLkxhYmVsID0gZy5EZWdyZWUoaSkuVG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvSW5EZWdyZWVMYWJlbGluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBBbGdvcml0aG1zLkdyYXBoKF9ncmFwaC5HZXRFZGdlV2VpZ2h0cygpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2dyYXBoLlZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXNbaV0uTGFiZWwgPSBnLkluRGVncmVlKGkpLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb091dERlZ3JlZUxhYmVsaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gbmV3IEFsZ29yaXRobXMuR3JhcGgoX2dyYXBoLkdldEVkZ2VXZWlnaHRzKCkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZ3JhcGguVmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlc1tpXS5MYWJlbCA9IGcuT3V0RGVncmVlKGkpLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb091dERlZ3JlZVBsdXNPbmVMYWJlbGluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBBbGdvcml0aG1zLkdyYXBoKF9ncmFwaC5HZXRFZGdlV2VpZ2h0cygpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2dyYXBoLlZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXNbaV0uTGFiZWwgPSAoZy5PdXREZWdyZWUoaSkgKyAxKS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9DbGVhckxhYmVscyhzdHJpbmcgcyA9IFwiXCIsIElFbnVtZXJhYmxlPGludD4gdmVydGljZXMgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHZlcnRpY2VzID09IG51bGwgfHwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHZlcnRpY2VzKSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIF9ncmFwaC5WZXJ0aWNlcy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiB2ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlc1t2XS5MYWJlbCA9IHM7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9TbmFwVG9HcmlkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChHcmlkU3RlcCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX2dyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2LlggPSAoZmxvYXQpKF9ncmlkU3RlcCAqIE1hdGguUm91bmQodi5YIC8gX2dyaWRTdGVwKSk7XHJcbiAgICAgICAgICAgICAgICB2LlkgPSAoZmxvYXQpKF9ncmlkU3RlcCAqIE1hdGguUm91bmQodi5ZIC8gX2dyaWRTdGVwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICB2b2lkIFBhaW50R3JpZChJR3JhcGhpY3MgZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghRHJhd0dyaWQgfHwgR3JpZFN0ZXAgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHZhciB4ID0gMC4wO1xyXG4gICAgICAgICAgICB3aGlsZSAoeCA8PSBXaWR0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZy5EcmF3TGluZShHcmlkUGVuQ29sb3IsIHgsIDAsIHgsIEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB4ICs9IEdyaWRTdGVwICogX3ZpZXdTY2FsZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHkgPSAwLjA7XHJcbiAgICAgICAgICAgIHdoaWxlICh5IDw9IEhlaWdodClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZy5EcmF3TGluZShHcmlkUGVuQ29sb3IsIDAsIHksIFdpZHRoLCB5KTtcclxuICAgICAgICAgICAgICAgIHkgKz0gR3JpZFN0ZXAgKiBfdmlld1NjYWxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJSGl0dGFibGUgR2V0SGl0KGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfZ3JhcGguSGl0VGVzdCh4LCB5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNsYXNzIEhpc3RvcmljYWxHcmFwaFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIEdyYXBoIEdyYXBoIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgICAgcHVibGljIGludCBWaWV3U2NhbGUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICAgICBwdWJsaWMgZG91YmxlIFpvb20geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUGFpbnQoR3JhcGhpY3NMYXllci5JR3JhcGhpY3MgZywgaW50IHdpZHRoLCBpbnQgaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHdpZHRoID09IDAgfHwgaGVpZ2h0ID09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgV2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgICAgIEhlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoU25hcFRvR3JpZClcclxuICAgICAgICAgICAgICAgICAgICBEb1NuYXBUb0dyaWQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBnLkNsZWFyKEJhY2tncm91bmRDb2xvcik7XHJcbiAgICAgICAgICAgICAgICBQYWludEdyaWQoZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLlBhaW50KGcsIF92aWV3U2NhbGUsIF92aWV3U2NhbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX3N0YXRlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLklkbGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nVmVydGV4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGlvblJlZ2lvbjpcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTGlzdDxCb3g+IHNlbGVjdGlvblBvaW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKF9TZWxlY3Rpb25Qb2ludHNUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Qb2ludHMgPSBuZXcgTGlzdDxCb3g+KF9zZWxlY3Rpb25Qb2ludHMuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwIGluIF9zZWxlY3Rpb25Qb2ludHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblBvaW50cy5BZGQobmV3IEJveChwLlggKiBfdmlld1NjYWxlLCBwLlkgKiBfdmlld1NjYWxlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblBvaW50cy5Db3VudCA+IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5EcmF3TGluZXMoU2VsZWN0aW9uUGVuQ29sb3IsIHNlbGVjdGlvblBvaW50cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCB7IH1cclxuXHJcbiAgICAgICAgICAgIEhhc1BhaW50ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKF96b29tRml0TmV4dFBhaW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfem9vbUZpdE5leHRQYWludCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgRG9ab29tRml0KCk7XHJcbiAgICAgICAgICAgICAgICBEb1pvb20oNCwgbmV3IEdyYXBoaWNzTGF5ZXIuQm94KDAuNSwgMC41KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE9uTW91c2VNb3ZlKGRvdWJsZSBYLCBkb3VibGUgWSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gWCAvIF92aWV3U2NhbGU7XHJcbiAgICAgICAgICAgIHZhciB5ID0gWSAvIF92aWV3U2NhbGU7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKF9zdGF0ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuSWRsZTpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nVmVydGV4OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX0RyYWdnZWRWZXJ0ZXguWCA9IF9EcmFnZ2VkVmVydGV4LkRyYWdPZmZzZXQuWCArIHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9EcmFnZ2VkVmVydGV4LlkgPSBfRHJhZ2dlZFZlcnRleC5EcmFnT2Zmc2V0LlkgKyB5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGlvblJlZ2lvbjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKF9TZWxlY3Rpb25Qb2ludHNUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGVjdGlvblBvaW50cy5BZGQobmV3IEJveCh4LCB5KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nU2VsZWN0ZWRWZXJ0aWNlczpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LlggPSB2LkRyYWdPZmZzZXQuWCArIHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LlkgPSB2LkRyYWdPZmZzZXQuWSArIHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBUb2dnbGVFZGdlSW5kaWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZ3JhcGguVG9nZ2xlRWRnZUluZGljZXMoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJvdGF0ZVZlcnRleEluZGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcztcclxuICAgICAgICAgICAgaWYgKHguQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHggPSBfZ3JhcGguVmVydGljZXM7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYSBpbiB4KVxyXG4gICAgICAgICAgICAgICAgYS5Sb3RhdGVJbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUm90YXRlRWRnZUluZGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBfZ3JhcGguU2VsZWN0ZWRFZGdlcztcclxuICAgICAgICAgICAgaWYgKHguQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHggPSBfZ3JhcGguRWRnZXM7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYSBpbiB4KVxyXG4gICAgICAgICAgICAgICAgYS5Sb3RhdGVJbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0SW5kZXgoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzO1xyXG4gICAgICAgICAgICBpZiAoeC5Db3VudCA9PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdiA9IHhbMF07XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IF9ncmFwaC5WZXJ0aWNlcy5JbmRleE9mKHYpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgIT0gbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXMuUmVtb3ZlKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuID49IF9ncmFwaC5WZXJ0aWNlcy5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlcy5BZGQodik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG4gPCBpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzLkluc2VydChuLCB2KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzLkluc2VydChuLCB2KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IF9ncmFwaC5TZWxlY3RlZEVkZ2VzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkuQ291bnQgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IHlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBfZ3JhcGguRWRnZXMuSW5kZXhPZih2KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPSBuKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLkVkZ2VzLlJlbW92ZSh2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPj0gX2dyYXBoLkVkZ2VzLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguRWRnZXMuQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG4gPCBpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguRWRnZXMuSW5zZXJ0KG4sIHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLkVkZ2VzLkluc2VydChuLCB2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVG9nZ2xlVmVydGV4SW5kaWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZ3JhcGguVG9nZ2xlVmVydGV4SW5kaWNlcygpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgT25Nb3VzZURvd24oZG91YmxlIFgsIGRvdWJsZSBZLCBHcmFwaGljc0xheWVyLk1vdXNlQnV0dG9uIGJ1dHRvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jb250cm9sV2FzRG93biA9IENhbnZhcy5Jc0NvbnRyb2xLZXlEb3duO1xyXG5cclxuICAgICAgICAgICAgdmFyIHggPSBYIC8gX3ZpZXdTY2FsZTtcclxuICAgICAgICAgICAgdmFyIHkgPSBZIC8gX3ZpZXdTY2FsZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvID0gR2V0SGl0KHgsIHkpO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChfc3RhdGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLklkbGU6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uID09IE1vdXNlQnV0dG9uLkxlZnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGVjdGlvblBvaW50cy5DbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxlY3Rpb25Qb2ludHMuQWRkKG5ldyBCb3goeCwgeSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGF0ZSA9IFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGlvblJlZ2lvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG8gaXMgVmVydGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKFZlcnRleClvKS5Jc1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoVmVydGV4IHYgaW4gX2dyYXBoLlNlbGVjdGVkVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuRHJhZ09mZnNldCA9IG5ldyBCb3godi5YIC0geCwgdi5ZIC0geSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGF0ZSA9IFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGVkVmVydGljZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9EcmFnZ2VkVmVydGV4ID0gKFZlcnRleClvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRHJhZ2dlZFZlcnRleC5EcmFnT2Zmc2V0ID0gbmV3IEJveChfRHJhZ2dlZFZlcnRleC5YIC0geCwgX0RyYWdnZWRWZXJ0ZXguWSAtIHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhdGUgPSBTdGF0ZXMuRHJhZ2dpbmdWZXJ0ZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobyBpcyBFZGdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJ1dHRvbiA9PSBNb3VzZUJ1dHRvbi5SaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG8gaXMgVmVydGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobyBpcyBFZGdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1ZlcnRleDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nU2VsZWN0aW9uUmVnaW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBPbk1vdXNlVXAoZG91YmxlIFgsIGRvdWJsZSBZLCBHcmFwaGljc0xheWVyLk1vdXNlQnV0dG9uIGJ1dHRvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gWCAvIF92aWV3U2NhbGU7XHJcbiAgICAgICAgICAgIHZhciB5ID0gWSAvIF92aWV3U2NhbGU7XHJcblxyXG4gICAgICAgICAgICB2YXIgbyA9IEdldEhpdCh4LCB5KTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoX3N0YXRlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5JZGxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdWZXJ0ZXg6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uID09IE1vdXNlQnV0dG9uLkxlZnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGF0ZSA9IFN0YXRlcy5JZGxlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTbmFwVG9HcmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvU25hcFRvR3JpZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nU2VsZWN0aW9uUmVnaW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbiA9PSBNb3VzZUJ1dHRvbi5MZWZ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhdGUgPSBTdGF0ZXMuSWRsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaXN0PEJveD4gc2VsZWN0aW9uUG9pbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jayAoX1NlbGVjdGlvblBvaW50c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblBvaW50cyA9IG5ldyBMaXN0PEJveD4oX3NlbGVjdGlvblBvaW50cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25Qb2ludHMuQ291bnQgPiAyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlNlbGVjdE9iamVjdHMoc2VsZWN0aW9uUG9pbnRzLCBfY29udHJvbFdhc0Rvd24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FudmFzLlNlbGVjdGVkT2JqZWN0cyA9IF9ncmFwaC5TZWxlY3RlZEl0ZW1zLkNhc3Q8b2JqZWN0PigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdTZWxlY3RlZFZlcnRpY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbiA9PSBNb3VzZUJ1dHRvbi5MZWZ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhdGUgPSBTdGF0ZXMuSWRsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgT25Nb3VzZURvdWJsZUNsaWNrKGRvdWJsZSBYLCBkb3VibGUgWSwgR3JhcGhpY3NMYXllci5Nb3VzZUJ1dHRvbiBidXR0b24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IFggLyBfdmlld1NjYWxlO1xyXG4gICAgICAgICAgICB2YXIgeSA9IFkgLyBfdmlld1NjYWxlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG8gPSBHZXRIaXQoeCwgeSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZ3JhcGhDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChfc3RhdGUgPT0gU3RhdGVzLklkbGUgJiYgIUNhbnZhcy5Jc0NvbnRyb2xLZXlEb3duKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uID09IE1vdXNlQnV0dG9uLkxlZnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gbmV3IFZlcnRleCh4LCB5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9ncmFwaC5BZGRWZXJ0ZXgodikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFwaENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvIGlzIFZlcnRleClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmRWZXJ0ZXggPSAoVmVydGV4KW87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2dyYXBoLkFkZEVkZ2UodiwgZW5kVmVydGV4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFwaENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYnV0dG9uID09IE1vdXNlQnV0dG9uLlJpZ2h0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvIGlzIFZlcnRleClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZ3JhcGguUmVtb3ZlVmVydGV4KChWZXJ0ZXgpbykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFwaENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGdyYXBoQ2hhbmdlZClcclxuICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgWm9vbUZpdE5leHRQYWludCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfem9vbUZpdE5leHRQYWludCA9IHRydWU7XHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG51c2luZyBTeXN0ZW0uQ29tcG9uZW50TW9kZWw7XHJcbnVzaW5nIFN5c3RlbS5SdW50aW1lLlNlcmlhbGl6YXRpb247XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBWZXJ0ZXggOiBHcmFwaGljc0xheWVyLklQYWludGFibGUsIElIaXR0YWJsZVxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkZvbnQgTGFiZWxGb250ID0gbmV3IEdyYXBoaWNzTGF5ZXIuRm9udChcIlRpbWVzIE5ldyBSb21hblwiLCAxMik7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuRm9udCBJbmRleEZvbnQgPSBuZXcgR3JhcGhpY3NMYXllci5Gb250KFwiU3lzdGVtXCIsIDgpO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgTGFiZWxCcnVzaENvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigwLCAwLCAwKTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIEluZGV4QnJ1c2hDb2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMjAwLCAyMDAsIDAsIDApO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgQm91bmRhcnlQZW5Db2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMCwgMCwgMCk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuQVJHQiBCb3VuZGFyeVNlbGVjdGVkUGVuQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDI1NSwgMCwgMjU1LCAwKTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgaW50IEJvdW5kYXJ5U2VsZWN0ZWRQZW5XaWR0aCA9IDI7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgRGVmYXVsdEZpbGxCcnVzaENvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigxMjAsIDAsIDAsIDApO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgVW5pdmVyc2FsVmVydGV4RmlsbEJydXNoQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDEyMCwgMCwgMCwgMjU1KTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIFNlbGVjdGVkRmlsbEJydXNoQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDI1NSwgMCwgMjU1LCAxMjcpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IFBhcmVudEluZGV4IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIEluZGV4QW5nbGUgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVmVydGV4KGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICAgICAgOiB0aGlzKHgsIHksIFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFZlcnRleChWZWN0b3IgdilcclxuICAgICAgICAgICAgOiB0aGlzKHYsIFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFZlcnRleChWZWN0b3Igdiwgc3RyaW5nIGxhYmVsKVxyXG4gICAgICAgICAgICA6IHRoaXModi5YLCB2LlksIGxhYmVsKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZXJ0ZXgoZG91YmxlIHgsIGRvdWJsZSB5LCBzdHJpbmcgbGFiZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfTG9jYXRpb24gPSBuZXcgVmVjdG9yKHgsIHkpO1xyXG4gICAgICAgICAgICBfbGFiZWwgPSBsYWJlbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZXJ0ZXgoU2VyaWFsaXphdGlvblZlcnRleCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTG9jYXRpb24gPSBuZXcgVmVjdG9yKHYuTG9jYXRpb24uWCwgdi5Mb2NhdGlvbi5ZKTtcclxuICAgICAgICAgICAgTGFiZWwgPSB2LkxhYmVsO1xyXG4gICAgICAgICAgICBQYWRkaW5nID0gdi5QYWRkaW5nO1xyXG4gICAgICAgICAgICBTdHlsZSA9IHYuU3R5bGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIFBhaW50KEdyYXBoaWNzTGF5ZXIuSUdyYXBoaWNzIGcsIGludCB3aWR0aCwgaW50IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBDb21wdXRlQm91bmRzKGcsIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShfbGFiZWwpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQ29sb3IuRXF1YWxzKGRlZmF1bHQoR3JhcGhpY3NMYXllci5BUkdCKSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKElzVW5pdmVyc2FsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnLkZpbGxFbGxpcHNlKFVuaXZlcnNhbFZlcnRleEZpbGxCcnVzaENvbG9yLCBib3VuZHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGcuRmlsbEVsbGlwc2UoQ29sb3IsIGJvdW5kcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZy5EcmF3RWxsaXBzZShfSXNTZWxlY3RlZCA/IEJvdW5kYXJ5U2VsZWN0ZWRQZW5Db2xvciA6IEJvdW5kYXJ5UGVuQ29sb3IsIGJvdW5kcywgX0lzU2VsZWN0ZWQgPyBCb3VuZGFyeVNlbGVjdGVkUGVuV2lkdGggOiAxKTtcclxuICAgICAgICAgICAgICAgIGcuRHJhd1N0cmluZyhfbGFiZWwsIExhYmVsRm9udCwgTGFiZWxCcnVzaENvbG9yLCBib3VuZHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKENvbG9yLkVxdWFscyhkZWZhdWx0KEdyYXBoaWNzTGF5ZXIuQVJHQikpKVxyXG4gICAgICAgICAgICAgICAgICAgIGcuRmlsbEVsbGlwc2UoSXNVbml2ZXJzYWwgPyBVbml2ZXJzYWxWZXJ0ZXhGaWxsQnJ1c2hDb2xvciA6IERlZmF1bHRGaWxsQnJ1c2hDb2xvciwgYm91bmRzKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBnLkZpbGxFbGxpcHNlKENvbG9yLCBib3VuZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZy5EcmF3RWxsaXBzZShfSXNTZWxlY3RlZCA/IEJvdW5kYXJ5U2VsZWN0ZWRQZW5Db2xvciA6IEJvdW5kYXJ5UGVuQ29sb3IsIGJvdW5kcywgX0lzU2VsZWN0ZWQgPyBCb3VuZGFyeVNlbGVjdGVkUGVuV2lkdGggOiAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKF9zaG93SW5kZXgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjeCA9IChib3VuZHMuTGVmdCArIGJvdW5kcy5SaWdodCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN5ID0gKGJvdW5kcy5Cb3R0b20gKyBib3VuZHMuVG9wKSAvIDI7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IE1hdGguTWF4KGJvdW5kcy5XaWR0aCwgYm91bmRzLkhlaWdodCkgLyAyICsgNTtcclxuICAgICAgICAgICAgICAgIHZhciBiYiA9IG5ldyBHcmFwaGljc0xheWVyLkJveChjeCArIHIgKiBNYXRoLkNvcyhJbmRleEFuZ2xlKSAtIDUsIGN5ICsgciAqIE1hdGguU2luKEluZGV4QW5nbGUpIC0gNSwgMTAsIDEwKTtcclxuICAgICAgICAgICAgICAgIGcuRHJhd1N0cmluZyhQYXJlbnRJbmRleC5Ub1N0cmluZygpLCBJbmRleEZvbnQsIEluZGV4QnJ1c2hDb2xvciwgYmIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBIaXQoZG91YmxlIHgsIGRvdWJsZSB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGhpdCA9IF9Mb2NhbEJvdW5kcy5Db250YWlucyh4LCB5KTtcclxuICAgICAgICAgICAgcmV0dXJuIGhpdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljc0xheWVyLkJveCBDb21wdXRlQm91bmRzKEdyYXBoaWNzTGF5ZXIuSUdyYXBoaWNzIGcsIGludCB3aWR0aCwgaW50IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdyYXBoaWNzTGF5ZXIuQm94IGJvdW5kcztcclxuXHJcbiAgICAgICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoX2xhYmVsKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSBnLk1lYXN1cmVTdHJpbmcoX2xhYmVsLCBMYWJlbEZvbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJvdW5kcyA9IG5ldyBHcmFwaGljc0xheWVyLkJveChYICogd2lkdGggLSBzaXplLldpZHRoIC8gMiwgWSAqIGhlaWdodCAtIHNpemUuSGVpZ2h0IC8gMiwgc2l6ZS5XaWR0aCwgc2l6ZS5IZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm91bmRzID0gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KFggKiB3aWR0aCwgWSAqIGhlaWdodCwgMCwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJvdW5kcy5JbmZsYXRlKF9wYWRkaW5nICogd2lkdGgsIF9wYWRkaW5nICogaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIF9Mb2NhbEJvdW5kcyA9IG5ldyBHcmFwaGljc0xheWVyLkJveChib3VuZHMuWCAvIHdpZHRoLCBib3VuZHMuWSAvIGhlaWdodCwgYm91bmRzLldpZHRoIC8gd2lkdGgsIGJvdW5kcy5IZWlnaHQgLyBoZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJvdW5kcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljc0xheWVyLkFSR0IgQ29sb3IgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IE1vZGlmaWVyIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBYXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Mb2NhdGlvbi5YO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfTG9jYXRpb24uWCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0xvY2F0aW9uLlk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9Mb2NhdGlvbi5ZID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZWN0b3IgTG9jYXRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0xvY2F0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfTG9jYXRpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBMYWJlbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfbGFiZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBfbGFiZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIF9sYWJlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZmxvYXQgUGFkZGluZ1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfcGFkZGluZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IF9wYWRkaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBfcGFkZGluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5Cb3ggTG9jYWxCb3VuZHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0xvY2FsQm91bmRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1NlbGVjdGVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Jc1NlbGVjdGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gX0lzU2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIF9Jc1NlbGVjdGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljc0xheWVyLkJveCBEcmFnT2Zmc2V0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9EcmFnT2Zmc2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfRHJhZ09mZnNldCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFN0eWxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9TdHlsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLlN0YXJ0c1dpdGgoXCIrXCIpICYmICFzdHJpbmcuSXNOdWxsT3JFbXB0eShfU3R5bGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIF9TdHlsZSArPSBcIiwgXCIgKyB2YWx1ZS5UcmltU3RhcnQoJysnKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBfU3R5bGUgPSB2YWx1ZS5UcmltU3RhcnQoJysnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNVbml2ZXJzYWwgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBWZWN0b3IgX0xvY2F0aW9uO1xyXG4gICAgICAgIEdyYXBoaWNzTGF5ZXIuQm94IF9EcmFnT2Zmc2V0ID0gR3JhcGhpY3NMYXllci5Cb3guRW1wdHk7XHJcbiAgICAgICAgc3RyaW5nIF9sYWJlbDtcclxuICAgICAgICBzdHJpbmcgX1N0eWxlO1xyXG4gICAgICAgIGJvb2wgX0lzU2VsZWN0ZWQ7XHJcblxyXG4gICAgICAgIGZsb2F0IF9wYWRkaW5nID0gMi4wZiAvIDEwMC4wZjtcclxuICAgICAgICBHcmFwaGljc0xheWVyLkJveCBfTG9jYWxCb3VuZHMgPSBHcmFwaGljc0xheWVyLkJveC5FbXB0eTtcclxuICAgICAgICBib29sIF9zaG93SW5kZXggPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBSb3RhdGVJbmRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJbmRleEFuZ2xlICs9IE1hdGguUEkgLyAxNjtcclxuICAgICAgICAgICAgaWYgKEluZGV4QW5nbGUgPj0gMiAqIE1hdGguUEkpXHJcbiAgICAgICAgICAgICAgICBJbmRleEFuZ2xlID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgVG9nZ2xlSW5kZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3Nob3dJbmRleCA9ICFfc2hvd0luZGV4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5EcmF3aW5nO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgVGVzdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JhcGhpY3MgOiBJR3JhcGhpY3NcclxuICAgIHtcclxuICAgICAgICBIVE1MQ2FudmFzRWxlbWVudCBfY2FudmFzO1xyXG4gICAgICAgIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCBfY29udGV4dDtcclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoaWNzKEhUTUxDYW52YXNFbGVtZW50IGNhbnZhcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jYW52YXMgPSBjYW52YXM7XHJcbiAgICAgICAgICAgIF9jb250ZXh0ID0gY2FudmFzLkdldENvbnRleHQoXCIyZFwiKS5BczxDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbGVhcihBUkdCIGFyZ2IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5GaWxsU3R5bGUgPSBhcmdiLlRvQ29sb3IoKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuR2xvYmFsQWxwaGEgPSBhcmdiLkEgLyAyNTUuMGY7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkNsZWFyUmVjdCgwLCAwLCBfY2FudmFzLldpZHRoLCBfY2FudmFzLkhlaWdodCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZpbGxSZWN0KDAsIDAsIF9jYW52YXMuV2lkdGgsIF9jYW52YXMuSGVpZ2h0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdMaW5lKEFSR0IgYXJnYiwgQm94IHAxLCBCb3ggcDIsIGRvdWJsZSB3aWR0aCA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2VTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5MaW5lV2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgX2NvbnRleHQuR2xvYmFsQWxwaGEgPSBNYXRoLk1pbigxLjBmLCBNYXRoLk1heCgwLjBmLCBhcmdiLkEgLyAyNTUuMGYpKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuQmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lk1vdmVUbyhwMS5YLCBwMS5ZKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuTGluZVRvKHAyLlgsIHAyLlkpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd0xpbmUoQVJHQiBhcmdiLCBkb3VibGUgeDEsIGRvdWJsZSB5MSwgZG91YmxlIHgyLCBkb3VibGUgeTIsIGRvdWJsZSB3aWR0aCA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEcmF3TGluZShhcmdiLCBuZXcgQm94KHgxLCB5MSksIG5ldyBCb3goeDIsIHkyKSwgd2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3TGluZXMoQVJHQiBhcmdiLCBJRW51bWVyYWJsZTxCb3g+IHBvaW50cywgZG91YmxlIHdpZHRoID0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LlN0cm9rZVN0eWxlID0gYXJnYi5Ub0NvbG9yKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lkdsb2JhbEFscGhhID0gYXJnYi5BIC8gMjU1LjBmO1xyXG4gICAgICAgICAgICBfY29udGV4dC5MaW5lV2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgX2NvbnRleHQuQmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHBvaW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lk1vdmVUbyhiLlgsIGIuWSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5MaW5lVG8oYi5YLCBiLlkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9jb250ZXh0LlN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBGaWxsUG9seWdvbihBUkdCIGFyZ2IsIElFbnVtZXJhYmxlPEJveD4gcG9pbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuRmlsbFN0eWxlID0gYXJnYi5Ub0NvbG9yKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lkdsb2JhbEFscGhhID0gYXJnYi5BIC8gMjU1LjBmO1xyXG4gICAgICAgICAgICBfY29udGV4dC5CZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdmFyIGZpcnN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGIgaW4gcG9pbnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3QpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQuTW92ZVRvKGIuWCwgYi5ZKTtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LkxpbmVUbyhiLlgsIGIuWSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX2NvbnRleHQuRmlsbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3RWxsaXBzZShBUkdCIGFyZ2IsIEJveCBib3VuZHMsIGRvdWJsZSB3aWR0aCA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2VTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5HbG9iYWxBbHBoYSA9IGFyZ2IuQSAvIDI1NS4wZjtcclxuICAgICAgICAgICAgX2NvbnRleHQuQmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkFyYyhib3VuZHMuTGVmdCArIGJvdW5kcy5XaWR0aCAvIDIsIGJvdW5kcy5Ub3AgKyBib3VuZHMuSGVpZ2h0IC8gMiwgYm91bmRzLldpZHRoIC8gMiwgMCwgMiAqIE1hdGguUEkpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRmlsbEVsbGlwc2UoQVJHQiBhcmdiLCBCb3ggYm91bmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuQmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZpbGxTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5HbG9iYWxBbHBoYSA9IGFyZ2IuQSAvIDI1NS4wZjtcclxuICAgICAgICAgICAgX2NvbnRleHQuQXJjKGJvdW5kcy5MZWZ0ICsgYm91bmRzLldpZHRoIC8gMiwgYm91bmRzLlRvcCArIGJvdW5kcy5IZWlnaHQgLyAyLCBib3VuZHMuV2lkdGggLyAyLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZpbGwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd1N0cmluZyhzdHJpbmcgcywgRm9udCBmb250LCBBUkdCIGFyZ2IsIEJveCBib3VuZHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5Gb250ID0gZm9udC5OYW1lICsgXCIgXCIgKyBmb250LlNpemUgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LlN0cm9rZVN0eWxlID0gYXJnYi5Ub0NvbG9yKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lkdsb2JhbEFscGhhID0gYXJnYi5BIC8gMjU1LjBmO1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2VUZXh0KHMsIChpbnQpYm91bmRzLlgsIChpbnQpYm91bmRzLlkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgQm94IE1lYXN1cmVTdHJpbmcoc3RyaW5nIHMsIEZvbnQgZm9udClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZvbnQgPSBmb250Lk5hbWUgKyBcIiBcIiArIGZvbnQuU2l6ZSArIFwicHhcIjtcclxuICAgICAgICAgICAgdmFyIG1ldHJpY3MgPSBfY29udGV4dC5NZWFzdXJlVGV4dChzKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQm94KDAsIDAsIG1ldHJpY3MuV2lkdGgsIG1ldHJpY3MuRW1IZWlnaHRBc2NlbnQgKyBtZXRyaWNzLkVtSGVpZ2h0RGVzY2VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR29vZG5lc3NBbmFseXplciA6IFN3YXBBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBzdHJpbmcgQ2hpbGRSZWFzb24geyBnZXQgeyByZXR1cm4gXCJnb29kbmVzcyBpbmNyZWFzZWRcIjsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHb29kbmVzc0FuYWx5emVyKGJvb2wgZmluZENsZWFuZXN0V2luID0gdHJ1ZSlcclxuICAgICAgICAgICAgOiBiYXNlKGZpbmRDbGVhbmVzdFdpbilcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgYm9vbCBJc0NoaWxkQm9hcmRCZXR0ZXIoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIEJvYXJkIGNoaWxkQm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4oTWV0YUtub3dsZWRnZS5HZXRDb2xvckdyYXBocyhjaGlsZEJvYXJkLlN0YWNrcywgY2hpbGRCb2FyZC5Qb3QpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShjID0+IGMuQ291bnQpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHkgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KE1ldGFLbm93bGVkZ2UuR2V0Q29sb3JHcmFwaHMoYm9hcmQuU3RhY2tzLCBib2FyZC5Qb3QpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShjID0+IGMuQ291bnQpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTdGFuZGFyZERldmlhdGlvbih4KSA8IFN0YW5kYXJkRGV2aWF0aW9uKHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZG91YmxlIE1lYW4oTGlzdDxpbnQ+IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4geC5TdW0oKSAvIHguQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb3VibGUgTWVkaWFuKExpc3Q8aW50PiB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxpbnQsaW50Pih4LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYSA9PiBhKSkuRWxlbWVudEF0KHguQ291bnQgLyAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvdWJsZSBTdGFuZGFyZERldmlhdGlvbihMaXN0PGludD4geClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtdSA9IE1lYW4oeCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5TcXJ0KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGludD4oeCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGRvdWJsZT4pKGEgPT4gKGEgLSBtdSkgKiAoYSAtIG11KSkpIC8geC5Db3VudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb3VibGUgQWJzb2x1dGVEZXZpYXRpb24oTGlzdDxpbnQ+IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbXUgPSBNZWRpYW4oeCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TdW08aW50Pih4LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZG91YmxlPikoYSA9PiBNYXRoLkFicyhtdSAtIGEpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIFB1c2hMZWZ0T3JkZXJpbmcoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIEJvYXJkIGNoaWxkQm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IEdldFZlY3RvcnMoY2hpbGRCb2FyZCk7XHJcbiAgICAgICAgICAgIHZhciB5ID0gR2V0VmVjdG9ycyhib2FyZCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE1hdGguTWluKHguQ291bnQsIHkuQ291bnQpOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gQ29tcGFyZVZlY3RvcnMoeFtpXSwgeVtpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGMgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGMgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHguQ291bnQgPCB5LkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxMaXN0PGludD4+IEdldFZlY3RvcnMoQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnlEZXNjZW5kaW5nPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4oTWV0YUtub3dsZWRnZS5HZXRDb2xvckdyYXBocyhiLlN0YWNrcywgYi5Qb3QpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShjID0+IGMuQ291bnQpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBDb21wYXJlVmVjdG9ycyhMaXN0PGludD4geCwgTGlzdDxpbnQ+IHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoeC5Db3VudCA+IHkuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIGlmICh4LkNvdW50IDwgeS5Db3VudClcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB4LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh4W2ldIDwgeVtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIGlmICh4W2ldID4geVtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG51c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuQXJiaXRyYXJ5TWF4RGVncmVlO1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBBcmJpdHJhcnlEZWdyZWVQcm9vZkJ1aWxkZXIgOiBQZXJtdXRhdGlvbkF3YXJlUHJvb2ZCdWlsZGVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGJvb2wgVXNlV2lsZENhcmRzIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgc3RyaW5nIF9maWd1cmVUaWt6O1xyXG4gICAgICAgIGludCBfbWF4UG90O1xyXG4gICAgICAgIExpc3Q8aW50PiBfYWN0aXZlSW5kaWNlcztcclxuICAgICAgICBMaXN0PGludD4gX2FjdGl2ZUxpc3RTaXplcztcclxuICAgICAgICBMaXN0PGludD4gX3Bvc3NpYmxlTGlzdEluZGljZXM7XHJcbiAgICAgICAgTGlzdDxMaXN0PGludD4+IF9wb3NzaWJsZUxpc3RzO1xyXG4gICAgICAgIExpc3Q8U3VwZXJTbGltQm9hcmQ+IF9hbGxCb2FyZHM7XHJcbiAgICAgICAgU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+LlZlY3RvckNvbXBhcmVyIF9zZXF1ZW5jZUNvbXBhcmVyO1xyXG4gICAgICAgIFNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50PiBfc2VxdWVuY2VHZW5lcmFsaXplcjtcclxuICAgICAgICBEaWN0aW9uYXJ5PHN0cmluZywgc3RyaW5nPiBfb3JkZXJGaWx0ZXIgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz4oKTtcclxuICAgICAgICBib29sIF9pc1dpbjtcclxuXHJcbiAgICAgICAgcHVibGljIEFyYml0cmFyeURlZ3JlZVByb29mQnVpbGRlcihTdXBlclNsaW1NaW5kIG1pbmQsIHN0cmluZyBmaWd1cmVUaWt6ID0gXCJcIiwgYm9vbCB1c2VQZXJtdXRhdGlvbnMgPSBmYWxzZSlcclxuICAgICAgICAgICAgOiBiYXNlKG1pbmQsIHVzZVBlcm11dGF0aW9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maWd1cmVUaWt6ID0gZmlndXJlVGlrejtcclxuICAgICAgICAgICAgX21heFBvdCA9IG1pbmQuTWF4UG90O1xyXG4gICAgICAgICAgICBVc2VXaWxkQ2FyZHMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBXcml0ZVByb29mKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcblxyXG4gICAgICAgICAgICBfaXNXaW4gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5Qcm9vZkNhc2U+KENhc2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLlByb29mQ2FzZSwgYm9vbD4pKGMgPT4gIWMuQnJlYWtlcldpbikpO1xyXG4gICAgICAgXHJcbiAgICAgICAgICAgIEFkZEZpZ3VyZShzYik7XHJcbiAgICAgICAgICAgIEJlZ2luUHJvb2Yoc2IpO1xyXG4gICAgICAgICAgICBHZW5lcmF0ZVBvc3NpYmxlTGlzdHMoKTtcclxuICAgICAgICAgICAgR2VuZXJhbGl6ZUFsbEJvYXJkcyhzYik7XHJcblxyXG4gICAgICAgICAgICB2YXIgd29uQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGNhc2VOdW1iZXIgPSAxOyBjYXNlTnVtYmVyIDw9IENhc2VzLkNvdW50OyBjYXNlTnVtYmVyKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gQ2FzZXNbY2FzZU51bWJlciAtIDFdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLHN0cmluZz4oYy5Cb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgc3RyaW5nPikoYiA9PiBiLlRvTGlzdFN0cmluZ0luTGV4T3JkZXIoX21heFBvdCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgTGlzdDxTdXBlclNsaW1Cb2FyZD4gdGhpc0NsYWltQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhc2VOdW1iZXIgPiAxICYmICFjLkJyZWFrZXJXaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0NsYWltQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4+KShiID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVW5pb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4obmV3W10geyBiIH0sU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KF9wZXJtdXRhdGlvbkxpbmtlZFtiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KSh0dXAgPT4gdHVwLkl0ZW0yKSkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0NsYWltQm9hcmRzID0gYm9hcmRzO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghYy5CcmVha2VyV2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHdvbkJvYXJkcy5BZGRSYW5nZSh0aGlzQ2xhaW1Cb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0aGlzQ2xhaW1Cb2FyZHNUZXggPSBHZW5lcmFsaXplQm9hcmRzKHRoaXNDbGFpbUJvYXJkcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiaWdza2lwXCIpO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShzdHJpbmcuRm9ybWF0KFwiXFxcXGNhc2V7e3swfX19e3skQiQgaXMgb25lIG9mIHRoZSB7MX0gZm9sbG93aW5nIGJvYXJkczpcXG4gXCIgKyB0aGlzQ2xhaW1Cb2FyZHNUZXggKyBcIi59fVwiLGNhc2VOdW1iZXIsIHRoaXNDbGFpbUJvYXJkcy5Db3VudCkpO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiaWdza2lwXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjLkJyZWFrZXJXaW4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYy5TdXBlcmFidW5kYW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiTm8gc2luZ2xlIEtlbXBlIGV4Y2hhbmdlIGdldHMgZnJvbSB0aGVzZSBib2FyZHMgdG8gYSBwcmV2aW91cyBjYXNlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJUaGVzZSBib2FyZHMgYXJlIG5vdCBzdXBlcmFidW5kYW50LlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNhc2VOdW1iZXIgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkluIGFsbCB0aGVzZSBjYXNlcywgJEgkIGlzIGltbWVkaWF0ZWx5IGNvbG9yYWJsZSBmcm9tIHRoZSBsaXN0cy5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3dhcENvdW50R3JvdXBzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Hcm91cEJ5PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsaW50Pihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgaW50PikoYiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihNaW5kLkdldFdpblRyZWVJbmZvKGIpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKHRpID0+IHRpLlN3YXBWZXJ0aWNlcy5Db3VudCkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHN3YXBDb3VudEdyb3VwIGluIHN3YXBDb3VudEdyb3VwcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzd2FwQ291bnRHcm91cC5LZXkgPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkVhY2ggb2YgdGhlIGZvbGxvd2luZyBib2FyZHMgY2FuIGJlIGhhbmRsZWQgYnkgYSBzaW5nbGUgS2VtcGUgY2hhbmdlIHRoYXQgaGFzIGFuIGVuZHBvaW50IGF0IGluZmluaXR5LlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiBzd2FwQ291bnRHcm91cClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQZXJtdXRhdGlvbiBwcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdFN0cmluZyA9IGIuVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihvdXQgcHApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJlZUluZm8gPSBNaW5kLkdldFdpblRyZWVJbmZvKGIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbHBoYSA9IE1hdGguTWluKHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkFscGhhXSwgcHBbU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQmV0YV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiZXRhID0gTWF0aC5NYXgocHBbU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQWxwaGFdLCBwcFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKS5CZXRhXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuR3JvdXBCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50Pikoc3MgPT4gc3MuU3dhcFZlcnRpY2VzWzBdKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQ2hlY2tQZXJtdXRhdGlvbkdvb2ROZXNzKGFscGhhLCBiZXRhLCBsaXN0U3RyaW5nLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50Pikoc3MgPT4gc3MuU3dhcFZlcnRpY2VzWzBdKSkuRGlzdGluY3QoKS5Ub0xpc3QoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJ0aGVyZSBpcyBiYWRuZXNzIGhlcmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIiRcXFxcS197XCIgKyBhbHBoYSArIFwiXCIgKyBiZXRhICsgXCIsXFxcXGluZnR5fShcIiArIGxpc3RTdHJpbmcgKyBcIixcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8aW50Pihncm91cHMuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgaW50PikoZ2cgPT4gZ2cuS2V5KSkuU2VsZWN0PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBpbnQ+KShnZyA9PiBnZy5LZXkuR2V0QWN0aXZlTGlzdEluZGV4KGIsIF9tYXhQb3QpICsgMSkpLG51bGwpICsgXCIpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcUmlnaHRhcnJvdyAkIFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KGdyb3Vwcy5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBpbnQ+KShnZyA9PiBnZy5LZXkpKS5TZWxlY3Q8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5MaW5xLkdyb3VwaW5nPGludCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4sIHN0cmluZz4pKGdnID0+IFwiJFwiICsgR2V0Q2hpbGRCb2FyZE5hbWUoYiwgZ2cuRmlyc3QoKSkgKyBcIiQgKENhc2UgXCIgKyBHZXRIYW5kbGVkQ2FzZU51bWJlcihiLCBnZy5GaXJzdCgpKSArIFwiKVwiKSksbnVsbCkgKyBcIi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3Blcm11dGF0aW9uTGlua2VkW2JdLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiRnJlZSBieSB2ZXJ0ZXggcGVybXV0YXRpb246IFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixzdHJpbmc+KF9wZXJtdXRhdGlvbkxpbmtlZFtiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIHN0cmluZz4pKHBwcCA9PiBcIiRcIiArIHBwcC5JdGVtMSArIFwiXFxcXFJpZ2h0YXJyb3cgXCIgKyBwcHAuSXRlbTIuVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihfbWF4UG90KSArIFwiJFwiKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJpZ3NraXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN3YXBDb3VudEdyb3VwLktleSA9PSAyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJpZ3NraXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiRWFjaCBvZiB0aGUgZm9sbG93aW5nIGJvYXJkcyBjYW4gYmUgaGFuZGxlZCBieSBhIHNpbmdsZSBLZW1wZSBjaGFuZ2UuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGIgaW4gc3dhcENvdW50R3JvdXApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGVybXV0YXRpb24gcHA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RTdHJpbmcgPSBiLlRvTGlzdFN0cmluZ0luTGV4T3JkZXIob3V0IHBwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxwaGEgPSBNYXRoLk1pbihwcFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKS5BbHBoYV0sIHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkJldGFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmV0YSA9IE1hdGguTWF4KHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkFscGhhXSwgcHBbU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQmV0YV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0b3ZlciA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFDaGVja1Blcm11dGF0aW9uR29vZE5lc3MoYWxwaGEsIGJldGEsIGxpc3RTdHJpbmcsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+Pikoc3MgPT4gc3MuU3dhcFZlcnRpY2VzKSkuRGlzdGluY3QoKS5Ub0xpc3QoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJ0aGVyZSBpcyBiYWRuZXNzIGhlcmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChsZWZ0b3Zlci5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tbW9uZXN0U3dhcHBlciA9IEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLk1heEluZGV4PGludD4oRW51bWVyYWJsZS5SYW5nZSgwLCBiLl9zdGFja0NvdW50KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihsZWZ0b3ZlciwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvbnRhaW5zKHYpKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZWRBbGwgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGxlZnRvdmVyLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ29udGFpbnMoY29tbW9uZXN0U3dhcHBlcikpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4oaGFuZGxlZEFsbCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPT0gMSA/IC0xIDogU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkV4Y2VwdDxpbnQ+KGJjLlN3YXBWZXJ0aWNlcyxjb21tb25lc3RTd2FwcGVyKSkpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIkXFxcXEtfe1wiICsgYWxwaGEgKyBcIlwiICsgYmV0YSArIFwiLFwiICsgKGNvbW1vbmVzdFN3YXBwZXIuR2V0QWN0aXZlTGlzdEluZGV4KGIsIF9tYXhQb3QpICsgMSkgKyBcIn0oXCIgKyBsaXN0U3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaW5nbGUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0T3JEZWZhdWx0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db3VudCA9PSAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW5nbGUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIixcXFxcaW5mdHlcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihoYW5kbGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPiAxKSkuQ291bnQoKSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIsXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PGludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihoYW5kbGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPiAxKSkuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKGJjID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpKSkuU2VsZWN0PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkV4Y2VwdDxpbnQ+KGJjLlN3YXBWZXJ0aWNlcyxjb21tb25lc3RTd2FwcGVyKSkuR2V0QWN0aXZlTGlzdEluZGV4KGIsIF9tYXhQb3QpICsgMSkpLG51bGwpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiKVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcUmlnaHRhcnJvdyAkIFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPT0gMSA/IC0xIDogU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkV4Y2VwdDxpbnQ+KGJjLlN3YXBWZXJ0aWNlcyxjb21tb25lc3RTd2FwcGVyKSkpKS5TZWxlY3Q8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBzdHJpbmc+KShiYyA9PiBcIiRcIiArIEdldENoaWxkQm9hcmROYW1lKGIsIGJjKSArIFwiJCAoQ2FzZSBcIiArIEdldEhhbmRsZWRDYXNlTnVtYmVyKGIsIGJjKSArIFwiKVwiKSksbnVsbCkgKyBcIi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiYyBpbiBoYW5kbGVkQWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdG92ZXIuUmVtb3ZlKGJjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfcGVybXV0YXRpb25MaW5rZWRbYl0uQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJGcmVlIGJ5IHZlcnRleCBwZXJtdXRhdGlvbjogXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LHN0cmluZz4oX3Blcm11dGF0aW9uTGlua2VkW2JdLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiwgc3RyaW5nPikocHBwID0+IFwiJFwiICsgcHBwLkl0ZW0xICsgXCJcXFxcUmlnaHRhcnJvdyBcIiArIHBwcC5JdGVtMi5Ub0xpc3RTdHJpbmdJbkxleE9yZGVyKF9tYXhQb3QpICsgXCIkXCIpKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJpZ3NraXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBFbmRQcm9vZihzYik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2IuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQ2hlY2tQZXJtdXRhdGlvbkdvb2ROZXNzKGludCBhbHBoYSwgaW50IGJldGEsIHN0cmluZyBzdGFja3NTdHJpbmcsIExpc3Q8aW50PiBzd2FwVmVydGljZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihzdGFja3NTdHJpbmcuU3BsaXQoJ3wnKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikocyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxjaGFyLGludD4ocy5Ub0NoYXJBcnJheSgpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGNoYXIsIGludD4pKGMgPT4gaW50LlBhcnNlKGMuVG9TdHJpbmcoKSkpKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9ycyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vNik9PntfbzYuQWRkKGFscGhhKTtfbzYuQWRkKGJldGEpO3JldHVybiBfbzY7fSk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHN3YXBWZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudDxpbnQ+KGNvbG9ycyxzdGFja3Nbdl0pICE9IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkRpYWdub3N0aWNzLkRlYnVnZ2VyLkJyZWFrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0cmluZyBHZXRDaGlsZEJvYXJkTmFtZShTdXBlclNsaW1Cb2FyZCBiLCBCcmVha2VyQ2hvaWNlSW5mbyBiYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IFN1cGVyU2xpbUJvYXJkKGIuX3RyYWNlLCBiYy5BbHBoYSwgYmMuQmV0YSwgYmMuUmVzcG9uc2UsIGIuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGRCb2FyZC5Ub0xpc3RTdHJpbmdJbkxleE9yZGVyKF9tYXhQb3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBHZW5lcmFsaXplQWxsQm9hcmRzKFN0cmluZ0J1aWxkZXIgc2IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfYWxsQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihNaW5kLkNvbG9yYWJsZUJvYXJkcyxNaW5kLk5vbkNvbG9yYWJsZUJvYXJkcyksTWluZC5CcmVha2VyV29uQm9hcmRzKSk7XHJcbiAgICAgICAgICAgIF9zZXF1ZW5jZUNvbXBhcmVyID0gbmV3IFNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5WZWN0b3JDb21wYXJlcigpO1xyXG4gICAgICAgICAgICBfc2VxdWVuY2VHZW5lcmFsaXplciA9IG5ldyBTZXF1ZW5jZUdlbmVyYWxpemVyPGludD4oX2FjdGl2ZUluZGljZXMuQ291bnQsIF9wb3NzaWJsZUxpc3RJbmRpY2VzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhbGxCb2FyZHNUZXggPSBHZW5lcmFsaXplQm9hcmRzKF9hbGxCb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKE1pbmQuT25seUNvbnNpZGVyTmVhcmx5Q29sb3JhYmxlQm9hcmRzKVxyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIldlIG5lZWQgdG8gaGFuZGxlIGFsbCBib2FyZHMgdGhhdCBhcmUgbmVhcmx5IGNvbG9yYWJsZSBmb3IgZWRnZSAkZSQgdXAgdG8gcGVybXV0YXRpb24gb2YgY29sb3JzLCBzbyBpdCB3aWxsIHN1ZmZpY2UgdG8gaGFuZGxlIHRoZSBmb2xsb3dpbmcgXCIgKyBfYWxsQm9hcmRzLkNvdW50ICsgXCIgYm9hcmRzOiBcIiArIGFsbEJvYXJkc1RleCArIFwiLlwiKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIldlIG5lZWQgdG8gaGFuZGxlIGFsbCBib2FyZHMgdXAgdG8gcGVybXV0YXRpb24gb2YgY29sb3JzLCBzbyBpdCB3aWxsIHN1ZmZpY2UgdG8gaGFuZGxlIHRoZSBmb2xsb3dpbmcgXCIgKyBfYWxsQm9hcmRzLkNvdW50ICsgXCIgYm9hcmRzOiBcIiArIGFsbEJvYXJkc1RleCArIFwiLlwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChNaW5kLkJyZWFrZXJXb25Cb2FyZHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVW5mb3J0dW5hdGVseSwgdGhlIGZvbGxvd2luZyBcIiArIE1pbmQuQnJlYWtlcldvbkJvYXJkcy5Db3VudCArICBcIiBib2FyZHMgY2Fubm90IGJlIGhhbmRsZWQ6IFwiICsgR2VuZXJhbGl6ZUJvYXJkcyhNaW5kLkJyZWFrZXJXb25Cb2FyZHMpICsgXCIuXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHJpbmcgR2VuZXJhbGl6ZUJvYXJkcyhMaXN0PFN1cGVyU2xpbUJvYXJkPiBib2FyZHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoVXNlV2lsZENhcmRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhhbXBsZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShiID0+IFRvTGlzdEluZGljZXMoYikpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciBub25FeGFtcGxlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8aW50PihFbnVtZXJhYmxlLlJlcGVhdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX3Bvc3NpYmxlTGlzdEluZGljZXMsIF9hY3RpdmVJbmRpY2VzLkNvdW50KSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGxsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4obGwpKSkuRXhjZXB0KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGV4YW1wbGVzLF9zZXF1ZW5jZUNvbXBhcmVyKSwgX3NlcXVlbmNlQ29tcGFyZXIpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBnZW5lcmFsaXplZCA9IF9zZXF1ZW5jZUdlbmVyYWxpemVyLkdlbmVyYWxpemUoZXhhbXBsZXMsIG5vbkV4YW1wbGVzLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcj4sc3RyaW5nPihnZW5lcmFsaXplZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXI+LCBzdHJpbmc+KShnZyA9PiBcIiRcIiArIHN0cmluZy5Kb2luKFwifFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcixzdHJpbmc+KGdnLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyLCBpbnQsIHN0cmluZz4pKChfLCBpKSA9PiBfLlRvVGV4KF9wb3NzaWJsZUxpc3RzLCBfYWN0aXZlTGlzdFNpemVzW2ldKSkpKSArIFwiJFwiKSksXCJhbmRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxzdHJpbmc+KGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBzdHJpbmc+KShiID0+IGIuVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihfbWF4UG90KSkpLk9yZGVyQnk8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHggPT4geCkpLlNlbGVjdDxzdHJpbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgc3RyaW5nPikocyA9PiBcIiRcIiArIHMgKyBcIiRcIikpLFwiYW5kXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxpbnQ+IFRvTGlzdEluZGljZXMoU3VwZXJTbGltQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihiLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGwgPT4gbC5Ub1NldCgpKSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzID0+IHMuQ291bnQgPCBfbWF4UG90KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KHN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikocyA9PiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkZpcnN0SW5kZXg8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF9wb3NzaWJsZUxpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc3MgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4oc3MscykpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBHZW5lcmF0ZVBvc3NpYmxlTGlzdHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KE1pbmQuQ29sb3JhYmxlQm9hcmRzWzBdLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGwgPT4gbC5Ub1NldCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIF9hY3RpdmVJbmRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oc3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikocyA9PiBzLkNvdW50IDwgX21heFBvdCkpKTtcclxuICAgICAgICAgICAgX2FjdGl2ZUxpc3RTaXplcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4oc3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShzID0+IHMuQ291bnQpKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShjID0+IGMgPCBfbWF4UG90KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG90ID0gRW51bWVyYWJsZS5SYW5nZSgwLCBfbWF4UG90KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgX3Bvc3NpYmxlTGlzdHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkRpc3RpbmN0PGludD4oX2FjdGl2ZUxpc3RTaXplcykuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYyA9PiBjKSkuVG9MaXN0KCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4pKGMgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4ocG90LGMpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIF9wb3NzaWJsZUxpc3RJbmRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBfcG9zc2libGVMaXN0cy5Db3VudCkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RhdGljIHZvaWQgQmVnaW5Qcm9vZihTdHJpbmdCdWlsZGVyIHNiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiZWdpbntwcm9vZn1cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RhdGljIHZvaWQgRW5kUHJvb2YoU3RyaW5nQnVpbGRlciBzYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcZW5ke3Byb29mfVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQWRkRmlndXJlKFN0cmluZ0J1aWxkZXIgc2IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZmlndXJlSUQgPSBcImZpZzpcIiArIEd1aWQuTmV3R3VpZCgpLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJlZ2lue2ZpZ3VyZX1cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcY2VudGVyaW5nXCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKF9maWd1cmVUaWt6KTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxjYXB0aW9ue1ZlcnRpY2VzIGFyZSBvcmRlcmVkIGFzIGxhYmVsZWQufVxcXFxsYWJlbHtcIiArIGZpZ3VyZUlEICsgXCJ9XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGVuZHtmaWd1cmV9XCIpO1xyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiZWdpbntsZW19XCIpO1xyXG4gICAgICAgICAgICBpZiAoX2lzV2luKVxyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlRoZSBncmFwaCBpbiBGaWd1cmUgXFxcXHJlZntcIiArIGZpZ3VyZUlEICsgXCJ9IGlzIHJlZHVjaWJsZS5cIik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJUaGUgZ3JhcGggaW4gRmlndXJlIFxcXFxyZWZ7XCIgKyBmaWd1cmVJRCArIFwifSBpcyBub3QgcmVkdWNpYmxlLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxlbmR7bGVtfVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5NYXhEZWdyZWVUaHJlZTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIE1heGltdW1EZWdyZWVUaHJlZVByb29mQnVpbGRlciA6IFBlcm11dGF0aW9uQXdhcmVQcm9vZkJ1aWxkZXJcclxuICAgIHtcclxuICAgICAgICBzdHJpbmcgX2ZpZ3VyZVRpa3o7XHJcbiAgICAgICAgcHVibGljIE1heGltdW1EZWdyZWVUaHJlZVByb29mQnVpbGRlcihTdXBlclNsaW1NaW5kIG1pbmQsIHN0cmluZyBmaWd1cmVUaWt6ID0gXCJcIilcclxuICAgICAgICAgICAgOiBiYXNlKG1pbmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZmlndXJlVGlreiA9IGZpZ3VyZVRpa3o7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFdyaXRlUHJvb2YoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IE1pbmQuQ29sb3JhYmxlQm9hcmRzWzBdLlRvWFlaKCkuTGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgYWxsQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KE1pbmQuQ29sb3JhYmxlQm9hcmRzLE1pbmQuTm9uQ29sb3JhYmxlQm9hcmRzKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29tcGFyZXIgPSBuZXcgU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+LlZlY3RvckNvbXBhcmVyKCk7XHJcbiAgICAgICAgICAgIHZhciBzZyA9IG5ldyBTZXF1ZW5jZUdlbmVyYWxpemVyPGludD4obGVuZ3RoLCBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzcpPT57X283LkFkZCgwKTtfbzcuQWRkKDEpO19vNy5BZGQoMik7cmV0dXJuIF9vNzt9KSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgem90MiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGFsbEJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGIgPT4gYi5UbzAxMigpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBleGFtcGxlczIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihhbGxCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShiID0+IGIuVG8wMTIoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5vbkV4YW1wbGVzMiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8aW50PihFbnVtZXJhYmxlLlJlcGVhdDxnbG9iYWw6OlN5c3RlbS5MaW5xLkVudW1lcmFibGVJbnN0YW5jZTxpbnQ+PihFbnVtZXJhYmxlLlJhbmdlKDAsIDMpLCBsZW5ndGgpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikobGwgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihsbCkpKS5FeGNlcHQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oem90Mixjb21wYXJlciksIGNvbXBhcmVyKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBnZW5lcmFsaXplZDIgPSBzZy5HZW5lcmFsaXplKGV4YW1wbGVzMiwgbm9uRXhhbXBsZXMyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHZhciBhbGxCb2FyZHNYWVogPSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyPixzdHJpbmc+KGdlbmVyYWxpemVkMiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXI+LCBzdHJpbmc+KShnZyA9PiBcIiRcIiArIHN0cmluZy5Kb2luKFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyLHN0cmluZz4oZ2csKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXIsIHN0cmluZz4pKF8gPT4gXy5Ub1RleCgpKSkpICsgXCIkXCIpKSxcIm9yXCIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuICAgICAgICAgICAgdmFyIGZpZ3VyZUlEID0gXCJmaWc6XCIgKyBHdWlkLk5ld0d1aWQoKS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiZWdpbntmaWd1cmV9XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGNlbnRlcmluZ1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShfZmlndXJlVGlreik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcY2FwdGlvbntTb2xpZCB2ZXJ0aWNlcyBoYXZlIGxpc3RzIG9mIHNpemUgMyBhbmQgdGhlIGxhYmVsZWQgdmVydGljZXMgaGF2ZSBsaXN0cyBvZiBzaXplIDIufVxcXFxsYWJlbHtcIiArIGZpZ3VyZUlEICsgXCJ9XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGVuZHtmaWd1cmV9XCIpO1xyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiZWdpbntsZW19XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVGhlIGdyYXBoIGluIEZpZ3VyZSBcXFxccmVme1wiICsgZmlndXJlSUQgKyBcIn0gaXMgcmVkdWNpYmxlLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxlbmR7bGVtfVwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsZXR0ZXJzID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PHN0cmluZz4oKSwoX284KT0+e19vOC5BZGQoXCJYXCIpO19vOC5BZGQoXCJZXCIpO19vOC5BZGQoXCJaXCIpO3JldHVybiBfbzg7fSk7XHJcbiAgICAgICAgICAgIHZhciBzdHJpbmdMZW5ndGggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGxvbmc+KE1pbmQuQ29sb3JhYmxlQm9hcmRzWzBdLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBib29sPikoc3MgPT4gc3MuUG9wdWxhdGlvbkNvdW50KCkgPT0gMikpO1xyXG4gICAgICAgICAgICB2YXIgcm5nID0gbmV3IFJhbmRvbShEYXRlVGltZS5Ob3cuTWlsbGlzZWNvbmQpO1xyXG4gICAgICAgICAgICB2YXIgcmFuZG9tU3RyaW5nID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdHJpbmdMZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHJhbmRvbVN0cmluZyArPSBsZXR0ZXJzW3JuZy5OZXh0KDMpXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByYW5kb21TdHJpbmcyID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdHJpbmdMZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHJhbmRvbVN0cmluZzIgKz0gbGV0dGVyc1tybmcuTmV4dCgzKV07XHJcblxyXG4gICAgICAgICAgICB2YXIgcmFuZG9tU3RyaW5nMyA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RyaW5nTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICByYW5kb21TdHJpbmczICs9IGxldHRlcnNbcm5nLk5leHQoMyldO1xyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kKFwiXFxcXGJlZ2lue3Byb29mfVwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkxldCAkWCA9IFxcXFx7MCwxXFxcXH0kLCAkWSA9IFxcXFx7MCwyXFxcXH0kIGFuZCAkWiA9IFxcXFx7MSwyXFxcXH0kLiBUaGVuIHdpdGggdGhlIHZlcnRleCBvcmRlcmluZyBpbiBGaWd1cmUgXFxcXHJlZntcIiArIGZpZ3VyZUlEICsgXCJ9LCBhIHN0cmluZyBzdWNoIGFzIFwiICsgcmFuZG9tU3RyaW5nICsgXCIsIFwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcInJlcHJlc2VudHMgYSBwb3NzaWJsZSBsaXN0IGFzc2lnbm1lbnQgb24gJFYoSCkkIGFyaXNpbmcgZnJvbSBhICQzJC1lZGdlLWNvbG9yaW5nIG9mICRHLUUoSCkkLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkJ5IGFuICRYJC1LZW1wZSBjaGFuZ2UsIHdlIG1lYW4gZmxpcHBpbmcgY29sb3JzICQwJCBhbmQgJDEkIG9uIGEgdHdvLWNvbG9yZWQgcGF0aCBpbiAkRy1FKEgpJC4gIFdlIGNhbGwgc3VjaCBhIHBhdGggYW4gJFgkLXBhdGguIFwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkFueSBlbmRwb2ludCBvZiBhbiAkWCQtcGF0aCBpbiAkSCQgbXVzdCBlbmQgYXQgYSAkWSQgb3IgJFokIHZlcnRleC4gIFRoZSBtZWFuaW5ncyBvZiAkWSQtS2VtcGUgY2hhbmdlLCAkWiQtS2VtcGUgY2hhbmdlLCAkWSQtcGF0aCBhbmQgJFokLXBhdGggYXJlIGFuYWxvZ291cy5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJOb3RlIHRoYXQgaWYgdGhlcmUgYXJlIGFuIG9kZCBudW1iZXIgb2YgJFkkJ3MgYW5kICRaJCdzLCB0aGVuIGF0IGxlYXN0IG9uZSAkWCQtcGF0aCBoYXMgb25seSBvbmUgZW5kcG9pbnQgaW4gJEgkLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIldlIHVzZSBzaG9ydGhhbmQgbm90YXRpb24gbGlrZSAkXFxcXEtfe1gsIDJ9KFwiICsgcmFuZG9tU3RyaW5nICsgXCIsNSw2KSBcXFxcUmlnaHRhcnJvdyBcIiArIHJhbmRvbVN0cmluZzIgKyBcIixcIiArIHJhbmRvbVN0cmluZzMgKyBcIiQgKENhc2UgMSkuXCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVGhpcyBtZWFucyB0aGUgJFgkLUtlbXBlIGNoYW5nZSBvbiBcIiArIHJhbmRvbVN0cmluZyArIFwiIHN0YXJ0aW5nIGF0IHRoZSBzZWNvbmQgdmVydGV4IGFuZCBlbmRpbmcgYXQgdGhlIGZpZnRoIGFuZCBzaXh0aCByZXN1bHQgaW4gYm9hcmRzIFwiICsgcmFuZG9tU3RyaW5nMiArIFwiIGFuZCBcIiArIHJhbmRvbVN0cmluZzMgKyBcIiByZXNwZWN0aXZlbHkgYW5kIHRoZXNlIGFyZSBoYW5kbGVkIGJ5IENhc2UgMS5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJUaGUgJFxcXFxpbmZ0eSQgc3ltYm9sIG1lYW5zIHN0YXJ0aW5nIChvciBlbmRpbmcpIG91dHNpZGUgJEgkLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKE1pbmQuT25seUNvbnNpZGVyTmVhcmx5Q29sb3JhYmxlQm9hcmRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiV2UgbmVlZCB0byBoYW5kbGUgYWxsIGJvYXJkcyB0aGF0IGFyZSBuZWFybHkgY29sb3JhYmxlIGZvciBlZGdlICRlJCB1cCB0byBwZXJtdXRhdGlvbnMgb2YgJFxcXFx7WCxZLFpcXFxcfSQsIHNvIGl0IHdpbGwgc3VmZmljZSB0byBoYW5kbGUgYWxsIGJvYXJkcyBvZiB0aGUgZm9ybSBcIiArIGFsbEJvYXJkc1hZWiArIFwiLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJXZSBuZWVkIHRvIGhhbmRsZSBhbGwgYm9hcmRzIHVwIHRvIHBlcm11dGF0aW9ucyBvZiAkXFxcXHtYLFksWlxcXFx9JCwgc28gaXQgd2lsbCBzdWZmaWNlIHRvIGhhbmRsZSBhbGwgYm9hcmRzIG9mIHRoZSBmb3JtIFwiICsgYWxsQm9hcmRzWFlaICsgXCIuXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgIHZhciB3b25Cb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgY2FzZU51bWJlciA9IDE7IGNhc2VOdW1iZXIgPD0gQ2FzZXMuQ291bnQ7IGNhc2VOdW1iZXIrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBDYXNlc1tjYXNlTnVtYmVyIC0gMV07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkcyA9IGMuQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgTGlzdDxTdXBlclNsaW1Cb2FyZD4gdGhpc0NsYWltQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhc2VOdW1iZXIgPiAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNDbGFpbUJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+PikoYiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlVuaW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KG5ld1tdIHsgYiB9LFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihfcGVybXV0YXRpb25MaW5rZWRbYl0sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPikodHVwID0+IHR1cC5JdGVtMikpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNDbGFpbUJvYXJkcyA9IGJvYXJkcztcclxuXHJcbiAgICAgICAgICAgICAgICB3b25Cb2FyZHMuQWRkUmFuZ2UodGhpc0NsYWltQm9hcmRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgem90ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4odGhpc0NsYWltQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoYiA9PiBiLlRvMDEyKCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciBleGFtcGxlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHRoaXNDbGFpbUJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGIgPT4gYi5UbzAxMigpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9uRXhhbXBsZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oRW51bWVyYWJsZS5SZXBlYXQ8Z2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8aW50Pj4oRW51bWVyYWJsZS5SYW5nZSgwLCAzKSwgbGVuZ3RoKSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGxsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4obGwpKSkuRXhjZXB0KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHpvdCxjb21wYXJlciksIGNvbXBhcmVyKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZ2VuZXJhbGl6ZWQgPSBzZy5HZW5lcmFsaXplKGV4YW1wbGVzLCBub25FeGFtcGxlcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm9hcmRzWFlaID0gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcj4sc3RyaW5nPihnZW5lcmFsaXplZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXI+LCBzdHJpbmc+KShnZyA9PiBcIiRcIiArIHN0cmluZy5Kb2luKFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyLHN0cmluZz4oZ2csKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXIsIHN0cmluZz4pKF8gPT4gXy5Ub1RleCgpKSkpICsgXCIkXCIpKSxcIm9yXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmlnc2tpcFwiKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoc3RyaW5nLkZvcm1hdChcIlxcXFxjYXNle3t7MH19fXt7JEIkIGlzIG9uZSBvZiBcIiArIGJvYXJkc1hZWiArIFwiLn19XCIsIGNhc2VOdW1iZXIpKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmlnc2tpcFwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYXNlTnVtYmVyID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJJbiBhbGwgdGhlc2UgY2FzZXMsICRIJCBpcyBpbW1lZGlhdGVseSBjb2xvcmFibGUgZnJvbSB0aGUgbGlzdHMuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZml4R3JvdXBzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Hcm91cEJ5PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsc3RyaW5nPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgc3RyaW5nPikoYiA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpeExldHRlciA9ICgobG9uZykoKDEgPDwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQWxwaGEpIHwgKDEgPDwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQmV0YSkpKS5Ub1hZWigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpeExldHRlcjtcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBmaXhHcm91cCBpbiBmaXhHcm91cHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3RoZXJzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8c3RyaW5nPihsZXR0ZXJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXJzLlJlbW92ZShmaXhHcm91cC5LZXkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN3YXBDb3VudEdyb3VwcyA9IGZpeEdyb3VwLkdyb3VwQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBpbnQ+KShiID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWF4PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KE1pbmQuR2V0V2luVHJlZUluZm8oYiksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikodGkgPT4gdGkuU3dhcFZlcnRpY2VzLkNvdW50KSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHN3YXBDb3VudEdyb3VwIGluIHN3YXBDb3VudEdyb3VwcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN3YXBDb3VudEdyb3VwLktleSA9PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHN3YXBDb3VudEdyb3VwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuR3JvdXBCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50Pikoc3MgPT4gc3MuU3dhcFZlcnRpY2VzWzBdKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIkXFxcXEtfe1wiICsgZml4R3JvdXAuS2V5ICsgXCIsXFxcXGluZnR5fShcIiArIGIuVG9YWVooKSArIFwiLFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxpbnQ+KGdyb3Vwcy5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBpbnQ+KShnZyA9PiBnZy5LZXkpKS5TZWxlY3Q8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5MaW5xLkdyb3VwaW5nPGludCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4sIGludD4pKGdnID0+IGdnLktleS5HZXRYWVpJbmRleChiKSArIDEpKSxudWxsKSArIFwiKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxSaWdodGFycm93ICRcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihncm91cHMuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgaW50PikoZ2cgPT4gZ2cuS2V5KSkuU2VsZWN0PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBzdHJpbmc+KShnZyA9PiBcIiRcIiArIEdldENoaWxkQm9hcmROYW1lKGIsIGdnLkZpcnN0KCkpICsgXCIkXCIpKSxudWxsKSArIFwiKCBDYXNlIFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8saW50Pih0cmVlSW5mbywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBHZXRIYW5kbGVkQ2FzZU51bWJlcihiLCBiYykpKS5EaXN0aW5jdCgpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHh4ID0+IHh4KSkpICsgXCIpLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9wZXJtdXRhdGlvbkxpbmtlZFtiXS5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixzdHJpbmc+KF9wZXJtdXRhdGlvbkxpbmtlZFtiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIHN0cmluZz4pKHBwcCA9PiBcIiRcIiArIHBwcC5JdGVtMSArIFwiXFxcXFJpZ2h0YXJyb3cgXCIgKyBwcHAuSXRlbTIuVG9YWVooKSArIFwiJFwiKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN3YXBDb3VudEdyb3VwLktleSA9PSAyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHN3YXBDb3VudEdyb3VwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnRvdmVyID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGxlZnRvdmVyLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1vbmVzdFN3YXBwZXIgPSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5NYXhJbmRleDxpbnQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgYi5fc3RhY2tDb3VudCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4obGVmdG92ZXIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db250YWlucyh2KSkpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlZEFsbCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4obGVmdG92ZXIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db250YWlucyhjb21tb25lc3RTd2FwcGVyKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4oaGFuZGxlZEFsbCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPT0gMSA/IC0xIDogU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkV4Y2VwdDxpbnQ+KGJjLlN3YXBWZXJ0aWNlcyxjb21tb25lc3RTd2FwcGVyKSkpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiJFxcXFxLX3tcIiArIGZpeEdyb3VwLktleSArIFwiLFwiICsgKGNvbW1vbmVzdFN3YXBwZXIuR2V0WFlaSW5kZXgoYikgKyAxKSArIFwifShcIiArIGIuVG9YWVooKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpbmdsZSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3RPckRlZmF1bHQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID09IDEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW5nbGUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIsXFxcXGluZnR5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihoYW5kbGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPiAxKSkuQ291bnQoKSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiLFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID4gMSkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRXhjZXB0PGludD4oYmMuU3dhcFZlcnRpY2VzLGNvbW1vbmVzdFN3YXBwZXIpKSkpLlNlbGVjdDxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKGJjID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpLkdldFhZWkluZGV4KGIpICsgMSkpLG51bGwpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIilcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxSaWdodGFycm93ICRcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID09IDEgPyAtMSA6IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpKSkuU2VsZWN0PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgc3RyaW5nPikoYmMgPT4gXCIkXCIgKyBHZXRDaGlsZEJvYXJkTmFtZShiLCBiYykgKyBcIiRcIikpLG51bGwpICsgXCIoQ2FzZSBcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBHZXRIYW5kbGVkQ2FzZU51bWJlcihiLCBiYykpKS5EaXN0aW5jdCgpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHh4ID0+IHh4KSkpICsgXCIpLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYmMgaW4gaGFuZGxlZEFsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0b3Zlci5SZW1vdmUoYmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3Blcm11dGF0aW9uTGlua2VkW2JdLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LHN0cmluZz4oX3Blcm11dGF0aW9uTGlua2VkW2JdLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiwgc3RyaW5nPikocHBwID0+IFwiJFwiICsgcHBwLkl0ZW0xICsgXCJcXFxcUmlnaHRhcnJvdyBcIiArIHBwcC5JdGVtMi5Ub1hZWigpICsgXCIkXCIpKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxlbmR7cHJvb2Z9XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2IuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0cmluZyBHZXRDaGlsZEJvYXJkTmFtZShTdXBlclNsaW1Cb2FyZCBiLCBCcmVha2VyQ2hvaWNlSW5mbyBiYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IFN1cGVyU2xpbUJvYXJkKGIuX3RyYWNlLCBiYy5BbHBoYSwgYmMuQmV0YSwgYmMuUmVzcG9uc2UsIGIuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGRCb2FyZC5Ub1hZWigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcbnVzaW5nIEdyYXBocztcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBHcmFwaHNDb3JlO1xyXG51c2luZyBBbGdvcml0aG1zO1xyXG5cclxubmFtZXNwYWNlIFRlc3Rcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRhYkNhbnZhcyA6IElDYW52YXNcclxuICAgIHtcclxuICAgICAgICBib29sIF9jdHJsRG93bjtcclxuICAgICAgICBzdHJpbmcgX3RpdGxlO1xyXG4gICAgICAgIHB1YmxpYyBIVE1MQ2FudmFzRWxlbWVudCBDYW52YXMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoQ2FudmFzIEdyYXBoQ2FudmFzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBzdGF0aWMgTGlzdDxBUkdCPiBDb2xvcnMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8QVJHQj4oKSwoX28yNCk9PntfbzI0LkFkZChuZXcgQVJHQigyNTUsIDAsIDApKTtfbzI0LkFkZChuZXcgQVJHQigwLCAwLCAyNTUpKTtfbzI0LkFkZChuZXcgQVJHQigwLCAyNTUsIDApKTtfbzI0LkFkZChuZXcgQVJHQigyNTUsIDI1NSwgMCkpO19vMjQuQWRkKG5ldyBBUkdCKDk1LCAxNTgsIDE2MCkpO19vMjQuQWRkKG5ldyBBUkdCKDEzOSwgNjksIDE5KSk7X28yNC5BZGQobmV3IEFSR0IoMzAsIDE0NCwgMjU1KSk7X28yNC5BZGQobmV3IEFSR0IoNjQsIDIyNCwgMjA4KSk7X28yNC5BZGQobmV3IEFSR0IoMjE4LCAxMTIsIDIxNCkpO3JldHVybiBfbzI0O30pO1xyXG5cclxuICAgICAgICBwdWJsaWMgVGFiQ2FudmFzKEhUTUxDYW52YXNFbGVtZW50IGNhbnZhcywgR3JhcGhDYW52YXMgZ3JhcGhDYW52YXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcmFwaENhbnZhcyA9IGdyYXBoQ2FudmFzO1xyXG4gICAgICAgICAgICBDYW52YXMgPSBjYW52YXM7XHJcbiAgICAgICAgICAgIEdyYXBoQ2FudmFzLkNhbnZhcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBDYW52YXMuT25EYmxDbGljayArPSBPbk1vdXNlRG91YmxlQ2xpY2s7XHJcbiAgICAgICAgICAgIENhbnZhcy5Pbk1vdXNlRG93biArPSBPbk1vdXNlQnV0dG9uRG93bjtcclxuICAgICAgICAgICAgQ2FudmFzLk9uTW91c2VVcCArPSBPbk1vdXNlQnV0dG9uVXA7XHJcbiAgICAgICAgICAgIENhbnZhcy5Pbk1vdXNlTW92ZSArPSBPbk1vdXNlTW92ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIENhbnZhcy5PbkxvYWQgPSBPbkxvYWQ7XHJcblxyXG4gICAgICAgICAgICBHcmFwaENhbnZhcy5HcmFwaE1vZGlmaWVkICs9IE9uR3JhcGhNb2RpZmllZDtcclxuICAgICAgICAgICAgR3JhcGhDYW52YXMuTmFtZU1vZGlmaWVkICs9IE9uTmFtZU1vZGlmaWVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBPbk5hbWVNb2RpZmllZChzdHJpbmcgbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRpdGxlID0gbmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gU2FnZVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1hbnVhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZShcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2hyb21hdGljUG9seW5vbWlhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jaHJvbWF0aWNfcG9seW5vbWlhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHcmFwaDYoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ3JhcGg2X3N0cmluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTcGFyc2U2KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNwYXJzZTZfc3RyaW5nKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNocm9tYXRpY051bWJlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jaHJvbWF0aWNfbnVtYmVyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNocm9tYXRpY1F1YXNpc3ltbWV0cmljRnVuY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2hyb21hdGljX3F1YXNpc3ltbWV0cmljX2Z1bmN0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNocm9tYXRpY1N5bW1ldHJpY0Z1bmN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNocm9tYXRpY19zeW1tZXRyaWNfZnVuY3Rpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlQ29sb3JpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yaW5nID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLmNvbG9yaW5nKClcIik7XHJcbiAgICAgICAgICAgIHZhciBjYyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oY29sb3JpbmcuU3BsaXQobmV3W10geyBcIl0sXCIgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHMgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLGludD4ocy5SZXBsYWNlKFwiW1wiLCBcIlwiKS5SZXBsYWNlKFwiXVwiLCBcIlwiKS5SZXBsYWNlKFwiIFwiLCBcIlwiKS5SZXBsYWNlKEVudmlyb25tZW50Lk5ld0xpbmUsIFwiXCIpLlJlcGxhY2UoXCJcXFxcblwiLCBcIlwiKS5TcGxpdCgnLCcpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgaW50PikoeCA9PiBpbnQuUGFyc2UoeCkpKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciB2IGluIEdyYXBoQ2FudmFzLkdyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRmlyc3RJbmRleDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oY2MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShsID0+IGwuQ29udGFpbnMoaSkpKTtcclxuICAgICAgICAgICAgICAgIHYuQ29sb3IgPSBDb2xvcnNbYyAlIENvbG9ycy5Db3VudF07XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ29udmV4aXR5UHJvcGVydGllcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jb252ZXhpdHlfcHJvcGVydGllcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VIYXNIb21vbW9ycGhpc21UbygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5oYXNfaG9tb21vcnBoaXNtX3RvKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUluZGVwZW5kZW50U2V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb2xvcmluZyA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5pbmRlcGVuZGVudF9zZXQoKVwiKTtcclxuICAgICAgICAgICAgdmFyIGNjID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLGludD4oY29sb3JpbmcuUmVwbGFjZShcIltcIiwgXCJcIikuUmVwbGFjZShcIl1cIiwgXCJcIikuUmVwbGFjZShcIiBcIiwgXCJcIikuUmVwbGFjZShFbnZpcm9ubWVudC5OZXdMaW5lLCBcIlwiKS5SZXBsYWNlKFwiXFxcXG5cIiwgXCJcIikuU3BsaXQoJywnKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGludD4pKHggPT4gaW50LlBhcnNlKHgpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBHcmFwaENhbnZhcy5HcmFwaC5WZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHYuQ29sb3IgPSBWZXJ0ZXguRGVmYXVsdEZpbGxCcnVzaENvbG9yO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gY2MpXHJcbiAgICAgICAgICAgICAgICBHcmFwaENhbnZhcy5HcmFwaC5WZXJ0aWNlc1t2XS5Db2xvciA9IENvbG9yc1sxXTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSW5kZXBlbmRlbnRTZXRPZlJlcHJlc2VudGF0aXZlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pbmRlcGVuZGVudF9zZXRfb2ZfcmVwcmVzZW50YXRpdmVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzUGVyZmVjdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19wZXJmZWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1hdGNoaW5nUG9seW5vbWlhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tYXRjaGluZ19wb2x5bm9taWFsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1pbm9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1pbm9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVBhdGh3aWR0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5wYXRod2lkdGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmFua0RlY29tcG9zaXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFua19kZWNvbXBvc2l0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRvcG9sb2dpY2FsTWlub3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudG9wb2xvZ2ljYWxfbWlub3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVHJlZXdpZHRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRyZWV3aWR0aCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUdXR0ZVBvbHlub21pYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudHV0dGVfcG9seW5vbWlhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VWZXJ0ZXhDb3ZlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY29sb3JpbmcgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcudmVydGV4X2NvdmVyKClcIik7XHJcbiAgICAgICAgICAgIHZhciBjYyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxpbnQ+KGNvbG9yaW5nLlJlcGxhY2UoXCJbXCIsIFwiXCIpLlJlcGxhY2UoXCJdXCIsIFwiXCIpLlJlcGxhY2UoXCIgXCIsIFwiXCIpLlJlcGxhY2UoRW52aXJvbm1lbnQuTmV3TGluZSwgXCJcIikuUmVwbGFjZShcIlxcXFxuXCIsIFwiXCIpLlNwbGl0KCcsJyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBpbnQ+KSh4ID0+IGludC5QYXJzZSh4KSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB2LkNvbG9yID0gVmVydGV4LkRlZmF1bHRGaWxsQnJ1c2hDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGNjKVxyXG4gICAgICAgICAgICAgICAgR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXNbdl0uQ29sb3IgPSBDb2xvcnNbMV07XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUJpcGFydGl0ZUNvbG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJpcGFydGl0ZV9jb2xvcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VCaXBhcnRpdGVTZXRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJpcGFydGl0ZV9zZXRzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdyYXBoNlN0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ncmFwaDZfc3RyaW5nKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzRGlyZWN0ZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZGlyZWN0ZWQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSm9pbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5qb2luKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNwYXJzZTZTdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3BhcnNlNl9zdHJpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVG9EaXJlY3RlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50b19kaXJlY3RlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUb1VuZGlyZWN0ZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudG9fdW5kaXJlY3RlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VXcml0ZVRvRXBzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLndyaXRlX3RvX2VwcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVDb21wbGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZV9jb21wbGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUNsaXF1ZU1heGltdW0oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yaW5nID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLmNsaXF1ZV9tYXhpbXVtKClcIik7XHJcbiAgICAgICAgICAgIHZhciBjYyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxpbnQ+KGNvbG9yaW5nLlJlcGxhY2UoXCJbXCIsIFwiXCIpLlJlcGxhY2UoXCJdXCIsIFwiXCIpLlJlcGxhY2UoXCIgXCIsIFwiXCIpLlJlcGxhY2UoRW52aXJvbm1lbnQuTmV3TGluZSwgXCJcIikuUmVwbGFjZShcIlxcXFxuXCIsIFwiXCIpLlNwbGl0KCcsJyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBpbnQ+KSh4ID0+IGludC5QYXJzZSh4KSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB2LkNvbG9yID0gVmVydGV4LkRlZmF1bHRGaWxsQnJ1c2hDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGNjKVxyXG4gICAgICAgICAgICAgICAgR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXNbdl0uQ29sb3IgPSBDb2xvcnNbMV07XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZU51bWJlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVfbnVtYmVyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZVBvbHlub21pYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlX3BvbHlub21pYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc0NvbnRhaW5pbmdWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlc19jb250YWluaW5nX3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVzR2V0Q2xpcXVlQmlwYXJ0aXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfZ2V0X2NsaXF1ZV9iaXBhcnRpdGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc0dldE1heENsaXF1ZUdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfZ2V0X21heF9jbGlxdWVfZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc01heGltYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlc19tYXhpbWFsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZXNNYXhpbXVtKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfbWF4aW11bSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVzTnVtYmVyT2YoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlc19udW1iZXJfb2YoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc1ZlcnRleENsaXF1ZU51bWJlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVzX3ZlcnRleF9jbGlxdWVfbnVtYmVyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUJvdW5kZWRPdXRkZWdyZWVPcmllbnRhdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ib3VuZGVkX291dGRlZ3JlZV9vcmllbnRhdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VCcmlkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJyaWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVncmVlQ29uc3RyYWluZWRTdWJncmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWdyZWVfY29uc3RyYWluZWRfc3ViZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR29tb3J5SHVUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdvbW9yeV9odV90cmVlKCkucGxvdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNaW5pbXVtT3V0ZGVncmVlT3JpZW50YXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubWluaW11bV9vdXRkZWdyZWVfb3JpZW50YXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlT3JpZW50YXRpb25zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm9yaWVudGF0aW9ucygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VSYW5kb21TcGFubmluZ1RyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGVkZ2VzID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLnJhbmRvbV9zcGFubmluZ190cmVlKClcIik7XHJcbiAgICAgICAgICAgIHZhciBlZSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oZWRnZXMuU3BsaXQobmV3W10geyBcIiksXCIgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHMgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLGludD4ocy5SZXBsYWNlKFwiW1wiLCBcIlwiKS5SZXBsYWNlKFwiXVwiLCBcIlwiKS5SZXBsYWNlKFwiKFwiLFwiXCIpLlJlcGxhY2UoXCIpXCIsIFwiXCIpLlJlcGxhY2UoXCIgXCIsIFwiXCIpLlJlcGxhY2UoRW52aXJvbm1lbnQuTmV3TGluZSwgXCJcIikuUmVwbGFjZShcIlxcXFxuXCIsIFwiXCIpLlJlcGxhY2UoXCJcXFxcblwiLFwiXCIpLlNwbGl0KCcsJyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBpbnQ+KSh4ID0+IGludC5QYXJzZSh4KSkpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBHcmFwaENhbnZhcy5HcmFwaC5WZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHYuQ29sb3IgPSBWZXJ0ZXguRGVmYXVsdEZpbGxCcnVzaENvbG9yO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgZSBpbiBHcmFwaENhbnZhcy5HcmFwaC5FZGdlcylcclxuICAgICAgICAgICAgICAgIGUuQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDAsIDAsIDApO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB2MSA9IEdyYXBoQ2FudmFzLkdyYXBoLlZlcnRpY2VzW2VbMF1dO1xyXG4gICAgICAgICAgICAgICAgdmFyIHYyID0gR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXNbZVsxXV07XHJcblN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpHcmFwaHMuRWRnZT4oXHJcbiAgICAgICAgICAgICAgICBHcmFwaENhbnZhcy5HcmFwaC5FZGdlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5FZGdlLCBib29sPikoeCA9PiB4LlYxID09IHYxICYmIHguVjIgPT0gdjIgfHwgeC5WMSA9PSB2MiAmJiB4LlYyID09IHYxKSkuQ29sb3IgPSBDb2xvcnNbMV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3Bhbm5pbmdUcmVlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zcGFubmluZ190cmVlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTdHJvbmdPcmllbnRhdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdHJvbmdfb3JpZW50YXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlQXBleFZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb2xvcmluZyA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5hcGV4X3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgICAgIHZhciBjYyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxpbnQ+KGNvbG9yaW5nLlJlcGxhY2UoXCJbXCIsIFwiXCIpLlJlcGxhY2UoXCJdXCIsIFwiXCIpLlJlcGxhY2UoXCIgXCIsIFwiXCIpLlJlcGxhY2UoRW52aXJvbm1lbnQuTmV3TGluZSwgXCJcIikuUmVwbGFjZShcIlxcXFxuXCIsIFwiXCIpLlNwbGl0KCcsJyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBpbnQ+KSh4ID0+IGludC5QYXJzZSh4KSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB2LkNvbG9yID0gVmVydGV4LkRlZmF1bHRGaWxsQnJ1c2hDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGNjKVxyXG4gICAgICAgICAgICAgICAgR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXNbdl0uQ29sb3IgPSBDb2xvcnNbMV07XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0FwZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfYXBleCgpXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNBcmNUcmFuc2l0aXZlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2FyY190cmFuc2l0aXZlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQXN0ZXJvaWRhbFRyaXBsZUZyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfYXN0ZXJvaWRhbF90cmlwbGVfZnJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIFxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0JpY29ubmVjdGVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2JpY29ubmVjdGVkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQmlwYXJ0aXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2JpcGFydGl0ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0Jsb2NrR3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfYmxvY2tfZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDYXJ0ZXNpYW5Qcm9kdWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2NhcnRlc2lhbl9wcm9kdWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzRGlzdGFuY2VSZWd1bGFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2Rpc3RhbmNlX3JlZ3VsYXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNFZGdlVHJhbnNpdGl2ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19lZGdlX3RyYW5zaXRpdmUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNFdmVuSG9sZUZyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZXZlbl9ob2xlX2ZyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNGb3Jlc3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZm9yZXN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzSGFsZlRyYW5zaXRpdmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfaGFsZl90cmFuc2l0aXZlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzTGluZUdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2xpbmVfZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNMb25nQW50aWhvbGVGcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2xvbmdfYW50aWhvbGVfZnJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0xvbmdIb2xlRnJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19sb25nX2hvbGVfZnJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc09kZEhvbGVGcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX29kZF9ob2xlX2ZyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNPdmVyZnVsbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19vdmVyZnVsbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1BhcnRpYWxDdWJlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3BhcnRpYWxfY3ViZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1ByaW1lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3ByaW1lKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzU2VtaVN5bW1ldHJpYygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19zZW1pX3N5bW1ldHJpYygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1NwbGl0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3NwbGl0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzU3Ryb25nbHlSZWd1bGFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3N0cm9uZ2x5X3JlZ3VsYXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNUcmlhbmdsZUZyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfdHJpYW5nbGVfZnJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1dlYWtseUNob3JkYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfd2Vha2x5X2Nob3JkYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlT2RkR2lydGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcub2RkX2dpcnRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvcmVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvcmVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUZyYWN0aW9uYWxDaHJvbWF0aWNJbmRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5mcmFjdGlvbmFsX2Nocm9tYXRpY19pbmRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VIYXNQZXJmZWN0TWF0Y2hpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaGFzX3BlcmZlY3RfbWF0Y2hpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSWhhcmFaZXRhRnVuY3Rpb25JbnZlcnNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmloYXJhX3pldGFfZnVuY3Rpb25faW52ZXJzZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VLaXJjaGhvZmZTeW1hbnppa1BvbHlub21pYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcua2lyY2hob2ZmX3N5bWFuemlrX3BvbHlub21pYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTG92YXN6VGhldGEoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubG92YXN6X3RoZXRhKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1hZ25pdHVkZUZ1bmN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1hZ25pdHVkZV9mdW5jdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNYXRjaGluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tYXRjaGluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNYXhpbXVtQXZlcmFnZURlZ3JlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tYXhpbXVtX2F2ZXJhZ2VfZGVncmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1vZHVsYXJEZWNvbXBvc2l0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1vZHVsYXJfZGVjb21wb3NpdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VQZXJmZWN0TWF0Y2hpbmdzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnBlcmZlY3RfbWF0Y2hpbmdzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNlaWRlbEFkamFjZW5jeU1hdHJpeCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zZWlkZWxfYWRqYWNlbmN5X21hdHJpeCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VOZXR3b3JreEdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm5ldHdvcmt4X2dyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlncmFwaEdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlncmFwaF9ncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUb0RpY3Rpb25hcnkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudG9fZGljdGlvbmFyeSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb3B5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvcHkoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRXhwb3J0VG9GaWxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmV4cG9ydF90b19maWxlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFkamFjZW5jeU1hdHJpeCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hZGphY2VuY3lfbWF0cml4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUluY2lkZW5jZU1hdHJpeCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pbmNpZGVuY2VfbWF0cml4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURpc3RhbmNlTWF0cml4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc3RhbmNlX21hdHJpeCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VXZWlnaHRlZEFkamFjZW5jeU1hdHJpeCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy53ZWlnaHRlZF9hZGphY2VuY3lfbWF0cml4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUtpcmNoaG9mZk1hdHJpeCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5raXJjaGhvZmZfbWF0cml4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUhhc0xvb3BzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmhhc19sb29wcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBbGxvd3NMb29wcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hbGxvd3NfbG9vcHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWxsb3dMb29wcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hbGxvd19sb29wcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMb29wcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5sb29wcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMb29wRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubG9vcF9lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VOdW1iZXJPZkxvb3BzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm51bWJlcl9vZl9sb29wcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMb29wVmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubG9vcF92ZXJ0aWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSZW1vdmVMb29wcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yZW1vdmVfbG9vcHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSGFzTXVsdGlwbGVFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5oYXNfbXVsdGlwbGVfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWxsb3dzTXVsdGlwbGVFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hbGxvd3NfbXVsdGlwbGVfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWxsb3dNdWx0aXBsZUVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFsbG93X211bHRpcGxlX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU11bHRpcGxlRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubXVsdGlwbGVfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTmFtZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5uYW1lKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzSW1tdXRhYmxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2ltbXV0YWJsZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VXZWlnaHRlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy53ZWlnaHRlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBbnRpc3ltbWV0cmljKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFudGlzeW1tZXRyaWMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVuc2l0eSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZW5zaXR5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU9yZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm9yZGVyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNpemUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2l6ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBZGRWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBZGRWZXJ0aWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hZGRfdmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVsZXRlVmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlbGV0ZV92ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVsZXRlVmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVsZXRlX3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUhhc1ZlcnRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5oYXNfdmVydGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJhbmRvbVZlcnRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yYW5kb21fdmVydGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJhbmRvbVZlcnRleEl0ZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnJhbmRvbV92ZXJ0ZXhfaXRlcmF0b3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmFuZG9tRWRnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yYW5kb21fZWRnZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSYW5kb21FZGdlSXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFuZG9tX2VkZ2VfaXRlcmF0b3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVmVydGV4Qm91bmRhcnkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudmVydGV4X2JvdW5kYXJ5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNldFZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNldF92ZXJ0aWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHZXRWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ2V0X3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHZXRWZXJ0aWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5nZXRfdmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVmVydGV4SXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudmVydGV4X2l0ZXJhdG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU5laWdoYm9ySXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubmVpZ2hib3JfaXRlcmF0b3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTmVpZ2hib3JzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm5laWdoYm9ycygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNZXJnZVZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1lcmdlX3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFkZEVkZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX2VkZ2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWRkRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN1YmRpdmlkZUVkZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZGl2aWRlX2VkZ2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3ViZGl2aWRlRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZGl2aWRlX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlbGV0ZUVkZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVsZXRlX2VkZ2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVsZXRlRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVsZXRlX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlbGV0ZU11bHRpZWRnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWxldGVfbXVsdGllZGdlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNldEVkZ2VMYWJlbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zZXRfZWRnZV9sYWJlbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VIYXNFZGdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmhhc19lZGdlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VCb3VuZGFyeSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2JvdW5kYXJ5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VJdGVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2l0ZXJhdG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VzSW5jaWRlbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWRnZXNfaW5jaWRlbnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZUxhYmVsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VfbGFiZWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZUxhYmVscygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2xhYmVscygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSZW1vdmVNdWx0aXBsZUVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnJlbW92ZV9tdWx0aXBsZV9lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGVhcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGVhcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWdyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVncmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUF2ZXJhZ2VEZWdyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYXZlcmFnZV9kZWdyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVncmVlSGlzdG9ncmFtKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlZ3JlZV9oaXN0b2dyYW0oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVncmVlSXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVncmVlX2l0ZXJhdG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlZ3JlZVNlcXVlbmNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlZ3JlZV9zZXF1ZW5jZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSYW5kb21TdWJncmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yYW5kb21fc3ViZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWRkQ2xpcXVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFkZF9jbGlxdWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWRkQ3ljbGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX2N5Y2xlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFkZFBhdGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX3BhdGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ29tcGxlbWVudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jb21wbGVtZW50KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxpbmVHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5saW5lX2dyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRvU2ltcGxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRvX3NpbXBsZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXNqb2ludFVuaW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc2pvaW50X3VuaW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVVuaW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnVuaW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJlbGFiZWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmVsYWJlbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWdyZWVUb0NlbGwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVncmVlX3RvX2NlbGwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3ViZ3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNTdWJncmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19zdWJncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDYXJ0ZXNpYW5Qcm9kdWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNhcnRlc2lhbl9wcm9kdWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRlbnNvclByb2R1Y3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudGVuc29yX3Byb2R1Y3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTGV4aWNvZ3JhcGhpY1Byb2R1Y3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubGV4aWNvZ3JhcGhpY19wcm9kdWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN0cm9uZ1Byb2R1Y3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3Ryb25nX3Byb2R1Y3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzanVuY3RpdmVQcm9kdWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc2p1bmN0aXZlX3Byb2R1Y3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRXVsZXJpYW5PcmllbnRhdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ldWxlcmlhbl9vcmllbnRhdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFdWxlcmlhbkNpcmN1aXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZXVsZXJpYW5fY2lyY3VpdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDeWNsZUJhc2lzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmN5Y2xlX2Jhc2lzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFsbFBhdGhzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFsbF9wYXRocygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUcmlhbmdsZXNDb3VudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50cmlhbmdsZXNfY291bnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3BlY3RydW0oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3BlY3RydW0oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWlnZW52ZWN0b3JzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVpZ2VudmVjdG9ycygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFaWdlbnNwYWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5laWdlbnNwYWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbHVzdGVyVHJpYW5nbGVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsdXN0ZXJfdHJpYW5nbGVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsdXN0ZXJpbmdBdmVyYWdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsdXN0ZXJpbmdfYXZlcmFnZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbHVzdGVyaW5nQ29lZmYoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2x1c3RlcmluZ19jb2VmZigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbHVzdGVyVHJhbnNpdGl2aXR5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsdXN0ZXJfdHJhbnNpdGl2aXR5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN6ZWdlZEluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnN6ZWdlZF9pbmRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb2Fyc2VzdEVxdWl0YWJsZVJlZmluZW1lbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29hcnNlc3RfZXF1aXRhYmxlX3JlZmluZW1lbnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQXV0b21vcnBoaXNtR3JvdXAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYXV0b21vcnBoaXNtX2dyb3VwKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzVmVydGV4VHJhbnNpdGl2ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc192ZXJ0ZXhfdHJhbnNpdGl2ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0lzb21vcnBoaWMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfaXNvbW9ycGhpYygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDYW5vbmljYWxMYWJlbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jYW5vbmljYWxfbGFiZWwoKS5wbG90KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ2F5bGV5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2NheWxleSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0V1bGVyaWFuKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2V1bGVyaWFuKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzUGxhbmFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3BsYW5hcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0NpcmN1bGFyUGxhbmFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2NpcmN1bGFyX3BsYW5hcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1JlZ3VsYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfcmVndWxhcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0Nob3JkYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfY2hvcmRhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0NpcmN1bGFudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jaXJjdWxhbnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNJbnRlcnZhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19pbnRlcnZhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0dhbGxhaVRyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZ2FsbGFpX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDbGlxdWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfY2xpcXVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ3ljbGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfY3ljbGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNJbmRlcGVuZGVudFNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19pbmRlcGVuZGVudF9zZXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNUcmFuc2l0aXZlbHlSZWR1Y2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3RyYW5zaXRpdmVseV9yZWR1Y2VkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzRXF1aXRhYmxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2VxdWl0YWJsZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VCcmVhZHRoRmlyc3RTZWFyY2goKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYnJlYWR0aF9maXJzdF9zZWFyY2goKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVwdGhGaXJzdFNlYXJjaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZXB0aF9maXJzdF9zZWFyY2goKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTGV4QkZTKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxleF9CRlMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2VudHJhbGl0eUJldHdlZW5uZXNzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNlbnRyYWxpdHlfYmV0d2Vlbm5lc3MoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2VudHJhbGl0eUNsb3NlbmVzcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jZW50cmFsaXR5X2Nsb3NlbmVzcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXN0YW5jZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaXN0YW5jZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXN0YW5jZUFsbFBhaXJzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc3RhbmNlX2FsbF9wYWlycygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXN0YW5jZXNEaXN0cmlidXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGlzdGFuY2VzX2Rpc3RyaWJ1dGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFY2NlbnRyaWNpdHkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWNjZW50cmljaXR5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJhZGl1cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yYWRpdXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2VudGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNlbnRlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaWFtZXRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaWFtZXRlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXN0YW5jZUdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc3RhbmNlX2dyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdpcnRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdpcnRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVBlcmlwaGVyeSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5wZXJpcGhlcnkoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvcnRlc3RQYXRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNob3J0ZXN0X3BhdGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvcnRlc3RQYXRoTGVuZ3RoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNob3J0ZXN0X3BhdGhfbGVuZ3RoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3J0ZXN0UGF0aHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2hvcnRlc3RfcGF0aHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvcnRlc3RQYXRoTGVuZ3RocygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zaG9ydGVzdF9wYXRoX2xlbmd0aHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvcnRlc3RQYXRoQWxsUGFpcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2hvcnRlc3RfcGF0aF9hbGxfcGFpcnMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlV2llbmVySW5kZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcud2llbmVyX2luZGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUF2ZXJhZ2VEaXN0YW5jZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hdmVyYWdlX2Rpc3RhbmNlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ29ubmVjdGVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2Nvbm5lY3RlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb25uZWN0ZWRDb21wb25lbnRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbm5lY3RlZF9jb21wb25lbnRzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvbm5lY3RlZENvbXBvbmVudHNOdW1iZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29ubmVjdGVkX2NvbXBvbmVudHNfbnVtYmVyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvbm5lY3RlZENvbXBvbmVudHNTdWJncmFwaHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29ubmVjdGVkX2NvbXBvbmVudHNfc3ViZ3JhcGhzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvbm5lY3RlZENvbXBvbmVudENvbnRhaW5pbmdWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29ubmVjdGVkX2NvbXBvbmVudF9jb250YWluaW5nX3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb25uZWN0ZWRDb21wb25lbnRzU2l6ZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29ubmVjdGVkX2NvbXBvbmVudHNfc2l6ZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQmxvY2tzQW5kQ3V0VmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYmxvY2tzX2FuZF9jdXRfdmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQmxvY2tzQW5kQ3V0c1RyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYmxvY2tzX2FuZF9jdXRzX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDdXRFZGdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2N1dF9lZGdlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ3V0VmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2N1dF92ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZUN1dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2N1dCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VWZXJ0ZXhDdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudmVydGV4X2N1dCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VGbG93KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmZsb3coKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZURpc2pvaW50UGF0aHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWRnZV9kaXNqb2ludF9wYXRocygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VWZXJ0ZXhEaXNqb2ludFBhdGhzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnZlcnRleF9kaXNqb2ludF9wYXRocygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFZGdlQ29ubmVjdGl2aXR5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VfY29ubmVjdGl2aXR5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVZlcnRleENvbm5lY3Rpdml0eSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy52ZXJ0ZXhfY29ubmVjdGl2aXR5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRyYW5zaXRpdmVDbG9zdXJlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRyYW5zaXRpdmVfY2xvc3VyZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUcmFuc2l0aXZlUmVkdWN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRyYW5zaXRpdmVfcmVkdWN0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1pblNwYW5uaW5nVHJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5taW5fc3Bhbm5pbmdfdHJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTcGFubmluZ1RyZWVzQ291bnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3Bhbm5pbmdfdHJlZXNfY291bnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRG9taW5hdG9yVHJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kb21pbmF0b3JfdHJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRFbWJlZGRpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X2VtYmVkZGluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHZXRFbWJlZGRpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ2V0X2VtYmVkZGluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VGYWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5mYWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHZXRQb3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ2V0X3BvcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRQb3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X3BvcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRQbGFuYXJQb3NpdGlvbnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X3BsYW5hcl9wb3NpdGlvbnMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICBcclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0RyYXduRnJlZU9mRWRnZUNyb3NzaW5ncygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19kcmF3bl9mcmVlX29mX2VkZ2VfY3Jvc3NpbmdzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxhdGV4T3B0aW9ucygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5sYXRleF9vcHRpb25zKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNldExhdGV4T3B0aW9ucygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zZXRfbGF0ZXhfb3B0aW9ucygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMYXlvdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubGF5b3V0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR3JhcGhwbG90KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdyYXBocGxvdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VQbG90KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnBsb3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvdygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zaG93KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVBsb3QzZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5wbG90M2QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvdzNkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNob3czZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHcmFwaHZpelN0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ncmFwaHZpel9zdHJpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR3JhcGh2aXpUb0ZpbGVOYW1lZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ncmFwaHZpel90b19maWxlX25hbWVkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN0ZWluZXJUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnN0ZWluZXJfdHJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFZGdlRGlzam9pbnRTcGFubmluZ1RyZWVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VfZGlzam9pbnRfc3Bhbm5pbmdfdHJlZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRmVlZGJhY2tWZXJ0ZXhTZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZmVlZGJhY2tfdmVydGV4X3NldCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNdWx0aXdheUN1dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tdWx0aXdheV9jdXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTWF4Q3V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1heF9jdXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTG9uZ2VzdFBhdGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubG9uZ2VzdF9wYXRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRyYXZlbGluZ1NhbGVzbWFuUHJvYmxlbSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50cmF2ZWxpbmdfc2FsZXNtYW5fcHJvYmxlbSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0hhbWlsdG9uaWFuKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2hhbWlsdG9uaWFuKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUhhbWlsdG9uaWFuQ3ljbGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaGFtaWx0b25pYW5fY3ljbGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSGFtaWx0b25pYW5QYXRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmhhbWlsdG9uaWFuX3BhdGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTXVsdGljb21tb2RpdHlGbG93KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm11bHRpY29tbW9kaXR5X2Zsb3coKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzam9pbnRSb3V0ZWRQYXRocygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaXNqb2ludF9yb3V0ZWRfcGF0aHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRG9taW5hdGluZ1NldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kb21pbmF0aW5nX3NldCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTdWJncmFwaFNlYXJjaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdWJncmFwaF9zZWFyY2goKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3ViZ3JhcGhTZWFyY2hDb3VudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdWJncmFwaF9zZWFyY2hfY291bnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3ViZ3JhcGhTZWFyY2hJdGVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdWJncmFwaF9zZWFyY2hfaXRlcmF0b3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2hhcmFjdGVyaXN0aWNQb2x5bm9taWFsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNoYXJhY3RlcmlzdGljX3BvbHlub21pYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR2VudXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ2VudXMoKVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gTGF5b3V0XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlTGF5b3V0U3ByaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X3NwcmluZygpXCIpO1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25zID0gU2NhbGUoRXh0cmFjdFBvaW50cyhsYXlvdXQpKTtcclxuICAgICAgICAgICAgYXdhaXQgTGF5b3V0R3JhcGgocG9zaXRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dFJhbmtlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGF5b3V0ID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLmxheW91dF9yYW5rZWQoKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dEV4dGVuZFJhbmRvbWx5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X2V4dGVuZF9yYW5kb21seSgpXCIpO1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25zID0gU2NhbGUoRXh0cmFjdFBvaW50cyhsYXlvdXQpKTtcclxuICAgICAgICAgICAgYXdhaXQgTGF5b3V0R3JhcGgocG9zaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlTGF5b3V0Q2lyY3VsYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5sYXlvdXRfY2lyY3VsYXIoKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dFRyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5sYXlvdXRfdHJlZSgpXCIpO1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25zID0gU2NhbGUoRXh0cmFjdFBvaW50cyhsYXlvdXQpKTtcclxuICAgICAgICAgICAgYXdhaXQgTGF5b3V0R3JhcGgocG9zaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlTGF5b3V0R3JhcGh2aXooKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5sYXlvdXRfZ3JhcGh2aXooKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VMYXlvdXRQbGFuYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5sYXlvdXRfcGxhbmFyKClcIik7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBTY2FsZShFeHRyYWN0UG9pbnRzKGxheW91dCkpO1xyXG4gICAgICAgICAgICBhd2FpdCBMYXlvdXRHcmFwaChwb3NpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxvYWROYW1lZEdyYXBoKHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGEgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKFwiRyA9IGdyYXBocy5cIiArIG5hbWUgKyBcIigpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFkamFjZW5jeV9tYXRyaXgoKS5zdHIoKVwiKTtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoXCJHID0gZ3JhcGhzLlwiICsgbmFtZSArIFwiKClcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubGF5b3V0KClcIik7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBTY2FsZShFeHRyYWN0UG9pbnRzKGxheW91dCkpO1xyXG4gICAgICAgICAgICB2YXIgYWRqID0gUGFyc2VBZGphY2VuY3lNYXRyaXgoYSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBBbGdvcml0aG1zLkdyYXBoKGFkaik7XHJcblxyXG4gICAgICAgICAgICBBcHAuTmV3VGFiKG5hbWUsIG5ldyBHcmFwaHMuR3JhcGgoZywgcG9zaXRpb25zLCBmYWxzZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIExpc3Q8VmVjdG9yPiBTY2FsZShJRW51bWVyYWJsZTxWZWN0b3I+IHBvc2l0aW9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpHcmFwaHMuVmVjdG9yPihwb3NpdGlvbnMpO1xyXG4gICAgICAgICAgICB2YXIgbWluWCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWluPGdsb2JhbDo6R3JhcGhzLlZlY3Rvcj4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZWN0b3IsIGRvdWJsZT4pKHAgPT4gcC5YKSk7XHJcbiAgICAgICAgICAgIHZhciBtaW5ZID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5NaW48Z2xvYmFsOjpHcmFwaHMuVmVjdG9yPihsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlY3RvciwgZG91YmxlPikocCA9PiBwLlkpKTtcclxuICAgICAgICAgICAgdmFyIG1heFggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkdyYXBocy5WZWN0b3I+KGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVjdG9yLCBkb3VibGU+KShwID0+IHAuWCkpO1xyXG4gICAgICAgICAgICB2YXIgbWF4WSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWF4PGdsb2JhbDo6R3JhcGhzLlZlY3Rvcj4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZWN0b3IsIGRvdWJsZT4pKHAgPT4gcC5ZKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdyA9IG1heFggLSBtaW5YO1xyXG4gICAgICAgICAgICB2YXIgaCA9IG1heFkgLSBtaW5ZO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6R3JhcGhzLlZlY3RvcixnbG9iYWw6OkdyYXBocy5WZWN0b3I+KHBvc2l0aW9ucywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZWN0b3IsIGdsb2JhbDo6R3JhcGhzLlZlY3Rvcj4pKHAgPT4gbmV3IFZlY3RvcigwLjEgKyAwLjggKiAocC5YIC0gbWluWCkgLyB3LCAwLjEgKyAwLjggKiAocC5ZIC0gbWluWSkgLyBoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXN5bmMgVGFzayBMYXlvdXRHcmFwaChMaXN0PFZlY3Rvcj4gcG9zaXRpb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU25hcFBvc2l0aW9uc1RvR3JpZChwb3NpdGlvbnMpO1xyXG4gICAgICAgICAgICB2YXIgYSA9IG5ldyBMYXlvdXRBbmltYXRpb24oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgR3JhcGhDYW52YXMuSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0sICgpID0+IEdyYXBoQ2FudmFzLkludmFsaWRhdGUoKSwgcG9zaXRpb25zLCBHcmFwaENhbnZhcy5HcmFwaCk7XHJcblxyXG4gICAgICAgICAgICBHcmFwaENhbnZhcy5TbmFwVG9HcmlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGF3YWl0IGEuQW5pbWF0ZSgpO1xyXG4gICAgICAgICAgICBHcmFwaENhbnZhcy5TbmFwVG9HcmlkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU25hcFBvc2l0aW9uc1RvR3JpZChMaXN0PFZlY3Rvcj4gcG9zaXRpb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3NpdGlvbnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb25zW2ldLlggPSAoZmxvYXQpKEdyYXBoQ2FudmFzLl9ncmlkU3RlcCAqIE1hdGguUm91bmQocG9zaXRpb25zW2ldLlggLyBHcmFwaENhbnZhcy5fZ3JpZFN0ZXApKTtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uc1tpXS5ZID0gKGZsb2F0KShHcmFwaENhbnZhcy5fZ3JpZFN0ZXAgKiBNYXRoLlJvdW5kKHBvc2l0aW9uc1tpXS5ZIC8gR3JhcGhDYW52YXMuX2dyaWRTdGVwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25HcmFwaE1vZGlmaWVkKEdyYXBocy5HcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBPbkxvYWQoRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VNb3ZlKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY3RybERvd24gPSBlLkN0cmxLZXk7XHJcbiAgICAgICAgICAgIGlmIChNb3VzZU1vdmVkICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBNb3VzZU1vdmVkKGUuTGF5ZXJYLCBlLkxheWVyWSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VCdXR0b25Eb3duKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY3RybERvd24gPSBlLkN0cmxLZXk7XHJcbiAgICAgICAgICAgLy8gQ2FudmFzLlNldENhcHR1cmUodHJ1ZSk7ICAvLyBjaHJvbWUgZG9lcyBub3Qgc2VlbSB0byBzdXBwb3J0IHRoaXMsIHdoYXQ/XHJcblxyXG4gICAgICAgICAgICBpZiAoZS5TaGlmdEtleSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uRG91YmxlQ2xpY2tlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uRG91YmxlQ2xpY2tlZChlLkxheWVyWCwgZS5MYXllclksIGUuQnV0dG9uID09IDAgPyBNb3VzZUJ1dHRvbi5MZWZ0IDogTW91c2VCdXR0b24uUmlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uRG93biAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uRG93bihlLkxheWVyWCwgZS5MYXllclksIGUuQnV0dG9uID09IDAgPyBNb3VzZUJ1dHRvbi5MZWZ0IDogTW91c2VCdXR0b24uUmlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VCdXR0b25VcChNb3VzZUV2ZW50PEhUTUxDYW52YXNFbGVtZW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2N0cmxEb3duID0gZS5DdHJsS2V5O1xyXG4gICAgICAgICAgIC8vIENhbnZhcy5TZXRDYXB0dXJlKGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKGUuU2hpZnRLZXkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uVXAgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uVXAoZS5MYXllclgsIGUuTGF5ZXJZLCBlLkJ1dHRvbiA9PSAwID8gTW91c2VCdXR0b24uTGVmdCA6IE1vdXNlQnV0dG9uLlJpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlLkN0cmxLZXkgJiYgZS5BbHRLZXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFwcC5Bc2tTYWdlKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25Nb3VzZURvdWJsZUNsaWNrKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0Q2xpcGJvYXJkVGV4dChzdHJpbmcgdGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEdldENsaXBib2FyZFRleHQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0NvbnRyb2xLZXlEb3duXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2N0cmxEb3duOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8b2JqZWN0PiBTZWxlY3RlZE9iamVjdHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEludmFsaWRhdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGdyYXBoaWNzID0gbmV3IEdyYXBoaWNzKENhbnZhcyk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2FudmFzLlBhaW50KGdyYXBoaWNzLCBDYW52YXMuV2lkdGgsIENhbnZhcy5IZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUaXRsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF90aXRsZTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3RpdGxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBldmVudCBBY3Rpb248ZG91YmxlLCBkb3VibGU+IE1vdXNlTW92ZWQ7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxkb3VibGUsIGRvdWJsZSwgTW91c2VCdXR0b24+IE1vdXNlQnV0dG9uVXA7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxkb3VibGUsIGRvdWJsZSwgTW91c2VCdXR0b24+IE1vdXNlQnV0dG9uRG93bjtcclxuICAgICAgICBwdWJsaWMgZXZlbnQgQWN0aW9uPGRvdWJsZSwgZG91YmxlLCBNb3VzZUJ1dHRvbj4gTW91c2VCdXR0b25Eb3VibGVDbGlja2VkO1xyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8VmVjdG9yPiBFeHRyYWN0UG9pbnRzKHN0cmluZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGogPSB4LkluZGV4T2YoXCJbXCIsIGkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGogPCAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGogPSB4LkluZGV4T2YoXCIoXCIsIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqIDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBqID0geC5JbmRleE9mKFwiXVwiLCBpKTtcclxuICAgICAgICAgICAgICAgIGlmIChqIDwgMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBqID0geC5JbmRleE9mKFwiKVwiLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaiA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSB4LlN1YnN0cmluZyhpLCBqIC0gaSkuU3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgVmVjdG9yKGRvdWJsZS5QYXJzZShwWzBdLlRyaW0oJ1snLCAnXScsICcoJywgJyknKSksIGRvdWJsZS5QYXJzZShwWzFdLlRyaW0oJ1snLCAnXScsICcoJywgJyknKSkpO1xyXG4gICAgICAgICAgICAgICAgaSA9IGo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sWyxdIFBhcnNlQWRqYWNlbmN5TWF0cml4KHN0cmluZyBhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJpdHMgPSBhLlJlcGxhY2UoXCInXCIsIFwiXCIpLlNwbGl0KG5ld1tdIHsgXCIsXCIsIFwiXFxcXFxcXFxuXCIsIFwiW1wiLCBcIl1cIiwgXCIgXCIgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyk7XHJcbiAgICAgICAgICAgIHZhciBuID0gKGludClNYXRoLlNxcnQoYml0cy5MZW5ndGgpO1xyXG4gICAgICAgICAgICB2YXIgYWRqID0gbmV3IGJvb2xbbiwgbl07XHJcblxyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIGJpdHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGFkaltpIC8gbiwgaSAlIG5dID0gYiA9PSBcIjFcIjtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFkajtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0KfQo=
