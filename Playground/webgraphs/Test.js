/**
 * @version 1.0.0.0
 * @author Hewlett-Packard
 * @copyright Copyright Â© Hewlett-Packard 2017
 * @compiler Bridge.NET 16.0.1
 */
Bridge.assembly("Test", function ($asm, globals) {
    "use strict";

    Bridge.define("Algorithms.AssignmentEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _vertexCount: 0,
            _f: null,
            _potSize: 0,
            _start: 0,
            _step: 0
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$List$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._vertexCount = vertexCount;
                this._f = f;
                this._potSize = potSize;
                this._start = start;
                this._step = step;
            }
        },
        methods: {
            getEnumerator: function () {
                return new Algorithms.AssignmentEnumerator.Enumerator(this._vertexCount, this._f, this._potSize, this._start, this._step);
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            }
        }
    });

    Bridge.define("Algorithms.AssignmentEnumerator.Enumerator", {
        inherits: [System.Collections.Generic.IEnumerator$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _enumerators: null,
            _current: null,
            _step: 0
        },
        props: {
            Current: {
                get: function () {
                    return this._current;
                }
            },
            System$Collections$IEnumerator$Current: {
                get: function () {
                    return this.Current;
                }
            }
        },
        alias: [
            "Current", ["System$Collections$Generic$IEnumerator$1$System$Collections$Generic$List$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1"],
            "dispose", "System$IDisposable$dispose",
            "moveNext", "System$Collections$IEnumerator$moveNext"
        ],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._enumerators = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerator$1(System.Int64)))(vertexCount);
                var first = Algorithms.Int64Usage.ToInt64(System.Linq.Enumerable.range(0, f(0)));
                this._enumerators.add(function (_o1) {
                        _o1.add(first);
                        return _o1;
                    }(new (System.Collections.Generic.List$1(System.Int64))()).getEnumerator());
                for (var i = 1; i < vertexCount; i = (i + 1) | 0) {
                    this._enumerators.add(new Algorithms.SubsetEnumerator.Enumerator(potSize, f(i)));
                }

                this._step = step;

                for (var i1 = 0; i1 < start; i1 = (i1 + 1) | 0) {
                    if (!this.MoveNextInternal()) {
                        break;
                    }
                }
            }
        },
        methods: {
            dispose: function () { },
            moveNext: function () {
                for (var j = 0; j < this._step; j = (j + 1) | 0) {
                    if (!this.MoveNextInternal()) {
                        return false;
                    }
                }

                return true;
            },
            MoveNextInternal: function () {
                var $t, $t1, $t2;
                if (this._current == null) {
                    this._current = new (System.Collections.Generic.List$1(System.Int64))(this._enumerators.Count);

                    $t = Bridge.getEnumerator(this._enumerators);
                    try {
                        while ($t.moveNext()) {
                            var enumerator = $t.Current;
                            enumerator.System$Collections$IEnumerator$moveNext();
                            this._current.add(enumerator[Bridge.geti(enumerator, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return true;
                }

                var i = (this._enumerators.Count - 1) | 0;
                while (i >= 1) {
                    if (this._enumerators.getItem(i).System$Collections$IEnumerator$moveNext()) {
                        this._current.setItem(i, ($t1 = this._enumerators.getItem(i))[Bridge.geti($t1, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);
                        break;
                    }

                    this._enumerators.getItem(i).System$Collections$IEnumerator$reset();
                    this._enumerators.getItem(i).System$Collections$IEnumerator$moveNext();

                    this._current.setItem(i, ($t2 = this._enumerators.getItem(i))[Bridge.geti($t2, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);

                    i = (i - 1) | 0;
                }

                return i >= 1;
            },
            System$Collections$IEnumerator$reset: function () {
                throw new System.NotImplementedException();
            }
        }
    });

    Bridge.define("Algorithms.ChoosabilityResult", {
        props: {
            BadAssignment: null,
            Canceled: false,
            IsChoosable: {
                get: function () {
                    return this.BadAssignment == null;
                }
            }
        },
        ctors: {
            ctor: function (badAssignment, canceled) {
                if (canceled === void 0) { canceled = false; }

                this.$initialize();
                this.BadAssignment = badAssignment;
                this.Canceled = canceled;
            }
        }
    });

    Bridge.define("Algorithms.Counting", {
        statics: {
            methods: {
                BinomialCoefficient: function (n, k) {
                    if (k.lt(System.Int64(0))) {
                        return System.Int64(1);
                    }

                    var max = System.Int64.max(k, n.sub(k));
                    var min = System.Int64.min(k, n.sub(k));

                    var result = System.Int64(1);
                    while (n.gt(max)) {
                        result = result.mul(n);
                        n = n.dec();
                    }

                    while (min.gt(System.Int64(0))) {
                        result = result.div(min);

                        min = min.dec();
                    }

                    return result;
                },
                Factorial: function (n) {
                    var total = System.Int64(1);
                    for (var i = 1; i <= n; i = (i + 1) | 0) {
                        total = total.mul(System.Int64(i));
                    }

                    return total;
                }
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.Bijection$2", function (D, C) { return {
        fields: {
            _f: null,
            _finverse: null
        },
        ctors: {
            init: function () {
                this._f = new (System.Collections.Generic.Dictionary$2(D,C))();
                this._finverse = new (System.Collections.Generic.Dictionary$2(C,D))();
            }
        },
        methods: {
            getItem: function (d) {
                return this._f.get(d);
            },
            setItem: function (d, value) {
                this._f.set(d, value);
                this._finverse.set(value, d);
            },
            getItem$1: function (c) {
                return this._finverse.get(c);
            },
            setItem$1: function (c, value) {
                this._f.set(value, c);
                this._finverse.set(c, value);
            },
            Apply$1: function (e) {
                return System.Linq.Enumerable.from(e).select(Bridge.fn.bind(this, $asm.$.Algorithms.DataStructures.Bijection$2.f1));
            },
            Apply: function (e) {
                return System.Linq.Enumerable.from(e).select(Bridge.fn.bind(this, $asm.$.Algorithms.DataStructures.Bijection$2.f2));
            }
        }
    }; });

    Bridge.ns("Algorithms.DataStructures.Bijection$2", $asm.$);

    Bridge.apply($asm.$.Algorithms.DataStructures.Bijection$2, {
        f1: function (d) {
            return this.getItem(d);
        },
        f2: function (c) {
            return this.getItem$1(c);
        }
    });

    Bridge.define("Algorithms.DataStructures.BijectionExtensions", {
        statics: {
            methods: {
                NumberObjects: function (T, objects) {
                    var $t;
                    var numbering = new (Algorithms.DataStructures.Bijection$2(System.Int32,T))();

                    var i = 0;
                    $t = Bridge.getEnumerator(objects, T);
                    try {
                        while ($t.moveNext()) {
                            var o = $t.Current;
                            numbering.setItem(i, o);
                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return numbering;
                }
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.UnionFind$1", function (T) { return {
        methods: {
            MakeSet: function (t) {
                var node = new (Algorithms.DataStructures.UnionFind$1.Node(T))();
                node.Parent = node;
                node.Rank = 0;
                node.T = t;

                this.RootAdded(node);
                return node;
            },
            Union: function (nx, ny) {
                var xRoot = this.Find(nx);
                var yRoot = this.Find(ny);

                if (Bridge.referenceEquals(xRoot, yRoot)) {
                    return;
                }

                if (xRoot.Rank < yRoot.Rank) {
                    xRoot.Parent = yRoot;
                    this.RootRemoved(xRoot);
                } else if (xRoot.Rank > yRoot.Rank) {
                    yRoot.Parent = xRoot;
                    this.RootRemoved(yRoot);
                } else {
                    yRoot.Parent = xRoot;
                    xRoot.Rank = (xRoot.Rank + 1) | 0;
                    this.RootRemoved(yRoot);
                }
            },
            Find: function (n) {
                if (!Bridge.referenceEquals(n.Parent, n)) {
                    n.Parent = this.Find(n.Parent);
                }

                return n.Parent;
            },
            RootAdded: function (n) { },
            RootRemoved: function (n) { }
        }
    }; });

    Bridge.define("Algorithms.DataStructures.UnionFind$1.Node", function (T) { return {
        props: {
            Parent: null,
            Rank: 0,
            T: Bridge.getDefaultValue(T)
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.Board", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        statics: {
            fields: {
                StorePermutationInfo: false
            },
            methods: {
                UpdateHash: function (hash, value) {
                    hash.v = System.Int64.clip32(System.Int64(Bridge.Int.mul(37, hash.v)).add(value));
                },
                ApplyMapping$1: function (mapping, stack) {
                    return Algorithms.Int64Usage.ToInt64(Algorithms.FixerBreaker.Board.ApplyMapping(mapping, Algorithms.Int64Usage.ToSet(stack)));
                },
                ApplyMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item2.getItem(mapping.item1.indexOf(c));
                        });
                },
                ApplyInverseMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item1.getItem(mapping.item2.indexOf(c));
                        });
                },
                OtherTurn: function (turn) {
                    return ((1 - turn) | 0);
                }
            }
        },
        fields: {
            Stacks: null,
            _hashCode: 0,
            PotSet: null,
            Traces: null,
            TracesForPermutationInfo: null,
            TraceChangeIndices: null,
            Template: null,
            Pot: System.Int64(0),
            ColorCount: 0,
            Turn: 0,
            N: 0,
            LastMove: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            init: function () {
                this.LastMove = new Algorithms.FixerBreaker.Move();
            },
            ctor: function (stacks, pot, computeHash) {
                if (computeHash === void 0) { computeHash = true; }

                this.$initialize();
                this.Stacks = stacks;
                this.Pot = pot;
                this.Turn = Algorithms.FixerBreaker.Turn.Fixer;
                this.N = this.Stacks.Count;
                this.Template = new (Algorithms.Lazy$1(Algorithms.FixerBreaker.KnowledgeEngine.Template)).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Board.f2));
                this.PotSet = Algorithms.Int64Usage.ToSet(this.Pot);
                this.ColorCount = this.PotSet.Count;
                this.Traces = new (System.Collections.Generic.List$1(System.Int64))(this.ColorCount);

                if (Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    this.TracesForPermutationInfo = new (System.Collections.Generic.List$1(System.Object))(this.ColorCount);
                    this.TraceChangeIndices = new (System.Collections.Generic.List$1(System.Int32))();
                }

                if (computeHash) {
                    this.ComputeHashCode();
                }
            }
        },
        methods: {
            getItem: function (x) {
                return this.Stacks.getItem(x);
            },
            ComputeHashCode: function () {
                var $t, $t1, $t2;
                this._hashCode = this.N;
                Algorithms.FixerBreaker.Board.UpdateHash(Bridge.ref(this, "_hashCode"), this.Turn);

                this.Traces.clear();
                $t = Bridge.getEnumerator(this.PotSet);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        var t = this.GetTrace(c);
                        if (t.gt(System.Int64(0))) {
                            this.Traces.add(t);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Traces.sort();

                $t1 = Bridge.getEnumerator(this.Traces);
                try {
                    while ($t1.moveNext()) {
                        var t1 = $t1.Current;
                        Algorithms.FixerBreaker.Board.UpdateHash(Bridge.ref(this, "_hashCode"), t1);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                if (Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    this.TracesForPermutationInfo.clear();
                    this.TraceChangeIndices.clear();

                    $t2 = Bridge.getEnumerator(this.PotSet);
                    try {
                        while ($t2.moveNext()) {
                            var c1 = $t2.Current;
                            var t2 = this.GetTrace(c1);
                            if (t2.gt(System.Int64(0))) {
                                this.TracesForPermutationInfo.add({ item1: c1, item2: t2 });
                            }
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }
                    this.TracesForPermutationInfo.sort($asm.$.Algorithms.FixerBreaker.Board.f3);

                    var previousTrace = System.Int64(-1);
                    for (var i = 0; i < this.TracesForPermutationInfo.Count; i = (i + 1) | 0) {
                        var t3 = this.TracesForPermutationInfo.getItem(i);

                        if (t3.item2.ne(previousTrace)) {
                            this.TraceChangeIndices.add(i);
                            previousTrace = t3.item2;
                        }
                    }

                    this.TraceChangeIndices.add(this.TracesForPermutationInfo.Count);
                }
            },
            GetTrace: function (c) {
                var k = System.Int64(1).shl(c);
                var trace = System.Int64(0);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    if ((this.Stacks.getItem(i).and(k)).ne(System.Int64(0))) {
                        trace = trace.or((System.Int64(1).shl(i)));
                    }
                }

                return trace;
            },
            MakeMove: function (move) {
                this.LastMove = move.$clone();

                if (move.Stack >= 0) {
                    this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                }

                this.Turn = Algorithms.FixerBreaker.Board.OtherTurn(this.Turn);

                this.ComputeHashCode();
            },
            DoMoveCombination: function (moves) {
                var $t;
                $t = Bridge.getEnumerator(moves, Algorithms.FixerBreaker.Move);
                try {
                    while ($t.moveNext()) {
                        var move = $t.Current.$clone();
                        this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ComputeHashCode();
            },
            Clone: function () {
                var clone = new Algorithms.FixerBreaker.Board(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();
                clone._hashCode = this._hashCode;

                clone.ComputeHashCode();

                return clone;
            },
            DoMoveCombinationOnClone: function (swap) {
                var clone = new Algorithms.FixerBreaker.Board(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot, false);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();

                clone.DoMoveCombination(swap);

                return clone;
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.Board));
            },
            Equals: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }

                return System.Linq.Enumerable.from(this.Traces).sequenceEqual(other.Traces);
            },
            FindPermutation: function (other) {
                if (!Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    throw new System.Exception("not storing permutation info");
                }

                if (!System.Linq.Enumerable.from(this.TracesForPermutationInfo).select($asm.$.Algorithms.FixerBreaker.Board.f4).sequenceEqual(System.Linq.Enumerable.from(other.TracesForPermutationInfo).select($asm.$.Algorithms.FixerBreaker.Board.f4))) {
                    return null;
                }

                var mappingPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < ((this.TraceChangeIndices.Count - 1) | 0); i = (i + 1) | 0) {
                    var domain = new (System.Collections.Generic.List$1(System.Int32))();
                    var codomain = new (System.Collections.Generic.List$1(System.Int32))();

                    for (var j = this.TraceChangeIndices.getItem(i); j < this.TraceChangeIndices.getItem(((i + 1) | 0)); j = (j + 1) | 0) {
                        domain.add(this.TracesForPermutationInfo.getItem(j).item1);
                        codomain.add(other.TracesForPermutationInfo.getItem(j).item1);
                    }

                    mappingPairs.add({ item1: domain, item2: codomain });
                }

                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Object, System.Linq.Enumerable.from(mappingPairs).select($asm.$.Algorithms.FixerBreaker.Board.f5))).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Board.f6)).firstOrDefault(Bridge.fn.bind(this, function (mapping) {
                        return this.SequenceEqualPermuted(mapping, other);
                    }), null);
            },
            FlattenMapping: function (mapping) {
                return { item1: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.Board.f7).toList(System.Int32), item2: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.Board.f8).toList(System.Int32) };
            },
            SequenceEqualPermuted: function (mapping, other) {
                for (var i = 0; i < this.Stacks.Count; i = (i + 1) | 0) {
                    var permutedStack = Algorithms.FixerBreaker.Board.ApplyMapping$1(mapping, this.Stacks.getItem(i));
                    if (permutedStack.ne(other.Stacks.getItem(i))) {
                        return false;
                    }
                }

                if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                    return true;
                }

                if (this.LastMove.Stack !== other.LastMove.Stack) {
                    return false;
                }

                var ours = System.Array.init([this.LastMove.Added, this.LastMove.Removed], System.Int32);
                var theirs = function (_o2) {
                        _o2.add(other.LastMove.Added);
                        _o2.add(other.LastMove.Removed);
                        return _o2;
                    }(new (System.Collections.Generic.List$1(System.Int32))());

                return Algorithms.Utility.ListUtility.Equal(System.Int32, System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(mapping, ours)).toList(System.Int32), theirs);
            },
            getHashCode: function () {
                return this._hashCode;
            },
            getEnumerator: function () {
                return this.Stacks.getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f9)).join("|");
            },
            ToTex: function () {
                return Algorithms.GenericExtensions.JoinPretty(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f10), ", ");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.Board", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.Board, {
        f1: function (s) {
            return Algorithms.Int64Usage.PopulationCount(s);
        },
        f2: function () {
            return new Algorithms.FixerBreaker.KnowledgeEngine.Template.ctor(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f1).toList(System.Int32));
        },
        f3: function (x, y) {
            return x.item2.compareTo(y.item2);
        },
        f4: function (t) {
            return t.item2;
        },
        f5: function (mp) {
            return System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(mp.item2.Count)).select(function (p) {
                    return { item1: mp.item1, item2: p.Apply(System.Int32, mp.item2) };
                });
        },
        f6: function (mapping) {
            return this.FlattenMapping(mapping);
        },
        f7: function (x) {
            return x.item1;
        },
        f8: function (x) {
            return x.item2;
        },
        f9: function (x) {
            return Algorithms.Int64Usage.ToSetStringSmall(x);
        },
        f10: function (stack, i) {
            return System.String.concat("$L(v_" + (((i + 1) | 0)) + ") = ", System.String.replaceAll(System.String.replaceAll(Algorithms.Int64Usage.ToSetString$2(stack), "{", "\\{"), "}", "\\}"), "$");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Chronicle.BranchGenerator", {
        statics: {
            fields: {
                PartitionsCache: null
            },
            ctors: {
                init: function () {
                    this.PartitionsCache = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))))();
                }
            },
            methods: {
                GetPartitions: function (count) {
                    var partitions = { };
                    if (!Algorithms.FixerBreaker.Chronicle.BranchGenerator.PartitionsCache.tryGetValue(count, partitions)) {
                        partitions.v = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions$1(count)).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                        Algorithms.FixerBreaker.Chronicle.BranchGenerator.PartitionsCache.set(count, partitions.v);
                    }

                    return partitions.v;
                },
                EnumerateBranches: function (board, colorPair) {
                    var S = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, colorPair)).toList(System.Int32);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(S.Count);

                    return System.Linq.Enumerable.from(partitions).select(function (partition) {
                            return new Algorithms.FixerBreaker.Chronicle.ChronicledBranch(S, colorPair.item1, colorPair.item2, partition);
                        });
                },
                EnumeratePartitions$1: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            partition,
                            i,
                            $t1,
                            partition1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (n % 2 === 0) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            $t = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(System.Linq.Enumerable.range(0, n).toList(System.Int32)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 2;
                                                continue;
                                        }
                                        case 2: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 3;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 3: {
                                            $enumerator.current = partition;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 2;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 6: {
                                            i = 0;
                                                $step = 7;
                                                continue;
                                        }
                                        case 7: {
                                            if ( i < n ) {
                                                    $step = 8;
                                                    continue;
                                                }
                                            $step = 14;
                                            continue;
                                        }
                                        case 8: {
                                            $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(System.Linq.Enumerable.range(0, n).where(function (j) {
                                                    return j !== i;
                                                }).toList(System.Int32)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 9;
                                                continue;
                                        }
                                        case 9: {
                                            if ($t1.moveNext()) {
                                                    partition1 = $t1.Current;
                                                    $step = 10;
                                                    continue;
                                                }
                                            $step = 12;
                                            continue;
                                        }
                                        case 10: {
                                            partition1.insert(0, function (_o3) {
                                                        _o3.add(i);
                                                        return _o3;
                                                    }(new (System.Collections.Generic.List$1(System.Int32))()));
                                                $enumerator.current = partition1;
                                                $step = 11;
                                                return true;
                                        }
                                        case 11: {
                                            $step = 9;
                                            continue;
                                        }
                                        case 12: {
                                            $step = 13;
                                            continue;
                                        }
                                        case 13: {
                                            i = (i + 1) | 0;
                                            $step = 7;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumeratePartitions: function (indices) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (indices) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            first,
                            i,
                            part,
                            $t,
                            partition,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (indices.Count <= 0) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            $enumerator.current = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 12;
                                            continue;
                                        }
                                        case 3: {
                                            first = indices.getItem(0);
                                                indices.removeAt(0);
                                                i = 0;
                                                $step = 4;
                                                continue;
                                        }
                                        case 4: {
                                            if ( i < indices.Count ) {
                                                    $step = 5;
                                                    continue;
                                                }
                                            $step = 11;
                                            continue;
                                        }
                                        case 5: {
                                            part = function (_o4) {
                                                        _o4.add(first);
                                                        _o4.add(indices.getItem(i));
                                                        return _o4;
                                                    }(new (System.Collections.Generic.List$1(System.Int32))());
                                                indices.removeAt(i);

                                                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(indices), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 6;
                                                continue;
                                        }
                                        case 6: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 7;
                                                    continue;
                                                }
                                            $step = 9;
                                            continue;
                                        }
                                        case 7: {
                                            partition.add(part);
                                                $enumerator.current = partition;
                                                $step = 8;
                                                return true;
                                        }
                                        case 8: {
                                            $step = 6;
                                            continue;
                                        }
                                        case 9: {
                                            indices.insert(i, part.getItem(1));
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            i = (i + 1) | 0;
                                            $step = 4;
                                            continue;
                                        }
                                        case 11: {
                                            indices.insert(0, first);
                                            $step = 12;
                                            continue;
                                        }
                                        case 12: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateExactlyOneIntersecters: function (board, colorPair) {
                    return System.Linq.Enumerable.range(0, board.Stacks.Count).where(function (i) {
                        return Algorithms.Int64Usage.IsBitSet(board.Stacks.getItem(i), System.Int64(colorPair.item1)) ^ Algorithms.Int64Usage.IsBitSet(board.Stacks.getItem(i), System.Int64(colorPair.item2));
                    });
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Move", {
        $kind: "struct",
        statics: {
            methods: {
                getDefaultValue: function () { return new Algorithms.FixerBreaker.Move(); }
            }
        },
        fields: {
            Stack: 0,
            Added: 0,
            Removed: 0
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([1702260557, this.Stack, this.Added, this.Removed]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, Algorithms.FixerBreaker.Move)) {
                    return false;
                }
                return Bridge.equals(this.Stack, o.Stack) && Bridge.equals(this.Added, o.Added) && Bridge.equals(this.Removed, o.Removed);
            },
            $clone: function (to) {
                var s = to || new Algorithms.FixerBreaker.Move();
                s.Stack = this.Stack;
                s.Added = this.Added;
                s.Removed = this.Removed;
                return s;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge", {
        props: {
            Board: null,
            Reason: null,
            Depth: 0,
            ColorPair: null,
            Swaps: null
        },
        ctors: {
            ctor: function (board, reason) {
                this.$initialize();
                this.Board = board;
                this.Reason = reason;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer", {
        $kind: "interface"
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge", {
        props: {
            Graph: null,
            LineGraph: null,
            Edges: null,
            EdgeIndices: null,
            Leaves: null,
            ConnectedOrderings: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.Graph = g;
                this.Leaves = System.Linq.Enumerable.from(this.Graph.Vertices).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge.f1)).toList(System.Int32);
                this.BuildLineGraph();

                this.ConnectedOrderings = new (Algorithms.Lazy$1(System.Collections.Generic.Dictionary$2(System.Object,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var co = new (System.Collections.Generic.Dictionary$2(System.Object,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))();
                    $t = Bridge.getEnumerator(this.Edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            co.set(e, System.Linq.Enumerable.from(this.Graph.EnumerateConnectedOrderings((function ($me, e) {
                                        return function (_o5) {
                                            _o5.add(e.item1);
                                            _o5.add(e.item2);
                                            return _o5;
                                        };
                                    })(this, e)(new (System.Collections.Generic.List$1(System.Int32))()))).toList(System.Collections.Generic.List$1(System.Int32)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return co;
                }));
            }
        },
        methods: {
            BuildLineGraph: function () {
                var adjacent = this.Graph.Adjacent;
                var n = ((System.Array.getLength(adjacent, 0) - 1) + 1) | 0;

                this.Edges = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        if (adjacent.get([i, j])) {
                            this.Edges.add({ item1: i, item2: j });
                        }
                    }
                }

                this.EdgeIndices = System.Linq.Enumerable.range(0, this.Edges.Count).toList(System.Int32);

                var meets = System.Array.create(false, null, System.Boolean, this.Edges.Count, this.Edges.Count);
                for (var i1 = 0; i1 < this.Edges.Count; i1 = (i1 + 1) | 0) {
                    for (var j1 = (i1 + 1) | 0; j1 < this.Edges.Count; j1 = (j1 + 1) | 0) {
                        if (this.Edges.getItem(i1).item1 === this.Edges.getItem(j1).item1 || this.Edges.getItem(i1).item1 === this.Edges.getItem(j1).item2 || this.Edges.getItem(i1).item2 === this.Edges.getItem(j1).item1 || this.Edges.getItem(i1).item2 === this.Edges.getItem(j1).item2) {
                            meets.set([i1, j1], (meets.set([j1, i1], true), true));
                        }
                    }
                }

                this.LineGraph = new Algorithms.Graph.ctor(meets);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge, {
        f1: function (v) {
            return this.Graph.Degree(v) === 1;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.IMind", {
        $kind: "interface"
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Knowledge", {
        fields: {
            _templateLookup: null
        },
        props: {
            GraphKnowledge: null
        },
        ctors: {
            init: function () {
                this._templateLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Template,Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge))();
            },
            ctor: function (g) {
                this.$initialize();
                this.GraphKnowledge = new Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge(g);
            }
        },
        methods: {
            getItem: function (template) {
                var p = { };
                if (!this._templateLookup.tryGetValue(template, p)) {
                    p.v = new Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge(template);
                    this._templateLookup.set(template, p.v);
                }

                return p.v;
            },
            GetEdgeColorList: function (board, edgeIndex) {
                return board.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item1).and(board.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item2));
            },
            GetEdgeColorList$1: function (stacks, edgeIndex) {
                return stacks.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item1).and(stacks.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item2));
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Tree$1", function (T) { return {
        props: {
            Parent: Bridge.getDefaultValue(T),
            This: Bridge.getDefaultValue(T),
            Children: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                this.This = Bridge.cast(this, T);
                this.Children = new (System.Collections.Generic.List$1(T))();
            }
        },
        methods: {
            RemoveChild: function (child) {
                this.Children.remove(child);
            },
            AddChild: function (child) {
                child.Parent = this.This;
                this.Children.add(child);
            },
            GetDepth: function () {
                var $t;
                var depth = 0;
                $t = Bridge.getEnumerator(this.Children);
                try {
                    while ($t.moveNext()) {
                        var child = $t.Current;
                        depth = Math.max(depth, ((child.GetDepth() + 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return depth;
            },
            Traverse: function (onDescent, maxDepth) {
                if (maxDepth === void 0) { maxDepth = 2147483647; }
                this.TraverseInternal(onDescent, maxDepth, 0);
            },
            TraverseInternal: function (onDescent, maxDepth, depth) {
                var $t;
                if (depth >= ((maxDepth - 1) | 0)) {
                    return;
                }

                $t = Bridge.getEnumerator(this.Children);
                try {
                    while ($t.moveNext()) {
                        var child = $t.Current;
                        onDescent(this.This, child);
                        child.TraverseInternal(onDescent, maxDepth, ((depth + 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            BuildGraph: function (maxDepth) {
                if (maxDepth === void 0) { maxDepth = 2147483647; }
                var vertices = 0;
                var vertexLookup = new (System.Collections.Generic.Dictionary$2(T,System.Int32))();
                var treeLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,T))();
                var edges = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();

                this.Traverse(function (parent, child) {
                    var p = { };
                    if (!vertexLookup.tryGetValue(parent, p)) {
                        p.v = Bridge.identity(vertices, (vertices = (vertices + 1) | 0));
                        vertexLookup.set(parent, p.v);
                        treeLookup.set(p.v, parent);

                        edges.set(p.v, new (System.Collections.Generic.List$1(System.Int32))());
                    }

                    var c = { };
                    if (!vertexLookup.tryGetValue(child, c)) {
                        c.v = Bridge.identity(vertices, (vertices = (vertices + 1) | 0));
                        vertexLookup.set(child, c.v);
                        treeLookup.set(c.v, child);

                        edges.set(c.v, new (System.Collections.Generic.List$1(System.Int32))());
                    }

                    edges.get(p.v).add(c.v);
                }, maxDepth);

                if (vertices === 0) {
                    treeLookup.set(0, Bridge.cast(this, T));
                    edges.set(0, new (System.Collections.Generic.List$1(System.Int32))());
                }

                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < vertices; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < vertices; j = (j + 1) | 0) {
                        if (edges.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (edges.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return { item1: new Algorithms.Graph.$ctor1(edgeWeights), item2: treeLookup };
            }
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge", {
        statics: {
            fields: {
                Infinity: 0
            },
            ctors: {
                init: function () {
                    this.Infinity = 2147483647;
                }
            },
            methods: {
                Exists: function (o) {
                    return o != null;
                },
                Naturals: function () {
                    return System.Linq.Enumerable.range(0, Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity);
                },
                Interval: function (first, last) {
                    return System.Linq.Enumerable.range(first, ((((last - first) | 0) + 1) | 0));
                },
                TryParseInt: function (s) {
                    var x = { };
                    if (System.Int32.tryParse(s, x)) {
                        return x.v;
                    }

                    return null;
                },
                TryParseDouble: function (s) {
                    var x = { };
                    if (System.Double.tryParse(s, null, x)) {
                        return x.v;
                    }

                    return null;
                },
                DegreeCondition: function (g, b, missingEdges) {
                    if (missingEdges === void 0) { missingEdges = null; }
                    return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, b.Stacks, b.Pot);
                },
                DegreeCondition$1: function (g, stacks, pot, missingEdges) {
                    var $t;
                    if (missingEdges === void 0) { missingEdges = null; }
                    if (Bridge.staticEquals(missingEdges, null)) {
                        missingEdges = $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.f1;
                    }

                    var colorGraphs = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(stacks, pot);

                    $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, g.Vertices), System.Collections.Generic.List$1(System.Int32));
                    try {
                        while ($t.moveNext()) {
                            var X = $t.Current;
                            var e = (g.EdgesOn(X) - missingEdges(X)) | 0;

                            if (e <= 0) {
                                continue;
                            }

                            var value = System.Linq.Enumerable.from(colorGraphs).sum((function ($me, X) {
                                    return function (cg) {
                                        return ((Bridge.Int.div(Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, cg, X), 2)) | 0);
                                    };
                                })(this, X));

                            if (value < e) {
                                return false;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return true;
                },
                GetColorGraphs: function (stacks, pot) {
                    return System.Linq.Enumerable.from(Algorithms.Int64Usage.EnumerateBits(pot)).select(function (alpha) {
                            return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.G_alpha(alpha, stacks)).toList(System.Int32);
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                },
                G_alpha: function (alpha, stacks) {
                    return Algorithms.GenericExtensions.IndicesWhere(System.Int64, stacks, function (stack) {
                        return Algorithms.Int64Usage.IsBitSet(stack, System.Int64(alpha));
                    });
                },
                d_H: function (alpha, stacksInH) {
                    return System.Linq.Enumerable.from(stacksInH).count(function (stack) {
                            return Algorithms.Int64Usage.IsBitSet(stack, System.Int64(alpha));
                        });
                },
                Surplus: function (board, g) {
                    return ((System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).sum($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.f2) - g.E) | 0);
                },
                Surplus$1: function (board, g, vertices) {
                    return ((System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).sum(function (cg) {
                            return ((Bridge.Int.div(Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, cg, vertices), 2)) | 0);
                        }) - g.EdgesOn(vertices)) | 0);
                },
                ToConsole: function (s) { },
                MapMove: function (f, move) {
                    var $t;
                    var mappedMove = ($t = new Algorithms.FixerBreaker.Move(), $t.Stack = move.Stack, $t);
                    var m = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f, System.Array.init([move.Added, move.Removed], System.Int32))).toList(System.Int32);

                    mappedMove.Added = m.getItem(0);
                    mappedMove.Removed = m.getItem(1);

                    return mappedMove.$clone();
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge, {
        f1: function (Y) {
            return 0;
        },
        f2: function (cg) {
            return ((Bridge.Int.div(cg.Count, 2)) | 0);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Mind", {
        statics: {
            fields: {
                TreeNodeNumber: 0
            },
            ctors: {
                init: function () {
                    this.TreeNodeNumber = 1;
                }
            }
        },
        props: {
            StopAnalysisOnBreakerWin: false,
            FindCleanestWin: false,
            NearlyColorableOnly: false,
            SuperabundantOnly: false,
            MinPot: 0,
            MaxPot: 0,
            BreakerWonBoard: null,
            FixerWonAllNearlyColorableBoards: false,
            TotalPositions: 0,
            BoardAnalysisPipeline: null,
            Knowledge: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.FindCleanestWin = true;
                this.SuperabundantOnly = true;
                this.NearlyColorableOnly = false;
                this.MaxPot = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                this.Knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.Knowledge(g);

                this.BoardAnalysisPipeline = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer))();
                this.BoardAnalysisPipeline.add(new Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer());
            }
        },
        methods: {
            AddBoardAnalyzer: function (analyzer) {
                this.BoardAnalysisPipeline.add(analyzer);
            },
            Analyze: function (template, progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                this.TotalPositions = 0;
                this.FixerWonAllNearlyColorableBoards = true;

                this.EnsureSwapAnalyzerExistence();

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Interval(minimumColorCount, maximumColorCount), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var colorCount = $t.Current;
                        if (!Bridge.staticEquals(progress, null)) {
                            progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.IsInitialThought = true, $t1));
                        }

                        var boards = System.Linq.Enumerable.from(this.GenerateAllBoards(template, colorCount, progress)).toList(Algorithms.FixerBreaker.Board);
                        if (foundAtLeastOneBoard && boards.Count <= 0) {
                            break;
                        }

                        this.TotalPositions = (this.TotalPositions + boards.Count) | 0;
                        foundAtLeastOneBoard = true;

                        var breakerWin = !this.Analyze$1(boards, progress);
                        if (breakerWin && this.StopAnalysisOnBreakerWin) {
                            return false;
                        }

                        this.Knowledge.getItem(template).Promote(colorCount);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(this.Knowledge.getItem(template).LostBoards).count() <= 0;
            },
            Analyze$1: function (boards, progress) {
                var $t, $t1, $t2;
                if (progress === void 0) { progress = null; }
                var winLength = 0;

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(this.BoardAnalysisPipeline).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f1));
                try {
                    while ($t.moveNext()) {
                        var analyzer = $t.Current;
                        var chunk = { v : new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.Board))() };
                        Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.Board, boards, (function ($me, analyzer) {
                            return Bridge.fn.bind($me, function (b) {
                                return analyzer.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze(this.Knowledge, b);
                            });
                        })(this, analyzer), (function ($me, chunk) {
                            return function (removed) {
                                var $t1;
                                chunk.v.add(removed);

                                if (chunk.v.Count > 100) {
                                    if (!Bridge.staticEquals(progress, null)) {
                                        progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsRemoved = System.Linq.Enumerable.from(chunk.v).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = winLength, $t1));
                                    }

                                    chunk.v.clear();
                                }
                            };
                        })(this, chunk));

                        if (chunk.v.Count > 0) {
                            if (!Bridge.staticEquals(progress, null)) {
                                progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsRemoved = System.Linq.Enumerable.from(chunk.v).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = winLength, $t1));
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var knowledgeDependentAnalyzers = System.Linq.Enumerable.from(this.BoardAnalysisPipeline).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f2).toList(Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer);

                while (boards.Count > 0) {
                    winLength = (winLength + 1) | 0;

                    var count = boards.Count;

                    $t1 = Bridge.getEnumerator(knowledgeDependentAnalyzers);
                    try {
                        while ($t1.moveNext()) {
                            var analyzer1 = $t1.Current;
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.Board, boards, Bridge.fn.bind(this, function (b) {
                                return analyzer1.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze(this.Knowledge, b);
                            }), function (removed) {
                                var $t2;
                                if (!Bridge.staticEquals(progress, null)) {
                                    progress(($t2 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t2.BoardsRemoved = Algorithms.GenericExtensions.EnList(Algorithms.FixerBreaker.Board, removed), $t2.WinLength = winLength, $t2));
                                }
                            });
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (boards.Count === count) {
                        $t2 = Bridge.getEnumerator(boards);
                        try {
                            while ($t2.moveNext()) {
                                var b = $t2.Current;
                                this.Knowledge.getItem(b.Template.Value).getItem(b.ColorCount).AddLoss(b);
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                        var g = { v : this.Knowledge.GraphKnowledge.Graph };

                        var nearlyColorable = System.Linq.Enumerable.range(0, this.Knowledge.GraphKnowledge.LineGraph.N).all(Bridge.fn.bind(this, function (e) {
                            return System.Linq.Enumerable.from(boards).any(Bridge.fn.bind(this, function (b1) {
                                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, e);
                                }));
                        }));
                        if (nearlyColorable) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(boards).firstOrDefault((function ($me, g) {
                                    return Bridge.fn.bind($me, function (b1) {
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(g.v, b1) && Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, 0);
                                    });
                                })(this, g), null);
                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = System.Linq.Enumerable.from(boards).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f3));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            EnsureSwapAnalyzerExistence: function () {
                if (!System.Linq.Enumerable.from(this.BoardAnalysisPipeline).any($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f4)) {
                    this.BoardAnalysisPipeline.add(new Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer(this.FindCleanestWin, false));
                }
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                var boards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();

                var vertices = System.Linq.Enumerable.range(0, template.Sizes.Count).toList(System.Int32);
                var potSet = System.Linq.Enumerable.range(0, colorCount).toList(System.Int32);
                var pot = Algorithms.Int64Usage.ToInt64(potSet);

                var fix = System.Linq.Enumerable.from(vertices).orderBy(function (v) {
                        return Math.abs(((template.Sizes.getItem(v) - ((Bridge.Int.div(colorCount, 2)) | 0)) | 0));
                    }).first();

                var boardsChunk = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.Board))();
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(vertices).select(function (v) {
                        if (v === fix) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(potSet).take(template.Sizes.getItem(v)).toList(System.Int32));
                        }

                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, potSet, template.Sizes.getItem(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var assignmentSets = $t.Current;
                        var sets = System.Linq.Enumerable.from(assignmentSets).toList(System.Collections.Generic.List$1(System.Int32));
                        var totalColors = System.Linq.Enumerable.from(sets).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f5).distinct().count();
                        if (totalColors < colorCount) {
                            continue;
                        }

                        var stacks = System.Linq.Enumerable.from(sets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f6).toList(System.Int64);

                        var superAbundant = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(this.Knowledge.GraphKnowledge.Graph, stacks, pot);
                        var board = new Algorithms.FixerBreaker.Board(stacks, pot);

                        if (this.SuperabundantOnly && !superAbundant) {
                            continue;
                        }

                        boards.add(board);
                        boardsChunk.add(board);

                        if (boardsChunk.Count > 100) {
                            if (!Bridge.staticEquals(progress, null)) {
                                progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsAdded = System.Linq.Enumerable.from(boardsChunk).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = -1, $t1));
                            }

                            boardsChunk.clear();
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                if (boardsChunk.Count > 0 && !Bridge.staticEquals(progress, null)) {
                    progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsAdded = System.Linq.Enumerable.from(boardsChunk).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = -1, $t1));
                }

                return boards;
            },
            EnumerateKnowledgeTrees: function (template) {
                var templateKnowledge = this.Knowledge.getItem(template);
                var colorCount = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Naturals()).first(function (n) {
                        return templateKnowledge.KnowledgeExists(n) && !templateKnowledge.KnowledgeExists(((n + 1) | 0));
                    });

                return System.Linq.Enumerable.from(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge()).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f7));
            },
            GenerateKnowledgeTree: function (board) {
                Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber = 1;
                var seenCache = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Object))();
                var knowledgeTree = new Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree();
                this.FillKnowledgeTree(knowledgeTree, board, seenCache);

                return knowledgeTree;
            },
            FillKnowledgeTree: function (knowledgeTree, board, seenCache) {
                var $t, $t1;
                knowledgeTree.Board = board.toString();
                knowledgeTree.Number = Bridge.identity(Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber, ($t = (Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber + 1) | 0, Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber = $t, $t));

                var knowledge = this.Knowledge.getItem(board.Template.Value).getItem(board.ColorCount).getItem(board);
                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(knowledge)) {
                    if (!Bridge.referenceEquals(knowledge.Reason, "good swap")) {
                        knowledgeTree.Note = knowledge.Reason;
                    } else {
                        var seenBoard = { };
                        if (seenCache.tryGetValue(board, seenBoard)) {
                            knowledgeTree.Note = "same as #" + seenBoard.v.item1;
                            return;
                        }

                        var f = knowledge.Board.FindPermutation(board);
                        var colors = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f, System.Array.init([knowledge.ColorPair.item1, knowledge.ColorPair.item2], System.Int32))).toList(System.Int32);
                        var colorPair = { item1: colors.getItem(0), item2: colors.getItem(1) };

                        $t1 = Bridge.getEnumerator(knowledge.Swaps);
                        try {
                            while ($t1.moveNext()) {
                                var swap = $t1.Current;
                                var tempBoard = board.Clone();
                                var moves = System.Linq.Enumerable.from(swap.item2).select(function (m) {
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.MapMove(f, m.$clone());
                                    }).toList(Algorithms.FixerBreaker.Move);
                                tempBoard.DoMoveCombination(moves);

                                var childKnowledgeTree = knowledgeTree.AddChild$1(swap);
                                childKnowledgeTree.ColorPair = colorPair;
                                this.FillKnowledgeTree(childKnowledgeTree, tempBoard, seenCache);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }}
                } else {
                    throw new System.Exception("something went wrong in building search tree");
                }

                seenCache.set(board, { item1: knowledgeTree.Number, item2: board });
            },
            GenerateTemplateKnowledgeGraph: function (template) {
                var $t, $t1, $t2, $t3;
                var templateKnowledge = this.Knowledge.getItem(template);
                var colorCount = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Naturals()).first(function (n) {
                        return templateKnowledge.KnowledgeExists(n) && !templateKnowledge.KnowledgeExists(((n + 1) | 0));
                    });

                var nextVertexID = 0;
                var vertexLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Int32))();
                var swapLookup = new (System.Collections.Generic.Dictionary$2(System.Object,System.Object))();
                var boardLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge)))();
                var outEdges = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();

                $t = Bridge.getEnumerator(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge(), System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge));
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        vertexLookup.set(kvp.key, nextVertexID);
                        boardLookup.set(nextVertexID, kvp);
                        outEdges.set(nextVertexID, new (System.Collections.Generic.List$1(System.Int32))());
                        nextVertexID = (nextVertexID + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(templateKnowledge.LostBoards, Algorithms.FixerBreaker.Board);
                try {
                    while ($t1.moveNext()) {
                        var b = $t1.Current;
                        vertexLookup.set(b, nextVertexID);
                        boardLookup.set(nextVertexID, new (System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))(b, new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(b, "breaker wins")));
                        outEdges.set(nextVertexID, new (System.Collections.Generic.List$1(System.Int32))());
                        nextVertexID = (nextVertexID + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                $t2 = Bridge.getEnumerator(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge(), System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge));
                try {
                    while ($t2.moveNext()) {
                        var kvp1 = $t2.Current;
                        if (Bridge.referenceEquals(kvp1.value.Reason, "good swap")) {
                            var v = vertexLookup.get(kvp1.key);

                            var f = { v : kvp1.value.Board.FindPermutation(kvp1.key) };
                            var colors = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f.v, System.Array.init([kvp1.value.ColorPair.item1, kvp1.value.ColorPair.item2], System.Int32))).toList(System.Int32);
                            var colorPair = { item1: colors.getItem(0), item2: colors.getItem(1) };

                            $t3 = Bridge.getEnumerator(kvp1.value.Swaps);
                            try {
                                while ($t3.moveNext()) {
                                    var swap = $t3.Current;
                                    var tempBoard = kvp1.key.Clone();
                                    var moves = System.Linq.Enumerable.from(swap.item2).select((function ($me, f) {
                                            return function (m) {
                                                return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.MapMove(f.v, m.$clone());
                                            };
                                        })(this, f)).toList(Algorithms.FixerBreaker.Move);
                                    tempBoard.DoMoveCombination(moves);

                                    var w = vertexLookup.get(tempBoard);
                                    outEdges.get(v).add(w);

                                    swapLookup.set({ item1: v, item2: w }, swap);
                                }
                            } finally {
                                if (Bridge.is($t3, System.IDisposable)) {
                                    $t3.System$IDisposable$dispose();
                                }
                            }}
                    }
                } finally {
                    if (Bridge.is($t2, System.IDisposable)) {
                        $t2.System$IDisposable$dispose();
                    }
                }
                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < nextVertexID; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < nextVertexID; j = (j + 1) | 0) {
                        if (outEdges.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (outEdges.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return { item1: new Algorithms.Graph.$ctor1(edgeWeights), item2: boardLookup, item3: swapLookup };
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Mind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind, {
        f1: function (a) {
            return !a.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent;
        },
        f2: function (a) {
            return a.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent;
        },
        f3: function (b1) {
            return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, 0);
        },
        f4: function (a) {
            return Bridge.is(a, Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer);
        },
        f5: function (set) {
            return set;
        },
        f6: function (list) {
            return Algorithms.Int64Usage.ToInt64(list);
        },
        f7: function (kvp) {
            return this.GenerateKnowledgeTree(kvp.key);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge", {
        fields: {
            _boardLookup: null,
            _improvementLookup: null,
            _lostBoards: null
        },
        props: {
            ColorCount: 0,
            ColorPairs: null,
            LostBoards: {
                get: function () {
                    return this._lostBoards;
                }
            }
        },
        ctors: {
            init: function () {
                this._boardLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))();
                this._improvementLookup = new (System.Collections.Generic.Dictionary$2(System.String,System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge)))();
                this._lostBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();
            },
            ctor: function (colorCount) {
                this.$initialize();
                this.ColorCount = colorCount;
                this.SetupColorPairs();
            }
        },
        methods: {
            getItem: function (board) {
                var b = { };
                this._boardLookup.tryGetValue(board, b);
                return b.v;
            },
            getItem$1: function (reason, board) {
                var b = { };
                this.ImprovementLookup(reason).tryGetValue(board, b);
                return b.v;
            },
            setItem$1: function (reason, board, value) {
                this.ImprovementLookup(reason).set(board, value);
            },
            ImprovementLookup: function (reason) {
                var lookup = { };
                if (!this._improvementLookup.tryGetValue(reason, lookup)) {
                    lookup.v = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))();
                    this._improvementLookup.set(reason, lookup.v);
                }

                return lookup.v;
            },
            AddWin: function (board, reason) {
                var knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason);
                this._boardLookup.set(board, knowledge);

                return knowledge;
            },
            AddWin$1: function (board, reason, winDepth, colorPair, goodSwaps) {
                var $t;
                var knowledge = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason), $t.Depth = winDepth, $t.ColorPair = colorPair, $t.Swaps = goodSwaps, $t);
                this._boardLookup.set(board, knowledge);

                return knowledge;
            },
            AddImprovement: function (board, reason, winDepth, colorPair, goodSwaps) {
                var $t;
                var knowledge = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason), $t.Depth = winDepth, $t.ColorPair = colorPair, $t.Swaps = goodSwaps, $t);
                this.setItem$1(reason, board, knowledge);

                return knowledge;
            },
            AddLoss: function (b) {
                this._lostBoards.add(b);
            },
            SetupColorPairs: function () {
                this.ColorPairs = new (System.Collections.Generic.List$1(System.Object))();
                var colors = System.Linq.Enumerable.range(0, this.ColorCount).toList(System.Int32);

                for (var i = 0; i < colors.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < colors.Count; j = (j + 1) | 0) {
                        this.ColorPairs.add({ item1: colors.getItem(i), item2: colors.getItem(j) });
                    }
                }
            },
            CopyInto: function (potKnowledge) {
                var $t;
                $t = Bridge.getEnumerator(this._boardLookup);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        potKnowledge.AddWin$1(kvp.key, kvp.value.Reason, kvp.value.Depth, kvp.value.ColorPair, kvp.value.Swaps);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            EnumerateBoardKnowledge: function () {
                return System.Linq.Enumerable.from(this._boardLookup).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge.f1);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge, {
        f1: function (x) {
            return x.value.Depth;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer", {
        fields: {
            _knowledge: null,
            _boardLookup: null,
            _boardIDLookup: null,
            _shrubs: null,
            _useShrubs: false
        },
        ctors: {
            init: function () {
                this._shrubs = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList))))();
            },
            ctor: function (knowledge, boardLookup, boardIDLookup, useShrubs) {
                if (useShrubs === void 0) { useShrubs = false; }

                this.$initialize();
                this._knowledge = knowledge;
                this._boardLookup = boardLookup;
                this._boardIDLookup = boardIDLookup;
                this._useShrubs = useShrubs;
            }
        },
        methods: {
            Analyze: function (boardID, wonBoardIDs) {
                var $t;
                if (!this._useShrubs) {
                    return this.AnalyzeShrubFree(boardID, wonBoardIDs);
                }

                var shrub = { };
                if (!this._shrubs.tryGetValue(boardID, shrub)) {
                    return this.InitializeShrubs(boardID, wonBoardIDs);
                }

                $t = Bridge.getEnumerator(shrub.v);
                try {
                    while ($t.moveNext()) {
                        var colorPairList = $t.Current;
                        Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList, colorPairList, function (branchList) {
                            return branchList.Intersects(wonBoardIDs);
                        }, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer.f1);
                        if (colorPairList.Count <= 0) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            AnalyzeShrubFree: function (boardID, wonBoardIDs) {
                var $t, $t1, $t2;
                var board = this._boardLookup.get(boardID);
                var potKnowledge = this._knowledge.getItem(board.Template.Value).getItem(board.ColorCount);

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var winningSwapExists = false;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        board.DoMoveCombination(swap);
                                        var childID = this._boardIDLookup.get(board);
                                        board.DoMoveCombination(swap);

                                        if (wonBoardIDs.Contains(childID)) {
                                            winningSwapExists = true;
                                            break;
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            InitializeShrubs: function (boardID, wonBoardIDs) {
                var $t, $t1, $t2;
                var shrub = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList)))();
                this._shrubs.set(boardID, shrub);

                var board = this._boardLookup.get(boardID);
                var potKnowledge = this._knowledge.getItem(board.Template.Value).getItem(board.ColorCount);

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var colorPairList = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList))();
                        shrub.add(colorPairList);

                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var branchList = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList();
                                var winningSwapExists = false;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        board.DoMoveCombination(swap);
                                        var childID = this._boardIDLookup.get(board);
                                        board.DoMoveCombination(swap);

                                        if (wonBoardIDs.Contains(childID)) {
                                            winningSwapExists = true;
                                            break;
                                        }

                                        branchList.Add(childID);
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    colorPairList.add(branchList);
                                    winningSwapAlwaysExists = false;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer, {
        f1: function (x) { }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList", {
        fields: {
            _data: null,
            _length: 0
        },
        ctors: {
            ctor: function (initialCapacity) {
                if (initialCapacity === void 0) { initialCapacity = 16; }

                this.$initialize();
                this._data = System.Array.init(initialCapacity, 0, System.Int32);
            }
        },
        methods: {
            Add: function (x) {
                var i = System.Array.binarySearch(this._data, 0, this._length, x);
                if (i >= 0) {
                    return;
                }

                this.EnsureCapacity();

                i = ~i;
                if (i < this._length) {
                    System.Array.copy(this._data, i, this._data, ((i + 1) | 0), ((this._length - i) | 0));
                }

                this._data[System.Array.index(i, this._data)] = x;
                this._length = (this._length + 1) | 0;
            },
            Contains: function (x) {
                return System.Array.binarySearch(this._data, 0, this._length, x) >= 0;
            },
            Intersects: function (other) {
                var j = 0;
                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    var k = System.Array.binarySearch(other._data, j, ((other._length - j) | 0), this._data[System.Array.index(i, this._data)]);
                    if (k >= 0) {
                        return true;
                    }
                    j = ~k;
                }

                return false;
            },
            EnsureCapacity: function () {
                if (this._length >= this._data.length) {
                    var data = System.Array.init(Bridge.Int.mul(2, this._data.length), 0, System.Int32);
                    System.Array.copy(this._data, 0, data, 0, this._data.length);
                    this._data = data;
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier", {
        statics: {
            fields: {
                _lookup: null
            },
            ctors: {
                init: function () {
                    this._lookup = new (System.Collections.Generic.Dictionary$2(System.String,System.Object))();
                }
            },
            methods: {
                ToListStringInLexOrder: function (ss, pp, maxPot) {
                    if (maxPot === void 0) { maxPot = -1; }
                    var lists = System.Linq.Enumerable.from(ss).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f1).toList(System.Collections.Generic.List$1(System.Int32));
                    var pot = maxPot;
                    if (pot <= 0) {
                        pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f2).distinct().count();
                    }

                    var stacks = System.Linq.Enumerable.from(lists).where(function (s) {
                            return s.Count <= pot;
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.ToLexOrder(Bridge.toArray(System.Linq.Enumerable.from(stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f4)).join("|"), pp, maxPot);
                },
                ToLexOrder: function (stacksString, pp, maxPot) {
                    var $t;
                    var key = System.String.concat(stacksString, ";", maxPot);
                    var tup = { };
                    if (Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier._lookup.tryGetValue(key, tup)) {
                        pp.v = tup.v.item2;
                        return tup.v.item1;
                    }

                    pp.v = null;
                    var lexSmallest;
                    var stacks = System.Linq.Enumerable.from(System.String.split(stacksString, [124].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f6).toList(System.Collections.Generic.List$1(System.Int32));
                    lexSmallest = stacksString;

                    var pot = System.Linq.Enumerable.from(stacks).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f2).distinct().count();
                    if (maxPot > 0) {
                        pot = maxPot;
                    }

                    $t = Bridge.getEnumerator(Algorithms.Utility.Permutation.EnumerateAll(pot), Algorithms.Utility.Permutation);
                    try {
                        while ($t.moveNext()) {
                            var p = $t.Current;
                            var permutedString = Bridge.toArray(System.Linq.Enumerable.from(stacks).select((function ($me, p) {
                                        return function (s) {
                                            return Bridge.toArray(System.Linq.Enumerable.from(s).select(function (a) {
                                                        return p.getItem(a);
                                                    }).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f3)).join("");
                                        };
                                    })(this, p))).join("|");
                            if (System.String.compare(permutedString, lexSmallest) <= 0) {
                                lexSmallest = permutedString;
                                pp.v = p;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier._lookup.set(key, { item1: lexSmallest, item2: pp.v });
                    return lexSmallest;
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier, {
        f1: function (l) {
            return Algorithms.Int64Usage.ToSet(l);
        },
        f2: function (l) {
            return l;
        },
        f3: function (x) {
            return x;
        },
        f4: function (s) {
            return Bridge.toArray(System.Linq.Enumerable.from(s).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f3)).join("");
        },
        f5: function (c) {
            return System.Int32.parse(String.fromCharCode(c));
        },
        f6: function (s) {
            return System.Linq.Enumerable.from(System.String.toCharArray(s, 0, s.length)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f5).toList(System.Int32);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo", {
        props: {
            Alpha: 0,
            Beta: 0,
            Partition: null,
            Response: System.UInt64(0),
            SwapVertices: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.ColorPairOutcome", {
        fields: {
            Colors: null,
            FixerOutcomes: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome", {
        fields: {
            BreakerChoice: null,
            Exits: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter");

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing", {
        statics: {
            fields: {
                MaxLength: 0,
                _m: null
            },
            ctors: {
                init: function () {
                    this.MaxLength = 32;
                },
                ctor: function () {
                    Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m = new (System.Collections.Generic.List$1(System.UInt64))(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.MaxLength);

                    var RNG = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var b = System.Array.init(8, 0, System.Byte);

                    for (var i = 0; i < Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.MaxLength; i = (i + 1) | 0) {
                        RNG.nextBytes(b);
                        Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m.add(System.BitConverter.toUInt64(b, 0));
                    }
                }
            },
            methods: {
                Hash: function (list, length) {
                    var hash = list[System.Array.index(0, list)];

                    for (var i = 1; i < length; i = (i + 1) | 0) {
                        hash = hash.add((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m.getItem(((i - 1) | 0)).mul(list[System.Array.index(i, list)])));
                    }

                    return System.Int64.clip32(hash.shru(32));
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder", {
        props: {
            Mind: null,
            Cases: null,
            UsePermutations: false
        },
        ctors: {
            ctor: function (mind, usePermutations) {
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                this.Mind = mind;
                this.UsePermutations = usePermutations;
                this.ExtractCases();
            }
        },
        methods: {
            ExtractCases: function () {
                var $t, $t1;
                this.Cases = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase))();

                var caseNumber = 0;

                var colorableCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, 0, this.Mind.ColorableBoards);
                this.Cases.add(colorableCase);
                caseNumber = (caseNumber + 1) | 0;

                var remainingBoards = System.Linq.Enumerable.from(this.Mind.NonColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                var wonBoards = System.Linq.Enumerable.from(this.Mind.ColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                while (remainingBoards.Count > 0) {
                    var proofCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber);
                    this.Cases.add(proofCase);

                    var addedBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    $t = Bridge.getEnumerator(remainingBoards);
                    try {
                        while ($t.moveNext()) {
                            var board = $t.Current;
                            var treeInfo = this.Mind.GetWinTreeInfo(board);

                            if (System.Linq.Enumerable.from(treeInfo).all(function (bc) {
                                    return wonBoards.contains(new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount));
                                })) {
                                addedBoards.add(board);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t1 = Bridge.getEnumerator(addedBoards);
                    try {
                        while ($t1.moveNext()) {
                            var board1 = $t1.Current;
                            proofCase.AddBoard(board1);
                            wonBoards.add(board1);
                            remainingBoards.remove(board1);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    caseNumber = (caseNumber + 1) | 0;
                }
            },
            GetHandledCaseNumber: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return ((System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase, this.Cases, function (cc) {
                        return cc.Boards.contains(childBoard);
                    })).first() + 1) | 0);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions", {
        statics: {
            methods: {
                ToTex: function (matcher, lists, listSize) {
                    if (Bridge.referenceEquals(matcher.Name, "*")) {
                        return System.String.concat(Bridge.toArray(System.Linq.Enumerable.repeat("\\wild", listSize)).join(""), " ");
                    }

                    var i = { };
                    if (!System.Int32.tryParse(matcher.Name, i)) {
                        return "?";
                    }

                    return Bridge.toArray(lists.getItem(i.v)).join("");
                },
                GetActiveListIndex: function (i, b, maxPot) {
                    return ((System.Linq.Enumerable.from(b.Stacks.Value).take(((i + 1) | 0)).count(function (ss) {
                        return Algorithms.Int64Usage.PopulationCount(ss) < maxPot;
                    }) - 1) | 0);
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions", {
        statics: {
            methods: {
                GetArticle: function (letter) {
                    switch (letter) {
                        case "X": 
                            return "an";
                        case "Y": 
                            return "a";
                        case "Z": 
                            return "a";
                    }

                    return "";
                },
                Listify: function (T, strings, connector) {
                    if (connector === void 0) { connector = "and"; }
                    var ll = System.Linq.Enumerable.from(strings).toList(T);
                    if (ll.Count <= 0) {
                        return "";
                    }
                    if (ll.Count === 1) {
                        return ll.getItem(0).toString();
                    }

                    if (connector != null) {
                        return System.String.concat(Bridge.toArray(System.Linq.Enumerable.from(ll).take(((ll.Count - 1) | 0))).join(", "), " ", connector, " ", System.Linq.Enumerable.from(ll).last());
                    }

                    return Bridge.toArray(ll).join(", ");
                },
                Wordify: function (n) {
                    switch (n) {
                        case 0: 
                            return "first";
                        case 1: 
                            return "second";
                        case 2: 
                            return "third";
                        case 3: 
                            return "fourth";
                        case 4: 
                            return "fifth";
                        case 5: 
                            return "sixth";
                        case 6: 
                            return "seventh";
                        case 7: 
                            return "eighth";
                        case 8: 
                            return "ninth";
                        case 9: 
                            return "tenth";
                        case 10: 
                            return "eleventh";
                    }

                    return (((n + 1) | 0)) + "-th";
                },
                Except: function (T, list, t) {
                    return System.Linq.Enumerable.from(list).except(System.Array.init([t], T));
                },
                MaxIndex: function (T, list, value) {
                    var $t;
                    var maxIndex = -1;
                    var max = -2147483648;
                    var i = 0;
                    $t = Bridge.getEnumerator(list, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var v = value(t);
                            if (v > max) {
                                max = v;
                                maxIndex = i;
                            }

                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return maxIndex;
                },
                Distinct: function (T, S, list, value) {
                    var $t;
                    var distinct = new (System.Collections.Generic.List$1(T))();
                    $t = Bridge.getEnumerator(list, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            if (!System.Linq.Enumerable.from(distinct).any((function ($me, t) {
                                    return function (tt) {
                                        return Bridge.equals(value(tt), value(t));
                                    };
                                })(this, t))) {
                                distinct.add(t);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return distinct;
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions", {
        statics: {
            fields: {
                Alphabet: null
            },
            ctors: {
                init: function () {
                    this.Alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                }
            },
            methods: {
                ToXYZ: function (board) {
                    return Bridge.toArray(System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1)).join("");
                },
                ToXYZ$1: function (stack) {
                    switch (stack.toString()) {
                        case "3": 
                            return "X";
                        case "5": 
                            return "Y";
                        case "6": 
                            return "Z";
                    }

                    return "";
                },
                To012: function (board) {
                    return System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.To012$1).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f1).toList(System.Int32);
                },
                To012$1: function (stack) {
                    if (stack.gt(System.Int64(6))) {
                        return -1;
                    }
                    return (((((Bridge.Int.div(System.Int64.clip32(stack), 2)) | 0)) - 1) | 0);
                },
                ToCompactedPartitionId: function (board, partition) {
                    var xyz = System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1).toList(System.String);
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToPartitionId$1(xyz, partition);
                },
                ToPartitionId: function (board, partition) {
                    var xyz = System.Linq.Enumerable.from(board.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f2).toList(System.String);

                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToPartitionId$1(xyz, partition);
                },
                ToPartitionId$1: function (xyz, partition) {
                    var $t;
                    var pp = System.Linq.Enumerable.from(partition).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f3).toList(System.Collections.Generic.List$1(System.Int32));
                    for (var i = 0; i < pp.Count; i = (i + 1) | 0) {
                        var l = String.fromCharCode(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.Alphabet.charCodeAt(i));
                        $t = Bridge.getEnumerator(pp.getItem(i));
                        try {
                            while ($t.moveNext()) {
                                var j = $t.Current;
                                xyz.setItem(j, l);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    return Bridge.toArray(xyz).join("");
                },
                GetXYZIndex: function (i, b) {
                    return ((System.Linq.Enumerable.from(b.Stacks.Value).take(((i + 1) | 0)).count($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f4) - 1) | 0);
                },
                ToTex: function (matcher) {
                    switch (matcher.Name) {
                        case "*": 
                            return "\\wild ";
                        case "0": 
                            return "X";
                        case "1": 
                            return "Y";
                        case "2": 
                            return "Z";
                        case "!0": 
                            return "\\bar{{X}}";
                        case "!1": 
                            return "\\bar{{Y}}";
                        case "!2": 
                            return "\\bar{{Z}}";
                    }

                    return "?";
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions, {
        f1: function (x) {
            return x >= 0;
        },
        f2: function (stack) {
            var s = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1(stack);
            if (s.length <= 0) {
                return "*";
            }
            return s;
        },
        f3: function (part) {
            return System.Linq.Enumerable.from(part).min();
        },
        f4: function (ss) {
            return Algorithms.Int64Usage.PopulationCount(ss) === 2;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase", {
        props: {
            Mind: null,
            Boards: null,
            BreakerWin: false,
            CaseNumber: 0,
            Superabundant: false
        },
        ctors: {
            ctor: function (mind, caseNumber, boards) {
                if (boards === void 0) { boards = null; }

                this.$initialize();
                this.Mind = mind;
                this.CaseNumber = caseNumber;
                this.Boards = boards;
                if (this.Boards == null) {
                    this.Boards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                }
            }
        },
        methods: {
            AddBoard: function (board) {
                this.Boards.add(board);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard", {
        statics: {
            methods: {
                Create: function (T, lists) {
                    var pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f1).distinct().toList(T);
                    var numbering = Algorithms.DataStructures.BijectionExtensions.NumberObjects(T, pot);

                    var intLists = System.Linq.Enumerable.from(lists).select(function (l) {
                            return System.Linq.Enumerable.from(numbering.Apply(l)).toList(System.Int32);
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                    var trace = System.Array.init(pot.Count, System.UInt64(0), System.UInt64);

                    for (var i = 0; i < pot.Count; i = (i + 1) | 0) {
                        trace[System.Array.index(i, trace)] = Algorithms.Int64Usage.ToUInt64(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), intLists, function (ll) {
                            return ll.contains(i);
                        }));
                    }

                    pot = System.Linq.Enumerable.from(pot).orderBy(function (c) {
                            return trace[System.Array.index(pot.indexOf(c), trace)];
                        }).toList(T);
                    numbering = Algorithms.DataStructures.BijectionExtensions.NumberObjects(T, pot);

                    System.Array.sort(trace);
                    return { item1: new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, lists.Count), item2: numbering };
                },
                FromLists: function (lists) {
                    var pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f1).distinct().toList(System.Int32);
                    var trace = System.Array.init(pot.Count, System.UInt64(0), System.UInt64);

                    for (var i = 0; i < pot.Count; i = (i + 1) | 0) {
                        trace[System.Array.index(i, trace)] = Algorithms.Int64Usage.ToUInt64(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), lists, function (ll) {
                            return ll.contains(i);
                        }));
                    }

                    System.Array.sort(trace);
                    return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, lists.Count);
                }
            }
        },
        fields: {
            _trace: null,
            _length: 0,
            _stackCount: 0,
            _hashCode: 0
        },
        props: {
            Stacks: null
        },
        ctors: {
            ctor: function (trace, stackCount) {
                this.$initialize();
                this._trace = trace;
                this._length = this._trace.length;
                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);

                this.MakeLazyStacks();
            },
            $ctor1: function (trace, i, j, swap, stackCount) {
                this.$initialize();
                this._trace = System.Array.init(trace.length, System.UInt64(0), System.UInt64);
                this._length = 0;
                for (var k = 0; k < trace.length; k = (k + 1) | 0) {
                    var v = System.UInt64(0);
                    if (k === i || k === j) {
                        v = trace[System.Array.index(k, trace)].xor(swap);
                    } else {
                        v = trace[System.Array.index(k, trace)];
                    }

                    if (v.gt(System.UInt64(0))) {
                        var q = this._length;
                        while (q > 0 && this._trace[System.Array.index(((q - 1) | 0), this._trace)].gt(v)) {
                            q = (q - 1) | 0;
                        }

                        if (q < this._length) {
                            System.Array.copy(this._trace, q << 3, this._trace, (((q + 1) | 0)) << 3, (((this._length - q) | 0)) << 3);
                        }
                        this._trace[System.Array.index(q, this._trace)] = v;

                        this._length = (this._length + 1) | 0;
                    }
                }

                this._stackCount = stackCount;
                this.MakeLazyStacks();

                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            }
        },
        methods: {
            ToListStringInLexOrder$1: function (maxPot) {
                if (maxPot === void 0) { maxPot = -1; }
                var pp = { };
                return this.ToListStringInLexOrder(pp, maxPot);
            },
            ToListStringInLexOrder: function (pp, maxPot) {
                if (maxPot === void 0) { maxPot = -1; }
                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.ToListStringInLexOrder(this.Stacks.Value, pp, maxPot);
            },
            GetPermutation: function (i, j, swap) {
                var t = System.Linq.Enumerable.from(this._trace).toList(System.UInt64);

                t.setItem(i, t.getItem(i).xor(swap));
                t.setItem(j, t.getItem(j).xor(swap));

                if (t.getItem(i).equals(System.UInt64(0))) {
                    t.setItem(i, System.UInt64(2147483647));
                }
                if (t.getItem(j).equals(System.UInt64(0))) {
                    t.setItem(j, System.UInt64(2147483647));
                }

                var sequence = System.Linq.Enumerable.from(t).zip(System.Linq.Enumerable.range(0, t.Count), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f2).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f3).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f4).toList(System.Int32);

                return new Algorithms.Utility.Permutation.$ctor1(sequence);
            },
            Permute: function (p, indices) {
                var trace = System.Array.init(this._trace.length, System.UInt64(0), System.UInt64);

                var permutedIndices = p.Apply(System.Int32, indices);
                for (var i = 0; i < this._trace.length; i = (i + 1) | 0) {
                    var n = this._trace[System.Array.index(i, this._trace)];
                    var m = this._trace[System.Array.index(i, this._trace)];

                    for (var j = 0; j < indices.Count; j = (j + 1) | 0) {
                        m = m.and(((System.UInt64(1).shl(indices.getItem(j))).not()));
                    }

                    for (var j1 = 0; j1 < indices.Count; j1 = (j1 + 1) | 0) {
                        if ((n.and((System.UInt64(1).shl(indices.getItem(j1))))).ne(System.UInt64(0))) {
                            m = m.or((System.UInt64(1).shl(permutedIndices.getItem(j1))));
                        }
                    }

                    trace[System.Array.index(i, trace)] = m;
                }

                System.Array.sort(trace);

                return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, this._stackCount);
            },
            MakeLazyStacks: function () {
                this.Stacks = new (Algorithms.Lazy$1(System.Array.type(System.Int64))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this._stackCount, System.Int64(0), System.Int64);
                    var traceBits = System.Linq.Enumerable.from(this._trace).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f5).toList(System.Collections.Generic.List$1(System.Int32));
                    for (var c = 0; c < traceBits.Count; c = (c + 1) | 0) {
                        $t = Bridge.getEnumerator(traceBits.getItem(c));
                        try {
                            while ($t.moveNext()) {
                                var i = $t.Current;
                                s[System.Array.index(i, s)] = s[System.Array.index(i, s)].or((System.Int64(1).shl(c)));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                    return s;
                }));
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._trace[System.Array.index(i, this._trace)].ne(other._trace[System.Array.index(i, other._trace)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f6)).join("|");
            }
        }
    });

    Bridge.define("$AnonymousType$1", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (t, i) {
                this.T = t;
                this.I = i;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$1)) {
                    return false;
                }
                return Bridge.equals(this.T, o.T) && Bridge.equals(this.I, o.I);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196186, this.T, this.I]);
                return h;
            },
            toJSON: function () {
                return {
                    T : this.T,
                    I : this.I
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"I","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_I","t":8,"rt":System.Int32,"fg":"I"},"fn":"I"},{"a":2,"n":"T","t":16,"rt":System.UInt64,"g":{"a":2,"n":"get_T","t":8,"rt":System.UInt64,"fg":"T"},"fn":"T"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, {
        f1: function (l) {
            return l;
        },
        f2: function (tr, ii) {
            return new $asm.$AnonymousType$1(tr, ii);
        },
        f3: function (v) {
            return v.T;
        },
        f4: function (v) {
            return v.I;
        },
        f5: function (t) {
            return Algorithms.Int64Usage.ToSet$1(t);
        },
        f6: function (l) {
            return Bridge.toArray(Algorithms.Int64Usage.ToSet(l)).join("");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimColoringAnalyzer", {
        fields: {
            _lineGraph: null,
            _getEdgeColorList: null
        },
        ctors: {
            ctor: function (lineGraph, getEdgeColorList) {
                this.$initialize();
                this._lineGraph = lineGraph;
                this._getEdgeColorList = getEdgeColorList;
            }
        },
        methods: {
            Analyze: function (b) {
                return this._lineGraph.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64));
            },
            Analyze$1: function (b, coloring) {
                return this.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64), coloring);
            },
            ColorableWithoutEdge: function (b, edgeIndex) {
                return this._lineGraph.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    if (e === edgeIndex) {
                        return System.Int64(-1);
                    }

                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64));
            },
            AnalyzeWithoutEdge: function (b, coloring, edgeIndex) {
                return this.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    if (e === edgeIndex) {
                        return System.Int64(-1);
                    }

                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64), coloring);
            },
            IsChoosable: function (assignment, coloring) {
                coloring.v = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Int64))();
                return this.IsChoosable$1(assignment, 0, coloring.v);
            },
            IsChoosable$1: function (assignment, v, coloring) {
                var $t;
                if (v >= this._lineGraph.N) {
                    return true;
                }

                var colors = assignment.getItem(v);
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._lineGraph._laterNeighbors.Value.getItem(v));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$1(assignmentCopy, ((v + 1) | 0), coloring)) {
                        coloring.set(v, color);
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer", {
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        props: {
            LastWinChildCount: 0,
            ProofFindingMode: false,
            WeaklyFixable: false,
            WinTreeInfo: null,
            LossTreeInfo: null
        },
        ctors: {
            init: function () {
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            },
            ctor: function (n, proofFindingMode, weaklyFixable) {
                if (proofFindingMode === void 0) { proofFindingMode = false; }
                if (weaklyFixable === void 0) { weaklyFixable = false; }

                this.$initialize();
                this._fixerResponses = System.Array.init(8192, System.UInt64(0), System.UInt64);
                this.ProofFindingMode = proofFindingMode;
                this.WeaklyFixable = weaklyFixable;
                if (this.ProofFindingMode) {
                    this.WinTreeInfo = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo))();
                    this.LossTreeInfo = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo))();
                }
            }
        },
        methods: {
            Analyze: function (board, wonBoards) {
                if (this.ProofFindingMode) {
                    return this.AnalyzeForProofInternal(board, wonBoards);
                }

                return this.AnalyzeInternal(board, wonBoards);
            },
            AnalyzeInternal: function (board, wonBoards) {
                var $t;
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        var x = board._trace[System.Array.index(i, board._trace)];
                        var y = board._trace[System.Array.index(j, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t.moveNext()) {
                                var breakerChoice = $t.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                for (var k = 1; k < this._fixerResponseCount; k = (k + 1) | 0) {
                                    if (this.WeaklyFixable && Algorithms.Int64Usage.PopulationCount$1(this._fixerResponses[System.Array.index(k, this._fixerResponses)]) > 2) {
                                        continue;
                                    }

                                    var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i, j, this._fixerResponses[System.Array.index(k, this._fixerResponses)], board._stackCount);
                                    if (wonBoards.contains(childBoard)) {
                                        winningSwapExists = true;
                                        break;
                                    }
                                }

                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                }

                return false;
            },
            AnalyzeForProofInternal: function (board, wonBoards) {
                var $t, $t1, $t2;
                var winInfo = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo();
                this.WinTreeInfo.set(board, winInfo);

                var lossInfo = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo();
                this.LossTreeInfo.set(board, lossInfo);

                var colorPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        colorPairs.add({ item1: i, item2: j });
                    }
                }

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(colorPairs).orderBy(function (cp) {
                        return Algorithms.Int64Usage.PopulationCount$1((board._trace[System.Array.index(cp.item1, board._trace)].xor(board._trace[System.Array.index(cp.item2, board._trace)])));
                    }));
                try {
                    while ($t.moveNext()) {
                        var cp = $t.Current;
                        var i1 = cp.item1;
                        var j1 = cp.item2;

                        var x = board._trace[System.Array.index(i1, board._trace)];
                        var y = board._trace[System.Array.index(j1, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t1.moveNext()) {
                                var breakerChoice = $t1.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                var responses = System.Linq.Enumerable.range(1, ((this._fixerResponseCount - 1) | 0)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer.f1)).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer.f2);
                                $t2 = Bridge.getEnumerator(responses);
                                try {
                                    while ($t2.moveNext()) {
                                        var response = $t2.Current;
                                        if (this.WeaklyFixable && Algorithms.Int64Usage.PopulationCount$1(response) > 2) {
                                            break;
                                        }

                                        var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i1, j1, response, board._stackCount);
                                        if (wonBoards.contains(childBoard)) {
                                            winningSwapExists = true;
                                            winInfo.Add(breakerChoice, i1, j1, response);
                                            break;
                                        } else {
                                            lossInfo.Add(breakerChoice, i1, j1, response);
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    winInfo.clear();
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            this.LastWinChildCount = Algorithms.Int64Usage.PopulationCount$1(swappable);
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;
                var tableLength = this._fixerResponses.length;
                while (tableLength <= this._fixerResponseCount) {
                    tableLength = Bridge.Int.mul(tableLength, 2);
                }
                if (tableLength > this._fixerResponses.length) {
                    this._fixerResponses = System.Array.init(tableLength, System.UInt64(0), System.UInt64);
                }

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer, {
        f1: function (k) {
            return this._fixerResponses[System.Array.index(k, this._fixerResponses)];
        },
        f2: function (fr) {
            return Algorithms.Int64Usage.PopulationCount$1(fr);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Template", {
        statics: {
            methods: {
                op_Implicit: function (s) {
                    return new Algorithms.FixerBreaker.KnowledgeEngine.Template.$ctor1(s, null);
                    //return new Template(Regex.Split(s ?? "", @"\D+").Select(MetaKnowledge.TryParseInt).Where(x => x.HasValue).Select(x => x.Value).ToList());
                }
            }
        },
        props: {
            Sizes: null
        },
        ctors: {
            ctor: function (sizes) {
                this.$initialize();
                this.Sizes = sizes;
            },
            $ctor1: function (s, g) {
                this.$initialize();
            }
        },
        methods: {
            equals: function (o) {
                return this.Equals(Bridge.as(o, Algorithms.FixerBreaker.KnowledgeEngine.Template));
            },
            Equals: function (t) {
                if (!Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(t)) {
                    return false;
                }

                return System.Linq.Enumerable.from(this.Sizes).sequenceEqual(t.Sizes);
            },
            getHashCode: function () {
                return System.Linq.Enumerable.from(this.Sizes).aggregate(this.Sizes.Count, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Template.f1);
            },
            toString: function () {
                return Bridge.toArray(this.Sizes).join(",");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Template", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Template, {
        f1: function (t, s) {
            return ((Bridge.Int.mul(31, t) + s) | 0);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge", {
        fields: {
            _potLookup: null
        },
        props: {
            Template: null,
            LostBoards: {
                get: function () {
                    return System.Linq.Enumerable.from(this._potLookup.getValues()).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge.f1).distinct();
                }
            }
        },
        ctors: {
            init: function () {
                this._potLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge))();
            },
            ctor: function (template) {
                this.$initialize();
                this.Template = template;
            }
        },
        methods: {
            getItem: function (colorCount) {
                var p = { };
                if (!this._potLookup.tryGetValue(colorCount, p)) {
                    p.v = new Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge(colorCount);
                    this._potLookup.set(colorCount, p.v);
                }

                return p.v;
            },
            Promote: function (colorCount) {
                this.getItem(colorCount).CopyInto(this.getItem(((colorCount + 1) | 0)));
            },
            KnowledgeExists: function (colorCount) {
                return this._potLookup.containsKey(colorCount);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge, {
        f1: function (pk) {
            return pk.LostBoards;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress", {
        props: {
            IsInitialThought: false,
            BoardsAdded: null,
            BoardsRemoved: null,
            WinLength: 0
        }
    });

    Bridge.define("Algorithms.FixerBreaker.SlowBoard", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        statics: {
            methods: {
                UpdateHash: function (hash, value) {
                    hash.v = System.Int64.clip32(System.Int64(Bridge.Int.mul(100, hash.v)).add(value));
                },
                ApplyMapping$1: function (mapping, stack) {
                    return Algorithms.Int64Usage.ToInt64(Algorithms.FixerBreaker.SlowBoard.ApplyMapping(mapping, Algorithms.Int64Usage.ToSet(stack)));
                },
                ApplyMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item2.getItem(mapping.item1.indexOf(c));
                        });
                },
                ApplyInverseMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item1.getItem(mapping.item2.indexOf(c));
                        });
                },
                OtherTurn: function (turn) {
                    return ((1 - turn) | 0);
                }
            }
        },
        fields: {
            _hashCode: 0
        },
        props: {
            Stacks: null,
            PotSet: null,
            Degrees: null,
            DegreeChangeIndices: null,
            Template: null,
            Pot: System.Int64(0),
            ColorCount: 0,
            Turn: 0,
            N: 0,
            LastMove: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            init: function () {
                this.LastMove = new Algorithms.FixerBreaker.Move();
            },
            ctor: function (stacks, pot) {
                this.$initialize();
                this.Stacks = stacks;
                this.Pot = pot;
                this.Turn = Algorithms.FixerBreaker.Turn.Fixer;
                this.N = this.Stacks.Count;
                this.Template = new Algorithms.FixerBreaker.KnowledgeEngine.Template.ctor(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f1).toList(System.Int32));

                this.PotSet = Algorithms.Int64Usage.ToSet(this.Pot);
                this.ColorCount = System.Linq.Enumerable.from(this.PotSet).count();
                this.Degrees = new (System.Collections.Generic.List$1(System.Object))();
                this.DegreeChangeIndices = new (System.Collections.Generic.List$1(System.Int32))();
                this.ComputeHashCode();
            }
        },
        methods: {
            getItem: function (x) {
                return this.Stacks.getItem(x);
            },
            ComputeHashCode: function () {
                this._hashCode = this.N;
                Algorithms.FixerBreaker.SlowBoard.UpdateHash(Bridge.ref(this, "_hashCode"), this.Turn);

                this.Degrees.clear();
                this.DegreeChangeIndices.clear();

                this.Degrees.addRange(System.Linq.Enumerable.from(this.PotSet).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.SlowBoard.f2)).where($asm.$.Algorithms.FixerBreaker.SlowBoard.f3).orderBy($asm.$.Algorithms.FixerBreaker.SlowBoard.f4));

                var previousDegree = -1;
                for (var i = 0; i < this.Degrees.Count; i = (i + 1) | 0) {
                    var degree = this.Degrees.getItem(i);

                    Algorithms.FixerBreaker.SlowBoard.UpdateHash(Bridge.ref(this, "_hashCode"), System.Int64(degree.item2));

                    if (degree.item2 !== previousDegree) {
                        this.DegreeChangeIndices.add(i);
                        previousDegree = degree.item2;
                    }
                }

                this.DegreeChangeIndices.add(this.Degrees.Count);
            },
            MakeMove: function (move) {
                this.LastMove = move.$clone();

                if (move.Stack >= 0) {
                    this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                }

                this.Turn = Algorithms.FixerBreaker.SlowBoard.OtherTurn(this.Turn);

                this.ComputeHashCode();
            },
            DoMoveCombination: function (moves) {
                var $t;
                $t = Bridge.getEnumerator(moves, Algorithms.FixerBreaker.Move);
                try {
                    while ($t.moveNext()) {
                        var move = $t.Current.$clone();
                        this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ComputeHashCode();
            },
            Clone: function () {
                var clone = new Algorithms.FixerBreaker.SlowBoard(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();
                clone._hashCode = this._hashCode;

                clone.ComputeHashCode();

                return clone;
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.SlowBoard));
            },
            Equals: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }

                if (System.Linq.Enumerable.from(this.Stacks).sequenceEqual(other.Stacks)) {
                    if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                        return true;
                    }

                    if (this.LastMove.Stack === other.LastMove.Stack && (this.LastMove.Added === other.LastMove.Added && this.LastMove.Removed === other.LastMove.Removed || this.LastMove.Added === other.LastMove.Removed && this.LastMove.Removed === other.LastMove.Added)) {
                        return true;
                    }

                    return false;
                }

                return this.FindPermutation(other) != null;
            },
            FindPermutation: function (other) {
                if (!System.Linq.Enumerable.from(this.Degrees).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f4).sequenceEqual(System.Linq.Enumerable.from(other.Degrees).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f4))) {
                    return null;
                }

                var mappingPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < ((this.DegreeChangeIndices.Count - 1) | 0); i = (i + 1) | 0) {
                    var domain = new (System.Collections.Generic.List$1(System.Int32))();
                    var codomain = new (System.Collections.Generic.List$1(System.Int32))();

                    for (var j = this.DegreeChangeIndices.getItem(i); j < this.DegreeChangeIndices.getItem(((i + 1) | 0)); j = (j + 1) | 0) {
                        domain.add(this.Degrees.getItem(j).item1);
                        codomain.add(other.Degrees.getItem(j).item1);
                    }

                    mappingPairs.add({ item1: domain, item2: codomain });
                }

                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Object, System.Linq.Enumerable.from(mappingPairs).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f5))).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.SlowBoard.f6)).firstOrDefault(Bridge.fn.bind(this, function (mapping) {
                        return this.SequenceEqualPermuted(mapping, other);
                    }), null);
            },
            FlattenMapping: function (mapping) {
                return { item1: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.SlowBoard.f7).toList(System.Int32), item2: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.SlowBoard.f4).toList(System.Int32) };
            },
            SequenceEqualPermuted: function (mapping, other) {
                for (var i = 0; i < this.Stacks.Count; i = (i + 1) | 0) {
                    var permutedStack = Algorithms.FixerBreaker.SlowBoard.ApplyMapping$1(mapping, this.Stacks.getItem(i));
                    if (permutedStack.ne(other.Stacks.getItem(i))) {
                        return false;
                    }
                }

                if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                    return true;
                }

                if (this.LastMove.Stack !== other.LastMove.Stack) {
                    return false;
                }

                var ours = System.Array.init([this.LastMove.Added, this.LastMove.Removed], System.Int32);
                var theirs = function (_o9) {
                        _o9.add(other.LastMove.Added);
                        _o9.add(other.LastMove.Removed);
                        return _o9;
                    }(new (System.Collections.Generic.List$1(System.Int32))());

                return Algorithms.Utility.ListUtility.Equal(System.Int32, System.Linq.Enumerable.from(Algorithms.FixerBreaker.SlowBoard.ApplyMapping(mapping, ours)).toList(System.Int32), theirs);
            },
            ExactlyEqual: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }
                if (this.Pot.ne(other.Pot)) {
                    return false;
                }

                if (System.Linq.Enumerable.from(this.Stacks).sequenceEqual(other.Stacks)) {
                    if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                        return true;
                    }

                    if (this.LastMove.Stack === other.LastMove.Stack && (this.LastMove.Added === other.LastMove.Added && this.LastMove.Removed === other.LastMove.Removed || this.LastMove.Added === other.LastMove.Removed && this.LastMove.Removed === other.LastMove.Added)) {
                        return true;
                    }
                }

                return false;
            },
            getHashCode: function () {
                return this._hashCode;
            },
            getEnumerator: function () {
                return this.Stacks.getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f8)).join("|");
            },
            ToTex: function () {
                return Algorithms.GenericExtensions.JoinPretty(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f9), ", ");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.SlowBoard", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.SlowBoard, {
        f1: function (s) {
            return Algorithms.Int64Usage.PopulationCount(s);
        },
        f2: function (c) {
            return { item1: c, item2: System.Linq.Enumerable.from(this.Stacks).count(function (s) {
                        return Algorithms.Int64Usage.IsBitSet(s, System.Int64(c));
                    }) };
        },
        f3: function (x) {
            return x.item2 > 0;
        },
        f4: function (x) {
            return x.item2;
        },
        f5: function (mp) {
            return System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(mp.item2.Count)).select(function (p) {
                    return { item1: mp.item1, item2: p.Apply(System.Int32, mp.item2) };
                });
        },
        f6: function (mapping) {
            return this.FlattenMapping(mapping);
        },
        f7: function (x) {
            return x.item1;
        },
        f8: function (x) {
            return Algorithms.Int64Usage.ToSetStringSmall(x);
        },
        f9: function (stack, i) {
            return System.String.concat("$L(v_" + (((i + 1) | 0)) + ") = ", System.String.replaceAll(System.String.replaceAll(Algorithms.Int64Usage.ToSetString$2(stack), "{", "\\{"), "}", "\\}"), "$");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Turn", {
        $kind: "enum",
        statics: {
            fields: {
                Fixer: 0,
                Breaker: 1
            }
        }
    });

    Bridge.define("Algorithms.GenericExtensions", {
        statics: {
            methods: {
                Shuffle: function (T, list) {
                    var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var n = System.Array.getCount(list, T);
                    while (n > 1) {
                        n = (n - 1) | 0;
                        var k = rng.next$1(((n + 1) | 0));
                        var value = System.Array.getItem(list, k, T);
                        System.Array.setItem(list, k, System.Array.getItem(list, n, T), T);
                        System.Array.setItem(list, n, value, T);
                    }
                },
                ShuffleAll: function (lists) {
                    var $t;
                    var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var n = System.Array.getCount(System.Array.getItem(lists, 0, System.Collections.IList));
                    while (n > 1) {
                        n = (n - 1) | 0;
                        var k = rng.next$1(((n + 1) | 0));

                        $t = Bridge.getEnumerator(lists, System.Collections.IList);
                        try {
                            while ($t.moveNext()) {
                                var list = $t.Current;
                                var value = System.Array.getItem(list, k);
                                System.Array.setItem(list, k, System.Array.getItem(list, n));
                                System.Array.setItem(list, n, value);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                },
                EnList: function (T, t) {
                    return function (_o10) {
                            _o10.add(t);
                            return _o10;
                        }(new (System.Collections.Generic.List$1(T))());
                },
                IndicesWhere: function (T, source, condition) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (T, source, condition) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            $t,
                            t,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 0;
                                                $t = Bridge.getEnumerator(source, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    t = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            if (condition(t)) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            $enumerator.current = i;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            i = (i + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                FirstIndex: function (T, source, condition) {
                    var $t;
                    var i = 0;
                    $t = Bridge.getEnumerator(source, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            if (condition(t)) {
                                return i;
                            }

                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return -1;
                },
                JoinPretty: function (source, separator) {
                    var count = System.Linq.Enumerable.from(source).count();
                    if (count <= 0) {
                        return "";
                    }
                    if (count === 1) {
                        return System.Linq.Enumerable.from(source).first();
                    }
                    if (count === 2) {
                        return System.String.concat(System.Linq.Enumerable.from(source).elementAt(0), " and ", System.Linq.Enumerable.from(source).elementAt(1));
                    }

                    return System.String.concat(Bridge.toArray(System.Linq.Enumerable.from(source).take(((count - 1) | 0))).join(separator), " and ", System.Linq.Enumerable.from(source).elementAt(((count - 1) | 0)));
                },
                RemoveAll: function (T, list, predicate, onRemoved) {
                    var removed = 0;
                    for (var i = (list.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (predicate(list.getItem(i))) {
                            onRemoved(list.getItem(i));

                            list.removeAt(i);
                            removed = (removed + 1) | 0;
                        }
                    }

                    return removed;
                }
            }
        }
    });

    Bridge.define("Algorithms.Graph", {
        statics: {
            fields: {
                RNG: null,
                CacheHits: System.Int64(0),
                NodesVisited: System.Int64(0),
                DotColors: null,
                TikzColors: null
            },
            props: {
                MemoizeEulerianSubgraphCounting: false
            },
            ctors: {
                init: function () {
                    this.RNG = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    this.DotColors = $asm.$.Algorithms.Graph.f1(new (System.Collections.Generic.List$1(System.String))());
                    this.TikzColors = $asm.$.Algorithms.Graph.f2(new (System.Collections.Generic.List$1(System.String))());
                }
            },
            methods: {
                MaybeIsomorphic: function (A, B) {
                    if (A.N !== B.N) {
                        return false;
                    }
                    if (A.E !== B.E) {
                        return false;
                    }

                    A.TransitivePartition.Refine(A.DegreeSequence.Value, 1);
                    B.TransitivePartition.Refine(B.DegreeSequence.Value, 1);

                    A.TransitivePartition.Refine(A.NodeInvariantOne.Value, 2);
                    B.TransitivePartition.Refine(B.NodeInvariantOne.Value, 2);

                    A.TransitivePartition.Refine(A.NodeInvariantTwo.Value, 3);
                    B.TransitivePartition.Refine(B.NodeInvariantTwo.Value, 3);

                    if (!A.TransitivePartition.equals(B.TransitivePartition)) {
                        return false;
                    }

                    return true;
                },
                Isomorphic: function (A, B) {
                    if (!Algorithms.Graph.MaybeIsomorphic(A, B)) {
                        return false;
                    }

                    return A.Contains(B, true);
                },
                op_Equality: function (A, B) {
                    return A == null && B == null || A != null && B != null && A.equals(B);
                },
                op_Inequality: function (A, B) {
                    return !(Algorithms.Graph.op_Equality(A, B));
                },
                op_Addition: function (A, B) {
                    return A.DisjointUnion(B);
                },
                op_Multiply: function (A, B) {
                    return A.Join(B);
                },
                op_Multiply$1: function (k, A) {
                    var G = A.Clone();
                    for (var i = 1; i < k; i = (i + 1) | 0) {
                        G = Algorithms.Graph.op_Addition(G, A);
                    }

                    G.Initialize();
                    return G;
                }
            }
        },
        fields: {
            _adjacent: null,
            _neighbors: null,
            _complementNeighbors: null,
            _outNeighbors: null,
            _inNeighbors: null,
            _laterNeighbors: null,
            _vertices: null,
            _independentSets: null,
            _maximalIndependentSets: null,
            _independentTwoSets: null,
            _independentThreeSets: null,
            _vertexSubsets: null,
            _e: null
        },
        props: {
            N: 0,
            E: {
                get: function () {
                    return this._e.Value;
                }
            },
            Adjacent: {
                get: function () {
                    return this._adjacent;
                }
            },
            Directed: null,
            VertexWeight: null,
            Neighbors: {
                get: function () {
                    return this._neighbors.Value;
                }
            },
            ComplementNeighbors: {
                get: function () {
                    return this._complementNeighbors.Value;
                }
            },
            OutNeighbors: {
                get: function () {
                    return this._outNeighbors.Value;
                }
            },
            InNeighbors: {
                get: function () {
                    return this._inNeighbors.Value;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            },
            DegreeSequence: null,
            InDegreeSequence: null,
            OutDegreeSequence: null,
            NodeInvariantOne: null,
            NodeInvariantTwo: null,
            TransitivePartition: null,
            EdgeWeightsWithMultiplicity: null,
            IndependentSets: {
                get: function () {
                    return this._independentSets.Value;
                }
            },
            MaximalIndependentSets: {
                get: function () {
                    return this._maximalIndependentSets.Value;
                }
            },
            Size: {
                get: function () {
                    var t = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        t = (t + (this.OutDegree(i))) | 0;
                    }

                    return t;
                }
            },
            MaxDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.Degree(i));
                    }

                    return max;
                }
            },
            MinDegree: {
                get: function () {
                    var min = 2147483647;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        min = Math.min(min, this.Degree(i));
                    }

                    return min;
                }
            },
            MaxOutDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.OutDegree(i));
                    }

                    return max;
                }
            },
            MaxInDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.InDegree(i));
                    }

                    return max;
                }
            }
        },
        ctors: {
            $ctor1: function (edgeWeights, vertexWeight) {
                if (vertexWeight === void 0) { vertexWeight = null; }

                this.$initialize();
                this.N = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this.VertexWeight = vertexWeight;

                this._vertices = System.Linq.Enumerable.range(0, this.N).toList(System.Int32);
                this._adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                this.Directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (edgeWeights.getItem(k) !== 0) {
                            this._adjacent.set([i, j], true);
                            this._adjacent.set([j, i], true);

                            if (edgeWeights.getItem(k) > 0) {
                                this.Directed.set([i, j], true);
                            }
                            if (edgeWeights.getItem(k) < 0) {
                                this.Directed.set([j, i], true);
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                this.Initialize();
            },
            ctor: function (adjacent, vertexWeight) {
                if (vertexWeight === void 0) { vertexWeight = null; }

                this.$initialize();
                this._adjacent = adjacent;
                this.N = ((System.Array.getLength(this._adjacent, 0) - 1) + 1) | 0;
                this.VertexWeight = vertexWeight;

                this._vertices = System.Linq.Enumerable.range(0, this.N).toList(System.Int32);
                this.Directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                this.Initialize();
            }
        },
        methods: {
            getItem: function (x, y) {
                return this._adjacent.get([x, y]);
            },
            FromOutNeighborLists: function (outNeighbors) {
                var N = outNeighbors.count;

                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < N; j = (j + 1) | 0) {
                        if (outNeighbors.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (outNeighbors.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return new Algorithms.Graph.$ctor1(edgeWeights);
            },
            Initialize: function () {
                this._e = new (Algorithms.Lazy$1(System.Int32)).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f3));

                this.SetupNeighbors();
                this.InitializeLazyLoaders();
            },
            SetupNeighbors: function () {
                this._neighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f4));

                this._complementNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f5));

                this._outNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f6));

                this._inNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f7));

                this._laterNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f8));

                this.TransitivePartition = new Algorithms.TransitivePartition(this._vertices);

                this.DegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.Degree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.InDegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.InDegree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.OutDegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.OutDegree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.NodeInvariantOne = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t, $t1, $t2, $t3, $t4;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    var sp = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = ($t1 = this.DegreeSequence.Value)[System.Array.index(v, $t1)];
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var k = 3;
                    for (var i = 0; i < k; i = (i + 1) | 0) {
                        $t2 = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t2.moveNext()) {
                                var v1 = $t2.Current;
                                sp[System.Array.index(v1, sp)] = System.Int64.clip32(System.Int64((s[System.Array.index(v1, s)] << 13 | s[System.Array.index(v1, s)] >> 19)).xor(System.Int64(4278255360)));
                                $t3 = Bridge.getEnumerator(this.Neighbors.getItem(v1));
                                try {
                                    while ($t3.moveNext()) {
                                        var w = $t3.Current;
                                        sp[System.Array.index(v1, sp)] = (sp[System.Array.index(v1, sp)] + s[System.Array.index(w, s)]) | 0;
                                    }
                                } finally {
                                    if (Bridge.is($t3, System.IDisposable)) {
                                        $t3.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                        $t4 = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t4.moveNext()) {
                                var v2 = $t4.Current;
                                s[System.Array.index(v2, s)] = sp[System.Array.index(v2, sp)];
                            }
                        } finally {
                            if (Bridge.is($t4, System.IDisposable)) {
                                $t4.System$IDisposable$dispose();
                            }
                        }}

                    return s;
                }));

                this.NodeInvariantTwo = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t, $t1, $t2, $t3, $t4, $t5;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = ($t1 = this.DegreeSequence.Value)[System.Array.index(v, $t1)];

                            $t2 = Bridge.getEnumerator(this.Neighbors.getItem(v));
                            try {
                                while ($t2.moveNext()) {
                                    var w = $t2.Current;
                                    s[System.Array.index(v, s)] = (s[System.Array.index(v, s)] + (Bridge.Int.mul(3, ($t3 = this.DegreeSequence.Value)[System.Array.index(w, $t3)]))) | 0;

                                    $t4 = Bridge.getEnumerator(this.Neighbors.getItem(w));
                                    try {
                                        while ($t4.moveNext()) {
                                            var z = $t4.Current;
                                            if (z !== v) {
                                                s[System.Array.index(v, s)] = (s[System.Array.index(v, s)] + (Bridge.Int.mul(7, ($t5 = this.DegreeSequence.Value)[System.Array.index(z, $t5)]))) | 0;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t4, System.IDisposable)) {
                                            $t4.System$IDisposable$dispose();
                                        }
                                    }
                                }
                            } finally {
                                if (Bridge.is($t2, System.IDisposable)) {
                                    $t2.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));
            },
            InitializeLazyLoaders: function () {
                this._independentSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f9), true);
                this._independentTwoSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f11), true);
                this._independentThreeSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f13), true);
                this._vertexSubsets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f14));
                this._maximalIndependentSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f15), true);
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f16)).join(" ");
            },
            getHashCode: function () {
                return Bridge.getHashCode(this.toString());
            },
            equals: function (obj) {
                var H = Bridge.as(obj, Algorithms.Graph);
                if (Algorithms.Graph.op_Equality(H, null)) {
                    return false;
                }

                if (this.N !== H.N) {
                    return false;
                }
                if (this.E !== H.E) {
                    return false;
                }

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j]) !== H.getItem(i, j)) {
                            return false;
                        }
                    }
                }

                return true;
            },
            PermuteVertices: function (p) {
                var $t;
                var adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([p.getItem(i), p.getItem(j)], this._adjacent.get([i, j]));
                    }
                }

                var vertexWeight = null;
                if (this.VertexWeight != null) {
                    vertexWeight = new (System.Collections.Generic.List$1(System.Int32))();
                    var pp = p.Inverse();

                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            vertexWeight.add(this.VertexWeight.getItem(pp.getItem(v)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return new Algorithms.Graph.ctor(adjacent, vertexWeight);
            },
            Contains: function (A, induced) {
                return this.Contains$1(A, induced, $asm.$.Algorithms.Graph.f17);
            },
            Contains$1: function (A, induced, condition) {
                if (this.N < A.N) {
                    return false;
                }

                var tau = new (System.Collections.Generic.List$1(System.Int32))();
                return this.Contains$2(A, induced, condition, System.Array.init(A.N, 0, System.Int32), tau, 0);
            },
            Contains$2: function (A, induced, condition, tau, placed, v) {
                var $t;
                if (v === A.N) {
                    return true;
                }

                var images = System.Linq.Enumerable.from(placed).select(function (u) {
                        return tau[System.Array.index(u, tau)];
                    }).orderBy($asm.$.Algorithms.Graph.f18).toList(System.Int32);
                var requiredNeighbors = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.IntersectionSorted$1(A.Neighbors.getItem(v), placed)).select(function (u) {
                        return tau[System.Array.index(u, tau)];
                    }).orderBy($asm.$.Algorithms.Graph.f18).toList(System.Int32);
                var candidates = System.Linq.Enumerable.from(this.Vertices).except(images).where(Bridge.fn.bind(this, function (w) {
                    return A.Degree(v) <= this.Degree(w);
                })).where(Bridge.fn.bind(this, function (w) {
                    return induced ? System.Linq.Enumerable.from(requiredNeighbors).sequenceEqual(Algorithms.Utility.ListUtility.Intersection(System.Int32, this.Neighbors.getItem(w), images)) : Algorithms.Utility.ListUtility.SubsetEqualSorted(requiredNeighbors, this.Neighbors.getItem(w));
                })).where(Bridge.fn.bind(this, function (w) {
                    return condition(this, A, w, v);
                }));

                $t = Bridge.getEnumerator(candidates);
                try {
                    while ($t.moveNext()) {
                        var candidate = $t.Current;
                        tau[System.Array.index(v, tau)] = candidate;
                        placed.add(v);

                        if (this.Contains$2(A, induced, condition, tau, placed, ((v + 1) | 0))) {
                            return true;
                        }

                        placed.removeAt(((placed.Count - 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            ContainsInduced: function (A) {
                return this.Contains(A, true);
            },
            ContainsInducedOld: function (A) {
                var $t;
                if (this.N < A.N) {
                    return false;
                }

                var vertexSets = this._vertexSubsets.Value;

                $t = Bridge.getEnumerator(vertexSets);
                try {
                    while ($t.moveNext()) {
                        var vertices = $t.Current;
                        if (Algorithms.Graph.Isomorphic(this.InducedSubgraph(vertices), A)) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            EnumerateConnectedOrderings: function (initialVertices) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function (initialVertices) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        done,
                        $t,
                        v,
                        $t1,
                        ordering,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        done = true;
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(this.Vertices).except(initialVertices));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                v = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 2: {
                                        done = false;
                                            if (this.DegreeInSubgraph(v, initialVertices) > 0) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 8;
                                            continue;
                                    }
                                    case 3: {
                                        initialVertices.add(v);
                                            $t1 = Bridge.getEnumerator(this.EnumerateConnectedOrderings(initialVertices), System.Collections.Generic.List$1(System.Int32));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t1.moveNext()) {
                                                ordering = $t1.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        $enumerator.current = System.Linq.Enumerable.from(ordering).toList(System.Int32);
                                            $step = 6;
                                            return true;
                                    }
                                    case 6: {
                                        $step = 4;
                                        continue;
                                    }
                                    case 7: {
                                        initialVertices.removeAt(((initialVertices.Count - 1) | 0));
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 9: {
                                        if (done) {
                                                $step = 10;
                                                continue;
                                            } 
                                            $step = 12;
                                            continue;
                                    }
                                    case 10: {
                                        $enumerator.current = initialVertices;
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            IsSpanningSubgraphOf: function (A) {
                if (this.N !== A.N) {
                    return false;
                }

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j]) && !A.getItem(i, j)) {
                            return false;
                        }
                    }
                }

                return true;
            },
            GetEdgeWeights: function () {
                return this.GetEdgeWeights$4(System.Array.init([], System.Int32), System.Array.init([], System.Object));
            },
            GetEdgeWeights$2: function (subgraph) {
                var n = subgraph.Count;
                var w = new (System.Collections.Generic.List$1(System.Int32))(n);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        w.add(0);

                        if (this._adjacent.get([subgraph.getItem(i), subgraph.getItem(j)]) || this._adjacent.get([subgraph.getItem(j), subgraph.getItem(i)])) {
                            w.setItem(k, 1);
                        }

                        k = (k + 1) | 0;
                    }
                }

                return w;
            },
            GetEdgeWeights$1: function (adjacent, directed) {
                return this.GetEdgeWeights$3(adjacent, directed, System.Array.init([], System.Int32), System.Array.init([], System.Object));
            },
            GetEdgeWeights$4: function (removedVertices, removedEdges) {
                return this.GetEdgeWeights$3(this._adjacent, this.Directed, removedVertices, removedEdges);
            },
            GetEdgeWeights$3: function (adjacent, directed, removedVertices, removedEdges) {
                var w = new (System.Collections.Generic.List$1(System.Int32))();

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = { v : (i + 1) | 0 }; j.v < this.N; j.v = (j.v + 1) | 0) {
                        w.add(0);

                        if (!System.Linq.Enumerable.from(removedVertices).any((function ($me, j) {
                                return function (v) {
                                    return v === i || v === j.v;
                                };
                            })(this, j)) && !System.Linq.Enumerable.from(removedEdges).any((function ($me, j) {
                                return function (e) {
                                    return e.item1 === i && e.item2 === j.v || e.item1 === j.v && e.item2 === i;
                                };
                            })(this, j))) {
                            if (adjacent.get([i, j.v]) || adjacent.get([j.v, i])) {
                                w.setItem(k, 1);
                                if (directed.get([j.v, i])) {
                                    w.setItem(k, -1);
                                }
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                return w;
            },
            InducedSubgraph: function (subgraph) {
                var $t;
                var vertexWeight = null;
                if (this.VertexWeight != null) {
                    vertexWeight = new (System.Collections.Generic.List$1(System.Int32))(subgraph.Count);
                    $t = Bridge.getEnumerator(subgraph);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            vertexWeight.add(this.VertexWeight.getItem(v));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights$2(subgraph), vertexWeight);
            },
            ToDotWithFactors: function (labelEdges) {
                var $t, $t1;
                if (labelEdges === void 0) { labelEdges = false; }
                var sb = new System.Text.StringBuilder();

                var factors = this.Factor();
                var colorRanges = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerable$1(System.Int32)))();
                var last = 0;
                var G = Algorithms.Graphs.Empty;
                $t = Bridge.getEnumerator(factors, Algorithms.Graph);
                try {
                    while ($t.moveNext()) {
                        var factor = $t.Current;
                        colorRanges.add(System.Linq.Enumerable.range(last, factor.N));
                        last = (last + factor.N) | 0;

                        G = Algorithms.Graph.op_Multiply(G, factor);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                sb.appendLine("graph G {");
                sb.appendLine("overlap = false;");
                sb.appendLine("splines=true;");
                sb.appendLine("sep=0.3;");
                sb.appendLine("node[fontsize=20, style=bold, color=black; shape=circle, penwidth=1];");
                sb.appendLine("edge[style=bold, color=black, penwidth=2];");
                $t1 = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t1.moveNext()) {
                        var v = $t1.Current;
                        var colorIndex = System.Linq.Enumerable.from(colorRanges).select($asm.$.Algorithms.Graph.f19).first((function ($me, v) {
                            return function (p) {
                                return System.Linq.Enumerable.from(p.range).contains(v);
                            };
                        })(this, v)).index % Algorithms.Graph.DotColors.Count;
                        var label = v.toString();
                        sb.appendLine(System.String.format("{0} [label = \"{2}\", style = filled, fillcolor = \"{1}\"];", Bridge.box(v, System.Int32), Algorithms.Graph.DotColors.getItem(colorIndex), label));
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (G._adjacent.get([i, j])) {
                            if (labelEdges) {
                                sb.appendLine(System.String.format("{0} -- {1} [label = \"{2}\"]", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32), Bridge.box(k, System.Int32)));
                            } else {
                                sb.appendLine(System.String.format("{0} -- {1}", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32)));
                            }

                            k = (k + 1) | 0;
                        }
                    }
                }
                sb.appendLine("}");

                return sb.toString();
            },
            ToDotForTikz: function () {
                var $t, $t1;
                var sb = new System.Text.StringBuilder();

                var factors = this.Factor();
                var colorRanges = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerable$1(System.Int32)))();
                var last = 0;
                var G = Algorithms.Graphs.Empty;
                $t = Bridge.getEnumerator(factors, Algorithms.Graph);
                try {
                    while ($t.moveNext()) {
                        var factor = $t.Current;
                        colorRanges.add(System.Linq.Enumerable.range(last, factor.N));
                        last = (last + factor.N) | 0;

                        G = Algorithms.Graph.op_Multiply(G, factor);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                sb.appendLine("graph G {");
                $t1 = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t1.moveNext()) {
                        var v = $t1.Current;
                        var colorIndex = System.Linq.Enumerable.from(colorRanges).select($asm.$.Algorithms.Graph.f19).first((function ($me, v) {
                            return function (p) {
                                return System.Linq.Enumerable.from(p.range).contains(v);
                            };
                        })(this, v)).index % Algorithms.Graph.TikzColors.Count;
                        sb.appendLine(System.String.format("{0} [label = \"\", style = \"draw, circle, fill={1}\"];", Bridge.box(v, System.Int32), Algorithms.Graph.TikzColors.getItem(colorIndex)));
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (G._adjacent.get([i, j])) {
                            sb.appendLine(System.String.format("{0} -- {1}", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32)));
                        }
                    }
                }
                sb.appendLine("}");

                return sb.toString();
            },
            IsProperFactor: function (subset) {
                var $t;
                if (subset.Count <= 0) {
                    return true;
                }
                if (subset.Count >= this.N) {
                    return false;
                }

                var rest = Algorithms.Utility.ListUtility.Difference(System.Int32, this._vertices, subset);

                var pairs = System.Linq.Enumerable.from(subset).selectMany(function (i) {
                        return rest;
                    }, $asm.$.Algorithms.Graph.f20);

                $t = Bridge.getEnumerator(pairs);
                try {
                    while ($t.moveNext()) {
                        var pair = $t.Current;
                        if (!this._adjacent.get([pair.item1, pair.item2])) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            Factor: function () {
                var properFactors = System.Linq.Enumerable.from(this._vertexSubsets.Value).where(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f21)).toList(System.Collections.Generic.List$1(System.Int32));
                var maximalFactor = Algorithms.Utility.ListUtility.MaximalElements(System.Int32, properFactors).getItem(0);
                if (maximalFactor.Count <= 0) {
                    return Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f22)(new (System.Collections.Generic.List$1(Algorithms.Graph))());
                }

                var rest = Algorithms.Utility.ListUtility.Difference(System.Int32, this._vertices, maximalFactor);
                var maxFactor = this.InducedSubgraph(maximalFactor);
                var restGraph = this.InducedSubgraph(rest);
                return System.Linq.Enumerable.from(maxFactor.Factor()).concat(restGraph.Factor());
            },
            Clone: function () {
                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights());
            },
            Complement: function () {
                var adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        if (i === j) {
                            continue;
                        }
                        adjacent.set([i, j], !this._adjacent.get([i, j]));
                    }
                }

                return new Algorithms.Graph.ctor(adjacent);
            },
            RemoveVertex: function (v) {
                var subgraph = System.Linq.Enumerable.from(this.Vertices).toList(System.Int32);
                subgraph.remove(v);
                return this.InducedSubgraph(subgraph);
            },
            RemoveEdge$1: function (e) {
                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights$4(System.Array.init([], System.Int32), System.Array.init([e], System.Object)));
            },
            RemoveEdge: function (v1, v2) {
                return this.RemoveEdge$1({ item1: v1, item2: v2 });
            },
            AddEdge$1: function (v1, v2, directed) {
                var g = this.Clone();
                g._adjacent.set([v1, v2], (g._adjacent.set([v2, v1], true), true));
                if (directed) {
                    g.Directed.set([v1, v2], true);
                }

                return new Algorithms.Graph.$ctor1(g.GetEdgeWeights());
            },
            AddEdge: function (x, y) {
                var G = this.Clone();
                G._adjacent.set([x, y], true);
                G._adjacent.set([y, x], true);

                G.Initialize();
                return G;
            },
            GetArbitraryEdge: function () {
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            return { item1: i, item2: j };
                        }
                    }
                }

                return null;
            },
            GetEdgeTuples: function () {
                var tuples = new (System.Collections.Generic.List$1(System.Object))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            if (this.Directed.get([i, j])) {
                                tuples.add({ item1: i, item2: j });
                            } else {
                                tuples.add({ item1: j, item2: i });
                            }
                        }
                    }
                }

                return tuples;
            },
            DisjointUnion: function (H) {
                var n = (this.N + H.N) | 0;

                var adjacent = System.Array.create(false, null, System.Boolean, n, n);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([i, j], this._adjacent.get([i, j]));
                    }
                }

                for (var i1 = 0; i1 < H.N; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 < H.N; j1 = (j1 + 1) | 0) {
                        adjacent.set([((this.N + i1) | 0), ((this.N + j1) | 0)], H.getItem(i1, j1));
                    }
                }

                return new Algorithms.Graph.ctor(adjacent);
            },
            Join: function (H) {
                var G = this.DisjointUnion(H);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < H.N; j = (j + 1) | 0) {
                        G._adjacent.set([i, ((this.N + j) | 0)], true);
                        G._adjacent.set([((this.N + j) | 0), i], true);
                    }
                }

                G.Initialize();
                return G;
            },
            AttachNewVertex$1: function (neighbors) {
                if (neighbors === void 0) { neighbors = []; }
                return this.AttachNewVertex(Bridge.cast(neighbors, System.Collections.Generic.IList$1(System.Int32)));
            },
            AttachNewVertex: function (neighbors) {
                var $t;
                var adjacent = System.Array.create(false, null, System.Boolean, ((this.N + 1) | 0), ((this.N + 1) | 0));

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([i, j], this._adjacent.get([i, j]));
                    }
                }

                $t = Bridge.getEnumerator(neighbors, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var neighbor = $t.Current;
                        adjacent.set([this.N, neighbor], true);
                        adjacent.set([neighbor, this.N], true);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return new Algorithms.Graph.ctor(adjacent);
            },
            Square: function () {
                var $t, $t1;
                var g = this.Clone();
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        $t1 = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Int32, this.Neighbors.getItem(v), this.Neighbors.getItem(v)), System.Object);
                        try {
                            while ($t1.moveNext()) {
                                var pair = $t1.Current;
                                if (pair.item1 !== pair.item2) {
                                    g._adjacent.set([pair.item1, pair.item2], (g._adjacent.set([pair.item2, pair.item1], true), true));
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return g.Clone();
            },
            IsRegular: function () {
                if (this.N <= 0) {
                    return true;
                }

                return System.Linq.Enumerable.from(this.Neighbors).all(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f23));
            },
            Degree: function (v) {
                return this.Neighbors.getItem(v).Count;
            },
            OutDegree: function (v) {
                return this.OutNeighbors.getItem(v).Count;
            },
            InDegree: function (v) {
                return this.InNeighbors.getItem(v).Count;
            },
            DegreeInSubgraph: function (v, subgraph) {
                return Algorithms.Utility.ListUtility.IntersectionCountSorted(this.Neighbors.getItem(v), subgraph);
            },
            NeighborsInSubgraph: function (v, subgraph) {
                return Algorithms.Utility.ListUtility.IntersectionSorted$1(this.Neighbors.getItem(v), subgraph);
            },
            SumOverSubgraphNeighbors: function (v, subgraph, g) {
                return System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.IntersectionSorted$1(this.Neighbors.getItem(v), subgraph)).sum(function (w) {
                        return g[System.Array.index(w, g)];
                    });
            },
            GetDegreeMinusKFunc: function (k) {
                return Bridge.fn.bind(this, function (v) {
                    return ((this.Degree(v) - k) | 0);
                });
            },
            EdgesOn: function (A) {
                var edges = 0;
                for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < A.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([A.getItem(i), A.getItem(j)])) {
                            edges = (edges + 1) | 0;
                        }
                    }
                }

                return edges;
            },
            EdgeIndicesOn: function (A) {
                var edgeIndices = new (System.Collections.Generic.List$1(System.Int32))();

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            if (A.contains(i) && A.contains(j)) {
                                edgeIndices.add(k);
                            }

                            k = (k + 1) | 0;
                        }
                    }
                }

                return edgeIndices;
            },
            EdgesBetween: function (A, B) {
                var intersection = Algorithms.Utility.ListUtility.Intersection(System.Int32, A, B);
                A = Algorithms.Utility.ListUtility.Difference(System.Int32, A, B);

                var edges = 0;
                for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                    for (var j = 0; j < B.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([A.getItem(i), B.getItem(j)])) {
                            edges = (edges + 1) | 0;
                        }
                    }
                }

                return ((edges + this.EdgesOn(intersection)) | 0);
            },
            IndependentSetsInSubgraph: function (firstVertex) {
                if (firstVertex >= this.N) {
                    return $asm.$.Algorithms.Graph.f24(new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))());
                }

                var subgraphSets = this.IndependentSetsInSubgraph(((firstVertex + 1) | 0));

                return System.Linq.Enumerable.from(subgraphSets).union(System.Linq.Enumerable.from(subgraphSets).where(Bridge.fn.bind(this, function (set) {
                            return this.IsIndependentOf(firstVertex, set);
                        })).select(function (set) {
                        var bigger = function (_o15) {
                                _o15.add(firstVertex);
                                return _o15;
                            }(new (System.Collections.Generic.List$1(System.Int32))());
                        bigger.addRange(set);
                        return bigger;
                    }));
            },
            IsIndependentOf: function (v, set) {
                var $t;
                $t = Bridge.getEnumerator(set);
                try {
                    while ($t.moveNext()) {
                        var w = $t.Current;
                        if (w === v || this._adjacent.get([w, v])) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            IsClique: function (subset) {
                for (var i = 0; i < subset.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < subset.Count; j = (j + 1) | 0) {
                        if (!this._adjacent.get([subset.getItem(i), subset.getItem(j)])) {
                            return false;
                        }
                    }
                }

                return true;
            },
            IsIndependent: function (subset) {
                for (var i = 0; i < subset.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < subset.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([subset.getItem(i), subset.getItem(j)])) {
                            return false;
                        }
                    }
                }

                return true;
            },
            IsComplete: function () {
                return this.IsClique(this._vertices);
            },
            IsCliqueNumberAtLeast: function (k) {
                var $t;
                if (k > this._vertices.Count) {
                    return false;
                }
                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, this._vertices, k), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        if (this.IsClique(set)) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            IndependenceNumber: function () {
                return this.IndependenceNumber$1(this.Vertices);
            },
            IndependenceNumber$1: function (subgraph) {
                return System.Linq.Enumerable.from(this._independentSets.Value).max(function (I) {
                        return Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, I, subgraph);
                    });
            },
            MaximumIndependentSubset: function (subgraph) {
                var i = this.IndependenceNumber$1(subgraph);
                return System.Linq.Enumerable.from(this._independentSets.Value).first(function (I) {
                        return Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, I, subgraph) === i;
                    });
            },
            EnumerateMaximalIndependentSets$1: function (set) {
                return this.EnumerateBronKerbosch(set, new (System.Collections.Generic.List$1(System.Int32))(), new (System.Collections.Generic.List$1(System.Int32))());
            },
            EnumerateMaximalIndependentSets: function () {
                return this.EnumerateBronKerbosch(this.Vertices, new (System.Collections.Generic.List$1(System.Int32))(), new (System.Collections.Generic.List$1(System.Int32))());
            },
            EnumerateBronKerbosch: function (P, R, X) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function (P, R, X) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        PC,
                        XC,
                        u,
                        $t,
                        v,
                        $t1,
                        set,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (P.Count === 0 && X.Count === 0) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        $enumerator.current = System.Linq.Enumerable.from(R).toList(System.Int32);
                                            $step = 2;
                                            return true;
                                    }
                                    case 2: {
                                        $step = 11;
                                        continue;
                                    }
                                    case 3: {
                                        PC = System.Linq.Enumerable.from(P).toList(System.Int32);
                                            XC = System.Linq.Enumerable.from(X).toList(System.Int32);

                                            u = this.TomitaPivot(P, X);
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(P).except(this.ComplementNeighbors.getItem(u)));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t.moveNext()) {
                                                v = $t.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 10;
                                        continue;
                                    }
                                    case 5: {
                                        R.add(v);
                                            $t1 = Bridge.getEnumerator(this.EnumerateBronKerbosch(Algorithms.Utility.ListUtility.Intersection(System.Int32, PC, this.ComplementNeighbors.getItem(v)), R, Algorithms.Utility.ListUtility.Intersection(System.Int32, XC, this.ComplementNeighbors.getItem(v))), System.Collections.Generic.List$1(System.Int32));
                                            $step = 6;
                                            continue;
                                    }
                                    case 6: {
                                        if ($t1.moveNext()) {
                                                set = $t1.Current;
                                                $step = 7;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 7: {
                                        $enumerator.current = set;
                                            $step = 8;
                                            return true;
                                    }
                                    case 8: {
                                        $step = 6;
                                        continue;
                                    }
                                    case 9: {
                                        R.remove(v);
                                            PC.remove(v);
                                            XC.add(v);
                                        $step = 4;
                                        continue;
                                    }
                                    case 10: {
                                        $step = 11;
                                        continue;
                                    }
                                    case 11: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            TomitaPivot: function (P, X) {
                var $t;
                var max = -1;
                var best = -1;
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(P).concat(X));
                try {
                    while ($t.moveNext()) {
                        var u = $t.Current;
                        var n = Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, this.ComplementNeighbors.getItem(u), P);
                        if (n > max) {
                            max = n;
                            best = u;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return best;
            },
            FindChiColoring: function () {
                for (var K = 0; K < 2147483647; K = (K + 1) | 0) {
                    var c = this.FindKColoring(this.Vertices, K);
                    if (c != null) {
                        return c;
                    }
                }

                return null;
            },
            FindKColoring: function (subgraph, K) {
                var $t;
                if (subgraph.Count <= 0) {
                    return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                }
                if (K <= 0) {
                    return null;
                }

                $t = Bridge.getEnumerator(this.EnumerateMaximalIndependentSets$1(subgraph), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var I = $t.Current;
                        var c = this.FindKColoring(Algorithms.Utility.ListUtility.Difference(System.Int32, subgraph, I), ((K - 1) | 0));
                        if (c != null) {
                            c.insert(0, I);
                            return c;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            MaxColorableSubset: function (assignment, subset) {
                return this.MaxColorableSubset$1(assignment, 0, subset);
            },
            MaxColorableSubset$1: function (assignment, v, subset) {
                var $t;
                if (v >= subset.Count) {
                    return 0;
                }

                var max = this.MaxColorableSubset$1(assignment, ((v + 1) | 0), subset);

                var colors = assignment.getItem(subset.getItem(v));
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(subset.getItem(v)));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    max = Math.max(max, ((1 + this.MaxColorableSubset$1(assignmentCopy, ((v + 1) | 0), subset)) | 0));
                    if (max >= subset.Count) {
                        break;
                    }

                    colors = colors.xor(color);
                }

                return max;
            },
            GreedyColor: function (assignment, subset) {
                var $t;
                var coloring = System.Array.init(this.N, System.Int64(0), System.Int64);
                $t = Bridge.getEnumerator(subset);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        var lost = System.Linq.Enumerable.from(this.Neighbors.getItem(v)).aggregate(System.Int64(0), function (l, x) {
                                return l.or(coloring[System.Array.index(x, coloring)]);
                            });
                        var colors = assignment.getItem(v).and(lost.not());
                        coloring[System.Array.index(v, coloring)] = colors.and(colors.neg());
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(coloring).count($asm.$.Algorithms.Graph.f25);
            },
            IsChoosable$1: function (assignment, subset) {
                return this.IsChoosable$3(assignment, 0, subset);
            },
            IsChoosable$3: function (assignment, v, subset) {
                var $t;
                if (v >= subset.Count) {
                    return true;
                }

                var colors = assignment.getItem(subset.getItem(v));
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(subset.getItem(v)));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$3(assignmentCopy, ((v + 1) | 0), subset)) {
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            },
            IsChoosable: function (assignment) {
                return this.IsChoosable$2(assignment, 0);
            },
            IsChoosable$2: function (assignment, v) {
                var $t;
                if (v >= this.N) {
                    return true;
                }

                var colors = assignment.getItem(v);
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(v));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$2(assignmentCopy, ((v + 1) | 0))) {
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            },
            IsCliqueCovering: function (assignment) {
                var $t;
                $t = Bridge.getEnumerator(this._independentTwoSets.Value);
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        if ((assignment.getItem(set.getItem(0)).and(assignment.getItem(set.getItem(1)))).ne(System.Int64(0))) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            CheckFGChoosable: function (f, g) {
                var $t;
                var pot = System.Linq.Enumerable.range(0, ((System.Linq.Enumerable.from(this.Vertices).sum(function (v) {
                        return g(v);
                    }) - 1) | 0)).toList(System.Int32);
                var first = System.Linq.Enumerable.range(0, f(0)).toList(System.Int32);
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(Bridge.cast((System.Array.init([(System.Array.init([first], System.Collections.Generic.List$1(System.Int32)))], System.Array.type(System.Collections.Generic.List$1(System.Int32)))), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32))))).concat(System.Linq.Enumerable.from(this.Vertices).skip(1).select(function (v) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, pot, f(v));
                    }))), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var L = $t.Current;
                        var LL = System.Linq.Enumerable.from(L).toList(System.Collections.Generic.List$1(System.Int32));
                        if (!this.IsGColorable(LL, g)) {
                            return LL;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            IsGColorable: function (L, g) {
                var $t;
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(this.Vertices).select(function (v) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, L.getItem(v), g(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var coloring = $t.Current;
                        if (this.IsProperColoring(System.Linq.Enumerable.from(coloring).toList(System.Collections.Generic.List$1(System.Int32)))) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            IsProperColoring: function (coloring) {
                for (var v = 0; v < this.N; v = (v + 1) | 0) {
                    for (var w = (v + 1) | 0; w < this.N; w = (w + 1) | 0) {
                        if (!this._adjacent.get([v, w])) {
                            continue;
                        }

                        if (Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, coloring.getItem(v), coloring.getItem(w)) > 0) {
                            return false;
                        }
                    }
                }

                return true;
            },
            Mic: function () {
                var $t;
                var mic = 0;
                $t = Bridge.getEnumerator(this.EnumerateMaximalIndependentSets(), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        var t = System.Linq.Enumerable.from(set).sum(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f26));
                        mic = Math.max(mic, t);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return mic;
            },
            IsOnlineFChoosable: function (f) {
                var $t;
                Algorithms.Graph.NodesVisited = System.Int64(0);
                Algorithms.Graph.CacheHits = System.Int64(0);

                var fTrace = System.Array.init(this.N, 0, System.Int32);
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        fTrace[System.Array.index(v, fTrace)] = f(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var cache = new (System.Collections.Generic.Dictionary$2(Algorithms.OnlineChoiceHashGraph,System.Boolean))();

                return this.IsOnlineFChoosable$1(fTrace, System.Linq.Enumerable.repeat(1, this.N).toArray(System.Int32), cache);
            },
            IsOnlineFChoosable$1: function (f, g, cache) {
                var $step = 0,
                    $jumpFromFinally, 
                    key, 
                    result, 
                    gClone, 
                    liveVertices, 
                    freebies, 
                    $t, 
                    v, 
                    cachedResult, 
                    independentSets, 
                    $t1, 
                    V, 
                    $t2, 
                    v1, 
                    maximalIndependentSets, 
                    choosable, 
                    $t3, 
                    C, 
                    $t4, 
                    v2, 
                    $t5, 
                    v3, 
                    $t6, 
                    v4, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();

                                    key = null;

                                    result = true;
                                    gClone = null;

                                    liveVertices = System.Linq.Enumerable.from(g).select($asm.$.Algorithms.Graph.f27).where($asm.$.Algorithms.Graph.f28).toList(System.Int32);
                                    freebies = System.Linq.Enumerable.from(liveVertices).where(Bridge.fn.bind(this, function (v) {
                                        return this.DegreeInSubgraph(v, liveVertices) < f[System.Array.index(v, f)];
                                    })).toList(System.Int32);

                                    while (freebies.Count > 0) {
                                        if (gClone == null) {
                                            gClone = System.Array.init(g.length, 0, System.Int32);
                                            System.Array.copy(g, 0, gClone, 0, g.length);
                                        }

                                        $t = Bridge.getEnumerator(freebies);
                                        try {
                                            while ($t.moveNext()) {
                                                v = $t.Current;
                                                g[System.Array.index(v, g)] = 0;
                                            }
                                        } finally {
                                            if (Bridge.is($t, System.IDisposable)) {
                                                $t.System$IDisposable$dispose();
                                            }
                                        }
                                        liveVertices = System.Linq.Enumerable.from(g).select($asm.$.Algorithms.Graph.f29).where($asm.$.Algorithms.Graph.f28).toList(System.Int32);
                                        freebies = System.Linq.Enumerable.from(liveVertices).where(Bridge.fn.bind(this, function (v1) {
                                            return this.DegreeInSubgraph(v1, liveVertices) < f[System.Array.index(v1, f)];
                                        })).toList(System.Int32);
                                    }

                                    if (liveVertices.Count <= 0) {
                                        $step = 1;
                                        continue;
                                    } 
                                    $step = 2;
                                    continue;
                                }
                                case 1: {
                                    result = true;
                                    $step = 12;
                                    continue;
                                }
                                case 2: {
                                    if (System.Linq.Enumerable.from(liveVertices).any(function (v1) {
                                        return f[System.Array.index(v1, f)] <= 0;
                                    })) {
                                        $step = 3;
                                        continue;
                                    } 
                                    $step = 4;
                                    continue;
                                }
                                case 3: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 4: {
                                    key = new Algorithms.OnlineChoiceHashGraph(f, g);
                                    cachedResult = { };
                                    if (cache.tryGetValue(key, cachedResult)) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();

                                    key = null;
                                    result = cachedResult.v;
                                    $step = 12;
                                    continue;
                                }
                                case 6: {
                                    independentSets = System.Linq.Enumerable.from(this._independentSets.Value).where(function (set) {
                                        return set.Count >= 1 && Algorithms.Utility.ListUtility.SubsetEqualSorted(set, liveVertices);
                                    }).toList(System.Collections.Generic.List$1(System.Int32));

                                    $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, liveVertices), System.Collections.Generic.List$1(System.Int32));
                                    $step = 7;
                                    continue;
                                }
                                case 7: {
                                    if ($t1.moveNext()) {
                                        V = $t1.Current;
                                        $step = 8;
                                        continue;
                                    }
                                    $step = 11;
                                    continue;
                                }
                                case 8: {
                                    if (V.Count <= 1) {
                                        $step = 7;
                                        continue;
                                    }

                                    if (System.Linq.Enumerable.from(independentSets).any((function ($me, V) {
                                        return function (ss) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(V, ss);
                                        };
                                    })(this, V))) {
                                        $step = 7;
                                        continue;
                                    }

                                    $t2 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t2.moveNext()) {
                                            v1 = $t2.Current;
                                            f[System.Array.index(v1, f)] = (f[System.Array.index(v1, f)] - 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    maximalIndependentSets = Algorithms.Utility.ListUtility.MaximalElementsSorted$1(System.Linq.Enumerable.from(independentSets).where((function ($me, V) {
                                        return function (set) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(set, V);
                                        };
                                    })(this, V)).toList(System.Collections.Generic.List$1(System.Int32)));

                                    choosable = false;
                                    $t3 = Bridge.getEnumerator(maximalIndependentSets);
                                    try {
                                        while ($t3.moveNext()) {
                                            C = $t3.Current;
                                            $t4 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t4.moveNext()) {
                                                    v2 = $t4.Current;
                                                    g[System.Array.index(v2, g)] = (g[System.Array.index(v2, g)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t4, System.IDisposable)) {
                                                    $t4.System$IDisposable$dispose();
                                                }
                                            }
                                            choosable = this.IsOnlineFChoosable$1(f, g, cache);

                                            $t5 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t5.moveNext()) {
                                                    v3 = $t5.Current;
                                                    g[System.Array.index(v3, g)] = (g[System.Array.index(v3, g)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t5, System.IDisposable)) {
                                                    $t5.System$IDisposable$dispose();
                                                }
                                            }
                                            if (choosable) {
                                                break;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t3, System.IDisposable)) {
                                            $t3.System$IDisposable$dispose();
                                        }
                                    }
                                    $t6 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t6.moveNext()) {
                                            v4 = $t6.Current;
                                            f[System.Array.index(v4, f)] = (f[System.Array.index(v4, f)] + 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t6, System.IDisposable)) {
                                            $t6.System$IDisposable$dispose();
                                        }
                                    }
                                    if (!choosable) {
                                        $step = 9;
                                        continue;
                                    } 
                                    $step = 10;
                                    continue;
                                }
                                case 9: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 10: {
                                    $step = 7;
                                    continue;
                                }
                                case 11: {

                                }
                                case 12: {
                                    if (gClone != null) {
                                        System.Array.copy(gClone, 0, g, 0, g.length);
                                    }

                                    if (key != null) {
                                        cache.set(key, result);
                                    }

                                    return result;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            IsOnlineFGChoosable: function (f, g) {
                Algorithms.Graph.NodesVisited = System.Int64(0);
                Algorithms.Graph.CacheHits = System.Int64(0);

                var cache = new (System.Collections.Generic.Dictionary$2(Algorithms.OnlineChoiceHashGraph,System.Boolean))();
                return this.IsOnlineFGChoosable$1(System.Linq.Enumerable.from(this._vertices).select(function (v) {
                        return f(v);
                    }).toArray(System.Int32), System.Linq.Enumerable.from(this._vertices).select(function (v) {
                        return g(v);
                    }).toArray(System.Int32), cache);
            },
            IsOnlineFGChoosable$1: function (f, g, cache) {
                var $step = 0,
                    $jumpFromFinally, 
                    key, 
                    result, 
                    gClone, 
                    changed, 
                    $t, 
                    v, 
                    need, 
                    liveVertices, 
                    cachedResult, 
                    independentSets, 
                    $t1, 
                    V, 
                    $t2, 
                    v1, 
                    maximalIndependentSets, 
                    choosable, 
                    $t3, 
                    C, 
                    $t4, 
                    v2, 
                    $t5, 
                    v3, 
                    $t6, 
                    v4, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();
                                    key = null;

                                    result = true;
                                    gClone = System.Array.init(g.length, 0, System.Int32);
                                    System.Array.copy(g, 0, gClone, 0, g.length);

                                    while (true) {
                                        changed = false;
                                        $t = Bridge.getEnumerator(this._vertices);
                                        try {
                                            while ($t.moveNext()) {
                                                v = $t.Current;
                                                if (g[System.Array.index(v, g)] <= 0) {
                                                    continue;
                                                }

                                                need = (g[System.Array.index(v, g)] + System.Linq.Enumerable.from(this.Neighbors.getItem(v)).sum(function (w) {
                                                    return g[System.Array.index(w, g)];
                                                })) | 0;
                                                if (f[System.Array.index(v, f)] >= need) {
                                                    g[System.Array.index(v, g)] = 0;
                                                    changed = true;
                                                }
                                            }
                                        } finally {
                                            if (Bridge.is($t, System.IDisposable)) {
                                                $t.System$IDisposable$dispose();
                                            }
                                        }
                                        if (!changed) {
                                            break;
                                        }
                                    }

                                    liveVertices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Int32, g, $asm.$.Algorithms.Graph.f30)).toList(System.Int32);
                                    if (liveVertices.Count <= 0) {
                                        $step = 1;
                                        continue;
                                    } 
                                    $step = 2;
                                    continue;
                                }
                                case 1: {
                                    result = true;
                                    $step = 12;
                                    continue;
                                }
                                case 2: {
                                    if (System.Linq.Enumerable.from(liveVertices).any(function (v1) {
                                        return f[System.Array.index(v1, f)] < g[System.Array.index(v1, g)];
                                    })) {
                                        $step = 3;
                                        continue;
                                    } 
                                    $step = 4;
                                    continue;
                                }
                                case 3: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 4: {
                                    key = new Algorithms.OnlineChoiceHashGraph(f, g);
                                    cachedResult = { };
                                    if (cache.tryGetValue(key, cachedResult)) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();

                                    key = null;
                                    result = cachedResult.v;
                                    $step = 12;
                                    continue;
                                }
                                case 6: {
                                    independentSets = System.Linq.Enumerable.from(this._independentSets.Value).where(function (set) {
                                        return set.Count >= 1 && Algorithms.Utility.ListUtility.SubsetEqualSorted(set, liveVertices);
                                    }).toList(System.Collections.Generic.List$1(System.Int32));

                                    $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, liveVertices), System.Collections.Generic.List$1(System.Int32));
                                    $step = 7;
                                    continue;
                                }
                                case 7: {
                                    if ($t1.moveNext()) {
                                        V = $t1.Current;
                                        $step = 8;
                                        continue;
                                    }
                                    $step = 11;
                                    continue;
                                }
                                case 8: {
                                    if (V.Count <= 1) {
                                        $step = 7;
                                        continue;
                                    }

                                    if (System.Linq.Enumerable.from(independentSets).any((function ($me, V) {
                                        return function (ss) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(V, ss);
                                        };
                                    })(this, V))) {
                                        $step = 7;
                                        continue;
                                    }

                                    $t2 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t2.moveNext()) {
                                            v1 = $t2.Current;
                                            f[System.Array.index(v1, f)] = (f[System.Array.index(v1, f)] - 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    maximalIndependentSets = Algorithms.Utility.ListUtility.MaximalElementsSorted$1(System.Linq.Enumerable.from(independentSets).where((function ($me, V) {
                                        return function (set) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(set, V);
                                        };
                                    })(this, V)).toList(System.Collections.Generic.List$1(System.Int32)));

                                    choosable = false;
                                    $t3 = Bridge.getEnumerator(maximalIndependentSets);
                                    try {
                                        while ($t3.moveNext()) {
                                            C = $t3.Current;
                                            $t4 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t4.moveNext()) {
                                                    v2 = $t4.Current;
                                                    g[System.Array.index(v2, g)] = (g[System.Array.index(v2, g)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t4, System.IDisposable)) {
                                                    $t4.System$IDisposable$dispose();
                                                }
                                            }
                                            choosable = this.IsOnlineFGChoosable$1(f, g, cache);

                                            $t5 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t5.moveNext()) {
                                                    v3 = $t5.Current;
                                                    g[System.Array.index(v3, g)] = (g[System.Array.index(v3, g)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t5, System.IDisposable)) {
                                                    $t5.System$IDisposable$dispose();
                                                }
                                            }
                                            if (choosable) {
                                                break;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t3, System.IDisposable)) {
                                            $t3.System$IDisposable$dispose();
                                        }
                                    }
                                    $t6 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t6.moveNext()) {
                                            v4 = $t6.Current;
                                            f[System.Array.index(v4, f)] = (f[System.Array.index(v4, f)] + 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t6, System.IDisposable)) {
                                            $t6.System$IDisposable$dispose();
                                        }
                                    }
                                    if (!choosable) {
                                        $step = 9;
                                        continue;
                                    } 
                                    $step = 10;
                                    continue;
                                }
                                case 9: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 10: {
                                    $step = 7;
                                    continue;
                                }
                                case 11: {

                                }
                                case 12: {
                                    if (gClone != null) {
                                        System.Array.copy(gClone, 0, g, 0, g.length);
                                    }

                                    if (key != null) {
                                        cache.set(key, result);
                                    }

                                    return result;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            Direction: function (e) {
                if (!this._adjacent.get([e.item1, e.item2])) {
                    return 0;
                }

                return this.Directed.get([e.item2, e.item1]) ? -1 : 1;
            },
            MatchesOutMinusIn: function (outMinusIn) {
                return System.Linq.Enumerable.from(this._vertices).all(Bridge.fn.bind(this, function (v) {
                        return ((this.OutDegree(v) - this.InDegree(v)) | 0) === outMinusIn.getItem(v);
                    }));
            },
            SpanningOutMinusInSubgraphs: function (outMinusIn, edges, spanningEulerianOrientationsCache) {
                Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();

                var graphs = new (System.Collections.Generic.List$1(Algorithms.Graph))();

                if (System.Linq.Enumerable.from(this._vertices).any(Bridge.fn.bind(this, function (v) {
                        return outMinusIn.getItem(v) > this.OutDegree(v) || ((-outMinusIn.getItem(v)) | 0) > this.InDegree(v);
                    }))) {
                    return graphs;
                }

                var key = new Algorithms.OrientationHashGraph(this, outMinusIn);

                if (Algorithms.Graph.MemoizeEulerianSubgraphCounting) {
                    var spanners = { };
                    if (spanningEulerianOrientationsCache.tryGetValue(key, spanners)) {
                        Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();
                        return spanners.v;
                    }
                }

                if (edges.Count <= 0) {
                    if (this.MatchesOutMinusIn(outMinusIn)) {
                        graphs.add(this);
                    }

                    return graphs;
                }

                var e = System.Linq.Enumerable.from(edges).last();

                edges.remove(e);
                var g = this.RemoveEdge$1(e);

                graphs.addRange(g.SpanningOutMinusInSubgraphs(outMinusIn, edges, spanningEulerianOrientationsCache));

                var outMinusInPrime = System.Linq.Enumerable.from(outMinusIn).toList(System.Int32);
                var v1 = e.item1;
                var v2 = e.item2;

                if (this.Direction(e) === 1) {
                    outMinusInPrime.setItem(e.item1, (outMinusInPrime.getItem(e.item1) - 1) | 0);
                    outMinusInPrime.setItem(e.item2, (outMinusInPrime.getItem(e.item2) + 1) | 0);
                } else {
                    outMinusInPrime.setItem(e.item1, (outMinusInPrime.getItem(e.item1) + 1) | 0);
                    outMinusInPrime.setItem(e.item2, (outMinusInPrime.getItem(e.item2) - 1) | 0);

                    v1 = e.item2;
                    v2 = e.item1;
                }

                graphs.addRange(System.Linq.Enumerable.from(g.SpanningOutMinusInSubgraphs(outMinusInPrime, edges, spanningEulerianOrientationsCache)).select(function (graph) {
                        return graph.AddEdge$1(v1, v2, true);
                    }));

                if (Algorithms.Graph.MemoizeEulerianSubgraphCounting) {
                    spanningEulerianOrientationsCache.set(key, graphs);
                }

                edges.add(e);
                return graphs;
            },
            SpanningEulerianSubgraphs: function (edges, spanningEulerianOrientationsCache) {
                return this.SpanningOutMinusInSubgraphs(System.Linq.Enumerable.from(System.Array.init(this.N, 0, System.Int32)).toList(System.Int32), edges, spanningEulerianOrientationsCache);
            },
            CountSpanningEulerianSubgraphs: function (even, odd) {
                var $t;
                Algorithms.Graph.CacheHits = System.Int64(0);
                Algorithms.Graph.NodesVisited = System.Int64(0);
                var spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                var edges = this.GetEdgeTuples();

                even.v = 0;
                odd.v = 0;
                $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edges, spanningEulerianOrientationsCache));
                try {
                    while ($t.moveNext()) {
                        var g = $t.Current;
                        if (g.Size % 2 === 0) {
                            even.v = (even.v + 1) | 0;
                        } else {
                            odd.v = (odd.v + 1) | 0;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            CountSpanningEulerianSubgraphsUsingVertices: function (vertices, even, odd) {
                var $step = 0,
                    $jumpFromFinally, 
                    spanningEulerianOrientationsCache, 
                    edges, 
                    $t, 
                    g, 
                    $t1, 
                    v, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.CacheHits = System.Int64(0);
                                    Algorithms.Graph.NodesVisited = System.Int64(0);

                                    if (vertices == null) {
                                        vertices = new (System.Collections.Generic.List$1(System.Int32))();
                                    }

                                    spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                                    edges = this.GetEdgeTuples();

                                    even.v = 0;
                                    odd.v = 0;
                                    $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edges, spanningEulerianOrientationsCache));
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ($t.moveNext()) {
                                        g = $t.Current;
                                        $step = 2;
                                        continue;
                                    }
                                    $step = 9;
                                    continue;
                                }
                                case 2: {
                                    $t1 = Bridge.getEnumerator(vertices);
                                    $step = 3;
                                    continue;
                                }
                                case 3: {
                                    if ($t1.moveNext()) {
                                        v = $t1.Current;
                                        $step = 4;
                                        continue;
                                    }
                                    $step = 7;
                                    continue;
                                }
                                case 4: {
                                    if (g.Degree(v) <= 0) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    $step = 8;
                                    continue;
                                }
                                case 6: {
                                    $step = 3;
                                    continue;
                                }
                                case 7: {
                                    if (g.Size % 2 === 0) {
                                        even.v = (even.v + 1) | 0;
                                    } else {
                                        odd.v = (odd.v + 1) | 0;
                                    }
                                }
                                case 8: {
                                    ;
                                    $step = 1;
                                    continue;
                                }
                                case 9: {
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            CountSpanningEulerianSubgraphsUsingEdges: function (edges, even, odd) {
                var $step = 0,
                    $jumpFromFinally, 
                    spanningEulerianOrientationsCache, 
                    edgeTuples, 
                    $t, 
                    g, 
                    $t1, 
                    e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.CacheHits = System.Int64(0);
                                    Algorithms.Graph.NodesVisited = System.Int64(0);

                                    if (edges == null) {
                                        edges = new (System.Collections.Generic.List$1(System.Object))();
                                    }

                                    spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                                    edgeTuples = this.GetEdgeTuples();

                                    even.v = 0;
                                    odd.v = 0;
                                    $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edgeTuples, spanningEulerianOrientationsCache));
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ($t.moveNext()) {
                                        g = $t.Current;
                                        $step = 2;
                                        continue;
                                    }
                                    $step = 9;
                                    continue;
                                }
                                case 2: {
                                    $t1 = Bridge.getEnumerator(edges);
                                    $step = 3;
                                    continue;
                                }
                                case 3: {
                                    if ($t1.moveNext()) {
                                        e = $t1.Current;
                                        $step = 4;
                                        continue;
                                    }
                                    $step = 7;
                                    continue;
                                }
                                case 4: {
                                    if (!g._adjacent.get([e.item1, e.item2])) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    $step = 8;
                                    continue;
                                }
                                case 6: {
                                    $step = 3;
                                    continue;
                                }
                                case 7: {
                                    if (g.Size % 2 === 0) {
                                        even.v = (even.v + 1) | 0;
                                    } else {
                                        odd.v = (odd.v + 1) | 0;
                                    }
                                }
                                case 8: {
                                    ;
                                    $step = 1;
                                    continue;
                                }
                                case 9: {
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            EnumerateOrientations$1: function (requiredIndegree) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (requiredIndegree) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        gain,
                        $t,
                        inNeighborList,
                        adjacent,
                        directed,
                        i,
                        v,
                        $t1,
                        w,
                        outNeighbors,
                        $t2,
                        w1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        gain = System.Array.init(this.N, 0, System.Int32);

                                            $t = Bridge.getEnumerator(this.EnumerateOrientationsFor(0, requiredIndegree, gain), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                inNeighborList = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                                            directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                                            for (i = 0; i < inNeighborList.Count; i = (i + 1) | 0) {
                                                v = (((inNeighborList.Count - 1) | 0) - i) | 0;

                                                $t1 = Bridge.getEnumerator(inNeighborList.getItem(i));
                                                try {
                                                    while ($t1.moveNext()) {
                                                        w = $t1.Current;
                                                        adjacent.set([v, w], true);
                                                        adjacent.set([w, v], true);

                                                        directed.set([w, v], true);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t1, System.IDisposable)) {
                                                        $t1.System$IDisposable$dispose();
                                                    }
                                                }
                                                outNeighbors = Algorithms.Utility.ListUtility.Difference(System.Int32, this._laterNeighbors.Value.getItem(v), inNeighborList.getItem(i));

                                                $t2 = Bridge.getEnumerator(outNeighbors);
                                                try {
                                                    while ($t2.moveNext()) {
                                                        w1 = $t2.Current;
                                                        adjacent.set([v, w1], true);
                                                        adjacent.set([w1, v], true);

                                                        directed.set([v, w1], true);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t2, System.IDisposable)) {
                                                        $t2.System$IDisposable$dispose();
                                                    }
                                                }}

                                            $enumerator.current = new Algorithms.Graph.$ctor1(this.GetEdgeWeights$1(adjacent, directed));
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            EnumerateOrientations: function (fast) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (fast) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        undirectedWeights,
                        edgeIndices,
                        undirected,
                        $t,
                        list,
                        weights,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (fast === void 0) { fast = false; }
                                            undirectedWeights = System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f31).toList(System.Int32);
                                            edgeIndices = System.Linq.Enumerable.from(undirectedWeights).select($asm.$.Algorithms.Graph.f32).where($asm.$.Algorithms.Graph.f33).toList(System.Int32);

                                            undirected = new Algorithms.Graph.$ctor1(undirectedWeights);

                                            $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, edgeIndices), System.Collections.Generic.List$1(System.Int32));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                list = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        weights = System.Linq.Enumerable.from(undirectedWeights).select((function ($me, list) {
                                                    return function (w, i) {
                                                        return list.contains(i) ? ((-w) | 0) : w;
                                                    };
                                                })(this, list)).toList(System.Int32);

                                            $enumerator.current = new Algorithms.Graph.$ctor1(weights);
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            EnumerateOrientationsFor: function (v, requiredIndegree, gain) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (v, requiredIndegree, gain) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        $t,
                        ins,
                        outs,
                        $t1,
                        x,
                        $t2,
                        o,
                        $t3,
                        x1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (v >= ((this.N - 1) | 0)) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 6;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        if (gain[System.Array.index(v, gain)] < requiredIndegree(v)) {
                                                $step = 2;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 2: {
                                        return false;
                                    }
                                    case 3: {
                                        $enumerator.current = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $step = 4;
                                            return true;
                                    }
                                    case 4: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $step = 14;
                                        continue;
                                    }
                                    case 6: {
                                        $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, this._laterNeighbors.Value.getItem(v)), System.Collections.Generic.List$1(System.Int32));
                                            $step = 7;
                                            continue;
                                    }
                                    case 7: {
                                        if ($t.moveNext()) {
                                                ins = $t.Current;
                                                $step = 8;
                                                continue;
                                            }
                                        $step = 13;
                                        continue;
                                    }
                                    case 8: {
                                        if (ins.Count < ((requiredIndegree(v) - gain[System.Array.index(v, gain)]) | 0)) {
                                                $step = 7;
                                                continue;
                                            }

                                            outs = Algorithms.Utility.ListUtility.Difference(System.Int32, this._laterNeighbors.Value.getItem(v), ins);

                                            $t1 = Bridge.getEnumerator(outs);
                                            try {
                                                while ($t1.moveNext()) {
                                                    x = $t1.Current;
                                                    gain[System.Array.index(x, gain)] = (gain[System.Array.index(x, gain)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t1, System.IDisposable)) {
                                                    $t1.System$IDisposable$dispose();
                                                }
                                            }
                                            $t2 = Bridge.getEnumerator(this.EnumerateOrientationsFor(((v + 1) | 0), requiredIndegree, gain), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                            $step = 9;
                                            continue;
                                    }
                                    case 9: {
                                        if ($t2.moveNext()) {
                                                o = $t2.Current;
                                                $step = 10;
                                                continue;
                                            }
                                        $step = 12;
                                        continue;
                                    }
                                    case 10: {
                                        o.add(ins);

                                            $enumerator.current = o;
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 9;
                                        continue;
                                    }
                                    case 12: {
                                        $t3 = Bridge.getEnumerator(outs);
                                            try {
                                                while ($t3.moveNext()) {
                                                    x1 = $t3.Current;
                                                    gain[System.Array.index(x1, gain)] = (gain[System.Array.index(x1, gain)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t3, System.IDisposable)) {
                                                    $t3.System$IDisposable$dispose();
                                                }
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 13: {
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            GenerateRandomOrientation: function () {
                var $t;
                var undirectedWeights = System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f31).toList(System.Int32);
                var edgeIndices = System.Linq.Enumerable.from(undirectedWeights).select($asm.$.Algorithms.Graph.f32).where($asm.$.Algorithms.Graph.f33).toList(System.Int32);

                var list = new (System.Collections.Generic.List$1(System.Int32))(((Bridge.Int.div(this.E, 2)) | 0));
                $t = Bridge.getEnumerator(edgeIndices);
                try {
                    while ($t.moveNext()) {
                        var i = $t.Current;
                        if (Algorithms.Graph.RNG.next$1(2) === 0) {
                            list.add(i);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var weights = System.Linq.Enumerable.from(undirectedWeights).select(function (w, i1) {
                        return list.contains(i1) ? ((-w) | 0) : w;
                    }).toList(System.Int32);

                return new Algorithms.Graph.$ctor1(weights);
            },
            EnumerateAcyclicOrientations: function () {
                return this.EnumerateAcyclicOrientations$1(0, new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))());
            },
            EnumerateAcyclicOrientations$1: function (i, outNeighbors) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (i, outNeighbors) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        neighbors,
                        clone,
                        $t,
                        g,
                        sortedNeighbors,
                        $t1,
                        d,
                        clone1,
                        $t2,
                        v,
                        $t3,
                        g1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (i >= this.N) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        $enumerator.current = this.FromOutNeighborLists(outNeighbors);
                                            $step = 2;
                                            return true;
                                    }
                                    case 2: {
                                        $step = 18;
                                        continue;
                                    }
                                    case 3: {
                                        neighbors = this.NeighborsInSubgraph(i, System.Linq.Enumerable.range(0, i).toList(System.Int32));
                                            if (neighbors.Count <= 0) {
                                                $step = 4;
                                                continue;
                                            } else  {
                                                $step = 9;
                                                continue;
                                            }
                                    }
                                    case 4: {
                                        clone = this.CloneOutNeighbors(outNeighbors);

                                            clone.set(i, new (System.Collections.Generic.List$1(System.Int32))());
                                            $t = Bridge.getEnumerator(this.EnumerateAcyclicOrientations$1(((i + 1) | 0), clone), Algorithms.Graph);
                                            $step = 5;
                                            continue;
                                    }
                                    case 5: {
                                        if ($t.moveNext()) {
                                                g = $t.Current;
                                                $step = 6;
                                                continue;
                                            }
                                        $step = 8;
                                        continue;
                                    }
                                    case 6: {
                                        $enumerator.current = g;
                                            $step = 7;
                                            return true;
                                    }
                                    case 7: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 17;
                                        continue;
                                    }
                                    case 9: {
                                        sortedNeighbors = this.TopologicalSort(i, neighbors, outNeighbors);
                                            $t1 = Bridge.getEnumerator(this.EnumerateLegalDirectionAssignments(i, sortedNeighbors, outNeighbors), System.Int64);
                                            $step = 10;
                                            continue;
                                    }
                                    case 10: {
                                        if ($t1.moveNext()) {
                                                d = $t1.Current;
                                                $step = 11;
                                                continue;
                                            }
                                        $step = 16;
                                        continue;
                                    }
                                    case 11: {
                                        clone1 = this.CloneOutNeighbors(outNeighbors);

                                            clone1.set(i, System.Linq.Enumerable.from(Algorithms.Int64Usage.EnumerateBits(d)).select(function (b) {
                                                    return sortedNeighbors.getItem(((((sortedNeighbors.Count - 1) | 0) - b) | 0));
                                                }).toList(System.Int32));
                                            $t2 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.Difference(System.Int32, neighbors, clone1.get(i)));
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    clone1.get(v).add(i);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            $t3 = Bridge.getEnumerator(this.EnumerateAcyclicOrientations$1(((i + 1) | 0), clone1), Algorithms.Graph);
                                            $step = 12;
                                            continue;
                                    }
                                    case 12: {
                                        if ($t3.moveNext()) {
                                                g1 = $t3.Current;
                                                $step = 13;
                                                continue;
                                            }
                                        $step = 15;
                                        continue;
                                    }
                                    case 13: {
                                        $enumerator.current = g1;
                                            $step = 14;
                                            return true;
                                    }
                                    case 14: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 15: {
                                        $step = 10;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 17;
                                        continue;
                                    }
                                    case 17: {
                                        $step = 18;
                                        continue;
                                    }
                                    case 18: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            CloneOutNeighbors: function (outNeighbors) {
                var $t;
                var clone = new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))();

                $t = Bridge.getEnumerator(outNeighbors);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        clone.set(kvp.key, System.Linq.Enumerable.from(kvp.value).toList(System.Int32));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return clone;
            },
            TopologicalSort: function (i, vertices, outNeighbors) {
                var $t, $t1, $t2;
                var inNeighborCount = System.Array.init(i, 0, System.Int32);
                $t = Bridge.getEnumerator(outNeighbors);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        if (!vertices.contains(kvp.key)) {
                            continue;
                        }

                        $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(kvp.value).intersect(vertices));
                        try {
                            while ($t1.moveNext()) {
                                var v = $t1.Current;
                                inNeighborCount[System.Array.index(v, inNeighborCount)] = (inNeighborCount[System.Array.index(v, inNeighborCount)] + 1) | 0;
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var sorted = new (System.Collections.Generic.List$1(System.Int32))(i);
                var sources = System.Linq.Enumerable.from(vertices).where(function (v1) {
                        return inNeighborCount[System.Array.index(v1, inNeighborCount)] === 0;
                    }).toList(System.Int32);

                while (sources.Count > 0) {
                    var source = sources.getItem(((sources.Count - 1) | 0));
                    sources.removeAt(((sources.Count - 1) | 0));

                    sorted.add(source);
                    $t2 = Bridge.getEnumerator(System.Linq.Enumerable.from(outNeighbors.get(source)).intersect(vertices));
                    try {
                        while ($t2.moveNext()) {
                            var v1 = $t2.Current;
                            inNeighborCount[System.Array.index(v1, inNeighborCount)] = (inNeighborCount[System.Array.index(v1, inNeighborCount)] - 1) | 0;
                            if (inNeighborCount[System.Array.index(v1, inNeighborCount)] === 0) {
                                sources.add(v1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }}

                return sorted;
            },
            EnumerateLegalDirectionAssignments: function (i, sortedNeighbors, outNeighbors) {
                return new (Bridge.GeneratorEnumerable$1(System.Int64))(Bridge.fn.bind(this, function (i, sortedNeighbors, outNeighbors) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        d,
                        ancestorLists,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int64))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        d = System.Int64(0);

                                            ancestorLists = this.GetAncestorLists(i, outNeighbors);
                                            
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( true ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                    }
                                    case 2: {
                                        $enumerator.current = d;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        if (Algorithms.Int64Usage.AllSet(d, System.Int64(sortedNeighbors.Count))) {
                                                $step = 4;
                                                continue;
                                            }

                                            d = this.Closure(d.add(System.Int64(1)), sortedNeighbors, ancestorLists);

                                            $step = 1;
                                            continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            Closure: function (d, sortedNeighbors, ancestorLists) {
                var $t, $t1;
                var done = false;

                while (!done) {
                    done = true;

                    $t = Bridge.getEnumerator(sortedNeighbors);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            var vBit = (((sortedNeighbors.Count - 1) | 0) - sortedNeighbors.indexOf(v)) | 0;
                            $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(ancestorLists.get(v)).intersect(sortedNeighbors));
                            try {
                                while ($t1.moveNext()) {
                                    var w = $t1.Current;
                                    var wBit = (((sortedNeighbors.Count - 1) | 0) - sortedNeighbors.indexOf(w)) | 0;
                                    if (Algorithms.Int64Usage.IsBitSet(d, System.Int64(wBit)) && !Algorithms.Int64Usage.IsBitSet(d, System.Int64(vBit))) {
                                        d = Algorithms.Int64Usage.SetBit(d, System.Int64(vBit));
                                        done = false;
                                    }
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return d;
            },
            GetAncestorLists: function (i, outNeighbors) {
                var $t;
                var ancestorLists = new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))();

                for (var v = 0; v < i; v = (v + 1) | 0) {
                    ancestorLists.set(v, function (_o16) {
                            _o16.add(v);
                            return _o16;
                        }(new (System.Collections.Generic.List$1(System.Int32))()));
                }

                var done = false;
                while (!done) {
                    done = true;

                    for (var v1 = 0; v1 < i; v1 = (v1 + 1) | 0) {
                        $t = Bridge.getEnumerator(outNeighbors.get(v1));
                        try {
                            while ($t.moveNext()) {
                                var w = $t.Current;
                                if (w >= i) {
                                    continue;
                                }

                                var c = ancestorLists.get(w).Count;
                                ancestorLists.set(w, Algorithms.Utility.ListUtility.Union$1(System.Int32, ancestorLists.get(w), ancestorLists.get(v1)));

                                if (ancestorLists.get(w).Count > c) {
                                    done = false;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                }

                return ancestorLists;
            },
            FindFactors: function () {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(i);

                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (!this._adjacent.get([i, j])) {
                            equivalenceRelation.Relate(i, j);
                        }
                    }
                }

                return equivalenceRelation;
            },
            FindComponents: function () {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(i);

                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            equivalenceRelation.Relate(i, j);
                        }
                    }
                }

                return equivalenceRelation;
            },
            FindComponents$1: function (v) {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(v.getItem(i));

                    for (var j = (i + 1) | 0; j < v.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([v.getItem(i), v.getItem(j)])) {
                            equivalenceRelation.Relate(v.getItem(i), v.getItem(j));
                        }
                    }
                }

                return equivalenceRelation;
            },
            ComputeDiameter: function () {
                var $t, $t1;
                var distance = { };
                var next = { };
                this.FloydWarshall(distance, next);
                var diameter = 0;
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        $t1 = Bridge.getEnumerator(this.Vertices);
                        try {
                            while ($t1.moveNext()) {
                                var w = $t1.Current;
                                if (distance.v.get([v, w]) > diameter) {
                                    diameter = distance.v.get([v, w]);
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return diameter;
            },
            FloydWarshall: function (distance, next) {
                distance.v = System.Array.create(0, null, System.Int32, this.N, this.N);
                next.v = System.Array.create(0, null, System.Int32, this.N, this.N);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        distance.v.set([i, j], 715827882);
                    }
                }

                for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 < this.N; j1 = (j1 + 1) | 0) {
                        if (i1 === j1) {
                            distance.v.set([i1, j1], 0);
                        } else {
                            if (this._adjacent.get([i1, j1])) {
                                /* if (Directed[i, j])
                                   distance[i, j] = 1;

                                if (Directed[j, i])
                                   distance[j, i] = 1;*/

                                distance.v.set([i1, j1], 1);
                                distance.v.set([j1, i1], 1);
                            }
                        }
                    }
                }

                for (var i2 = 0; i2 < this.N; i2 = (i2 + 1) | 0) {
                    for (var j2 = 0; j2 < this.N; j2 = (j2 + 1) | 0) {
                        next.v.set([i2, j2], -1);
                    }
                }

                for (var k = 0; k < this.N; k = (k + 1) | 0) {
                    for (var i3 = 0; i3 < this.N; i3 = (i3 + 1) | 0) {
                        for (var j3 = 0; j3 < this.N; j3 = (j3 + 1) | 0) {
                            if (((distance.v.get([i3, k]) + distance.v.get([k, j3])) | 0) < distance.v.get([i3, j3])) {
                                distance.v.set([i3, j3], (distance.v.get([i3, k]) + distance.v.get([k, j3])) | 0);
                                next.v.set([i3, j3], k);
                            }
                        }
                    }
                }
            },
            FloydWarshallShortestPath: function (v, w, distance, next) {
                if (distance.get([v, w]) === 2147483647) {
                    return null;
                }

                if (next.get([v, w]) === -1) {
                    return System.Array.init([v, w], System.Int32);
                }

                return System.Linq.Enumerable.from(this.FloydWarshallShortestPath(v, next.get([v, w]), distance, next)).union(System.Linq.Enumerable.from(this.FloydWarshallShortestPath(next.get([v, w]), w, distance, next)).skip(1));
            }
        }
    });

    Bridge.define("$AnonymousType$2", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (range, index) {
                this.range = range;
                this.index = index;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$2)) {
                    return false;
                }
                return Bridge.equals(this.range, o.range) && Bridge.equals(this.index, o.index);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196187, this.range, this.index]);
                return h;
            },
            toJSON: function () {
                return {
                    range : this.range,
                    index : this.index
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"index","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_index","t":8,"rt":System.Int32,"fg":"index"},"fn":"index"},{"a":2,"n":"range","t":16,"rt":System.Collections.Generic.IEnumerable$1(System.Int32),"g":{"a":2,"n":"get_range","t":8,"rt":System.Collections.Generic.IEnumerable$1(System.Int32),"fg":"range"},"fn":"range"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.Graph", $asm.$);

    Bridge.apply($asm.$.Algorithms.Graph, {
        f1: function (_o11) {
            _o11.add("cadetblue");
            _o11.add("brown");
            _o11.add("dodgerblue");
            _o11.add("turquoise");
            _o11.add("orchid");
            _o11.add("blue");
            _o11.add("red");
            _o11.add("green");
            _o11.add("yellow");
            _o11.add("cyan");
            _o11.add("limegreen");
            _o11.add("pink");
            _o11.add("orange");
            _o11.add("goldenrod");
            _o11.add("aquamarine");
            _o11.add("black");
            return _o11;
        },
        f2: function (_o12) {
            _o12.add("blue");
            _o12.add("red");
            _o12.add("green");
            _o12.add("Orchid");
            _o12.add("yellow");
            _o12.add("cyan");
            _o12.add("Turquoise");
            _o12.add("CadetBlue");
            _o12.add("LimeGreen");
            _o12.add("brown");
            _o12.add("pink");
            _o12.add("orange");
            _o12.add("Cerulean");
            _o12.add("Goldenrod");
            _o12.add("Aquamarine");
            _o12.add("black");
            return _o12;
        },
        f3: function () {
            var e = 0;

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i, j])) {
                        e = (e + 1) | 0;
                    }
                }
            }

            return e;
        },
        f4: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j])) {
                        neighbors.getItem(i1).add(j);
                    }
                }
            }

            return neighbors;
        },
        f5: function () {
            var nn = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                nn.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (i1 !== j && !this._adjacent.get([i1, j])) {
                        nn.getItem(i1).add(j);
                    }
                }
            }

            return nn;
        },
        f6: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j]) && this.Directed.get([i1, j])) {
                        neighbors.getItem(i1).add(j);
                    }
                }
            }

            return neighbors;
        },
        f7: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j]) && this.Directed.get([i1, j])) {
                        neighbors.getItem(j).add(i1);
                    }
                }
            }

            return neighbors;
        },
        f8: function () {
            var later = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(this.Neighbors.Count);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                later.add(System.Linq.Enumerable.from(this.Neighbors.getItem(i)).where(function (n) {
                        return n > i;
                    }).toList(System.Int32));
            }

            return later;
        },
        f9: function () {
            return System.Linq.Enumerable.from(this.IndependentSetsInSubgraph(0)).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f10: function (set) {
            return set.Count === 2;
        },
        f11: function () {
            return System.Linq.Enumerable.from(this._independentSets.Value).where($asm.$.Algorithms.Graph.f10).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f12: function (set) {
            return set.Count === 3;
        },
        f13: function () {
            return System.Linq.Enumerable.from(this._independentSets.Value).where($asm.$.Algorithms.Graph.f12).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f14: function () {
            return Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, this._vertices);
        },
        f15: function () {
            return Algorithms.Utility.ListUtility.MaximalElements(System.Int32, this._independentSets.Value);
        },
        f16: function (x) {
            return x.toString();
        },
        f17: function (_, __, ___, ____) {
            return true;
        },
        f18: function (t) {
            return t;
        },
        f19: function (r, i) {
            return new $asm.$AnonymousType$2(r, i);
        },
        f20: function (i, j) {
            return { item1: i, item2: j };
        },
        f21: function (vertices) {
            return this.IsProperFactor(vertices);
        },
        f22: function (_o13) {
            _o13.add(this.Clone());
            return _o13;
        },
        f23: function (n) {
            return n.Count === this.Neighbors.getItem(0).Count;
        },
        f24: function (_o14) {
            _o14.add(new (System.Collections.Generic.List$1(System.Int32))());
            return _o14;
        },
        f25: function (c) {
            return c.ne(System.Int64(0));
        },
        f26: function (v) {
            return this.Degree(v);
        },
        f27: function (v, i) {
        return v > 0 ? i : -1;
    },
        f28: function (i) {
        return i >= 0;
    },
        f29: function (v1, i) {
        return v1 > 0 ? i : -1;
    },
        f30: function (v1) {
        return v1 > 0;
    },
        f31: function (w) {
            return Math.abs(w);
        },
        f32: function (w, i) {
            return w !== 0 ? i : -1;
        },
        f33: function (x) {
            return x > 0;
        }
    });

    Bridge.define("Algorithms.Graphs", {
        statics: {
            props: {
                Diamond: {
                    get: function () {
                        return Algorithms.Graph.op_Multiply(Algorithms.Graphs.E(2), Algorithms.Graphs.K(2));
                    }
                },
                Bull: {
                    get: function () {
                        return Algorithms.Graphs.K(3).AttachNewVertex$1([1]).AttachNewVertex$1([2]);
                    }
                },
                Kite: {
                    get: function () {
                        return Algorithms.Graphs.Diamond.AttachNewVertex$1([1]);
                    }
                },
                Dart: {
                    get: function () {
                        return Algorithms.Graphs.Diamond.AttachNewVertex$1([2]);
                    }
                },
                Chair: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AttachNewVertex$1([2]);
                    }
                },
                Empty: {
                    get: function () {
                        return new Algorithms.Graph.ctor(System.Array.create(false, null, System.Boolean, 0, 0));
                    }
                },
                Paw: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AddEdge(0, 2);
                    }
                },
                H: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AttachNewVertex$1([1]).AttachNewVertex$1([2]);
                    }
                }
            },
            methods: {
                E: function (n) {
                    return new Algorithms.Graph.ctor(System.Array.create(false, null, System.Boolean, n, n));
                },
                K: function (n) {
                    return Algorithms.Graphs.E(n).Complement();
                },
                P: function (n) {
                    var G = Algorithms.Graphs.E(n);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        G = G.AddEdge(i, ((i + 1) | 0));
                    }

                    return G;
                },
                Star: function (n) {
                    var G = Algorithms.Graphs.E(n);
                    for (var i = 1; i < n; i = (i + 1) | 0) {
                        G = G.AddEdge(0, i);
                    }

                    return G;
                },
                C: function (n) {
                    return Algorithms.Graphs.P(n).AddEdge(((n - 1) | 0), 0);
                }
            }
        }
    });

    Bridge.define("Algorithms.HashGraph", {
        fields: {
            _values: null,
            _outMinusIn: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (g, outMinusIn) {
                this.$initialize();                var $t;

                this._values = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(g.N, (((g.N - 1) | 0))), 2)) | 0), 0, System.Byte);
                this._outMinusIn = outMinusIn;

                var k = 0;
                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        var value = (g.getItem(i, j) ? 1 : 0) & 255;
                        this._values[System.Array.index(k, this._values)] = value;

                        if (g.getItem(i, j)) {
                            this._hashCode = (this._hashCode + (1 << (k % 32))) | 0;
                        }

                        k = (k + 1) | 0;
                    }
                }

                $t = Bridge.getEnumerator(outMinusIn);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.HashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._outMinusIn).sequenceEqual(other._outMinusIn) && System.Linq.Enumerable.from(this._values).sequenceEqual(other._values);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.HereditaryClassEnumeration", {
        statics: {
            fields: {
                _sizeComparer: null
            },
            ctors: {
                init: function () {
                    this._sizeComparer = new Algorithms.HereditaryClassEnumeration.SizeComparer();
                }
            },
            methods: {
                EnumerateClass: function (excluded) {
                    if (excluded === void 0) { excluded = []; }
                    return Algorithms.HereditaryClassEnumeration.EnumerateClass$1(System.Linq.Enumerable.from(excluded).toList(Algorithms.Graph));
                },
                EnumerateClass$1: function (excluded, maxVertices) {
                    return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (excluded, maxVertices) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            lastLevel,
                            currentLevel,
                            $t,
                            G,
                            neighborSets,
                            $t1,
                            neighborSet,
                            H,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (maxVertices === void 0) { maxVertices = 2147483647; }
                                                excluded.sort($asm.$.Algorithms.HereditaryClassEnumeration.f1);

                                                if (excluded.Count > 0 && excluded.getItem(0).N <= 1) {
                                                    $step = 1;
                                                    continue;
                                                } 
                                                $step = 2;
                                                continue;
                                        }
                                        case 1: {
                                            return false;
                                        }
                                        case 2: {
                                            $enumerator.current = new Algorithms.Graph.$ctor1(new (System.Collections.Generic.List$1(System.Int32))());
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            lastLevel = $asm.$.Algorithms.HereditaryClassEnumeration.f2(new (System.Collections.Generic.List$1(Algorithms.Graph))());

                                                
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            if ( lastLevel.Count > 0 ) {
                                                    $step = 5;
                                                    continue;
                                                } 
                                                $step = 15;
                                                continue;
                                        }
                                        case 5: {
                                            currentLevel = new (System.Collections.Generic.List$1(Algorithms.Graph))();

                                                $t = Bridge.getEnumerator(lastLevel);
                                                $step = 6;
                                                continue;
                                        }
                                        case 6: {
                                            if ($t.moveNext()) {
                                                    G = $t.Current;
                                                    $step = 7;
                                                    continue;
                                                }
                                            $step = 12;
                                            continue;
                                        }
                                        case 7: {
                                            if (G.IsComplete()) {
                                                    neighborSets = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, System.Linq.Enumerable.range(0, G.N).toList(System.Int32))).distinct(Algorithms.HereditaryClassEnumeration._sizeComparer).toList(System.Collections.Generic.List$1(System.Int32));
                                                } else {
                                                    neighborSets = Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, System.Linq.Enumerable.range(0, G.N).toList(System.Int32));
                                                }

                                                $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(neighborSets).where($asm.$.Algorithms.HereditaryClassEnumeration.f3));
                                                $step = 8;
                                                continue;
                                        }
                                        case 8: {
                                            if ($t1.moveNext()) {
                                                    neighborSet = $t1.Current;
                                                    $step = 9;
                                                    continue;
                                                }
                                            $step = 11;
                                            continue;
                                        }
                                        case 9: {
                                            H = { v : G.AttachNewVertex(neighborSet) };

                                                if (System.Linq.Enumerable.from(currentLevel).any((function ($me, H) {
                                                        return function (W) {
                                                            return Algorithms.Graph.Isomorphic(H.v, W);
                                                        };
                                                    })(this, H))) {
                                                    $step = 8;
                                                    continue;
                                                }
                                                if (System.Linq.Enumerable.from(excluded).any((function ($me, H) {
                                                        return function (W) {
                                                            return H.v.ContainsInduced(W);
                                                        };
                                                    })(this, H))) {
                                                    $step = 8;
                                                    continue;
                                                }

                                                currentLevel.add(H.v);
                                                $enumerator.current = H.v;
                                                $step = 10;
                                                return true;
                                        }
                                        case 10: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 11: {
                                            $step = 6;
                                            continue;
                                        }
                                        case 12: {
                                            if (currentLevel.Count > 0 && currentLevel.getItem(0).N >= maxVertices) {
                                                    $step = 13;
                                                    continue;
                                                } 
                                                $step = 14;
                                                continue;
                                        }
                                        case 13: {
                                            return false;
                                        }
                                        case 14: {
                                            lastLevel = currentLevel;

                                                $step = 4;
                                                continue;
                                        }
                                        case 15: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("Algorithms.HereditaryClassEnumeration", $asm.$);

    Bridge.apply($asm.$.Algorithms.HereditaryClassEnumeration, {
        f1: function (g1, g2) {
            return Bridge.compare(g1.N, g2.N);
        },
        f2: function (_o17) {
            _o17.add(new Algorithms.Graph.$ctor1(new (System.Collections.Generic.List$1(System.Int32))()));
            return _o17;
        },
        f3: function (l) {
            return l.Count > 0;
        }
    });

    Bridge.define("Algorithms.HereditaryClassEnumeration.SizeComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(System.Int32))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return x.Count === y.Count;
            },
            getHashCode2: function (obj) {
                return Bridge.getHashCode(obj.Count);
            }
        }
    });

    Bridge.define("Algorithms.Hypergraph$1", function (T) { return {
        fields: {
            _listComparer: null
        },
        props: {
            E: null
        },
        ctors: {
            init: function () {
                this._listComparer = new (Algorithms.Hypergraph$1.SortedListComparer(T))();
            },
            ctor: function (edges) {
                if (edges === void 0) { edges = null; }

                this.$initialize();                var $t;

                if (edges != null) {
                    $t = Bridge.getEnumerator(edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            e.sort();
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }this.E = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(T))).$ctor2(edges, this._listComparer);
                } else {
                    this.E = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(T))).$ctor3(this._listComparer);
                }
        }
    },
    methods: {
        Min: function () {
            var $t;
            var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

            $t = Bridge.getEnumerator(this.E);
            try {
                while ($t.moveNext()) {
                    var set = $t.Current;
                    var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                        return function (head) {
                            return Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, set, head);
                        };
                    })(this, set), $asm.$.Algorithms.Hypergraph$1.f1);
                    if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                            return function (head) {
                                return !Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, head, set);
                            };
                        })(this, set))) {
                        chainHeads.add(set);
                    }
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            return new (Algorithms.Hypergraph$1(T))(chainHeads);
        },
        Tr: function () {
            var $t;
            var H = new (Algorithms.Hypergraph$1(T))(function (_o18) {
                    _o18.add(new (System.Collections.Generic.List$1(T))());
                    return _o18;
                }(new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))()));

            $t = Bridge.getEnumerator(this.E);
            try {
                while ($t.moveNext()) {
                    var e = $t.Current;
                    H = H.Product(this.EdgeHypergraph(e)).Min();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            return H;
        },
        EdgeHypergraph: function (e) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(e).select(function (v) {
                    return Algorithms.GenericExtensions.EnList(T, v);
                }).toList(System.Collections.Generic.List$1(T)));
        },
        Union: function (other) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(this.E).union(other.E).toList(System.Collections.Generic.List$1(T)));
        },
        Product: function (other) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(this.E).selectMany(function (e_i) {
                    return System.Linq.Enumerable.from(other.E).select(function (e_j) {
                            return Algorithms.Utility.ListUtility.Union$1(T, e_i, e_j);
                        }).toList(System.Collections.Generic.List$1(T));
                }).toList(System.Collections.Generic.List$1(T)));
        }
    }
    }; });

    Bridge.ns("Algorithms.Hypergraph$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Hypergraph$1, {
        f1: function (x) { }
    });

    Bridge.define("Algorithms.Hypergraph$1.SortedListComparer", function (T) { return {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(T))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$" + Bridge.getTypeAlias(T) + "$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$" + Bridge.getTypeAlias(T) + "$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (list) {
                var $t;
                var hash = 19;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 31) | 0) + Bridge.getHashCode(x)) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    }; });

    Bridge.define("Algorithms.IndependenceRatio.MinorFinder", {
        statics: {
            methods: {
                FindWithJ: function (g, J) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Object)))(Bridge.fn.bind(this, function (g, J) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            triple,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Object)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (J.Count !== 3) {
                                                    $step = 1;
                                                    continue;
                                                } 
                                                $step = 2;
                                                continue;
                                        }
                                        case 1: {
                                            return false;
                                        }
                                        case 2: {
                                            $t = Bridge.getEnumerator(Algorithms.IndependenceRatio.MinorFinder.EnumerateConnectedThreePartPartitions(g, J), System.Object);
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    triple = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item3, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item1, triple.item2) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, triple.item2), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item1, triple.item3) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, triple.item3), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item2, triple.item3) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, triple.item2), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                $enumerator.current = (function ($me, triple) {
                                                        return function (_o19) {
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item1).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, J)) });
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item2).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, J)) });
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item3).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item3, J)) });
                                                            return _o19;
                                                        };
                                                    })(this, triple)(new (System.Collections.Generic.List$1(System.Object))());
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateConnectedThreePartPartitions: function (g, J) {
                    return new (Bridge.GeneratorEnumerable$1(System.Object))(Bridge.fn.bind(this, function (g, J) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            rest,
                            $t,
                            first,
                            rest2,
                            $t1,
                            second,
                            third,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Object))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            rest = System.Linq.Enumerable.from(g.Vertices).except(J).toList(System.Int32);
                                                Algorithms.GenericExtensions.Shuffle(System.Int32, rest);
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, rest), System.Collections.Generic.List$1(System.Int32));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    first = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 7;
                                            continue;
                                        }
                                        case 2: {
                                            first.add(J.getItem(0));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(first).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                rest2 = System.Linq.Enumerable.from(rest).except(first).toList(System.Int32);
                                                $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, rest2), System.Collections.Generic.List$1(System.Int32));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t1.moveNext()) {
                                                    second = $t1.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            second.add(J.getItem(1));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(second).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                third = System.Linq.Enumerable.from(rest2).except(second).toList(System.Int32);
                                                third.add(J.getItem(2));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(third).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                $enumerator.current = { item1: first, item2: second, item3: third };
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 7: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.Int32Usage", {
        statics: {
            fields: {
                DeBruijnMultiplier: 0,
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = 125613361;
                    this.DeBruijnLookup = System.Array.init([0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8, 31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9], System.Int32);
                }
            },
            methods: {
                LeastSignificantBit: function (x) {
                    return Algorithms.Int32Usage.DeBruijnLookup[System.Array.index((((((x & ((-x) | 0))) >>> 0) * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = x.v & ((-x.v) | 0);
                    x.v = x.v ^ m;
                    return Algorithms.Int32Usage.DeBruijnLookup[System.Array.index((((m >>> 0) * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b > 0) {
                        q = (q + 1) | 0;
                        b = (b & (((b - 1) >>> 0))) >>> 0;
                    }
                    return q;
                },
                ToSet: function (x) {
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x !== 0) {
                        var lsb = (x & (((0 - x) >>> 0))) >>> 0;
                        onBits.add(Algorithms.Int32Usage.DeBruijnLookup[System.Array.index(((lsb * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)]);

                        x = (x ^ lsb) >>> 0;
                    }

                    return onBits;
                }
            }
        }
    });

    Bridge.define("Algorithms.Int64Usage", {
        statics: {
            fields: {
                DeBruijnMultiplier: System.UInt64(0),
                DeBruijnLookup: null,
                BitMask: null,
                NotBitMask: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = System.UInt64(System.Int64([-1706153790,133027301]));
                    this.DeBruijnLookup = System.Array.init([
                        63, 
                        0, 
                        58, 
                        1, 
                        59, 
                        47, 
                        53, 
                        2, 
                        60, 
                        39, 
                        48, 
                        27, 
                        54, 
                        33, 
                        42, 
                        3, 
                        61, 
                        51, 
                        37, 
                        40, 
                        49, 
                        18, 
                        28, 
                        20, 
                        55, 
                        30, 
                        34, 
                        11, 
                        43, 
                        14, 
                        22, 
                        4, 
                        62, 
                        57, 
                        46, 
                        52, 
                        38, 
                        26, 
                        32, 
                        41, 
                        50, 
                        36, 
                        17, 
                        19, 
                        29, 
                        10, 
                        13, 
                        21, 
                        56, 
                        45, 
                        25, 
                        31, 
                        35, 
                        16, 
                        9, 
                        12, 
                        44, 
                        24, 
                        15, 
                        8, 
                        23, 
                        7, 
                        6, 
                        5
                    ], System.Int32);
                    this.BitMask = System.Array.init(64, System.Int64(0), System.Int64);
                    this.NotBitMask = System.Array.init(64, System.Int64(0), System.Int64);
                },
                ctor: function () {
                    var $t;
                    $t = Bridge.getEnumerator(System.Linq.Enumerable.range(0, 64));
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)] = (System.Int64(1)).shl(bit);
                            Algorithms.Int64Usage.NotBitMask[System.Array.index(bit, Algorithms.Int64Usage.NotBitMask)] = ((System.Int64(1)).shl(bit)).not();
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}
        },
        methods: {
            GeneratePairMasks: function (n) {
                var maskMap = new (System.Collections.Generic.Dictionary$2(System.Int64,System.Int64))();

                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        maskMap.set(Algorithms.Int64Usage.BitMask[System.Array.index(i, Algorithms.Int64Usage.BitMask)].or(Algorithms.Int64Usage.BitMask[System.Array.index(j, Algorithms.Int64Usage.BitMask)]), Algorithms.Int64Usage.BitMask[System.Array.index(j, Algorithms.Int64Usage.BitMask)]);
                    }
                }

                return maskMap;
            },
            ClearBit: function (x, bit) {
                return x.and(Algorithms.Int64Usage.NotBitMask[System.Array.index(bit, Algorithms.Int64Usage.NotBitMask)]);
            },
            SetBit: function (x, bit) {
                return x.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
            },
            IsBitSet: function (x, bit) {
                return (x.and(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)])).ne(System.Int64(0));
            },
            FlipBits: function (x, bit) {
                return x.xor(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
            },
            FlipBits$1: function (x, bit1, bit2) {
                return x.xor((Algorithms.Int64Usage.BitMask[System.Array.index(bit1, Algorithms.Int64Usage.BitMask)].or(Algorithms.Int64Usage.BitMask[System.Array.index(bit2, Algorithms.Int64Usage.BitMask)])));
            },
            FlipBits$2: function (x, bits) {
                var $t;
                if (bits === void 0) { bits = []; }
                if (bits == null) {
                    return x;
                }

                var mask = System.Int64(0);
                $t = Bridge.getEnumerator(bits);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        mask = mask.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return x.xor(mask);
            },
            LeastSignificantBit: function (b) {
                return Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(System.Int64.clipu64((b.and(b.neg()))).mul(Algorithms.Int64Usage.DeBruijnMultiplier).shru(58), Algorithms.Int64Usage.DeBruijnLookup)];
            },
            GetAndClearLeastSignificantBit: function (x) {
                var m = x.v.and(x.v.neg());
                x.v = x.v.xor(m);
                return Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(m).mul(Algorithms.Int64Usage.DeBruijnMultiplier)).shru(58)), Algorithms.Int64Usage.DeBruijnLookup)];
            },
            PopulationCount: function (b) {
                var q = 0;
                while (b.gt(System.Int64(0))) {
                    q = (q + 1) | 0;
                    b = b.and((b.sub(System.Int64(1))));
                }
                return q;
            },
            PopulationCount$1: function (x) {
                var k1 = System.UInt64([1431655765,1431655765]);
                var k2 = System.UInt64([858993459,858993459]);
                var k4 = System.UInt64([252645135,252645135]);
                x = x.sub(((x.shru(1)).and(k1)));
                x = (x.and(k2)).add(((x.shru(2)).and(k2)));
                x = (x.add((x.shru(4)))).and(k4);
                x = (x.mul(System.UInt64([16843009,16843009]))).shru(56);
                return System.Int64.clip32(x);
            },
            RightFillToMSB: function (x) {
                x = x.or((x.shru(1)));
                x = x.or((x.shru(2)));
                x = x.or((x.shru(4)));
                x = x.or((x.shru(8)));
                x = x.or((x.shru(16)));
                x = x.or((x.shru(32)));

                return x;
            },
            ToBitString: function (x, length) {
                if (length === void 0) { length = 64; }
                return Bridge.toArray(System.Linq.Enumerable.range(0, length).select(function (bit) {
                        return Algorithms.Int64Usage.IsBitSet(x, System.Int64(bit)) ? "1" : "0";
                    })).join("");
            },
            ToSet: function (x) {
                x = {v:x};
                var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                while (x.v.ne(System.Int64(0))) {
                    onBits.add(Algorithms.Int64Usage.GetAndClearLeastSignificantBit(x));
                }

                return onBits;
            },
            ToSet$1: function (x) {
                var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                while (x.ne(System.UInt64(0))) {
                    var lsb = x.and((System.UInt64(0).sub(x)));
                    onBits.add(Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(lsb.mul(Algorithms.Int64Usage.DeBruijnMultiplier).shru(58), Algorithms.Int64Usage.DeBruijnLookup)]);

                    x = x.xor(lsb);
                }

                return onBits;
            },
            EnumerateBits: function (x) {
                return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (x) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        lsb,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        x = {v:x};
                                            
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( x.v.ne(System.Int64(0)) ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                    }
                                    case 2: {
                                        lsb = Algorithms.Int64Usage.GetAndClearLeastSignificantBit(x);
                                            $enumerator.current = lsb;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        
                                            $step = 1;
                                            continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            ToInt64$1: function (bits) {
                var $t;
                if (bits === void 0) { bits = []; }
                var total = System.Int64(0);
                $t = Bridge.getEnumerator(bits);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ToInt64: function (set) {
                var $t;
                var total = System.Int64(0);
                $t = Bridge.getEnumerator(set, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ToUInt64: function (set) {
                var $t;
                var total = System.UInt64(0);
                $t = Bridge.getEnumerator(set, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or((System.UInt64(1).shl(bit)));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ExpandIntoLists: function (xs) {
                return System.Linq.Enumerable.from(xs).select($asm.$.Algorithms.Int64Usage.f1).toList(System.Collections.Generic.List$1(System.Int32));
            },
            ToSetString$2: function (x) {
                return Algorithms.Int64Usage.ToSetString(Algorithms.Int64Usage.ToSet(x));
            },
            ToSetString$1: function (list) {
                return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(list).select($asm.$.Algorithms.Int64Usage.f2)).join(", "), "}");
            },
            ToSetString: function (list) {
                return System.String.concat("{", Bridge.toArray(list).join(", "), "}");
            },
            ToSetStringSmall: function (x) {
                return [Bridge.toArray(Algorithms.Int64Usage.ToSet(x)).join("")].join("|");
            },
            AllSet: function (x, i) {
                return Algorithms.Int64Usage.IsBitSet((x.xor((x.add(System.Int64(1))))), System.Int64(i));
            },
            GetBits: function (x) {
                var setBits = new (System.Collections.Generic.List$1(System.Int64))();

                while (x.ne(System.Int64(0))) {
                    var lsb = x.and(x.neg());

                    setBits.add(lsb);

                    x = x.xor(lsb);
                }

                return setBits;
            },
            GetBits$1: function (x) {
                var setBits = new (System.Collections.Generic.List$1(System.UInt64))(16);

                while (x.ne(System.UInt64(0))) {
                    var lsb = x.and((System.UInt64(0).sub(x)));
                    setBits.add(lsb);
                    x = x.xor(lsb);
                }

                return setBits;
            }
        }
    }
    });

    Bridge.ns("Algorithms.Int64Usage", $asm.$);

    Bridge.apply($asm.$.Algorithms.Int64Usage, {
        f1: function (x) {
            return System.Linq.Enumerable.from(Algorithms.Int64Usage.ToSet(x)).toList(System.Int32);
        },
        f2: function (l) {
            return Algorithms.Int64Usage.ToSetString$2(l);
        }
    });

    Bridge.define("Algorithms.Lazy$1", function (T) { return {
        statics: {
            methods: {
                op_Implicit: function (da) {
                    return da.Value;
                }
            }
        },
        fields: {
            _creator: null,
            _value: null,
            _token: null
        },
        props: {
            Value: {
                get: function () {
                    if (this._value == null) {
                        this._token;
                        {
                            if (this._value == null) {
                                this._value = this._creator();
                            }
                        }
                    }

                    return this._value;
                }
            }
        },
        ctors: {
            init: function () {
                this._value = Bridge.getDefaultValue(T);
                this._token = {  };
            },
            ctor: function (creator) {
                this.$initialize();
                this._creator = creator;
            },
            $ctor1: function (creator, threadSafe) {
                Algorithms.Lazy$1(T).ctor.call(this, creator);
            }
        },
        methods: {
            Forget: function () {
                this._token;
                this._value = Bridge.getDefaultValue(T);
            }
        }
    }; });

    Bridge.define("Algorithms.OneFactorizationsOfCompleteGraph", {
        statics: {
            methods: {
                EnumerateOneFactorizations: function (n) {
                    var list = System.Int64(0);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list.or((System.Int64(1).shl(i)));
                    }

                    var coloring = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(n, (((n - 1) | 0))), 2)) | 0), 0, System.Int32);
                    for (var i1 = 0; i1 < ((n - 1) | 0); i1 = (i1 + 1) | 0) {
                        coloring[System.Array.index(i1, coloring)] = i1;
                    }

                    var lists = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list.xor(System.Int64((1 << (((i2 - 1) | 0)))));
                    }

                    var priorNeighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();


                    return Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(1, 2, n, lists, coloring);
                },
                EnumerateOneFactorizations$1: function (i, j, n, lists, coloring) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function (i, j, n, lists, coloring) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            copy,
                            $t,
                            of,
                            $t1,
                            c,
                            $t2,
                            of1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (i >= n) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            copy = System.Array.init(coloring.length, 0, System.Int32);
                                                System.Array.copy(coloring, 0, copy, 0, coloring.length);
                                                $enumerator.current = copy;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 3: {
                                            if (j >= n) {
                                                    $step = 4;
                                                    continue;
                                                } else  {
                                                    $step = 9;
                                                    continue;
                                                }
                                        }
                                        case 4: {
                                            $t = Bridge.getEnumerator(Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(((i + 1) | 0), ((i + 2) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 5;
                                                continue;
                                        }
                                        case 5: {
                                            if ($t.moveNext()) {
                                                    of = $t.Current;
                                                    $step = 6;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 6: {
                                            $enumerator.current = of;
                                                $step = 7;
                                                return true;
                                        }
                                        case 7: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 8: {
                                            $step = 17;
                                            continue;
                                        }
                                        case 9: {
                                            $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits((lists[System.Array.index(i, lists)].and(lists[System.Array.index(j, lists)]))), System.Int32);
                                                $step = 10;
                                                continue;
                                        }
                                        case 10: {
                                            if ($t1.moveNext()) {
                                                    c = $t1.Current;
                                                    $step = 11;
                                                    continue;
                                                }
                                            $step = 16;
                                            continue;
                                        }
                                        case 11: {
                                            lists[System.Array.index(i, lists)] = Algorithms.Int64Usage.ClearBit(lists[System.Array.index(i, lists)], System.Int64(c));
                                                lists[System.Array.index(j, lists)] = Algorithms.Int64Usage.ClearBit(lists[System.Array.index(j, lists)], System.Int64(c));

                                                coloring[System.Array.index(((((((((Bridge.Int.mul(i, n) - ((Bridge.Int.div(Bridge.Int.mul(i, (((i + 1) | 0))), 2)) | 0)) | 0) + j) | 0) - i) | 0) - 1) | 0), coloring)] = c;
                                                $t2 = Bridge.getEnumerator(Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(i, ((j + 1) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 12;
                                                continue;
                                        }
                                        case 12: {
                                            if ($t2.moveNext()) {
                                                    of1 = $t2.Current;
                                                    $step = 13;
                                                    continue;
                                                }
                                            $step = 15;
                                            continue;
                                        }
                                        case 13: {
                                            $enumerator.current = of1;
                                                $step = 14;
                                                return true;
                                        }
                                        case 14: {
                                            $step = 12;
                                            continue;
                                        }
                                        case 15: {
                                            lists[System.Array.index(i, lists)] = Algorithms.Int64Usage.SetBit(lists[System.Array.index(i, lists)], System.Int64(c));
                                                lists[System.Array.index(j, lists)] = Algorithms.Int64Usage.SetBit(lists[System.Array.index(j, lists)], System.Int64(c));
                                            $step = 10;
                                            continue;
                                        }
                                        case 16: {
                                            $step = 17;
                                            continue;
                                        }
                                        case 17: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 18: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                GetSignSum: function (n, plus, minus, progress) {
                    var $t;
                    plus.v = 0;
                    minus.v = 0;

                    var list = 0;
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list | (1 << i);
                    }

                    var of = System.Array.create(0, null, System.Int32, n, n);
                    for (var i1 = 1; i1 < n; i1 = (i1 + 1) | 0) {
                        of.set([0, i1], ($t = (i1 - 1) | 0, of.set([i1, 0], $t), $t));
                    }

                    var lists = System.Array.init(n, 0, System.Int32);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list ^ (1 << (((i2 - 1) | 0)));
                    }

                    var term = { v : Bridge.Int.mul(n, (((n - 1) | 0))) % 4 === 0 ? 1 : -1 };

                    Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(1, 2, n, lists, of, term, plus, minus, progress);

                    return ((plus.v - minus.v) | 0);
                },
                DoTerm: function (term, plus, minus, progress) {
                    if (term > 0) {
                        plus.v = (plus.v + 1) | 0;
                    } else {
                        minus.v = (minus.v + 1) | 0;
                    }

                    if ((((plus.v + minus.v) | 0)) % 1000000 === 0) {
                        if (!Bridge.staticEquals(progress, null)) {
                            progress(plus.v, minus.v);
                        }
                    }
                },
                DoSignSum: function (i, j, n, lists, of, term, plus, minus, progress) {
                    if (i >= ((n - 1) | 0)) {
                        Algorithms.OneFactorizationsOfCompleteGraph.DoTerm(term.v, plus, minus, progress);
                    } else {
                        var x = lists[System.Array.index(i, lists)] & lists[System.Array.index(j, lists)];
                        while (x !== 0) {
                            var c = x & ((-x) | 0);
                            x = x ^ c;
                            lists[System.Array.index(i, lists)] = lists[System.Array.index(i, lists)] ^ c;
                            lists[System.Array.index(j, lists)] = lists[System.Array.index(j, lists)] ^ c;

                            of.set([i, j], (of.set([j, i], c), c));

                            var factor = 1;
                            for (var k = 0; k < i; k = (k + 1) | 0) {
                                factor = Bridge.Int.mul(factor, (1 | ((((c - of.get([k, j])) | 0)) >> 31)));
                            }
                            for (var k1 = 0; k1 < j; k1 = (k1 + 1) | 0) {
                                factor = Bridge.Int.mul(factor, (1 | ((((c - of.get([i, k1])) | 0)) >> 31)));
                            }

                            term.v = Bridge.Int.mul(term.v, factor);
                            if (j >= ((n - 1) | 0)) {
                                Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(((i + 1) | 0), ((i + 2) | 0), n, lists, of, term, plus, minus, progress);
                            } else {
                                Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(i, ((j + 1) | 0), n, lists, of, term, plus, minus, progress);
                            }
                            term.v = Bridge.Int.mul(term.v, factor);

                            lists[System.Array.index(i, lists)] = lists[System.Array.index(i, lists)] ^ c;
                            lists[System.Array.index(j, lists)] = lists[System.Array.index(j, lists)] ^ c;
                        }
                    }
                }
            }
        }
    });

    Bridge.define("Algorithms.OnFactorizationsOfCompleteGraph", {
        statics: {
            methods: {
                EnumerateOneFactorizations: function (n) {
                    var list = System.Int64(0);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list.or((System.Int64(1).shl(i)));
                    }

                    var coloring = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(n, (((n - 1) | 0))), 2)) | 0), 0, System.Int32);
                    for (var i1 = 0; i1 < ((n - 1) | 0); i1 = (i1 + 1) | 0) {
                        coloring[System.Array.index(i1, coloring)] = i1;
                    }

                    var lists = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list.xor(System.Int64((1 << (((i2 - 1) | 0)))));

                        coloring[System.Array.index(((Bridge.Int.mul(i2, n) - ((Bridge.Int.div(Bridge.Int.mul(i2, (((i2 + 1) | 0))), 2)) | 0)) | 0), coloring)] = (i2 - 1) | 0;
                    }

                    return Algorithms.OnFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(1, 2, n, lists, coloring);
                },
                EnumerateOneFactorizations$1: function (i, j, n, lists, coloring) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function (i, j, n, lists, coloring) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            copy,
                            $t,
                            of,
                            $t1,
                            c,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (i >= n) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            copy = System.Array.init(coloring.length, 0, System.Int32);
                                                System.Array.copy(coloring, 0, copy, 0, coloring.length);
                                                $enumerator.current = copy;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 3: {
                                            if (j >= n) {
                                                    $step = 4;
                                                    continue;
                                                } else  {
                                                    $step = 9;
                                                    continue;
                                                }
                                        }
                                        case 4: {
                                            $t = Bridge.getEnumerator(Algorithms.OnFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(((i + 1) | 0), ((i + 2) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 5;
                                                continue;
                                        }
                                        case 5: {
                                            if ($t.moveNext()) {
                                                    of = $t.Current;
                                                    $step = 6;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 6: {
                                            $enumerator.current = of;
                                                $step = 7;
                                                return true;
                                        }
                                        case 7: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 8: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 9: {
                                            $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits((lists[System.Array.index(i, lists)].and(lists[System.Array.index(j, lists)]))), System.Int32);
                                                try {
                                                    while ($t1.moveNext()) {
                                                        c = $t1.Current;

                                                    }
                                                } finally {
                                                    if (Bridge.is($t1, System.IDisposable)) {
                                                        $t1.System$IDisposable$dispose();
                                                    }
                                                }
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 11: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.OnlineChoiceHashGraph", {
        fields: {
            _f: null,
            _g: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (f, g) {
                this.$initialize();                var $t, $t1;

                this._f = Bridge.cast(System.Array.clone(f), System.Array.type(System.Int32));
                this._g = Bridge.cast(System.Array.clone(g), System.Array.type(System.Int32));

                for (var i = 0; i < this._g.length; i = (i + 1) | 0) {
                    if (this._g[System.Array.index(i, this._g)] === 0) {
                        this._f[System.Array.index(i, this._f)] = 0;
                    }
                }

                $t = Bridge.getEnumerator(this._f);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(this._g);
                try {
                    while ($t1.moveNext()) {
                        var i2 = $t1.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i2) | 0;
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.OnlineChoiceHashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._g).sequenceEqual(other._g) && System.Linq.Enumerable.from(this._f).sequenceEqual(other._f);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.OrientationHashGraph", {
        fields: {
            _values: null,
            _outMinusIn: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (g, outMinusIn) {
                this.$initialize();                var $t;

                this._values = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(g.N, (((g.N - 1) | 0))), 2)) | 0), 0, System.Byte);
                this._outMinusIn = outMinusIn;

                var k = 0;
                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        var value = (g.getItem(i, j) ? 1 : 0) & 255;
                        this._values[System.Array.index(k, this._values)] = value;

                        if (g.getItem(i, j)) {
                            this._hashCode = (this._hashCode + (1 << (k % 32))) | 0;
                        }

                        k = (k + 1) | 0;
                    }
                }

                $t = Bridge.getEnumerator(outMinusIn);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.OrientationHashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._outMinusIn).sequenceEqual(other._outMinusIn) && System.Linq.Enumerable.from(this._values).sequenceEqual(other._values);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.OrientationResult", {
        props: {
            Graph: null,
            Even: 0,
            Odd: 0
        }
    });

    Bridge.define("Algorithms.Polynomials.FactoredRational", {
        statics: {
            fields: {
                Zero: null
            },
            ctors: {
                init: function () {
                    var $t;
                    this.Zero = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.Sign = 0, $t);
                }
            },
            methods: {
                op_Multiply: function (fi, fi2) {
                    var $t;
                    var sign = Bridge.Int.mul(fi.Sign, fi2.Sign);
                    var k = new (System.Collections.Generic.List$1(System.Int32))(Math.max(fi.K.Count, fi2.K.Count));

                    if (sign !== 0) {
                        for (var i = 0; i < Math.max(fi.K.Count, fi2.K.Count); i = (i + 1) | 0) {
                            k.add(0);
                            if (i < fi.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi.K.getItem(i)) | 0);
                            }
                            if (i < fi2.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi2.K.getItem(i)) | 0);
                            }
                        }
                    }

                    return ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = k, $t.Sign = sign, $t);
                },
                op_Division: function (fi, fi2) {
                    var $t;
                    var sign = Bridge.Int.mul(fi.Sign, fi2.Sign);
                    var k = new (System.Collections.Generic.List$1(System.Int32))(Math.max(fi.K.Count, fi2.K.Count));

                    if (sign !== 0) {
                        for (var i = 0; i < Math.max(fi.K.Count, fi2.K.Count); i = (i + 1) | 0) {
                            k.add(0);
                            if (i < fi.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi.K.getItem(i)) | 0);
                            }
                            if (i < fi2.K.Count) {
                                k.setItem(i, (k.getItem(i) - fi2.K.getItem(i)) | 0);
                            }
                        }
                    }

                    return ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = k, $t.Sign = sign, $t);
                }
            }
        },
        fields: {
            Sign: 0,
            K: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (n) {
                this.$initialize();
                var vv = System.Array.init(11, 0, System.Int32);
                for (var jj = 0; jj <= 10; jj = (jj + 1) | 0) {
                    vv[System.Array.index(jj, vv)] = this.Power(2, jj);
                }

                this.Sign = System.Decimal(n).sign();
                n = Bridge.Int.mul(n, this.Sign);

                this.K = new (System.Collections.Generic.List$1(System.Int32))();
                var i = 0;

                while (n > 1) {
                    this.K.add(0);
                    var p = Algorithms.Polynomials.PrimeNumbers.Get(i);
                    while (n % p === 0) {
                        this.K.setItem(i, (this.K.getItem(i) + 1) | 0);
                        n = (Bridge.Int.div(n, p)) | 0;
                    }

                    i = (i + 1) | 0;
                }
            }
        },
        methods: {
            ToRational: function (top, bottom) {
                if (this.K == null || this.Sign === 0) {
                    top.v = 0;
                    bottom.v = 1;
                    return;
                }

                top.v = this.Sign;
                bottom.v = 1;
                for (var i = 0; i < this.K.Count; i = (i + 1) | 0) {
                    if (this.K.getItem(i) > 0) {
                        top.v = Bridge.Int.mul(top.v, (this.Power(Algorithms.Polynomials.PrimeNumbers.Get(i), this.K.getItem(i))));
                    } else {
                        bottom.v = Bridge.Int.mul(bottom.v, (this.Power(Algorithms.Polynomials.PrimeNumbers.Get(i), ((-this.K.getItem(i)) | 0))));
                    }
                }
            },
            Power: function (p, k) {
                var m = 1;
                while (k > 0) {
                    var e = 1;
                    var n = p;
                    while (e <= k >> 1) {
                        n = Bridge.Int.mul(n, n);
                        e = e << 1;
                    }

                    k = (k - e) | 0;
                    m = Bridge.Int.mul(m, n);
                }

                return m;
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.GraphPolynomial", {
        fields: {
            _g: null,
            _priorNeighbors: null,
            _normalizer: null,
            _signLookup: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this._g = g;

                this._priorNeighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                for (var w = 0; w < this._g.N; w = (w + 1) | 0) {
                    this._priorNeighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
                    for (var v = 0; v < w; v = (v + 1) | 0) {
                        if (g.getItem(v, w)) {
                            this._priorNeighbors.getItem(w).add(v);
                        }
                    }
                }
            }
        },
        methods: {
            GetCoefficient: function (power) {
                var $t;
                this._normalizer = new Algorithms.Polynomials.Normalizer(power);

                var a = System.Array.init(power.length, 0, System.Int32);
                var top = { v : System.Int64(0) };
                var bottom = { v : System.Int64(1) };
                var partialProduct = { v : ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t) };
                this.SumTerms(0, a, power, partialProduct, top, bottom);

                return System.Int64.clip32(top.v.div(bottom.v));
            },
            GetSignSum: function (power) {
                this._signLookup = new Algorithms.Polynomials.SignLookup(power);

                var a = System.Array.init(power.length, 0, System.Int32);
                var sum = { v : 0 };
                var partialProduct = { v : 1 };
                this.SumSigns(0, a, power, partialProduct, sum);

                return sum.v;
            },
            SumSigns: function (w, a, power, partialProduct, sum) {
                var $t;
                if (w === power.length) {
                    sum.v = (sum.v + partialProduct.v) | 0;
                } else {
                    for (var j = 0; j <= power[System.Array.index(w, power)]; j = (j + 1) | 0) {
                        a[System.Array.index(w, a)] = j;

                        var current = 1;
                        $t = Bridge.getEnumerator(this._priorNeighbors.getItem(w));
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                current = Bridge.Int.mul(current, this._signLookup.Sign.get([a[System.Array.index(v, a)], a[System.Array.index(w, a)]]));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (current === 0) {
                            continue;
                        }

                        partialProduct.v = Bridge.Int.mul(partialProduct.v, current);
                        this.SumSigns(((w + 1) | 0), a, power, partialProduct, sum);
                        partialProduct.v = (Bridge.Int.div(partialProduct.v, current)) | 0;
                    }
                }
            },
            SumTerms: function (w, a, power, partialProduct, top, bottom) {
                var $t;
                if (w === power.length) {
                    var r = Algorithms.Polynomials.FactoredRational.op_Division(partialProduct.v, this._normalizer.Get(a));
                    var top2 = { };
                    var bottom2 = { };
                    r.ToRational(top2, bottom2);

                    top.v = top.v.mul(System.Int64(bottom2.v)).add(bottom.v.mul(System.Int64(top2.v)));
                    bottom.v = bottom.v.mul(System.Int64(bottom2.v));

                    var gcd = this.GCD(top.v, bottom.v);
                    top.v = top.v.div(gcd);
                    bottom.v = bottom.v.div(gcd);
                } else {
                    for (var j = 0; j <= power[System.Array.index(w, power)]; j = (j + 1) | 0) {
                        a[System.Array.index(w, a)] = j;

                        var current = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t);
                        $t = Bridge.getEnumerator(this._priorNeighbors.getItem(w));
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                current = Algorithms.Polynomials.FactoredRational.op_Multiply(current, this._normalizer.FactoredDifference.get([a[System.Array.index(v, a)], a[System.Array.index(w, a)]]));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (current.Sign === 0) {
                            continue;
                        }

                        partialProduct.v = Algorithms.Polynomials.FactoredRational.op_Multiply(partialProduct.v, current);
                        this.SumTerms(((w + 1) | 0), a, power, partialProduct, top, bottom);
                        partialProduct.v = Algorithms.Polynomials.FactoredRational.op_Division(partialProduct.v, current);
                    }
                }
            },
            GCD: function (x, y) {
                var tmp;
                x = x.abs();
                y = y.abs();
                while (x.gt(System.Int64(0))) {
                    tmp = x;
                    x = y.mod(x);
                    y = tmp;
                }
                return y;
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.GraphPolynomialExtensions", {
        statics: {
            methods: {
                GetCoefficient: function (g, power) {
                    var gp = new Algorithms.Polynomials.GraphPolynomial(g);
                    return gp.GetCoefficient(power);
                },
                GetSignSum: function (g, power) {
                    var gp = new Algorithms.Polynomials.GraphPolynomial(g);
                    return gp.GetSignSum(power);
                }
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.Normalizer", {
        fields: {
            FactoredDifference: null,
            InsideProduct: null
        },
        ctors: {
            ctor: function (height) {
                this.$initialize();                var $t;

                var m = System.Linq.Enumerable.from(height).max();

                this.FactoredDifference = System.Array.create(null, null, Algorithms.Polynomials.FactoredRational, ((m + 1) | 0), ((m + 1) | 0));
                for (var i = 0; i <= m; i = (i + 1) | 0) {
                    for (var j = 0; j <= m; j = (j + 1) | 0) {
                        this.FactoredDifference.set([i, j], new Algorithms.Polynomials.FactoredRational.$ctor1(((i - j) | 0)));
                    }
                }

                this.InsideProduct = System.Array.create(null, null, Algorithms.Polynomials.FactoredRational, height.length, ((m + 1) | 0));
                for (var i1 = 0; i1 < height.length; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 <= height[System.Array.index(i1, height)]; j1 = (j1 + 1) | 0) {
                        this.InsideProduct.set([i1, j1], ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t));
                        for (var k = 0; k <= height[System.Array.index(i1, height)]; k = (k + 1) | 0) {
                            if (k === j1) {
                                continue;
                            }

                            this.InsideProduct.set([i1, j1], Algorithms.Polynomials.FactoredRational.op_Multiply(this.InsideProduct.get([i1, j1]), this.FactoredDifference.get([j1, k])));
                        }
                    }
                }
        }
    },
    methods: {
        Get: function (a) {
            var $t;
            var normalizer = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t);
            for (var i = 0; i < a.length; i = (i + 1) | 0) {
                normalizer = Algorithms.Polynomials.FactoredRational.op_Multiply(normalizer, this.InsideProduct.get([i, a[System.Array.index(i, a)]]));
            }

            return normalizer;
        }
    }
    });

    Bridge.define("Algorithms.Polynomials.PrimeNumbers", {
        statics: {
            fields: {
                _primes: null
            },
            ctors: {
                init: function () {
                    this._primes = $asm.$.Algorithms.Polynomials.PrimeNumbers.f1(new (System.Collections.Generic.List$1(System.Int32))());
                }
            },
            methods: {
                Get: function (i) {
                    if (i >= Algorithms.Polynomials.PrimeNumbers._primes.Count) {
                        Algorithms.Polynomials.PrimeNumbers.ComputeMorePrimes(i);
                    }

                    return Algorithms.Polynomials.PrimeNumbers._primes.getItem(i);
                },
                ComputeMorePrimes: function (i) {
                    var m = Math.max(i, Bridge.Int.mul(2, Algorithms.Polynomials.PrimeNumbers._primes.Count));
                    var p = (Algorithms.Polynomials.PrimeNumbers._primes.getItem(((Algorithms.Polynomials.PrimeNumbers._primes.Count - 1) | 0)) + 2) | 0;

                    while (Algorithms.Polynomials.PrimeNumbers._primes.Count <= m) {
                        if (Algorithms.Polynomials.PrimeNumbers.IsPrime(p)) {
                            Algorithms.Polynomials.PrimeNumbers._primes.add(p);
                        }

                        p = (p + 2) | 0;
                    }
                },
                IsPrime: function (p) {
                    for (var k = 0; Bridge.Int.mul(Algorithms.Polynomials.PrimeNumbers._primes.getItem(k), Algorithms.Polynomials.PrimeNumbers._primes.getItem(k)) <= p; k = (k + 1) | 0) {
                        if (p % Algorithms.Polynomials.PrimeNumbers._primes.getItem(k) === 0) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.ns("Algorithms.Polynomials.PrimeNumbers", $asm.$);

    Bridge.apply($asm.$.Algorithms.Polynomials.PrimeNumbers, {
        f1: function (_o20) {
            _o20.add(2);
            _o20.add(3);
            _o20.add(5);
            _o20.add(7);
            _o20.add(11);
            _o20.add(13);
            _o20.add(17);
            _o20.add(19);
            return _o20;
        }
    });

    Bridge.define("Algorithms.Polynomials.SignLookup", {
        fields: {
            Sign: null
        },
        ctors: {
            ctor: function (height) {
                this.$initialize();
                var m = System.Linq.Enumerable.from(height).max();

                this.Sign = System.Array.create(0, null, System.Int32, ((m + 1) | 0), ((m + 1) | 0));
                for (var i = 0; i <= m; i = (i + 1) | 0) {
                    for (var j = 0; j <= m; j = (j + 1) | 0) {
                        this.Sign.set([i, j], System.Decimal(((i - j) | 0)).sign());
                    }
                }
            }
        }
    });

    Bridge.define("Algorithms.SubsetEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        fields: {
            _setSize: 0,
            _subsetSize: 0
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (setSize, subsetSize) {
                this.$initialize();
                this._setSize = setSize;
                this._subsetSize = subsetSize;
            }
        },
        methods: {
            getEnumerator: function () {
                return new Algorithms.SubsetEnumerator.Enumerator(this._setSize, this._subsetSize);
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            }
        }
    });

    Bridge.define("Algorithms.SubsetEnumerator.Enumerator", {
        inherits: [System.Collections.Generic.IEnumerator$1(System.Int64)],
        fields: {
            _isFirst: false,
            _setSize: 0,
            _subsetSize: 0,
            _current: System.Int64(0)
        },
        props: {
            Current: {
                get: function () {
                    return this._current;
                }
            },
            System$Collections$IEnumerator$Current: {
                get: function () {
                    return this.Current;
                }
            }
        },
        alias: [
            "Current", ["System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1"],
            "dispose", "System$IDisposable$dispose",
            "moveNext", "System$Collections$IEnumerator$moveNext",
            "reset", "System$Collections$IEnumerator$reset"
        ],
        ctors: {
            init: function () {
                this._isFirst = true;
            },
            ctor: function (setSize, subsetSize) {
                this.$initialize();
                this._setSize = setSize;
                this._subsetSize = subsetSize;
            }
        },
        methods: {
            dispose: function () { },
            moveNext: function () {
                if (this._isFirst) {
                    if (this._subsetSize > this._setSize) {
                        return false;
                    }

                    this._current = System.Int64(((((1 << this._subsetSize) - 1) | 0)) << (((this._setSize - this._subsetSize) | 0)));

                    this._isFirst = false;
                    return true;
                }

                var lsb = this._current.and(this._current.neg());

                if (lsb.gt(System.Int64(1))) {
                    this._current = this._current.xor(lsb).xor((lsb.shr(1)));

                    return true;
                }

                var high = this._current.and((this._current.add(System.Int64(1))));

                if (high.equals(System.Int64(0))) {
                    return false;
                }

                var low = this._current.xor(high);
                low = (low.shl(2)).add(System.Int64(3));

                while ((low.and(high)).equals(System.Int64(0))) {
                    low = low.shl(1);
                }

                this._current = high.xor(low);

                return true;
            },
            reset: function () {
                this._isFirst = true;
            }
        }
    });

    Bridge.define("Algorithms.TransitivePartition", {
        props: {
            Parts: null
        },
        ctors: {
            ctor: function (set) {
                this.$initialize();
                this.Parts = function (_o21) {
                        var $t;
                        _o21.add(($t = new Algorithms.TransitivePartition.Part(), $t.Set = set, $t.Scores = new (System.Collections.Generic.List$1(System.Int32))(), $t));
                        return _o21;
                    }(new (System.Collections.Generic.List$1(Algorithms.TransitivePartition.Part))());
            }
        },
        methods: {
            Refine: function (score, scoreNumber) {
                var $t, $t1;
                if (this.Parts.getItem(0).Scores.Count >= scoreNumber) {
                    return;
                }

                var refined = new (System.Collections.Generic.List$1(Algorithms.TransitivePartition.Part))(this.Parts.Count);
                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        var map = this.RefinePart(part, score);
                        $t1 = Bridge.getEnumerator(map);
                        try {
                            while ($t1.moveNext()) {
                                var kvp = $t1.Current;
                                var p = new Algorithms.TransitivePartition.Part();
                                p.Set = kvp.value;
                                p.Scores = new (System.Collections.Generic.List$1(System.Int32))(part.Scores);
                                p.Scores.add(kvp.key);

                                refined.add(p);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Parts = refined;
            },
            RefinePart: function (part, score) {
                var $t;
                var map = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();
                $t = Bridge.getEnumerator(part.Set);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        var x = score[System.Array.index(v, score)];
                        var l = { };
                        if (!map.tryGetValue(x, l)) {
                            l.v = new (System.Collections.Generic.List$1(System.Int32))();
                            map.set(x, l.v);
                        }

                        l.v.add(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return map;
            },
            equals: function (obj) {
                var $t;
                var tp = Bridge.as(obj, Algorithms.TransitivePartition);
                if (tp == null) {
                    return false;
                }

                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        var p = tp.FindPartWithScores(part.Scores);
                        if (p == null) {
                            return false;
                        }

                        if (p.Set.Count !== part.Set.Count) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            getHashCode: function () {
                return Bridge.getHashCode(this);
            },
            FindPartWithScores: function (scores) {
                var $t;
                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        if (System.Linq.Enumerable.from(part.Scores).sequenceEqual(scores)) {
                            return part;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            }
        }
    });

    Bridge.define("Algorithms.TransitivePartition.Part", {
        props: {
            Set: null,
            Scores: null
        }
    });

    Bridge.define("Algorithms.UnpermutedAssignmentEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _vertexCount: 0,
            _f: null,
            _potSize: 0,
            _start: 0,
            _step: 0,
            _pairMaskToBadMask: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$List$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._vertexCount = vertexCount;
                this._f = f;
                this._potSize = potSize;
                this._start = start;
                this._step = step;

                this._pairMaskToBadMask = Algorithms.Int64Usage.GeneratePairMasks(this._potSize);
            }
        },
        methods: {
            getEnumerator: function () {
                return System.Linq.Enumerable.from(this.GetEnumerable(this._vertexCount)).where(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f1)).getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            GetEnumerableRecursive: function (vertexCount) {
                if (vertexCount === 1) {
                    return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int64), Algorithms.GenericExtensions.EnList(System.Int64, ((System.Int64(1).shl(this._f(0))).sub(System.Int64(1)))));
                }

                return System.Linq.Enumerable.from(this.GetEnumerableRecursive(((vertexCount - 1) | 0))).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f2));
            },
            GetEnumerable: function (vertexCount) {
                var enumerable = Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int64), Algorithms.GenericExtensions.EnList(System.Int64, ((System.Int64(1).shl(this._f(0))).sub(System.Int64(1)))));

                for (var i = 1; i < vertexCount; i = (i + 1) | 0) {
                    enumerable = System.Linq.Enumerable.from(enumerable).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f2));
                }

                return enumerable;
            },
            GetExtensions: function (list) {
                var restricted = System.Linq.Enumerable.from(this._pairMaskToBadMask).where(Bridge.fn.bind(this, function (kvp) {
                        return this.IsRestricted(kvp.key, list);
                    }));

                var size = this._f(list.Count);

                return System.Linq.Enumerable.from(new Algorithms.SubsetEnumerator(this._potSize, size)).where(function (subset) {
                        return restricted.all(function (kvp) {
                            return (subset.and(kvp.key)).ne(kvp.value);
                        });
                    }).select(function (subset) {
                    return System.Linq.Enumerable.from(list).concat(System.Array.init([subset], System.Int64)).toList(System.Int64);
                });
            },
            IsRestricted: function (p, list) {
                var $t;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        var intersection = x.and(p);
                        if (intersection.ne(System.Int64(0)) && intersection.ne(x)) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            }
        }
    });

    Bridge.ns("Algorithms.UnpermutedAssignmentEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.UnpermutedAssignmentEnumerator, {
        f1: function (list, i) {
            return (((i - this._start) | 0)) % this._step === 0;
        },
        f2: function (list) {
            return this.GetExtensions(list);
        }
    });

    Bridge.define("Algorithms.Utility.EquivalenceRelation$1", function (T) { return {
        fields: {
            _nodeLookup: null
        },
        ctors: {
            init: function () {
                this._nodeLookup = new (System.Collections.Generic.Dictionary$2(T,Algorithms.Utility.EquivalenceRelation$1.Node(T)))();
            }
        },
        methods: {
            AddElement: function (t) {
                this.LookupNode(t);
            },
            Relate: function (x, y) {
                var nx = this.LookupNode(x);
                var ny = this.LookupNode(y);

                var xRoot = this.Find(nx);
                var yRoot = this.Find(ny);

                if (Bridge.referenceEquals(xRoot, yRoot)) {
                    return;
                }

                if (xRoot.Rank < yRoot.Rank) {
                    xRoot.Parent = yRoot;
                } else {
                    if (xRoot.Rank > yRoot.Rank) {
                        yRoot.Parent = xRoot;
                    } else {
                        yRoot.Parent = xRoot;
                        xRoot.Rank = (xRoot.Rank + 1) | 0;
                    }
                }
            },
            AreRelated: function (x, y) {
                var nx = this.LookupNode(x);
                var ny = this.LookupNode(y);

                return Bridge.referenceEquals(this.Find(nx), this.Find(ny));
            },
            GetEquivalenceClass: function (x) {
                var nx = this.LookupNode(x);
                var xRoot = this.Find(nx);

                return System.Linq.Enumerable.from(this._nodeLookup.getValues()).where(Bridge.fn.bind(this, function (node) {
                        return Bridge.referenceEquals(this.Find(node), xRoot);
                    })).select($asm.$.Algorithms.Utility.EquivalenceRelation$1.f1);
            },
            GetEquivalenceClasses: function () {
                return System.Linq.Enumerable.from(this._nodeLookup.getValues()).groupBy(Bridge.fn.bind(this, function (node) {
                        return this.Find(node);
                    })).select(function (group) {
                    return group.select($asm.$.Algorithms.Utility.EquivalenceRelation$1.f1);
                });
            },
            Find: function (n) {
                if (!Bridge.referenceEquals(n.Parent, n)) {
                    n.Parent = this.Find(n.Parent);
                }

                return n.Parent;
            },
            LookupNode: function (t) {
                var node = { };
                if (!this._nodeLookup.tryGetValue(t, node)) {
                    node.v = new (Algorithms.Utility.EquivalenceRelation$1.Node(T))();
                    node.v.Parent = node.v;
                    node.v.Rank = 0;
                    node.v.T = t;

                    this._nodeLookup.set(t, node.v);
                }

                return node.v;
            }
        }
    }; });

    Bridge.ns("Algorithms.Utility.EquivalenceRelation$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.EquivalenceRelation$1, {
        f1: function (node) {
            return node.T;
        }
    });

    Bridge.define("Algorithms.Utility.EquivalenceRelation$1.Node", function (T) { return {
        props: {
            Parent: null,
            Rank: 0,
            T: Bridge.getDefaultValue(T)
        }
    }; });

    Bridge.define("Algorithms.Utility.Factoradic", {
        props: {
            Digits: null,
            Value: System.Int64(0)
        },
        ctors: {
            $ctor1: function (value, n) {
                this.$initialize();
                this.Value = value;

                this.Digits = new (System.Collections.Generic.List$1(System.Int32))(n);
                this.Digits.add(0);

                var i = 1;
                while (value.gt(System.Int64(0))) {
                    this.Digits.add(System.Int64.clip32(value.mod(System.Int64(((i = (i + 1) | 0))))));
                    value = value.div(System.Int64(i));
                }

                for (i = this.Digits.Count; i < n; i = (i + 1) | 0) {
                    this.Digits.add(0);
                }
            },
            ctor: function (p) {
                this.$initialize();
                this.Digits = new (System.Collections.Generic.List$1(System.Int32))(p.N);

                var elements = new (System.Collections.Generic.List$1(System.Int32))(p.N);
                for (var i = 0; i < p.N; i = (i + 1) | 0) {
                    elements.add(i);
                }

                for (var i1 = 0; i1 < p.N; i1 = (i1 + 1) | 0) {
                    this.Digits.add(elements.indexOf(p.getItem(i1)));
                    elements.remove(p.getItem(i1));
                }

                this.Digits.reverse();

                this.Value = System.Int64(0);
                var n = 1;
                for (var i2 = 0; i2 < this.Digits.Count; i2 = (i2 + 1) | 0) {
                    this.Value = this.Value.add(System.Int64((Bridge.Int.mul(this.Digits.getItem(i2), n))));
                    n = Bridge.Int.mul(n, (((i2 + 1) | 0)));
                }

            }
        }
    });

    Bridge.define("Algorithms.Utility.Flows", {
        statics: {
            methods: {
                BipartiteMaximumMatching: function (n, adjacencies) {
                    var $t;
                    var capacity = System.Array.create(0, null, System.Int32, ((n + 2) | 0), ((n + 2) | 0));
                    var source = 0;
                    var target = 1;

                    var lo = 2;
                    var ro = (lo + adjacencies.Count) | 0;

                    for (var i = 0; i < adjacencies.Count; i = (i + 1) | 0) {
                        capacity.set([source, ((lo + i) | 0)], 1);

                        $t = Bridge.getEnumerator(adjacencies.getItem(i));
                        try {
                            while ($t.moveNext()) {
                                var j = $t.Current;
                                capacity.set([((lo + i) | 0), ((ro + j) | 0)], 1);
                                capacity.set([((ro + j) | 0), target], 1);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    return Algorithms.Utility.Flows.MaxFlow(capacity, source, target);
                },
                MaxFlow: function (capacity, source, target) {
                    return new Algorithms.Utility.Flows.FordFulkerson(capacity, source, target).MaxFlow();
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.Flows.FordFulkerson", {
        fields: {
            _n: 0,
            _source: 0,
            _target: 0,
            _capacity: null,
            _flow: null
        },
        ctors: {
            ctor: function (capacity, source, target) {
                this.$initialize();
                this._capacity = capacity;
                this._source = source;
                this._target = target;

                this._n = System.Array.getLength(capacity, 0);
                this._flow = System.Array.create(0, null, System.Int32, this._n, this._n);
            }
        },
        methods: {
            MaxFlow: function () {
                while (true) {
                    var path = $asm.$.Algorithms.Utility.Flows.FordFulkerson.f1(new (System.Collections.Generic.List$1(System.Int32))());
                    var done = !this.FindAugmentingPath(path);
                    if (done) {
                        break;
                    }

                    this.AddFlow(path);
                }

                return System.Linq.Enumerable.range(0, this._n).sum(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.Flows.FordFulkerson.f2));
            },
            FindAugmentingPath: function (path) {
                var $t;
                var last = path.getItem(((path.Count - 1) | 0));

                if (last === this._target) {
                    return true;
                }

                $t = Bridge.getEnumerator(this.OutNeighbors(last), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var j = $t.Current;
                        if (path.contains(j)) {
                            continue;
                        }

                        path.add(j);

                        var isAugmenting = this.FindAugmentingPath(path);
                        if (isAugmenting) {
                            return true;
                        }

                        path.remove(j);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            OutNeighbors: function (i) {
                return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (i) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        j,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        j = 0;
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ( j < this._n ) {
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 2: {
                                        if (((this._capacity.get([i, j]) - this._flow.get([i, j])) | 0) > 0) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 5;
                                            continue;
                                    }
                                    case 3: {
                                        $enumerator.current = j;
                                            $step = 4;
                                            return true;
                                    }
                                    case 4: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        j = (j + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 7: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            AddFlow: function (path) {
                var gain = this.FindGain(path);

                for (var i = 0; i < ((path.Count - 1) | 0); i = (i + 1) | 0) {
                    this._flow.set([path.getItem(i), path.getItem(((i + 1) | 0))], (this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))]) + gain) | 0);
                    this._flow.set([path.getItem(((i + 1) | 0)), path.getItem(i)], (-this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))])) | 0);
                }
            },
            FindGain: function (path) {
                var gain = 2147483647;

                for (var i = 0; i < ((path.Count - 1) | 0); i = (i + 1) | 0) {
                    gain = Math.min(gain, ((this._capacity.get([path.getItem(i), path.getItem(((i + 1) | 0))]) - this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))])) | 0));
                }

                return gain;
            }
        }
    });

    Bridge.ns("Algorithms.Utility.Flows.FordFulkerson", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.Flows.FordFulkerson, {
        f1: function (_o22) {
            _o22.add(0);
            return _o22;
        },
        f2: function (i) {
            return this._flow.get([this._source, i]);
        }
    });

    Bridge.define("Algorithms.Utility.LinqExtensions", {
        statics: {
            methods: {
                CartesianProduct$2: function (T, a, b) {
                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(T, System.Array.init([a, b], System.Collections.Generic.IEnumerable$1(T)))).select(function (s) {
                            return { item1: System.Linq.Enumerable.from(s).elementAt(0), item2: System.Linq.Enumerable.from(s).elementAt(1) };
                        });
                },
                CartesianProduct: function (T, sequences) {
                    var emptyProduct = System.Array.init([System.Linq.Enumerable.empty()], System.Linq.EnumerableInstance$1);

                    return System.Linq.Enumerable.from(sequences).aggregate(emptyProduct, function (accumulator, sequence) {
                            return System.Linq.Enumerable.from(accumulator).selectMany(function (accseq) {
                                    return sequence;
                                }, function (accseq, item) {
                                    return System.Linq.Enumerable.from(accseq).concat(System.Array.init([item], T));
                                });
                        });
                },
                CartesianProduct$1: function (T, sequences) {
                    var emptyProduct = System.Array.init([System.Linq.Enumerable.empty()], System.Linq.EnumerableInstance$1);

                    return System.Linq.Enumerable.from(sequences).aggregate(emptyProduct, function (accumulator, sequence) {
                            return System.Linq.Enumerable.from(accumulator).selectMany(function (accseq) {
                                    return sequence;
                                }, function (accseq, item) {
                                    return System.Linq.Enumerable.from(accseq).concat(System.Array.init([item], T));
                                });
                        });
                },
                Concat: function (T, e, value) {
                    return new (Bridge.GeneratorEnumerable$1(T))(Bridge.fn.bind(this, function (T, e, value) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            v,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            $t = Bridge.getEnumerator(e, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    v = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = v;
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = value;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                Distinct: function (T, source, areEqual) {
                    return new (Bridge.GeneratorEnumerable$1(T))(Bridge.fn.bind(this, function (T, source, areEqual) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            yielded,
                            $t,
                            t,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            yielded = new (System.Collections.Generic.List$1(T))();

                                                $t = Bridge.getEnumerator(source, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    t = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            if (System.Linq.Enumerable.from(yielded).all((function ($me, t) {
                                                        return function (x) {
                                                            return !areEqual(x, t);
                                                        };
                                                    })(this, t))) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            yielded.add(t);
                                                $enumerator.current = t;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.ListUtility", {
        statics: {
            methods: {
                DifferenceSorted: function (T, A, B) {
                    if (B == null) {
                        return System.Linq.Enumerable.from(A).toList(T);
                    }

                    var C = new (System.Collections.Generic.List$1(T))(Math.max(4, ((A.Count - B.Count) | 0)));
                    var j = 0;
                    for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                        while (j < B.Count && Bridge.compare(A.getItem(i), B.getItem(j)) > 0) {
                            j = (j + 1) | 0;
                        }

                        if (j >= B.Count || Bridge.compare(A.getItem(i), B.getItem(j)) < 0) {
                            C.add(A.getItem(i));
                        }
                    }

                    return C;
                },
                DifferenceSorted$1: function (A, B) {
                    if (B == null) {
                        return System.Linq.Enumerable.from(A).toList(System.Int32);
                    }

                    var C = new (System.Collections.Generic.List$1(System.Int32))(Math.max(4, ((A.Count - B.Count) | 0)));
                    var j = 0;
                    for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                        while (j < B.Count && A.getItem(i) > B.getItem(j)) {
                            j = (j + 1) | 0;
                        }

                        if (j >= B.Count || A.getItem(i) < B.getItem(j)) {
                            C.add(A.getItem(i));
                        }
                    }

                    return C;
                },
                IntersectionSorted: function (T, A, B) {
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var C = new (System.Collections.Generic.List$1(T))(Math.min(A.Count, B.Count));
                    var i = 0;
                    var j = 0;

                    while (i < A.Count && j < B.Count) {
                        var compare = Bridge.compare(A.getItem(i), B.getItem(j));

                        if (compare === 0) {
                            C.add(A.getItem(i));
                        }
                        if (compare <= 0) {
                            i = (i + 1) | 0;
                        }
                        if (compare >= 0) {
                            j = (j + 1) | 0;
                        }
                    }

                    return C;
                },
                IntersectionSorted$1: function (A, B) {
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(System.Int32))();
                    }

                    var C = new (System.Collections.Generic.List$1(System.Int32))(Math.min(A.Count, B.Count));
                    var i = 0;
                    var j = 0;

                    var ac = A.Count;
                    var bc = B.Count;
                    while (i < ac && j < bc) {
                        var a = A.getItem(i);
                        var b = B.getItem(j);

                        if (a === b) {
                            C.add(a);
                        }
                        if (a <= b) {
                            i = (i + 1) | 0;
                        }
                        if (a >= b) {
                            j = (j + 1) | 0;
                        }
                    }

                    return C;
                },
                IntersectionCountSorted$1: function (T, A, B) {
                    if (A == null || B == null) {
                        return 0;
                    }

                    var count = 0;
                    var i = 0;
                    var j = 0;

                    while (i < A.Count && j < B.Count) {
                        var compare = Bridge.compare(A.getItem(i), B.getItem(j));

                        if (compare === 0) {
                            count = (count + 1) | 0;
                        }
                        if (compare <= 0) {
                            i = (i + 1) | 0;
                        }
                        if (compare >= 0) {
                            j = (j + 1) | 0;
                        }
                    }

                    return count;
                },
                IntersectionCountSorted: function (A, B) {
                    if (A == null || B == null) {
                        return 0;
                    }

                    var count = 0;
                    var i = 0;
                    var j = 0;

                    var ac = A.Count;
                    var bc = B.Count;
                    while (i < ac && j < bc) {
                        var a = A.getItem(i);
                        var b = B.getItem(j);

                        if (a === b) {
                            count = (count + 1) | 0;
                        }
                        if (a <= b) {
                            i = (i + 1) | 0;
                        }
                        if (a >= b) {
                            j = (j + 1) | 0;
                        }
                    }

                    return count;
                },
                UnionSorted: function (T, A, B) {
                    var list = Algorithms.Utility.ListUtility.DifferenceSorted(T, A, B);
                    list.addRange(Algorithms.Utility.ListUtility.DifferenceSorted(T, B, A));

                    return list;
                },
                UnionSorted$1: function (A, B) {
                    var list = Algorithms.Utility.ListUtility.DifferenceSorted$1(A, B);
                    list.addRange(Algorithms.Utility.ListUtility.DifferenceSorted$1(B, A));

                    return list;
                },
                EqualSorted$1: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                EqualSorted: function (A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                SubsetEqualSorted$1: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                SubsetEqualSorted: function (A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                SubsetSorted$1: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                SubsetSorted: function (A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                MaximalElementsSorted: function (T, A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                MaximalElementsSorted$1: function (A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(System.Int32), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqualSorted(head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqualSorted(set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                MultiSetIntersection: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).MultiSetIntersection(A, B);
                },
                MultiSetIntersectionCount: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).MultiSetIntersectionCount(A, B);
                },
                MultiSetEqual: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                MultiSetSubsetEqual: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                MultiSetSubset: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                BinomialCoefficient: function (n, k) {
                    if (k.lt(System.Int64(0))) {
                        return System.Int64(1);
                    }

                    var max = System.Int64.max(k, n.sub(k));
                    var min = System.Int64.min(k, n.sub(k));

                    var result = System.Int64(1);
                    while (n.gt(max)) {
                        result = result.mul(n);
                        n = n.dec();
                    }

                    while (min.gt(System.Int64(0))) {
                        result = result.div(min);

                        min = min.dec();
                    }

                    return result;
                },
                ToString: function (T, A) {
                    var $t;
                    var sb = new System.Text.StringBuilder();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            sb.appendFormat("{0}, ", t.toString());
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return System.String.trimEnd(sb.toString(), [32, 44]);
                },
                Difference: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Difference(A, B);
                },
                Intersection: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Intersection(A, B);
                },
                IntersectionCount: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).IntersectionCount(A, B);
                },
                Union$1: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Union$1(A, B);
                },
                Union: function (T, A, b) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Union(A, b);
                },
                Equal: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                SubsetEqual: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                Subset: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                MaximalElements: function (T, A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqual(T, head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqual(T, set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                GenerateSublists: function (T, list) {
                    var sublists = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    sublists.add(new (System.Collections.Generic.List$1(T))());

                    var clone = new (System.Collections.Generic.List$1(T))(list);

                    while (clone.Count > 0) {
                        var head = clone.getItem(0);

                        var count = sublists.Count;
                        for (var i = 0; i < count; i = (i + 1) | 0) {
                            var union = new (System.Collections.Generic.List$1(T))(sublists.getItem(i));
                            union.add(head);

                            sublists.add(union);
                        }

                        clone.removeAt(0);
                    }

                    return sublists;
                },
                GenerateSublists$1: function (T, list, size) {
                    var $t;
                    var sublists = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    var n = list.Count;
                    $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, size), System.Collections.Generic.List$1(System.Boolean));
                    try {
                        while ($t.moveNext()) {
                            var inOut = $t.Current;
                            sublists.add(Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return sublists;
                },
                EnumerateSublists: function (T, list) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function (T, list) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            n,
                            $t,
                            inOut,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            n = list.Count;
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex(n), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    inOut = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateSublists$1: function (T, list, size) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function (T, list, size) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            n,
                            $t,
                            inOut,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            n = list.Count;
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, size), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    inOut = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                NextSublist: function (T, list, size, state) {
                    var n = list.Count;
                    var areMore = Algorithms.Utility.ListUtility.NextShortLex$1(n, size, state);

                    var sublist = Algorithms.Utility.ListUtility.ExtractSublist(T, list, state.v);

                    if (!areMore) {
                        state.v = null;
                    }

                    return sublist;
                },
                ExtractSublist: function (T, list, inOut) {
                    var sublist = new (System.Collections.Generic.List$1(T))();
                    for (var i = 0; i < inOut.Count; i = (i + 1) | 0) {
                        if (inOut.getItem(i)) {
                            sublist.add(list.getItem(i));
                        }
                    }

                    return sublist;
                },
                EnumerateShortLex$1: function (n, k) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n, k) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            list,
                            i,
                            i1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            k = Math.max(0, k);

                                                list = new (System.Collections.Generic.List$1(System.Boolean))(n);
                                                for (i = 0; i < k; i = (i + 1) | 0) {
                                                    list.add(true);
                                                }
                                                for (i1 = k; i1 < n; i1 = (i1 + 1) | 0) {
                                                    list.add(false);
                                                }

                                                
                                        }
                                        case 1: {
                                            $enumerator.current = list;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 3: {
                                            if ( Algorithms.Utility.ListUtility.NextSameTrueCount(list, k) ) {

                                                    $step = 1;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateShortLex: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            list,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            list = new (System.Collections.Generic.List$1(System.Boolean))(n);
                                                for (i = 0; i < n; i = (i + 1) | 0) {
                                                    list.add(false);
                                                }

                                                
                                        }
                                        case 1: {
                                            $enumerator.current = list;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 3: {
                                            if ( Algorithms.Utility.ListUtility.Next(list) ) {

                                                    $step = 1;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateShortLexNonempty: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            k,
                            $t,
                            list,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            k = 1;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( k <= n ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, k), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    list = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = list;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            k = (k + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 8: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                NextShortLex$1: function (n, k, state) {
                    if (state.v == null) {
                        k = Math.max(0, k);

                        state.v = new (System.Collections.Generic.List$1(System.Boolean))(n);
                        for (var i = 0; i < k; i = (i + 1) | 0) {
                            state.v.add(true);
                        }
                        for (var i1 = k; i1 < n; i1 = (i1 + 1) | 0) {
                            state.v.add(false);
                        }

                        return k > 0 && k < n;
                    }

                    return Algorithms.Utility.ListUtility.NextSameTrueCount(state.v, k);
                },
                NextShortLex: function (n, k, state) {
                    if (state.v == null) {
                        k = Math.max(0, k);

                        state.v = System.Array.init(n, 0, System.Int32);
                        for (var i = 0; i < k; i = (i + 1) | 0) {
                            state.v[System.Array.index(i, state.v)] = 1;
                        }

                        return k <= 0 || k >= n;
                    }

                    var done = !Algorithms.Utility.ListUtility.NextSameOnCount(state.v, k);

                    if (done) {
                        for (var i1 = 0; i1 < k; i1 = (i1 + 1) | 0) {
                            state.v[System.Array.index(i1, state.v)] = 1;
                        }

                        for (var i2 = k; i2 < n; i2 = (i2 + 1) | 0) {
                            state.v[System.Array.index(i2, state.v)] = 0;
                        }
                    }

                    return done;
                },
                Next: function (list) {
                    var trueCount = System.Linq.Enumerable.from(Bridge.cast(list, System.Collections.Generic.IEnumerable$1(System.Boolean))).count($asm.$.Algorithms.Utility.ListUtility.f2);
                    if (trueCount === list.Count) {
                        return false;
                    }

                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole(list);

                    if (firstHole >= list.Count) {
                        for (var i = 0; i < ((trueCount + 1) | 0); i = (i + 1) | 0) {
                            list.setItem(i, true);
                        }
                        for (var i1 = (trueCount + 1) | 0; i1 < list.Count; i1 = (i1 + 1) | 0) {
                            list.setItem(i1, false);
                        }
                    } else {
                        list.setItem(firstHole, true);

                        var initialTrues = trueCount;
                        for (var i2 = firstHole; i2 < list.Count; i2 = (i2 + 1) | 0) {
                            if (list.getItem(i2)) {
                                initialTrues = (initialTrues - 1) | 0;
                            }
                        }

                        for (var i3 = 0; i3 < initialTrues; i3 = (i3 + 1) | 0) {
                            list.setItem(i3, true);
                        }
                        for (var i4 = initialTrues; i4 < firstHole; i4 = (i4 + 1) | 0) {
                            list.setItem(i4, false);
                        }
                    }

                    return true;
                },
                NextSameTrueCount: function (list, trueCount) {
                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole(list);

                    if (firstHole >= list.Count) {
                        return false;
                    }

                    list.setItem(firstHole, true);

                    var initialTrues = trueCount;
                    for (var i = firstHole; i < list.Count; i = (i + 1) | 0) {
                        if (list.getItem(i)) {
                            initialTrues = (initialTrues - 1) | 0;
                        }
                    }

                    for (var i1 = 0; i1 < initialTrues; i1 = (i1 + 1) | 0) {
                        list.setItem(i1, true);
                    }
                    for (var i2 = initialTrues; i2 < firstHole; i2 = (i2 + 1) | 0) {
                        list.setItem(i2, false);
                    }

                    return true;
                },
                FindFirstHole: function (list) {
                    var i = 0;
                    while (i < ((list.Count - 1) | 0)) {
                        if (list.getItem(i) && !list.getItem(((i + 1) | 0))) {
                            break;
                        }

                        i = (i + 1) | 0;
                    }

                    return ((i + 1) | 0);
                },
                FindFirstHole$1: function (list) {
                    var i = 0;
                    while (i < ((list.length - 1) | 0)) {
                        if (list[System.Array.index(i, list)] === 1 && list[System.Array.index(((i + 1) | 0), list)] === 0) {
                            break;
                        }

                        i = (i + 1) | 0;
                    }

                    return ((i + 1) | 0);
                },
                NextSameOnCount: function (list, trueCount) {
                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole$1(list);

                    if (firstHole >= list.length) {
                        return false;
                    }

                    list[System.Array.index(firstHole, list)] = 1;

                    var initialOnes = trueCount;
                    for (var i = firstHole; i < list.length; i = (i + 1) | 0) {
                        initialOnes = (initialOnes - list[System.Array.index(i, list)]) | 0;
                    }

                    for (var i1 = 0; i1 < initialOnes; i1 = (i1 + 1) | 0) {
                        list[System.Array.index(i1, list)] = 1;
                    }
                    for (var i2 = initialOnes; i2 < firstHole; i2 = (i2 + 1) | 0) {
                        list[System.Array.index(i2, list)] = 0;
                    }

                    return true;
                },
                EnumeratePartitionsUnordered: function (sizes) {
                    return Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)), Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, 0), $asm.$.Algorithms.Utility.ListUtility.f4);
                },
                EnumeratePartitions: function (sizes) {
                    return Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, 0);
                },
                EnumeratePartitions$1: function (sizes, item) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (sizes, item) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            childless,
                            i,
                            $t,
                            partition,
                            partition1,
                            i1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            childless = true;
                                                i = 0;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i < sizes.length ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (sizes[System.Array.index(i, sizes)] <= 0) {
                                                    $step = 7;
                                                    continue;
                                                }

                                                childless = false;

                                                sizes[System.Array.index(i, sizes)] = (sizes[System.Array.index(i, sizes)] - 1) | 0;

                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, ((item + 1) | 0)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            partition.getItem(i).add(item);
                                                $enumerator.current = partition;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            sizes[System.Array.index(i, sizes)] = (sizes[System.Array.index(i, sizes)] + 1) | 0;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            i = (i + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 8: {
                                            if (childless) {
                                                    $step = 9;
                                                    continue;
                                                } 
                                                $step = 11;
                                                continue;
                                        }
                                        case 9: {
                                            partition1 = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                                for (i1 = 0; i1 < sizes.length; i1 = (i1 + 1) | 0) {
                                                    partition1.add(new (System.Collections.Generic.List$1(System.Int32))());
                                                }

                                                $enumerator.current = partition1;
                                                $step = 10;
                                                return true;
                                        }
                                        case 10: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 11: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("Algorithms.Utility.ListUtility", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.ListUtility, {
        f1: function (x) { },
        f2: function (b) {
            return b;
        },
        f3: function (a, b) {
            var $t;
            return Algorithms.Utility.ListUtility.Equal(System.Int32, a, b) ? ($t = new Algorithms.Utility.PartialOrderResult(), $t.AtMost = true, $t.AtLeast = true, $t) : new Algorithms.Utility.PartialOrderResult();
        },
        f4: function (aa, bb) {
            return Algorithms.Utility.PartialOrder.Embeds(System.Collections.Generic.List$1(System.Int32), aa, bb, $asm.$.Algorithms.Utility.ListUtility.f3);
        }
    });

    Bridge.define("Algorithms.Utility.ListUtility.ListUtilityGeneric$1", function (T) { return {
        statics: {
            fields: {
                _set: null,
                _multiSet: null
            },
            ctors: {
                init: function () {
                    this._set = new (System.Collections.Generic.HashSet$1(T)).ctor();
                    this._multiSet = new (System.Collections.Generic.Dictionary$2(T,System.Int32))();
                }
            },
            methods: {
                Intersection: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var intersection = new (System.Collections.Generic.List$1(T))(inB.Count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (inB.contains(t1)) {
                                intersection.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return intersection;
                },
                IntersectionCount: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return 0;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var count = 0;
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (inB.contains(t1)) {
                                count = (count + 1) | 0;
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return count;
                },
                Difference: function (A, B) {
                    var $t, $t1;
                    if (A == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }
                    if (B == null) {
                        B = new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var difference = new (System.Collections.Generic.List$1(T))(inB.Count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (!inB.contains(t1)) {
                                difference.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return difference;
                },
                Union$1: function (A, B) {
                    var $t, $t1;
                    if (A == null && B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }
                    if (A == null) {
                        return B;
                    }
                    if (B == null) {
                        return A;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var union = new (System.Collections.Generic.List$1(T))(B);
                    $t1 = Bridge.getEnumerator(A);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (!inB.contains(t1)) {
                                union.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return union;
                },
                Union: function (A, b) {
                    var union = new (System.Collections.Generic.List$1(T))(A);
                    if (!union.contains(b)) {
                        union.add(b);
                    }

                    return union;
                },
                MultiSetIntersection: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._multiSet;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var count = { };
                            inB.tryGetValue(t, count);

                            inB.set(t, (count.v + 1) | 0);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var intersection = new (System.Collections.Generic.List$1(T))(inB.count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            var count1 = { };
                            inB.tryGetValue(t1, count1);

                            if (count1.v > 0) {
                                intersection.add(t1);
                                inB.set(t1, (count1.v - 1) | 0);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return intersection;
                },
                MultiSetIntersectionCount: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return 0;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._multiSet;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var count = { };
                            inB.tryGetValue(t, count);

                            inB.set(t, (count.v + 1) | 0);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var total = 0;
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            var count1 = { };
                            inB.tryGetValue(t1, count1);

                            if (count1.v > 0) {
                                total = (total + 1) | 0;
                                inB.set(t1, (count1.v - 1) | 0);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return total;
                }
            }
        }
    }; });

    Bridge.define("Algorithms.Utility.PartialOrder", {
        statics: {
            methods: {
                Embeds: function (T, A, B, order) {
                    var $t;
                    if (A.Count > B.Count) {
                        return false;
                    }

                    var n = (A.Count + B.Count) | 0;
                    var adjacencies = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(A.Count);

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var a = $t.Current;
                            var neighbors = new (System.Collections.Generic.List$1(System.Int32))();
                            for (var i = 0; i < B.Count; i = (i + 1) | 0) {
                                var result = order(a, B.getItem(i));
                                if (result.AtMost) {
                                    neighbors.add(i);
                                }
                            }

                            adjacencies.add(neighbors);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return Algorithms.Utility.Flows.BipartiteMaximumMatching(n, adjacencies) === A.Count;
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.PartialOrderResult", {
        $kind: "struct",
        statics: {
            methods: {
                getDefaultValue: function () { return new Algorithms.Utility.PartialOrderResult(); }
            }
        },
        fields: {
            AtMost: false,
            AtLeast: false
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([7175930089, this.AtMost, this.AtLeast]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, Algorithms.Utility.PartialOrderResult)) {
                    return false;
                }
                return Bridge.equals(this.AtMost, o.AtMost) && Bridge.equals(this.AtLeast, o.AtLeast);
            },
            $clone: function (to) {
                var s = to || new Algorithms.Utility.PartialOrderResult();
                s.AtMost = this.AtMost;
                s.AtLeast = this.AtLeast;
                return s;
            }
        }
    });

    Bridge.define("Algorithms.Utility.Permutation", {
        statics: {
            methods: {
                EnumerateAll: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(Algorithms.Utility.Permutation))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            count,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Utility.Permutation))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            count = Algorithms.Counting.Factorial(n);

                                                i = System.Int64(0);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i.lt(count) ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = new Algorithms.Utility.Permutation.ctor(new Algorithms.Utility.Factoradic.$ctor1(i, n));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            i = i.inc();
                                            $step = 1;
                                            continue;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                op_Multiply: function (p1, p2) {
                    if (Algorithms.Utility.Permutation.op_Equality(p1, null) || Algorithms.Utility.Permutation.op_Equality(p2, null)) {
                        return null;
                    }

                    if (p1.N !== p2.N) {
                        throw new System.Exception("You tried to multiply permutations of different sets.");
                    }

                    var sequence = new (System.Collections.Generic.List$1(System.Int32))(p2.N);

                    for (var i = 0; i < p2.N; i = (i + 1) | 0) {
                        sequence.add(p1.getItem(p2.getItem(i)));
                    }

                    return new Algorithms.Utility.Permutation.$ctor1(sequence);
                },
                op_Equality: function (p1, p2) {
                    if (p1 == null && p2 == null) {
                        return true;
                    }
                    if (p1 == null || p2 == null) {
                        return false;
                    }

                    return p1.equals(p2);
                },
                op_Inequality: function (p1, p2) {
                    return !(Algorithms.Utility.Permutation.op_Equality(p1, p2));
                }
            }
        },
        props: {
            Sequence: null,
            N: 0
        },
        ctors: {
            ctor: function (f) {
                this.$initialize();
                var sequence = new (System.Collections.Generic.List$1(System.Int32))(f.Digits.Count);
                for (var i = 0; i < f.Digits.Count; i = (i + 1) | 0) {
                    sequence.add(i);
                }

                for (var i1 = 0; i1 < f.Digits.Count; i1 = (i1 + 1) | 0) {
                    var j = (f.Digits.getItem(((((f.Digits.Count - 1) | 0) - i1) | 0)) + i1) | 0;

                    sequence.insert(i1, sequence.getItem(j));
                    sequence.removeAt(((j + 1) | 0));
                }

                this.Sequence = sequence;
                this.N = this.Sequence.Count;
            },
            $ctor1: function (sequence) {
                this.$initialize();                var $t;

                this.Sequence = new (System.Collections.Generic.List$1(System.Int32))(sequence);
                this.N = this.Sequence.Count;

                var hash = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Boolean))();
                $t = Bridge.getEnumerator(sequence);
                try {
                    while ($t.moveNext()) {
                        var i = $t.Current;
                        if (hash.containsKey(i)) {
                            throw new System.Exception("The supplied sequence has duplicates.");
                        }

                        if (i < 0 || i > ((this.N - 1) | 0)) {
                            throw new System.Exception("The supplied sequence has elements that are out of range.");
                        }

                        hash.set(i, true);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        getItem: function (i) {
            return this.Sequence.getItem(i);
        },
        Apply: function (T, list) {
            if (list == null || list.Count !== this.N) {
                throw new System.Exception("The permutation cannot be applied to the given list.");
            }

            var permutedList = new (System.Collections.Generic.List$1(T))(this.N);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                permutedList.add(list.getItem(this.getItem(i)));
            }

            return permutedList;
        },
        Inverse: function () {
            var sequence = System.Array.init(this.N, 0, System.Int32);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                sequence[System.Array.index(this.getItem(i), sequence)] = i;
            }

            return new Algorithms.Utility.Permutation.$ctor1(new (System.Collections.Generic.List$1(System.Int32))(sequence));
        },
        equals: function (obj) {
            if (obj == null) {
                return false;
            }

            return Bridge.referenceEquals(this.toString(), obj.toString());
        },
        toString: function () {
            return System.String.concat("(", Bridge.toArray(System.Linq.Enumerable.from(this.Sequence).select($asm.$.Algorithms.Utility.Permutation.f1)).join(" "), ")");
        },
        getHashCode: function () {
            return Bridge.getHashCode(this.toString());
        }
    }
    });

    Bridge.ns("Algorithms.Utility.Permutation", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.Permutation, {
        f1: function (i) {
            return ((i + 1) | 0);
        }
    });

    Bridge.define("Algorithms.Utility.SafeCollection$1", function (T) { return {
        inherits: [System.Collections.Generic.ICollection$1(T)],
        fields: {
            _count: 0,
            _first: null,
            _last: null
        },
        props: {
            Count: {
                get: function () {
                    return this._count;
                }
            },
            IsReadOnly: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "add", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$add",
            "clear", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$clear",
            "contains", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$contains",
            "copyTo", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$copyTo",
            "Count", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$Count",
            "IsReadOnly", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$IsReadOnly",
            "remove", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$remove",
            "getEnumerator", ["System$Collections$Generic$IEnumerable$1$" + Bridge.getTypeAlias(T) + "$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]
        ],
        ctors: {
            ctor: function () {
                this.$initialize();
                this._first = new (Algorithms.Utility.SafeCollection$1.Node(T))();
                this._last = this._first;
            }
        },
        methods: {
            add: function (item) {
                var $t;
                this._last.Next = ($t = new (Algorithms.Utility.SafeCollection$1.Node(T))(), $t.Item = item, $t);
                this._last = this._last.Next;
                this._count = (this._count + 1) | 0;
            },
            clear: function () {
                this._first.Next = null;
                this._last = this._first;
                this._count = 0;
            },
            contains: function (item) {
                return this.FindPreviousNode(item) != null;
            },
            copyTo: function (array, arrayIndex) {
                var node = this._first;
                while (true) {
                    var next = node.Next;
                    if (next == null) {
                        break;
                    }

                    array[System.Array.index(Bridge.identity(arrayIndex, (arrayIndex = (arrayIndex + 1) | 0)), array)] = next.Item;
                    node = next;
                }
            },
            remove: function (item) {
                var node = this.FindPreviousNode(item);
                if (node == null) {
                    return false;
                }

                var next = node.Next;
                if (next == null) {
                    return false;
                }

                node.Next = next.Next;
                this._count = (this._count - 1) | 0;
                return true;
            },
            getEnumerator: function () {
                var $step = 0,
                    $jumpFromFinally,
                    $returnValue,
                    node,
                    next,
                    $async_e;

                var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                    try {
                        for (;;) {
                            switch ($step) {
                                case 0: {
                                    node = this._first;
                                        
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ( true ) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                }
                                case 2: {
                                    next = node.Next;
                                        if (next == null) {
                                            $step = 4;
                                            continue;
                                        }

                                        $enumerator.current = next.Item;
                                        $step = 3;
                                        return true;
                                }
                                case 3: {
                                    node = next;

                                        $step = 1;
                                        continue;
                                }
                                case 4: {

                                }
                                default: {
                                    return false;
                                }
                            }
                        }
                    } catch($async_e1) {
                        $async_e = System.Exception.create($async_e1);
                        throw $async_e;
                    }
                }));
                return $enumerator;
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            FindPreviousNode: function (item) {
                var node = this._first;
                while (true) {
                    var next = node.Next;
                    if (next == null) {
                        break;
                    }

                    if (System.Collections.Generic.EqualityComparer$1(T).def.equals2(next.Item, item)) {
                        return node;
                    }

                    node = next;
                }

                return null;
            }
        }
    }; });

    Bridge.define("Algorithms.Utility.SafeCollection$1.Node", function (T) { return {
        fields: {
            Item: Bridge.getDefaultValue(T),
            Next: null
        }
    }; });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1", function (T) { return {
        fields: {
            _length: 0,
            _alphabet: null,
            _matchers: null,
            _generalizers: null,
            _vectorComparer: null
        },
        ctors: {
            init: function () {
                this._matchers = new (System.Collections.Generic.List$1(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T)))();
                this._vectorComparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(T))();
            },
            ctor: function (length, alphabet) {
                this.$initialize();                var $t;

                this._length = length;
                this._alphabet = alphabet;

                $t = Bridge.getEnumerator(alphabet);
                try {
                    while ($t.moveNext()) {
                        var t = $t.Current;
                        this.AddMatcher(t.toString(), (function ($me, t) {
                            return function (tt) {
                                return Bridge.equals(t, tt);
                            };
                        })(this, t));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.AddMatcher("*", $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f1);
        }
    },
    methods: {
        AddMatcher: function (name, match) {
            var $t;
            this._matchers.add(($t = new (Algorithms.Utility.SequenceGeneralizer$1.Matcher(T))(), $t.Name = name, $t.Match = match, $t));
        },
        Generalize: function (examples, nonExamples, mostGeneral) {
            var $t, $t1;
            if (mostGeneral === void 0) { mostGeneral = false; }
            this.BuildMatcherLattice();

            var possibles = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            $t = Bridge.getEnumerator(examples);
            try {
                while ($t.moveNext()) {
                    var example = $t.Current;
                    var asMatcherIndices = System.Linq.Enumerable.from(example).select(Bridge.fn.bind(this, function (t) {
                            return Algorithms.GenericExtensions.FirstIndex(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T), this._matchers, function (m) {
                                return Bridge.referenceEquals(m.Name, t.toString());
                            });
                        })).toList(System.Int32);
                    possibles.addRange(System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.from(asMatcherIndices).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f2)))).select($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f3));
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            possibles = System.Linq.Enumerable.from(possibles).distinct(this._vectorComparer).toList(System.Collections.Generic.List$1(System.Int32));

            $t1 = Bridge.getEnumerator(nonExamples);
            try {
                while ($t1.moveNext()) {
                    var nonExample = $t1.Current;
                    var asMatcherIndices1 = System.Linq.Enumerable.from(nonExample).select(Bridge.fn.bind(this, function (t) {
                            return Algorithms.GenericExtensions.FirstIndex(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T), this._matchers, function (m) {
                                return Bridge.referenceEquals(m.Name, t.toString());
                            });
                        })).toList(System.Int32);
                    possibles = System.Linq.Enumerable.from(possibles).except(System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.from(asMatcherIndices1).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f2)))).select($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f3), this._vectorComparer).toList(System.Collections.Generic.List$1(System.Int32));
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }
            var generalizations = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            var remaining = System.Linq.Enumerable.from(examples).toList(System.Collections.Generic.List$1(T));
            while (remaining.Count > 0) {
                var ordered = { v : System.Linq.Enumerable.from(possibles).select(Bridge.fn.bind(this, function (pp) {
                        return new $asm.$AnonymousType$3(pp, System.Linq.Enumerable.from(remaining).count(Bridge.fn.bind(this, function (r) {
                                return this.IsMatch(r, pp);
                            })));
                    })).orderByDescending($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f4).toList(System.Object) };
                var maxers = System.Linq.Enumerable.from(ordered.v).takeWhile((function ($me, ordered) {
                        return function (xx) {
                            return xx.Count === ordered.v.getItem(0).Count;
                        };
                    })(this, ordered)).orderByDescending(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f6));

                var best = { v : mostGeneral ? maxers.first().Vector : maxers.last().Vector };

                generalizations.add(best.v);
                Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), remaining, (function ($me, best) {
                    return Bridge.fn.bind($me, function (r) {
                        return this.IsMatch(r, best.v);
                    });
                })(this, best), $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f7);
            }

            return System.Linq.Enumerable.from(generalizations).select(Bridge.fn.bind(this, function (l) {
                    return System.Linq.Enumerable.from(l).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f8)).toList(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T));
                })).toList(System.Collections.Generic.List$1(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T)));
        },
        BuildMatcherLattice: function () {
            this._generalizers = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this._matchers.Count; i = (i + 1) | 0) {
                this._generalizers.set(i, new (System.Collections.Generic.List$1(System.Int32))());
                var matches = System.Linq.Enumerable.from(this._alphabet).where(Bridge.fn.bind(this, function (a) {
                        return this._matchers.getItem(i).Match(a);
                    })).toList(T);

                for (var j = { v : 0 }; j.v < this._matchers.Count; j.v = (j.v + 1) | 0) {
                    if (Algorithms.Utility.ListUtility.SubsetEqual(T, matches, System.Linq.Enumerable.from(this._alphabet).where((function ($me, j) {
                            return Bridge.fn.bind($me, function (a) {
                                return this._matchers.getItem(j.v).Match(a);
                            });
                        })(this, j)).toList(T))) {
                        this._generalizers.get(i).add(j.v);
                    }
                }
            }
        },
        IsMatch: function (vector, m) {
            for (var i = 0; i < vector.Count; i = (i + 1) | 0) {
                if (!this._matchers.getItem(m.getItem(i)).Match(vector.getItem(i))) {
                    return false;
                }
            }

            return true;
        }
    }
    }; });

    Bridge.define("$AnonymousType$3", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (vector, count) {
                this.Vector = vector;
                this.Count = count;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$3)) {
                    return false;
                }
                return Bridge.equals(this.Vector, o.Vector) && Bridge.equals(this.Count, o.Count);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196188, this.Vector, this.Count]);
                return h;
            },
            toJSON: function () {
                return {
                    Vector : this.Vector,
                    Count : this.Count
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"Count","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_Count","t":8,"rt":System.Int32,"fg":"Count"},"fn":"Count"},{"a":2,"n":"Vector","t":16,"rt":System.Collections.Generic.List$1(System.Int32),"g":{"a":2,"n":"get_Vector","t":8,"rt":System.Collections.Generic.List$1(System.Int32),"fg":"Vector"},"fn":"Vector"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.Utility.SequenceGeneralizer$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.SequenceGeneralizer$1, {
        f1: function (tt) {
            return true;
        },
        f2: function (i) {
            return this._generalizers.get(i);
        },
        f3: function (v) {
            return System.Linq.Enumerable.from(v).toList(System.Int32);
        },
        f4: function (xx) {
            return xx.Count;
        },
        f5: function (total, x) {
            if (Bridge.referenceEquals(this._matchers.getItem(x).Name, "*")) {
                return Bridge.Int.mul(total, this._alphabet.Count);
            }
            if (System.String.startsWith(this._matchers.getItem(x).Name, "!")) {
                return Bridge.Int.mul(total, (((this._alphabet.Count - 1) | 0)));
            }

            return total;
        },
        f6: function (xx) {
            return System.Linq.Enumerable.from(xx.Vector).aggregate(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f5));
        },
        f7: function (x) { },
        f8: function (i) {
            return this._matchers.getItem(i);
        }
    });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1.Matcher", function (T) { return {
        fields: {
            Name: null,
            Match: null
        }
    }; });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1.VectorComparer", function (T) { return {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(System.Int32))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (l) {
                var $t;
                var hash = 17;
                $t = Bridge.getEnumerator(l);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 23) | 0) + x) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    }; });

    Bridge.define("Algorithms.WordGame.AccessibilityChecker", {
        fields: {
            _alphabet: null
        },
        ctors: {
            ctor: function (alphabet) {
                this.$initialize();
                this._alphabet = System.Linq.Enumerable.from(alphabet).toList(System.Char);
            }
        },
        methods: {
            IsAccessible: function (w, S) {
                var $t, $t1, $t2;
                $t = Bridge.getEnumerator(this._alphabet);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        var goodChoiceAlwaysExists = true;

                        var swappers = System.Linq.Enumerable.from(this._alphabet).except(System.Array.init([c], System.Char)).toList(System.Char);
                        $t1 = Bridge.getEnumerator(this.EnumeratePartitions(w, swappers), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                        try {
                            while ($t1.moveNext()) {
                                var partition = $t1.Current;
                                var goodChoiceExists = false;
                                $t2 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, System.Linq.Enumerable.range(0, partition.Count).toList(System.Int32)));
                                try {
                                    while ($t2.moveNext()) {
                                        var choice = $t2.Current;
                                        if (choice.Count <= 0) {
                                            continue;
                                        }

                                        var ww = this.MakeMove(w, partition, choice, swappers);
                                        if (S.contains(ww)) {
                                            goodChoiceExists = true;
                                            break;
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!goodChoiceExists) {
                                    goodChoiceAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (goodChoiceAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            EnumeratePartitions: function (w, swappers) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (w, swappers) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        chars,
                        indices,
                        indexPartitions,
                        $t,
                        indexPartition,
                        partition,
                        $t1,
                        indexPart,
                        part,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        chars = System.String.toCharArray(w, 0, w.length);
                                            indices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Char, chars, function (c) {
                                                    return swappers.contains(c);
                                                })).toList(System.Int32);

                                            indexPartitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(indices.Count);
                                            $t = Bridge.getEnumerator(indexPartitions);
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                indexPartition = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        partition = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(indexPartition.Count);
                                            $t1 = Bridge.getEnumerator(indexPartition);
                                            try {
                                                while ($t1.moveNext()) {
                                                    indexPart = $t1.Current;
                                                    part = System.Linq.Enumerable.from(indexPart).select(function (i) {
                                                            return indices.getItem(i);
                                                        }).toList(System.Int32);
                                                    partition.add(part);
                                                }
                                            } finally {
                                                if (Bridge.is($t1, System.IDisposable)) {
                                                    $t1.System$IDisposable$dispose();
                                                }
                                            }
                                            $enumerator.current = partition;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            MakeMove: function (w, partition, choice, swappers) {
                var $t;
                var chars = System.String.toCharArray(w, 0, w.length);
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(choice).selectMany(function (i) {
                        return partition.getItem(i);
                    }));
                try {
                    while ($t.moveNext()) {
                        var j = $t.Current;
                        chars[System.Array.index(j, chars)] = swappers.getItem(((1 - swappers.indexOf(chars[System.Array.index(j, chars)])) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return String.fromCharCode.apply(null, chars);
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Boxification", {
        statics: {
            methods: {
                Split: function (T, allPoints) {
                    var chunks = new (System.Collections.Generic.List$1(System.Object))();

                    var points = System.Linq.Enumerable.from(allPoints).toList(System.Collections.Generic.List$1(T));
                    var n = allPoints.getItem(0).Count;

                    while (points.Count > 0) {
                        var bestT = 1;
                        var bestSplit = { v : 1 };

                        for (var split = { v : 1 }; split.v < ((n - 1) | 0); split.v = (split.v + 1) | 0) {
                            var left = { v : System.Linq.Enumerable.from(points).select((function ($me, split) {
                                    return function (p) {
                                        return System.Linq.Enumerable.from(p).take(split.v).toList(T);
                                    };
                                })(this, split)).toList(System.Collections.Generic.List$1(T)) };
                            var right = { v : System.Linq.Enumerable.from(points).select((function ($me, split) {
                                    return function (p) {
                                        return System.Linq.Enumerable.from(p).skip(split.v).toList(T);
                                    };
                                })(this, split)).toList(System.Collections.Generic.List$1(T)) };

                            var t = (Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), (function ($me, left, right) {
                                return function (i) {
                                    var lefts = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(left.v).take(i), function (l1, l2) {
                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                        })).toList(System.Collections.Generic.List$1(T));
                                    var rights = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(right.v).take(i), function (l1, l2) {
                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                        })).toList(System.Collections.Generic.List$1(T));

                                    var span = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(T), lefts, rights)).select(function (tup) {
                                            return System.Linq.Enumerable.from(tup.item1).concat(tup.item2).toList(T);
                                        }).toList(System.Collections.Generic.List$1(T));
                                    var allExist = System.Linq.Enumerable.from(span).all(function (p) {
                                            return System.Linq.Enumerable.from(points).any(function (pp) {
                                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                                });
                                        });

                                    return allExist ? 1 : -1;
                                };
                            })(this, left, right)) - 1) | 0;

                            if (t >= bestT) {
                                if (t > bestT || Math.abs(((((Bridge.Int.div(n, 2)) | 0) - split.v) | 0)) < Math.abs(((((Bridge.Int.div(n, 2)) | 0) - bestSplit.v) | 0))) {
                                    bestT = t;
                                    bestSplit.v = split.v;
                                }
                            }
                        }

                        var l = System.Linq.Enumerable.from(points).select((function ($me, bestSplit) {
                                return function (p) {
                                    return System.Linq.Enumerable.from(p).take(bestSplit.v).toList(T);
                                };
                            })(this, bestSplit)).toList(System.Collections.Generic.List$1(T));
                        var r = System.Linq.Enumerable.from(points).select((function ($me, bestSplit) {
                                return function (p) {
                                    return System.Linq.Enumerable.from(p).skip(bestSplit.v).toList(T);
                                };
                            })(this, bestSplit)).toList(System.Collections.Generic.List$1(T));
                        var ls = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(l).take(bestT), function (l1, l2) {
                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                            })).toList(System.Collections.Generic.List$1(T));
                        var rs = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(r).take(bestT), function (l1, l2) {
                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                            })).toList(System.Collections.Generic.List$1(T));
                        var s = { v : System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(T), ls, rs)).select(function (tup) {
                                return System.Linq.Enumerable.from(tup.item1).concat(tup.item2).toList(T);
                            }).toList(System.Collections.Generic.List$1(T)) };

                        chunks.add({ item1: ls, item2: rs });
                        Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), points, (function ($me, s) {
                            return function (p) {
                                return System.Linq.Enumerable.from(s.v).any(function (pp) {
                                        return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                    });
                            };
                        })(this, s), $asm.$.Algorithms.WordGame.Boxification.f1);
                    }

                    return chunks;
                },
                SplitMultiway: function (T, allPoints) {
                    var $t;
                    var chunks = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))))();

                    var points = System.Linq.Enumerable.from(allPoints).toList(System.Collections.Generic.List$1(T));
                    var n = allPoints.getItem(0).Count;

                    while (points.Count > 0) {
                        var bestT = 1;
                        var bestSplit = { v : new (System.Collections.Generic.List$1(System.Int32))() };

                        $t = Bridge.getEnumerator(System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, System.Linq.Enumerable.range(0, n).toList(System.Int32))).select($asm.$.Algorithms.WordGame.Boxification.f3));
                        try {
                            while ($t.moveNext()) {
                                var split = $t.Current;
                                if (Algorithms.WordGame.Boxification.ExtractRanges(T, split, points.getItem(0)).Count <= 1) {
                                    continue;
                                }

                                var t = (Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), function (i) {
                                    var ranges = System.Linq.Enumerable.from(points).take(i).select(function (p) {
                                        return Algorithms.WordGame.Boxification.ExtractRanges(T, split, p);
                                    }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                    var rangeValues = System.Linq.Enumerable.from(ranges).aggregate(System.Linq.Enumerable.range(0, ranges.getItem(0).Count).select(function (__) {
                                            return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))), function (union, next) {
                                            return System.Linq.Enumerable.from(union).zip(next, function (A, B) {
                                                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), Algorithms.Utility.LinqExtensions.Concat(System.Collections.Generic.List$1(T), A, B), function (l1, l2) {
                                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                                        })).toList(System.Collections.Generic.List$1(T));
                                                }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                        });

                                    var cp = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Collections.Generic.List$1(T), rangeValues)).select(function (ll) {
                                            return System.Linq.Enumerable.from(ll).toList(System.Collections.Generic.List$1(T));
                                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                    var span = System.Linq.Enumerable.from(cp).select(function (ll) {
                                            return System.Linq.Enumerable.from(ll).selectMany($asm.$.Algorithms.WordGame.Boxification.f4).toList(T);
                                        }).toList(System.Collections.Generic.List$1(T));
                                    var allExist = System.Linq.Enumerable.from(span).all(function (p) {
                                            return System.Linq.Enumerable.from(points).any(function (pp) {
                                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                                });
                                        });

                                    return allExist ? 1 : -1;
                                }) - 1) | 0;

                                if (t > bestT) {
                                    bestT = t;
                                    bestSplit.v = split;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        var rr = System.Linq.Enumerable.from(points).take(bestT).select((function ($me, bestSplit) {
                            return function (p) {
                                return Algorithms.WordGame.Boxification.ExtractRanges(T, bestSplit.v, p);
                            };
                        })(this, bestSplit)).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                        var rrv = System.Linq.Enumerable.from(rr).aggregate(System.Linq.Enumerable.range(0, rr.getItem(0).Count).select(function (__) {
                                return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                            }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))), function (union, next) {
                                return System.Linq.Enumerable.from(union).zip(next, function (A, B) {
                                        return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), Algorithms.Utility.LinqExtensions.Concat(System.Collections.Generic.List$1(T), A, B), function (l1, l2) {
                                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                            })).toList(System.Collections.Generic.List$1(T));
                                    }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                            });

                        var s = { v : System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Collections.Generic.List$1(T), rrv)).select(function (ll) {
                                return System.Linq.Enumerable.from(ll).selectMany($asm.$.Algorithms.WordGame.Boxification.f4).toList(T);
                            }).toList(System.Collections.Generic.List$1(T)) };

                        chunks.add(rrv);
                        Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), points, (function ($me, s) {
                            return function (p) {
                                return System.Linq.Enumerable.from(s.v).any(function (pp) {
                                        return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                    });
                            };
                        })(this, s), $asm.$.Algorithms.WordGame.Boxification.f1);
                    }

                    return chunks;
                },
                ExtractRanges: function (T, stops, l) {
                    var $t;
                    var ranges = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    var left = 0;
                    $t = Bridge.getEnumerator(stops);
                    try {
                        while ($t.moveNext()) {
                            var stop = $t.Current;
                            ranges.add(l.getRange(left, ((((stop - left) | 0) + 1) | 0)));
                            left = (stop + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (left < l.Count) {
                        ranges.add(l.getRange(left, ((l.Count - left) | 0)));
                    }

                    return ranges;
                },
                Boxify: function (T, points) {
                    var boxes = System.Linq.Enumerable.from(points).select(function (p) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(T), p);
                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                    while (true) {
                        var boxContainers = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)), boxes, boxes)).where(function (pair) {
                                return !System.Linq.Enumerable.from(pair.item1).sequenceEqual(pair.item2);
                            }).select(function (pair) {
                            return new $asm.$AnonymousType$4(pair, Algorithms.WordGame.Boxification.BoxContainer(T, System.Linq.Enumerable.from(pair.item1).concat(pair.item2).toList(System.Collections.Generic.List$1(T))));
                        });

                        var grown = boxContainers.firstOrDefault(function (bc) {
                                return Algorithms.WordGame.Boxification.ContainsBoxContainer(T, points, bc.BoxedUnion);
                            }, null);
                        if (grown == null) {
                            break;
                        }

                        var count = boxes.Count;
                        boxes.remove(grown.Pair.item1);
                        boxes.remove(grown.Pair.item2);
                        boxes.add(grown.BoxedUnion);

                        if (boxes.Count === count) {
                            break;
                        }
                    }

                    return boxes;
                },
                PrefixBoxify: function (T, points) {
                    var allPoints = System.Linq.Enumerable.from(points).toList(System.Collections.Generic.List$1(T));
                    var boxes = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))))();

                    while (true) {
                        var t = Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), function (i) {
                            return Algorithms.WordGame.Boxification.ContainsBox(T, allPoints, System.Linq.Enumerable.from(points).take(i).toList(System.Collections.Generic.List$1(T))) ? 1 : -1;
                        });

                        boxes.add(Algorithms.WordGame.Boxification.BoxContainer(T, System.Linq.Enumerable.from(points).take(t).toList(System.Collections.Generic.List$1(T))));
                        points = System.Linq.Enumerable.from(points).skip(t).toList(System.Collections.Generic.List$1(T));
                        if (points.Count <= 0) {
                            break;
                        }
                    }

                    return boxes;
                },
                ContainsBox: function (T, allPoints, points) {
                    var box = Algorithms.WordGame.Boxification.BoxContainer(T, points);
                    return Algorithms.WordGame.Boxification.ContainsBoxContainer(T, allPoints, box);
                },
                ContainsBoxContainer: function (T, allPoints, boxContainer) {
                    return System.Linq.Enumerable.from(boxContainer).all(function (p) {
                            return System.Linq.Enumerable.from(allPoints).any(function (pp) {
                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                });
                        });
                },
                BoxContainer: function (T, points) {
                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(T, System.Linq.Enumerable.range(0, points.getItem(0).Count).select(function (i) {
                            return System.Linq.Enumerable.from(points).select(function (p) {
                                    return p.getItem(i);
                                }).distinct().toList(T);
                        }))).select(function (e) {
                            return System.Linq.Enumerable.from(e).toList(T);
                        }).toList(System.Collections.Generic.List$1(T));
                },
                IsBox: function (T, points) {
                    return points.Count === Algorithms.WordGame.Boxification.BoxContainer(T, points).Count;
                },
                ToBoxString: function (T, points) {
                    return Bridge.toArray(System.Linq.Enumerable.range(0, points.getItem(0).Count).select(function (i) {
                            return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(points).select(function (p) {
                                        return p.getItem(i);
                                    }).distinct()).join(","), "}");
                        })).join(" * ");
                },
                ToMultiChunkString: function (T, multiChunk) {
                    return Bridge.toArray(System.Linq.Enumerable.from(multiChunk).select(function (chunk) {
                                return Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk);
                            })).join(" * ");
                },
                ToChunkString: function (T, chunk) {
                    return System.String.concat(Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk.item1), " * ", Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk.item2));
                },
                ToListOfListsString: function (T, l) {
                    return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(l).select(function (sl) {
                                return System.String.concat("{", Bridge.toArray(sl).join(","), "}");
                            })).join(","), "}");
                },
                Binary: function (first, last, targetDirection) {
                    var left = (first - 1) | 0;
                    var right = (last + 1) | 0;

                    while (((right - left) | 0) >= 2) {
                        var middle = (left + ((Bridge.Int.div((((right - left) | 0)), 2)) | 0)) | 0;
                        var direction = targetDirection(middle);

                        if (direction === 0) {
                            return middle;
                        } else {
                            if (direction < 0) {
                                right = middle;
                            } else {
                                left = middle;
                            }
                        }
                    }

                    if (left < first) {
                        return ((first - 1) | 0);
                    }
                    if (right > last) {
                        return ((last + 1) | 0);
                    }

                    return left;
                }
            }
        }
    });

    Bridge.define("$AnonymousType$4", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (pair, boxedUnion) {
                this.Pair = pair;
                this.BoxedUnion = boxedUnion;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$4)) {
                    return false;
                }
                return Bridge.equals(this.Pair, o.Pair) && Bridge.equals(this.BoxedUnion, o.BoxedUnion);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196189, this.Pair, this.BoxedUnion]);
                return h;
            },
            toJSON: function () {
                return {
                    Pair : this.Pair,
                    BoxedUnion : this.BoxedUnion
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"BoxedUnion","t":16,"rt":System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Object)),"g":{"a":2,"n":"get_BoxedUnion","t":8,"rt":System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Object)),"fg":"BoxedUnion"},"fn":"BoxedUnion"},{"a":2,"n":"Pair","t":16,"rt":System.Object,"g":{"a":2,"n":"get_Pair","t":8,"rt":System.Object,"fg":"Pair"},"fn":"Pair"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.Boxification", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.Boxification, {
        f1: function (x) { },
        f2: function (x) {
            return x;
        },
        f3: function (l) {
            return System.Linq.Enumerable.from(l).orderBy($asm.$.Algorithms.WordGame.Boxification.f2).toList(System.Int32);
        },
        f4: function (pp) {
            return pp;
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastAccessibilityChecker", {
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        ctors: {
            init: function () {
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            },
            ctor: function (n) {
                this.$initialize();
                this._fixerResponses = System.Array.init(1 << ((((n + 1) | 0)) >> 1), System.UInt64(0), System.UInt64);
            }
        },
        methods: {
            IsAccessible: function (board, wonBoards) {
                var $t;
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        var x = board._trace[System.Array.index(i, board._trace)];
                        var y = board._trace[System.Array.index(j, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t.moveNext()) {
                                var breakerChoice = $t.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                for (var k = 1; k < this._fixerResponseCount; k = (k + 1) | 0) {
                                    var childBoard = new Algorithms.WordGame.Optimized.FastWord.$ctor1(board._trace, i, j, this._fixerResponses[System.Array.index(k, this._fixerResponses)], board._stackCount);
                                    if (wonBoards.contains(childBoard)) {
                                        winningSwapExists = true;
                                        break;
                                    }
                                }

                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                }

                return false;
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.TarpitEnumerator", {
        statics: {
            fields: {
                Alphabet: null
            },
            ctors: {
                init: function () {
                    this.Alphabet = $asm.$.Algorithms.WordGame.TarpitEnumerator.f1(new (System.Collections.Generic.List$1(System.Char))());
                }
            },
            methods: {
                IsPermutationClosed: function (S) {
                    return System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.EnumerateAlphabetPermutations(S)).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f3).distinct().count() === 1;
                },
                RemovePermutationRedundancies: function (S) {
                    var hash = new (System.Collections.Generic.HashSet$1(System.String)).ctor();
                    var permutedLists = System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.EnumerateAlphabetPermutations(S)).toList(System.Collections.Generic.List$1(System.String));
                    for (var i = 0; i < S.Count; i = (i + 1) | 0) {
                        hash.add(System.Linq.Enumerable.from(permutedLists).select(function (l) {
                                return l.getItem(i);
                            }).orderBy($asm.$.Algorithms.WordGame.TarpitEnumerator.f2).first());
                    }

                    return System.Linq.Enumerable.from(hash).toList(System.String);
                },
                ReorderAlphabetByOccurenceRate: function (S) {
                    return System.Linq.Enumerable.from(S).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f5).toList(System.String);
                },
                EnumerateAlphabetPermutations: function (S) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function (S) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            uppered,
                            $t,
                            permutation,
                            p,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            uppered = System.Linq.Enumerable.from(S).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f6).toList(System.String);
                                                $t = Bridge.getEnumerator(Algorithms.Utility.Permutation.EnumerateAll(3), Algorithms.Utility.Permutation);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    permutation = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            p = { v : permutation.Apply(System.Char, Algorithms.WordGame.TarpitEnumerator.Alphabet) };
                                                $enumerator.current = System.Linq.Enumerable.from(uppered).select((function ($me, p) {
                                                        return function (s) {
                                                            return System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, String.fromCharCode(88), String.fromCharCode(p.v.getItem(0))), String.fromCharCode(89), String.fromCharCode(p.v.getItem(1))), String.fromCharCode(90), String.fromCharCode(p.v.getItem(2)));
                                                        };
                                                    })(this, p)).toList(System.String);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        },
        methods: {
            GenerateMinimalTarpits: function (foundTarpit) { }
        }
    });

    Bridge.define("$AnonymousType$5", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (c, rate) {
                this.C = c;
                this.Rate = rate;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$5)) {
                    return false;
                }
                return Bridge.equals(this.C, o.C) && Bridge.equals(this.Rate, o.Rate);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196190, this.C, this.Rate]);
                return h;
            },
            toJSON: function () {
                return {
                    C : this.C,
                    Rate : this.Rate
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"C","t":16,"rt":System.Char,"g":{"a":2,"n":"get_C","t":8,"rt":System.Char,"fg":"C"},"fn":"C"},{"a":2,"n":"Rate","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_Rate","t":8,"rt":System.Int32,"fg":"Rate"},"fn":"Rate"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.TarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.TarpitEnumerator, {
        f1: function (_o23) {
            _o23.add(120);
            _o23.add(121);
            _o23.add(122);
            return _o23;
        },
        f2: function (s) {
            return s;
        },
        f3: function (T) {
            return Bridge.toArray(System.Linq.Enumerable.from(T).orderBy($asm.$.Algorithms.WordGame.TarpitEnumerator.f2)).join(",");
        },
        f4: function (d) {
            return d.Rate;
        },
        f5: function (s) {
            var chars = System.String.toCharArray(s, 0, s.length);
            var p = System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.Alphabet).select(function (c) {
                    return new $asm.$AnonymousType$5(c, System.Linq.Enumerable.from(chars).count(function (cc) {
                            return cc === c;
                        }));
                }).orderByDescending($asm.$.Algorithms.WordGame.TarpitEnumerator.f4).toList(System.Object);

            return System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, String.fromCharCode(p.getItem(0).C), String.fromCharCode(88)), String.fromCharCode(p.getItem(1).C), String.fromCharCode(89)), String.fromCharCode(p.getItem(2).C), String.fromCharCode(90)).toLowerCase();

        },
        f6: function (s) {
            return s.toUpperCase();
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWord", {
        fields: {
            _trace: null,
            _length: 0,
            _stackCount: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (trace, stackCount) {
                this.$initialize();
                this._trace = trace;
                this._length = this._trace.length;
                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            },
            $ctor1: function (trace, i, j, swap, stackCount) {
                this.$initialize();
                this._trace = System.Array.init(trace.length, System.UInt64(0), System.UInt64);
                this._length = 0;
                for (var k = 0; k < trace.length; k = (k + 1) | 0) {
                    var v = System.UInt64(0);
                    if (k === i || k === j) {
                        v = trace[System.Array.index(k, trace)].xor(swap);
                    } else {
                        v = trace[System.Array.index(k, trace)];
                    }

                    var q = this._length;
                    while (q > 0 && this._trace[System.Array.index(((q - 1) | 0), this._trace)].gt(v)) {
                        q = (q - 1) | 0;
                    }

                    if (q < this._length) {
                        System.Array.copy(this._trace, q << 3, this._trace, (((q + 1) | 0)) << 3, (((this._length - q) | 0)) << 3);
                    }
                    this._trace[System.Array.index(q, this._trace)] = v;

                    this._length = (this._length + 1) | 0;
                }

                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            }
        },
        methods: {
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.WordGame.Optimized.FastWord));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._trace[System.Array.index(i, this._trace)].ne(other._trace[System.Array.index(i, other._trace)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWordGenerator", {
        methods: {
            GenerateWords: function (length) {
                var words = System.Linq.Enumerable.from(Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate(System.Linq.Enumerable.repeat(1, length), 3)).select(function (trace) {
                        return new Algorithms.WordGame.Optimized.FastWord.ctor(trace, length);
                    }).toList(Algorithms.WordGame.Optimized.FastWord);
                return words;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine", {
        statics: {
            methods: {
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    return Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate$1(sizeVector, assignment, r, 0, System.UInt64(0), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = Algorithms.Int64Usage.RightFillToMSB(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = Algorithms.Int64Usage.RightFillToMSB(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.UInt64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                                                x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.UInt64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.WordGame.WordEnumerator", {
        fields: {
            _alphabet: null
        },
        ctors: {
            ctor: function (alphabet) {
                if (alphabet === void 0) { alphabet = []; }

                Algorithms.WordGame.WordEnumerator.$ctor1.call(this, Bridge.cast(alphabet, System.Collections.Generic.IEnumerable$1(System.Char)));
            },
            $ctor1: function (alphabet) {
                this.$initialize();
                this._alphabet = System.Linq.Enumerable.from(alphabet).toList(System.Char);
            }
        },
        methods: {
            EnumerateWords: function (length) {
                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Char, System.Linq.Enumerable.repeat(this._alphabet, length))).select($asm.$.Algorithms.WordGame.WordEnumerator.f1);
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.WordEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.WordEnumerator, {
        f1: function (chars) {
            return String.fromCharCode.apply(null, System.Linq.Enumerable.from(chars).toArray());
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_byte", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_byte.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.Byte)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.Byte);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Byte));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_byte.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_byte.Zeroes(sizeVector))) & 255;
                    BitLevelGeneration.Assignments_byte.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = (care & ~last) & 255;
                    var q = (~care & ~dontCare & last) & 255;

                    if (g > q) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB(g);
                        x = ((care & f) | (last & ~f)) & 255;
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB(q);
                        var t = (~f1 & last) & 255;
                        var y = (dontCare & ~f1 & ~t) & 255;
                        if (y === 0) {
                            return;
                        }

                        var y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 255;

                        x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 255;
                    } else {
                        x = last;
                    }

                    var end = (care | dontCare) & 255;
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.Byte);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_byte.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_byte.Zeroes(sizes);

                            if ((c & z) === 0) {
                                var dc = (~(c | z)) & 255;
                                BitLevelGeneration.Assignments_byte.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_byte.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_byte.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.Byte);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Byte));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_byte.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_byte.Zeroes(sizeVector))) & 255;
                    return BitLevelGeneration.Assignments_byte.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Byte)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Byte)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = (care & ~last) & 255;
                                                q = (~care & ~dontCare & last) & 255;

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB(g);
                                                x = ((care & f) | (last & ~f)) & 255;
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB(q);
                                                t = (~f1 & last) & 255;
                                                y = (dontCare & ~f1 & ~t) & 255;
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 255;

                                                x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 255;
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = (care | dontCare) & 255;
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.Byte);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_byte.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_byte.Zeroes(sizes);

                                                if ((c & z) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (~(c | z)) & 255;
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_byte.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.Byte));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_byte.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_long", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_long.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.Int64)))(countEstimate);
                    var assignment = System.Array.init(potSize, System.Int64(0), System.Int64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Int64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_long.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_long.Zeroes(sizeVector))).not();
                    BitLevelGeneration.Assignments_long.Generate$1(sizeVector, assignments, assignment, r, 0, System.Int64(1), c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = care.and(last.not());
                    var q = care.not().and(dontCare.not()).and(last);

                    if (g.gt(q)) {
                        var f = BitLevelGeneration.BitUsage_long.RightFillToMSB(g);
                        x = (care.and(f)).or((last.and(f.not())));
                    } else if (q.gt(g)) {
                        var f1 = BitLevelGeneration.BitUsage_long.RightFillToMSB(q);
                        var t = f1.not().and(last);
                        var y = dontCare.and(f1.not()).and(t.not());
                        if (y.equals(System.Int64(0))) {
                            return;
                        }

                        var y2 = dontCare.and(t).and((y.or((y.sub(System.Int64(1))))));

                        x = (care.and((f1.shr(1)))).or((t.and(y2.not()))).or((y.and((System.Int64(0).sub(y)))));
                    } else {
                        x = last;
                    }

                    var end = care.or(dontCare);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, System.Int64(0), System.Int64);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_long.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_long.Zeroes(sizes);

                            if ((c.and(z)).equals(System.Int64(0))) {
                                var dc = (c.or(z)).not();
                                BitLevelGeneration.Assignments_long.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_long.Increment(sizes, x);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_long.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.Int64(0), System.Int64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Int64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_long.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_long.Zeroes(sizeVector))).not();
                    return BitLevelGeneration.Assignments_long.Enumerate$1(sizeVector, assignment, r, 0, System.Int64(1), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitUsage_long.RightFillToMSB(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitUsage_long.RightFillToMSB(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.Int64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.Int64(1))))));

                                                x = (care.and((f1.shr(1)))).or((t.and(y2.not()))).or((y.and((System.Int64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.Int64(0), System.Int64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_long.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_long.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_long.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.Int64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_long.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.Int64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_long.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_uint", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_uint.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt32)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.UInt32);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt32));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_uint.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = ~(((c | BitLevelGeneration.BitVectors_uint.Zeroes(sizeVector)) >>> 0));
                    BitLevelGeneration.Assignments_uint.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = ((care & ~last) >>> 0);
                    var q = ((((~care & ~dontCare) >>> 0) & last) >>> 0);

                    if (g > q) {
                        var f = BitLevelGeneration.BitUsage_uint.RightFillToMSB(g);
                        x = (((((care & f) >>> 0)) | (((last & ~f) >>> 0))) >>> 0);
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitUsage_uint.RightFillToMSB(q);
                        var t = ((~f1 & last) >>> 0);
                        var y = ((((dontCare & ~f1) >>> 0) & ~t) >>> 0);
                        if (y === 0) {
                            return;
                        }

                        var y2 = ((((dontCare & t) >>> 0) & (((y | (((y - 1) >>> 0))) >>> 0))) >>> 0);

                        x = (((((((care & (f1 >>> 1)) >>> 0)) | (((t & ~y2) >>> 0))) >>> 0) | (((y & (((0 - y) >>> 0))) >>> 0))) >>> 0);
                    } else {
                        x = last;
                    }

                    var end = ((care | dontCare) >>> 0);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.UInt32);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_uint.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_uint.Zeroes(sizes);

                            if ((((c & z) >>> 0)) === 0) {
                                var dc = ~(((c | z) >>> 0));
                                BitLevelGeneration.Assignments_uint.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_uint.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_uint.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.UInt32);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt32));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_uint.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = ~(((c | BitLevelGeneration.BitVectors_uint.Zeroes(sizeVector)) >>> 0));
                    return BitLevelGeneration.Assignments_uint.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt32)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = ((care & ~last) >>> 0);
                                                q = ((((~care & ~dontCare) >>> 0) & last) >>> 0);

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitUsage_uint.RightFillToMSB(g);
                                                x = (((((care & f) >>> 0)) | (((last & ~f) >>> 0))) >>> 0);
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitUsage_uint.RightFillToMSB(q);
                                                t = ((~f1 & last) >>> 0);
                                                y = ((((dontCare & ~f1) >>> 0) & ~t) >>> 0);
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = ((((dontCare & t) >>> 0) & (((y | (((y - 1) >>> 0))) >>> 0))) >>> 0);

                                                x = (((((((care & (f1 >>> 1)) >>> 0)) | (((t & ~y2) >>> 0))) >>> 0) | (((y & (((0 - y) >>> 0))) >>> 0))) >>> 0);
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = ((care | dontCare) >>> 0);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.UInt32);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_uint.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_uint.Zeroes(sizes);

                                                if ((((c & z) >>> 0)) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = ~(((c | z) >>> 0));
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_uint.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt32));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_uint.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_ulong", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt64)))(countEstimate);
                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    BitLevelGeneration.Assignments_ulong.Generate$1(sizeVector, assignments, assignment, r, 0, System.UInt64(1), c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = care.and(last.not());
                    var q = care.not().and(dontCare.not()).and(last);

                    if (g.gt(q)) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB$2(g);
                        x = (care.and(f)).or((last.and(f.not())));
                    } else if (q.gt(g)) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB$2(q);
                        var t = f1.not().and(last);
                        var y = dontCare.and(f1.not()).and(t.not());
                        if (y.equals(System.UInt64(0))) {
                            return;
                        }

                        var y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                        x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                    } else {
                        x = last;
                    }

                    var end = care.or(dontCare);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                            if ((c.and(z)).equals(System.UInt64(0))) {
                                var dc = (c.or(z)).not();
                                BitLevelGeneration.Assignments_ulong.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    return BitLevelGeneration.Assignments_ulong.Enumerate$1(sizeVector, assignment, r, 0, System.UInt64(1), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB$2(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB$2(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.UInt64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                                                x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.UInt64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ulong.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_ushort", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ushort.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt16)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.UInt16);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt16));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ushort.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_ushort.Zeroes(sizeVector))) & 65535;
                    BitLevelGeneration.Assignments_ushort.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = (care & ~last) & 65535;
                    var q = (~care & ~dontCare & last) & 65535;

                    if (g > q) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB$1(g);
                        x = ((care & f) | (last & ~f)) & 65535;
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB$1(q);
                        var t = (~f1 & last) & 65535;
                        var y = (dontCare & ~f1 & ~t) & 65535;
                        if (y === 0) {
                            return;
                        }

                        var y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 65535;

                        x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 65535;
                    } else {
                        x = last;
                    }

                    var end = (care | dontCare) & 65535;
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.UInt16);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_ushort.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_ushort.Zeroes(sizes);

                            if ((c & z) === 0) {
                                var dc = (~(c | z)) & 65535;
                                BitLevelGeneration.Assignments_ushort.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_ushort.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ushort.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.UInt16);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt16));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ushort.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_ushort.Zeroes(sizeVector))) & 65535;
                    return BitLevelGeneration.Assignments_ushort.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt16)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt16)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = (care & ~last) & 65535;
                                                q = (~care & ~dontCare & last) & 65535;

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB$1(g);
                                                x = ((care & f) | (last & ~f)) & 65535;
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB$1(q);
                                                t = (~f1 & last) & 65535;
                                                y = (dontCare & ~f1 & ~t) & 65535;
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 65535;

                                                x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 65535;
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = (care | dontCare) & 65535;
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.UInt16);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ushort.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ushort.Zeroes(sizes);

                                                if ((c & z) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (~(c | z)) & 65535;
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ushort.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt16));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ushort.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.IGraph_long", {
        $kind: "interface"
    });

    Bridge.define("BitLevelGeneration.IGraph_uint", {
        $kind: "interface"
    });

    Bridge.define("BitLevelGeneration.BitOperations", {
        statics: {
            methods: {
                To_ulong: function (bits) {
                    var $t;
                    var x = System.UInt64(0);
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = x.or((System.UInt64(1).shl(bit)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                To_ushort: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | ((1 << bit) & 65535)) & 65535;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                To_byte: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | ((1 << bit) & 255)) & 255;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                RightFillToMSB$2: function (x) {
                    x = x.or((x.shru(1)));
                    x = x.or((x.shru(2)));
                    x = x.or((x.shru(4)));
                    x = x.or((x.shru(8)));
                    x = x.or((x.shru(16)));
                    x = x.or((x.shru(32)));

                    return x;
                },
                RightFillToMSB$1: function (x) {
                    x = (x | ((x >> 1) & 65535)) & 65535;
                    x = (x | ((x >> 2) & 65535)) & 65535;
                    x = (x | ((x >> 4) & 65535)) & 65535;
                    x = (x | ((x >> 8) & 65535)) & 65535;

                    return x;
                },
                RightFillToMSB: function (x) {
                    x = (x | ((x >> 1) & 255)) & 255;
                    x = (x | ((x >> 2) & 255)) & 255;
                    x = (x | ((x >> 4) & 255)) & 255;

                    return x;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitUsage_long", {
        statics: {
            fields: {
                DeBruijnMultiplier: System.UInt64(0),
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = System.UInt64(System.Int64([-1706153790,133027301]));
                    this.DeBruijnLookup = System.Array.init([
                        63, 
                        0, 
                        58, 
                        1, 
                        59, 
                        47, 
                        53, 
                        2, 
                        60, 
                        39, 
                        48, 
                        27, 
                        54, 
                        33, 
                        42, 
                        3, 
                        61, 
                        51, 
                        37, 
                        40, 
                        49, 
                        18, 
                        28, 
                        20, 
                        55, 
                        30, 
                        34, 
                        11, 
                        43, 
                        14, 
                        22, 
                        4, 
                        62, 
                        57, 
                        46, 
                        52, 
                        38, 
                        26, 
                        32, 
                        41, 
                        50, 
                        36, 
                        17, 
                        19, 
                        29, 
                        10, 
                        13, 
                        21, 
                        56, 
                        45, 
                        25, 
                        31, 
                        35, 
                        16, 
                        9, 
                        12, 
                        44, 
                        24, 
                        15, 
                        8, 
                        23, 
                        7, 
                        6, 
                        5
                    ], System.Int32);
                }
            },
            methods: {
                Extract: function (x) {
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(x).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier)).shru(58)), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                LeastSignificantBit: function (x) {
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.clipu64((x.and(x.neg()))).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier).shru(58), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = x.v.and(x.v.neg());
                    x.v = x.v.xor(m);
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(m).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier)).shru(58)), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b.gt(System.Int64(0))) {
                        q = (q + 1) | 0;
                        b = b.and((b.sub(System.Int64(1))));
                    }
                    return q;
                },
                PopulationCountDense: function (x) {
                    x = x.sub(((x.shr(1)).and(System.Int64([1431655765,1431655765]))));
                    x = (x.and(System.Int64([858993459,858993459]))).add(((x.shr(2)).and(System.Int64([858993459,858993459]))));
                    x = (x.add((x.shr(4)))).and(System.Int64([252645135,252645135]));
                    x = (x.mul(System.Int64([16843009,16843009]))).shr(56);

                    return System.Int64.clip32(x);
                },
                ToSet: function (x) {
                    x = {v:x};
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x.v.ne(System.Int64(0))) {
                        onBits.add(BitLevelGeneration.BitUsage_long.GetAndClearLeastSignificantBit(x));
                    }

                    return onBits;
                },
                RightFillToMSB: function (x) {
                    x = x.or((x.shr(1)));
                    x = x.or((x.shr(2)));
                    x = x.or((x.shr(4)));
                    x = x.or((x.shr(8)));
                    x = x.or((x.shr(16)));

                    return x;
                },
                To_long: function (bits) {
                    var $t;
                    var x = System.Int64(0);
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = x.or((System.Int64(1).shl(bit)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                Or: function (colorGraph, offset) {
                    var result = System.Int64(0);
                    for (var i = offset; i < colorGraph.length; i = (i + 1) | 0) {
                        result = result.or(colorGraph[System.Array.index(i, colorGraph)]);
                    }
                    return result;
                },
                TrueForAllBitIndices: function (x, predicate) {
                    x = {v:x};
                    while (x.v.ne(System.Int64(0))) {
                        if (!predicate(BitLevelGeneration.BitUsage_long.GetAndClearLeastSignificantBit(x))) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitUsage_uint", {
        statics: {
            fields: {
                DeBruijnMultiplier: 0,
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = 125613361;
                    this.DeBruijnLookup = System.Array.init([0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8, 31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9], System.Int32);
                }
            },
            methods: {
                Extract: function (x) {
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul(x, BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                LeastSignificantBit: function (x) {
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul((((x & (((~x + 1) >>> 0))) >>> 0)), BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = (x.v & (((~x.v + 1) >>> 0))) >>> 0;
                    x.v = (x.v ^ m) >>> 0;
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul(m, BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b > 0) {
                        q = (q + 1) | 0;
                        b = (b & (((b - 1) >>> 0))) >>> 0;
                    }
                    return q;
                },
                ToSet: function (x) {
                    x = {v:x};
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x.v !== 0) {
                        onBits.add(BitLevelGeneration.BitUsage_uint.GetAndClearLeastSignificantBit(x));
                    }

                    return onBits;
                },
                RightFillToMSB: function (x) {
                    x = (x | (x >>> 1)) >>> 0;
                    x = (x | (x >>> 2)) >>> 0;
                    x = (x | (x >>> 4)) >>> 0;
                    x = (x | (x >>> 8)) >>> 0;
                    x = (x | (x >>> 16)) >>> 0;

                    return x;
                },
                To_uint: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | (((1 << bit) >>> 0))) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                Or: function (colorGraph, offset) {
                    var result = 0;
                    for (var i = offset; i < colorGraph.length; i = (i + 1) | 0) {
                        result = (result | colorGraph[System.Array.index(i, colorGraph)]) >>> 0;
                    }
                    return result;
                },
                TrueForAllBitIndices: function (x, predicate) {
                    x = {v:x};
                    while (x.v !== 0) {
                        if (!predicate(BitLevelGeneration.BitUsage_uint.GetAndClearLeastSignificantBit(x))) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_byte", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(8);
                    for (var i = 0; i < 8; i = (i + 1) | 0) {
                        var b = (1 << i) & 255;
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b & n.getItem(j)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.Byte))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) & 255)) & 255;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & n.getItem(i)) & 255;
                        var t2 = (m ^ n.getItem(i)) & 255;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & ~n.getItem(i)) & 255;
                        var t2 = (m ^ n.getItem(i)) & 255;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) & 255;
                    }

                    return ((~m) & 255);
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) & 255;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) & 255;
                            } else {
                                a = (a | ((~b & n.getItem(i) & ~k.getItem(i)) & 255)) & 255;
                                b = (b | ((~a & ~n.getItem(i) & k.getItem(i)) & 255)) & 255;
                            }
                        }
                    }

                    return ((a & ~b) & 255);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_long", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(64);
                    for (var i = 0; i < 64; i = (i + 1) | 0) {
                        var b = System.Int64(1).shl(i);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b.and(n.getItem(j))).ne(System.Int64(0))) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.Int64))();
                    while (true) {
                        var m = System.Int64(0);
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = m.or(System.Int64(1).shl(i));
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m.ne(System.Int64(0))) {
                        var t1 = m.and(n.getItem(i));
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m.ne(System.Int64(0))) {
                        var t1 = m.and(n.getItem(i).not());
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = System.Int64(0);
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = m.or(n.getItem(i));
                    }

                    return m.not();
                },
                GreaterThan: function (n, k) {
                    var a = System.Int64(0);
                    var b = System.Int64(0);
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = a.or(n.getItem(i));
                        } else {
                            if (i >= n.Count) {
                                b = b.or(k.getItem(i));
                            } else {
                                a = a.or(b.not().and(n.getItem(i)).and(k.getItem(i).not()));
                                b = b.or(a.not().and(n.getItem(i).not()).and(k.getItem(i)));
                            }
                        }
                    }

                    return a.and(b.not());
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_uint", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(32);
                    for (var i = 0; i < 32; i = (i + 1) | 0) {
                        var b = ((1 << i) >>> 0);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((((b & n.getItem(j)) >>> 0)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt32))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) >>> 0)) >>> 0;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = ((m & n.getItem(i)) >>> 0);
                        var t2 = ((m ^ n.getItem(i)) >>> 0);

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = ((m & ~n.getItem(i)) >>> 0);
                        var t2 = ((m ^ n.getItem(i)) >>> 0);

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) >>> 0;
                    }

                    return ~m;
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) >>> 0;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) >>> 0;
                            } else {
                                a = (a | ((((~b & n.getItem(i)) >>> 0) & ~k.getItem(i)) >>> 0)) >>> 0;
                                b = (b | ((((~a & ~n.getItem(i)) >>> 0) & k.getItem(i)) >>> 0)) >>> 0;
                            }
                        }
                    }

                    return ((a & ~b) >>> 0);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_ulong", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(64);
                    for (var i = 0; i < 64; i = (i + 1) | 0) {
                        var b = System.UInt64(1).shl(i);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b.and(n.getItem(j))).ne(System.UInt64(0))) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt64))();
                    while (true) {
                        var m = System.UInt64(0);
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = m.or(System.UInt64(1).shl(i));
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m.ne(System.UInt64(0))) {
                        var t1 = m.and(n.getItem(i));
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m.ne(System.UInt64(0))) {
                        var t1 = m.and(n.getItem(i).not());
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = System.UInt64(0);
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = m.or(n.getItem(i));
                    }

                    return m.not();
                },
                GreaterThan: function (n, k) {
                    var a = System.UInt64(0);
                    var b = System.UInt64(0);
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = a.or(n.getItem(i));
                        } else {
                            if (i >= n.Count) {
                                b = b.or(k.getItem(i));
                            } else {
                                a = a.or(b.not().and(n.getItem(i)).and(k.getItem(i).not()));
                                b = b.or(a.not().and(n.getItem(i).not()).and(k.getItem(i)));
                            }
                        }
                    }

                    return a.and(b.not());
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_ushort", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(16);
                    for (var i = 0; i < 16; i = (i + 1) | 0) {
                        var b = (1 << i) & 65535;
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b & n.getItem(j)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt16))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) & 65535)) & 65535;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & n.getItem(i)) & 65535;
                        var t2 = (m ^ n.getItem(i)) & 65535;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & ~n.getItem(i)) & 65535;
                        var t2 = (m ^ n.getItem(i)) & 65535;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) & 65535;
                    }

                    return ((~m) & 65535);
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) & 65535;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) & 65535;
                            } else {
                                a = (a | ((~b & n.getItem(i) & ~k.getItem(i)) & 65535)) & 65535;
                                b = (b | ((~a & ~n.getItem(i) & k.getItem(i)) & 65535)) & 65535;
                            }
                        }
                    }

                    return ((a & ~b) & 65535);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.GraphChoosability_long", {
        statics: {
            methods: {
                IsFChoosable: function (graph, f, badAssignment) {
                    var $step = 0,
                        $jumpFromFinally, 
                        liveVertexBits, 
                        sizes, 
                        maxListSize, 
                        potSize, 
                        $t, 
                        colorGraph, 
                        xx, 
                        i, 
                        i1, 
                        j, 
                        $t1, 
                        color, 
                        $t2, 
                        v, 
                        list, 
                        bit, 
                        i2, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,18,20,21,22,23,24,25,27,28,30,31], $step);
                                switch ($step) {
                                    case 0: {
                                        badAssignment.v = null;

                                        liveVertexBits = BitLevelGeneration.BitUsage_long.To_long(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_long$N));
                                        sizes = System.Linq.Enumerable.from(graph.BitLevelGeneration$IGraph_long$Vertices).select(function (v) {
                                            return f(v);
                                        }).toList(System.Int32);
                                        maxListSize = System.Linq.Enumerable.from(sizes).max();

                                        potSize = maxListSize;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( potSize < graph.BitLevelGeneration$IGraph_long$N ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 31;
                                        continue;
                                    }
                                    case 2: {
                                        $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_long.Enumerate(sizes, potSize), System.Array.type(System.Int64));
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                            colorGraph = $t.Current;
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 29;
                                        continue;
                                    }
                                    case 4: {
                                        if (potSize > maxListSize) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 5: {
                                        xx = System.Int64(0);
                                        i = 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        if ( i < colorGraph.length ) {
                                            $step = 7;
                                            continue;
                                        }
                                        $step = 11;
                                        continue;
                                    }
                                    case 7: {
                                        xx = xx.or(colorGraph[System.Array.index(i, colorGraph)]);

                                        if (BitLevelGeneration.BitUsage_long.PopulationCount(xx) <= ((i + 1) | 0)) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 9;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 10: {
                                        i = (i + 1) | 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 11: {
                                        i1 = 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {
                                        if ( i1 < colorGraph.length ) {
                                            $step = 13;
                                            continue;
                                        }
                                        $step = 21;
                                        continue;
                                    }
                                    case 13: {
                                        j = (i1 + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {
                                        if ( j < colorGraph.length ) {
                                            $step = 15;
                                            continue;
                                        }
                                        $step = 19;
                                        continue;
                                    }
                                    case 15: {
                                        if ((colorGraph[System.Array.index(i1, colorGraph)].and(colorGraph[System.Array.index(j, colorGraph)])).equals(System.Int64(0))) {
                                            $step = 16;
                                            continue;
                                        } 
                                        $step = 17;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 18: {
                                        j = (j + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }

                                    case 20: {
                                        i1 = (i1 + 1) | 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 21: {
                                        $t1 = Bridge.getEnumerator(colorGraph);
                                        $step = 22;
                                        continue;
                                    }
                                    case 22: {
                                        if ($t1.moveNext()) {
                                            color = $t1.Current;
                                            $step = 23;
                                            continue;
                                        }
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        if (graph.BitLevelGeneration$IGraph_long$IsIndependent(color)) {
                                            $step = 24;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 24: {
                                        $step = 28;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 22;
                                        continue;
                                    }

                                    case 27: {
                                        if (!BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, liveVertexBits, System.Int64(0))) {
                                            badAssignment.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $t2 = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_long$Vertices, System.Int32);
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    list = new (System.Collections.Generic.List$1(System.Int32))();
                                                    bit = System.Int64(1).shl(v);
                                                    for (i2 = 0; i2 < colorGraph.length; i2 = (i2 + 1) | 0) {
                                                        if ((bit.and(colorGraph[System.Array.index(i2, colorGraph)])).ne(System.Int64(0))) {
                                                            list.add(i2);
                                                        }
                                                    }

                                                    badAssignment.v.add(list);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            return false;
                                        }
                                    }
                                    case 28: {
                                        ;
                                        $step = 3;
                                        continue;
                                    }

                                    case 30: {
                                        potSize = (potSize + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 31: {
                                        return true;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                IsChoosable: function (graph, colorGraph) {
                    return BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, BitLevelGeneration.BitUsage_long.To_long(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_long$N)), System.Int64(0));
                },
                IsChoosable$1: function (graph, colorGraph, subset) {
                    return BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, subset, System.Int64(0));
                },
                IsChoosable$2: function (graph, colorGraph, liveVertexBits, c) {
                    var $t;
                    liveVertexBits = {v:liveVertexBits};
                    BitLevelGeneration.GraphChoosability_long.BeGreedy(graph, colorGraph, liveVertexBits, c);
                    if (liveVertexBits.v.equals(System.Int64(0))) {
                        return true;
                    }
                    if ((liveVertexBits.v.and(BitLevelGeneration.BitUsage_long.Or(colorGraph, c).not())).ne(System.Int64(0))) {
                        return false;
                    }

                    var choosable = false;
                    var V = colorGraph[System.Array.index(c, colorGraph)].and(liveVertexBits.v);
                    $t = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_long$MaximalIndependentSubsets(V), System.Int64);
                    try {
                        while ($t.moveNext()) {
                            var C = $t.Current;
                            if (BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, liveVertexBits.v.xor(C), System.Int64(c + 1))) {
                                choosable = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return choosable;
                },
                BeGreedy: function (graph, colorGraph, liveVertexBits, c) {
                    while (true) {
                        var originalBits = liveVertexBits.v;
                        var bits = liveVertexBits.v;
                        while (bits.ne(System.Int64(0))) {
                            var bit = bits.and(bits.neg());
                            bits = bits.xor(bit);

                            var colorCount = 0;
                            for (var i = c; i < colorGraph.length; i = (i + 1) | 0) {
                                if ((bit.and(colorGraph[System.Array.index(i, colorGraph)])).ne(System.Int64(0))) {
                                    colorCount = (colorCount + 1) | 0;
                                }
                            }

                            if (colorCount > graph.BitLevelGeneration$IGraph_long$DegreeInSet(BitLevelGeneration.BitUsage_long.Extract(bit), liveVertexBits.v)) {
                                liveVertexBits.v = liveVertexBits.v.xor(bit);
                            }
                        }

                        if (liveVertexBits.v.equals(originalBits)) {
                            break;
                        }
                    }
                },
                IsSubsetTwoColorable: function (g, set) {
                    var c = System.Array.init(g.N, 0, System.Int32);
                    var q = System.Array.init(g.N, 0, System.Int32);

                    var leftover = set;
                    var s = 0;
                    while (leftover.ne(System.Int64(0))) {
                        var r = BitLevelGeneration.BitUsage_long.LeastSignificantBit(leftover);
                        q[System.Array.index(s, q)] = r;
                        c[System.Array.index(r, c)] = 1;
                        var e = s;

                        while (s <= e) {
                            var v = q[System.Array.index(Bridge.identity(s, (s = (s + 1) | 0)), q)];
                            var n = g.NeighborsInSet(v, set);

                            while (n.ne(System.Int64(0))) {
                                var bit = n.and(n.neg());
                                var w = BitLevelGeneration.BitUsage_long.Extract(bit);

                                if (c[System.Array.index(w, c)] === 0) {
                                    q[System.Array.index(((e = (e + 1) | 0)), q)] = w;
                                    c[System.Array.index(w, c)] = (3 - c[System.Array.index(v, c)]) | 0;
                                } else if (c[System.Array.index(w, c)] !== ((3 - c[System.Array.index(v, c)]) | 0)) {
                                    return false;
                                }

                                n = n.xor(bit);
                            }

                            leftover = leftover.xor((System.Int64(1).shl(v)));
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.GraphChoosability_uint", {
        statics: {
            methods: {
                IsFChoosable: function (graph, f, badAssignment) {
                    var nodesVisited = { }, cacheHits = { };
                    return BitLevelGeneration.GraphChoosability_uint.IsFChoosable$1(graph, f, badAssignment, nodesVisited, cacheHits);
                },
                IsFChoosable$1: function (graph, f, badAssignment, nodesVisited, cacheHits) {
                    var $step = 0,
                        $jumpFromFinally, 
                        liveVertexBits, 
                        sizes, 
                        maxListSize, 
                        potSize, 
                        cache, 
                        $t, 
                        colorGraph, 
                        xx, 
                        i, 
                        i1, 
                        j, 
                        $t1, 
                        color, 
                        $t2, 
                        v, 
                        list, 
                        bit, 
                        i2, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,18,20,21,22,23,24,25,27,28,30,31], $step);
                                switch ($step) {
                                    case 0: {
                                        badAssignment.v = null;

                                        nodesVisited.v = System.Int64(0);
                                        cacheHits.v = System.Int64(0);
                                        liveVertexBits = BitLevelGeneration.BitUsage_uint.To_uint(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_uint$N));
                                        sizes = System.Linq.Enumerable.from(graph.BitLevelGeneration$IGraph_uint$Vertices).select(function (v) {
                                            return f(v);
                                        }).toList(System.Int32);
                                        maxListSize = System.Linq.Enumerable.from(sizes).max();

                                        potSize = maxListSize;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( potSize < graph.BitLevelGeneration$IGraph_uint$N ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 31;
                                        continue;
                                    }
                                    case 2: {
                                        //var cache = new Dictionary<BitLevelGeneration.HashedAssignment_uint, bool>();
                                        cache = null;

                                        $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_uint.Enumerate(sizes, potSize), System.Array.type(System.UInt32));
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                            colorGraph = $t.Current;
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 29;
                                        continue;
                                    }
                                    case 4: {
                                        if (potSize > maxListSize) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 5: {
                                        xx = 0;
                                        i = 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        if ( i < colorGraph.length ) {
                                            $step = 7;
                                            continue;
                                        }
                                        $step = 11;
                                        continue;
                                    }
                                    case 7: {
                                        xx = (xx | colorGraph[System.Array.index(i, colorGraph)]) >>> 0;

                                        if (BitLevelGeneration.BitUsage_uint.PopulationCount(xx) <= ((i + 1) | 0)) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 9;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 10: {
                                        i = (i + 1) | 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 11: {
                                        i1 = 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {
                                        if ( i1 < colorGraph.length ) {
                                            $step = 13;
                                            continue;
                                        }
                                        $step = 21;
                                        continue;
                                    }
                                    case 13: {
                                        j = (i1 + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {
                                        if ( j < colorGraph.length ) {
                                            $step = 15;
                                            continue;
                                        }
                                        $step = 19;
                                        continue;
                                    }
                                    case 15: {
                                        if ((((colorGraph[System.Array.index(i1, colorGraph)] & colorGraph[System.Array.index(j, colorGraph)]) >>> 0)) === 0) {
                                            $step = 16;
                                            continue;
                                        } 
                                        $step = 17;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 18: {
                                        j = (j + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }

                                    case 20: {
                                        i1 = (i1 + 1) | 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 21: {
                                        $t1 = Bridge.getEnumerator(colorGraph);
                                        $step = 22;
                                        continue;
                                    }
                                    case 22: {
                                        if ($t1.moveNext()) {
                                            color = $t1.Current;
                                            $step = 23;
                                            continue;
                                        }
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        if (graph.BitLevelGeneration$IGraph_uint$IsIndependent(color)) {
                                            $step = 24;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 24: {
                                        $step = 28;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 22;
                                        continue;
                                    }

                                    case 27: {
                                        if (!BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, liveVertexBits, 0, cache, nodesVisited, cacheHits)) {
                                            badAssignment.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $t2 = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_uint$Vertices, System.Int32);
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    list = new (System.Collections.Generic.List$1(System.Int32))();
                                                    bit = (1 << v) >>> 0;
                                                    for (i2 = 0; i2 < colorGraph.length; i2 = (i2 + 1) | 0) {
                                                        if ((((bit & colorGraph[System.Array.index(i2, colorGraph)]) >>> 0)) !== 0) {
                                                            list.add(i2);
                                                        }
                                                    }

                                                    badAssignment.v.add(list);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            return false;
                                        }
                                    }
                                    case 28: {
                                        ;
                                        $step = 3;
                                        continue;
                                    }

                                    case 30: {
                                        potSize = (potSize + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 31: {
                                        return true;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                IsChoosable: function (graph, colorGraph) {
                    var nodesVisited = { }, cacheHits = { };
                    return BitLevelGeneration.GraphChoosability_uint.IsChoosable$1(graph, colorGraph, nodesVisited, cacheHits);
                },
                IsChoosable$1: function (graph, colorGraph, nodesVisited, cacheHits) {
                    nodesVisited.v = System.Int64(0);
                    cacheHits.v = System.Int64(0);
                    //var cache = new Dictionary<BitLevelGeneration.HashedAssignment_uint, bool>();
                    var cache = null;

                    return BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, BitLevelGeneration.BitUsage_uint.To_uint(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_uint$N)), 0, cache, nodesVisited, cacheHits);
                },
                IsChoosable$2: function (graph, colorGraph, liveVertexBits, c, cache, nodesVisited, cacheHits) {
                    var $t;
                    liveVertexBits = {v:liveVertexBits};
                    nodesVisited.v = nodesVisited.v.inc();

                    BitLevelGeneration.GraphChoosability_uint.BeGreedy(graph, colorGraph, liveVertexBits, c);
                    if (liveVertexBits.v === 0) {
                        return true;
                    }
                    if ((((liveVertexBits.v & ~BitLevelGeneration.BitUsage_uint.Or(colorGraph, c)) >>> 0)) !== 0) {
                        return false;
                    }

                    //bool cachedResult;
                    //var key = new BitLevelGeneration.HashedAssignment_uint(colorGraph, c, liveVertexBits);
                    //if (cache.TryGetValue(key, out cachedResult))
                    //{
                    //    cacheHits++;
                    //    return cachedResult;
                    //}

                    var choosable = false;
                    var V = (colorGraph[System.Array.index(c, colorGraph)] & liveVertexBits.v) >>> 0;
                    $t = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_uint$MaximalIndependentSubsets(V), System.UInt32);
                    try {
                        while ($t.moveNext()) {
                            var C = $t.Current;
                            if (BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, ((liveVertexBits.v ^ C) >>> 0), ((c + 1) | 0), cache, nodesVisited, cacheHits)) {
                                choosable = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    //cache[key] = choosable;
                    return choosable;
                },
                BeGreedy: function (graph, colorGraph, liveVertexBits, c) {
                    while (true) {
                        var originalBits = liveVertexBits.v;
                        var bits = liveVertexBits.v;
                        while (bits !== 0) {
                            var bit = (bits & (((~bits + 1) >>> 0))) >>> 0;
                            bits = (bits ^ bit) >>> 0;

                            var colorCount = 0;
                            for (var i = c; i < colorGraph.length; i = (i + 1) | 0) {
                                if ((((bit & colorGraph[System.Array.index(i, colorGraph)]) >>> 0)) !== 0) {
                                    colorCount = (colorCount + 1) | 0;
                                }
                            }

                            if (colorCount > graph.BitLevelGeneration$IGraph_uint$DegreeInSet(BitLevelGeneration.BitUsage_uint.Extract(bit), liveVertexBits.v)) {
                                liveVertexBits.v = (liveVertexBits.v ^ bit) >>> 0;
                            }
                        }

                        if (liveVertexBits.v === originalBits) {
                            break;
                        }
                    }
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_byte", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.Byte);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = (assignment[System.Array.index(i, assignment)] & on) & 255;
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_byte));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_uint", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.UInt32);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = ((assignment[System.Array.index(i, assignment)] & on) >>> 0);
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_uint));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_ulong", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), System.UInt64(0), System.UInt64);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = assignment[System.Array.index(i, assignment)].and(on);
                    if (x.ne(System.UInt64(0))) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = list[System.Array.index(i, list)].add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_ulong));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)].ne(other._assignment[System.Array.index(i, other._assignment)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_ushort", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.UInt16);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = (assignment[System.Array.index(i, assignment)] & on) & 65535;
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_ushort));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.MaximalndependentSetSearching", {
        statics: {
            methods: {
                GenerateMaximalIndependentSubsets: function (g, set) {
                    var d = System.Array.init(64, 0, System.Int32);

                    var n = BitLevelGeneration.BitUsage_long.PopulationCountDense(set);
                    var D = System.Array.init(n, System.Int64(0), System.Int64);

                    var q = set;
                    while (q.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);

                        d[System.Array.index(v, d)] = g.DegreeInSet(v, set);
                        D[System.Array.index(d[System.Array.index(v, d)], D)] = D[System.Array.index(d[System.Array.index(v, d)], D)].or(bit);

                        q = q.xor(bit);
                    }

                    var bits = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        for (var j = 0; j < n; j = (j + 1) | 0) {
                            if (D[System.Array.index(j, D)].ne(System.Int64(0))) {
                                var bit1 = D[System.Array.index(j, D)].and(D[System.Array.index(j, D)].neg());
                                bits[System.Array.index(((((n - 1) | 0) - i) | 0), bits)] = bit1;

                                var v1 = BitLevelGeneration.BitUsage_long.Extract(bit1);
                                q = g.NeighborsInSet(v1, set);

                                while (q.ne(System.Int64(0))) {
                                    var b = q.and(q.neg());
                                    var x = BitLevelGeneration.BitUsage_long.Extract(b);

                                    D[System.Array.index(d[System.Array.index(x, d)], D)] = D[System.Array.index(d[System.Array.index(x, d)], D)].xor(b);
                                    d[System.Array.index(x, d)] = (d[System.Array.index(x, d)] - 1) | 0;
                                    D[System.Array.index(d[System.Array.index(x, d)], D)] = D[System.Array.index(d[System.Array.index(x, d)], D)].or(b);

                                    q = q.xor(b);
                                }

                                set = set.xor(bit1);
                                D[System.Array.index(j, D)] = D[System.Array.index(j, D)].xor(bit1);
                                break;
                            }
                        }
                    }

                    return BitLevelGeneration.MaximalndependentSetSearching.GenerateMaximalIndependentSubsets$1(g, bits);
                },
                GenerateMaximalIndependentSubsets$1: function (g, bits) {
                    var $step = 0,
                        $jumpFromFinally, 
                        mis, 
                        earlier, 
                        j, 
                        bit, 
                        v, 
                        count, 
                        i, 
                        m, 
                        N, 
                        mp, 
                        mpp, 
                        q, 
                        l, 
                        b, 
                        w, 
                        qq, 
                        bb, 
                        z, 
                        X, 
                        b1, 
                        w1, 
                        Z, 
                        mm, 
                        b2, 
                        w2, 
                        qq1, 
                        bb1, 
                        z1, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,28,29,31,32,33,34], $step);
                                switch ($step) {
                                    case 0: {
                                        mis = new (System.Collections.Generic.List$1(System.Int64))(8);
                                        mis.add(System.Int64(0));

                                        earlier = System.Int64(0);
                                        j = 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( j < bits.length ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 34;
                                        continue;
                                    }
                                    case 2: {
                                        bit = bits[System.Array.index(j, bits)];
                                        v = BitLevelGeneration.BitUsage_long.Extract(bit);

                                        count = mis.Count;
                                        i = 0;
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ( i < count ) {
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 32;
                                        continue;
                                    }
                                    case 4: {
                                        m = mis.getItem(i);
                                        N = g.NeighborsInSet(v, m);
                                        if (N.equals(System.Int64(0))) {
                                            $step = 5;
                                            continue;
                                        } else  {
                                            $step = 6;
                                            continue;
                                        }
                                    }
                                    case 5: {
                                        mis.setItem(i, mis.getItem(i).or(bit));
                                        $step = 30;
                                        continue;
                                    }
                                    case 6: {
                                        mp = m.and(N.not());
                                        mpp = mp.or(bit);
                                        q = N;
                                        l = earlier.and(mpp.not());

                                        
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        if ( q.ne(System.Int64(0)) ) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 14;
                                        continue;
                                    }
                                    case 8: {
                                        b = q.and(q.neg());
                                        w = BitLevelGeneration.BitUsage_long.Extract(b);

                                        qq = g.NeighborsInSet(w, l);
                                        
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {
                                        if ( qq.ne(System.Int64(0)) ) {
                                            $step = 10;
                                            continue;
                                        } 
                                        $step = 13;
                                        continue;
                                    }
                                    case 10: {
                                        bb = qq.and(qq.neg());
                                        z = BitLevelGeneration.BitUsage_long.Extract(bb);

                                        if (g.NeighborsInSet(z, mpp).equals(System.Int64(0))) {
                                            $step = 11;
                                            continue;
                                        } 
                                        $step = 12;
                                        continue;
                                    }
                                    case 11: {
                                        $step = 29;
                                        continue;
                                    }
                                    case 12: {
                                        qq = qq.xor(bb);

                                        $step = 9;
                                        continue;
                                    }
                                    case 13: {
                                        q = q.xor(b);

                                        $step = 7;
                                        continue;
                                    }
                                    case 14: {
                                        X = g.NeighborsInSet(v, earlier);
                                        q = X.and(N.not());

                                        while (q.ne(System.Int64(0))) {
                                            b1 = q.and(q.neg());
                                            w1 = BitLevelGeneration.BitUsage_long.Extract(b1);

                                            if (g.NeighborsInSet(w1, mp).ne(System.Int64(0))) {
                                                X = X.xor(b1);
                                            }
                                            q = q.xor(b1);
                                        }

                                        if (X.ne(N)) {
                                            $step = 15;
                                            continue;
                                        } 
                                        $step = 28;
                                        continue;
                                    }
                                    case 15: {
                                        Z = System.Int64(0);
                                        
                                        $step = 16;
                                        continue;
                                    }
                                    case 16: {
                                        if ( Z.lt(N) ) {
                                            $step = 17;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 17: {
                                        Z = (Z.sub(X)).and(X);

                                        if ((Z.and(N)).equals(Z)) {
                                            $step = 16;
                                            continue;
                                        }

                                        if (!g.IsIndependent(Z)) {
                                            $step = 16;
                                            continue;
                                        }

                                        mm = mp.or(Z);
                                        l = earlier.and(mm.not());
                                        q = N.and(Z.not());

                                        
                                        $step = 18;
                                        continue;
                                    }
                                    case 18: {
                                        if ( q.ne(System.Int64(0)) ) {
                                            $step = 19;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 19: {
                                        b2 = q.and(q.neg());
                                        w2 = BitLevelGeneration.BitUsage_long.Extract(b2);

                                        qq1 = g.NeighborsInSet(w2, l);
                                        
                                        $step = 20;
                                        continue;
                                    }
                                    case 20: {
                                        if ( qq1.ne(System.Int64(0)) ) {
                                            $step = 21;
                                            continue;
                                        } 
                                        $step = 24;
                                        continue;
                                    }
                                    case 21: {
                                        bb1 = qq1.and(qq1.neg());
                                        z1 = BitLevelGeneration.BitUsage_long.Extract(bb1);

                                        if (g.NeighborsInSet(z1, mm).equals(System.Int64(0))) {
                                            $step = 22;
                                            continue;
                                        } 
                                        $step = 23;
                                        continue;
                                    }
                                    case 22: {
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        qq1 = qq1.xor(bb1);

                                        $step = 20;
                                        continue;
                                    }
                                    case 24: {
                                        q = q.xor(b2);

                                        $step = 18;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 29;
                                        continue;
                                    }
                                    case 26: {
                                        ;

                                        $step = 16;
                                        continue;
                                    }

                                    case 28: {
                                        mis.add((m.or(bit)).and(N.not()));
                                    }
                                    case 29: {
                                        ;
                                        $step = 30;
                                        continue;
                                    }

                                    case 31: {
                                        i = (i + 1) | 0;
                                        $step = 3;
                                        continue;
                                    }
                                    case 32: {
                                        earlier = earlier.or(bit);
                                        $step = 33;
                                        continue;
                                    }
                                    case 33: {
                                        j = (j + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 34: {
                                        return mis;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                LexicographicallyFirstContaining: function (g, set, S) {
                    set = set.xor(S);
                    while (set.ne(System.Int64(0))) {
                        var bit = set.and(set.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);

                        if (g.NeighborsInSet(v, S).equals(System.Int64(0))) {
                            S = S.or(bit);
                        }

                        set = set.xor(bit);
                    }

                    return S;
                },
                Parent: function (g, set, LFMIS, S) {
                    var a = LFMIS.and(S.not());
                    var bit = a.and(a.neg());
                    var v = BitLevelGeneration.BitUsage_long.Extract(bit);
                    var N = g.NeighborsInSet(v, S);

                    return BitLevelGeneration.MaximalndependentSetSearching.LexicographicallyFirstContaining(g, set, (S.or(bit)).xor(N));
                },
                Later: function (g, set, LFMIS, v) {
                    var q = g.NeighborsInSet(v, set.xor(LFMIS));

                    var earlier = ((System.Int64(1).shl(v)).sub(System.Int64(1))).and(LFMIS);
                    var later = System.Int64(0);
                    while (set.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var w = BitLevelGeneration.BitUsage_long.Extract(bit);

                        if (g.NeighborsInSet(w, earlier).equals(System.Int64(0))) {
                            later = later.or(bit);
                        }

                        q = q.xor(bit);
                    }

                    return later;
                }
            }
        }
    });

    Bridge.define("GraphicsLayer.ARGB", {
        statics: {
            methods: {
                BasicPalette: function (q) {
                    if (q === -1) {
                        return new GraphicsLayer.ARGB.ctor(255, 255, 255);
                    }

                    return GraphicsLayer.ARGB.FromHSL(0.6 + GraphicsLayer.ARGB.ReverseBits((q >>> 0)) / Math.pow(2.0, 32), 1.0, 0.65);
                },
                FromFractional: function (a, r, g, b) {
                    return new GraphicsLayer.ARGB.$ctor1(Bridge.Int.clip32(a * 255), Bridge.Int.clip32(r * 255), Bridge.Int.clip32(g * 255), Bridge.Int.clip32(b * 255));
                },
                FromHSL: function (h, s, l) {
                    while (h > 1.0) {
                        h -= 1.0;
                    }
                    while (s > 1.0) {
                        s -= 1.0;
                    }
                    while (l > 1.0) {
                        l -= 1.0;
                    }

                    if (s === 0.0) {
                        return GraphicsLayer.ARGB.FromFractional(1.0, l, l, l);
                    }

                    var q = l < 0.5 ? l * (1.0 + s) : l + s - l * s;
                    var p = 2.0 * l - q;
                    var r = GraphicsLayer.ARGB.HueToRgb(p, q, h + 0.33333333333333331);
                    var g = GraphicsLayer.ARGB.HueToRgb(p, q, h);
                    var b = GraphicsLayer.ARGB.HueToRgb(p, q, h - 0.33333333333333331);

                    return GraphicsLayer.ARGB.FromFractional(1.0, r, g, b);
                },
                HueToRgb: function (p, q, t) {
                    if (t < 0.0) {
                        t += 1.0;
                    }
                    if (t > 1.0) {
                        t -= 1.0;
                    }
                    if (t < 0.16666666666666666) {
                        return p + (q - p) * 6.0 * t;
                    }
                    if (t < 0.5) {
                        return q;
                    }
                    if (t < 0.66666666666666663) {
                        return p + (q - p) * (0.66666666666666663 - t) * 6.0;
                    }
                    return p;
                },
                ReverseBits: function (x) {
                    var y = 0;
                    for (var i = 0; i < 32; i = (i + 1) | 0) {
                        y = (y | System.Int64.clipu32((System.Int64(x).and(System.Int64((1 << i)))).shl((((31 - Bridge.Int.mul(2, i)) | 0))))) >>> 0;
                    }

                    return y;
                }
            }
        },
        props: {
            A: 0,
            R: 0,
            G: 0,
            B: 0
        },
        ctors: {
            $ctor1: function (a, r, g, b) {
                this.$initialize();
                this.A = a;
                this.R = r;
                this.G = g;
                this.B = b;
            },
            ctor: function (r, g, b) {
                GraphicsLayer.ARGB.$ctor1.call(this, 255, r, g, b);
            }
        },
        methods: {
            toString: function () {
                return System.String.format("{0},{1},{2},{3}", Bridge.box(this.A, System.Int32), Bridge.box(this.R, System.Int32), Bridge.box(this.G, System.Int32), Bridge.box(this.B, System.Int32));
            }
        }
    });

    Bridge.define("GraphicsLayer.Box", {
        statics: {
            fields: {
                Empty: null
            },
            ctors: {
                init: function () {
                    this.Empty = new GraphicsLayer.Box.ctor(0, 0);
                }
            }
        },
        props: {
            Top: 0,
            Left: 0,
            Width: 0,
            Height: 0,
            X: {
                get: function () {
                    return this.Left;
                }
            },
            Y: {
                get: function () {
                    return this.Top;
                }
            },
            Right: {
                get: function () {
                    return this.Left + this.Width;
                }
            },
            Bottom: {
                get: function () {
                    return this.Top + this.Height;
                }
            }
        },
        ctors: {
            ctor: function (left, top) {
                this.$initialize();
                this.Left = left;
                this.Top = top;
            },
            $ctor1: function (left, top, width, height) {
                this.$initialize();
                this.Left = left;
                this.Top = top;
                this.Width = width;
                this.Height = height;
            }
        },
        methods: {
            Inflate: function (x, y) {
                this.Left -= x;
                this.Top -= y;
                this.Width += 2 * x;
                this.Height += 2 * y;
            },
            Contains$1: function (x, y) {
                return this.Left <= x && x <= this.Right && this.Top <= y && y <= this.Bottom;
            },
            Contains: function (box) {
                return this.Left <= box.Left && box.Right <= this.Right && this.Top <= box.Top && box.Bottom <= this.Bottom;
            }
        }
    });

    Bridge.define("GraphicsLayer.Font", {
        props: {
            Name: null,
            Size: 0
        },
        ctors: {
            ctor: function (name, size) {
                this.$initialize();
                this.Name = name;
                this.Size = size;
            }
        }
    });

    Bridge.define("GraphicsLayer.IProduceMouseEvents", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.IGraphics", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.IPaintable", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.MouseButton", {
        $kind: "enum",
        statics: {
            fields: {
                Left: 0,
                Middle: 1,
                Right: 2
            }
        }
    });

    Bridge.define("Graphs.Ascii85", {
        statics: {
            fields: {
                _asciiOffset: 0
            },
            ctors: {
                init: function () {
                    this._asciiOffset = 33;
                }
            }
        },
        fields: {
            
            PrefixMark: null,
            /**
             * Suffix mark that identifies an encoded ASCII85 string, traditionally '~&gt;'
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default ""
             * @type string
             */
            SuffixMark: null,
            /**
             * Maximum line length for encoded ASCII85 string; 
             set to zero for one unbroken line.
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default 0
             * @type number
             */
            LineLength: 0,
            /**
             * Add the Prefix and Suffix marks when encoding, and enforce their presence for decoding
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default false
             * @type boolean
             */
            EnforceMarks: false,
            _encodedBlock: null,
            _decodedBlock: null,
            _tuple: 0,
            _linePos: 0,
            pow85: null
        },
        ctors: {
            init: function () {
                this.PrefixMark = "";
                this.SuffixMark = "";
                this.LineLength = 0;
                this.EnforceMarks = false;
                this._encodedBlock = System.Array.init(5, 0, System.Byte);
                this._decodedBlock = System.Array.init(4, 0, System.Byte);
                this._tuple = 0;
                this._linePos = 0;
                this.pow85 = System.Array.init([
                    52200625, 
                    614125, 
                    7225, 
                    85, 
                    1
                ], System.UInt32);
            }
        },
        methods: {
            /**
             * Decodes an ASCII85 encoded string into the original binary data
             *
             * @instance
             * @public
             * @this Graphs.Ascii85
             * @memberof Graphs.Ascii85
             * @param   {string}            s    ASCII85 encoded string
             * @return  {Array.<number>}         byte array of decoded binary data
             */
            Decode: function (s) {
                var $t;
                if (this.EnforceMarks) {
                    if (!!(!System.String.startsWith(s, this.PrefixMark) | !System.String.endsWith(s, this.SuffixMark))) {
                        throw new System.Exception(System.String.concat("ASCII85 encoded data should begin with '", this.PrefixMark, "' and end with '", this.SuffixMark, "'"));
                    }
                }

                // strip prefix and suffix if present
                if (System.String.startsWith(s, this.PrefixMark)) {
                    s = s.substr(this.PrefixMark.length);
                }
                if (System.String.endsWith(s, this.SuffixMark)) {
                    s = s.substr(0, ((s.length - this.SuffixMark.length) | 0));
                }

                var ms = new (System.Collections.Generic.List$1(System.Byte))();
                var count = 0;
                var processChar = false;

                $t = Bridge.getEnumerator(s);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        switch (c) {
                            case 122: 
                                if (count !== 0) {
                                    throw new System.Exception("The character 'z' is invalid inside an ASCII85 block.");
                                }
                                this._decodedBlock[System.Array.index(0, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(1, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(2, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(3, this._decodedBlock)] = 0;
                                ms.addRange(this._decodedBlock);
                                processChar = false;
                                break;
                            case 10: 
                            case 13: 
                            case 9: 
                            case 0: 
                            case 12: 
                            case 8: 
                                processChar = false;
                                break;
                            default: 
                                if (c < 33 || c > 117) {
                                    throw new System.Exception("Bad character '" + String.fromCharCode(c) + "' found. ASCII85 only allows characters '!' to 'u'.");
                                }
                                processChar = true;
                                break;
                        }

                        if (processChar) {
                            this._tuple = (this._tuple + (Bridge.Int.umul((((((c - Graphs.Ascii85._asciiOffset) | 0))) >>> 0), this.pow85[System.Array.index(count, this.pow85)]))) >>> 0;
                            count = (count + 1) | 0;
                            if (count === this._encodedBlock.length) {
                                this.DecodeBlock();
                                ms.addRange(this._decodedBlock);
                                this._tuple = 0;
                                count = 0;
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                // if we have some bytes left over at the end..
                if (count !== 0) {
                    if (count === 1) {
                        throw new System.Exception("The last block of ASCII85 data cannot be a single byte.");
                    }
                    count = (count - 1) | 0;
                    this._tuple = (this._tuple + this.pow85[System.Array.index(count, this.pow85)]) >>> 0;
                    this.DecodeBlock$1(count);
                    for (var i = 0; i < count; i = (i + 1) | 0) {
                        ms.add(this._decodedBlock[System.Array.index(i, this._decodedBlock)]);
                    }
                }

                return ms.toArray();
            },
            /**
             * Encodes binary data into a plaintext ASCII85 format string
             *
             * @instance
             * @public
             * @this Graphs.Ascii85
             * @memberof Graphs.Ascii85
             * @param   {Array.<number>}    ba    binary data to encode
             * @return  {string}                  ASCII85 encoded string
             */
            Encode: function (ba) {
                var $t;
                var sb = new System.Text.StringBuilder("", Bridge.Int.mul(ba.length, (((Bridge.Int.div(this._encodedBlock.length, this._decodedBlock.length)) | 0))));
                this._linePos = 0;

                if (this.EnforceMarks) {
                    this.AppendString(sb, this.PrefixMark);
                }

                var count = 0;
                this._tuple = 0;
                $t = Bridge.getEnumerator(ba);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (count >= ((this._decodedBlock.length - 1) | 0)) {
                            this._tuple = (this._tuple | b) >>> 0;
                            if (this._tuple === 0) {
                                this.AppendChar(sb, 122);
                            } else {
                                this.EncodeBlock$1(sb);
                            }
                            this._tuple = 0;
                            count = 0;
                        } else {
                            this._tuple = (this._tuple | ((b << (((24 - (Bridge.Int.mul(count, 8))) | 0))) >>> 0)) >>> 0;
                            count = (count + 1) | 0;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                // if we have some bytes left over at the end..
                if (count > 0) {
                    this.EncodeBlock(((count + 1) | 0), sb);
                }

                if (this.EnforceMarks) {
                    this.AppendString(sb, this.SuffixMark);
                }
                return sb.toString();
            },
            EncodeBlock$1: function (sb) {
                this.EncodeBlock(this._encodedBlock.length, sb);
            },
            EncodeBlock: function (count, sb) {
                for (var i = (this._encodedBlock.length - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    this._encodedBlock[System.Array.index(i, this._encodedBlock)] = ((((this._tuple % 85) + Graphs.Ascii85._asciiOffset) >>> 0)) & 255;
                    this._tuple = (Bridge.Int.div(this._tuple, 85)) >>> 0;
                }

                for (var i1 = 0; i1 < count; i1 = (i1 + 1) | 0) {
                    var c = this._encodedBlock[System.Array.index(i1, this._encodedBlock)];
                    this.AppendChar(sb, c);
                }

            },
            DecodeBlock: function () {
                this.DecodeBlock$1(this._decodedBlock.length);
            },
            DecodeBlock$1: function (bytes) {
                for (var i = 0; i < bytes; i = (i + 1) | 0) {
                    this._decodedBlock[System.Array.index(i, this._decodedBlock)] = (this._tuple >>> ((24 - (Bridge.Int.mul(i, 8))) | 0)) & 255;
                }
            },
            AppendString: function (sb, s) {
                if (this.LineLength > 0 && (((this._linePos + s.length) | 0) > this.LineLength)) {
                    this._linePos = 0;
                    sb.append(String.fromCharCode(13));
                    sb.append(String.fromCharCode(10));
                } else {
                    this._linePos = (this._linePos + s.length) | 0;
                }
                sb.append(s);
            },
            AppendChar: function (sb, c) {
                sb.append(String.fromCharCode(c));
                this._linePos = (this._linePos + 1) | 0;
                if (this.LineLength > 0 && (this._linePos >= this.LineLength)) {
                    this._linePos = 0;
                    sb.append(String.fromCharCode(13));
                    sb.append(String.fromCharCode(10));
                }
            }
        }
    });

    Bridge.define("Graphs.IHittable", {
        $kind: "interface"
    });

    Bridge.define("Graphs.Edge.Orientations", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                Forward: 1,
                Backward: 2
            }
        }
    });

    Bridge.define("Graphs.GraphCanvas.HistoricalGraph", {
        props: {
            Graph: null,
            ViewScale: 0,
            Zoom: 0
        }
    });

    Bridge.define("Graphs.GraphCanvas.States", {
        $kind: "enum",
        statics: {
            fields: {
                Idle: 0,
                DraggingVertex: 1,
                DraggingSelectionRegion: 2,
                DraggingSelectedVertices: 3
            }
        }
    });

    Bridge.define("Graphs.PolygonContainer", {
        fields: {
            _dots: null,
            _boundingBox: null
        },
        ctors: {
            ctor: function (dots) {
                this.$initialize();
                this._dots = dots;

                var minx = System.Linq.Enumerable.from(this._dots).min($asm.$.Graphs.PolygonContainer.f1);
                var maxx = System.Linq.Enumerable.from(this._dots).max($asm.$.Graphs.PolygonContainer.f1);
                var miny = System.Linq.Enumerable.from(this._dots).min($asm.$.Graphs.PolygonContainer.f2);
                var maxy = System.Linq.Enumerable.from(this._dots).max($asm.$.Graphs.PolygonContainer.f2);

                this._boundingBox = new GraphicsLayer.Box.$ctor1(minx, miny, maxx - minx, maxy - miny);
            }
        },
        methods: {
            Contains: function (dot) {
                if (!this._boundingBox.Contains(dot)) {
                    return false;
                }

                var contains = false;
                var j = (System.Array.getCount(this._dots, GraphicsLayer.Box) - 1) | 0;

                for (var i = 0; i < System.Array.getCount(this._dots, GraphicsLayer.Box); i = (i + 1) | 0) {
                    if ((System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y <= dot.Y && dot.Y < System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y || System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y <= dot.Y && dot.Y < System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) && dot.X < (System.Array.getItem(this._dots, j, GraphicsLayer.Box).X - System.Array.getItem(this._dots, i, GraphicsLayer.Box).X) * (dot.Y - System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) / (System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y - System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) + System.Array.getItem(this._dots, i, GraphicsLayer.Box).X) {
                        contains = !contains;
                    }

                    j = i;
                }

                return contains;
            }
        }
    });

    Bridge.ns("Graphs.PolygonContainer", $asm.$);

    Bridge.apply($asm.$.Graphs.PolygonContainer, {
        f1: function (dot) {
            return dot.X;
        },
        f2: function (dot) {
            return dot.Y;
        }
    });

    Bridge.define("Graphs.SerializationEdge", {
        fields: {
            IndexV1: 0,
            IndexV2: 0,
            Orientation: 0,
            Thickness: 0,
            Multiplicity: 0,
            Style: null,
            Label: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (e, vertices) {
                this.$initialize();                var $t, $t1;

                this.IndexV1 = vertices.indexOf(e.V1);
                this.IndexV2 = vertices.indexOf(e.V2);
                this.Orientation = e.Orientation;
                this.Thickness = e.Thickness;
                this.Multiplicity = e.Multiplicity;
                this.Style = ($t = e.Style, $t != null ? $t : "");
                this.Label = ($t1 = e.Label, $t1 != null ? $t1 : "");

                if (Bridge.referenceEquals(this.Style, "")) {
                    if (this.Orientation === Graphs.Edge.Orientations.Forward) {
                        this.Style = (e.Style = "post", "post");
                    } else {
                        if (this.Orientation === Graphs.Edge.Orientations.Backward) {
                            this.Style = (e.Style = "pre", "pre");
                        }
                    }
                }
        }
    }
    });

    Bridge.define("Graphs.SerializationGraph", {
        fields: {
            Vertices: null,
            Edges: null,
            Name: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (g) {
                this.$initialize();
                this.Vertices = System.Linq.Enumerable.from(g.Vertices).select($asm.$.Graphs.SerializationGraph.f1).toList(Graphs.SerializationVertex);
                this.Edges = System.Linq.Enumerable.from(g.Edges).select(function (e) {
                        return new Graphs.SerializationEdge.$ctor1(e, g.Vertices);
                    }).toList(Graphs.SerializationEdge);
                this.Name = g.Name;
            }
        }
    });

    Bridge.ns("Graphs.SerializationGraph", $asm.$);

    Bridge.apply($asm.$.Graphs.SerializationGraph, {
        f1: function (v) {
            return new Graphs.SerializationVertex.$ctor1(v);
        }
    });

    Bridge.define("Graphs.SerializationVector", {
        fields: {
            X: 0,
            Y: 0
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (v) {
                this.$initialize();
                this.X = v.X;
                this.Y = v.Y;
            }
        }
    });

    Bridge.define("Graphs.SerializationVertex", {
        fields: {
            Location: null,
            Label: null,
            Padding: 0,
            Style: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (v) {
                this.$initialize();                var $t;

                this.Location = new Graphs.SerializationVector.$ctor1(v.Location);
                this.Label = v.Label;
                this.Padding = v.Padding;
                this.Style = ($t = v.Style, $t != null ? $t : "");
        }
    }
    });

    Bridge.define("Graphs.Utility", {
        statics: {
            methods: {
                RotateAroundPoint: function (v, center, angle) {
                    var x = center.X + (v.X - center.X) * Math.cos(angle) - (v.Y - center.Y) * Math.sin(angle);
                    var y = center.Y + (v.X - center.X) * Math.sin(angle) + (v.Y - center.Y) * Math.cos(angle);

                    return new GraphicsLayer.Box.ctor(x, y);
                },
                RotateAroundPoint$1: function (v, center, angle) {
                    var x = center.X + (v.X - center.X) * Math.cos(angle) - (v.Y - center.Y) * Math.sin(angle);
                    var y = center.Y + (v.X - center.X) * Math.sin(angle) + (v.Y - center.Y) * Math.cos(angle);

                    return new Graphs.Vector(x, y);
                },
                PolarToRectangular: function (r, theta) {
                    return new Graphs.Vector(r * Math.cos(theta), r * Math.sin(theta));
                },
                HaveIntersection: function (start1, end1, start2, end2) {
                    var denom = ((end1.X - start1.X) * (end2.Y - start2.Y)) - ((end1.Y - start1.Y) * (end2.X - start2.X));

                    if (denom === 0) {
                        return false;
                    }

                    var numer = ((start1.Y - start2.Y) * (end2.X - start2.X)) - ((start1.X - start2.X) * (end2.Y - start2.Y));
                    var r = numer / denom;
                    var numer2 = ((start1.Y - start2.Y) * (end1.X - start1.X)) - ((start1.X - start2.X) * (end1.Y - start1.Y));
                    var s = numer2 / denom;

                    if (r < 0 || r > 1 || s < 0 || s > 1) {
                        return false;
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("Graphs.Vector", {
        statics: {
            methods: {
                op_Addition: function (a, b) {
                    return new Graphs.Vector(a._X + b._X, a._Y + b._Y);
                },
                op_UnaryNegation: function (a) {
                    return new Graphs.Vector(-a._X, -a._Y);
                },
                op_Subtraction: function (a, b) {
                    return new Graphs.Vector(a._X - b._X, a._Y - b._Y);
                },
                op_Multiply: function (a, b) {
                    return new Graphs.Vector(a._X * b, a._Y * b);
                },
                op_Multiply$1: function (a, b) {
                    return new Graphs.Vector(a._X * b, a._Y * b);
                },
                op_Equality: function (a, b) {
                    return a.Equals(b);
                },
                op_Inequality: function (a, b) {
                    return !(Graphs.Vector.op_Equality(a, b));
                },
                op_Implicit: function (v) {
                    return new GraphicsLayer.Box.ctor(v.X, v.Y);
                }
            }
        },
        fields: {
            _X: 0,
            _Y: 0
        },
        props: {
            Length: {
                get: function () {
                    return Math.sqrt(this._X * this._X + this._Y * this._Y);
                }
            },
            X: {
                get: function () {
                    return this._X;
                },
                set: function (value) {
                    this._X = value;
                }
            },
            Y: {
                get: function () {
                    return this._Y;
                },
                set: function (value) {
                    this._Y = value;
                }
            }
        },
        ctors: {
            ctor: function (x, y) {
                this.$initialize();
                this._X = x;
                this._Y = y;
            }
        },
        methods: {
            Normalize: function () {
                var length = this.Length;

                this._X = this._X / length;
                this._Y = this._Y / length;

                return length > 0;
            },
            Dot: function (vector) {
                return this._X * vector._X + this._Y * vector._Y;
            },
            Distance: function (vector) {
                return Math.sqrt(Math.pow(vector._X - this._X, 2) + Math.pow(vector._Y - this._Y, 2));
            },
            equals: function (obj) {
                if (!(Bridge.is(obj, Graphs.Vector))) {
                    return false;
                }

                var v = Bridge.cast(obj, Graphs.Vector);

                return this.Equals(v);
            },
            Equals: function (v) {
                return this._X === v._X && this._Y === v._Y;
            },
            getHashCode: function () {
                return Bridge.getHashCode(this.toString());
            },
            toString: function () {
                return "(" + System.Double.format(this._X) + ", " + System.Double.format(this._Y) + ")";
            }
        }
    });

    Bridge.define("GraphsCore.CompactSerializer", {
        statics: {
            fields: {
                Scale: 0,
                Prefix: null,
                ASCII: null
            },
            ctors: {
                init: function () {
                    this.Scale = 10000;
                    this.Prefix = "webgraph:";
                    this.ASCII = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";
                }
            },
            methods: {
                LooksLikeASerializedGraph: function (s) {
                    return !System.String.isNullOrEmpty(s) && System.String.startsWith(s, GraphsCore.CompactSerializer.Prefix);
                },
                Serialize: function (g) {
                    var bytes = GraphsCore.CompactSerializer.SerializeToByteArray(g);
                    var compressed = QuickLZ.compress(bytes);
                    var Ascii85 = new Graphs.Ascii85();
                    return System.String.concat(GraphsCore.CompactSerializer.Prefix, Ascii85.Encode(compressed));
                },
                SerializeToByteArray: function (g) {
                    var $t, $t1, $t2, $t3, $t4;
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    bytes.add(((g.Vertices.Count) & 255));
                    $t = Bridge.getEnumerator(g.Vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.X * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.Y * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.Padding * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(v.Label));
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(($t1 = v.Style, $t1 != null ? $t1 : "")));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    bytes.addRange(System.BitConverter.getBytes$7(((g.Edges.Count) & 65535)));
                    $t2 = Bridge.getEnumerator(g.Edges);
                    try {
                        while ($t2.moveNext()) {
                            var e = $t2.Current;
                            bytes.add(((g.Vertices.indexOf(e.V1)) & 255));
                            bytes.add(((g.Vertices.indexOf(e.V2)) & 255));
                            bytes.add(((e.Multiplicity) & 255));
                            bytes.add(((e.Orientation) & 255));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(e.Thickness * 100, 0, 6))));

                            var label = ($t3 = e.Label, $t3 != null ? $t3 : "");
                            var hackedStyle = System.String.concat((($t4 = e.Style, $t4 != null ? $t4 : "")), "~~|~|~~", label);
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(hackedStyle));
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }
                    return bytes.toArray();
                },
                Deserialize: function (s) {
                    try {
                        var Ascii85 = new Graphs.Ascii85();
                        var compressed = Ascii85.Decode(s.substr(GraphsCore.CompactSerializer.Prefix.length));
                        var bytes = QuickLZ.decompress(compressed);
                        return GraphsCore.CompactSerializer.DeserializeFromByteArray(bytes);
                    }
                    catch (ex) {
                        ex = System.Exception.create(ex);
                        System.Console.WriteLine(ex.Message);
                    }

                    return null;
                },
                DeserializeFromByteArray: function (bytes) {
                    var $t;
                    var offset = { v : 0 };
                    var n = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                    var vertices = new (System.Collections.Generic.List$1(Graphs.Vertex))();
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        var x = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var y = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var padding = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var label = GraphsCore.CompactSerializer.ReadString(bytes, offset);
                        var style = GraphsCore.CompactSerializer.ReadString(bytes, offset);
                        vertices.add(($t = new Graphs.Vertex.$ctor3(x, y), $t.Padding = padding, $t.Label = label, $t.Style = style, $t));
                    }

                    var e = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset);
                    var edges = new (System.Collections.Generic.List$1(Graphs.Edge))();
                    for (var i1 = 0; i1 < e; i1 = (i1 + 1) | 0) {
                        var v1 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var v2 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var multiplicity = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var orientation = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var thickness = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / 100;
                        var style1 = GraphsCore.CompactSerializer.ReadString(bytes, offset);

                        edges.add(($t = new Graphs.Edge.$ctor1(vertices.getItem(v1), vertices.getItem(v2)), $t.Multiplicity = multiplicity, $t.Orientation = orientation, $t.Thickness = thickness, $t.Style = style1, $t));
                    }

                    return new Graphs.Graph.$ctor3(vertices, edges);
                },
                ReadByte: function (bytes, offset) {
                    return bytes[System.Array.index(Bridge.identity(offset.v, (offset.v = (offset.v + 1) | 0)), bytes)];
                },
                ReadUInt16: function (bytes, offset) {
                    var x = System.BitConverter.toUInt16(bytes, offset.v);
                    offset.v = (offset.v + 2) | 0;
                    return x;
                },
                ReadUInt32: function (bytes, offset) {
                    var x = System.BitConverter.toUInt32(bytes, offset.v);
                    offset.v = (offset.v + 4) | 0;
                    return x;
                },
                Get7BitEncodedInt: function (value) {
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    var num = value >>> 0;
                    while (num >= 128) {
                        bytes.add(((((num | 128) >>> 0)) & 255));
                        num = num >>> 7;
                    }
                    bytes.add((num & 255));

                    return bytes.toArray();
                },
                Read7BitEncodedInt: function (bytes, offset) {
                    var num1 = 0;
                    var num2 = 0;
                    while (num2 !== 35) {
                        var num3 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        num1 = num1 | ((num3 & 127) << num2);
                        num2 = (num2 + 7) | 0;
                        if ((num3 & 128) === 0) {
                            return num1;
                        }
                    }
                    throw new System.FormatException("bad 7-bit encoded int");
                },
                GetBytes: function (s) {
                    var $t, $t1;
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    $t = Bridge.getEnumerator(System.String.toCharArray(s, 0, s.length));
                    try {
                        while ($t.moveNext()) {
                            var c = $t.Current;
                            bytes.addRange(System.BitConverter.getBytes$1(c));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(Bridge.cast(GraphsCore.CompactSerializer.Get7BitEncodedInt(bytes.Count), System.Collections.Generic.IEnumerable$1(System.Byte))).reverse());
                    try {
                        while ($t1.moveNext()) {
                            var b = $t1.Current;
                            bytes.insert(0, b);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return bytes.toArray();
                },
                ReadString: function (bytes, offset) {
                    var length = GraphsCore.CompactSerializer.Read7BitEncodedInt(bytes, offset);

                    var s = "";
                    while (Bridge.identity(length, (length = (length - 1) | 0)) > 0) {
                        s = System.String.concat(s, String.fromCharCode(GraphsCore.CompactSerializer.ASCII.charCodeAt(((bytes[System.Array.index(Bridge.identity(offset.v, (offset.v = (offset.v + 1) | 0)), bytes)] - 32) | 0))));
                    }
                    return s;
                }
            }
        }
    });

    Bridge.define("GraphsCore.GraphIO", {
        statics: {
            fields: {
                ASCII: null
            },
            ctors: {
                init: function () {
                    this.ASCII = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";
                }
            },
            methods: {
                ToAdjacencyMatrix: function (edgeWeights, isDirected) {
                    var $t;
                    if (isDirected === void 0) { isDirected = false; }
                    var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                    var m = System.Array.create(0, null, System.Char, n, n);

                    var k = 0;
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                            var ew = edgeWeights.getItem(k);
                            if (isDirected) {
                                m.set([i, j], (m.set([j, i], 48), 48));

                                if (ew > 0) {
                                    m.set([i, j], 49);
                                } else {
                                    if (ew < 0) {
                                        m.set([j, i], 49);
                                    }
                                }
                            } else {
                                m.set([i, j], ($t = ew !== 0 ? 49 : 48, m.set([j, i], $t), $t));
                            }

                            k = (k + 1) | 0;
                        }
                    }

                    for (var i1 = 0; i1 < n; i1 = (i1 + 1) | 0) {
                        m.set([i1, i1], 48);
                    }

                    var s = "";
                    for (var i2 = 0; i2 < n; i2 = (i2 + 1) | 0) {
                        for (var j1 = 0; j1 < n; j1 = (j1 + 1) | 0) {
                            s = System.String.concat(s, String.fromCharCode(m.get([i2, j1])));
                        }
                        s = System.String.concat(s, '\n');
                    }

                    return s;
                },
                ToGraph6: function (g) {
                    return GraphsCore.GraphIO.ToGraph6$1(g.GetEdgeWeights());
                },
                ToGraph6$1: function (w) {
                    var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, w.Count)) | 0))) / 2);
                    if (n > 62) {
                        throw new System.NotImplementedException("i have yet to write/read graph6 files with more than 62 vertices.");
                    }

                    var p = System.Linq.Enumerable.from(GraphsCore.GraphIO.RowToColumnPermutation(n)).toList(System.Int32);
                    var wp = new (System.Collections.Generic.List$1(System.Int32))(w.Count);

                    for (var i = 0; i < p.Count; i = (i + 1) | 0) {
                        wp.add(Math.abs(w.getItem(p.indexOf(i))));
                    }

                    while (wp.Count % 6 !== 0) {
                        wp.add(0);
                    }

                    var bb = System.Linq.Enumerable.from(MoreLinq.MoreEnumerable.Prepend(System.Byte, MoreLinq.MoreEnumerable.Batch(System.Int32, System.Byte, wp, 6, $asm.$.GraphsCore.GraphIO.f2), ((((n + 63) | 0)) & 255))).toArray();
                    return Bridge.toArray(System.Linq.Enumerable.from(bb).select($asm.$.GraphsCore.GraphIO.f3)).join("");
                },
                RowToColumnPermutation: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            j,
                            y,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            x = 0;
                                                j = 0;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( j < ((n - 1) | 0) ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 9;
                                            continue;
                                        }
                                        case 2: {
                                            y = x;
                                                i = 0;
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ( i < ((((n - 1) | 0) - j) | 0) ) {
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 7;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = y;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            y = (y + (((((1 + j) | 0) + i) | 0))) | 0;
                                            $step = 6;
                                            continue;
                                        }
                                        case 6: {
                                            i = (i + 1) | 0;
                                            $step = 3;
                                            continue;
                                        }
                                        case 7: {
                                            x = (x + (((2 + j) | 0))) | 0;
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            j = (j + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 9: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                Low6: function (b) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (b) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 5;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i >= 0 ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = (b & (1 << i)) >> i;
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            i = (i - 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("GraphsCore.GraphIO", $asm.$);

    Bridge.apply($asm.$.GraphsCore.GraphIO, {
        f1: function (pair) {
            return pair.value << pair.key;
        },
        f2: function (bits) {
            return ((((System.Linq.Enumerable.from(MoreLinq.MoreEnumerable.Index(System.Int32, System.Linq.Enumerable.from(bits).reverse())).select($asm.$.GraphsCore.GraphIO.f1).sum() + 63) | 0)) & 255);
        },
        f3: function (b) {
            return String.fromCharCode(GraphsCore.GraphIO.ASCII.charCodeAt(((b - 32) | 0)));
        }
    });

    /** @namespace System */

    /**
     * @memberof System
     * @callback System.Func
     * @param   {System.Collections.Generic.IEnumerable$1}    arg
     * @return  {TResult}
     */

    Bridge.define("MoreLinq.MoreEnumerable", {
        statics: {
            methods: {
                /**
                 * Batches the source sequence into sized buckets.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The source sequence.
                 * @param   {number}                                      size       Size of buckets.
                 * @return  {System.Collections.Generic.IEnumerable$1}               A sequence of equally sized buckets containing elements of the source collection.
                 */
                Batch$1: function (TSource, source, size) {
                    return MoreLinq.MoreEnumerable.Batch(TSource, System.Collections.Generic.IEnumerable$1(TSource), source, size, $asm.$.MoreLinq.MoreEnumerable.f1);
                },
                /**
                 * Batches the source sequence into sized buckets and applies a projection to each bucket.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource           Type of elements in <b>TSource</b> sequence.
                 * @param   {Function}                                    TResult           Type of result returned by <b>TResult</b>.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source            The source sequence.
                 * @param   {number}                                      size              Size of buckets.
                 * @param   {System.Func}                                 resultSelector    The projection to apply to each bucket.
                 * @return  {System.Collections.Generic.IEnumerable$1}                      A sequence of projections on equally sized buckets containing elements of the source collection.
                 */
                Batch: function (TSource, TResult, source, size, resultSelector) {
                    return MoreLinq.MoreEnumerable.BatchImpl(TSource, TResult, source, size, resultSelector);
                },
                BatchImpl: function (TSource, TResult, source, size, resultSelector) {
                    return new (Bridge.GeneratorEnumerable$1(TResult))(Bridge.fn.bind(this, function (TSource, TResult, source, size, resultSelector) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            bucket,
                            count,
                            $t,
                            item,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(TResult))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            bucket = null;
                                                count = 0;

                                                $t = Bridge.getEnumerator(source, TSource);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    item = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            if (bucket == null) {
                                                    bucket = System.Array.init(size, function (){
                                                        return Bridge.getDefaultValue(TSource);
                                                    }, TSource);
                                                }

                                                bucket[System.Array.index(Bridge.identity(count, (count = (count + 1) | 0)), bucket)] = item;

                                                // The bucket is fully buffered before it's yielded
                                                if (count !== size) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                // Select is necessary so bucket contents are streamed too
                                                $enumerator.current = resultSelector(System.Linq.Enumerable.from(bucket).select($asm.$.MoreLinq.MoreEnumerable.f1));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            bucket = null;
                                                count = 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            // Return the last bucket with all remaining elements
                                                if (bucket != null && count > 0) {
                                                    $step = 5;
                                                    continue;
                                                } 
                                                $step = 7;
                                                continue;
                                        }
                                        case 5: {
                                            $enumerator.current = resultSelector(System.Linq.Enumerable.from(bucket).take(count));
                                                $step = 6;
                                                return true;
                                        }
                                        case 6: {
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                /**
                 * Returns a sequence of {@link } 
                 where the key is the zero-based index of the value in the source 
                 sequence.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The source sequence.
                 * @return  {System.Collections.Generic.IEnumerable$1}               A sequence of {@link }.
                 */
                Index: function (TSource, source) {
                    return MoreLinq.MoreEnumerable.Index$1(TSource, source, 0);
                },
                /**
                 * Returns a sequence of {@link } 
                 where the key is the index of the value in the source sequence.
                 An additional parameter specifies the starting index.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource       Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source        The source sequence.
                 * @param   {number}                                      startIndex
                 * @return  {System.Collections.Generic.IEnumerable$1}                  A sequence of {@link }.
                 */
                Index$1: function (TSource, source, startIndex) {
                    return System.Linq.Enumerable.from(source).select(function (item, index) {
                            return new (System.Collections.Generic.KeyValuePair$2(System.Int32,TSource))(((startIndex + index) | 0), item);
                        });
                },
                /**
                 * Prepends a single value to a sequence.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    The type of the elements of <b>TSource</b>.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The sequence to prepend to.
                 * @param   {TSource}                                     value      The value to prepend.
                 * @return  {System.Collections.Generic.IEnumerable$1}               Returns a sequence where a value is prepended to it.
                 */
                Prepend: function (TSource, source, value) {
                    if (source == null) {
                        throw new System.ArgumentNullException("source");
                    }
                    return System.Linq.Enumerable.from(System.Linq.Enumerable.repeat(value, 1)).concat(source);
                }
            }
        }
    });

    Bridge.ns("MoreLinq.MoreEnumerable", $asm.$);

    Bridge.apply($asm.$.MoreLinq.MoreEnumerable, {
        f1: function (x) {
            return x;
        }
    });

    Bridge.define("QuickLZ", {
        statics: {
            fields: {
                QLZ_VERSION_MAJOR: 0,
                QLZ_VERSION_MINOR: 0,
                QLZ_VERSION_REVISION: 0,
                QLZ_STREAMING_BUFFER: 0,
                QLZ_MEMORY_SAFE: 0,
                HASH_VALUES: 0,
                MINOFFSET: 0,
                UNCONDITIONAL_MATCHLEN: 0,
                UNCOMPRESSED_END: 0,
                CWORD_LEN: 0,
                DEFAULT_HEADERLEN: 0,
                QLZ_POINTERS_1: 0,
                QLZ_POINTERS_3: 0
            },
            ctors: {
                init: function () {
                    this.QLZ_VERSION_MAJOR = 1;
                    this.QLZ_VERSION_MINOR = 5;
                    this.QLZ_VERSION_REVISION = 0;
                    this.QLZ_STREAMING_BUFFER = 0;
                    this.QLZ_MEMORY_SAFE = 0;
                    this.HASH_VALUES = 4096;
                    this.MINOFFSET = 2;
                    this.UNCONDITIONAL_MATCHLEN = 6;
                    this.UNCOMPRESSED_END = 4;
                    this.CWORD_LEN = 4;
                    this.DEFAULT_HEADERLEN = 9;
                    this.QLZ_POINTERS_1 = 1;
                    this.QLZ_POINTERS_3 = 16;
                }
            },
            methods: {
                headerLen: function (source) {
                    return ((source[System.Array.index(0, source)] & 2) === 2) ? 9 : 3;
                },
                sizeDecompressed: function (source) {
                    if (QuickLZ.headerLen(source) === 9) {
                        return source[System.Array.index(5, source)] | (source[System.Array.index(6, source)] << 8) | (source[System.Array.index(7, source)] << 16) | (source[System.Array.index(8, source)] << 24);
                    } else {
                        return source[System.Array.index(2, source)];
                    }
                },
                sizeCompressed: function (source) {
                    if (QuickLZ.headerLen(source) === 9) {
                        return source[System.Array.index(1, source)] | (source[System.Array.index(2, source)] << 8) | (source[System.Array.index(3, source)] << 16) | (source[System.Array.index(4, source)] << 24);
                    } else {
                        return source[System.Array.index(1, source)];
                    }
                },
                write_header: function (dst, level, compressible, size_compressed, size_decompressed) {
                    dst[System.Array.index(0, dst)] = (2 | (compressible ? 1 : 0)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | ((level << 2) & 255)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | (64)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | (0)) & 255;
                    QuickLZ.fast_write(dst, 1, size_decompressed, 4);
                    QuickLZ.fast_write(dst, 5, size_compressed, 4);
                },
                compress: function (source, level) {
                    var $t;
                    if (level === void 0) { level = 1; }
                    var src = 0;
                    var dst = 13;
                    var cword_val = 2147483648;
                    var cword_ptr = QuickLZ.DEFAULT_HEADERLEN;
                    var destination = System.Array.init(((source.length + 400) | 0), 0, System.Byte);
                    var hashtable;
                    var cachetable = System.Array.init(QuickLZ.HASH_VALUES, 0, System.Int32);
                    var hash_counter = System.Array.init(QuickLZ.HASH_VALUES, 0, System.Byte);
                    var d2;
                    var fetch = 0;
                    var last_matchstart = (((((((source.length - QuickLZ.UNCONDITIONAL_MATCHLEN) | 0) - QuickLZ.UNCOMPRESSED_END) | 0) - 1) | 0));
                    var lits = 0;

                    if (level !== 1 && level !== 3) {
                        throw new System.ArgumentException("C# version only supports level 1 and 3");
                    }

                    if (level === 1) {
                        hashtable = System.Array.create(0, null, System.Int32, 4096, 1);
                    } else {
                        hashtable = System.Array.create(0, null, System.Int32, 4096, 16);
                    }

                    if (source.length === 0) {
                        return System.Array.init(0, 0, System.Byte);
                    }

                    if (src <= last_matchstart) {
                        fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                    }

                    while (src <= last_matchstart) {
                        if ((((cword_val & 1) >>> 0)) === 1) {
                            if (src > source.length >> 1 && dst > ((src - (src >> 5)) | 0)) {
                                d2 = System.Array.init(((source.length + QuickLZ.DEFAULT_HEADERLEN) | 0), 0, System.Byte);
                                QuickLZ.write_header(d2, level, false, source.length, ((source.length + QuickLZ.DEFAULT_HEADERLEN) | 0));
                                System.Array.copy(source, 0, d2, QuickLZ.DEFAULT_HEADERLEN, source.length);
                                return d2;
                            }

                            QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), 4);
                            cword_ptr = dst;
                            dst = (dst + QuickLZ.CWORD_LEN) | 0;
                            cword_val = 2147483648;
                        }

                        if (level === 1) {
                            var hash = ((fetch >> 12) ^ fetch) & (4095);
                            var o = hashtable.get([hash, 0]);
                            var cache = cachetable[System.Array.index(hash, cachetable)] ^ fetch;
                            cachetable[System.Array.index(hash, cachetable)] = fetch;
                            hashtable.set([hash, 0], src);

                            if (cache === 0 && hash_counter[System.Array.index(hash, hash_counter)] !== 0 && (((src - o) | 0) > QuickLZ.MINOFFSET || (src === ((o + 1) | 0) && lits >= 3 && src > 3 && source[System.Array.index(src, source)] === source[System.Array.index(((src - 3) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src - 2) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src - 1) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src + 1) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src + 2) | 0), source)]))) {
                                cword_val = ((((cword_val >>> 1) | 2147483648) >>> 0));
                                if (source[System.Array.index(((o + 3) | 0), source)] !== source[System.Array.index(((src + 3) | 0), source)]) {
                                    var f = 1 | (hash << 4);
                                    destination[System.Array.index(((dst + 0) | 0), destination)] = (f >> 0) & 255;
                                    destination[System.Array.index(((dst + 1) | 0), destination)] = (f >> 8) & 255;
                                    src = (src + 3) | 0;
                                    dst = (dst + 2) | 0;
                                } else {
                                    var old_src = src;
                                    var remaining = ((((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)) > 255 ? 255 : (((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)));

                                    src = (src + 4) | 0;
                                    if (source[System.Array.index(((((o + src) | 0) - old_src) | 0), source)] === source[System.Array.index(src, source)]) {
                                        src = (src + 1) | 0;
                                        if (source[System.Array.index(((((o + src) | 0) - old_src) | 0), source)] === source[System.Array.index(src, source)]) {
                                            src = (src + 1) | 0;
                                            while (source[System.Array.index(((o + (((src - old_src) | 0))) | 0), source)] === source[System.Array.index(src, source)] && (((src - old_src) | 0)) < remaining) {
                                                src = (src + 1) | 0;
                                            }
                                        }
                                    }

                                    var matchlen = (src - old_src) | 0;

                                    hash = hash << 4;
                                    if (matchlen < 18) {
                                        var f1 = (hash | (((matchlen - 2) | 0)));
                                        destination[System.Array.index(((dst + 0) | 0), destination)] = (f1 >> 0) & 255;
                                        destination[System.Array.index(((dst + 1) | 0), destination)] = (f1 >> 8) & 255;
                                        dst = (dst + 2) | 0;
                                    } else {
                                        QuickLZ.fast_write(destination, dst, hash | (matchlen << 16), 3);
                                        dst = (dst + 3) | 0;
                                    }
                                }
                                fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                                lits = 0;
                            } else {
                                lits = (lits + 1) | 0;
                                hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                cword_val = (cword_val >>> 1);
                                src = (src + 1) | 0;
                                dst = (dst + 1) | 0;
                                fetch = ((fetch >> 8) & 65535) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                            }

                        } else {
                            fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);

                            var o1, offset2;
                            var matchlen1, k, m, best_k = 0;
                            var c;
                            var remaining1 = ((((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)) > 255 ? 255 : (((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)));
                            var hash1 = ((fetch >> 12) ^ fetch) & (4095);

                            c = hash_counter[System.Array.index(hash1, hash_counter)];
                            matchlen1 = 0;
                            offset2 = 0;
                            for (k = 0; k < QuickLZ.QLZ_POINTERS_3 && c > k; k = (k + 1) | 0) {
                                o1 = hashtable.get([hash1, k]);
                                if ((fetch & 255) === source[System.Array.index(o1, source)] && (((fetch >> 8)) & 255) === source[System.Array.index(((o1 + 1) | 0), source)] && (((fetch >> 16)) & 255) === source[System.Array.index(((o1 + 2) | 0), source)] && o1 < ((src - QuickLZ.MINOFFSET) | 0)) {
                                    m = 3;
                                    while (source[System.Array.index(((o1 + m) | 0), source)] === source[System.Array.index(((src + m) | 0), source)] && m < remaining1) {
                                        m = (m + 1) | 0;
                                    }
                                    if ((m > matchlen1) || (m === matchlen1 && o1 > offset2)) {
                                        offset2 = o1;
                                        matchlen1 = m;
                                        best_k = k;
                                    }
                                }
                            }
                            o1 = offset2;
                            hashtable.set([hash1, c & (15)], src);
                            c = (c + 1) & 255;
                            hash_counter[System.Array.index(hash1, hash_counter)] = c;

                            if (matchlen1 >= 3 && ((src - o1) | 0) < 131071) {
                                var offset = (src - o1) | 0;

                                for (var u = 1; u < matchlen1; u = (u + 1) | 0) {
                                    fetch = source[System.Array.index(((src + u) | 0), source)] | (source[System.Array.index(((((src + u) | 0) + 1) | 0), source)] << 8) | (source[System.Array.index(((((src + u) | 0) + 2) | 0), source)] << 16);
                                    hash1 = ((fetch >> 12) ^ fetch) & (4095);
                                    c = Bridge.identity(hash_counter[System.Array.index(hash1, hash_counter)], ($t = (hash_counter[System.Array.index(hash1, hash_counter)] + 1) & 255, hash_counter[System.Array.index(hash1, hash_counter)] = $t, $t));
                                    hashtable.set([hash1, c & (15)], (src + u) | 0);
                                }

                                src = (src + matchlen1) | 0;
                                cword_val = ((((cword_val >>> 1) | 2147483648) >>> 0));

                                if (matchlen1 === 3 && offset <= 63) {
                                    QuickLZ.fast_write(destination, dst, offset << 2, 1);
                                    dst = (dst + 1) | 0;
                                } else if (matchlen1 === 3 && offset <= 16383) {
                                    QuickLZ.fast_write(destination, dst, (offset << 2) | 1, 2);
                                    dst = (dst + 2) | 0;
                                } else if (matchlen1 <= 18 && offset <= 1023) {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 3) | 0)) << 2) | (offset << 6) | 2, 2);
                                    dst = (dst + 2) | 0;
                                } else if (matchlen1 <= 33) {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 2) | 0)) << 2) | (offset << 7) | 3, 3);
                                    dst = (dst + 3) | 0;
                                } else {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 3) | 0)) << 7) | (offset << 15) | 3, 4);
                                    dst = (dst + 4) | 0;
                                }
                                lits = 0;
                            } else {
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                cword_val = (cword_val >>> 1);
                                src = (src + 1) | 0;
                                dst = (dst + 1) | 0;
                            }
                        }
                    }
                    while (src <= ((source.length - 1) | 0)) {
                        if ((((cword_val & 1) >>> 0)) === 1) {
                            QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), 4);
                            cword_ptr = dst;
                            dst = (dst + QuickLZ.CWORD_LEN) | 0;
                            cword_val = 2147483648;
                        }

                        destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                        src = (src + 1) | 0;
                        dst = (dst + 1) | 0;
                        cword_val = (cword_val >>> 1);
                    }
                    while ((((cword_val & 1) >>> 0)) !== 1) {
                        cword_val = (cword_val >>> 1);
                    }
                    QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), QuickLZ.CWORD_LEN);
                    QuickLZ.write_header(destination, level, true, source.length, dst);
                    d2 = System.Array.init(dst, 0, System.Byte);
                    System.Array.copy(destination, 0, d2, 0, dst);
                    return d2;
                },
                fast_write: function (a, i, value, numbytes) {
                    for (var j = 0; j < numbytes; j = (j + 1) | 0) {
                        a[System.Array.index(((i + j) | 0), a)] = (value >> (Bridge.Int.mul(j, 8))) & 255;
                    }
                },
                decompress: function (source) {
                    var level;
                    var size = QuickLZ.sizeDecompressed(source);
                    var src = QuickLZ.headerLen(source);
                    var dst = 0;
                    var cword_val = 1;
                    var destination = System.Array.init(size, 0, System.Byte);
                    var hashtable = System.Array.init(4096, 0, System.Int32);
                    var hash_counter = System.Array.init(4096, 0, System.Byte);
                    var last_matchstart = (((((size - QuickLZ.UNCONDITIONAL_MATCHLEN) | 0) - QuickLZ.UNCOMPRESSED_END) | 0) - 1) | 0;
                    var last_hashed = -1;
                    var hash;
                    var fetch = 0;

                    level = (source[System.Array.index(0, source)] >> 2) & 3;

                    if (level !== 1 && level !== 3) {
                        throw new System.ArgumentException("C# version only supports level 1 and 3");
                    }

                    if ((source[System.Array.index(0, source)] & 1) !== 1) {
                        var d2 = System.Array.init(size, 0, System.Byte);
                        System.Array.copy(source, QuickLZ.headerLen(source), d2, 0, size);
                        return d2;
                    }

                    for (; ; ) {
                        if (cword_val === 1) {
                            cword_val = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                            src = (src + 4) | 0;
                            if (dst <= last_matchstart) {
                                if (level === 1) {
                                    fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0;
                                } else {
                                    fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                                }
                            }
                        }

                        if ((((cword_val & 1) >>> 0)) === 1) {
                            var matchlen;
                            var offset2;

                            cword_val = cword_val >>> 1;

                            if (level === 1) {
                                hash = ((fetch | 0) >> 4) & 4095;
                                offset2 = (hashtable[System.Array.index(hash, hashtable)]) >>> 0;

                                if ((((fetch & 15) >>> 0)) !== 0) {
                                    matchlen = ((((fetch & 15) >>> 0)) + 2) >>> 0;
                                    src = (src + 2) | 0;
                                } else {
                                    matchlen = source[System.Array.index(((src + 2) | 0), source)];
                                    src = (src + 3) | 0;
                                }
                            } else {
                                var offset;
                                if ((((fetch & 3) >>> 0)) === 0) {
                                    offset = (((fetch & 255) >>> 0)) >>> 2;
                                    matchlen = 3;
                                    src = (src + 1) | 0;
                                } else if ((((fetch & 2) >>> 0)) === 0) {
                                    offset = (((fetch & 65535) >>> 0)) >>> 2;
                                    matchlen = 3;
                                    src = (src + 2) | 0;
                                } else if ((((fetch & 1) >>> 0)) === 0) {
                                    offset = (((fetch & 65535) >>> 0)) >>> 6;
                                    matchlen = (((((fetch >>> 2) & 15) >>> 0)) + 3) >>> 0;
                                    src = (src + 2) | 0;
                                } else if ((((fetch & 127) >>> 0)) !== 3) {
                                    offset = ((fetch >>> 7) & 131071) >>> 0;
                                    matchlen = (((((fetch >>> 2) & 31) >>> 0)) + 2) >>> 0;
                                    src = (src + 3) | 0;
                                } else {
                                    offset = (fetch >>> 15);
                                    matchlen = (((((fetch >>> 7) & 255) >>> 0)) + 3) >>> 0;
                                    src = (src + 4) | 0;
                                }
                                offset2 = System.Int64.clipu32(System.Int64(dst).sub(System.Int64(offset)));
                            }

                            destination[System.Array.index(((dst + 0) | 0), destination)] = destination[System.Array.index(((offset2 + 0) >>> 0), destination)];
                            destination[System.Array.index(((dst + 1) | 0), destination)] = destination[System.Array.index(((offset2 + 1) >>> 0), destination)];
                            destination[System.Array.index(((dst + 2) | 0), destination)] = destination[System.Array.index(((offset2 + 2) >>> 0), destination)];

                            for (var i = 3; System.Int64(i).lt(System.Int64(matchlen)); i = (i + 1) | 0) {
                                destination[System.Array.index(((dst + i) | 0), destination)] = destination[System.Array.index(System.Int64.toNumber(System.Int64(offset2).add(System.Int64(i))), destination)];
                            }

                            dst = (dst + (matchlen | 0)) | 0;

                            if (level === 1) {
                                fetch = (destination[System.Array.index(((last_hashed + 1) | 0), destination)] | (destination[System.Array.index(((last_hashed + 2) | 0), destination)] << 8) | (destination[System.Array.index(((last_hashed + 3) | 0), destination)] << 16)) >>> 0;
                                while (System.Int64(last_hashed).lt(System.Int64(dst).sub(System.Int64(matchlen)))) {
                                    last_hashed = (last_hashed + 1) | 0;
                                    hash = (((((((fetch >>> 12) ^ fetch) >>> 0)) & (4095)) >>> 0)) | 0;
                                    hashtable[System.Array.index(hash, hashtable)] = last_hashed;
                                    hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                    fetch = ((((fetch >>> 8 & 65535) >>> 0) | (((destination[System.Array.index(((last_hashed + 3) | 0), destination)] << 16)) >>> 0)) >>> 0);
                                }
                                fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0;
                            } else {
                                fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                            }
                            last_hashed = (dst - 1) | 0;
                        } else {
                            if (dst <= last_matchstart) {
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                dst = (dst + 1) | 0;
                                src = (src + 1) | 0;
                                cword_val = cword_val >>> 1;

                                if (level === 1) {
                                    while (last_hashed < ((dst - 3) | 0)) {
                                        last_hashed = (last_hashed + 1) | 0;
                                        var fetch2 = destination[System.Array.index(last_hashed, destination)] | (destination[System.Array.index(((last_hashed + 1) | 0), destination)] << 8) | (destination[System.Array.index(((last_hashed + 2) | 0), destination)] << 16);
                                        hash = ((fetch2 >> 12) ^ fetch2) & (4095);
                                        hashtable[System.Array.index(hash, hashtable)] = last_hashed;
                                        hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                    }
                                    fetch = ((((fetch >>> 8 & 65535) >>> 0) | (((source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0)) >>> 0);
                                } else {
                                    fetch = ((((((fetch >>> 8 & 65535) >>> 0) | (((source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0)) >>> 0) | (((source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0)) >>> 0);
                                }
                            } else {
                                while (dst <= ((size - 1) | 0)) {
                                    if (cword_val === 1) {
                                        src = (src + QuickLZ.CWORD_LEN) | 0;
                                        cword_val = 2147483648;
                                    }

                                    destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                    dst = (dst + 1) | 0;
                                    src = (src + 1) | 0;
                                    cword_val = cword_val >>> 1;
                                }
                                return destination;
                            }
                        }
                    }
                }
            }
        }
    });

    Bridge.define("Test.App", {
        main: function Main () {
            window.onload = Bridge.fn.combine(window.onload, Test.App.OnWindowLoad);
        },
        statics: {
            fields: {
                _sageContainer: null,
                _newSheetTab: null,
                _currentTabCanvas: null,
                _tabID: 0,
                _canvasLookup: null
            },
            props: {
                CurrentTabCanvas: {
                    get: function () {
                        return Test.App._canvasLookup.get(Test.App._currentTabCanvas);
                    }
                }
            },
            ctors: {
                init: function () {
                    this._tabID = 1;
                    this._canvasLookup = new (System.Collections.Generic.Dictionary$2(System.String,Test.TabCanvas))();
                }
            },
            methods: {
                OnWindowLoad: function (eee) {
                    window.addEventListener("copy", $asm.$.Test.App.f1);

                    window.addEventListener("paste", $asm.$.Test.App.f2);

                    $(document).on("keydown", Test.App.OnKeyDown);
                    $(document).on("contextmenu", ".IAmAGraphCanvas", $asm.$.Test.App.f3);

                    Test.App._sageContainer = document.getElementById("SageContainer");
                    $("#SageManual").on("click", $asm.$.Test.App.f4);
                    $("#SageGraph6").on("click", $asm.$.Test.App.f5);
                    $("#SageSparse6").on("click", $asm.$.Test.App.f6);
                    $("#SageChromaticNumber").on("click", $asm.$.Test.App.f7);
                    $("#SageChromaticPolynomial").on("click", $asm.$.Test.App.f8);
                    $("#SageColoring").on("click", $asm.$.Test.App.f9);
                    $("#SageIndependentSet").on("click", $asm.$.Test.App.f10);
                    $("#SageIsPerfect").on("click", $asm.$.Test.App.f11);
                    $("#SageMatchingPolynomial").on("click", $asm.$.Test.App.f12);
                    $("#SagePathwidth").on("click", $asm.$.Test.App.f13);
                    $("#SageTreewidth").on("click", $asm.$.Test.App.f14);
                    $("#SageTuttePolynomial").on("click", $asm.$.Test.App.f15);
                    $("#SageVertexCover").on("click", $asm.$.Test.App.f16);
                    $("#SageCliqueComplex").on("click", $asm.$.Test.App.f17);
                    $("#SageCliqueMaximum").on("click", $asm.$.Test.App.f18);
                    $("#SageCliqueNumber").on("click", $asm.$.Test.App.f19);
                    $("#SageCliquePolynomial").on("click", $asm.$.Test.App.f20);
                    $("#SageBridges").on("click", $asm.$.Test.App.f21);
                    $("#SageGomoryHuTree").on("click", $asm.$.Test.App.f22);
                    $("#SageRandomSpanningTree").on("click", $asm.$.Test.App.f23);
                    $("#SageApexVertices").on("click", $asm.$.Test.App.f24);
                    $("#SageIsApex").on("click", $asm.$.Test.App.f25);
                    $("#SageIsArcTransitive").on("click", $asm.$.Test.App.f26);
                    $("#SageIsAsteroidalTripleFree").on("click", $asm.$.Test.App.f27);
                    $("#SageIsBiconnected").on("click", $asm.$.Test.App.f28);
                    $("#SageIsBipartite").on("click", $asm.$.Test.App.f29);
                    $("#SageIsBlockGraph").on("click", $asm.$.Test.App.f30);
                    $("#SageIsCartesianProduct").on("click", $asm.$.Test.App.f31);
                    $("#SageIsDistanceRegular").on("click", $asm.$.Test.App.f32);
                    $("#SageIsEdgeTransitive").on("click", $asm.$.Test.App.f33);
                    $("#SageIsEvenHoleFree").on("click", $asm.$.Test.App.f34);
                    $("#SageIsForest").on("click", $asm.$.Test.App.f35);
                    $("#SageIsHalfTransitive").on("click", $asm.$.Test.App.f36);
                    $("#SageIsLineGraph").on("click", $asm.$.Test.App.f37);
                    $("#SageIsLongAntiholeFree").on("click", $asm.$.Test.App.f38);
                    $("#SageIsLongHoleFree").on("click", $asm.$.Test.App.f39);
                    $("#SageIsOddHoleFree").on("click", $asm.$.Test.App.f40);
                    $("#SageIsOverfull").on("click", $asm.$.Test.App.f41);
                    $("#SageIsPartialCube").on("click", $asm.$.Test.App.f42);
                    $("#SageIsPrime").on("click", $asm.$.Test.App.f43);
                    $("#SageIsSemiSymmetric").on("click", $asm.$.Test.App.f44);
                    $("#SageIsSplit").on("click", $asm.$.Test.App.f45);
                    $("#SageIsStronglyRegular").on("click", $asm.$.Test.App.f46);
                    $("#SageIsTree").on("click", $asm.$.Test.App.f47);
                    $("#SageIsTriangleFree").on("click", $asm.$.Test.App.f48);
                    $("#SageIsWeaklyChordal").on("click", $asm.$.Test.App.f49);
                    $("#SageOddGirth").on("click", $asm.$.Test.App.f50);
                    $("#SageFractionalChromaticIndex").on("click", $asm.$.Test.App.f51);
                    $("#SageHasPerfectMatching").on("click", $asm.$.Test.App.f52);
                    $("#SageKirchhoffSymanzikPolynomial").on("click", $asm.$.Test.App.f53);
                    $("#SageLovaszTheta").on("click", $asm.$.Test.App.f54);
                    $("#SageMatching").on("click", $asm.$.Test.App.f55);
                    $("#SageMaximumAverageDegree").on("click", $asm.$.Test.App.f56);
                    $("#SageSeidelAdjacencyMatrix").on("click", $asm.$.Test.App.f57);
                    $("#SageNetworkxGraph").on("click", $asm.$.Test.App.f58);
                    $("#SageAdjacencyMatrix").on("click", $asm.$.Test.App.f59);
                    $("#SageIncidenceMatrix").on("click", $asm.$.Test.App.f60);
                    $("#SageDistanceMatrix").on("click", $asm.$.Test.App.f61);
                    $("#SageKirchhoffMatrix").on("click", $asm.$.Test.App.f62);
                    $("#SageDensity").on("click", $asm.$.Test.App.f63);
                    $("#SageOrder").on("click", $asm.$.Test.App.f64);
                    $("#SageSize").on("click", $asm.$.Test.App.f65);
                    $("#SageAverageDegree").on("click", $asm.$.Test.App.f66);
                    $("#SageDegreeSequence").on("click", $asm.$.Test.App.f67);
                    $("#SageCycleBasis").on("click", $asm.$.Test.App.f68);
                    $("#SageAllPaths").on("click", $asm.$.Test.App.f69);
                    $("#SageTrianglesCount").on("click", $asm.$.Test.App.f70);
                    $("#SageSpectrum").on("click", $asm.$.Test.App.f71);
                    $("#SageEigenvectors").on("click", $asm.$.Test.App.f72);
                    $("#SageEigenspaces").on("click", $asm.$.Test.App.f73);
                    $("#SageAutomorphismGroup").on("click", $asm.$.Test.App.f74);
                    $("#SageIsVertexTransitive").on("click", $asm.$.Test.App.f75);
                    $("#SageCanonicalLabel").on("click", $asm.$.Test.App.f76);
                    $("#SageIsCayley").on("click", $asm.$.Test.App.f77);
                    $("#SageIsEulerian").on("click", $asm.$.Test.App.f78);
                    $("#SageIsPlanar").on("click", $asm.$.Test.App.f79);
                    $("#SageIsRegular").on("click", $asm.$.Test.App.f80);
                    $("#SageIsChordal").on("click", $asm.$.Test.App.f81);
                    $("#SageIsCirculant").on("click", $asm.$.Test.App.f82);
                    $("#SageIsInterval").on("click", $asm.$.Test.App.f83);
                    $("#SageIsGallaiTree").on("click", $asm.$.Test.App.f84);
                    $("#SageIsClique").on("click", $asm.$.Test.App.f85);
                    $("#SageIsCycle").on("click", $asm.$.Test.App.f86);
                    $("#SageIsIndependentSet").on("click", $asm.$.Test.App.f87);
                    $("#SageIsTransitivelyReduced").on("click", $asm.$.Test.App.f88);
                    $("#SageIsEquitable").on("click", $asm.$.Test.App.f89);
                    $("#SageEccentricity").on("click", $asm.$.Test.App.f90);
                    $("#SageRadius").on("click", $asm.$.Test.App.f91);
                    $("#SageDiameter").on("click", $asm.$.Test.App.f92);
                    $("#SageGirth").on("click", $asm.$.Test.App.f93);
                    $("#SageEdgeConnectivity").on("click", $asm.$.Test.App.f94);
                    $("#SageVertexConnectivity").on("click", $asm.$.Test.App.f95);
                    $("#SageIsHamiltonian").on("click", $asm.$.Test.App.f96);
                    $("#SageCharacteristicPolynomial").on("click", $asm.$.Test.App.f97);
                    $("#SageGenus").on("click", $asm.$.Test.App.f98);


                    $("#SageLayoutSprings").on("click", $asm.$.Test.App.f99);
                    $("#SageLayoutRanked").on("click", $asm.$.Test.App.f100);
                    $("#SageLayoutRandom").on("click", $asm.$.Test.App.f101);
                    $("#SageLayoutCircular").on("click", $asm.$.Test.App.f102);
                    $("#SageLayoutTree").on("click", $asm.$.Test.App.f103);
                    $("#SageLayoutGraphViz").on("click", $asm.$.Test.App.f104);
                    $("#SageLayoutPlanar").on("click", $asm.$.Test.App.f105);

                    $(".NamedGraph").on("click", $asm.$.Test.App.f106);



                    Test.App.NewTab();
                    Test.App.AddNewSheetTab();

                    $(".nav-tabs").on("click", "a", $asm.$.Test.App.f107);

                    $(".new-sheet-anchor").on("click", $asm.$.Test.App.f108);
                },
                AddNewSheetTab: function () {
                    var tabControl = document.getElementById("TabControl");
                    Test.App._newSheetTab = document.createElement('li');
                    Test.App._newSheetTab.id = "new-sheet";

                    var anchor = document.createElement('a');
                    anchor.className = "new-sheet-anchor";
                    anchor.textContent = "+";
                    anchor.href = "#";

                    Test.App._newSheetTab.appendChild(anchor);
                    tabControl.appendChild(Test.App._newSheetTab);
                },
                NewTab: function (name, G) {
                    var $t, $t1;
                    if (name === void 0) { name = null; }
                    if (G === void 0) { G = null; }
                    if (System.String.isNullOrEmpty(name)) {
                        name = "sheet " + Test.App._tabID;
                    }

                    var canvas = document.createElement('canvas');
                    canvas.id = "Tab" + Test.App._tabID;
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    canvas.className = "IAmAGraphCanvas";

                    canvas.onshow = Bridge.fn.combine(canvas.onshow, function () {
                        canvas.width = canvas.parentElement.clientWidth;
                        canvas.height = canvas.parentElement.clientHeight;
                    });

                    if (G == null) {
                        G = new Graphs.Graph.ctor();
                    }
                    var graphCanvas = new Graphs.GraphCanvas(G);
                    var tc = new Test.TabCanvas(canvas, graphCanvas);
                    tc.Invalidate();

                    var tabPane = document.createElement('div');
                    tabPane.className = "tab-pane active";
                    tabPane.id = "Tab" + Test.App._tabID;
                    tabPane.appendChild(canvas);

                    var tabControlContent = document.getElementById("TabControlContent");
                    $t = Bridge.getEnumerator(tabControlContent.children);
                    try {
                        while ($t.moveNext()) {
                            var child = $t.Current;
                            child.className = "tab-pane";
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }tabControlContent.appendChild(tabPane);

                    var tab = document.createElement('li');
                    tab.className = "active";

                    var anchor = document.createElement('a');
                    anchor.setAttribute("data-toggle", "tab");
                    anchor.textContent = name;
                    anchor.href = "#Tab" + Test.App._tabID;
                    Test.App._canvasLookup.set(anchor.href, tc);
                    Test.App._currentTabCanvas = anchor.href;

                    tab.appendChild(anchor);

                    var tabControl = document.getElementById("TabControl");
                    $t1 = Bridge.getEnumerator(tabControl.children);
                    try {
                        while ($t1.moveNext()) {
                            var child1 = $t1.Current;
                            child1.className = "narf";
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }tabControl.insertBefore(tab, Test.App._newSheetTab);

                    Test.App._tabID = (Test.App._tabID + 1) | 0;
                },
                OnKeyDown: function (e) {
                    var tc = Test.App.CurrentTabCanvas;

                    switch (e.key) {
                        case "f": 
                            tc.GraphCanvas.DoZoomFit();
                            break;
                        case "-": 
                            tc.GraphCanvas.DoZoom(-1, new GraphicsLayer.Box.ctor(0.5, 0.5));
                            break;
                        case "+": 
                            tc.GraphCanvas.DoZoom(1, new GraphicsLayer.Box.ctor(0.5, 0.5));
                            break;
                        case "i": 
                            tc.GraphCanvas.ToggleVertexIndices();
                            break;
                        case "I": 
                            tc.GraphCanvas.RotateVertexIndices();
                            break;
                        case "j": 
                            tc.GraphCanvas.ToggleEdgeIndices();
                            break;
                        case "J": 
                            tc.GraphCanvas.RotateEdgeIndices();
                            break;
                        case "r": 
                            tc.GraphCanvas.DoReverseSelectedEdges();
                            break;
                        case "R": 
                            tc.GraphCanvas.DoRotateSelectedEdges();
                            break;
                        case "y": 
                            if (e.ctrlKey) {
                                tc.GraphCanvas.DoRedo();
                            }
                            break;
                        case "z": 
                            if (e.ctrlKey) {
                                tc.GraphCanvas.DoUndo();
                            }
                            break;
                    }
                },
                AskSage: function (s) {
                    var div = Test.App.AppendSageDiv(s);

                    sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "fullScreen"], autoeval:false});
                    $("#SageModal").modal('show');
                },
                AskSageAuto: function (s) {
                    Test.App.AppendSageDiv(s);

                    sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "evalButton", "fullScreen", "editor"], autoeval:true});
                    $("#SageModal").modal('show');
                },
                AskSageAsync: function (G, sageCodeAboutG) {
                    var $step = 0,
                        $task1, 
                        $taskResult1, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([0,1], $step);
                                    switch ($step) {
                                        case 0: {
                                            $task1 = Test.App.AskSageAsync$1(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(G.GetEdgeWeights()), "')", '\n', sageCodeAboutG));
                                            $step = 1;
                                            $task1.continueWith($asyncBody);
                                            return;
                                        }
                                        case 1: {
                                            $taskResult1 = $task1.getAwaitedResult();
                                            $tcs.setResult($taskResult1);
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                },
                AskSageAsync$1: function (sageCode) {
                    var $step = 0,
                        $task1, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        output, 
                        response, 
                        ss, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([0,1,2,3,4], $step);
                                    switch ($step) {
                                        case 0: {
                                            output = document.getElementById("SageSecretOutputHole");
                                            output.textContent = "working";
                                            Test.App.AppendSageDiv(sageCode);

                                            sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "evalButton", "fullScreen", "editor"], autoeval:true, outputLocation:"#SageSecretOutputHole"});

                                            
                                            $step = 1;
                                            continue;
                                        }
                                        case 1: {
                                            if ( !System.String.contains(output.textContent,"Accepted:") ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $task1 = System.Threading.Tasks.Task.delay(100);
                                            $step = 3;
                                            $task1.continueWith($asyncBody);
                                            return;
                                        }
                                        case 3: {
                                            $task1.getAwaitedResult();
                                            
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            response = output.textContent;
                                            if (System.String.isNullOrEmpty(response)) {
                                                $tcs.setResult("flibble");
                                                return;
                                            }

                                            ss = System.Linq.Enumerable.from(System.String.split(response, System.Array.init(['\n'], System.String), null, 1)).firstOrDefault($asm.$.Test.App.f109, null);
                                            if (System.String.isNullOrEmpty(ss)) {
                                                $tcs.setResult("flabble");
                                                return;
                                            }

                                            ss = ss.substr(((((System.String.indexOf(ss, "text/plain") + ("text/plain").length) | 0) + 3) | 0));
                                            ss = ss.substr(0, System.String.indexOf(ss, "\""));

                                            $tcs.setResult(ss);
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                },
                AppendSageDiv: function (s) {
                    var $t;
                    if (Test.App._sageContainer.childElementCount > 0) {
                        Test.App._sageContainer.removeChild(($t = Test.App._sageContainer.children)[System.Array.index(0, $t)]);
                    }
                    var div = document.createElement('div');
                    div.className = "compute";
                    div.textContent = s;
                    Test.App._sageContainer.appendChild(div);

                    return div;
                }
            }
        }
    });

    Bridge.ns("Test.App", $asm.$);

    Bridge.apply($asm.$.Test.App, {
        f1: function (e) {
            if ((Bridge.is(e.target, HTMLSpanElement)) || (Bridge.is(e.target, HTMLAnchorElement))) {
                e.preventDefault();
            }
            var tc = Test.App._canvasLookup.get(Test.App._currentTabCanvas);
            var s = tc.GraphCanvas.DoCopy();
            if (!System.String.isNullOrEmpty(s)) {
                e.clipboardData.setData("Text", s);
            }
        },
        f2: function (e) {
            e.preventDefault();
            var s = e.clipboardData.getData("Text");
            var tc = Test.App._canvasLookup.get(Test.App._currentTabCanvas);
            tc.GraphCanvas.DoPaste(s || "");
        },
        f3: function (e) {
            e.preventDefault();
        },
        f4: function () {
            Test.App.CurrentTabCanvas.SageManual();
        },
        f5: function () {
            Test.App.CurrentTabCanvas.SageGraph6();
        },
        f6: function () {
            Test.App.CurrentTabCanvas.SageSparse6();
        },
        f7: function () {
            Test.App.CurrentTabCanvas.SageChromaticNumber();
        },
        f8: function () {
            Test.App.CurrentTabCanvas.SageChromaticPolynomial();
        },
        f9: function () {
            Test.App.CurrentTabCanvas.SageColoring();
        },
        f10: function () {
            Test.App.CurrentTabCanvas.SageIndependentSet();
        },
        f11: function () {
            Test.App.CurrentTabCanvas.SageIsPerfect();
        },
        f12: function () {
            Test.App.CurrentTabCanvas.SageMatchingPolynomial();
        },
        f13: function () {
            Test.App.CurrentTabCanvas.SagePathwidth();
        },
        f14: function () {
            Test.App.CurrentTabCanvas.SageTreewidth();
        },
        f15: function () {
            Test.App.CurrentTabCanvas.SageTuttePolynomial();
        },
        f16: function () {
            Test.App.CurrentTabCanvas.SageVertexCover();
        },
        f17: function () {
            Test.App.CurrentTabCanvas.SageCliqueComplex();
        },
        f18: function () {
            Test.App.CurrentTabCanvas.SageCliqueMaximum();
        },
        f19: function () {
            Test.App.CurrentTabCanvas.SageCliqueNumber();
        },
        f20: function () {
            Test.App.CurrentTabCanvas.SageCliquePolynomial();
        },
        f21: function () {
            Test.App.CurrentTabCanvas.SageBridges();
        },
        f22: function () {
            Test.App.CurrentTabCanvas.SageGomoryHuTree();
        },
        f23: function () {
            Test.App.CurrentTabCanvas.SageRandomSpanningTree();
        },
        f24: function () {
            Test.App.CurrentTabCanvas.SageApexVertices();
        },
        f25: function () {
            Test.App.CurrentTabCanvas.SageIsApex();
        },
        f26: function () {
            Test.App.CurrentTabCanvas.SageIsArcTransitive();
        },
        f27: function () {
            Test.App.CurrentTabCanvas.SageIsAsteroidalTripleFree();
        },
        f28: function () {
            Test.App.CurrentTabCanvas.SageIsBiconnected();
        },
        f29: function () {
            Test.App.CurrentTabCanvas.SageIsBipartite();
        },
        f30: function () {
            Test.App.CurrentTabCanvas.SageIsBlockGraph();
        },
        f31: function () {
            Test.App.CurrentTabCanvas.SageIsCartesianProduct();
        },
        f32: function () {
            Test.App.CurrentTabCanvas.SageIsDistanceRegular();
        },
        f33: function () {
            Test.App.CurrentTabCanvas.SageIsEdgeTransitive();
        },
        f34: function () {
            Test.App.CurrentTabCanvas.SageIsEvenHoleFree();
        },
        f35: function () {
            Test.App.CurrentTabCanvas.SageIsForest();
        },
        f36: function () {
            Test.App.CurrentTabCanvas.SageIsHalfTransitive();
        },
        f37: function () {
            Test.App.CurrentTabCanvas.SageIsLineGraph();
        },
        f38: function () {
            Test.App.CurrentTabCanvas.SageIsLongAntiholeFree();
        },
        f39: function () {
            Test.App.CurrentTabCanvas.SageIsLongHoleFree();
        },
        f40: function () {
            Test.App.CurrentTabCanvas.SageIsOddHoleFree();
        },
        f41: function () {
            Test.App.CurrentTabCanvas.SageIsOverfull();
        },
        f42: function () {
            Test.App.CurrentTabCanvas.SageIsPartialCube();
        },
        f43: function () {
            Test.App.CurrentTabCanvas.SageIsPrime();
        },
        f44: function () {
            Test.App.CurrentTabCanvas.SageIsSemiSymmetric();
        },
        f45: function () {
            Test.App.CurrentTabCanvas.SageIsSplit();
        },
        f46: function () {
            Test.App.CurrentTabCanvas.SageIsStronglyRegular();
        },
        f47: function () {
            Test.App.CurrentTabCanvas.SageIsTree();
        },
        f48: function () {
            Test.App.CurrentTabCanvas.SageIsTriangleFree();
        },
        f49: function () {
            Test.App.CurrentTabCanvas.SageIsWeaklyChordal();
        },
        f50: function () {
            Test.App.CurrentTabCanvas.SageOddGirth();
        },
        f51: function () {
            Test.App.CurrentTabCanvas.SageFractionalChromaticIndex();
        },
        f52: function () {
            Test.App.CurrentTabCanvas.SageHasPerfectMatching();
        },
        f53: function () {
            Test.App.CurrentTabCanvas.SageKirchhoffSymanzikPolynomial();
        },
        f54: function () {
            Test.App.CurrentTabCanvas.SageLovaszTheta();
        },
        f55: function () {
            Test.App.CurrentTabCanvas.SageMatching();
        },
        f56: function () {
            Test.App.CurrentTabCanvas.SageMaximumAverageDegree();
        },
        f57: function () {
            Test.App.CurrentTabCanvas.SageSeidelAdjacencyMatrix();
        },
        f58: function () {
            Test.App.CurrentTabCanvas.SageNetworkxGraph();
        },
        f59: function () {
            Test.App.CurrentTabCanvas.SageAdjacencyMatrix();
        },
        f60: function () {
            Test.App.CurrentTabCanvas.SageIncidenceMatrix();
        },
        f61: function () {
            Test.App.CurrentTabCanvas.SageDistanceMatrix();
        },
        f62: function () {
            Test.App.CurrentTabCanvas.SageKirchhoffMatrix();
        },
        f63: function () {
            Test.App.CurrentTabCanvas.SageDensity();
        },
        f64: function () {
            Test.App.CurrentTabCanvas.SageOrder();
        },
        f65: function () {
            Test.App.CurrentTabCanvas.SageSize();
        },
        f66: function () {
            Test.App.CurrentTabCanvas.SageAverageDegree();
        },
        f67: function () {
            Test.App.CurrentTabCanvas.SageDegreeSequence();
        },
        f68: function () {
            Test.App.CurrentTabCanvas.SageCycleBasis();
        },
        f69: function () {
            Test.App.CurrentTabCanvas.SageAllPaths();
        },
        f70: function () {
            Test.App.CurrentTabCanvas.SageTrianglesCount();
        },
        f71: function () {
            Test.App.CurrentTabCanvas.SageSpectrum();
        },
        f72: function () {
            Test.App.CurrentTabCanvas.SageEigenvectors();
        },
        f73: function () {
            Test.App.CurrentTabCanvas.SageEigenspaces();
        },
        f74: function () {
            Test.App.CurrentTabCanvas.SageAutomorphismGroup();
        },
        f75: function () {
            Test.App.CurrentTabCanvas.SageIsVertexTransitive();
        },
        f76: function () {
            Test.App.CurrentTabCanvas.SageCanonicalLabel();
        },
        f77: function () {
            Test.App.CurrentTabCanvas.SageIsCayley();
        },
        f78: function () {
            Test.App.CurrentTabCanvas.SageIsEulerian();
        },
        f79: function () {
            Test.App.CurrentTabCanvas.SageIsPlanar();
        },
        f80: function () {
            Test.App.CurrentTabCanvas.SageIsRegular();
        },
        f81: function () {
            Test.App.CurrentTabCanvas.SageIsChordal();
        },
        f82: function () {
            Test.App.CurrentTabCanvas.SageIsCirculant();
        },
        f83: function () {
            Test.App.CurrentTabCanvas.SageIsInterval();
        },
        f84: function () {
            Test.App.CurrentTabCanvas.SageIsGallaiTree();
        },
        f85: function () {
            Test.App.CurrentTabCanvas.SageIsClique();
        },
        f86: function () {
            Test.App.CurrentTabCanvas.SageIsCycle();
        },
        f87: function () {
            Test.App.CurrentTabCanvas.SageIsIndependentSet();
        },
        f88: function () {
            Test.App.CurrentTabCanvas.SageIsTransitivelyReduced();
        },
        f89: function () {
            Test.App.CurrentTabCanvas.SageIsEquitable();
        },
        f90: function () {
            Test.App.CurrentTabCanvas.SageEccentricity();
        },
        f91: function () {
            Test.App.CurrentTabCanvas.SageRadius();
        },
        f92: function () {
            Test.App.CurrentTabCanvas.SageDiameter();
        },
        f93: function () {
            Test.App.CurrentTabCanvas.SageGirth();
        },
        f94: function () {
            Test.App.CurrentTabCanvas.SageEdgeConnectivity();
        },
        f95: function () {
            Test.App.CurrentTabCanvas.SageVertexConnectivity();
        },
        f96: function () {
            Test.App.CurrentTabCanvas.SageIsHamiltonian();
        },
        f97: function () {
            Test.App.CurrentTabCanvas.SageCharacteristicPolynomial();
        },
        f98: function () {
            Test.App.CurrentTabCanvas.SageGenus();
        },
        f99: function () {
            Test.App.CurrentTabCanvas.SageLayoutSpring();
        },
        f100: function () {
            Test.App.CurrentTabCanvas.SageLayoutRanked();
        },
        f101: function () {
            Test.App.CurrentTabCanvas.SageLayoutExtendRandomly();
        },
        f102: function () {
            Test.App.CurrentTabCanvas.SageLayoutCircular();
        },
        f103: function () {
            Test.App.CurrentTabCanvas.SageLayoutTree();
        },
        f104: function () {
            Test.App.CurrentTabCanvas.SageLayoutGraphviz();
        },
        f105: function () {
            Test.App.CurrentTabCanvas.SageLayoutPlanar();
        },
        f106: function (ee) {
            Test.App.CurrentTabCanvas.SageLoadNamedGraph(Bridge.cast(ee.currentTarget, HTMLElement).textContent);
        },
        f107: function (ee) {
            ee.preventDefault();
            if (!$(this).hasClass("new-sheet-anchor")) {
                var d = $(this);
                Test.App._currentTabCanvas = ee.target.href;
                var canvas = Test.App.CurrentTabCanvas.Canvas;
                d.tab("show");
            }
        },
        f108: function (ee) {
            ee.preventDefault();
            Test.App.NewTab();
        },
        f109: function (line) {
        return System.String.contains(line,"Accepted:");
    }
    });

    Bridge.define("Test.HelperExtensions", {
        statics: {
            methods: {
                ToColor: function (argb) {
                    return System.String.format("rgba({0},{1},{2},{3:0.00})", Bridge.box(argb.R, System.Int32), Bridge.box(argb.G, System.Int32), Bridge.box(argb.B, System.Int32), Bridge.box(argb.A / 255.0, System.Double, System.Double.format, System.Double.getHashCode));
                }
            }
        }
    });

    Bridge.define("Test.LayoutAnimation", {
        statics: {
            fields: {
                Steps: 0
            },
            ctors: {
                init: function () {
                    this.Steps = 100;
                }
            }
        },
        fields: {
            _update: null,
            _finalUpdate: null,
            _layout: null,
            _xstep: null,
            _ystep: null,
            _step: 0,
            _G: null
        },
        ctors: {
            init: function () {
                this._step = 0;
            },
            ctor: function (update, finalUpdate, layout, G) {
                this.$initialize();
                this._G = G;
                this._update = update;
                this._finalUpdate = finalUpdate;
                this._layout = layout;

                try {
                    this._xstep = System.Array.init(this._layout.Count, 0, System.Double);
                    this._ystep = System.Array.init(this._layout.Count, 0, System.Double);
                    for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                        this._xstep[System.Array.index(i, this._xstep)] = (this._layout.getItem(i).X - this._G.Vertices.getItem(i).X) / Test.LayoutAnimation.Steps;
                        this._ystep[System.Array.index(i, this._ystep)] = (this._layout.getItem(i).Y - this._G.Vertices.getItem(i).Y) / Test.LayoutAnimation.Steps;
                    }
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            }
        },
        methods: {
            Animate: function () {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([1,2,3,4], $step);
                                switch ($step) {

                                    case 1: {
                                        if ( this._step < Test.LayoutAnimation.Steps ) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        this.DoStep();
                                        $task1 = System.Threading.Tasks.Task.delay(10);
                                        $step = 3;
                                        $task1.continueWith($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $task1.getAwaitedResult();
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoStep: function () {
                var $t, $t1;
                for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                    $t = this._G.Vertices.getItem(i);
                    $t.X += this._xstep[System.Array.index(i, this._xstep)];
                    $t1 = this._G.Vertices.getItem(i);
                    $t1.Y += this._ystep[System.Array.index(i, this._ystep)];
                }

                this._update();
                this._step = (this._step + 1) | 0;
                if (this._step >= Test.LayoutAnimation.Steps) {
                    this.OnFinish();
                }
            },
            OnFinish: function () {
                for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                    this._G.Vertices.getItem(i).X = this._layout.getItem(i).X;
                    this._G.Vertices.getItem(i).Y = this._layout.getItem(i).Y;
                }
                this._finalUpdate();
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.UnionFindTrackedRoots$1", function (T) { return {
        inherits: [Algorithms.DataStructures.UnionFind$1(T)],
        fields: {
            _roots: null
        },
        ctors: {
            init: function () {
                this._roots = new (System.Collections.Generic.List$1(Algorithms.DataStructures.UnionFind$1.Node(T)))();
            }
        },
        methods: {
            FindAllExcept: function (nodes) {
                return System.Linq.Enumerable.from(this._roots).except(System.Linq.Enumerable.from(nodes).select(Bridge.fn.bind(this, function (n) {
                            return this.Find(n);
                        })));
            },
            RootAdded: function (n) {
                this._roots.add(n);
            },
            RootRemoved: function (n) {
                this._roots.remove(n);
            }
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.Chronicle.ChronicledBranch", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.IEnumerable$1(Algorithms.FixerBreaker.Move))],
        props: {
            Alpha: 0,
            Beta: 0,
            SwapComponents: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$IEnumerable$1$Algorithms$FixerBreaker$Move$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (S, alpha, beta, partitions) {
                this.$initialize();
                this.Alpha = alpha;
                this.Beta = beta;
                this.SwapComponents = System.Linq.Enumerable.from(partitions).select(function (p) {
                        return System.Linq.Enumerable.from(p).select(function (i) {
                                return S.getItem(i);
                            }).toList(System.Int32);
                    }).toList(System.Collections.Generic.List$1(System.Int32));
            }
        },
        methods: {
            getEnumerator: function () {
                return System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateShortLexNonempty(this.SwapComponents.Count)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Chronicle.ChronicledBranch.f1)).getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            EnumerateMoves: function (cf) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.FixerBreaker.Move))(Bridge.fn.bind(this, function (cf) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        i,
                        $t,
                        s,
                        $t1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.FixerBreaker.Move))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        i = 0;
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ( i < cf.Count ) {
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 8;
                                        continue;
                                    }
                                    case 2: {
                                        if (!cf.getItem(i)) {
                                                $step = 7;
                                                continue;
                                            }

                                            $t = Bridge.getEnumerator(this.SwapComponents.getItem(i));
                                            $step = 3;
                                            continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                                s = $t.Current;
                                                $step = 4;
                                                continue;
                                            }
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $enumerator.current = ($t1 = new Algorithms.FixerBreaker.Move(), $t1.Added = this.Alpha, $t1.Removed = this.Beta, $t1.Stack = s, $t1);
                                            $step = 5;
                                            return true;
                                    }
                                    case 5: {
                                        $step = 3;
                                        continue;
                                    }
                                    case 6: {
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        i = (i + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 8: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.Chronicle.ChronicledBranch", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.Chronicle.ChronicledBranch, {
        f1: function (cf) {
            return this.EnumerateMoves(cf);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        statics: {
            methods: {
                ColorableWithoutEdge: function (knowledge, board, edgeIndex) {
                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge$1(knowledge, board.Stacks, edgeIndex);
                },
                ColorableWithoutEdge$1: function (knowledge, stacks, edgeIndex) {
                    var lg = knowledge.GraphKnowledge.LineGraph;

                    return lg.IsChoosable(System.Linq.Enumerable.range(0, lg.N).select(function (e) {
                        if (e === edgeIndex) {
                            return System.Int64(-1);
                        }

                        return knowledge.GetEdgeColorList$1(stacks, e);
                    }).toList(System.Int64));
                }
            }
        },
        props: {
            Reason: {
                get: function () {
                    return "color all";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var lineGraph = knowledge.GraphKnowledge.LineGraph;
                var canColor = lineGraph.IsChoosable(System.Linq.Enumerable.range(0, lineGraph.N).select(function (e) {
                    return knowledge.GetEdgeColorList(board, e);
                }).toList(System.Int64));

                if (canColor) {
                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, this.Reason);
                }

                return canColor;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            Reason: {
                get: function () {
                    return "common color";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var commonColor = System.Linq.Enumerable.from(board.Stacks).aggregate(System.Int64(-1), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer.f1).ne(System.Int64(0));

                if (commonColor) {
                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, this.Reason);
                }

                return commonColor;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer, {
        f1: function (t, s) {
            return t.and(s);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            FindCleanestWin: false,
            DoSuperabundantCheck: false,
            Reason: {
                get: function () {
                    return "good swap";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return true;
                }
            },
            ChildReason: {
                get: function () {
                    return "";
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        ctors: {
            ctor: function (findCleanestWin, superabundantOnly) {
                if (findCleanestWin === void 0) { findCleanestWin = true; }
                if (superabundantOnly === void 0) { superabundantOnly = true; }

                this.$initialize();
                this.FindCleanestWin = findCleanestWin;
                this.DoSuperabundantCheck = superabundantOnly;
            }
        },
        methods: {
            IsChildBoardBetter: function (knowledge, board, childBoard) {
                return false;
            },
            Analyze: function (knowledge, board) {
                var $t, $t1, $t2;
                var potKnowledge = knowledge.getItem(board.Template.Value).getItem(board.ColorCount);
                var graphKnowledge = knowledge.GraphKnowledge;

                var boardKnowledge = potKnowledge.getItem(board);
                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(boardKnowledge)) {
                    return true;
                }

                var win = false;
                var winDepth = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var colorPairWinDepth = 0;
                        var winningSwaps = new (System.Collections.Generic.List$1(System.Object))();
                        var improvingSwaps = new (System.Collections.Generic.List$1(System.Object))();
                        var winningSwapAlwaysExists = true;
                        var improvingSwapAlwaysExists = true;

                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var winningSwap = null;
                                var improvingSwap = null;

                                var branchWinDepth = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        var childBoard = board.Clone();
                                        childBoard.DoMoveCombination(swap);

                                        if (this.DoSuperabundantCheck && !Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(graphKnowledge.Graph, childBoard)) {
                                            continue;
                                        }

                                        var childBoardKnowledge = potKnowledge.getItem(childBoard);
                                        if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(childBoardKnowledge) && ((childBoardKnowledge.Depth + 1) | 0) < branchWinDepth) {
                                            branchWinDepth = (childBoardKnowledge.Depth + 1) | 0;
                                            winningSwap = { item1: branch.SwapComponents, item2: System.Linq.Enumerable.from(swap).toList(Algorithms.FixerBreaker.Move), item3: childBoardKnowledge.Reason };

                                            if (!this.FindCleanestWin) {
                                                break;
                                            }
                                        } else if (this.IsChildBoardBetter(knowledge, board, childBoard)) {
                                            improvingSwap = { item1: branch.SwapComponents, item2: System.Linq.Enumerable.from(swap).toList(Algorithms.FixerBreaker.Move), item3: System.String.concat(this.ChildReason, " better") };
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                colorPairWinDepth = Math.max(colorPairWinDepth, branchWinDepth);

                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(winningSwap)) {
                                    winningSwaps.add(winningSwap);
                                    improvingSwaps.add(winningSwap);
                                } else {
                                    winningSwapAlwaysExists = false;
                                    if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(improvingSwap)) {
                                        improvingSwaps.add(improvingSwap);
                                    } else {
                                        improvingSwapAlwaysExists = false;
                                        break;
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            if (colorPairWinDepth < winDepth) {
                                winDepth = colorPairWinDepth;

                                win = true;
                                potKnowledge.AddWin$1(board, this.Reason, winDepth, colorPair, winningSwaps);

                                if (!this.FindCleanestWin) {
                                    break;
                                }
                            }
                        } else if (improvingSwapAlwaysExists) {
                            potKnowledge.AddImprovement(board, this.ChildReason, colorPairWinDepth, colorPair, improvingSwaps);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return win;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        statics: {
            methods: {
                IsKierstead: function (knowledge, board, enforceDegreeRequirement, reason) {
                    if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                    if (reason === void 0) { reason = ""; }
                    return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.EnumerateKiersteadEdgeIndices(knowledge, board, enforceDegreeRequirement, reason)).any();
                },
                IsKierstead$1: function (knowledge, board, edgeIndex, enforceDegreeRequirement) {
                    var $t;
                    if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                    $t = Bridge.getEnumerator(knowledge.GraphKnowledge.ConnectedOrderings.Value.get(knowledge.GraphKnowledge.Edges.getItem(edgeIndex)));
                    try {
                        while ($t.moveNext()) {
                            var ordering = $t.Current;
                            var penultimate = ordering.getItem(((ordering.Count - 2) | 0));
                            if (enforceDegreeRequirement && Algorithms.Int64Usage.PopulationCount(board.Stacks.getItem(penultimate)) <= knowledge.GraphKnowledge.Graph.Degree(penultimate)) {
                                continue;
                            }

                            if (Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead$2(knowledge, board, edgeIndex, ordering)) {
                                return true;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return false;
                },
                IsKierstead$2: function (knowledge, board, edgeIndex, ordering) {
                    var gn = knowledge.GraphKnowledge;

                    return gn.LineGraph.IsChoosable(System.Linq.Enumerable.range(0, gn.LineGraph.N).select(function (e) {
                        var $t;
                        if (e === edgeIndex) {
                            return System.Int64(-1);
                        }

                        var edge = gn.Edges.getItem(e);
                        var j = Math.max(ordering.indexOf(edge.item1), ordering.indexOf(edge.item2));
                        var priorStacks = System.Linq.Enumerable.from(board.Stacks).where(function (stack, i) {
                                return ordering.indexOf(i) < j;
                            }).toList(System.Int64);

                        var allowedList = System.Int64(0);
                        var list = knowledge.GetEdgeColorList(board, e);
                        $t = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits(list), System.Int32);
                        try {
                            while ($t.moveNext()) {
                                var alpha = $t.Current;
                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.d_H(alpha, priorStacks) % 2 === 0) {
                                    allowedList = Algorithms.Int64Usage.SetBit(allowedList, System.Int64(alpha));
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return allowedList;
                    }).toList(System.Int64));
                },
                EnumerateKiersteadEdgeIndices: function (knowledge, board, enforceDegreeRequirement, reason) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (knowledge, board, enforceDegreeRequirement, reason) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            g,
                            internalVertices,
                            $t,
                            edgeIndex,
                            e,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                                                if (reason === void 0) { reason = ""; }
                                                g = knowledge.GraphKnowledge.Graph;
                                                internalVertices = System.Linq.Enumerable.from(g.Vertices).where(function (v) {
                                                        return g.Degree(v) >= 2;
                                                    }).toList(System.Int32);

                                                $t = Bridge.getEnumerator(knowledge.GraphKnowledge.EdgeIndices);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    edgeIndex = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            e = knowledge.GraphKnowledge.Edges.getItem(edgeIndex);
                                                if (internalVertices.contains(e.item1) && internalVertices.contains(e.item2)) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                if (Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead$1(knowledge, board, edgeIndex)) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, reason);
                                                $enumerator.current = edgeIndex;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        },
        props: {
            Reason: {
                get: function () {
                    return "run kierstead";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                return Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead(knowledge, board, true, this.Reason);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree", {
        inherits: function () { return [Algorithms.FixerBreaker.Tree$1(Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree)]; },
        props: {
            Swap: null,
            ColorPair: null,
            Board: null,
            Note: null,
            Number: 0
        },
        methods: {
            AddChild$1: function (swap) {
                var $t;
                var child = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree(), $t.Swap = swap, $t);
                this.AddChild(child);

                return child;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ReductionAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            Reason: {
                get: function () {
                    return "reducible";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var $t, $t1;
                var g = knowledge.GraphKnowledge.Graph;

                $t = Bridge.getEnumerator(knowledge.GraphKnowledge.Edges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var x = { v : Math.min(e.item1, e.item2) };
                        var y = { v : Math.max(e.item1, e.item2) };

                        var common = board.Stacks.getItem(x.v).and(board.Stacks.getItem(y.v));
                        var stacks = System.Linq.Enumerable.from(board.Stacks).toList(System.Int64);

                        $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits(common), System.Int32);
                        try {
                            while ($t1.moveNext()) {
                                var c = $t1.Current;
                                stacks.setItem(x.v, Algorithms.Int64Usage.ClearBit(board.Stacks.getItem(x.v), System.Int64(c)));
                                stacks.setItem(y.v, Algorithms.Int64Usage.ClearBit(board.Stacks.getItem(y.v), System.Int64(c)));

                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, stacks, board.Pot, (function ($me, x, y) {
                                    return function (X) {
                                        return X.contains(x.v) && X.contains(y.v) ? 1 : 0;
                                    };
                                })(this, x, y))) {
                                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, System.String.format("color {0}{1} with {2}", Bridge.box(((x.v + 1) | 0), System.Int32), Bridge.box(((y.v + 1) | 0), System.Int32), Bridge.box(c, System.Int32)));
                                    return true;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IMind],
        props: {
            StopAnalysisOnBreakerWin: false,
            NearlyColorableOnly: false,
            SuperabundantOnly: false,
            MinPot: 0,
            MaxPot: 0,
            BreakerWonBoard: null,
            FixerWonAllNearlyColorableBoards: false,
            TotalPositions: 0,
            Knowledge: null,
            ColoringAnalyzer: null,
            SwapAnalyzer: null,
            BoardLookup: null,
            BoardIDLookup: null,
            RemainingBoardIDs: null,
            WonBoardIDs: null,
            NextBoardID: 0
        },
        alias: [
            "MaxPot", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$MaxPot",
            "FixerWonAllNearlyColorableBoards", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$FixerWonAllNearlyColorableBoards",
            "TotalPositions", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$TotalPositions",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$Analyze"
        ],
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.SuperabundantOnly = false;
                this.NearlyColorableOnly = false;
                this.MaxPot = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                this.Knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.Knowledge(g);

                this.ColoringAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer();
            }
        },
        methods: {
            Analyze: function (template, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                this.BoardLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,Algorithms.FixerBreaker.Board))();
                this.BoardIDLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Int32))();
                this.WonBoardIDs = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList();
                this.SwapAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer(this.Knowledge, this.BoardLookup, this.BoardIDLookup);

                this.FixerWonAllNearlyColorableBoards = true;

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Interval(minimumColorCount, maximumColorCount), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var colorCount = $t.Current;
                        this.GenerateAllBoards(template, colorCount, progress);
                        if (foundAtLeastOneBoard && this.BoardLookup.count <= 0) {
                            break;
                        }

                        this.TotalPositions = this.BoardLookup.count;
                        foundAtLeastOneBoard = true;
                        this.RemainingBoardIDs = System.Linq.Enumerable.from(this.BoardLookup.getKeys()).toList(System.Int32);

                        var breakerWin = !this.Analyze$1(progress);
                        if (breakerWin && this.StopAnalysisOnBreakerWin) {
                            return false;
                        }

                        this.Knowledge.getItem(template).Promote(colorCount);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(this.Knowledge.getItem(template).LostBoards).count() <= 0;
            },
            Analyze$1: function (progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                var winLength = 0;

                var totalBoards = this.RemainingBoardIDs.Count;
                var lastP = -1;

                for (var i = (this.RemainingBoardIDs.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    var id = this.RemainingBoardIDs.getItem(i);

                    var b = this.BoardLookup.get(id);
                    if (this.ColoringAnalyzer.Analyze(this.Knowledge, b)) {
                        this.RemainingBoardIDs.removeAt(i);
                        this.WonBoardIDs.Add(id);

                        if (!Bridge.staticEquals(progress, null)) {
                            var p = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this.RemainingBoardIDs.Count) | 0))), totalBoards)) | 0;
                            if (p > lastP) {
                                progress({ item1: "Finding all colorable positions...", item2: p });
                                lastP = p;
                            }
                        }
                    }
                }

                while (this.RemainingBoardIDs.Count > 0) {
                    winLength = (winLength + 1) | 0;

                    var count = this.RemainingBoardIDs.Count;

                    for (var i1 = (this.RemainingBoardIDs.Count - 1) | 0; i1 >= 0; i1 = (i1 - 1) | 0) {
                        var id1 = this.RemainingBoardIDs.getItem(i1);

                        var b1 = this.BoardLookup.get(id1);
                        if (this.SwapAnalyzer.Analyze(id1, this.WonBoardIDs)) {
                            this.RemainingBoardIDs.removeAt(i1);
                            this.WonBoardIDs.Add(id1);

                            if (!Bridge.staticEquals(progress, null)) {
                                var p1 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this.RemainingBoardIDs.Count) | 0))), totalBoards)) | 0;
                                if (p1 > lastP) {
                                    progress({ item1: System.String.format("Finding all {0} move wins...", Bridge.box(winLength, System.Int32)), item2: p1 });
                                    lastP = p1;
                                }
                            }
                        }
                    }

                    if (this.RemainingBoardIDs.Count === count) {
                        $t = Bridge.getEnumerator(this.RemainingBoardIDs);
                        try {
                            while ($t.moveNext()) {
                                var id2 = $t.Current;
                                var b2 = this.BoardLookup.get(id2);
                                this.Knowledge.getItem(b2.Template.Value).getItem(b2.ColorCount).AddLoss(b2);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        var g = { v : this.Knowledge.GraphKnowledge.Graph };

                        var nearlyColorable = System.Linq.Enumerable.range(0, this.Knowledge.GraphKnowledge.LineGraph.N).all(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f1));
                        if (nearlyColorable) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(this.RemainingBoardIDs).where((function ($me, g) {
                                    return Bridge.fn.bind($me, function (id3) {
                                        var b3 = this.BoardLookup.get(id3);
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(g.v, b3) && Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b3, 0);
                                    });
                                })(this, g)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f2)).firstOrDefault(null, null);

                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = this.BoardLookup.get(System.Linq.Enumerable.from(this.RemainingBoardIDs).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f3)));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                var boards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();

                var vertices = System.Linq.Enumerable.range(0, template.Sizes.Count).toList(System.Int32);
                var potSet = System.Linq.Enumerable.range(0, colorCount).toList(System.Int32);
                var pot = Algorithms.Int64Usage.ToInt64(potSet);

                var fix = System.Linq.Enumerable.from(vertices).orderBy(function (v) {
                        return Math.abs(((template.Sizes.getItem(v) - ((Bridge.Int.div(colorCount, 2)) | 0)) | 0));
                    }).first();
                var lastP = -1;
                var current = 0;
                var total = System.Linq.Enumerable.from(vertices).aggregate(System.Int64(1), function (x, v) {
                        if (v === fix) {
                            return x;
                        }

                        return x.mul(Algorithms.Utility.ListUtility.BinomialCoefficient(System.Int64(potSet.Count), System.Int64(template.Sizes.getItem(v))));
                    });

                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(vertices).select(function (v) {
                        if (v === fix) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(potSet).take(template.Sizes.getItem(v)).toList(System.Int32));
                        }

                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, potSet, template.Sizes.getItem(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var assignmentSets = $t.Current;
                        var sets = System.Linq.Enumerable.from(assignmentSets).toList(System.Collections.Generic.List$1(System.Int32));
                        var totalColors = System.Linq.Enumerable.from(sets).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f4).distinct().count();
                        if (totalColors < colorCount) {
                            continue;
                        }

                        var stacks = System.Linq.Enumerable.from(sets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f5).toList(System.Int64);

                        if (this.SuperabundantOnly && !Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(this.Knowledge.GraphKnowledge.Graph, stacks, pot)) {
                            continue;
                        }

                        var board = new Algorithms.FixerBreaker.Board(stacks, pot);

                        var count = boards.Count;
                        boards.add(board);

                        if (boards.Count > count) {
                            this.BoardLookup.set(this.NextBoardID, board);
                            this.BoardIDLookup.set(board, this.NextBoardID);

                            this.NextBoardID = (this.NextBoardID + 1) | 0;
                        }

                        if (!Bridge.staticEquals(progress, null)) {
                            var p = System.Int64.clip32(System.Int64(Bridge.Int.mul(100, current)).div(total));
                            if (p > lastP) {
                                progress({ item1: "Finding all positions...", item2: p });
                                lastP = p;
                            }
                        }

                        current = (current + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind, {
        f1: function (e) {
            return System.Linq.Enumerable.from(this.RemainingBoardIDs).any(Bridge.fn.bind(this, function (id3) {
                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, this.BoardLookup.get(id3), e);
                }));
        },
        f2: function (id3) {
            return this.BoardLookup.get(id3);
        },
        f3: function (id3) {
            return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, this.BoardLookup.get(id3), 0);
        },
        f4: function (set) {
            return set;
        },
        f5: function (list) {
            return Algorithms.Int64Usage.ToInt64(list);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree", {
        inherits: function () { return [Algorithms.FixerBreaker.Tree$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree)]; },
        props: {
            Board: null,
            IsColorable: false,
            IsSuperabundant: false,
            IsFixerWin: false,
            GameTreeIndex: 0,
            SameAsIndex: 0,
            Info: null
        },
        methods: {
            AddChild$1: function (tree, info) {
                tree.Info = info;
                this.AddChild(tree);
            },
            equals: function (obj) {
                var gg = Bridge.as(obj, Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree);
                if (gg == null) {
                    return false;
                }

                return gg.Board.Equals(this.Board);
            },
            getHashCode: function () {
                return this.Board.getHashCode();
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo", {
        inherits: [System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo)],
        methods: {
            Add: function (breakerChoice, i, j, fixerResponse) {
                var $t;
                this.add(($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo(), $t.Partition = System.Linq.Enumerable.from(breakerChoice).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo.f1).toList(System.Collections.Generic.List$1(System.Int32)), $t.Alpha = i, $t.Beta = j, $t.Response = fixerResponse, $t.SwapVertices = Algorithms.Int64Usage.ToSet$1(fixerResponse), $t));
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo, {
        f1: function (choice) {
            return Algorithms.Int64Usage.ToSet$1(choice);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GreedyWinFilter", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter],
        fields: {
            _swapAnalyzer: null
        },
        ctors: {
            ctor: function (swapAnalyzer) {
                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter.ctor.call(this);
                this._swapAnalyzer = swapAnalyzer;
            }
        },
        methods: {
            Filter: function (R, W) {
                return Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, R, Bridge.fn.bind(this, function (b) {
                    return this._swapAnalyzer.Analyze(b, W);
                }));
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder],
        fields: {
            _permutationLinked: null
        },
        ctors: {
            ctor: function (mind, usePermutations) {
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder.ctor.call(this, mind, usePermutations);

            }
        },
        methods: {
            ExtractCases: function () {
                var $t, $t1, $t2, $t3, $t4, $t5, $t6;
                this.Cases = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase))();

                this._permutationLinked = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,System.Collections.Generic.List$1(System.Object)))();

                var indices = System.Linq.Enumerable.range(0, this.Mind.ColorableBoards.getItem(0).Stacks.Value.length).toList(System.Int32);
                var permutations = System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(indices.Count)).toList(Algorithms.Utility.Permutation);

                var caseNumber = 0;

                var colorableCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, 0, this.Mind.ColorableBoards);
                this.Cases.add(colorableCase);
                caseNumber = (caseNumber + 1) | 0;

                var remainingBoards = System.Linq.Enumerable.from(this.Mind.NonColorableBoards).except(this.Mind.BreakerWonBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                var wonBoards = System.Linq.Enumerable.from(this.Mind.ColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                while (remainingBoards.Count > 0) {
                    var proofCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber);
                    this.Cases.add(proofCase);

                    var addedRootBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    var addedBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    $t = Bridge.getEnumerator(remainingBoards);
                    try {
                        while ($t.moveNext()) {
                            var board = $t.Current;
                            if (addedBoards.contains(board)) {
                                continue;
                            }

                            var treeInfo = this.Mind.GetWinTreeInfo(board);
                            var childBoards = System.Linq.Enumerable.from(treeInfo).select(function (bc) {
                                    return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount);
                                }).distinct().toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                            if (Algorithms.Utility.ListUtility.SubsetEqual(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, childBoards, wonBoards)) {
                                addedRootBoards.add(board);
                                addedBoards.add(board);
                                this._permutationLinked.set(board, new (System.Collections.Generic.List$1(System.Object))());

                                if (this.UsePermutations) {
                                    $t1 = Bridge.getEnumerator(permutations);
                                    try {
                                        while ($t1.moveNext()) {
                                            var p = $t1.Current;
                                            var pb = board.Permute(p, indices);
                                            if (wonBoards.contains(pb) || addedBoards.contains(pb)) {
                                                continue;
                                            }

                                            var closed = true;
                                            $t2 = Bridge.getEnumerator(childBoards);
                                            try {
                                                while ($t2.moveNext()) {
                                                    var cb = $t2.Current;
                                                    if (!wonBoards.contains(cb.Permute(p, indices))) {
                                                        closed = false;
                                                        break;
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            if (closed) {
                                                this._permutationLinked.get(board).add({ item1: p, item2: pb });
                                                addedBoards.add(pb);
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }}
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t3 = Bridge.getEnumerator(addedRootBoards);
                    try {
                        while ($t3.moveNext()) {
                            var board1 = $t3.Current;
                            proofCase.AddBoard(board1);
                        }
                    } finally {
                        if (Bridge.is($t3, System.IDisposable)) {
                            $t3.System$IDisposable$dispose();
                        }
                    }
                    $t4 = Bridge.getEnumerator(addedBoards);
                    try {
                        while ($t4.moveNext()) {
                            var board2 = $t4.Current;
                            wonBoards.add(board2);
                            remainingBoards.remove(board2);
                        }
                    } finally {
                        if (Bridge.is($t4, System.IDisposable)) {
                            $t4.System$IDisposable$dispose();
                        }
                    }
                    caseNumber = (caseNumber + 1) | 0;
                }

                if (this.Mind.BreakerWonBoards.Count > 0) {
                    $t5 = Bridge.getEnumerator(System.Linq.Enumerable.from(this.Mind.BreakerWonBoards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f1)));
                    try {
                        while ($t5.moveNext()) {
                            var group = $t5.Current;
                            var lostCase = ($t6 = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber, group.toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)), $t6.BreakerWin = true, $t6.Superabundant = group.key(), $t6);
                            this.Cases.add(lostCase);
                        }
                    } finally {
                        if (Bridge.is($t5, System.IDisposable)) {
                            $t5.System$IDisposable$dispose();
                        }
                    }}
            },
            GetHandledCaseNumber: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                if (this.Cases.getItem(0).Boards.contains(childBoard)) {
                    return 1;
                }

                return ((System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase, System.Linq.Enumerable.from(this.Cases).skip(1), Bridge.fn.bind(this, function (cc) {
                        return System.Linq.Enumerable.from(cc.Boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f3)).contains(childBoard);
                    }))).first() + 2) | 0);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder, {
        f1: function (b) {
            return this.Mind.IsSuperabundant(b);
        },
        f2: function (tup) {
            return tup.item2;
        },
        f3: function (bb) {
            return System.Linq.Enumerable.from(System.Array.init([bb], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(bb)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f2));
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter],
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        ctors: {
            init: function () {
                this._fixerResponses = System.Array.init(8192, System.UInt64(0), System.UInt64);
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            }
        },
        methods: {
            Filter: function (R, W) {
                throw new System.NotImplementedException();
            },
            Analyze: function (board) {
                var colorPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        colorPairs.add({ item1: i, item2: j });
                    }
                }

                return System.Linq.Enumerable.from(colorPairs).orderBy(function (cp) {
                        return Algorithms.Int64Usage.PopulationCount$1((board._trace[System.Array.index(cp.item1, board._trace)].xor(board._trace[System.Array.index(cp.item2, board._trace)])));
                    }).select(Bridge.fn.bind(this, function (cp) {
                    var $t;
                    return ($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.ColorPairOutcome(), $t.Colors = cp, $t.FixerOutcomes = this.AnalyzeColorPair(cp, board), $t);
                }));
            },
            AnalyzeColorPair: function (colors, board) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome))(Bridge.fn.bind(this, function (colors, board) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        i,
                        j,
                        x,
                        y,
                        swappable,
                        $t,
                        breakerChoice,
                        responses,
                        $t1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        i = colors.item1;
                                            j = colors.item2;

                                            x = board._trace[System.Array.index(i, board._trace)];
                                            y = board._trace[System.Array.index(j, board._trace)];
                                            swappable = x.xor(y);

                                            $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                breakerChoice = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        this.GetFixerResponses(breakerChoice);
                                            responses = System.Linq.Enumerable.range(1, ((this._fixerResponseCount - 1) | 0)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter.f1)).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter.f2);

                                            $enumerator.current = ($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome(), $t1.BreakerChoice = breakerChoice, $t1.Exits = responses.select(function (response) {
                                                return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i, j, response, board._stackCount);
                                            }).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard), $t1);
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;
                var tableLength = this._fixerResponses.length;
                while (tableLength <= this._fixerResponseCount) {
                    tableLength = Bridge.Int.mul(tableLength, 2);
                }
                if (tableLength > this._fixerResponses.length) {
                    this._fixerResponses = System.Array.init(tableLength, System.UInt64(0), System.UInt64);
                }

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter, {
        f1: function (k) {
            return this._fixerResponses[System.Array.index(k, this._fixerResponses)];
        },
        f2: function (fr) {
            return Algorithms.Int64Usage.PopulationCount$1(fr) <= 1;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IMind],
        fields: {
            _remainingBoards: null,
            _wonBoards: null,
            _swapAnalyzer: null,
            _coloringAnalyzer: null,
            _graph: null,
            _lineGraph: null,
            _edges: null,
            _totalPositions: 0,
            _gameTreeIndex: 0
        },
        props: {
            MinPot: 0,
            MaxPot: 0,
            FixerWonAllNearlyColorableBoards: false,
            HasNonSuperabundantBoardThatIsNearlyColorable: false,
            TotalPositions: {
                get: function () {
                    return this._totalPositions;
                }
            },
            BreakerWonBoard: null,
            BoardCounts: null,
            BoardCountsList: null,
            OnlyConsiderNearlyColorableBoards: false,
            ExcludeNonNearlyColorableNonSuperabundantBoards: false,
            MissingEdgeIndex: 0,
            SuperabundantOnly: false,
            ThinkHarder: false,
            PerformCompleteAnalysis: false,
            ColoringAnalyzer: {
                get: function () {
                    return this._coloringAnalyzer;
                }
            },
            NonColorableBoards: null,
            ColorableBoards: null,
            BreakerWonBoards: null,
            FixerWonBoards: {
                get: function () {
                    return this._wonBoards;
                }
            },
            BoardsOfDepth: null,
            ExtraPsi: 0,
            WinFilter: null
        },
        alias: [
            "MaxPot", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$MaxPot",
            "FixerWonAllNearlyColorableBoards", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$FixerWonAllNearlyColorableBoards",
            "TotalPositions", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$TotalPositions",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$Analyze"
        ],
        ctors: {
            ctor: function (g, proofFindingMode, weaklyFixable) {
                if (proofFindingMode === void 0) { proofFindingMode = false; }
                if (weaklyFixable === void 0) { weaklyFixable = false; }

                this.$initialize();
                this._graph = g;
                this.BuildLineGraph();

                this._coloringAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimColoringAnalyzer(this._lineGraph, Bridge.fn.cacheBind(this, this.GetEdgeColorList));
                this._swapAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer(g.N, proofFindingMode, proofFindingMode || weaklyFixable);
                this._wonBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).ctor();
                this._remainingBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                this.MissingEdgeIndex = -1;
            }
        },
        methods: {
            Analyze: function (template, progress) {
                if (progress === void 0) { progress = null; }
                this._wonBoards.clear();
                this._remainingBoards.clear();
                this.BoardCountsList = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                this.BreakerWonBoard = null;
                this.NonColorableBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                this.ColorableBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                this.BreakerWonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                if (this.WinFilter == null) {
                    this.WinFilter = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GreedyWinFilter(this._swapAnalyzer);
                }

                this.FixerWonAllNearlyColorableBoards = true;

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                var fixerWin = true;
                for (var colorCount = minimumColorCount; colorCount <= maximumColorCount; colorCount = (colorCount + 1) | 0) {
                    this.GenerateAllBoards(template, colorCount, progress);
                    if (this.OnlyConsiderNearlyColorableBoards) {
                        if (this.MissingEdgeIndex >= 0) {
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this._remainingBoards, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f1), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f2);
                        } else {
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this._remainingBoards, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f3), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f2);
                        }
                    }

                    if (foundAtLeastOneBoard && this._remainingBoards.Count <= 0) {
                        break;
                    }

                    this._totalPositions = (this._remainingBoards.Count + this._wonBoards.Count) | 0;
                    foundAtLeastOneBoard = true;

                    fixerWin = !!(fixerWin & this.Analyze$1(progress));
                }

                return fixerWin;
            },
            Analyze$1: function (progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                var winLength = 0;
                var totalBoards = this._remainingBoards.Count;
                var lastP = -1;

                this.BoardsOfDepth = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)))();
                this.BoardCounts = new (System.Collections.Generic.List$1(System.Int32))();
                this.BoardCountsList.add(this.BoardCounts);
                this.BoardCounts.add(this._remainingBoards.Count);

                for (var i = (this._remainingBoards.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    var b = this._remainingBoards.getItem(i);
                    if (this._coloringAnalyzer.Analyze(b)) {
                        this._remainingBoards.removeAt(i);
                        this._wonBoards.add(b);
                        this.ColorableBoards.add(b);
                    }

                    if (!Bridge.staticEquals(progress, null)) {
                        var p = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p > lastP) {
                            progress({ item1: "Finding all colorable positions...", item2: p });
                            lastP = p;
                        }
                    }
                }

                this.BoardsOfDepth.set(winLength, System.Linq.Enumerable.from(this._wonBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
                this.BoardCounts.add(this._remainingBoards.Count);

                var nonSuperabundantBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                for (var i1 = (this._remainingBoards.Count - 1) | 0; i1 >= 0; i1 = (i1 - 1) | 0) {
                    var b1 = this._remainingBoards.getItem(i1);
                    if (!this.IsSuperabundant(b1)) {
                        if (this.OnlyConsiderNearlyColorableBoards && this.MissingEdgeIndex >= 0) {
                            this.HasNonSuperabundantBoardThatIsNearlyColorable = true;
                            this.BreakerWonBoard = b1;

                            if (!this.PerformCompleteAnalysis) {
                                return false;
                            }
                        }

                        this._remainingBoards.removeAt(i1);
                        nonSuperabundantBoards.add(b1);
                    }

                    if (!Bridge.staticEquals(progress, null)) {
                        var p1 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p1 > lastP) {
                            progress({ item1: "Finding all non-superabundant positions...", item2: p1 });
                            lastP = p1;
                        }
                    }
                }

                if (nonSuperabundantBoards.Count > 0 && !this.SuperabundantOnly) {
                    if (!this.OnlyConsiderNearlyColorableBoards && !this.ExcludeNonNearlyColorableNonSuperabundantBoards) {
                        this.FixerWonAllNearlyColorableBoards = false;
                        this.BreakerWonBoard = nonSuperabundantBoards.getItem(0);
                        this.BreakerWonBoards.addRange(nonSuperabundantBoards);

                        if (!this.PerformCompleteAnalysis) {
                            return false;
                        }
                    } else if (this.ExistsNearlyColorableBoardForEachEdge(nonSuperabundantBoards)) {
                        this.FixerWonAllNearlyColorableBoards = false;
                        this.HasNonSuperabundantBoardThatIsNearlyColorable = true;
                        this.BreakerWonBoard = nonSuperabundantBoards.getItem(0);
                        this.BreakerWonBoards.addRange(nonSuperabundantBoards);
                        if (!this.PerformCompleteAnalysis) {
                            return false;
                        }
                    }
                }

                this.BoardCounts.add(this._remainingBoards.Count);
                this.NonColorableBoards.addRange(this._remainingBoards);

                while (this._remainingBoards.Count > 0) {
                    var count = this._remainingBoards.Count;
                    winLength = (winLength + 1) | 0;

                    var boardIndicesToAdd = { v : System.Linq.Enumerable.from(this.WinFilter.Filter(this._remainingBoards, this._wonBoards)).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f4).toList(System.Int32) };
                    var wonBoards = System.Linq.Enumerable.from(this._remainingBoards).where((function ($me, boardIndicesToAdd) {
                            return function (b2, i2) {
                                return boardIndicesToAdd.v.contains(i2);
                            };
                        })(this, boardIndicesToAdd)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    $t = Bridge.getEnumerator(wonBoards);
                    try {
                        while ($t.moveNext()) {
                            var b2 = $t.Current;
                            this._wonBoards.add(b2);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }this.BoardsOfDepth.set(winLength, wonBoards);

                    $t1 = Bridge.getEnumerator(boardIndicesToAdd.v);
                    try {
                        while ($t1.moveNext()) {
                            var i2 = $t1.Current;
                            this._remainingBoards.removeAt(i2);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (!Bridge.staticEquals(progress, null)) {
                        var p2 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p2 > lastP) {
                            progress({ item1: System.String.format("Finding all {0} move wins...", Bridge.box(winLength, System.Int32)), item2: p2 });
                            lastP = p2;
                        }
                    }

                    this.BoardCounts.add(this._remainingBoards.Count);

                    if (this._remainingBoards.Count === count) {
                        this.BreakerWonBoards.addRange(this._remainingBoards);

                        if (this.BreakerWonBoard == null) {
                            this.BreakerWonBoard = this._remainingBoards.getItem(0);
                        }

                        if (this.OnlyConsiderNearlyColorableBoards && this.MissingEdgeIndex >= 0) {
                            this.FixerWonAllNearlyColorableBoards = false;
                        } else if (this.ExistsNearlyColorableBoardForEachEdge(this._remainingBoards)) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(this._remainingBoards).firstOrDefault(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f5), null);

                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = System.Linq.Enumerable.from(this._remainingBoards).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f5));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            NearlyColorableForEdge: function (board, edgeIndex) {
                return this._coloringAnalyzer.ColorableWithoutEdge(board, edgeIndex);
            },
            ExistsNearlyColorableBoardForEachEdge: function (boards) {
                return System.Linq.Enumerable.range(0, this._lineGraph.N).all(Bridge.fn.bind(this, function (e) {
                    return System.Linq.Enumerable.from(boards).any(Bridge.fn.bind(this, function (b) {
                            return this.NearlyColorableForEdge(b, e);
                        }));
                }));
            },
            NearlyColorableForSomeEdge: function (board) {
                return System.Linq.Enumerable.range(0, this._lineGraph.N).any(Bridge.fn.bind(this, function (e) {
                    return this.NearlyColorableForEdge(board, e);
                }));
            },
            LookAtSuperabundance: function () {
                var packs = System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f6)).toList(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
                var goodPacks = System.Linq.Enumerable.from(packs).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f8)).toList(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
            },
            IsSuperabundant: function (b) {
                var subset = System.UInt64(0);

                var total = 0;
                while (subset.lt((System.UInt64(1).shl(b._stackCount)))) {
                    total = 0;
                    for (var i = 0; i < b._length; i = (i + 1) | 0) {
                        total = (total + (((Bridge.Int.div(Algorithms.Int64Usage.PopulationCount$1((subset.and(b._trace[System.Array.index(i, b._trace)]))), 2)) | 0))) | 0;
                    }

                    var e = this._graph.EdgesOn(Algorithms.Int64Usage.ToSet$1(subset));
                    if (total < e) {
                        return false;
                    }

                    subset = subset.inc();
                }

                if (this.ExtraPsi > 0) {
                    return total >= ((this._graph.E + this.ExtraPsi) | 0);
                }

                return true;
            },
            ComputeAbundanceSurplus: function (b) {
                var total = 0;
                for (var i = 0; i < b._length; i = (i + 1) | 0) {
                    total = (total + (((Bridge.Int.div(Algorithms.Int64Usage.PopulationCount$1(b._trace[System.Array.index(i, b._trace)]), 2)) | 0))) | 0;
                }

                return ((total - this._graph.E) | 0);
            },
            ComputeMatchingAbundanceShadow: function (b) {
                var shadow = new (System.Collections.Generic.List$1(System.Int32))();

                var subset = System.UInt64(0);
                while (subset.lt((System.UInt64(1).shl(b._stackCount)))) {
                    var e = { };
                    if (!this.IsMatchingAbundant(b, subset, e)) {
                        shadow.add(e.v);
                    }
                    subset = subset.inc();
                }

                shadow.sort();

                return shadow;
            },
            IsMatchingAbundant: function (b, subset, e) {
                e.v = this._graph.EdgesOn(Algorithms.Int64Usage.ToSet$1(subset));

                var total = 0;
                for (var i = 0; i < b._length; i = (i + 1) | 0) {
                    var vc = Algorithms.Int64Usage.ToSet$1((subset.and(b._trace[System.Array.index(i, b._trace)])));
                    total = (total + (this._lineGraph.IndependenceNumber$1(this._graph.EdgeIndicesOn(vc)))) | 0;
                }

                return total >= e.v;
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                if (!Bridge.staticEquals(progress, null)) {
                    progress({ item1: "Finding all positions...", item2: 0 });
                }

                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ulong.Generate(template.Sizes, colorCount));
                try {
                    while ($t.moveNext()) {
                        var t = $t.Current;
                        var b = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(t, template.Sizes.Count);
                        this._remainingBoards.add(b);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            BuildLineGraph: function () {
                var adjacent = this._graph.Adjacent;
                var n = ((System.Array.getLength(adjacent, 0) - 1) + 1) | 0;

                this._edges = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        if (adjacent.get([i, j])) {
                            this._edges.add({ item1: i, item2: j });
                        }
                    }
                }

                var meets = System.Array.create(false, null, System.Boolean, this._edges.Count, this._edges.Count);
                for (var i1 = 0; i1 < this._edges.Count; i1 = (i1 + 1) | 0) {
                    for (var j1 = (i1 + 1) | 0; j1 < this._edges.Count; j1 = (j1 + 1) | 0) {
                        if (this._edges.getItem(i1).item1 === this._edges.getItem(j1).item1 || this._edges.getItem(i1).item1 === this._edges.getItem(j1).item2 || this._edges.getItem(i1).item2 === this._edges.getItem(j1).item1 || this._edges.getItem(i1).item2 === this._edges.getItem(j1).item2) {
                            meets.set([i1, j1], (meets.set([j1, i1], true), true));
                        }
                    }
                }

                this._lineGraph = new Algorithms.Graph.ctor(meets);
            },
            GetEdgeColorList: function (b, e) {
                var v1 = this._edges.getItem(e).item1;
                var v2 = this._edges.getItem(e).item2;
                var stacks = b.Stacks.Value;

                return stacks[System.Array.index(v1, stacks)].and(stacks[System.Array.index(v2, stacks)]);
            },
            GetWinTreeInfo: function (board) {
                return this._swapAnalyzer.WinTreeInfo.get(board);
            },
            BuildGameTree: function (board, win) {
                if (win === void 0) { win = true; }
                var seenBoards = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,System.Int32))();
                this._gameTreeIndex = 1;
                return this.BuildGameTree$1(board, seenBoards, win);
            },
            BuildGameTree$1: function (board, seenBoards, win, depth) {
                var $t;
                if (win === void 0) { win = true; }
                if (depth === void 0) { depth = 0; }
                seenBoards.set(board, this._gameTreeIndex);
                var tree = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree(), $t.Board = board, $t.IsFixerWin = win, $t);
                tree.IsColorable = this._coloringAnalyzer.Analyze(board);
                tree.IsSuperabundant = win || this.IsSuperabundant(board);
                tree.GameTreeIndex = this._gameTreeIndex;
                this._gameTreeIndex = (this._gameTreeIndex + 1) | 0;

                if (tree.IsColorable) {
                    return tree;
                }

                if (!tree.IsSuperabundant) {
                    return tree;
                }

                var treeInfo = { };
                if (win) {
                    this._swapAnalyzer.WinTreeInfo.tryGetValue(board, treeInfo);
                } else {
                    this._swapAnalyzer.LossTreeInfo.tryGetValue(board, treeInfo);
                }

                if (treeInfo.v != null) {
                    var localSeenBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).ctor();
                    $t = Bridge.getEnumerator(treeInfo.v);
                    try {
                        while ($t.moveNext()) {
                            var bc = $t.Current;
                            var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount);
                            if (localSeenBoards.contains(childBoard)) {
                                continue;
                            }
                            localSeenBoards.add(childBoard);

                            if (!win && seenBoards.containsKey(childBoard)) {
                                continue;
                            }

                            var childTree = this.BuildGameTree$1(childBoard, seenBoards, win, ((depth + 1) | 0));
                            tree.AddChild$1(childTree, bc);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return tree;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind, {
        f1: function (b) {
            return !this.NearlyColorableForEdge(b, this.MissingEdgeIndex);
        },
        f2: function (x) { },
        f3: function (b) {
            return !this.NearlyColorableForSomeEdge(b);
        },
        f4: function (x) {
            return x;
        },
        f5: function (b3) {
            return this._coloringAnalyzer.ColorableWithoutEdge(b3, 0);
        },
        f6: function (e) {
            return System.Linq.Enumerable.from(this._remainingBoards).where(Bridge.fn.bind(this, function (b) {
                    return this._coloringAnalyzer.ColorableWithoutEdge(b, e);
                })).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
        },
        f7: function (ssb) {
            return this.IsSuperabundant(ssb);
        },
        f8: function (pack) {
            return System.Linq.Enumerable.from(pack).all(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f7));
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            SubTemplates: null,
            Reason: {
                get: function () {
                    return "sub template";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        ctors: {
            ctor: function (subTemplates) {
                if (subTemplates === void 0) { subTemplates = []; }

                this.$initialize();
                this.SubTemplates = System.Linq.Enumerable.from(subTemplates).toList(Algorithms.FixerBreaker.KnowledgeEngine.Template);
            }
        },
        methods: {
            Analyze: function (knowledge, board) {
                var $t;
                $t = Bridge.getEnumerator(this.SubTemplates);
                try {
                    while ($t.moveNext()) {
                        var template = $t.Current;
                        var color = { };
                        var x = { };
                        if (this.ContainsSuberabundantSubStacksAboveTemplate(knowledge, board, template, color, x)) {
                            knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, System.String.format("set L({0}) = L({0}) - {1}", Bridge.box(((x.v + 1) | 0), System.Int32), Bridge.box(color.v, System.Int32)));
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            ContainsSuberabundantSubStacksAboveTemplate: function (knowledge, board, template, color, x) {
                var $t;
                color.v = -1;
                x.v = -1;
                var g = knowledge.GraphKnowledge.Graph;
                var stackSets = System.Linq.Enumerable.from(board.Stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer.f1).toList(System.Collections.Generic.List$1(System.Int32));
                var bigs = System.Linq.Enumerable.range(0, stackSets.Count).count(function (i) {
                    return stackSets.getItem(i).Count > template.Sizes.getItem(i);
                });
                if (bigs <= 0 || bigs > 1) {
                    return false;
                }

                var shrinkable = System.Linq.Enumerable.range(0, stackSets.Count).where(function (i) {
                    return stackSets.getItem(i).Count === ((template.Sizes.getItem(i) + 1) | 0);
                }).toList(System.Int32);
                if (shrinkable.Count <= 0) {
                    return false;
                }

                x.v = shrinkable.getItem(0);
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(stackSets.getItem(x.v)).toList(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        stackSets.getItem(x.v).remove(c);

                        if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, System.Linq.Enumerable.from(stackSets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer.f2).toList(System.Int64), board.Pot)) {
                            color.v = c;
                            return true;
                        }

                        stackSets.getItem(x.v).add(c);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer, {
        f1: function (s) {
            return Algorithms.Int64Usage.ToSet(s);
        },
        f2: function (s) {
            return Algorithms.Int64Usage.ToInt64(s);
        }
    });

    Bridge.define("Algorithms.Graph.IsomorphismComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(Algorithms.Graph)],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$Algorithms$Graph$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$Algorithms$Graph$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return Algorithms.Graph.Isomorphic(x, y);
            },
            getHashCode2: function (g) {
                return 0;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastTarpitEnumerator", {
        inherits: [Algorithms.WordGame.TarpitEnumerator],
        statics: {
            fields: {
                EmptyList: null
            },
            ctors: {
                init: function () {
                    this.EmptyList = new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))();
                }
            }
        },
        fields: {
            _words: null,
            _accessibilityChecker: null
        },
        ctors: {
            ctor: function (n) {
                this.$initialize();
                Algorithms.WordGame.TarpitEnumerator.ctor.call(this);
                this._words = new Algorithms.WordGame.Optimized.FastWordGenerator().GenerateWords(n);
                this._accessibilityChecker = new Algorithms.WordGame.Optimized.FastAccessibilityChecker(n);
            }
        },
        methods: {
            GenerateMinimalTarpits: function (foundTarpit) {
                this.GenerateMinimalTarpitsFast(Bridge.fn.bind(this, function (l) {
                    foundTarpit(System.Linq.Enumerable.from(l).select(Bridge.fn.bind(this, $asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f1)).toList(System.String));
                }));
            },
            GenerateMinimalTarpitsFast: function (foundTarpit) {
                this.GenerateMinimalTarpitsFastIn(this._words, new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))(), foundTarpit);
            },
            GenerateMinimalTarpitsFastIn: function (S, mustHaves, foundTarpit) {
                var $t, $t1;
                var excluded = false;

                var extendedMustHaves = System.Linq.Enumerable.from(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord);
                var T = System.Linq.Enumerable.from(S).except(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord);

                $t = Bridge.getEnumerator(T);
                try {
                    while ($t.moveNext()) {
                        var w = $t.Current;
                        var W = this.RunEscape$1(System.Linq.Enumerable.from(S).except(System.Array.init([w], Algorithms.WordGame.Optimized.FastWord)), extendedMustHaves);

                        if (W != null && W.Count > 0) {
                            excluded = true;
                            this.GenerateMinimalTarpitsFastIn(W, extendedMustHaves, foundTarpit);
                        }

                        extendedMustHaves.add(w);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                if (!excluded) {
                    $t1 = Bridge.getEnumerator(mustHaves);
                    try {
                        while ($t1.moveNext()) {
                            var w1 = $t1.Current;
                            var W1 = this.RunEscape(System.Linq.Enumerable.from(S).except(System.Array.init([w1], Algorithms.WordGame.Optimized.FastWord)));
                            if (W1.Count > 0) {
                                excluded = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (!excluded) {
                        foundTarpit(S);
                    }
                }
            },
            RunEscape$1: function (S, mustHaves) {
                var $t;
                var T = System.Linq.Enumerable.from(S).toList(Algorithms.WordGame.Optimized.FastWord);
                var R = new (System.Collections.Generic.HashSet$1(Algorithms.WordGame.Optimized.FastWord)).$ctor1(System.Linq.Enumerable.from(this._words).except(T));
                while (true) {
                    if (System.Linq.Enumerable.from(mustHaves).any(Bridge.fn.bind(this, function (w) {
                            return this._accessibilityChecker.IsAccessible(w, R);
                        }))) {
                        return null;
                    }

                    var escapers = System.Linq.Enumerable.from(T).except(mustHaves).where(Bridge.fn.bind(this, function (w) {
                        return this._accessibilityChecker.IsAccessible(w, R);
                    })).toList(Algorithms.WordGame.Optimized.FastWord);

                    $t = Bridge.getEnumerator(escapers);
                    try {
                        while ($t.moveNext()) {
                            var w = $t.Current;
                            T.remove(w);
                            R.add(w);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (escapers.Count <= 0) {
                        break;
                    }
                }

                return T;
            },
            RunEscape: function (S) {
                return this.RunEscape$1(S, Algorithms.WordGame.Optimized.FastTarpitEnumerator.EmptyList);
            },
            Wordify: function (b) {
                var $t;
                var st = System.Array.init(b._stackCount, System.Int64(0), System.Int64);
                var traceBits = System.Linq.Enumerable.from(b._trace).select($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f2).toList(System.Collections.Generic.List$1(System.Int32));
                for (var c = 0; c < traceBits.Count; c = (c + 1) | 0) {
                    $t = Bridge.getEnumerator(traceBits.getItem(c));
                    try {
                        while ($t.moveNext()) {
                            var i = $t.Current;
                            st[System.Array.index(i, st)] = st[System.Array.index(i, st)].or((System.Int64(1).shl(c)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return Bridge.toArray(System.Linq.Enumerable.from(st).select($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f3)).join("");
            },
            EnumerateMinimalTarpits: function () {
                return System.Linq.Enumerable.from(this.EnumerateMinimalTarpitsFast()).select(Bridge.fn.bind(this, $asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f4));
            },
            EnumerateMinimalTarpitsFast: function () {
                var explored = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))).$ctor3(new Algorithms.WordGame.Optimized.FastTarpitEnumerator.SortedListComparer());
                return this.EnumerateMinimalTarpitsFastIn(this._words, explored, new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))());
            },
            EnumerateMinimalTarpitsFastIn: function (S, explored, mustHaves) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord)))(Bridge.fn.bind(this, function (S, explored, mustHaves) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        excluded,
                        $t,
                        w,
                        W,
                        $t1,
                        TP,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        excluded = false;

                                            $t = Bridge.getEnumerator(S);
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                w = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 2: {
                                        W = this.RunEscape(System.Linq.Enumerable.from(S).except(System.Array.init([w], Algorithms.WordGame.Optimized.FastWord)));
                                            if (W.Count <= 0) {
                                                $step = 1;
                                                continue;
                                            }

                                            excluded = true;

                                            if (Algorithms.Utility.ListUtility.SubsetEqual(Algorithms.WordGame.Optimized.FastWord, mustHaves, W) && !explored.contains(W)) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 8;
                                            continue;
                                    }
                                    case 3: {
                                        $t1 = Bridge.getEnumerator(this.EnumerateMinimalTarpitsFastIn(W, explored, System.Linq.Enumerable.from(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord)), System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t1.moveNext()) {
                                                TP = $t1.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        $enumerator.current = TP;
                                            $step = 6;
                                            return true;
                                    }
                                    case 6: {
                                        $step = 4;
                                        continue;
                                    }
                                    case 7: {
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        explored.add(W);
                                            mustHaves.add(w);
                                        $step = 1;
                                        continue;
                                    }
                                    case 9: {
                                        if (!excluded) {
                                                $step = 10;
                                                continue;
                                            } 
                                            $step = 12;
                                            continue;
                                    }
                                    case 10: {
                                        $enumerator.current = System.Linq.Enumerable.from(S).toList(Algorithms.WordGame.Optimized.FastWord);
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.Optimized.FastTarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator, {
        f1: function (s) {
            return this.Wordify(s);
        },
        f2: function (t) {
            return Algorithms.Int64Usage.ToSet$1(t);
        },
        f3: function (s) {
            switch (s.toString()) {
                case "1": 
                    return 120;
                case "2": 
                    return 121;
                case "4": 
                    return 122;
                default: 
                    return 63;
            }
        },
        f4: function (list) {
            return System.Linq.Enumerable.from(list).select(Bridge.fn.cacheBind(this, this.Wordify)).toList(System.String);
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastTarpitEnumerator.SortedListComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$Algorithms$WordGame$Optimized$FastWord$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$Algorithms$WordGame$Optimized$FastWord$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (list) {
                var $t;
                var hash = 19;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 31) | 0) + x.getHashCode()) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.ReferenceTarpitEnumerator", {
        inherits: [Algorithms.WordGame.TarpitEnumerator],
        fields: {
            _words: null,
            _accessibilityChecker: null
        },
        ctors: {
            ctor: function (n) {
                this.$initialize();
                Algorithms.WordGame.TarpitEnumerator.ctor.call(this);
                this._words = System.Linq.Enumerable.from(new Algorithms.WordGame.WordEnumerator.$ctor1(Algorithms.WordGame.TarpitEnumerator.Alphabet).EnumerateWords(n)).toList(System.String);
                this._accessibilityChecker = new Algorithms.WordGame.AccessibilityChecker(Algorithms.WordGame.TarpitEnumerator.Alphabet);
            }
        },
        methods: {
            EnumerateMinimalTarpits: function () {
                var seen = new (System.Collections.Generic.HashSet$1(System.String)).ctor();
                return this.EnumerateMinimalTarpitsIn(this._words, seen);
            },
            EnumerateMinimalTarpitsIn: function (S, seen) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function (S, seen) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        excluded,
                        $t,
                        T,
                        W,
                        key,
                        $t1,
                        TP,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        excluded = false;
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(S).select(function (w) {
                                                    return System.Linq.Enumerable.from(S).except(System.Array.init([w], System.String)).toList(System.String);
                                                }));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                T = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 2: {
                                        W = this.RunEscape(T);
                                            if (W.Count <= 0) {
                                                $step = 1;
                                                continue;
                                            }

                                            excluded = true;

                                            key = this.GenerateSimpleKey(W);
                                            if (seen.contains(key)) {
                                                $step = 1;
                                                continue;
                                            }

                                            seen.add(key);
                                            $t1 = Bridge.getEnumerator(this.EnumerateMinimalTarpitsIn(W, seen), System.Collections.Generic.List$1(System.String));
                                            $step = 3;
                                            continue;
                                    }
                                    case 3: {
                                        if ($t1.moveNext()) {
                                                TP = $t1.Current;
                                                $step = 4;
                                                continue;
                                            }
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $enumerator.current = TP;
                                            $step = 5;
                                            return true;
                                    }
                                    case 5: {
                                        $step = 3;
                                        continue;
                                    }
                                    case 6: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 7: {
                                        if (!excluded) {
                                                $step = 8;
                                                continue;
                                            } 
                                            $step = 10;
                                            continue;
                                    }
                                    case 8: {
                                        $enumerator.current = System.Linq.Enumerable.from(S).orderBy($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f1).toList(System.String);
                                            $step = 9;
                                            return true;
                                    }
                                    case 9: {
                                        $step = 10;
                                        continue;
                                    }
                                    case 10: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            RunEscape: function (S) {
                var T = System.Linq.Enumerable.from(S).toList(System.String);
                while (true) {
                    var R = { v : Algorithms.Utility.ListUtility.Difference(System.String, this._words, T) };
                    if (Algorithms.GenericExtensions.RemoveAll(System.String, T, (function ($me, R) {
                        return Bridge.fn.bind($me, function (w) {
                            return this._accessibilityChecker.IsAccessible(w, R.v);
                        });
                    })(this, R), $asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f2) <= 0) {
                        break;
                    }
                }

                return T;
            },
            GenerateSimpleKey: function (S) {
                return Bridge.toArray(System.Linq.Enumerable.from(S).orderBy($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f1)).join(",");
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.ReferenceTarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator, {
        f1: function (s) {
            return s;
        },
        f2: function (x) { }
    });

    Bridge.define("BitLevelGeneration.BitGraph_long", {
        inherits: [BitLevelGeneration.IGraph_long],
        fields: {
            _vertices: null,
            _neighborhood: null
        },
        props: {
            N: {
                get: function () {
                    return this._vertices.length;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            }
        },
        alias: [
            "N", "BitLevelGeneration$IGraph_long$N",
            "Vertices", "BitLevelGeneration$IGraph_long$Vertices",
            "IsIndependent", "BitLevelGeneration$IGraph_long$IsIndependent",
            "Degree", "BitLevelGeneration$IGraph_long$Degree",
            "DegreeInSet", "BitLevelGeneration$IGraph_long$DegreeInSet",
            "NeighborsInSet", "BitLevelGeneration$IGraph_long$NeighborsInSet",
            "MaximalIndependentSubsets", "BitLevelGeneration$IGraph_long$MaximalIndependentSubsets"
        ],
        ctors: {
            ctor: function (edgeWeights) {
                this.$initialize();
                var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);

                this._neighborhood = System.Array.init(n, System.Int64(0), System.Int64);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    var iBit = System.Int64(1).shl(i);
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        var jBit = System.Int64(1).shl(j);

                        if (edgeWeights.getItem(k) !== 0) {
                            this._neighborhood[System.Array.index(i, this._neighborhood)] = this._neighborhood[System.Array.index(i, this._neighborhood)].or(jBit);
                            this._neighborhood[System.Array.index(j, this._neighborhood)] = this._neighborhood[System.Array.index(j, this._neighborhood)].or(iBit);
                        }

                        k = (k + 1) | 0;
                    }
                }
            },
            $ctor1: function (n, neighborhood) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);
                this._neighborhood = neighborhood;
            }
        },
        methods: {
            IsIndependent: function (set) {
                return BitLevelGeneration.BitUsage_long.TrueForAllBitIndices(set, Bridge.fn.bind(this, function (i) {
                    return (this._neighborhood[System.Array.index(i, this._neighborhood)].and(set)).equals(System.Int64(0));
                }));
            },
            Degree: function (v) {
                return BitLevelGeneration.BitUsage_long.PopulationCount(this._neighborhood[System.Array.index(v, this._neighborhood)]);
            },
            DegreeInSet: function (v, set) {
                return BitLevelGeneration.BitUsage_long.PopulationCount((this._neighborhood[System.Array.index(v, this._neighborhood)].and(set)));
            },
            NeighborsInSet: function (v, set) {
                return this._neighborhood[System.Array.index(v, this._neighborhood)].and(set);
            },
            MaximalIndependentSubsets: function (set) {
                var list = new (System.Collections.Generic.List$1(System.Int64))(8);
                this.BronKerbosch(set, System.Int64(0), System.Int64(0), list);
                return list;
            },
            BronKerbosch: function (P, R, X, list) {
                if (P.equals(System.Int64(0)) && X.equals(System.Int64(0))) {
                    list.add(R);
                } else {
                    var u = this.TomitaPivot(P, X);
                    var q = P.and(((System.Int64(1).shl(u)).or(this._neighborhood[System.Array.index(u, this._neighborhood)])));

                    while (q.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);
                        var non = (bit.or(this._neighborhood[System.Array.index(v, this._neighborhood)])).not();

                        this.BronKerbosch(P.and(non), R.or(bit), X.and(non), list);

                        q = q.xor(bit);
                        P = P.xor(bit);
                        X = X.or(bit);
                    }
                }
            },
            TomitaPivot: function (P, X) {
                var min = 2147483647;
                var best = -1;
                var q = P.or(X);

                while (q.ne(System.Int64(0))) {
                    var bit = q.and(q.neg());
                    var u = BitLevelGeneration.BitUsage_long.Extract(bit);

                    var n = BitLevelGeneration.BitUsage_long.PopulationCount(((bit.or(this._neighborhood[System.Array.index(u, this._neighborhood)])).and(P)));
                    if (n < min) {
                        min = n;
                        best = u;
                    }

                    q = q.xor(bit);
                }

                return best;
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitGraph_uint", {
        inherits: [BitLevelGeneration.IGraph_uint],
        fields: {
            _vertices: null,
            _neighborhood: null
        },
        props: {
            N: {
                get: function () {
                    return this._vertices.length;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            }
        },
        alias: [
            "N", "BitLevelGeneration$IGraph_uint$N",
            "Vertices", "BitLevelGeneration$IGraph_uint$Vertices",
            "IsIndependent", "BitLevelGeneration$IGraph_uint$IsIndependent",
            "Degree", "BitLevelGeneration$IGraph_uint$Degree",
            "DegreeInSet", "BitLevelGeneration$IGraph_uint$DegreeInSet",
            "NeighborsInSet", "BitLevelGeneration$IGraph_uint$NeighborsInSet",
            "MaximalIndependentSubsets", "BitLevelGeneration$IGraph_uint$MaximalIndependentSubsets"
        ],
        ctors: {
            ctor: function (edgeWeights) {
                this.$initialize();
                var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);

                this._neighborhood = System.Array.init(n, 0, System.UInt32);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    var iBit = (1 << i) >>> 0;
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        var jBit = (1 << j) >>> 0;

                        if (edgeWeights.getItem(k) !== 0) {
                            this._neighborhood[System.Array.index(i, this._neighborhood)] = (this._neighborhood[System.Array.index(i, this._neighborhood)] | jBit) >>> 0;
                            this._neighborhood[System.Array.index(j, this._neighborhood)] = (this._neighborhood[System.Array.index(j, this._neighborhood)] | iBit) >>> 0;
                        }

                        k = (k + 1) | 0;
                    }
                }
            },
            $ctor1: function (n, neighborhood) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);
                this._neighborhood = neighborhood;
            }
        },
        methods: {
            IsIndependent: function (set) {
                return BitLevelGeneration.BitUsage_uint.TrueForAllBitIndices(set, Bridge.fn.bind(this, function (i) {
                    return (((this._neighborhood[System.Array.index(i, this._neighborhood)] & set) >>> 0)) === 0;
                }));
            },
            Degree: function (v) {
                return BitLevelGeneration.BitUsage_uint.PopulationCount(this._neighborhood[System.Array.index(v, this._neighborhood)]);
            },
            DegreeInSet: function (v, set) {
                return BitLevelGeneration.BitUsage_uint.PopulationCount((((this._neighborhood[System.Array.index(v, this._neighborhood)] & set) >>> 0)));
            },
            NeighborsInSet: function (v, set) {
                return ((this._neighborhood[System.Array.index(v, this._neighborhood)] & set) >>> 0);
            },
            MaximalIndependentSubsets: function (set) {
                var list = new (System.Collections.Generic.List$1(System.UInt32))(8);
                this.BronKerbosch(set, 0, 0, list);
                return list;
            },
            BronKerbosch: function (P, R, X, list) {
                if (P === 0 && X === 0) {
                    list.add(R);
                } else {
                    var u = this.TomitaPivot(P, X);
                    var q = (P & ((((((1 << u) >>> 0)) | this._neighborhood[System.Array.index(u, this._neighborhood)]) >>> 0))) >>> 0;

                    while (q !== 0) {
                        var bit = (q & (((~q + 1) >>> 0))) >>> 0;
                        var v = BitLevelGeneration.BitUsage_uint.Extract(bit);
                        var non = ~(((bit | this._neighborhood[System.Array.index(v, this._neighborhood)]) >>> 0));

                        this.BronKerbosch(((P & non) >>> 0), ((R | bit) >>> 0), ((X & non) >>> 0), list);

                        q = (q ^ bit) >>> 0;
                        P = (P ^ bit) >>> 0;
                        X = (X | bit) >>> 0;
                    }
                }
            },
            TomitaPivot: function (P, X) {
                var min = 2147483647;
                var best = -1;
                var q = (P | X) >>> 0;

                while (q !== 0) {
                    var bit = (q & (((~q + 1) >>> 0))) >>> 0;
                    var u = BitLevelGeneration.BitUsage_uint.Extract(bit);

                    var n = BitLevelGeneration.BitUsage_uint.PopulationCount(((((((bit | this._neighborhood[System.Array.index(u, this._neighborhood)]) >>> 0)) & P) >>> 0)));
                    if (n < min) {
                        min = n;
                        best = u;
                    }

                    q = (q ^ bit) >>> 0;
                }

                return best;
            }
        }
    });

    Bridge.define("GraphicsLayer.ICanvas", {
        inherits: [GraphicsLayer.IProduceMouseEvents],
        $kind: "interface"
    });

    Bridge.define("Graphs.Edge", {
        inherits: [GraphicsLayer.IPaintable,Graphs.IHittable],
        statics: {
            fields: {
                LabelFont: null,
                LabelBrushColor: null,
                IndexFont: null,
                IndexBrushColor: null
            },
            ctors: {
                init: function () {
                    this.LabelFont = new GraphicsLayer.Font("Times New Roman", 18);
                    this.LabelBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 255);
                    this.IndexFont = new GraphicsLayer.Font("System", 8);
                    this.IndexBrushColor = new GraphicsLayer.ARGB.$ctor1(200, 200, 0, 0);
                }
            }
        },
        fields: {
            _V1: null,
            _V2: null,
            _Orientation: 0,
            _thickness: 0,
            _Color: null,
            _penColor: null,
            _IsSelected: false,
            _Multiplicity: 0,
            _style: null,
            _showIndex: false
        },
        props: {
            ParentIndex: 0,
            IndexAngle: 0,
            V1: {
                get: function () {
                    return this._V1;
                },
                set: function (value) {
                    this._V1 = value;
                }
            },
            V2: {
                get: function () {
                    return this._V2;
                },
                set: function (value) {
                    this._V2 = value;
                }
            },
            Orientation: {
                get: function () {
                    return this._Orientation;
                },
                set: function (value) {
                    this._Orientation = value;

                    this.UpdateStyle();
                }
            },
            Thickness: {
                get: function () {
                    return this._thickness;
                },
                set: function (value) {
                    this._thickness = value;
                }
            },
            Color: {
                get: function () {
                    return this._Color;
                },
                set: function (value) {
                    this._Color = value;
                    this._penColor = this._Color;
                }
            },
            IsSelected: {
                get: function () {
                    return this._IsSelected;
                },
                set: function (value) {
                    if (value === this._IsSelected) {
                        return;
                    }

                    this._IsSelected = value;

                    this.Color = this._IsSelected ? new GraphicsLayer.ARGB.ctor(50, 205, 50) : new GraphicsLayer.ARGB.ctor(0, 0, 0);
                }
            },
            Multiplicity: {
                get: function () {
                    return this._Multiplicity;
                },
                set: function (value) {
                    this._Multiplicity = Math.max(1, value);
                }
            },
            Style: {
                get: function () {
                    return this._style;
                },
                set: function (value) {
                    if (value == null) {
                        return;
                    }

                    var style = value;
                    if (System.String.contains(style,"~~|~|~~")) {
                        var parts = System.String.split(style, System.Array.init(["~~|~|~~"], System.String), null, 0);
                        if (parts.length >= 2) {
                            style = parts[System.Array.index(0, parts)];
                            this.Label = parts[System.Array.index(1, parts)];
                        }
                    }

                    if (System.String.startsWith(style, "+") && !System.String.isNullOrEmpty(this._style)) {
                        this._style = System.String.concat(this._style, (System.String.concat(", ", System.String.trimStart(style, [43]))));
                    } else {
                        this._style = System.String.trimStart(style, [43]);
                    }
                }
            },
            Label: null
        },
        alias: [
            "Paint", "GraphicsLayer$IPaintable$Paint",
            "Hit", "Graphs$IHittable$Hit"
        ],
        ctors: {
            init: function () {
                this._thickness = 4;
                this._Color = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                this._penColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                this._showIndex = false;
            },
            $ctor1: function (v1, v2) {
                Graphs.Edge.$ctor2.call(this, v1, v2, Graphs.Edge.Orientations.None);
            },
            $ctor2: function (v1, v2, orientation) {
                this.$initialize();
                this._V1 = v1;
                this._V2 = v2;
                this._Orientation = orientation;
                this._Multiplicity = 1;
            },
            ctor: function (e, vertices) {
                this.$initialize();
                this.V1 = vertices.getItem(e.IndexV1);
                this.V2 = vertices.getItem(e.IndexV2);
                this.Orientation = e.Orientation;
                this.Thickness = e.Thickness;
                this.Multiplicity = e.Multiplicity;
                this.Style = e.Style;
                this.Label = e.Label;
            }
        },
        methods: {
            Paint: function (g, width, height) {
                if (Bridge.referenceEquals(this._V1, this._V2)) {
                    // Draw self loop.
                } else {
                    var maxRadius1 = Math.max(this._V1.LocalBounds.Width, this._V1.LocalBounds.Height) / 2;
                    var maxRadius2 = Math.max(this._V2.LocalBounds.Width, this._V2.LocalBounds.Height) / 2;

                    var cos = (this._V2.X - this._V1.X) / Math.sqrt((this._V2.X - this._V1.X) * (this._V2.X - this._V1.X) + (this._V2.Y - this._V1.Y) * (this._V2.Y - this._V1.Y));
                    cos = Math.min(Math.max(cos, -1), 1);

                    var sin = (this._V2.Y - this._V1.Y) / Math.sqrt((this._V2.X - this._V1.X) * (this._V2.X - this._V1.X) + (this._V2.Y - this._V1.Y) * (this._V2.Y - this._V1.Y));
                    sin = Math.min(Math.max(sin, -1), 1);

                    var angle = Math.acos(cos);
                    if (this._V1.Y > this._V2.Y) {
                        angle = -angle;
                    }

                    if (isNaN(angle)) {
                        return;
                    }

                    var angleStep = 1.5707963267948966 / this._Multiplicity;
                    var evenModifier = (this._Multiplicity % 2 === 0) ? 0.5 : 0;

                    var topStart = new GraphicsLayer.Box.ctor(0, 0);
                    var topFinish = new GraphicsLayer.Box.ctor(0, 0);
                    var first = true;
                    for (var i = (Bridge.Int.div(((-(((this._Multiplicity - 1) | 0))) | 0), 2)) | 0; i < Math.ceil((((this._Multiplicity + 1) | 0)) / 2.0); i = (i + 1) | 0) {
                        var startAngle = angle + angleStep * (i - evenModifier);
                        var finishAngle = angle - angleStep * (i - evenModifier);

                        var start = this.LocalToGlobal(Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.01, startAngle)), width, height);
                        var finish = this.LocalToGlobal(Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.01, finishAngle)), width, height);


                        if (first) {
                            first = false;
                            topStart = start;
                            topFinish = finish;
                        }

                        g.GraphicsLayer$IGraphics$DrawLine(this._penColor, start, finish, this._thickness);
                    }

                    if (this._Orientation !== Graphs.Edge.Orientations.None) {
                        var points = System.Array.init(3, null, GraphicsLayer.Box);
                        if (this._Orientation === Graphs.Edge.Orientations.Forward) {
                            var sweep = Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.025, angle));

                            points[System.Array.index(0, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep, this._V2.Location, 0.17453292519943295), width, height);
                            points[System.Array.index(1, points)] = this.LocalToGlobal(Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.005, angle)), width, height);
                            points[System.Array.index(2, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep, this._V2.Location, -0.17453292519943295), width, height);
                        } else if (this._Orientation === Graphs.Edge.Orientations.Backward) {
                            var sweep1 = Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.025, angle));

                            points[System.Array.index(0, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep1, this._V1.Location, 0.17453292519943295), width, height);
                            points[System.Array.index(1, points)] = this.LocalToGlobal(Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.005, angle)), width, height);
                            points[System.Array.index(2, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep1, this._V1.Location, -0.17453292519943295), width, height);
                        }

                        g.GraphicsLayer$IGraphics$FillPolygon(new GraphicsLayer.ARGB.ctor(0, 0, 0), points);
                    }

                    var label = this.Label;
                    if (!System.String.isNullOrEmpty(label)) {
                        var box = g.GraphicsLayer$IGraphics$MeasureString(label, Graphs.Edge.LabelFont);
                        var bounds = new GraphicsLayer.Box.$ctor1(topStart.X + (topFinish.X - topStart.X) / 2 - box.Width / 2 - 0.75 * box.Width * sin, topStart.Y + (topFinish.Y - topStart.Y) / 2 - box.Height / 2 + 0.75 * box.Height * cos, box.Width, box.Height);
                        g.GraphicsLayer$IGraphics$DrawString(label, Graphs.Edge.LabelFont, Graphs.Edge.LabelBrushColor, bounds);
                    }

                    if (this._showIndex) {
                        var bounds1 = new GraphicsLayer.Box.$ctor1(topStart.X + (topFinish.X - topStart.X) / 2, topStart.Y + (topFinish.Y - topStart.Y) / 2, 10, 10);
                        var cx = (bounds1.Left + bounds1.Right) / 2;
                        var cy = (bounds1.Bottom + bounds1.Top) / 2;
                        var r = Math.max(bounds1.Width, bounds1.Height) / 2 + 5;
                        var bb = new GraphicsLayer.Box.$ctor1(cx + r * Math.cos(this.IndexAngle) - 5, cy + r * Math.sin(this.IndexAngle) - 5, 10, 10);
                        g.GraphicsLayer$IGraphics$DrawString(this.ParentIndex.toString(), Graphs.Edge.IndexFont, Graphs.Edge.IndexBrushColor, bb);
                    }
                }
            },
            LocalToGlobal: function (local, width, height) {
                return new GraphicsLayer.Box.ctor(width * local.X, height * local.Y);
            },
            Hit: function (x, y) {
                return false;
            },
            Meets: function (other) {
                return Bridge.referenceEquals(this._V1, other.V1) || Bridge.referenceEquals(this._V2, other.V1) || Bridge.referenceEquals(this._V1, other.V2) || Bridge.referenceEquals(this._V2, other.V2);
            },
            UpdateStyle: function () {
                if (this.Style == null) {
                    this.Style = "";
                }

                var sb = new System.Text.StringBuilder();
                this.Style = sb.toString();
            },
            ToggleIndex: function () {
                this._showIndex = !this._showIndex;
            },
            RotateIndex: function () {
                this.IndexAngle += 0.19634954084936207;
                if (this.IndexAngle >= 6.2831853071795862) {
                    this.IndexAngle = 0;
                }
            }
        }
    });

    Bridge.define("Graphs.Graph", {
        inherits: [GraphicsLayer.IPaintable],
        statics: {
            fields: {
                GraphExtension: null,
                EdgeWeightExtension: null
            },
            ctors: {
                init: function () {
                    this.GraphExtension = ".graph";
                    this.EdgeWeightExtension = ".edge weight";
                }
            }
        },
        fields: {
            _vertices: null,
            _edges: null,
            _ModifyListsToken: null,
            _FileName: null,
            _showVertexIndices: false,
            _showEdgeIndices: false
        },
        props: {
            IsDirected: {
                get: function () {
                    return System.Linq.Enumerable.from(this._edges).any($asm.$.Graphs.Graph.f1);
                }
            },
            SelectedItems: {
                get: function () {
                    var $t, $t1;
                    this._ModifyListsToken;
                    {
                        var selectedItems = new (System.Collections.Generic.List$1(Graphs.IHittable))();
                        $t = Bridge.getEnumerator(this.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var i = $t.Current;
                                selectedItems.add(i);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }$t1 = Bridge.getEnumerator(this.SelectedEdges);
                        try {
                            while ($t1.moveNext()) {
                                var i1 = $t1.Current;
                                selectedItems.add(i1);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        return selectedItems;
                    }
                }
            },
            SelectedVertices: {
                get: function () {
                    this._ModifyListsToken;
                    return System.Linq.Enumerable.from(this._vertices).where($asm.$.Graphs.Graph.f2).toList(Graphs.Vertex);
                }
            },
            SelectedEdges: {
                get: function () {
                    this._ModifyListsToken;
                    return System.Linq.Enumerable.from(this._edges).where($asm.$.Graphs.Graph.f3).toList(Graphs.Edge);
                }
            },
            BoundingRectangle: {
                get: function () {
                    var $t;
                    this._ModifyListsToken;
                    {
                        var left = System.Double.max;
                        var right = System.Double.min;
                        var top = System.Double.max;
                        var bottom = System.Double.min;

                        $t = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                left = Math.min(left, v.LocalBounds.Left);
                                right = Math.max(right, v.LocalBounds.Right);
                                top = Math.min(top, v.LocalBounds.Top);
                                bottom = Math.max(bottom, v.LocalBounds.Bottom);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return new GraphicsLayer.Box.$ctor1(left, top, right - left, bottom - top);
                    }
                }
            },
            SelectedBoundingRectangle: {
                get: function () {
                    var $t;
                    var sv = System.Linq.Enumerable.from(this.SelectedVertices).toList(Graphs.Vertex);
                    if (sv.Count <= 0) {
                        return this.BoundingRectangle;
                    }

                    this._ModifyListsToken;
                    {
                        var left = System.Double.max;
                        var right = System.Double.min;
                        var top = System.Double.max;
                        var bottom = System.Double.min;

                        $t = Bridge.getEnumerator(sv);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                left = Math.min(left, v.LocalBounds.Left);
                                right = Math.max(right, v.LocalBounds.Right);
                                top = Math.min(top, v.LocalBounds.Top);
                                bottom = Math.max(bottom, v.LocalBounds.Bottom);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return new GraphicsLayer.Box.$ctor1(left, top, right - left, bottom - top);
                    }
                }
            },
            Name: {
                get: function () {
                    return this._FileName;
                },
                set: function (value) {
                    this._FileName = value;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            },
            Edges: {
                get: function () {
                    return this._edges;
                }
            },
            ParametersDirty: false
        },
        alias: ["Paint", "GraphicsLayer$IPaintable$Paint"],
        ctors: {
            init: function () {
                this._vertices = new (System.Collections.Generic.List$1(Graphs.Vertex))();
                this._edges = new (System.Collections.Generic.List$1(Graphs.Edge))();
                this._ModifyListsToken = {  };
            },
            ctor: function () {
                this.$initialize();
                this.ParametersDirty = true;
            },
            $ctor2: function (g) {
                Graphs.Graph.ctor.call(this);
                this._vertices = System.Linq.Enumerable.from(g.Vertices).select($asm.$.Graphs.Graph.f4).toList(Graphs.Vertex);
                this._edges = System.Linq.Enumerable.from(g.Edges).select(Bridge.fn.bind(this, $asm.$.Graphs.Graph.f5)).toList(Graphs.Edge);
                this.Name = g.Name;
            },
            $ctor3: function (vertices, edges) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.from(vertices).toList(Graphs.Vertex);
                this._edges = System.Linq.Enumerable.from(edges).toList(Graphs.Edge);
            },
            $ctor1: function (g, position, directed) {
                if (directed === void 0) { directed = true; }

                Graphs.Graph.ctor.call(this);
                if (g.VertexWeight != null && g.VertexWeight.Count === g.N) {
                    this._vertices = System.Linq.Enumerable.from(g.Vertices).select(function (v) {
                            return new Graphs.Vertex.$ctor4(position.getItem(v).X, position.getItem(v).Y, g.VertexWeight.getItem(v).toString());
                        }).toList(Graphs.Vertex);
                } else {
                    this._vertices = System.Linq.Enumerable.from(g.Vertices).select(function (v) {
                            return new Graphs.Vertex.$ctor3(position.getItem(v).X, position.getItem(v).Y);
                        }).toList(Graphs.Vertex);
                }
                this._edges = new (System.Collections.Generic.List$1(Graphs.Edge))();

                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        if (directed) {
                            if (g.Directed.get([i, j])) {
                                this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(i), this._vertices.getItem(j), Graphs.Edge.Orientations.Forward));
                            } else {
                                if (g.Adjacent.get([i, j])) {
                                    this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(j), this._vertices.getItem(i), Graphs.Edge.Orientations.Forward));
                                }
                            }
                        } else if (g.Adjacent.get([i, j])) {
                            this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(i), this._vertices.getItem(j), Graphs.Edge.Orientations.None));
                        }
                    }
                }
            }
        },
        methods: {
            Paint: function (g, width, height) {
                var $t, $t1;
                this._ModifyListsToken;
                {
                    if (this.ParametersDirty) {
                        var graph = new Algorithms.Graph.$ctor1(this.GetEdgeWeights());
                        var n = this.Vertices.Count;

                        for (var i = 0; i < this.Vertices.Count; i = (i + 1) | 0) {
                            this.Vertices.getItem(i).IsUniversal = graph.Degree(i) === ((n - 1) | 0);
                        }

                        this.ParametersDirty = false;
                    }

                    var jj = 0;
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            v.ParentIndex = Bridge.identity(jj, (jj = (jj + 1) | 0));
                            v.Paint(g, width, height);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    jj = 0;
                    $t1 = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t1.moveNext()) {
                            var e = $t1.Current;
                            e.ParentIndex = Bridge.identity(jj, (jj = (jj + 1) | 0));
                            e.Paint(g, width, height);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }}
            },
            GetEdgeWeights: function () {
                var weights = new (System.Collections.Generic.List$1(System.Int32))();

                for (var i = 0; i < this._vertices.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this._vertices.Count; j = (j + 1) | 0) {
                        var e = { };
                        if (this.EdgeExists$1(this._vertices.getItem(i), this._vertices.getItem(j), e)) {
                            weights.add(1);
                        } else {
                            if (this.EdgeExists$1(this._vertices.getItem(j), this._vertices.getItem(i), e)) {
                                if (e.v.Orientation === Graphs.Edge.Orientations.None) {
                                    weights.add(1);
                                } else {
                                    weights.add(-1);
                                }
                            } else {
                                weights.add(0);
                            }
                        }
                    }
                }

                return weights;
            },
            ModifyOrientation: function (edgeWeights) {
                var k = 0;
                for (var i = 0; i < this._vertices.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this._vertices.Count; j = (j + 1) | 0) {
                        var w = edgeWeights.getItem(k);

                        if (w !== 0) {
                            var e = this.GetEdge(this._vertices.getItem(i), this._vertices.getItem(j));

                            if (Bridge.referenceEquals(e.V1, this._vertices.getItem(i)) && Bridge.referenceEquals(e.V2, this._vertices.getItem(j))) {
                                if (w < 0) {
                                    e.Orientation = Graphs.Edge.Orientations.Backward;
                                } else {
                                    e.Orientation = Graphs.Edge.Orientations.Forward;
                                }
                            } else {
                                if (w < 0) {
                                    e.Orientation = Graphs.Edge.Orientations.Forward;
                                } else {
                                    e.Orientation = Graphs.Edge.Orientations.Backward;
                                }
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                this.ParametersDirty = true;
            },
            Clone: function () {
                var s = GraphsCore.CompactSerializer.Serialize(this);
                var g = GraphsCore.CompactSerializer.Deserialize(s);
                if (g != null) {
                    g.ParametersDirty = true;
                } else {
                    System.Console.WriteLine("clone is null");
                }
                return g;
            },
            HitTest: function (x, y) {
                var $t, $t1;
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        if (v.Hit(x, y)) {
                            return v;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(this._edges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        if (e.Hit(x, y)) {
                            return e;
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            UnselectAll: function () {
                this.UnselectAllVertices();
                this.UnselectAllEdges();
            },
            UnselectAllVertices: function () {
                var $t;
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        v.IsSelected = false;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            UnselectAllEdges: function () {
                var $t;
                $t = Bridge.getEnumerator(this._edges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        e.IsSelected = false;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectEdges: function (edges, symmetricDifference) {
                var $t;
                this.UnselectAllVertices();
                if (!symmetricDifference) {
                    this.UnselectAllEdges();
                }

                $t = Bridge.getEnumerator(edges, Graphs.Edge);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        e.IsSelected = symmetricDifference ? !e.IsSelected : true;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectVertices: function (vertices, symmetricDifference) {
                var $t;
                this.UnselectAllEdges();
                if (!symmetricDifference) {
                    this.UnselectAllVertices();
                }

                $t = Bridge.getEnumerator(vertices, Graphs.Vertex);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        v.IsSelected = symmetricDifference ? !v.IsSelected : true;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectObjects: function (selectionPoints, symmetricDifference) {
                try {
                    var bounds = new Graphs.PolygonContainer(selectionPoints.toArray());

                    var verticesInPolygon = System.Linq.Enumerable.from(this._vertices).where(function (v) {
                            return bounds.Contains(new GraphicsLayer.Box.ctor(v.X, v.Y));
                        }).toList(Graphs.Vertex);

                    if (verticesInPolygon.Count > 0) {
                        this.SelectVertices(verticesInPolygon, symmetricDifference);
                    } else {
                        var edgesHittingPolygon = System.Linq.Enumerable.from(this._edges).where(function (e) {
                                for (var i = 0; i < selectionPoints.Count; i = (i + 1) | 0) {
                                    var start = selectionPoints.getItem(i);
                                    var end = selectionPoints.getItem((((i + 1) | 0)) % selectionPoints.Count);

                                    if (Graphs.Utility.HaveIntersection(start, end, Graphs.Vector.op_Implicit(e.V1.Location), Graphs.Vector.op_Implicit(e.V2.Location))) {
                                        return true;
                                    }
                                }

                                return false;
                            }).toList(Graphs.Edge);

                        this.SelectEdges(edgesHittingPolygon, symmetricDifference);
                    }
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            },
            AddVertex: function (v) {
                if (this._showVertexIndices) {
                    v.ToggleIndex();
                }
                this._ModifyListsToken;
                this._vertices.add(v);

                this.ParametersDirty = true;
                return true;
            },
            RemoveVertex: function (v) {
                var $t;
                var neighbors = this.FindNeighbors(v);
                $t = Bridge.getEnumerator(neighbors);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        this.RemoveEdge(v, x);
                        this.RemoveEdge(x, v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this._ModifyListsToken;
                this._vertices.remove(v);

                this.ParametersDirty = neighbors.Count > 0;

                return neighbors.Count > 0;
            },
            AddEdge$1: function (v1, v2, multiplicity) {
                if (multiplicity === void 0) { multiplicity = 1; }
                return this.AddEdge(v1, v2, Graphs.Edge.Orientations.None, multiplicity);
            },
            AddEdge: function (v1, v2, orientation, multiplicity, thickness, style, label) {
                if (multiplicity === void 0) { multiplicity = 1; }
                if (thickness === void 0) { thickness = 3.0; }
                if (style === void 0) { style = ""; }
                if (label === void 0) { label = ""; }
                if (Bridge.referenceEquals(v1, v2)) {
                    // Not allowing self-loops for now.
                    return false;
                }

                if (!this.EdgeExists(v1, v2) && !this.EdgeExists(v2, v1)) {
                    this._ModifyListsToken;
                    {
                        var edge = new Graphs.Edge.$ctor2(v1, v2, orientation);
                        edge.Multiplicity = multiplicity;
                        edge.Thickness = thickness;
                        edge.Style = style;
                        edge.Label = label;
                        if (this._showEdgeIndices) {
                            edge.ToggleIndex();
                        }
                        this._edges.add(edge);
                        this.ParametersDirty = true;

                        return true;
                    }
                }

                return false;
            },
            AddEdge$2: function (e) {
                this.AddEdge(e.V1, e.V2, e.Orientation, Math.max(1, e.Multiplicity), e.Thickness, e.Style, e.Label);
            },
            RemoveEdge: function (v1, v2) {
                var $t;
                var toRemove;

                this._ModifyListsToken;
                {
                    toRemove = System.Linq.Enumerable.from(this._edges).where(function (e) {
                            return Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2);
                        }).toList(Graphs.Edge);
                }

                $t = Bridge.getEnumerator(toRemove);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        this._edges.remove(e);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ParametersDirty = toRemove.Count > 0;
                return toRemove.Count > 0;
            },
            EdgeExists: function (v1, v2) {
                var edge = { };
                return this.EdgeExists$1(v1, v2, edge);
            },
            EdgeExists$1: function (v1, v2, edge) {
                var $t;
                edge.v = null;

                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            edge.v = e;
                            if (Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2) && (e.Orientation === Graphs.Edge.Orientations.None || e.Orientation === Graphs.Edge.Orientations.Forward)) {
                                return true;
                            }

                            if (Bridge.referenceEquals(e.V1, v2) && Bridge.referenceEquals(e.V2, v1) && e.Orientation === Graphs.Edge.Orientations.Backward) {
                                return true;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return false;
            },
            GetEdge: function (v1, v2) {
                var $t;
                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            if (Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2) || Bridge.referenceEquals(e.V1, v2) && Bridge.referenceEquals(e.V2, v1)) {
                                return e;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return null;
            },
            InducedSubgraph: function (vertices) {
                var $t, $t1, $t2;
                var induced = new Graphs.Graph.ctor();
                $t = Bridge.getEnumerator(vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        induced.AddVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(induced.Vertices);
                try {
                    while ($t1.moveNext()) {
                        var v1 = $t1.Current;
                        $t2 = Bridge.getEnumerator(induced.Vertices);
                        try {
                            while ($t2.moveNext()) {
                                var v2 = $t2.Current;
                                var e = { };
                                if (this.EdgeExists$1(v1, v2, e)) {
                                    induced.AddEdge(v1, v2, e.v.Orientation !== Graphs.Edge.Orientations.None ? Graphs.Edge.Orientations.Forward : Graphs.Edge.Orientations.None, e.v.Multiplicity, e.v.Thickness, e.v.Style, e.v.Label);
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                return induced.Clone();
            },
            DisjointUnion: function (g) {
                var $t, $t1;
                $t = Bridge.getEnumerator(g.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        this.AddVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(g.Edges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        this.AddEdge$2(e);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }},
            FindNeighbors: function (v) {
                var $t;
                var neighbors = new (System.Collections.Generic.List$1(Graphs.Vertex))();

                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            if (Bridge.referenceEquals(e.V1, v)) {
                                neighbors.add(e.V2);
                            }
                            if (Bridge.referenceEquals(e.V2, v)) {
                                neighbors.add(e.V1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return neighbors;
            },
            Translate: function (offset) {
                var $t;
                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            v.X += offset.X;
                            v.Y += offset.Y;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}
            },
            ToggleEdgeIndices: function () {
                var $t;
                this._showEdgeIndices = !this._showEdgeIndices;
                $t = Bridge.getEnumerator(this.Edges);
                try {
                    while ($t.moveNext()) {
                        var a = $t.Current;
                        a.ToggleIndex();
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            ToggleVertexIndices: function () {
                var $t;
                this._showVertexIndices = !this._showVertexIndices;
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var a = $t.Current;
                        a.ToggleIndex();
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
        }
    });

    Bridge.ns("Graphs.Graph", $asm.$);

    Bridge.apply($asm.$.Graphs.Graph, {
        f1: function (e) {
            return e.Orientation !== Graphs.Edge.Orientations.None;
        },
        f2: function (v) {
            return v.IsSelected;
        },
        f3: function (e) {
            return e.IsSelected;
        },
        f4: function (v) {
            return new Graphs.Vertex.ctor(v);
        },
        f5: function (e) {
            return new Graphs.Edge.ctor(e, this._vertices);
        }
    });

    Bridge.define("Graphs.GraphCanvas", {
        inherits: [GraphicsLayer.IPaintable],
        statics: {
            fields: {
                DefaultBaseViewScale: 0,
                MaxZoomScale: 0,
                _gridStep: 0,
                SelectionPenColor: null,
                GridPenColor: null,
                BackgroundColor: null
            },
            ctors: {
                init: function () {
                    this.DefaultBaseViewScale = 800;
                    this.MaxZoomScale = 6000;
                    this._gridStep = 0.04;
                    this.SelectionPenColor = new GraphicsLayer.ARGB.ctor(0, 0, 255);
                    this.GridPenColor = new GraphicsLayer.ARGB.$ctor1(75, 0, 10, 0);
                    this.BackgroundColor = new GraphicsLayer.ARGB.ctor(247, 247, 247);
                }
            }
        },
        fields: {
            BaseViewScale: 0,
            ZoomDelta: 0,
            MinZoom: 0,
            _zoomFitNextPaint: false,
            _snapToGrid: false,
            _drawGrid: false,
            _graph: null,
            _DraggedVertex: null,
            _selectionPoints: null,
            _SelectionPointsToken: null,
            _controlWasDown: false,
            _canvas: null,
            _state: 0,
            _viewScale: 0,
            _Zoom: 0,
            _secondaryConverter: null,
            _history: null,
            _historyIndex: 0
        },
        events: {
            GraphModified: null,
            NameModified: null
        },
        props: {
            SnapToGrid: {
                get: function () {
                    return this._snapToGrid;
                },
                set: function (value) {
                    var needRedraw = value && !this._snapToGrid;
                    this._snapToGrid = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            GridStep: {
                get: function () {
                    return Graphs.GraphCanvas._gridStep;
                },
                set: function (value) {
                    var needRedraw = this.SnapToGrid && value !== Graphs.GraphCanvas._gridStep;
                    Graphs.GraphCanvas._gridStep = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            DrawGrid: {
                get: function () {
                    return this._drawGrid;
                },
                set: function (value) {
                    var needRedraw = this._drawGrid !== value;
                    this._drawGrid = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            HasPainted: false,
            Width: 0,
            Height: 0,
            Graph: {
                get: function () {
                    return this._graph;
                }
            },
            Canvas: {
                get: function () {
                    return this._canvas;
                },
                set: function (value) {
                    this._canvas = value;

                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseMoved(Bridge.fn.cacheBind(this, this.OnMouseMove));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonDown(Bridge.fn.cacheBind(this, this.OnMouseDown));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonUp(Bridge.fn.cacheBind(this, this.OnMouseUp));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonDoubleClicked(Bridge.fn.cacheBind(this, this.OnMouseDoubleClick));
                }
            },
            Zoom: {
                set: function (value) {
                    if (value === this._Zoom) {
                        return;
                    }

                    this._Zoom = value;
                    var scale = Bridge.Int.clip32(this._Zoom * this.BaseViewScale);
                    if (scale > Graphs.GraphCanvas.MaxZoomScale) {
                        scale = Graphs.GraphCanvas.MaxZoomScale;
                        this._Zoom = (Bridge.Int.div(scale, this.BaseViewScale)) | 0;
                    }

                    this.ViewScale = scale;
                }
            },
            ViewScale: {
                get: function () {
                    return this._viewScale;
                },
                set: function (value) {
                    if (value === this._viewScale) {
                        return;
                    }

                    this._viewScale = value;
                }
            },
            IsEmpty: {
                get: function () {
                    return this._graph.Vertices.Count <= 0;
                }
            }
        },
        alias: ["Paint", "GraphicsLayer$IPaintable$Paint"],
        ctors: {
            init: function () {
                this.BaseViewScale = Graphs.GraphCanvas.DefaultBaseViewScale;
                this.ZoomDelta = 0.15;
                this.MinZoom = 0.15;
                this._snapToGrid = true;
                this._drawGrid = true;
                this._selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))();
                this._SelectionPointsToken = {  };
                this._state = Graphs.GraphCanvas.States.Idle;
                this._viewScale = Graphs.GraphCanvas.DefaultBaseViewScale;
                this._Zoom = 1.0;
                this._history = new (System.Collections.Generic.List$1(Graphs.GraphCanvas.HistoricalGraph))();
                this._historyIndex = 0;
            },
            ctor: function (graph, secondaryConverter) {
                if (secondaryConverter === void 0) { secondaryConverter = null; }

                this.$initialize();                var $t;

                this._graph = graph != null ? graph : new Graphs.Graph.ctor();
                this._secondaryConverter = secondaryConverter;
                this._history.add(($t = new Graphs.GraphCanvas.HistoricalGraph(), $t.Graph = this._graph.Clone(), $t.Zoom = this._Zoom, $t.ViewScale = this._viewScale, $t));
        }
    },
    methods: {
        SetZoomDelta: function (d) {
            this.ZoomDelta = d;
            this.MinZoom = d;
        },
        Invalidate: function () {
            if (this.Canvas != null) {
                this.Canvas.GraphicsLayer$ICanvas$Invalidate();
            }
        },
        GraphChanged: function () {
            var $t;
            if (((((this._history.Count - this._historyIndex) | 0) - 1) | 0) > 0) {
                this._history.removeRange(((this._historyIndex + 1) | 0), ((((this._history.Count - this._historyIndex) | 0) - 1) | 0));
            }

            this._history.add(($t = new Graphs.GraphCanvas.HistoricalGraph(), $t.Graph = this._graph.Clone(), $t.Zoom = this._Zoom, $t.ViewScale = this._viewScale, $t));
            this._historyIndex = (this._history.Count - 1) | 0;

            if (!Bridge.staticEquals(this.GraphModified, null)) {
                this.GraphModified(this.Graph);
            }
        },
        DoUndo: function () {
            if (this._historyIndex <= 0) {
                return false;
            }

            this._historyIndex = (this._historyIndex - 1) | 0;
            this.ObeyHistory();

            return this._historyIndex > 0;
        },
        DoRedo: function () {
            if (this._historyIndex >= ((this._history.Count - 1) | 0)) {
                return false;
            }

            this._historyIndex = (this._historyIndex + 1) | 0;
            this.ObeyHistory();

            return this._historyIndex < ((this._history.Count - 1) | 0);
        },
        ObeyHistory: function () {
            this._graph = this._history.getItem(this._historyIndex).Graph.Clone();
            this.ViewScale = this._history.getItem(this._historyIndex).ViewScale;
            this.Zoom = this._history.getItem(this._historyIndex).Zoom;
            this._graph.ParametersDirty = true;

            if (!Bridge.staticEquals(this.GraphModified, null)) {
                this.GraphModified(this.Graph);
            }

            this.Invalidate();
        },
        Save: function (name) {
            this._graph.Name = name;
            return ""; // _graph.Serialize();
        },
        DoZoom: function (amount, location) {
            var width = this.Width;
            var height = this.Height;

            var oldCenter = new Graphs.Vector(width / this._viewScale * location.X, height / this._viewScale * location.Y);

            this.Zoom = Math.max(this.MinZoom, this._Zoom + this.ZoomDelta * amount);

            var center = new Graphs.Vector(width / this._viewScale * location.X, height / this._viewScale * location.Y);

            this._graph.Translate(Graphs.Vector.op_Subtraction(center, oldCenter));

            this.Invalidate();
        },
        DoZoomFit: function () {
            if (this._graph.Vertices.Count <= 0) {
                this.Zoom = 1;
                this.Invalidate();
                return;
            }

            var width = this.Width;
            var height = this.Height;
            var bounds = this._graph.SelectedBoundingRectangle;
            var c = new Graphs.Vector(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2);

            var actual = Math.min(width, height);
            this.Zoom = 0.9 * actual / Math.max(bounds.Width, bounds.Height) / this.BaseViewScale;

            var center = new Graphs.Vector(width / this._viewScale * 0.5, height / this._viewScale * 0.5);
            this._graph.Translate(Graphs.Vector.op_Subtraction(center, c));

            this.Invalidate();
        },
        DoDelete: function () {
            var $t, $t1;
            if (this._graph.SelectedVertices.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        this._graph.RemoveVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}

            if (this._graph.SelectedEdges.Count > 0) {
                $t1 = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        this._graph.RemoveEdge(e.V1, e.V2);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }}

            this.Invalidate();
            this.GraphChanged();
        },
        DoReverseSelectedEdges: function () {
            var $t;
            if (this._graph.SelectedEdges.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var oo = e.Orientation;
                        if (oo === Graphs.Edge.Orientations.Forward) {
                            oo = Graphs.Edge.Orientations.Backward;
                        } else {
                            if (oo === Graphs.Edge.Orientations.Backward) {
                                oo = Graphs.Edge.Orientations.Forward;
                            }
                        }

                        e.Orientation = oo;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Invalidate();
                this.GraphChanged();
            }
        },
        DoRotateSelectedEdges: function () {
            var $t;
            if (this._graph.SelectedEdges.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var oo = e.Orientation;
                        if (oo === Graphs.Edge.Orientations.Forward) {
                            oo = Graphs.Edge.Orientations.Backward;
                        } else {
                            if (oo === Graphs.Edge.Orientations.Backward) {
                                oo = Graphs.Edge.Orientations.None;
                            } else {
                                if (oo === Graphs.Edge.Orientations.None) {
                                    oo = Graphs.Edge.Orientations.Forward;
                                }
                            }
                        }

                        e.Orientation = oo;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Invalidate();
                this.GraphChanged();
            }
        },
        DoCut: function () {
            this.DoCopy();
            this.DoDelete();
        },
        DoCopy: function (verbose) {
            if (verbose === void 0) { verbose = false; }
            var h = this._graph.InducedSubgraph(this._graph.SelectedVertices);
            return GraphsCore.CompactSerializer.Serialize(h);
        },
        DoPaste: function (s) {
            var g = null;
            if (System.String.contains(s,"tikzpicture")) {
                //g = TeXConverter.FromTikz(s);
            } else if (GraphsCore.CompactSerializer.LooksLikeASerializedGraph(s)) {
                g = GraphsCore.CompactSerializer.Deserialize(s);
            } else {
                //g = Graph.Deserialize(s);
            }

            if (g != null) {
                this._graph.DisjointUnion(g);

                this.Invalidate();
                this.GraphChanged();
            } else if (System.Linq.Enumerable.from(System.String.split(s.trim(), [32].map(function(i) {{ return String.fromCharCode(i); }}))).all($asm.$.Graphs.GraphCanvas.f1)) {
                try {
                    //g = GraphIO.GraphFromEdgeWeightString(s);
                    if (g != null) {
                        this._graph.DisjointUnion(g);

                        this.Invalidate();
                        this.GraphChanged();
                    }

                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            } else {
                try {
                    //g = GraphIO.GraphFromGraph6(s.Trim());

                    if (g != null) {
                        var empty = this._graph.Vertices.Count <= 0;
                        this._graph.DisjointUnion(g);

                        if (empty) {
                            this.NameModified(g.Name);
                        }

                        this.Invalidate();
                        this.GraphChanged();
                    }
                }
                catch ($e2) {
                    $e2 = System.Exception.create($e2);
                }
            }
        },
        DoComplement: function () {
            for (var i = 0; i < this._graph.SelectedVertices.Count; i = (i + 1) | 0) {
                for (var j = (i + 1) | 0; j < this._graph.SelectedVertices.Count; j = (j + 1) | 0) {
                    var v1 = this._graph.SelectedVertices.getItem(i);
                    var v2 = this._graph.SelectedVertices.getItem(j);

                    var edgeExists = this._graph.EdgeExists(v1, v2) || this._graph.EdgeExists(v2, v1);

                    if (edgeExists) {
                        this._graph.RemoveEdge(v1, v2);
                        this._graph.RemoveEdge(v2, v1);
                    } else {
                        this._graph.AddEdge$1(v1, v2);
                    }
                }
            }

            this.Invalidate();

            this.GraphChanged();
        },
        DoSquare: function () {
            var $t, $t1;
            var g = new Graphs.Graph.ctor();

            var vertexMap = new (System.Collections.Generic.Dictionary$2(Graphs.Vertex,Graphs.Vertex))();
            $t = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    var w = new Graphs.Vertex.$ctor4(v.X, v.Y, v.Label);
                    g.AddVertex(w);

                    vertexMap.set(v, w);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            $t1 = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t1.moveNext()) {
                    var v1 = $t1.Current;
                    var q = System.Linq.Enumerable.from(this._graph.FindNeighbors(v1)).union(System.Array.init([v1], Graphs.Vertex)).toList(Graphs.Vertex);

                    for (var i = 0; i < q.Count; i = (i + 1) | 0) {
                        for (var j = (i + 1) | 0; j < q.Count; j = (j + 1) | 0) {
                            g.AddEdge$1(vertexMap.get(q.getItem(i)), vertexMap.get(q.getItem(j)));
                        }
                    }
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }

            return g;
        },
        DoLineGraph: function () {
            var $t, $t1, $t2, $t3;
            var g = new Graphs.Graph.ctor();

            var edgeToCliqueMap = new (System.Collections.Generic.Dictionary$2(Graphs.Edge,System.Collections.Generic.List$1(Graphs.Vertex)))();
            $t = Bridge.getEnumerator(this._graph.Edges);
            try {
                while ($t.moveNext()) {
                    var e = $t.Current;
                    var clique = new (System.Collections.Generic.List$1(Graphs.Vertex))();

                    for (var i = 0; i < e.Multiplicity; i = (i + 1) | 0) {
                        var v = new Graphs.Vertex.$ctor3((e.V1.X + e.V2.X) / 2, (e.V1.Y + e.V2.Y) / 2);
                        g.AddVertex(v);
                        v.Label = e.Label;

                        $t1 = Bridge.getEnumerator(clique);
                        try {
                            while ($t1.moveNext()) {
                                var other = $t1.Current;
                                g.AddEdge$1(other, v);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        clique.add(v);
                    }

                    edgeToCliqueMap.set(e, clique);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            for (var i1 = 0; i1 < this._graph.Edges.Count; i1 = (i1 + 1) | 0) {
                for (var j = (i1 + 1) | 0; j < this._graph.Edges.Count; j = (j + 1) | 0) {
                    if (this._graph.Edges.getItem(i1).Meets(this._graph.Edges.getItem(j))) {
                        $t2 = Bridge.getEnumerator(edgeToCliqueMap.get(this._graph.Edges.getItem(i1)));
                        try {
                            while ($t2.moveNext()) {
                                var v1 = $t2.Current;
                                $t3 = Bridge.getEnumerator(edgeToCliqueMap.get(this._graph.Edges.getItem(j)));
                                try {
                                    while ($t3.moveNext()) {
                                        var v2 = $t3.Current;
                                        g.AddEdge$1(v1, v2);
                                    }
                                } finally {
                                    if (Bridge.is($t3, System.IDisposable)) {
                                        $t3.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }}
                }
            }

            return g;
        },
        DoContractSelectedSubgraph: function () {
            var $t, $t1;
            var selected = this._graph.SelectedVertices;
            if (selected.Count <= 0) {
                return;
            }

            var x = System.Linq.Enumerable.from(selected).average($asm.$.Graphs.GraphCanvas.f2);
            var y = System.Linq.Enumerable.from(selected).average($asm.$.Graphs.GraphCanvas.f3);

            var contractedVertex = new Graphs.Vertex.$ctor3(x, y);
            this._graph.AddVertex(contractedVertex);

            var neighbors = System.Linq.Enumerable.from(selected).selectMany(Bridge.fn.bind(this, $asm.$.Graphs.GraphCanvas.f4)).distinct();

            $t = Bridge.getEnumerator(neighbors);
            try {
                while ($t.moveNext()) {
                    var neighbor = $t.Current;
                    this._graph.AddEdge$1(contractedVertex, neighbor);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            $t1 = Bridge.getEnumerator(selected);
            try {
                while ($t1.moveNext()) {
                    var v = $t1.Current;
                    this._graph.RemoveVertex(v);
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }
            this.Invalidate();

            this.GraphChanged();
        },
        DoIndexLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = i.toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.Degree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoInDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.InDegree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoOutDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.OutDegree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoOutDegreePlusOneLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = (((g.OutDegree(i) + 1) | 0)).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoClearLabels: function (s, vertices) {
            var $t;
            if (s === void 0) { s = ""; }
            if (vertices === void 0) { vertices = null; }
            if (vertices == null || System.Linq.Enumerable.from(vertices).count() <= 0) {
                vertices = System.Linq.Enumerable.range(0, this._graph.Vertices.Count);
            }

            $t = Bridge.getEnumerator(vertices, System.Int32);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    this._graph.Vertices.getItem(v).Label = s;
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
            this.GraphChanged();
        },
        DoSnapToGrid: function () {
            var $t;
            if (this.GridStep <= 0) {
                return;
            }

            $t = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    v.X = Graphs.GraphCanvas._gridStep * Bridge.Math.round(v.X / Graphs.GraphCanvas._gridStep, 0, 6);
                    v.Y = Graphs.GraphCanvas._gridStep * Bridge.Math.round(v.Y / Graphs.GraphCanvas._gridStep, 0, 6);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }},
        PaintGrid: function (g) {
            if (!this.DrawGrid || this.GridStep <= 0) {
                return;
            }

            var x = 0.0;
            while (x <= this.Width) {
                g.GraphicsLayer$IGraphics$DrawLine$1(Graphs.GraphCanvas.GridPenColor, x, 0, x, this.Height, 1.0);
                x += this.GridStep * this._viewScale;
            }

            var y = 0.0;
            while (y <= this.Height) {
                g.GraphicsLayer$IGraphics$DrawLine$1(Graphs.GraphCanvas.GridPenColor, 0, y, this.Width, y, 1.0);
                y += this.GridStep * this._viewScale;
            }
        },
        GetHit: function (x, y) {
            return this._graph.HitTest(x, y);
        },
        Paint: function (g, width, height) {
            var $t;
            if (width === 0 || height === 0) {
                return;
            }

            try {
                this.Width = width;
                this.Height = height;

                if (this.SnapToGrid) {
                    this.DoSnapToGrid();
                }

                g.GraphicsLayer$IGraphics$Clear(Graphs.GraphCanvas.BackgroundColor);
                this.PaintGrid(g);

                this._graph.Paint(g, this._viewScale, this._viewScale);

                switch (this._state) {
                    case Graphs.GraphCanvas.States.Idle: 
                        break;
                    case Graphs.GraphCanvas.States.DraggingVertex: 
                        break;
                    case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                        {
                            var selectionPoints;
                            this._SelectionPointsToken;
                            {
                                selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))(this._selectionPoints.Count);
                                $t = Bridge.getEnumerator(this._selectionPoints);
                                try {
                                    while ($t.moveNext()) {
                                        var p = $t.Current;
                                        selectionPoints.add(new GraphicsLayer.Box.ctor(p.X * this._viewScale, p.Y * this._viewScale));
                                    }
                                } finally {
                                    if (Bridge.is($t, System.IDisposable)) {
                                        $t.System$IDisposable$dispose();
                                    }
                                }}

                            if (selectionPoints.Count > 1) {
                                g.GraphicsLayer$IGraphics$DrawLines(Graphs.GraphCanvas.SelectionPenColor, selectionPoints, 1.0);
                            }

                            break;
                        }
                }
            }
            catch ($e1) {
                $e1 = System.Exception.create($e1);
            }

            this.HasPainted = true;

            if (this._zoomFitNextPaint) {
                this._zoomFitNextPaint = false;
                this.DoZoomFit();
                this.DoZoom(4, new GraphicsLayer.Box.ctor(0.5, 0.5));
            }
        },
        OnMouseMove: function (X, Y) {
            var $t;
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    break;
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    {
                        this._DraggedVertex.X = this._DraggedVertex.DragOffset.X + x;
                        this._DraggedVertex.Y = this._DraggedVertex.DragOffset.Y + y;

                        this.Invalidate();
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    {
                        this._SelectionPointsToken;
                        {
                            this._selectionPoints.add(new GraphicsLayer.Box.ctor(x, y));

                            this.Invalidate();
                        }
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectedVertices: 
                    {
                        $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                v.X = v.DragOffset.X + x;
                                v.Y = v.DragOffset.Y + y;
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        this.Invalidate();
                        break;
                    }
            }
        },
        ToggleEdgeIndices: function () {
            this._graph.ToggleEdgeIndices();

            this.Invalidate();
        },
        RotateVertexIndices: function () {
            var $t;
            var x = this._graph.SelectedVertices;
            if (x.Count <= 0) {
                x = this._graph.Vertices;
            }

            $t = Bridge.getEnumerator(x);
            try {
                while ($t.moveNext()) {
                    var a = $t.Current;
                    a.RotateIndex();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
        },
        RotateEdgeIndices: function () {
            var $t;
            var x = this._graph.SelectedEdges;
            if (x.Count <= 0) {
                x = this._graph.Edges;
            }

            $t = Bridge.getEnumerator(x);
            try {
                while ($t.moveNext()) {
                    var a = $t.Current;
                    a.RotateIndex();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
        },
        SetIndex: function (n) {
            var x = this._graph.SelectedVertices;
            if (x.Count === 1) {
                var v = x.getItem(0);
                var i = this._graph.Vertices.indexOf(v);
                if (i !== n) {
                    this._graph.Vertices.remove(v);
                    if (n >= this._graph.Vertices.Count) {
                        this._graph.Vertices.add(v);
                    } else if (n < i) {
                        this._graph.Vertices.insert(n, v);
                    } else {
                        this._graph.Vertices.insert(n, v);
                    }
                }
            } else {
                var y = this._graph.SelectedEdges;
                if (y.Count === 1) {
                    var v1 = y.getItem(0);
                    var i1 = this._graph.Edges.indexOf(v1);
                    if (i1 !== n) {
                        this._graph.Edges.remove(v1);
                        if (n >= this._graph.Edges.Count) {
                            this._graph.Edges.add(v1);
                        } else if (n < i1) {
                            this._graph.Edges.insert(n, v1);
                        } else {
                            this._graph.Edges.insert(n, v1);
                        }
                    }
                }
            }

            this.Invalidate();
        },
        ToggleVertexIndices: function () {
            this._graph.ToggleVertexIndices();

            this.Invalidate();
        },
        OnMouseDown: function (X, Y, button) {
            var $t;
            this._controlWasDown = this.Canvas.GraphicsLayer$ICanvas$IsControlKeyDown;

            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            if (o == null) {
                                this._selectionPoints.clear();
                                this._selectionPoints.add(new GraphicsLayer.Box.ctor(x, y));
                                this._state = Graphs.GraphCanvas.States.DraggingSelectionRegion;
                            } else if (Bridge.is(o, Graphs.Vertex)) {
                                if (Bridge.cast(o, Graphs.Vertex).IsSelected) {
                                    $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                                    try {
                                        while ($t.moveNext()) {
                                            var v = $t.Current;
                                            v.DragOffset = new GraphicsLayer.Box.ctor(v.X - x, v.Y - y);
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    this._state = Graphs.GraphCanvas.States.DraggingSelectedVertices;
                                } else {
                                    this._DraggedVertex = Bridge.cast(o, Graphs.Vertex);
                                    this._DraggedVertex.DragOffset = new GraphicsLayer.Box.ctor(this._DraggedVertex.X - x, this._DraggedVertex.Y - y);
                                    this._state = Graphs.GraphCanvas.States.DraggingVertex;
                                }
                            } else if (Bridge.is(o, Graphs.Edge)) {
                            }
                        } else if (button === GraphicsLayer.MouseButton.Right) {
                            if (o == null) {
                            } else if (Bridge.is(o, Graphs.Vertex)) {
                            } else if (Bridge.is(o, Graphs.Edge)) {
                            }
                        }

                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    break;
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    break;
            }
        },
        OnMouseUp: function (X, Y, button) {
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    {
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;

                            if (this.SnapToGrid) {
                                this.DoSnapToGrid();
                            }

                            this.GraphChanged();
                        }
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;

                            var selectionPoints;
                            this._SelectionPointsToken;
                            {
                                selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))(this._selectionPoints);

                                if (selectionPoints.Count > 2) {
                                    this._graph.SelectObjects(selectionPoints, this._controlWasDown);
                                }

                                this.Canvas.GraphicsLayer$ICanvas$SelectedObjects = System.Linq.Enumerable.from(this._graph.SelectedItems).select(function(x) { return Bridge.cast(x, System.Object); });
                                this.Invalidate();
                            }
                        }

                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectedVertices: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;
                            this.GraphChanged();
                        }
                        break;
                    }
            }

            this.Invalidate();
        },
        OnMouseDoubleClick: function (X, Y, button) {
            var $t;
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            var graphChanged = false;
            if (this._state === Graphs.GraphCanvas.States.Idle && !this.Canvas.GraphicsLayer$ICanvas$IsControlKeyDown) {
                if (button === GraphicsLayer.MouseButton.Left) {
                    if (o == null) {
                        var v = new Graphs.Vertex.$ctor3(x, y);
                        if (this._graph.AddVertex(v)) {
                            graphChanged = true;
                        }
                    } else if (Bridge.is(o, Graphs.Vertex)) {
                        var endVertex = Bridge.cast(o, Graphs.Vertex);
                        $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var v1 = $t.Current;
                                if (this._graph.AddEdge$1(v1, endVertex)) {
                                    graphChanged = true;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                } else if (button === GraphicsLayer.MouseButton.Right) {
                    if (Bridge.is(o, Graphs.Vertex)) {
                        if (this._graph.RemoveVertex(Bridge.cast(o, Graphs.Vertex))) {
                            graphChanged = true;
                        }
                    }
                }
            }

            this.Invalidate();

            if (graphChanged) {
                this.GraphChanged();
            }
        },
        ZoomFitNextPaint: function () {
            this._zoomFitNextPaint = true;
            this.Invalidate();
        }
    }
    });

    Bridge.ns("Graphs.GraphCanvas", $asm.$);

    Bridge.apply($asm.$.Graphs.GraphCanvas, {
        f1: function (x) {
            var d = { };
            return System.String.startsWith(x, "[") || System.Int32.tryParse(x, d);
        },
        f2: function (z) {
            return z.X;
        },
        f3: function (z) {
            return z.Y;
        },
        f4: function (v) {
            return this._graph.FindNeighbors(v);
        }
    });

    Bridge.define("Graphs.Vertex", {
        inherits: [GraphicsLayer.IPaintable,Graphs.IHittable],
        statics: {
            fields: {
                LabelFont: null,
                IndexFont: null,
                LabelBrushColor: null,
                IndexBrushColor: null,
                BoundaryPenColor: null,
                BoundarySelectedPenColor: null,
                BoundarySelectedPenWidth: 0,
                DefaultFillBrushColor: null,
                UniversalVertexFillBrushColor: null,
                SelectedFillBrushColor: null
            },
            ctors: {
                init: function () {
                    this.LabelFont = new GraphicsLayer.Font("Times New Roman", 12);
                    this.IndexFont = new GraphicsLayer.Font("System", 8);
                    this.LabelBrushColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                    this.IndexBrushColor = new GraphicsLayer.ARGB.$ctor1(200, 200, 0, 0);
                    this.BoundaryPenColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                    this.BoundarySelectedPenColor = new GraphicsLayer.ARGB.$ctor1(255, 0, 255, 0);
                    this.BoundarySelectedPenWidth = 2;
                    this.DefaultFillBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 0);
                    this.UniversalVertexFillBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 255);
                    this.SelectedFillBrushColor = new GraphicsLayer.ARGB.$ctor1(255, 0, 255, 127);
                }
            }
        },
        fields: {
            _Location: null,
            _DragOffset: null,
            _label: null,
            _Style: null,
            _IsSelected: false,
            _padding: 0,
            _LocalBounds: null,
            _showIndex: false
        },
        props: {
            ParentIndex: 0,
            IndexAngle: 0,
            Color: null,
            Modifier: 0,
            X: {
                get: function () {
                    return this._Location.X;
                },
                set: function (value) {
                    this._Location.X = value;
                }
            },
            Y: {
                get: function () {
                    return this._Location.Y;
                },
                set: function (value) {
                    this._Location.Y = value;
                }
            },
            Location: {
                get: function () {
                    return this._Location;
                },
                set: function (value) {
                    this._Location = value;
                }
            },
            Label: {
                get: function () {
                    return this._label;
                },
                set: function (value) {
                    if (Bridge.referenceEquals(value, this._label)) {
                        return;
                    }

                    this._label = value;
                }
            },
            Padding: {
                get: function () {
                    return this._padding;
                },
                set: function (value) {
                    if (value === this._padding) {
                        return;
                    }

                    this._padding = value;
                }
            },
            LocalBounds: {
                get: function () {
                    return this._LocalBounds;
                }
            },
            IsSelected: {
                get: function () {
                    return this._IsSelected;
                },
                set: function (value) {
                    if (value === this._IsSelected) {
                        return;
                    }

                    this._IsSelected = value;
                }
            },
            DragOffset: {
                get: function () {
                    return this._DragOffset;
                },
                set: function (value) {
                    this._DragOffset = value;
                }
            },
            Style: {
                get: function () {
                    return this._Style;
                },
                set: function (value) {
                    if (System.String.startsWith(value, "+") && !System.String.isNullOrEmpty(this._Style)) {
                        this._Style = System.String.concat(this._Style, (System.String.concat(", ", System.String.trimStart(value, [43]))));
                    } else {
                        this._Style = System.String.trimStart(value, [43]);
                    }
                }
            },
            IsUniversal: false
        },
        alias: [
            "Paint", "GraphicsLayer$IPaintable$Paint",
            "Hit", "Graphs$IHittable$Hit"
        ],
        ctors: {
            init: function () {
                this._DragOffset = GraphicsLayer.Box.Empty;
                this._padding = 0.02;
                this._LocalBounds = GraphicsLayer.Box.Empty;
                this._showIndex = false;
            },
            $ctor3: function (x, y) {
                Graphs.Vertex.$ctor4.call(this, x, y, "");
            },
            $ctor1: function (v) {
                Graphs.Vertex.$ctor2.call(this, v, "");
            },
            $ctor2: function (v, label) {
                Graphs.Vertex.$ctor4.call(this, v.X, v.Y, label);
            },
            $ctor4: function (x, y, label) {
                this.$initialize();
                this._Location = new Graphs.Vector(x, y);
                this._label = label;
            },
            ctor: function (v) {
                this.$initialize();
                this.Location = new Graphs.Vector(v.Location.X, v.Location.Y);
                this.Label = v.Label;
                this.Padding = v.Padding;
                this.Style = v.Style;
            }
        },
        methods: {
            Paint: function (g, width, height) {
                var bounds = this.ComputeBounds(g, width, height);

                if (!System.String.isNullOrEmpty(this._label)) {
                    if (Bridge.equals(this.Color, null)) {
                        if (this.IsUniversal) {
                            g.GraphicsLayer$IGraphics$FillEllipse(Graphs.Vertex.UniversalVertexFillBrushColor, bounds);
                        }
                    } else {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.Color, bounds);
                    }

                    g.GraphicsLayer$IGraphics$DrawEllipse(this._IsSelected ? Graphs.Vertex.BoundarySelectedPenColor : Graphs.Vertex.BoundaryPenColor, bounds, this._IsSelected ? Graphs.Vertex.BoundarySelectedPenWidth : 1);
                    g.GraphicsLayer$IGraphics$DrawString(this._label, Graphs.Vertex.LabelFont, Graphs.Vertex.LabelBrushColor, bounds);
                } else {
                    if (Bridge.equals(this.Color, null)) {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.IsUniversal ? Graphs.Vertex.UniversalVertexFillBrushColor : Graphs.Vertex.DefaultFillBrushColor, bounds);
                    } else {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.Color, bounds);
                    }


                    g.GraphicsLayer$IGraphics$DrawEllipse(this._IsSelected ? Graphs.Vertex.BoundarySelectedPenColor : Graphs.Vertex.BoundaryPenColor, bounds, this._IsSelected ? Graphs.Vertex.BoundarySelectedPenWidth : 1);
                }

                if (this._showIndex) {
                    var cx = (bounds.Left + bounds.Right) / 2;
                    var cy = (bounds.Bottom + bounds.Top) / 2;
                    var r = Math.max(bounds.Width, bounds.Height) / 2 + 5;
                    var bb = new GraphicsLayer.Box.$ctor1(cx + r * Math.cos(this.IndexAngle) - 5, cy + r * Math.sin(this.IndexAngle) - 5, 10, 10);
                    g.GraphicsLayer$IGraphics$DrawString(this.ParentIndex.toString(), Graphs.Vertex.IndexFont, Graphs.Vertex.IndexBrushColor, bb);
                }
            },
            Hit: function (x, y) {
                var hit = this._LocalBounds.Contains$1(x, y);
                return hit;
            },
            ComputeBounds: function (g, width, height) {
                var bounds;

                if (!System.String.isNullOrEmpty(this._label)) {
                    var size = g.GraphicsLayer$IGraphics$MeasureString(this._label, Graphs.Vertex.LabelFont);

                    bounds = new GraphicsLayer.Box.$ctor1(this.X * width - size.Width / 2, this.Y * height - size.Height / 2, size.Width, size.Height);
                } else {
                    bounds = new GraphicsLayer.Box.$ctor1(this.X * width, this.Y * height, 0, 0);
                }

                bounds.Inflate(this._padding * width, this._padding * height);

                this._LocalBounds = new GraphicsLayer.Box.$ctor1(bounds.X / width, bounds.Y / height, bounds.Width / width, bounds.Height / height);

                return bounds;
            },
            RotateIndex: function () {
                this.IndexAngle += 0.19634954084936207;
                if (this.IndexAngle >= 6.2831853071795862) {
                    this.IndexAngle = 0;
                }
            },
            ToggleIndex: function () {
                this._showIndex = !this._showIndex;
            }
        }
    });

    Bridge.define("Test.Graphics", {
        inherits: [GraphicsLayer.IGraphics],
        fields: {
            _canvas: null,
            _context: null
        },
        alias: [
            "Clear", "GraphicsLayer$IGraphics$Clear",
            "DrawLine", "GraphicsLayer$IGraphics$DrawLine",
            "DrawLine$1", "GraphicsLayer$IGraphics$DrawLine$1",
            "DrawLines", "GraphicsLayer$IGraphics$DrawLines",
            "FillPolygon", "GraphicsLayer$IGraphics$FillPolygon",
            "DrawEllipse", "GraphicsLayer$IGraphics$DrawEllipse",
            "FillEllipse", "GraphicsLayer$IGraphics$FillEllipse",
            "DrawString", "GraphicsLayer$IGraphics$DrawString",
            "MeasureString", "GraphicsLayer$IGraphics$MeasureString"
        ],
        ctors: {
            ctor: function (canvas) {
                this.$initialize();
                this._canvas = canvas;
                this._context = canvas.getContext("2d");
            }
        },
        methods: {
            Clear: function (argb) {
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.clearRect(0, 0, this._canvas.width, this._canvas.height);
                this._context.fillRect(0, 0, this._canvas.width, this._canvas.height);
            },
            DrawLine: function (argb, p1, p2, width) {
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.lineWidth = width;
                this._context.globalAlpha = Math.min(1.0, Math.max(0.0, argb.A / 255.0));
                this._context.beginPath();
                this._context.moveTo(p1.X, p1.Y);
                this._context.lineTo(p2.X, p2.Y);
                this._context.stroke();
            },
            DrawLine$1: function (argb, x1, y1, x2, y2, width) {
                if (width === void 0) { width = 1.0; }
                this.DrawLine(argb, new GraphicsLayer.Box.ctor(x1, y1), new GraphicsLayer.Box.ctor(x2, y2), width);
            },
            DrawLines: function (argb, points, width) {
                var $t;
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.lineWidth = width;
                this._context.beginPath();
                var first = true;
                $t = Bridge.getEnumerator(points, GraphicsLayer.Box);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (first) {
                            this._context.moveTo(b.X, b.Y);
                            first = false;
                        } else {
                            this._context.lineTo(b.X, b.Y);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }this._context.stroke();
            },
            FillPolygon: function (argb, points) {
                var $t;
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.beginPath();
                var first = true;
                $t = Bridge.getEnumerator(points, GraphicsLayer.Box);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (first) {
                            this._context.moveTo(b.X, b.Y);
                            first = false;
                        } else {
                            this._context.lineTo(b.X, b.Y);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }this._context.fill();
            },
            DrawEllipse: function (argb, bounds, width) {
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.beginPath();
                this._context.arc(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2, bounds.Width / 2, 0, 6.2831853071795862);
                this._context.stroke();
            },
            FillEllipse: function (argb, bounds) {
                this._context.beginPath();
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.arc(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2, bounds.Width / 2, 0, 6.2831853071795862);
                this._context.fill();
            },
            DrawString: function (s, font, argb, bounds) {
                this._context.font = System.String.concat(font.Name, " ", font.Size, "px");
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.strokeText(s, bounds.X, bounds.Y);
            },
            MeasureString: function (s, font) {
                this._context.font = System.String.concat(font.Name, " ", font.Size, "px");
                var metrics = this._context.measureText(s);

                return new GraphicsLayer.Box.$ctor1(0, 0, metrics.width, metrics.emHeightAscent + metrics.emHeightDescent);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer],
        props: {
            ChildReason: {
                get: function () {
                    return "goodness increased";
                }
            }
        },
        ctors: {
            ctor: function (findCleanestWin) {
                if (findCleanestWin === void 0) { findCleanestWin = true; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer.ctor.call(this, findCleanestWin);
            }
        },
        methods: {
            IsChildBoardBetter: function (knowledge, board, childBoard) {
                var x = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(childBoard.Stacks, childBoard.Pot)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Int32);
                var y = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Int32);

                return this.StandardDeviation(x) < this.StandardDeviation(y);
            },
            Mean: function (x) {
                return ((Bridge.Int.div(System.Linq.Enumerable.from(x).sum(), x.Count)) | 0);
            },
            Median: function (x) {
                return System.Linq.Enumerable.from(x).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f2).elementAt(((Bridge.Int.div(x.Count, 2)) | 0));
            },
            StandardDeviation: function (x) {
                var mu = this.Mean(x);

                return Math.sqrt(System.Linq.Enumerable.from(x).sum(function (a) {
                        return (a - mu) * (a - mu);
                    }) / x.Count);
            },
            AbsoluteDeviation: function (x) {
                var mu = this.Median(x);

                return System.Linq.Enumerable.from(x).sum(function (a) {
                        return Math.abs(mu - a);
                    });
            },
            PushLeftOrdering: function (knowledge, board, childBoard) {
                var x = this.GetVectors(childBoard);
                var y = this.GetVectors(board);

                for (var i = 0; i < Math.min(x.Count, y.Count); i = (i + 1) | 0) {
                    var c = this.CompareVectors(x.getItem(i), y.getItem(i));

                    if (c > 0) {
                        return true;
                    }
                    if (c < 0) {
                        return false;
                    }
                }

                return x.Count < y.Count;
            },
            GetVectors: function (b) {
                return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(b.Stacks, b.Pot)).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Collections.Generic.List$1(System.Int32));
            },
            CompareVectors: function (x, y) {
                if (x.Count > y.Count) {
                    return -1;
                }
                if (x.Count < y.Count) {
                    return 1;
                }

                for (var i = 0; i < x.Count; i = (i + 1) | 0) {
                    if (x.getItem(i) < y.getItem(i)) {
                        return 1;
                    }
                    if (x.getItem(i) > y.getItem(i)) {
                        return -1;
                    }
                }

                return 0;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer, {
        f1: function (c) {
            return c.Count;
        },
        f2: function (a) {
            return a;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder],
        statics: {
            methods: {
                BeginProof: function (sb) {
                    sb.appendLine("\\begin{proof}");
                },
                EndProof: function (sb) {
                    sb.appendLine("\\end{proof}");
                }
            }
        },
        fields: {
            _figureTikz: null,
            _maxPot: 0,
            _activeIndices: null,
            _activeListSizes: null,
            _possibleListIndices: null,
            _possibleLists: null,
            _allBoards: null,
            _sequenceComparer: null,
            _sequenceGeneralizer: null,
            _orderFilter: null,
            _isWin: false
        },
        props: {
            UseWildCards: false
        },
        ctors: {
            init: function () {
                this._orderFilter = new (System.Collections.Generic.Dictionary$2(System.String,System.String))();
            },
            ctor: function (mind, figureTikz, usePermutations) {
                if (figureTikz === void 0) { figureTikz = ""; }
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.ctor.call(this, mind, usePermutations);
                this._figureTikz = figureTikz;
                this._maxPot = mind.MaxPot;
                this.UseWildCards = true;
            }
        },
        methods: {
            WriteProof: function () {
                var $t, $t1, $t2, $t3;
                var sb = new System.Text.StringBuilder();

                this._isWin = System.Linq.Enumerable.from(this.Cases).all($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f1);

                this.AddFigure(sb);
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.BeginProof(sb);
                this.GeneratePossibleLists();
                this.GeneralizeAllBoards(sb);

                var wonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                for (var caseNumber = 1; caseNumber <= this.Cases.Count; caseNumber = (caseNumber + 1) | 0) {
                    var c = this.Cases.getItem(((caseNumber - 1) | 0));
                    var boards = System.Linq.Enumerable.from(c.Boards).orderBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f2)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                    var thisClaimBoards;
                    if (caseNumber > 1 && !c.BreakerWin) {
                        thisClaimBoards = System.Linq.Enumerable.from(boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f4)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    } else {
                        thisClaimBoards = boards;
                    }

                    if (!c.BreakerWin) {
                        wonBoards.addRange(thisClaimBoards);
                    }

                    var thisClaimBoardsTex = this.GeneralizeBoards(thisClaimBoards);

                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    sb.appendLine(System.String.format(System.String.concat("\\case{{{0}}}{{$B$ is one of the {1} following boards:\n ", thisClaimBoardsTex, ".}}"), Bridge.box(caseNumber, System.Int32), Bridge.box(thisClaimBoards.Count, System.Int32)));
                    sb.appendLine();
                    sb.appendLine("\\bigskip");

                    if (c.BreakerWin) {
                        sb.appendLine();

                        if (c.Superabundant) {
                            sb.appendLine("No single Kempe exchange gets from these boards to a previous case.");
                        } else {
                            sb.appendLine("These boards are not superabundant.");
                        }
                    } else if (caseNumber === 1) {
                        sb.appendLine();
                        sb.appendLine("In all these cases, $H$ is immediately colorable from the lists.");
                    } else {
                        sb.appendLine();

                        var swapCountGroups = System.Linq.Enumerable.from(boards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f6)).toList(System.Linq.Grouping$2);
                        $t = Bridge.getEnumerator(swapCountGroups);
                        try {
                            while ($t.moveNext()) {
                                var swapCountGroup = $t.Current;
                                if (swapCountGroup.key() === 1) {
                                    sb.appendLine("Each of the following boards can be handled by a single Kempe change that has an endpoint at infinity.");

                                    $t1 = Bridge.getEnumerator(swapCountGroup);
                                    try {
                                        while ($t1.moveNext()) {
                                            var b = $t1.Current;
                                            var pp = { };
                                            var listString = b.ToListStringInLexOrder(pp);

                                            var treeInfo = this.Mind.GetWinTreeInfo(b);
                                            var alpha = Math.min(pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Alpha), pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Beta));
                                            var beta = Math.max(pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Alpha), pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Beta));
                                            var groups = System.Linq.Enumerable.from(treeInfo).groupBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f7);

                                            if (!this.CheckPermutationGoodNess(alpha, beta, listString, System.Linq.Enumerable.from(treeInfo).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f7).distinct().toList(System.Int32))) {
                                                sb.appendLine();
                                                sb.appendLine("there is badness here");
                                                sb.appendLine();
                                            }

                                            sb.append(System.String.concat("$\\K_{" + alpha + "" + beta + ",\\infty}(", listString, ",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f8).select(Bridge.fn.bind(this, function (gg) {
                                                return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(gg.key(), b, this._maxPot) + 1) | 0);
                                            })), null), ")"));
                                            sb.appendLine(System.String.concat("\\Rightarrow $ ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f8).select(Bridge.fn.bind(this, function (gg) {
                                                return System.String.concat("$", this.GetChildBoardName(b, gg.first()), "$ (Case ", this.GetHandledCaseNumber(b, gg.first()), ")");
                                            })), null), "."));
                                            sb.appendLine();

                                            if (this._permutationLinked.get(b).Count > 0) {
                                                sb.appendLine();
                                                sb.appendLine();
                                                sb.appendLine(System.String.concat("Free by vertex permutation: ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f9)))));
                                                sb.appendLine();
                                                sb.appendLine();
                                            }

                                            sb.appendLine("\\bigskip");
                                            sb.appendLine();
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }} else if (swapCountGroup.key() === 2) {
                                    sb.appendLine("\\bigskip");
                                    sb.appendLine();
                                    sb.appendLine("Each of the following boards can be handled by a single Kempe change.");
                                    $t2 = Bridge.getEnumerator(swapCountGroup);
                                    try {
                                        while ($t2.moveNext()) {
                                            var b1 = $t2.Current;
                                            var pp1 = { };
                                            var listString1 = b1.ToListStringInLexOrder(pp1);

                                            var treeInfo1 = this.Mind.GetWinTreeInfo(b1);
                                            var alpha1 = Math.min(pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Alpha), pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Beta));
                                            var beta1 = Math.max(pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Alpha), pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Beta));
                                            var leftover = { v : System.Linq.Enumerable.from(treeInfo1).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo) };

                                            if (!this.CheckPermutationGoodNess(alpha1, beta1, listString1, System.Linq.Enumerable.from(treeInfo1).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f10).distinct().toList(System.Int32))) {
                                                sb.appendLine();
                                                sb.appendLine("there is badness here");
                                                sb.appendLine();
                                            }

                                            while (leftover.v.Count > 0) {
                                                var commonestSwapper = { v : Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.MaxIndex(System.Int32, System.Linq.Enumerable.range(0, b1._stackCount), (function ($me, leftover) {
                                                    return function (v) {
                                                        return System.Linq.Enumerable.from(leftover.v).count(function (bc) {
                                                                return bc.SwapVertices.contains(v);
                                                            });
                                                    };
                                                })(this, leftover)) };
                                                var handledAll = System.Linq.Enumerable.from(leftover.v).where((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.contains(commonestSwapper.v);
                                                        };
                                                    })(this, commonestSwapper)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);
                                                var handled = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Distinct(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo, System.Int32, handledAll, (function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper))).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);

                                                sb.append(System.String.concat("$\\K_{" + alpha1 + "" + beta1 + "," + (((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(commonestSwapper.v, b1, this._maxPot) + 1) | 0)) + "}(", listString1));

                                                var single = System.Linq.Enumerable.from(handled).firstOrDefault($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f11, null);
                                                if (single != null) {
                                                    sb.append(",\\infty");
                                                }

                                                if (System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f12).count() > 0) {
                                                    sb.append(System.String.concat(",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f12).orderBy((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper)).select((function ($me, commonestSwapper) {
                                                        return Bridge.fn.bind($me, function (bc) {
                                                            return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first(), b1, this._maxPot) + 1) | 0);
                                                        });
                                                    })(this, commonestSwapper)), null)));
                                                }
                                                sb.append(")");

                                                sb.appendLine(System.String.concat("\\Rightarrow $ ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(handled).orderBy((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper)).select(Bridge.fn.bind(this, function (bc) {
                                                    return System.String.concat("$", this.GetChildBoardName(b1, bc), "$ (Case ", this.GetHandledCaseNumber(b1, bc), ")");
                                                })), null), "."));
                                                sb.appendLine();

                                                $t3 = Bridge.getEnumerator(handledAll);
                                                try {
                                                    while ($t3.moveNext()) {
                                                        var bc = $t3.Current;
                                                        leftover.v.remove(bc);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t3, System.IDisposable)) {
                                                        $t3.System$IDisposable$dispose();
                                                    }
                                                }}

                                            if (this._permutationLinked.get(b1).Count > 0) {
                                                sb.appendLine();
                                                sb.appendLine();
                                                sb.appendLine(System.String.concat("Free by vertex permutation: ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b1)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f9)))));
                                                sb.appendLine();
                                                sb.appendLine();
                                            }

                                            sb.appendLine();
                                            sb.appendLine("\\bigskip");
                                            sb.appendLine();
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }}
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                }

                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.EndProof(sb);

                return sb.toString();
            },
            CheckPermutationGoodNess: function (alpha, beta, stacksString, swapVertices) {
                var $t;
                var stacks = System.Linq.Enumerable.from(System.String.split(stacksString, [124].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f14).toList(System.Collections.Generic.List$1(System.Int32));

                var colors = function (_o6) {
                        _o6.add(alpha);
                        _o6.add(beta);
                        return _o6;
                    }(new (System.Collections.Generic.List$1(System.Int32))());
                $t = Bridge.getEnumerator(swapVertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        if (Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, colors, stacks.getItem(v)) !== 1) {
                            debugger;
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            GetChildBoardName: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return childBoard.ToListStringInLexOrder$1(this._maxPot);
            },
            GeneralizeAllBoards: function (sb) {
                this._allBoards = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this.Mind.ColorableBoards, this.Mind.NonColorableBoards), this.Mind.BreakerWonBoards)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                this._sequenceComparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(System.Int32))();
                this._sequenceGeneralizer = new (Algorithms.Utility.SequenceGeneralizer$1(System.Int32))(this._activeIndices.Count, this._possibleListIndices);

                var allBoardsTex = this.GeneralizeBoards(this._allBoards);

                if (this.Mind.OnlyConsiderNearlyColorableBoards) {
                    sb.appendLine(System.String.concat("We need to handle all boards that are nearly colorable for edge $e$ up to permutation of colors, so it will suffice to handle the following " + this._allBoards.Count + " boards: ", allBoardsTex, "."));
                } else {
                    sb.appendLine(System.String.concat("We need to handle all boards up to permutation of colors, so it will suffice to handle the following " + this._allBoards.Count + " boards: ", allBoardsTex, "."));
                }

                if (this.Mind.BreakerWonBoards.Count > 0) {
                    sb.appendLine(System.String.concat("Unfortunately, the following " + this.Mind.BreakerWonBoards.Count + " boards cannot be handled: ", this.GeneralizeBoards(this.Mind.BreakerWonBoards), "."));
                }

                sb.appendLine();
            },
            GeneralizeBoards: function (boards) {
                if (this.UseWildCards) {
                    var examples = System.Linq.Enumerable.from(boards).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f15)).toList(System.Collections.Generic.List$1(System.Int32));
                    var nonExamples = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.repeat(this._possibleListIndices, this._activeIndices.Count))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f16).except(System.Linq.Enumerable.from(examples).distinct(this._sequenceComparer), this._sequenceComparer).toList(System.Collections.Generic.List$1(System.Int32));

                    var generalized = this._sequenceGeneralizer.Generalize(examples, nonExamples, false);
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f18)), "and");
                }

                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(boards).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f2)).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f19).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f20), "and");
            },
            ToListIndices: function (b) {
                var stacks = System.Linq.Enumerable.from(b.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f21).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f22)).toList(System.Collections.Generic.List$1(System.Int32));
                return System.Linq.Enumerable.from(stacks).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f23)).toList(System.Int32);
            },
            GeneratePossibleLists: function () {
                var stacks = System.Linq.Enumerable.from(this.Mind.ColorableBoards.getItem(0).Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f21).toList(System.Collections.Generic.List$1(System.Int32));
                this._activeIndices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), stacks, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f22))).toList(System.Int32);
                this._activeListSizes = System.Linq.Enumerable.from(stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f24).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f25)).toList(System.Int32);

                var pot = System.Linq.Enumerable.range(0, this._maxPot).toList(System.Int32);
                this._possibleLists = System.Linq.Enumerable.from(System.Linq.Enumerable.from(this._activeListSizes).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f26).toList(System.Int32)).selectMany(function (c) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, pot, c);
                    }).toList(System.Collections.Generic.List$1(System.Int32));
                this._possibleListIndices = System.Linq.Enumerable.range(0, this._possibleLists.Count).toList(System.Int32);
            },
            AddFigure: function (sb) {
                var figureID = System.String.concat("fig:", System.Guid.newGuid().toString());

                sb.appendLine("\\begin{figure}");
                sb.appendLine("\\centering");
                sb.appendLine(this._figureTikz);
                sb.appendLine(System.String.concat("\\caption{Vertices are ordered as labeled.}\\label{", figureID, "}"));
                sb.appendLine("\\end{figure}");

                sb.appendLine("\\begin{lem}");
                if (this._isWin) {
                    sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is reducible."));
                } else {
                    sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is not reducible."));
                }
                sb.appendLine("\\end{lem}");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder, {
        f1: function (c) {
            return !c.BreakerWin;
        },
        f2: function (b) {
            return b.ToListStringInLexOrder$1(this._maxPot);
        },
        f3: function (tup) {
            return tup.item2;
        },
        f4: function (b) {
            return System.Linq.Enumerable.from(System.Array.init([b], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f3));
        },
        f5: function (ti) {
            return ti.SwapVertices.Count;
        },
        f6: function (b) {
            return System.Linq.Enumerable.from(this.Mind.GetWinTreeInfo(b)).max($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f5);
        },
        f7: function (ss) {
            return ss.SwapVertices.getItem(0);
        },
        f8: function (gg) {
            return gg.key();
        },
        f9: function (ppp) {
            return System.String.concat("$", ppp.item1, "\\Rightarrow ", ppp.item2.ToListStringInLexOrder$1(this._maxPot), "$");
        },
        f10: function (ss) {
            return ss.SwapVertices;
        },
        f11: function (bc) {
            return bc.SwapVertices.Count === 1;
        },
        f12: function (bc) {
            return bc.SwapVertices.Count > 1;
        },
        f13: function (c) {
            return System.Int32.parse(String.fromCharCode(c));
        },
        f14: function (s) {
            return System.Linq.Enumerable.from(System.String.toCharArray(s, 0, s.length)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f13).toList(System.Int32);
        },
        f15: function (b) {
            return this.ToListIndices(b);
        },
        f16: function (ll) {
            return System.Linq.Enumerable.from(ll).toList(System.Int32);
        },
        f17: function (_, i) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.ToTex(_, this._possibleLists, this._activeListSizes.getItem(i));
        },
        f18: function (gg) {
            return System.String.concat("$", Bridge.toArray(System.Linq.Enumerable.from(gg).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f17))).join("|"), "$");
        },
        f19: function (x) {
            return x;
        },
        f20: function (s) {
            return System.String.concat("$", s, "$");
        },
        f21: function (l) {
            return Algorithms.Int64Usage.ToSet(l);
        },
        f22: function (s) {
            return s.Count < this._maxPot;
        },
        f23: function (s) {
            return Algorithms.GenericExtensions.FirstIndex(System.Collections.Generic.List$1(System.Int32), this._possibleLists, function (ss) {
                return System.Linq.Enumerable.from(ss).sequenceEqual(s);
            });
        },
        f24: function (s) {
            return s.Count;
        },
        f25: function (c) {
            return c < this._maxPot;
        },
        f26: function (c) {
            return c;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder],
        fields: {
            _figureTikz: null
        },
        ctors: {
            ctor: function (mind, figureTikz) {
                if (figureTikz === void 0) { figureTikz = ""; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.ctor.call(this, mind);
                this._figureTikz = figureTikz;
            }
        },
        methods: {
            WriteProof: function () {
                var $t, $t1, $t2, $t3, $t4;
                var length = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(this.Mind.ColorableBoards.getItem(0)).length;
                var allBoards = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this.Mind.ColorableBoards, this.Mind.NonColorableBoards)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                var comparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(System.Int32))();
                var sg = new (Algorithms.Utility.SequenceGeneralizer$1(System.Int32))(length, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f1(new (System.Collections.Generic.List$1(System.Int32))()));

                var zot2 = System.Linq.Enumerable.from(allBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                var examples2 = System.Linq.Enumerable.from(allBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));

                var nonExamples2 = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Int32, System.Linq.Enumerable.repeat(System.Linq.Enumerable.range(0, 3), length))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f3).except(System.Linq.Enumerable.from(zot2).distinct(comparer), comparer).toList(System.Collections.Generic.List$1(System.Int32));

                var generalized2 = sg.Generalize(examples2, nonExamples2, false);
                var allBoardsXYZ = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized2).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f5), "or");

                var sb = new System.Text.StringBuilder();
                var figureID = System.String.concat("fig:", System.Guid.newGuid().toString());

                sb.appendLine("\\begin{figure}");
                sb.appendLine("\\centering");
                sb.appendLine(this._figureTikz);
                sb.appendLine(System.String.concat("\\caption{Solid vertices have lists of size 3 and the labeled vertices have lists of size 2.}\\label{", figureID, "}"));
                sb.appendLine("\\end{figure}");

                sb.appendLine("\\begin{lem}");
                sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is reducible."));
                sb.appendLine("\\end{lem}");

                var letters = $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f6(new (System.Collections.Generic.List$1(System.String))());
                var stringLength = System.Linq.Enumerable.from(this.Mind.ColorableBoards.getItem(0).Stacks.Value).count($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f7);
                var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                var randomString = "";
                for (var i = 0; i < stringLength; i = (i + 1) | 0) {
                    randomString = System.String.concat(randomString, letters.getItem(rng.next$1(3)));
                }

                var randomString2 = "";
                for (var i1 = 0; i1 < stringLength; i1 = (i1 + 1) | 0) {
                    randomString2 = System.String.concat(randomString2, letters.getItem(rng.next$1(3)));
                }

                var randomString3 = "";
                for (var i2 = 0; i2 < stringLength; i2 = (i2 + 1) | 0) {
                    randomString3 = System.String.concat(randomString3, letters.getItem(rng.next$1(3)));
                }

                sb.append("\\begin{proof}");
                sb.appendLine(System.String.concat("Let $X = \\{0,1\\}$, $Y = \\{0,2\\}$ and $Z = \\{1,2\\}$. Then with the vertex ordering in Figure \\ref{", figureID, "}, a string such as ", randomString, ", "));
                sb.appendLine("represents a possible list assignment on $V(H)$ arising from a $3$-edge-coloring of $G-E(H)$.");
                sb.appendLine("By an $X$-Kempe change, we mean flipping colors $0$ and $1$ on a two-colored path in $G-E(H)$.  We call such a path an $X$-path. ");
                sb.appendLine("Any endpoint of an $X$-path in $H$ must end at a $Y$ or $Z$ vertex.  The meanings of $Y$-Kempe change, $Z$-Kempe change, $Y$-path and $Z$-path are analogous.");
                sb.appendLine("Note that if there are an odd number of $Y$'s and $Z$'s, then at least one $X$-path has only one endpoint in $H$.");
                sb.appendLine(System.String.concat("We use shorthand notation like $\\K_{X, 2}(", randomString, ",5,6) \\Rightarrow ", randomString2, ",", randomString3, "$ (Case 1)."));
                sb.appendLine(System.String.concat("This means the $X$-Kempe change on ", randomString, " starting at the second vertex and ending at the fifth and sixth result in boards ", randomString2, " and ", randomString3, " respectively and these are handled by Case 1."));
                sb.appendLine("The $\\infty$ symbol means starting (or ending) outside $H$.");
                sb.appendLine();

                if (this.Mind.OnlyConsiderNearlyColorableBoards) {
                    sb.appendLine(System.String.concat("We need to handle all boards that are nearly colorable for edge $e$ up to permutations of $\\{X,Y,Z\\}$, so it will suffice to handle all boards of the form ", allBoardsXYZ, "."));
                } else {
                    sb.appendLine(System.String.concat("We need to handle all boards up to permutations of $\\{X,Y,Z\\}$, so it will suffice to handle all boards of the form ", allBoardsXYZ, "."));
                }

                sb.appendLine();
                var wonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                for (var caseNumber = 1; caseNumber <= this.Cases.Count; caseNumber = (caseNumber + 1) | 0) {
                    var c = this.Cases.getItem(((caseNumber - 1) | 0));

                    var boards = c.Boards;
                    var thisClaimBoards;
                    if (caseNumber > 1) {
                        thisClaimBoards = System.Linq.Enumerable.from(boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f9)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    } else {
                        thisClaimBoards = boards;
                    }

                    wonBoards.addRange(thisClaimBoards);

                    var zot = System.Linq.Enumerable.from(thisClaimBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                    var examples = System.Linq.Enumerable.from(thisClaimBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                    var nonExamples = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Int32, System.Linq.Enumerable.repeat(System.Linq.Enumerable.range(0, 3), length))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f3).except(System.Linq.Enumerable.from(zot).distinct(comparer), comparer).toList(System.Collections.Generic.List$1(System.Int32));

                    var generalized = sg.Generalize(examples, nonExamples);
                    var boardsXYZ = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f5), "or");

                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    sb.appendLine(System.String.format(System.String.concat("\\case{{{0}}}{{$B$ is one of ", boardsXYZ, ".}}"), Bridge.box(caseNumber, System.Int32)));
                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    if (caseNumber === 1) {
                        sb.appendLine();
                        sb.appendLine("In all these cases, $H$ is immediately colorable from the lists.");
                    } else {
                        sb.appendLine();
                        var fixGroups = System.Linq.Enumerable.from(boards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f10));

                        $t = Bridge.getEnumerator(fixGroups);
                        try {
                            while ($t.moveNext()) {
                                var fixGroup = $t.Current;
                                var others = System.Linq.Enumerable.from(letters).toList(System.String);
                                others.remove(fixGroup.key());

                                var swapCountGroups = fixGroup.groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f12)).toList(System.Linq.Grouping$2);
                                $t1 = Bridge.getEnumerator(swapCountGroups);
                                try {
                                    while ($t1.moveNext()) {
                                        var swapCountGroup = $t1.Current;
                                        if (swapCountGroup.key() === 1) {
                                            $t2 = Bridge.getEnumerator(swapCountGroup);
                                            try {
                                                while ($t2.moveNext()) {
                                                    var b = $t2.Current;
                                                    var treeInfo = this.Mind.GetWinTreeInfo(b);
                                                    var groups = System.Linq.Enumerable.from(treeInfo).groupBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f13);

                                                    sb.append(System.String.concat("$\\K_{", fixGroup.key(), ",\\infty}(", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(b), ",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f14).select(function (gg) {
                                                        return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(gg.key(), b) + 1) | 0);
                                                    }), null), ")"));
                                                    sb.appendLine(System.String.concat("\\Rightarrow $", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f14).select(Bridge.fn.bind(this, function (gg) {
                                                        return System.String.concat("$", this.GetChildBoardName(b, gg.first()), "$");
                                                    })), null), "( Case ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(treeInfo).select(Bridge.fn.bind(this, function (bc) {
                                                            return this.GetHandledCaseNumber(b, bc);
                                                        })).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f15)), ")."));
                                                    sb.appendLine();

                                                    if (this._permutationLinked.get(b).Count > 0) {
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                        sb.appendLine(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f16)));
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }} else if (swapCountGroup.key() === 2) {
                                            $t3 = Bridge.getEnumerator(swapCountGroup);
                                            try {
                                                while ($t3.moveNext()) {
                                                    var b1 = $t3.Current;
                                                    var treeInfo1 = this.Mind.GetWinTreeInfo(b1);
                                                    var leftover = { v : System.Linq.Enumerable.from(treeInfo1).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo) };

                                                    while (leftover.v.Count > 0) {
                                                        var commonestSwapper = { v : Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.MaxIndex(System.Int32, System.Linq.Enumerable.range(0, b1._stackCount), (function ($me, leftover) {
                                                            return function (v) {
                                                                return System.Linq.Enumerable.from(leftover.v).count(function (bc) {
                                                                        return bc.SwapVertices.contains(v);
                                                                    });
                                                            };
                                                        })(this, leftover)) };
                                                        var handledAll = System.Linq.Enumerable.from(leftover.v).where((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.contains(commonestSwapper.v);
                                                                };
                                                            })(this, commonestSwapper)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);
                                                        var handled = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Distinct(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo, System.Int32, handledAll, (function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper))).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);

                                                        sb.append(System.String.concat("$\\K_{", fixGroup.key(), ",", (((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(commonestSwapper.v, b1) + 1) | 0)), "}(", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(b1)));

                                                        var single = System.Linq.Enumerable.from(handled).firstOrDefault($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f17, null);
                                                        if (single != null) {
                                                            sb.append(",\\infty");
                                                        }

                                                        if (System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f18).count() > 0) {
                                                            sb.append(System.String.concat(",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f18).orderBy((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper)).select((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first(), b1) + 1) | 0);
                                                                };
                                                            })(this, commonestSwapper)), null)));
                                                        }
                                                        sb.append(")");

                                                        sb.appendLine(System.String.concat("\\Rightarrow $", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(handled).orderBy((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper)).select(Bridge.fn.bind(this, function (bc) {
                                                            return System.String.concat("$", this.GetChildBoardName(b1, bc), "$");
                                                        })), null), "(Case ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).select(Bridge.fn.bind(this, function (bc) {
                                                                return this.GetHandledCaseNumber(b1, bc);
                                                            })).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f15)), ")."));
                                                        sb.appendLine();

                                                        $t4 = Bridge.getEnumerator(handledAll);
                                                        try {
                                                            while ($t4.moveNext()) {
                                                                var bc = $t4.Current;
                                                                leftover.v.remove(bc);
                                                            }
                                                        } finally {
                                                            if (Bridge.is($t4, System.IDisposable)) {
                                                                $t4.System$IDisposable$dispose();
                                                            }
                                                        }}

                                                    if (this._permutationLinked.get(b1).Count > 0) {
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                        sb.appendLine(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b1)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f16)));
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t3, System.IDisposable)) {
                                                    $t3.System$IDisposable$dispose();
                                                }
                                            }}
                                    }
                                } finally {
                                    if (Bridge.is($t1, System.IDisposable)) {
                                        $t1.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    sb.appendLine();
                }

                sb.appendLine("\\end{proof}");
                return sb.toString();
            },
            GetChildBoardName: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(childBoard);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder, {
        f1: function (_o7) {
            _o7.add(0);
            _o7.add(1);
            _o7.add(2);
            return _o7;
        },
        f2: function (b) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.To012(b);
        },
        f3: function (ll) {
            return System.Linq.Enumerable.from(ll).toList(System.Int32);
        },
        f4: function (_) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToTex(_);
        },
        f5: function (gg) {
            return System.String.concat("$", Bridge.toArray(System.Linq.Enumerable.from(gg).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f4)).join(""), "$");
        },
        f6: function (_o8) {
            _o8.add("X");
            _o8.add("Y");
            _o8.add("Z");
            return _o8;
        },
        f7: function (ss) {
            return Algorithms.Int64Usage.PopulationCount(ss) === 2;
        },
        f8: function (tup) {
            return tup.item2;
        },
        f9: function (b) {
            return System.Linq.Enumerable.from(System.Array.init([b], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f8));
        },
        f10: function (b) {
            var treeInfo = this.Mind.GetWinTreeInfo(b);
            var fixLetter = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1(System.Int64((1 << System.Linq.Enumerable.from(treeInfo).first().Alpha) | (1 << System.Linq.Enumerable.from(treeInfo).first().Beta)));

            return fixLetter;
        },
        f11: function (ti) {
            return ti.SwapVertices.Count;
        },
        f12: function (b) {
            return System.Linq.Enumerable.from(this.Mind.GetWinTreeInfo(b)).max($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f11);
        },
        f13: function (ss) {
            return ss.SwapVertices.getItem(0);
        },
        f14: function (gg) {
            return gg.key();
        },
        f15: function (xx) {
            return xx;
        },
        f16: function (ppp) {
            return System.String.concat("$", ppp.item1, "\\Rightarrow ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(ppp.item2), "$");
        },
        f17: function (bc) {
            return bc.SwapVertices.Count === 1;
        },
        f18: function (bc) {
            return bc.SwapVertices.Count > 1;
        }
    });

    Bridge.define("Test.TabCanvas", {
        inherits: [GraphicsLayer.ICanvas],
        statics: {
            methods: {
                ExtractPoints: function (x) {
                    return new (Bridge.GeneratorEnumerable$1(Graphs.Vector))(Bridge.fn.bind(this, function (x) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            j,
                            p,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Graphs.Vector))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 0;
                                                
                                            $step = 1;
                                            continue;
                                        }
                                        case 1: {
                                            if ( true ) {
                                                    $step = 2;
                                                    continue;
                                                } 
                                                $step = 4;
                                                continue;
                                        }
                                        case 2: {
                                            j = System.String.indexOf(x, "[", i);
                                                if (j < 0) {
                                                    j = System.String.indexOf(x, "(", i);
                                                    if (j < 0) {
                                                        $step = 4;
                                                        continue;
                                                    }
                                                }
                                                i = j;

                                                j = System.String.indexOf(x, "]", i);
                                                if (j < 0) {
                                                    j = System.String.indexOf(x, ")", i);
                                                    if (j < 0) {
                                                        $step = 4;
                                                        continue;
                                                    }
                                                }
                                                p = System.String.split(x.substr(i, ((j - i) | 0)), [44].map(function(i) {{ return String.fromCharCode(i); }}));
                                                $enumerator.current = new Graphs.Vector(System.Double.parse(System.String.trim(p[System.Array.index(0, p)], [91, 93, 40, 41])), System.Double.parse(System.String.trim(p[System.Array.index(1, p)], [91, 93, 40, 41])));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            i = j;

                                                $step = 1;
                                                continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                ParseAdjacencyMatrix: function (a) {
                    var $t;
                    var bits = System.String.split(System.String.replaceAll(a, "'", ""), System.Array.init([",", "\\\\n", "[", "]", " "], System.String), null, 1);
                    var n = Bridge.Int.clip32(Math.sqrt(bits.length));
                    var adj = System.Array.create(false, null, System.Boolean, n, n);

                    var i = 0;
                    $t = Bridge.getEnumerator(bits);
                    try {
                        while ($t.moveNext()) {
                            var b = $t.Current;
                            adj.set([((Bridge.Int.div(i, n)) | 0), i % n], Bridge.referenceEquals(b, "1"));
                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return adj;
                }
            }
        },
        fields: {
            _ctrlDown: false,
            _title: null
        },
        events: {
            MouseMoved: null,
            MouseButtonUp: null,
            MouseButtonDown: null,
            MouseButtonDoubleClicked: null
        },
        props: {
            Canvas: null,
            GraphCanvas: null,
            IsControlKeyDown: {
                get: function () {
                    return this._ctrlDown;
                }
            },
            SelectedObjects: {
                set: function (value) { }
            },
            Title: {
                get: function () {
                    return this._title;
                },
                set: function (value) {
                    this._title = value;
                    this.Invalidate();
                }
            }
        },
        alias: [
            "SetClipboardText", "GraphicsLayer$ICanvas$SetClipboardText",
            "GetClipboardText", "GraphicsLayer$ICanvas$GetClipboardText",
            "IsControlKeyDown", "GraphicsLayer$ICanvas$IsControlKeyDown",
            "SelectedObjects", "GraphicsLayer$ICanvas$SelectedObjects",
            "Invalidate", "GraphicsLayer$ICanvas$Invalidate",
            "Title", "GraphicsLayer$ICanvas$Title",
            "addMouseMoved", "GraphicsLayer$IProduceMouseEvents$addMouseMoved",
            "removeMouseMoved", "GraphicsLayer$IProduceMouseEvents$removeMouseMoved",
            "addMouseButtonUp", "GraphicsLayer$IProduceMouseEvents$addMouseButtonUp",
            "removeMouseButtonUp", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonUp",
            "addMouseButtonDown", "GraphicsLayer$IProduceMouseEvents$addMouseButtonDown",
            "removeMouseButtonDown", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonDown",
            "addMouseButtonDoubleClicked", "GraphicsLayer$IProduceMouseEvents$addMouseButtonDoubleClicked",
            "removeMouseButtonDoubleClicked", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonDoubleClicked"
        ],
        ctors: {
            ctor: function (canvas, graphCanvas) {
                this.$initialize();
                this.GraphCanvas = graphCanvas;
                this.Canvas = canvas;
                this.GraphCanvas.Canvas = this;

                this.Canvas.ondblclick = Bridge.fn.combine(this.Canvas.ondblclick, Bridge.fn.cacheBind(this, this.OnMouseDoubleClick));
                this.Canvas.onmousedown = Bridge.fn.combine(this.Canvas.onmousedown, Bridge.fn.cacheBind(this, this.OnMouseButtonDown));
                this.Canvas.onmouseup = Bridge.fn.combine(this.Canvas.onmouseup, Bridge.fn.cacheBind(this, this.OnMouseButtonUp));
                this.Canvas.onmousemove = Bridge.fn.combine(this.Canvas.onmousemove, Bridge.fn.cacheBind(this, this.OnMouseMove));

                this.Canvas.onload = Bridge.fn.cacheBind(this, this.OnLoad);

                this.GraphCanvas.addGraphModified(Bridge.fn.cacheBind(this, this.OnGraphModified));
                this.GraphCanvas.addNameModified(Bridge.fn.cacheBind(this, this.OnNameModified));
            }
        },
        methods: {
            OnNameModified: function (name) {
                this.Title = name;
            },
            SageManual: function () {
                Test.App.AskSage(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n'));
            },
            SageChromaticPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_polynomial()"));
            },
            SageGraph6: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graph6_string()"));
            },
            SageSparse6: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.sparse6_string()"));
            },
            SageChromaticNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_number()"));
            },
            SageChromaticQuasisymmetricFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_quasisymmetric_function()"));
            },
            SageChromaticSymmetricFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_symmetric_function()"));
            },
            SageColoring: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.coloring()"));
            },
            SageConvexityProperties: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.convexity_properties()"));
            },
            SageHasHomomorphismTo: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_homomorphism_to()"));
            },
            SageIndependentSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.independent_set()"));
            },
            SageIndependentSetOfRepresentatives: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.independent_set_of_representatives()"));
            },
            SageIsPerfect: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_perfect()"));
            },
            SageMatchingPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.matching_polynomial()"));
            },
            SageMinor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.minor()"));
            },
            SagePathwidth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.pathwidth()"));
            },
            SageRankDecomposition: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.rank_decomposition()"));
            },
            SageTopologicalMinor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.topological_minor()"));
            },
            SageTreewidth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.treewidth()"));
            },
            SageTuttePolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.tutte_polynomial()"));
            },
            SageVertexCover: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_cover()"));
            },
            SageBipartiteColor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bipartite_color()"));
            },
            SageBipartiteSets: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bipartite_sets()"));
            },
            SageGraph6String: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graph6_string()"));
            },
            SageIsDirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_directed()"));
            },
            SageJoin: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.join()"));
            },
            SageSparse6String: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.sparse6_string()"));
            },
            SageToDirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_directed()"));
            },
            SageToUndirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_undirected()"));
            },
            SageWriteToEps: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.write_to_eps()"));
            },
            SageCliqueComplex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_complex()"));
            },
            SageCliqueMaximum: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_maximum()"));
            },
            SageCliqueNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_number()"));
            },
            SageCliquePolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_polynomial()"));
            },
            SageCliquesContainingVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_containing_vertex()"));
            },
            SageCliquesGetCliqueBipartite: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_get_clique_bipartite()"));
            },
            SageCliquesGetMaxCliqueGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_get_max_clique_graph()"));
            },
            SageCliquesMaximal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_maximal()"));
            },
            SageCliquesMaximum: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_maximum()"));
            },
            SageCliquesNumberOf: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_number_of()"));
            },
            SageCliquesVertexCliqueNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_vertex_clique_number()"));
            },
            SageBoundedOutdegreeOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bounded_outdegree_orientation()"));
            },
            SageBridges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bridges()"));
            },
            SageDegreeConstrainedSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_constrained_subgraph()"));
            },
            SageGomoryHuTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.gomory_hu_tree()"));
            },
            SageMinimumOutdegreeOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.minimum_outdegree_orientation()"));
            },
            SageOrientations: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.orientations()"));
            },
            SageRandomSpanningTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_spanning_tree()"));
            },
            SageSpanningTrees: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spanning_trees()"));
            },
            SageStrongOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.strong_orientation()"));
            },
            SageApexVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.apex_vertices()"));
            },
            SageIsApex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_apex()"));
            },
            SageIsArcTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_arc_transitive()"));
            },
            SageIsAsteroidalTripleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_asteroidal_triple_free()"));
            },
            SageIsBiconnected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_biconnected()"));
            },
            SageIsBipartite: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_bipartite()"));
            },
            SageIsBlockGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_block_graph()"));
            },
            SageIsCartesianProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cartesian_product()"));
            },
            SageIsDistanceRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_distance_regular()"));
            },
            SageIsEdgeTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_edge_transitive()"));
            },
            SageIsEvenHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_even_hole_free()"));
            },
            SageIsForest: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_forest()"));
            },
            SageIsHalfTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_half_transitive()"));
            },
            SageIsLineGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_line_graph()"));
            },
            SageIsLongAntiholeFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_long_antihole_free()"));
            },
            SageIsLongHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_long_hole_free()"));
            },
            SageIsOddHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_odd_hole_free()"));
            },
            SageIsOverfull: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_overfull()"));
            },
            SageIsPartialCube: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_partial_cube()"));
            },
            SageIsPrime: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_prime()"));
            },
            SageIsSemiSymmetric: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_semi_symmetric()"));
            },
            SageIsSplit: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_split()"));
            },
            SageIsStronglyRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_strongly_regular()"));
            },
            SageIsTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_tree()"));
            },
            SageIsTriangleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_triangle_free()"));
            },
            SageIsWeaklyChordal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_weakly_chordal()"));
            },
            SageOddGirth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.odd_girth()"));
            },
            SageCores: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cores()"));
            },
            SageFractionalChromaticIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.fractional_chromatic_index()"));
            },
            SageHasPerfectMatching: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_perfect_matching()"));
            },
            SageIharaZetaFunctionInverse: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.ihara_zeta_function_inverse()"));
            },
            SageKirchhoffSymanzikPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.kirchhoff_symanzik_polynomial()"));
            },
            SageLovaszTheta: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lovasz_theta()"));
            },
            SageMagnitudeFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.magnitude_function()"));
            },
            SageMatching: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.matching()"));
            },
            SageMaximumAverageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.maximum_average_degree()"));
            },
            SageModularDecomposition: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.modular_decomposition()"));
            },
            SagePerfectMatchings: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.perfect_matchings()"));
            },
            SageSeidelAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.seidel_adjacency_matrix()"));
            },
            SageNetworkxGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.networkx_graph()"));
            },
            SageIgraphGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.igraph_graph()"));
            },
            SageToDictionary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_dictionary()"));
            },
            SageCopy: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.copy()"));
            },
            SageExportToFile: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.export_to_file()"));
            },
            SageAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.adjacency_matrix()"));
            },
            SageIncidenceMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.incidence_matrix()"));
            },
            SageDistanceMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_matrix()"));
            },
            SageWeightedAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.weighted_adjacency_matrix()"));
            },
            SageKirchhoffMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.kirchhoff_matrix()"));
            },
            SageHasLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_loops()"));
            },
            SageAllowsLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allows_loops()"));
            },
            SageAllowLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allow_loops()"));
            },
            SageLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loops()"));
            },
            SageLoopEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loop_edges()"));
            },
            SageNumberOfLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.number_of_loops()"));
            },
            SageLoopVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loop_vertices()"));
            },
            SageRemoveLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.remove_loops()"));
            },
            SageHasMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_multiple_edges()"));
            },
            SageAllowsMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allows_multiple_edges()"));
            },
            SageAllowMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allow_multiple_edges()"));
            },
            SageMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multiple_edges()"));
            },
            SageName: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.name()"));
            },
            SageIsImmutable: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_immutable()"));
            },
            SageWeighted: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.weighted()"));
            },
            SageAntisymmetric: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.antisymmetric()"));
            },
            SageDensity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.density()"));
            },
            SageOrder: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.order()"));
            },
            SageSize: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.size()"));
            },
            SageAddVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_vertex()"));
            },
            SageAddVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_vertices()"));
            },
            SageDeleteVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_vertex()"));
            },
            SageDeleteVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_vertices()"));
            },
            SageHasVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_vertex()"));
            },
            SageRandomVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_vertex()"));
            },
            SageRandomVertexIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_vertex_iterator()"));
            },
            SageRandomEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_edge()"));
            },
            SageRandomEdgeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_edge_iterator()"));
            },
            SageVertexBoundary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_boundary()"));
            },
            SageSetVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_vertices()"));
            },
            SageSetVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_vertex()"));
            },
            SageGetVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_vertex()"));
            },
            SageGetVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_vertices()"));
            },
            SageVertexIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_iterator()"));
            },
            SageNeighborIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.neighbor_iterator()"));
            },
            SageVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertices()"));
            },
            SageNeighbors: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.neighbors()"));
            },
            SageMergeVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.merge_vertices()"));
            },
            SageAddEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_edge()"));
            },
            SageAddEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_edges()"));
            },
            SageSubdivideEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subdivide_edge()"));
            },
            SageSubdivideEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subdivide_edges()"));
            },
            SageDeleteEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_edge()"));
            },
            SageDeleteEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_edges()"));
            },
            SageDeleteMultiedge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_multiedge()"));
            },
            SageSetEdgeLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_edge_label()"));
            },
            SageHasEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_edge()"));
            },
            SageEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edges()"));
            },
            SageEdgeBoundary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_boundary()"));
            },
            SageEdgeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_iterator()"));
            },
            SageEdgesIncident: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edges_incident()"));
            },
            SageEdgeLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_label()"));
            },
            SageEdgeLabels: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_labels()"));
            },
            SageRemoveMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.remove_multiple_edges()"));
            },
            SageClear: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clear()"));
            },
            SageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree()"));
            },
            SageAverageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.average_degree()"));
            },
            SageDegreeHistogram: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_histogram()"));
            },
            SageDegreeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_iterator()"));
            },
            SageDegreeSequence: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_sequence()"));
            },
            SageRandomSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_subgraph()"));
            },
            SageAddClique: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_clique()"));
            },
            SageAddCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_cycle()"));
            },
            SageAddPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_path()"));
            },
            SageComplement: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.complement()"));
            },
            SageLineGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.line_graph()"));
            },
            SageToSimple: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_simple()"));
            },
            SageDisjointUnion: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjoint_union()"));
            },
            SageUnion: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.union()"));
            },
            SageRelabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.relabel()"));
            },
            SageDegreeToCell: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_to_cell()"));
            },
            SageSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph()"));
            },
            SageIsSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_subgraph()"));
            },
            SageCartesianProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cartesian_product()"));
            },
            SageTensorProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.tensor_product()"));
            },
            SageLexicographicProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lexicographic_product()"));
            },
            SageStrongProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.strong_product()"));
            },
            SageDisjunctiveProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjunctive_product()"));
            },
            SageEulerianOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eulerian_orientation()"));
            },
            SageEulerianCircuit: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eulerian_circuit()"));
            },
            SageCycleBasis: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cycle_basis()"));
            },
            SageAllPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.all_paths()"));
            },
            SageTrianglesCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.triangles_count()"));
            },
            SageSpectrum: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spectrum()"));
            },
            SageEigenvectors: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eigenvectors()"));
            },
            SageEigenspaces: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eigenspaces()"));
            },
            SageClusterTriangles: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cluster_triangles()"));
            },
            SageClusteringAverage: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clustering_average()"));
            },
            SageClusteringCoeff: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clustering_coeff()"));
            },
            SageClusterTransitivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cluster_transitivity()"));
            },
            SageSzegedIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.szeged_index()"));
            },
            SageCoarsestEquitableRefinement: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.coarsest_equitable_refinement()"));
            },
            SageAutomorphismGroup: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.automorphism_group()"));
            },
            SageIsVertexTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_vertex_transitive()"));
            },
            SageIsIsomorphic: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_isomorphic()"));
            },
            SageCanonicalLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.canonical_label()"));
            },
            SageIsCayley: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cayley()"));
            },
            SageIsEulerian: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_eulerian()"));
            },
            SageIsPlanar: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_planar()"));
            },
            SageIsCircularPlanar: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_circular_planar()"));
            },
            SageIsRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_regular()"));
            },
            SageIsChordal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_chordal()"));
            },
            SageIsCirculant: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_circulant()"));
            },
            SageIsInterval: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_interval()"));
            },
            SageIsGallaiTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_gallai_tree()"));
            },
            SageIsClique: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_clique()"));
            },
            SageIsCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cycle()"));
            },
            SageIsIndependentSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_independent_set()"));
            },
            SageIsTransitivelyReduced: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_transitively_reduced()"));
            },
            SageIsEquitable: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_equitable()"));
            },
            SageBreadthFirstSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.breadth_first_search()"));
            },
            SageDepthFirstSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.depth_first_search()"));
            },
            SageLexBFS: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lex_BFS()"));
            },
            SageCentralityBetweenness: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.centrality_betweenness()"));
            },
            SageCentralityCloseness: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.centrality_closeness()"));
            },
            SageDistance: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance()"));
            },
            SageDistanceAllPairs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_all_pairs()"));
            },
            SageDistancesDistribution: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distances_distribution()"));
            },
            SageEccentricity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eccentricity()"));
            },
            SageRadius: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.radius()"));
            },
            SageCenter: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.center()"));
            },
            SageDiameter: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.diameter()"));
            },
            SageDistanceGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_graph()"));
            },
            SageGirth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.girth()"));
            },
            SagePeriphery: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.periphery()"));
            },
            SageShortestPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path()"));
            },
            SageShortestPathLength: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_length()"));
            },
            SageShortestPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_paths()"));
            },
            SageShortestPathLengths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_lengths()"));
            },
            SageShortestPathAllPairs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_all_pairs()"));
            },
            SageWienerIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.wiener_index()"));
            },
            SageAverageDistance: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.average_distance()"));
            },
            SageIsConnected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_connected()"));
            },
            SageConnectedComponents: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components()"));
            },
            SageConnectedComponentsNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_number()"));
            },
            SageConnectedComponentsSubgraphs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_subgraphs()"));
            },
            SageConnectedComponentContainingVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_component_containing_vertex()"));
            },
            SageConnectedComponentsSizes: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_sizes()"));
            },
            SageBlocksAndCutVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.blocks_and_cut_vertices()"));
            },
            SageBlocksAndCutsTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.blocks_and_cuts_tree()"));
            },
            SageIsCutEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cut_edge()"));
            },
            SageIsCutVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cut_vertex()"));
            },
            SageEdgeCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_cut()"));
            },
            SageVertexCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_cut()"));
            },
            SageFlow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.flow()"));
            },
            SageEdgeDisjointPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_disjoint_paths()"));
            },
            SageVertexDisjointPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_disjoint_paths()"));
            },
            SageEdgeConnectivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_connectivity()"));
            },
            SageVertexConnectivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_connectivity()"));
            },
            SageTransitiveClosure: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.transitive_closure()"));
            },
            SageTransitiveReduction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.transitive_reduction()"));
            },
            SageMinSpanningTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.min_spanning_tree()"));
            },
            SageSpanningTreesCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spanning_trees_count()"));
            },
            SageDominatorTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.dominator_tree()"));
            },
            SageSetEmbedding: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_embedding()"));
            },
            SageGetEmbedding: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_embedding()"));
            },
            SageFaces: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.faces()"));
            },
            SageGetPos: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_pos()"));
            },
            SageSetPos: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_pos()"));
            },
            SageSetPlanarPositions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_planar_positions()"));
            },
            SageIsDrawnFreeOfEdgeCrossings: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_drawn_free_of_edge_crossings()"));
            },
            SageLatexOptions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.latex_options()"));
            },
            SageSetLatexOptions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_latex_options()"));
            },
            SageLayout: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.layout()"));
            },
            SageGraphplot: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphplot()"));
            },
            SagePlot: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.plot()"));
            },
            SageShow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.show()"));
            },
            SagePlot3d: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.plot3d()"));
            },
            SageShow3d: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.show3d()"));
            },
            SageGraphvizString: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphviz_string()"));
            },
            SageGraphvizToFileNamed: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphviz_to_file_named()"));
            },
            SageSteinerTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.steiner_tree()"));
            },
            SageEdgeDisjointSpanningTrees: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_disjoint_spanning_trees()"));
            },
            SageFeedbackVertexSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.feedback_vertex_set()"));
            },
            SageMultiwayCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multiway_cut()"));
            },
            SageMaxCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.max_cut()"));
            },
            SageLongestPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.longest_path()"));
            },
            SageTravelingSalesmanProblem: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.traveling_salesman_problem()"));
            },
            SageIsHamiltonian: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_hamiltonian()"));
            },
            SageHamiltonianCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.hamiltonian_cycle()"));
            },
            SageHamiltonianPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.hamiltonian_path()"));
            },
            SageMulticommodityFlow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multicommodity_flow()"));
            },
            SageDisjointRoutedPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjoint_routed_paths()"));
            },
            SageDominatingSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.dominating_set()"));
            },
            SageSubgraphSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search()"));
            },
            SageSubgraphSearchCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search_count()"));
            },
            SageSubgraphSearchIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search_iterator()"));
            },
            SageCharacteristicPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.characteristic_polynomial()"));
            },
            SageGenus: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.genus()"));
            },
            SageLayoutSpring: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_spring()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutRanked: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_ranked()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutExtendRandomly: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_extend_randomly()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutCircular: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_circular()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutTree: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_tree()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutGraphviz: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_graphviz()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutPlanar: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_planar()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLoadNamedGraph: function (name) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $jumpFromFinally, 
                    a, 
                    layout, 
                    positions, 
                    adj, 
                    g, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync$1(System.String.concat("G = graphs.", name, "()", '\n', "G.adjacency_matrix().str()"));
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    a = $taskResult1;
                                    $task2 = Test.App.AskSageAsync$1(System.String.concat("G = graphs.", name, "()", '\n', "G.layout()"));
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $taskResult2 = $task2.getAwaitedResult();
                                    layout = $taskResult2;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    adj = Test.TabCanvas.ParseAdjacencyMatrix(a);

                                    g = new Algorithms.Graph.ctor(adj);

                                    Test.App.NewTab(name, new Graphs.Graph.$ctor1(g, positions, false));
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            Scale: function (positions) {
                var l = System.Linq.Enumerable.from(positions).toList(Graphs.Vector);
                var minX = System.Linq.Enumerable.from(l).min($asm.$.Test.TabCanvas.f1);
                var minY = System.Linq.Enumerable.from(l).min($asm.$.Test.TabCanvas.f2);
                var maxX = System.Linq.Enumerable.from(l).max($asm.$.Test.TabCanvas.f1);
                var maxY = System.Linq.Enumerable.from(l).max($asm.$.Test.TabCanvas.f2);

                var w = maxX - minX;
                var h = maxY - minY;

                return System.Linq.Enumerable.from(positions).select(function (p) {
                        return new Graphs.Vector(0.1 + 0.8 * (p.X - minX) / w, 0.1 + 0.8 * (p.Y - minY) / h);
                    }).toList(Graphs.Vector);
            },
            LayoutGraph: function (positions) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    a, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        this.SnapPositionsToGrid(positions);
                                        a = new Test.LayoutAnimation(Bridge.fn.bind(this, $asm.$.Test.TabCanvas.f3), Bridge.fn.bind(this, $asm.$.Test.TabCanvas.f4), positions, this.GraphCanvas.Graph);

                                        this.GraphCanvas.SnapToGrid = false;
                                        $task1 = a.Animate();
                                        $step = 1;
                                        $task1.continueWith($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        this.GraphCanvas.SnapToGrid = true;
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            SnapPositionsToGrid: function (positions) {
                for (var i = 0; i < positions.Count; i = (i + 1) | 0) {
                    positions.getItem(i).X = Graphs.GraphCanvas._gridStep * Bridge.Math.round(positions.getItem(i).X / Graphs.GraphCanvas._gridStep, 0, 6);
                    positions.getItem(i).Y = Graphs.GraphCanvas._gridStep * Bridge.Math.round(positions.getItem(i).Y / Graphs.GraphCanvas._gridStep, 0, 6);
                }
            },
            OnGraphModified: function (g) {
                this.Invalidate();
            },
            OnLoad: function (e) {
                this.Invalidate();
            },
            OnMouseMove: function (e) {
                this._ctrlDown = e.ctrlKey;
                if (!Bridge.staticEquals(this.MouseMoved, null)) {
                    this.MouseMoved(e.layerX, e.layerY);
                }
            },
            OnMouseButtonDown: function (e) {
                this._ctrlDown = e.ctrlKey;
                // Canvas.SetCapture(true);  // chrome does not seem to support this, what?

                if (e.shiftKey) {
                    if (!Bridge.staticEquals(this.MouseButtonDoubleClicked, null)) {
                        this.MouseButtonDoubleClicked(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                    }
                } else {
                    if (!Bridge.staticEquals(this.MouseButtonDown, null)) {
                        this.MouseButtonDown(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                    }
                }
            },
            OnMouseButtonUp: function (e) {
                this._ctrlDown = e.ctrlKey;
                // Canvas.SetCapture(false);
                if (e.shiftKey) {
                    return;
                }


                if (!Bridge.staticEquals(this.MouseButtonUp, null)) {
                    this.MouseButtonUp(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                }

                if (e.ctrlKey && e.altKey) {
                    Test.App.AskSage(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')"));
                }
            },
            OnMouseDoubleClick: function (e) { },
            SetClipboardText: function (text) { },
            GetClipboardText: function () {
                return "";
            },
            Invalidate: function () {
                var graphics = new Test.Graphics(this.Canvas);
                this.GraphCanvas.Paint(graphics, this.Canvas.width, this.Canvas.height);
            }
        }
    });

    Bridge.ns("Test.TabCanvas", $asm.$);

    Bridge.apply($asm.$.Test.TabCanvas, {
        f1: function (p) {
            return p.X;
        },
        f2: function (p) {
            return p.Y;
        },
        f3: function () {
        this.GraphCanvas.Invalidate();

    },
        f4: function () {
        this.GraphCanvas.Invalidate();
    }
    });
});

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICJUZXN0LmpzIiwKICAic291cmNlUm9vdCI6ICIiLAogICJzb3VyY2VzIjogWyJBbGdvcml0aG1zL0Fzc2lnbm1lbnRFbnVtZXJhdG9yLmNzIiwiQWxnb3JpdGhtcy9DaG9vc2FiaWxpdHlSZXN1bHQuY3MiLCJBbGdvcml0aG1zL0NvdW50aW5nLmNzIiwiQWxnb3JpdGhtcy9EYXRhU3RydWN0dXJlcy9CaWplY3Rpb24uY3MiLCJBbGdvcml0aG1zL0RhdGFTdHJ1Y3R1cmVzL1VuaW9uRmluZC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0JvYXJkLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvQ2hyb25pY2xlL0JyYW5jaEdlbmVyYXRvci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Cb2FyZEtub3dsZWRnZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9HcmFwaEtub3dsZWRnZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Lbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9UcmVlLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL01ldGFLbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvTWluZC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Qb3RLbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TbGltU3dhcEFuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU29ydGVkSW50TGlzdC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL0JvYXJkTGV4aWZpZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9IYXNoaW5nLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvUHJvb2ZzL1Byb29mQnVpbGRlci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1Byb29mcy9FeHRlbnNpb25zLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvUHJvb2ZzL1Byb29mQ2FzZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1N1cGVyU2xpbUJvYXJkLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvU3VwZXJTbGltQ29sb3JpbmdBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1N1cGVyU2xpbVN3YXBBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9UZW1wbGF0ZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9UZW1wbGF0ZUtub3dsZWRnZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL1Nsb3dCb2FyZC5jcyIsIkFsZ29yaXRobXMvR2VuZXJpY0V4dGVuc2lvbnMuY3MiLCJBbGdvcml0aG1zL0dyYXBoLmNzIiwiQWxnb3JpdGhtcy9HcmFwaHMuY3MiLCJBbGdvcml0aG1zL0hhc2hHcmFwaC5jcyIsIkFsZ29yaXRobXMvSGVyZWRpdGFyeUNsYXNzRW51bWVyYXRpb24uY3MiLCJBbGdvcml0aG1zL0h5cGVyZ3JhcGguY3MiLCJBbGdvcml0aG1zL0luZGVwZW5kZW5jZVJhdGlvL01pbm9yRmluZGVyLmNzIiwiQWxnb3JpdGhtcy9JbnQzMlVzYWdlLmNzIiwiQWxnb3JpdGhtcy9JbnQ2NFVzYWdlLmNzIiwiQWxnb3JpdGhtcy9MYXp5LmNzIiwiQWxnb3JpdGhtcy9PbmVGYWN0b3JpemF0aW9uc09mQ29tcGxldGVHcmFwaC5jcyIsIkFsZ29yaXRobXMvT25GYWN0b3JpemF0aW9uc09mQ29tcGxldGVHcmFwaC5jcyIsIkFsZ29yaXRobXMvT25saW5lQ2hvaWNlSGFzaEdyYXBoLmNzIiwiQWxnb3JpdGhtcy9PcmllbnRhdGlvbkhhc2hHcmFwaC5jcyIsIkFsZ29yaXRobXMvUG9seW5vbWlhbHMvRmFjdG9yZWRSYXRpb25hbC5jcyIsIkFsZ29yaXRobXMvUG9seW5vbWlhbHMvR3JhcGhQb2x5bm9taWFsLmNzIiwiQWxnb3JpdGhtcy9Qb2x5bm9taWFscy9Ob3JtYWxpemVyLmNzIiwiQWxnb3JpdGhtcy9Qb2x5bm9taWFscy9QcmltZU51bWJlcnMuY3MiLCJBbGdvcml0aG1zL1BvbHlub21pYWxzL1NpZ25Mb29rdXAuY3MiLCJBbGdvcml0aG1zL1N1YnNldEVudW1lcmF0b3IuY3MiLCJBbGdvcml0aG1zL1RyYW5zaXRpdmVQYXJ0aXRpb24uY3MiLCJBbGdvcml0aG1zL1VucGVybXV0ZWRBc3NpZ25tZW50RW51bWVyYXRvci5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9FcXVpdmFsZW5jZVJlbGF0aW9uLmNzIiwiQWxnb3JpdGhtcy9VdGlsaXR5L0ZhY3RvcmFkaWMuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvRmxvd3MuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvTGlucUV4dGVuc2lvbnMuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvTGlzdFV0aWxpdHkuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvUGFydGlhbE9yZGVycy5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9QZXJtdXRhdGlvbi5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9TYWZlQ29sbGVjdGlvbi5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9TZXF1ZW5jZUdlbmVyYWxpemVyLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9BY2Nlc3NpYmlsaXR5Q2hlY2tlci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvQm94aWZpY2F0aW9uLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9PcHRpbWl6ZWQvRmFzdEFjY2Vzc2liaWxpdHlDaGVja2VyLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9UYXJwaXRFbnVtZXJhdG9yLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9PcHRpbWl6ZWQvRmFzdFdvcmQuY3MiLCJBbGdvcml0aG1zL1dvcmRHYW1lL09wdGltaXplZC9GYXN0V29yZEdlbmVyYXRvci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvV29yZEVudW1lcmF0b3IuY3MiLCJCaXRMZXZlbEdlbmVyYXRpb24vQXNzaWdubWVudHNfdHlwZS5jcyIsIkJpdExldmVsR2VuZXJhdGlvbi9CaXRPcGVyYXRpb25zLmNzIiwiQml0TGV2ZWxHZW5lcmF0aW9uL0JpdFZlY3RvcnMuY3MiLCJCaXRMZXZlbEdlbmVyYXRpb24vR3JhcGhDaG9vc2FiaWxpdHkuY3MiLCJCaXRMZXZlbEdlbmVyYXRpb24vSGFzaGVkQXNzaWdubWVudC5jcyIsIkJpdExldmVsR2VuZXJhdGlvbi9NYXhpbWFsbmRlcGVuZGVudFNldFNlYXJjaGluZy5jcyIsIkdyYXBoaWNzTGF5ZXIvQVJHQi5jcyIsIkdyYXBoaWNzTGF5ZXIvQm94LmNzIiwiR3JhcGhpY3NMYXllci9Gb250LmNzIiwiR3JhcGhzQ29yZS9Bc2NpaTg1LmNzIiwiR3JhcGhzQ29yZS9Qb2x5Z29uQ29udGFpbmVyLmNzIiwiR3JhcGhzQ29yZS9TZXJpYWxpemF0aW9uQ2xhc3Nlcy5jcyIsIkdyYXBoc0NvcmUvVXRpbGl0eS5jcyIsIkdyYXBoc0NvcmUvVmVjdG9yLmNzIiwiR3JhcGhzQ29yZS9Db21wYWN0U2VyaWFsaXplci5jcyIsIkdyYXBoc0NvcmUvR3JhcGhJTy5jcyIsIkdyYXBoc0NvcmUvQmF0Y2guY3MiLCJHcmFwaHNDb3JlL1F1aWNrTFouY3MiLCJBcHAuY3MiLCJIZWxwZXJFeHRlbnNpb25zLmNzIiwiTGF5b3V0QW5pbWF0aW9uLmNzIiwiQWxnb3JpdGhtcy9EYXRhU3RydWN0dXJlcy9VbmlvbkZpbmRUcmFja2VkUm9vdHMuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9DaHJvbmljbGUvQ2hyb25pY2xlZEJyYW5jaC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Db2xvcmluZ0FuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL0NvbW1vbkNvbG9yQW5hbHl6ZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU3dhcEFuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL0tpZXJzdGVhZEFuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL0tub3dsZWRnZVRyZWUuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvUmVkdWN0aW9uQW5hbHl6ZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TbGltTWluZC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL0dhbWVUcmVlLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvR2FtZVRyZWVJbmZvLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvR3JlZWR5V2luRmlsdGVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvUHJvb2ZzL1Blcm11dGF0aW9uQXdhcmVQcm9vZkJ1aWxkZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9TbWFydEZpbHRlci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1N1cGVyU2xpbU1pbmQuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU3ViVGVtcGxhdGVBbmFseXplci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvT3B0aW1pemVkL0Zhc3RUYXJwaXRFbnVtZXJhdG9yLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9SZWZlcmVuY2VUYXJwaXRFbnVtZXJhdG9yLmNzIiwiQml0TGV2ZWxHZW5lcmF0aW9uL0JpdEdyYXBoX3R5cGUuY3MiLCJHcmFwaHNDb3JlL0VkZ2UuY3MiLCJHcmFwaHNDb3JlL0dyYXBoLmNzIiwiR3JhcGhzQ29yZS9HcmFwaENhbnZhcy5jcyIsIkdyYXBoc0NvcmUvVmVydGV4LmNzIiwiR3JhcGhpY3MuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvR29vZG5lc3NBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1Byb29mcy9BcmJpdHJhcnlEZWdyZWVQcm9vZkJ1aWxkZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9Qcm9vZnMvTWF4aW11bURlZ3JlZVRocmVlUHJvb2ZCdWlsZGVyLmNzIiwiVGFiQ2FudmFzLmNzIl0sCiAgIm5hbWVzIjogWyIiXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkFlb0NBLGFBQWlCQSxHQUFrQkEsU0FBYUEsT0FBZUE7Ozs7O2dCQUV2RkEsb0JBQWVBO2dCQUNmQSxVQUFLQTtnQkFDTEEsZ0JBQVdBO2dCQUNYQSxjQUFTQTtnQkFDVEEsYUFBUUE7Ozs7O2dCQU9SQSxPQUFPQSxJQUFJQSwyQ0FBV0EsbUJBQWNBLFNBQUlBLGVBQVVBLGFBQVFBOzs7Z0JBUzFEQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7O29CQTZCR0EsT0FBT0E7Ozs7O29CQWlCUEEsT0FBT0E7Ozs7Ozs7Ozs7NEJBbENDQSxhQUFpQkEsR0FBa0JBLFNBQWFBLE9BQWVBOzs7OztnQkFFN0VBLG9CQUFlQSxLQUFJQSwyRkFBeUJBO2dCQUM1Q0EsWUFBWUEsOERBQW9CQTtnQkFDaENBLHNCQUFpQkEsQUFBd0NBLFVBQUNBO3dCQUFPQSxRQUFRQTt3QkFBT0EsT0FBT0E7c0JBQWhEQSxLQUFJQTtnQkFDM0NBLEtBQUtBLFdBQVdBLElBQUlBLGFBQWFBO29CQUM3QkEsc0JBQWlCQSxJQUFJQSx1Q0FBNEJBLFNBQVNBLEVBQUVBOzs7Z0JBRWhFQSxhQUFRQTs7Z0JBRVJBLEtBQUtBLFlBQVdBLEtBQUlBLE9BQU9BO29CQUFLQSxJQUFJQSxDQUFDQTt3QkFBb0JBOzs7Ozs7OztnQkE2QnpEQSxLQUFLQSxXQUFXQSxJQUFJQSxZQUFPQTtvQkFBS0EsSUFBSUEsQ0FBQ0E7d0JBQW9CQTs7OztnQkFFekRBOzs7O2dCQUtBQSxJQUFJQSxpQkFBWUE7b0JBRVpBLGdCQUFXQSxLQUFJQSxpREFBWUE7O29CQUUzQkEsMEJBQTBCQTs7Ozs0QkFFdEJBOzRCQUNBQSxrQkFBYUE7Ozs7Ozs7b0JBR2pCQTs7O2dCQUdKQSxRQUFRQTtnQkFDUkEsT0FBT0E7b0JBRUhBLElBQUlBLDBCQUFhQTt3QkFFYkEsc0JBQVNBLEdBQUtBLGlDQUFhQTt3QkFDM0JBOzs7b0JBR0pBLDBCQUFhQTtvQkFDYkEsMEJBQWFBOztvQkFFYkEsc0JBQVNBLEdBQUtBLGlDQUFhQTs7b0JBRTNCQTs7O2dCQUdKQSxPQUFPQTs7O2dCQUtQQSxNQUFNQSxJQUFJQTs7Ozs7Ozs7Ozs7b0JDM0dSQSxPQUFPQSxzQkFBaUJBOzs7Ozs0QkFHUkEsZUFBK0JBOzs7O2dCQUVyREEscUJBQWdCQTtnQkFDaEJBLGdCQUFXQTs7Ozs7Ozs7K0NDcEJ3QkEsR0FBUUE7b0JBRTNDQSxJQUFJQTt3QkFFQUE7OztvQkFHSkEsVUFBV0EsaUJBQVNBLEdBQUdBLE1BQUlBO29CQUMzQkEsVUFBV0EsaUJBQVNBLEdBQUdBLE1BQUlBOztvQkFFM0JBO29CQUNBQSxPQUFPQSxLQUFJQTt3QkFFUEEsb0JBQVVBO3dCQUNWQTs7O29CQUdKQSxPQUFPQTt3QkFFSEEsb0JBQVVBOzt3QkFFVkE7OztvQkFHSkEsT0FBT0E7O3FDQUdrQkE7b0JBRXpCQTtvQkFDQUEsS0FBS0EsV0FBV0EsS0FBS0EsR0FBR0E7d0JBQ3BCQSxrQkFBU0E7OztvQkFFYkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7MEJDakNXQSxLQUFJQTtpQ0FDR0EsS0FBSUE7Ozs7K0JBRW5CQTtnQkFFSkEsT0FBT0EsWUFBR0E7OytCQUZOQTtnQkFLTkEsWUFBR0EsR0FBS0E7Z0JBQ1JBLG1CQUFVQSxPQUFTQTs7aUNBSWJBO2dCQUVKQSxPQUFPQSxtQkFBVUE7O2lDQUZiQTtnQkFLTkEsWUFBR0EsT0FBU0E7Z0JBQ1pBLG1CQUFVQSxHQUFLQTs7K0JBSUtBO2dCQUV4QkEsT0FBT0EsNEJBQW1DQSxVQUFFQSxBQUE0QkE7OzZCQUdoREE7Z0JBRXhCQSxPQUFPQSw0QkFBbUNBLFVBQUVBLEFBQTRCQTs7Ozs7Ozs7O21CQUxLQSxhQUFLQTs7O21CQUtMQSxlQUFLQTs7Ozs7Ozt5Q0FNeENBLEdBQUdBOztvQkFFN0NBLGdCQUFnQkEsS0FBSUE7O29CQUVwQkE7b0JBQ0FBLDBCQUFrQkE7Ozs7NEJBRWRBLGtCQUFVQSxHQUFLQTs0QkFDZkE7Ozs7Ozs7b0JBR0pBLE9BQU9BOzs7Ozs7OzsrQkMvQ1NBO2dCQUVoQkEsV0FBV0EsS0FBSUE7Z0JBQ2ZBLGNBQWNBO2dCQUNkQTtnQkFDQUEsU0FBU0E7O2dCQUVUQSxlQUFVQTtnQkFDVkEsT0FBT0E7OzZCQUdPQSxJQUFTQTtnQkFFdkJBLFlBQVlBLFVBQUtBO2dCQUNqQkEsWUFBWUEsVUFBS0E7O2dCQUVqQkEsSUFBSUEsOEJBQVNBO29CQUNUQTs7O2dCQUVKQSxJQUFJQSxhQUFhQTtvQkFFYkEsZUFBZUE7b0JBQ2ZBLGlCQUFZQTt1QkFFWEEsSUFBSUEsYUFBYUE7b0JBRWxCQSxlQUFlQTtvQkFDZkEsaUJBQVlBOztvQkFJWkEsZUFBZUE7b0JBQ2ZBO29CQUNBQSxpQkFBWUE7Ozs0QkFJSEE7Z0JBRWJBLElBQUlBLGtDQUFZQTtvQkFDWkEsV0FBV0EsVUFBS0E7OztnQkFFcEJBLE9BQU9BOztpQ0FVc0JBO21DQUNFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztzQ0N5Q1pBLE1BQWNBO29CQUVqQ0EsU0FBT0Esb0JBQUtBLEFBQUNBLGdDQUFLQSxhQUFPQTs7MENBbUlKQSxTQUFxQ0E7b0JBRTFEQSxPQUFPQSx5RUFBYUEsU0FBU0E7O3dDQUdXQSxTQUFxQ0E7b0JBRTdFQSxPQUFPQSw0QkFBdUNBLFlBQUlBLEFBQWdDQTttQ0FBS0Esc0JBQWNBLHNCQUFzQkE7OzsrQ0FFNUVBLFNBQXFDQTtvQkFFcEZBLE9BQU9BLDRCQUF1Q0EsWUFBSUEsQUFBZ0NBO21DQUFLQSxzQkFBY0Esc0JBQXNCQTs7O3FDQVFsR0E7b0JBRXpCQSxPQUFPQSxNQUFJQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJBL05GQSxRQUFtQkEsS0FBVUE7Ozs7Z0JBRXRDQSxjQUFTQTtnQkFDVEEsV0FBTUE7Z0JBQ05BLFlBQU9BO2dCQUNQQSxTQUFJQTtnQkFDSkEsZ0JBQVdBLEtBQUlBLDBFQUFlQTtnQkFDOUJBLGNBQVNBO2dCQUNUQSxrQkFBYUE7Z0JBQ2JBLGNBQVNBLEtBQUlBLGlEQUFZQTs7Z0JBRXpCQSxJQUFJQTtvQkFFQUEsZ0NBQTJCQSxLQUFJQSxrREFBd0JBO29CQUN2REEsMEJBQXFCQSxLQUFJQTs7O2dCQUc3QkEsSUFBSUE7b0JBQ0FBOzs7OzsrQkFwQlNBO2dCQUFlQSxPQUFPQSxvQkFBT0E7Ozs7Z0JBeUIxQ0EsaUJBQVlBLEFBQUtBLEFBQUNBO2dCQUNsQkEsb0RBQWVBLG9CQUFXQSxBQUFNQSxBQUFDQTs7Z0JBRWpDQTtnQkFDQUEsMEJBQWtCQTs7Ozt3QkFFZEEsUUFBUUEsY0FBU0E7d0JBQ2pCQSxJQUFJQTs0QkFDQUEsZ0JBQVdBOzs7Ozs7OztnQkFHbkJBOztnQkFFQUEsMkJBQWtCQTs7Ozt3QkFDZEEsb0RBQWVBLG9CQUFXQTs7Ozs7OztnQkFFOUJBLElBQUlBO29CQUVBQTtvQkFDQUE7O29CQUVBQSwyQkFBa0JBOzs7OzRCQUVkQSxTQUFRQSxjQUFTQTs0QkFDakJBLElBQUlBO2dDQUNBQSxrQ0FBNkJBLFNBQXNCQSxXQUFHQTs7Ozs7Ozs7b0JBRzlEQSxtQ0FBOEJBLEFBQTZGQTs7b0JBRTNIQSxvQkFBc0JBO29CQUN0QkEsS0FBS0EsV0FBV0EsSUFBSUEscUNBQWdDQTt3QkFFaERBLFNBQVFBLHNDQUF5QkE7O3dCQUVqQ0EsSUFBSUEsWUFBV0E7NEJBRVhBLDRCQUF1QkE7NEJBQ3ZCQSxnQkFBZ0JBOzs7O29CQUl4QkEsNEJBQXVCQTs7O2dDQVNoQkE7Z0JBRVhBLFFBQVFBLG9CQUFNQTtnQkFDZEE7Z0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLFFBQUdBO29CQUVuQkEsSUFBSUEsQ0FBQ0Esb0JBQU9BLE9BQUtBO3dCQUNiQSxpQkFBU0EsQ0FBQ0Esb0JBQU1BOzs7O2dCQUd4QkEsT0FBT0E7O2dDQUdVQTtnQkFFakJBLGdCQUFXQTs7Z0JBRVhBLElBQUlBO29CQUNBQSxvQkFBT0EsWUFBY0EscURBQU9BLGFBQXFCQSwwQkFBWUE7OztnQkFFakVBLFlBQU9BLHdDQUFVQTs7Z0JBRWpCQTs7eUNBRzBCQTs7Z0JBRTFCQSwwQkFBcUJBOzs7O3dCQUNqQkEsb0JBQU9BLFlBQWNBLHFEQUFPQSxhQUFxQkEsMEJBQVlBOzs7Ozs7O2dCQUVqRUE7OztnQkFLQUEsWUFBWUEsSUFBSUEsOEJBQU1BLDRCQUFvQ0Esb0JBQU5BLGVBQWVBO2dCQUNuRUEsYUFBYUE7Z0JBQ2JBLGlCQUFpQkE7Z0JBQ2pCQSxrQkFBa0JBOztnQkFFbEJBOztnQkFFQUEsT0FBT0E7O2dEQUcyQkE7Z0JBRWxDQSxZQUFZQSxJQUFJQSw4QkFBTUEsNEJBQW9DQSxvQkFBTkEsZUFBZUE7Z0JBQ25FQSxhQUFhQTtnQkFDYkEsaUJBQWlCQTs7Z0JBRWpCQSx3QkFBd0JBOztnQkFFeEJBLE9BQU9BOzs4QkFHaUJBO2dCQUV4QkEsT0FBT0EsWUFBT0E7OzhCQUdDQTtnQkFFZkEsSUFBSUEsU0FBU0E7b0JBQ1RBOztnQkFDSkEsSUFBSUEsY0FBUUE7b0JBQ1JBOztnQkFDSkEsSUFBSUEsV0FBS0E7b0JBQ0xBOzs7Z0JBRUpBLE9BQU9BLDRCQUEyQ0EsMkJBQU9BOzt1Q0FHVkE7Z0JBRS9DQSxJQUFJQSxDQUFDQTtvQkFDREEsTUFBTUEsSUFBSUE7OztnQkFFZEEsSUFBSUEsQ0FBQ0EsNEJBQW9FQSxzQ0FBeUJBLEFBQTZEQSx1REFBNkJBLDRCQUFvRUEsdUNBQStCQSxBQUE2REE7b0JBQ3hWQSxPQUFPQTs7O2dCQUVYQSxtQkFBbUJBLEtBQUlBO2dCQUN2QkEsS0FBS0EsV0FBV0EsSUFBSUEsMkNBQThCQTtvQkFFOUNBLGFBQWFBLEtBQUlBO29CQUNqQkEsZUFBZUEsS0FBSUE7O29CQUVuQkEsS0FBS0EsUUFBUUEsZ0NBQW1CQSxJQUFJQSxJQUFJQSxnQ0FBbUJBLGdCQUFRQTt3QkFFL0RBLFdBQVdBLHNDQUF5QkE7d0JBQ3BDQSxhQUFhQSx1Q0FBK0JBOzs7b0JBR2hEQSxpQkFBaUJBLFNBQWdDQSxlQUFRQTs7O2dCQUc3REEsT0FBT0EsNEJBQWlUQSxrRUFBcUtBLDRCQUF5U0EscUJBQWFBLEFBQWtTQSxrREFFaGtDQSxBQUEwU0EsOEVBQzVQQSxBQUE4SUE7K0JBQVdBLDJCQUFzQkEsU0FBU0E7OztzQ0FHcExBO2dCQUV2Q0EsT0FBT0EsU0FBZ0NBLDRCQUF3SkEsb0JBQVFBLEFBQTZMQSxzRUFBeUJBLDRCQUF3SkEsb0JBQVFBLEFBQTZMQTs7NkNBR251QkEsU0FBcUNBO2dCQUU1REEsS0FBS0EsV0FBV0EsSUFBSUEsbUJBQWNBO29CQUU5QkEsb0JBQW9CQSw2Q0FBYUEsU0FBU0Esb0JBQU9BO29CQUNqREEsSUFBSUEsaUJBQWlCQSxxQkFBYUE7d0JBQzlCQTs7OztnQkFHUkEsSUFBSUEsY0FBUUE7b0JBQ1JBOzs7Z0JBRUpBLElBQUlBLHdCQUFrQkE7b0JBQ2xCQTs7O2dCQUVKQSxXQUFXQSxtQkFBUUEscUJBQWdCQTtnQkFDbkNBLGFBQWFBLEFBQXNDQSxVQUFDQTt3QkFBT0EsUUFBUUE7d0JBQXNCQSxRQUFRQTt3QkFBd0JBLE9BQU9BO3NCQUE3RkEsS0FBSUE7O2dCQUV2Q0EsT0FBT0EsbURBQTBDQSw0QkFBbUNBLDJDQUFhQSxTQUFTQSxjQUEzQkEsZUFBa0NBOzs7Z0JBbUJqSEEsT0FBT0E7OztnQkFVUEEsT0FBT0E7OztnQkFLUEEsT0FBT0E7OztnQkFLUEEsT0FBT0EsZUFBaUJBLDRCQUEyQ0Esb0JBQU9BLEFBQW9DQTs7O2dCQUs5R0EsT0FBT0Esb0VBQTJDQSxvQkFBT0EsQUFBeUNBOzs7Ozs7Ozs7bUJBN09vQ0E7OzttQkFBbEdBLElBQUlBLHNEQUFTQSw0QkFBd0NBLG9CQUFPQSxBQUFpQ0E7O3NCQTZDREEsR0FBR0E7bUJBQU1BLGtCQUFrQkE7OzttQkFxR1NBOzs7bUJBa0J1NUJBLDRCQUF1TEEsNENBQXlCQSx3QkFBZ0JBLEFBQWdMQTsyQkFBS0EsU0FBZ0NBLGlCQUFVQSxzQkFBYUE7Ozs7bUJBRTd0Q0Esb0JBQWVBOzs7bUJBTWdGQTs7O21CQUFzWEE7OzttQkE0RDVvQkE7O3VCQUtoQkEsT0FBT0E7bUJBQU1BLCtCQUFVQSxDQUFDQSx5QkFBa0JBOzs7Ozs7Ozs7OzsyQ0MxUWpGQSxLQUFJQTs7Ozt5Q0FFbEJBO29CQUU5Q0E7b0JBQ0FBLElBQUlBLENBQUNBLDhFQUE0QkEsT0FBV0E7d0JBRXhDQSxlQUFhQSw0QkFBcUhBLHdFQUFvQkEsZUFBM0dBO3dCQUMzQ0Esc0VBQWdCQSxPQUFTQTs7O29CQUc3QkEsT0FBT0E7OzZDQUVtREEsT0FBYUE7b0JBRXZFQSxRQUFRQSw0QkFBbUNBLGtGQUFnQ0EsT0FBT0EsbUJBQTVDQTtvQkFDdENBLGlCQUFpQkEsZ0VBQWNBOztvQkFFL0JBLE9BQU9BLDRCQUFnTEEsbUJBQVdBLEFBQXlLQTttQ0FBYUEsSUFBSUEsbURBQWlCQSxHQUFHQSxpQkFBaUJBLGlCQUFpQkE7OztpREFHOVhBOzs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FFcERBLElBQUlBOzs7Ozs7Ozs7NENBRUFBLDBCQUEwQkEsc0VBQW9CQSxnQ0FBb0JBOzs7Ozs7Ozs7Ozs7Ozs0Q0FDOURBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozs0Q0FJakJBLEFBQUtBOzs7OztpREFBV0EsSUFBSUE7Ozs7Ozs7OzRDQUVoQkEsMkJBQTBCQSxzRUFBb0JBLGdDQUFvQkEsU0FBU0EsQUFBaUNBOzJEQUFLQSxNQUFLQTs7Ozs7Ozs7Ozs7Ozs7OzRDQUVsSEEscUJBQW9CQSxBQUFzQ0EsVUFBQ0E7d0RBQU9BLFFBQVFBO3dEQUFHQSxPQUFPQTtzREFBMUNBLEtBQUlBO2dEQUM5Q0Esc0JBQWFBOzs7Ozs7Ozs7Ozs7OzRDQUxFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OytDQVd5QkE7Ozs7Ozs7Ozs7Ozs7Ozs7OzRDQUVwREEsSUFBSUE7Ozs7Ozs7Ozs0Q0FDQUEsc0JBQWFBLEtBQUlBOzs7Ozs7Ozs7NENBR2pCQSxRQUFZQTtnREFDWkE7Z0RBQ0FBLEFBQUtBOzs7OztpREFBV0EsSUFBSUE7Ozs7Ozs7OzRDQUVoQkEsT0FBV0EsQUFBc0NBLFVBQUNBO3dEQUFPQSxRQUFRQTt3REFBT0EsUUFBUUEsZ0JBQVFBO3dEQUFJQSxPQUFPQTtzREFBbEVBLEtBQUlBO2dEQUNyQ0EsaUJBQWlCQTs7Z0RBRWpCQSwwQkFBMEJBLHNFQUFvQkE7Ozs7Ozs7Ozs7Ozs7OzRDQUUxQ0EsY0FBY0E7Z0RBQ2RBLHNCQUFhQTs7Ozs7Ozs7OzRDQUdqQkEsZUFBZUEsR0FBR0E7Ozs7OzRDQVhhQTs7Ozs7NENBY25DQSxrQkFBa0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsyREFJcUNBLE9BQWFBO29CQUV4RUEsT0FBT0EsZ0NBQW9CQSwwQkFBMEJBLEFBQWlDQTsrQkFBS0Esb0RBQWFBLElBQVlBLGlDQUFtQkEsb0RBQWFBLElBQVlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJDL0Q5SUEsT0FBYUE7O2dCQUUvQkEsYUFBUUE7Z0JBQ1JBLGNBQVNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRCQ0hTQTs7Z0JBRWxCQSxhQUFRQTtnQkFDUkEsY0FBU0EsNEJBQWtDQSwyQkFBZUEsQUFBaUNBO2dCQUMzRkE7O2dCQUVBQSwwQkFBcUJBLEtBQUlBLG1LQUFtREE7O29CQUV4RUEsU0FBU0EsS0FBSUE7b0JBQ2JBLDBCQUFrQkE7Ozs7NEJBQ2RBLE9BQUdBLEdBQUtBLDRCQUE0RUEsdUNBQWtDQSxBQUFzQ0E7eURBQUNBOzRDQUFPQSxRQUFRQTs0Q0FBU0EsUUFBUUE7NENBQVNBLE9BQU9BOztnREFBakVBLEtBQUlBLDZEQUExR0E7Ozs7Ozs7b0JBRTFDQSxPQUFPQTs7Ozs7O2dCQU1YQSxlQUFlQTtnQkFDZkEsUUFBUUE7O2dCQUVSQSxhQUFRQSxLQUFJQTtnQkFDWkEsS0FBS0EsV0FBV0EsSUFBSUEsR0FBR0E7b0JBQ25CQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxHQUFHQTt3QkFDdkJBLElBQUlBLGNBQVNBLEdBQUdBOzRCQUNaQSxlQUFVQSxTQUFvQkEsVUFBR0E7Ozs7O2dCQUU3Q0EsbUJBQWNBLGdDQUFvQkE7O2dCQUVsQ0EsWUFBWUEsaURBQVNBLGtCQUFhQTtnQkFDbENBLEtBQUtBLFlBQVdBLEtBQUlBLGtCQUFhQTtvQkFDN0JBLEtBQUtBLFNBQVFBLGNBQU9BLEtBQUlBLGtCQUFhQTt3QkFDakNBLElBQUlBLG1CQUFNQSxjQUFZQSxtQkFBTUEsYUFDeEJBLG1CQUFNQSxjQUFZQSxtQkFBTUEsYUFDeEJBLG1CQUFNQSxjQUFZQSxtQkFBTUEsYUFDeEJBLG1CQUFNQSxjQUFZQSxtQkFBTUE7NEJBQ3hCQSxXQUFNQSxJQUFHQSxLQUFLQSxZQUFNQSxJQUFHQTs7Ozs7Z0JBRW5DQSxpQkFBWUEsSUFBSUEsc0JBQU1BOzs7Ozs7Ozs7bUJBbkMwRUEsa0JBQWFBOzs7Ozs7Ozs7Ozs7Ozs7Ozt1Q0NWdkRBLEtBQUlBOzs0QkFrQjdDQTs7Z0JBRWJBLHNCQUFpQkEsSUFBSUEsdURBQWVBOzs7OytCQWpCVkE7Z0JBSXRCQTtnQkFDQUEsSUFBSUEsQ0FBQ0EsaUNBQTRCQSxVQUFjQTtvQkFFM0NBLE1BQUlBLElBQUlBLDBEQUFrQkE7b0JBQzFCQSx5QkFBZ0JBLFVBQVlBOzs7Z0JBR2hDQSxPQUFPQTs7d0NBU2NBLE9BQWFBO2dCQUV0Q0EsT0FBT0EsY0FBTUEsa0NBQXFCQSxzQkFBb0JBLGNBQU1BLGtDQUFxQkE7OzBDQUV4REEsUUFBbUJBO2dCQUU1Q0EsT0FBT0EsZUFBT0Esa0NBQXFCQSxzQkFBb0JBLGVBQU9BLGtDQUFxQkE7Ozs7Ozs7Ozs7Ozs7O2dCQ3hCbkZBLFlBQU9BLFlBQUdBO2dCQUNWQSxnQkFBV0EsS0FBSUE7Ozs7bUNBR0tBO2dCQUVwQkEscUJBQWdCQTs7Z0NBR0lBO2dCQUVwQkEsZUFBZUE7Z0JBQ2ZBLGtCQUFhQTs7OztnQkFLYkE7Z0JBQ0FBLDBCQUFzQkE7Ozs7d0JBQ2xCQSxRQUFRQSxTQUFTQSxPQUFPQTs7Ozs7OztnQkFFNUJBLE9BQU9BOztnQ0FHYUEsV0FBd0JBOztnQkFFNUNBLHNCQUFpQkEsQUFBNkJBLFdBQVdBOzt3Q0FHdkNBLFdBQXdCQSxVQUFjQTs7Z0JBRXhEQSxJQUFJQSxTQUFTQTtvQkFDVEE7OztnQkFFSkEsMEJBQXNCQTs7Ozt3QkFFbEJBLFVBQVVBLFdBQU1BO3dCQUNoQkEsdUJBQXVCQSxBQUE2QkEsV0FBV0EsVUFBVUE7Ozs7Ozs7a0NBSTlCQTs7Z0JBRS9DQTtnQkFDQUEsbUJBQW1CQSxLQUFJQTtnQkFDdkJBLGlCQUFpQkEsS0FBSUE7Z0JBQ3JCQSxZQUFZQSxLQUFJQTs7Z0JBRWhCQSxjQUFTQSxBQUE4QkEsVUFBQ0EsUUFBUUE7b0JBRTVDQTtvQkFDQUEsSUFBSUEsQ0FBQ0EseUJBQXlCQSxRQUFZQTt3QkFFdENBLHNCQUFJQTt3QkFDSkEsaUJBQWFBLFFBQVVBO3dCQUN2QkEsZUFBV0EsS0FBS0E7O3dCQUVoQkEsVUFBTUEsS0FBS0EsS0FBSUE7OztvQkFHbkJBO29CQUNBQSxJQUFJQSxDQUFDQSx5QkFBeUJBLE9BQVdBO3dCQUVyQ0Esc0JBQUlBO3dCQUNKQSxpQkFBYUEsT0FBU0E7d0JBQ3RCQSxlQUFXQSxLQUFLQTs7d0JBRWhCQSxVQUFNQSxLQUFLQSxLQUFJQTs7O29CQUduQkEsVUFBTUEsU0FBT0E7bUJBQ2JBOztnQkFFSkEsSUFBSUE7b0JBRUFBLGtCQUFnQkEsWUFBR0E7b0JBQ25CQSxhQUFXQSxLQUFJQTs7O2dCQUduQkEsa0JBQWtCQSxLQUFJQTtnQkFDdEJBLEtBQUtBLFdBQVdBLElBQUlBLFVBQVVBO29CQUUxQkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsVUFBVUE7d0JBRTlCQSxJQUFJQSxVQUFNQSxZQUFZQTs0QkFDbEJBOzs0QkFDQ0EsSUFBSUEsVUFBTUEsWUFBWUE7Z0NBQ3ZCQSxnQkFBZ0JBOztnQ0FFaEJBOzs7Ozs7Z0JBSVpBLE9BQU9BLFNBQXFDQSxJQUFJQSx3QkFBTUEscUJBQWNBOzs7Ozs7Ozs7Ozs7b0NDakdsQ0E7Ozs7a0NBRVpBO29CQUV0QkEsT0FBT0EsS0FBS0E7OztvQkFLWkEsT0FBT0EsZ0NBQW9CQTs7b0NBR1NBLE9BQVdBO29CQUUvQ0EsT0FBT0EsNkJBQWlCQSxPQUFPQSxXQUFPQTs7dUNBR1hBO29CQUUzQkE7b0JBQ0FBLElBQUlBLHNCQUFhQSxHQUFPQTt3QkFDcEJBLE9BQU9BOzs7b0JBRVhBLE9BQU9BOzswQ0FFMEJBO29CQUVqQ0E7b0JBQ0FBLElBQUlBLHVCQUFnQkEsU0FBT0E7d0JBQ3ZCQSxPQUFPQTs7O29CQUVYQSxPQUFPQTs7MkNBSXdCQSxHQUFjQSxHQUFTQTs7b0JBRXREQSxPQUFPQSx3RUFBZ0JBLEdBQUdBLFVBQVVBOzs2Q0FHTEEsR0FBY0EsUUFBbUJBLEtBQVVBOzs7b0JBRTFFQSxJQUFJQSxrQ0FBZ0JBO3dCQUNoQkEsZUFBZUE7OztvQkFFbkJBLGtCQUFrQkEscUVBQWVBLFFBQVFBOztvQkFFekNBLDBCQUFrQkEsK0RBQW1DQTs7Ozs0QkFFakRBLFFBQVFBLFdBQVVBLEtBQUtBLGFBQWFBOzs0QkFFcENBLElBQUlBO2dDQUNBQTs7OzRCQUVKQSxZQUFZQSw0QkFBeUVBLGlCQUFZQSxBQUF5RUE7OytDQUFNQSxnRkFBc0RBLElBQUdBOzs7OzRCQUV6T0EsSUFBSUEsUUFBUUE7Z0NBQ1JBOzs7Ozs7OztvQkFHUkE7OzBDQUd5Q0EsUUFBbUJBO29CQUU1REEsT0FBT0EsNEJBQWdGQSxpREFBb0JBLEFBQXlFQTttQ0FBU0EsNEJBQW1DQSw4REFBUUEsT0FBT0EsZ0JBQXBCQTs7O21DQUd4TEEsT0FBV0E7b0JBRTlDQSxPQUFPQSx3REFBZ0RBLFFBQU9BLEFBQWtDQTsrQkFBU0Esc0NBQWVBOzs7K0JBR3RHQSxPQUFXQTtvQkFFN0JBLE9BQU9BLDRCQUFtQ0EsaUJBQVVBLEFBQWtDQTttQ0FBU0Esc0NBQWVBOzs7bUNBR3hGQSxPQUFrQkE7b0JBRXhDQSxPQUFPQSw4QkFBeUVBLHFFQUFlQSxjQUFjQSxnQkFBV0EsQUFBeUVBLG1FQUF1QkE7O3FDQUdsTUEsT0FBa0JBLEdBQVNBO29CQUVqREEsT0FBT0EsOEJBQXlFQSxxRUFBZUEsY0FBY0EsZ0JBQVdBLEFBQXlFQTttQ0FBTUEsZ0ZBQXNEQSxJQUFHQTs2QkFBa0JBLFVBQVVBOztxQ0FHblFBO21DQUlGQSxHQUErQkE7O29CQUV0REEsaUJBQWlCQSxVQUFJQSwyQ0FBaUJBO29CQUN0Q0EsUUFBUUEsNEJBQW1DQSwyQ0FBbUJBLEdBQUdBLG1CQUFRQSxZQUFZQSxzQ0FBL0NBOztvQkFFdENBLG1CQUFtQkE7b0JBQ25CQSxxQkFBcUJBOztvQkFFckJBLE9BQU9BOzs7Ozs7Ozs7Ozs7O21CQXBCZ01BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkNoRS9MQTs7Z0JBRVJBO2dCQUNBQTtnQkFDQUE7Z0JBQ0FBLGNBQVNBO2dCQUNUQSxpQkFBWUEsSUFBSUEsa0RBQVVBOztnQkFFMUJBLDZCQUF3QkEsS0FBSUE7Z0JBQzVCQSwrQkFBMEJBLElBQUlBOzs7O3dDQUdMQTtnQkFFekJBLCtCQUEwQkE7OytCQUdWQSxVQUFtQkE7OztnQkFFbkNBO2dCQUNBQTs7Z0JBRUFBOztnQkFFQUEsd0JBQXdCQSxTQUFTQSxhQUFRQTtnQkFDekNBLHdCQUF3QkEsU0FBU0EsYUFBUUE7O2dCQUV6Q0E7Z0JBQ0FBLDBCQUEyQkEsK0RBQXVCQSxtQkFBbUJBOzs7O3dCQUVqRUEsSUFBSUEsK0JBQVlBOzRCQUNaQSxTQUFTQSxXQUFJQTs7O3dCQUVqQkEsYUFBYUEsNEJBQXFFQSx1QkFBa0JBLFVBQVVBLFlBQVlBLEFBQXdGQSxrQkFBdktBO3dCQUMzQ0EsSUFBSUEsd0JBQXdCQTs0QkFDeEJBOzs7d0JBRUpBLDZDQUFrQkE7d0JBQ2xCQTs7d0JBRUFBLGlCQUFpQkEsQ0FBQ0EsZUFBUUEsUUFBUUEsQUFBd0ZBO3dCQUMxSEEsSUFBSUEsY0FBY0E7NEJBQ2RBOzs7d0JBRUpBLHVCQUFVQSxrQkFBa0JBOzs7Ozs7O2dCQUdoQ0EsT0FBT0EsNEJBQW9FQSx1QkFBVUE7O2lDQUc1RUEsUUFBb0JBOzs7Z0JBRTdCQTs7Z0JBRUFBLDBCQUF5QkEsNEJBQTZGQSxrQ0FBc0JBLEFBQTRGQTs7Ozt3QkFFcE9BLGtCQUFZQSxLQUFJQTt3QkFDaENBLHNFQUE4RkEsUUFBT0EsQUFBbUVBOzt1Q0FBS0Esd0VBQWlCQSxnQkFBV0E7OzRDQUFLQSxBQUErREE7NkNBQUNBOztnQ0FFMVBBLFlBQVVBOztnQ0FFVkEsSUFBSUE7b0NBRUFBLElBQUlBLCtCQUFZQTt3Q0FDWkEsU0FBU0EsV0FBSUEsK0VBQW9DQSw0QkFBcUVBLGdCQUF2Q0EsZ0RBQTJEQTs7O29DQUU5SUE7Ozs7O3dCQUlSQSxJQUFJQTs0QkFFQUEsSUFBSUEsK0JBQVlBO2dDQUNaQSxTQUFTQSxXQUFJQSwrRUFBb0NBLDRCQUFxRUEsZ0JBQXZDQSxnREFBMkRBOzs7Ozs7Ozs7Z0JBSXRKQSxrQ0FBa0NBLDRCQUE2RkEsa0NBQXNCQSxBQUE0RkE7O2dCQUVqUEEsT0FBT0E7b0JBRUhBOztvQkFFQUEsWUFBWUE7O29CQUVaQSwyQkFBeUJBOzs7OzRCQUV6Q0Esc0VBQWtHQSxRQUFPQSxBQUFtRUE7dUNBQUtBLHlFQUFpQkEsZ0JBQVdBO2dDQUFLQSxBQUErREEsVUFBQ0E7O2dDQUV0UEEsSUFBSUEsK0JBQVlBO29DQUNaQSxTQUFTQSxXQUFJQSwrRUFBb0NBLG1FQUEyRUEsMEJBQXNCQTs7Ozs7Ozs7O29CQUlsS0EsSUFBSUEsaUJBQWdCQTt3QkFFaEJBLDJCQUFrQkE7Ozs7Z0NBQ2RBLHVCQUFVQSwwQkFBa0JBLHNCQUFzQkE7Ozs7Ozs7d0JBRXREQSxjQUFRQTs7d0JBRVJBLHNCQUFzQkEsZ0NBQW9CQSwrQ0FBMENBLEFBQWlDQTttQ0FBS0EsNEJBQWtFQSxZQUFPQSxBQUFtRUE7MkNBQUtBLDhFQUFzQ0EsZ0JBQVdBLElBQUdBOzs7d0JBQy9UQSxJQUFJQTs0QkFFQUE7NEJBQ0FBLHVCQUFrQkEsNEJBQTZFQSx1QkFBT0EsQUFBbUVBOzsrQ0FBS0EsMkVBQWtCQSxPQUFNQSw4RUFBc0NBLGdCQUFXQTs7OzRCQUN2UEEsSUFBSUEsd0JBQW1CQTtnQ0FDbkJBLHVCQUFrQkEsNEJBQW9FQSxjQUFPQSxBQUFtRUE7Ozs7d0JBR3hLQTs7OztnQkFJUkE7OztnQkFLQUEsSUFBSUEsQ0FBQ0EsNEJBQTJGQSxnQ0FBc0JBLEFBQTRGQTtvQkFDOU1BLCtCQUEwQkEsSUFBSUEscURBQWFBOzs7eUNBR2xCQSxVQUFtQkEsWUFBZ0JBOzs7Z0JBRWhFQSxhQUFhQSxLQUFJQTs7Z0JBRWpCQSxlQUFlQSxnQ0FBb0JBO2dCQUNuQ0EsYUFBYUEsZ0NBQW9CQTtnQkFDakNBLFVBQVVBOztnQkFFVkEsVUFBVUEsNEJBQXdDQSxrQkFBU0EsQUFBZ0NBOytCQUFLQSxTQUFTQSx5QkFBZUEsS0FBS0E7OztnQkFFN0hBLGtCQUFrQkEsS0FBSUE7Z0JBQ3RCQSwwQkFBK0JBLG9HQUFpR0EsNEJBQWdJQSxpQkFBU0EsQUFBeUhBO3dCQUU5WEEsSUFBSUEsTUFBS0E7NEJBQ0xBLE9BQU9BLHFGQUFrRkEsNEJBQWlDQSxhQUFPQSx1QkFBZUE7Ozt3QkFFcEpBLE9BQU9BLGlFQUFtQ0EsUUFBUUEsdUJBQWVBOzs7Ozt3QkFHakVBLFdBQVdBLDRCQUE0RUEsdUJBQTlDQTt3QkFDekNBLGtCQUFrQkEsNEJBQW9GQSxpQkFBS0EsQUFBeUhBO3dCQUNwT0EsSUFBSUEsY0FBY0E7NEJBQ2RBOzs7d0JBRUpBLGFBQWFBLDRCQUFpRkEsYUFBS0EsQUFBMEVBOzt3QkFFN0tBLG9CQUFvQkEsNkdBQStDQSxRQUFRQTt3QkFDM0VBLFlBQVlBLElBQUlBLDhCQUFNQSxRQUFRQTs7d0JBRTlCQSxJQUFJQSwwQkFBcUJBLENBQUNBOzRCQUN0QkE7Ozt3QkFFSkEsV0FBV0E7d0JBQ1hBLGdCQUFnQkE7O3dCQUVoQkEsSUFBSUE7NEJBRUFBLElBQUlBLCtCQUFZQTtnQ0FDWkEsU0FBU0EsV0FBSUEsNkVBQWtDQSw0QkFBcUVBLG9CQUF2Q0EsZ0RBQWlFQTs7OzRCQUVsSkE7Ozs7Ozs7O2dCQUlSQSxJQUFJQSx5QkFBeUJBLCtCQUFZQTtvQkFDckNBLFNBQVNBLFdBQUlBLDZFQUFrQ0EsNEJBQXFFQSxvQkFBdkNBLGdEQUFpRUE7OztnQkFFbEpBLE9BQU9BOzsrQ0FJK0NBO2dCQUV0REEsd0JBQXdCQSx1QkFBVUE7Z0JBQ2xDQSxpQkFBaUJBLDRCQUFrQ0Esd0VBQXlCQSxBQUFpQ0E7K0JBQUtBLGtDQUFrQ0EsTUFBTUEsQ0FBQ0Esa0NBQWtDQTs7O2dCQUU3TEEsT0FBT0EsNEJBQW9QQSwwQkFBa0JBLDhDQUFzQ0EsQUFBNk9BOzs2Q0FFemZBO2dCQUV2Q0E7Z0JBQ0FBLGdCQUFnQkEsS0FBSUE7Z0JBQ3BCQSxvQkFBb0JBLElBQUlBO2dCQUN4QkEsdUJBQWtCQSxlQUFlQSxPQUFPQTs7Z0JBRXhDQSxPQUFPQTs7eUNBRVlBLGVBQTZCQSxPQUFhQTs7Z0JBRTdEQSxzQkFBc0JBO2dCQUN0QkEsdUNBQXVCQTs7Z0JBRXZCQSxnQkFBZ0JBLHVCQUFVQSw4QkFBc0JBLDBCQUFrQkE7Z0JBQ2xFQSxJQUFJQTtvQkFFQUEsSUFBSUE7d0JBRUFBLHFCQUFxQkE7O3dCQUlyQkE7d0JBQ0FBLElBQUlBLHNCQUFzQkEsT0FBV0E7NEJBRWpDQSxxQkFBcUJBLGNBQWNBOzRCQUNuQ0E7Ozt3QkFHSkEsUUFBUUEsZ0NBQWdDQTt3QkFDeENBLGFBQWFBLDRCQUFtQ0EsMkNBQW1CQSxHQUFHQSxtQkFBUUEsMkJBQTJCQSxtREFBOURBO3dCQUMzQ0EsZ0JBQWdCQSxTQUFvQkEsMEJBQVdBOzt3QkFFL0NBLDJCQUFxQkE7Ozs7Z0NBRWpCQSxnQkFBZ0JBO2dDQUNoQkEsWUFBWUEsNEJBQXlHQSxtQkFBV0EsQUFBa0dBOytDQUFLQSw4REFBc0JBLEdBQUdBOztnQ0FDaFFBLDRCQUE0QkE7O2dDQUU1QkEseUJBQXlCQSx5QkFBdUJBO2dDQUNoREEsK0JBQStCQTtnQ0FDL0JBLHVCQUFrQkEsb0JBQW9CQSxXQUFXQTs7Ozs7Ozs7b0JBTXpEQSxNQUFNQSxJQUFJQTs7O2dCQUdkQSxjQUFVQSxPQUFTQSxTQUFzQkEsNkJBQXNCQTs7c0RBRytHQTs7Z0JBRTlLQSx3QkFBd0JBLHVCQUFVQTtnQkFDbENBLGlCQUFpQkEsNEJBQWtDQSx3RUFBeUJBLEFBQWlDQTsrQkFBS0Esa0NBQWtDQSxNQUFNQSxDQUFDQSxrQ0FBa0NBOzs7Z0JBRTdMQTtnQkFDQUEsbUJBQW1CQSxLQUFJQTtnQkFDdkJBLGlCQUFpQkEsS0FBSUE7Z0JBQ3JCQSxrQkFBa0JBLEtBQUlBO2dCQUN0QkEsZUFBZUEsS0FBSUE7O2dCQUVuQkEsMEJBQW9CQSwwQkFBa0JBOzs7O3dCQUVsQ0EsaUJBQWFBLFNBQVdBO3dCQUN4QkEsZ0JBQVlBLGNBQWdCQTt3QkFDNUJBLGFBQVNBLGNBQWdCQSxLQUFJQTt3QkFDN0JBOzs7Ozs7O2dCQUdKQSwyQkFBa0JBOzs7O3dCQUVkQSxpQkFBYUEsR0FBS0E7d0JBQ2xCQSxnQkFBWUEsY0FBZ0JBLEtBQUlBLGlJQUFvQ0EsR0FBR0EsSUFBSUEsdURBQWVBO3dCQUMxRkEsYUFBU0EsY0FBZ0JBLEtBQUlBO3dCQUM3QkE7Ozs7Ozs7Z0JBR0pBLDJCQUFvQkEsMEJBQWtCQTs7Ozt3QkFFbENBLElBQUlBOzRCQUVBQSxRQUFRQSxpQkFBYUE7OzRCQUVyQkEsY0FBUUEsaUNBQWdDQTs0QkFDeENBLGFBQWFBLDRCQUFtQ0EsMkNBQW1CQSxLQUFHQSxtQkFBUUEsNEJBQTJCQSxvREFBOURBOzRCQUMzQ0EsZ0JBQWdCQSxTQUFvQkEsMEJBQVdBOzs0QkFFL0NBLDJCQUFxQkE7Ozs7b0NBRWpCQSxnQkFBZ0JBO29DQUNoQkEsWUFBWUEsNEJBQXlHQSxtQkFBV0EsQUFBa0dBOzt1REFBS0EsOERBQXNCQSxLQUFHQTs7O29DQUNoUUEsNEJBQTRCQTs7b0NBRTVCQSxRQUFRQSxpQkFBYUE7b0NBQ3JCQSxhQUFTQSxPQUFPQTs7b0NBRWhCQSxlQUFXQSxTQUFvQkEsVUFBR0EsS0FBTUE7Ozs7Ozs7Ozs7Ozs7Z0JBS3BEQSxrQkFBa0JBLEtBQUlBO2dCQUN0QkEsS0FBS0EsV0FBV0EsSUFBSUEsY0FBY0E7b0JBRTlCQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxjQUFjQTt3QkFFbENBLElBQUlBLGFBQVNBLFlBQVlBOzRCQUNyQkE7OzRCQUNDQSxJQUFJQSxhQUFTQSxZQUFZQTtnQ0FDMUJBLGdCQUFnQkE7O2dDQUVoQkE7Ozs7OztnQkFJWkEsT0FBT0EsU0FBZ0pBLElBQUlBLHdCQUFNQSxxQkFBY0Esb0JBQWFBOzs7Ozs7Ozs7bUJBdFBpREEsQ0FBQ0E7OzttQkF1QlFBOzs7bUJBOEJqRUEsOEVBQXNDQSxnQkFBV0E7OzttQkFZZkE7OzttQkF3QndCQTs7O21CQUl0REE7OzttQkFnQzhXQSwyQkFBc0JBOzs7Ozs7Ozs7Ozs7Ozs7b0JDOUxwaEJBLE9BQU9BOzs7Ozs7b0NBTkhBLEtBQUlBOzBDQUNzQkEsS0FBSUE7bUNBQ2xEQSxLQUFJQTs7NEJBeUNiQTs7Z0JBRWhCQSxrQkFBYUE7Z0JBQ2JBOzs7OytCQXRDdUJBO2dCQUluQkE7Z0JBQ0FBLDhCQUF5QkEsT0FBV0E7Z0JBQ3BDQSxPQUFPQTs7aUNBZVlBLFFBQWVBO2dCQUlsQ0E7Z0JBQ0FBLHVCQUFrQkEsb0JBQW9CQSxPQUFXQTtnQkFDakRBLE9BQU9BOztpQ0FOWUEsUUFBZUE7Z0JBVWxDQSx1QkFBa0JBLFlBQVFBLE9BQVNBOzt5Q0FyQlNBO2dCQUVoREE7Z0JBQ0FBLElBQUlBLENBQUNBLG9DQUErQkEsUUFBWUE7b0JBRTVDQSxXQUFTQSxLQUFJQTtvQkFDYkEsNEJBQW1CQSxRQUFVQTs7O2dCQUdqQ0EsT0FBT0E7OzhCQXNCa0JBLE9BQWFBO2dCQUV0Q0EsZ0JBQWdCQSxJQUFJQSx1REFBZUEsT0FBT0E7Z0JBQzFDQSxzQkFBYUEsT0FBU0E7O2dCQUV0QkEsT0FBT0E7O2dDQUdrQkEsT0FBYUEsUUFBZUEsVUFBY0EsV0FBMkJBOztnQkFFOUZBLGdCQUFnQkEsVUFBSUEsdURBQWVBLE9BQU9BLG9CQUFrQkEseUJBQXNCQSxzQkFBbUJBO2dCQUNyR0Esc0JBQWFBLE9BQVNBOztnQkFFdEJBLE9BQU9BOztzQ0FHMEJBLE9BQWFBLFFBQWVBLFVBQWNBLFdBQTJCQTs7Z0JBRXRHQSxnQkFBZ0JBLFVBQUlBLHVEQUFlQSxPQUFPQSxvQkFBa0JBLHlCQUFzQkEsc0JBQW1CQTtnQkFDckdBLGVBQUtBLFFBQVFBLE9BQVNBOztnQkFFdEJBLE9BQU9BOzsrQkFHU0E7Z0JBRWhCQSxxQkFBZ0JBOzs7Z0JBS2hCQSxrQkFBYUEsS0FBSUE7Z0JBQ2pCQSxhQUFhQSxnQ0FBb0JBOztnQkFFakNBLEtBQUtBLFdBQVdBLElBQUlBLGNBQWNBO29CQUM5QkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsY0FBY0E7d0JBQ2xDQSxvQkFBZUEsU0FBb0JBLGVBQU9BLFdBQUlBLGVBQU9BOzs7O2dDQUc1Q0E7O2dCQUVqQkEsMEJBQW9CQTs7Ozt3QkFDaEJBLHNCQUFvQkEsU0FBU0Esa0JBQWtCQSxpQkFBaUJBLHFCQUFxQkE7Ozs7Ozs7O2dCQUt6RkEsT0FBT0EsNEJBQXFNQSxxQ0FBYUEsQUFBbUxBOzs7Ozs7Ozs7bUJBQUtBOzs7Ozs7Ozs7Ozs7OzsrQkM1RmhXQSxLQUFJQTs7NEJBR2pDQSxXQUFxQkEsYUFBb0NBLGVBQXNDQTs7OztnQkFFbkhBLGtCQUFhQTtnQkFDYkEsb0JBQWVBO2dCQUNmQSxzQkFBaUJBO2dCQUNqQkEsa0JBQWFBOzs7OytCQUdHQSxTQUFhQTs7Z0JBRTdCQSxJQUFJQSxDQUFDQTtvQkFDREEsT0FBT0Esc0JBQWlCQSxTQUFTQTs7O2dCQUVyQ0E7Z0JBQ0FBLElBQUlBLENBQUNBLHlCQUFvQkEsU0FBYUE7b0JBQ2xDQSxPQUFPQSxzQkFBaUJBLFNBQVNBOzs7Z0JBRXJDQSwwQkFBOEJBOzs7O3dCQUUxQ0EsbUdBQTJIQSxlQUFjQSxBQUFnR0E7bUNBQWNBLHNCQUFzQkE7MkJBQWVBLEFBQTRGQTt3QkFDeFdBLElBQUlBOzRCQUNBQTs7Ozs7Ozs7Z0JBR1JBOzt3Q0FHa0JBLFNBQWFBOztnQkFFL0JBLFlBQVlBLHNCQUFhQTtnQkFDekJBLG1CQUFtQkEsd0JBQVdBLDhCQUFzQkE7O2dCQUVwREEsMEJBQTBCQSw0QkFBNkVBLDJDQUF3QkEsQUFBMkRBOytCQUFRQSw0QkFBa0NBLGtGQUEwREEsT0FBT0E7Ozs7O3dCQUVqU0E7d0JBQ0FBLDJCQUF1QkEsb0VBQTRDQSxPQUFPQTs7OztnQ0FFdEVBOztnQ0FFQUEsMkJBQXFCQTs7Ozt3Q0FFakJBLHdCQUF3QkE7d0NBQ3hCQSxjQUFjQSx3QkFBZUE7d0NBQzdCQSx3QkFBd0JBOzt3Q0FFeEJBLElBQUlBLHFCQUFxQkE7NENBRXJCQTs0Q0FDQUE7Ozs7Ozs7O2dDQUlSQSxJQUFJQSxDQUFDQTtvQ0FFREE7b0NBQ0FBOzs7Ozs7Ozt3QkFJUkEsSUFBSUE7NEJBQ0FBOzs7Ozs7OztnQkFHUkE7O3dDQUdrQkEsU0FBYUE7O2dCQUUvQkEsWUFBWUEsS0FBSUE7Z0JBQ2hCQSxpQkFBUUEsU0FBV0E7O2dCQUVuQkEsWUFBWUEsc0JBQWFBO2dCQUN6QkEsbUJBQW1CQSx3QkFBV0EsOEJBQXNCQTs7Z0JBRXBEQSwwQkFBMEJBLDRCQUE2RUEsMkNBQXdCQSxBQUEyREE7K0JBQVFBLDRCQUFrQ0Esa0ZBQTBEQSxPQUFPQTs7Ozs7d0JBRWpTQSxvQkFBb0JBLEtBQUlBO3dCQUN4QkEsVUFBVUE7O3dCQUVWQTt3QkFDQUEsMkJBQXVCQSxvRUFBNENBLE9BQU9BOzs7O2dDQUV0RUEsaUJBQWlCQSxJQUFJQTtnQ0FDckJBOztnQ0FFQUEsMkJBQXFCQTs7Ozt3Q0FFakJBLHdCQUF3QkE7d0NBQ3hCQSxjQUFjQSx3QkFBZUE7d0NBQzdCQSx3QkFBd0JBOzt3Q0FFeEJBLElBQUlBLHFCQUFxQkE7NENBRXJCQTs0Q0FDQUE7Ozt3Q0FHSkEsZUFBZUE7Ozs7Ozs7Z0NBR25CQSxJQUFJQSxDQUFDQTtvQ0FFREEsa0JBQWtCQTtvQ0FDbEJBOzs7Ozs7Ozt3QkFJUkEsSUFBSUE7NEJBQ0FBOzs7Ozs7OztnQkFHUkE7Ozs7Ozs7O3NCQTVGNldBOzs7Ozs7Ozs7NEJDeEI1VkE7Ozs7Z0JBRWpCQSxhQUFRQSxrQkFBUUE7Ozs7MkJBR0pBO2dCQUVaQSxRQUFRQSwwQkFBd0JBLGVBQVVBLGNBQVNBO2dCQUNuREEsSUFBSUE7b0JBQ0FBOzs7Z0JBRUpBOztnQkFFQUEsSUFBSUEsQ0FBQ0E7Z0JBQ0xBLElBQUlBLElBQUlBO29CQUNKQSxrQkFBV0EsWUFBT0EsR0FBR0EsWUFBT0EsZUFBT0EsaUJBQVVBOzs7Z0JBRWpEQSw4QkFBTUEsR0FBTkEsZUFBV0E7Z0JBQ1hBOztnQ0FHaUJBO2dCQUVqQkEsT0FBT0EsMEJBQXdCQSxlQUFVQSxjQUFTQTs7a0NBRy9CQTtnQkFFbkJBO2dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxjQUFTQTtvQkFFekJBLFFBQVFBLDBCQUF3QkEsYUFBYUEsR0FBR0Esa0JBQWdCQSxTQUFHQSw4QkFBTUEsR0FBTkE7b0JBQ25FQSxJQUFJQTt3QkFDQUE7O29CQUNKQSxJQUFJQSxDQUFDQTs7O2dCQUdUQTs7O2dCQUtBQSxJQUFJQSxnQkFBV0E7b0JBRVhBLFdBQVdBLGtCQUFRQSxrQkFBSUE7b0JBQ3ZCQSxrQkFBV0EsZUFBT0EsU0FBTUE7b0JBQ3hCQSxhQUFRQTs7Ozs7Ozs7Ozs7OzttQ0NoRGdEQSxLQUFJQTs7OztrREFDeEJBLElBQVdBLElBQW9CQTs7b0JBRXZFQSxZQUFZQSw0QkFBaUZBLFdBQUdBLEFBQTBFQTtvQkFDMUtBLFVBQVVBO29CQUNWQSxJQUFJQTt3QkFDQUEsTUFBTUEsNEJBQW9GQSxrQkFBTUEsQUFBeUhBOzs7b0JBRTdOQSxhQUFhQSw0QkFBMkVBLGFBQU1BLEFBQTBFQTttQ0FBS0EsV0FBV0E7O29CQUN4TEEsT0FBT0EsNEVBQVdBLGVBQWlCQSw0QkFBbUZBLGVBQU9BLEFBQTRFQSx3RkFBc0hBLElBQUlBOztzQ0FHOVNBLGNBQXFCQSxJQUFvQkE7O29CQUU5REEsVUFBVUEsd0NBQXFCQTtvQkFDL0JBO29CQUNBQSxJQUFJQSxxRkFBb0JBLEtBQVNBO3dCQUU3QkEsT0FBS0E7d0JBQ0xBLE9BQU9BOzs7b0JBR1hBLE9BQUtBO29CQUNMQTtvQkFDQUEsYUFBYUEsNEJBQW1GQSx1R0FBd0JBLEFBQTRFQTtvQkFDcE1BLGNBQWNBOztvQkFFZEEsVUFBVUEsNEJBQW9GQSxtQkFBT0EsQUFBeUhBO29CQUM5TkEsSUFBSUE7d0JBQ0FBLE1BQU1BOzs7b0JBRVZBLDBCQUFrQkEsNENBQXlCQTs7Ozs0QkFFdkNBLHFCQUFxQkEsZUFBaUJBLDRCQUFtRkEsZUFBT0EsQUFBNEVBOzttREFBS0EsZUFBcUJBLDRCQUF1Q0EsVUFBRUEsQUFBZ0NBOytEQUFLQSxVQUFFQTsrREFBa0JBLEFBQWdDQTs7OzRCQUN4V0EsSUFBSUEsc0NBQXlCQTtnQ0FFekJBLGNBQWNBO2dDQUNkQSxPQUFLQTs7Ozs7Ozs7b0JBSWJBLDZFQUFRQSxLQUFPQSxTQUErQkEsb0JBQWFBO29CQUMzREEsT0FBT0E7Ozs7Ozs7Ozs7bUJBdkN3S0E7OzttQkFHbURBOzs7bUJBR2dGQTs7O21CQUFwR0EsZUFBcUJBLDRCQUF3Q0EsV0FBRUEsQUFBZ0NBOzs7bUJBZU5BLG1CQUFVQTs7O21CQUF4R0EsNEJBQXdDQSxrREFBZ0JBLEFBQWlDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JDcEJsU0EsZ0VBQUtBLEtBQUlBLGtEQUFZQTs7b0JBRXJCQSxVQUFVQSxJQUFJQSxxQkFBT0E7b0JBQ3JCQSxRQUFRQTs7b0JBRVJBLEtBQUtBLFdBQVdBLElBQUlBLHNFQUFXQTt3QkFFM0JBLGNBQWNBO3dCQUNkQSxrRUFBT0EsNkJBQXNCQTs7Ozs7Z0NBSWRBLE1BQWNBO29CQUVqQ0EsV0FBYUE7O29CQUViQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFRQTt3QkFDeEJBLGdCQUFRQSx1RUFBR0EsbUJBQVNBLHdCQUFLQSxHQUFMQTs7O29CQUV4QkEsT0FBT0Esb0JBQUtBLEFBQUNBOzs7Ozs7Ozs7Ozs7OzRCQ3BCR0EsTUFBb0JBOzs7O2dCQUVwQ0EsWUFBT0E7Z0JBQ1BBLHVCQUFrQkE7Z0JBQ2xCQTs7Ozs7O2dCQUtBQSxhQUFRQSxLQUFJQTs7Z0JBRVpBOztnQkFFQUEsb0JBQW9CQSxJQUFJQSxvRUFBVUEsY0FBU0E7Z0JBQzNDQSxlQUFVQTtnQkFDVkE7O2dCQUVBQSxzQkFBc0JBLDRCQUF5R0EscUNBQTNFQTtnQkFDcERBLGdCQUFnQkEsNEJBQXlHQSxrQ0FBM0VBO2dCQUM5Q0EsT0FBT0E7b0JBRUhBLGdCQUFnQkEsSUFBSUEsb0VBQVVBLFdBQU1BO29CQUNwQ0EsZUFBVUE7O29CQUVWQSxrQkFBa0JBLEtBQUlBO29CQUN0QkEsMEJBQXNCQTs7Ozs0QkFFbEJBLGVBQWVBLHlCQUFvQkE7OzRCQUVuQ0EsSUFBSUEsNEJBQXlHQSxjQUFTQSxBQUEwR0E7MkNBQU1BLG1CQUFtQkEsSUFBSUEseUVBQWVBLGNBQWNBLFVBQVVBLFNBQVNBLGFBQWFBOztnQ0FDdFRBLGdCQUFnQkE7Ozs7Ozs7O29CQUd4QkEsMkJBQXNCQTs7Ozs0QkFFbEJBLG1CQUFtQkE7NEJBQ25CQSxjQUFjQTs0QkFDZEEsdUJBQXVCQTs7Ozs7OztvQkFHM0JBOzs7NENBSW1DQSxHQUFrQkE7Z0JBRXpEQSxpQkFBaUJBLElBQUlBLHlFQUFlQSxVQUFVQSxVQUFVQSxTQUFTQSxhQUFhQTtnQkFDOUVBLE9BQU9BLDhCQUFrQ0EsK0dBQXVIQSxZQUFNQSxBQUF5R0E7K0JBQU1BLG1CQUFtQkE7Ozs7Ozs7OztpQ0NxRGpSQSxTQUErQ0EsT0FBdUJBO29CQUU3RkEsSUFBSUE7d0JBQ0FBLE9BQU9BLG9DQUFnQkEsd0NBQW9DQTs7O29CQUUvREE7b0JBQ0FBLElBQUlBLENBQUNBLHNCQUFhQSxjQUFrQkE7d0JBQ2hDQTs7O29CQUVKQSxPQUFPQSxlQUFxQkEsY0FBTUE7OzhDQUdEQSxHQUFZQSxHQUFrQkE7b0JBRS9EQSxPQUFPQSw4QkFBa0NBLHFCQUFlQSxxQkFBYUEsQUFBa0NBOytCQUFNQSw0Q0FBdUJBOzs7Ozs7Ozs7O3NDQXJIeEdBO29CQUU1QkEsUUFBUUE7d0JBRUpBOzRCQUNJQTt3QkFDSkE7NEJBQ0lBO3dCQUNKQTs0QkFDSUE7OztvQkFHUkE7O21DQUd5QkEsR0FBR0EsU0FBNkJBOztvQkFFekRBLFNBQVNBLDRCQUFpQ0EsZ0JBQUhBO29CQUN2Q0EsSUFBSUE7d0JBQ0FBOztvQkFDSkEsSUFBSUE7d0JBQ0FBLE9BQU9BOzs7b0JBRVhBLElBQUlBLGFBQWFBO3dCQUNiQSxPQUFPQSxvQ0FBcUJBLDRCQUErQkEsU0FBR0Esd0NBQXVCQSxnQkFBa0JBLDRCQUErQkE7OztvQkFFMUlBLE9BQU9BLGVBQXFCQTs7bUNBR0hBO29CQUV6QkEsUUFBUUE7d0JBRUpBOzRCQUNJQTt3QkFDSkE7NEJBQ0lBO3dCQUNKQTs0QkFDSUE7d0JBQ0pBOzRCQUNJQTt3QkFDSkE7NEJBQ0lBO3dCQUNKQTs0QkFDSUE7d0JBQ0pBOzRCQUNJQTt3QkFDSkE7NEJBQ0lBO3dCQUNKQTs0QkFDSUE7d0JBQ0pBOzRCQUNJQTt3QkFDSkE7NEJBQ0lBOzs7b0JBR1JBLE9BQU9BLENBQUNBOztrQ0FHd0JBLEdBQUdBLE1BQTBCQTtvQkFFN0RBLE9BQU9BLDRCQUFpQ0EsYUFBS0EsbUJBQVFBOztvQ0FHOUJBLEdBQUdBLE1BQTBCQTs7b0JBRXBEQSxlQUFlQTtvQkFDZkEsVUFBVUE7b0JBQ1ZBO29CQUNBQSwwQkFBa0JBOzs7OzRCQUVkQSxRQUFRQSxNQUFNQTs0QkFDZEEsSUFBSUEsSUFBSUE7Z0NBRUpBLE1BQU1BO2dDQUNOQSxXQUFXQTs7OzRCQUdmQTs7Ozs7OztvQkFHSkEsT0FBT0E7O29DQUcyQkEsR0FBR0EsR0FBR0EsTUFBMEJBOztvQkFFbEVBLGVBQWVBLEtBQUlBO29CQUNuQkEsMEJBQWtCQTs7Ozs0QkFFZEEsSUFBSUEsQ0FBQ0EsNEJBQThCQSxjQUFTQSxBQUErQkE7OytDQUFNQSxvQkFBTUEsS0FBV0EsTUFBTUE7OztnQ0FDcEdBLGFBQWFBOzs7Ozs7OztvQkFHckJBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7OztpQ0FrQ2dCQTtvQkFFdkJBLE9BQU9BLGVBQWdCQSw0QkFBMkNBLDJCQUFtQkEsQUFBbUNBOzttQ0F3Q2pHQTtvQkFFdkJBLFFBQVFBO3dCQUVKQTs0QkFDSUE7d0JBQ0pBOzRCQUNJQTt3QkFDSkE7NEJBQ0lBOzs7b0JBR1JBOztpQ0FqRDBCQTtvQkFFMUJBLE9BQU9BLDRCQUF3Q0EsMkJBQW1CQSxBQUFnQ0EsbUdBQWFBLEFBQWlDQTs7bUNBa0Q1SEE7b0JBRXBCQSxJQUFJQTt3QkFDQUEsT0FBT0E7O29CQUNYQSxPQUFPQSxHQUFDQSxxQ0FBS0E7O2tEQW5EMkJBLE9BQTJCQTtvQkFFbkVBLFVBQVVBLDRCQUEyQ0EsMkJBQW1CQSxBQUFtQ0E7b0JBQzNHQSxPQUFPQSx5R0FBa0JBOzt5Q0FHTUEsT0FBMkJBO29CQUUxREEsVUFBVUEsNEJBQTJDQSwyQkFBbUJBLEFBQW9DQTs7b0JBUTVHQSxPQUFPQSx5R0FBa0JBOzsyQ0FHTUEsS0FBdUJBOztvQkFFdERBLFNBQVNBLDRCQUFpRkEsbUJBQVVBLEFBQXlFQTtvQkFDN0tBLEtBQUtBLFdBQVdBLElBQUlBLFVBQVVBO3dCQUUxQkEsUUFBUUEsNEhBQVNBO3dCQUNqQkEsMEJBQWtCQSxXQUFHQTs7OztnQ0FDakJBLFlBQUlBLEdBQUtBOzs7Ozs7OztvQkFHakJBLE9BQU9BLGVBQWdCQTs7dUNBeUJHQSxHQUFZQTtvQkFFdENBLE9BQU9BLDhCQUFrQ0EscUJBQWVBLHFCQUFhQSxBQUFrQ0E7O2lDQUdoRkE7b0JBRXZCQSxRQUFRQTt3QkFFSkE7NEJBQ0lBO3dCQUNKQTs0QkFDSUE7d0JBQ0pBOzRCQUNJQTt3QkFDSkE7NEJBQ0lBO3dCQUNKQTs0QkFDSUE7d0JBQ0pBOzRCQUNJQTt3QkFDSkE7NEJBQ0lBOzs7b0JBR1JBOzs7Ozs7Ozs7O21CQWxGcUpBOzs7WUFhN0lBLFFBQVFBO1lBQ1JBLElBQUlBO2dCQUNBQTs7WUFDSkEsT0FBT0E7OzttQkFRc0tBOzs7bUJBbUN4RUE7Ozs7Ozs7Ozs7Ozs7NEJDN0xoR0EsTUFBb0JBLFlBQWdCQTs7OztnQkFFakRBLFlBQU9BO2dCQUNQQSxrQkFBYUE7Z0JBQ2JBLGNBQVNBO2dCQUNUQSxJQUFJQSxlQUFVQTtvQkFDVkEsY0FBU0EsS0FBSUE7Ozs7O2dDQUdBQTtnQkFFakJBLGdCQUFXQTs7Ozs7Ozs7a0NDVCtDQSxHQUFHQTtvQkFFN0RBLFVBQVVBLDRCQUFnRkEsa0JBQU1BLEFBQXFIQTtvQkFDck5BLGdCQUFnQkEsK0RBQStEQTs7b0JBRS9FQSxlQUFlQSw0QkFBdUhBLGNBQU1BLEFBQWdIQTttQ0FBS0EsNEJBQW1DQSxnQkFBZ0JBLFdBQXJCQTs7b0JBQy9SQSxZQUFZQSxrQkFBVUE7O29CQUV0QkEsS0FBS0EsV0FBV0EsSUFBSUEsV0FBV0E7d0JBQzNCQSx5QkFBTUEsR0FBTkEsVUFBV0EsMEhBQXdGQSxVQUFTQSxBQUEwRUE7bUNBQU1BLFlBQVlBOzs7O29CQUU1TUEsTUFBTUEsNEJBQXdDQSxhQUFJQSxBQUFnQ0E7bUNBQUtBLHlCQUFNQSxZQUFZQSxJQUFsQkE7O29CQUN2RkEsWUFBWUEsK0RBQStEQTs7b0JBRTNFQSxrQkFBa0JBO29CQUNsQkEsT0FBT0EsU0FBNkNBLElBQUlBLHVFQUFlQSxPQUFPQSxxQkFBY0E7O3FDQUd6REE7b0JBRW5DQSxVQUFVQSw0QkFBb0ZBLGtCQUFNQSxBQUF5SEE7b0JBQzdOQSxZQUFZQSxrQkFBVUE7O29CQUV0QkEsS0FBS0EsV0FBV0EsSUFBSUEsV0FBV0E7d0JBQzNCQSx5QkFBTUEsR0FBTkEsVUFBV0EsMEhBQXdGQSxPQUFNQSxBQUEwRUE7bUNBQU1BLFlBQVlBOzs7O29CQUV6TUEsa0JBQWtCQTtvQkFDbEJBLE9BQU9BLElBQUlBLHVFQUFlQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7NEJBY2ZBLE9BQWVBOztnQkFFakNBLGNBQVNBO2dCQUNUQSxlQUFVQTtnQkFDVkEsbUJBQWNBO2dCQUNkQSxpQkFBWUEsZ0VBQWFBLGFBQVFBOztnQkFFakNBOzs4QkFHa0JBLE9BQWVBLEdBQU9BLEdBQU9BLE1BQVlBOztnQkFFM0RBLGNBQVNBLGtCQUFVQTtnQkFDbkJBO2dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxjQUFjQTtvQkFFOUJBO29CQUNBQSxJQUFJQSxNQUFLQSxLQUFLQSxNQUFLQTt3QkFDZkEsSUFBSUEseUJBQU1BLEdBQU5BLFlBQVdBOzt3QkFFZkEsSUFBSUEseUJBQU1BLEdBQU5BOzs7b0JBRVJBLElBQUlBO3dCQUVBQSxRQUFRQTt3QkFDUkEsT0FBT0EsU0FBU0EsK0JBQU9BLGVBQVBBLGlCQUFnQkE7NEJBQzVCQTs7O3dCQUVKQSxJQUFJQSxJQUFJQTs0QkFDSkEsa0JBQVdBLGFBQVFBLFFBQVFBLGFBQVFBLENBQUNBLHFCQUFhQSxDQUFDQSxpQkFBVUE7O3dCQUNoRUEsK0JBQU9BLEdBQVBBLGdCQUFZQTs7d0JBRVpBOzs7O2dCQUlSQSxtQkFBY0E7Z0JBQ2RBOztnQkFFQUEsaUJBQVlBLGdFQUFhQSxhQUFRQTs7OztnREFsREFBOztnQkFFakNBO2dCQUNBQSxPQUFPQSw0QkFBMkJBLElBQUlBOzs4Q0FHTEEsSUFBb0JBOztnQkFFckRBLE9BQU9BLHdGQUFxQ0EsbUJBQWtCQSxJQUFJQTs7c0NBNkNwQ0EsR0FBT0EsR0FBT0E7Z0JBRTVDQSxRQUFRQSw0QkFBcUNBLG9CQUFQQTs7Z0JBRXRDQSxVQUFFQSxHQUFLQSxVQUFFQSxPQUFLQTtnQkFDZEEsVUFBRUEsR0FBS0EsVUFBRUEsT0FBS0E7O2dCQUVkQSxJQUFJQSxVQUFFQTtvQkFDRkEsVUFBRUEsR0FBS0E7O2dCQUNYQSxJQUFJQSxVQUFFQTtvQkFDRkEsVUFBRUEsR0FBS0E7OztnQkFFWEEsZUFBZUEsbUNBQU1BLGdDQUFvQkEsVUFBVUEscUZBQW1EQSxvRkFBc0JBOztnQkFFNUhBLE9BQU9BLElBQUlBLHNDQUFZQTs7K0JBR0dBLEdBQWVBO2dCQUV6Q0EsWUFBWUEsa0JBQVVBOztnQkFFdEJBLHNCQUFzQkEsc0JBQWFBO2dCQUNuQ0EsS0FBS0EsV0FBV0EsSUFBSUEsb0JBQWVBO29CQUUvQkEsUUFBUUEsK0JBQU9BLEdBQVBBO29CQUNSQSxRQUFRQSwrQkFBT0EsR0FBUEE7O29CQUVSQSxLQUFLQSxXQUFXQSxJQUFJQSxlQUFlQTt3QkFDL0JBLFVBQUtBLENBQUNBLENBQUNBLHFCQUFPQSxnQkFBUUE7OztvQkFFMUJBLEtBQUtBLFlBQVdBLEtBQUlBLGVBQWVBO3dCQUUvQkEsSUFBSUEsQ0FBQ0EsTUFBSUEsQ0FBQ0EscUJBQU9BLGdCQUFRQTs0QkFDckJBLFNBQUtBLENBQUNBLHFCQUFPQSx3QkFBZ0JBOzs7O29CQUdyQ0EseUJBQU1BLEdBQU5BLFVBQVdBOzs7Z0JBR2ZBLGtCQUFrQkE7O2dCQUVsQkEsT0FBT0EsSUFBSUEsdUVBQWVBLE9BQU9BOzs7Z0JBS2pDQSxjQUFTQSxLQUFJQSx5REFBYUE7O29CQUV0QkEsUUFBUUEsa0JBQVNBO29CQUNqQkEsZ0JBQWdCQSw0QkFBa0ZBLG9CQUFPQSxBQUEyRUE7b0JBQ3BMQSxLQUFLQSxXQUFXQSxJQUFJQSxpQkFBaUJBO3dCQUNqQ0EsMEJBQWtCQSxrQkFBVUE7Ozs7Z0NBQ3hCQSxxQkFBRUEsR0FBRkEsMkJBQUVBLEdBQUZBLE9BQVFBLHFCQUFNQTs7Ozs7OztvQkFDdEJBLE9BQU9BOzs7OEJBSWFBO2dCQUV4QkEsT0FBT0EsWUFBT0E7OzhCQUdDQTtnQkFFZkEsSUFBSUEsU0FBU0EsUUFBUUEsaUJBQVdBO29CQUM1QkE7OztnQkFFSkEsS0FBS0EsV0FBV0EsSUFBSUEsY0FBU0E7b0JBQ3pCQSxJQUFJQSwrQkFBT0EsR0FBUEEsaUJBQWFBLGdDQUFhQSxHQUFiQTt3QkFDYkE7Ozs7Z0JBRVJBOzs7Z0JBS0FBLE9BQU9BOzs7Z0JBS1BBLE9BQU9BLGVBQWlCQSw0QkFBMkNBLDBCQUFhQSxBQUFvQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzttQkFsS3NHQTs7c0JBNkZ0S0EsSUFBSUE7bUJBQU9BLDBCQUFVQSxJQUFRQTs7O21CQUEwQkE7OzttQkFBc0JBOzs7bUJBcUM0REE7OzttQkFnQ3BFQSxlQUFxQkE7Ozs7Ozs7Ozs7NEJDeEtqSEEsV0FBaUJBOztnQkFFOUNBLGtCQUFhQTtnQkFDYkEseUJBQW9CQTs7OzsrQkFHSkE7Z0JBRWhCQSxPQUFPQSw0QkFBdUJBLGdDQUFvQkEsMEJBQTJCQSxBQUFpQ0E7MkJBQUtBLHVCQUFrQkEsR0FBR0E7OztpQ0FleEhBLEdBQWtCQTtnQkFFbENBLE9BQU9BLGlCQUFZQSxnQ0FBb0JBLDBCQUEyQkEsQUFBaUNBOzJCQUFLQSx1QkFBa0JBLEdBQUdBOzBDQUFtQkE7OzRDQWRuSEEsR0FBa0JBO2dCQUUvQ0EsT0FBT0EsNEJBQXVCQSxnQ0FBb0JBLDBCQUEyQkEsQUFBaUNBO29CQUUxR0EsSUFBSUEsTUFBS0E7d0JBQ0xBLE9BQU9BOzs7b0JBRVhBLE9BQU9BLHVCQUFrQkEsR0FBR0E7OzswQ0FVTEEsR0FBa0JBLFVBQW9DQTtnQkFFakZBLE9BQU9BLGlCQUFZQSxnQ0FBb0JBLDBCQUEyQkEsQUFBaUNBO29CQUUvRkEsSUFBSUEsTUFBS0E7d0JBQ0xBLE9BQU9BOzs7b0JBRVhBLE9BQU9BLHVCQUFrQkEsR0FBR0E7MENBQ2RBOzttQ0FHRUEsWUFBdUJBO2dCQUUzQ0EsYUFBV0EsS0FBSUE7Z0JBQ2ZBLE9BQU9BLG1CQUFZQSxlQUFlQTs7cUNBRXJCQSxZQUF1QkEsR0FBT0E7O2dCQUUzQ0EsSUFBSUEsS0FBS0E7b0JBRUxBOzs7Z0JBR0pBLGFBQWFBLG1CQUFXQTtnQkFDeEJBLE9BQU9BO29CQUVIQSxZQUFZQSxXQUFTQSxBQUFDQTs7b0JBRXRCQSxxQkFBcUJBLEtBQUlBLGlEQUFXQTtvQkFDcENBLDBCQUF5QkEsOENBQWlDQTs7Ozs0QkFDdERBLHVCQUFlQSxVQUFmQSx1QkFBZUEsY0FBYUEsQ0FBQ0E7Ozs7Ozs7b0JBRWpDQSxJQUFJQSxtQkFBWUEsZ0JBQWdCQSxlQUFPQTt3QkFFbkNBLGFBQVNBLEdBQUtBO3dCQUNkQTs7O29CQUdKQSxvQkFBVUE7OztnQkFHZEE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRDQ2pFd0RBLEtBQUlBOzs0QkFFbkNBLEdBQU9BLGtCQUErQkE7Ozs7O2dCQUUvREEsdUJBQWtCQTtnQkFDbEJBLHdCQUFtQkE7Z0JBQ25CQSxxQkFBZ0JBO2dCQUNoQkEsSUFBSUE7b0JBRUFBLG1CQUFjQSxLQUFJQTtvQkFDbEJBLG9CQUFlQSxLQUFJQTs7Ozs7K0JBSVBBLE9BQXNCQTtnQkFFdENBLElBQUlBO29CQUNBQSxPQUFPQSw2QkFBd0JBLE9BQU9BOzs7Z0JBRTFDQSxPQUFPQSxxQkFBZ0JBLE9BQU9BOzt1Q0FHYkEsT0FBc0JBOztnQkFFdkNBLEtBQUtBLFdBQVdBLElBQUlBLGVBQWVBO29CQUUvQkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsZUFBZUE7d0JBRW5DQSxRQUFRQSxnQ0FBYUEsR0FBYkE7d0JBQ1JBLFFBQVFBLGdDQUFhQSxHQUFiQTt3QkFDUkEsZ0JBQWdCQSxNQUFJQTs7d0JBRXBCQTt3QkFDQUEsMEJBQThCQSx1QkFBa0JBOzs7O2dDQUU1Q0E7O2dDQUVBQSx1QkFBa0JBO2dDQUNsQkEsS0FBS0EsV0FBV0EsSUFBSUEsMEJBQXFCQTtvQ0FFckNBLElBQUlBLHNCQUFpQkEsZ0ZBQWdCQSxHQUFoQkE7d0NBQ2pCQTs7O29DQUVKQSxpQkFBaUJBLElBQUlBLHlFQUFlQSxjQUFjQSxHQUFHQSxHQUFHQSx3Q0FBZ0JBLEdBQWhCQSx3QkFBb0JBO29DQUM1RUEsSUFBSUEsbUJBQW1CQTt3Q0FFbkJBO3dDQUNBQTs7OztnQ0FJUkEsSUFBSUEsQ0FBQ0E7b0NBRURBO29DQUNBQTs7Ozs7Ozs7d0JBSVJBLElBQUlBOzRCQUNBQTs7Ozs7Z0JBSVpBOzsrQ0FHeUJBLE9BQXNCQTs7Z0JBRS9DQSxjQUFjQSxJQUFJQTtnQkFDbEJBLHFCQUFZQSxPQUFTQTs7Z0JBRXJCQSxlQUFlQSxJQUFJQTtnQkFDbkJBLHNCQUFhQSxPQUFTQTs7Z0JBRXRCQSxpQkFBaUJBLEtBQUlBO2dCQUNyQkEsS0FBS0EsV0FBV0EsSUFBSUEsZUFBZUE7b0JBQy9CQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxlQUFlQTt3QkFDbkNBLGVBQWVBLFNBQW9CQSxVQUFHQTs7OztnQkFFOUNBLDBCQUFtQkEsNEJBQW1FQSxvQkFBV0EsQUFBMkRBOytCQUFNQSx5Q0FBQ0EsZ0NBQWFBLFVBQWJBLG1CQUF5QkEsZ0NBQWFBLFVBQWJBOzs7Ozt3QkFFeExBLFNBQVFBO3dCQUNSQSxTQUFRQTs7d0JBRVJBLFFBQVFBLGdDQUFhQSxJQUFiQTt3QkFDUkEsUUFBUUEsZ0NBQWFBLElBQWJBO3dCQUNSQSxnQkFBZ0JBLE1BQUlBOzt3QkFFcEJBO3dCQUNBQSwyQkFBOEJBLHVCQUFrQkE7Ozs7Z0NBRTVDQTs7Z0NBRUFBLHVCQUFrQkE7Z0NBQ2xCQSxnQkFBZ0JBLGdDQUFvQkEsNkNBQXVDQSxBQUFrQ0Esa0hBQXVDQSxBQUFrQ0E7Z0NBQ3RMQSwyQkFBeUJBOzs7O3dDQUVyQkEsSUFBSUEsc0JBQWlCQTs0Q0FDakJBOzs7d0NBRUpBLGlCQUFpQkEsSUFBSUEseUVBQWVBLGNBQWNBLElBQUdBLElBQUdBLFVBQVVBO3dDQUNsRUEsSUFBSUEsbUJBQW1CQTs0Q0FFbkJBOzRDQUNBQSxZQUFZQSxlQUFlQSxJQUFHQSxJQUFHQTs0Q0FDakNBOzs0Q0FJQUEsYUFBYUEsZUFBZUEsSUFBR0EsSUFBR0E7Ozs7Ozs7O2dDQUkxQ0EsSUFBSUEsQ0FBQ0E7b0NBRURBO29DQUNBQTtvQ0FDQUE7Ozs7Ozs7O3dCQUlSQSxJQUFJQTs0QkFFQUEseUJBQW9CQTs0QkFDcEJBOzs7Ozs7OztnQkFJUkE7O3lDQUdtQkE7Z0JBRW5CQSwyQkFBc0JBLEtBQUtBO2dCQUMzQkEsa0JBQWtCQTtnQkFDbEJBLE9BQU9BLGVBQWVBO29CQUNsQkE7O2dCQUNKQSxJQUFJQSxjQUFjQTtvQkFDZEEsdUJBQWtCQSxrQkFBVUE7OztnQkFFaENBO2dCQUNBQSxPQUFPQSxTQUFTQTtvQkFFWkE7b0JBQ0FBLGNBQVFBOztvQkFFUkEsT0FBT0E7d0JBQ0hBLHVCQUFZQSxzQkFBY0EscURBQThDQTs7O29CQUU1RUEsd0NBQWdCQSxRQUFoQkEseUJBQTBCQTtvQkFDMUJBOzs7eUNBSTRCQTs7Z0JBRWhDQTtnQkFDQUEsSUFBSUEsQ0FBQ0Esc0NBQWlDQSxXQUFlQTtvQkFFakRBLFdBQVdBO29CQUNYQSxpQkFBaUJBLGdFQUFnRUE7b0JBQ2pGQSxZQUFVQSxLQUFJQSxxRkFBa0JBOztvQkFFaENBLDBCQUEwQkE7Ozs7NEJBRXRCQSxhQUFhQSxLQUFJQSxrREFBWUE7NEJBQzdCQSxjQUFZQTs7NEJBRVpBLDJCQUFxQkE7Ozs7b0NBRWpCQTtvQ0FDQUEsMkJBQWtCQTs7Ozs0Q0FDZEEsU0FBS0EsYUFBS0E7Ozs7Ozs7b0NBRWRBLFdBQVdBOzs7Ozs7Ozs7Ozs7O29CQUluQkEsOEJBQXFCQSxXQUFhQTs7O2dCQUd0Q0EsT0FBT0E7Ozs7Ozs7OzttQkF2Rm1IQSx3Q0FBZ0JBLEdBQWhCQTs7O21CQUEwRUE7Ozs7Ozs7dUNDdEQvSkE7b0JBRXJDQSxPQUFPQSxJQUFJQSx3REFBU0EsR0FBR0E7Ozs7Ozs7Ozs0QkEvQ1hBOztnQkFFWkEsYUFBUUE7OzhCQUdJQSxHQUFVQTs7Ozs7OEJBaUJFQTtnQkFFeEJBLE9BQU9BLFlBQU9BOzs4QkFHQ0E7Z0JBRWZBLElBQUlBLENBQUNBO29CQUNEQTs7O2dCQUVKQSxPQUFPQSw0QkFBMENBLDBCQUFNQTs7O2dCQUt2REEsT0FBT0EsNEJBQTBDQSxzQkFBTUEsa0JBQWFBLEFBQXFDQTs7O2dCQUt6R0EsT0FBT0EsZUFBc0JBOzs7Ozs7OztzQkFMNkVBLEdBQUdBO21CQUFNQSxxQkFBS0EsS0FBSUE7Ozs7Ozs7Ozs7OztvQkNwQ25GQSxPQUFPQSw0QkFBc0lBLHdDQUFrQkEsQUFBMktBOzs7Ozs7a0NBSDVVQSxLQUFJQTs7NEJBb0J0QkE7O2dCQUVyQkEsZ0JBQVdBOzs7OytCQWpCVUE7Z0JBSWpCQTtnQkFDQUEsSUFBSUEsQ0FBQ0EsNEJBQXVCQSxZQUFnQkE7b0JBRXhDQSxNQUFJQSxJQUFJQSxxREFBYUE7b0JBQ3JCQSxvQkFBV0EsWUFBY0E7OztnQkFHN0JBLE9BQU9BOzsrQkFTS0E7Z0JBRWhCQSxhQUFLQSxxQkFBcUJBLGFBQUtBOzt1Q0FFUEE7Z0JBRXhCQSxPQUFPQSw0QkFBdUJBOzs7Ozs7Ozs7bUJBNUIyVkE7Ozs7Ozs7Ozs7Ozs7Ozs7O3NDQzREdFdBLE1BQWNBO29CQUVqQ0EsU0FBT0Esb0JBQUtBLEFBQUNBLGlDQUFNQSxhQUFPQTs7MENBcUhMQSxTQUFxQ0E7b0JBRTFEQSxPQUFPQSw2RUFBYUEsU0FBU0E7O3dDQUdXQSxTQUFxQ0E7b0JBRTdFQSxPQUFPQSw0QkFBdUNBLFlBQUlBLEFBQWdDQTttQ0FBS0Esc0JBQWNBLHNCQUFzQkE7OzsrQ0FFNUVBLFNBQXFDQTtvQkFFcEZBLE9BQU9BLDRCQUF1Q0EsWUFBSUEsQUFBZ0NBO21DQUFLQSxzQkFBY0Esc0JBQXNCQTs7O3FDQWlDbEdBO29CQUV6QkEsT0FBT0EsTUFBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkEvTUVBLFFBQW1CQTs7Z0JBRWhDQSxjQUFTQTtnQkFDVEEsV0FBTUE7Z0JBQ05BLFlBQU9BO2dCQUNQQSxTQUFJQTtnQkFDSkEsZ0JBQVdBLElBQUlBLHNEQUFTQSw0QkFBd0NBLG9CQUFPQSxBQUFpQ0E7O2dCQUV4R0EsY0FBU0E7Z0JBQ1RBLGtCQUFhQSw0QkFBa0NBO2dCQUMvQ0EsZUFBVUEsS0FBSUE7Z0JBQ2RBLDJCQUFzQkEsS0FBSUE7Z0JBQzFCQTs7OzsrQkFkYUE7Z0JBQWVBLE9BQU9BLG9CQUFPQTs7O2dCQW1CMUNBLGlCQUFZQSxBQUFLQSxBQUFDQTtnQkFDbEJBLHdEQUFlQSxvQkFBV0EsQUFBTUEsQUFBQ0E7O2dCQUVqQ0E7Z0JBQ0FBOztnQkFFQUEsc0JBQWlCQSw0QkFBa0VBLG9CQUFPQSxBQUEyREEseUVBQXNJQSxBQUE0REEscURBQWdDQSxBQUEyREE7O2dCQUVsYkEscUJBQXFCQTtnQkFDckJBLEtBQUtBLFdBQVdBLElBQUlBLG9CQUFlQTtvQkFFL0JBLGFBQWFBLHFCQUFRQTs7b0JBRXJCQSx3REFBZUEsb0JBQVdBOztvQkFFMUJBLElBQUlBLGlCQUFnQkE7d0JBRWhCQSw2QkFBd0JBO3dCQUN4QkEsaUJBQWlCQTs7OztnQkFJekJBLDZCQUF3QkE7O2dDQVFQQTtnQkFFakJBLGdCQUFXQTs7Z0JBRVhBLElBQUlBO29CQUNBQSxvQkFBT0EsWUFBY0EscURBQU9BLGFBQXFCQSwwQkFBWUE7OztnQkFFakVBLFlBQU9BLDRDQUFVQTs7Z0JBRWpCQTs7eUNBRzBCQTs7Z0JBRTFCQSwwQkFBcUJBOzs7O3dCQUNqQkEsb0JBQU9BLFlBQWNBLHFEQUFPQSxhQUFxQkEsMEJBQVlBOzs7Ozs7O2dCQUVqRUE7OztnQkFLQUEsWUFBWUEsSUFBSUEsa0NBQVVBLDRCQUFvQ0Esb0JBQU5BLGVBQWVBO2dCQUN2RUEsYUFBYUE7Z0JBQ2JBLGlCQUFpQkE7Z0JBQ2pCQSxrQkFBa0JBOztnQkFFbEJBOztnQkFFQUEsT0FBT0E7OzhCQUdpQkE7Z0JBRXhCQSxPQUFPQSxZQUFPQTs7OEJBR0NBO2dCQUVmQSxJQUFJQSxTQUFTQTtvQkFDVEE7O2dCQUNKQSxJQUFJQSxjQUFRQTtvQkFDUkE7O2dCQUNKQSxJQUFJQSxXQUFLQTtvQkFDTEE7OztnQkFFSkEsSUFBSUEsNEJBQTJDQSwyQkFBT0E7b0JBRWxEQSxJQUFJQSxjQUFRQTt3QkFDUkE7OztvQkFFSkEsSUFBSUEsd0JBQWtCQSx3QkFDbkJBLENBQUNBLHdCQUFrQkEsd0JBQXdCQSwwQkFBb0JBLDBCQUM5REEsd0JBQWtCQSwwQkFBMEJBLDBCQUFvQkE7d0JBQ2hFQTs7O29CQUVKQTs7O2dCQUdKQSxPQUFPQSxxQkFBZ0JBLFVBQVVBOzt1Q0FHY0E7Z0JBRS9DQSxJQUFJQSxDQUFDQSw0QkFBa0VBLHFCQUFRQSxBQUEyREEsMkRBQTZCQSw0QkFBa0VBLHNCQUFjQSxBQUEyREE7b0JBQzlTQSxPQUFPQTs7O2dCQUVYQSxtQkFBbUJBLEtBQUlBO2dCQUN2QkEsS0FBS0EsV0FBV0EsSUFBSUEsNENBQStCQTtvQkFFL0NBLGFBQWFBLEtBQUlBO29CQUNqQkEsZUFBZUEsS0FBSUE7O29CQUVuQkEsS0FBS0EsUUFBUUEsaUNBQW9CQSxJQUFJQSxJQUFJQSxpQ0FBb0JBLGdCQUFRQTt3QkFFakVBLFdBQVdBLHFCQUFRQTt3QkFDbkJBLGFBQWFBLHNCQUFjQTs7O29CQUcvQkEsaUJBQWlCQSxTQUFnQ0EsZUFBUUE7OztnQkFHN0RBLE9BQU9BLDRCQUFpVEEsa0VBQXFLQSw0QkFBeVNBLHFCQUFhQSxBQUFrU0Esc0RBRWhrQ0EsQUFBMFNBLGtGQUM1UEEsQUFBOElBOytCQUFXQSwyQkFBc0JBLFNBQVNBOzs7c0NBR3BMQTtnQkFFdkNBLE9BQU9BLFNBQWdDQSw0QkFBd0pBLG9CQUFRQSxBQUE2TEEsMEVBQXlCQSw0QkFBd0pBLG9CQUFRQSxBQUE2TEE7OzZDQUdudUJBLFNBQXFDQTtnQkFFNURBLEtBQUtBLFdBQVdBLElBQUlBLG1CQUFjQTtvQkFFOUJBLG9CQUFvQkEsaURBQWFBLFNBQVNBLG9CQUFPQTtvQkFDakRBLElBQUlBLGlCQUFpQkEscUJBQWFBO3dCQUM5QkE7Ozs7Z0JBR1JBLElBQUlBLGNBQVFBO29CQUNSQTs7O2dCQUVKQSxJQUFJQSx3QkFBa0JBO29CQUNsQkE7OztnQkFFSkEsV0FBV0EsbUJBQVFBLHFCQUFnQkE7Z0JBQ25DQSxhQUFhQSxBQUFzQ0EsVUFBQ0E7d0JBQU9BLFFBQVFBO3dCQUFzQkEsUUFBUUE7d0JBQXdCQSxPQUFPQTtzQkFBN0ZBLEtBQUlBOztnQkFFdkNBLE9BQU9BLG1EQUEwQ0EsNEJBQW1DQSwrQ0FBYUEsU0FBU0EsY0FBM0JBLGVBQWtDQTs7b0NBaUI1RkE7Z0JBRXJCQSxJQUFJQSxTQUFTQTtvQkFDVEE7O2dCQUNKQSxJQUFJQSxjQUFRQTtvQkFDUkE7O2dCQUNKQSxJQUFJQSxXQUFLQTtvQkFDTEE7O2dCQUNKQSxJQUFJQSxZQUFPQTtvQkFDUEE7OztnQkFFSkEsSUFBSUEsNEJBQTJDQSwyQkFBT0E7b0JBRWxEQSxJQUFJQSxjQUFRQTt3QkFDUkE7OztvQkFFSkEsSUFBSUEsd0JBQWtCQSx3QkFDbkJBLENBQUNBLHdCQUFrQkEsd0JBQXdCQSwwQkFBb0JBLDBCQUM5REEsd0JBQWtCQSwwQkFBMEJBLDBCQUFvQkE7d0JBQ2hFQTs7OztnQkFHUkE7OztnQkFLQUEsT0FBT0E7OztnQkFVUEEsT0FBT0E7OztnQkFLUEEsT0FBT0E7OztnQkFLUEEsT0FBT0EsZUFBaUJBLDRCQUEyQ0Esb0JBQU9BLEFBQW9DQTs7O2dCQUs5R0EsT0FBT0Esb0VBQTJDQSxvQkFBT0EsQUFBeUNBOzs7Ozs7Ozs7bUJBN05XQTs7O21CQWlCNkNBLFNBQW9CQSxVQUFHQSw0QkFBbUNBLG1CQUFPQSxBQUFrQ0E7K0JBQUtBLGtDQUFXQTs7OzttQkFBK0VBOzs7bUJBQTJGQTs7O21CQTBHb29CQSw0QkFBdUxBLDRDQUF5QkEsd0JBQWdCQSxBQUFnTEE7MkJBQUtBLFNBQWdDQSxpQkFBVUEsc0JBQWFBOzs7O21CQUU3dENBLG9CQUFlQTs7O21CQU1nRkE7OzttQkFxRnRSQTs7c0JBS2hCQSxPQUFPQTttQkFBTUEsK0JBQVVBLENBQUNBLHlCQUFrQkE7Ozs7Ozs7Ozs7Ozs7Ozs7O21DQ3hQdEhBLEdBQUdBO29CQUUxQkEsVUFBVUEsSUFBSUEscUJBQU9BO29CQUNyQkEsUUFBUUE7b0JBQ1JBLE9BQU9BO3dCQUVIQTt3QkFDQUEsUUFBUUEsV0FBU0E7d0JBQ2pCQSxZQUFVQSwyQkFBS0E7d0JBQ2ZBLDJCQUFLQSxHQUFLQSwyQkFBS0E7d0JBQ2ZBLDJCQUFLQSxHQUFLQTs7O3NDQUlZQTs7b0JBRTFCQSxVQUFVQSxJQUFJQSxxQkFBT0E7b0JBQ3JCQSxRQUFRQTtvQkFDUkEsT0FBT0E7d0JBRUhBO3dCQUNBQSxRQUFRQSxXQUFTQTs7d0JBRWpCQSxLQUFxQkE7Ozs7Z0NBRWpCQSxZQUFZQSwyQkFBS0E7Z0NBQ2pCQSwyQkFBS0EsR0FBS0EsMkJBQUtBO2dDQUNmQSwyQkFBS0EsR0FBS0E7Ozs7Ozs7O2tDQUtPQSxHQUFHQTtvQkFFNUJBLE9BQU9BLEFBQW9DQSxVQUFDQTs0QkFBUUEsU0FBU0E7NEJBQUdBLE9BQU9BOzBCQUExQ0EsS0FBSUE7O3dDQUdPQSxHQUFHQSxRQUE0QkE7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FFdkVBO2dEQUNBQSwwQkFBaUJBOzs7Ozs7Ozs7Ozs7Ozs0Q0FFYkEsSUFBSUEsVUFBVUE7Ozs7Ozs7OzRDQUNWQSxzQkFBYUE7Ozs7Ozs7Ozs0Q0FFakJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztzQ0FJcUJBLEdBQUdBLFFBQTRCQTs7b0JBRXhEQTtvQkFDQUEsMEJBQWtCQTs7Ozs0QkFFZEEsSUFBSUEsVUFBVUE7Z0NBQ1ZBLE9BQU9BOzs7NEJBRVhBOzs7Ozs7O29CQUdKQSxPQUFPQTs7c0NBR3FCQSxRQUFpQ0E7b0JBRTdEQSxZQUFZQSw0QkFBcUNBO29CQUNqREEsSUFBSUE7d0JBQ0FBOztvQkFDSkEsSUFBSUE7d0JBQ0FBLE9BQU9BLDRCQUFxQ0E7O29CQUNoREEsSUFBSUE7d0JBQ0FBLE9BQU9BLGlEQUF5Q0EsK0JBQXNCQSw0QkFBeUNBOzs7b0JBRW5IQSxPQUFPQSxvQ0FBdUJBLDRCQUFvQ0EsYUFBT0EseUJBQXREQSxxQkFBOEVBLDRCQUF5Q0Esa0JBQU9BOztxQ0FHekhBLEdBQUdBLE1BQW1CQSxXQUF5QkE7b0JBRXZFQTtvQkFDQUEsS0FBS0EsUUFBUUEsc0JBQWdCQSxRQUFRQTt3QkFFakNBLElBQUlBLFVBQVVBLGFBQUtBOzRCQUVmQSxVQUFVQSxhQUFLQTs7NEJBRWZBLGNBQWNBOzRCQUNkQTs7OztvQkFJUkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OytCQ3hGU0EsSUFBSUEscUJBQU9BO3FDQXFpQlVBLEFBQXlDQSwyQkFBbkJBLEtBQUlBO3NDQUV6QkEsQUFBeUNBLDJCQUFuQkEsS0FBSUE7Ozs7MkNBL014Q0EsR0FBU0E7b0JBRWpDQSxJQUFJQSxRQUFPQTt3QkFBS0E7O29CQUNoQkEsSUFBSUEsUUFBT0E7d0JBQUtBOzs7b0JBRWhCQSw2QkFBNkJBO29CQUM3QkEsNkJBQTZCQTs7b0JBRTdCQSw2QkFBNkJBO29CQUM3QkEsNkJBQTZCQTs7b0JBRTdCQSw2QkFBNkJBO29CQUM3QkEsNkJBQTZCQTs7b0JBRTdCQSxJQUFJQSxDQUFDQSw2QkFBNkJBO3dCQUM5QkE7OztvQkFFSkE7O3NDQUUwQkEsR0FBU0E7b0JBRW5DQSxJQUFJQSxDQUFDQSxpQ0FBZ0JBLEdBQUdBO3dCQUNwQkE7OztvQkFFSkEsT0FBT0EsV0FBV0E7O3VDQXREU0EsR0FBU0E7b0JBRXBDQSxPQUFPQSxBQUFRQSxLQUFLQSxRQUFRQSxBQUFRQSxLQUFLQSxRQUNsQ0EsQUFBUUEsS0FBS0EsUUFBUUEsQUFBUUEsS0FBS0EsUUFBUUEsU0FBU0E7O3lDQUUvQkEsR0FBU0E7b0JBRXBDQSxPQUFPQSxDQUFDQSxDQUFDQSxnQ0FBS0E7O3VDQWlkYUEsR0FBU0E7b0JBRXBDQSxPQUFPQSxnQkFBZ0JBOzt1Q0FFSUEsR0FBU0E7b0JBRXBDQSxPQUFPQSxPQUFPQTs7eUNBRWFBLEdBQU9BO29CQUVsQ0EsUUFBUUE7b0JBQ1JBLEtBQUtBLFdBQVdBLElBQUlBLEdBQUdBO3dCQUNuQkEsb0NBQUtBOzs7b0JBRVRBO29CQUNBQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBOXdCVUEsT0FBT0E7Ozs7O29CQUVJQSxPQUFPQTs7Ozs7OztvQkFhRUEsT0FBT0E7Ozs7O29CQUNHQSxPQUFPQTs7Ozs7b0JBQ2RBLE9BQU9BOzs7OztvQkFDUkEsT0FBT0E7Ozs7O29CQUNoQkEsT0FBT0E7Ozs7Ozs7Ozs7OztvQkFTTUEsT0FBT0E7Ozs7O29CQUNBQSxPQUFPQTs7Ozs7b0JBeXdCckRBO29CQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTt3QkFDbkJBLFNBQUtBLGdCQUFVQTs7O29CQUVuQkEsT0FBT0E7Ozs7O29CQU9QQTtvQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7d0JBQ25CQSxNQUFNQSxTQUFTQSxLQUFLQSxZQUFPQTs7O29CQUUvQkEsT0FBT0E7Ozs7O29CQU9QQSxVQUFVQTtvQkFDVkEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7d0JBQ25CQSxNQUFNQSxTQUFTQSxLQUFLQSxZQUFPQTs7O29CQUUvQkEsT0FBT0E7Ozs7O29CQU9QQTtvQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7d0JBQ25CQSxNQUFNQSxTQUFTQSxLQUFLQSxlQUFVQTs7O29CQUVsQ0EsT0FBT0E7Ozs7O29CQU9QQTtvQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7d0JBQ25CQSxNQUFNQSxTQUFTQSxLQUFLQSxjQUFTQTs7O29CQUVqQ0EsT0FBT0E7Ozs7OzhCQWx5QkZBLGFBQXVCQTs7OztnQkFFaENBLFNBQUlBLGtCQUFLQSxBQUFDQSxDQUFDQSxJQUFJQSxVQUFVQSxNQUFJQSxrQkFBSUE7Z0JBQ2pDQSxvQkFBZUE7O2dCQUVmQSxpQkFBWUEsZ0NBQW9CQTtnQkFDaENBLGlCQUFZQSxpREFBU0EsUUFBR0E7Z0JBQ3hCQSxnQkFBV0EsaURBQVNBLFFBQUdBOztnQkFFdkJBO2dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtvQkFFbkJBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLFFBQUdBO3dCQUV2QkEsSUFBSUEsb0JBQVlBOzRCQUVaQSxvQkFBVUEsR0FBR0E7NEJBQ2JBLG9CQUFVQSxHQUFHQTs7NEJBRWJBLElBQUlBLG9CQUFZQTtnQ0FDWkEsbUJBQVNBLEdBQUdBOzs0QkFDaEJBLElBQUlBLG9CQUFZQTtnQ0FDWkEsbUJBQVNBLEdBQUdBOzs7O3dCQUdwQkE7Ozs7Z0JBSVJBOzs0QkFFU0EsVUFBa0JBOzs7O2dCQUUzQkEsaUJBQVlBO2dCQUNaQSxTQUFJQTtnQkFDSkEsb0JBQWVBOztnQkFFZkEsaUJBQVlBLGdDQUFvQkE7Z0JBQ2hDQSxnQkFBV0EsaURBQVNBLFFBQUdBOztnQkFFdkJBOzs7OytCQXpGYUEsR0FBT0E7Z0JBRWRBLE9BQU9BLG9CQUFVQSxHQUFHQTs7NENBMEJJQTtnQkFFOUJBLFFBQVFBOztnQkFFUkEsa0JBQWtCQSxLQUFJQTtnQkFDdEJBLEtBQUtBLFdBQVdBLElBQUlBLEdBQUdBO29CQUVuQkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsR0FBR0E7d0JBRXZCQSxJQUFJQSxpQkFBYUEsWUFBWUE7NEJBQ3pCQTs7NEJBQ0NBLElBQUlBLGlCQUFhQSxZQUFZQTtnQ0FDOUJBLGdCQUFnQkE7O2dDQUVoQkE7Ozs7OztnQkFJWkEsT0FBT0EsSUFBSUEsd0JBQU1BOzs7Z0JBZ0RqQkEsVUFBS0EsS0FBSUEsc0NBQVVBOztnQkFnQm5CQTtnQkFDQUE7OztnQkFLQUEsa0JBQWFBLEtBQUlBLDRHQUFzQkE7O2dCQWN2Q0EsNEJBQXVCQSxLQUFJQSw0R0FBc0JBOztnQkFjakRBLHFCQUFnQkEsS0FBSUEsNEdBQXNCQTs7Z0JBYzFDQSxvQkFBZUEsS0FBSUEsNEdBQXNCQTs7Z0JBY3pDQSx1QkFBa0JBLEtBQUlBLDRHQUFzQkE7O2dCQVU1Q0EsMkJBQXNCQSxJQUFJQSwrQkFBb0JBOztnQkFFOUNBLHNCQUFpQkEsS0FBSUEseURBQVlBOztvQkFFekJBLFFBQVFBLGtCQUFRQTtvQkFDaEJBLDBCQUFrQkE7Ozs7NEJBQ2RBLHFCQUFFQSxHQUFGQSxNQUFPQSxZQUFPQTs7Ozs7OztvQkFFbEJBLE9BQU9BOzs7Z0JBR2ZBLHdCQUFtQkEsS0FBSUEseURBQVlBOztvQkFFL0JBLFFBQVFBLGtCQUFRQTtvQkFDaEJBLDBCQUFrQkE7Ozs7NEJBQ2RBLHFCQUFFQSxHQUFGQSxNQUFPQSxjQUFTQTs7Ozs7OztvQkFFcEJBLE9BQU9BOzs7Z0JBR1hBLHlCQUFvQkEsS0FBSUEseURBQVlBOztvQkFFaENBLFFBQVFBLGtCQUFRQTtvQkFDaEJBLDBCQUFrQkE7Ozs7NEJBQ2RBLHFCQUFFQSxHQUFGQSxNQUFPQSxlQUFVQTs7Ozs7OztvQkFFckJBLE9BQU9BOzs7Z0JBR1hBLHdCQUFtQkEsS0FBSUEseURBQVlBOztvQkFFM0JBLFFBQVFBLGtCQUFRQTtvQkFDaEJBLFNBQVNBLGtCQUFRQTtvQkFDakJBLDBCQUFrQkE7Ozs7NEJBQ2RBLHFCQUFFQSxHQUFGQSxNQUFPQSxxREFBcUJBOzs7Ozs7O29CQUVoQ0E7b0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLEdBQUdBO3dCQUVuQkEsMkJBQWtCQTs7OztnQ0FFZEEsc0JBQUdBLElBQUhBLE9BQVFBLG9CQUFLQSxBQUFDQSxjQUFDQSxxQkFBRUEsSUFBRkEsWUFBYUEscUJBQUVBLElBQUZBO2dDQUM1QkEsMkJBQWtCQSx1QkFBVUE7Ozs7d0NBRXhCQSxzQkFBR0EsSUFBSEEsOEJBQUdBLElBQUhBLE9BQVNBLHFCQUFFQSxHQUFGQTs7Ozs7Ozs7Ozs7Ozt3QkFJakJBLDJCQUFrQkE7Ozs7Z0NBQ2RBLHFCQUFFQSxJQUFGQSxNQUFPQSxzQkFBR0EsSUFBSEE7Ozs7Ozs7O29CQUdmQSxPQUFPQTs7O2dCQUdmQSx3QkFBbUJBLEtBQUlBLHlEQUFZQTs7b0JBRS9CQSxRQUFRQSxrQkFBUUE7b0JBQ2hCQSwwQkFBa0JBOzs7OzRCQUVkQSxxQkFBRUEsR0FBRkEsTUFBT0EscURBQXFCQTs7NEJBRTVCQSwyQkFBa0JBLHVCQUFVQTs7OztvQ0FFeEJBLHFCQUFFQSxHQUFGQSw0QkFBRUEsR0FBRkEsTUFBUUEsbUJBQUlBLHFEQUFxQkE7O29DQUVqQ0EsMkJBQWtCQSx1QkFBVUE7Ozs7NENBRXhCQSxJQUFJQSxNQUFLQTtnREFDTEEscUJBQUVBLEdBQUZBLDRCQUFFQSxHQUFGQSxNQUFRQSxtQkFBSUEscURBQXFCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBS2pEQSxPQUFPQTs7OztnQkFLWEEsd0JBQW1CQSxLQUFJQSw4R0FBc0JBO2dCQUM3Q0EsMkJBQXNCQSxLQUFJQSw4R0FBc0JBO2dCQUNoREEsNkJBQXdCQSxLQUFJQSw4R0FBc0JBO2dCQUNsREEsc0JBQWlCQSxLQUFJQSw0R0FBc0JBO2dCQUMzQ0EsK0JBQTBCQSxLQUFJQSw4R0FBc0JBOzs7Z0JBTXBEQSxPQUFPQSxlQUFpQkEsNEJBQTBDQSw4QkFBaUJBLEFBQW1DQTs7O2dCQUl0SEEsT0FBT0E7OzhCQUVpQkE7Z0JBRXhCQSxRQUFRQTtnQkFDUkEsSUFBSUEsZ0NBQUtBO29CQUFNQTs7O2dCQUVmQSxJQUFJQSxXQUFLQTtvQkFBS0E7O2dCQUNkQSxJQUFJQSxXQUFLQTtvQkFBS0E7OztnQkFFZEEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7b0JBQ25CQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxRQUFHQTt3QkFDdkJBLElBQUlBLG9CQUFVQSxHQUFHQSxRQUFNQSxVQUFFQSxHQUFHQTs0QkFBSUE7Ozs7O2dCQUV4Q0E7O3VDQVl5QkE7O2dCQUV6QkEsZUFBZUEsaURBQVNBLFFBQUdBOztnQkFFM0JBLEtBQUtBLFdBQVdBLElBQUlBLFFBQUdBO29CQUNuQkEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7d0JBQ25CQSxjQUFTQSxVQUFFQSxJQUFJQSxVQUFFQSxLQUFNQSxvQkFBVUEsR0FBR0E7Ozs7Z0JBRTVDQSxtQkFBeUJBO2dCQUN6QkEsSUFBSUEscUJBQWdCQTtvQkFFaEJBLGVBQWVBLEtBQUlBO29CQUNuQkEsU0FBU0E7O29CQUVUQSwwQkFBa0JBOzs7OzRCQUNkQSxpQkFBaUJBLDBCQUFhQSxXQUFHQTs7Ozs7Ozs7Z0JBR3pDQSxPQUFPQSxJQUFJQSxzQkFBTUEsVUFBVUE7O2dDQXlDVkEsR0FBU0E7Z0JBRTFCQSxPQUFPQSxnQkFBU0EsR0FBR0EsU0FBU0EsQUFBMEZBOztrQ0FHckdBLEdBQVNBLFNBQWNBO2dCQUV4Q0EsSUFBSUEsU0FBSUE7b0JBQUtBOzs7Z0JBRWJBLFVBQVVBLEtBQUlBO2dCQUNkQSxPQUFPQSxnQkFBU0EsR0FBR0EsU0FBU0EsQUFBeUZBLFdBQVdBLGtCQUFRQSx1QkFBTUE7O2tDQUdwSUEsR0FBU0EsU0FBY0EsV0FBOENBLEtBQVdBLFFBQWtCQTs7Z0JBRTVHQSxJQUFJQSxNQUFLQTtvQkFDTEE7OztnQkFFSkEsYUFBYUEsNEJBQXVDQSxlQUFPQSxBQUFnQ0E7K0JBQUtBLHVCQUFJQSxHQUFKQTsrQkFBc0JBLEFBQWdDQTtnQkFDdEpBLHdCQUF3QkEsNEJBQXVDQSx3RUFBWUEsSUFBc0JBLGdCQUFRQSxBQUFnQ0E7K0JBQUtBLHVCQUFJQSxHQUFKQTsrQkFBc0JBLEFBQWdDQTtnQkFDcE1BLGlCQUFpQkEsNEJBQW1DQSxzQkFBU0EsY0FDN0JBLEFBQWlDQTsyQkFBS0EsU0FBU0EsTUFBTUEsWUFBT0E7MEJBQzVEQSxBQUFpQ0E7MkJBQUtBLFVBQVVBLDRCQUEwQ0EsaUNBQWtCQSwwREFBaURBLHVCQUFVQSxJQUFHQSxXQUMzSkEsb0VBQW9DQSx1QkFBVUE7MEJBQzdEQSxBQUFpQ0E7MkJBQUtBLFVBQVVBLE1BQU1BLEdBQUdBLEdBQUdBOzs7Z0JBRTVGQSwwQkFBMEJBOzs7O3dCQUV0QkEsdUJBQUlBLEdBQUpBLFFBQVNBO3dCQUNUQSxXQUFXQTs7d0JBRVhBLElBQUlBLGdCQUFTQSxHQUFHQSxTQUFTQSxBQUF5RkEsV0FBV0EsS0FBS0EsUUFBUUE7NEJBQ3RJQTs7O3dCQUVKQSxnQkFBZ0JBOzs7Ozs7O2dCQUdwQkE7O3VDQUd3QkE7Z0JBRXhCQSxPQUFPQSxjQUFTQTs7MENBR1dBOztnQkFFM0JBLElBQUlBLFNBQUlBO29CQUFLQTs7O2dCQUViQSxpQkFBaUJBOztnQkFFakJBLDBCQUF5QkE7Ozs7d0JBQ3JCQSxJQUFJQSw0QkFBaUJBLHFCQUFnQkEsV0FBV0E7NEJBQUlBOzs7Ozs7OztnQkFFeERBOzttREFFc0RBOzs7Ozs7Ozs7Ozs7Ozs7Ozt3Q0FFdERBOzRDQUNBQSwwQkFBa0JBLDRCQUFtQ0Esc0JBQVNBOzs7Ozs7Ozs7Ozs7Ozt3Q0FFMURBOzRDQUNBQSxJQUFJQSxzQkFBaUJBLEdBQUdBOzs7Ozs7Ozt3Q0FFcEJBLG9CQUFvQkE7NENBQ3BCQSwyQkFBeUJBLGlDQUE0QkE7Ozs7Ozs7Ozs7Ozs7O3dDQUNqREEsc0JBQWFBLDRCQUFtQ0EsaUJBQUxBOzs7Ozs7Ozs7d0NBQy9DQSx5QkFBeUJBOzs7Ozs7Ozs7d0NBSWpDQSxJQUFJQTs7Ozs7Ozs7d0NBQ0FBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRDQUdZQTtnQkFFN0JBLElBQUlBLFdBQUtBO29CQUFLQTs7O2dCQUVkQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtvQkFDbkJBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLFFBQUdBO3dCQUN2QkEsSUFBSUEsb0JBQVVBLEdBQUdBLE9BQU1BLENBQUNBLFVBQUVBLEdBQUdBOzRCQUFJQTs7Ozs7Z0JBRXpDQTs7O2dCQU9BQSxPQUFPQSxzQkFBZUEscUNBQWVBOzt3Q0FpQlRBO2dCQUU1QkEsUUFBUUE7Z0JBQ1JBLFFBQVFBLEtBQUlBLGlEQUFVQTs7Z0JBRXRCQTtnQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsR0FBR0E7b0JBRW5CQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxHQUFHQTt3QkFFdkJBOzt3QkFFQUEsSUFBSUEsb0JBQVVBLGlCQUFTQSxJQUFJQSxpQkFBU0EsUUFBT0Esb0JBQVVBLGlCQUFTQSxJQUFJQSxpQkFBU0E7NEJBQ3ZFQSxVQUFFQTs7O3dCQUVOQTs7OztnQkFJUkEsT0FBT0E7O3dDQUdxQkEsVUFBa0JBO2dCQUU5Q0EsT0FBT0Esc0JBQWVBLFVBQVVBLFVBQVVBLHFDQUFlQTs7d0NBR3BDQSxpQkFBa0NBO2dCQUV2REEsT0FBT0Esc0JBQWVBLGdCQUFXQSxlQUFVQSxpQkFBaUJBOzt3Q0FHdkNBLFVBQWtCQSxVQUFrQkEsaUJBQWtDQTtnQkFFM0ZBLFFBQVFBLEtBQUlBOztnQkFFWkE7Z0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLFFBQUdBO29CQUVuQkEsS0FBS0EsY0FBUUEsZUFBT0EsTUFBSUEsUUFBR0E7d0JBRXZCQTs7d0JBRUFBLElBQUlBLENBQUNBLDRCQUFnQ0EscUJBQWdCQSxBQUFpQ0E7OzJDQUFLQSxNQUFLQSxLQUFLQSxNQUFLQTs7NENBQU9BLENBQUNBLDRCQUEyREEsa0JBQWFBLEFBQTREQTs7MkNBQUtBLFlBQVdBLEtBQUtBLFlBQVdBLE9BQUtBLFlBQVdBLE9BQUtBLFlBQVdBOzs7NEJBRWxUQSxJQUFJQSxjQUFTQSxHQUFHQSxTQUFNQSxjQUFTQSxLQUFHQTtnQ0FFOUJBLFVBQUVBO2dDQUNGQSxJQUFJQSxjQUFTQSxLQUFHQTtvQ0FDWkEsVUFBRUEsR0FBS0E7Ozs7O3dCQUluQkE7Ozs7Z0JBSVJBLE9BQU9BOzt1Q0F2RWtCQTs7Z0JBRXpCQSxtQkFBeUJBO2dCQUN6QkEsSUFBSUEscUJBQWdCQTtvQkFFaEJBLGVBQWVBLEtBQUlBLGlEQUFVQTtvQkFDN0JBLDBCQUFrQkE7Ozs7NEJBRWRBLGlCQUFpQkEsMEJBQWFBOzs7Ozs7OztnQkFJdENBLE9BQU9BLElBQUlBLHdCQUFNQSxzQkFBZUEsV0FBV0E7O3dDQWtFaEJBOzs7Z0JBRTNCQSxTQUFTQSxJQUFJQTs7Z0JBRWJBLGNBQWNBO2dCQUNkQSxrQkFBa0JBLEtBQUlBO2dCQUN0QkE7Z0JBQ0FBLFFBQVFBO2dCQUNSQSwwQkFBdUJBOzs7O3dCQUVuQkEsZ0JBQWdCQSw2QkFBaUJBLE1BQU1BO3dCQUN2Q0EsZUFBUUE7O3dCQUVSQSxvQ0FBS0E7Ozs7Ozs7Z0JBR1RBO2dCQUNBQTtnQkFDQUE7Z0JBQ0FBO2dCQUNBQTtnQkFDQUE7Z0JBQ0FBLDJCQUFrQkE7Ozs7d0JBRWRBLGlCQUFpQkEsZ0RBQW1CQSxtQ0FBOENBOzt1Q0FBS0EsNEJBQXFDQSxrQkFBUUE7OzZDQUFZQTt3QkFDaEpBLFlBQVlBO3dCQUNaQSxjQUFjQSxvRkFBOEVBLDZCQUFHQSxtQ0FBVUEsYUFBYUE7Ozs7Ozs7Z0JBRzFIQTtnQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7b0JBQ25CQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxRQUFHQTt3QkFFdkJBLElBQUlBLGlCQUFZQSxHQUFHQTs0QkFFZkEsSUFBSUE7Z0NBQ0FBLGNBQWNBLHFEQUErQ0EsNkJBQUdBLDZCQUFHQTs7Z0NBRW5FQSxjQUFjQSxtQ0FBNEJBLDZCQUFHQTs7OzRCQUVqREE7Ozs7Z0JBR1pBOztnQkFFQUEsT0FBT0E7Ozs7Z0JBS1BBLFNBQVNBLElBQUlBOztnQkFFYkEsY0FBY0E7Z0JBQ2RBLGtCQUFrQkEsS0FBSUE7Z0JBQ3RCQTtnQkFDQUEsUUFBUUE7Z0JBQ1JBLDBCQUF1QkE7Ozs7d0JBRW5CQSxnQkFBZ0JBLDZCQUFpQkEsTUFBTUE7d0JBQ3ZDQSxlQUFRQTs7d0JBRVJBLG9DQUFLQTs7Ozs7OztnQkFHVEE7Z0JBQ0FBLDJCQUFrQkE7Ozs7d0JBRWRBLGlCQUFpQkEsZ0RBQW1CQSxtQ0FBOENBOzt1Q0FBS0EsNEJBQXFDQSxrQkFBUUE7OzZDQUFZQTt3QkFDaEpBLGNBQWNBLGdGQUEwRUEsNkJBQUdBLG9DQUFXQTs7Ozs7OztnQkFHMUdBLEtBQUtBLFdBQVdBLElBQUlBLFFBQUdBO29CQUNuQkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsUUFBR0E7d0JBRXZCQSxJQUFJQSxpQkFBWUEsR0FBR0E7NEJBQ2ZBLGNBQWNBLG1DQUE0QkEsNkJBQUdBOzs7O2dCQUV6REE7O2dCQUVBQSxPQUFPQTs7c0NBS1NBOztnQkFFaEJBLElBQUlBO29CQUFtQkE7O2dCQUN2QkEsSUFBSUEsZ0JBQWdCQTtvQkFBR0E7OztnQkFFdkJBLFdBQVdBLHdEQUE0QkEsZ0JBQVdBOztnQkFFbERBLFlBQXNCQSwrQ0FBTEE7K0JBQ0tBOzs7Z0JBR3RCQSwwQkFBcUJBOzs7O3dCQUNqQkEsSUFBSUEsQ0FBQ0Esb0JBQVVBLFlBQVlBOzRCQUFhQTs7Ozs7Ozs7Z0JBRTVDQTs7O2dCQUlBQSxvQkFBb0JBLDRCQUEyRUEsaUNBQXFCQSxBQUEwRUE7Z0JBQzlMQSxvQkFBb0JBLDZEQUFpQ0E7Z0JBQ3JEQSxJQUFJQTtvQkFBMEJBLE9BQU9BLEFBQXdDQSxrREFBbEJBLEtBQUlBOzs7Z0JBRS9EQSxXQUFXQSx3REFBNEJBLGdCQUFXQTtnQkFDbERBLGdCQUFnQkEscUJBQWdCQTtnQkFDaENBLGdCQUFnQkEscUJBQWdCQTtnQkFDaENBLE9BQU9BLDRCQUF3REEsMkJBQW1CQTs7O2dCQUlsRkEsT0FBT0EsSUFBSUEsd0JBQU1BOzs7Z0JBSWpCQSxlQUFlQSxpREFBU0EsUUFBR0E7Z0JBQzNCQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtvQkFDbkJBLEtBQUtBLFdBQVdBLElBQUlBLFFBQUdBO3dCQUVuQkEsSUFBSUEsTUFBS0E7NEJBQUdBOzt3QkFDWkEsY0FBU0EsR0FBR0EsSUFBS0EsQ0FBQ0Esb0JBQVVBLEdBQUdBOzs7O2dCQUd2Q0EsT0FBT0EsSUFBSUEsc0JBQU1BOztvQ0FFS0E7Z0JBRXRCQSxlQUFlQSw0QkFBbUNBLHNCQUFMQTtnQkFDN0NBLGdCQUFnQkE7Z0JBQ2hCQSxPQUFPQSxxQkFBZ0JBOztvQ0FFSEE7Z0JBRXBCQSxPQUFPQSxJQUFJQSx3QkFBTUEsc0JBQWVBLHFDQUFlQSxtQkFBd0JBOztrQ0FFbkRBLElBQVFBO2dCQUU1QkEsT0FBT0Esa0JBQVdBLFNBQW9CQSxXQUFJQTs7aUNBRXpCQSxJQUFRQSxJQUFRQTtnQkFFakNBLFFBQVFBO2dCQUNSQSxpQkFBWUEsSUFBSUEsS0FBTUEsa0JBQVlBLElBQUlBO2dCQUN0Q0EsSUFBSUE7b0JBQ0FBLGdCQUFXQSxJQUFJQTs7O2dCQUVuQkEsT0FBT0EsSUFBSUEsd0JBQU1BOzsrQkF3REFBLEdBQU9BO2dCQUV4QkEsUUFBUUE7Z0JBQ1JBLGlCQUFZQSxHQUFHQTtnQkFDZkEsaUJBQVlBLEdBQUdBOztnQkFFZkE7Z0JBQ0FBLE9BQU9BOzs7Z0JBM0RQQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtvQkFDbkJBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLFFBQUdBO3dCQUN2QkEsSUFBSUEsb0JBQVVBLEdBQUdBOzRCQUNiQSxPQUFPQSxTQUFvQkEsVUFBR0E7Ozs7O2dCQUUxQ0EsT0FBT0E7OztnQkFJUEEsYUFBYUEsS0FBSUE7O2dCQUVqQkEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7b0JBQ25CQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxRQUFHQTt3QkFDdkJBLElBQUlBLG9CQUFVQSxHQUFHQTs0QkFFYkEsSUFBSUEsbUJBQVNBLEdBQUdBO2dDQUNaQSxXQUFXQSxTQUFvQkEsVUFBR0E7O2dDQUVsQ0EsV0FBV0EsU0FBb0JBLFVBQUdBOzs7Ozs7Z0JBR2xEQSxPQUFPQTs7cUNBRWdCQTtnQkFFdkJBLFFBQVFBLFVBQUlBOztnQkFFWkEsZUFBZUEsaURBQVNBLEdBQUdBO2dCQUMzQkEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7b0JBQ25CQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTt3QkFDbkJBLGNBQVNBLEdBQUdBLElBQUtBLG9CQUFVQSxHQUFHQTs7OztnQkFFdENBLEtBQUtBLFlBQVdBLEtBQUlBLEtBQUtBO29CQUNyQkEsS0FBS0EsWUFBV0EsS0FBSUEsS0FBS0E7d0JBQ3JCQSxjQUFTQSxXQUFJQSxVQUFHQSxXQUFJQSxXQUFLQSxVQUFFQSxJQUFHQTs7OztnQkFFdENBLE9BQU9BLElBQUlBLHNCQUFNQTs7NEJBRUhBO2dCQUVkQSxRQUFRQSxtQkFBY0E7O2dCQUV0QkEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7b0JBQ25CQSxLQUFLQSxXQUFXQSxJQUFJQSxLQUFLQTt3QkFFckJBLGlCQUFZQSxHQUFHQSxXQUFJQTt3QkFDbkJBLGlCQUFZQSxXQUFJQSxTQUFHQTs7OztnQkFHM0JBO2dCQUNBQSxPQUFPQTs7eUNBV2tCQTs7Z0JBRXpCQSxPQUFPQSxxQkFBZ0JBLFlBQVlBOzt1Q0FFVkE7O2dCQUV6QkEsZUFBZUEsaURBQVNBLG9CQUFPQTs7Z0JBRS9CQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtvQkFDbkJBLEtBQUtBLFdBQVdBLElBQUlBLFFBQUdBO3dCQUNuQkEsY0FBU0EsR0FBR0EsSUFBS0Esb0JBQVVBLEdBQUdBOzs7O2dCQUV0Q0EsS0FBeUJBOzs7O3dCQUVyQkEsY0FBU0EsUUFBR0E7d0JBQ1pBLGNBQVNBLFVBQVVBOzs7Ozs7O2dCQUd2QkEsT0FBT0EsSUFBSUEsc0JBQU1BOzs7O2dCQXNCakJBLFFBQVFBO2dCQUNSQSwwQkFBa0JBOzs7O3dCQUVkQSwyQkFBcUJBLG1FQUF3REEsdUJBQVVBLElBQUdBLHVCQUFVQTs7OztnQ0FFaEdBLElBQUlBLGVBQWNBO29DQUNkQSxpQkFBWUEsWUFBWUEsYUFBY0Esa0JBQVlBLFlBQVlBOzs7Ozs7Ozs7Ozs7OztnQkFJMUVBLE9BQU9BOzs7Z0JBK0RQQSxJQUFJQTtvQkFDQUE7OztnQkFFSkEsT0FBT0EsNEJBQXlFQSxvQkFBVUEsQUFBMEVBOzs4QkFHdEpBO2dCQUVkQSxPQUFPQSx1QkFBVUE7O2lDQUVBQTtnQkFFakJBLE9BQU9BLDBCQUFhQTs7Z0NBRUpBO2dCQUVoQkEsT0FBT0EseUJBQVlBOzt3Q0FFS0EsR0FBT0E7Z0JBRS9CQSxPQUFPQSx1REFBb0NBLHVCQUFVQSxJQUFJQTs7MkNBR3hCQSxHQUFPQTtnQkFFeENBLE9BQU9BLG9EQUErQkEsdUJBQVVBLElBQUlBOztnREFHcEJBLEdBQU9BLFVBQW9CQTtnQkFFM0RBLE9BQU9BLDRCQUFnQ0Esb0RBQStCQSx1QkFBVUEsSUFBSUEsZUFBVUEsQUFBZ0NBOytCQUFLQSxxQkFBRUEsR0FBRkE7OzsyQ0FHN0ZBO2dCQUV0Q0EsT0FBT0E7MkJBQUtBLGNBQU9BLEtBQUtBOzs7K0JBR1RBO2dCQUVmQTtnQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsU0FBU0E7b0JBQ3pCQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxTQUFTQTt3QkFDN0JBLElBQUlBLG9CQUFVQSxVQUFFQSxJQUFJQSxVQUFFQTs0QkFBS0E7Ozs7O2dCQUVuQ0EsT0FBT0E7O3FDQUdvQkE7Z0JBRTNCQSxrQkFBa0JBLEtBQUlBOztnQkFFdEJBO2dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtvQkFFbkJBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLFFBQUdBO3dCQUV2QkEsSUFBSUEsb0JBQVVBLEdBQUdBOzRCQUViQSxJQUFJQSxXQUFXQSxNQUFNQSxXQUFXQTtnQ0FDNUJBLGdCQUFnQkE7Ozs0QkFFcEJBOzs7OztnQkFLWkEsT0FBT0E7O29DQUVhQSxHQUFhQTtnQkFFakNBLG1CQUFtQkEsMERBQThCQSxHQUFHQTtnQkFDcERBLElBQUlBLHdEQUE0QkEsR0FBR0E7O2dCQUVuQ0E7Z0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBO29CQUN6QkEsS0FBS0EsV0FBV0EsSUFBSUEsU0FBU0E7d0JBQ3pCQSxJQUFJQSxvQkFBVUEsVUFBRUEsSUFBSUEsVUFBRUE7NEJBQUtBOzs7OztnQkFFbkNBLE9BQU9BLFVBQVFBLGFBQVFBOztpREFNc0JBO2dCQUU3Q0EsSUFBSUEsZUFBZUE7b0JBQUdBLE9BQU9BLEFBQTRDQSw0QkFBdEJBLEtBQUlBOzs7Z0JBRXZEQSxtQkFBbUJBLCtCQUEwQkE7O2dCQUU3Q0EsT0FBT0EsNEJBQTJFQSxvQkFBYUEsNEJBQTJFQSxvQkFBYUEsQUFBMEVBO21DQUFPQSxxQkFBZ0JBLGFBQWFBO21DQUN2TUEsQUFBa0hBO3dCQUVwS0EsYUFBYUEsQUFBc0NBLFVBQUNBO2dDQUFRQSxTQUFTQTtnQ0FBYUEsT0FBT0E7OEJBQXREQSxLQUFJQTt3QkFDdkNBLGdCQUFnQkE7d0JBQ2hCQSxPQUFPQTs7O3VDQUdsQ0EsR0FBT0E7O2dCQUV4QkEsMEJBQWtCQTs7Ozt3QkFBS0EsSUFBSUEsTUFBS0EsS0FBS0Esb0JBQVVBLEdBQUdBOzRCQUFJQTs7Ozs7Ozs7Z0JBRXREQTs7Z0NBRWlCQTtnQkFFakJBLEtBQUtBLFdBQVdBLElBQUlBLGNBQWNBO29CQUM5QkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsY0FBY0E7d0JBQ2xDQSxJQUFJQSxDQUFDQSxvQkFBVUEsZUFBT0EsSUFBSUEsZUFBT0E7NEJBQUtBOzs7OztnQkFFOUNBOztxQ0FFc0JBO2dCQUV0QkEsS0FBS0EsV0FBV0EsSUFBSUEsY0FBY0E7b0JBQzlCQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxjQUFjQTt3QkFDbENBLElBQUlBLG9CQUFVQSxlQUFPQSxJQUFJQSxlQUFPQTs0QkFBS0E7Ozs7O2dCQUU3Q0E7OztnQkFJQUEsT0FBT0EsY0FBU0E7OzZDQUVjQTs7Z0JBRTlCQSxJQUFJQSxJQUFJQTtvQkFDSkE7O2dCQUNKQSwwQkFBb0JBLGlFQUFtQ0EsZ0JBQVdBOzs7O3dCQUU5REEsSUFBSUEsY0FBU0E7NEJBQ1RBOzs7Ozs7OztnQkFHUkE7OztnQkFLQUEsT0FBT0EsMEJBQW1CQTs7NENBRUFBO2dCQUUxQkEsT0FBT0EsNEJBQXlFQSxpQ0FBdUJBLEFBQXlFQTsrQkFBS0EsK0RBQXNEQSxHQUFFQTs7O2dEQUV2TUE7Z0JBRXRDQSxRQUFRQSwwQkFBbUJBO2dCQUMzQkEsT0FBT0EsNEJBQTJFQSxtQ0FBdUJBLEFBQTBFQTsrQkFBS0EsK0RBQXNEQSxHQUFFQSxjQUFhQTs7O3lEQUduTUE7Z0JBRTFEQSxPQUFPQSwyQkFBc0JBLEtBQUtBLEtBQUlBLG9EQUFhQSxLQUFJQTs7O2dCQUt2REEsT0FBT0EsMkJBQXNCQSxlQUFVQSxLQUFJQSxvREFBYUEsS0FBSUE7OzZDQUduQkEsR0FBYUEsR0FBYUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d0NBRW5FQSxJQUFJQSxpQkFBZ0JBOzs7Ozs7Ozs7d0NBQ2hCQSxzQkFBYUEsNEJBQW1DQSxVQUFMQTs7Ozs7Ozs7O3dDQUczQ0EsS0FBU0EsNEJBQW1DQSxVQUFMQTs0Q0FDdkNBLEtBQVNBLDRCQUFtQ0EsVUFBTEE7OzRDQUV2Q0EsSUFBUUEsaUJBQVlBLEdBQUdBOzRDQUN2QkEsMEJBQWtCQSw0QkFBbUNBLFVBQUVBLGlDQUFvQkE7Ozs7Ozs7Ozs7Ozs7O3dDQUV2RUEsTUFBTUE7NENBQ05BLDJCQUFvQkEsMkJBQXNCQSwwREFBaURBLElBQUdBLGlDQUFvQkEsS0FBS0EsR0FBR0EsMERBQWlEQSxJQUFHQSxpQ0FBb0JBOzs7Ozs7Ozs7Ozs7Ozt3Q0FDOUxBLHNCQUFhQTs7Ozs7Ozs7O3dDQUVqQkEsU0FBU0E7NENBQ1RBLFVBQVVBOzRDQUNWQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O21DQUtIQSxHQUFhQTs7Z0JBRXpCQSxVQUFVQTtnQkFDVkEsV0FBV0E7Z0JBQ1hBLDBCQUFrQkEsNEJBQW1DQSxVQUFFQTs7Ozt3QkFFbkRBLFFBQVFBLCtEQUFzREEsaUNBQW9CQSxJQUFHQTt3QkFDckZBLElBQUlBLElBQUlBOzRCQUVKQSxNQUFNQTs0QkFDTkEsT0FBT0E7Ozs7Ozs7O2dCQUlmQSxPQUFPQTs7O2dCQUtQQSxLQUFLQSxXQUFXQSxJQUFJQSxZQUFjQTtvQkFFOUJBLFFBQVFBLG1CQUFjQSxlQUFVQTtvQkFDaENBLElBQUlBLEtBQUtBO3dCQUNMQSxPQUFPQTs7OztnQkFHZkEsT0FBT0E7O3FDQUcwQkEsVUFBb0JBOztnQkFFckRBLElBQUlBO29CQUNBQSxPQUFPQSxLQUFJQTs7Z0JBQ2ZBLElBQUlBO29CQUNBQSxPQUFPQTs7O2dCQUVYQSwwQkFBa0JBLHVDQUFnQ0E7Ozs7d0JBRTlDQSxRQUFRQSxtQkFBY0Esd0RBQStDQSxVQUFTQSxJQUFJQTt3QkFDbEZBLElBQUlBLEtBQUtBOzRCQUVMQSxZQUFZQTs0QkFDWkEsT0FBT0E7Ozs7Ozs7O2dCQUlmQSxPQUFPQTs7MENBT21CQSxZQUF1QkE7Z0JBRWpEQSxPQUFPQSwwQkFBbUJBLGVBQWVBOzs0Q0FHdEJBLFlBQXVCQSxHQUFPQTs7Z0JBRWpEQSxJQUFJQSxLQUFLQTtvQkFDTEE7OztnQkFFSkEsVUFBVUEsMEJBQW1CQSxZQUFZQSxlQUFPQTs7Z0JBRWhEQSxhQUFhQSxtQkFBV0EsZUFBT0E7Z0JBQy9CQSxPQUFPQTtvQkFFSEEsWUFBWUEsV0FBU0EsQUFBQ0E7O29CQUV0QkEscUJBQXFCQSxLQUFJQSxpREFBV0E7b0JBQ3BDQSwwQkFBeUJBLG1DQUFzQkEsZUFBT0E7Ozs7NEJBQ2xEQSx1QkFBZUEsVUFBZkEsdUJBQWVBLGNBQWFBLENBQUNBOzs7Ozs7O29CQUVqQ0EsTUFBTUEsU0FBU0EsS0FBS0EsTUFBSUEsMEJBQW1CQSxnQkFBZ0JBLGVBQU9BO29CQUNsRUEsSUFBSUEsT0FBT0E7d0JBQ1BBOzs7b0JBRUpBLG9CQUFVQTs7O2dCQUdkQSxPQUFPQTs7bUNBR1lBLFlBQXVCQTs7Z0JBRTFDQSxlQUFlQSxrQkFBU0E7Z0JBQ3hCQSwwQkFBa0JBOzs7O3dCQUVkQSxXQUFXQSw0QkFBMkNBLHVCQUFVQSwrQkFBT0EsQUFBdUNBLFVBQUNBLEdBQUdBO3VDQUFNQSxLQUFJQSw0QkFBU0EsR0FBVEE7O3dCQUM1SEEsYUFBYUEsbUJBQVdBLE9BQUtBLEFBQUNBO3dCQUM5QkEsNEJBQVNBLEdBQVRBLGFBQWNBLFdBQVNBLEFBQUNBOzs7Ozs7O2dCQUc1QkEsT0FBT0EsNEJBQW1DQSxnQkFBU0EsQUFBa0NBOztxQ0FHakVBLFlBQXVCQTtnQkFFM0NBLE9BQU9BLG1CQUFZQSxlQUFlQTs7cUNBRXJCQSxZQUF1QkEsR0FBT0E7O2dCQUUzQ0EsSUFBSUEsS0FBS0E7b0JBQ0xBOzs7Z0JBRUpBLGFBQWFBLG1CQUFXQSxlQUFPQTtnQkFDL0JBLE9BQU9BO29CQUVIQSxZQUFZQSxXQUFTQSxBQUFDQTs7b0JBRXRCQSxxQkFBcUJBLEtBQUlBLGlEQUFXQTtvQkFDcENBLDBCQUF5QkEsbUNBQXNCQSxlQUFPQTs7Ozs0QkFDbERBLHVCQUFlQSxVQUFmQSx1QkFBZUEsY0FBYUEsQ0FBQ0E7Ozs7Ozs7b0JBRWpDQSxJQUFJQSxtQkFBWUEsZ0JBQWdCQSxlQUFPQTt3QkFDbkNBOzs7b0JBRUpBLG9CQUFVQTs7O2dCQUdkQTs7bUNBRW9CQTtnQkFFcEJBLE9BQU9BLG1CQUFZQTs7cUNBRU5BLFlBQXVCQTs7Z0JBRXBDQSxJQUFJQSxLQUFLQTtvQkFDTEE7OztnQkFFSkEsYUFBYUEsbUJBQVdBO2dCQUN4QkEsT0FBT0E7b0JBRUhBLFlBQVlBLFdBQVNBLEFBQUNBOztvQkFFdEJBLHFCQUFxQkEsS0FBSUEsaURBQVdBO29CQUNwQ0EsMEJBQXlCQSxtQ0FBc0JBOzs7OzRCQUMzQ0EsdUJBQWVBLFVBQWZBLHVCQUFlQSxjQUFhQSxDQUFDQTs7Ozs7OztvQkFFakNBLElBQUlBLG1CQUFZQSxnQkFBZ0JBO3dCQUM1QkE7OztvQkFFSkEsb0JBQVVBOzs7Z0JBR2RBOzt3Q0FFeUJBOztnQkFFekJBLDBCQUFvQkE7Ozs7d0JBQ2hCQSxJQUFJQSxDQUFDQSxtQkFBV0Esb0JBQVVBLG1CQUFXQTs0QkFDakNBOzs7Ozs7OztnQkFFUkE7O3dDQUdvQ0EsR0FBa0JBOztnQkFFdERBLFVBQVVBLGdDQUFvQkEsOEJBQWdDQSxtQkFBU0EsQUFBZ0NBOytCQUFLQSxFQUFFQTs7Z0JBQzlHQSxZQUFZQSxnQ0FBb0JBO2dCQUNoQ0EsMEJBQWtCQSxvR0FBaUdBLDRCQUE0SEEsQUFBQ0EsWUFBcUNBLENBQUNBLG1CQUFRQSxDQUFDQSxtQkFBUUEsK1FBQWFBLDRCQUFpQ0EsOEJBQWlIQSxBQUF5SEE7K0JBQUtBLGlFQUFtQ0EsS0FBS0EsRUFBRUE7Ozs7O3dCQUUxbUJBLFNBQVNBLDRCQUE0RUEsVUFBOUNBO3dCQUN2Q0EsSUFBSUEsQ0FBQ0Esa0JBQWFBLElBQUlBLEFBQStCQTs0QkFDakRBLE9BQU9BOzs7Ozs7OztnQkFHZkEsT0FBT0E7O29DQUdPQSxHQUFtQkE7O2dCQUVqQ0EsMEJBQXlCQSxvR0FBaUdBLDRCQUFnSUEsc0JBQVNBLEFBQXlIQTsrQkFBS0EsaUVBQW1DQSxVQUFFQSxJQUFJQSxFQUFFQTs7Ozs7d0JBRXhhQSxJQUFJQSxzQkFBaUJBLDRCQUE0RUEsaUJBQTlDQTs0QkFDL0NBOzs7Ozs7OztnQkFHUkE7O3dDQUdrQkE7Z0JBRWxCQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtvQkFFbkJBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLFFBQUdBO3dCQUV2QkEsSUFBSUEsQ0FBQ0Esb0JBQVVBLEdBQUdBOzRCQUNkQTs7O3dCQUVKQSxJQUFJQSwrREFBc0RBLGlCQUFTQSxJQUFHQSxpQkFBU0E7NEJBQzNFQTs7Ozs7Z0JBSVpBOzs7O2dCQU9BQTtnQkFDQUEsMEJBQW9CQTs7Ozt3QkFFaEJBLFFBQVFBLDRCQUFnQ0EsU0FBSUEsQUFBZ0NBO3dCQUM1RUEsTUFBTUEsU0FBU0EsS0FBS0E7Ozs7Ozs7Z0JBR3hCQSxPQUFPQTs7MENBRW9CQTs7Z0JBRTNCQTtnQkFDQUE7O2dCQUVBQSxhQUFhQSxrQkFBUUE7Z0JBQ3JCQSwwQkFBa0JBOzs7O3dCQUNkQSwwQkFBT0EsR0FBUEEsV0FBWUEsRUFBRUE7Ozs7Ozs7Z0JBRWxCQSxZQUFZQSxLQUFJQTs7Z0JBRWhCQSxPQUFPQSwwQkFBbUJBLFFBQVFBLGlDQUEwQkEsK0JBQWNBOzs0Q0FFdERBLEdBQVNBLEdBQVNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29DQUV0Q0E7O29DQUVBQSxNQUE0QkE7O29DQUU1QkE7b0NBQ0FBLFNBQWVBOztvQ0FFZkEsZUFBbUJBLDRCQUF1Q0EsVUFBRUEsQUFBcUNBLG1DQUFpQ0EsQUFBaUNBO29DQUNuS0EsV0FBZUEsNEJBQWtDQSxvQkFBYUEsQUFBaUNBOytDQUFLQSxzQkFBaUJBLEdBQUdBLGdCQUFnQkEscUJBQUVBLEdBQUZBOzs7b0NBRXhJQSxPQUFPQTt3Q0FFSEEsSUFBSUEsVUFBVUE7NENBRVZBLFNBQVNBLGtCQUFRQTs0Q0FDakJBLGtCQUFXQSxNQUFHQSxXQUFRQTs7O3dDQUcxQkEsMEJBQWtCQTs7OztnREFDZEEscUJBQUVBLEdBQUZBOzs7Ozs7O3dDQUVKQSxlQUFlQSw0QkFBdUNBLFVBQUVBLEFBQXFDQSxtQ0FBaUNBLEFBQWlDQTt3Q0FDL0pBLFdBQVdBLDRCQUFrQ0Esb0JBQWFBLEFBQWlDQTttREFBS0Esc0JBQWlCQSxJQUFHQSxnQkFBZ0JBLHFCQUFFQSxJQUFGQTs7OztvQ0FHeElBLElBQUlBOzs7Ozs7OztvQ0FFQUE7b0NBQ0FBOzs7O29DQUVKQSxJQUFJQSw0QkFBZ0NBLGtCQUFhQSxBQUFpQ0E7K0NBQUtBLHFCQUFFQSxJQUFGQTs7Ozs7Ozs7O29DQUVuRkE7b0NBQ0FBOzs7O29DQUdKQSxNQUFNQSxJQUFJQSxpQ0FBc0JBLEdBQUdBO29DQUNuQ0E7b0NBQ0FBLElBQUlBLGtCQUFrQkEsS0FBU0E7Ozs7Ozs7O29DQUUzQkE7O29DQUVBQSxNQUFNQTtvQ0FDTkEsU0FBU0E7b0NBQ1RBOzs7O29DQUdKQSxrQkFBc0JBLDRCQUEyRUEsbUNBQXVCQSxBQUEwRUE7K0NBQU9BLGtCQUFrQkEsaURBQThCQSxLQUFLQTs7O29DQUU5UEEsMkJBQWtCQSwrREFBbUNBOzs7Ozs7Ozs7Ozs7OztvQ0FFakRBLElBQUlBO3dDQUNBQTs7OztvQ0FFSkEsSUFBSUEsNEJBQXlFQSxxQkFBZ0JBLEFBQTBFQTs7bURBQU1BLGlEQUE4QkEsR0FBR0E7Ozt3Q0FDMU1BOzs7O29DQUVKQSwyQkFBa0JBOzs7OzRDQUNkQSxxQkFBRUEsSUFBRkEsNEJBQUVBLElBQUZBOzs7Ozs7O29DQUVKQSx5QkFBNkJBLHVEQUFrQ0EsNEJBQTJFQSx1QkFBZ0JBLEFBQTBFQTs7bURBQU9BLGlEQUE4QkEsS0FBS0E7Ozs7b0NBRTlRQTtvQ0FDQUEsMkJBQWtCQTs7Ozs0Q0FFZEEsMkJBQWtCQTs7OztvREFDZEEscUJBQUVBLElBQUZBLDRCQUFFQSxJQUFGQTs7Ozs7Ozs0Q0FFSkEsWUFBWUEsMEJBQW1CQSxHQUFHQSxHQUFHQTs7NENBRXJDQSwyQkFBa0JBOzs7O29EQUNkQSxxQkFBRUEsSUFBRkEsNEJBQUVBLElBQUZBOzs7Ozs7OzRDQUVKQSxJQUFJQTtnREFDQUE7Ozs7Ozs7O29DQUdSQSwyQkFBa0JBOzs7OzRDQUNkQSxxQkFBRUEsSUFBRkEsNEJBQUVBLElBQUZBOzs7Ozs7O29DQUVKQSxJQUFJQSxDQUFDQTs7Ozs7Ozs7b0NBRURBO29DQUNBQTs7Ozs7Ozs7Ozs7b0NBTVJBLElBQUlBLFVBQVVBO3dDQUNWQSxrQkFBV0EsV0FBUUEsTUFBR0E7OztvQ0FFMUJBLElBQUlBLE9BQU9BO3dDQUNQQSxVQUFNQSxLQUFPQTs7O29DQUVqQkEsT0FBT0E7Ozs7Ozs7Ozs7OzJDQUdxQkEsR0FBa0JBO2dCQUU5Q0E7Z0JBQ0FBOztnQkFFQUEsWUFBWUEsS0FBSUE7Z0JBQ2hCQSxPQUFPQSwyQkFBb0JBLDRCQUF1Q0EsdUJBQVVBLEFBQWdDQTsrQkFBS0EsRUFBRUE7OENBQWdCQSw0QkFBdUNBLHVCQUFVQSxBQUFnQ0E7K0JBQUtBLEVBQUVBOzhDQUFnQkE7OzZDQUV0TkEsR0FBU0EsR0FBU0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29DQUV2Q0E7b0NBQ0FBLE1BQTRCQTs7b0NBRTVCQTtvQ0FDQUEsU0FBZUEsa0JBQVFBO29DQUN2QkEsa0JBQVdBLE1BQUdBLFdBQVFBOztvQ0FFdEJBO3dDQUVJQTt3Q0FDQUEsMEJBQWlCQTs7OztnREFFYkEsSUFBSUEscUJBQUVBLEdBQUZBO29EQUNBQTs7O2dEQUVKQSxPQUFXQSxzQkFBRUEsR0FBRkEsTUFBT0EsNEJBQWdDQSx1QkFBVUEsUUFBR0EsQUFBZ0NBOzJEQUFLQSxxQkFBRUEsR0FBRkE7O2dEQUNwR0EsSUFBSUEscUJBQUVBLEdBQUZBLE9BQVFBO29EQUVSQSxxQkFBRUEsR0FBRkE7b0RBQ0FBOzs7Ozs7Ozt3Q0FJUkEsSUFBSUEsQ0FBQ0E7NENBQ0RBOzs7O29DQUdSQSxlQUFtQkEsNEJBQW1DQSx3REFBK0NBLEdBQUVBLEFBQWlDQSxxQ0FBdkZBO29DQUNqREEsSUFBSUE7Ozs7Ozs7O29DQUVBQTtvQ0FDQUE7Ozs7b0NBRUpBLElBQUlBLDRCQUFnQ0Esa0JBQWFBLEFBQWlDQTsrQ0FBS0EscUJBQUVBLElBQUZBLE1BQU9BLHFCQUFFQSxJQUFGQTs7Ozs7Ozs7O29DQUUxRkE7b0NBQ0FBOzs7O29DQUdKQSxNQUFNQSxJQUFJQSxpQ0FBc0JBLEdBQUdBO29DQUNuQ0E7b0NBQ0FBLElBQUlBLGtCQUFrQkEsS0FBU0E7Ozs7Ozs7O29DQUUzQkE7O29DQUVBQSxNQUFNQTtvQ0FDTkEsU0FBU0E7b0NBQ1RBOzs7O29DQUdKQSxrQkFBc0JBLDRCQUEyRUEsbUNBQXVCQSxBQUEwRUE7K0NBQU9BLGtCQUFrQkEsaURBQThCQSxLQUFLQTs7O29DQUU5UEEsMkJBQWtCQSwrREFBbUNBOzs7Ozs7Ozs7Ozs7OztvQ0FFakRBLElBQUlBO3dDQUNBQTs7OztvQ0FFSkEsSUFBSUEsNEJBQXlFQSxxQkFBZ0JBLEFBQTBFQTs7bURBQU1BLGlEQUE4QkEsR0FBR0E7Ozt3Q0FDMU1BOzs7O29DQUVKQSwyQkFBa0JBOzs7OzRDQUNkQSxxQkFBRUEsSUFBRkEsNEJBQUVBLElBQUZBOzs7Ozs7O29DQUVKQSx5QkFBNkJBLHVEQUFrQ0EsNEJBQTJFQSx1QkFBZ0JBLEFBQTBFQTs7bURBQU9BLGlEQUE4QkEsS0FBS0E7Ozs7b0NBRTlRQTtvQ0FDQUEsMkJBQWtCQTs7Ozs0Q0FFZEEsMkJBQWtCQTs7OztvREFDZEEscUJBQUVBLElBQUZBLDRCQUFFQSxJQUFGQTs7Ozs7Ozs0Q0FFSkEsWUFBWUEsMkJBQW9CQSxHQUFHQSxHQUFHQTs7NENBRXRDQSwyQkFBa0JBOzs7O29EQUNkQSxxQkFBRUEsSUFBRkEsNEJBQUVBLElBQUZBOzs7Ozs7OzRDQUVKQSxJQUFJQTtnREFDQUE7Ozs7Ozs7O29DQUdSQSwyQkFBa0JBOzs7OzRDQUNkQSxxQkFBRUEsSUFBRkEsNEJBQUVBLElBQUZBOzs7Ozs7O29DQUVKQSxJQUFJQSxDQUFDQTs7Ozs7Ozs7b0NBRURBO29DQUNBQTs7Ozs7Ozs7Ozs7b0NBTVJBLElBQUlBLFVBQVVBO3dDQUNWQSxrQkFBV0EsV0FBUUEsTUFBR0E7OztvQ0FFMUJBLElBQUlBLE9BQU9BO3dDQUNQQSxVQUFNQSxLQUFPQTs7O29DQUVqQkEsT0FBT0E7Ozs7Ozs7Ozs7O2lDQU1VQTtnQkFFakJBLElBQUlBLENBQUNBLG9CQUFVQSxTQUFTQTtvQkFDcEJBOzs7Z0JBRUpBLE9BQU9BLG1CQUFTQSxTQUFTQSxZQUFXQTs7eUNBRWpCQTtnQkFFbkJBLE9BQU9BLDRCQUFnQ0Esb0JBQVVBLEFBQWlDQTsrQkFBS0EsaUJBQVVBLEtBQUtBLGNBQVNBLGFBQU1BLG1CQUFXQTs7O21EQUdyRkEsWUFBc0JBLE9BQTZCQTtnQkFFOUZBOztnQkFFQUEsYUFBYUEsS0FBSUE7O2dCQUVqQkEsSUFBSUEsNEJBQWdDQSxvQkFBVUEsQUFBaUNBOytCQUFLQSxtQkFBV0EsS0FBS0EsZUFBVUEsTUFBTUEsR0FBQ0EsbUJBQVdBLFdBQUtBLGNBQVNBOztvQkFDMUlBLE9BQU9BOzs7Z0JBRVhBLFVBQVVBLElBQUlBLGdDQUFxQkEsTUFBTUE7O2dCQUV6Q0EsSUFBSUE7b0JBRUFBO29CQUNBQSxJQUFJQSw4Q0FBOENBLEtBQVNBO3dCQUV2REE7d0JBQ0FBLE9BQU9BOzs7O2dCQUlmQSxJQUFJQTtvQkFFQUEsSUFBSUEsdUJBQWtCQTt3QkFDbEJBLFdBQVdBOzs7b0JBRWZBLE9BQU9BOzs7Z0JBR1hBLFFBQVFBLDRCQUE0REE7O2dCQUVwRUEsYUFBYUE7Z0JBQ2JBLFFBQVFBLGtCQUFXQTs7Z0JBRW5CQSxnQkFBZ0JBLDhCQUE4QkEsWUFBWUEsT0FBT0E7O2dCQUVqRUEsc0JBQXNCQSw0QkFBbUNBLG1CQUFMQTtnQkFDcERBLFNBQVNBO2dCQUNUQSxTQUFTQTs7Z0JBRVRBLElBQUlBLGVBQVVBO29CQUVWQSx3QkFBZ0JBLFNBQWhCQSx5QkFBZ0JBO29CQUNoQkEsd0JBQWdCQSxTQUFoQkEseUJBQWdCQTs7b0JBSWhCQSx3QkFBZ0JBLFNBQWhCQSx5QkFBZ0JBO29CQUNoQkEsd0JBQWdCQSxTQUFoQkEseUJBQWdCQTs7b0JBRWhCQSxLQUFLQTtvQkFDTEEsS0FBS0E7OztnQkFHVEEsZ0JBQWdCQSw0QkFBaUZBLDhCQUE4QkEsaUJBQWlCQSxPQUFPQSwyQ0FBbUNBLEFBQTBFQTsrQkFBU0EsZ0JBQWNBLElBQUlBOzs7Z0JBRS9SQSxJQUFJQTtvQkFDQUEsc0NBQWtDQSxLQUFPQTs7O2dCQUU3Q0EsVUFBVUE7Z0JBQ1ZBLE9BQU9BOztpREFFa0NBLE9BQTZCQTtnQkFFdEVBLE9BQU9BLGlDQUE0QkEsNEJBQW1DQSxrQkFBUUEsaUNBQWJBLGVBQWtCQSxPQUFPQTs7c0RBRW5EQSxNQUFjQTs7Z0JBRXJEQTtnQkFDQUE7Z0JBQ0FBLHdDQUF3Q0EsS0FBSUE7Z0JBQzVDQSxZQUFZQTs7Z0JBRVpBO2dCQUNBQTtnQkFDQUEsMEJBQWtCQSwrQkFBMEJBLE9BQU9BOzs7O3dCQUUvQ0EsSUFBSUE7NEJBQ0FBOzs0QkFFQUE7Ozs7Ozs7O21FQUc0Q0EsVUFBb0JBLE1BQWNBOzs7Ozs7Ozs7Ozs7OztvQ0FFdEZBO29DQUNBQTs7b0NBRUFBLElBQUlBLFlBQVlBO3dDQUNaQSxXQUFXQSxLQUFJQTs7O29DQUVuQkEsb0NBQXdDQSxLQUFJQTtvQ0FDNUNBLFFBQVlBOztvQ0FFWkE7b0NBQ0FBO29DQUNBQSwwQkFBa0JBLCtCQUEwQkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7O29DQUUvQ0EsMkJBQWtCQTs7Ozs7Ozs7Ozs7Ozs7b0NBRWRBLElBQUlBLFNBQVNBOzs7Ozs7OztvQ0FDVEE7Ozs7Ozs7O29DQUdSQSxJQUFJQTt3Q0FDQUE7O3dDQUVBQTs7OztvQ0FFRkE7Ozs7Ozs7Ozs7Ozs7Ozs7Z0VBRzJDQSxPQUE2QkEsTUFBY0E7Ozs7Ozs7Ozs7Ozs7O29DQUU1RkE7b0NBQ0FBOztvQ0FFQUEsSUFBSUEsU0FBU0E7d0NBQ1RBLFFBQVFBLEtBQUlBOzs7b0NBRWhCQSxvQ0FBd0NBLEtBQUlBO29DQUM1Q0EsYUFBaUJBOztvQ0FFakJBO29DQUNBQTtvQ0FDQUEsMEJBQWtCQSwrQkFBMEJBLFlBQVlBOzs7Ozs7Ozs7Ozs7OztvQ0FFcERBLDJCQUFrQkE7Ozs7Ozs7Ozs7Ozs7O29DQUVkQSxJQUFJQSxDQUFDQSxpQkFBWUEsU0FBU0E7Ozs7Ozs7O29DQUN0QkE7Ozs7Ozs7O29DQUdSQSxJQUFJQTt3Q0FDQUE7O3dDQUVBQTs7OztvQ0FFRkE7Ozs7Ozs7Ozs7Ozs7Ozs7K0NBR3NDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3dDQUU1Q0EsT0FBV0Esa0JBQVFBOzs0Q0FFbkJBLDBCQUErQkEsaUNBQTRCQSxBQUErQkEsa0JBQWtCQTs7Ozs7Ozs7Ozs7Ozs7d0NBRXhHQSxXQUFlQSxpREFBU0EsUUFBR0E7NENBQzNCQSxXQUFlQSxpREFBU0EsUUFBR0E7OzRDQUUzQkEsS0FBS0EsT0FBV0EsSUFBSUEsc0JBQXNCQTtnREFFdENBLElBQVFBLG9DQUEyQkE7O2dEQUVuQ0EsMkJBQWtCQSx1QkFBZUE7Ozs7d0RBRTdCQSxjQUFTQSxHQUFHQTt3REFDWkEsY0FBU0EsR0FBR0E7O3dEQUVaQSxjQUFTQSxHQUFHQTs7Ozs7OztnREFHaEJBLGVBQW1CQSx3REFBNEJBLG1DQUFzQkEsSUFBSUEsdUJBQWVBOztnREFFeEZBLDJCQUFrQkE7Ozs7d0RBRWRBLGNBQVNBLEdBQUdBO3dEQUNaQSxjQUFTQSxJQUFHQTs7d0RBRVpBLGNBQVNBLEdBQUdBOzs7Ozs7Ozs0Q0FJcEJBLHNCQUFhQSxJQUFJQSx3QkFBTUEsc0JBQWVBLFVBQVVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkNBb0NSQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FFNUNBLG9CQUF3QkEsNEJBQXVDQSw4QkFBaUJBLEFBQWdDQTs0Q0FDaEhBLGNBQWtCQSw0QkFBdUNBLDBCQUFrQkEsQUFBcUNBLG1DQUFrQ0EsQUFBaUNBOzs0Q0FFbkxBLGFBQWlCQSxJQUFJQSx3QkFBTUE7OzRDQUUzQkEsMEJBQXFCQSwrREFBbUNBOzs7Ozs7Ozs7Ozs7Ozt3Q0FFcERBLFVBQWNBLDRCQUF1Q0EsMEJBQWtCQSxBQUFxQ0E7cUVBQUNBLEdBQUdBOytEQUFNQSxjQUFjQSxLQUFLQSxHQUFDQSxVQUFJQTs7Ozs0Q0FFOUlBLHNCQUFhQSxJQUFJQSx3QkFBTUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnREE1Q3VCQSxHQUFPQSxrQkFBaUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d0NBRTFGQSxJQUFJQSxLQUFLQTs7Ozs7Ozs7O3dDQUVMQSxJQUFJQSx3QkFBS0EsR0FBTEEsU0FBVUEsaUJBQWlCQTs7Ozs7Ozs7O3dDQUMzQkE7Ozt3Q0FFQUEsc0JBQWFBLEtBQUlBOzs7Ozs7Ozs7Ozs7O3dDQUlyQkEsMEJBQW9CQSwrREFBbUNBLG1DQUFzQkE7Ozs7Ozs7Ozs7Ozs7O3dDQUV6RUEsSUFBSUEsWUFBWUEsbUJBQWlCQSxLQUFLQSx3QkFBS0EsR0FBTEE7Z0RBQ2xDQTs7Ozs0Q0FFSkEsT0FBV0Esd0RBQTRCQSxtQ0FBc0JBLElBQUlBOzs0Q0FFakVBLDJCQUFrQkE7Ozs7b0RBQ2RBLHdCQUFLQSxHQUFMQSxrQ0FBS0EsR0FBTEE7Ozs7Ozs7NENBRUpBLDJCQUFrQkEsOEJBQXlCQSxlQUFPQSxBQUErQkEsa0JBQWtCQTs7Ozs7Ozs7Ozs7Ozs7d0NBRS9GQSxNQUFNQTs7NENBRU5BLHNCQUFhQTs7Ozs7Ozs7O3dDQUdqQkEsMkJBQWtCQTs7OztvREFDZEEsd0JBQUtBLElBQUxBLGtDQUFLQSxJQUFMQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0JBb0JaQSx3QkFBd0JBLDRCQUF1Q0EsOEJBQWlCQSxBQUFnQ0E7Z0JBQ2hIQSxrQkFBa0JBLDRCQUF1Q0EsMEJBQWtCQSxBQUFxQ0EsbUNBQWtDQSxBQUFpQ0E7O2dCQUVuTEEsV0FBV0EsS0FBSUEsaURBQVVBO2dCQUN6QkEsMEJBQWtCQTs7Ozt3QkFFZEEsSUFBSUE7NEJBQ0FBLFNBQVNBOzs7Ozs7OztnQkFHakJBLGNBQWNBLDRCQUF1Q0EsMEJBQWtCQSxBQUFxQ0EsVUFBQ0EsR0FBR0E7K0JBQU1BLGNBQWNBLE1BQUtBLEdBQUNBLFVBQUlBOzs7Z0JBRTlJQSxPQUFPQSxJQUFJQSx3QkFBTUE7OztnQkFJakJBLE9BQU9BLHVDQUFnQ0EsNkNBQWVBLGNBQUlBOztzREFFZEEsR0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3Q0FFbkRBLElBQUlBLEtBQUtBOzs7Ozs7Ozs7d0NBQ0xBLHNCQUFhQSwwQkFBcUJBOzs7Ozs7Ozs7d0NBR2xDQSxZQUFnQkEseUJBQW9CQSxHQUFHQSxnQ0FBb0JBOzRDQUMzREEsSUFBSUE7Ozs7Ozs7Ozt3Q0FFQUEsUUFBWUEsdUJBQWtCQTs7NENBRTlCQSxVQUFNQSxHQUFLQSxLQUFJQTs0Q0FDZkEsMEJBQWtCQSxvQ0FBNkJBLGVBQU9BOzs7Ozs7Ozs7Ozs7Ozt3Q0FDbERBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozt3Q0FJakJBLGtCQUFzQkEscUJBQWdCQSxHQUFHQSxXQUFXQTs0Q0FDcERBLDJCQUFrQkEsd0NBQW1DQSxHQUFHQSxpQkFBaUJBOzs7Ozs7Ozs7Ozs7Ozt3Q0FFckVBLFNBQVlBLHVCQUFrQkE7OzRDQUU5QkEsV0FBTUEsR0FBS0EsNEJBQXVDQSwrQ0FBa0JBLEFBQWdDQTsyREFBS0Esd0JBQWdCQSxzQ0FBNEJBOzs0Q0FDckpBLDJCQUFrQkEsd0RBQStDQSxXQUFVQSxXQUFNQTs7OztvREFDN0VBLFdBQU1BLE9BQU9BOzs7Ozs7OzRDQUVqQkEsMkJBQWtCQSxvQ0FBNkJBLGVBQU9BOzs7Ozs7Ozs7Ozs7Ozt3Q0FDbERBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3lDQUtZQTs7Z0JBRXpDQSxZQUFZQSw2Q0FBZUEsY0FBS0E7O2dCQUVoQ0EsMEJBQW9CQTs7Ozt3QkFDaEJBLFVBQU1BLFNBQVdBLDRCQUFtQ0Esa0JBQUxBOzs7Ozs7O2dCQUVuREEsT0FBT0E7O3VDQUVlQSxHQUFPQSxVQUFvQkE7O2dCQUVqREEsc0JBQXNCQSxrQkFBUUE7Z0JBQzlCQSwwQkFBb0JBOzs7O3dCQUVoQkEsSUFBSUEsQ0FBQ0Esa0JBQWtCQTs0QkFDbkJBOzs7d0JBRUpBLDJCQUFrQkEsNEJBQXNDQSxxQkFBVUE7Ozs7Z0NBQzlEQSxtQ0FBZ0JBLEdBQWhCQSx3REFBZ0JBLEdBQWhCQTs7Ozs7Ozs7Ozs7OztnQkFHUkEsYUFBYUEsS0FBSUEsaURBQVVBO2dCQUMzQkEsY0FBY0EsNEJBQWtDQSxnQkFBU0EsQUFBaUNBOytCQUFLQSxtQ0FBZ0JBLElBQWhCQTs7O2dCQUUvRkEsT0FBT0E7b0JBRUhBLGFBQWFBLGdCQUFRQTtvQkFDckJBLGlCQUFpQkE7O29CQUVqQkEsV0FBV0E7b0JBQ1hBLDJCQUFrQkEsNEJBQXNDQSxpQkFBYUEsbUJBQVFBOzs7OzRCQUV6RUEsbUNBQWdCQSxJQUFoQkEsd0RBQWdCQSxJQUFoQkE7NEJBQ0FBLElBQUlBLG1DQUFnQkEsSUFBaEJBO2dDQUNBQSxZQUFZQTs7Ozs7Ozs7O2dCQUl4QkEsT0FBT0E7OzBEQUUwQ0EsR0FBT0EsaUJBQTJCQTs7Ozs7Ozs7Ozs7Ozs7d0NBRW5GQTs7NENBRUFBLGdCQUFvQkEsc0JBQWlCQSxHQUFHQTs0Q0FDeENBOzs7Ozs7Ozs7Ozs7O3dDQUVJQSxzQkFBYUE7Ozs7O3dDQUViQSxJQUFJQSxnQ0FBU0E7Z0RBQ1RBOzs7OzRDQUVKQSxJQUFJQSxhQUFRQSx3QkFBT0EsaUJBQWlCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OytCQUcvQkEsR0FBUUEsaUJBQTJCQTs7Z0JBRTVDQTs7Z0JBRUFBLE9BQU9BLENBQUNBO29CQUVKQTs7b0JBRUFBLDBCQUFpQkE7Ozs7NEJBRWJBLFdBQVdBLHFDQUE0QkEsd0JBQXdCQTs0QkFDL0RBLDJCQUFrQkEsNEJBQXNDQSxrQkFBY0EsY0FBR0E7Ozs7b0NBRXJFQSxXQUFXQSxxQ0FBNEJBLHdCQUF3QkE7b0NBQy9EQSxJQUFJQSxrQ0FBV0EsdUJBQVNBLENBQUNBLGtDQUFXQTt3Q0FFaENBLElBQUlBLGdDQUFTQTt3Q0FDYkE7Ozs7Ozs7Ozs7Ozs7OztnQkFNaEJBLE9BQU9BOzt3Q0FFaUNBLEdBQU9BOztnQkFFL0NBLG9CQUFvQkEsNkNBQWVBLGNBQUtBOztnQkFFeENBLEtBQUtBLFdBQVdBLElBQUlBLEdBQUdBO29CQUNuQkEsa0JBQWNBLEdBQUtBLEFBQXNDQSxVQUFDQTs0QkFBUUEsU0FBU0E7NEJBQUdBLE9BQU9BOzBCQUE1Q0EsS0FBSUE7OztnQkFFakRBO2dCQUNBQSxPQUFPQSxDQUFDQTtvQkFFSkE7O29CQUVBQSxLQUFLQSxZQUFXQSxLQUFJQSxHQUFHQTt3QkFFbkJBLDBCQUFrQkEsaUJBQWFBOzs7O2dDQUUzQkEsSUFBSUEsS0FBS0E7b0NBQ0xBOzs7Z0NBRUpBLFFBQVFBLGtCQUFjQTtnQ0FDdEJBLGtCQUFjQSxHQUFLQSxxREFBMENBLGtCQUFjQSxJQUFHQSxrQkFBY0E7O2dDQUU1RkEsSUFBSUEsa0JBQWNBLFdBQVdBO29DQUN6QkE7Ozs7Ozs7Ozs7Z0JBS2hCQSxPQUFPQTs7O2dCQU9QQSwwQkFBMEJBLEtBQUlBOztnQkFFOUJBLEtBQUtBLFdBQVdBLElBQUlBLFFBQUdBO29CQUVuQkEsK0JBQStCQTs7b0JBRS9CQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxRQUFHQTt3QkFFdkJBLElBQUlBLENBQUNBLG9CQUFVQSxHQUFHQTs0QkFDZEEsMkJBQTJCQSxHQUFHQTs7Ozs7Z0JBSTFDQSxPQUFPQTs7O2dCQUlQQSwwQkFBMEJBLEtBQUlBOztnQkFFOUJBLEtBQUtBLFdBQVdBLElBQUlBLFFBQUdBO29CQUVuQkEsK0JBQStCQTs7b0JBRS9CQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxRQUFHQTt3QkFFdkJBLElBQUlBLG9CQUFVQSxHQUFHQTs0QkFDYkEsMkJBQTJCQSxHQUFHQTs7Ozs7Z0JBSTFDQSxPQUFPQTs7d0NBRW9DQTtnQkFFM0NBLDBCQUEwQkEsS0FBSUE7O2dCQUU5QkEsS0FBS0EsV0FBV0EsSUFBSUEsU0FBU0E7b0JBRXpCQSwrQkFBK0JBLFVBQUVBOztvQkFFakNBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLFNBQVNBO3dCQUU3QkEsSUFBSUEsb0JBQVVBLFVBQUVBLElBQUlBLFVBQUVBOzRCQUNsQkEsMkJBQTJCQSxVQUFFQSxJQUFJQSxVQUFFQTs7Ozs7Z0JBSS9DQSxPQUFPQTs7OztnQkEwRFBBO2dCQUNBQTtnQkFDQUEsbUJBQWtCQSxVQUFjQTtnQkFDaENBO2dCQUNBQSwwQkFBa0JBOzs7O3dCQUVkQSwyQkFBa0JBOzs7O2dDQUVkQSxJQUFJQSxnQkFBU0EsR0FBR0EsTUFBS0E7b0NBQ2pCQSxXQUFXQSxnQkFBU0EsR0FBR0E7Ozs7Ozs7Ozs7Ozs7O2dCQUluQ0EsT0FBT0E7O3FDQUdlQSxVQUFxQkE7Z0JBRTNDQSxhQUFXQSwyQ0FBUUEsUUFBR0E7Z0JBQ3RCQSxTQUFPQSwyQ0FBUUEsUUFBR0E7O2dCQUVsQkEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7b0JBQ25CQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTt3QkFDbkJBLGdCQUFTQSxHQUFHQSxJQUFLQTs7OztnQkFFekJBLEtBQUtBLFlBQVdBLEtBQUlBLFFBQUdBO29CQUVuQkEsS0FBS0EsWUFBV0EsS0FBSUEsUUFBR0E7d0JBRW5CQSxJQUFJQSxPQUFLQTs0QkFDTEEsZ0JBQVNBLElBQUdBOzs0QkFDWEEsSUFBSUEsb0JBQVVBLElBQUdBOzs7Ozs7O2dDQVFsQkEsZ0JBQVNBLElBQUdBO2dDQUNaQSxnQkFBU0EsSUFBR0E7Ozs7OztnQkFLeEJBLEtBQUtBLFlBQVdBLEtBQUlBLFFBQUdBO29CQUNuQkEsS0FBS0EsWUFBV0EsS0FBSUEsUUFBR0E7d0JBQ25CQSxZQUFLQSxJQUFHQSxLQUFLQTs7OztnQkFFckJBLEtBQUtBLFdBQVdBLElBQUlBLFFBQUdBO29CQUVuQkEsS0FBS0EsWUFBV0EsS0FBSUEsUUFBR0E7d0JBRW5CQSxLQUFLQSxZQUFXQSxLQUFJQSxRQUFHQTs0QkFFbkJBLElBQUlBLGtCQUFTQSxJQUFHQSxNQUFLQSxnQkFBU0EsR0FBR0EsYUFBS0EsZ0JBQVNBLElBQUdBO2dDQUU5Q0EsZ0JBQVNBLElBQUdBLEtBQUtBLGlCQUFTQSxJQUFHQSxNQUFLQSxnQkFBU0EsR0FBR0E7Z0NBQzlDQSxZQUFLQSxJQUFHQSxLQUFLQTs7Ozs7O2lEQU1pQkEsR0FBT0EsR0FBT0EsVUFBaUJBO2dCQUU3RUEsSUFBSUEsY0FBU0EsR0FBR0EsUUFBTUE7b0JBQ2xCQSxPQUFPQTs7O2dCQUVYQSxJQUFJQSxVQUFLQSxHQUFHQSxRQUFNQTtvQkFDZEEsT0FBT0EsbUJBQVFBLEdBQUdBOzs7Z0JBRXRCQSxPQUFPQSw0QkFBa0NBLCtCQUEwQkEsR0FBR0EsVUFBS0EsR0FBR0EsS0FBSUEsVUFBVUEsYUFBTUEsNEJBQWlDQSwrQkFBMEJBLFVBQUtBLEdBQUdBLEtBQUlBLEdBQUdBLFVBQVVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztzQkE5L0N2R0E7WUFBUUE7WUFBc0JBO1lBQWtCQTtZQUF1QkE7WUFBc0JBO1lBQW1CQTtZQUFpQkE7WUFBZ0JBO1lBQWtCQTtZQUFtQkE7WUFBaUJBO1lBQXNCQTtZQUFpQkE7WUFBbUJBO1lBQXNCQTtZQUF1QkE7WUFBa0JBLE9BQU9BOztzQkFFdFVBO1lBQVFBO1lBQWlCQTtZQUFnQkE7WUFBa0JBO1lBQW1CQTtZQUFtQkE7WUFBaUJBO1lBQXNCQTtZQUFzQkE7WUFBc0JBO1lBQWtCQTtZQUFpQkE7WUFBbUJBO1lBQXFCQTtZQUFzQkE7WUFBdUJBO1lBQWtCQSxPQUFPQTs7O1lBamI3WUE7O1lBRUFBLEtBQUtBLFdBQVdBLElBQUlBLFFBQUdBO2dCQUVuQkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsUUFBR0E7b0JBRXZCQSxJQUFJQSxvQkFBVUEsR0FBR0E7d0JBQ2JBOzs7OztZQUlaQSxPQUFPQTs7O1lBV1BBLGdCQUFnQkEsS0FBSUE7WUFDcEJBLEtBQUtBLFdBQVdBLElBQUlBLFFBQUdBO2dCQUNuQkEsY0FBY0EsS0FBSUE7OztZQUV0QkEsS0FBS0EsWUFBV0EsS0FBSUEsUUFBR0E7Z0JBQ25CQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtvQkFDbkJBLElBQUlBLG9CQUFVQSxJQUFHQTt3QkFDYkEsa0JBQVVBLFFBQU9BOzs7OztZQUU3QkEsT0FBT0E7OztZQUtYQSxTQUFTQSxLQUFJQTtZQUNiQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtnQkFDbkJBLE9BQU9BLEtBQUlBOzs7WUFFZkEsS0FBS0EsWUFBV0EsS0FBSUEsUUFBR0E7Z0JBQ25CQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtvQkFDbkJBLElBQUlBLE9BQUtBLEtBQUtBLENBQUNBLG9CQUFVQSxJQUFHQTt3QkFDeEJBLFdBQUdBLFFBQU9BOzs7OztZQUV0QkEsT0FBT0E7OztZQUtQQSxnQkFBZ0JBLEtBQUlBO1lBQ3BCQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtnQkFDbkJBLGNBQWNBLEtBQUlBOzs7WUFFdEJBLEtBQUtBLFlBQVdBLEtBQUlBLFFBQUdBO2dCQUNuQkEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7b0JBQ25CQSxJQUFJQSxvQkFBVUEsSUFBR0EsT0FBTUEsbUJBQVNBLElBQUdBO3dCQUMvQkEsa0JBQVVBLFFBQU9BOzs7OztZQUU3QkEsT0FBT0E7OztZQUtQQSxnQkFBZ0JBLEtBQUlBO1lBQ3BCQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFHQTtnQkFDbkJBLGNBQWNBLEtBQUlBOzs7WUFFdEJBLEtBQUtBLFlBQVdBLEtBQUlBLFFBQUdBO2dCQUNuQkEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7b0JBQ25CQSxJQUFJQSxvQkFBVUEsSUFBR0EsT0FBTUEsbUJBQVNBLElBQUdBO3dCQUMvQkEsa0JBQVVBLE9BQU9BOzs7OztZQUU3QkEsT0FBT0E7OztZQUtIQSxZQUFZQSxLQUFJQSxvRkFBZ0JBOztZQUVoQ0EsS0FBSUEsV0FBV0EsSUFBSUEsUUFBR0E7Z0JBQ2xCQSxVQUFVQSw0QkFBa0NBLHVCQUFVQSxVQUFHQSxBQUFpQ0E7K0JBQUtBLElBQUlBOzs7O1lBRXZHQSxPQUFPQTs7O21CQWtGb0NBLDRCQUE0RUEsMENBQTlDQTs7O21CQUN3SkE7OzttQkFBbkxBLDRCQUEyRUEsbUNBQXVCQSxBQUEwRUE7OzttQkFDU0E7OzttQkFBbkxBLDRCQUEyRUEsbUNBQXVCQSxBQUEwRUE7OzttQkFDbkxBLDhEQUFrQ0E7OzttQkFDekJBLDZEQUFpQ0E7OzttQkFNZ0NBOzt1QkEyRkpBLEdBQUdBLElBQUlBLEtBQUtBOzs7O21CQWdCd0JBOzt1QkFpTGxIQSxHQUFHQTttQkFBTUEsMEJBQWNBLEdBQVdBOzt1QkFtRTFEQSxHQUNBQTttQkFDRUEsU0FBb0JBLFVBQUdBOzs7bUJBU2dLQSxvQkFBZUE7O3VCQUUzSUE7WUFBUUEsU0FBU0E7WUFBU0EsT0FBT0E7OzttQkFpTzBEQSxZQUFXQTs7dUJBb0YxR0E7WUFBUUEsU0FBU0EsS0FBSUE7WUFBYUEsT0FBT0E7OzttQkFnTXpCQTs7O21CQWlITEEsWUFBT0E7O3VCQTRCTUEsR0FBR0E7ZUFBTUEsUUFBUUEsSUFBSUE7OztlQUFpREE7O3VCQWN0RUEsSUFBR0E7ZUFBTUEsU0FBUUEsSUFBSUE7OztlQWtIc0JBOzs7bUJBNFN4QkEsU0FBU0E7O3VCQUNiQSxHQUFHQTttQkFBTUEsVUFBU0EsSUFBSUE7OzttQkFBaURBOzs7Ozs7Ozs7d0JDcnFEbExBLE9BQU9BLHFEQUFPQTs7Ozs7d0JBSWRBLE9BQU9BOzs7Ozt3QkFJUEEsT0FBT0E7Ozs7O3dCQUlQQSxPQUFPQTs7Ozs7d0JBSVBBLE9BQU9BOzs7Ozt3QkFJUEEsT0FBT0EsSUFBSUEsc0JBQU1BOzs7Ozt3QkFJakJBLE9BQU9BOzs7Ozt3QkFJUEEsT0FBT0E7Ozs7OzZCQTFES0E7b0JBRWxCQSxPQUFPQSxJQUFJQSxzQkFBTUEsaURBQVNBLEdBQUdBOzs2QkFFWEE7b0JBRWxCQSxPQUFPQSxvQkFBRUE7OzZCQUVTQTtvQkFFbEJBLFFBQVFBLG9CQUFFQTtvQkFDVkEsS0FBS0EsV0FBV0EsSUFBSUEsZUFBT0E7d0JBQ3ZCQSxJQUFJQSxVQUFVQSxHQUFHQTs7O29CQUVyQkEsT0FBT0E7O2dDQUVjQTtvQkFFckJBLFFBQVFBLG9CQUFFQTtvQkFDVkEsS0FBS0EsV0FBV0EsSUFBSUEsR0FBR0E7d0JBQ25CQSxJQUFJQSxhQUFhQTs7O29CQUVyQkEsT0FBT0E7OzZCQUVXQTtvQkFFbEJBLE9BQU9BLG9CQUFFQSxXQUFXQTs7Ozs7Ozs7Ozs7Ozs0QkN0QlBBLEdBQVNBOzs7Z0JBRXRCQSxlQUFVQSxrQkFBU0EscUNBQU1BLENBQUNBO2dCQUMxQkEsbUJBQWNBOztnQkFFZEE7Z0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLEtBQUtBO29CQUVyQkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsS0FBS0E7d0JBRXpCQSxZQUFZQSxDQUFNQSxBQUFDQSxVQUFFQSxHQUFHQTt3QkFDeEJBLGdDQUFRQSxHQUFSQSxpQkFBYUE7O3dCQUViQSxJQUFJQSxVQUFFQSxHQUFHQTs0QkFDTEEsbUNBQWFBLE1BQUtBLENBQUNBOzs7d0JBRXZCQTs7OztnQkFJUkEsMEJBQWtCQTs7Ozt3QkFDZEEsaUJBQVlBLHNDQUFpQkE7Ozs7Ozs7OzswQkFHVEE7WUFFeEJBLFlBQVlBO1lBQ1pBLElBQUlBLFNBQVNBO2dCQUNUQTs7O1lBRUpBLE9BQU9BLDRCQUEwQ0EsZ0NBQVlBLHNCQUFzQkEsNEJBQTJDQSw0QkFBUUE7OztZQUt0SUEsT0FBT0E7Ozs7Ozs7Ozs7Ozt5Q0N0Q2tDQSxJQUFJQTs7OzswQ0FFREE7O29CQUU1Q0EsT0FBT0EsdURBQWVBLDRCQUF3REEsaUJBQTFCQTs7NENBR1JBLFVBQXNCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQUVsRUEsY0FBY0EsQUFBK0VBOztnREFFN0ZBLElBQUlBLHNCQUFzQkE7Ozs7Ozs7OzRDQUFvQkE7Ozs0Q0FDOUNBLHNCQUFhQSxJQUFJQSx3QkFBTUEsS0FBSUE7Ozs7OzRDQUUzQkEsWUFBZ0JBLEFBQXdDQSxnREFBbEJBLEtBQUlBOztnREFFMUNBOzs7OztpREFBT0E7Ozs7Ozs7OzRDQUVIQSxlQUFtQkEsS0FBSUE7O2dEQUV2QkEsMEJBQWtCQTs7Ozs7Ozs7Ozs7Ozs7NENBSWRBLElBQUlBO29EQUVBQSxlQUFlQSw0QkFBOEVBLCtEQUFtQ0EsZ0NBQW9CQSxxQ0FBZUE7O29EQUluS0EsZUFBZUEsOERBQWtDQSxnQ0FBb0JBOzs7Z0RBR3pFQSwyQkFBNEJBLDRCQUEyRUEsb0JBQWFBLEFBQTBFQTs7Ozs7Ozs7Ozs7Ozs7NENBRTFMQSxVQUFRQSxrQkFBa0JBOztnREFFMUJBLElBQUlBLDRCQUFxREEsa0JBQWFBLEFBQXNEQTs7bUVBQUtBLDRCQUFpQkEsS0FBR0E7OztvREFBTUE7OztnREFDM0pBLElBQUlBLDRCQUFxREEsY0FBU0EsQUFBc0RBOzttRUFBS0Esb0JBQWtCQTs7O29EQUFNQTs7OztnREFFckpBLGlCQUFpQkE7Z0RBQ2pCQSxzQkFBYUE7Ozs7Ozs7Ozs7Ozs7NENBSXJCQSxJQUFJQSwwQkFBMEJBLDZCQUFxQkE7Ozs7Ozs7OzRDQUFhQTs7OzRDQUNoRUEsWUFBWUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7c0JBckM4RUEsSUFBSUE7bUJBQU9BLHFCQUFlQTs7c0JBSy9EQTtZQUFRQSxTQUFTQSxJQUFJQSx3QkFBTUEsS0FBSUE7WUFBY0EsT0FBT0E7OzttQkFtQjhGQTs7Ozs7Ozs7Ozs7K0JBbUJ4TEEsR0FBYUE7Z0JBRTVCQSxPQUFPQSxZQUFXQTs7b0NBR0NBO2dCQUVuQkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7O3FDQzFEb0JBLEtBQUlBOzs0QkFHckJBOzs7OztnQkFFZEEsSUFBSUEsU0FBU0E7b0JBRVRBLDBCQUFrQkE7Ozs7NEJBQ2RBOzs7Ozs7cUJBQ0pBLFNBQUlBLEtBQUlBLG1GQUFpQkEsT0FBT0E7O29CQUdoQ0EsU0FBSUEsS0FBSUEsbUZBQWlCQTs7Ozs7OztZQUs3QkEsaUJBQWlCQSxLQUFJQTs7WUFFckJBLDBCQUFvQkE7Ozs7b0JBRWhCQSxjQUFjQSw2RUFBbUZBLFlBQVdBLEFBQXdFQTs7bUNBQVFBLHNEQUFvREEsS0FBSUE7O21DQUFRQSxBQUFvRUE7b0JBQ2hVQSxJQUFJQSxlQUFlQSw0QkFBdUVBLGdCQUFXQSxBQUF3RUE7O3VDQUFRQSxDQUFDQSxzREFBb0RBLE1BQUtBOzs7d0JBQzNPQSxlQUFlQTs7Ozs7Ozs7WUFHdkJBLE9BQU9BLEtBQUlBLDRCQUFjQTs7OztZQUt6QkEsUUFBUUEsS0FBSUEsNEJBQWNBLEFBQTBDQSxVQUFDQTtvQkFBUUEsU0FBU0EsS0FBSUE7b0JBQVdBLE9BQU9BO2tCQUE1REEsS0FBSUE7O1lBRXBEQSwwQkFBa0JBOzs7O29CQUNkQSxJQUFJQSxVQUFVQSxvQkFBZUE7Ozs7Ozs7WUFFakNBLE9BQU9BOztrQ0FHa0JBO1lBRXpCQSxPQUFPQSxLQUFJQSw0QkFBY0EsNEJBQTRFQSxVQUFFQSxBQUFxRUE7MkJBQUtBLHVDQUF1Q0E7Ozt5QkFHak1BO1lBRXZCQSxPQUFPQSxLQUFJQSw0QkFBY0EsNEJBQXlFQSxjQUFFQTs7MkJBRzNFQTtZQUV6QkEsT0FBT0EsS0FBSUEsNEJBQWNBLDRCQUF5SEEsbUJBQUVBLEFBQThKQTsyQkFBT0EsNEJBQXFIQSxnQkFBUUEsQUFBOEdBO21DQUFPQSwwQ0FBcUJBLEtBQUtBOzs7Ozs7Ozs7O3NCQTlCaFFBOzs7Ozs7Ozs7OytCQW1DbFRBLEdBQVdBO2dCQUUxQkEsT0FBT0EsNEJBQXdDQSxpQkFBRUE7O29DQUc5QkE7O2dCQUlmQTtnQkFDQUEsMEJBQWtCQTs7Ozt3QkFDZEEsT0FBT0EscUJBQVlBOzs7Ozs7O2dCQUV2QkEsT0FBT0E7Ozs7Ozs7O3FDQ3BFb0RBLEdBQVNBOzs7Ozs7Ozs7Ozs7Ozs0Q0FFNUVBLElBQUlBOzs7Ozs7Ozs0Q0FDQUE7Ozs0Q0FFSkEsMEJBQXVCQSwrRUFBc0NBLEdBQUdBOzs7Ozs7Ozs7Ozs7Ozs0Q0FFNURBLElBQUlBLHVCQUFxQkEscURBQTBDQSxjQUFhQTtvREFDNUVBOzs7Z0RBQ0pBLElBQUlBLHVCQUFxQkEscURBQTBDQSxjQUFhQTtvREFDNUVBOzs7Z0RBQ0pBLElBQUlBLHVCQUFxQkEscURBQTBDQSxjQUFhQTtvREFDNUVBOzs7Z0RBQ0pBLElBQUlBLGVBQWVBLGNBQWNBLHNCQUFzQkEsdUJBQXFCQSxxREFBMENBLHFEQUEwQ0EsY0FBYUEsZUFBY0E7b0RBQ3ZMQTs7O2dEQUNKQSxJQUFJQSxlQUFlQSxjQUFjQSxzQkFBc0JBLHVCQUFxQkEscURBQTBDQSxxREFBMENBLGNBQWFBLGVBQWNBO29EQUN2TEE7OztnREFDSkEsSUFBSUEsZUFBZUEsY0FBY0Esc0JBQXNCQSx1QkFBcUJBLHFEQUEwQ0EscURBQTBDQSxjQUFhQSxlQUFjQTtvREFDdkxBOzs7O2dEQUVKQSxzQkFBYUEsQUFBOERBO3lFQUFDQTs0REFBUUEsU0FBU0EsU0FBZ0NBLDRCQUFtQ0EscUJBQUxBLHNCQUFvQkEsMkJBQTJCQSxxREFBMENBLGNBQWFBOzREQUFNQSxTQUFTQSxTQUFnQ0EsNEJBQW1DQSxxQkFBTEEsc0JBQW9CQSwyQkFBMkJBLHFEQUEwQ0EsY0FBYUE7NERBQU1BLFNBQVNBLFNBQWdDQSw0QkFBbUNBLHFCQUFMQSxzQkFBb0JBLDJCQUEyQkEscURBQTBDQSxjQUFhQTs0REFBTUEsT0FBT0E7O3FFQUFqbEJBLEtBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7aUVBSWtEQSxHQUFTQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FFdEdBLE9BQVdBLDRCQUFtQ0EsbUJBQVdBO2dEQUNyRUEsbURBQXNEQTtnREFDMUNBLDBCQUFzQkEsK0RBQXNEQTs7Ozs7Ozs7Ozs7Ozs7NENBRXhFQSxVQUFVQTtnREFDVkEsSUFBSUEsNEJBQWtGQSxtQkFBaUJBO29EQUNuR0E7Ozs7Z0RBRUpBLFFBQVlBLDRCQUFtQ0EsYUFBS0E7Z0RBQ3BEQSwyQkFBdUJBLCtEQUFzREE7Ozs7Ozs7Ozs7Ozs7OzRDQUV6RUEsV0FBV0E7Z0RBQ1hBLElBQUlBLDRCQUFrRkEsbUJBQWlCQTtvREFDbkdBOzs7O2dEQUVKQSxRQUFZQSw0QkFBbUNBLGNBQU1BO2dEQUNyREEsVUFBVUE7Z0RBQ1ZBLElBQUlBLDRCQUFrRkEsbUJBQWlCQTtvREFDbkdBOzs7O2dEQUVKQSxzQkFBYUEsU0FBMkNBLGNBQU9BLGVBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQ0NoRHJEQTs7OzsrQ0FFUUE7b0JBRWxDQSxPQUFPQSx3REFBeUJBLElBQU1BLENBQUNBLElBQUlBLEdBQUNBLG1CQUFLQSx5REFBMUNBOzswREFHc0NBO29CQUU3Q0EsUUFBUUEsTUFBSUEsR0FBQ0E7b0JBQ2JBLFlBQUtBO29CQUNMQSxPQUFPQSx3REFBeUJBLEdBQU1BLFdBQUlBLHlEQUFuQ0E7OzJDQUd1QkE7b0JBRTlCQTtvQkFDQUEsT0FBT0E7d0JBRUhBO3dCQUNBQSxTQUFLQTs7b0JBRVRBLE9BQU9BOztpQ0FFbUJBO29CQUUxQkEsYUFBYUEsS0FBSUE7b0JBQ2pCQSxPQUFPQTt3QkFFSEEsVUFBVUEsS0FBSUEsQ0FBQ0EsTUFBSUE7d0JBQ25CQSxXQUFXQSx3REFBeUJBLFFBQU1BLHlEQUEvQkE7O3dCQUVYQSxTQUFLQTs7O29CQUdUQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7bUNDeEJ1QkE7c0NBQ0dBOzs7O29CQUlqQ0EsMEJBQW9CQTs7Ozs0QkFFaEJBLGlEQUFRQSxLQUFSQSxrQ0FBZUEsQ0FBQ0EscUJBQWFBOzRCQUM3QkEsb0RBQVdBLEtBQVhBLHFDQUFrQkEsQUFBQ0EsQ0FBQ0EsQ0FBQ0EscUJBQWFBOzs7Ozs7Ozs7eUNBSWFBO2dCQUVuREEsY0FBY0EsS0FBSUE7O2dCQUVsQkEsS0FBS0EsV0FBV0EsSUFBSUEsR0FBR0E7b0JBRW5CQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxHQUFHQTt3QkFFdkJBLFlBQVFBLGlEQUFRQSxHQUFSQSxtQ0FBYUEsaURBQVFBLEdBQVJBLGtDQUFjQSxpREFBUUEsR0FBUkE7Ozs7Z0JBSTNDQSxPQUFPQTs7Z0NBR2tCQSxHQUFjQTtnQkFFdkNBLE9BQU9BLE1BQUlBLG9EQUFXQSxLQUFYQTs7OEJBR1lBLEdBQWNBO2dCQUVyQ0EsT0FBT0EsS0FBSUEsaURBQVFBLEtBQVJBOztnQ0FHYUEsR0FBY0E7Z0JBRXRDQSxPQUFPQSxDQUFDQSxNQUFJQSxpREFBUUEsS0FBUkE7O2dDQUdhQSxHQUFjQTtnQkFFdkNBLE9BQU9BLE1BQUlBLGlEQUFRQSxLQUFSQTs7a0NBRWNBLEdBQWNBLE1BQVVBO2dCQUVqREEsT0FBT0EsTUFBSUEsQ0FBQ0EsaURBQVFBLE1BQVJBLG1DQUFnQkEsaURBQVFBLE1BQVJBOztrQ0FFSEEsR0FBY0E7OztnQkFFdkNBLElBQUlBLFFBQVFBO29CQUNSQSxPQUFPQTs7O2dCQUVYQTtnQkFDQUEsMEJBQW9CQTs7Ozt3QkFDaEJBLGVBQVFBLGlEQUFRQSxLQUFSQTs7Ozs7OztnQkFFWkEsT0FBT0EsTUFBSUE7OzJDQUd1QkE7Z0JBRWxDQSxPQUFPQSx3REFBeUJBLHFCQUFRQSxDQUFDQSxNQUFJQSxBQUFDQSxlQUFLQSxvREFBNUNBOztzREFFc0NBO2dCQUU3Q0EsUUFBUUEsUUFBSUEsQUFBQ0E7Z0JBQ2JBLGNBQUtBO2dCQUNMQSxPQUFPQSx3REFBZUEsdUJBQUNBLHFCQUFRQSxPQUFJQSxzREFBNUJBOzt1Q0FHdUJBO2dCQUU5QkE7Z0JBQ0FBLE9BQU9BO29CQUVIQTtvQkFDQUEsVUFBS0E7O2dCQUVUQSxPQUFPQTs7eUNBR3VCQTtnQkFFOUJBO2dCQUNBQTtnQkFDQUE7Z0JBQ0FBLElBQUlBLE1BQUlBLENBQUNBLENBQUNBLGVBQVVBO2dCQUNwQkEsSUFBSUEsQ0FBQ0EsTUFBSUEsU0FBTUEsQ0FBQ0EsQ0FBQ0EsZUFBVUE7Z0JBQzNCQSxJQUFJQSxDQUFDQSxNQUFJQSxDQUFDQSxpQkFBV0E7Z0JBQ3JCQSxJQUFJQSxDQUFDQTtnQkFDTEEsT0FBT0Esb0JBQUtBOztzQ0FHbUJBO2dCQUUvQkEsU0FBS0E7Z0JBQ0xBLFNBQUtBO2dCQUNMQSxTQUFLQTtnQkFDTEEsU0FBS0E7Z0JBQ0xBLFNBQUtBO2dCQUNMQSxTQUFLQTs7Z0JBRUxBLE9BQU9BOzttQ0FHc0JBLEdBQWNBOztnQkFFM0NBLE9BQU9BLGVBQWdCQSxnQ0FBb0JBLGVBQXVCQSxBQUFtQ0E7K0JBQU9BLGtDQUFXQTs7OzZCQUc3RkE7O2dCQUUxQkEsYUFBYUEsS0FBSUE7Z0JBQ2pCQSxPQUFPQTtvQkFDSEEsV0FBV0EscURBQW1DQTs7O2dCQUVsREEsT0FBT0E7OytCQUdtQkE7Z0JBRTFCQSxhQUFhQSxLQUFJQTtnQkFDakJBLE9BQU9BO29CQUVIQSxVQUFVQSxNQUFJQSxDQUFDQSxxQkFBSUE7b0JBQ25CQSxXQUFXQSx3REFBeUJBLFFBQU1BLG9EQUEvQkE7O29CQUVYQSxVQUFLQTs7O2dCQUdUQSxPQUFPQTs7cUNBR2tDQTs7Ozs7Ozs7Ozs7Ozs7NENBRXpDQTs7Ozs7NkNBQU9BOzs7Ozs7Ozt3Q0FFSEEsTUFBVUEscURBQW1DQTs0Q0FDN0NBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztpQ0FLTUE7OztnQkFFdkJBO2dCQUNBQSwwQkFBb0JBOzs7O3dCQUNoQkEsaUJBQVNBLGlEQUFRQSxLQUFSQTs7Ozs7OztnQkFFYkEsT0FBT0E7OytCQUdnQkE7O2dCQUV2QkE7Z0JBQ0FBLDBCQUFvQkE7Ozs7d0JBQ2hCQSxpQkFBU0EsaURBQVFBLEtBQVJBOzs7Ozs7O2dCQUViQSxPQUFPQTs7Z0NBRWtCQTs7Z0JBRXpCQTtnQkFDQUEsMEJBQW9CQTs7Ozt3QkFDaEJBLGlCQUFTQSxzQkFBT0E7Ozs7Ozs7Z0JBRXBCQSxPQUFPQTs7dUNBR21DQTtnQkFFMUNBLE9BQU9BLDRCQUFpRkEsV0FBR0EsQUFBMEVBOztxQ0FHeElBO2dCQUU3QkEsT0FBT0E7O3FDQTJDc0JBO2dCQUU3QkEsT0FBT0EsMEJBQU1BLGVBQWtCQSw0QkFBMkNBLGFBQUtBLEFBQW9DQTs7bUNBR3RGQTtnQkFFN0JBLE9BQU9BLDBCQUFNQSxlQUF1QkE7O3dDQS9DRkE7Z0JBRWxDQSxPQUFPQSxDQUFpQkEsZUFBcUJBOzs4QkFHdkJBLEdBQWNBO2dCQUVwQ0EsT0FBT0EsZ0NBQUNBLE1BQUlBLENBQUNBLDJCQUFpQkE7OytCQUdEQTtnQkFFN0JBLGNBQWNBLEtBQUlBOztnQkFFbEJBLE9BQU9BO29CQUVIQSxVQUFXQSxNQUFJQSxBQUFDQTs7b0JBRWhCQSxZQUFZQTs7b0JBRVpBLFVBQUtBOzs7Z0JBR1RBLE9BQU9BOztpQ0FHdUJBO2dCQUU5QkEsY0FBY0EsS0FBSUE7O2dCQUVsQkEsT0FBT0E7b0JBRUhBLFVBQVlBLE1BQUlBLENBQUNBLHFCQUFJQTtvQkFDckJBLFlBQVlBO29CQUNaQSxVQUFLQTs7O2dCQUdUQSxPQUFPQTs7Ozs7Ozs7OzttQkE3Q21LQSw0QkFBbUNBLHVDQUFMQTs7O21CQWtEaEZBOzs7Ozs7O3VDQ3ZNMUZBO29CQUU5QkEsT0FBT0E7Ozs7Ozs7Ozs7OztvQkEvQkhBLElBQUlBLGVBQVVBO3dCQUVKQTs7NEJBRUZBLElBQUlBLGVBQVVBO2dDQUNWQSxjQUFTQTs7Ozs7b0JBSXJCQSxPQUFPQTs7Ozs7OzhCQWhCSkE7OEJBQ0tBOzs0QkFtQkpBOztnQkFFUkEsZ0JBQVdBOzs4QkFHSEEsU0FBaUJBO3FEQUNsQkE7Ozs7O2dCQU1EQTtnQkFDRkEsY0FBU0E7Ozs7Ozs7O3NEQ2pDMkNBO29CQUV4REE7b0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLGVBQU9BO3dCQUN2QkEsZUFBUUEscUJBQU1BOzs7b0JBRWxCQSxlQUFlQSxrQkFBUUEsbUNBQUlBLENBQUNBO29CQUM1QkEsS0FBS0EsWUFBV0EsS0FBSUEsZUFBT0E7d0JBQ3ZCQSw0QkFBU0EsSUFBVEEsYUFBY0E7OztvQkFFbEJBLFlBQVlBLGtCQUFTQTtvQkFDckJBLEtBQUtBLFlBQVdBLEtBQUlBLEdBQUdBO3dCQUNuQkEseUJBQU1BLElBQU5BLFVBQVdBLFNBQU9BLGNBQUNBLEtBQUtBLENBQUNBOzs7b0JBRTdCQSxxQkFBcUJBLEtBQUlBOzs7b0JBR3pCQSxPQUFPQSwrRUFBaUNBLEdBQUdBLE9BQU9BOzt3REFHREEsR0FBT0EsR0FBT0EsR0FBT0EsT0FBY0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NENBRXBGQSxJQUFJQSxLQUFLQTs7Ozs7Ozs7OzRDQUVMQSxPQUFXQSxrQkFBUUE7Z0RBQ25CQSxrQkFBV0EsYUFBVUEsU0FBTUE7Z0RBQzNCQSxzQkFBYUE7Ozs7Ozs7Ozs0Q0FFWkEsSUFBSUEsS0FBS0E7Ozs7Ozs7Ozs0Q0FFVkEsMEJBQW1CQSx5RUFBMkJBLGVBQU9BLGVBQU9BLEdBQUdBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs0Q0FDbEVBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozs0Q0FJakJBLDJCQUFrQkEscUNBQUNBLHlCQUFNQSxHQUFOQSxZQUFXQSx5QkFBTUEsR0FBTkE7Ozs7Ozs7Ozs7Ozs7OzRDQUUxQkEseUJBQU1BLEdBQU5BLFVBQVdBLHdEQUFNQSxHQUFOQSxTQUFrQkE7Z0RBQzdCQSx5QkFBTUEsR0FBTkEsVUFBV0Esd0RBQU1BLEdBQU5BLFNBQWtCQTs7Z0RBRTdCQSw0QkFBU0EsMEJBQUlBLEtBQUlBLG1DQUFJQSxDQUFDQSxrQ0FBYUEsVUFBSUEsbUJBQXZDQSxhQUFnREE7Z0RBQ2hEQSwyQkFBbUJBLHlFQUEyQkEsR0FBR0EsZUFBT0EsR0FBR0EsT0FBT0E7Ozs7Ozs7Ozs7Ozs7OzRDQUM5REEsc0JBQWFBOzs7Ozs7Ozs7NENBRWpCQSx5QkFBTUEsR0FBTkEsVUFBV0Esc0RBQU1BLEdBQU5BLFNBQWdCQTtnREFDM0JBLHlCQUFNQSxHQUFOQSxVQUFXQSxzREFBTUEsR0FBTkEsU0FBZ0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NDQUtWQSxHQUFPQSxNQUFjQSxPQUFlQTs7b0JBRTdEQTtvQkFDQUE7O29CQUVBQTtvQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsZUFBT0E7d0JBQ3ZCQSxjQUFRQSxNQUFLQTs7O29CQUVqQkEsU0FBU0EsMkNBQVFBLEdBQUdBO29CQUNwQkEsS0FBS0EsWUFBV0EsS0FBSUEsR0FBR0E7d0JBQ25CQSxXQUFNQSxLQUFLQSxNQUFXQSxjQUFYQSxRQUFHQTs7O29CQUVsQkEsWUFBWUEsa0JBQVFBO29CQUNwQkEsS0FBS0EsWUFBV0EsS0FBSUEsR0FBR0E7d0JBQ25CQSx5QkFBTUEsSUFBTkEsVUFBV0EsT0FBT0EsQ0FBQ0EsS0FBS0EsQ0FBQ0E7OztvQkFFN0JBLGlCQUFXQSxrQkFBSUEsQ0FBQ0EsZ0NBQXNCQTs7b0JBRXRDQSw0REFBZ0JBLEdBQUdBLE9BQU9BLElBQVFBLE1BQVVBLE1BQVVBLE9BQU9BLEFBQWlDQTs7b0JBRTlGQSxPQUFPQSxXQUFPQTs7a0NBR0NBLE1BQVVBLE1BQWNBLE9BQWVBO29CQUV0REEsSUFBSUE7d0JBQ0FBOzt3QkFFQUE7OztvQkFFSkEsSUFBSUEsQ0FBQ0EsV0FBT0E7d0JBRVJBLElBQUlBLCtCQUFZQTs0QkFDWkEsU0FBU0EsUUFBTUE7Ozs7cUNBSUxBLEdBQU9BLEdBQU9BLEdBQU9BLE9BQWFBLElBQVdBLE1BQWNBLE1BQWNBLE9BQWVBO29CQUUxR0EsSUFBSUEsS0FBS0E7d0JBRUxBLG1EQUFPQSxRQUFVQSxNQUFVQSxPQUFPQSxBQUFpQ0E7O3dCQUluRUEsUUFBUUEseUJBQU1BLEdBQU5BLFVBQVdBLHlCQUFNQSxHQUFOQTt3QkFDbkJBLE9BQU9BOzRCQUVIQSxRQUFRQSxJQUFJQSxHQUFDQTs0QkFDYkEsUUFBS0E7NEJBQ0xBLHlCQUFNQSxHQUFOQSxtQ0FBTUEsR0FBTkEsVUFBWUE7NEJBQ1pBLHlCQUFNQSxHQUFOQSxtQ0FBTUEsR0FBTkEsVUFBWUE7OzRCQUVaQSxRQUFHQSxHQUFHQSxJQUFLQSxTQUFHQSxHQUFHQSxJQUFLQTs7NEJBRXRCQTs0QkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsR0FBR0E7Z0NBQ25CQSxnQ0FBVUEsS0FBSUEsQ0FBQ0EsQ0FBQ0EsTUFBSUEsUUFBR0EsR0FBR0E7OzRCQUM5QkEsS0FBS0EsWUFBV0EsS0FBSUEsR0FBR0E7Z0NBQ25CQSxnQ0FBVUEsS0FBSUEsQ0FBQ0EsQ0FBQ0EsTUFBSUEsUUFBR0EsR0FBR0E7Ozs0QkFFOUJBLGdDQUFRQTs0QkFDUkEsSUFBSUEsS0FBS0E7Z0NBQ0xBLHNEQUFVQSxlQUFPQSxlQUFPQSxHQUFHQSxPQUFPQSxJQUFRQSxNQUFVQSxNQUFVQSxPQUFPQSxBQUFpQ0E7O2dDQUV0R0Esc0RBQVVBLEdBQUdBLGVBQU9BLEdBQUdBLE9BQU9BLElBQVFBLE1BQVVBLE1BQVVBLE9BQU9BLEFBQWlDQTs7NEJBQ3RHQSxnQ0FBUUE7OzRCQUVSQSx5QkFBTUEsR0FBTkEsbUNBQU1BLEdBQU5BLFVBQVlBOzRCQUNaQSx5QkFBTUEsR0FBTkEsbUNBQU1BLEdBQU5BLFVBQVlBOzs7Ozs7Ozs7OztzREN4SG9DQTtvQkFFeERBO29CQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxlQUFPQTt3QkFDdkJBLGVBQVFBLHFCQUFNQTs7O29CQUVsQkEsZUFBZUEsa0JBQVFBLG1DQUFJQSxDQUFDQTtvQkFDNUJBLEtBQUtBLFlBQVdBLEtBQUlBLGVBQU9BO3dCQUN2QkEsNEJBQVNBLElBQVRBLGFBQWNBOzs7b0JBRWxCQSxZQUFZQSxrQkFBU0E7b0JBQ3JCQSxLQUFLQSxZQUFXQSxLQUFJQSxHQUFHQTt3QkFFbkJBLHlCQUFNQSxJQUFOQSxVQUFXQSxTQUFPQSxjQUFDQSxLQUFLQSxDQUFDQTs7d0JBRXpCQSw0QkFBU0EscUJBQUlBLEtBQUlBLG9DQUFJQSxDQUFDQSxrQ0FBdEJBLGFBQW9DQTs7O29CQUd4Q0EsT0FBT0EsOEVBQWlDQSxHQUFHQSxPQUFPQTs7d0RBR0RBLEdBQU9BLEdBQU9BLEdBQU9BLE9BQWNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FFcEZBLElBQUlBLEtBQUtBOzs7Ozs7Ozs7NENBRUxBLE9BQVdBLGtCQUFRQTtnREFDbkJBLGtCQUFXQSxhQUFVQSxTQUFNQTtnREFDM0JBLHNCQUFhQTs7Ozs7Ozs7OzRDQUVaQSxJQUFJQSxLQUFLQTs7Ozs7Ozs7OzRDQUVWQSwwQkFBbUJBLHdFQUEyQkEsZUFBT0EsZUFBT0EsR0FBR0EsT0FBT0E7Ozs7Ozs7Ozs7Ozs7OzRDQUNsRUEsc0JBQWFBOzs7Ozs7Ozs7Ozs7OzRDQUlqQkEsMkJBQWtCQSxxQ0FBQ0EseUJBQU1BLEdBQU5BLFlBQVdBLHlCQUFNQSxHQUFOQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRCQ2pDVEEsR0FBU0E7OztnQkFFbENBLFVBQUtBLFlBQU9BO2dCQUNaQSxVQUFLQSxZQUFPQTs7Z0JBRVpBLEtBQUtBLFdBQVdBLElBQUlBLGdCQUFXQTtvQkFFM0JBLElBQUlBLDJCQUFHQSxHQUFIQTt3QkFDQUEsMkJBQUdBLEdBQUhBOzs7O2dCQUdSQSwwQkFBa0JBOzs7O3dCQUNkQSxpQkFBWUEsc0NBQWlCQTs7Ozs7OztnQkFFakNBLDJCQUFpQkE7Ozs7d0JBQ2JBLGlCQUFZQSxzQ0FBaUJBOzs7Ozs7Ozs7MEJBR1RBO1lBRXhCQSxZQUFZQTtZQUNaQSxJQUFJQSxTQUFTQTtnQkFDVEE7OztZQUVKQSxPQUFPQSw0QkFBMENBLHVCQUFHQSxhQUFhQSw0QkFBMENBLHVCQUFHQTs7O1lBSzlHQSxPQUFPQTs7Ozs7Ozs7Ozs7OzRCQzdCaUJBLEdBQVNBOzs7Z0JBRWpDQSxlQUFVQSxrQkFBU0EscUNBQU1BLENBQUNBO2dCQUMxQkEsbUJBQWNBOztnQkFFZEE7Z0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLEtBQUtBO29CQUVyQkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsS0FBS0E7d0JBRXpCQSxZQUFZQSxDQUFNQSxBQUFDQSxVQUFFQSxHQUFHQTt3QkFDeEJBLGdDQUFRQSxHQUFSQSxpQkFBYUE7O3dCQUViQSxJQUFJQSxVQUFFQSxHQUFHQTs0QkFDTEEsbUNBQWFBLE1BQUtBLENBQUNBOzs7d0JBRXZCQTs7OztnQkFJUkEsMEJBQWtCQTs7Ozt3QkFDZEEsaUJBQVlBLHNDQUFpQkE7Ozs7Ozs7OzswQkFHVEE7WUFFeEJBLFlBQVlBO1lBQ1pBLElBQUlBLFNBQVNBO2dCQUNUQTs7O1lBRUpBLE9BQU9BLDRCQUEwQ0EsZ0NBQVlBLHNCQUFzQkEsNEJBQTJDQSw0QkFBUUE7OztZQUt0SUEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnQ0N2Q29DQSxVQUFJQTs7Ozt1Q0FpQ1RBLElBQXFCQTs7b0JBRTNEQSxXQUFXQSx3QkFBVUE7b0JBQ3JCQSxRQUFRQSxLQUFJQSxpREFBVUEsU0FBU0EsWUFBWUE7O29CQUUzQ0EsSUFBSUE7d0JBRUFBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBLFlBQVlBLGNBQWNBOzRCQUVuREE7NEJBQ0FBLElBQUlBLElBQUlBO2dDQUNKQSxVQUFFQSxHQUFGQSxXQUFFQSxLQUFNQSxhQUFLQTs7NEJBQ2pCQSxJQUFJQSxJQUFJQTtnQ0FDSkEsVUFBRUEsR0FBRkEsV0FBRUEsS0FBTUEsY0FBTUE7Ozs7O29CQUkxQkEsT0FBT0EsVUFBSUEsdURBQXlCQSxhQUFVQTs7dUNBR1JBLElBQXFCQTs7b0JBRTNEQSxXQUFXQSx3QkFBVUE7b0JBQ3JCQSxRQUFRQSxLQUFJQSxpREFBVUEsU0FBU0EsWUFBWUE7O29CQUUzQ0EsSUFBSUE7d0JBRUFBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBLFlBQVlBLGNBQWNBOzRCQUVuREE7NEJBQ0FBLElBQUlBLElBQUlBO2dDQUNKQSxVQUFFQSxHQUFGQSxXQUFFQSxLQUFNQSxhQUFLQTs7NEJBQ2pCQSxJQUFJQSxJQUFJQTtnQ0FDSkEsVUFBRUEsR0FBRkEsV0FBRUEsS0FBTUEsY0FBTUE7Ozs7O29CQUkxQkEsT0FBT0EsVUFBSUEsdURBQXlCQSxhQUFVQTs7Ozs7Ozs7Ozs7OzhCQS9EMUJBOztnQkFFcEJBLFNBQVNBO2dCQUNUQSxLQUFLQSxZQUFZQSxVQUFVQTtvQkFDdkJBLHNCQUFHQSxJQUFIQSxPQUFTQSxjQUFTQTs7O2dCQUV0QkEsWUFBT0EsQUFBVUEsQUFBU0E7Z0JBQzFCQSxzQkFBS0E7O2dCQUVMQSxTQUFJQSxLQUFJQTtnQkFDUkE7O2dCQUVBQSxPQUFPQTtvQkFFSEE7b0JBQ0FBLFFBQVFBLHdDQUFpQkE7b0JBQ3pCQSxPQUFPQSxJQUFJQTt3QkFFUEEsZUFBRUEsR0FBRkEsZ0JBQUVBO3dCQUNGQSx1QkFBS0E7OztvQkFHVEE7Ozs7O2tDQTRDZUEsS0FBYUE7Z0JBRWhDQSxJQUFJQSxVQUFLQSxRQUFRQTtvQkFFYkE7b0JBQ0FBO29CQUNBQTs7O2dCQUdKQSxRQUFNQTtnQkFDTkE7Z0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLGNBQVNBO29CQUV6QkEsSUFBSUEsZUFBRUE7d0JBQ0ZBLDhCQUFPQSxZQUFNQSx3Q0FBaUJBLElBQUlBLGVBQUVBOzt3QkFFcENBLG9DQUFVQSxZQUFNQSx3Q0FBaUJBLElBQUlBLEdBQUNBLGVBQUVBOzs7OzZCQUkxQ0EsR0FBT0E7Z0JBRWJBO2dCQUNBQSxPQUFPQTtvQkFFSEE7b0JBQ0FBLFFBQVFBO29CQUNSQSxPQUFPQSxLQUFLQTt3QkFFUkEsc0JBQUtBO3dCQUNMQTs7O29CQUdKQSxTQUFLQTtvQkFDTEEsc0JBQUtBOzs7Z0JBR1RBLE9BQU9BOzs7Ozs7Ozs7Ozs7OzRCQ3pHWUE7O2dCQUVuQkEsVUFBS0E7O2dCQUVMQSx1QkFBa0JBLEtBQUlBO2dCQUN0QkEsS0FBS0EsV0FBV0EsSUFBSUEsV0FBTUE7b0JBRXRCQSx5QkFBb0JBLEtBQUlBO29CQUN4QkEsS0FBS0EsV0FBV0EsSUFBSUEsR0FBR0E7d0JBRW5CQSxJQUFJQSxVQUFFQSxHQUFHQTs0QkFDTEEsNkJBQWdCQSxPQUFPQTs7Ozs7OztzQ0FLYkE7O2dCQUV0QkEsbUJBQWNBLElBQUlBLGtDQUFXQTs7Z0JBRTdCQSxRQUFRQSxrQkFBUUE7Z0JBQ2hCQTtnQkFDQUE7Z0JBQ0FBLDJCQUFxQkEsVUFBSUEsdURBQXlCQSxLQUFJQTtnQkFDdERBLGlCQUFZQSxHQUFHQSxPQUFXQSxnQkFBb0JBLEtBQVNBOztnQkFFdkRBLE9BQU9BLG9CQUFLQSxBQUFDQSxVQUFNQTs7a0NBR0RBO2dCQUVsQkEsbUJBQWNBLElBQUlBLGtDQUFXQTs7Z0JBRTdCQSxRQUFRQSxrQkFBUUE7Z0JBQ2hCQTtnQkFDQUE7Z0JBQ0FBLGlCQUFZQSxHQUFHQSxPQUFXQSxnQkFBb0JBOztnQkFFOUNBLE9BQU9BOztnQ0FHR0EsR0FBT0EsR0FBU0EsT0FBYUEsZ0JBQXdCQTs7Z0JBRS9EQSxJQUFJQSxNQUFLQTtvQkFFTEEsaUJBQU9BOztvQkFJUEEsS0FBS0EsV0FBV0EsS0FBS0EseUJBQU1BLEdBQU5BLFNBQVVBO3dCQUUzQkEscUJBQUVBLEdBQUZBLE1BQU9BOzt3QkFFUEE7d0JBQ0FBLDBCQUFrQkEsNkJBQWdCQTs7OztnQ0FDOUJBLGtDQUFXQSwyQkFBaUJBLHFCQUFFQSxHQUFGQSxLQUFNQSxxQkFBRUEsR0FBRkE7Ozs7Ozs7d0JBRXRDQSxJQUFJQTs0QkFDQUE7Ozt3QkFFSkEsb0RBQWtCQTt3QkFDbEJBLGNBQVNBLGVBQU9BLEdBQUdBLE9BQVdBLGdCQUFvQkE7d0JBQ2xEQSxxREFBa0JBOzs7O2dDQUtoQkEsR0FBT0EsR0FBU0EsT0FBYUEsZ0JBQXFDQSxLQUFjQTs7Z0JBRTFGQSxJQUFJQSxNQUFLQTtvQkFFTEEsUUFBUUEsc0VBQWlCQSxxQkFBZ0JBO29CQUN6Q0E7b0JBQ0FBO29CQUNBQSxhQUFpQkEsTUFBVUE7O29CQUUzQkEsUUFBTUEsVUFBTUEsNkJBQVVBLGFBQVNBO29CQUMvQkEsV0FBU0EsYUFBU0E7O29CQUVsQkEsVUFBVUEsU0FBSUEsT0FBS0E7b0JBQ25CQSxrQkFBT0E7b0JBQ1BBLHdCQUFVQTs7b0JBSVZBLEtBQUtBLFdBQVdBLEtBQUtBLHlCQUFNQSxHQUFOQSxTQUFVQTt3QkFFM0JBLHFCQUFFQSxHQUFGQSxNQUFPQTs7d0JBRVBBLGNBQWNBLFVBQUlBLHVEQUF5QkEsS0FBSUE7d0JBQy9DQSwwQkFBa0JBLDZCQUFnQkE7Ozs7Z0NBQzlCQSx1RUFBV0EseUNBQStCQSxxQkFBRUEsR0FBRkEsS0FBTUEscUJBQUVBLEdBQUZBOzs7Ozs7O3dCQUVwREEsSUFBSUE7NEJBQ0FBOzs7d0JBRUpBLHlGQUFrQkE7d0JBQ2xCQSxjQUFTQSxlQUFPQSxHQUFHQSxPQUFXQSxnQkFBb0JBLEtBQVNBO3dCQUMzREEseUZBQWtCQTs7OzsyQkFLckJBLEdBQVFBO2dCQUViQTtnQkFDQUEsSUFBSUEsQUFBU0E7Z0JBQ2JBLElBQUlBLEFBQVNBO2dCQUNiQSxPQUFPQTtvQkFFSEEsTUFBTUE7b0JBQ05BLElBQUlBLE1BQUlBO29CQUNSQSxJQUFJQTs7Z0JBRVJBLE9BQU9BOzs7Ozs7OzswQ0FNc0JBLEdBQXlCQTtvQkFFdERBLFNBQVNBLElBQUlBLHVDQUFnQkE7b0JBQzdCQSxPQUFPQSxrQkFBa0JBOztzQ0FHQUEsR0FBeUJBO29CQUVsREEsU0FBU0EsSUFBSUEsdUNBQWdCQTtvQkFDN0JBLE9BQU9BLGNBQWNBOzs7Ozs7Ozs7Ozs7NEJDbklQQTs7O2dCQUVkQSxRQUFRQTs7Z0JBRVJBLDBCQUFxQkEseUVBQXFCQSxlQUFPQTtnQkFDakRBLEtBQUtBLFdBQVdBLEtBQUtBLEdBQUdBO29CQUNwQkEsS0FBS0EsV0FBV0EsS0FBS0EsR0FBR0E7d0JBQ3BCQSw2QkFBbUJBLEdBQUdBLElBQUtBLElBQUlBLCtDQUFpQkEsTUFBSUE7Ozs7Z0JBRTVEQSxxQkFBZ0JBLHlFQUFxQkEsZUFBZUE7Z0JBQ3BEQSxLQUFLQSxZQUFXQSxLQUFJQSxlQUFlQTtvQkFFL0JBLEtBQUtBLFlBQVdBLE1BQUtBLDBCQUFPQSxJQUFQQSxVQUFXQTt3QkFFNUJBLHdCQUFjQSxJQUFHQSxLQUFLQSxVQUFJQSx1REFBeUJBLEtBQUlBO3dCQUN2REEsS0FBS0EsV0FBV0EsS0FBS0EsMEJBQU9BLElBQVBBLFVBQVdBOzRCQUU1QkEsSUFBSUEsTUFBS0E7Z0NBQ0xBOzs7NEJBRUpBLHdCQUFjQSxJQUFHQSx5REFBakJBLHdCQUFjQSxJQUFHQSxNQUFNQSw2QkFBbUJBLElBQUdBOzs7Ozs7O3VCQU1qQ0E7O1lBRXhCQSxpQkFBaUJBLFVBQUlBLHVEQUF5QkEsS0FBSUE7WUFDbERBLEtBQUlBLFdBQVdBLElBQUlBLFVBQVVBO2dCQUN6QkEsNkVBQWNBLHdCQUFjQSxHQUFHQSxxQkFBRUEsR0FBRkE7OztZQUVuQ0EsT0FBT0E7Ozs7Ozs7Ozs7OzttQ0NuQ2dCQSxBQUFzQ0EsOENBQWhCQSxLQUFJQTs7OzsrQkFFL0JBO29CQUVsQkEsSUFBSUEsS0FBS0E7d0JBQ0xBLHNEQUFrQkE7OztvQkFFdEJBLE9BQU9BLG9EQUFRQTs7NkNBR1dBO29CQUUxQkEsUUFBUUEsU0FBU0EsR0FBR0Esa0JBQUlBO29CQUN4QkEsUUFBUUEscURBQVFBOztvQkFFaEJBLE9BQU9BLHFEQUFpQkE7d0JBRXBCQSxJQUFJQSw0Q0FBUUE7NEJBQ1JBLGdEQUFZQTs7O3dCQUVoQkE7OzttQ0FJWUE7b0JBRWhCQSxLQUFJQSxXQUFXQSxtRUFBUUEsSUFBS0Esb0RBQVFBLE9BQU1BLEdBQUdBO3dCQUV6Q0EsSUFBSUEsSUFBSUEsb0RBQVFBOzRCQUNaQTs7OztvQkFHUkE7Ozs7Ozs7OztzQkFoQzhEQTtZQUFRQTtZQUFZQTtZQUFZQTtZQUFZQTtZQUFZQTtZQUFhQTtZQUFhQTtZQUFhQTtZQUFhQSxPQUFPQTs7Ozs7Ozs7OzRCQ0NuS0E7O2dCQUVkQSxRQUFRQTs7Z0JBRVJBLFlBQU9BLDJDQUFRQSxlQUFPQTtnQkFDdEJBLEtBQUtBLFdBQVdBLEtBQUtBLEdBQUdBO29CQUNwQkEsS0FBS0EsV0FBV0EsS0FBS0EsR0FBR0E7d0JBQ3BCQSxlQUFLQSxHQUFHQSxJQUFLQSxBQUFVQSxBQUFTQSxlQUFDQSxNQUFJQTs7Ozs7Ozs7Ozs7Ozs7OzRCQ0x6QkEsU0FBYUE7O2dCQUVqQ0EsZ0JBQVdBO2dCQUNYQSxtQkFBY0E7Ozs7O2dCQU9kQSxPQUFPQSxJQUFJQSx1Q0FBV0EsZUFBVUE7OztnQkFTaENBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7O29CQXVCR0EsT0FBT0E7Ozs7O29CQWlCUEEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7OzRCQTNCQ0EsU0FBYUE7O2dCQUUzQkEsZ0JBQVdBO2dCQUNYQSxtQkFBY0E7Ozs7OztnQkE2QmRBLElBQUlBO29CQUVBQSxJQUFJQSxtQkFBY0E7d0JBQVVBOzs7b0JBRTVCQSxnQkFBV0EsY0FBQ0EsR0FBQ0EsS0FBS0EsZ0NBQXFCQSxDQUFDQSxrQkFBV0E7O29CQUVuREE7b0JBQ0FBOzs7Z0JBR0pBLFVBQVlBLGtCQUFXQSxBQUFDQTs7Z0JBRXhCQSxJQUFJQTtvQkFFQUEsZ0JBQVdBLGtCQUFXQSxTQUFNQSxDQUFDQTs7b0JBRTdCQTs7O2dCQUdKQSxXQUFhQSxrQkFBV0EsQ0FBQ0E7O2dCQUV6QkEsSUFBSUE7b0JBQVdBOzs7Z0JBRWZBLFVBQVlBLGtCQUFXQTtnQkFDdkJBLE1BQU1BLENBQUNBOztnQkFFUEEsT0FBT0EsQ0FBQ0EsUUFBTUE7b0JBQVlBOzs7Z0JBRTFCQSxnQkFBV0EsU0FBT0E7O2dCQUVsQkE7OztnQkFLQUE7Ozs7Ozs7Ozs7NEJDckdtQkE7O2dCQUV2QkEsYUFBUUEsQUFBdUNBLFVBQUNBOzt3QkFBUUEsU0FBU0EsVUFBSUEsZ0RBQWVBLGlCQUFjQSxLQUFJQTt3QkFBZUEsT0FBT0E7c0JBQTlGQSxLQUFJQTs7Ozs4QkFHbkJBLE9BQWFBOztnQkFFNUJBLElBQUlBLHNDQUF5QkE7b0JBQ3pCQTs7O2dCQUVKQSxjQUFjQSxLQUFJQSx3RUFBV0E7Z0JBQzdCQSwwQkFBcUJBOzs7O3dCQUVqQkEsVUFBVUEsZ0JBQVdBLE1BQU1BO3dCQUMzQkEsMkJBQW9CQTs7OztnQ0FFaEJBLFFBQVFBLElBQUlBO2dDQUNaQSxRQUFRQTtnQ0FDUkEsV0FBV0EsS0FBSUEsaURBQVVBO2dDQUN6QkEsYUFBYUE7O2dDQUViQSxZQUFZQTs7Ozs7Ozs7Ozs7OztnQkFJcEJBLGFBQVFBOztrQ0FHMEJBLE1BQVdBOztnQkFFN0NBLFVBQVVBLEtBQUlBO2dCQUNkQSwwQkFBa0JBOzs7O3dCQUVkQSxRQUFRQSx5QkFBTUEsR0FBTkE7d0JBQ1JBO3dCQUNBQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLEdBQU9BOzRCQUV4QkEsTUFBSUEsS0FBSUE7NEJBQ1JBLFFBQUlBLEdBQUtBOzs7d0JBR2JBLFFBQU1BOzs7Ozs7O2dCQUdWQSxPQUFPQTs7OEJBR2lCQTs7Z0JBRXhCQSxTQUFTQTtnQkFDVEEsSUFBSUEsTUFBTUE7b0JBQ05BOzs7Z0JBRUpBLDBCQUFxQkE7Ozs7d0JBRWpCQSxRQUFRQSxzQkFBc0JBO3dCQUM5QkEsSUFBSUEsS0FBS0E7NEJBQ0xBOzs7d0JBRUpBLElBQUlBLGdCQUFlQTs0QkFDZkE7Ozs7Ozs7O2dCQUdSQTs7O2dCQUtBQSxPQUFPQTs7MENBR2FBOztnQkFFcEJBLDBCQUFxQkE7Ozs7d0JBRWpCQSxJQUFJQSw0QkFBOEJBLDJCQUFhQTs0QkFDM0NBLE9BQU9BOzs7Ozs7OztnQkFHZkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkN4RTJCQSxhQUFpQkEsR0FBa0JBLFNBQWFBLE9BQWVBOzs7OztnQkFFakdBLG9CQUFlQTtnQkFDZkEsVUFBS0E7Z0JBQ0xBLGdCQUFXQTtnQkFDWEEsY0FBU0E7Z0JBQ1RBLGFBQVFBOztnQkFFUkEsMEJBQXFCQSx3Q0FBNkJBOzs7OztnQkFLbERBLE9BQU9BLDRCQUE0RUEsbUJBQWNBLDBCQUFjQSxBQUFnRkE7OztnQkE4Qy9MQSxPQUFPQTs7OENBM0NvQ0E7Z0JBRTNDQSxJQUFJQTtvQkFDQUEsT0FBT0EscUZBQW1GQSxrREFBMENBLENBQUNBLENBQUNBLG9CQUFXQTs7O2dCQUVySkEsT0FBT0EsNEJBQStIQSw0QkFBdUJBLHFDQUFpQkEsQUFBb0tBOztxQ0FHaFRBO2dCQUVsQ0EsaUJBQXFDQSxxRkFBbUZBLGtEQUEwQ0EsQ0FBQ0EsQ0FBQ0Esb0JBQVdBOztnQkFFL0tBLEtBQUtBLFdBQVdBLElBQUlBLGFBQWFBO29CQUM3QkEsYUFBYUEsNEJBQStIQSx1QkFBV0EsQUFBb0tBOzs7Z0JBRS9UQSxPQUFPQTs7cUNBRzJCQTtnQkFFbENBLGlCQUFpQkEsNEJBQTBGQSwrQkFBbUJBLEFBQXlGQTsrQkFBT0Esa0JBQWFBLFNBQVNBOzs7Z0JBRXBQQSxXQUFXQSxRQUFHQTs7Z0JBRWRBLE9BQXNCQSxnQ0FBSUEsNEJBQWlCQSxlQUFVQSxhQUF6Q0E7K0JBQ0NBLGVBQWVBLEFBQXlGQTttQ0FBT0EsQ0FBQ0EsV0FBU0EsYUFBWUE7OzhCQUR0SUE7MkJBRUVBLDRCQUFvQ0EsYUFBS0EsbUJBQVFBOzs7b0NBR2pEQSxHQUFRQTs7Z0JBRXRCQSwwQkFBa0JBOzs7O3dCQUVkQSxtQkFBbUJBLE1BQUlBO3dCQUN2QkEsSUFBSUEsb0NBQXFCQSxnQkFBZ0JBOzRCQUNyQ0E7Ozs7Ozs7O2dCQUdSQTs7Ozs7Ozs7c0JBekNnTUEsTUFBTUE7bUJBQU1BLENBQUNBLE1BQUlBLHFCQUFVQTs7O21CQVErSEEsbUJBQWNBOzs7Ozs7Ozs7O21DQzdCMVVBLEtBQUlBOzs7O2tDQUVmQTtnQkFFbkJBLGdCQUFXQTs7OEJBR0lBLEdBQUtBO2dCQUVwQkEsU0FBU0EsZ0JBQVdBO2dCQUNwQkEsU0FBU0EsZ0JBQVdBOztnQkFFcEJBLFlBQVlBLFVBQUtBO2dCQUNqQkEsWUFBWUEsVUFBS0E7O2dCQUVqQkEsSUFBSUEsOEJBQVNBO29CQUNUQTs7O2dCQUVKQSxJQUFJQSxhQUFhQTtvQkFDYkEsZUFBZUE7O29CQUNkQSxJQUFJQSxhQUFhQTt3QkFDbEJBLGVBQWVBOzt3QkFHZkEsZUFBZUE7d0JBQ2ZBOzs7O2tDQUllQSxHQUFLQTtnQkFFeEJBLFNBQVNBLGdCQUFXQTtnQkFDcEJBLFNBQVNBLGdCQUFXQTs7Z0JBRXBCQSxPQUFPQSxpQ0FBS0EsS0FBT0EsVUFBS0E7OzJDQUdjQTtnQkFFdENBLFNBQVNBLGdCQUFXQTtnQkFDcEJBLFlBQVlBLFVBQUtBOztnQkFFakJBLE9BQU9BLDRCQUFxRkEsb0NBQW1CQSxBQUFvRkE7K0JBQVFBLGlDQUFLQSxPQUFTQTsrQkFBa0JBLEFBQWlGQTs7O2dCQUs1VEEsT0FBT0EsNEJBQThJQSxzQ0FBbUJBLEFBQXNJQTsrQkFBUUEsVUFBS0E7K0JBQTBEQSxBQUErTUE7MkJBQVNBLGFBQWdCQSxBQUFpRkE7Ozs0QkFHeHFCQTtnQkFFTkEsSUFBSUEsa0NBQVlBO29CQUNaQSxXQUFXQSxVQUFLQTs7O2dCQUVwQkEsT0FBT0E7O2tDQUdLQTtnQkFFWkE7Z0JBQ0FBLElBQUlBLENBQUNBLDZCQUF3QkEsR0FBT0E7b0JBRWhDQSxTQUFPQSxLQUFJQTtvQkFDWEEsZ0JBQWNBO29CQUNkQTtvQkFDQUEsV0FBU0E7O29CQUVUQSxxQkFBWUEsR0FBS0E7OztnQkFHckJBLE9BQU9BOzs7Ozs7Ozs7bUJBN0I2VEE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4QkMzQ3RUQSxPQUFZQTs7Z0JBRTFCQSxhQUFRQTs7Z0JBRVJBLGNBQVNBLEtBQUlBLGlEQUFVQTtnQkFDdkJBOztnQkFFQUE7Z0JBQ0FBLE9BQU9BO29CQUVIQSxnQkFBV0Esb0JBQUtBLEFBQUNBLFVBQVVBO29CQUMzQkEsUUFBUUEsVUFBUUE7OztnQkFHcEJBLEtBQUtBLElBQUlBLG1CQUFjQSxJQUFJQSxHQUFHQTtvQkFDMUJBOzs7NEJBR1VBOztnQkFFZEEsY0FBU0EsS0FBSUEsaURBQVVBOztnQkFFdkJBLGVBQXFCQSxLQUFJQSxpREFBVUE7Z0JBQ25DQSxLQUFLQSxXQUFXQSxJQUFJQSxLQUFLQTtvQkFDckJBLGFBQWFBOzs7Z0JBRWpCQSxLQUFLQSxZQUFXQSxLQUFJQSxLQUFLQTtvQkFFckJBLGdCQUFXQSxpQkFBaUJBLFVBQUVBO29CQUM5QkEsZ0JBQWdCQSxVQUFFQTs7O2dCQUd0QkE7O2dCQUVBQTtnQkFDQUE7Z0JBQ0FBLEtBQUtBLFlBQVdBLEtBQUlBLG1CQUFjQTtvQkFFOUJBLDRCQUFTQSxpREFBT0EsS0FBS0E7b0JBQ3JCQSxzQkFBS0EsQ0FBQ0E7Ozs7Ozs7Ozs7b0RDdEM2QkEsR0FBT0E7O29CQUU5Q0EsZUFBZUEsMkNBQVFBLGVBQU9BO29CQUM5QkE7b0JBQ0FBOztvQkFFQUE7b0JBQ0FBLFNBQVNBLE1BQUtBOztvQkFFZEEsS0FBS0EsV0FBV0EsSUFBSUEsbUJBQW1CQTt3QkFFbkNBLGNBQVNBLFFBQVFBLE9BQUtBOzt3QkFFdEJBLDBCQUFrQkEsb0JBQVlBOzs7O2dDQUUxQkEsY0FBU0EsT0FBS0EsU0FBR0EsT0FBS0E7Z0NBQ3RCQSxjQUFTQSxPQUFLQSxTQUFHQTs7Ozs7Ozs7b0JBSXpCQSxPQUFPQSxpQ0FBUUEsVUFBVUEsUUFBUUE7O21DQUdYQSxVQUFpQkEsUUFBWUE7b0JBRW5EQSxPQUFPQSxJQUFJQSx1Q0FBY0EsVUFBVUEsUUFBUUE7Ozs7Ozs7Ozs7Ozs7Ozs0QkFXdEJBLFVBQWlCQSxRQUFZQTs7Z0JBRTlDQSxpQkFBWUE7Z0JBQ1pBLGVBQVVBO2dCQUNWQSxlQUFVQTs7Z0JBRVZBLFVBQUtBO2dCQUNMQSxhQUFRQSwyQ0FBUUEsU0FBSUE7Ozs7O2dCQUtwQkE7b0JBRUlBLFdBQVdBLEFBQXNDQSxpREFBaEJBLEtBQUlBO29CQUNyQ0EsV0FBV0EsQ0FBQ0Esd0JBQW1CQTtvQkFDL0JBLElBQUlBO3dCQUNBQTs7O29CQUVKQSxhQUFRQTs7O2dCQUdaQSxPQUFPQSxnQ0FBb0JBLGFBQVFBLEFBQWdDQTs7MENBRy9DQTs7Z0JBRXBCQSxXQUFXQSxhQUFLQTs7Z0JBRWhCQSxJQUFJQSxTQUFRQTtvQkFDUkE7OztnQkFFSkEsMEJBQWtCQSxrQkFBYUE7Ozs7d0JBRTNCQSxJQUFJQSxjQUFjQTs0QkFDZEE7Ozt3QkFFSkEsU0FBU0E7O3dCQUVUQSxtQkFBbUJBLHdCQUFtQkE7d0JBQ3RDQSxJQUFJQTs0QkFDQUE7Ozt3QkFFSkEsWUFBWUE7Ozs7Ozs7Z0JBR2hCQTs7b0NBRzBCQTs7Ozs7Ozs7Ozs7Ozt3Q0FFMUJBLEFBQUtBOzs7Ozs2Q0FBV0EsSUFBSUE7Ozs7Ozs7O3dDQUVoQkEsSUFBSUEsc0JBQVVBLEdBQUdBLE1BQUtBLGdCQUFNQSxHQUFHQTs7Ozs7Ozs7d0NBQzNCQSxzQkFBYUE7Ozs7Ozs7Ozs7Ozs7d0NBSEdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrQkFPZkE7Z0JBRVRBLFdBQVdBLGNBQVNBOztnQkFFcEJBLEtBQUtBLFdBQVdBLElBQUlBLHdCQUFnQkE7b0JBRWhDQSxnQkFBTUEsYUFBS0EsSUFBSUEsYUFBS0EsaUJBQXBCQSxpQkFBTUEsYUFBS0EsSUFBSUEsYUFBS0EsbUJBQVdBO29CQUMvQkEsZ0JBQU1BLGFBQUtBLGdCQUFRQSxhQUFLQSxLQUFNQSxFQUFDQSxnQkFBTUEsYUFBS0EsSUFBSUEsYUFBS0E7OztnQ0FJOUNBO2dCQUVUQSxXQUFXQTs7Z0JBRVhBLEtBQUtBLFdBQVdBLElBQUlBLHdCQUFnQkE7b0JBQ2hDQSxPQUFPQSxTQUFTQSxNQUFNQSxzQkFBVUEsYUFBS0EsSUFBSUEsYUFBS0EsbUJBQVVBLGdCQUFNQSxhQUFLQSxJQUFJQSxhQUFLQTs7O2dCQUVoRkEsT0FBT0E7Ozs7Ozs7O3NCQTlEK0NBO1lBQVFBO1lBQVlBLE9BQU9BOzs7bUJBUVRBLGdCQUFNQSxjQUFTQTs7Ozs7Ozs4Q0MxRHZDQSxHQUFHQSxHQUF1QkE7b0JBRTlFQSxPQUFPQSw0QkFBNEdBLHNEQUFvQkEsbUJBQVFBLEdBQUdBLDBEQUFLQSxBQUFxR0E7bUNBQUtBLFNBQWdCQSw0QkFBb0NBLHdCQUFNQSw0QkFBb0NBOzs7NENBRXhTQSxHQUFHQTtvQkFFMURBLG1CQUEyQ0EsbUJBQVFBOztvQkFFbkRBLE9BQU9BLDRCQUNuQkEscUJBQXdCQSxjQUN4QkEsQUFBNlJBLFVBQUNBLGFBQWFBO21DQUM1UUEsb0RBQVZBOzJDQUNRQTs2Q0FEUkEsUUFDQUE7MkNBQ0VBLDRCQUFpQ0EsZUFBT0EsbUJBQVFBOzs7OzhDQUdKQSxHQUFHQTtvQkFFMURBLG1CQUEyQ0EsbUJBQVFBOztvQkFFbkRBLE9BQU9BLDRCQUNuQkEscUJBQXdCQSxjQUN4QkEsQUFBc1JBLFVBQUNBLGFBQWFBO21DQUNyUUEsb0RBQVZBOzJDQUNRQTs2Q0FEUkEsUUFDQUE7MkNBQ0VBLDRCQUFpQ0EsZUFBT0EsbUJBQVFBOzs7O2tDQUczQkEsR0FBR0EsR0FBdUJBOzs7Ozs7Ozs7Ozs7Ozs0Q0FFMURBLDBCQUFrQkE7Ozs7Ozs7Ozs7Ozs7OzRDQUNkQSxzQkFBYUE7Ozs7Ozs7Ozs0Q0FDakJBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0NBR3FCQSxHQUFHQSxRQUE0QkE7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FFakVBLFVBQWNBLEtBQUlBOztnREFFbEJBLDBCQUFrQkE7Ozs7Ozs7Ozs7Ozs7OzRDQUVkQSxJQUFJQSw0QkFBOEJBLGFBQVFBLEFBQStCQTs7bUVBQUtBLENBQUNBLFNBQVNBLEdBQUdBOzs7Ozs7Ozs7OzRDQUV2RkEsWUFBWUE7Z0RBQ1pBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NENDK0hjQSxHQUFHQSxHQUFnQkE7b0JBR3REQSxJQUFJQSxLQUFLQTt3QkFDTEEsT0FBT0EsNEJBQWlDQSxVQUFIQTs7O29CQUV6Q0EsUUFBUUEsS0FBSUEsc0NBQVFBLFlBQVlBLFlBQVVBO29CQUMxQ0E7b0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBO3dCQUV6QkEsT0FBT0EsSUFBSUEsV0FBV0EseUJBQUVBLElBQWFBLFVBQUVBOzRCQUNuQ0E7Ozt3QkFFSkEsSUFBSUEsS0FBS0EsV0FBV0EseUJBQUVBLElBQWFBLFVBQUVBOzRCQUNqQ0EsTUFBTUEsVUFBRUE7Ozs7b0JBR2hCQSxPQUFPQTs7OENBbUc4QkEsR0FBa0JBO29CQUV2REEsSUFBSUEsS0FBS0E7d0JBQ0xBLE9BQU9BLDRCQUFtQ0EsVUFBTEE7OztvQkFFekNBLFFBQVFBLEtBQUlBLGlEQUFVQSxZQUFZQSxZQUFVQTtvQkFDNUNBO29CQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxTQUFTQTt3QkFFekJBLE9BQU9BLElBQUlBLFdBQVdBLFVBQUVBLEtBQUtBLFVBQUVBOzRCQUMzQkE7Ozt3QkFFSkEsSUFBSUEsS0FBS0EsV0FBV0EsVUFBRUEsS0FBS0EsVUFBRUE7NEJBQ3pCQSxNQUFNQSxVQUFFQTs7OztvQkFHaEJBLE9BQU9BOzs4Q0FoSDhCQSxHQUFHQSxHQUFnQkE7b0JBR3hEQSxJQUFJQSxLQUFLQSxRQUFRQSxLQUFLQTt3QkFDbEJBLE9BQU9BLEtBQUlBOzs7b0JBRWZBLFFBQVFBLEtBQUlBLHNDQUFRQSxTQUFTQSxTQUFTQTtvQkFDdENBO29CQUNBQTs7b0JBRUFBLE9BQU9BLElBQUlBLFdBQVdBLElBQUlBO3dCQUV0QkEsY0FBY0EseUJBQUVBLElBQWFBLFVBQUVBOzt3QkFFL0JBLElBQUlBOzRCQUNBQSxNQUFNQSxVQUFFQTs7d0JBQ1pBLElBQUlBOzRCQUNBQTs7d0JBQ0pBLElBQUlBOzRCQUNBQTs7OztvQkFHUkEsT0FBT0E7O2dEQTZGZ0NBLEdBQWtCQTtvQkFFekRBLElBQUlBLEtBQUtBLFFBQVFBLEtBQUtBO3dCQUNsQkEsT0FBT0EsS0FBSUE7OztvQkFFZkEsUUFBUUEsS0FBSUEsaURBQVVBLFNBQVNBLFNBQVNBO29CQUN4Q0E7b0JBQ0FBOztvQkFFQUEsU0FBU0E7b0JBQ1RBLFNBQVNBO29CQUNUQSxPQUFPQSxJQUFJQSxNQUFNQSxJQUFJQTt3QkFFakJBLFFBQVFBLFVBQUVBO3dCQUNWQSxRQUFRQSxVQUFFQTs7d0JBRVZBLElBQUlBLE1BQUtBOzRCQUNMQSxNQUFNQTs7d0JBQ1ZBLElBQUlBLEtBQUtBOzRCQUNMQTs7d0JBQ0pBLElBQUlBLEtBQUtBOzRCQUNMQTs7OztvQkFHUkEsT0FBT0E7O3FEQWxIK0JBLEdBQUdBLEdBQWdCQTtvQkFHekRBLElBQUlBLEtBQUtBLFFBQVFBLEtBQUtBO3dCQUNsQkE7OztvQkFFSkE7b0JBQ0FBO29CQUNBQTs7b0JBRUFBLE9BQU9BLElBQUlBLFdBQVdBLElBQUlBO3dCQUV0QkEsY0FBY0EseUJBQUVBLElBQWFBLFVBQUVBOzt3QkFFL0JBLElBQUlBOzRCQUNBQTs7d0JBQ0pBLElBQUlBOzRCQUNBQTs7d0JBQ0pBLElBQUlBOzRCQUNBQTs7OztvQkFHUkEsT0FBT0E7O21EQStGK0JBLEdBQWtCQTtvQkFFeERBLElBQUlBLEtBQUtBLFFBQVFBLEtBQUtBO3dCQUNsQkE7OztvQkFFSkE7b0JBQ0FBO29CQUNBQTs7b0JBRUFBLFNBQVNBO29CQUNUQSxTQUFTQTtvQkFDVEEsT0FBT0EsSUFBSUEsTUFBTUEsSUFBSUE7d0JBRWpCQSxRQUFRQSxVQUFFQTt3QkFDVkEsUUFBUUEsVUFBRUE7O3dCQUVWQSxJQUFJQSxNQUFLQTs0QkFDTEE7O3dCQUNKQSxJQUFJQSxLQUFLQTs0QkFDTEE7O3dCQUNKQSxJQUFJQSxLQUFLQTs0QkFDTEE7Ozs7b0JBR1JBLE9BQU9BOzt1Q0FwSHVCQSxHQUFHQSxHQUFnQkE7b0JBR2pEQSxXQUFXQSxtREFBbURBLEdBQUVBO29CQUNoRUEsY0FBY0EsbURBQW1EQSxHQUFFQTs7b0JBRW5FQSxPQUFPQTs7eUNBaUh5QkEsR0FBa0JBO29CQUVsREEsV0FBV0EscURBQW1CQTtvQkFDOUJBLGNBQWNBLHFEQUFtQkE7O29CQUVqQ0EsT0FBT0E7O3lDQW5Ib0JBLEdBQUdBLEdBQWdCQTtvQkFHOUNBLE9BQU9BLFlBQVdBLFdBQVdBLDREQUEyQkEsR0FBR0EsT0FBTUE7O3VDQW1IdENBLEdBQWtCQTtvQkFFN0NBLE9BQU9BLFlBQVdBLFdBQVdBLHVEQUF3QkEsR0FBR0EsT0FBTUE7OytDQWxIN0JBLEdBQUdBLEdBQWdCQTtvQkFHcERBLE9BQU9BLDREQUEyQkEsR0FBR0EsT0FBTUE7OzZDQWtIVkEsR0FBa0JBO29CQUVuREEsT0FBT0EsdURBQXdCQSxHQUFHQSxPQUFNQTs7MENBakhaQSxHQUFHQSxHQUFnQkE7b0JBRy9DQSxPQUFPQSxVQUFVQSxXQUFXQSw0REFBMkJBLEdBQUdBLE9BQU1BOzt3Q0FpSHBDQSxHQUFrQkE7b0JBRTlDQSxPQUFPQSxVQUFVQSxXQUFXQSx1REFBd0JBLEdBQUdBLE9BQU1BOztpREFoSGZBLEdBQUdBOztvQkFHakRBLElBQUlBLEtBQUtBLFFBQVFBO3dCQUNiQSxPQUFPQSxLQUFJQTs7O29CQUVmQSxpQkFBaUJBLEtBQUlBOztvQkFFckJBLDBCQUFvQkE7Ozs7NEJBRWhCQSxjQUFjQSw2RUFBbUZBLFlBQVdBLEFBQXdFQTs7MkNBQVFBLHNEQUFvREEsTUFBS0E7OzJDQUFPQSxBQUFvRUE7NEJBQ2hVQSxJQUFJQSxlQUFlQSw0QkFBdUVBLGdCQUFXQSxBQUF3RUE7OytDQUFRQSxDQUFDQSxzREFBb0RBLEtBQUlBOzs7Z0NBQzFPQSxlQUFlQTs7Ozs7Ozs7b0JBR3ZCQSxPQUFPQTs7bURBb0d5Q0E7O29CQUVoREEsSUFBSUEsS0FBS0EsUUFBUUE7d0JBQ2JBLE9BQU9BLEtBQUlBOzs7b0JBRWZBLGlCQUFpQkEsS0FBSUE7O29CQUVyQkEsMEJBQW9CQTs7Ozs0QkFFaEJBLGNBQWNBLHdGQUFxRkEsWUFBV0EsQUFBMEVBOzsyQ0FBUUEsdURBQXVCQTs7MkNBQU9BLEFBQXNFQTs0QkFDcFNBLElBQUlBLGVBQWVBLDRCQUF5RUEsZ0JBQVdBLEFBQTBFQTs7K0NBQVFBLENBQUNBLHNEQUFzQkE7OztnQ0FDNU1BLGVBQWVBOzs7Ozs7OztvQkFHdkJBLE9BQU9BOztnREFLZ0NBLEdBQUdBLEdBQXVCQTtvQkFFakVBLE9BQU9BLDRFQUEyQ0EsR0FBR0E7O3FEQUdiQSxHQUFHQSxHQUF1QkE7b0JBRWxFQSxPQUFPQSxpRkFBZ0RBLEdBQUdBOzt5Q0FHN0JBLEdBQUdBLEdBQWdCQTtvQkFFaERBLE9BQU9BLFlBQVdBLFdBQVdBLDREQUE2QkEsR0FBR0EsT0FBTUE7OytDQUdoQ0EsR0FBR0EsR0FBZ0JBO29CQUV0REEsT0FBT0EsNERBQTZCQSxHQUFHQSxPQUFNQTs7MENBR2ZBLEdBQUdBLEdBQWdCQTtvQkFFakRBLE9BQU9BLFVBQVVBLFdBQVdBLDREQUE2QkEsR0FBR0EsT0FBTUE7OytDQUcvQkEsR0FBUUE7b0JBRTNDQSxJQUFJQTt3QkFFQUE7OztvQkFHSkEsVUFBV0EsaUJBQVNBLEdBQUdBLE1BQUlBO29CQUMzQkEsVUFBV0EsaUJBQVNBLEdBQUdBLE1BQUlBOztvQkFFM0JBO29CQUNBQSxPQUFPQSxLQUFJQTt3QkFFUEEsb0JBQVVBO3dCQUNWQTs7O29CQUdKQSxPQUFPQTt3QkFFSEEsb0JBQVVBOzt3QkFFVkE7OztvQkFHSkEsT0FBT0E7O29DQUdtQkEsR0FBR0E7O29CQUU3QkEsU0FBU0EsSUFBSUE7O29CQUViQSwwQkFBZ0JBOzs7OzRCQUNaQSx5QkFBeUJBOzs7Ozs7O29CQUU3QkEsT0FBT0E7O3NDQUdzQkEsR0FBR0EsR0FBdUJBO29CQUV2REEsT0FBT0Esa0VBQWlDQSxHQUFHQTs7d0NBR1pBLEdBQUdBLEdBQXVCQTtvQkFFekRBLE9BQU9BLG9FQUFtQ0EsR0FBR0E7OzZDQUdiQSxHQUFHQSxHQUF1QkE7b0JBRTFEQSxPQUFPQSx5RUFBd0NBLEdBQUdBOzttQ0FHMUJBLEdBQUdBLEdBQWdCQTtvQkFFM0NBLE9BQU9BLCtEQUE0QkEsR0FBR0E7O2lDQUdkQSxHQUFHQSxHQUFnQkE7b0JBRTNDQSxPQUFPQSw2REFBNEJBLEdBQUdBOztpQ0FHakJBLEdBQUdBLEdBQWdCQTtvQkFFeENBLE9BQU9BLFlBQVdBLFdBQVdBLG9EQUFxQkEsR0FBR0EsT0FBTUE7O3VDQUdoQ0EsR0FBR0EsR0FBZ0JBO29CQUU5Q0EsT0FBT0Esb0RBQXFCQSxHQUFHQSxPQUFNQTs7a0NBR2ZBLEdBQUdBLEdBQWdCQTtvQkFFekNBLE9BQU9BLFVBQVVBLFdBQVdBLG9EQUFxQkEsR0FBR0EsT0FBTUE7OzJDQUdsQkEsR0FBR0E7O29CQUUzQ0EsSUFBSUEsS0FBS0EsUUFBUUE7d0JBQ2JBLE9BQU9BLEtBQUlBOzs7b0JBRWZBLGlCQUFpQkEsS0FBSUE7O29CQUVyQkEsMEJBQW9CQTs7Ozs0QkFFaEJBLGNBQWNBLDZFQUFtRkEsWUFBV0EsQUFBd0VBOzsyQ0FBUUEsOENBQThDQSxNQUFLQTs7MkNBQU9BLEFBQW9FQTs0QkFDMVRBLElBQUlBLGVBQWVBLDRCQUF1RUEsZ0JBQVdBLEFBQXdFQTs7K0NBQVFBLENBQUNBLDhDQUE4Q0EsS0FBSUE7OztnQ0FDcE9BLGVBQWVBOzs7Ozs7OztvQkFHdkJBLE9BQU9BOzs0Q0FHa0NBLEdBQUdBO29CQUU1Q0EsZUFBeUJBLEtBQUlBO29CQUM3QkEsYUFBYUEsS0FBSUE7O29CQUVqQkEsWUFBZ0JBLEtBQUlBLHNDQUFRQTs7b0JBRTVCQSxPQUFPQTt3QkFFSEEsV0FBU0E7O3dCQUVUQSxZQUFZQTt3QkFDWkEsS0FBS0EsV0FBV0EsSUFBSUEsT0FBT0E7NEJBRXZCQSxZQUFnQkEsS0FBSUEsc0NBQVFBLGlCQUFTQTs0QkFDckNBLFVBQVVBOzs0QkFFVkEsYUFBYUE7Ozt3QkFHakJBOzs7b0JBR0pBLE9BQU9BOzs4Q0FHa0NBLEdBQUdBLE1BQW1CQTs7b0JBRS9EQSxlQUF5QkEsS0FBSUE7b0JBQzdCQSxRQUFRQTtvQkFDUkEsMEJBQTZCQSxtREFBa0JBLEdBQUdBOzs7OzRCQUM5Q0EsYUFBYUEsaURBQWtCQSxNQUFNQTs7Ozs7OztvQkFFekNBLE9BQU9BOzs2Q0FHMENBLEdBQUdBOzs7Ozs7Ozs7Ozs7Ozs7NENBRXBEQSxJQUFRQTtnREFDUkEsMEJBQTZCQSxpREFBa0JBOzs7Ozs7Ozs7Ozs7Ozs0Q0FDM0NBLHNCQUFhQSxpREFBa0JBLE1BQU1BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0NBR1FBLEdBQUdBLE1BQW1CQTs7Ozs7Ozs7Ozs7Ozs7OzRDQUV2RUEsSUFBUUE7Z0RBQ1JBLDBCQUE2QkEsbURBQWtCQSxHQUFHQTs7Ozs7Ozs7Ozs7Ozs7NENBQzlDQSxzQkFBYUEsaURBQWtCQSxNQUFNQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3VDQUdYQSxHQUFHQSxNQUFjQSxNQUFVQTtvQkFFekRBLFFBQVFBO29CQUNSQSxjQUFlQSw4Q0FBYUEsR0FBR0EsTUFBVUE7O29CQUV6Q0EsY0FBa0JBLGlEQUFrQkEsTUFBTUE7O29CQUUxQ0EsSUFBSUEsQ0FBQ0E7d0JBRURBLFVBQVFBOzs7b0JBR1pBLE9BQU9BOzswQ0FHbUJBLEdBQUdBLE1BQWNBO29CQUUzQ0EsY0FBa0JBLEtBQUlBO29CQUN0QkEsS0FBS0EsV0FBV0EsSUFBSUEsYUFBYUE7d0JBRTdCQSxJQUFJQSxjQUFNQTs0QkFDTkEsWUFBWUEsYUFBS0E7Ozs7b0JBR3pCQSxPQUFPQTs7K0NBR3NDQSxHQUFPQTs7Ozs7Ozs7Ozs7Ozs7OzRDQUVwREEsSUFBSUEsWUFBWUE7O2dEQUVoQkEsT0FBa0JBLEtBQUlBLG1EQUFXQTtnREFDakNBLEtBQUtBLE9BQVdBLElBQUlBLEdBQUdBO29EQUNuQkE7O2dEQUNKQSxLQUFLQSxLQUFRQSxHQUFHQSxLQUFJQSxHQUFHQTtvREFDbkJBOzs7Z0RBRUpBOzs7NENBRUlBLHNCQUFhQTs7Ozs7Ozs7O2lEQUVWQSxpREFBa0JBLE1BQU1BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkNBR3FCQTs7Ozs7Ozs7Ozs7Ozs7NENBRXBEQSxPQUFXQSxLQUFJQSxtREFBV0E7Z0RBQzFCQSxLQUFLQSxPQUFXQSxJQUFJQSxHQUFHQTtvREFDbkJBOzs7Z0RBRUpBOzs7NENBRUlBLHNCQUFhQTs7Ozs7Ozs7O2lEQUVWQSxvQ0FBS0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztxREFHZ0RBOzs7Ozs7Ozs7Ozs7Ozs7NENBRTVEQSxBQUFLQTs7Ozs7aURBQVdBLEtBQUtBOzs7Ozs7Ozs0Q0FDakJBLDBCQUFxQkEsbURBQWtCQSxHQUFHQTs7Ozs7Ozs7Ozs7Ozs7NENBQ3RDQSxzQkFBYUE7Ozs7Ozs7Ozs7Ozs7NENBRkdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQ0FLSEEsR0FBT0EsR0FBT0E7b0JBRW5DQSxJQUFJQSxXQUFTQTt3QkFFVEEsSUFBSUEsWUFBWUE7O3dCQUVoQkEsVUFBUUEsS0FBSUEsbURBQVdBO3dCQUN2QkEsS0FBS0EsV0FBV0EsSUFBSUEsR0FBR0E7NEJBQ25CQTs7d0JBQ0pBLEtBQUtBLFNBQVFBLEdBQUdBLEtBQUlBLEdBQUdBOzRCQUNuQkE7Ozt3QkFFSkEsT0FBT0EsU0FBU0EsSUFBSUE7OztvQkFHeEJBLE9BQU9BLGlEQUFrQkEsU0FBT0E7O3dDQTZFSkEsR0FBT0EsR0FBT0E7b0JBRTFDQSxJQUFJQSxXQUFTQTt3QkFFVEEsSUFBSUEsWUFBWUE7O3dCQUVoQkEsVUFBUUEsa0JBQVFBO3dCQUNoQkEsS0FBS0EsV0FBV0EsSUFBSUEsR0FBR0E7NEJBQ25CQSwyQkFBTUEsR0FBTkE7Ozt3QkFFSkEsT0FBT0EsVUFBVUEsS0FBS0E7OztvQkFHMUJBLFdBQVlBLENBQUNBLCtDQUFnQkEsU0FBT0E7O29CQUVwQ0EsSUFBSUE7d0JBRUFBLEtBQUtBLFlBQVdBLEtBQUlBLEdBQUdBOzRCQUNuQkEsMkJBQU1BLElBQU5BOzs7d0JBRUpBLEtBQUtBLFNBQVFBLEdBQUdBLEtBQUlBLEdBQUdBOzRCQUNuQkEsMkJBQU1BLElBQU5BOzs7O29CQUdSQSxPQUFPQTs7Z0NBbEdNQTtvQkFFYkEsZ0JBQWdCQSw0QkFBbUNBLEFBQUNBLFlBQW1CQSx1RUFBTUEsQUFBa0NBO29CQUMvR0EsSUFBSUEsY0FBYUE7d0JBQ2JBOzs7b0JBRUpBLGdCQUFnQkEsNkNBQWNBOztvQkFFOUJBLElBQUlBLGFBQWFBO3dCQUViQSxLQUFLQSxXQUFXQSxJQUFJQSx1QkFBZUE7NEJBQy9CQSxhQUFLQTs7d0JBQ1RBLEtBQUtBLFNBQVFBLHFCQUFlQSxLQUFJQSxZQUFZQTs0QkFDeENBLGFBQUtBOzs7d0JBSVRBLGFBQUtBOzt3QkFFTEEsbUJBQW1CQTt3QkFDbkJBLEtBQUtBLFNBQVFBLFdBQVdBLEtBQUlBLFlBQVlBOzRCQUVwQ0EsSUFBSUEsYUFBS0E7Z0NBQ0xBOzs7O3dCQUdSQSxLQUFLQSxZQUFXQSxLQUFJQSxjQUFjQTs0QkFDOUJBLGFBQUtBOzt3QkFDVEEsS0FBS0EsU0FBUUEsY0FBY0EsS0FBSUEsV0FBV0E7NEJBQ3RDQSxhQUFLQTs7OztvQkFHYkE7OzZDQUcwQkEsTUFBaUJBO29CQUUzQ0EsZ0JBQWdCQSw2Q0FBY0E7O29CQUU5QkEsSUFBSUEsYUFBYUE7d0JBQ2JBOzs7b0JBRUpBLGFBQUtBOztvQkFFTEEsbUJBQW1CQTtvQkFDbkJBLEtBQUtBLFFBQVFBLFdBQVdBLElBQUlBLFlBQVlBO3dCQUVwQ0EsSUFBSUEsYUFBS0E7NEJBQ0xBOzs7O29CQUdSQSxLQUFLQSxZQUFXQSxLQUFJQSxjQUFjQTt3QkFDOUJBLGFBQUtBOztvQkFDVEEsS0FBS0EsU0FBUUEsY0FBY0EsS0FBSUEsV0FBV0E7d0JBQ3RDQSxhQUFLQTs7O29CQUVUQTs7eUNBR3FCQTtvQkFFckJBO29CQUNBQSxPQUFPQSxJQUFJQTt3QkFFUEEsSUFBSUEsYUFBS0EsTUFBTUEsQ0FBQ0EsYUFBS0E7NEJBQ2pCQTs7O3dCQUVKQTs7O29CQUdKQSxPQUFPQTs7MkNBc0RjQTtvQkFFckJBO29CQUNBQSxPQUFPQSxJQUFJQTt3QkFFUEEsSUFBSUEsd0JBQUtBLEdBQUxBLGdCQUFnQkEsd0JBQUtBLGVBQUxBOzRCQUNoQkE7Ozt3QkFFSkE7OztvQkFHSkEsT0FBT0E7OzJDQWxDaUJBLE1BQVlBO29CQUVwQ0EsZ0JBQWdCQSwrQ0FBY0E7O29CQUU5QkEsSUFBSUEsYUFBYUE7d0JBQ2JBOzs7b0JBRUpBLHdCQUFLQSxXQUFMQTs7b0JBRUFBLGtCQUFrQkE7b0JBQ2xCQSxLQUFLQSxRQUFRQSxXQUFXQSxJQUFJQSxhQUFhQTt3QkFFckNBLDZCQUFlQSx3QkFBS0EsR0FBTEE7OztvQkFHbkJBLEtBQUtBLFlBQVdBLEtBQUlBLGFBQWFBO3dCQUM3QkEsd0JBQUtBLElBQUxBOztvQkFDSkEsS0FBS0EsU0FBUUEsYUFBYUEsS0FBSUEsV0FBV0E7d0JBQ3JDQSx3QkFBS0EsSUFBTEE7OztvQkFFSkE7O3dEQW9Cb0VBO29CQUVwRUEsT0FBT0EsK0hBQWtJQSxxREFBb0JBLFdBQVVBLEFBQTBNQTs7K0NBR3RUQTtvQkFFM0RBLE9BQU9BLHFEQUFvQkE7O2lEQUd5QkEsT0FBYUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FFakVBO2dEQUNBQSxBQUFLQTs7Ozs7aURBQVdBLElBQUlBOzs7Ozs7Ozs0Q0FFaEJBLElBQUlBLHlCQUFNQSxHQUFOQTtvREFDQUE7Ozs7Z0RBRUpBOztnREFFQUEseUJBQU1BLEdBQU5BLG9DQUFNQSxHQUFOQTs7Z0RBRUFBLDBCQUEwQkEscURBQW9CQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7NENBRWpEQSxrQkFBVUEsT0FBT0E7Z0RBQ2pCQSxzQkFBYUE7Ozs7Ozs7Ozs0Q0FHakJBLHlCQUFNQSxHQUFOQSxvQ0FBTUEsR0FBTkE7Ozs7OzRDQWY4QkE7Ozs7OzRDQWtCbENBLElBQUlBOzs7Ozs7Ozs0Q0FFQUEsYUFBZ0JBLEtBQUlBO2dEQUNwQkEsS0FBS0EsUUFBV0EsS0FBSUEsY0FBY0E7b0RBQzlCQSxlQUFjQSxLQUFJQTs7O2dEQUV0QkEsc0JBQWFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NCQXppQm9UQTs7bUJBeVhqTkE7O3NCQTZJcWZBLEdBQUdBOzttQkFBTUEsbURBQTBDQSxHQUFFQSxLQUFLQSxVQUFJQSxvRkFBeURBLElBQUlBOztzQkFBbFhBLElBQUlBO21CQUFPQSx3RkFBa0VBLElBQUlBLElBQUlBLEFBQWlLQTs7Ozs7Ozs7Ozs7O2dDQXp4Qi9rQkEsS0FBSUE7cUNBQ1NBLEtBQUlBOzs7O3dDQUVQQSxHQUFrQkE7O29CQUVqREEsSUFBSUEsS0FBS0EsUUFBUUEsS0FBS0E7d0JBQ2xCQSxPQUFPQSxLQUFJQTs7O29CQUVmQSxVQUFVQTtvQkFDVkE7O29CQUVBQSwwQkFBa0JBOzs7OzRCQUNkQSxRQUFRQTs7Ozs7OztvQkFFWkEsbUJBQW1CQSxLQUFJQSxzQ0FBUUE7b0JBQy9CQSwyQkFBa0JBOzs7OzRCQUVkQSxJQUFJQSxhQUFhQTtnQ0FDYkEsaUJBQWlCQTs7Ozs7Ozs7b0JBR3pCQSxPQUFPQTs7NkNBR3lCQSxHQUFrQkE7O29CQUVsREEsSUFBSUEsS0FBS0EsUUFBUUEsS0FBS0E7d0JBQ2xCQTs7O29CQUVKQSxVQUFVQTtvQkFDVkE7O29CQUVBQSwwQkFBa0JBOzs7OzRCQUNkQSxRQUFRQTs7Ozs7OztvQkFFWkE7b0JBQ0FBLDJCQUFrQkE7Ozs7NEJBRWRBLElBQUlBLGFBQWFBO2dDQUNiQTs7Ozs7Ozs7b0JBR1JBLE9BQU9BOztzQ0FHc0JBLEdBQWtCQTs7b0JBRS9DQSxJQUFJQSxLQUFLQTt3QkFDTEEsT0FBT0EsS0FBSUE7O29CQUNmQSxJQUFJQSxLQUFLQTt3QkFDTEEsSUFBSUEsS0FBSUE7OztvQkFFWkEsVUFBVUE7b0JBQ1ZBOztvQkFFQUEsMEJBQWtCQTs7Ozs0QkFDZEEsUUFBUUE7Ozs7Ozs7b0JBRVpBLGlCQUFpQkEsS0FBSUEsc0NBQVFBO29CQUM3QkEsMkJBQWtCQTs7Ozs0QkFFZEEsSUFBSUEsQ0FBQ0EsYUFBYUE7Z0NBQ2RBLGVBQWVBOzs7Ozs7OztvQkFHdkJBLE9BQU9BOzttQ0FHaUJBLEdBQVdBOztvQkFFbkNBLElBQUlBLEtBQUtBLFFBQVFBLEtBQUtBO3dCQUNsQkEsT0FBT0EsS0FBSUE7O29CQUNmQSxJQUFJQSxLQUFLQTt3QkFDTEEsT0FBT0E7O29CQUNYQSxJQUFJQSxLQUFLQTt3QkFDTEEsT0FBT0E7OztvQkFFWEEsVUFBVUE7b0JBQ1ZBOztvQkFFQUEsMEJBQWdCQTs7Ozs0QkFDWkEsUUFBUUE7Ozs7Ozs7b0JBRVpBLFlBQVlBLEtBQUlBLHNDQUFRQTtvQkFDeEJBLDJCQUFnQkE7Ozs7NEJBRVpBLElBQUlBLENBQUNBLGFBQWFBO2dDQUNkQSxVQUFVQTs7Ozs7Ozs7b0JBR2xCQSxPQUFPQTs7aUNBR2lCQSxHQUFXQTtvQkFFbkNBLFlBQVlBLEtBQUlBLHNDQUFRQTtvQkFDeEJBLElBQUlBLENBQUNBLGVBQWVBO3dCQUNoQkEsVUFBVUE7OztvQkFFZEEsT0FBT0E7O2dEQUdnQ0EsR0FBa0JBOztvQkFFekRBLElBQUlBLEtBQUtBLFFBQVFBLEtBQUtBO3dCQUNsQkEsT0FBT0EsS0FBSUE7OztvQkFFZkEsVUFBVUE7b0JBQ1ZBOztvQkFFQUEsMEJBQWtCQTs7Ozs0QkFFZEE7NEJBQ0FBLGdCQUFnQkEsR0FBT0E7OzRCQUV2QkEsUUFBSUEsR0FBS0E7Ozs7Ozs7b0JBR2JBLG1CQUFtQkEsS0FBSUEsc0NBQVFBO29CQUMvQkEsMkJBQWtCQTs7Ozs0QkFFZEE7NEJBQ0FBLGdCQUFnQkEsSUFBT0E7OzRCQUV2QkEsSUFBSUE7Z0NBRUFBLGlCQUFpQkE7Z0NBQ2pCQSxRQUFJQSxJQUFLQTs7Ozs7Ozs7b0JBSWpCQSxPQUFPQTs7cURBR2lDQSxHQUFrQkE7O29CQUUxREEsSUFBSUEsS0FBS0EsUUFBUUEsS0FBS0E7d0JBQ2xCQTs7O29CQUVKQSxVQUFVQTtvQkFDVkE7O29CQUVBQSwwQkFBa0JBOzs7OzRCQUVkQTs0QkFDQUEsZ0JBQWdCQSxHQUFPQTs7NEJBRXZCQSxRQUFJQSxHQUFLQTs7Ozs7OztvQkFHYkE7b0JBQ0FBLDJCQUFrQkE7Ozs7NEJBRWRBOzRCQUNBQSxnQkFBZ0JBLElBQU9BOzs0QkFFdkJBLElBQUlBO2dDQUVBQTtnQ0FDQUEsUUFBSUEsSUFBS0E7Ozs7Ozs7O29CQUlqQkEsT0FBT0E7Ozs7Ozs7OztrQ0NoS1dBLEdBQUdBLEdBQVdBLEdBQVdBOztvQkFFL0NBLElBQUlBLFVBQVVBO3dCQUNWQTs7O29CQUVKQSxRQUFRQSxXQUFVQTtvQkFDbEJBLGtCQUFrQkEsS0FBSUEsb0ZBQWdCQTs7b0JBRXRDQSwwQkFBa0JBOzs7OzRCQUVkQSxnQkFBZ0JBLEtBQUlBOzRCQUNwQkEsS0FBSUEsV0FBV0EsSUFBSUEsU0FBU0E7Z0NBRXhCQSxhQUFhQSxNQUFNQSxHQUFHQSxVQUFFQTtnQ0FDeEJBLElBQUlBO29DQUNBQSxjQUFjQTs7Ozs0QkFHdEJBLGdCQUFnQkE7Ozs7Ozs7b0JBR3BCQSxPQUFPQSxrREFBK0JBLEdBQUdBLGlCQUFnQkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3Q0NpRlRBOzs7Ozs7Ozs7Ozs7Ozs0Q0FFaERBLFFBQVlBLDhCQUFtQkE7O2dEQUUvQkEsQUFBS0E7Ozs7O2lEQUFZQSxLQUFJQTs7Ozs7Ozs7NENBQ2pCQSxzQkFBYUEsSUFBSUEsb0NBQVlBLElBQUlBLHFDQUFXQSxHQUFHQTs7Ozs7Ozs7OzRDQUR2QkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3VDQXJES0EsSUFBZ0JBO29CQUVqREEsSUFBSUEsK0NBQU1BLFNBQVFBLCtDQUFNQTt3QkFDcEJBLE9BQU9BOzs7b0JBRVhBLElBQUlBLFNBQVFBO3dCQUNSQSxNQUFNQSxJQUFJQTs7O29CQUVkQSxlQUFlQSxLQUFJQSxpREFBVUE7O29CQUU3QkEsS0FBS0EsV0FBV0EsSUFBSUEsTUFBTUE7d0JBQ3RCQSxhQUFhQSxXQUFHQSxXQUFHQTs7O29CQUV2QkEsT0FBT0EsSUFBSUEsc0NBQVlBOzt1Q0FHSUEsSUFBZ0JBO29CQUUzQ0EsSUFBSUEsQUFBUUEsTUFBTUEsUUFBUUEsQUFBUUEsTUFBTUE7d0JBQ3BDQTs7b0JBQ0pBLElBQUlBLEFBQVFBLE1BQU1BLFFBQVFBLEFBQVFBLE1BQU1BO3dCQUNwQ0E7OztvQkFFSkEsT0FBT0EsVUFBVUE7O3lDQUdVQSxJQUFnQkE7b0JBRTNDQSxPQUFPQSxDQUFDQSxDQUFDQSwrQ0FBTUE7Ozs7Ozs7Ozs0QkF2RkFBOztnQkFFZkEsZUFBZUEsS0FBSUEsaURBQVVBO2dCQUM3QkEsS0FBS0EsV0FBV0EsSUFBSUEsZ0JBQWdCQTtvQkFDaENBLGFBQWFBOzs7Z0JBRWpCQSxLQUFLQSxZQUFXQSxLQUFJQSxnQkFBZ0JBO29CQUVoQ0EsUUFBUUEsa0JBQVNBLCtCQUFxQkEsWUFBS0E7O29CQUUzQ0EsZ0JBQWdCQSxJQUFHQSxpQkFBU0E7b0JBQzVCQSxrQkFBa0JBOzs7Z0JBR3RCQSxnQkFBV0E7Z0JBQ1hBLFNBQUlBOzs4QkFHV0E7OztnQkFFZkEsZ0JBQVdBLEtBQUlBLGlEQUFVQTtnQkFDekJBLFNBQUlBOztnQkFFSkEsV0FBV0EsS0FBSUE7Z0JBQ2ZBLDBCQUFrQkE7Ozs7d0JBRWRBLElBQUlBLGlCQUFpQkE7NEJBQ2pCQSxNQUFNQSxJQUFJQTs7O3dCQUVkQSxJQUFJQSxTQUFTQSxJQUFJQTs0QkFDYkEsTUFBTUEsSUFBSUE7Ozt3QkFFZEEsU0FBS0E7Ozs7Ozs7OzsyQkFvRkdBO1lBSVJBLE9BQU9BLHNCQUFTQTs7eUJBcEZIQSxHQUFHQTtZQUVwQkEsSUFBSUEsUUFBUUEsUUFBUUEsZUFBY0E7Z0JBQzlCQSxNQUFNQSxJQUFJQTs7O1lBRWRBLG1CQUFtQkEsS0FBSUEsc0NBQVFBOztZQUUvQkEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7Z0JBQ25CQSxpQkFBaUJBLGFBQUtBLGFBQUtBOzs7WUFFL0JBLE9BQU9BOzs7WUFLUEEsZUFBZUEsa0JBQVFBOztZQUV2QkEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBR0E7Z0JBQ25CQSw0QkFBU0EsYUFBS0EsSUFBZEEsYUFBb0JBOzs7WUFFeEJBLE9BQU9BLElBQUlBLHNDQUFZQSxLQUFJQSxpREFBVUE7OzBCQWtDYkE7WUFFeEJBLElBQUlBLE9BQU9BO2dCQUNQQTs7O1lBRUpBLE9BQU9BLHdDQUFjQTs7O1lBS3JCQSxPQUFPQSwwQkFBTUEsZUFBc0JBLDRCQUF1Q0Esc0JBQVNBLEFBQWdDQTs7O1lBS25IQSxPQUFPQTs7Ozs7Ozs7O21CQUxpSEE7Ozs7Ozs7Ozs7Ozs7O29CQ3REbEhBLE9BQU9BOzs7OztvQkFLUEE7Ozs7Ozs7Ozs7Ozs7Ozs7O2dCQTVDTkEsY0FBU0EsS0FBSUE7Z0JBQ2JBLGFBQVFBOzs7OzJCQUdJQTs7Z0JBRVpBLGtCQUFhQSxXQUFJQSwwREFBZ0JBO2dCQUNqQ0EsYUFBUUE7Z0JBQ1JBOzs7Z0JBS0FBLG1CQUFjQTtnQkFDZEEsYUFBUUE7Z0JBQ1JBOztnQ0FHaUJBO2dCQUVqQkEsT0FBT0Esc0JBQWlCQSxTQUFTQTs7OEJBR2xCQSxPQUFXQTtnQkFFMUJBLFdBQVdBO2dCQUNYQTtvQkFFSUEsV0FBV0E7b0JBQ1hBLElBQUlBLFFBQVFBO3dCQUNSQTs7O29CQUVKQSx5Q0FBTUEsa0RBQU5BLFVBQXNCQTtvQkFDdEJBLE9BQU9BOzs7OEJBY0lBO2dCQUVmQSxXQUFXQSxzQkFBaUJBO2dCQUM1QkEsSUFBSUEsUUFBUUE7b0JBQ1JBOzs7Z0JBRUpBLFdBQVdBO2dCQUNYQSxJQUFJQSxRQUFRQTtvQkFDUkE7OztnQkFFSkEsWUFBWUE7Z0JBQ1pBO2dCQUNBQTs7Ozs7Ozs7Ozs7Ozs7O29DQUtBQSxPQUFXQTt3Q0FDWEE7Ozs7Ozs7Ozs7Ozs7b0NBRUlBLE9BQVdBO3dDQUNYQSxJQUFJQSxRQUFRQTs0Q0FDUkE7Ozs7d0NBRUpBLHNCQUFhQTs7Ozs7b0NBQ2JBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0JBTVhBLE9BQU9BOzt3Q0FHV0E7Z0JBRWxCQSxXQUFXQTtnQkFDWEE7b0JBRUlBLFdBQVdBO29CQUNYQSxJQUFJQSxRQUFRQTt3QkFDUkE7OztvQkFFSkEsSUFBSUEsNkRBQW1DQSxXQUFXQTt3QkFDOUNBLE9BQU9BOzs7b0JBRVhBLE9BQU9BOzs7Z0JBR1hBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2lDQ3JHZUEsS0FBSUE7dUNBbUJHQSxLQUFJQTs7NEJBaEJWQSxRQUFZQTs7O2dCQUVuQ0EsZUFBVUE7Z0JBQ1ZBLGlCQUFZQTs7Z0JBRVpBLDBCQUFrQkE7Ozs7d0JBQ2RBLGdCQUFXQSxjQUFjQSxBQUErQkE7O3VDQUFNQSxpQkFBU0E7Ozs7Ozs7OztnQkFFM0VBLHFCQUFnQkEsQUFBK0JBOzs7OzhCQUc1QkEsTUFBYUE7O1lBRWhDQSxtQkFBY0EsV0FBSUEsa0VBQW1CQSxpQkFBY0E7OzhCQUlqQkEsVUFBd0JBLGFBQTJCQTs7O1lBRXJGQTs7WUFFQUEsZ0JBQWdCQSxLQUFJQTtZQUNwQkEsMEJBQXdCQTs7OztvQkFFcEJBLHVCQUF1QkEsNEJBQXFDQSxnQkFBUUEsQUFBOEJBO21DQUFLQSw2RkFBbUdBLGdCQUFVQSxBQUF1RkE7dUNBQUtBLCtCQUFVQTs7O29CQUMxVEEsbUJBQW1CQSw0QkFBZ0lBLG1FQUF3REEsNEJBQWdGQSx5QkFBaUJBLEFBQXlFQSxtRkFBeUJBLEFBQXlIQTs7Ozs7OztZQUczZ0JBLFlBQVlBLDRCQUE4RUEsb0JBQVVBOztZQUVwR0EsMkJBQTJCQTs7OztvQkFFdkJBLHdCQUF1QkEsNEJBQXFDQSxtQkFBV0EsQUFBOEJBO21DQUFLQSw2RkFBbUdBLGdCQUFVQSxBQUF1RkE7dUNBQUtBLCtCQUFVQTs7O29CQUM3VEEsWUFBWUEsNEJBQTRFQSxrQkFBVUEsNEJBQWdJQSxtRUFBd0RBLDRCQUFnRkEsMEJBQWlCQSxBQUF5RUEsbUZBQXlCQSxBQUF5SEEscURBQThDQTs7Ozs7OztZQUd4b0JBLHNCQUFzQkEsS0FBSUE7WUFDMUJBLGdCQUFnQkEsNEJBQTBFQSxpQkFBNUNBO1lBQzlDQSxPQUFPQTtnQkFFSEEsb0JBQWNBLDhDQUFpQkE7K0JBQU1BLDBCQUFjQSxJQUFZQSw0QkFBeUVBLGlCQUFVQSxBQUF3RUE7dUNBQUtBLGFBQVFBLEdBQUdBOzswQ0FBK0JBO2dCQUN6UUEsYUFBYUEsaURBQWtCQTs7bUNBQU1BLGFBQVlBOzt5REFBeUNBOztnQkFVMUZBLGlCQUFXQSxjQUFjQSx3QkFBd0JBOztnQkFFakRBLG9CQUFvQkE7Z0JBQ3BDQSw2RUFBbUdBLFdBQVVBLEFBQXdFQTs7K0JBQUtBLGFBQVFBLEdBQUdBOztnQ0FBUUEsQUFBb0VBOzs7WUFHclFBLE9BQU9BLDRCQUErS0Esd0JBQWdCQSxBQUF3S0E7MkJBQUtBLDRCQUE2RkEsVUFBRUEsQUFBc0ZBOzs7O1lBeUJ4aUJBLHFCQUFnQkEsS0FBSUE7WUFDcEJBLEtBQUlBLFdBQVdBLElBQUlBLHNCQUFpQkE7Z0JBRWhDQSx1QkFBY0EsR0FBS0EsS0FBSUE7Z0JBQ3ZCQSxjQUFjQSw0QkFBZ0NBLHNCQUFVQSxBQUErQkE7K0JBQUtBLHVCQUFVQSxTQUFTQTs7O2dCQUUvR0EsS0FBSUEsbUJBQVdBLE1BQUlBLHNCQUFpQkE7b0JBRWhDQSxJQUFJQSw4Q0FBOENBLFNBQVFBLDRCQUFnQ0Esc0JBQVVBLEFBQStCQTs7dUNBQUtBLHVCQUFVQSxXQUFTQTs7O3dCQUN2SkEsdUJBQWNBLE9BQU9BOzs7OzsyQkFLeEJBLFFBQWdCQTtZQUV6QkEsS0FBS0EsV0FBV0EsSUFBSUEsY0FBY0E7Z0JBRTlCQSxJQUFJQSxDQUFDQSx1QkFBVUEsVUFBRUEsVUFBVUEsZUFBT0E7b0JBQzlCQTs7OztZQUdSQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O21CQS9FOFhBLHVCQUFjQTs7O21CQUFvSUEsNEJBQW1DQSxVQUFMQTs7O21CQWUzUkE7O3NCQUN6RkEsT0FBT0E7WUFFckxBLElBQUlBLDhDQUFVQTtnQkFDVkEsT0FBT0Esc0JBQVFBOztZQUNuQkEsSUFBSUEsZ0RBQVVBO2dCQUNWQSxPQUFPQSxzQkFBUUEsQ0FBQ0E7OztZQUVwQkEsT0FBT0E7OzttQkFQaUZBLDRCQUFzQ0EscUJBQVVBLEFBQXFDQTs7c0JBYTZFQTs7bUJBR3VTQSx1QkFBVUE7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrQkFLcGlCQSxHQUFhQTtnQkFFNUJBLE9BQU9BLDRCQUEwQ0EsaUJBQUVBOztvQ0FHaENBOztnQkFJZkE7Z0JBQ0FBLDBCQUFrQkE7Ozs7d0JBQ2RBLE9BQU9BLHFCQUFZQTs7Ozs7OztnQkFFdkJBLE9BQU9BOzs7Ozs7Ozs7OzRCQzlFU0E7O2dCQUV4QkEsaUJBQVlBLDRCQUFvQ0EsaUJBQU5BOzs7O29DQUdyQkEsR0FBVUE7O2dCQUUvQkEsMEJBQWlCQTs7Ozt3QkFFYkE7O3dCQUVBQSxlQUFlQSw0QkFBb0NBLHVCQUFVQSxtQkFBUUE7d0JBQ3JFQSwyQkFBeUJBLHlCQUFvQkEsR0FBR0E7Ozs7Z0NBRTVDQTtnQ0FDQUEsMkJBQXVCQSw4REFBcURBLGdDQUFvQkE7Ozs7d0NBRTVGQSxJQUFJQTs0Q0FDQUE7Ozt3Q0FFSkEsU0FBU0EsY0FBU0EsR0FBR0EsV0FBV0EsUUFBUUE7d0NBQ3hDQSxJQUFJQSxXQUFXQTs0Q0FFWEE7NENBQ0FBOzs7Ozs7OztnQ0FJUkEsSUFBSUEsQ0FBQ0E7b0NBRURBO29DQUNBQTs7Ozs7Ozs7d0JBSVJBLElBQUlBOzRCQUNBQTs7Ozs7Ozs7Z0JBR1JBOzsyQ0FHNkNBLEdBQVVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d0NBRXZEQSxRQUFZQTs0Q0FDWkEsVUFBY0EsNEJBQW1DQSx1REFBZ0RBLE9BQU1BLEFBQWtDQTsyREFBS0Esa0JBQWtCQTsyREFBcEhBOzs0Q0FFNUNBLGtCQUFzQkEsZ0VBQWdFQTs0Q0FDdEZBLDBCQUErQkE7Ozs7Ozs7Ozs7Ozs7O3dDQUUzQkEsWUFBZ0JBLEtBQUlBLG9GQUFnQkE7NENBQ3BDQSwyQkFBMEJBOzs7O29EQUV0QkEsT0FBV0EsNEJBQXVDQSxrQkFBVUEsQUFBZ0NBO21FQUFLQSxnQkFBUUE7O29EQUN6R0EsY0FBY0E7Ozs7Ozs7NENBR2xCQSxzQkFBYUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnQ0FJTEEsR0FBVUEsV0FBMkJBLFFBQWtCQTs7Z0JBRW5FQSxZQUFZQTtnQkFDWkEsMEJBQWtCQSw0QkFBMkNBLG1CQUFPQSxBQUFnRkE7K0JBQUtBLGtCQUFVQTs7Ozs7d0JBQy9KQSx5QkFBTUEsR0FBTkEsVUFBV0EsaUJBQVNBLE1BQUlBLGlCQUFpQkEseUJBQU1BLEdBQU5BOzs7Ozs7O2dCQUU3Q0EsT0FBT0EsZ0NBQVdBOzs7Ozs7OztpQ0NwRXdDQSxHQUFHQTtvQkFFN0RBLGFBQWFBLEtBQUlBOztvQkFFakJBLGFBQWFBLDRCQUEwRUEsa0JBQTVDQTtvQkFDM0NBLFFBQVFBOztvQkFFUkEsT0FBT0E7d0JBRUhBO3dCQUNBQTs7d0JBRUFBLEtBQUtBLHVCQUFlQSxVQUFRQSxlQUFPQTs0QkFFL0JBLGlCQUFXQSw0QkFBcUhBLGVBQU9BLEFBQThHQTs7K0NBQUtBLDRCQUErQkEsUUFBRUE7Ozs0QkFDM1JBLGtCQUFZQSw0QkFBcUhBLGVBQU9BLEFBQThHQTs7K0NBQUtBLDRCQUErQkEsUUFBRUE7Ozs7NEJBRTVSQSxRQUFRQSw0Q0FBVUEsMEJBQWtCQSxBQUFnQ0E7O29DQUVoRUEsWUFBWUEsNEJBQTBFQSxpRkFBdUZBLDRCQUF3RUEsYUFBS0EsSUFBR0EsQUFBb0hBLFVBQUNBLElBQUlBO21EQUFPQSw0QkFBd0NBLGtCQUFHQTttREFBOVhBO29DQUMxQ0EsYUFBYUEsNEJBQTBFQSxpRkFBdUZBLDRCQUF3RUEsY0FBTUEsSUFBR0EsQUFBb0hBLFVBQUNBLElBQUlBO21EQUFPQSw0QkFBd0NBLGtCQUFHQTttREFBL1hBOztvQ0FFM0NBLFdBQVdBLDRCQUF1TEEsMkZBQStGQSxPQUFNQSxnQkFBUUEsQUFBZ0xBO21EQUFPQSw0QkFBaUNBLGtCQUFVQTs7b0NBQ2poQkEsZUFBZUEsNEJBQXVFQSxVQUFLQSxBQUF3RUE7bURBQUtBLDRCQUF1RUEsWUFBT0EsQUFBd0VBOzJEQUFNQSw0QkFBd0NBLGtCQUFHQTs7OztvQ0FFL1dBLE9BQU9BLGVBQWVBOzs7OzRCQUcxQkEsSUFBSUEsS0FBS0E7Z0NBRUxBLElBQUlBLElBQUlBLFNBQVNBLFNBQVNBLGlDQUFNQSxpQkFBU0EsU0FBU0EsaUNBQU1BO29DQUVwREEsUUFBUUE7b0NBQ1JBLGNBQVlBOzs7Ozt3QkFLeEJBLFFBQVFBLDRCQUFxSEEsZUFBT0EsQUFBOEdBOzsyQ0FBS0EsNEJBQStCQSxRQUFFQTs7O3dCQUN4UkEsUUFBUUEsNEJBQXFIQSxlQUFPQSxBQUE4R0E7OzJDQUFLQSw0QkFBK0JBLFFBQUVBOzs7d0JBQ3hSQSxTQUFTQSw0QkFBMEVBLGlGQUF1RkEsNEJBQXdFQSxRQUFFQSxRQUFPQSxBQUFvSEEsVUFBQ0EsSUFBSUE7dUNBQU9BLDRCQUF3Q0Esa0JBQUdBO3VDQUEvWEE7d0JBQ3ZDQSxTQUFTQSw0QkFBMEVBLGlGQUF1RkEsNEJBQXdFQSxRQUFFQSxRQUFPQSxBQUFvSEEsVUFBQ0EsSUFBSUE7dUNBQU9BLDRCQUF3Q0Esa0JBQUdBO3VDQUEvWEE7d0JBQ3ZDQSxjQUFRQSw0QkFBdUxBLDJGQUErRkEsSUFBR0EsWUFBSUEsQUFBZ0xBO3VDQUFPQSw0QkFBaUNBLGtCQUFVQTs7O3dCQUV2Z0JBLFdBQVdBLFNBQXdDQSxXQUFJQTt3QkFDdkVBLDZFQUFtR0EsUUFBT0EsQUFBd0VBOzt1Q0FBS0EsNEJBQXVFQSxTQUFFQSxBQUF3RUE7K0NBQU1BLDRCQUF3Q0Esa0JBQUdBOzs7cUNBQU9BLEFBQW9FQTs7O29CQUd4YkEsT0FBT0E7O3lDQUcyQ0EsR0FBR0E7O29CQUVyREEsYUFBYUEsS0FBSUE7O29CQUVqQkEsYUFBYUEsNEJBQTBFQSxrQkFBNUNBO29CQUMzQ0EsUUFBUUE7O29CQUVSQSxPQUFPQTt3QkFFSEE7d0JBQ0FBLHNCQUFzQkEsS0FBSUE7O3dCQUUxQkEsMEJBQXNCQSw0QkFBeUhBLCtEQUFzREEsZ0NBQW9CQSxpQ0FBYUEsQUFBa0hBOzs7O2dDQUVwVkEsSUFBSUEsa0RBQWlCQSxPQUFPQTtvQ0FDeEJBOzs7Z0NBRUpBLFFBQVFBLDRDQUFVQSwwQkFBa0JBLEFBQWdDQTtvQ0FFaEVBLGFBQWFBLDRCQUF3RUEsYUFBT0EsVUFBK0ZBLEFBQXVKQTsrQ0FBS0Esa0RBQWlCQSxPQUFPQTs7b0NBQy9XQSxrQkFBa0JBLDRCQUFtUEEsa0JBQU9BLGdDQUFvQkEsZ0NBQTZHQSxBQUFnSEE7bURBQU1BLEtBQUlBOzRIQUMvaEJBLEFBQW1ZQSxVQUFDQSxPQUFPQTttREFBU0EsNEJBQStPQSxXQUFNQSxNQUFNQSxBQUE0T0EsVUFBQ0EsR0FBR0E7MkRBQU1BLDRCQUEwRUEsaUZBQXVGQSwrRUFBcUZBLEdBQUVBLElBQUdBLEFBQW9IQSxVQUFDQSxJQUFJQTttRUFBT0EsNEJBQXdDQSxrQkFBR0E7bUVBQXhZQTs7OztvQ0FFMzRCQSxTQUFTQSw0QkFBOE1BLDJGQUErRkEscUJBQWFBLEFBQXVNQTttREFBTUEsNEJBQTBFQSxXQUE1Q0E7O29DQUM5aUJBLFdBQVdBLDRCQUE4SkEsV0FBR0EsQUFBdUpBO21EQUFNQSw0QkFBZ0ZBLGVBQUdBLEFBQXFIQTs7b0NBQ2poQkEsZUFBZUEsNEJBQXVFQSxVQUFLQSxBQUF3RUE7bURBQUtBLDRCQUF1RUEsWUFBT0EsQUFBd0VBOzJEQUFNQSw0QkFBd0NBLGtCQUFHQTs7OztvQ0FFL1dBLE9BQU9BLGVBQWVBOzs7Z0NBRzFCQSxJQUFJQSxJQUFJQTtvQ0FFSkEsUUFBUUE7b0NBQ1JBLGNBQVlBOzs7Ozs7Ozt3QkFJcEJBLFNBQVNBLDRCQUF3RUEsYUFBT0EsY0FBbUdBLEFBQXVKQTs7dUNBQUtBLGtEQUFpQkEsYUFBV0E7Ozt3QkFDblhBLFVBQVVBLDRCQUFtUEEsY0FBR0EsZ0NBQW9CQSw0QkFBeUdBLEFBQWdIQTt1Q0FBTUEsS0FBSUE7Z0hBQ3ZnQkEsQUFBMlhBLFVBQUNBLE9BQU9BO3VDQUFTQSw0QkFBK09BLFdBQU1BLE1BQU1BLEFBQTRPQSxVQUFDQSxHQUFHQTsrQ0FBTUEsNEJBQTBFQSxpRkFBdUZBLCtFQUFxRkEsR0FBRUEsSUFBR0EsQUFBb0hBLFVBQUNBLElBQUlBO3VEQUFPQSw0QkFBd0NBLGtCQUFHQTt1REFBeFlBOzs7O3dCQUUzNEJBLGNBQVFBLDRCQUFxS0EsMkZBQStGQSxhQUFLQSxBQUE4SkE7dUNBQU1BLDRCQUFnRkEsZUFBR0EsQUFBcUhBOzs7d0JBRTduQkEsV0FBV0E7d0JBQzNCQSw2RUFBbUdBLFFBQU9BLEFBQXdFQTs7dUNBQUtBLDRCQUF1RUEsU0FBRUEsQUFBd0VBOytDQUFNQSw0QkFBd0NBLGtCQUFHQTs7O3FDQUFPQSxBQUFvRUE7OztvQkFHeGJBLE9BQU9BOzt5Q0FHd0JBLEdBQUdBLE9BQWlCQTs7b0JBRW5EQSxhQUFhQSxLQUFJQTs7b0JBRWpCQTtvQkFDQUEsMEJBQXFCQTs7Ozs0QkFFakJBLFdBQVdBLFdBQVdBLE1BQU1BLFdBQU9BOzRCQUNuQ0EsT0FBT0E7Ozs7Ozs7b0JBR1hBLElBQUlBLE9BQU9BO3dCQUNQQSxXQUFXQSxXQUFXQSxNQUFNQSxZQUFVQTs7O29CQUUxQ0EsT0FBT0E7O2tDQUc4QkEsR0FBR0E7b0JBRXhDQSxZQUFZQSw0QkFBOEpBLGVBQU9BLEFBQXVKQTttQ0FBS0EsMEVBQWdGQTs7b0JBQzdaQTt3QkFFSUEsb0JBQW9CQSw0QkFBNk5BLDhIQUF3SUEsT0FBTUEsY0FBT0EsQUFBNE5BO3VDQUFRQSxDQUFDQSw0QkFBaUZBLDBCQUFXQTtzQ0FBcUJBO21DQUFRQSwwQkFBYUEsTUFBbUJBLGlEQUFnQkEsNEJBQTBFQSxtQkFBV0E7Ozt3QkFFejJCQSxZQUFZQSw2QkFBNkJBO3VDQUFNQSx5REFBd0JBLFFBQVFBOzt3QkFDL0VBLElBQUlBLFNBQVNBOzRCQUNUQTs7O3dCQUVKQSxZQUFZQTt3QkFDWkEsYUFBYUE7d0JBQ2JBLGFBQWFBO3dCQUNiQSxVQUFVQTs7d0JBRVZBLElBQUlBLGdCQUFlQTs0QkFDZkE7Ozs7b0JBR1JBLE9BQU9BOzt3Q0FHb0NBLEdBQUdBO29CQUU5Q0EsZ0JBQWdCQSw0QkFBMEVBLGVBQTVDQTtvQkFDOUNBLFlBQVlBLEtBQUlBOztvQkFFaEJBO3dCQUVJQSxRQUFRQSwyQ0FBVUEsMEJBQWtCQSxBQUFnQ0E7NEJBRTVEQSxPQUFPQSxnREFBZUEsV0FBV0EsNEJBQXdFQSxhQUFPQSx1REFBbUJBOzs7d0JBRzNJQSxVQUFVQSxpREFBZ0JBLDRCQUF3RUEsYUFBT0E7d0JBQ3pHQSxTQUFTQSw0QkFBd0VBLGFBQU9BO3dCQUN4RkEsSUFBSUE7NEJBQ0FBOzs7O29CQUdSQSxPQUFPQTs7dUNBR29CQSxHQUFHQSxXQUF5QkE7b0JBRXZEQSxVQUFVQSxpREFBZ0JBO29CQUMxQkEsT0FBT0EseURBQXdCQSxXQUFXQTs7Z0RBR2JBLEdBQUdBLFdBQXlCQTtvQkFFekRBLE9BQU9BLDRCQUF1RUEsa0JBQWFBLEFBQXdFQTttQ0FBS0EsNEJBQXVFQSxlQUFVQSxBQUF3RUE7MkNBQU1BLDRCQUF3Q0Esa0JBQUdBOzs7O3dDQUc3VUEsR0FBR0E7b0JBRXhDQSxPQUFPQSw0QkFBNEhBLHdEQUFzREEsZ0NBQW9CQSxnQ0FBb0VBLEFBQXVFQTttQ0FBS0EsNEJBQTRFQSxlQUFPQSxBQUFxRUE7MkNBQUtBLFVBQUVBOztvQ0FFdmdCQSxBQUFxSEE7bUNBQUtBLDRCQUFpQ0EsVUFBSEE7OztpQ0FJeEhBLEdBQUdBO29CQUV4QkEsT0FBT0EsaUJBQWdCQSxpREFBZ0JBOzt1Q0FHVkEsR0FBR0E7b0JBRWhDQSxPQUFPQSxlQUFtQkEsZ0NBQW9CQSxnQ0FBZ0NBLEFBQW1DQTttQ0FBS0EsMEJBQU1BLGVBQW9CQSw0QkFBNEVBLGVBQU9BLEFBQXFFQTsrQ0FBS0EsVUFBRUE7Ozs7OENBRzNRQSxHQUFHQTtvQkFFdkNBLE9BQU9BLGVBQW1CQSw0QkFBMEhBLG1CQUFXQSxBQUFtSEE7dUNBQVNBLHdEQUF1QkE7Ozt5Q0FHblJBLEdBQUdBO29CQUVsQ0EsT0FBT0EsNkVBQXVCQSxxQkFBdUJBLHdEQUF1QkE7OytDQUc5Q0EsR0FBR0E7b0JBRWpDQSxPQUFPQSwwQkFBTUEsZUFBaUJBLDRCQUFpRkEsVUFBRUEsQUFBMEVBO3VDQUFNQSwwQkFBTUEsZUFBb0JBOzs7a0NBRzdNQSxPQUFXQSxNQUFVQTtvQkFFbkNBLFdBQVdBO29CQUNYQSxZQUFZQTs7b0JBRVpBLE9BQU9BLFVBQVFBO3dCQUVYQSxhQUFhQSxRQUFPQSxrQkFBQ0EsVUFBUUE7d0JBQzdCQSxnQkFBZ0JBLGdCQUFnQkE7O3dCQUVoQ0EsSUFBSUE7NEJBQ0FBLE9BQU9BOzs0QkFDTkEsSUFBSUE7Z0NBQ0xBLFFBQVFBOztnQ0FFUkEsT0FBT0E7Ozs7O29CQUdmQSxJQUFJQSxPQUFPQTt3QkFDUEEsT0FBT0E7O29CQUNYQSxJQUFJQSxRQUFRQTt3QkFDUkEsT0FBT0E7OztvQkFFWEEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztzQkF4TGtiQTs7bUJBa0JUQTs7O21CQUEvRUEsNEJBQXdDQSxXQUFFQSxBQUFnQ0E7OzttQkFZd0hBOzs7Ozs7Ozs7Ozs7NENDekUzZUEsS0FBSUE7OzRCQUVoQ0E7O2dCQUU1QkEsdUJBQWtCQSxrQkFBVUEsS0FBS0EsQ0FBQ0EsQ0FBQ0E7Ozs7b0NBR2RBLE9BQWdCQTs7Z0JBRXJDQSxLQUFLQSxXQUFXQSxJQUFJQSxlQUFlQTtvQkFFL0JBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLGVBQWVBO3dCQUVuQ0EsUUFBUUEsZ0NBQWFBLEdBQWJBO3dCQUNSQSxRQUFRQSxnQ0FBYUEsR0FBYkE7d0JBQ1JBLGdCQUFnQkEsTUFBSUE7O3dCQUVwQkE7d0JBQ0FBLDBCQUE4QkEsdUJBQWtCQTs7OztnQ0FFNUNBOztnQ0FFQUEsdUJBQWtCQTtnQ0FDbEJBLEtBQUtBLFdBQVdBLElBQUlBLDBCQUFxQkE7b0NBRXJDQSxpQkFBaUJBLElBQUlBLDhDQUFTQSxjQUFjQSxHQUFHQSxHQUFHQSx3Q0FBZ0JBLEdBQWhCQSx3QkFBb0JBO29DQUN0RUEsSUFBSUEsbUJBQW1CQTt3Q0FFbkJBO3dDQUNBQTs7OztnQ0FJUkEsSUFBSUEsQ0FBQ0E7b0NBRURBO29DQUNBQTs7Ozs7Ozs7d0JBSVJBLElBQUlBOzRCQUNBQTs7Ozs7Z0JBSVpBOzt5Q0FHbUJBO2dCQUVuQkEsMkJBQXNCQSxLQUFLQTs7Z0JBRTNCQTtnQkFDQUEsT0FBT0EsU0FBU0E7b0JBRVpBO29CQUNBQSxjQUFRQTs7b0JBRVJBLE9BQU9BO3dCQUNIQSx1QkFBWUEsc0JBQWNBLHFEQUE4Q0E7OztvQkFFNUVBLHdDQUFnQkEsUUFBaEJBLHlCQUEwQkE7b0JBQzFCQTs7O3lDQUk0QkE7O2dCQUVoQ0E7Z0JBQ0FBLElBQUlBLENBQUNBLHNDQUFpQ0EsV0FBZUE7b0JBRWpEQSxXQUFXQTtvQkFDWEEsaUJBQWlCQSxnRUFBZ0VBO29CQUNqRkEsWUFBVUEsS0FBSUEscUZBQWtCQTs7b0JBRWhDQSwwQkFBMEJBOzs7OzRCQUV0QkEsYUFBYUEsS0FBSUEsa0RBQVlBOzRCQUM3QkEsY0FBWUE7OzRCQUVaQSwyQkFBcUJBOzs7O29DQUVqQkE7b0NBQ0FBLDJCQUFrQkE7Ozs7NENBQ2RBLFNBQUtBLGFBQUtBOzs7Ozs7O29DQUVkQSxXQUFXQTs7Ozs7Ozs7Ozs7OztvQkFJbkJBLDhCQUFxQkEsV0FBYUE7OztnQkFHdENBLE9BQU9BOzs7Ozs7Ozs7Ozs7b0NDL0ZrQ0EsQUFBdUNBLCtDQUFqQkEsS0FBSUE7Ozs7K0NBRWhDQTtvQkFFbkNBLE9BQU9BLDRCQUFzRkEsbUVBQThCQSxXQUFHQSxBQUErRUE7O3lEQUd4SkE7b0JBRXJEQSxXQUFXQSxLQUFJQTtvQkFDZkEsb0JBQW9CQSw0QkFBK0VBLG1FQUE4QkEsV0FBL0VBO29CQUNsREEsS0FBS0EsV0FBV0EsSUFBSUEsU0FBU0E7d0JBRXpCQSxTQUFTQSw0QkFBc0ZBLHNCQUFjQSxBQUErRUE7dUNBQUtBLFVBQUVBO3VDQUFxQkEsQUFBc0NBOzs7b0JBR2xRQSxPQUFPQSw0QkFBc0NBLGFBQVJBOzswREFHaUJBO29CQUV0REEsT0FBT0EsNEJBQTZDQSxVQUFFQSxBQUFzQ0E7O3lEQVUxQkE7Ozs7Ozs7Ozs7Ozs7Ozs7NENBRWxFQSxVQUFjQSw0QkFBNkNBLFVBQUVBLEFBQXNDQTtnREFDbkdBLDBCQUE0QkE7Ozs7Ozs7Ozs7Ozs7OzRDQUV4QkEsVUFBUUEsK0JBQXdCQTtnREFDaENBLHNCQUFhQSw0QkFBNkNBLGdCQUFRQSxBQUFzQ0E7O21FQUFLQSwySEFBZUEsK0RBQW1CQSwrREFBbUJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4Q0FLL0hBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NCQTFDMENBO1lBQVFBO1lBQWNBO1lBQWNBO1lBQWNBLE9BQU9BOzs7bUJBSW9MQTs7O21CQUE1R0EsZUFBaUJBLDRCQUE4Q0EsV0FBRUEsQUFBc0NBOzs7bUJBb0IxSUE7OztZQUQzS0EsWUFBWUE7WUFDWkEsUUFBUUEsa0ZBQWdCQTsyQkFBS0EsMEJBQVVBLEdBQVVBLDRCQUFtQ0EsYUFBTUEsQUFBa0NBO21DQUFNQSxPQUFNQTs7cUNBQThCQTs7WUFFdEtBLE9BQU9BLGtHQUFVQSwrREFBcUJBLCtEQUFxQkE7Ozs7bUJBT3lDQTs7Ozs7Ozs7Ozs7OzRCQzVCNUZBLE9BQWVBOztnQkFFM0JBLGNBQVNBO2dCQUNUQSxlQUFVQTtnQkFDVkEsbUJBQWNBO2dCQUNkQSxpQkFBWUEsZ0VBQWFBLGFBQVFBOzs4QkFHckJBLE9BQWVBLEdBQU9BLEdBQU9BLE1BQVlBOztnQkFFckRBLGNBQVNBLGtCQUFVQTtnQkFDbkJBO2dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxjQUFjQTtvQkFFOUJBO29CQUNBQSxJQUFJQSxNQUFLQSxLQUFLQSxNQUFLQTt3QkFDZkEsSUFBSUEseUJBQU1BLEdBQU5BLFlBQVdBOzt3QkFFZkEsSUFBSUEseUJBQU1BLEdBQU5BOzs7b0JBRVJBLFFBQVFBO29CQUNSQSxPQUFPQSxTQUFTQSwrQkFBT0EsZUFBUEEsaUJBQWdCQTt3QkFDNUJBOzs7b0JBRUpBLElBQUlBLElBQUlBO3dCQUNKQSxrQkFBV0EsYUFBUUEsUUFBUUEsYUFBUUEsQ0FBQ0EscUJBQWFBLENBQUNBLGlCQUFVQTs7b0JBQ2hFQSwrQkFBT0EsR0FBUEEsZ0JBQVlBOztvQkFFWkE7OztnQkFHSkEsbUJBQWNBO2dCQUNkQSxpQkFBWUEsZ0VBQWFBLGFBQVFBOzs7OzhCQUdUQTtnQkFFeEJBLE9BQU9BLFlBQU9BOzs4QkFHQ0E7Z0JBRWZBLElBQUlBLFNBQVNBLFFBQVFBLGlCQUFXQTtvQkFDNUJBOzs7Z0JBRUpBLEtBQUtBLFdBQVdBLElBQUlBLGNBQVNBO29CQUN6QkEsSUFBSUEsK0JBQU9BLEdBQVBBLGlCQUFhQSxnQ0FBYUEsR0FBYkE7d0JBQ2JBOzs7O2dCQUVSQTs7O2dCQUtBQSxPQUFPQTs7Ozs7OztxQ0MxRHlCQTtnQkFFaENBLFlBQVlBLDRCQUFzRkEsZ0ZBQWdDQSxpQ0FBMEJBLG9CQUFZQSxBQUErRUE7K0JBQVNBLElBQUlBLDRDQUFTQSxPQUFPQTs7Z0JBQ3BSQSxPQUFPQTs7Ozs7Ozs7cUNBS3NDQSxPQUF3QkE7b0JBRWpFQSxpQkFBaUJBLDRCQUFrQ0E7b0JBQ25EQSxpQkFBaUJBLGdEQUE2QkE7O29CQUU5Q0EsaUJBQWlCQSxrQkFBVUE7O29CQUUzQkEsUUFBUUEsa0JBQWdCQTtvQkFDeEJBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBO3dCQUN6QkEscUJBQUVBLEdBQUZBLE1BQU9BLGdEQUE2QkEsOEJBQXVCQSx3QkFBY0EsU0FBR0E7OztvQkFFaEZBLFFBQVVBLDREQUF1QkE7b0JBQ2pDQSxTQUFXQSxBQUFPQSxBQUFDQSxBQUFDQSxDQUFDQSxLQUFJQTtvQkFDekJBLE9BQU9BLGtGQUFVQSxZQUFZQSxZQUFZQSx3QkFBU0EsR0FBR0E7O3VDQUduQkEsT0FBbUJBLFlBQW9CQSxHQUFpQkEsR0FBT0EsTUFBWUEsTUFBWUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FJekhBLElBQVFBLEFBQU9BLEFBQUNBLFNBQU9BLEFBQUNBO2dEQUN4QkEsSUFBUUEsQUFBT0EsQUFBQ0EsQUFBQ0EsZUFBT0EsQUFBQ0Esb0JBQVdBOztnREFFcENBLElBQUlBLEtBQUlBOzs7Ozs7Ozs7NENBRUpBLElBQVFBO2dEQUNSQSxJQUFJQSxBQUFPQSxBQUFDQSxDQUFDQSxTQUFPQSxPQUFLQSxDQUFDQSxTQUFPQSxBQUFDQTs7Ozs7NENBRWpDQSxJQUFJQSxLQUFJQTs7Ozs7Ozs7OzRDQUVUQSxLQUFRQTtnREFDUkEsSUFBUUEsQUFBT0EsQUFBQ0EsQUFBQ0EsYUFBSUE7Z0RBQ3JCQSxJQUFRQSxBQUFPQSxBQUFDQSxhQUFXQSxBQUFDQSxjQUFJQSxBQUFDQTtnREFDakNBLElBQUlBOzs7Ozs7Ozs0Q0FDQUE7Ozs0Q0FFSkEsS0FBU0EsQUFBT0EsQUFBQ0EsYUFBV0EsT0FBSUEsQ0FBQ0EsS0FBSUEsQ0FBQ0E7O2dEQUV0Q0EsSUFBSUEsQUFBT0EsQUFBQ0EsQ0FBQ0EsU0FBT0EsQ0FBQ0EsaUJBQVdBLENBQUNBLE1BQUlBLEFBQUNBLGVBQU1BLENBQUNBLE1BQUlBLENBQUNBLHFCQUFJQTs7Ozs7NENBSXREQSxJQUFJQTs7Ozs7Ozs7OzRDQUdSQSxNQUFVQSxBQUFPQSxBQUFDQSxRQUFPQTtnREFDekJBLElBQUlBLEtBQUtBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NENBSURBLDhCQUFXQSxHQUFYQSxlQUFnQkE7O2dEQUVoQkEsaUJBQXFCQSxrQkFBVUE7Z0RBQy9CQSxrQkFBV0EsZUFBWUEsbUJBQWdCQTs7Z0RBRXZDQSxzQkFBYUE7Ozs7OzRDQUViQSxJQUFJQSxTQUFLQTtvREFDTEE7Ozs7Z0RBRUpBLElBQUlBLEFBQU9BLEFBQUNBLENBQUNBLENBQUNBLE1BQUlBLENBQUNBLFNBQU9BLGlCQUFhQSxlQUFZQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FPbkRBLDhCQUFXQSxHQUFYQSxlQUFnQkE7O2dEQUVoQkEscURBQWdCQTtnREFDaEJBLElBQVFBLHVEQUFrQkEscUJBQUVBLGVBQUZBO2dEQUMxQkEsSUFBUUE7O2dEQUVSQSxJQUFJQSxDQUFDQSxNQUFJQTs7Ozs7Ozs7NENBRUxBLEtBQVNBLEFBQU9BLEFBQUNBLEFBQUNBLENBQUNBLEtBQUlBO2dEQUN2QkEsMEJBQWtCQSxrRkFBVUEsT0FBT0EsWUFBWUEsR0FBR0EsZUFBT0EsR0FBR0EsR0FBR0E7Ozs7Ozs7Ozs7Ozs7OzRDQUMzREEsc0JBQWFBOzs7Ozs7Ozs7Ozs7OzRDQUdyQkEscURBQWdCQTs7Z0RBRWhCQSxJQUFJQSxTQUFLQTtvREFDTEE7Ozs7Z0RBRUpBLElBQUlBLEFBQU9BLEFBQUNBLENBQUNBLENBQUNBLE1BQUlBLENBQUNBLFNBQU9BLGlCQUFhQSxlQUFZQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkMxRjdDQTs7O3FFQUErQkEsQUFBQ0EsWUFBbUJBOzs4QkFDbkRBOztnQkFFbEJBLGlCQUFZQSw0QkFBb0NBLGlCQUFOQTs7OztzQ0FHSkE7Z0JBRXRDQSxPQUFPQSw0QkFBMkZBLGtFQUF5REEsOEJBQWlFQSxnQkFBV0EsaUJBQVNBLEFBQW9GQTs7Ozs7Ozs7O21CQUFTQSxnQ0FBV0EsNEJBQXFDQTs7Ozs7OztvQ0NxdUI3VkEsT0FBd0JBLFNBQWFBOztvQkFFckVBLGlCQUFpQkEsNEJBQWtDQTtvQkFDbkRBLGlCQUFpQkEsK0NBQTRCQTs7b0JBRTdDQSxrQkFBa0JBLEtBQUlBLG1FQUFhQTtvQkFDbkNBLGlCQUFpQkEsa0JBQVNBOztvQkFFMUJBLFFBQVFBLGtCQUFlQTtvQkFDdkJBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBO3dCQUN6QkEscUJBQUVBLEdBQUZBLE1BQU9BLCtDQUE0QkEsOEJBQXVCQSx3QkFBY0EsU0FBR0E7OztvQkFFL0VBLFFBQVNBLDJEQUF1QkE7b0JBQ2hDQSxTQUFVQSxDQUFNQSxBQUFDQSxDQUFDQSxDQUFDQSxJQUFJQTtvQkFDdkJBLCtDQUFTQSxZQUFZQSxhQUFhQSxZQUFZQSxTQUFTQSxHQUFHQTs7b0JBRTFEQSxPQUFPQTs7c0NBR1VBLE9BQWtCQSxhQUEwQkEsWUFBbUJBLEdBQWdCQSxHQUFPQSxNQUFXQSxNQUFXQTtvQkFFN0hBOztvQkFFQUEsUUFBUUEsQ0FBTUEsQUFBQ0EsT0FBT0EsQ0FBQ0E7b0JBQ3ZCQSxRQUFRQSxDQUFNQSxBQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxXQUFXQTs7b0JBRW5DQSxJQUFJQSxJQUFJQTt3QkFFSkEsUUFBUUE7d0JBQ1JBLElBQUlBLENBQU1BLEFBQUNBLENBQUNBLE9BQU9BLEtBQUtBLENBQUNBLE9BQU9BLENBQUNBOzJCQUVoQ0EsSUFBSUEsSUFBSUE7d0JBRVRBLFNBQVFBO3dCQUNSQSxRQUFRQSxDQUFNQSxBQUFDQSxDQUFDQSxLQUFJQTt3QkFDcEJBLFFBQVFBLENBQU1BLEFBQUNBLFdBQVdBLENBQUNBLEtBQUlBLENBQUNBO3dCQUNoQ0EsSUFBSUE7NEJBQ0FBOzs7d0JBRUpBLFNBQVNBLENBQU1BLEFBQUNBLFdBQVdBLElBQUlBLENBQUNBLElBQUlBLENBQUNBOzt3QkFFckNBLElBQUlBLENBQU1BLEFBQUNBLENBQUNBLE9BQU9BLENBQUNBLFlBQVdBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLE1BQUlBOzt3QkFJckRBLElBQUlBOzs7b0JBR1JBLFVBQVVBLENBQU1BLEFBQUNBLE9BQU9BO29CQUN4QkEsSUFBSUEsS0FBS0E7d0JBRUxBOzRCQUVJQSw4QkFBV0EsR0FBWEEsZUFBZ0JBOzs0QkFFaEJBLHFCQUFxQkEsa0JBQVNBOzRCQUM3Q0Esa0JBQVdBLGVBQVlBLG1CQUFnQkE7NEJBQ3hCQSxnQkFBZ0JBOzs0QkFFaEJBLElBQUlBLE1BQUtBO2dDQUNMQTs7OzRCQUVKQSxJQUFJQSxDQUFNQSxBQUFDQSxHQUFDQSxDQUFDQSxNQUFJQSxDQUFDQSxTQUFPQSx5QkFBYUEsWUFBWUE7Ozt3QkFLdERBOzRCQUVJQSw4QkFBV0EsR0FBWEEsZUFBZ0JBOzs0QkFFaEJBLG9EQUFnQkE7NEJBQ2hCQSxRQUFRQSxzREFBa0JBLHFCQUFFQSxlQUFGQTs0QkFDMUJBLFFBQVFBOzs0QkFFUkEsSUFBSUEsQ0FBQ0EsSUFBSUE7Z0NBRUxBLFNBQVNBLENBQU1BLEFBQUNBLENBQUNBLENBQUNBLElBQUlBO2dDQUN0QkEsK0NBQVNBLE9BQU9BLGFBQWFBLFlBQVlBLEdBQUdBLGVBQU9BLEdBQUdBLEdBQUdBOzs7NEJBRzdEQSxvREFBZ0JBOzs0QkFFaEJBLElBQUlBLE1BQUtBO2dDQUNMQTs7OzRCQUVKQSxJQUFJQSxDQUFNQSxBQUFDQSxHQUFDQSxDQUFDQSxNQUFJQSxDQUFDQSxTQUFPQSx5QkFBYUEsWUFBWUE7Ozs7cUNBS3hCQSxPQUF3QkE7b0JBRTFEQSxpQkFBaUJBLDRCQUFrQ0E7b0JBQ25EQSxpQkFBaUJBLCtDQUE0QkE7O29CQUU3Q0EsaUJBQWlCQSxrQkFBU0E7O29CQUUxQkEsUUFBUUEsa0JBQWVBO29CQUN2QkEsS0FBS0EsV0FBV0EsSUFBSUEsU0FBU0E7d0JBQ3pCQSxxQkFBRUEsR0FBRkEsTUFBT0EsK0NBQTRCQSw4QkFBdUJBLHdCQUFjQSxTQUFHQTs7O29CQUUvRUEsUUFBU0EsMkRBQXVCQTtvQkFDaENBLFNBQVVBLENBQU1BLEFBQUNBLENBQUNBLENBQUNBLElBQUlBO29CQUN2QkEsT0FBT0EsZ0RBQVVBLFlBQVlBLFlBQVlBLFNBQVNBLEdBQUdBOzt1Q0FHcEJBLE9BQWtCQSxZQUFtQkEsR0FBZ0JBLEdBQU9BLE1BQVdBLE1BQVdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NENBSW5IQSxJQUFRQSxDQUFNQSxBQUFDQSxPQUFPQSxDQUFDQTtnREFDdkJBLElBQVFBLENBQU1BLEFBQUNBLENBQUNBLE9BQU9BLENBQUNBLFdBQVdBOztnREFFbkNBLElBQUlBLElBQUlBOzs7Ozs7Ozs7NENBRUpBLElBQVFBO2dEQUNSQSxJQUFJQSxDQUFNQSxBQUFDQSxDQUFDQSxPQUFPQSxLQUFLQSxDQUFDQSxPQUFPQSxDQUFDQTs7Ozs7NENBRWhDQSxJQUFJQSxJQUFJQTs7Ozs7Ozs7OzRDQUVUQSxLQUFRQTtnREFDUkEsSUFBUUEsQ0FBTUEsQUFBQ0EsQ0FBQ0EsS0FBSUE7Z0RBQ3BCQSxJQUFRQSxDQUFNQSxBQUFDQSxXQUFXQSxDQUFDQSxLQUFJQSxDQUFDQTtnREFDaENBLElBQUlBOzs7Ozs7Ozs0Q0FDQUE7Ozs0Q0FFSkEsS0FBU0EsQ0FBTUEsQUFBQ0EsV0FBV0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0E7O2dEQUVyQ0EsSUFBSUEsQ0FBTUEsQUFBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsWUFBV0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBSUE7Ozs7OzRDQUlyREEsSUFBSUE7Ozs7Ozs7Ozs0Q0FHUkEsTUFBVUEsQ0FBTUEsQUFBQ0EsT0FBT0E7Z0RBQ3hCQSxJQUFJQSxLQUFLQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRDQUlEQSw4QkFBV0EsR0FBWEEsZUFBZ0JBOztnREFFaEJBLGlCQUFxQkEsa0JBQVNBO2dEQUM3Q0Esa0JBQVdBLGVBQVlBLG1CQUFnQkE7O2dEQUV2Q0Esc0JBQWFBOzs7Ozs0Q0FFRUEsSUFBSUEsTUFBS0E7b0RBQ0xBOzs7O2dEQUVKQSxJQUFJQSxDQUFNQSxBQUFDQSxHQUFDQSxDQUFDQSxNQUFJQSxDQUFDQSxTQUFPQSx5QkFBYUEsWUFBWUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NENBT2xEQSw4QkFBV0EsR0FBWEEsZUFBZ0JBOztnREFFaEJBLG9EQUFnQkE7Z0RBQ2hCQSxJQUFRQSxzREFBa0JBLHFCQUFFQSxlQUFGQTtnREFDMUJBLElBQVFBOztnREFFUkEsSUFBSUEsQ0FBQ0EsSUFBSUE7Ozs7Ozs7OzRDQUVMQSxLQUFTQSxDQUFNQSxBQUFDQSxDQUFDQSxDQUFDQSxJQUFJQTtnREFDdEJBLDBCQUFpQkEsZ0RBQVVBLE9BQU9BLFlBQVlBLEdBQUdBLGVBQU9BLEdBQUdBLEdBQUdBOzs7Ozs7Ozs7Ozs7Ozs0Q0FDL0VBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozs0Q0FHQUEsb0RBQWdCQTs7Z0RBRWhCQSxJQUFJQSxNQUFLQTtvREFDTEE7Ozs7Z0RBRUpBLElBQUlBLENBQU1BLEFBQUNBLEdBQUNBLENBQUNBLE1BQUlBLENBQUNBLFNBQU9BLHlCQUFhQSxZQUFZQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0NBcHVCMUJBLE9BQXdCQSxTQUFhQTs7b0JBRXJFQSxpQkFBaUJBLDRCQUFrQ0E7b0JBQ25EQSxpQkFBaUJBLCtDQUE0QkE7O29CQUU3Q0Esa0JBQWtCQSxLQUFJQSxvRUFBYUE7b0JBQ25DQSxpQkFBaUJBLGtCQUFTQTs7b0JBRTFCQSxRQUFRQSxrQkFBZUE7b0JBQ3ZCQSxLQUFLQSxXQUFXQSxJQUFJQSxTQUFTQTt3QkFDekJBLHFCQUFFQSxHQUFGQSxNQUFPQSwrQ0FBNEJBLDhCQUF1QkEsd0JBQWNBLFNBQUdBOzs7b0JBRS9FQSxRQUFTQSwyREFBdUJBO29CQUNoQ0EsU0FBVUEsQUFBTUEsQUFBQ0EsQUFBQ0EsQ0FBQ0EsS0FBSUE7b0JBQ3ZCQSwrQ0FBU0EsWUFBWUEsYUFBYUEsWUFBWUEsdUJBQVNBLEdBQUdBOztvQkFFMURBLE9BQU9BOztzQ0FHVUEsT0FBa0JBLGFBQTBCQSxZQUFtQkEsR0FBZ0JBLEdBQU9BLE1BQVdBLE1BQVdBO29CQUU3SEE7O29CQUVBQSxRQUFRQSxBQUFNQSxBQUFDQSxTQUFPQSxBQUFDQTtvQkFDdkJBLFFBQVFBLEFBQU1BLEFBQUNBLEFBQUNBLGVBQU9BLEFBQUNBLG9CQUFXQTs7b0JBRW5DQSxJQUFJQSxLQUFJQTt3QkFFSkEsUUFBUUE7d0JBQ1JBLElBQUlBLEFBQU1BLEFBQUNBLENBQUNBLFNBQU9BLE9BQUtBLENBQUNBLFNBQU9BLEFBQUNBOzJCQUVoQ0EsSUFBSUEsS0FBSUE7d0JBRVRBLFNBQVFBO3dCQUNSQSxRQUFRQSxBQUFNQSxBQUFDQSxBQUFDQSxhQUFJQTt3QkFDcEJBLFFBQVFBLEFBQU1BLEFBQUNBLGFBQVdBLEFBQUNBLGNBQUlBLEFBQUNBO3dCQUNoQ0EsSUFBSUE7NEJBQ0FBOzs7d0JBRUpBLFNBQVNBLEFBQU1BLEFBQUNBLGFBQVdBLE9BQUlBLENBQUNBLEtBQUlBLENBQUNBOzt3QkFFckNBLElBQUlBLEFBQU1BLEFBQUNBLENBQUNBLFNBQU9BLENBQUNBLGdCQUFXQSxDQUFDQSxNQUFJQSxBQUFDQSxlQUFNQSxDQUFDQSxNQUFJQSxDQUFDQSxvQkFBSUE7O3dCQUlyREEsSUFBSUE7OztvQkFHUkEsVUFBVUEsQUFBTUEsQUFBQ0EsUUFBT0E7b0JBQ3hCQSxJQUFJQSxLQUFLQTt3QkFFTEE7NEJBRUlBLDhCQUFXQSxHQUFYQSxlQUFnQkE7OzRCQUVoQkEscUJBQXFCQSxrQkFBU0E7NEJBQzdDQSxrQkFBV0EsZUFBWUEsbUJBQWdCQTs0QkFDeEJBLGdCQUFnQkE7OzRCQUVoQkEsSUFBSUEsU0FBS0E7Z0NBQ0xBOzs7NEJBRUpBLElBQUlBLEFBQU1BLEFBQUNBLENBQUNBLENBQUNBLE1BQUlBLENBQUNBLFNBQU9BLGlCQUFhQSxlQUFZQTs7O3dCQUt0REE7NEJBRUlBLDhCQUFXQSxHQUFYQSxlQUFnQkE7OzRCQUVoQkEsb0RBQWdCQTs0QkFDaEJBLFFBQVFBLHNEQUFrQkEscUJBQUVBLGVBQUZBOzRCQUMxQkEsUUFBUUE7OzRCQUVSQSxJQUFJQSxDQUFDQSxNQUFJQTtnQ0FFTEEsU0FBU0EsQUFBTUEsQUFBQ0EsQUFBQ0EsQ0FBQ0EsS0FBSUE7Z0NBQ3RCQSwrQ0FBU0EsT0FBT0EsYUFBYUEsWUFBWUEsR0FBR0EsZUFBT0EsR0FBR0EsR0FBR0E7Ozs0QkFHN0RBLG9EQUFnQkE7OzRCQUVoQkEsSUFBSUEsU0FBS0E7Z0NBQ0xBOzs7NEJBRUpBLElBQUlBLEFBQU1BLEFBQUNBLENBQUNBLENBQUNBLE1BQUlBLENBQUNBLFNBQU9BLGlCQUFhQSxlQUFZQTs7OztxQ0FLeEJBLE9BQXdCQTtvQkFFMURBLGlCQUFpQkEsNEJBQWtDQTtvQkFDbkRBLGlCQUFpQkEsK0NBQTRCQTs7b0JBRTdDQSxpQkFBaUJBLGtCQUFTQTs7b0JBRTFCQSxRQUFRQSxrQkFBZUE7b0JBQ3ZCQSxLQUFLQSxXQUFXQSxJQUFJQSxTQUFTQTt3QkFDekJBLHFCQUFFQSxHQUFGQSxNQUFPQSwrQ0FBNEJBLDhCQUF1QkEsd0JBQWNBLFNBQUdBOzs7b0JBRS9FQSxRQUFTQSwyREFBdUJBO29CQUNoQ0EsU0FBVUEsQUFBTUEsQUFBQ0EsQUFBQ0EsQ0FBQ0EsS0FBSUE7b0JBQ3ZCQSxPQUFPQSxnREFBVUEsWUFBWUEsWUFBWUEsdUJBQVNBLEdBQUdBOzt1Q0FHcEJBLE9BQWtCQSxZQUFtQkEsR0FBZ0JBLEdBQU9BLE1BQVdBLE1BQVdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NENBSW5IQSxJQUFRQSxBQUFNQSxBQUFDQSxTQUFPQSxBQUFDQTtnREFDdkJBLElBQVFBLEFBQU1BLEFBQUNBLEFBQUNBLGVBQU9BLEFBQUNBLG9CQUFXQTs7Z0RBRW5DQSxJQUFJQSxLQUFJQTs7Ozs7Ozs7OzRDQUVKQSxJQUFRQTtnREFDUkEsSUFBSUEsQUFBTUEsQUFBQ0EsQ0FBQ0EsU0FBT0EsT0FBS0EsQ0FBQ0EsU0FBT0EsQUFBQ0E7Ozs7OzRDQUVoQ0EsSUFBSUEsS0FBSUE7Ozs7Ozs7Ozs0Q0FFVEEsS0FBUUE7Z0RBQ1JBLElBQVFBLEFBQU1BLEFBQUNBLEFBQUNBLGFBQUlBO2dEQUNwQkEsSUFBUUEsQUFBTUEsQUFBQ0EsYUFBV0EsQUFBQ0EsY0FBSUEsQUFBQ0E7Z0RBQ2hDQSxJQUFJQTs7Ozs7Ozs7NENBQ0FBOzs7NENBRUpBLEtBQVNBLEFBQU1BLEFBQUNBLGFBQVdBLE9BQUlBLENBQUNBLEtBQUlBLENBQUNBOztnREFFckNBLElBQUlBLEFBQU1BLEFBQUNBLENBQUNBLFNBQU9BLENBQUNBLGdCQUFXQSxDQUFDQSxNQUFJQSxBQUFDQSxlQUFNQSxDQUFDQSxNQUFJQSxDQUFDQSxvQkFBSUE7Ozs7OzRDQUlyREEsSUFBSUE7Ozs7Ozs7Ozs0Q0FHUkEsTUFBVUEsQUFBTUEsQUFBQ0EsUUFBT0E7Z0RBQ3hCQSxJQUFJQSxLQUFLQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRDQUlEQSw4QkFBV0EsR0FBWEEsZUFBZ0JBOztnREFFaEJBLGlCQUFxQkEsa0JBQVNBO2dEQUM3Q0Esa0JBQVdBLGVBQVlBLG1CQUFnQkE7O2dEQUV2Q0Esc0JBQWFBOzs7Ozs0Q0FFRUEsSUFBSUEsU0FBS0E7b0RBQ0xBOzs7O2dEQUVKQSxJQUFJQSxBQUFNQSxBQUFDQSxDQUFDQSxDQUFDQSxNQUFJQSxDQUFDQSxTQUFPQSxpQkFBYUEsZUFBWUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NENBT2xEQSw4QkFBV0EsR0FBWEEsZUFBZ0JBOztnREFFaEJBLG9EQUFnQkE7Z0RBQ2hCQSxJQUFRQSxzREFBa0JBLHFCQUFFQSxlQUFGQTtnREFDMUJBLElBQVFBOztnREFFUkEsSUFBSUEsQ0FBQ0EsTUFBSUE7Ozs7Ozs7OzRDQUVMQSxLQUFTQSxBQUFNQSxBQUFDQSxBQUFDQSxDQUFDQSxLQUFJQTtnREFDdEJBLDBCQUFpQkEsZ0RBQVVBLE9BQU9BLFlBQVlBLEdBQUdBLGVBQU9BLEdBQUdBLEdBQUdBOzs7Ozs7Ozs7Ozs7Ozs0Q0FDL0VBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozs0Q0FHQUEsb0RBQWdCQTs7Z0RBRWhCQSxJQUFJQSxTQUFLQTtvREFDTEE7Ozs7Z0RBRUpBLElBQUlBLEFBQU1BLEFBQUNBLENBQUNBLENBQUNBLE1BQUlBLENBQUNBLFNBQU9BLGlCQUFhQSxlQUFZQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0NBWTFCQSxPQUF3QkEsU0FBYUE7O29CQUVyRUEsaUJBQWlCQSw0QkFBa0NBO29CQUNuREEsaUJBQWlCQSwrQ0FBNEJBOztvQkFFN0NBLGtCQUFrQkEsS0FBSUEscUVBQWFBO29CQUNuQ0EsaUJBQWlCQSxrQkFBU0E7O29CQUUxQkEsUUFBUUEsa0JBQWVBO29CQUN2QkEsS0FBS0EsV0FBV0EsSUFBSUEsU0FBU0E7d0JBQ3pCQSxxQkFBRUEsR0FBRkEsTUFBT0EsK0NBQTRCQSw4QkFBdUJBLHdCQUFjQSxTQUFHQTs7O29CQUUvRUEsUUFBU0EsMkRBQXVCQTtvQkFDaENBLFNBQVVBLEFBQU1BLEFBQUNBLENBQUNBLENBQUNBLE1BQUlBO29CQUN2QkEsK0NBQVNBLFlBQVlBLGFBQWFBLFlBQVlBLFNBQVNBLEdBQUdBOztvQkFFMURBLE9BQU9BOztzQ0FHVUEsT0FBa0JBLGFBQTBCQSxZQUFtQkEsR0FBZ0JBLEdBQU9BLE1BQVdBLE1BQVdBO29CQUU3SEE7O29CQUVBQSxRQUFRQSxBQUFNQSxBQUFDQSxTQUFPQSxDQUFDQTtvQkFDdkJBLFFBQVFBLEFBQU1BLEFBQUNBLEtBQUNBLE9BQU9BLENBQUNBLG1CQUFXQTs7b0JBRW5DQSxJQUFJQSxJQUFJQTt3QkFFSkEsUUFBUUE7d0JBQ1JBLElBQUlBLEFBQU1BLEFBQUNBLEdBQUNBLFNBQU9BLGFBQUtBLENBQUNBLFNBQU9BLENBQUNBOzJCQUVoQ0EsSUFBSUEsSUFBSUE7d0JBRVRBLFNBQVFBO3dCQUNSQSxRQUFRQSxBQUFNQSxBQUFDQSxHQUFDQSxLQUFJQTt3QkFDcEJBLFFBQVFBLEFBQU1BLEFBQUNBLGVBQVdBLENBQUNBLGFBQUlBLENBQUNBO3dCQUNoQ0EsSUFBSUE7NEJBQ0FBOzs7d0JBRUpBLFNBQVNBLEFBQU1BLEFBQUNBLGVBQVdBLFlBQUlBLENBQUNBLE1BQUlBLENBQUNBOzt3QkFFckNBLElBQUlBLEFBQU1BLEFBQUNBLEtBQUNBLFNBQU9BLENBQUNBLHFCQUFXQSxDQUFDQSxNQUFJQSxDQUFDQSxzQkFBTUEsQ0FBQ0EsTUFBSUEsQ0FBQ0EsTUFBSUE7O3dCQUlyREEsSUFBSUE7OztvQkFHUkEsVUFBVUEsQUFBTUEsQUFBQ0EsU0FBT0E7b0JBQ3hCQSxJQUFJQSxLQUFLQTt3QkFFTEE7NEJBRUlBLDhCQUFXQSxHQUFYQSxlQUFnQkE7OzRCQUVoQkEscUJBQXFCQSxrQkFBU0E7NEJBQzdDQSxrQkFBV0EsZUFBWUEsbUJBQWdCQTs0QkFDeEJBLGdCQUFnQkE7OzRCQUVoQkEsSUFBSUEsTUFBS0E7Z0NBQ0xBOzs7NEJBRUpBLElBQUlBLEFBQU1BLEFBQUNBLEdBQUNBLEdBQUNBLE1BQUlBLENBQUNBLFNBQU9BLDZCQUFhQSxvQkFBWUE7Ozt3QkFLdERBOzRCQUVJQSw4QkFBV0EsR0FBWEEsZUFBZ0JBOzs0QkFFaEJBLG9EQUFnQkE7NEJBQ2hCQSxRQUFRQSxzREFBa0JBLHFCQUFFQSxlQUFGQTs0QkFDMUJBLFFBQVFBOzs0QkFFUkEsSUFBSUEsQ0FBQ0EsTUFBSUE7Z0NBRUxBLFNBQVNBLEFBQU1BLEFBQUNBLENBQUNBLENBQUNBLE1BQUlBO2dDQUN0QkEsK0NBQVNBLE9BQU9BLGFBQWFBLFlBQVlBLEdBQUdBLGVBQU9BLEdBQUdBLEdBQUdBOzs7NEJBRzdEQSxvREFBZ0JBOzs0QkFFaEJBLElBQUlBLE1BQUtBO2dDQUNMQTs7OzRCQUVKQSxJQUFJQSxBQUFNQSxBQUFDQSxHQUFDQSxHQUFDQSxNQUFJQSxDQUFDQSxTQUFPQSw2QkFBYUEsb0JBQVlBOzs7O3FDQUt4QkEsT0FBd0JBO29CQUUxREEsaUJBQWlCQSw0QkFBa0NBO29CQUNuREEsaUJBQWlCQSwrQ0FBNEJBOztvQkFFN0NBLGlCQUFpQkEsa0JBQVNBOztvQkFFMUJBLFFBQVFBLGtCQUFlQTtvQkFDdkJBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBO3dCQUN6QkEscUJBQUVBLEdBQUZBLE1BQU9BLCtDQUE0QkEsOEJBQXVCQSx3QkFBY0EsU0FBR0E7OztvQkFFL0VBLFFBQVNBLDJEQUF1QkE7b0JBQ2hDQSxTQUFVQSxBQUFNQSxBQUFDQSxDQUFDQSxDQUFDQSxNQUFJQTtvQkFDdkJBLE9BQU9BLGdEQUFVQSxZQUFZQSxZQUFZQSxTQUFTQSxHQUFHQTs7dUNBR3BCQSxPQUFrQkEsWUFBbUJBLEdBQWdCQSxHQUFPQSxNQUFXQSxNQUFXQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRDQUluSEEsSUFBUUEsQUFBTUEsQUFBQ0EsU0FBT0EsQ0FBQ0E7Z0RBQ3ZCQSxJQUFRQSxBQUFNQSxBQUFDQSxLQUFDQSxPQUFPQSxDQUFDQSxtQkFBV0E7O2dEQUVuQ0EsSUFBSUEsSUFBSUE7Ozs7Ozs7Ozs0Q0FFSkEsSUFBUUE7Z0RBQ1JBLElBQUlBLEFBQU1BLEFBQUNBLEdBQUNBLFNBQU9BLGFBQUtBLENBQUNBLFNBQU9BLENBQUNBOzs7Ozs0Q0FFaENBLElBQUlBLElBQUlBOzs7Ozs7Ozs7NENBRVRBLEtBQVFBO2dEQUNSQSxJQUFRQSxBQUFNQSxBQUFDQSxHQUFDQSxLQUFJQTtnREFDcEJBLElBQVFBLEFBQU1BLEFBQUNBLGVBQVdBLENBQUNBLGFBQUlBLENBQUNBO2dEQUNoQ0EsSUFBSUE7Ozs7Ozs7OzRDQUNBQTs7OzRDQUVKQSxLQUFTQSxBQUFNQSxBQUFDQSxlQUFXQSxZQUFJQSxDQUFDQSxNQUFJQSxDQUFDQTs7Z0RBRXJDQSxJQUFJQSxBQUFNQSxBQUFDQSxLQUFDQSxTQUFPQSxDQUFDQSxxQkFBV0EsQ0FBQ0EsTUFBSUEsQ0FBQ0Esc0JBQU1BLENBQUNBLE1BQUlBLENBQUNBLE1BQUlBOzs7Ozs0Q0FJckRBLElBQUlBOzs7Ozs7Ozs7NENBR1JBLE1BQVVBLEFBQU1BLEFBQUNBLFNBQU9BO2dEQUN4QkEsSUFBSUEsS0FBS0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FJREEsOEJBQVdBLEdBQVhBLGVBQWdCQTs7Z0RBRWhCQSxpQkFBcUJBLGtCQUFTQTtnREFDN0NBLGtCQUFXQSxlQUFZQSxtQkFBZ0JBOztnREFFdkNBLHNCQUFhQTs7Ozs7NENBRUVBLElBQUlBLE1BQUtBO29EQUNMQTs7OztnREFFSkEsSUFBSUEsQUFBTUEsQUFBQ0EsR0FBQ0EsR0FBQ0EsTUFBSUEsQ0FBQ0EsU0FBT0EsNkJBQWFBLG9CQUFZQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FPbERBLDhCQUFXQSxHQUFYQSxlQUFnQkE7O2dEQUVoQkEsb0RBQWdCQTtnREFDaEJBLElBQVFBLHNEQUFrQkEscUJBQUVBLGVBQUZBO2dEQUMxQkEsSUFBUUE7O2dEQUVSQSxJQUFJQSxDQUFDQSxNQUFJQTs7Ozs7Ozs7NENBRUxBLEtBQVNBLEFBQU1BLEFBQUNBLENBQUNBLENBQUNBLE1BQUlBO2dEQUN0QkEsMEJBQWlCQSxnREFBVUEsT0FBT0EsWUFBWUEsR0FBR0EsZUFBT0EsR0FBR0EsR0FBR0E7Ozs7Ozs7Ozs7Ozs7OzRDQUMvRUEsc0JBQWFBOzs7Ozs7Ozs7Ozs7OzRDQUdBQSxvREFBZ0JBOztnREFFaEJBLElBQUlBLE1BQUtBO29EQUNMQTs7OztnREFFSkEsSUFBSUEsQUFBTUEsQUFBQ0EsR0FBQ0EsR0FBQ0EsTUFBSUEsQ0FBQ0EsU0FBT0EsNkJBQWFBLG9CQUFZQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0NBeGlCekJBLE9BQXdCQSxTQUFhQTs7b0JBRXRFQSxpQkFBaUJBLDRCQUFrQ0E7b0JBQ25EQSxpQkFBaUJBLGdEQUE2QkE7O29CQUU5Q0Esa0JBQWtCQSxLQUFJQSxxRUFBY0E7b0JBQ3BDQSxpQkFBaUJBLGtCQUFVQTs7b0JBRTNCQSxRQUFRQSxrQkFBZ0JBO29CQUN4QkEsS0FBS0EsV0FBV0EsSUFBSUEsU0FBU0E7d0JBQ3pCQSxxQkFBRUEsR0FBRkEsTUFBT0EsZ0RBQTZCQSw4QkFBdUJBLHdCQUFjQSxTQUFHQTs7O29CQUVoRkEsUUFBVUEsNERBQXVCQTtvQkFDakNBLFNBQVdBLEFBQU9BLEFBQUNBLEFBQUNBLENBQUNBLEtBQUlBO29CQUN6QkEsZ0RBQVNBLFlBQVlBLGFBQWFBLFlBQVlBLHdCQUFTQSxHQUFHQTs7b0JBRTFEQSxPQUFPQTs7c0NBR1VBLE9BQW1CQSxhQUEyQkEsWUFBb0JBLEdBQWlCQSxHQUFPQSxNQUFZQSxNQUFZQTtvQkFFbklBOztvQkFFQUEsUUFBUUEsQUFBT0EsQUFBQ0EsU0FBT0EsQUFBQ0E7b0JBQ3hCQSxRQUFRQSxBQUFPQSxBQUFDQSxBQUFDQSxlQUFPQSxBQUFDQSxvQkFBV0E7O29CQUVwQ0EsSUFBSUEsS0FBSUE7d0JBRUpBLFFBQVFBO3dCQUNSQSxJQUFJQSxBQUFPQSxBQUFDQSxDQUFDQSxTQUFPQSxPQUFLQSxDQUFDQSxTQUFPQSxBQUFDQTsyQkFFakNBLElBQUlBLEtBQUlBO3dCQUVUQSxTQUFRQTt3QkFDUkEsUUFBUUEsQUFBT0EsQUFBQ0EsQUFBQ0EsYUFBSUE7d0JBQ3JCQSxRQUFRQSxBQUFPQSxBQUFDQSxhQUFXQSxBQUFDQSxjQUFJQSxBQUFDQTt3QkFDakNBLElBQUlBOzRCQUNBQTs7O3dCQUVKQSxTQUFTQSxBQUFPQSxBQUFDQSxhQUFXQSxPQUFJQSxDQUFDQSxLQUFJQSxDQUFDQTs7d0JBRXRDQSxJQUFJQSxBQUFPQSxBQUFDQSxDQUFDQSxTQUFPQSxDQUFDQSxpQkFBV0EsQ0FBQ0EsTUFBSUEsQUFBQ0EsZUFBTUEsQ0FBQ0EsTUFBSUEsQ0FBQ0EscUJBQUlBOzt3QkFJdERBLElBQUlBOzs7b0JBR1JBLFVBQVVBLEFBQU9BLEFBQUNBLFFBQU9BO29CQUN6QkEsSUFBSUEsS0FBS0E7d0JBRUxBOzRCQUVJQSw4QkFBV0EsR0FBWEEsZUFBZ0JBOzs0QkFFaEJBLHFCQUFxQkEsa0JBQVVBOzRCQUM5Q0Esa0JBQVdBLGVBQVlBLG1CQUFnQkE7NEJBQ3hCQSxnQkFBZ0JBOzs0QkFFaEJBLElBQUlBLFNBQUtBO2dDQUNMQTs7OzRCQUVKQSxJQUFJQSxBQUFPQSxBQUFDQSxDQUFDQSxDQUFDQSxNQUFJQSxDQUFDQSxTQUFPQSxpQkFBYUEsZUFBWUE7Ozt3QkFLdkRBOzRCQUVJQSw4QkFBV0EsR0FBWEEsZUFBZ0JBOzs0QkFFaEJBLHFEQUFnQkE7NEJBQ2hCQSxRQUFRQSx1REFBa0JBLHFCQUFFQSxlQUFGQTs0QkFDMUJBLFFBQVFBOzs0QkFFUkEsSUFBSUEsQ0FBQ0EsTUFBSUE7Z0NBRUxBLFNBQVNBLEFBQU9BLEFBQUNBLEFBQUNBLENBQUNBLEtBQUlBO2dDQUN2QkEsZ0RBQVNBLE9BQU9BLGFBQWFBLFlBQVlBLEdBQUdBLGVBQU9BLEdBQUdBLEdBQUdBOzs7NEJBRzdEQSxxREFBZ0JBOzs0QkFFaEJBLElBQUlBLFNBQUtBO2dDQUNMQTs7OzRCQUVKQSxJQUFJQSxBQUFPQSxBQUFDQSxDQUFDQSxDQUFDQSxNQUFJQSxDQUFDQSxTQUFPQSxpQkFBYUEsZUFBWUE7Ozs7cUNBS3hCQSxPQUF3QkE7b0JBRTNEQSxpQkFBaUJBLDRCQUFrQ0E7b0JBQ25EQSxpQkFBaUJBLGdEQUE2QkE7O29CQUU5Q0EsaUJBQWlCQSxrQkFBVUE7O29CQUUzQkEsUUFBUUEsa0JBQWdCQTtvQkFDeEJBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBO3dCQUN6QkEscUJBQUVBLEdBQUZBLE1BQU9BLGdEQUE2QkEsOEJBQXVCQSx3QkFBY0EsU0FBR0E7OztvQkFFaEZBLFFBQVVBLDREQUF1QkE7b0JBQ2pDQSxTQUFXQSxBQUFPQSxBQUFDQSxBQUFDQSxDQUFDQSxLQUFJQTtvQkFDekJBLE9BQU9BLGlEQUFVQSxZQUFZQSxZQUFZQSx3QkFBU0EsR0FBR0E7O3VDQUduQkEsT0FBbUJBLFlBQW9CQSxHQUFpQkEsR0FBT0EsTUFBWUEsTUFBWUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FJekhBLElBQVFBLEFBQU9BLEFBQUNBLFNBQU9BLEFBQUNBO2dEQUN4QkEsSUFBUUEsQUFBT0EsQUFBQ0EsQUFBQ0EsZUFBT0EsQUFBQ0Esb0JBQVdBOztnREFFcENBLElBQUlBLEtBQUlBOzs7Ozs7Ozs7NENBRUpBLElBQVFBO2dEQUNSQSxJQUFJQSxBQUFPQSxBQUFDQSxDQUFDQSxTQUFPQSxPQUFLQSxDQUFDQSxTQUFPQSxBQUFDQTs7Ozs7NENBRWpDQSxJQUFJQSxLQUFJQTs7Ozs7Ozs7OzRDQUVUQSxLQUFRQTtnREFDUkEsSUFBUUEsQUFBT0EsQUFBQ0EsQUFBQ0EsYUFBSUE7Z0RBQ3JCQSxJQUFRQSxBQUFPQSxBQUFDQSxhQUFXQSxBQUFDQSxjQUFJQSxBQUFDQTtnREFDakNBLElBQUlBOzs7Ozs7Ozs0Q0FDQUE7Ozs0Q0FFSkEsS0FBU0EsQUFBT0EsQUFBQ0EsYUFBV0EsT0FBSUEsQ0FBQ0EsS0FBSUEsQ0FBQ0E7O2dEQUV0Q0EsSUFBSUEsQUFBT0EsQUFBQ0EsQ0FBQ0EsU0FBT0EsQ0FBQ0EsaUJBQVdBLENBQUNBLE1BQUlBLEFBQUNBLGVBQU1BLENBQUNBLE1BQUlBLENBQUNBLHFCQUFJQTs7Ozs7NENBSXREQSxJQUFJQTs7Ozs7Ozs7OzRDQUdSQSxNQUFVQSxBQUFPQSxBQUFDQSxRQUFPQTtnREFDekJBLElBQUlBLEtBQUtBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NENBSURBLDhCQUFXQSxHQUFYQSxlQUFnQkE7O2dEQUVoQkEsaUJBQXFCQSxrQkFBVUE7Z0RBQzlDQSxrQkFBV0EsZUFBWUEsbUJBQWdCQTs7Z0RBRXZDQSxzQkFBYUE7Ozs7OzRDQUVFQSxJQUFJQSxTQUFLQTtvREFDTEE7Ozs7Z0RBRUpBLElBQUlBLEFBQU9BLEFBQUNBLENBQUNBLENBQUNBLE1BQUlBLENBQUNBLFNBQU9BLGlCQUFhQSxlQUFZQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FPbkRBLDhCQUFXQSxHQUFYQSxlQUFnQkE7O2dEQUVoQkEscURBQWdCQTtnREFDaEJBLElBQVFBLHVEQUFrQkEscUJBQUVBLGVBQUZBO2dEQUMxQkEsSUFBUUE7O2dEQUVSQSxJQUFJQSxDQUFDQSxNQUFJQTs7Ozs7Ozs7NENBRUxBLEtBQVNBLEFBQU9BLEFBQUNBLEFBQUNBLENBQUNBLEtBQUlBO2dEQUN2QkEsMEJBQWlCQSxpREFBVUEsT0FBT0EsWUFBWUEsR0FBR0EsZUFBT0EsR0FBR0EsR0FBR0E7Ozs7Ozs7Ozs7Ozs7OzRDQUMvRUEsc0JBQWFBOzs7Ozs7Ozs7Ozs7OzRDQUdBQSxxREFBZ0JBOztnREFFaEJBLElBQUlBLFNBQUtBO29EQUNMQTs7OztnREFFSkEsSUFBSUEsQUFBT0EsQUFBQ0EsQ0FBQ0EsQ0FBQ0EsTUFBSUEsQ0FBQ0EsU0FBT0EsaUJBQWFBLGVBQVlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQ0FvWXpCQSxPQUF3QkEsU0FBYUE7O29CQUV2RUEsaUJBQWlCQSw0QkFBa0NBO29CQUNuREEsaUJBQWlCQSxpREFBOEJBOztvQkFFL0NBLGtCQUFrQkEsS0FBSUEscUVBQWVBO29CQUNyQ0EsaUJBQWlCQSxrQkFBV0E7O29CQUU1QkEsUUFBUUEsa0JBQWlCQTtvQkFDekJBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBO3dCQUN6QkEscUJBQUVBLEdBQUZBLE1BQU9BLGlEQUE4QkEsOEJBQXVCQSx3QkFBY0EsU0FBR0E7OztvQkFFakZBLFFBQVdBLDZEQUF1QkE7b0JBQ2xDQSxTQUFZQSxDQUFRQSxBQUFDQSxDQUFDQSxDQUFDQSxJQUFJQTtvQkFDM0JBLGlEQUFTQSxZQUFZQSxhQUFhQSxZQUFZQSxTQUFTQSxHQUFHQTs7b0JBRTFEQSxPQUFPQTs7c0NBR1VBLE9BQW9CQSxhQUE0QkEsWUFBcUJBLEdBQWtCQSxHQUFPQSxNQUFhQSxNQUFhQTtvQkFFeklBOztvQkFFQUEsUUFBUUEsQ0FBUUEsQUFBQ0EsT0FBT0EsQ0FBQ0E7b0JBQ3pCQSxRQUFRQSxDQUFRQSxBQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxXQUFXQTs7b0JBRXJDQSxJQUFJQSxJQUFJQTt3QkFFSkEsUUFBUUE7d0JBQ1JBLElBQUlBLENBQVFBLEFBQUNBLENBQUNBLE9BQU9BLEtBQUtBLENBQUNBLE9BQU9BLENBQUNBOzJCQUVsQ0EsSUFBSUEsSUFBSUE7d0JBRVRBLFNBQVFBO3dCQUNSQSxRQUFRQSxDQUFRQSxBQUFDQSxDQUFDQSxLQUFJQTt3QkFDdEJBLFFBQVFBLENBQVFBLEFBQUNBLFdBQVdBLENBQUNBLEtBQUlBLENBQUNBO3dCQUNsQ0EsSUFBSUE7NEJBQ0FBOzs7d0JBRUpBLFNBQVNBLENBQVFBLEFBQUNBLFdBQVdBLElBQUlBLENBQUNBLElBQUlBLENBQUNBOzt3QkFFdkNBLElBQUlBLENBQVFBLEFBQUNBLENBQUNBLE9BQU9BLENBQUNBLFlBQVdBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLE1BQUlBOzt3QkFJdkRBLElBQUlBOzs7b0JBR1JBLFVBQVVBLENBQVFBLEFBQUNBLE9BQU9BO29CQUMxQkEsSUFBSUEsS0FBS0E7d0JBRUxBOzRCQUVJQSw4QkFBV0EsR0FBWEEsZUFBZ0JBOzs0QkFFaEJBLHFCQUFxQkEsa0JBQVdBOzRCQUMvQ0Esa0JBQVdBLGVBQVlBLG1CQUFnQkE7NEJBQ3hCQSxnQkFBZ0JBOzs0QkFFaEJBLElBQUlBLE1BQUtBO2dDQUNMQTs7OzRCQUVKQSxJQUFJQSxDQUFRQSxBQUFDQSxHQUFDQSxDQUFDQSxNQUFJQSxDQUFDQSxTQUFPQSx5QkFBYUEsWUFBWUE7Ozt3QkFLeERBOzRCQUVJQSw4QkFBV0EsR0FBWEEsZUFBZ0JBOzs0QkFFaEJBLHNEQUFnQkE7NEJBQ2hCQSxRQUFRQSx3REFBa0JBLHFCQUFFQSxlQUFGQTs0QkFDMUJBLFFBQVFBOzs0QkFFUkEsSUFBSUEsQ0FBQ0EsSUFBSUE7Z0NBRUxBLFNBQVNBLENBQVFBLEFBQUNBLENBQUNBLENBQUNBLElBQUlBO2dDQUN4QkEsaURBQVNBLE9BQU9BLGFBQWFBLFlBQVlBLEdBQUdBLGVBQU9BLEdBQUdBLEdBQUdBOzs7NEJBRzdEQSxzREFBZ0JBOzs0QkFFaEJBLElBQUlBLE1BQUtBO2dDQUNMQTs7OzRCQUVKQSxJQUFJQSxDQUFRQSxBQUFDQSxHQUFDQSxDQUFDQSxNQUFJQSxDQUFDQSxTQUFPQSx5QkFBYUEsWUFBWUE7Ozs7cUNBS3hCQSxPQUF3QkE7b0JBRTVEQSxpQkFBaUJBLDRCQUFrQ0E7b0JBQ25EQSxpQkFBaUJBLGlEQUE4QkE7O29CQUUvQ0EsaUJBQWlCQSxrQkFBV0E7O29CQUU1QkEsUUFBUUEsa0JBQWlCQTtvQkFDekJBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBO3dCQUN6QkEscUJBQUVBLEdBQUZBLE1BQU9BLGlEQUE4QkEsOEJBQXVCQSx3QkFBY0EsU0FBR0E7OztvQkFFakZBLFFBQVdBLDZEQUF1QkE7b0JBQ2xDQSxTQUFZQSxDQUFRQSxBQUFDQSxDQUFDQSxDQUFDQSxJQUFJQTtvQkFDM0JBLE9BQU9BLGtEQUFVQSxZQUFZQSxZQUFZQSxTQUFTQSxHQUFHQTs7dUNBR2xCQSxPQUFvQkEsWUFBcUJBLEdBQWtCQSxHQUFPQSxNQUFhQSxNQUFhQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRDQUkvSEEsSUFBUUEsQ0FBUUEsQUFBQ0EsT0FBT0EsQ0FBQ0E7Z0RBQ3pCQSxJQUFRQSxDQUFRQSxBQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxXQUFXQTs7Z0RBRXJDQSxJQUFJQSxJQUFJQTs7Ozs7Ozs7OzRDQUVKQSxJQUFRQTtnREFDUkEsSUFBSUEsQ0FBUUEsQUFBQ0EsQ0FBQ0EsT0FBT0EsS0FBS0EsQ0FBQ0EsT0FBT0EsQ0FBQ0E7Ozs7OzRDQUVsQ0EsSUFBSUEsSUFBSUE7Ozs7Ozs7Ozs0Q0FFVEEsS0FBUUE7Z0RBQ1JBLElBQVFBLENBQVFBLEFBQUNBLENBQUNBLEtBQUlBO2dEQUN0QkEsSUFBUUEsQ0FBUUEsQUFBQ0EsV0FBV0EsQ0FBQ0EsS0FBSUEsQ0FBQ0E7Z0RBQ2xDQSxJQUFJQTs7Ozs7Ozs7NENBQ0FBOzs7NENBRUpBLEtBQVNBLENBQVFBLEFBQUNBLFdBQVdBLElBQUlBLENBQUNBLElBQUlBLENBQUNBOztnREFFdkNBLElBQUlBLENBQVFBLEFBQUNBLENBQUNBLE9BQU9BLENBQUNBLFlBQVdBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLE1BQUlBOzs7Ozs0Q0FJdkRBLElBQUlBOzs7Ozs7Ozs7NENBR1JBLE1BQVVBLENBQVFBLEFBQUNBLE9BQU9BO2dEQUMxQkEsSUFBSUEsS0FBS0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FJREEsOEJBQVdBLEdBQVhBLGVBQWdCQTs7Z0RBRWhCQSxpQkFBcUJBLGtCQUFXQTtnREFDL0NBLGtCQUFXQSxlQUFZQSxtQkFBZ0JBOztnREFFdkNBLHNCQUFhQTs7Ozs7NENBRUVBLElBQUlBLE1BQUtBO29EQUNMQTs7OztnREFFSkEsSUFBSUEsQ0FBUUEsQUFBQ0EsR0FBQ0EsQ0FBQ0EsTUFBSUEsQ0FBQ0EsU0FBT0EseUJBQWFBLFlBQVlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRDQU9wREEsOEJBQVdBLEdBQVhBLGVBQWdCQTs7Z0RBRWhCQSxzREFBZ0JBO2dEQUNoQkEsSUFBUUEsd0RBQWtCQSxxQkFBRUEsZUFBRkE7Z0RBQzFCQSxJQUFRQTs7Z0RBRVJBLElBQUlBLENBQUNBLElBQUlBOzs7Ozs7Ozs0Q0FFTEEsS0FBU0EsQ0FBUUEsQUFBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUE7Z0RBQ3hCQSwwQkFBaUJBLGtEQUFVQSxPQUFPQSxZQUFZQSxHQUFHQSxlQUFPQSxHQUFHQSxHQUFHQTs7Ozs7Ozs7Ozs7Ozs7NENBQy9FQSxzQkFBYUE7Ozs7Ozs7Ozs7Ozs7NENBR0FBLHNEQUFnQkE7O2dEQUVoQkEsSUFBSUEsTUFBS0E7b0RBQ0xBOzs7O2dEQUVKQSxJQUFJQSxDQUFRQSxBQUFDQSxHQUFDQSxDQUFDQSxNQUFJQSxDQUFDQSxTQUFPQSx5QkFBYUEsWUFBWUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0NDdHVCbkNBOztvQkFFekJBO29CQUNBQSwwQkFBb0JBOzs7OzRCQUNoQkEsU0FBS0Esc0JBQU9BOzs7Ozs7O29CQUVoQkEsT0FBT0E7O3FDQUdvQkE7O29CQUUzQkE7b0JBQ0FBLDBCQUFvQkE7Ozs7NEJBQ2hCQSxTQUFLQSxFQUFRQSxBQUFDQSxLQUFLQTs7Ozs7OztvQkFFdkJBLE9BQU9BOzttQ0FHZ0JBOztvQkFFdkJBO29CQUNBQSwwQkFBb0JBOzs7OzRCQUNoQkEsU0FBS0EsRUFBTUEsQUFBQ0EsS0FBS0E7Ozs7Ozs7b0JBRXJCQSxPQUFPQTs7NENBR2tCQTtvQkFFekJBLFNBQUtBO29CQUNMQSxTQUFLQTtvQkFDTEEsU0FBS0E7b0JBQ0xBLFNBQUtBO29CQUNMQSxTQUFLQTtvQkFDTEEsU0FBS0E7O29CQUVMQSxPQUFPQTs7NENBR3lCQTtvQkFFaENBLFNBQUtBLEVBQVFBLEFBQUNBO29CQUNkQSxTQUFLQSxFQUFRQSxBQUFDQTtvQkFDZEEsU0FBS0EsRUFBUUEsQUFBQ0E7b0JBQ2RBLFNBQUtBLEVBQVFBLEFBQUNBOztvQkFFZEEsT0FBT0E7OzBDQUV1QkE7b0JBRTlCQSxTQUFLQSxFQUFNQSxBQUFDQTtvQkFDWkEsU0FBS0EsRUFBTUEsQUFBQ0E7b0JBQ1pBLFNBQUtBLEVBQU1BLEFBQUNBOztvQkFFWkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzttQ0FpR2VBO29CQUV0QkEsT0FBT0EsbUVBQWVBLHVCQUFDQSxxQkFBUUEsT0FBSUEsaUVBQTVCQTs7K0NBRzJCQTtvQkFFbENBLE9BQU9BLG1FQUF5QkEscUJBQVFBLENBQUNBLE1BQUlBLEFBQUNBLGVBQUtBLCtEQUE1Q0E7OzBEQUdzQ0E7b0JBRTdDQSxRQUFRQSxRQUFJQSxBQUFDQTtvQkFDYkEsY0FBS0E7b0JBQ0xBLE9BQU9BLG1FQUFlQSx1QkFBQ0EscUJBQVFBLE9BQUlBLGlFQUE1QkE7OzJDQUd1QkE7b0JBRTlCQTtvQkFDQUEsT0FBT0E7d0JBRUhBO3dCQUNBQSxVQUFLQTs7b0JBRVRBLE9BQU9BOztnREFHNEJBO29CQUVuQ0EsSUFBSUEsTUFBSUEsQ0FBQ0EsQ0FBQ0E7b0JBQ1ZBLElBQUlBLENBQUNBLGdEQUEyQkEsQ0FBQ0EsQ0FBQ0E7b0JBQ2xDQSxJQUFJQSxDQUFDQSxNQUFJQSxDQUFDQTtvQkFDVkEsSUFBSUEsQ0FBQ0E7O29CQUVMQSxPQUFPQSxvQkFBS0E7O2lDQUdjQTs7b0JBRTFCQSxhQUFhQSxLQUFJQTtvQkFDakJBLE9BQU9BO3dCQUNIQSxXQUFXQSxnRUFBbUNBOzs7b0JBRWxEQSxPQUFPQTs7MENBRXVCQTtvQkFFOUJBLFNBQUtBO29CQUNMQSxTQUFLQTtvQkFDTEEsU0FBS0E7b0JBQ0xBLFNBQUtBO29CQUNMQSxTQUFLQTs7b0JBRUxBLE9BQU9BOzttQ0FFZ0JBOztvQkFFdkJBO29CQUNBQSwwQkFBb0JBOzs7OzRCQUNoQkEsU0FBS0EscUJBQU1BOzs7Ozs7O29CQUVmQSxPQUFPQTs7OEJBR1dBLFlBQXdCQTtvQkFFMUNBO29CQUNBQSxLQUFLQSxRQUFRQSxRQUFRQSxJQUFJQSxtQkFBbUJBO3dCQUN4Q0EsbUJBQVVBLDhCQUFXQSxHQUFYQTs7b0JBQ2RBLE9BQU9BOztnREFHNkJBLEdBQWFBOztvQkFFakRBLE9BQU9BO3dCQUVIQSxJQUFJQSxDQUFDQSxVQUFVQSxnRUFBbUNBOzRCQUM5Q0E7Ozs7b0JBR1JBOzs7Ozs7Ozs7Ozs7Ozs7MENBM0swQkE7Ozs7bUNBRUpBO29CQUV0QkEsT0FBT0EsbUVBQWVBLENBQUNBLG1CQUFJQSw4REFBcEJBOzsrQ0FHMkJBO29CQUVsQ0EsT0FBT0EsbUVBQWVBLENBQUNBLGlCQUFDQSxNQUFJQSxDQUFDQSxHQUFDQSx5QkFBVUEsOERBQWpDQTs7MERBR3NDQTtvQkFFN0NBLFFBQVFBLE9BQUlBLENBQUNBLEdBQUNBO29CQUNkQSxhQUFLQTtvQkFDTEEsT0FBT0EsbUVBQWVBLENBQUNBLG1CQUFJQSw4REFBcEJBOzsyQ0FHdUJBO29CQUU5QkE7b0JBQ0FBLE9BQU9BO3dCQUVIQTt3QkFDQUEsU0FBS0E7O29CQUVUQSxPQUFPQTs7aUNBRW1CQTs7b0JBRTFCQSxhQUFhQSxLQUFJQTtvQkFDakJBLE9BQU9BO3dCQUNIQSxXQUFXQSxnRUFBbUNBOzs7b0JBRWxEQSxPQUFPQTs7MENBRXVCQTtvQkFFOUJBLFNBQUtBO29CQUNMQSxTQUFLQTtvQkFDTEEsU0FBS0E7b0JBQ0xBLFNBQUtBO29CQUNMQSxTQUFLQTs7b0JBRUxBLE9BQU9BOzttQ0FFZ0JBOztvQkFFdkJBO29CQUNBQSwwQkFBb0JBOzs7OzRCQUNoQkEsU0FBS0EsUUFBTUE7Ozs7Ozs7b0JBRWZBLE9BQU9BOzs4QkFHV0EsWUFBd0JBO29CQUUxQ0E7b0JBQ0FBLEtBQUtBLFFBQVFBLFFBQVFBLElBQUlBLG1CQUFtQkE7d0JBQ3hDQSxtQkFBVUEsOEJBQVdBLEdBQVhBOztvQkFDZEEsT0FBT0E7O2dEQUc2QkEsR0FBYUE7O29CQUVqREEsT0FBT0E7d0JBRUhBLElBQUlBLENBQUNBLFVBQVVBLGdFQUFtQ0E7NEJBQzlDQTs7OztvQkFHUkE7Ozs7Ozs7Ozt5Q0N3VGtDQTtvQkFFbENBLFFBQVFBLEtBQUlBO29CQUNaQSxLQUFLQSxXQUFXQSxPQUFPQTt3QkFFbkJBLFFBQVFBLENBQU1BLEFBQUNBLEtBQUtBO3dCQUNwQkE7d0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBOzRCQUV6QkEsSUFBSUEsQ0FBQ0EsSUFBSUEsVUFBRUE7Z0NBQ1BBLFNBQUtBLE1BQUtBOzs7O3dCQUdsQkEsTUFBTUE7OztvQkFHVkEsT0FBT0E7O3VDQUcwQkE7b0JBRWpDQSxRQUFRQSw0QkFBbUNBLFVBQUxBO29CQUN0Q0EsUUFBUUEsS0FBSUE7b0JBQ1pBO3dCQUVJQTt3QkFDQUE7d0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBOzRCQUV6QkEsSUFBSUEsVUFBRUE7Z0NBQ0ZBOzs7NEJBRUpBLElBQUlBLENBQUNBLFVBQUVBO2dDQUNIQSxTQUFLQSxFQUFNQSxBQUFDQSxLQUFLQTs7OzRCQUVyQkEsVUFBRUEsR0FBRkEsVUFBRUE7Ozt3QkFHTkEsTUFBTUE7O3dCQUVOQSxJQUFJQTs0QkFDQUE7Ozs7b0JBR1JBLE9BQU9BOztxQ0FHa0JBLEdBQW1CQTtvQkFFNUNBO29CQUNBQSxPQUFPQTt3QkFFSEEsU0FBU0EsQ0FBTUEsQUFBQ0EsSUFBSUEsVUFBRUE7d0JBQ3RCQSxTQUFTQSxDQUFNQSxBQUFDQSxJQUFJQSxVQUFFQTs7d0JBRXRCQSxJQUFJQTt3QkFDSkEsVUFBRUEsR0FBS0E7O3dCQUVQQTs7O3FDQUlxQkEsR0FBbUJBO29CQUU1Q0E7b0JBQ0FBLE9BQU9BO3dCQUVIQSxTQUFTQSxDQUFNQSxBQUFDQSxJQUFJQSxDQUFDQSxVQUFFQTt3QkFDdkJBLFNBQVNBLENBQU1BLEFBQUNBLElBQUlBLFVBQUVBOzt3QkFFdEJBLElBQUlBO3dCQUNKQSxVQUFFQSxHQUFLQTs7d0JBRVBBOzs7a0NBSWtCQTtvQkFFdEJBO29CQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxTQUFTQTt3QkFDekJBLFNBQUtBLFVBQUVBOzs7b0JBRVhBLE9BQU9BLEVBQU1BLENBQUNBOzt1Q0FHYUEsR0FBbUJBO29CQUU5Q0E7b0JBQ0FBO29CQUNBQSxLQUFLQSxRQUFRQSxVQUFTQSxTQUFTQSxtQkFBY0EsUUFBUUE7d0JBRWpEQSxJQUFJQSxLQUFLQTs0QkFDTEEsU0FBS0EsVUFBRUE7OzRCQUNOQSxJQUFJQSxLQUFLQTtnQ0FDVkEsU0FBS0EsVUFBRUE7O2dDQUdQQSxTQUFLQSxFQUFNQSxBQUFDQSxDQUFDQSxJQUFJQSxVQUFFQSxLQUFLQSxDQUFDQSxVQUFFQTtnQ0FDM0JBLFNBQUtBLEVBQU1BLEFBQUNBLENBQUNBLElBQUlBLENBQUNBLFVBQUVBLEtBQUtBLFVBQUVBOzs7OztvQkFJbkNBLE9BQU9BLEVBQU1BLEFBQUNBLElBQUlBLENBQUNBOzs7Ozs7Ozs7eUNBcGJlQTtvQkFFbENBLFFBQVFBLEtBQUlBO29CQUNaQSxLQUFLQSxXQUFXQSxRQUFRQTt3QkFFcEJBLFFBQVFBLEFBQU1BLEFBQUNBLG9CQUFNQTt3QkFDckJBO3dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxTQUFTQTs0QkFFekJBLElBQUlBLENBQUNBLE1BQUlBLFVBQUVBO2dDQUNQQSxTQUFLQSxNQUFLQTs7Ozt3QkFHbEJBLE1BQU1BOzs7b0JBR1ZBLE9BQU9BOzt1Q0FHMEJBO29CQUVqQ0EsUUFBUUEsNEJBQW1DQSxVQUFMQTtvQkFDdENBLFFBQVFBLEtBQUlBO29CQUNaQTt3QkFFSUE7d0JBQ0FBO3dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxTQUFTQTs0QkFFekJBLElBQUlBLFVBQUVBO2dDQUNGQTs7OzRCQUVKQSxJQUFJQSxDQUFDQSxVQUFFQTtnQ0FDSEEsU0FBS0EsQUFBTUEsQUFBQ0Esb0JBQU1BOzs7NEJBRXRCQSxVQUFFQSxHQUFGQSxVQUFFQTs7O3dCQUdOQSxNQUFNQTs7d0JBRU5BLElBQUlBOzRCQUNBQTs7OztvQkFHUkEsT0FBT0E7O3FDQUdrQkEsR0FBbUJBO29CQUU1Q0E7b0JBQ0FBLE9BQU9BO3dCQUVIQSxTQUFTQSxBQUFNQSxBQUFDQSxNQUFJQSxVQUFFQTt3QkFDdEJBLFNBQVNBLEFBQU1BLEFBQUNBLE1BQUlBLFVBQUVBOzt3QkFFdEJBLElBQUlBO3dCQUNKQSxVQUFFQSxHQUFLQTs7d0JBRVBBOzs7cUNBSXFCQSxHQUFtQkE7b0JBRTVDQTtvQkFDQUEsT0FBT0E7d0JBRUhBLFNBQVNBLEFBQU1BLEFBQUNBLE1BQUlBLEFBQUNBLFVBQUVBO3dCQUN2QkEsU0FBU0EsQUFBTUEsQUFBQ0EsTUFBSUEsVUFBRUE7O3dCQUV0QkEsSUFBSUE7d0JBQ0pBLFVBQUVBLEdBQUtBOzt3QkFFUEE7OztrQ0FJa0JBO29CQUV0QkE7b0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBO3dCQUN6QkEsU0FBS0EsVUFBRUE7OztvQkFFWEEsT0FBT0EsQUFBTUEsQUFBQ0E7O3VDQUdhQSxHQUFtQkE7b0JBRTlDQTtvQkFDQUE7b0JBQ0FBLEtBQUtBLFFBQVFBLFVBQVNBLFNBQVNBLG1CQUFjQSxRQUFRQTt3QkFFakRBLElBQUlBLEtBQUtBOzRCQUNMQSxTQUFLQSxVQUFFQTs7NEJBQ05BLElBQUlBLEtBQUtBO2dDQUNWQSxTQUFLQSxVQUFFQTs7Z0NBR1BBLFNBQUtBLEFBQU1BLEFBQUNBLEFBQUNBLFlBQUlBLFVBQUVBLFFBQUtBLEFBQUNBLFVBQUVBO2dDQUMzQkEsU0FBS0EsQUFBTUEsQUFBQ0EsQUFBQ0EsWUFBSUEsQUFBQ0EsVUFBRUEsY0FBS0EsVUFBRUE7Ozs7O29CQUluQ0EsT0FBT0EsQUFBTUEsQUFBQ0EsTUFBSUEsQUFBQ0E7Ozs7Ozs7Ozt5Q0FRZUE7b0JBRWxDQSxRQUFRQSxLQUFJQTtvQkFDWkEsS0FBS0EsV0FBV0EsUUFBUUE7d0JBRXBCQSxRQUFRQSxBQUFNQSxBQUFDQSxPQUFNQTt3QkFDckJBO3dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxTQUFTQTs0QkFFekJBLElBQUlBLENBQUNBLE1BQUlBLFVBQUVBO2dDQUNQQSxTQUFLQSxNQUFLQTs7Ozt3QkFHbEJBLE1BQU1BOzs7b0JBR1ZBLE9BQU9BOzt1Q0FHMEJBO29CQUVqQ0EsUUFBUUEsNEJBQW1DQSxVQUFMQTtvQkFDdENBLFFBQVFBLEtBQUlBO29CQUNaQTt3QkFFSUE7d0JBQ0FBO3dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxTQUFTQTs0QkFFekJBLElBQUlBLFVBQUVBO2dDQUNGQTs7OzRCQUVKQSxJQUFJQSxDQUFDQSxVQUFFQTtnQ0FDSEEsU0FBS0EsQUFBTUEsQUFBQ0EsT0FBTUE7Ozs0QkFFdEJBLFVBQUVBLEdBQUZBLFVBQUVBOzs7d0JBR05BLE1BQU1BOzt3QkFFTkEsSUFBSUE7NEJBQ0FBOzs7O29CQUdSQSxPQUFPQTs7cUNBR2tCQSxHQUFtQkE7b0JBRTVDQTtvQkFDQUEsT0FBT0E7d0JBRUhBLFNBQVNBLEFBQU1BLEFBQUNBLE1BQUlBLFVBQUVBO3dCQUN0QkEsU0FBU0EsQUFBTUEsQUFBQ0EsTUFBSUEsVUFBRUE7O3dCQUV0QkEsSUFBSUE7d0JBQ0pBLFVBQUVBLEdBQUtBOzt3QkFFUEE7OztxQ0FJcUJBLEdBQW1CQTtvQkFFNUNBO29CQUNBQSxPQUFPQTt3QkFFSEEsU0FBU0EsQUFBTUEsQUFBQ0EsTUFBSUEsQ0FBQ0EsVUFBRUE7d0JBQ3ZCQSxTQUFTQSxBQUFNQSxBQUFDQSxNQUFJQSxVQUFFQTs7d0JBRXRCQSxJQUFJQTt3QkFDSkEsVUFBRUEsR0FBS0E7O3dCQUVQQTs7O2tDQUlrQkE7b0JBRXRCQTtvQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsU0FBU0E7d0JBQ3pCQSxTQUFLQSxVQUFFQTs7O29CQUVYQSxPQUFPQSxBQUFNQSxDQUFDQTs7dUNBR2FBLEdBQW1CQTtvQkFFOUNBO29CQUNBQTtvQkFDQUEsS0FBS0EsUUFBUUEsVUFBU0EsU0FBU0EsbUJBQWNBLFFBQVFBO3dCQUVqREEsSUFBSUEsS0FBS0E7NEJBQ0xBLFNBQUtBLFVBQUVBOzs0QkFDTkEsSUFBSUEsS0FBS0E7Z0NBQ1ZBLFNBQUtBLFVBQUVBOztnQ0FHUEEsU0FBS0EsQUFBTUEsQUFBQ0EsS0FBQ0EsSUFBSUEsVUFBRUEsYUFBS0EsQ0FBQ0EsVUFBRUE7Z0NBQzNCQSxTQUFLQSxBQUFNQSxBQUFDQSxLQUFDQSxJQUFJQSxDQUFDQSxVQUFFQSxhQUFLQSxVQUFFQTs7Ozs7b0JBSW5DQSxPQUFPQSxBQUFNQSxBQUFDQSxNQUFJQSxDQUFDQTs7Ozs7Ozs7O3lDQXJVZUE7b0JBRWxDQSxRQUFRQSxLQUFJQTtvQkFDWkEsS0FBS0EsV0FBV0EsUUFBUUE7d0JBRXBCQSxRQUFRQSxBQUFPQSxBQUFDQSxxQkFBT0E7d0JBQ3ZCQTt3QkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsU0FBU0E7NEJBRXpCQSxJQUFJQSxDQUFDQSxNQUFJQSxVQUFFQTtnQ0FDUEEsU0FBS0EsTUFBS0E7Ozs7d0JBR2xCQSxNQUFNQTs7O29CQUdWQSxPQUFPQTs7dUNBRzJCQTtvQkFFbENBLFFBQVFBLDRCQUFtQ0EsVUFBTEE7b0JBQ3RDQSxRQUFRQSxLQUFJQTtvQkFDWkE7d0JBRUlBO3dCQUNBQTt3QkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsU0FBU0E7NEJBRXpCQSxJQUFJQSxVQUFFQTtnQ0FDRkE7Ozs0QkFFSkEsSUFBSUEsQ0FBQ0EsVUFBRUE7Z0NBQ0hBLFNBQUtBLEFBQU9BLEFBQUNBLHFCQUFPQTs7OzRCQUV4QkEsVUFBRUEsR0FBRkEsVUFBRUE7Ozt3QkFHTkEsTUFBTUE7O3dCQUVOQSxJQUFJQTs0QkFDQUE7Ozs7b0JBR1JBLE9BQU9BOztxQ0FHa0JBLEdBQW9CQTtvQkFFN0NBO29CQUNBQSxPQUFPQTt3QkFFSEEsU0FBU0EsQUFBT0EsQUFBQ0EsTUFBSUEsVUFBRUE7d0JBQ3ZCQSxTQUFTQSxBQUFPQSxBQUFDQSxNQUFJQSxVQUFFQTs7d0JBRXZCQSxJQUFJQTt3QkFDSkEsVUFBRUEsR0FBS0E7O3dCQUVQQTs7O3FDQUlxQkEsR0FBb0JBO29CQUU3Q0E7b0JBQ0FBLE9BQU9BO3dCQUVIQSxTQUFTQSxBQUFPQSxBQUFDQSxNQUFJQSxBQUFDQSxVQUFFQTt3QkFDeEJBLFNBQVNBLEFBQU9BLEFBQUNBLE1BQUlBLFVBQUVBOzt3QkFFdkJBLElBQUlBO3dCQUNKQSxVQUFFQSxHQUFLQTs7d0JBRVBBOzs7a0NBSW1CQTtvQkFFdkJBO29CQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxTQUFTQTt3QkFDekJBLFNBQUtBLFVBQUVBOzs7b0JBRVhBLE9BQU9BLEFBQU9BLEFBQUNBOzt1Q0FHYUEsR0FBb0JBO29CQUVoREE7b0JBQ0FBO29CQUNBQSxLQUFLQSxRQUFRQSxVQUFTQSxTQUFTQSxtQkFBY0EsUUFBUUE7d0JBRWpEQSxJQUFJQSxLQUFLQTs0QkFDTEEsU0FBS0EsVUFBRUE7OzRCQUNOQSxJQUFJQSxLQUFLQTtnQ0FDVkEsU0FBS0EsVUFBRUE7O2dDQUdQQSxTQUFLQSxBQUFPQSxBQUFDQSxBQUFDQSxZQUFJQSxVQUFFQSxRQUFLQSxBQUFDQSxVQUFFQTtnQ0FDNUJBLFNBQUtBLEFBQU9BLEFBQUNBLEFBQUNBLFlBQUlBLEFBQUNBLFVBQUVBLGNBQUtBLFVBQUVBOzs7OztvQkFJcENBLE9BQU9BLEFBQU9BLEFBQUNBLE1BQUlBLEFBQUNBOzs7Ozs7Ozs7eUNBc09jQTtvQkFFbENBLFFBQVFBLEtBQUlBO29CQUNaQSxLQUFLQSxXQUFXQSxRQUFRQTt3QkFFcEJBLFFBQVFBLENBQVFBLEFBQUNBLEtBQUtBO3dCQUN0QkE7d0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBOzRCQUV6QkEsSUFBSUEsQ0FBQ0EsSUFBSUEsVUFBRUE7Z0NBQ1BBLFNBQUtBLE1BQUtBOzs7O3dCQUdsQkEsTUFBTUE7OztvQkFHVkEsT0FBT0E7O3VDQUc0QkE7b0JBRW5DQSxRQUFRQSw0QkFBbUNBLFVBQUxBO29CQUN0Q0EsUUFBUUEsS0FBSUE7b0JBQ1pBO3dCQUVJQTt3QkFDQUE7d0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBOzRCQUV6QkEsSUFBSUEsVUFBRUE7Z0NBQ0ZBOzs7NEJBRUpBLElBQUlBLENBQUNBLFVBQUVBO2dDQUNIQSxTQUFLQSxFQUFRQSxBQUFDQSxLQUFLQTs7OzRCQUV2QkEsVUFBRUEsR0FBRkEsVUFBRUE7Ozt3QkFHTkEsTUFBTUE7O3dCQUVOQSxJQUFJQTs0QkFDQUE7Ozs7b0JBR1JBLE9BQU9BOztxQ0FHa0JBLEdBQXFCQTtvQkFFOUNBO29CQUNBQSxPQUFPQTt3QkFFSEEsU0FBU0EsQ0FBUUEsQUFBQ0EsSUFBSUEsVUFBRUE7d0JBQ3hCQSxTQUFTQSxDQUFRQSxBQUFDQSxJQUFJQSxVQUFFQTs7d0JBRXhCQSxJQUFJQTt3QkFDSkEsVUFBRUEsR0FBS0E7O3dCQUVQQTs7O3FDQUlxQkEsR0FBcUJBO29CQUU5Q0E7b0JBQ0FBLE9BQU9BO3dCQUVIQSxTQUFTQSxDQUFRQSxBQUFDQSxJQUFJQSxDQUFDQSxVQUFFQTt3QkFDekJBLFNBQVNBLENBQVFBLEFBQUNBLElBQUlBLFVBQUVBOzt3QkFFeEJBLElBQUlBO3dCQUNKQSxVQUFFQSxHQUFLQTs7d0JBRVBBOzs7a0NBSW9CQTtvQkFFeEJBO29CQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxTQUFTQTt3QkFDekJBLFNBQUtBLFVBQUVBOzs7b0JBRVhBLE9BQU9BLEVBQVFBLENBQUNBOzt1Q0FHYUEsR0FBcUJBO29CQUVsREE7b0JBQ0FBO29CQUNBQSxLQUFLQSxRQUFRQSxVQUFTQSxTQUFTQSxtQkFBY0EsUUFBUUE7d0JBRWpEQSxJQUFJQSxLQUFLQTs0QkFDTEEsU0FBS0EsVUFBRUE7OzRCQUNOQSxJQUFJQSxLQUFLQTtnQ0FDVkEsU0FBS0EsVUFBRUE7O2dDQUdQQSxTQUFLQSxFQUFRQSxBQUFDQSxDQUFDQSxJQUFJQSxVQUFFQSxLQUFLQSxDQUFDQSxVQUFFQTtnQ0FDN0JBLFNBQUtBLEVBQVFBLEFBQUNBLENBQUNBLElBQUlBLENBQUNBLFVBQUVBLEtBQUtBLFVBQUVBOzs7OztvQkFJckNBLE9BQU9BLEVBQVFBLEFBQUNBLElBQUlBLENBQUNBOzs7Ozs7Ozs7d0NDL1JPQSxPQUF3QkEsR0FBa0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3dDQUV0RUEsa0JBQWdCQTs7d0NBRWhCQSxpQkFBcUJBLHlFQUFvQkE7d0NBQ3pDQSxRQUFZQSw0QkFBdUNBLHNEQUFlQSxBQUFnQ0E7bURBQUtBLEVBQUVBOzt3Q0FDekdBLGNBQWtCQTs7d0NBRWxCQSxBQUFLQSxVQUFjQTs7Ozs7NkNBQWFBLFVBQVVBOzs7Ozs7Ozt3Q0FFdENBLDBCQUEyQkEsOENBQThDQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7d0NBRTVFQSxJQUFJQSxVQUFVQTs7Ozs7Ozs7d0NBRVZBO3dDQUNBQSxBQUFLQTs7Ozs7NkNBQVdBLElBQUlBOzs7Ozs7Ozt3Q0FFaEJBLFdBQU1BLDhCQUFXQSxHQUFYQTs7d0NBRU5BLElBQUlBLHdEQUF3QkE7Ozs7Ozs7O3dDQUN4QkE7Ozs7O3dDQUwrQkE7Ozs7O3dDQVF2Q0EsQUFBS0E7Ozs7OzZDQUFXQSxLQUFJQTs7Ozs7Ozs7d0NBQ2hCQSxBQUFLQSxJQUFRQTs7Ozs7NkNBQU9BLElBQUlBOzs7Ozs7Ozt3Q0FDcEJBLElBQUlBLENBQUNBLDhCQUFXQSxJQUFYQSxpQkFBZ0JBLDhCQUFXQSxHQUFYQTs7Ozs7Ozs7d0NBQ2pCQTs7Ozs7d0NBRm1DQTs7Ozs7O3dDQURSQTs7Ozs7d0NBS3ZDQSwyQkFBc0JBOzs7Ozs7Ozs7Ozs7Ozt3Q0FDbEJBLElBQUlBLG1EQUFvQkE7Ozs7Ozs7O3dDQUNwQkE7Ozs7Ozs7Ozt3Q0FJWkEsSUFBSUEsQ0FBQ0EsK0RBQWtCQSxZQUFZQTs0Q0FFL0JBLGtCQUFnQkEsS0FBSUE7NENBQ3BCQSwyQkFBa0JBOzs7O29EQUVkQSxPQUFXQSxLQUFJQTtvREFDZkEsTUFBVUEsb0JBQU1BO29EQUNoQkEsS0FBS0EsUUFBV0EsS0FBSUEsbUJBQW1CQTt3REFFbkNBLElBQUlBLENBQUNBLFFBQU1BLDhCQUFXQSxJQUFYQTs0REFDUEEsU0FBU0E7Ozs7b0RBR2pCQSxvQkFBa0JBOzs7Ozs7OzRDQUd0QkE7Ozs7d0NBR0ZBOzs7Ozs7d0NBN0N5Q0E7Ozs7O3dDQWlEbkRBOzs7Ozs7Ozs7Ozt1Q0FHMkJBLE9BQXdCQTtvQkFFbkRBLE9BQU9BLCtEQUFrQkEsWUFBWUEseUVBQW9CQTs7eUNBRzlCQSxPQUF3QkEsWUFBbUJBO29CQUV0RUEsT0FBT0EsK0RBQWtCQSxZQUFZQTs7eUNBR2pCQSxPQUF3QkEsWUFBbUJBLGdCQUFxQkE7OztvQkFFcEZBLDBEQUFlQSxZQUFnQkEsZ0JBQWdCQTtvQkFDL0NBLElBQUlBO3dCQUNBQTs7b0JBQ0pBLElBQUlBLENBQUNBLHFCQUFpQkEsQUFBQ0EsZ0RBQWNBO3dCQUNqQ0E7OztvQkFFSkE7b0JBQ0FBLFFBQVFBLDhCQUFXQSxHQUFYQSxpQkFBZ0JBO29CQUN4QkEsMEJBQWtCQSwrREFBZ0NBOzs7OzRCQUU5Q0EsSUFBSUEsK0RBQWtCQSxZQUFZQSxxQkFBaUJBLElBQUdBO2dDQUVsREE7Z0NBQ0FBOzs7Ozs7OztvQkFJUkEsT0FBT0E7O29DQUdVQSxPQUF3QkEsWUFBbUJBLGdCQUF5QkE7b0JBRXJGQTt3QkFFSUEsbUJBQW1CQTt3QkFDbkJBLFdBQVdBO3dCQUNYQSxPQUFPQTs0QkFFSEEsVUFBVUEsU0FBT0EsQUFBQ0E7NEJBQ2xCQSxnQkFBUUE7OzRCQUVSQTs0QkFDQUEsS0FBS0EsUUFBUUEsR0FBR0EsSUFBSUEsbUJBQW1CQTtnQ0FFbkNBLElBQUlBLENBQUNBLFFBQU1BLDhCQUFXQSxHQUFYQTtvQ0FDUEE7Ozs7NEJBR1JBLElBQUlBLGFBQWFBLGlEQUFrQkEsK0NBQWVBO2dDQUM5Q0Esd0NBQWtCQTs7Ozt3QkFHMUJBLElBQUlBLHdCQUFrQkE7NEJBQ2xCQTs7OztnREFJNEJBLEdBQWlCQTtvQkFFckRBLFFBQVFBLGtCQUFRQTtvQkFDaEJBLFFBQVFBLGtCQUFRQTs7b0JBRWhCQSxlQUFlQTtvQkFDZkE7b0JBQ0FBLE9BQU9BO3dCQUVIQSxRQUFRQTt3QkFDUkEscUJBQUVBLEdBQUZBLE1BQU9BO3dCQUNQQSxxQkFBRUEsR0FBRkE7d0JBQ0FBLFFBQVFBOzt3QkFFUkEsT0FBT0EsS0FBS0E7NEJBRVJBLFFBQVFBLHFDQUFFQSx1QkFBRkE7NEJBQ1JBLFFBQVFBLGlCQUFpQkEsR0FBR0E7OzRCQUU1QkEsT0FBT0E7Z0NBRUhBLFVBQVVBLE1BQUlBLEFBQUNBO2dDQUNmQSxRQUFRQTs7Z0NBRVJBLElBQUlBLHFCQUFFQSxHQUFGQTtvQ0FFQUEscUJBQUlBLHFCQUFKQSxNQUFTQTtvQ0FDVEEscUJBQUVBLEdBQUZBLE1BQU9BLEtBQUlBLHFCQUFFQSxHQUFGQTt1Q0FFVkEsSUFBSUEscUJBQUVBLEdBQUZBLFFBQVFBLE1BQUlBLHFCQUFFQSxHQUFGQTtvQ0FFakJBOzs7Z0NBR0pBLFVBQUtBOzs7NEJBR1RBLHdCQUFZQSxDQUFDQSxvQkFBTUE7Ozs7b0JBSTNCQTs7Ozs7Ozs7O3dDQXJUNEJBLE9BQXdCQSxHQUFrQkE7b0JBRXRFQTtvQkFDQUEsT0FBT0EsZ0VBQW1CQSxBQUErQkEsR0FBT0EsZUFBbUJBLGNBQWtCQTs7MENBRXpFQSxPQUF3QkEsR0FBa0JBLGVBQW1DQSxjQUF1QkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3dDQUVoSUEsa0JBQWdCQTs7d0NBRWhCQTt3Q0FDQUE7d0NBQ0FBLGlCQUFxQkEseUVBQW9CQTt3Q0FDekNBLFFBQVlBLDRCQUF1Q0Esc0RBQWVBLEFBQWdDQTttREFBS0EsRUFBRUE7O3dDQUN6R0EsY0FBa0JBOzt3Q0FFbEJBLEFBQUtBLFVBQWNBOzs7Ozs2Q0FBYUEsVUFBVUE7Ozs7Ozs7Ozt3Q0FHdENBLFFBQW1FQTs7d0NBRW5FQSwwQkFBMkJBLDhDQUE4Q0EsT0FBT0E7Ozs7Ozs7Ozs7Ozs7O3dDQUU1RUEsSUFBSUEsVUFBVUE7Ozs7Ozs7O3dDQUVWQTt3Q0FDQUEsQUFBS0E7Ozs7OzZDQUFXQSxJQUFJQTs7Ozs7Ozs7d0NBRWhCQSxXQUFNQSw4QkFBV0EsR0FBWEE7O3dDQUVOQSxJQUFJQSx3REFBd0JBOzs7Ozs7Ozt3Q0FDeEJBOzs7Ozt3Q0FMK0JBOzs7Ozt3Q0FRdkNBLEFBQUtBOzs7Ozs2Q0FBV0EsS0FBSUE7Ozs7Ozs7O3dDQUNoQkEsQUFBS0EsSUFBUUE7Ozs7OzZDQUFPQSxJQUFJQTs7Ozs7Ozs7d0NBQ3BCQSxJQUFJQSxDQUFDQSxnQ0FBV0EsSUFBWEEsZUFBZ0JBLDhCQUFXQSxHQUFYQTs7Ozs7Ozs7d0NBQ2pCQTs7Ozs7d0NBRm1DQTs7Ozs7O3dDQURSQTs7Ozs7d0NBS3ZDQSwyQkFBc0JBOzs7Ozs7Ozs7Ozs7Ozt3Q0FDbEJBLElBQUlBLG1EQUFvQkE7Ozs7Ozs7O3dDQUNwQkE7Ozs7Ozs7Ozt3Q0FJWkEsSUFBSUEsQ0FBQ0EsK0RBQWtCQSxZQUFZQSxtQkFBbUJBLE9BQVdBLGNBQWtCQTs0Q0FFL0VBLGtCQUFnQkEsS0FBSUE7NENBQ3BCQSwyQkFBa0JBOzs7O29EQUVkQSxPQUFXQSxLQUFJQTtvREFDZkEsTUFBV0EsTUFBTUE7b0RBQ2pCQSxLQUFLQSxRQUFXQSxLQUFJQSxtQkFBbUJBO3dEQUVuQ0EsSUFBSUEsQ0FBQ0EsUUFBTUEsOEJBQVdBLElBQVhBOzREQUNQQSxTQUFTQTs7OztvREFHakJBLG9CQUFrQkE7Ozs7Ozs7NENBR3RCQTs7Ozt3Q0FHRkE7Ozs7Ozt3Q0FoRHlDQTs7Ozs7d0NBb0RuREE7Ozs7Ozs7Ozs7O3VDQUcyQkEsT0FBd0JBO29CQUVuREE7b0JBQ0FBLE9BQU9BLCtEQUFrQkEsWUFBZ0JBLGNBQWtCQTs7eUNBR2hDQSxPQUF3QkEsWUFBbUJBLGNBQXVCQTtvQkFFN0ZBO29CQUNBQTs7b0JBRUFBLFlBQW1FQTs7b0JBRW5FQSxPQUFPQSwrREFBa0JBLFlBQVlBLHlFQUFvQkEsNkNBQXVCQSxPQUFXQSxjQUFrQkE7O3lDQUd6RkEsT0FBd0JBLFlBQW1CQSxnQkFBcUJBLEdBQU9BLE9BQWtFQSxjQUF1QkE7OztvQkFFcExBOztvQkFFQUEsMERBQWVBLFlBQWdCQSxnQkFBZ0JBO29CQUMvQ0EsSUFBSUE7d0JBQ0FBOztvQkFDSkEsSUFBSUEsQ0FBQ0EscUJBQWlCQSxDQUFDQSxnREFBY0E7d0JBQ2pDQTs7Ozs7Ozs7Ozs7b0JBVUpBO29CQUNBQSxRQUFRQSwrQkFBV0EsR0FBWEEsZUFBZ0JBO29CQUN4QkEsMEJBQWtCQSwrREFBZ0NBOzs7OzRCQUU5Q0EsSUFBSUEsK0RBQWtCQSxZQUFZQSxxQkFBaUJBLFdBQUdBLGVBQU9BLE9BQVdBLGNBQWtCQTtnQ0FFdEZBO2dDQUNBQTs7Ozs7Ozs7O29CQUtSQSxPQUFPQTs7b0NBR1VBLE9BQXdCQSxZQUFtQkEsZ0JBQXlCQTtvQkFFckZBO3dCQUVJQSxtQkFBbUJBO3dCQUNuQkEsV0FBV0E7d0JBQ1hBLE9BQU9BOzRCQUVIQSxVQUFVQSxRQUFPQSxDQUFDQSxHQUFDQTs0QkFDbkJBLGVBQVFBOzs0QkFFUkE7NEJBQ0FBLEtBQUtBLFFBQVFBLEdBQUdBLElBQUlBLG1CQUFtQkE7Z0NBRW5DQSxJQUFJQSxDQUFDQSxRQUFNQSw4QkFBV0EsR0FBWEE7b0NBQ1BBOzs7OzRCQUdSQSxJQUFJQSxhQUFhQSxpREFBa0JBLCtDQUFlQTtnQ0FDOUNBLHVDQUFrQkE7Ozs7d0JBRzFCQSxJQUFJQSxxQkFBa0JBOzRCQUNsQkE7Ozs7Ozs7Ozs7Ozs7Ozs0QkMwQ2lCQSxZQUFtQkEsT0FBV0E7O2dCQUV2REEsbUJBQWNBLGtCQUFTQSxzQkFBb0JBO2dCQUMzQ0E7O2dCQUVBQSxLQUFLQSxRQUFRQSxPQUFPQSxJQUFJQSxtQkFBbUJBO29CQUV2Q0EsUUFBUUEsQ0FBTUEsQUFBQ0EsOEJBQVdBLEdBQVhBLGVBQWdCQTtvQkFDL0JBLElBQUlBO3dCQUVBQSxvQ0FBWUEsY0FBWkEscUJBQXVCQTt3QkFDdkJBOzs7O2dCQUlSQSxrQkFBaUJBLHFCQUFnQkE7O2dCQUVqQ0EsaUJBQVlBLFVBQUtBLGtCQUFhQTs7Ozs0QkFHekJBLE1BQWFBO2dCQUVsQkE7Z0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLFFBQVFBO29CQUN4QkEsT0FBT0EsQUFBT0EsQUFBQ0Esc0NBQUtBLEdBQUxBLFlBQVVBLENBQUNBLGtCQUFhQTs7O2dCQUUzQ0EsT0FBT0Esb0JBQUtBOzs4QkFHWUE7Z0JBRXhCQSxPQUFPQSxZQUFPQTs7OEJBR0NBO2dCQUVmQSxJQUFJQSxTQUFTQSxRQUFRQSxpQkFBV0E7b0JBQzVCQTs7O2dCQUVKQSxLQUFLQSxXQUFXQSxJQUFJQSxjQUFTQTtvQkFDekJBLElBQUlBLG9DQUFZQSxHQUFaQSx1QkFBa0JBLHFDQUFrQkEsR0FBbEJBO3dCQUNsQkE7Ozs7Z0JBRWpCQTs7O2dCQUtTQSxPQUFPQTs7Ozs7Ozs7Ozs7OzRCQXhLa0JBLFlBQW1CQSxPQUFXQTs7Z0JBRXZEQSxtQkFBY0Esa0JBQVNBLHNCQUFvQkE7Z0JBQzNDQTs7Z0JBRUFBLEtBQUtBLFFBQVFBLE9BQU9BLElBQUlBLG1CQUFtQkE7b0JBRXZDQSxRQUFRQSxBQUFNQSxBQUFDQSxnQ0FBV0EsR0FBWEEsZUFBZ0JBO29CQUMvQkEsSUFBSUE7d0JBRUFBLG9DQUFZQSxjQUFaQSxxQkFBdUJBO3dCQUN2QkE7Ozs7Z0JBSVJBLGtCQUFpQkEscUJBQWdCQTs7Z0JBRWpDQSxpQkFBWUEsVUFBS0Esa0JBQWFBOzs7OzRCQUd6QkEsTUFBYUE7Z0JBRWxCQTtnQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBUUE7b0JBQ3hCQSxPQUFPQSxBQUFPQSxBQUFDQSxzQ0FBS0EsR0FBTEEsWUFBVUEsQ0FBQ0Esa0JBQWFBOzs7Z0JBRTNDQSxPQUFPQSxvQkFBS0E7OzhCQUdZQTtnQkFFeEJBLE9BQU9BLFlBQU9BOzs4QkFHQ0E7Z0JBRWZBLElBQUlBLFNBQVNBLFFBQVFBLGlCQUFXQTtvQkFDNUJBOzs7Z0JBRUpBLEtBQUtBLFdBQVdBLElBQUlBLGNBQVNBO29CQUN6QkEsSUFBSUEsb0NBQVlBLEdBQVpBLHVCQUFrQkEscUNBQWtCQSxHQUFsQkE7d0JBQ2xCQTs7OztnQkFFakJBOzs7Z0JBS1NBLE9BQU9BOzs7Ozs7Ozs7Ozs7NEJBNUdtQkEsWUFBb0JBLE9BQVdBOztnQkFFekRBLG1CQUFjQSxrQkFBVUEsc0JBQW9CQTtnQkFDNUNBOztnQkFFQUEsS0FBS0EsUUFBUUEsT0FBT0EsSUFBSUEsbUJBQW1CQTtvQkFFdkNBLFFBQVFBLEFBQU9BLEFBQUNBLDhCQUFXQSxHQUFYQSxpQkFBZ0JBO29CQUNoQ0EsSUFBSUE7d0JBRUFBLG9DQUFZQSxjQUFaQSxxQkFBdUJBO3dCQUN2QkE7Ozs7Z0JBSVJBLGtCQUFrQkEscUJBQWdCQTs7Z0JBRWxDQSxpQkFBWUEsVUFBS0Esa0JBQWFBOzs7OzRCQUd6QkEsTUFBY0E7Z0JBRW5CQTtnQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsUUFBUUE7b0JBQ3hCQSxPQUFPQSxBQUFPQSxBQUFDQSx3QkFBS0EsR0FBTEEsV0FBVUEsQ0FBQ0Esa0JBQWFBOzs7Z0JBRTNDQSxPQUFPQSxvQkFBS0E7OzhCQUdZQTtnQkFFeEJBLE9BQU9BLFlBQU9BOzs4QkFHQ0E7Z0JBRWZBLElBQUlBLFNBQVNBLFFBQVFBLGlCQUFXQTtvQkFDNUJBOzs7Z0JBRUpBLEtBQUtBLFdBQVdBLElBQUlBLGNBQVNBO29CQUN6QkEsSUFBSUEsb0NBQVlBLEdBQVpBLHNCQUFrQkEscUNBQWtCQSxHQUFsQkE7d0JBQ2xCQTs7OztnQkFFakJBOzs7Z0JBS1NBLE9BQU9BOzs7Ozs7Ozs7Ozs7NEJBd0VvQkEsWUFBcUJBLE9BQVdBOztnQkFFM0RBLG1CQUFjQSxrQkFBV0Esc0JBQW9CQTtnQkFDN0NBOztnQkFFQUEsS0FBS0EsUUFBUUEsT0FBT0EsSUFBSUEsbUJBQW1CQTtvQkFFdkNBLFFBQVFBLENBQVFBLEFBQUNBLDhCQUFXQSxHQUFYQSxlQUFnQkE7b0JBQ2pDQSxJQUFJQTt3QkFFQUEsb0NBQVlBLGNBQVpBLHFCQUF1QkE7d0JBQ3ZCQTs7OztnQkFJUkEsa0JBQW1CQSxxQkFBZ0JBOztnQkFFbkNBLGlCQUFZQSxVQUFLQSxrQkFBYUE7Ozs7NEJBR3pCQSxNQUFlQTtnQkFFcEJBO2dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxRQUFRQTtvQkFDeEJBLE9BQU9BLEFBQU9BLEFBQUNBLHNDQUFLQSxHQUFMQSxZQUFVQSxDQUFDQSxrQkFBYUE7OztnQkFFM0NBLE9BQU9BLG9CQUFLQTs7OEJBR1lBO2dCQUV4QkEsT0FBT0EsWUFBT0E7OzhCQUdDQTtnQkFFZkEsSUFBSUEsU0FBU0EsUUFBUUEsaUJBQVdBO29CQUM1QkE7OztnQkFFSkEsS0FBS0EsV0FBV0EsSUFBSUEsY0FBU0E7b0JBQ3pCQSxJQUFJQSxvQ0FBWUEsR0FBWkEsdUJBQWtCQSxxQ0FBa0JBLEdBQWxCQTt3QkFDbEJBOzs7O2dCQUVqQkE7OztnQkFLU0EsT0FBT0E7Ozs7Ozs7OzZEQzdLZ0RBLEdBQWlCQTtvQkFFeEVBLFFBQVFBOztvQkFFUkEsUUFBUUE7b0JBQ1JBLFFBQVFBLGtCQUFTQTs7b0JBRWpCQSxRQUFRQTtvQkFDUkEsT0FBT0E7d0JBRUhBLFVBQVVBLE1BQUlBLEFBQUNBO3dCQUNmQSxRQUFRQTs7d0JBRVJBLHFCQUFFQSxHQUFGQSxNQUFPQSxjQUFjQSxHQUFHQTt3QkFDeEJBLHFCQUFFQSxxQkFBRUEsR0FBRkEsS0FBRkEsMkJBQUVBLHFCQUFFQSxHQUFGQSxLQUFGQSxPQUFXQTs7d0JBRVhBLFVBQUtBOzs7b0JBR1RBLFdBQVdBLGtCQUFTQTtvQkFDcEJBLEtBQUtBLFdBQVdBLElBQUlBLEdBQUdBO3dCQUVuQkEsS0FBS0EsV0FBV0EsSUFBSUEsR0FBR0E7NEJBRW5CQSxJQUFJQSxxQkFBRUEsR0FBRkE7Z0NBRUFBLFdBQVVBLHFCQUFFQSxHQUFGQSxRQUFPQSxBQUFDQSxxQkFBRUEsR0FBRkE7Z0NBQ2xCQSx3QkFBS0Esa0JBQVFBLFNBQWJBLFNBQWtCQTs7Z0NBRWxCQSxTQUFRQTtnQ0FDUkEsSUFBSUEsaUJBQWlCQSxJQUFHQTs7Z0NBRXhCQSxPQUFPQTtvQ0FFSEEsUUFBUUEsTUFBSUEsQUFBQ0E7b0NBQ2JBLFFBQVFBOztvQ0FFUkEscUJBQUVBLHFCQUFFQSxHQUFGQSxLQUFGQSwyQkFBRUEscUJBQUVBLEdBQUZBLEtBQUZBLFFBQVdBO29DQUNYQSxxQkFBRUEsR0FBRkEsNEJBQUVBLEdBQUZBO29DQUNBQSxxQkFBRUEscUJBQUVBLEdBQUZBLEtBQUZBLDJCQUFFQSxxQkFBRUEsR0FBRkEsS0FBRkEsT0FBV0E7O29DQUVYQSxVQUFLQTs7O2dDQUdUQSxjQUFPQTtnQ0FDUEEscUJBQUVBLEdBQUZBLDJCQUFFQSxHQUFGQSxRQUFRQTtnQ0FDUkE7Ozs7O29CQUtaQSxPQUFPQSxxRkFBa0NBLEdBQUdBOzsrREFHSUEsR0FBaUJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d0NBRWpFQSxNQUFVQSxLQUFJQTt3Q0FDZEE7O3dDQUVBQTt3Q0FDQUEsQUFBS0E7Ozs7OzZDQUFXQSxJQUFJQTs7Ozs7Ozs7d0NBRWhCQSxNQUFVQSx3QkFBS0EsR0FBTEE7d0NBQ1ZBLElBQVFBOzt3Q0FFUkEsUUFBWUE7d0NBQ1pBLEFBQUtBOzs7Ozs2Q0FBV0EsSUFBSUE7Ozs7Ozs7O3dDQUVoQkEsSUFBUUEsWUFBSUE7d0NBQ1pBLElBQVFBLGlCQUFpQkEsR0FBR0E7d0NBQzVCQSxJQUFJQTs7Ozs7Ozs7O3dDQUVBQSxZQUFJQSxHQUFKQSxZQUFJQSxNQUFNQTs7Ozs7d0NBSVZBLEtBQVNBLE1BQUlBLEFBQUNBO3dDQUNkQSxNQUFVQSxNQUFLQTt3Q0FDZkEsSUFBUUE7d0NBQ1JBLElBQVFBLFlBQVVBLEFBQUNBOzt3Q0FFbkJBOzs7Ozs2Q0FBT0E7Ozs7Ozs7O3dDQUVIQSxJQUFRQSxNQUFJQSxBQUFDQTt3Q0FDYkEsSUFBUUE7O3dDQUVSQSxLQUFTQSxpQkFBaUJBLEdBQUdBO3dDQUM3QkE7Ozs7OzZDQUFPQTs7Ozs7Ozs7d0NBRUhBLEtBQVNBLE9BQUtBLEFBQUNBO3dDQUNmQSxJQUFRQTs7d0NBRVJBLElBQUlBLGlCQUFpQkEsR0FBR0E7Ozs7Ozs7O3dDQUNwQkE7Ozs7d0NBRUpBLFlBQU1BOzs7Ozs7d0NBR1ZBLFVBQUtBOzs7Ozs7d0NBR1RBLElBQVFBLGlCQUFpQkEsR0FBR0E7d0NBQzVCQSxJQUFJQSxNQUFJQSxBQUFDQTs7d0NBRVRBLE9BQU9BOzRDQUVIQSxLQUFRQSxNQUFJQSxBQUFDQTs0Q0FDYkEsS0FBUUE7OzRDQUVSQSxJQUFJQSxpQkFBaUJBLElBQUdBO2dEQUNwQkEsVUFBS0E7OzRDQUNUQSxVQUFLQTs7O3dDQUdUQSxJQUFJQSxLQUFLQTs7Ozs7Ozs7d0NBRUxBO3dDQUNBQTs7Ozs7NkNBQU9BLEtBQUlBOzs7Ozs7Ozt3Q0FFUEEsSUFBSUEsQ0FBQ0EsTUFBSUEsUUFBS0E7O3dDQUVkQSxJQUFJQSxDQUFDQSxNQUFJQSxXQUFNQTs0Q0FDWEE7Ozs7d0NBRUpBLElBQUlBLENBQUNBLGdCQUFnQkE7NENBQ2pCQTs7Ozt3Q0FFSkEsS0FBU0EsTUFBS0E7d0NBQ2RBLElBQUlBLFlBQVVBLEFBQUNBO3dDQUNmQSxJQUFJQSxNQUFJQSxBQUFDQTs7d0NBRVRBOzs7Ozs2Q0FBT0E7Ozs7Ozs7O3dDQUVIQSxLQUFRQSxNQUFJQSxBQUFDQTt3Q0FDYkEsS0FBUUE7O3dDQUVSQSxNQUFTQSxpQkFBaUJBLElBQUdBO3dDQUM3QkE7Ozs7OzZDQUFPQTs7Ozs7Ozs7d0NBRUhBLE1BQVNBLFFBQUtBLEFBQUNBO3dDQUNmQSxLQUFRQTs7d0NBRVJBLElBQUlBLGlCQUFpQkEsSUFBR0E7Ozs7Ozs7O3dDQUNwQkE7Ozs7d0NBRUpBLGNBQU1BOzs7Ozs7d0NBR1ZBLFVBQUtBOzs7Ozs7d0NBR1RBOzs7O3dDQUNwQkE7Ozs7Ozs7d0NBSVlBLFFBQVFBLENBQUNBLEtBQUlBLFVBQU9BLEFBQUNBOzs7d0NBQ3ZDQTs7Ozs7O3dDQTNGcUNBOzs7Ozt3Q0ErRjNCQSxxQkFBV0E7Ozs7O3dDQXJHa0JBOzs7Ozt3Q0F3R2pDQSxPQUFPQTs7Ozs7Ozs7Ozs7NERBSXlDQSxHQUFpQkEsS0FBVUE7b0JBRTNFQSxjQUFPQTtvQkFDUEEsT0FBT0E7d0JBRUhBLFVBQVVBLFFBQU1BLEFBQUNBO3dCQUNqQkEsUUFBUUE7O3dCQUVSQSxJQUFJQSxpQkFBaUJBLEdBQUdBOzRCQUNwQkEsU0FBS0E7Ozt3QkFFVEEsY0FBT0E7OztvQkFHWEEsT0FBT0E7O2tDQUdlQSxHQUFpQkEsS0FBVUEsT0FBWUE7b0JBRTdEQSxRQUFRQSxVQUFRQSxBQUFDQTtvQkFDakJBLFVBQVVBLE1BQUlBLEFBQUNBO29CQUNmQSxRQUFRQTtvQkFDUkEsUUFBUUEsaUJBQWlCQSxHQUFHQTs7b0JBRTVCQSxPQUFPQSxrRkFBaUNBLEdBQUdBLEtBQUtBLENBQUNBLEtBQUlBLFVBQU9BOztpQ0FHdkNBLEdBQWlCQSxLQUFVQSxPQUFZQTtvQkFFNURBLFFBQVFBLGlCQUFpQkEsR0FBR0EsUUFBTUE7O29CQUVsQ0EsY0FBY0EsQ0FBQ0EsQ0FBQ0Esb0JBQU1BLDhCQUFVQTtvQkFDaENBO29CQUNBQSxPQUFPQTt3QkFFSEEsVUFBVUEsTUFBSUEsQUFBQ0E7d0JBQ2ZBLFFBQVFBOzt3QkFFUkEsSUFBSUEsaUJBQWlCQSxHQUFHQTs0QkFDcEJBLGlCQUFTQTs7O3dCQUViQSxVQUFLQTs7O29CQUdUQSxPQUFPQTs7Ozs7Ozs7O3dDQ3BOcUJBO29CQUU1QkEsSUFBSUEsTUFBS0E7d0JBQ0xBLE9BQU9BLElBQUlBOzs7b0JBRWZBLE9BQU9BLDJCQUFRQSxNQUFNQSxBQUFRQSwrQkFBWUEsQ0FBTUEsWUFBS0E7OzBDQUd0QkEsR0FBVUEsR0FBVUEsR0FBVUE7b0JBRTVEQSxPQUFPQSxJQUFJQSwwQkFBS0Esa0JBQUtBLEFBQUNBLFVBQVVBLGtCQUFLQSxBQUFDQSxVQUFVQSxrQkFBS0EsQUFBQ0EsVUFBVUEsa0JBQUtBLEFBQUNBOzttQ0FHL0NBLEdBQVVBLEdBQVVBO29CQUUzQ0EsT0FBT0E7d0JBQ0hBOztvQkFDSkEsT0FBT0E7d0JBQ0hBOztvQkFDSkEsT0FBT0E7d0JBQ0hBOzs7b0JBRUpBLElBQUlBO3dCQUNBQSxPQUFPQSx1Q0FBb0JBLEdBQUdBLEdBQUdBOzs7b0JBRXJDQSxRQUFRQSxVQUFVQSxJQUFJQSxDQUFDQSxNQUFNQSxLQUFLQSxJQUFJQSxJQUFJQSxJQUFJQTtvQkFDOUNBLFFBQVFBLE1BQU1BLElBQUlBO29CQUNsQkEsUUFBUUEsNEJBQVNBLEdBQUdBLEdBQUdBLElBQUlBO29CQUMzQkEsUUFBUUEsNEJBQVNBLEdBQUdBLEdBQUdBO29CQUN2QkEsUUFBUUEsNEJBQVNBLEdBQUdBLEdBQUdBLElBQUlBOztvQkFFM0JBLE9BQU9BLHVDQUFvQkEsR0FBR0EsR0FBR0E7O29DQUdkQSxHQUFVQSxHQUFVQTtvQkFFdkNBLElBQUlBO3dCQUFTQTs7b0JBQ2JBLElBQUlBO3dCQUFTQTs7b0JBQ2JBLElBQUlBLElBQUlBO3dCQUFXQSxPQUFPQSxJQUFJQSxDQUFDQSxJQUFJQSxXQUFXQTs7b0JBQzlDQSxJQUFJQSxJQUFJQTt3QkFBV0EsT0FBT0E7O29CQUMxQkEsSUFBSUEsSUFBSUE7d0JBQVdBLE9BQU9BLElBQUlBLENBQUNBLElBQUlBLEtBQUtBLENBQUNBLHNCQUFZQTs7b0JBQ3JEQSxPQUFPQTs7dUNBR2FBO29CQUVwQkE7b0JBQ0FBLEtBQUtBLFdBQVdBLFFBQVFBO3dCQUNwQkEsU0FBS0EscUJBQU1BLEFBQUNBLENBQUNBLG9CQUFJQSxjQUFDQSxLQUFLQSxVQUFPQSxDQUFDQSxPQUFLQSxrQkFBSUE7OztvQkFFNUNBLE9BQU9BOzs7Ozs7Ozs7Ozs4QkFRQ0EsR0FBT0EsR0FBT0EsR0FBT0E7O2dCQUU3QkEsU0FBSUE7Z0JBQ0pBLFNBQUlBO2dCQUNKQSxTQUFJQTtnQkFDSkEsU0FBSUE7OzRCQUVJQSxHQUFPQSxHQUFPQTswREFDVkEsR0FBR0EsR0FBR0E7Ozs7O2dCQU1sQkEsT0FBT0Esd0NBQWlDQSxrQ0FBR0Esa0NBQUdBLGtDQUFHQTs7Ozs7Ozs7Ozs7O2lDQ3hFbEJBLElBQUlBOzs7Ozs7Ozs7OztvQkFPZkEsT0FBT0E7Ozs7O29CQUNQQSxPQUFPQTs7Ozs7b0JBQ0hBLE9BQU9BLFlBQU9BOzs7OztvQkFDYkEsT0FBT0EsV0FBTUE7Ozs7OzRCQUUvQkEsTUFBYUE7O2dCQUVwQkEsWUFBT0E7Z0JBQ1BBLFdBQU1BOzs4QkFFQ0EsTUFBYUEsS0FBWUEsT0FBY0E7O2dCQUU5Q0EsWUFBT0E7Z0JBQ1BBLFdBQU1BO2dCQUNOQSxhQUFRQTtnQkFDUkEsY0FBU0E7Ozs7K0JBR09BLEdBQVVBO2dCQUUxQkEsYUFBUUE7Z0JBQ1JBLFlBQU9BO2dCQUNQQSxjQUFTQSxJQUFJQTtnQkFDYkEsZUFBVUEsSUFBSUE7O2tDQUVHQSxHQUFVQTtnQkFFM0JBLE9BQU9BLGFBQVFBLEtBQUtBLEtBQUtBLGNBQ2xCQSxZQUFPQSxLQUFLQSxLQUFLQTs7Z0NBRVBBO2dCQUVqQkEsT0FBT0EsYUFBUUEsWUFBWUEsYUFBYUEsY0FDakNBLFlBQU9BLFdBQVdBLGNBQWNBOzs7Ozs7Ozs7Ozs0QkNyQy9CQSxNQUFhQTs7Z0JBRXJCQSxZQUFPQTtnQkFDUEEsWUFBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7cUNDcUJvQkE7cUNBQ0FBOzs7O29CQUlOQTtvQkFBbUJBO29CQUFjQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OEJBT3JDQTs7Z0JBRWpCQSxJQUFJQTtvQkFFQUEsSUFBSUEsSUFBQ0EsNEJBQWFBLG1CQUFjQSxDQUFDQSwwQkFBV0E7d0JBRXhDQSxNQUFNQSxJQUFJQSxpQkFBVUEsaUVBQTZDQSxxQ0FDeENBOzs7OztnQkFLakNBLElBQUlBLDRCQUFhQTtvQkFFYkEsSUFBSUEsU0FBWUE7O2dCQUVwQkEsSUFBSUEsMEJBQVdBO29CQUVYQSxJQUFJQSxZQUFlQSxhQUFXQTs7O2dCQUdsQ0EsU0FBU0EsS0FBSUE7Z0JBQ2JBO2dCQUNBQTs7Z0JBRUFBLDBCQUFtQkE7Ozs7d0JBRWZBLFFBQVFBOzRCQUVKQTtnQ0FDSUEsSUFBSUE7b0NBRUFBLE1BQU1BLElBQUlBOztnQ0FFZEE7Z0NBQ0FBO2dDQUNBQTtnQ0FDQUE7Z0NBQ0FBLFlBQVlBO2dDQUNaQTtnQ0FDQUE7NEJBQ0pBOzRCQUNBQTs0QkFDQUE7NEJBQ0FBOzRCQUNBQTs0QkFDQUE7Z0NBQ0lBO2dDQUNBQTs0QkFDSkE7Z0NBQ0lBLElBQUlBLFVBQVdBO29DQUVYQSxNQUFNQSxJQUFJQSxpQkFBVUEsd0NBQW9CQTs7Z0NBRTVDQTtnQ0FDQUE7Ozt3QkFHUkEsSUFBSUE7NEJBRUFBLDZCQUFVQSxDQUFDQSxrQkFBTUEsQ0FBQ0EsTUFBSUEsNENBQWdCQSw4QkFBTUEsT0FBTkE7NEJBQ3RDQTs0QkFDQUEsSUFBSUEsVUFBU0E7Z0NBRVRBO2dDQUNBQSxZQUFZQTtnQ0FDWkE7Z0NBQ0FBOzs7Ozs7Ozs7O2dCQU1aQSxJQUFJQTtvQkFFQUEsSUFBSUE7d0JBRUFBLE1BQU1BLElBQUlBOztvQkFFZEE7b0JBQ0FBLDZCQUFVQSw4QkFBTUEsT0FBTkE7b0JBQ1ZBLG1CQUFZQTtvQkFDWkEsS0FBS0EsV0FBV0EsSUFBSUEsT0FBT0E7d0JBRXZCQSxPQUFPQSxzQ0FBY0EsR0FBZEE7Ozs7Z0JBSWZBLE9BQU9BOzs7Ozs7Ozs7Ozs7OEJBUVVBOztnQkFFakJBLFNBQW1CQSxrQ0FBa0JBLEFBQUtBLEFBQUNBLDBCQUFZQSxDQUFDQSw0Q0FBdUJBO2dCQUMvRUE7O2dCQUVBQSxJQUFJQTtvQkFFQUEsa0JBQWFBLElBQUlBOzs7Z0JBR3JCQTtnQkFDQUE7Z0JBQ0FBLDBCQUFtQkE7Ozs7d0JBRWZBLElBQUlBLFNBQVNBOzRCQUVUQSw2QkFBVUE7NEJBQ1ZBLElBQUlBO2dDQUVBQSxnQkFBV0E7O2dDQUlYQSxtQkFBWUE7OzRCQUVoQkE7NEJBQ0FBOzs0QkFJQUEsNkJBQVVBLEVBQU1BLEFBQUNBLEtBQUtBLENBQUNBLE9BQUtBLENBQUNBOzRCQUM3QkE7Ozs7Ozs7OztnQkFLUkEsSUFBSUE7b0JBRUFBLGlCQUFZQSxtQkFBV0E7OztnQkFHM0JBLElBQUlBO29CQUVBQSxrQkFBYUEsSUFBSUE7O2dCQUVyQkEsT0FBT0E7O3FDQUdjQTtnQkFFckJBLGlCQUFZQSwyQkFBc0JBOzttQ0FHYkEsT0FBV0E7Z0JBRWhDQSxLQUFLQSxRQUFRQSxxQ0FBMEJBLFFBQVFBO29CQUUzQ0Esc0NBQWNBLEdBQWRBLHVCQUFtQkEsQ0FBTUEsQUFBQ0EsR0FBQ0Esb0JBQWVBO29CQUMxQ0E7OztnQkFHSkEsS0FBS0EsWUFBV0EsS0FBSUEsT0FBT0E7b0JBRXZCQSxRQUFTQSxBQUFNQSxzQ0FBY0EsSUFBZEE7b0JBQ2ZBLGdCQUFXQSxJQUFJQTs7Ozs7Z0JBT25CQSxtQkFBWUE7O3FDQUdTQTtnQkFFckJBLEtBQUtBLFdBQVdBLElBQUlBLE9BQU9BO29CQUV2QkEsc0NBQWNBLEdBQWRBLHVCQUFtQkEsQ0FBTUEsQUFBQ0EsZ0JBQVVBLE9BQUtBLENBQUNBOzs7b0NBSXhCQSxJQUFrQkE7Z0JBRXhDQSxJQUFJQSx1QkFBa0JBLENBQUNBLGtCQUFXQSxpQkFBV0E7b0JBRXpDQTtvQkFDQUE7b0JBQ0FBOztvQkFJQUEsaUNBQVlBOztnQkFFaEJBLFVBQVVBOztrQ0FHVUEsSUFBa0JBO2dCQUV0Q0EsOEJBQVVBO2dCQUNWQTtnQkFDQUEsSUFBSUEsdUJBQWtCQSxDQUFDQSxpQkFBWUE7b0JBRS9CQTtvQkFDQUE7b0JBQ0FBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkM1T2dCQTs7Z0JBRXBCQSxhQUFRQTs7Z0JBRVJBLFdBQVdBLDRCQUFzREEsZ0JBQU1BLEFBQXlEQTtnQkFDaElBLFdBQVdBLDRCQUFzREEsZ0JBQU1BLEFBQXlEQTtnQkFDaElBLFdBQVdBLDRCQUFzREEsZ0JBQU1BLEFBQXlEQTtnQkFDaElBLFdBQVdBLDRCQUFzREEsZ0JBQU1BLEFBQXlEQTs7Z0JBRWhJQSxvQkFBZUEsSUFBSUEseUJBQUlBLE1BQU1BLE1BQU1BLE9BQU9BLE1BQU1BLE9BQU9BOzs7O2dDQUd0Q0E7Z0JBRWpCQSxJQUFJQSxDQUFDQSwyQkFBc0JBO29CQUN2QkE7OztnQkFFSkE7Z0JBQ0FBLFFBQVFBOztnQkFFUkEsS0FBS0EsV0FBV0EsSUFBSUEsc0RBQWFBO29CQUU3QkEsSUFBSUEsQ0FBQ0EsaUNBQU1BLDJCQUFRQSxTQUFTQSxRQUFRQSxpQ0FBTUEsMkJBQVFBLGlDQUFNQSwyQkFBUUEsU0FBU0EsUUFBUUEsaUNBQU1BLDRCQUFVQSxRQUFRQSxDQUFDQSxpQ0FBTUEsMEJBQU9BLGlDQUFNQSwyQkFBUUEsQ0FBQ0EsUUFBUUEsaUNBQU1BLDJCQUFRQSxDQUFDQSxpQ0FBTUEsMEJBQU9BLGlDQUFNQSwyQkFBUUEsaUNBQU1BO3dCQUMxTEEsV0FBV0EsQ0FBQ0E7OztvQkFFaEJBLElBQUlBOzs7Z0JBR1JBLE9BQU9BOzs7Ozs7Ozs7bUJBeEJnSUE7OzttQkFFQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4QkM0Q2xIQSxHQUFRQTs7O2dCQUU3QkEsZUFBVUEsaUJBQWlCQTtnQkFDM0JBLGVBQVVBLGlCQUFpQkE7Z0JBQzNCQSxtQkFBY0E7Z0JBQ2RBLGlCQUFZQTtnQkFDWkEsb0JBQWVBO2dCQUNmQSxhQUFRQTtnQkFDUkEsYUFBUUE7O2dCQUVSQSxJQUFJQTtvQkFFQUEsSUFBSUEscUJBQWVBO3dCQUNmQSxhQUFRQTs7d0JBQ1BBLElBQUlBLHFCQUFlQTs0QkFDcEJBLGFBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OEJBZU1BOztnQkFFdEJBLGdCQUFXQSw0QkFBd0ZBLG1CQUFXQSxBQUFpRkE7Z0JBQy9MQSxhQUFRQSw0QkFBb0ZBLGdCQUFRQSxBQUE2RUE7K0JBQUtBLElBQUlBLGdDQUFrQkEsR0FBR0E7O2dCQUMvTUEsWUFBT0E7Ozs7Ozs7OzttQkFGNkxBLElBQUlBLGtDQUFvQkE7Ozs7Ozs7Ozs7Ozs7OEJBOUVyTUE7O2dCQUV2QkEsU0FBSUE7Z0JBQ0pBLFNBQUlBOzs7Ozs7Ozs7Ozs7Ozs7OzhCQWdCbUJBOzs7Z0JBRXZCQSxnQkFBV0EsSUFBSUEsa0NBQW9CQTtnQkFDbkNBLGFBQVFBO2dCQUNSQSxlQUFVQTtnQkFDVkEsYUFBUUE7Ozs7Ozs7OzZDQzVCd0JBLEdBQU9BLFFBQVlBO29CQUVuREEsUUFBUUEsV0FBV0EsQ0FBQ0EsTUFBTUEsWUFBWUEsU0FBU0EsU0FBU0EsQ0FBQ0EsTUFBTUEsWUFBWUEsU0FBU0E7b0JBQ3BGQSxRQUFRQSxXQUFXQSxDQUFDQSxNQUFNQSxZQUFZQSxTQUFTQSxTQUFTQSxDQUFDQSxNQUFNQSxZQUFZQSxTQUFTQTs7b0JBRXBGQSxPQUFPQSxJQUFJQSx1QkFBSUEsR0FBR0E7OytDQUdpQkEsR0FBVUEsUUFBZUE7b0JBRTVEQSxRQUFRQSxXQUFXQSxDQUFDQSxNQUFNQSxZQUFZQSxTQUFTQSxTQUFTQSxDQUFDQSxNQUFNQSxZQUFZQSxTQUFTQTtvQkFDcEZBLFFBQVFBLFdBQVdBLENBQUNBLE1BQU1BLFlBQVlBLFNBQVNBLFNBQVNBLENBQUNBLE1BQU1BLFlBQVlBLFNBQVNBOztvQkFFcEZBLE9BQU9BLElBQUlBLGNBQU9BLEdBQUdBOzs4Q0FHZUEsR0FBVUE7b0JBRTlDQSxPQUFPQSxJQUFJQSxjQUFPQSxJQUFJQSxTQUFTQSxRQUFRQSxJQUFJQSxTQUFTQTs7NENBR3BCQSxRQUFZQSxNQUFVQSxRQUFZQTtvQkFFbEVBLFlBQVlBLENBQUNBLENBQUNBLFNBQVNBLFlBQVlBLENBQUNBLFNBQVNBLGFBQWFBLENBQUNBLENBQUNBLFNBQVNBLFlBQVlBLENBQUNBLFNBQVNBOztvQkFFM0ZBLElBQUlBO3dCQUNBQTs7O29CQUVKQSxZQUFZQSxDQUFDQSxDQUFDQSxXQUFXQSxZQUFZQSxDQUFDQSxTQUFTQSxhQUFhQSxDQUFDQSxDQUFDQSxXQUFXQSxZQUFZQSxDQUFDQSxTQUFTQTtvQkFDL0ZBLFFBQVFBLFFBQVFBO29CQUNoQkEsYUFBYUEsQ0FBQ0EsQ0FBQ0EsV0FBV0EsWUFBWUEsQ0FBQ0EsU0FBU0EsYUFBYUEsQ0FBQ0EsQ0FBQ0EsV0FBV0EsWUFBWUEsQ0FBQ0EsU0FBU0E7b0JBQ2hHQSxRQUFRQSxTQUFTQTs7b0JBRWpCQSxJQUFJQSxTQUFTQSxTQUFTQSxTQUFTQTt3QkFDM0JBOzs7b0JBRUpBOzs7Ozs7Ozs7dUNDTjRCQSxHQUFVQTtvQkFFdENBLE9BQU9BLElBQUlBLGNBQU9BLE9BQU9BLE1BQU1BLE9BQU9BOzs0Q0FHVkE7b0JBRTVCQSxPQUFPQSxJQUFJQSxjQUFPQSxDQUFDQSxNQUFNQSxDQUFDQTs7MENBR0VBLEdBQVVBO29CQUV0Q0EsT0FBT0EsSUFBSUEsY0FBT0EsT0FBT0EsTUFBTUEsT0FBT0E7O3VDQUdWQSxHQUFVQTtvQkFFdENBLE9BQU9BLElBQUlBLGNBQU9BLE9BQU9BLEdBQUdBLE9BQU9BOzt5Q0FHUEEsR0FBVUE7b0JBRXRDQSxPQUFPQSxJQUFJQSxjQUFPQSxPQUFPQSxHQUFHQSxPQUFPQTs7dUNBdUJSQSxHQUFVQTtvQkFFckNBLE9BQU9BLFNBQVNBOzt5Q0FHV0EsR0FBVUE7b0JBRXJDQSxPQUFPQSxDQUFDQSxDQUFDQSw2QkFBS0E7O3VDQUdrQkE7b0JBRWhDQSxPQUFPQSxJQUFJQSx1QkFBSUEsS0FBS0E7Ozs7Ozs7Ozs7O29CQWpGaEJBLE9BQU9BLFVBQVVBLFVBQUtBLFVBQUtBLFVBQUtBOzs7OztvQkE2RmhDQSxPQUFPQTs7O29CQUlQQSxVQUFLQTs7Ozs7b0JBT0xBLE9BQU9BOzs7b0JBSVBBLFVBQUtBOzs7Ozs0QkF0SENBLEdBQVVBOztnQkFFcEJBLFVBQUtBO2dCQUNMQSxVQUFLQTs7Ozs7Z0JBYUxBLGFBQWFBOztnQkFFYkEsVUFBS0EsVUFBS0E7Z0JBQ1ZBLFVBQUtBLFVBQUtBOztnQkFFVkEsT0FBT0E7OzJCQUdPQTtnQkFFZEEsT0FBT0EsVUFBS0EsWUFBWUEsVUFBS0E7O2dDQUdWQTtnQkFFbkJBLE9BQU9BLEFBQVFBLFVBQVVBLFNBQVNBLFlBQVlBLGNBQVNBLFNBQVNBLFlBQVlBOzs4QkE0QnBEQTtnQkFFeEJBLElBQUlBLENBQUNBLENBQUNBO29CQUNGQTs7O2dCQUVKQSxRQUFXQSxZQUFRQTs7Z0JBRW5CQSxPQUFPQSxZQUFPQTs7OEJBR0NBO2dCQUVmQSxPQUFPQSxZQUFNQSxRQUFRQSxZQUFNQTs7O2dCQUszQkEsT0FBT0E7OztnQkFvQlBBLE9BQU9BLDJCQUFNQSx1Q0FBWUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3FEQzFGZ0JBO29CQUV6Q0EsT0FBT0EsQ0FBQ0EsNEJBQXFCQSxNQUFNQSw0QkFBYUE7O3FDQUdyQkE7b0JBRTNCQSxZQUFZQSxrREFBcUJBO29CQUNqQ0EsaUJBQWlCQSxpQkFBaUJBO29CQUNsQ0EsY0FBY0EsSUFBSUE7b0JBQ2xCQSxPQUFPQSwwREFBU0EsZUFBZUE7O2dEQUdBQTs7b0JBRS9CQSxZQUFZQSxLQUFJQTtvQkFDaEJBLFVBQVVBLEVBQU1BO29CQUNoQkEsMEJBQWtCQTs7Ozs0QkFFZEEsZUFBZUEsK0JBQXNCQSxtQkFBUUEsa0JBQVdBLE1BQU1BOzRCQUM5REEsZUFBZUEsK0JBQXNCQSxtQkFBUUEsa0JBQVdBLE1BQU1BOzRCQUM5REEsZUFBZUEsK0JBQXNCQSxtQkFBUUEsa0JBQVdBLFlBQVlBOzRCQUNwRUEsZUFBZUEsc0NBQVNBOzRCQUN4QkEsZUFBZUEsc0NBQVNBOzs7Ozs7O29CQUc1QkEsZUFBZUEsK0JBQXNCQSxFQUFRQTtvQkFDN0NBLDJCQUFrQkE7Ozs7NEJBRWRBLFVBQVVBLEVBQU1BLEFBQUNBLG1CQUFtQkE7NEJBQ3BDQSxVQUFVQSxFQUFNQSxBQUFDQSxtQkFBbUJBOzRCQUNwQ0EsVUFBVUEsRUFBTUE7NEJBQ2hCQSxVQUFVQSxFQUFNQTs0QkFDaEJBLGVBQWVBLCtCQUFzQkEsbUJBQVFBLGtCQUFXQTs7NEJBRXhEQSxZQUFZQTs0QkFDWkEsa0JBQWtCQSxzQkFBQ0EscURBQTZCQTs0QkFDaERBLGVBQWVBLHNDQUFTQTs7Ozs7OztvQkFHNUJBLE9BQU9BOzt1Q0FHcUJBO29CQUU1QkE7d0JBRUlBLGNBQWNBLElBQUlBO3dCQUNsQkEsaUJBQWlCQSxlQUFlQSxTQUFZQTt3QkFDNUNBLFlBQVlBLG1CQUFtQkE7d0JBQy9CQSxPQUFPQSxzREFBeUJBOzs7O3dCQUloQ0EseUJBQWtCQTs7O29CQUd0QkEsT0FBT0E7O29EQUcyQkE7O29CQUVsQ0E7b0JBQ0FBLFFBQVFBLHNDQUFTQSxPQUFXQTtvQkFDNUJBLGVBQWVBLEtBQUlBO29CQUNuQkEsS0FBS0EsV0FBV0EsSUFBSUEsR0FBR0E7d0JBRW5CQSxRQUFRQSxBQUFRQSx3Q0FBV0EsT0FBV0EsVUFBVUE7d0JBQ2hEQSxRQUFRQSxBQUFRQSx3Q0FBV0EsT0FBV0EsVUFBVUE7d0JBQ2hEQSxjQUFjQSxBQUFPQSx3Q0FBV0EsT0FBV0EsVUFBVUE7d0JBQ3JEQSxZQUFZQSx3Q0FBV0EsT0FBV0E7d0JBQ2xDQSxZQUFZQSx3Q0FBV0EsT0FBV0E7d0JBQ2xDQSxhQUFhQSxVQUFJQSxxQkFBT0EsR0FBR0EsaUJBQWVBLG9CQUFpQkEsa0JBQWVBOzs7b0JBRzlFQSxRQUFRQSx3Q0FBV0EsT0FBV0E7b0JBQzlCQSxZQUFZQSxLQUFJQTtvQkFDaEJBLEtBQUtBLFlBQVdBLEtBQUlBLEdBQUdBO3dCQUVuQkEsU0FBU0Esc0NBQVNBLE9BQVdBO3dCQUM3QkEsU0FBU0Esc0NBQVNBLE9BQVdBO3dCQUM3QkEsbUJBQW1CQSxzQ0FBU0EsT0FBV0E7d0JBQ3ZDQSxrQkFBa0JBLEFBQW1CQSxzQ0FBU0EsT0FBV0E7d0JBQ3pEQSxnQkFBZ0JBLEFBQU9BLHdDQUFXQSxPQUFXQTt3QkFDN0NBLGFBQVlBLHdDQUFXQSxPQUFXQTs7d0JBRWxDQSxVQUFVQSxVQUFJQSxtQkFBS0EsaUJBQVNBLEtBQUtBLGlCQUFTQSx3QkFBc0JBLCtCQUE0QkEsNEJBQXlCQSxzQkFBbUJBOzs7b0JBRzVJQSxPQUFPQSxJQUFJQSxvQkFBTUEsVUFBVUE7O29DQUdWQSxPQUFjQTtvQkFFL0JBLE9BQU9BLHlDQUFNQSw0Q0FBTkE7O3NDQUdjQSxPQUFjQTtvQkFFbkNBLFFBQVFBLDZCQUFzQkEsT0FBT0E7b0JBQ3JDQTtvQkFDQUEsT0FBT0E7O3NDQUdjQSxPQUFjQTtvQkFFbkNBLFFBQVFBLDZCQUFzQkEsT0FBT0E7b0JBQ3JDQTtvQkFDQUEsT0FBT0E7OzZDQUdxQkE7b0JBRTVCQSxZQUFZQSxLQUFJQTtvQkFDaEJBLFVBQVdBLEFBQU1BO29CQUNqQkEsT0FBT0E7d0JBRUhBLFVBQVVBLEVBQU1BLEFBQUNBO3dCQUNqQkE7O29CQUVKQSxVQUFVQSxDQUFNQTs7b0JBRWhCQSxPQUFPQTs7OENBR21CQSxPQUFjQTtvQkFFeENBO29CQUNBQTtvQkFDQUEsT0FBT0E7d0JBRUhBLFdBQVlBLHNDQUFTQSxPQUFXQTt3QkFDaENBLGNBQVFBLEVBQUNBLEFBQUtBLE9BQU9BLFFBQXdCQTt3QkFDN0NBO3dCQUNBQSxJQUFJQSxDQUFDQSxBQUFLQTs0QkFDTkEsT0FBT0E7OztvQkFFZkEsTUFBTUEsSUFBSUE7O29DQUdTQTs7b0JBRW5CQSxZQUFZQSxLQUFJQTtvQkFDaEJBLDBCQUFpQkE7Ozs7NEJBRWJBLGVBQWVBLCtCQUFzQkE7Ozs7Ozs7b0JBR3pDQSwyQkFBa0JBLDRCQUFxQ0EsQUFBQ0EsWUFBbUJBLCtDQUFrQkE7Ozs7NEJBRXpGQSxnQkFBZ0JBOzs7Ozs7O29CQUdwQkEsT0FBT0E7O3NDQUljQSxPQUFjQTtvQkFFbkNBLGFBQWFBLGdEQUFtQkEsT0FBV0E7O29CQUUzQ0E7b0JBQ0FBLHVCQUFNQTt3QkFBY0EsZ0RBQUtBLDhDQUFNQSwyQ0FBTUEsNENBQU5BOztvQkFDL0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7Ozs2Q0N2SzRCQSxhQUE0QkE7OztvQkFFL0RBLFFBQVFBLGtCQUFLQSxBQUFDQSxDQUFDQSxJQUFJQSxVQUFVQSxNQUFJQSxrQkFBSUE7b0JBQ3JDQSxRQUFRQSwwQ0FBU0EsR0FBR0E7O29CQUVwQkE7b0JBQ0FBLEtBQUtBLFdBQVdBLElBQUlBLEdBQUdBO3dCQUVuQkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsR0FBR0E7NEJBRXZCQSxTQUFTQSxvQkFBWUE7NEJBQ3JCQSxJQUFJQTtnQ0FFQUEsT0FBRUEsR0FBR0EsSUFBS0EsUUFBRUEsR0FBR0E7O2dDQUVmQSxJQUFJQTtvQ0FDQUEsT0FBRUEsR0FBR0E7O29DQUNKQSxJQUFJQTt3Q0FDTEEsT0FBRUEsR0FBR0E7Ozs7Z0NBSVRBLE9BQUVBLEdBQUdBLElBQUtBLE1BQVVBLG9CQUFWQSxPQUFFQSxHQUFHQTs7OzRCQUduQkE7Ozs7b0JBSVJBLEtBQUtBLFlBQVdBLEtBQUlBLEdBQUdBO3dCQUNuQkEsT0FBRUEsSUFBR0E7OztvQkFFVEE7b0JBQ0FBLEtBQUtBLFlBQVdBLEtBQUlBLEdBQUdBO3dCQUVuQkEsS0FBS0EsWUFBV0EsS0FBSUEsR0FBR0E7NEJBQ25CQSxnREFBS0EsT0FBRUEsSUFBR0E7O3dCQUNkQSw0QkFBS0E7OztvQkFHVEEsT0FBT0E7O29DQW1GbUJBO29CQUUxQkEsT0FBT0E7O3NDQUltQkE7b0JBRTFCQSxRQUFRQSxrQkFBS0EsQUFBQ0EsQ0FBQ0EsSUFBSUEsVUFBVUEsTUFBSUEsa0JBQUlBO29CQUNyQ0EsSUFBSUE7d0JBQ0FBLE1BQU1BLElBQUlBOzs7b0JBRWRBLFFBQVFBLDRCQUFtQ0EsMENBQXVCQSxXQUE1QkE7b0JBQ3RDQSxTQUFTQSxLQUFJQSxpREFBVUE7O29CQUV2QkEsS0FBS0EsV0FBV0EsSUFBSUEsU0FBU0E7d0JBQ3pCQSxPQUFPQSxTQUFTQSxVQUFFQSxVQUFVQTs7O29CQUVoQ0EsT0FBT0E7d0JBQ0hBOzs7b0JBRUpBLFNBQVNBLDRCQUFxQ0EsNkNBQXNDQSxnRUFBdUJBLEFBQWlGQSwrQkFBK1RBLEVBQU1BLEFBQUNBO29CQUNsZ0JBLE9BQU9BLGVBQWdCQSw0QkFBMkNBLFdBQUdBLEFBQW9DQTs7a0RBRzlEQTs7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FFM0NBO2dEQUNBQSxBQUFLQTs7Ozs7aURBQVdBLElBQUlBOzs7Ozs7Ozs0Q0FFaEJBLElBQVFBO2dEQUNSQSxBQUFLQTs7Ozs7aURBQVdBLElBQUlBLGtCQUFRQTs7Ozs7Ozs7NENBRXhCQSxzQkFBYUE7Ozs7OzRDQUViQSxTQUFLQSxTQUFJQSxVQUFJQTs7Ozs7NENBSmNBOzs7Ozs0Q0FPL0JBLFNBQUtBLE9BQUlBOzs7Ozs0Q0FWY0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dDQWNGQTs7Ozs7Ozs7Ozs7Ozs0Q0FFekJBLEFBQUtBOzs7OztpREFBV0E7Ozs7Ozs7OzRDQUNaQSxzQkFBYUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsT0FBT0E7Ozs7Ozs7Ozs0Q0FEWEE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7bUJBdkI0YkEsY0FBY0E7OzttQkFBOVJBLEVBQU1BLEFBQUNBLDhCQUE2RkEsNENBQW1DQSw0QkFBb0NBLHlCQUFPQSxBQUFzRkE7OzttQkFDOVZBLHdEQUFNQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzttQ0MxSGxFQSxTQUFTQSxRQUFrQ0E7b0JBRTdGQSxPQUFPQSwwRkFBdUVBLFFBQVFBLE1BQU1BLEFBQXdJQTs7Ozs7Ozs7Ozs7Ozs7OztpQ0FhL0xBLFNBQVNBLFNBQVNBLFFBQWtDQSxNQUN6RkE7b0JBRUFBLE9BQU9BLG9EQUEyQkEsUUFBUUEsTUFBTUEsQUFBdUZBOztxQ0FHN0ZBLFNBQVNBLFNBQVNBLFFBQWtDQSxNQUM5RkE7Ozs7Ozs7Ozs7Ozs7Ozs7NENBRUFBLFNBQW1CQTtnREFDbkJBOztnREFFQUEsMEJBQXFCQTs7Ozs7Ozs7Ozs7Ozs7NENBRWpCQSxJQUFJQSxVQUFVQTtvREFFVkEsU0FBU0Esa0JBQVlBOzs7OztnREFHekJBLDBDQUFPQSxtQ0FBUEEsV0FBa0JBOzs7Z0RBR2xCQSxJQUFJQSxVQUFTQTtvREFFVEE7Ozs7O2dEQUlKQSxzQkFBYUEsZUFBZUEsNEJBQStDQSxlQUFPQSxBQUF3Q0E7Ozs7OzRDQUUxSEEsU0FBU0E7Z0RBQ1RBOzs7Ozs7Z0RBSUpBLElBQUlBLFVBQVVBLFFBQVFBOzs7Ozs7Ozs0Q0FFbEJBLHNCQUFhQSxlQUFlQSw0QkFBcUNBLGFBQU9BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2lDQXBEcEJBLFNBQVNBO29CQUVqRUEsT0FBT0EseUNBQXVDQTs7Ozs7Ozs7Ozs7Ozs7OzttQ0FjVUEsU0FBU0EsUUFBa0NBO29CQUVuR0EsT0FBT0EsNEJBQXFHQSxlQUFPQSxBQUFtR0EsVUFBQ0EsTUFBTUE7bUNBQVVBLEtBQUlBLGlFQUEyQkEsZUFBYUEsYUFBT0E7Ozs7Ozs7Ozs7Ozs7OzttQ0FQblBBLFNBQVNBLFFBQWtDQTtvQkFFbEZBLElBQUlBLFVBQVVBO3dCQUFNQSxNQUFNQSxJQUFJQTs7b0JBQzlCQSxPQUFPQSw0QkFBK0JBLDhCQUErQkEsa0JBQVdBOzs7Ozs7Ozs7O21CQVp5SkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztxQ0NLcE5BO29CQUV6QkEsT0FBT0EsQ0FBQ0EsQ0FBQ0E7OzRDQUdzQkE7b0JBRS9CQSxJQUFJQSxrQkFBVUE7d0JBQ1ZBLE9BQU9BLHdDQUFZQSxDQUFDQSw4Q0FBa0JBLENBQUNBLCtDQUFtQkEsQ0FBQ0E7O3dCQUUzREEsT0FBT0E7OzswQ0FHa0JBO29CQUU3QkEsSUFBSUEsa0JBQVVBO3dCQUNWQSxPQUFPQSx3Q0FBWUEsQ0FBQ0EsOENBQWtCQSxDQUFDQSwrQ0FBbUJBLENBQUNBOzt3QkFFM0RBLE9BQU9BOzs7d0NBR2tCQSxLQUFZQSxPQUFXQSxjQUFtQkEsaUJBQXFCQTtvQkFFNUZBLGtDQUFTQSxDQUFNQSxBQUFDQSxJQUFJQSxDQUFDQTtvQkFDckJBLHFFQUFVQSxFQUFNQSxBQUFDQTtvQkFDakJBLHFFQUFVQSxDQUFDQTtvQkFDWEEscUVBQVVBLENBQUNBO29CQUNYQSxtQkFBV0EsUUFBUUE7b0JBQ25CQSxtQkFBV0EsUUFBUUE7O29DQUdPQSxRQUFlQTs7O29CQUV6Q0E7b0JBQ0FBLFVBQVVBO29CQUNWQTtvQkFDQUEsZ0JBQWdCQTtvQkFDaEJBLGtCQUFxQkEsa0JBQVNBO29CQUM5QkE7b0JBQ0FBLGlCQUFtQkEsa0JBQVFBO29CQUMzQkEsbUJBQXNCQSxrQkFBU0E7b0JBQy9CQTtvQkFDQUE7b0JBQ0FBLHNCQUFzQkEsQ0FBQ0Esc0JBQWdCQSx1Q0FBeUJBO29CQUNoRUE7O29CQUVBQSxJQUFJQSxlQUFjQTt3QkFDZEEsTUFBTUEsSUFBSUE7OztvQkFFZEEsSUFBSUE7d0JBQ0FBLFlBQVlBOzt3QkFFWkEsWUFBWUE7OztvQkFFaEJBLElBQUlBO3dCQUNBQSxPQUFPQTs7O29CQUVYQSxJQUFJQSxPQUFPQTt3QkFDUEEsUUFBUUEsMEJBQU9BLEtBQVBBLFdBQWNBLENBQUNBLDBCQUFPQSxpQkFBUEEsaUJBQXdCQSxDQUFDQSwwQkFBT0EsaUJBQVBBOzs7b0JBRXBEQSxPQUFPQSxPQUFPQTt3QkFFVkEsSUFBSUEsQ0FBQ0E7NEJBRURBLElBQUlBLE1BQU1BLHNCQUFzQkEsTUFBTUEsUUFBTUEsQ0FBQ0E7Z0NBRXpDQSxLQUFLQSxrQkFBU0Esa0JBQWdCQTtnQ0FDOUJBLHFCQUFhQSxJQUFJQSxjQUFjQSxlQUFlQSxrQkFBZ0JBO2dDQUM5REEsa0JBQWtCQSxXQUFXQSxJQUFJQSwyQkFBbUJBO2dDQUNwREEsT0FBT0E7Ozs0QkFHWEEsbUJBQVdBLGFBQWFBLFdBQVdBLEVBQUtBLEFBQUNBLEdBQUNBOzRCQUMxQ0EsWUFBWUE7NEJBQ1pBLGFBQU9BOzRCQUNQQTs7O3dCQUdKQSxJQUFJQTs0QkFFQUEsV0FBV0EsQ0FBQ0EsQ0FBQ0EsZUFBZUEsU0FBU0EsQ0FBQ0E7NEJBQ3RDQSxRQUFRQSxlQUFVQTs0QkFDbEJBLFlBQVlBLDhCQUFXQSxNQUFYQSxlQUFtQkE7NEJBQy9CQSw4QkFBV0EsTUFBWEEsZUFBbUJBOzRCQUNuQkEsZUFBVUEsVUFBV0E7OzRCQUVyQkEsSUFBSUEsZUFBY0EsZ0NBQWFBLE1BQWJBLHdCQUEyQkEsQ0FBQ0EsUUFBTUEsVUFBSUEscUJBQWFBLENBQUNBLFFBQU9BLGlCQUFTQSxhQUFhQSxXQUFXQSwwQkFBT0EsS0FBUEEsYUFBZUEsMEJBQU9BLGlCQUFQQSxZQUFtQkEsMEJBQU9BLEtBQVBBLGFBQWVBLDBCQUFPQSxpQkFBUEEsWUFBbUJBLDBCQUFPQSxLQUFQQSxhQUFlQSwwQkFBT0EsaUJBQVBBLFlBQW1CQSwwQkFBT0EsS0FBUEEsYUFBZUEsMEJBQU9BLGlCQUFQQSxZQUFtQkEsMEJBQU9BLEtBQVBBLGFBQWVBLDBCQUFPQSxpQkFBUEE7Z0NBRWpRQSxZQUFZQSxDQUFDQSxHQUFDQTtnQ0FDZEEsSUFBSUEsMEJBQU9BLGVBQVBBLGFBQWlCQSwwQkFBT0EsaUJBQVBBO29DQUVqQkEsUUFBUUEsSUFBUUEsQ0FBQ0E7b0NBQ2pCQSwrQkFBWUEsaUJBQVpBLGdCQUF1QkEsQ0FBTUEsQUFBQ0EsS0FBS0E7b0NBQ25DQSwrQkFBWUEsaUJBQVpBLGdCQUF1QkEsQ0FBTUEsQUFBQ0EsS0FBS0E7b0NBQ25DQTtvQ0FDQUE7O29DQUlBQSxjQUFjQTtvQ0FDZEEsZ0JBQWdCQSxDQUFDQSxDQUFDQSx3QkFBZ0JBLGlDQUFtQkEsNkNBQTJCQSxDQUFDQSx3QkFBZ0JBLGlDQUFtQkE7O29DQUVwSEE7b0NBQ0FBLElBQUlBLDBCQUFPQSxRQUFJQSxZQUFNQSxlQUFqQkEsYUFBNkJBLDBCQUFPQSxLQUFQQTt3Q0FFN0JBO3dDQUNBQSxJQUFJQSwwQkFBT0EsUUFBSUEsWUFBTUEsZUFBakJBLGFBQTZCQSwwQkFBT0EsS0FBUEE7NENBRTdCQTs0Q0FDQUEsT0FBT0EsMEJBQU9BLE1BQUlBLENBQUNBLFFBQU1BLHNCQUFsQkEsYUFBK0JBLDBCQUFPQSxLQUFQQSxZQUFlQSxDQUFDQSxRQUFNQSxpQkFBV0E7Z0RBQ25FQTs7Ozs7b0NBSVpBLGVBQWVBLE9BQU1BOztvQ0FFckJBO29DQUNBQSxJQUFJQTt3Q0FFQUEsU0FBUUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7d0NBQ2pCQSwrQkFBWUEsaUJBQVpBLGdCQUF1QkEsQ0FBTUEsQUFBQ0EsTUFBS0E7d0NBQ25DQSwrQkFBWUEsaUJBQVpBLGdCQUF1QkEsQ0FBTUEsQUFBQ0EsTUFBS0E7d0NBQ25DQTs7d0NBSUFBLG1CQUFXQSxhQUFhQSxLQUFLQSxPQUFPQSxDQUFDQTt3Q0FDckNBOzs7Z0NBR1JBLFFBQVFBLDBCQUFPQSxLQUFQQSxXQUFjQSxDQUFDQSwwQkFBT0EsaUJBQVBBLGlCQUF3QkEsQ0FBQ0EsMEJBQU9BLGlCQUFQQTtnQ0FDaERBOztnQ0FJQUE7Z0NBQ0FBLGdDQUFhQSxNQUFiQTtnQ0FDQUEsK0JBQVlBLEtBQVpBLGdCQUFtQkEsMEJBQU9BLEtBQVBBO2dDQUNuQkEsWUFBWUEsQ0FBQ0E7Z0NBQ2JBO2dDQUNBQTtnQ0FDQUEsUUFBUUEsQ0FBQ0EsQ0FBQ0EsdUJBQXdCQSxDQUFDQSwwQkFBT0EsaUJBQVBBOzs7OzRCQU12Q0EsUUFBUUEsMEJBQU9BLEtBQVBBLFdBQWNBLENBQUNBLDBCQUFPQSxpQkFBUEEsaUJBQXdCQSxDQUFDQSwwQkFBT0EsaUJBQVBBOzs0QkFFaERBOzRCQUNBQTs0QkFDQUE7NEJBQ0FBLGlCQUFnQkEsQ0FBQ0EsQ0FBQ0Esd0JBQWdCQSxpQ0FBbUJBLDZDQUEyQkEsQ0FBQ0Esd0JBQWdCQSxpQ0FBbUJBOzRCQUNwSEEsWUFBV0EsQ0FBQ0EsQ0FBQ0EsZUFBZUEsU0FBU0EsQ0FBQ0E7OzRCQUV0Q0EsSUFBSUEsZ0NBQWFBLE9BQWJBOzRCQUNKQTs0QkFDQUE7NEJBQ0FBLEtBQUtBLE9BQU9BLElBQUlBLDBCQUFrQkEsSUFBSUEsR0FBR0E7Z0NBRXJDQSxLQUFJQSxlQUFVQSxPQUFNQTtnQ0FDcEJBLElBQUlBLENBQU1BLGlCQUFTQSwwQkFBT0EsSUFBUEEsWUFBYUEsRUFBTUEsQ0FBQ0Esd0JBQWVBLDBCQUFPQSxnQkFBUEEsWUFBaUJBLEVBQU1BLENBQUNBLHlCQUFnQkEsMEJBQU9BLGdCQUFQQSxZQUFpQkEsS0FBSUEsUUFBTUE7b0NBRXJIQTtvQ0FDQUEsT0FBT0EsMEJBQU9BLE9BQUlBLFNBQVhBLGFBQWlCQSwwQkFBT0EsUUFBTUEsU0FBYkEsWUFBbUJBLElBQUlBO3dDQUMzQ0E7O29DQUNKQSxJQUFJQSxDQUFDQSxJQUFJQSxjQUFhQSxDQUFDQSxNQUFLQSxhQUFZQSxLQUFJQTt3Q0FFeENBLFVBQVVBO3dDQUNWQSxZQUFXQTt3Q0FDWEEsU0FBU0E7Ozs7NEJBSXJCQSxLQUFJQTs0QkFDSkEsZUFBVUEsT0FBTUEsSUFBSUEsQ0FBQ0EsTUFBdUJBOzRCQUM1Q0E7NEJBQ0FBLGdDQUFhQSxPQUFiQSxpQkFBcUJBOzs0QkFFckJBLElBQUlBLGtCQUFpQkEsUUFBTUE7Z0NBRXZCQSxhQUFhQSxPQUFNQTs7Z0NBRW5CQSxLQUFLQSxXQUFXQSxJQUFJQSxXQUFVQTtvQ0FFMUJBLFFBQVFBLDBCQUFPQSxRQUFNQSxTQUFiQSxXQUFrQkEsQ0FBQ0EsMEJBQU9BLFVBQU1BLG1CQUFiQSxpQkFBNEJBLENBQUNBLDBCQUFPQSxVQUFNQSxtQkFBYkE7b0NBQ3hEQSxRQUFPQSxDQUFDQSxDQUFDQSxlQUFlQSxTQUFTQSxDQUFDQTtvQ0FDbENBLG9CQUFJQSxnQ0FBYUEsT0FBYkEsdURBQWFBLE9BQWJBLDJEQUFhQSxPQUFiQTtvQ0FDSkEsZUFBVUEsT0FBTUEsSUFBSUEsQ0FBQ0EsTUFBdUJBLE9BQU1BOzs7Z0NBR3REQSxhQUFPQTtnQ0FDUEEsWUFBWUEsQ0FBQ0EsR0FBQ0E7O2dDQUVkQSxJQUFJQSxtQkFBaUJBO29DQUVqQkEsbUJBQVdBLGFBQWFBLEtBQUtBO29DQUM3QkE7dUNBRUNBLElBQUlBLG1CQUFpQkE7b0NBRXRCQSxtQkFBV0EsYUFBYUEsS0FBS0EsQ0FBQ0E7b0NBQzlCQTt1Q0FFQ0EsSUFBSUEsbUJBQWtCQTtvQ0FFdkJBLG1CQUFXQSxhQUFhQSxLQUFLQSxDQUFDQSxDQUFDQSwrQkFBc0JBLENBQUNBO29DQUN0REE7dUNBRUNBLElBQUlBO29DQUVMQSxtQkFBV0EsYUFBYUEsS0FBS0EsQ0FBQ0EsQ0FBQ0EsK0JBQXNCQSxDQUFDQTtvQ0FDdERBOztvQ0FJQUEsbUJBQVdBLGFBQWFBLEtBQUtBLENBQUNBLENBQUNBLCtCQUFzQkEsQ0FBQ0E7b0NBQ3REQTs7Z0NBRUpBOztnQ0FJQUEsK0JBQVlBLEtBQVpBLGdCQUFtQkEsMEJBQU9BLEtBQVBBO2dDQUNuQkEsWUFBWUEsQ0FBQ0E7Z0NBQ2JBO2dDQUNBQTs7OztvQkFJWkEsT0FBT0EsT0FBT0E7d0JBRVZBLElBQUlBLENBQUNBOzRCQUVEQSxtQkFBV0EsYUFBYUEsV0FBV0EsRUFBS0EsQUFBQ0EsR0FBQ0E7NEJBQzFDQSxZQUFZQTs0QkFDWkEsYUFBT0E7NEJBQ1BBOzs7d0JBR0pBLCtCQUFZQSxLQUFaQSxnQkFBbUJBLDBCQUFPQSxLQUFQQTt3QkFDbkJBO3dCQUNBQTt3QkFDQUEsWUFBWUEsQ0FBQ0E7O29CQUVqQkEsT0FBT0EsQ0FBQ0E7d0JBRUpBLFlBQVlBLENBQUNBOztvQkFFakJBLG1CQUFXQSxhQUFhQSxXQUFXQSxFQUFLQSxBQUFDQSxHQUFDQSw2Q0FBK0JBO29CQUN6RUEscUJBQWFBLGFBQWFBLGFBQWFBLGVBQWVBO29CQUN0REEsS0FBS0Esa0JBQVNBO29CQUNkQSxrQkFBa0JBLGdCQUFhQSxPQUFJQTtvQkFDbkNBLE9BQU9BOztzQ0FJb0JBLEdBQVVBLEdBQU9BLE9BQVdBO29CQUV2REEsS0FBS0EsV0FBV0EsSUFBSUEsVUFBVUE7d0JBQzFCQSxxQkFBRUEsTUFBSUEsU0FBTkEsTUFBV0EsQ0FBTUEsQUFBQ0EsU0FBU0EsQ0FBQ0E7OztzQ0FHSkE7b0JBRTVCQTtvQkFDQUEsV0FBV0EseUJBQWlCQTtvQkFDNUJBLFVBQVVBLGtCQUFVQTtvQkFDcEJBO29CQUNBQTtvQkFDQUEsa0JBQXFCQSxrQkFBU0E7b0JBQzlCQSxnQkFBa0JBO29CQUNsQkEsbUJBQXNCQTtvQkFDdEJBLHNCQUFzQkEsWUFBT0EsdUNBQXlCQTtvQkFDdERBLGtCQUFrQkE7b0JBQ2xCQTtvQkFDQUE7O29CQUVBQSxRQUFRQSxDQUFDQTs7b0JBRVRBLElBQUlBLGVBQWNBO3dCQUNkQSxNQUFNQSxJQUFJQTs7O29CQUVkQSxJQUFJQSxDQUFDQTt3QkFFREEsU0FBWUEsa0JBQVNBO3dCQUNyQkEsa0JBQWtCQSxRQUFRQSxrQkFBVUEsU0FBU0EsT0FBT0E7d0JBQ3BEQSxPQUFPQTs7O29CQUdYQTt3QkFFSUEsSUFBSUE7NEJBRUFBLFlBQVlBLENBQU1BLEFBQUNBLDBCQUFPQSxLQUFQQSxXQUFjQSxDQUFDQSwwQkFBT0EsaUJBQVBBLGlCQUF3QkEsQ0FBQ0EsMEJBQU9BLGlCQUFQQSxrQkFBeUJBLENBQUNBLDBCQUFPQSxpQkFBUEE7NEJBQ3JGQTs0QkFDQUEsSUFBSUEsT0FBT0E7Z0NBRVBBLElBQUlBO29DQUNBQSxRQUFRQSxDQUFNQSxBQUFDQSwwQkFBT0EsS0FBUEEsV0FBY0EsQ0FBQ0EsMEJBQU9BLGlCQUFQQSxpQkFBd0JBLENBQUNBLDBCQUFPQSxpQkFBUEE7O29DQUV2REEsUUFBUUEsQ0FBTUEsQUFBQ0EsMEJBQU9BLEtBQVBBLFdBQWNBLENBQUNBLDBCQUFPQSxpQkFBUEEsaUJBQXdCQSxDQUFDQSwwQkFBT0EsaUJBQVBBLGtCQUF5QkEsQ0FBQ0EsMEJBQU9BLGlCQUFQQTs7Ozs7d0JBSTdGQSxJQUFJQSxDQUFDQTs0QkFFREE7NEJBQ0FBOzs0QkFFQUEsWUFBWUE7OzRCQUVaQSxJQUFJQTtnQ0FFQUEsT0FBT0EsQ0FBQ0EsQ0FBS0E7Z0NBQ2JBLFVBQVVBLENBQU1BLDZCQUFVQSxNQUFWQTs7Z0NBRWhCQSxJQUFJQSxDQUFDQTtvQ0FFREEsV0FBV0EsRUFBQ0E7b0NBQ1pBOztvQ0FJQUEsV0FBV0EsMEJBQU9BLGlCQUFQQTtvQ0FDWEE7OztnQ0FLSkE7Z0NBQ0FBLElBQUlBLENBQUNBO29DQUVEQSxTQUFTQSxDQUFDQTtvQ0FDVkE7b0NBQ0FBO3VDQUVDQSxJQUFJQSxDQUFDQTtvQ0FFTkEsU0FBU0EsQ0FBQ0E7b0NBQ1ZBO29DQUNBQTt1Q0FFQ0EsSUFBSUEsQ0FBQ0E7b0NBRU5BLFNBQVNBLENBQUNBO29DQUNWQSxXQUFXQSxFQUFDQSxHQUFDQTtvQ0FDYkE7dUNBRUNBLElBQUlBLENBQUNBO29DQUVOQSxTQUFTQSxFQUFDQTtvQ0FDVkEsV0FBV0EsRUFBQ0EsR0FBQ0E7b0NBQ2JBOztvQ0FJQUEsU0FBU0EsQ0FBQ0E7b0NBQ1ZBLFdBQVdBLEVBQUNBLEdBQUNBO29DQUNiQTs7Z0NBRUpBLFVBQVVBLHFCQUFNQSxBQUFDQSxzQkFBTUE7Ozs0QkFHM0JBLCtCQUFZQSxpQkFBWkEsZ0JBQXVCQSwrQkFBWUEsdUJBQVpBOzRCQUN2QkEsK0JBQVlBLGlCQUFaQSxnQkFBdUJBLCtCQUFZQSx1QkFBWkE7NEJBQ3ZCQSwrQkFBWUEsaUJBQVpBLGdCQUF1QkEsK0JBQVlBLHVCQUFaQTs7NEJBRXZCQSxLQUFLQSxXQUFXQSxtQkFBSUEseUJBQVVBO2dDQUUxQkEsK0JBQVlBLFFBQU1BLFNBQWxCQSxnQkFBdUJBLCtCQUFZQSxnREFBVUEsbUJBQXRCQTs7OzRCQUczQkEsYUFBT0EsQ0FBS0E7OzRCQUVaQSxJQUFJQTtnQ0FFQUEsUUFBUUEsQ0FBTUEsQUFBQ0EsK0JBQVlBLHlCQUFaQSxnQkFBK0JBLENBQUNBLCtCQUFZQSx5QkFBWkEsc0JBQXFDQSxDQUFDQSwrQkFBWUEseUJBQVpBO2dDQUNyRkEsT0FBT0EsNkJBQWNBLHNCQUFNQTtvQ0FFdkJBO29DQUNBQSxPQUFPQSxDQUFLQSxBQUFDQSxHQUFDQSxHQUFDQSxnQkFBZUEsaUJBQVNBLENBQUNBO29DQUN4Q0EsNkJBQVVBLE1BQVZBLGNBQWtCQTtvQ0FDbEJBLGdDQUFhQSxNQUFiQTtvQ0FDQUEsUUFBUUEsQUFBTUEsQUFBQ0Esa0NBQXNCQSxFQUFNQSxDQUFDQSwrQkFBWUEseUJBQVpBOztnQ0FFaERBLFFBQVFBLENBQU1BLEFBQUNBLDBCQUFPQSxLQUFQQSxXQUFjQSxDQUFDQSwwQkFBT0EsaUJBQVBBLGlCQUF3QkEsQ0FBQ0EsMEJBQU9BLGlCQUFQQTs7Z0NBSXZEQSxRQUFRQSxDQUFNQSxBQUFDQSwwQkFBT0EsS0FBUEEsV0FBY0EsQ0FBQ0EsMEJBQU9BLGlCQUFQQSxpQkFBd0JBLENBQUNBLDBCQUFPQSxpQkFBUEEsa0JBQXlCQSxDQUFDQSwwQkFBT0EsaUJBQVBBOzs0QkFFckZBLGNBQWNBOzs0QkFJZEEsSUFBSUEsT0FBT0E7Z0NBRVBBLCtCQUFZQSxLQUFaQSxnQkFBbUJBLDBCQUFPQSxLQUFQQTtnQ0FDbkJBO2dDQUNBQTtnQ0FDQUEsWUFBWUE7O2dDQUVaQSxJQUFJQTtvQ0FFQUEsT0FBT0EsY0FBY0E7d0NBRWpCQTt3Q0FDQUEsYUFBYUEsK0JBQVlBLGFBQVpBLGdCQUEyQkEsQ0FBQ0EsK0JBQVlBLHlCQUFaQSxzQkFBcUNBLENBQUNBLCtCQUFZQSx5QkFBWkE7d0NBQy9FQSxPQUFPQSxDQUFDQSxDQUFDQSxnQkFBZ0JBLFVBQVVBLENBQUNBO3dDQUNwQ0EsNkJBQVVBLE1BQVZBLGNBQWtCQTt3Q0FDbEJBLGdDQUFhQSxNQUFiQTs7b0NBRUpBLFFBQVFBLEFBQU1BLEFBQUNBLGtDQUFzQkEsRUFBTUEsQ0FBQ0EsMEJBQU9BLGlCQUFQQTs7b0NBSTVDQSxRQUFRQSxBQUFNQSxBQUFDQSxvQ0FBc0JBLEVBQU1BLENBQUNBLDBCQUFPQSxpQkFBUEEsa0NBQXlCQSxFQUFNQSxDQUFDQSwwQkFBT0EsaUJBQVBBOzs7Z0NBS2hGQSxPQUFPQSxPQUFPQTtvQ0FFVkEsSUFBSUE7d0NBRUFBLGFBQU9BO3dDQUNQQTs7O29DQUdKQSwrQkFBWUEsS0FBWkEsZ0JBQW1CQSwwQkFBT0EsS0FBUEE7b0NBQ25CQTtvQ0FDQUE7b0NBQ0FBLFlBQVlBOztnQ0FFaEJBLE9BQU9BOzs7Ozs7Ozs7OztZQ25jZkEsaURBQWlCQTs7Ozs7Ozs7Ozs7Ozt3QkF5TzRCQSxPQUFPQSwyQkFBY0E7Ozs7Ozs7eUNBN09qQkEsS0FBSUE7Ozs7d0NBT2hDQTtvQkFFckJBLGdDQUFnQ0EsQUFBZ0JBOztvQkFVaERBLGlDQUFpQ0EsQUFBZ0JBOztvQkFRakRBLDBCQUE4QkEsQUFBdUJBO29CQUNyREEsa0RBQXNEQSxBQUFnQkE7O29CQUd0RUEsMEJBQWlCQTtvQkFDakJBLDZCQUF5Q0EsQUFBd0JBO29CQUNqRUEsNkJBQXlDQSxBQUF3QkE7b0JBQ2pFQSw4QkFBMENBLEFBQXdCQTtvQkFDbEVBLHNDQUFrREEsQUFBd0JBO29CQUMxRUEsMENBQXNEQSxBQUF3QkE7b0JBQzlFQSwrQkFBMkNBLEFBQXdCQTtvQkFDbkVBLHFDQUFpREEsQUFBd0JBO29CQUN6RUEsZ0NBQTRDQSxBQUF3QkE7b0JBQ3BFQSx5Q0FBcURBLEFBQXdCQTtvQkFDN0VBLGdDQUE0Q0EsQUFBd0JBO29CQUNwRUEsZ0NBQTRDQSxBQUF3QkE7b0JBQ3BFQSxzQ0FBa0RBLEFBQXdCQTtvQkFDMUVBLGtDQUE4Q0EsQUFBd0JBO29CQUN0RUEsb0NBQWdEQSxBQUF3QkE7b0JBQ3hFQSxvQ0FBZ0RBLEFBQXdCQTtvQkFDeEVBLG1DQUErQ0EsQUFBd0JBO29CQUN2RUEsdUNBQW1EQSxBQUF3QkE7b0JBQzNFQSw4QkFBMENBLEFBQXdCQTtvQkFDbEVBLG1DQUErQ0EsQUFBd0JBO29CQUN2RUEseUNBQXFEQSxBQUF3QkE7b0JBQzdFQSxtQ0FBK0NBLEFBQXdCQTtvQkFDdkVBLDZCQUF5Q0EsQUFBd0JBO29CQUNqRUEsc0NBQWtEQSxBQUF3QkE7b0JBQzFFQSw2Q0FBeURBLEFBQXdCQTtvQkFDakZBLG9DQUFnREEsQUFBd0JBO29CQUN4RUEsa0NBQThDQSxBQUF3QkE7b0JBQ3RFQSxtQ0FBK0NBLEFBQXdCQTtvQkFDdkVBLHlDQUFxREEsQUFBd0JBO29CQUM3RUEsd0NBQW9EQSxBQUF3QkE7b0JBQzVFQSx1Q0FBbURBLEFBQXdCQTtvQkFDM0VBLHFDQUFpREEsQUFBd0JBO29CQUN6RUEsK0JBQTJDQSxBQUF3QkE7b0JBQ25FQSx1Q0FBbURBLEFBQXdCQTtvQkFDM0VBLGtDQUE4Q0EsQUFBd0JBO29CQUN0RUEseUNBQXFEQSxBQUF3QkE7b0JBQzdFQSxxQ0FBaURBLEFBQXdCQTtvQkFDekVBLG9DQUFnREEsQUFBd0JBO29CQUN4RUEsaUNBQTZDQSxBQUF3QkE7b0JBQ3JFQSxvQ0FBZ0RBLEFBQXdCQTtvQkFDeEVBLDhCQUEwQ0EsQUFBd0JBO29CQUNsRUEsc0NBQWtEQSxBQUF3QkE7b0JBQzFFQSw4QkFBMENBLEFBQXdCQTtvQkFDbEVBLHdDQUFvREEsQUFBd0JBO29CQUM1RUEsNkJBQXlDQSxBQUF3QkE7b0JBQ2pFQSxxQ0FBaURBLEFBQXdCQTtvQkFDekVBLHNDQUFrREEsQUFBd0JBO29CQUMxRUEsK0JBQTJDQSxBQUF3QkE7b0JBQ25FQSwrQ0FBMkRBLEFBQXdCQTtvQkFDbkZBLHlDQUFxREEsQUFBd0JBO29CQUM3RUEsa0RBQThEQSxBQUF3QkE7b0JBQ3RGQSxrQ0FBOENBLEFBQXdCQTtvQkFDdEVBLCtCQUEyQ0EsQUFBd0JBO29CQUNuRUEsMkNBQXVEQSxBQUF3QkE7b0JBQy9FQSw0Q0FBd0RBLEFBQXdCQTtvQkFDaEZBLG9DQUFnREEsQUFBd0JBO29CQUN4RUEsc0NBQWtEQSxBQUF3QkE7b0JBQzFFQSxzQ0FBa0RBLEFBQXdCQTtvQkFDMUVBLHFDQUFpREEsQUFBd0JBO29CQUN6RUEsc0NBQWtEQSxBQUF3QkE7b0JBQzFFQSw4QkFBMENBLEFBQXdCQTtvQkFDbEVBLDRCQUF3Q0EsQUFBd0JBO29CQUNoRUEsMkJBQXVDQSxBQUF3QkE7b0JBQy9EQSxvQ0FBZ0RBLEFBQXdCQTtvQkFDeEVBLHFDQUFpREEsQUFBd0JBO29CQUN6RUEsaUNBQTZDQSxBQUF3QkE7b0JBQ3JFQSwrQkFBMkNBLEFBQXdCQTtvQkFDbkVBLHFDQUFpREEsQUFBd0JBO29CQUN6RUEsK0JBQTJDQSxBQUF3QkE7b0JBQ25FQSxtQ0FBK0NBLEFBQXdCQTtvQkFDdkVBLGtDQUE4Q0EsQUFBd0JBO29CQUN0RUEsd0NBQW9EQSxBQUF3QkE7b0JBQzVFQSx5Q0FBcURBLEFBQXdCQTtvQkFDN0VBLHFDQUFpREEsQUFBd0JBO29CQUN6RUEsK0JBQTJDQSxBQUF3QkE7b0JBQ25FQSxpQ0FBNkNBLEFBQXdCQTtvQkFDckVBLCtCQUEyQ0EsQUFBd0JBO29CQUNuRUEsZ0NBQTRDQSxBQUF3QkE7b0JBQ3BFQSxnQ0FBNENBLEFBQXdCQTtvQkFDcEVBLGtDQUE4Q0EsQUFBd0JBO29CQUN0RUEsaUNBQTZDQSxBQUF3QkE7b0JBQ3JFQSxtQ0FBK0NBLEFBQXdCQTtvQkFDdkVBLCtCQUEyQ0EsQUFBd0JBO29CQUNuRUEsOEJBQTBDQSxBQUF3QkE7b0JBQ2xFQSx1Q0FBbURBLEFBQXdCQTtvQkFDM0VBLDRDQUF3REEsQUFBd0JBO29CQUNoRkEsa0NBQThDQSxBQUF3QkE7b0JBQ3RFQSxtQ0FBK0NBLEFBQXdCQTtvQkFDdkVBLDZCQUF5Q0EsQUFBd0JBO29CQUNqRUEsK0JBQTJDQSxBQUF3QkE7b0JBQ25FQSw0QkFBd0NBLEFBQXdCQTtvQkFDaEVBLHVDQUFtREEsQUFBd0JBO29CQUMzRUEseUNBQXFEQSxBQUF3QkE7b0JBQzdFQSxvQ0FBZ0RBLEFBQXdCQTtvQkFDeEVBLCtDQUEyREEsQUFBd0JBO29CQUNuRkEsNEJBQXdDQSxBQUF3QkE7OztvQkFJaEVBLG9DQUFnREEsQUFBd0JBO29CQUN4RUEsbUNBQStDQSxBQUF3QkE7b0JBQ3ZFQSxtQ0FBK0NBLEFBQXdCQTtvQkFDdkVBLHFDQUFpREEsQUFBd0JBO29CQUN6RUEsaUNBQTZDQSxBQUF3QkE7b0JBQ3JFQSxxQ0FBaURBLEFBQXdCQTtvQkFDekVBLG1DQUErQ0EsQUFBd0JBOztvQkFHdkVBLDZCQUF5Q0EsQUFBZ0JBOzs7O29CQVF6REE7b0JBQ0FBOztvQkFFQUEsZ0NBQTRDQSxBQUFnQkE7O29CQVk1REEsbUNBQStDQSxBQUFnQkE7OztvQkFTL0RBLGlCQUFpQkE7b0JBQ2pCQSx3QkFBZUE7b0JBQ2ZBOztvQkFFQUEsYUFBYUE7b0JBQ2JBO29CQUNBQTtvQkFDQUE7O29CQUVBQSxrQ0FBeUJBO29CQUN6QkEsdUJBQXVCQTs7a0NBR0RBLE1BQW9CQTs7OztvQkFFMUNBLElBQUlBLDRCQUFxQkE7d0JBQ3JCQSxPQUFPQSxXQUFXQTs7O29CQUV0QkEsYUFBYUE7b0JBQ2JBLFlBQVlBLFFBQVFBO29CQUNwQkEsZUFBZUEsQUFBS0EsQUFBQ0E7b0JBQ3JCQSxnQkFBZ0JBLEFBQUtBLEFBQUNBO29CQUN0QkE7O29CQUVBQSxpREFBaUJBO3dCQUViQSxlQUFlQTt3QkFDZkEsZ0JBQWdCQTs7O29CQUdwQkEsSUFBSUEsS0FBS0E7d0JBQ0xBLElBQUlBLElBQUlBOztvQkFDWkEsa0JBQWtCQSxJQUFJQSxtQkFBWUE7b0JBQ2xDQSxTQUFTQSxJQUFJQSxlQUFVQSxRQUFRQTtvQkFDL0JBOztvQkFFQUEsY0FBY0E7b0JBQ2RBO29CQUNBQSxhQUFhQSxRQUFRQTtvQkFDckJBLG9CQUFvQkE7O29CQUVwQkEsd0JBQXdCQTtvQkFDeEJBLDBCQUFzQkE7Ozs7NEJBQ2xCQTs7Ozs7O3FCQUNKQSw4QkFBOEJBOztvQkFFOUJBLFVBQVVBO29CQUNWQTs7b0JBRUFBLGFBQWFBO29CQUNiQTtvQkFDQUEscUJBQXFCQTtvQkFDckJBLGNBQWNBLFNBQVNBO29CQUN2QkEsMkJBQWNBLGFBQWVBO29CQUM3QkEsNkJBQW9CQTs7b0JBRXBCQSxnQkFBZ0JBOztvQkFFaEJBLGlCQUFpQkE7b0JBQ2pCQSwyQkFBc0JBOzs7OzRCQUNsQkE7Ozs7OztxQkFDSkEsd0JBQXdCQSxLQUFLQTs7b0JBRTdCQTs7cUNBS2tCQTtvQkFFbEJBLFNBQVNBOztvQkFFVEEsUUFBUUE7d0JBRUpBOzRCQUNJQTs0QkFDQUE7d0JBQ0pBOzRCQUNJQSxzQkFBc0JBLElBQUlBLElBQUlBOzRCQUM5QkE7d0JBQ0pBOzRCQUNJQSx5QkFBeUJBLElBQUlBOzRCQUM3QkE7d0JBQ0pBOzRCQUNJQTs0QkFDQUE7d0JBQ0pBOzRCQUNJQTs0QkFDQUE7d0JBQ0pBOzRCQUNJQTs0QkFDQUE7d0JBQ0pBOzRCQUNJQTs0QkFDQUE7d0JBQ0pBOzRCQUNJQTs0QkFDQUE7d0JBQ0pBOzRCQUNJQTs0QkFDQUE7d0JBQ0pBOzRCQUNJQSxJQUFJQTtnQ0FDQUE7OzRCQUNKQTt3QkFDSkE7NEJBQ0lBLElBQUlBO2dDQUNBQTs7NEJBQ0pBOzs7bUNBS2VBO29CQUV2QkEsVUFBVUEsdUJBQWNBOztvQkFFeEJBO29CQUNBQTs7dUNBRzJCQTtvQkFFM0JBLHVCQUFjQTs7b0JBRWRBO29CQUNBQTs7d0NBRzBDQSxHQUFTQTs7Ozs7Ozs7Ozs7Ozs7NENBRW5EQSxTQUFhQSx3QkFBaUJBLG9DQUFnQkEseURBQXVDQSxNQUFzQkE7Ozs7Ozs7MkRBQXBHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBDQUdtQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7NENBRTFDQSxTQUFhQTs0Q0FDYkE7NENBQ0FBLHVCQUFjQTs7NENBRWRBOzs0Q0FFQUE7Ozs7O2lEQUFPQSxDQUFDQTs7Ozs7Ozs7NENBQ0pBLFNBQU1BOzs7Ozs7Ozs7Ozs7NENBRVZBLFdBQWVBOzRDQUNmQSxJQUFJQSw0QkFBcUJBO2dEQUNyQkE7Ozs7NENBRUpBLEtBQVNBLDRCQUE4Q0EsOEJBQWVBLG1CQUFRQSw2QkFBdUJBLG1CQUF1Q0EsQUFBb0NBOzRDQUNoTEEsSUFBSUEsNEJBQXFCQTtnREFDckJBOzs7OzRDQUVKQSxLQUFLQSxVQUFhQSw4Q0FBMkJBOzRDQUM3Q0EsS0FBS0EsYUFBZ0JBOzs0Q0FFckJBLGVBQU9BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7eUNBR3lCQTs7b0JBRWhDQSxJQUFJQTt3QkFDQUEsb0NBQTJCQTs7b0JBQy9CQSxVQUFVQTtvQkFDVkE7b0JBQ0FBLGtCQUFrQkE7b0JBQ2xCQSxvQ0FBMkJBOztvQkFFM0JBLE9BQU9BOzs7Ozs7Ozs7c0JBMVUwQ0E7WUFFN0NBLElBQUlBLENBQUNBLHlDQUFnQ0EsQ0FBQ0E7Z0JBQ2xDQTs7WUFDSkEsU0FBU0EsMkJBQWNBO1lBQ3ZCQSxRQUFRQTtZQUNSQSxJQUFJQSxDQUFDQSw0QkFBcUJBO2dCQUN0QkEsZ0NBQTRDQTs7O3NCQUdGQTtZQUU5Q0E7WUFDQUEsUUFBUUE7WUFDUkEsU0FBU0EsMkJBQWNBO1lBQ3ZCQSx1QkFBdUJBOztzQkFJNENBO1lBQWNBOzs7WUFJZEE7OztZQUNBQTs7O1lBQ0NBOzs7WUFDUUE7OztZQUNJQTs7O1lBQ1hBOzs7WUFDTUE7OztZQUNMQTs7O1lBQ1NBOzs7WUFDVEE7OztZQUNBQTs7O1lBQ01BOzs7WUFDSkE7OztZQUNFQTs7O1lBQ0FBOzs7WUFDREE7OztZQUNJQTs7O1lBQ1RBOzs7WUFDS0E7OztZQUNNQTs7O1lBQ05BOzs7WUFDTkE7OztZQUNTQTs7O1lBQ09BOzs7WUFDVEE7OztZQUNGQTs7O1lBQ0NBOzs7WUFDTUE7OztZQUNEQTs7O1lBQ0RBOzs7WUFDRkE7OztZQUNOQTs7O1lBQ1FBOzs7WUFDTEE7OztZQUNPQTs7O1lBQ0pBOzs7WUFDREE7OztZQUNIQTs7O1lBQ0dBOzs7WUFDTkE7OztZQUNRQTs7O1lBQ1JBOzs7WUFDVUE7OztZQUNYQTs7O1lBQ1FBOzs7WUFDQ0E7OztZQUNQQTs7O1lBQ2dCQTs7O1lBQ05BOzs7WUFDU0E7OztZQUNoQkE7OztZQUNIQTs7O1lBQ1lBOzs7WUFDQ0E7OztZQUNSQTs7O1lBQ0VBOzs7WUFDQUE7OztZQUNEQTs7O1lBQ0NBOzs7WUFDUkE7OztZQUNGQTs7O1lBQ0RBOzs7WUFDU0E7OztZQUNDQTs7O1lBQ0pBOzs7WUFDRkE7OztZQUNNQTs7O1lBQ05BOzs7WUFDSUE7OztZQUNEQTs7O1lBQ01BOzs7WUFDQ0E7OztZQUNKQTs7O1lBQ05BOzs7WUFDRUE7OztZQUNGQTs7O1lBQ0NBOzs7WUFDQUE7OztZQUNFQTs7O1lBQ0RBOzs7WUFDRUE7OztZQUNKQTs7O1lBQ0RBOzs7WUFDU0E7OztZQUNLQTs7O1lBQ1ZBOzs7WUFDQ0E7OztZQUNOQTs7O1lBQ0VBOzs7WUFDSEE7OztZQUNXQTs7O1lBQ0VBOzs7WUFDTEE7OztZQUNXQTs7O1lBQ25CQTs7O1lBSVFBOzs7WUFDREE7OztZQUNBQTs7O1lBQ0VBOzs7WUFDSkE7OztZQUNJQTs7O1lBQ0ZBOzt3QkFHbkJBO1lBRXREQSw2Q0FBb0NBLEFBQUNBLFlBQWFBOzt3QkFTT0E7WUFFekRBO1lBQ0FBLElBQUlBLENBQUNBO2dCQUVEQSxRQUFRQTtnQkFDUkEsNkJBQW9CQTtnQkFDcEJBLGFBQWFBO2dCQUNiQTs7O3dCQUl3REE7WUFFNURBO1lBQ0FBOzs7ZUEySm9MQTs7Ozs7OzttQ0MxVS9KQTtvQkFFekJBLE9BQU9BLG1EQUE0Q0Esa0NBQVFBLGtDQUFRQSxrQ0FBUUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkNPeERBLFFBQWVBLGFBQW9CQSxRQUE0QkE7O2dCQUVsRkEsVUFBS0E7Z0JBQ0xBLGVBQVVBO2dCQUNWQSxvQkFBZUE7Z0JBQ2ZBLGVBQVVBOztnQkFFVkE7b0JBRUlBLGNBQVNBLGtCQUFXQTtvQkFDcEJBLGNBQVNBLGtCQUFXQTtvQkFDcEJBLEtBQUtBLFdBQVdBLElBQUlBLG9CQUFlQTt3QkFFL0JBLCtCQUFPQSxHQUFQQSxnQkFBWUEsQ0FBQ0EscUJBQVFBLE9BQU9BLHlCQUFZQSxRQUFRQTt3QkFDaERBLCtCQUFPQSxHQUFQQSxnQkFBWUEsQ0FBQ0EscUJBQVFBLE9BQU9BLHlCQUFZQSxRQUFRQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkNBUWxEQSxhQUFRQTs7Ozs7Ozs7d0NBRVZBO3dDQUNBQSxTQUFNQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0JBTVZBLEtBQUtBLFdBQVdBLElBQUlBLG9CQUFlQTtvQkFFL0JBLDhCQUFZQTs0QkFBUUEsK0JBQU9BLEdBQVBBO29CQUNwQkEsK0JBQVlBOzZCQUFRQSwrQkFBT0EsR0FBUEE7OztnQkFHeEJBO2dCQUNBQTtnQkFDQUEsSUFBSUEsY0FBU0E7b0JBQ1RBOzs7O2dCQUtKQSxLQUFLQSxXQUFXQSxJQUFJQSxvQkFBZUE7b0JBRS9CQSx5QkFBWUEsT0FBT0EscUJBQVFBO29CQUMzQkEseUJBQVlBLE9BQU9BLHFCQUFRQTs7Z0JBRS9CQTs7Ozs7Ozs7Ozs7OzhCQzdEZ0JBLEtBQUlBOzs7O3FDQUVlQTtnQkFFbkNBLE9BQU9BLDRCQUFtRkEsb0JBQU9BLDRCQUF1SUEsY0FBTUEsQUFBZ0lBO21DQUFLQSxVQUFLQTs7O2lDQUcxVkE7Z0JBRTlCQSxnQkFBV0E7O21DQUdxQkE7Z0JBRWhDQSxtQkFBY0E7Ozs7Ozs7Ozs7Ozs7OzRCQ1JNQSxHQUFhQSxPQUFXQSxNQUFVQTs7Z0JBRXREQSxhQUFRQTtnQkFDUkEsWUFBT0E7Z0JBQ1BBLHNCQUFpQkEsNEJBQXlIQSxtQkFBV0EsQUFBa0hBOytCQUFLQSw0QkFBdUNBLFVBQUVBLEFBQWdDQTt1Q0FBS0EsVUFBRUE7Ozs7Ozs7Z0JBSzVWQSxPQUFPQSw0QkFBa0tBLHlEQUFzQ0EsbUNBQXNCQSxBQUEySkE7OztnQkFpQmhZQSxPQUFPQTs7c0NBZHNCQTs7Ozs7Ozs7Ozs7Ozs7Ozt3Q0FFN0JBLEFBQUtBOzs7Ozs2Q0FBV0EsSUFBSUE7Ozs7Ozs7O3dDQUVoQkEsSUFBSUEsQ0FBQ0EsV0FBR0E7Z0RBQ0pBOzs7OzRDQUVKQSwwQkFBa0JBLDRCQUFlQTs7Ozs7Ozs7Ozs7Ozs7d0NBQzdCQSxzQkFBYUEsV0FBSUEsNENBQWlCQSwwQkFBaUJBLHVCQUFjQTs7Ozs7Ozs7Ozs7Ozt3Q0FOM0NBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7bUJBTHdXQSxvQkFBZUE7Ozs7Ozs7O2dEQ0FqWEEsV0FBcUJBLE9BQWFBO29CQUV0RUEsT0FBT0EsZ0ZBQXFCQSxXQUFXQSxjQUFjQTs7a0RBR2pCQSxXQUFxQkEsUUFBbUJBO29CQUU1RUEsU0FBU0E7O29CQUVUQSxPQUFPQSxlQUFlQSxnQ0FBb0JBLGFBQW1CQSxBQUFpQ0E7d0JBRTFGQSxJQUFJQSxNQUFLQTs0QkFDTEEsT0FBT0E7Ozt3QkFFWEEsT0FBT0EsNkJBQTJCQSxRQUFRQTs7Ozs7Ozs7b0JBNUJyQkE7Ozs7O29CQUNZQTs7Ozs7Ozs7OzsrQkFFckJBLFdBQXFCQTtnQkFFckNBLGdCQUFnQkE7Z0JBQ2hCQSxlQUFlQSxzQkFBc0JBLGdDQUFvQkEsb0JBQTBCQSxBQUFpQ0E7MkJBQUtBLDJCQUEyQkEsT0FBT0E7OztnQkFFM0pBLElBQUlBO29CQUNBQSxrQkFBVUEsOEJBQXNCQSx5QkFBeUJBLE9BQU9BOzs7Z0JBRXBFQSxPQUFPQTs7Ozs7Ozs7OztvQkNUREE7Ozs7O29CQUtBQTs7Ozs7Ozs7OzsrQkFHVUEsV0FBcUJBO2dCQUVyQ0Esa0JBQWtCQSw0QkFBNENBLHdCQUFhQSxrQkFBS0EsQUFBd0NBOztnQkFFeEhBLElBQUlBO29CQUNBQSxrQkFBVUEsOEJBQXNCQSx5QkFBeUJBLE9BQU9BOzs7Z0JBRXBFQSxPQUFPQTs7Ozs7Ozs7c0JBTGtIQSxHQUFHQTttQkFBTUEsTUFBSUE7Ozs7Ozs7Ozs7O29CQ1RyR0E7Ozs7O29CQUNJQTs7Ozs7b0JBQ0lBLE9BQU9BOzs7Ozs7Ozs7OzRCQUdoQ0EsaUJBQTZCQTs7Ozs7Z0JBRTdDQSx1QkFBa0JBO2dCQUNsQkEsNEJBQXVCQTs7OzswQ0FMZUEsV0FBcUJBLE9BQWFBO2dCQUFvQkE7OytCQVE1RUEsV0FBcUJBOztnQkFFckNBLG1CQUFtQkEsa0JBQVVBLDhCQUFzQkE7Z0JBQ25EQSxxQkFBcUJBOztnQkFFckJBLHFCQUFxQkEscUJBQWFBO2dCQUNsQ0EsSUFBSUE7b0JBQ0FBOzs7Z0JBRUpBO2dCQUNBQSxlQUFlQTtnQkFDZkEsMEJBQTBCQSw0QkFBNkVBLDJDQUF3QkEsQUFBMkRBOytCQUFRQSw0QkFBa0NBLGtGQUEwREEsT0FBT0E7Ozs7O3dCQUVqU0E7d0JBQ0FBLG1CQUFtQkEsS0FBSUE7d0JBQ3ZCQSxxQkFBcUJBLEtBQUlBO3dCQUN6QkE7d0JBQ0FBOzt3QkFFQUEsMkJBQXVCQSxvRUFBNENBLE9BQU9BOzs7O2dDQUV0RUEsa0JBQXlEQTtnQ0FDekRBLG9CQUEyREE7O2dDQUUzREEscUJBQXFCQTs7Z0NBRXJCQSwyQkFBcUJBOzs7O3dDQUVqQkEsaUJBQWlCQTt3Q0FDakJBLDZCQUE2QkE7O3dDQUU3QkEsSUFBSUEsNkJBQXdCQSxDQUFDQSw0RkFBcUNBOzRDQUM5REE7Ozt3Q0FFSkEsMEJBQTBCQSxxQkFBYUE7d0NBQ3ZDQSxJQUFJQSxxRkFBZ0NBLHdDQUFnQ0E7NENBRWhFQSxpQkFBaUJBOzRDQUNqQkEsY0FBY0EsU0FBK0NBLDhCQUF1QkEsNEJBQW9FQSxhQUF0Q0Esc0NBQTZDQTs7NENBRS9KQSxJQUFJQSxDQUFDQTtnREFDREE7OytDQUVIQSxJQUFJQSx3QkFBbUJBLFdBQVdBLE9BQU9BOzRDQUUxQ0EsZ0JBQWdCQSxTQUErQ0EsOEJBQXVCQSw0QkFBb0VBLGFBQXRDQSxzQ0FBNkNBOzs7Ozs7OztnQ0FJektBLG9CQUFvQkEsU0FBU0EsbUJBQW1CQTs7Z0NBRWhEQSxJQUFJQTtvQ0FFQUEsaUJBQWlCQTtvQ0FDakJBLG1CQUFtQkE7O29DQUluQkE7b0NBQ0FBLElBQUlBO3dDQUNBQSxtQkFBbUJBOzt3Q0FHbkJBO3dDQUNBQTs7Ozs7Ozs7O3dCQUtaQSxJQUFJQTs0QkFFQUEsSUFBSUEsb0JBQW9CQTtnQ0FFcEJBLFdBQVdBOztnQ0FFWEE7Z0NBQ0FBLHNCQUFvQkEsT0FBT0EsYUFBUUEsVUFBVUEsV0FBV0E7O2dDQUV4REEsSUFBSUEsQ0FBQ0E7b0NBQ0RBOzs7K0JBR1BBLElBQUlBOzRCQUVMQSw0QkFBNEJBLE9BQU9BLGtCQUFhQSxtQkFBbUJBLFdBQVdBOzs7Ozs7OztnQkFJdEZBLE9BQU9BOzs7Ozs7Ozs7dUNDdkZvQkEsV0FBcUJBLE9BQWFBLDBCQUF1Q0E7OztvQkFFcEdBLE9BQU9BLDRCQUFnQ0Esd0ZBQThCQSxXQUFXQSxPQUFPQSwwQkFBMEJBOzt5Q0FzQnRGQSxXQUFxQkEsT0FBYUEsV0FBZUE7OztvQkFFNUVBLDBCQUF5QkEsc0RBQWtEQSx1Q0FBK0JBOzs7OzRCQUV0R0Esa0JBQWtCQSxpQkFBU0E7NEJBQzNCQSxJQUFJQSw0QkFBNEJBLDJEQUFhQSxpQkFBa0NBLHNDQUFzQ0E7Z0NBQ2pIQTs7OzRCQUVKQSxJQUFJQSx3RUFBWUEsV0FBV0EsT0FBT0EsV0FBV0E7Z0NBQ3pDQTs7Ozs7Ozs7b0JBR1JBOzt5Q0FHMkJBLFdBQXFCQSxPQUFhQSxXQUFlQTtvQkFFNUVBLFNBQVNBOztvQkFFVEEsT0FBT0EseUJBQXlCQSxnQ0FBb0JBLHVCQUE2QkEsQUFBaUNBOzt3QkFFOUdBLElBQUlBLE1BQUtBOzRCQUNMQSxPQUFPQTs7O3dCQUVYQSxXQUFXQSxpQkFBU0E7d0JBQ3BCQSxRQUFRQSxTQUFTQSxpQkFBaUJBLGFBQWFBLGlCQUFpQkE7d0JBQ2hFQSxrQkFBa0JBLDRCQUFtQ0Esb0JBQWFBLEFBQXVDQSxVQUFDQSxPQUFPQTt1Q0FBTUEsaUJBQWlCQSxLQUFLQTs7O3dCQUU3SUE7d0JBQ0FBLFdBQVdBLDJCQUEyQkEsT0FBT0E7d0JBQzdDQSwwQkFBc0JBOzs7O2dDQUVsQkEsSUFBSUEsMERBQWtCQSxPQUFPQTtvQ0FDekJBLGNBQWNBLDBDQUFtQkE7Ozs7Ozs7O3dCQUd6Q0EsT0FBT0E7Ozt5REF2RDhDQSxXQUFxQkEsT0FBYUEsMEJBQXVDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnREFFbElBLElBQVFBO2dEQUNSQSxtQkFBdUJBLDRCQUFrQ0Esa0JBQVdBLEFBQWlDQTsrREFBS0EsU0FBU0E7OztnREFFbkhBLDBCQUEwQkE7Ozs7Ozs7Ozs7Ozs7OzRDQUV0QkEsSUFBUUEsdUNBQStCQTtnREFDdkNBLElBQUlBLDBCQUEwQkEsWUFBWUEsMEJBQTBCQTtvREFDaEVBOzs7O2dEQUVKQSxJQUFJQSx3RUFBWUEsV0FBV0EsT0FBT0E7Ozs7Ozs7OzRDQUU5QkEsa0JBQVVBLDhCQUFzQkEseUJBQXlCQSxPQUFPQTtnREFDaEVBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQWhDZkE7Ozs7O29CQUtBQTs7Ozs7Ozs7OzsrQkFHVUEsV0FBcUJBO2dCQUVyQ0EsT0FBT0Esc0VBQVlBLFdBQVdBLGFBQWFBOzs7Ozs7Ozs7Ozs7Ozs7a0NDTmpCQTs7Z0JBRTFCQSxZQUFZQSxVQUFJQSxtRUFBeUJBO2dCQUN6Q0EsY0FBU0E7O2dCQUVUQSxPQUFPQTs7Ozs7Ozs7OztvQkNUREE7Ozs7O29CQUtBQTs7Ozs7Ozs7OzsrQkFHVUEsV0FBcUJBOztnQkFFckNBLFFBQVFBOztnQkFFUkEsMEJBQWtCQTs7Ozt3QkFFZEEsY0FBUUEsU0FBU0EsU0FBU0E7d0JBQzFCQSxjQUFRQSxTQUFTQSxTQUFTQTs7d0JBRTFCQSxhQUFhQSxxQkFBYUEsU0FBS0EscUJBQWFBO3dCQUM1Q0EsYUFBYUEsNEJBQW9DQSxxQkFBTkE7O3dCQUUzQ0EsMkJBQWtCQTs7OztnQ0FFZEEsZUFBT0EsS0FBS0Esb0RBQWFBLE1BQVlBO2dDQUNyQ0EsZUFBT0EsS0FBS0Esb0RBQWFBLE1BQVlBOztnQ0FFckNBLElBQUlBLDJFQUFrQkEsUUFBUUEsV0FBV0EsQUFBeUVBOzsrQ0FBS0EsV0FBV0EsUUFBTUEsV0FBV0E7OztvQ0FFL0lBLGtCQUFVQSw4QkFBc0JBLHlCQUF5QkEsT0FBT0EsOENBQXVDQSwyQ0FBT0EsMkNBQU9BO29DQUNySEE7Ozs7Ozs7Ozs7Ozs7O2dCQUtaQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJDYllBOztnQkFFWkE7Z0JBQ0FBO2dCQUNBQSxjQUFTQTtnQkFDVEEsaUJBQVlBLElBQUlBLGtEQUFVQTs7Z0JBRTFCQSx3QkFBbUJBLElBQUlBOzs7OytCQUdQQSxVQUFtQkE7OztnQkFFbkNBLG1CQUFjQSxLQUFJQTtnQkFDbEJBLHFCQUFnQkEsS0FBSUE7Z0JBQ3BCQSxtQkFBY0EsSUFBSUE7Z0JBQ2xCQSxvQkFBZUEsSUFBSUEsOERBQWlCQSxnQkFBV0Esa0JBQWFBOztnQkFFNURBOztnQkFFQUEsd0JBQXdCQSxTQUFTQSxhQUFRQTtnQkFDekNBLHdCQUF3QkEsU0FBU0EsYUFBUUE7O2dCQUV6Q0E7Z0JBQ0FBLDBCQUEyQkEsK0RBQXVCQSxtQkFBbUJBOzs7O3dCQUVqRUEsdUJBQWtCQSxVQUFVQSxZQUFZQSxBQUEwREE7d0JBQ2xHQSxJQUFJQSx3QkFBd0JBOzRCQUN4QkE7Ozt3QkFFSkEsc0JBQWlCQTt3QkFDakJBO3dCQUNBQSx5QkFBb0JBLDRCQUFtQ0EsbUNBQUxBOzt3QkFFbERBLGlCQUFpQkEsQ0FBQ0EsZUFBUUEsQUFBMERBO3dCQUNwRkEsSUFBSUEsY0FBY0E7NEJBQ2RBOzs7d0JBRUpBLHVCQUFVQSxrQkFBa0JBOzs7Ozs7O2dCQUdoQ0EsT0FBT0EsNEJBQW9FQSx1QkFBVUE7O2lDQUc1RUE7OztnQkFFVEE7O2dCQUVBQSxrQkFBa0JBO2dCQUNsQkEsWUFBWUE7O2dCQUVaQSxLQUFLQSxRQUFRQSx3Q0FBNkJBLFFBQVFBO29CQUU5Q0EsU0FBU0EsK0JBQWtCQTs7b0JBRTNCQSxRQUFRQSxxQkFBWUE7b0JBQ3BCQSxJQUFJQSw4QkFBeUJBLGdCQUFXQTt3QkFFcENBLGdDQUEyQkE7d0JBQzNCQSxxQkFBZ0JBOzt3QkFFaEJBLElBQUlBLCtCQUFZQTs0QkFFWkEsUUFBUUEsb0NBQU1BLENBQUNBLGdCQUFjQSxzQ0FBMkJBOzRCQUN4REEsSUFBSUEsSUFBSUE7Z0NBRUpBLFNBQVNBLHNEQUE2REE7Z0NBQ3RFQSxRQUFRQTs7Ozs7O2dCQU14QkEsT0FBT0E7b0JBRUhBOztvQkFFQUEsWUFBWUE7O29CQUVaQSxLQUFLQSxTQUFRQSx3Q0FBNkJBLFNBQVFBO3dCQUU5Q0EsVUFBU0EsK0JBQWtCQTs7d0JBRTNCQSxTQUFRQSxxQkFBWUE7d0JBQ3BCQSxJQUFJQSwwQkFBcUJBLEtBQUlBOzRCQUV6QkEsZ0NBQTJCQTs0QkFDM0JBLHFCQUFnQkE7OzRCQUVoQkEsSUFBSUEsK0JBQVlBO2dDQUVaQSxTQUFRQSxvQ0FBTUEsQ0FBQ0EsZ0JBQWNBLHNDQUEyQkE7Z0NBQ3hEQSxJQUFJQSxLQUFJQTtvQ0FFSkEsU0FBU0EsU0FBdUJBLHFEQUE4Q0EsNkNBQVlBO29DQUMxRkEsUUFBUUE7Ozs7OztvQkFNeEJBLElBQUlBLGlDQUEyQkE7d0JBRTNCQSwwQkFBbUJBOzs7O2dDQUVmQSxTQUFRQSxxQkFBWUE7Z0NBQ3BCQSx1QkFBVUEsMkJBQWtCQSx1QkFBc0JBOzs7Ozs7O3dCQUd0REEsY0FBUUE7O3dCQUVSQSxzQkFBc0JBLGdDQUFvQkEsK0NBQTBDQSxBQUFpQ0E7d0JBQ3JIQSxJQUFJQTs0QkFFQUE7NEJBQ0FBLHVCQUFrQkEsNEJBQWtDQSw4QkFBa0JBLEFBQWlDQTs7d0NBRS9GQSxTQUFRQSxxQkFBWUE7d0NBQ3BCQSxPQUFPQSwyRUFBa0JBLE9BQU1BLDhFQUFzQ0EsZ0JBQVdBOztvREFDbENBLEFBQWtFQTs7NEJBR3hIQSxJQUFJQSx3QkFBbUJBO2dDQUNuQkEsdUJBQWtCQSxxQkFBWUEsNEJBQWtDQSw4QkFBa0JBLEFBQWlDQTs7Ozt3QkFHM0hBOzs7O2dCQUlSQTs7eUNBR21CQSxVQUFtQkEsWUFBZ0JBOzs7Z0JBRXREQSxhQUFhQSxLQUFJQTs7Z0JBRWpCQSxlQUFlQSxnQ0FBb0JBO2dCQUNuQ0EsYUFBYUEsZ0NBQW9CQTtnQkFDakNBLFVBQVVBOztnQkFFVkEsVUFBVUEsNEJBQXdDQSxrQkFBU0EsQUFBZ0NBOytCQUFLQSxTQUFTQSx5QkFBZUEsS0FBS0E7O2dCQUM3SEEsWUFBWUE7Z0JBQ1pBO2dCQUNBQSxZQUFZQSw0QkFBMkNBLHFDQUFhQSxBQUF1Q0EsVUFBQ0EsR0FBR0E7d0JBRXZHQSxJQUFJQSxNQUFLQTs0QkFDTEEsT0FBT0E7Ozt3QkFFWEEsT0FBT0EsTUFBSUEsbURBQWdDQSw0QkFBY0Esb0NBQWVBOzs7Z0JBR2hGQSwwQkFBK0JBLG9HQUFpR0EsNEJBQWdJQSxpQkFBU0EsQUFBeUhBO3dCQUU5WEEsSUFBSUEsTUFBS0E7NEJBQ0xBLE9BQU9BLHFGQUFrRkEsNEJBQWlDQSxhQUFPQSx1QkFBZUE7Ozt3QkFFcEpBLE9BQU9BLGlFQUFtQ0EsUUFBUUEsdUJBQWVBOzs7Ozt3QkFHakVBLFdBQVdBLDRCQUE0RUEsdUJBQTlDQTt3QkFDekNBLGtCQUFrQkEsNEJBQW9GQSxpQkFBS0EsQUFBeUhBO3dCQUNwT0EsSUFBSUEsY0FBY0E7NEJBQ2RBOzs7d0JBRUpBLGFBQWFBLDRCQUFpRkEsYUFBS0EsQUFBMEVBOzt3QkFFN0tBLElBQUlBLDBCQUFxQkEsQ0FBQ0EsNkdBQStDQSxRQUFRQTs0QkFDN0VBOzs7d0JBRUpBLFlBQVlBLElBQUlBLDhCQUFNQSxRQUFRQTs7d0JBRTlCQSxZQUFZQTt3QkFDWkEsV0FBV0E7O3dCQUVYQSxJQUFJQSxlQUFlQTs0QkFFZkEscUJBQVlBLGtCQUFlQTs0QkFDM0JBLHVCQUFjQSxPQUFTQTs7NEJBRXZCQTs7O3dCQUdKQSxJQUFJQSwrQkFBWUE7NEJBRVpBLFFBQVFBLG9CQUFLQSxBQUFDQSxpQ0FBTUEsY0FBVUE7NEJBQzlCQSxJQUFJQSxJQUFJQTtnQ0FFSkEsU0FBU0EsNENBQW1EQTtnQ0FDNURBLFFBQVFBOzs7O3dCQUloQkE7Ozs7Ozs7Ozs7Ozs7O21CQWxGOEhBLDRCQUFnQ0EsNEJBQWtCQSxBQUFpQ0E7MkJBQU1BLDhFQUFzQ0EsZ0JBQVdBLHFCQUFZQSxNQUFLQTs7OzttQkFRbkpBLHFCQUFZQTs7O21CQUliQSw4RUFBc0NBLGdCQUFXQSxxQkFBWUE7OzttQkFzQ3lDQTs7O21CQUl0REE7Ozs7Ozs7Ozs7Ozs7Ozs7a0NDbkx4S0EsTUFBZUE7Z0JBRWhDQSxZQUFZQTtnQkFDWkEsY0FBU0E7OzhCQUdlQTtnQkFFeEJBLFNBQVNBO2dCQUNUQSxJQUFJQSxNQUFNQTtvQkFDTkE7OztnQkFFSkEsT0FBT0EsZ0JBQWdCQTs7O2dCQUt2QkEsT0FBT0E7Ozs7Ozs7OzJCQ3pCS0EsZUFBMkJBLEdBQU9BLEdBQU9BOztnQkFFckRBLFNBQUlBLFVBQUlBLHVGQUVRQSw0QkFBa0ZBLHNCQUFjQSxBQUEyRUEsK0lBQy9LQSxhQUNEQSxpQkFDSUEsaUNBQ0lBOzs7Ozs7Ozs7bUJBSmtMQTs7Ozs7Ozs7Ozs0QkNGbExBOzs7Z0JBRW5CQSxxQkFBZ0JBOzs7OzhCQUdvQkEsR0FBd0JBO2dCQUU1REEsT0FBT0EsNkdBQXFIQSxHQUFFQSxBQUF1R0E7MkJBQUtBLDJCQUFzQkEsR0FBR0E7Ozs7Ozs7Ozs7Ozs0QkNMbk9BLE1BQW9CQTs7Ozt1R0FDN0NBLE1BQU1BOzs7Ozs7O2dCQU9iQSxhQUFRQSxLQUFJQTs7Z0JBRVpBLDBCQUFxQkEsS0FBSUE7O2dCQUV6QkEsY0FBY0EsZ0NBQW9CQTtnQkFDbENBLG1CQUFtQkEsNEJBQXNFQSw0Q0FBeUJBLHVCQUFqRUE7O2dCQUVqREE7O2dCQUVBQSxvQkFBb0JBLElBQUlBLG9FQUFVQSxjQUFTQTtnQkFDM0NBLGVBQVVBO2dCQUNWQTs7Z0JBRUFBLHNCQUFzQkEsNEJBQXlHQSxxQ0FBd0JBO2dCQUN2SkEsZ0JBQWdCQSw0QkFBeUdBLGtDQUEzRUE7Z0JBQzlDQSxPQUFPQTtvQkFFSEEsZ0JBQWdCQSxJQUFJQSxvRUFBVUEsV0FBTUE7b0JBQ3BDQSxlQUFVQTs7b0JBRVZBLHNCQUFzQkEsS0FBSUE7b0JBQzFCQSxrQkFBa0JBLEtBQUlBO29CQUN0QkEsMEJBQXNCQTs7Ozs0QkFFbEJBLElBQUlBLHFCQUFxQkE7Z0NBQ3JCQTs7OzRCQUVKQSxlQUFlQSx5QkFBb0JBOzRCQUNuQ0Esa0JBQWtCQSw0QkFBc0xBLGlCQUFTQSxBQUErS0E7MkNBQU1BLElBQUlBLHlFQUFlQSxjQUFjQSxVQUFVQSxTQUFTQSxhQUFhQTs7OzRCQUV2Y0EsSUFBSUEsOEdBQXNIQSxhQUFZQTtnQ0FFbElBLG9CQUFvQkE7Z0NBQ3BCQSxnQkFBZ0JBO2dDQUNoQkEsNEJBQW1CQSxPQUFTQSxLQUFJQTs7Z0NBRWhDQSxJQUFJQTtvQ0FFQUEsMkJBQWtCQTs7Ozs0Q0FFZEEsU0FBU0EsY0FBY0EsR0FBR0E7NENBQzFCQSxJQUFJQSxtQkFBbUJBLE9BQU9BLHFCQUFxQkE7Z0RBQy9DQTs7OzRDQUVKQTs0Q0FDQUEsMkJBQW1CQTs7OztvREFFZkEsSUFBSUEsQ0FBQ0EsbUJBQW1CQSxXQUFXQSxHQUFHQTt3REFFbENBO3dEQUNBQTs7Ozs7Ozs7NENBSVJBLElBQUlBO2dEQUVBQSw0QkFBbUJBLFdBQVdBLFNBQXVDQSxVQUFHQTtnREFDeEVBLGdCQUFnQkE7Ozs7Ozs7Ozs7Ozs7OztvQkFPcENBLDJCQUFzQkE7Ozs7NEJBRWxCQSxtQkFBbUJBOzs7Ozs7O29CQUd2QkEsMkJBQXNCQTs7Ozs0QkFFbEJBLGNBQWNBOzRCQUNkQSx1QkFBdUJBOzs7Ozs7O29CQUczQkE7OztnQkFHSkEsSUFBSUE7b0JBRUFBLDJCQUFzQkEsNEJBQStHQSxvQ0FBc0JBLEFBQXVHQTs7Ozs0QkFFOVBBLGVBQWVBLFdBQUlBLG9FQUFVQSxXQUFNQSxZQUFZQSw2SEFBcURBOzRCQUNwR0EsZUFBVUE7Ozs7Ozs7OzRDQUtzQkEsR0FBa0JBO2dCQUUxREEsaUJBQWlCQSxJQUFJQSx5RUFBZUEsVUFBVUEsVUFBVUEsU0FBU0EsYUFBYUE7Z0JBQzlFQSxJQUFJQSxzQ0FBeUJBO29CQUN6QkE7OztnQkFFSkEsT0FBT0EsOEJBQWtDQSwrR0FBdUhBLDRCQUF5R0EscUJBQVNBLEFBQXlHQTsrQkFBTUEsNEJBQXVMQSxzQkFBVUEsQUFBNE5BLGlJQUE0b0JBOzs7Ozs7Ozs7O21CQWQvcENBLDBCQUFxQkE7OzttQkFja25DQTs7O21CQUE5bUJBLDRCQUF3R0EsbUJBQVFBLCtFQUFLQSw0QkFBaVBBLDRCQUFtQkEsWUFBSUEsQUFBME9BOzs7Ozs7Ozs7Ozs7O3VDQ3ZFcjNDQTs0Q0FFa0NBLEtBQUlBOzs7OzhCQXJDeEJBLEdBQXdCQTtnQkFFNURBLE1BQU1BLElBQUlBOzsrQkFHd0JBO2dCQUVsQ0EsaUJBQWlCQSxLQUFJQTtnQkFDckJBLEtBQUtBLFdBQVdBLElBQUlBLGVBQWVBO29CQUMvQkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsZUFBZUE7d0JBQ25DQSxlQUFlQSxTQUFvQkEsVUFBR0E7Ozs7Z0JBRTlDQSxPQUFPQSw0QkFBbUVBLG9CQUFXQSxBQUEyREE7K0JBQU1BLHlDQUFDQSxnQ0FBYUEsVUFBYkEsbUJBQXlCQSxnQ0FBYUEsVUFBYkE7OEJBQzFFQSxBQUFtSUE7OzJCQUFNQSxVQUFJQSxtRkFBOEJBLHVCQUFvQkEsc0JBQWlCQSxJQUFJQTs7O3dDQUduUkEsUUFBd0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d0NBRS9EQSxJQUFRQTs0Q0FDUkEsSUFBUUE7OzRDQUVSQSxJQUFRQSxnQ0FBYUEsR0FBYkE7NENBQ1JBLElBQVFBLGdDQUFhQSxHQUFiQTs0Q0FDUkEsWUFBZ0JBLE1BQUlBOzs0Q0FFcEJBLDBCQUE4QkEsdUJBQWtCQTs7Ozs7Ozs7Ozs7Ozs7d0NBRTVDQSx1QkFBa0JBOzRDQUNsQkEsWUFBZ0JBLGdDQUFvQkEsNkNBQXVDQSxBQUFrQ0Esc0dBQWdDQSxBQUFtQ0E7OzRDQUVoTEEsc0JBQWFBLFdBQUlBLHVGQUFpQ0EsMkJBQXVCQSxpQkFBNEZBLEFBQXdHQTt1REFBWUEsSUFBSUEseUVBQWVBLGNBQWNBLEdBQUdBLEdBQUdBLFVBQVVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3lDQVEzVEE7Z0JBRW5CQSwyQkFBc0JBLEtBQUtBO2dCQUMzQkEsa0JBQWtCQTtnQkFDbEJBLE9BQU9BLGVBQWVBO29CQUNsQkE7O2dCQUNKQSxJQUFJQSxjQUFjQTtvQkFDZEEsdUJBQWtCQSxrQkFBVUE7OztnQkFFaENBO2dCQUNBQSxPQUFPQSxTQUFTQTtvQkFFWkE7b0JBQ0FBLGNBQVFBOztvQkFFUkEsT0FBT0E7d0JBQ0hBLHVCQUFZQSxzQkFBY0EscURBQThDQTs7O29CQUU1RUEsd0NBQWdCQSxRQUFoQkEseUJBQTBCQTtvQkFDMUJBOzs7eUNBSTRCQTs7Z0JBRWhDQTtnQkFDQUEsSUFBSUEsQ0FBQ0Esc0NBQWlDQSxXQUFlQTtvQkFFakRBLFdBQVdBO29CQUNYQSxpQkFBaUJBLGdFQUFnRUE7b0JBQ2pGQSxZQUFVQSxLQUFJQSxxRkFBa0JBOztvQkFFaENBLDBCQUEwQkE7Ozs7NEJBRXRCQSxhQUFhQSxLQUFJQSxrREFBWUE7NEJBQzdCQSxjQUFZQTs7NEJBRVpBLDJCQUFxQkE7Ozs7b0NBRWpCQTtvQ0FDQUEsMkJBQWtCQTs7Ozs0Q0FDZEEsU0FBS0EsYUFBS0E7Ozs7Ozs7b0NBRWRBLFdBQVdBOzs7Ozs7Ozs7Ozs7O29CQUluQkEsOEJBQXFCQSxXQUFhQTs7O2dCQUd0Q0EsT0FBT0E7Ozs7Ozs7OzttQkE1RCtHQSx3Q0FBZ0JBLEdBQWhCQTs7O21CQUFvRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkNmNUpBLE9BQU9BOzs7Ozs7Ozs7Ozs7OztvQkFXaUJBLE9BQU9BOzs7Ozs7OztvQkFJWEEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7OzRCQUt4Q0EsR0FBU0Esa0JBQStCQTs7Ozs7Z0JBRXpEQSxjQUFTQTtnQkFDVEE7O2dCQUVBQSx5QkFBb0JBLElBQUlBLDZFQUEwQkEsaUJBQVlBO2dCQUM5REEscUJBQWdCQSxJQUFJQSx5RUFBc0JBLEtBQUtBLGtCQUFrQkEsb0JBQW9CQTtnQkFDckZBLGtCQUFhQSxLQUFJQTtnQkFDakJBLHdCQUFtQkEsS0FBSUE7O2dCQUV2QkEsd0JBQW1CQTs7OzsrQkFHSEEsVUFBbUJBOztnQkFFbkNBO2dCQUNBQTtnQkFDQUEsdUJBQWtCQSxLQUFJQTtnQkFDdEJBLHVCQUFrQkE7Z0JBQ2xCQSwwQkFBcUJBLEtBQUlBO2dCQUN6QkEsdUJBQWtCQSxLQUFJQTtnQkFDdEJBLHdCQUFtQkEsS0FBSUE7O2dCQUV2QkEsSUFBSUEsa0JBQWFBO29CQUNiQSxpQkFBWUEsSUFBSUEsbUVBQWdCQTs7O2dCQUVwQ0E7O2dCQUVBQSx3QkFBd0JBLFNBQVNBLGFBQVFBO2dCQUN6Q0Esd0JBQXdCQSxTQUFTQSxhQUFRQTs7Z0JBRXpDQTtnQkFDQUE7Z0JBQ0FBLEtBQUtBLGlCQUFpQkEsbUJBQW1CQSxjQUFjQSxtQkFBbUJBO29CQUV0RUEsdUJBQWtCQSxVQUFVQSxZQUFZQSxBQUEwREE7b0JBQ2xHQSxJQUFJQTt3QkFFQUEsSUFBSUE7NEJBQ3hCQSwwR0FBMElBLHVCQUFpQkEsQUFBdUdBLGtHQUFvREEsQUFBbUdBOzs0QkFFelpBLDBHQUEwSUEsdUJBQWlCQSxBQUF1R0Esa0dBQXNDQSxBQUFtR0E7Ozs7b0JBRzNYQSxJQUFJQSx3QkFBd0JBO3dCQUN4QkE7OztvQkFFSkEsdUJBQWtCQSwrQkFBeUJBO29CQUMzQ0E7O29CQUVBQSx5QkFBWUEsZUFBUUEsQUFBMERBOzs7Z0JBR2xGQSxPQUFPQTs7aUNBR0VBOzs7Z0JBRVRBO2dCQUNBQSxrQkFBa0JBO2dCQUNsQkEsWUFBWUE7O2dCQUVaQSxxQkFBZ0JBLEtBQUlBO2dCQUNwQkEsbUJBQWNBLEtBQUlBO2dCQUNsQkEseUJBQW9CQTtnQkFDcEJBLHFCQUFnQkE7O2dCQUVoQkEsS0FBS0EsUUFBUUEsdUNBQTRCQSxRQUFRQTtvQkFFN0NBLFFBQVFBLDhCQUFpQkE7b0JBQ3pCQSxJQUFJQSwrQkFBMEJBO3dCQUUxQkEsK0JBQTBCQTt3QkFDMUJBLG9CQUFlQTt3QkFDZkEseUJBQW9CQTs7O29CQUd4QkEsSUFBSUEsK0JBQVlBO3dCQUVaQSxRQUFRQSxvQ0FBTUEsQ0FBQ0EsZ0JBQWNBLHFDQUEwQkE7d0JBQ3ZEQSxJQUFJQSxJQUFJQTs0QkFFSkEsU0FBU0Esc0RBQTZEQTs0QkFDdEVBLFFBQVFBOzs7OztnQkFLcEJBLHVCQUFjQSxXQUFhQSw0QkFBeUdBLHdCQUEzRUE7Z0JBQ3pEQSxxQkFBZ0JBOztnQkFFaEJBLDZCQUE2QkEsS0FBSUE7O2dCQUVqQ0EsS0FBS0EsU0FBUUEsdUNBQTRCQSxTQUFRQTtvQkFFN0NBLFNBQVFBLDhCQUFpQkE7b0JBQ3pCQSxJQUFJQSxDQUFDQSxxQkFBZ0JBO3dCQUVqQkEsSUFBSUEsMENBQXFDQTs0QkFFckNBOzRCQUNBQSx1QkFBa0JBOzs0QkFFbEJBLElBQUlBLENBQUNBO2dDQUNEQTs7Ozt3QkFHUkEsK0JBQTBCQTt3QkFDMUJBLDJCQUEyQkE7OztvQkFHL0JBLElBQUlBLCtCQUFZQTt3QkFFWkEsU0FBUUEsb0NBQU1BLENBQUNBLGdCQUFjQSxxQ0FBMEJBO3dCQUN2REEsSUFBSUEsS0FBSUE7NEJBRUpBLFNBQVNBLDhEQUFxRUE7NEJBQzlFQSxRQUFRQTs7Ozs7Z0JBS3BCQSxJQUFJQSxvQ0FBb0NBLENBQUNBO29CQUVyQ0EsSUFBSUEsQ0FBQ0EsMENBQXFDQSxDQUFDQTt3QkFFdkNBO3dCQUNBQSx1QkFBa0JBO3dCQUNsQkEsK0JBQTBCQTs7d0JBRTFCQSxJQUFJQSxDQUFDQTs0QkFDREE7OzJCQUVIQSxJQUFJQSwyQ0FBc0NBO3dCQUUzQ0E7d0JBQ0FBO3dCQUNBQSx1QkFBa0JBO3dCQUNsQkEsK0JBQTBCQTt3QkFDMUJBLElBQUlBLENBQUNBOzRCQUNEQTs7Ozs7Z0JBSVpBLHFCQUFnQkE7Z0JBQ2hCQSxpQ0FBNEJBOztnQkFFNUJBLE9BQU9BO29CQUVIQSxZQUFZQTtvQkFDWkE7O29CQUVBQSw4QkFBd0JBLDRCQUFrREEsc0JBQWlCQSx1QkFBa0JBLG9DQUFZQSxBQUFnQ0E7b0JBQ3pKQSxnQkFBZ0JBLDRCQUF3R0EsNkJBQWlCQSxBQUE0R0E7NkNBQUNBLElBQUdBO3VDQUFNQSw2QkFBMkJBOzs7b0JBQzFSQSwwQkFBa0JBOzs7OzRCQUNkQSxvQkFBZUE7Ozs7OztxQkFDbkJBLHVCQUFjQSxXQUFhQTs7b0JBRTNCQSwyQkFBa0JBOzs7OzRCQUNkQSwrQkFBMEJBOzs7Ozs7O29CQUU5QkEsSUFBSUEsK0JBQVlBO3dCQUVaQSxTQUFRQSxvQ0FBTUEsQ0FBQ0EsZ0JBQWNBLHFDQUEwQkE7d0JBQ3ZEQSxJQUFJQSxLQUFJQTs0QkFFSkEsU0FBU0EsU0FBdUJBLHFEQUE4Q0EsNkNBQVlBOzRCQUMxRkEsUUFBUUE7Ozs7b0JBSWhCQSxxQkFBZ0JBOztvQkFFaEJBLElBQUlBLGdDQUEwQkE7d0JBRTFCQSwrQkFBMEJBOzt3QkFFMUJBLElBQUlBLHdCQUFtQkE7NEJBQ25CQSx1QkFBa0JBOzs7d0JBRXRCQSxJQUFJQSwwQ0FBcUNBOzRCQUVyQ0E7K0JBRUNBLElBQUlBLDJDQUFzQ0E7NEJBRTNDQTs0QkFDQUEsdUJBQWtCQSw0QkFBaUhBLHNDQUFpQkEsQUFBdUdBOzs0QkFFM1BBLElBQUlBLHdCQUFtQkE7Z0NBQ25CQSx1QkFBa0JBLDRCQUF3R0EsNkJBQWlCQSxBQUF1R0E7Ozs7d0JBRzFQQTs7OztnQkFJUkE7OzhDQUd3QkEsT0FBc0JBO2dCQUU5Q0EsT0FBT0EsNENBQXVDQSxPQUFPQTs7NkRBR2RBO2dCQUV2Q0EsT0FBT0EsZ0NBQW9CQSx1QkFBa0JBLEFBQWlDQTsyQkFBS0EsNEJBQXNHQSxZQUFPQSxBQUF1R0E7bUNBQUtBLDRCQUF1QkEsR0FBR0E7Ozs7a0RBR25TQTtnQkFFbkNBLE9BQU9BLGdDQUFvQkEsdUJBQWtCQSxBQUFpQ0E7MkJBQUtBLDRCQUF1QkEsT0FBT0E7Ozs7Z0JBS2pIQSxZQUFZQSxnQ0FBb0JBLDBCQUF5SUEsQUFBK0lBO2dCQUN4VEEsZ0JBQWdCQSw0QkFBaUpBLGFBQU1BLEFBQWdKQTs7dUNBRy9SQTtnQkFFeEJBOztnQkFFQUE7Z0JBQ0FBLE9BQU9BLFVBQVNBLENBQUNBLHFCQUFPQTtvQkFFcEJBO29CQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxXQUFXQTt3QkFDM0JBLGlCQUFTQSwyREFBQ0EsV0FBU0EsNEJBQVNBLEdBQVRBOzs7b0JBRXZCQSxRQUFRQSxvQkFBZUE7b0JBQ3ZCQSxJQUFJQSxRQUFRQTt3QkFDUkE7OztvQkFFSkE7OztnQkFHSkEsSUFBSUE7b0JBQ0FBLE9BQU9BLFNBQVNBLGtCQUFXQTs7O2dCQUUvQkE7OytDQUcrQkE7Z0JBRS9CQTtnQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsV0FBV0E7b0JBQzNCQSxpQkFBU0Esc0ZBQVNBLEdBQVRBOzs7Z0JBRWJBLE9BQU9BLFVBQVFBOztzREFHc0JBO2dCQUVyQ0EsYUFBYUEsS0FBSUE7O2dCQUVqQkE7Z0JBQ0FBLE9BQU9BLFVBQVNBLENBQUNBLHFCQUFPQTtvQkFFcEJBO29CQUNBQSxJQUFJQSxDQUFDQSx3QkFBbUJBLEdBQUdBLFFBQVlBO3dCQUNuQ0EsV0FBV0E7O29CQUNmQTs7O2dCQUdKQTs7Z0JBRUFBLE9BQU9BOzswQ0FHYUEsR0FBa0JBLFFBQWNBO2dCQUVwREEsTUFBSUEsb0JBQWVBOztnQkFFbkJBO2dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxXQUFXQTtvQkFFM0JBLFNBQVNBLCtCQUFDQSxXQUFTQSw0QkFBU0EsR0FBVEE7b0JBQ25CQSxpQkFBU0Esc0NBQThCQSwwQkFBcUJBOzs7Z0JBR2hFQSxPQUFPQSxTQUFTQTs7eUNBR0dBLFVBQW1CQSxZQUFnQkE7OztnQkFFdERBLElBQUlBLCtCQUFZQTtvQkFDWkEsU0FBU0E7OztnQkFFYkEsMEJBQWtCQSw4Q0FBOENBLGdCQUFnQkE7Ozs7d0JBRTVFQSxRQUFRQSxJQUFJQSx1RUFBZUEsR0FBR0E7d0JBQzlCQSwwQkFBcUJBOzs7Ozs7OztnQkFNekJBLGVBQWVBO2dCQUNmQSxRQUFRQTs7Z0JBRVJBLGNBQVNBLEtBQUlBO2dCQUNiQSxLQUFLQSxXQUFXQSxJQUFJQSxHQUFHQTtvQkFDbkJBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLEdBQUdBO3dCQUN2QkEsSUFBSUEsY0FBU0EsR0FBR0E7NEJBQ1pBLGdCQUFXQSxTQUFvQkEsVUFBR0E7Ozs7O2dCQUU5Q0EsWUFBWUEsaURBQVNBLG1CQUFjQTtnQkFDbkNBLEtBQUtBLFlBQVdBLEtBQUlBLG1CQUFjQTtvQkFDOUJBLEtBQUtBLFNBQVFBLGNBQU9BLEtBQUlBLG1CQUFjQTt3QkFDbENBLElBQUlBLG9CQUFPQSxjQUFZQSxvQkFBT0EsYUFDMUJBLG9CQUFPQSxjQUFZQSxvQkFBT0EsYUFDMUJBLG9CQUFPQSxjQUFZQSxvQkFBT0EsYUFDMUJBLG9CQUFPQSxjQUFZQSxvQkFBT0E7NEJBQzFCQSxXQUFNQSxJQUFHQSxLQUFLQSxZQUFNQSxJQUFHQTs7Ozs7Z0JBRW5DQSxrQkFBYUEsSUFBSUEsc0JBQU1BOzt3Q0FHTEEsR0FBa0JBO2dCQUVwQ0EsU0FBU0Esb0JBQU9BO2dCQUNoQkEsU0FBU0Esb0JBQU9BO2dCQUNoQkEsYUFBYUE7O2dCQUViQSxPQUFPQSwwQkFBT0EsSUFBUEEsYUFBYUEsMEJBQU9BLElBQVBBOztzQ0FHV0E7Z0JBRS9CQSxPQUFPQSxtQ0FBMEJBOztxQ0FJUEEsT0FBc0JBOztnQkFFaERBLGlCQUFrQkEsS0FBSUE7Z0JBQ3RCQTtnQkFDQUEsT0FBT0EscUJBQWNBLE9BQU9BLFlBQVlBOzt1Q0FHckJBLE9BQXNCQSxZQUE0Q0EsS0FBaUJBOzs7O2dCQUV0R0EsZUFBV0EsT0FBU0E7Z0JBQ3BCQSxXQUFXQSxVQUFJQSwwRUFBcUJBLHVCQUFvQkE7Z0JBQ3hEQSxtQkFBbUJBLCtCQUEwQkE7Z0JBQzdDQSx1QkFBdUJBLE9BQU9BLHFCQUFnQkE7Z0JBQzlDQSxxQkFBcUJBO2dCQUNyQkE7O2dCQUVBQSxJQUFJQTtvQkFDQUEsT0FBT0E7OztnQkFFWEEsSUFBSUEsQ0FBQ0E7b0JBQ0RBLE9BQU9BOzs7Z0JBRVhBO2dCQUNBQSxJQUFJQTtvQkFDQUEsMkNBQXNDQSxPQUFXQTs7b0JBRWpEQSw0Q0FBdUNBLE9BQVdBOzs7Z0JBRXREQSxJQUFJQSxjQUFZQTtvQkFFWkEsc0JBQXNCQSxLQUFJQTtvQkFDMUJBLDBCQUFtQkE7Ozs7NEJBRWZBLGlCQUFpQkEsSUFBSUEseUVBQWVBLGNBQWNBLFVBQVVBLFNBQVNBLGFBQWFBOzRCQUNsRkEsSUFBSUEseUJBQXlCQTtnQ0FDekJBOzs0QkFDSkEsb0JBQW9CQTs7NEJBRXBCQSxJQUFJQSxDQUFDQSxPQUFPQSx1QkFBdUJBO2dDQUMvQkE7Ozs0QkFFSkEsZ0JBQWdCQSxxQkFBY0EsWUFBWUEsWUFBWUEsS0FBS0E7NEJBQzNEQSxnQkFBY0EsV0FBV0E7Ozs7Ozs7O2dCQUlqQ0EsT0FBT0E7Ozs7Ozs7OzttQkF2Vm9QQSxDQUFDQSw0QkFBdUJBLEdBQUdBOztzQkFBd0hBOzttQkFFbkpBLENBQUNBLGdDQUEyQkE7OzttQkErR3JIQTs7O21CQW1DMEdBLDRDQUF1Q0E7OzttQkE4QlVBLDRCQUF3R0EsNkJBQWlCQSxBQUF1R0E7MkJBQUtBLDRDQUF1Q0EsR0FBR0E7Ozs7bUJBQ3BEQSxxQkFBZ0JBOzs7bUJBQXpPQSw0QkFBc0dBLFVBQUtBLEFBQXVHQTs7Ozs7Ozs7OztvQkN2UHhmQTs7Ozs7b0JBSW5CQTs7Ozs7Ozs7Ozs0QkFHaUJBOzs7O2dCQUV2QkEsb0JBQWVBLDRCQUF3RkEscUJBQTFEQTs7OzsrQkFHN0JBLFdBQXFCQTs7Z0JBRXJDQSwwQkFBeUJBOzs7O3dCQUVyQkE7d0JBQ0FBO3dCQUNBQSxJQUFJQSxpREFBNENBLFdBQVdBLE9BQU9BLFVBQWNBLE9BQVdBOzRCQUV2RkEsa0JBQVVBLDhCQUFzQkEseUJBQXlCQSxPQUFPQSxrREFBMkNBLDJDQUFPQTs0QkFDbEhBOzs7Ozs7OztnQkFJUkE7O21FQUc2Q0EsV0FBcUJBLE9BQWFBLFVBQW1CQSxPQUFlQTs7Z0JBRWpIQSxVQUFRQTtnQkFDUkEsTUFBSUE7Z0JBQ0pBLFFBQVFBO2dCQUNSQSxnQkFBZ0JBLDRCQUFpRkEscUJBQWFBLEFBQTBFQTtnQkFDeExBLFdBQVdBLGdDQUFvQkEsdUJBQXVCQSxBQUFpQ0E7MkJBQUtBLGtCQUFVQSxXQUFXQSx1QkFBZUE7O2dCQUNoSUEsSUFBSUEsYUFBYUE7b0JBQ2JBOzs7Z0JBRUpBLGlCQUFpQkEsZ0NBQW9CQSx1QkFBdUJBLEFBQWlDQTsyQkFBS0Esa0JBQVVBLGFBQVlBLHlCQUFlQTs7Z0JBQ3ZJQSxJQUFJQTtvQkFDQUE7OztnQkFFSkEsTUFBSUE7Z0JBQ0pBLDBCQUFrQkEsNEJBQW1DQSxrQkFBVUEsYUFBZkE7Ozs7d0JBRTVDQSxrQkFBVUEsWUFBVUE7O3dCQUVwQkEsSUFBSUEsMkVBQWtCQSw0QkFBaUZBLGtCQUFVQSxBQUEwRUEsNkZBQTZCQTs0QkFFcE5BLFVBQVFBOzRCQUNSQTs7O3dCQUdKQSxrQkFBVUEsU0FBT0E7Ozs7Ozs7Z0JBR3JCQTs7Ozs7Ozs7O21CQXZCNkxBOzs7bUJBY09BOzs7Ozs7Ozs7OzsrQnpFb1VqTEEsR0FBU0E7Z0JBRXhCQSxPQUFPQSw0QkFBaUJBLEdBQUdBOztvQ0FFUkE7Z0JBRW5CQTs7Ozs7Ozs7Ozs7OztxQzBFMVhtQ0EsS0FBSUE7Ozs7Ozs7Ozs0QkFFbkJBOzs7Z0JBRXhCQSxjQUFTQSxJQUFJQSxnRUFBa0NBO2dCQUMvQ0EsNkJBQXdCQSxJQUFJQSx1REFBeUJBOzs7OzhDQUdiQTtnQkFFeENBLGdDQUEyQkEsQUFBaUhBO29CQUFLQSxZQUFZQSw0QkFBcUZBLFVBQUVBLEFBQThFQTs7O2tEQUcvUkE7Z0JBRW5DQSxrQ0FBNkJBLGFBQVFBLEtBQUlBLDhFQUFrQkEsQUFBZ0hBOztvREFHN0lBLEdBQWtCQSxXQUEwQkE7O2dCQUUxRUE7O2dCQUVBQSx3QkFBd0JBLDRCQUE4RUEsa0JBQWhEQTtnQkFDdERBLFFBQVFBLDRCQUE4RUEsVUFBRUE7O2dCQUV4RkEsMEJBQWtCQTs7Ozt3QkFFZEEsUUFBUUEsaUJBQVVBLDRCQUE4RUEsVUFBRUEsbUJBQVFBLDhDQUFNQTs7d0JBRWhIQSxJQUFJQSxLQUFLQSxRQUFRQTs0QkFFYkE7NEJBQ0FBLGtDQUE2QkEsR0FBR0EsbUJBQW1CQSxBQUFnSEE7Ozt3QkFHdktBLHNCQUFzQkE7Ozs7Ozs7Z0JBRzFCQSxJQUFJQSxDQUFDQTtvQkFFREEsMkJBQWtCQTs7Ozs0QkFFZEEsU0FBUUEsZUFBVUEsNEJBQThFQSxVQUFFQSxtQkFBUUE7NEJBQzFHQSxJQUFJQTtnQ0FFQUE7Z0NBQ0FBOzs7Ozs7OztvQkFJUkEsSUFBSUEsQ0FBQ0E7d0JBQ0RBLFlBQVlBOzs7O21DQUlDQSxHQUF5QkE7O2dCQUU5Q0EsUUFBUUEsNEJBQThFQSxVQUFoREE7Z0JBQ3RDQSxRQUFRQSxLQUFJQSxxRkFBa0JBLDRCQUE4RUEsb0JBQU9BO2dCQUNuSEE7b0JBRUlBLElBQUlBLDRCQUEyRUEsZUFBVUEsQUFBNEVBO21DQUFLQSx3Q0FBbUNBLEdBQUdBOzt3QkFDNU1BLE9BQU9BOzs7b0JBRVhBLGVBQWVBLDRCQUE4RUEsVUFBRUEsaUJBQ3hFQSxBQUE0RUE7K0JBQUtBLHdDQUFtQ0EsR0FBR0E7OztvQkFHOUlBLDBCQUFrQkE7Ozs7NEJBRWRBLFNBQVNBOzRCQUNUQSxNQUFNQTs7Ozs7OztvQkFHVkEsSUFBSUE7d0JBQ0FBOzs7O2dCQUdSQSxPQUFPQTs7aUNBR2NBO2dCQUVyQkEsT0FBT0EsaUJBQVVBLEdBQUdBOzsrQkFHVEE7O2dCQUVYQSxTQUFTQSxrQkFBU0E7Z0JBQ2xCQSxnQkFBZ0JBLDRCQUFrRkEsaUJBQVNBLEFBQTJFQTtnQkFDdExBLEtBQUtBLFdBQVdBLElBQUlBLGlCQUFpQkE7b0JBQ2pDQSwwQkFBa0JBLGtCQUFVQTs7Ozs0QkFDeEJBLHNCQUFHQSxHQUFIQSw2QkFBR0EsR0FBSEEsUUFBU0EscUJBQU1BOzs7Ozs7OztnQkFFdkJBLE9BQU9BLGVBQXNCQSw0QkFBeUNBLFdBQUdBLEFBQWtDQTs7O2dCQWUzR0EsT0FBT0EsNEJBQXVLQSwyQ0FBOEJBLEFBQWdLQTs7O2dCQUs1V0EsZUFBZUEsS0FBSUEsd0hBQXdCQSxJQUFJQTtnQkFDL0NBLE9BQU9BLG1DQUE4QkEsYUFBUUEsVUFBVUEsS0FBSUE7O3FEQUdMQSxHQUFrQkEsVUFBa0NBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7d0NBRTFHQTs7NENBRUFBLDBCQUFrQkE7Ozs7Ozs7Ozs7Ozs7O3dDQUVkQSxJQUFRQSxlQUFVQSw0QkFBOEVBLFVBQUVBLG1CQUFRQTs0Q0FDMUdBLElBQUlBO2dEQUNBQTs7Ozs0Q0FFSkE7OzRDQUVBQSxJQUFJQSxtRkFBMkZBLFdBQVVBLE1BQU1BLENBQUNBLGtCQUFrQkE7Ozs7Ozs7O3dDQUU5SEEsMkJBQW1CQSxtQ0FBOEJBLEdBQUdBLFVBQVVBLDRCQUE4RUEsa0JBQWhEQTs7Ozs7Ozs7Ozs7Ozs7d0NBQ3hGQSxzQkFBYUE7Ozs7Ozs7Ozs7Ozs7d0NBR3JCQSxhQUFhQTs0Q0FDYkEsY0FBY0E7Ozs7O3dDQUdsQkEsSUFBSUEsQ0FBQ0E7Ozs7Ozs7O3dDQUNEQSxzQkFBYUEsNEJBQThFQSxVQUFoREE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7bUJBbkl3UkEsYUFBUUE7OzttQkErRXBKQTs7O1lBT3ZMQSxRQUFRQTtnQkFFSkE7b0JBQVFBO2dCQUNSQTtvQkFBUUE7Z0JBQ1JBO29CQUFRQTtnQkFDUkE7b0JBQVNBOzs7O21CQVFtV0EsNEJBQXFGQSxhQUFLQSxBQUE2RUE7Ozs7Ozs7Ozs7OytCQXNDeGdCQSxHQUFrQkE7Z0JBRWpDQSxPQUFPQSw0QkFBcUZBLGlCQUFFQTs7b0NBRzNFQTs7Z0JBSWZBO2dCQUNBQSwwQkFBa0JBOzs7O3dCQUNkQSxPQUFPQSxxQkFBWUE7Ozs7Ozs7Z0JBRXZCQSxPQUFPQTs7Ozs7Ozs7Ozs7OzRCQzlKY0E7OztnQkFFN0JBLGNBQVNBLDRCQUFzQ0EsSUFBSUEsMENBQWVBLDhEQUF5QkEsV0FBcERBO2dCQUN2Q0EsNkJBQXdCQSxJQUFJQSx5Q0FBcUJBOzs7OztnQkFLakRBLFdBQVdBLEtBQUlBO2dCQUNmQSxPQUFPQSwrQkFBMEJBLGFBQVFBOztpREFHT0EsR0FBZ0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O3dDQUVoRUE7NENBQ0FBLDBCQUFrQkEsNEJBQXNGQSxVQUFFQSxBQUErRUE7MkRBQUtBLDRCQUFzQ0EsVUFBRUEsbUJBQVFBOzs7Ozs7Ozs7Ozs7Ozs7d0NBRTFPQSxJQUFRQSxlQUFVQTs0Q0FDbEJBLElBQUlBO2dEQUNBQTs7Ozs0Q0FFSkE7OzRDQUVBQSxNQUFVQSx1QkFBa0JBOzRDQUM1QkEsSUFBSUEsY0FBY0E7Z0RBQ2RBOzs7OzRDQUVKQSxTQUFTQTs0Q0FDVEEsMkJBQW1CQSwrQkFBMEJBLEdBQUdBOzs7Ozs7Ozs7Ozs7Ozt3Q0FDNUNBLHNCQUFhQTs7Ozs7Ozs7Ozs7Ozt3Q0FHckJBLElBQUlBLENBQUNBOzs7Ozs7Ozt3Q0FDREEsc0JBQWFBLDRCQUE4Q0EsV0FBRUEsQUFBc0NBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7aUNBR3BGQTtnQkFFbkJBLFFBQVFBLDRCQUFzQ0EsVUFBUkE7Z0JBQ3RDQTtvQkFFSUEsY0FBUUEseURBQWtEQSxhQUFPQTtvQkFDakVBLElBQUlBLHNEQUErQ0EsR0FBRUEsQUFBb0NBOzttQ0FBS0Esd0NBQW1DQSxHQUFHQTs7aUNBQUtBLEFBQWdDQTt3QkFDcktBOzs7O2dCQUdSQSxPQUFPQTs7eUNBR2NBO2dCQUVyQkEsT0FBT0EsZUFBaUJBLDRCQUE4Q0EsV0FBRUEsQUFBc0NBOzs7Ozs7Ozs7bUJBbEJGQTs7c0JBU2tFQTs7Ozs7Ozs7Ozs7O29CQ1Y3SkEsT0FBT0E7Ozs7O29CQUNhQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7NEJBakMzQkE7O2dCQUVqQkEsUUFBUUEsa0JBQUtBLEFBQUNBLENBQUNBLElBQUlBLFVBQVVBLE1BQUlBLGtCQUFJQTtnQkFDckNBLGlCQUFZQSxnQ0FBb0JBOztnQkFFaENBLHFCQUFnQkEsa0JBQVNBOztnQkFFekJBO2dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxHQUFHQTtvQkFFbkJBLFdBQVdBLG9CQUFNQTtvQkFDakJBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLEdBQUdBO3dCQUV2QkEsV0FBV0Esb0JBQU1BOzt3QkFFakJBLElBQUlBLG9CQUFZQTs0QkFFWkEsc0NBQWNBLEdBQWRBLDZEQUFjQSxHQUFkQSx3QkFBb0JBOzRCQUNwQkEsc0NBQWNBLEdBQWRBLDZEQUFjQSxHQUFkQSx3QkFBb0JBOzs7d0JBR3hCQTs7Ozs4QkFLR0EsR0FBT0E7O2dCQUUzQkEsaUJBQVlBLGdDQUFvQkE7Z0JBQ2hDQSxxQkFBZ0JBOzs7O3FDQU1lQTtnQkFFdEJBLE9BQU9BLDJEQUF5QkEsQUFBaUNBOzJCQUFLQSxDQUFDQSxzQ0FBY0EsR0FBZEEseUJBQW1CQTs7OzhCQUc1RUE7Z0JBRWRBLE9BQU9BLHVGQUFjQSxHQUFkQTs7bUNBRVlBLEdBQU9BO2dCQUUxQkEsT0FBT0Esa0RBQUNBLHNDQUFjQSxHQUFkQSx5QkFBbUJBOztzQ0FFVkEsR0FBT0E7Z0JBRXhCQSxPQUFPQSxzQ0FBY0EsR0FBZEEseUJBQW1CQTs7aURBRXFCQTtnQkFFL0NBLFdBQVdBLEtBQUlBO2dCQUNmQSxrQkFBYUEsdUNBQWFBO2dCQUMxQkEsT0FBT0E7O29DQUdPQSxHQUFRQSxHQUFRQSxHQUFRQTtnQkFFdENBLElBQUlBLDZCQUFVQTtvQkFDVkEsU0FBU0E7O29CQUdUQSxRQUFRQSxpQkFBWUEsR0FBR0E7b0JBQ3ZCQSxRQUFRQSxNQUFJQSxDQUFDQSxDQUFDQSxvQkFBTUEsT0FBS0Esc0NBQWNBLEdBQWRBOztvQkFFekJBLE9BQU9BO3dCQUVIQSxVQUFVQSxNQUFJQSxBQUFDQTt3QkFDZkEsUUFBUUE7d0JBQ1JBLFVBQVVBLEFBQUNBLENBQUNBLE9BQU1BLHNDQUFjQSxHQUFkQTs7d0JBRWxCQSxrQkFBYUEsTUFBSUEsTUFBS0EsS0FBSUEsTUFBS0EsTUFBSUEsTUFBS0E7O3dCQUV4Q0EsVUFBS0E7d0JBQ0xBLFVBQUtBO3dCQUNMQSxTQUFLQTs7OzttQ0FLREEsR0FBUUE7Z0JBRXBCQSxVQUFVQTtnQkFDVkEsV0FBV0E7Z0JBQ1hBLFFBQVFBLEtBQUlBOztnQkFFWkEsT0FBT0E7b0JBRUhBLFVBQVVBLE1BQUlBLEFBQUNBO29CQUNmQSxRQUFRQTs7b0JBRXBCQSxRQUFRQSxrREFBQ0EsQ0FBQ0EsT0FBTUEsc0NBQWNBLEdBQWRBLDJCQUFvQkE7b0JBQ3hCQSxJQUFJQSxJQUFJQTt3QkFFSkEsTUFBTUE7d0JBQ05BLE9BQU9BOzs7b0JBR1hBLFVBQUtBOzs7Z0JBR1RBLE9BQU9BOzs7Ozs7Ozs7Ozs7OztvQkE2Q1VBLE9BQU9BOzs7OztvQkFDYUEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7OzRCQWpDM0JBOztnQkFFakJBLFFBQVFBLGtCQUFLQSxBQUFDQSxDQUFDQSxJQUFJQSxVQUFVQSxNQUFJQSxrQkFBSUE7Z0JBQ3JDQSxpQkFBWUEsZ0NBQW9CQTs7Z0JBRWhDQSxxQkFBZ0JBLGtCQUFTQTs7Z0JBRXpCQTtnQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsR0FBR0E7b0JBRW5CQSxXQUFXQSxNQUFNQTtvQkFDakJBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLEdBQUdBO3dCQUV2QkEsV0FBV0EsTUFBTUE7O3dCQUVqQkEsSUFBSUEsb0JBQVlBOzRCQUVaQSxzQ0FBY0EsR0FBZEEsOERBQWNBLEdBQWRBLHVCQUFvQkE7NEJBQ3BCQSxzQ0FBY0EsR0FBZEEsOERBQWNBLEdBQWRBLHVCQUFvQkE7Ozt3QkFHeEJBOzs7OzhCQUtHQSxHQUFPQTs7Z0JBRTNCQSxpQkFBWUEsZ0NBQW9CQTtnQkFDaENBLHFCQUFnQkE7Ozs7cUNBTWVBO2dCQUV0QkEsT0FBT0EsMkRBQXlCQSxBQUFpQ0E7MkJBQUtBLENBQUNBLHdDQUFjQSxHQUFkQSx1QkFBbUJBOzs7OEJBRzVFQTtnQkFFZEEsT0FBT0EsdUZBQWNBLEdBQWRBOzttQ0FFWUEsR0FBT0E7Z0JBRTFCQSxPQUFPQSxrREFBQ0Esd0NBQWNBLEdBQWRBLHVCQUFtQkE7O3NDQUVWQSxHQUFPQTtnQkFFeEJBLE9BQU9BLHdDQUFjQSxHQUFkQSx1QkFBbUJBOztpREFFcUJBO2dCQUUvQ0EsV0FBV0EsS0FBSUE7Z0JBQ2ZBLGtCQUFhQSxXQUFhQTtnQkFDMUJBLE9BQU9BOztvQ0FHT0EsR0FBUUEsR0FBUUEsR0FBUUE7Z0JBRXRDQSxJQUFJQSxXQUFVQTtvQkFDVkEsU0FBU0E7O29CQUdUQSxRQUFRQSxpQkFBWUEsR0FBR0E7b0JBQ3ZCQSxRQUFRQSxLQUFJQSxDQUFDQSxHQUFDQSxPQUFNQSxhQUFLQSxzQ0FBY0EsR0FBZEE7O29CQUV6QkEsT0FBT0E7d0JBRUhBLFVBQVVBLEtBQUlBLENBQUNBLEdBQUNBO3dCQUNoQkEsUUFBUUE7d0JBQ1JBLFVBQVVBLENBQUNBLENBQUNBLFFBQU1BLHNDQUFjQSxHQUFkQTs7d0JBRWxCQSxrQkFBYUEsTUFBSUEsYUFBS0EsTUFBSUEsYUFBS0EsTUFBSUEsYUFBS0E7O3dCQUV4Q0EsU0FBS0E7d0JBQ0xBLFNBQUtBO3dCQUNMQSxTQUFLQTs7OzttQ0FLREEsR0FBUUE7Z0JBRXBCQSxVQUFVQTtnQkFDVkEsV0FBV0E7Z0JBQ1hBLFFBQVFBLEtBQUlBOztnQkFFWkEsT0FBT0E7b0JBRUhBLFVBQVVBLEtBQUlBLENBQUNBLEdBQUNBO29CQUNoQkEsUUFBUUE7O29CQUVwQkEsUUFBUUEsa0RBQUNBLEdBQUNBLFFBQU1BLHNDQUFjQSxHQUFkQSxnQ0FBb0JBO29CQUN4QkEsSUFBSUEsSUFBSUE7d0JBRUpBLE1BQU1BO3dCQUNOQSxPQUFPQTs7O29CQUdYQSxTQUFLQTs7O2dCQUdUQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3FDQy9Ob0NBLElBQUlBOzJDQUNFQSxJQUFJQTtxQ0FDVkEsSUFBSUE7MkNBQ0VBLElBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBc0pqREEsT0FBT0E7OztvQkFJUEEsV0FBTUE7Ozs7O29CQVNOQSxPQUFPQTs7O29CQUlQQSxXQUFNQTs7Ozs7b0JBU05BLE9BQU9BOzs7b0JBSVBBLG9CQUFlQTs7b0JBRWZBOzs7OztvQkFrQkFBLE9BQU9BOzs7b0JBSVBBLGtCQUFhQTs7Ozs7b0JBU2JBLE9BQU9BOzs7b0JBSVBBLGNBQVNBO29CQUNUQSxpQkFBWUE7Ozs7O29CQVNaQSxPQUFPQTs7O29CQUlQQSxJQUFJQSxVQUFTQTt3QkFDVEE7OztvQkFFSkEsbUJBQWNBOztvQkFFZEEsYUFBUUEsbUJBQWNBLElBQUlBLHVDQUFrQ0EsSUFBSUE7Ozs7O29CQVNoRUEsT0FBT0E7OztvQkFJUEEscUJBQWdCQSxZQUFZQTs7Ozs7b0JBUzVCQSxPQUFPQTs7O29CQUlQQSxJQUFJQSxTQUFTQTt3QkFDVEE7OztvQkFFSkEsWUFBWUE7b0JBQ1pBLElBQUlBO3dCQUVBQSxZQUFZQSwyQkFBWUEscURBQTRCQTt3QkFDcERBLElBQUlBOzRCQUVBQSxRQUFRQTs0QkFDUkEsYUFBUUE7Ozs7b0JBSWhCQSxJQUFJQSx3Q0FBeUJBLENBQUNBLDRCQUFxQkE7d0JBQy9DQSxnREFBVUEsNEJBQU9BOzt3QkFFakJBLGNBQVNBOzs7Ozs7Ozs7Ozs7OzhCQVdPQSxJQUFJQTtpQ0FDREEsSUFBSUE7Ozs4QkF4UnZCQSxJQUFXQTs4Q0FDWkEsSUFBSUEsSUFBSUE7OzhCQUlQQSxJQUFXQSxJQUFXQTs7Z0JBRTlCQSxXQUFNQTtnQkFDTkEsV0FBTUE7Z0JBQ05BLG9CQUFlQTtnQkFDZkE7OzRCQUdRQSxHQUFxQkE7O2dCQUU3QkEsVUFBS0EsaUJBQVNBO2dCQUNkQSxVQUFLQSxpQkFBU0E7Z0JBQ2RBLG1CQUFjQTtnQkFDZEEsaUJBQVlBO2dCQUNaQSxvQkFBZUE7Z0JBQ2ZBLGFBQVFBO2dCQUNSQSxhQUFRQTs7Ozs2QkFHTUEsR0FBMkJBLE9BQVdBO2dCQUVwREEsSUFBSUEsaUNBQU9BOzs7b0JBTVBBLGlCQUFpQkEsU0FBU0EsNEJBQXVCQTtvQkFDakRBLGlCQUFpQkEsU0FBU0EsNEJBQXVCQTs7b0JBRWpEQSxVQUFVQSxDQUFDQSxhQUFRQSxjQUFTQSxVQUFVQSxDQUFDQSxhQUFRQSxjQUFTQSxDQUFDQSxhQUFRQSxjQUFTQSxDQUFDQSxhQUFRQSxjQUFTQSxDQUFDQSxhQUFRQTtvQkFDckdBLE1BQU1BLFNBQVNBLFNBQVNBLEtBQUtBOztvQkFFN0JBLFVBQVVBLENBQUNBLGFBQVFBLGNBQVNBLFVBQVVBLENBQUNBLGFBQVFBLGNBQVNBLENBQUNBLGFBQVFBLGNBQVNBLENBQUNBLGFBQVFBLGNBQVNBLENBQUNBLGFBQVFBO29CQUNyR0EsTUFBTUEsU0FBU0EsU0FBU0EsS0FBS0E7O29CQUU3QkEsWUFBWUEsVUFBVUE7b0JBQ3RCQSxJQUFJQSxhQUFRQTt3QkFDUkEsUUFBUUEsQ0FBQ0E7OztvQkFFYkEsSUFBSUEsTUFBYUE7d0JBQ2JBOzs7b0JBRUpBLGdCQUFnQkEscUJBQWdCQTtvQkFDaENBLG1CQUFtQkEsQ0FBQ0E7O29CQUVwQkEsZUFBNkJBLElBQUlBO29CQUNqQ0EsZ0JBQThCQSxJQUFJQTtvQkFDbENBO29CQUNBQSxLQUFLQSxRQUFRQSxtQkFBQ0EsQ0FBQ0EsZ0RBQXdCQSxJQUFJQSxVQUFhQSxDQUFDQSx3Q0FBMkJBO3dCQUVoRkEsaUJBQWlCQSxRQUFRQSxZQUFZQSxDQUFDQSxJQUFJQTt3QkFDMUNBLGtCQUFrQkEsUUFBUUEsWUFBWUEsQ0FBQ0EsSUFBSUE7O3dCQUUzQ0EsWUFBWUEsbUJBQWNBLDZDQUFlQSxrQ0FBMkJBLG1CQUFtQkEsY0FBYUEsT0FBT0E7d0JBQzNHQSxhQUFhQSxtQkFBY0EsZ0RBQWVBLGtDQUEyQkEsbUJBQW1CQSxlQUFjQSxPQUFPQTs7O3dCQUc3R0EsSUFBSUE7NEJBRUFBOzRCQUNBQSxXQUFXQTs0QkFDWEEsWUFBWUE7Ozt3QkFHaEJBLG1DQUFXQSxnQkFBV0EsT0FBT0EsUUFBUUE7OztvQkFHekNBLElBQUlBLHNCQUFnQkE7d0JBRWhCQSxhQUFhQTt3QkFDYkEsSUFBSUEsc0JBQWdCQTs0QkFFaEJBLFlBQVlBLGdEQUFlQSxrQ0FBMkJBLG9CQUFxQkE7OzRCQUUzRUEsd0NBQVlBLG1CQUFjQSxtQ0FBMEJBLE9BQU9BLG1CQUFjQSxzQkFBeUJBLE9BQU9BOzRCQUN6R0Esd0NBQVlBLG1CQUFjQSxnREFBZUEsa0NBQTJCQSxvQkFBcUJBLFNBQVFBLE9BQU9BOzRCQUN4R0Esd0NBQVlBLG1CQUFjQSxtQ0FBMEJBLE9BQU9BLG1CQUFjQSx1QkFBMEJBLE9BQU9BOytCQUV6R0EsSUFBSUEsc0JBQWdCQTs0QkFFckJBLGFBQVlBLDZDQUFlQSxrQ0FBMkJBLG9CQUFxQkE7OzRCQUUzRUEsd0NBQVlBLG1CQUFjQSxtQ0FBMEJBLFFBQU9BLG1CQUFjQSxzQkFBeUJBLE9BQU9BOzRCQUN6R0Esd0NBQVlBLG1CQUFjQSw2Q0FBZUEsa0NBQTJCQSxvQkFBcUJBLFNBQVFBLE9BQU9BOzRCQUN4R0Esd0NBQVlBLG1CQUFjQSxtQ0FBMEJBLFFBQU9BLG1CQUFjQSx1QkFBMEJBLE9BQU9BOzs7d0JBRzlHQSxzQ0FBY0EsSUFBSUEsa0NBQTZCQTs7O29CQUduREEsWUFBWUE7b0JBQ1pBLElBQUlBLENBQUNBLDRCQUFxQkE7d0JBRXRCQSxVQUFVQSx3Q0FBZ0JBLE9BQU9BO3dCQUNqQ0EsYUFBYUEsSUFBSUEseUJBQWtCQSxhQUFhQSxDQUFDQSxjQUFjQSxrQkFBa0JBLGdCQUFnQkEsT0FBT0EsWUFBWUEsS0FBS0EsYUFBYUEsQ0FBQ0EsY0FBY0Esa0JBQWtCQSxpQkFBaUJBLE9BQU9BLGFBQWFBLEtBQUtBLFdBQVdBO3dCQUM1TkEscUNBQWFBLE9BQU9BLHVCQUFXQSw2QkFBaUJBOzs7b0JBR3BEQSxJQUFJQTt3QkFFQUEsY0FBYUEsSUFBSUEseUJBQWtCQSxhQUFhQSxDQUFDQSxjQUFjQSxpQkFBaUJBLGFBQWFBLENBQUNBLGNBQWNBO3dCQUM1R0EsU0FBU0EsQ0FBQ0EsZUFBY0E7d0JBQ3hCQSxTQUFTQSxDQUFDQSxpQkFBZ0JBO3dCQUMxQkEsUUFBUUEsU0FBU0EsZUFBY0E7d0JBQy9CQSxTQUFTQSxJQUFJQSx5QkFBa0JBLEtBQUtBLElBQUlBLFNBQVNBLHNCQUFpQkEsS0FBS0EsSUFBSUEsU0FBU0E7d0JBQ3BGQSxxQ0FBYUEsNkJBQXdCQSx1QkFBV0EsNkJBQWlCQTs7OztxQ0FLN0NBLE9BQWNBLE9BQVdBO2dCQUVyREEsT0FBT0EsSUFBSUEsdUJBQWtCQSxRQUFRQSxTQUFTQSxTQUFTQTs7MkJBRzNDQSxHQUFVQTtnQkFFdEJBOzs2QkFHY0E7Z0JBRWRBLE9BQU9BLGlDQUFPQSxhQUNQQSxpQ0FBT0EsYUFDUEEsaUNBQU9BLGFBQ1BBLGlDQUFPQTs7O2dCQThDZEEsSUFBSUEsY0FBU0E7b0JBQ1RBOzs7Z0JBRUpBLFNBQVNBLElBQUlBO2dCQUNiQSxhQUFRQTs7O2dCQTJHUkEsa0JBQWFBLENBQUNBOzs7Z0JBS2RBLG1CQUFjQTtnQkFDZEEsSUFBSUEsbUJBQWNBO29CQUNkQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3VCQ2xUV0E7Ozs7Ozs7b0JBSVRBLE9BQU9BLDRCQUFnREEsaUJBQU9BLEFBQWlEQTs7Ozs7O29CQU8zR0E7O3dCQUVGQSxvQkFBb0JBLEtBQUlBO3dCQUN4QkEsMEJBQWtCQTs7OztnQ0FDZEEsa0JBQWtCQTs7Ozs7O3lCQUN0QkEsMkJBQWtCQTs7OztnQ0FDZEEsa0JBQWtCQTs7Ozs7Ozt3QkFFdEJBLE9BQU9BOzs7Ozs7b0JBU0xBO29CQUNGQSxPQUFPQSw0QkFBb0RBLHNCQUFVQSxBQUFtREE7Ozs7O29CQVF0SEE7b0JBQ0ZBLE9BQU9BLDRCQUFrREEsbUJBQU9BLEFBQWlEQTs7Ozs7O29CQVEvR0E7O3dCQUVGQSxXQUFXQTt3QkFDWEEsWUFBWUE7d0JBQ1pBLFVBQVVBO3dCQUNWQSxhQUFhQTs7d0JBRWJBLDBCQUFrQkE7Ozs7Z0NBRWRBLE9BQU9BLFNBQVNBLE1BQU1BO2dDQUN0QkEsUUFBUUEsU0FBU0EsT0FBT0E7Z0NBQ3hCQSxNQUFNQSxTQUFTQSxLQUFLQTtnQ0FDcEJBLFNBQVNBLFNBQVNBLFFBQVFBOzs7Ozs7O3dCQUc5QkEsT0FBT0EsSUFBSUEseUJBQWtCQSxNQUFNQSxLQUFLQSxRQUFRQSxNQUFNQSxTQUFTQTs7Ozs7OztvQkFTbkVBLFNBQVNBLDRCQUFxREEsOEJBQXZCQTtvQkFDdkNBLElBQUlBO3dCQUNBQSxPQUFPQTs7O29CQUVMQTs7d0JBRUZBLFdBQVdBO3dCQUNYQSxZQUFZQTt3QkFDWkEsVUFBVUE7d0JBQ1ZBLGFBQWFBOzt3QkFFYkEsMEJBQWtCQTs7OztnQ0FFZEEsT0FBT0EsU0FBU0EsTUFBTUE7Z0NBQ3RCQSxRQUFRQSxTQUFTQSxPQUFPQTtnQ0FDeEJBLE1BQU1BLFNBQVNBLEtBQUtBO2dDQUNwQkEsU0FBU0EsU0FBU0EsUUFBUUE7Ozs7Ozs7d0JBRzlCQSxPQUFPQSxJQUFJQSx5QkFBa0JBLE1BQU1BLEtBQUtBLFFBQVFBLE1BQU1BLFNBQVNBOzs7Ozs7b0JBVW5FQSxPQUFPQTs7O29CQUlQQSxpQkFBWUE7Ozs7O29CQVFaQSxPQUFPQTs7Ozs7b0JBUVBBLE9BQU9BOzs7Ozs7OztpQ0EzSFVBLEtBQUlBOzhCQUNUQSxLQUFJQTt5Q0FDR0E7Ozs7Z0JBaUl2QkE7OzhCQUdTQTs7Z0JBR1RBLGlCQUFZQSw0QkFBd0ZBLG1CQUFXQSxBQUFpRkE7Z0JBQ2hNQSxjQUFTQSw0QkFBb0ZBLGdCQUFRQSxBQUE2RUE7Z0JBQ2xMQSxZQUFPQTs7OEJBR0VBLFVBQThCQTs7Z0JBRXZDQSxpQkFBWUEsNEJBQXFEQSxpQkFBdkJBO2dCQUMxQ0EsY0FBU0EsNEJBQW1EQSxjQUFyQkE7OzhCQUc5QkEsR0FBb0JBLFVBQXVCQTs7OztnQkFHcERBLElBQUlBLGtCQUFrQkEsUUFBUUEseUJBQXdCQTtvQkFFbERBLGlCQUFZQSw0QkFBeURBLG1CQUFXQSxBQUFrREE7bUNBQUtBLElBQUlBLHFCQUFPQSxpQkFBU0EsTUFBTUEsaUJBQVNBLE1BQU1BLHVCQUFlQTs7O29CQUkvTEEsaUJBQVlBLDRCQUF5REEsbUJBQVdBLEFBQWtEQTttQ0FBS0EsSUFBSUEscUJBQU9BLGlCQUFTQSxNQUFNQSxpQkFBU0E7OztnQkFFOUtBLGNBQVNBLEtBQUlBOztnQkFFYkEsS0FBS0EsV0FBV0EsSUFBSUEsS0FBS0E7b0JBRXJCQSxLQUFLQSxRQUFRQSxhQUFPQSxJQUFJQSxLQUFLQTt3QkFFekJBLElBQUlBOzRCQUVBQSxJQUFJQSxnQkFBV0EsR0FBR0E7Z0NBQ2RBLGdCQUFXQSxJQUFJQSxtQkFBS0EsdUJBQVVBLElBQUlBLHVCQUFVQSxJQUFJQTs7Z0NBQy9DQSxJQUFJQSxnQkFBV0EsR0FBR0E7b0NBQ25CQSxnQkFBV0EsSUFBSUEsbUJBQUtBLHVCQUFVQSxJQUFJQSx1QkFBVUEsSUFBSUE7OzsrQkFFbkRBLElBQUlBLGdCQUFXQSxHQUFHQTs0QkFFbkJBLGdCQUFXQSxJQUFJQSxtQkFBS0EsdUJBQVVBLElBQUlBLHVCQUFVQSxJQUFJQTs7Ozs7Ozs2QkFNOUNBLEdBQTJCQSxPQUFXQTs7Z0JBRTlDQTs7b0JBRUZBLElBQUlBO3dCQUVBQSxZQUFZQSxJQUFJQSx3QkFBaUJBO3dCQUNqQ0EsUUFBUUE7O3dCQUVSQSxLQUFLQSxXQUFXQSxJQUFJQSxxQkFBZ0JBOzRCQUNoQ0Esc0JBQVNBLGlCQUFpQkEsYUFBYUEsT0FBTUE7Ozt3QkFFakRBOzs7b0JBR0pBO29CQUNBQSwwQkFBa0JBOzs7OzRCQUVkQSxnQ0FBZ0JBOzRCQUNoQkEsUUFBUUEsR0FBR0EsT0FBT0E7Ozs7Ozs7b0JBR3RCQTtvQkFDQUEsMkJBQWtCQTs7Ozs0QkFFZEEsZ0NBQWdCQTs0QkFDaEJBLFFBQVFBLEdBQUdBLE9BQU9BOzs7Ozs7Ozs7Z0JBTzFCQSxjQUFjQSxLQUFJQTs7Z0JBRWxCQSxLQUFLQSxXQUFXQSxJQUFJQSxzQkFBaUJBO29CQUVqQ0EsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsc0JBQWlCQTt3QkFFckNBO3dCQUNBQSxJQUFJQSxrQkFBV0EsdUJBQVVBLElBQUlBLHVCQUFVQSxJQUFRQTs0QkFDM0NBOzs0QkFDQ0EsSUFBSUEsa0JBQVdBLHVCQUFVQSxJQUFJQSx1QkFBVUEsSUFBUUE7Z0NBRWhEQSxJQUFJQSxvQkFBaUJBO29DQUNqQkE7O29DQUVBQSxZQUFZQTs7O2dDQUdoQkE7Ozs7OztnQkFJWkEsT0FBT0E7O3lDQUdtQkE7Z0JBRTFCQTtnQkFDQUEsS0FBS0EsV0FBV0EsSUFBSUEsc0JBQWlCQTtvQkFFakNBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLHNCQUFpQkE7d0JBRXJDQSxRQUFRQSxvQkFBWUE7O3dCQUVwQkEsSUFBSUE7NEJBRUFBLFFBQVFBLGFBQVFBLHVCQUFVQSxJQUFJQSx1QkFBVUE7OzRCQUV4Q0EsSUFBSUEsNkJBQVFBLHVCQUFVQSxPQUFNQSw2QkFBUUEsdUJBQVVBO2dDQUUxQ0EsSUFBSUE7b0NBQ0FBLGdCQUFnQkE7O29DQUVoQkEsZ0JBQWdCQTs7O2dDQUlwQkEsSUFBSUE7b0NBQ0FBLGdCQUFnQkE7O29DQUVoQkEsZ0JBQWdCQTs7Ozs7d0JBSTVCQTs7OztnQkFJUkE7OztnQkFLQUEsUUFBUUEsdUNBQXVDQTtnQkFDL0NBLFFBQVFBLHlDQUF5Q0E7Z0JBQ2pEQSxJQUFJQSxLQUFLQTtvQkFDTEE7O29CQUVBQTs7Z0JBQ0pBLE9BQU9BOzsrQkFHY0EsR0FBVUE7O2dCQUUvQkEsMEJBQWtCQTs7Ozt3QkFFZEEsSUFBSUEsTUFBTUEsR0FBR0E7NEJBQ1RBLE9BQU9BOzs7Ozs7OztnQkFHZkEsMkJBQWtCQTs7Ozt3QkFFZEEsSUFBSUEsTUFBTUEsR0FBR0E7NEJBQ1RBLE9BQU9BOzs7Ozs7OztnQkFHZkEsT0FBT0E7OztnQkFLUEE7Z0JBQ0FBOzs7O2dCQUtBQSwwQkFBa0JBOzs7O3dCQUNkQTs7Ozs7Ozs7O2dCQUtKQSwwQkFBa0JBOzs7O3dCQUNkQTs7Ozs7OzttQ0FHZ0JBLE9BQXlCQTs7Z0JBRTdDQTtnQkFDQUEsSUFBSUEsQ0FBQ0E7b0JBQ0RBOzs7Z0JBRUpBLDBCQUFrQkE7Ozs7d0JBQ2RBLGVBQWVBLHNCQUFzQkEsQ0FBQ0E7Ozs7Ozs7c0NBR25CQSxVQUE4QkE7O2dCQUVyREE7Z0JBQ0FBLElBQUlBLENBQUNBO29CQUNEQTs7O2dCQUVKQSwwQkFBa0JBOzs7O3dCQUNkQSxlQUFlQSxzQkFBc0JBLENBQUNBOzs7Ozs7O3FDQUVwQkEsaUJBQXlDQTtnQkFFL0RBO29CQUVJQSxhQUFhQSxJQUFJQSx3QkFBaUJBOztvQkFFbENBLHdCQUF3QkEsNEJBQW9EQSxzQkFBVUEsQUFBbURBO21DQUFLQSxnQkFBZ0JBLElBQUlBLHVCQUFrQkEsS0FBS0E7OztvQkFFekxBLElBQUlBO3dCQUVBQSxvQkFBZUEsbUJBQW1CQTs7d0JBSWxDQSwwQkFBMEJBLDRCQUFrREEsbUJBQU9BLEFBQWlEQTtnQ0FFaElBLEtBQUtBLFdBQVdBLElBQUlBLHVCQUF1QkE7b0NBRXZDQSxZQUFZQSx3QkFBZ0JBO29DQUM1QkEsVUFBVUEsd0JBQWdCQSxDQUFDQSxpQkFBU0E7O29DQUVwQ0EsSUFBSUEsZ0NBQXlCQSxPQUFPQSxLQUFLQSwwQ0FBZUE7d0NBQ3BEQTs7OztnQ0FHUkE7Ozt3QkFHSkEsaUJBQVlBLHFCQUFxQkE7Ozs7Ozs7aUNBS3ZCQTtnQkFFbEJBLElBQUlBO29CQUNBQTs7Z0JBQ0VBO2dCQUNGQSxtQkFBY0E7O2dCQUVsQkE7Z0JBQ0FBOztvQ0FFcUJBOztnQkFFckJBLGdCQUFnQkEsbUJBQWNBO2dCQUM5QkEsMEJBQWtCQTs7Ozt3QkFFZEEsZ0JBQVdBLEdBQUdBO3dCQUNkQSxnQkFBV0EsR0FBR0E7Ozs7Ozs7Z0JBR1pBO2dCQUNGQSxzQkFBaUJBOztnQkFFckJBLHVCQUFrQkE7O2dCQUVsQkEsT0FBT0E7O2lDQUVTQSxJQUFXQSxJQUFXQTs7Z0JBRXRDQSxPQUFPQSxhQUFRQSxJQUFJQSxJQUFJQSwrQkFBd0JBOzsrQkFFL0JBLElBQVdBLElBQVdBLGFBQStCQSxjQUFzQkEsV0FBcUJBLE9BQW1CQTs7Ozs7Z0JBRW5JQSxJQUFJQSwyQkFBTUE7O29CQUdOQTs7O2dCQUdKQSxJQUFJQSxDQUFDQSxnQkFBV0EsSUFBSUEsT0FBT0EsQ0FBQ0EsZ0JBQVdBLElBQUlBO29CQUVqQ0E7O3dCQUVGQSxXQUFXQSxJQUFJQSxtQkFBS0EsSUFBSUEsSUFBSUE7d0JBQzVCQSxvQkFBb0JBO3dCQUNwQkEsaUJBQWlCQTt3QkFDakJBLGFBQWFBO3dCQUNiQSxhQUFhQTt3QkFDYkEsSUFBSUE7NEJBQ0FBOzt3QkFDSkEsZ0JBQVdBO3dCQUNYQTs7d0JBRUFBOzs7O2dCQUlSQTs7aUNBd0ZTQTtnQkFFVEEsYUFBUUEsTUFBTUEsTUFBTUEsZUFBZUEsWUFBWUEsaUJBQWlCQSxhQUFhQSxTQUFTQTs7a0NBdkZuRUEsSUFBV0E7O2dCQUU5QkE7O2dCQUVNQTs7b0JBRUZBLFdBQVdBLDRCQUFrREEsbUJBQU9BLEFBQWlEQTttQ0FBS0EsNkJBQVFBLE9BQU1BLDZCQUFRQTs7OztnQkFHcEpBLDBCQUFrQkE7Ozs7d0JBQ2RBLG1CQUFjQTs7Ozs7OztnQkFFbEJBLHVCQUFrQkE7Z0JBQ2xCQSxPQUFPQTs7a0NBRVlBLElBQVdBO2dCQUU5QkE7Z0JBQ0FBLE9BQU9BLGtCQUFXQSxJQUFJQSxJQUFRQTs7b0NBRVhBLElBQVdBLElBQVdBOztnQkFFekNBLFNBQU9BOztnQkFFREE7O29CQUVGQSwwQkFBa0JBOzs7OzRCQUVkQSxTQUFPQTs0QkFDUEEsSUFBSUEsNkJBQVFBLE9BQU1BLDZCQUFRQSxPQUFNQSxDQUFDQSxrQkFBaUJBLGlDQUEwQkEsa0JBQWlCQTtnQ0FDekZBOzs7NEJBRUpBLElBQUlBLDZCQUFRQSxPQUFNQSw2QkFBUUEsT0FBTUEsa0JBQWlCQTtnQ0FDN0NBOzs7Ozs7Ozs7Z0JBSVpBOzsrQkFHZ0JBLElBQVdBOztnQkFFckJBOztvQkFFRkEsMEJBQWtCQTs7Ozs0QkFFZEEsSUFBSUEsNkJBQVFBLE9BQU1BLDZCQUFRQSxPQUN0QkEsNkJBQVFBLE9BQU1BLDZCQUFRQTtnQ0FFdEJBLE9BQU9BOzs7Ozs7Ozs7Z0JBS25CQSxPQUFPQTs7dUNBR2tCQTs7Z0JBRXpCQSxjQUFjQSxJQUFJQTtnQkFDbEJBLDBCQUFrQkE7Ozs7d0JBQ2RBLGtCQUFrQkE7Ozs7Ozs7Z0JBRXRCQSwyQkFBbUJBOzs7O3dCQUVmQSwyQkFBbUJBOzs7O2dDQUVmQTtnQ0FDQUEsSUFBSUEsa0JBQVdBLElBQUlBLElBQVFBO29DQUN2QkEsZ0JBQWdCQSxJQUFJQSxJQUFJQSxvQkFBaUJBLGdDQUF5QkEsbUNBQTRCQSwrQkFBd0JBLGtCQUFnQkEsZUFBYUEsV0FBU0E7Ozs7Ozs7Ozs7Ozs7O2dCQUl4S0EsT0FBT0E7O3FDQUdlQTs7Z0JBRXRCQSwwQkFBa0JBOzs7O3dCQUNkQSxlQUFVQTs7Ozs7OztnQkFFZEEsMkJBQWtCQTs7Ozt3QkFDZEEsZUFBUUE7Ozs7Ozs7cUNBUWtCQTs7Z0JBRTlCQSxnQkFBZ0JBLEtBQUlBOztnQkFFZEE7O29CQUVGQSwwQkFBa0JBOzs7OzRCQUVkQSxJQUFJQSw2QkFBUUE7Z0NBQ1JBLGNBQWNBOzs0QkFDbEJBLElBQUlBLDZCQUFRQTtnQ0FDUkEsY0FBY0E7Ozs7Ozs7OztnQkFJMUJBLE9BQU9BOztpQ0FHV0E7O2dCQUVaQTs7b0JBRUZBLDBCQUFrQkE7Ozs7NEJBRWRBLE9BQU9BOzRCQUNQQSxPQUFPQTs7Ozs7Ozs7OztnQkFTZkEsd0JBQW1CQSxDQUFDQTtnQkFDcEJBLDBCQUFrQkE7Ozs7d0JBQ2RBOzs7Ozs7Ozs7Z0JBS0pBLDBCQUFxQkEsQ0FBQ0E7Z0JBQ3RCQSwwQkFBa0JBOzs7O3dCQUNkQTs7Ozs7Ozs7Ozs7Ozs7bUJBM2lCc0hBLGtCQUFpQkE7OzttQkF5Qk5BOzs7bUJBU1BBOzs7bUJBK0Z1RUEsSUFBSUEsbUJBQU9BOzs7bUJBQ3pCQSxJQUFJQSxpQkFBS0EsR0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzZDQ3RDOUpBLElBQUlBO3dDQUNUQSxJQUFJQTsyQ0FVREEsSUFBSUE7Ozs7Ozs7Ozs7Ozs0QkFoRm5CQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFYT0EsT0FBT0E7OztvQkFBcUJBLGlCQUFpQkEsU0FBU0EsQ0FBQ0E7b0JBQWFBLG1CQUFjQTtvQkFBT0EsSUFBSUE7d0JBQVlBOzs7Ozs7b0JBQ3pHQSxPQUFPQTs7O29CQUFtQkEsaUJBQWlCQSxtQkFBY0EsVUFBU0E7b0JBQVdBLCtCQUFZQTtvQkFBT0EsSUFBSUE7d0JBQVlBOzs7Ozs7b0JBQ2xIQSxPQUFPQTs7O29CQUFtQkEsaUJBQWlCQSxtQkFBYUE7b0JBQU9BLGlCQUFZQTtvQkFBT0EsSUFBSUE7d0JBQVlBOzs7Ozs7Ozs7b0JBbUJwR0EsT0FBT0E7Ozs7O29CQUl4QkEsT0FBT0E7OztvQkFHVEEsZUFBVUE7O29CQUVWQSw2REFBc0JBO29CQUN0QkEsa0VBQTJCQTtvQkFDM0JBLGdFQUF5QkE7b0JBQ3pCQSwyRUFBb0NBOzs7OztvQkFTcENBLElBQUlBLFVBQVNBO3dCQUNUQTs7O29CQUVKQSxhQUFRQTtvQkFDUkEsWUFBWUEsa0JBQUtBLEFBQUNBLGFBQVFBO29CQUMxQkEsSUFBSUEsUUFBUUE7d0JBRVJBLFFBQVFBO3dCQUNSQSxhQUFRQSx1QkFBUUE7OztvQkFHcEJBLGlCQUFZQTs7Ozs7b0JBT1pBLE9BQU9BOzs7b0JBSVBBLElBQUlBLFVBQVNBO3dCQUNUQTs7O29CQUVKQSxrQkFBYUE7Ozs7O29CQUdPQSxPQUFPQTs7Ozs7OztxQ0FyRlJBOzs7Ozt3Q0E4QkVBLEtBQUlBOzZDQUNGQTs4QkF3RGZBO2tDQUNDQTs7Z0NBSWdCQSxLQUFJQTs7OzRCQWdCbEJBLE9BQWNBOzs7OztnQkFFN0JBLGNBQVNBLFNBQVNBLE9BQU9BLFFBQVFBLElBQUlBO2dCQUNyQ0EsMkJBQXNCQTtnQkFDdEJBLGtCQUFhQSxVQUFJQSxpREFBNEJBLCtCQUF1QkEsMkJBQW1CQTs7OztnQ0EzR2xFQTtZQUVyQkEsaUJBQVlBO1lBQ1pBLGVBQVVBOzs7WUE2R1ZBLElBQUlBLGVBQVVBO2dCQUNWQTs7Ozs7WUFLSkEsSUFBSUEsMEJBQWlCQTtnQkFDakJBLDBCQUFxQkEsZ0NBQW1CQSwwQkFBaUJBOzs7WUFFN0RBLGtCQUFhQSxVQUFJQSxpREFBNEJBLCtCQUF1QkEsMkJBQW1CQTtZQUN2RkEscUJBQWdCQTs7WUFFaEJBLElBQUlBLHlDQUFpQkE7Z0JBQ2pCQSxtQkFBY0E7Ozs7WUFLbEJBLElBQUlBO2dCQUNBQTs7O1lBRUpBO1lBQ0FBOztZQUVBQSxPQUFPQTs7O1lBSVBBLElBQUlBLHNCQUFpQkE7Z0JBQ2pCQTs7O1lBRUpBO1lBQ0FBOztZQUVBQSxPQUFPQSxxQkFBZ0JBOzs7WUFLdkJBLGNBQVNBLHNCQUFTQTtZQUNsQkEsaUJBQVlBLHNCQUFTQTtZQUNyQkEsWUFBT0Esc0JBQVNBO1lBQ2hCQTs7WUFFQUEsSUFBSUEseUNBQWlCQTtnQkFDakJBLG1CQUFjQTs7O1lBRWxCQTs7d0JBS2VBO1lBRWZBLG1CQUFjQTtZQUNkQTs7MEJBR2VBLFFBQVlBO1lBRTNCQSxZQUFZQTtZQUNaQSxhQUFhQTs7WUFFYkEsZ0JBQWdCQSxJQUFJQSxjQUFPQSxBQUFRQSxRQUFRQSxBQUFRQSxrQkFBYUEsWUFBWUEsQUFBUUEsU0FBU0EsQUFBUUEsa0JBQWFBOztZQUVsSEEsWUFBT0EsU0FBU0EsY0FBU0EsYUFBUUEsaUJBQVlBOztZQUU3Q0EsYUFBYUEsSUFBSUEsY0FBT0EsQUFBUUEsUUFBUUEsQUFBUUEsa0JBQWFBLFlBQVlBLEFBQVFBLFNBQVNBLEFBQVFBLGtCQUFhQTs7WUFFL0dBLHNCQUFpQkEscUNBQVNBOztZQUUxQkE7OztZQUtBQSxJQUFJQTtnQkFFQUE7Z0JBQ0FBO2dCQUNBQTs7O1lBR0pBLFlBQVlBO1lBQ1pBLGFBQWFBO1lBQ2JBLGFBQWFBO1lBQ2JBLFFBQVFBLElBQUlBLGNBQU9BLGNBQWNBLGtCQUFrQkEsYUFBYUE7O1lBRWhFQSxhQUFhQSxTQUFTQSxPQUFPQTtZQUM3QkEsWUFBT0EsTUFBTUEsU0FBU0EsU0FBU0EsY0FBY0EsaUJBQWlCQTs7WUFFOURBLGFBQWFBLElBQUlBLGNBQU9BLEFBQVFBLFFBQVFBLEFBQVFBLHVCQUFrQkEsQUFBUUEsU0FBU0EsQUFBUUE7WUFDM0ZBLHNCQUFpQkEscUNBQVNBOztZQUUxQkE7Ozs7WUFLQUEsSUFBSUE7Z0JBRUFBLDBCQUFrQkE7Ozs7d0JBQ2RBLHlCQUFvQkE7Ozs7Ozs7O1lBRzVCQSxJQUFJQTtnQkFFQUEsMkJBQWtCQTs7Ozt3QkFDZEEsdUJBQWtCQSxNQUFNQTs7Ozs7Ozs7WUFHaENBO1lBQ0FBOzs7O1lBS0FBLElBQUlBO2dCQUVBQSwwQkFBa0JBOzs7O3dCQUVkQSxTQUFTQTt3QkFDVEEsSUFBSUEsT0FBTUE7NEJBQ05BLEtBQUtBOzs0QkFDSkEsSUFBSUEsT0FBTUE7Z0NBQ1hBLEtBQUtBOzs7O3dCQUVUQSxnQkFBZ0JBOzs7Ozs7O2dCQUdwQkE7Z0JBQ0FBOzs7OztZQU1KQSxJQUFJQTtnQkFFQUEsMEJBQWtCQTs7Ozt3QkFFZEEsU0FBU0E7d0JBQ1RBLElBQUlBLE9BQU1BOzRCQUNOQSxLQUFLQTs7NEJBQ0pBLElBQUlBLE9BQU1BO2dDQUNYQSxLQUFLQTs7Z0NBQ0pBLElBQUlBLE9BQU1BO29DQUNYQSxLQUFLQTs7Ozs7d0JBRVRBLGdCQUFnQkE7Ozs7Ozs7Z0JBR3BCQTtnQkFDQUE7Ozs7WUFNSkE7WUFDQUE7OzBCQUdpQkE7O1lBRWpCQSxRQUFTQSw0QkFBdUJBO1lBQ2hDQSxPQUFPQSx1Q0FBNEJBOzsyQkFJbkJBO1lBRWhCQSxRQUFVQTtZQUNWQSxJQUFJQTs7bUJBSUNBLElBQUlBLHVEQUE0Q0E7Z0JBRWpEQSxJQUFJQSx5Q0FBOEJBOzs7OztZQU90Q0EsSUFBSUEsS0FBS0E7Z0JBRUxBLDBCQUFxQkE7O2dCQUVyQkE7Z0JBQ0FBO21CQUVDQSxJQUFJQSw0QkFBbUNBLCtGQUFvQkEsQUFBb0NBO2dCQU1oR0E7O29CQUdJQSxJQUFJQSxLQUFLQTt3QkFFTEEsMEJBQXFCQTs7d0JBRXJCQTt3QkFDQUE7Ozs7Ozs7O2dCQVFSQTs7O29CQUlJQSxJQUFJQSxLQUFLQTt3QkFFTEEsWUFBWUE7d0JBQ1pBLDBCQUFxQkE7O3dCQUVyQkEsSUFBSUE7NEJBQ0FBLGtCQUFhQTs7O3dCQUVqQkE7d0JBQ0FBOzs7Ozs7Ozs7WUFTWkEsS0FBS0EsV0FBV0EsSUFBSUEsb0NBQStCQTtnQkFFL0NBLEtBQUtBLFFBQVFBLGFBQU9BLElBQUlBLG9DQUErQkE7b0JBRW5EQSxTQUFTQSxxQ0FBd0JBO29CQUNqQ0EsU0FBU0EscUNBQXdCQTs7b0JBRWpDQSxpQkFBaUJBLHVCQUFrQkEsSUFBSUEsT0FBT0EsdUJBQWtCQSxJQUFJQTs7b0JBRXBFQSxJQUFJQTt3QkFFQUEsdUJBQWtCQSxJQUFJQTt3QkFDdEJBLHVCQUFrQkEsSUFBSUE7O3dCQUl0QkEsc0JBQWVBLElBQUlBOzs7OztZQUsvQkE7O1lBRUFBOzs7O1lBS0FBLFFBQVFBLElBQUlBOztZQUVaQSxnQkFBZ0JBLEtBQUlBO1lBQ3BCQSwwQkFBa0JBOzs7O29CQUViQSxRQUFRQSxJQUFJQSxxQkFBT0EsS0FBS0EsS0FBS0E7b0JBQzdCQSxZQUFZQTs7b0JBRWJBLGNBQVVBLEdBQUtBOzs7Ozs7O1lBR25CQSwyQkFBa0JBOzs7O29CQUVkQSxRQUFRQSw0QkFBb0RBLDBCQUFxQkEsV0FBR0EsbUJBQVFBOztvQkFFNUZBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBO3dCQUV6QkEsS0FBS0EsUUFBUUEsYUFBT0EsSUFBSUEsU0FBU0E7NEJBRTdCQSxZQUFVQSxjQUFVQSxVQUFFQSxLQUFLQSxjQUFVQSxVQUFFQTs7Ozs7Ozs7OztZQU1uREEsT0FBT0E7Ozs7WUFLUEEsUUFBUUEsSUFBSUE7O1lBRVpBLHNCQUFzQkEsS0FBSUE7WUFDMUJBLDBCQUFrQkE7Ozs7b0JBRWRBLGFBQWFBLEtBQUlBOztvQkFFakJBLEtBQUtBLFdBQVdBLElBQUlBLGdCQUFnQkE7d0JBRWhDQSxRQUFRQSxJQUFJQSxxQkFBT0EsQ0FBQ0EsU0FBU0EsYUFBYUEsQ0FBQ0EsU0FBU0E7d0JBQ3BEQSxZQUFZQTt3QkFDWkEsVUFBVUE7O3dCQUVWQSwyQkFBc0JBOzs7O2dDQUNsQkEsWUFBVUEsT0FBT0E7Ozs7Ozs7d0JBRXJCQSxXQUFXQTs7O29CQUdmQSxvQkFBZ0JBLEdBQUtBOzs7Ozs7O1lBR3pCQSxLQUFLQSxZQUFXQSxLQUFJQSx5QkFBb0JBO2dCQUVwQ0EsS0FBS0EsUUFBUUEsY0FBT0EsSUFBSUEseUJBQW9CQTtvQkFFeENBLElBQUlBLDBCQUFhQSxVQUFTQSwwQkFBYUE7d0JBRW5DQSwyQkFBbUJBLG9CQUFnQkEsMEJBQWFBOzs7O2dDQUU1Q0EsMkJBQW1CQSxvQkFBZ0JBLDBCQUFhQTs7Ozt3Q0FFNUNBLFlBQVVBLElBQUlBOzs7Ozs7Ozs7Ozs7Ozs7O1lBT2xDQSxPQUFPQTs7OztZQUtQQSxlQUFlQTtZQUNmQSxJQUFJQTtnQkFDQUE7OztZQUVKQSxRQUFRQSw0QkFBc0RBLGtCQUFTQSxBQUFxREE7WUFDNUhBLFFBQVFBLDRCQUFzREEsa0JBQVNBLEFBQXFEQTs7WUFFNUhBLHVCQUF1QkEsSUFBSUEscUJBQU9BLEdBQUdBO1lBQ3JDQSxzQkFBaUJBOztZQUVqQkEsZ0JBQWdCQSw0QkFBK0VBLHFCQUFTQSxBQUFvSEE7O1lBRTVOQSwwQkFBeUJBOzs7O29CQUNyQkEsc0JBQWVBLGtCQUFrQkE7Ozs7Ozs7WUFFckNBLDJCQUFrQkE7Ozs7b0JBQ2RBLHlCQUFvQkE7Ozs7Ozs7WUFFeEJBOztZQUVBQTs7O1lBS0FBLFFBQVFBLElBQUlBLHdCQUFpQkE7O1lBRTdCQSxLQUFLQSxXQUFXQSxJQUFJQSw0QkFBdUJBO2dCQUN2Q0EsNkJBQWdCQSxXQUFXQTs7O1lBRS9CQTtZQUNBQTs7O1lBSUFBLFFBQVFBLElBQUlBLHdCQUFpQkE7O1lBRTdCQSxLQUFLQSxXQUFXQSxJQUFJQSw0QkFBdUJBO2dCQUN2Q0EsNkJBQWdCQSxXQUFXQSxTQUFTQTs7O1lBRXhDQTtZQUNBQTs7O1lBSUFBLFFBQVFBLElBQUlBLHdCQUFpQkE7O1lBRTdCQSxLQUFLQSxXQUFXQSxJQUFJQSw0QkFBdUJBO2dCQUN2Q0EsNkJBQWdCQSxXQUFXQSxXQUFXQTs7O1lBRTFDQTtZQUNBQTs7O1lBSUFBLFFBQVFBLElBQUlBLHdCQUFpQkE7O1lBRTdCQSxLQUFLQSxXQUFXQSxJQUFJQSw0QkFBdUJBO2dCQUN2Q0EsNkJBQWdCQSxXQUFXQSxZQUFZQTs7O1lBRTNDQTtZQUNBQTs7O1lBSUFBLFFBQVFBLElBQUlBLHdCQUFpQkE7O1lBRTdCQSxLQUFLQSxXQUFXQSxJQUFJQSw0QkFBdUJBO2dCQUN2Q0EsNkJBQWdCQSxXQUFXQSxDQUFDQSxjQUFZQTs7O1lBRTVDQTtZQUNBQTs7aUNBRXNCQSxHQUFlQTs7OztZQUVyQ0EsSUFBSUEsWUFBWUEsUUFBUUEsNEJBQWtDQTtnQkFDdERBLFdBQVdBLGdDQUFvQkE7OztZQUVuQ0EsMEJBQWtCQTs7OztvQkFDZEEsNkJBQWdCQSxXQUFXQTs7Ozs7OztZQUUvQkE7WUFDQUE7Ozs7WUFLQUEsSUFBSUE7Z0JBQ0FBOzs7WUFFSkEsMEJBQWtCQTs7OztvQkFFZEEsTUFBTUEsQUFBT0EsQUFBQ0EsK0JBQVlBLGtCQUFXQSxNQUFNQTtvQkFDM0NBLE1BQU1BLEFBQU9BLEFBQUNBLCtCQUFZQSxrQkFBV0EsTUFBTUE7Ozs7Ozs7NkJBS3BDQTtZQUVYQSxJQUFJQSxDQUFDQSxpQkFBWUE7Z0JBQ2JBOzs7WUFFSkE7WUFDQUEsT0FBT0EsS0FBS0E7Z0JBRVJBLHFDQUFXQSxpQ0FBY0EsTUFBTUEsR0FBR0E7Z0JBQ2xDQSxLQUFLQSxnQkFBV0E7OztZQUdwQkE7WUFDQUEsT0FBT0EsS0FBS0E7Z0JBRVJBLHFDQUFXQSxvQ0FBaUJBLEdBQUdBLFlBQU9BO2dCQUN0Q0EsS0FBS0EsZ0JBQVdBOzs7MEJBSVBBLEdBQVVBO1lBRXZCQSxPQUFPQSxvQkFBZUEsR0FBR0E7O3lCQVVYQSxHQUEyQkEsT0FBV0E7O1lBRXBEQSxJQUFJQSxlQUFjQTtnQkFDZEE7OztZQUVKQTtnQkFFSUEsYUFBUUE7Z0JBQ1JBLGNBQVNBOztnQkFFVEEsSUFBSUE7b0JBQ0FBOzs7Z0JBRUpBLGdDQUFRQTtnQkFDUkEsZUFBVUE7O2dCQUVWQSxrQkFBYUEsR0FBR0EsaUJBQVlBOztnQkFFNUJBLFFBQVFBO29CQUVKQSxLQUFLQTt3QkFDREE7b0JBQ0pBLEtBQUtBO3dCQUNEQTtvQkFDSkEsS0FBS0E7OzRCQUVHQTs0QkFDTUE7O2dDQUVGQSxrQkFBa0JBLEtBQUlBLHNEQUFVQTtnQ0FDaENBLDBCQUFrQkE7Ozs7d0NBQ2RBLG9CQUFvQkEsSUFBSUEsdUJBQUlBLE1BQU1BLGlCQUFZQSxNQUFNQTs7Ozs7Ozs7NEJBRzVEQSxJQUFJQTtnQ0FDQUEsb0NBQVlBLHNDQUFtQkE7Ozs0QkFFbkNBOzs7Ozs7OztZQU1oQkE7O1lBRUFBLElBQUlBO2dCQUVBQTtnQkFDQUE7Z0JBQ0FBLGVBQVVBLElBQUlBOzs7K0JBSUVBLEdBQVVBOztZQUU5QkEsUUFBUUEsSUFBSUE7WUFDWkEsUUFBUUEsSUFBSUE7O1lBRVpBLFFBQVFBO2dCQUVKQSxLQUFLQTtvQkFDREE7Z0JBQ0pBLEtBQUtBOzt3QkFFR0Esd0JBQW1CQSxtQ0FBOEJBO3dCQUNqREEsd0JBQW1CQSxtQ0FBOEJBOzt3QkFFakRBO3dCQUNBQTs7Z0JBRVJBLEtBQUtBOzt3QkFFU0E7OzRCQUVGQSwwQkFBcUJBLElBQUlBLHVCQUFJQSxHQUFHQTs7NEJBRWhDQTs7d0JBRUpBOztnQkFFUkEsS0FBS0E7O3dCQUVHQSwwQkFBa0JBOzs7O2dDQUVkQSxNQUFNQSxpQkFBaUJBO2dDQUN2QkEsTUFBTUEsaUJBQWlCQTs7Ozs7Ozt3QkFHM0JBO3dCQUNBQTs7Ozs7WUFPWkE7O1lBRUFBOzs7O1lBS0FBLFFBQVFBO1lBQ1JBLElBQUlBO2dCQUNBQSxJQUFJQTs7O1lBRVJBLDBCQUFrQkE7Ozs7b0JBQ2RBOzs7Ozs7O1lBRUpBOzs7O1lBS0FBLFFBQVFBO1lBQ1JBLElBQUlBO2dCQUNBQSxJQUFJQTs7O1lBRVJBLDBCQUFrQkE7Ozs7b0JBQ2RBOzs7Ozs7O1lBRUpBOzs0QkFHaUJBO1lBRWpCQSxRQUFRQTtZQUNSQSxJQUFJQTtnQkFFQUEsUUFBUUE7Z0JBQ1JBLFFBQVFBLDZCQUF3QkE7Z0JBQ2hDQSxJQUFJQSxNQUFLQTtvQkFFTEEsNEJBQXVCQTtvQkFDdkJBLElBQUlBLEtBQUtBO3dCQUVMQSx5QkFBb0JBOzJCQUVuQkEsSUFBSUEsSUFBSUE7d0JBRVRBLDRCQUF1QkEsR0FBR0E7O3dCQUkxQkEsNEJBQXVCQSxHQUFHQTs7OztnQkFNbENBLFFBQVFBO2dCQUNSQSxJQUFJQTtvQkFFQUEsU0FBUUE7b0JBQ1JBLFNBQVFBLDBCQUFxQkE7b0JBQzdCQSxJQUFJQSxPQUFLQTt3QkFFTEEseUJBQW9CQTt3QkFDcEJBLElBQUlBLEtBQUtBOzRCQUVMQSxzQkFBaUJBOytCQUVoQkEsSUFBSUEsSUFBSUE7NEJBRVRBLHlCQUFvQkEsR0FBR0E7OzRCQUl2QkEseUJBQW9CQSxHQUFHQTs7Ozs7O1lBTXZDQTs7O1lBS0FBOztZQUVBQTs7K0JBR29CQSxHQUFVQSxHQUFVQTs7WUFFeENBLHVCQUFrQkE7O1lBRWxCQSxRQUFRQSxJQUFJQTtZQUNaQSxRQUFRQSxJQUFJQTs7WUFFWkEsUUFBUUEsWUFBT0EsR0FBR0E7O1lBRWxCQSxRQUFRQTtnQkFFSkEsS0FBS0E7O3dCQUVHQSxJQUFJQSxXQUFVQTs0QkFFVkEsSUFBSUEsS0FBS0E7Z0NBRUxBO2dDQUNBQSwwQkFBcUJBLElBQUlBLHVCQUFJQSxHQUFHQTtnQ0FDaENBLGNBQVNBO21DQUVSQSxJQUFJQTtnQ0FFTEEsSUFBSUEsQUFBQ0EsWUFBUUE7b0NBRVRBLDBCQUFxQkE7Ozs7NENBRWpCQSxlQUFlQSxJQUFJQSx1QkFBSUEsTUFBTUEsR0FBR0EsTUFBTUE7Ozs7Ozs7b0NBRzFDQSxjQUFTQTs7b0NBSVRBLHNCQUFpQkEsWUFBUUE7b0NBQ3pCQSxpQ0FBNEJBLElBQUlBLHVCQUFJQSx3QkFBbUJBLEdBQUdBLHdCQUFtQkE7b0NBQzdFQSxjQUFTQTs7bUNBR1pBLElBQUlBOzsrQkFJUkEsSUFBSUEsV0FBVUE7NEJBRWZBLElBQUlBLEtBQUtBO21DQUdKQSxJQUFJQTttQ0FHSkEsSUFBSUE7Ozs7d0JBS2JBOztnQkFFUkEsS0FBS0E7b0JBQ0RBO2dCQUNKQSxLQUFLQTtvQkFDREE7Ozs2QkFJVUEsR0FBVUEsR0FBVUE7WUFFdENBLFFBQVFBLElBQUlBO1lBQ1pBLFFBQVFBLElBQUlBOztZQUVaQSxRQUFRQSxZQUFPQSxHQUFHQTs7WUFFbEJBLFFBQVFBO2dCQUVKQSxLQUFLQTs7d0JBRUdBOztnQkFFUkEsS0FBS0E7O3dCQUVHQSxJQUFJQSxXQUFVQTs0QkFFVkEsY0FBU0E7OzRCQUVUQSxJQUFJQTtnQ0FDQUE7Ozs0QkFFSkE7O3dCQUVKQTs7Z0JBRVJBLEtBQUtBOzt3QkFFR0EsSUFBSUEsV0FBVUE7NEJBRVZBLGNBQVNBOzs0QkFFVEE7NEJBQ01BOztnQ0FFRkEsa0JBQWtCQSxLQUFJQSxzREFBVUE7O2dDQUVoQ0EsSUFBSUE7b0NBRUFBLDBCQUFxQkEsaUJBQWlCQTs7O2dDQUcxQ0Esb0RBQXlCQSxrR0FBMEJBO2dDQUNuREE7Ozs7d0JBSVJBOztnQkFFUkEsS0FBS0E7O3dCQUVHQSxJQUFJQSxXQUFVQTs0QkFFVkEsY0FBU0E7NEJBQ1RBOzt3QkFFSkE7Ozs7WUFJWkE7O3NDQUcyQkEsR0FBVUEsR0FBVUE7O1lBRS9DQSxRQUFRQSxJQUFJQTtZQUNaQSxRQUFRQSxJQUFJQTs7WUFFWkEsUUFBUUEsWUFBT0EsR0FBR0E7O1lBRWxCQTtZQUNBQSxJQUFJQSxnQkFBVUEsa0NBQWVBLENBQUNBO2dCQUUxQkEsSUFBSUEsV0FBVUE7b0JBRVZBLElBQUlBLEtBQUtBO3dCQUVMQSxRQUFRQSxJQUFJQSxxQkFBT0EsR0FBR0E7d0JBQ3RCQSxJQUFJQSxzQkFBaUJBOzRCQUNqQkE7OzJCQUVIQSxJQUFJQTt3QkFFTEEsZ0JBQWdCQSxZQUFRQTt3QkFDeEJBLDBCQUFrQkE7Ozs7Z0NBRWRBLElBQUlBLHNCQUFlQSxJQUFHQTtvQ0FDbEJBOzs7Ozs7Ozt1QkFJWEEsSUFBSUEsV0FBVUE7b0JBRWZBLElBQUlBO3dCQUVBQSxJQUFJQSx5QkFBb0JBLFlBQVFBOzRCQUM1QkE7Ozs7OztZQUtoQkE7O1lBRUFBLElBQUlBO2dCQUNBQTs7OztZQUtKQTtZQUNBQTs7Ozs7Ozs7O1lBMW5CUUE7WUFDQUEsT0FBT0Esb0NBQXFCQSxzQkFBYUEsR0FBT0E7OzttQkFtSnlFQTs7O21CQUNBQTs7O21CQUtnR0EsMEJBQXFCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3FDQ3ZkM01BLElBQUlBO3FDQUNKQSxJQUFJQTsyQ0FDRUEsSUFBSUE7MkNBQ0pBLElBQUlBOzRDQUNIQSxJQUFJQTtvREFDSUEsSUFBSUE7O2lEQUVQQSxJQUFJQTt5REFDSUEsSUFBSUE7a0RBQ1hBLElBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBOEd4REEsT0FBT0E7OztvQkFJUEEsbUJBQWNBOzs7OztvQkFRZEEsT0FBT0E7OztvQkFJUEEsbUJBQWNBOzs7OztvQkFRZEEsT0FBT0E7OztvQkFJUEEsaUJBQVlBOzs7OztvQkFRWkEsT0FBT0E7OztvQkFJUEEsSUFBSUEsOEJBQVNBO3dCQUNUQTs7O29CQUVKQSxjQUFTQTs7Ozs7b0JBUVRBLE9BQU9BOzs7b0JBSVBBLElBQUlBLFVBQVNBO3dCQUNUQTs7O29CQUVKQSxnQkFBV0E7Ozs7O29CQVFYQSxPQUFPQTs7Ozs7b0JBUVBBLE9BQU9BOzs7b0JBSVBBLElBQUlBLFVBQVNBO3dCQUNUQTs7O29CQUVKQSxtQkFBY0E7Ozs7O29CQVFkQSxPQUFPQTs7O29CQUlQQSxtQkFBY0E7Ozs7O29CQVFkQSxPQUFPQTs7O29CQUlQQSxJQUFJQSx3Q0FBeUJBLENBQUNBLDRCQUFxQkE7d0JBQy9DQSxnREFBVUEsNEJBQU9BOzt3QkFFakJBLGNBQVNBOzs7Ozs7Ozs7Ozs7bUNBT1dBO2dDQUtmQTtvQ0FDZ0JBOzs7OEJBbE9uQkEsR0FBVUE7Z0RBQ2JBLEdBQUdBOzs4QkFJQUE7Z0RBQ0hBOzs4QkFJR0EsR0FBVUE7Z0RBQ2JBLEtBQUtBLEtBQUtBOzs4QkFJUEEsR0FBVUEsR0FBVUE7O2dCQUU5QkEsaUJBQVlBLElBQUlBLGNBQU9BLEdBQUdBO2dCQUMxQkEsY0FBU0E7OzRCQUdDQTs7Z0JBRVZBLGdCQUFXQSxJQUFJQSxjQUFPQSxjQUFjQTtnQkFDcENBLGFBQVFBO2dCQUNSQSxlQUFVQTtnQkFDVkEsYUFBUUE7Ozs7NkJBR2NBLEdBQTJCQSxPQUFXQTtnQkFFNURBLGFBQWFBLG1CQUFjQSxHQUFHQSxPQUFPQTs7Z0JBRXJDQSxJQUFJQSxDQUFDQSw0QkFBcUJBO29CQUV0QkEsSUFBSUEsMEJBQWFBO3dCQUViQSxJQUFJQTs0QkFDQUEsc0NBQWNBLDZDQUErQkE7Ozt3QkFJakRBLHNDQUFjQSxZQUFPQTs7O29CQUd6QkEsc0NBQWNBLG1CQUFjQSx5Q0FBMkJBLGdDQUFrQkEsUUFBUUEsbUJBQWNBO29CQUMvRkEscUNBQWFBLGFBQVFBLHlCQUFXQSwrQkFBaUJBOztvQkFJakRBLElBQUlBLDBCQUFhQTt3QkFDYkEsc0NBQWNBLG1CQUFjQSw4Q0FBZ0NBLHFDQUF1QkE7O3dCQUVuRkEsc0NBQWNBLFlBQU9BOzs7O29CQUd6QkEsc0NBQWNBLG1CQUFjQSx5Q0FBMkJBLGdDQUFrQkEsUUFBUUEsbUJBQWNBOzs7Z0JBR25HQSxJQUFJQTtvQkFFQUEsU0FBU0EsQ0FBQ0EsY0FBY0E7b0JBQ3hCQSxTQUFTQSxDQUFDQSxnQkFBZ0JBO29CQUMxQkEsUUFBUUEsU0FBU0EsY0FBY0E7b0JBQy9CQSxTQUFTQSxJQUFJQSx5QkFBa0JBLEtBQUtBLElBQUlBLFNBQVNBLHNCQUFpQkEsS0FBS0EsSUFBSUEsU0FBU0E7b0JBQ3BGQSxxQ0FBYUEsNkJBQXdCQSx5QkFBV0EsK0JBQWlCQTs7OzJCQUl6REEsR0FBVUE7Z0JBRXRCQSxVQUFVQSw2QkFBc0JBLEdBQUdBO2dCQUNuQ0EsT0FBT0E7O3FDQUc0QkEsR0FBMkJBLE9BQVdBO2dCQUV6RUE7O2dCQUVBQSxJQUFJQSxDQUFDQSw0QkFBcUJBO29CQUV0QkEsV0FBV0Esd0NBQWdCQSxhQUFRQTs7b0JBRW5DQSxTQUFTQSxJQUFJQSx5QkFBa0JBLFNBQUlBLFFBQVFBLGdCQUFnQkEsU0FBSUEsU0FBU0EsaUJBQWlCQSxZQUFZQTs7b0JBSXJHQSxTQUFTQSxJQUFJQSx5QkFBa0JBLFNBQUlBLE9BQU9BLFNBQUlBOzs7Z0JBR2xEQSxlQUFlQSxnQkFBV0EsT0FBT0EsZ0JBQVdBOztnQkFFNUNBLG9CQUFlQSxJQUFJQSx5QkFBa0JBLFdBQVdBLE9BQU9BLFdBQVdBLFFBQVFBLGVBQWVBLE9BQU9BLGdCQUFnQkE7O2dCQUVoSEEsT0FBT0E7OztnQkF5SVBBLG1CQUFjQTtnQkFDZEEsSUFBSUEsbUJBQWNBO29CQUNkQTs7OztnQkFLSkEsa0JBQWFBLENBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkN2UEZBOztnQkFFWkEsZUFBVUE7Z0JBQ1ZBLGdCQUFXQTs7Ozs2QkFHR0E7Z0JBRWRBLDBCQUFxQkE7Z0JBQ3JCQSw0QkFBdUJBO2dCQUN2QkEsOEJBQXlCQSxvQkFBZUE7Z0JBQ3hDQSw2QkFBd0JBLG9CQUFlQTs7Z0NBR3RCQSxNQUFXQSxJQUFRQSxJQUFRQTs7Z0JBRTVDQSw0QkFBdUJBO2dCQUN2QkEsMEJBQXFCQTtnQkFDckJBLDRCQUF1QkEsY0FBZUEsY0FBZUE7Z0JBQ3JEQTtnQkFDQUEscUJBQWdCQSxNQUFNQTtnQkFDdEJBLHFCQUFnQkEsTUFBTUE7Z0JBQ3RCQTs7a0NBRWlCQSxNQUFXQSxJQUFXQSxJQUFXQSxJQUFXQSxJQUFXQTs7Z0JBRXhFQSxjQUFTQSxNQUFNQSxJQUFJQSx1QkFBSUEsSUFBSUEsS0FBS0EsSUFBSUEsdUJBQUlBLElBQUlBLEtBQUtBOztpQ0FFL0JBLE1BQVdBLFFBQXlCQTs7O2dCQUV0REEsNEJBQXVCQTtnQkFDdkJBLDRCQUF1QkE7Z0JBQ3ZCQSwwQkFBcUJBO2dCQUNyQkE7Z0JBQ0FBO2dCQUNBQSwwQkFBa0JBOzs7O3dCQUVkQSxJQUFJQTs0QkFFQUEscUJBQWdCQSxLQUFLQTs0QkFDckJBOzs0QkFJQUEscUJBQWdCQSxLQUFLQTs7Ozs7OztpQkFHN0JBOzttQ0FFb0JBLE1BQVdBOztnQkFFL0JBLDBCQUFxQkE7Z0JBQ3JCQSw0QkFBdUJBO2dCQUN2QkE7Z0JBQ0FBO2dCQUNBQSwwQkFBa0JBOzs7O3dCQUVkQSxJQUFJQTs0QkFFQUEscUJBQWdCQSxLQUFLQTs0QkFDckJBOzs0QkFJQUEscUJBQWdCQSxLQUFLQTs7Ozs7OztpQkFHN0JBOzttQ0FFb0JBLE1BQVdBLFFBQVlBOztnQkFFM0NBLDRCQUF1QkE7Z0JBQ3ZCQSw0QkFBdUJBO2dCQUN2QkE7Z0JBQ0FBLGtCQUFhQSxjQUFjQSxrQkFBa0JBLGFBQWFBLG1CQUFtQkEscUJBQXFCQTtnQkFDbEdBOzttQ0FFb0JBLE1BQVdBO2dCQUUvQkE7Z0JBQ0FBLDBCQUFxQkE7Z0JBQ3JCQSw0QkFBdUJBO2dCQUN2QkEsa0JBQWFBLGNBQWNBLGtCQUFrQkEsYUFBYUEsbUJBQW1CQSxxQkFBcUJBO2dCQUNsR0E7O2tDQUVtQkEsR0FBVUEsTUFBV0EsTUFBV0E7Z0JBRW5EQSxxQkFBZ0JBLHFDQUFrQkE7Z0JBQ2xDQSw0QkFBdUJBO2dCQUN2QkEsNEJBQXVCQTtnQkFDdkJBLHlCQUFvQkEsR0FBR0EsQUFBS0EsVUFBVUEsQUFBS0E7O3FDQUV0QkEsR0FBVUE7Z0JBRS9CQSxxQkFBZ0JBLHFDQUFrQkE7Z0JBQ2xDQSxjQUFjQSwwQkFBcUJBOztnQkFFbkNBLE9BQU9BLElBQUlBLCtCQUFVQSxlQUFlQSx5QkFBeUJBOzs7Ozs7Ozs7O29CQ3RHbkJBOzs7Ozs0QkFFdEJBOzs7O3FGQUNiQTs7OzswQ0FJZ0NBLFdBQXFCQSxPQUFhQTtnQkFFekVBLFFBQVFBLDRCQUFnRkEscUVBQTZCQSxtQkFBbUJBLHdCQUFnQkEsQUFBeUVBO2dCQUNqT0EsUUFBUUEsNEJBQWdGQSxxRUFBNkJBLGNBQWNBLG1CQUFXQSxBQUF5RUE7O2dCQUV2TkEsT0FBT0EsdUJBQWtCQSxLQUFLQSx1QkFBa0JBOzs0QkFHeENBO2dCQUVSQSxPQUFPQSx1REFBVUE7OzhCQUdQQTtnQkFFVkEsT0FBT0EsNEJBQXdDQSxXQUFFQSxBQUFnQ0EsOEVBQW1CQTs7eUNBRy9FQTtnQkFFckJBLFNBQVNBLFVBQUtBOztnQkFFZEEsT0FBT0EsVUFBVUEsNEJBQWdDQSxPQUFFQSxBQUFtQ0E7K0JBQUtBLENBQUNBLElBQUlBLE1BQU1BLENBQUNBLElBQUlBO3lCQUFRQTs7eUNBRzlGQTtnQkFFckJBLFNBQVNBLFlBQU9BOztnQkFFaEJBLE9BQU9BLDRCQUFnQ0EsT0FBRUEsQUFBbUNBOytCQUFLQSxTQUFTQSxLQUFLQTs7O3dDQUc3RUEsV0FBcUJBLE9BQWFBO2dCQUVwREEsUUFBUUEsZ0JBQVdBO2dCQUNuQkEsUUFBUUEsZ0JBQVdBOztnQkFFbkJBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBLFNBQVNBLFVBQVVBO29CQUU1Q0EsUUFBUUEsb0JBQWVBLFVBQUVBLElBQUlBLFVBQUVBOztvQkFFL0JBLElBQUlBO3dCQUNBQTs7b0JBQ0pBLElBQUlBO3dCQUNBQTs7OztnQkFHUkEsT0FBT0EsVUFBVUE7O2tDQUdNQTtnQkFFdkJBLE9BQU9BLDRCQUEyRkEscUVBQTZCQSxVQUFVQSwwQkFBT0EsQUFBeUVBOztzQ0FHMU1BLEdBQWFBO2dCQUU1QkEsSUFBSUEsVUFBVUE7b0JBQ1ZBLE9BQU9BOztnQkFDWEEsSUFBSUEsVUFBVUE7b0JBQ1ZBOzs7Z0JBRUpBLEtBQUtBLFdBQVdBLElBQUlBLFNBQVNBO29CQUV6QkEsSUFBSUEsVUFBRUEsS0FBS0EsVUFBRUE7d0JBQ1RBOztvQkFDSkEsSUFBSUEsVUFBRUEsS0FBS0EsVUFBRUE7d0JBQ1RBLE9BQU9BOzs7O2dCQUdmQTs7Ozs7Ozs7O21CQXBFc09BOzs7bUJBYWhKQTs7Ozs7Ozs7c0NDOE96REE7b0JBRTdCQTs7b0NBRzJCQTtvQkFFM0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29DQTlQc0NBLEtBQUlBOzs0QkFHWEEsTUFBb0JBLFlBQXdCQTs7Ozs7dUhBQ3BFQSxNQUFNQTtnQkFFYkEsbUJBQWNBO2dCQUNkQSxlQUFVQTtnQkFDVkE7Ozs7OztnQkFLQUEsU0FBU0EsSUFBSUE7O2dCQUViQSxjQUFTQSw0QkFBd0dBLGdCQUFNQSxBQUF5R0E7O2dCQUVoT0EsZUFBVUE7Z0JBQ1ZBLGlHQUFXQTtnQkFDWEE7Z0JBQ0FBLHlCQUFvQkE7O2dCQUVwQkEsZ0JBQWdCQSxLQUFJQTtnQkFDcEJBLEtBQUtBLG9CQUFvQkEsY0FBY0Esa0JBQWFBO29CQUVoREEsUUFBUUEsbUJBQU1BO29CQUNkQSxhQUFhQSw0QkFBaUhBLGtCQUFTQSxBQUF5R0E7O29CQUVoUEE7b0JBQ0FBLElBQUlBLGtCQUFrQkEsQ0FBQ0E7d0JBQ25CQSxrQkFBa0JBLDRCQUF1TEEsbUJBQU9BLEFBQTROQTs7d0JBRTVhQSxrQkFBa0JBOzs7b0JBRXRCQSxJQUFJQSxDQUFDQTt3QkFDREEsbUJBQW1CQTs7O29CQUV2QkEseUJBQXlCQSxzQkFBaUJBOztvQkFFMUNBO29CQUNBQTtvQkFDQUEsY0FBY0EscUJBQWNBLGtGQUE4REEsNEJBQTJCQSxzQ0FBWUE7b0JBQ2pJQTtvQkFDQUE7O29CQUVBQSxJQUFJQTt3QkFFQUE7O3dCQUVBQSxJQUFJQTs0QkFDQUE7OzRCQUVBQTs7MkJBRUhBLElBQUlBO3dCQUVMQTt3QkFDQUE7O3dCQUlBQTs7d0JBRUFBLHNCQUFzQkEsNEJBQThHQSxnQkFBT0EsQUFBc0dBO3dCQUNqUEEsMEJBQStCQTs7OztnQ0FFM0JBLElBQUlBO29DQUVBQTs7b0NBRUFBLDJCQUFrQkE7Ozs7NENBRWRBOzRDQUNBQSxpQkFBaUJBLHlCQUE2QkE7OzRDQUU5Q0EsZUFBZUEseUJBQW9CQTs0Q0FDbkNBLFlBQVlBLFNBQVNBLGFBQUdBLDRCQUEyR0EsMEJBQWtCQSxhQUFHQSw0QkFBMkdBOzRDQUNuUUEsV0FBV0EsU0FBU0EsYUFBR0EsNEJBQTJHQSwwQkFBa0JBLGFBQUdBLDRCQUEyR0E7NENBQ2xRQSxhQUFhQSw0QkFBaUhBLGtCQUFTQSxBQUF5R0E7OzRDQUVoUEEsSUFBSUEsQ0FBQ0EsOEJBQXlCQSxPQUFPQSxNQUFNQSxZQUFZQSw0QkFBZ0hBLGlCQUFTQSxBQUF5R0E7Z0RBRXJSQTtnREFDQUE7Z0RBQ0FBOzs7NENBR0pBLFVBQVVBLGdDQUFXQSxhQUFhQSxxQkFBc0JBLGlCQUFtQkEsMkZBQWtGQSxlQUFvQkEsQUFBNElBLHdHQUEyQkEsQUFBNElBO3VEQUFNQSx1SEFBMEJBLEdBQUdBO2lEQUFlQTs0Q0FDdGhCQSxjQUFjQSx3Q0FBb0JBLDRGQUFxRkEsZUFBb0JBLEFBQTRJQSx3R0FBOEJBLEFBQStJQTt1REFBTUEsMEJBQU1BLHVCQUFrQkEsR0FBR0EseUJBQTJCQSwwQkFBcUJBLEdBQUdBO2lEQUFvQkE7NENBQzVpQkE7OzRDQUVBQSxJQUFJQSw0QkFBbUJBO2dEQUVuQkE7Z0RBQ0FBO2dEQUNBQSxjQUFjQSxxREFBaUNBLDRGQUFxRkEsNEJBQThLQSw0QkFBbUJBLFdBQUdBLEFBQXVLQTtnREFDL2VBO2dEQUNBQTs7OzRDQUdKQTs0Q0FDQUE7Ozs7Ozs0Q0FHSEEsSUFBSUE7b0NBRUxBO29DQUNBQTtvQ0FDQUE7b0NBQ0FBLDJCQUFrQkE7Ozs7NENBRWRBOzRDQUNBQSxrQkFBaUJBLDBCQUE2QkE7OzRDQUU5Q0EsZ0JBQWVBLHlCQUFvQkE7NENBQ25DQSxhQUFZQSxTQUFTQSxjQUFHQSw0QkFBMkdBLDJCQUFrQkEsY0FBR0EsNEJBQTJHQTs0Q0FDblFBLFlBQVdBLFNBQVNBLGNBQUdBLDRCQUEyR0EsMkJBQWtCQSxjQUFHQSw0QkFBMkdBOzRDQUNsUUEscUJBQWVBLDRCQUE0R0Esa0JBQTlFQTs7NENBRTdDQSxJQUFJQSxDQUFDQSw4QkFBeUJBLFFBQU9BLE9BQU1BLGFBQVlBLDRCQUFvSEEsc0JBQVNBLEFBQXlKQTtnREFFelVBO2dEQUNBQTtnREFDQUE7Ozs0Q0FHSkEsT0FBT0E7Z0RBRUhBLDZCQUF1QkEsNEZBQW1GQSxnQ0FBb0JBLGlCQUFlQSxBQUFnQ0E7OytEQUFLQSw0QkFBMkdBLGtCQUFTQSxBQUEwR0E7dUVBQU1BLHlCQUF5QkE7Ozs7Z0RBQy9hQSxpQkFBaUJBLDRCQUEyR0Esa0JBQVNBLEFBQTBHQTs7bUVBQU1BLHlCQUF5QkE7OztnREFDOVFBLGNBQWNBLDRCQUE0R0Esa0tBQWdLQSxZQUFXQSxBQUF5R0E7O21FQUFNQSw4QkFBNkJBLEtBQUtBLDRCQUFrQ0EsMEZBQWlGQSxpQkFBZ0JBOzt3RkFBN2dCQTs7Z0RBRTVDQSxVQUFVQSxnQ0FBV0EsY0FBYUEsY0FBYUEsQ0FBQ0EsaUlBQW9DQSxJQUFHQSxpQ0FBdUJBOztnREFFOUdBLGFBQWFBLDRCQUFvSEEsd0JBQVFBLEFBQTBHQTtnREFDblBBLElBQUlBLFVBQVVBO29EQUNWQTs7O2dEQUVKQSxJQUFJQSw0QkFBMkdBLGVBQVFBLEFBQTBHQTtvREFDN05BLFVBQVVBLDBCQUFNQSwyRkFBa0ZBLDRCQUEyR0EsZUFBUUEsQUFBMEdBLDBHQUErQ0EsQUFBeUdBOzttRUFBTUEsNEJBQWtDQSwwRkFBaUZBLGlCQUFnQkE7O3VGQUFpQ0EsQUFBeUdBOzttRUFBTUEseUlBQWtDQSwwRkFBaUZBLGlCQUFnQkEsOEJBQXNDQSxJQUFHQTs7aUZBQWVBOztnREFDLzZCQTs7Z0RBRUFBLGNBQWNBLHdDQUFvQkEsNEZBQXFGQSw0QkFBaUhBLGlCQUFRQSxBQUF5R0E7O21FQUFNQSw4QkFBNkJBLEtBQUtBLDRCQUFrQ0EsMEZBQWlGQSxpQkFBZ0JBOzt1RkFBb0NBLEFBQTRHQTsyREFBTUEsMEJBQU1BLHVCQUFrQkEsSUFBR0EsaUJBQW1CQSwwQkFBcUJBLElBQUdBO3FEQUFZQTtnREFDNXVCQTs7Z0RBRUFBLDJCQUFtQkE7Ozs7d0RBQ2ZBLGtCQUFnQkE7Ozs7Ozs7OzRDQUd4QkEsSUFBSUEsNEJBQW1CQTtnREFFbkJBO2dEQUNBQTtnREFDQUEsY0FBY0EscURBQWlDQSw0RkFBcUZBLDRCQUE4S0EsNEJBQW1CQSxZQUFHQSxBQUF1S0E7Z0RBQy9lQTtnREFDQUE7Ozs0Q0FHSkE7NENBQ0FBOzRDQUNBQTs7Ozs7Ozs7Ozs7Ozs7O2dCQU9wQkEsK0ZBQVNBOztnQkFFVEEsT0FBT0E7O2dEQUdtQkEsT0FBV0EsTUFBVUEsY0FBcUJBOztnQkFFcEVBLGFBQWFBLDRCQUFtRkEsdUdBQXdCQSxBQUE0RUE7O2dCQUVwTUEsYUFBYUEsQUFBc0NBLFVBQUNBO3dCQUFPQSxRQUFRQTt3QkFBT0EsUUFBUUE7d0JBQU1BLE9BQU9BO3NCQUE1REEsS0FBSUE7Z0JBQ3ZDQSwwQkFBa0JBOzs7O3dCQUVkQSxJQUFJQSwrREFBc0RBLFFBQU9BLGVBQU9BOzRCQUVwRUE7NEJBQ0FBOzs7Ozs7OztnQkFJUkE7O3lDQUdxQkEsR0FBa0JBO2dCQUV2Q0EsaUJBQWlCQSxJQUFJQSx5RUFBZUEsVUFBVUEsVUFBVUEsU0FBU0EsYUFBYUE7Z0JBQzlFQSxPQUFPQSxvQ0FBa0NBOzsyQ0FHcEJBO2dCQUVyQkEsa0JBQWFBLDRCQUF5R0EsMEdBQWdIQSwwR0FBZ0hBLDJCQUFxQkEsK0JBQXlCQSxvQ0FBelZBO2dCQUMzQ0EseUJBQW9CQSxLQUFJQTtnQkFDeEJBLDRCQUF1QkEsS0FBSUEsd0RBQXlCQSwyQkFBc0JBOztnQkFFMUVBLG1CQUFtQkEsc0JBQWlCQTs7Z0JBRXBDQSxJQUFJQTtvQkFDQUEsY0FBY0Esc0tBQWlKQSxxQ0FBaUNBOztvQkFFaE1BLGNBQWNBLCtIQUEwR0EscUNBQWlDQTs7O2dCQUU3SkEsSUFBSUE7b0JBRUFBLGNBQWNBLHVEQUFrQ0Esa0VBQStEQSxzQkFBaUJBOzs7Z0JBR3BJQTs7d0NBR29CQTtnQkFFcEJBLElBQUlBO29CQUVBQSxlQUFlQSw0QkFBc0pBLGVBQU9BLEFBQStJQTtvQkFDM1RBLGtCQUFrQkEsNEJBQWdJQSxtRUFBd0RBLDhCQUFnRUEsMkJBQXNCQSxvQ0FBdUJBLEFBQXlIQSx5R0FBc0RBLDRCQUE4RUEsbUJBQVNBLHlCQUFvQkE7O29CQUVqbEJBLGtCQUFrQkEscUNBQWdDQSxVQUFVQTtvQkFDNURBLE9BQU9BLDRGQUFxRkEsNEJBQTJJQSxvQkFBWUEsQUFBb0lBOzs7Z0JBRzNYQSxPQUFPQSw0RkFBcUZBLDRCQUFnSEEsZUFBT0EsQUFBeUdBLCtIQUF5REEsQUFBc0NBLHlHQUF3QkEsQUFBc0NBOztxQ0FHcmNBO2dCQUVwQkEsYUFBYUEsNEJBQWlGQSx1QkFBZUEsQUFBMEVBLHdHQUF1QkEsQUFBMEVBO2dCQUN4UkEsT0FBT0EsNEJBQWdGQSxlQUFPQSxBQUF5RUE7OztnQkFLdktBLGFBQWFBLDRCQUFpRkEsMERBQXFDQSxBQUEwRUE7Z0JBQzdNQSxzQkFBaUJBLDRCQUFtQ0EsMkZBQXdGQSxRQUFPQSxBQUEwRUEsZ0lBQTlLQTtnQkFDL0NBLHdCQUFtQkEsNEJBQWdGQSxlQUFPQSxBQUF5RUEsd0dBQXFCQSxBQUFpQ0E7O2dCQUV6T0EsVUFBVUEsZ0NBQW9CQTtnQkFDOUJBLHNCQUFpQkEsNEJBQW9GQSw0QkFBcUNBLDBDQUErQkEsQUFBZ0NBLG1JQUFrQkEsQUFBeUhBOytCQUFLQSxpRUFBc0RBLEtBQUlBOztnQkFDblpBLDRCQUF1QkEsZ0NBQW9CQTs7aUNBYWhDQTtnQkFFWEEsZUFBZUEsNkJBQVNBOztnQkFFeEJBO2dCQUNBQTtnQkFDQUEsY0FBY0E7Z0JBQ2RBLGNBQWNBLDRFQUF3REE7Z0JBQ3RFQTs7Z0JBRUFBO2dCQUNBQSxJQUFJQTtvQkFDQUEsY0FBY0EsbURBQStCQTs7b0JBRTdDQSxjQUFjQSxtREFBK0JBOztnQkFDakRBOzs7Ozs7Ozs7bUJBalFxT0EsQ0FBQ0E7OzttQkFXbUJBLDJCQUF5QkE7OzttQkFJbXhCQTs7O21CQUE1bUJBLDRCQUF3R0EsbUJBQVFBLDhFQUFJQSw0QkFBaVBBLDRCQUFtQkEsV0FBR0EsQUFBME9BOzs7bUJBaUNqakJBOzs7bUJBQS9PQSw0QkFBeUdBLHlCQUFvQkEsUUFBR0EsQUFBeUdBOzs7bUJBZTdOQTs7O21CQVM2RUE7OzttQkFRdUxBLDBCQUFNQSw0QkFBOEJBLG1DQUFpQ0E7OzttQkF3QjVPQTs7O21CQWV0RkE7OzttQkFJbEJBOzs7bUJBb0N3Q0EsbUJBQVVBOzs7bUJBQXhHQSw0QkFBd0NBLGtEQUFnQkEsQUFBaUNBOzs7bUJBOENrQ0EsbUJBQWNBOzs7bUJBQ3dHQSw0QkFBbUNBLFdBQUxBOzt1QkFHc0lBLEdBQUdBO21CQUFNQSxpR0FBUUEscUJBQWdCQSw4QkFBaUJBOzs7bUJBQS9RQSwwQkFBTUEsZUFBaUJBLDRCQUFrR0EsV0FBR0EsQUFBZ0dBOzs7bUJBRzdMQTs7O21CQUE4REEsMEJBQU1BOzs7bUJBS3hTQTs7O21CQUFpR0EsVUFBVUE7OzttQkFDM0hBLHlGQUFzRkEscUJBQWVBLEFBQTBFQTt1QkFBTUEsNEJBQTBDQSxrQkFBR0E7Ozs7bUJBT3ROQTs7O21CQUFzREEsSUFBSUE7OzttQkFHcENBOzs7Ozs7Ozs7OzRCQy9QNUtBLE1BQW9CQTs7Ozt1SEFDL0NBO2dCQUVQQSxtQkFBY0E7Ozs7OztnQkFLZEEsYUFBYUE7Z0JBQ2JBLGdCQUFnQkEsNEJBQXlHQSwwR0FBZ0hBLDJCQUFxQkEsc0NBQWhOQTs7Z0JBRTlDQSxlQUFlQSxLQUFJQTtnQkFDbkJBLFNBQVNBLEtBQUlBLHdEQUF5QkEsUUFBUUEsQUFBc0NBLG1HQUFoQkEsS0FBSUE7O2dCQUV4RUEsV0FBV0EsNEJBQXNKQSxrQkFBVUEsQUFBK0lBO2dCQUMxVEEsZ0JBQWdCQSw0QkFBc0pBLGtCQUFVQSxBQUErSUE7O2dCQUUvVEEsbUJBQW1CQSw0QkFBZ0lBLGlFQUF3REEsOEJBQStEQSxvQ0FBd0JBLGlCQUFTQSxBQUF5SEEsMkdBQXNEQSw0QkFBOEVBLGVBQUtBLFdBQVdBOztnQkFFeGpCQSxtQkFBbUJBLGNBQWNBLFdBQVdBO2dCQUM1Q0EsbUJBQW1CQSw0RkFBcUZBLDRCQUEySUEscUJBQWFBLEFBQW9JQTs7Z0JBRXBZQSxTQUFTQSxJQUFJQTtnQkFDYkEsZUFBZUEsNkJBQVNBOztnQkFFeEJBO2dCQUNBQTtnQkFDQUEsY0FBY0E7Z0JBQ2RBLGNBQWNBLDhIQUEwR0E7Z0JBQ3hIQTs7Z0JBRUFBO2dCQUNBQSxjQUFjQSxtREFBK0JBO2dCQUM3Q0E7O2dCQUVBQSxjQUFjQSxBQUF5Q0EsbUdBQW5CQSxLQUFJQTtnQkFDeENBLG1CQUFtQkEsNEJBQW1DQSx5REFBcUNBLEFBQWtDQTtnQkFDN0hBLFVBQVVBLElBQUlBLHFCQUFPQTtnQkFDckJBO2dCQUNBQSxLQUFLQSxXQUFXQSxJQUFJQSxjQUFjQTtvQkFDOUJBLGtEQUFnQkEsZ0JBQVFBOzs7Z0JBRTVCQTtnQkFDQUEsS0FBS0EsWUFBV0EsS0FBSUEsY0FBY0E7b0JBQzlCQSxvREFBaUJBLGdCQUFRQTs7O2dCQUU3QkE7Z0JBQ0FBLEtBQUtBLFlBQVdBLEtBQUlBLGNBQWNBO29CQUM5QkEsb0RBQWlCQSxnQkFBUUE7OztnQkFFN0JBO2dCQUNBQSxjQUFjQSxpSUFBNkdBLGtDQUFvQ0E7Z0JBQy9KQTtnQkFDQUE7Z0JBQ0FBO2dCQUNBQTtnQkFDQUEsY0FBY0Esb0VBQWdEQSxxQ0FBdUNBLG9CQUFzQkE7Z0JBQzNIQSxjQUFjQSw0REFBd0NBLG9HQUFzR0Esd0JBQTBCQTtnQkFDdExBO2dCQUNBQTs7Z0JBRUFBLElBQUlBO29CQUVBQSxjQUFjQSxzTEFBa0tBOztvQkFJaExBLGNBQWNBLCtJQUEySEE7OztnQkFHN0lBO2dCQUNBQSxnQkFBZ0JBLEtBQUlBO2dCQUNwQkEsS0FBS0Esb0JBQW9CQSxjQUFjQSxrQkFBYUE7b0JBRWhEQSxRQUFRQSxtQkFBTUE7O29CQUVkQSxhQUFhQTtvQkFDYkE7b0JBQ0FBLElBQUlBO3dCQUNBQSxrQkFBa0JBLDRCQUF1TEEsbUJBQU9BLEFBQTROQTs7d0JBRTVhQSxrQkFBa0JBOzs7b0JBRXRCQSxtQkFBbUJBOztvQkFFbkJBLFVBQVVBLDRCQUFzSkEsd0JBQWdCQSxBQUErSUE7b0JBQy9UQSxlQUFlQSw0QkFBc0pBLHdCQUFnQkEsQUFBK0lBO29CQUNwVUEsa0JBQWtCQSw0QkFBZ0lBLGlFQUF3REEsOEJBQStEQSxvQ0FBd0JBLGlCQUFTQSxBQUF5SEEsMkdBQXNEQSw0QkFBOEVBLGNBQUlBLFdBQVdBOztvQkFFdGpCQSxrQkFBa0JBLGNBQWNBLFVBQVVBO29CQUMxQ0EsZ0JBQWdCQSw0RkFBcUZBLDRCQUEySUEsb0JBQVlBLEFBQW9JQTs7b0JBRWhZQTtvQkFDQUE7b0JBQ0FBLGNBQWNBLHFCQUFjQSxzREFBa0NBLG1CQUFtQkE7b0JBQ2pGQTtvQkFDQUE7b0JBQ0FBLElBQUlBO3dCQUVBQTt3QkFDQUE7O3dCQUlBQTt3QkFDQUEsZ0JBQWdCQSw0QkFBaUhBLGdCQUFPQSxBQUF5R0E7O3dCQVFqUEEsMEJBQXlCQTs7OztnQ0FFckJBLGFBQWFBLDRCQUFzQ0EsZ0JBQVJBO2dDQUMzQ0EsY0FBY0E7O2dDQUVkQSxzQkFBc0JBLGlCQUFzQkEsQUFBc0dBO2dDQUNsSkEsMkJBQStCQTs7Ozt3Q0FFM0JBLElBQUlBOzRDQUVBQSwyQkFBa0JBOzs7O29EQUVkQSxlQUFlQSx5QkFBb0JBO29EQUNuQ0EsYUFBYUEsNEJBQWlIQSxrQkFBU0EsQUFBeUdBOztvREFFaFBBLFVBQVVBLCtCQUFXQSw4QkFBOEJBLG1HQUFrQkEsMkZBQWtGQSxlQUFvQkEsQUFBNElBLDRHQUEyQkEsQUFBNElBOytEQUFNQSw0R0FBbUJBO3dEQUFTQTtvREFDaGdCQSxjQUFjQSx1Q0FBbUJBLDRGQUFxRkEsZUFBb0JBLEFBQTRJQSw0R0FBOEJBLEFBQStJQTsrREFBTUEsMEJBQU1BLHVCQUFrQkEsR0FBR0E7eURBQW9CQSxrQkFBb0JBLDJGQUFrRkEsNEJBQWdIQSxpQkFBU0EsQUFBeUdBO21FQUFNQSwwQkFBcUJBLEdBQUdBOytFQUE4QkEsQUFBZ0NBO29EQUM1NUJBOztvREFFQUEsSUFBSUEsNEJBQW1CQTt3REFFbkJBO3dEQUNBQTt3REFDQUEsY0FBY0EsNEZBQXFGQSw0QkFBOEtBLDRCQUFtQkEsV0FBR0EsQUFBdUtBO3dEQUM5Y0E7d0RBQ0FBOzs7Ozs7O29EQUlQQSxJQUFJQTs0Q0FFTEEsMkJBQWtCQTs7OztvREFFZEEsZ0JBQWVBLHlCQUFvQkE7b0RBQ25DQSxxQkFBZUEsNEJBQTRHQSxrQkFBOUVBOztvREFFN0NBLE9BQU9BO3dEQUVIQSw2QkFBdUJBLDRGQUFtRkEsZ0NBQW9CQSxpQkFBZUEsQUFBZ0NBOzt1RUFBS0EsNEJBQTJHQSxrQkFBU0EsQUFBMEdBOytFQUFNQSx5QkFBeUJBOzs7O3dEQUMvYUEsaUJBQWlCQSw0QkFBMkdBLGtCQUFTQSxBQUEwR0E7OzJFQUFNQSx5QkFBeUJBOzs7d0RBQzlRQSxjQUFjQSw0QkFBNEdBLGtLQUFnS0EsWUFBV0EsQUFBeUdBOzsyRUFBTUEsOEJBQTZCQSxLQUFLQSw0QkFBa0NBLDBGQUFpRkEsaUJBQWdCQTs7Z0dBQTdnQkE7O3dEQUU1Q0EsVUFBVUEsK0JBQVdBLHFCQUFxQkEsQ0FBQ0Esc0hBQTZCQSxzQkFBaUJBOzt3REFFekZBLGFBQWFBLDRCQUFvSEEsd0JBQVFBLEFBQTBHQTt3REFDblBBLElBQUlBLFVBQVVBOzREQUNWQTs7O3dEQUVKQSxJQUFJQSw0QkFBMkdBLGVBQVFBLEFBQTBHQTs0REFDN05BLFVBQVVBLDBCQUFNQSwyRkFBa0ZBLDRCQUEyR0EsZUFBUUEsQUFBMEdBLDZHQUErQ0EsQUFBeUdBOzsyRUFBTUEsNEJBQWtDQSwwRkFBaUZBLGlCQUFnQkE7OytGQUFpQ0EsQUFBeUdBOzsyRUFBTUEsOEhBQWtDQSwwRkFBaUZBLGlCQUFnQkEsOEJBQStCQTs7eUZBQVNBOzt3REFDLzVCQTs7d0RBRUFBLGNBQWNBLHVDQUFtQkEsNEZBQXFGQSw0QkFBaUhBLGlCQUFRQSxBQUF5R0E7OzJFQUFNQSw4QkFBNkJBLEtBQUtBLDRCQUFrQ0EsMEZBQWlGQSxpQkFBZ0JBOzsrRkFBb0NBLEFBQTRHQTttRUFBTUEsMEJBQU1BLHVCQUFrQkEsSUFBR0E7NkRBQVlBLGlCQUFtQkEsMkZBQWtGQSw0QkFBZ0hBLGdCQUFRQSxBQUF5R0E7dUVBQU1BLDBCQUFxQkEsSUFBR0E7bUZBQThCQSxBQUFnQ0E7d0RBQ2xtQ0E7O3dEQUVBQSwyQkFBbUJBOzs7O2dFQUNmQSxrQkFBZ0JBOzs7Ozs7OztvREFHeEJBLElBQUlBLDRCQUFtQkE7d0RBRW5CQTt3REFDQUE7d0RBQ0FBLGNBQWNBLDRGQUFxRkEsNEJBQThLQSw0QkFBbUJBLFlBQUdBLEFBQXVLQTt3REFDOWNBO3dEQUNBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQVF4QkE7OztnQkFHSkE7Z0JBQ0FBLE9BQU9BOzt5Q0FHY0EsR0FBa0JBO2dCQUV2Q0EsaUJBQWlCQSxJQUFJQSx5RUFBZUEsVUFBVUEsVUFBVUEsU0FBU0EsYUFBYUE7Z0JBQzlFQSxPQUFPQTs7Ozs7Ozs7c0JBeEw4RUE7WUFBT0E7WUFBV0E7WUFBV0E7WUFBV0EsT0FBT0E7OzttQkFFMkxBOzs7bUJBRzJHQSw0QkFBbUNBLFdBQUxBOzs7bUJBRzZKQTs7O21CQUEzTkEsMEJBQU1BLGVBQWdCQSw0QkFBa0dBLFdBQUdBLEFBQTJGQTs7c0JBZXhpQkE7WUFBT0E7WUFBYUE7WUFBYUE7WUFBYUEsT0FBT0E7OzttQkFDc0JBOzs7bUJBMkNrNkJBOzs7bUJBQTVtQkEsNEJBQXdHQSxtQkFBUUEsOEVBQUlBLDRCQUFpUEEsNEJBQW1CQSxXQUFHQSxBQUEwT0E7OztZQTRCbGhDQSxlQUFlQSx5QkFBb0JBO1lBQ25DQSxnQkFBZ0JBLDRGQUFDQSxBQUFNQSxhQUFDQSxDQUFDQSxLQUFLQSw0QkFBMkdBLDJCQUFtQkEsQ0FBQ0EsS0FBS0EsNEJBQTJHQTs7WUFFN1FBLE9BQU9BOzs7bUJBUStYQTs7O21CQUEvT0EsNEJBQXlHQSx5QkFBb0JBLFFBQUdBLEFBQXlHQTs7O21CQVE5SEE7OzttQkFFdUVBOzs7bUJBQ3FtQkE7OzttQkFPemNBLDBCQUFNQSw0QkFBOEJBOzs7bUJBcUJoUUE7OzttQkFJbEJBOzs7Ozs7Ozt5Q0Nzc0M5TkE7Ozs7Ozs7Ozs7Ozs7Ozs0Q0FFckNBO2dEQUNBQTs7Ozs7Ozs7Ozs7Ozs0Q0FFSUEsSUFBUUEsOEJBQWVBO2dEQUN2QkEsSUFBSUE7b0RBRUFBLElBQUlBLDhCQUFlQTtvREFDbkJBLElBQUlBO3dEQUNBQTs7OztnREFFUkEsSUFBSUE7O2dEQUVKQSxJQUFJQSw4QkFBZUE7Z0RBQ25CQSxJQUFJQTtvREFFQUEsSUFBSUEsOEJBQWVBO29EQUNuQkEsSUFBSUE7d0RBQ0FBOzs7O2dEQUVSQSxJQUFRQSw2QkFBWUEsR0FBR0EsTUFBSUE7Z0RBQzNCQSxzQkFBYUEsSUFBSUEsY0FBT0Esb0JBQWFBLG9FQUFnQ0Esb0JBQWFBOzs7Ozs0Q0FDbEZBLElBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBSXdCQTs7b0JBRWhDQSxXQUFXQSwwREFBeUJBLHVFQUF1Q0E7b0JBQzNFQSxRQUFRQSxrQkFBS0EsVUFBVUE7b0JBQ3ZCQSxVQUFVQSxpREFBU0EsR0FBR0E7O29CQUV0QkE7b0JBQ0FBLDBCQUFrQkE7Ozs7NEJBRWRBLFNBQUlBLG9CQUFJQSxVQUFHQSxJQUFJQSxJQUFLQTs0QkFDcEJBOzs7Ozs7O29CQUdKQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkF2RURBLE9BQU9BOzs7Ozs7OztvQkFrQlBBLE9BQU9BOzs7b0JBR1RBLGNBQVNBO29CQUNUQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRCQXYxQ1NBLFFBQTBCQTs7Z0JBRXZDQSxtQkFBY0E7Z0JBQ2RBLGNBQVNBO2dCQUNUQSwwQkFBcUJBOztnQkFFckJBLG1FQUFxQkE7Z0JBQ3JCQSxxRUFBc0JBO2dCQUN0QkEsaUVBQW9CQTtnQkFDcEJBLHFFQUFzQkE7O2dCQUV0QkEscUJBQWdCQTs7Z0JBRWhCQSxrQ0FBNkJBO2dCQUM3QkEsaUNBQTRCQTs7OztzQ0FHWkE7Z0JBRWhCQSxhQUFRQTs7O2dCQU1SQSxpQkFBWUEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSW5GQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFLdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBS3ZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFPdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBS3ZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUt2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7Oztn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ekVBLElBQUlBLGFBQWFBO29CQUViQSxpQkFBWUEsb0NBQWdCQTs7OzBDQUlaQTt3Q0FJS0E7O2dCQU16QkE7OztnQkFpQkFBLGVBQWVBLElBQUlBLGNBQVNBO2dCQUM1QkEsdUJBQWtCQSxVQUFVQSxtQkFBY0E7Ozs7Ozs7OzttQkFoSCtFQTs7O21CQUNBQTs7O1FBY3JIQTs7OztRQUVLQSIsCiAgInNvdXJjZXNDb250ZW50IjogWyJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQXNzaWdubWVudEVudW1lcmF0b3I6IElFbnVtZXJhYmxlPExpc3Q8SW50NjQ+PlxyXG4gICAge1xyXG4gICAgICAgIGludCBfdmVydGV4Q291bnQ7XHJcbiAgICAgICAgRnVuYzxpbnQsIGludD4gX2Y7XHJcbiAgICAgICAgaW50IF9wb3RTaXplO1xyXG4gICAgICAgIGludCBfc3RhcnQ7XHJcbiAgICAgICAgaW50IF9zdGVwO1xyXG5cclxuICAgICAgICBwdWJsaWMgQXNzaWdubWVudEVudW1lcmF0b3IoaW50IHZlcnRleENvdW50LCBGdW5jPGludCwgaW50PiBmLCBpbnQgcG90U2l6ZSwgaW50IHN0YXJ0ID0gMCwgaW50IHN0ZXAgPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3ZlcnRleENvdW50ID0gdmVydGV4Q291bnQ7XHJcbiAgICAgICAgICAgIF9mID0gZjtcclxuICAgICAgICAgICAgX3BvdFNpemUgPSBwb3RTaXplO1xyXG4gICAgICAgICAgICBfc3RhcnQgPSBzdGFydDtcclxuICAgICAgICAgICAgX3N0ZXAgPSBzdGVwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBJRW51bWVyYWJsZTxsb25nW10+IE1lbWJlcnNcclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhdG9yPExpc3Q8SW50NjQ+PiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRW51bWVyYXRvcihfdmVydGV4Q291bnQsIF9mLCBfcG90U2l6ZSwgX3N0YXJ0LCBfc3RlcCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gSUVudW1lcmFibGUgTWVtYmVyc1xyXG5cclxuICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhYmxlLkdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgICAgIGNsYXNzIEVudW1lcmF0b3IgOiBJRW51bWVyYXRvcjxMaXN0PEludDY0Pj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8SUVudW1lcmF0b3I8SW50NjQ+PiBfZW51bWVyYXRvcnM7XHJcbiAgICAgICAgICAgIExpc3Q8SW50NjQ+IF9jdXJyZW50O1xyXG4gICAgICAgICAgICBpbnQgX3N0ZXA7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgRW51bWVyYXRvcihpbnQgdmVydGV4Q291bnQsIEZ1bmM8aW50LCBpbnQ+IGYsIGludCBwb3RTaXplLCBpbnQgc3RhcnQgPSAwLCBpbnQgc3RlcCA9IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9lbnVtZXJhdG9ycyA9IG5ldyBMaXN0PElFbnVtZXJhdG9yPEludDY0Pj4odmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gRW51bWVyYWJsZS5SYW5nZSgwLCBmKDApKS5Ub0ludDY0KCk7XHJcbiAgICAgICAgICAgICAgICBfZW51bWVyYXRvcnMuQWRkKEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxJbnQ2ND4oKSwoX28xKT0+e19vMS5BZGQoZmlyc3QpO3JldHVybiBfbzE7fSkuR2V0RW51bWVyYXRvcigpKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgdmVydGV4Q291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBfZW51bWVyYXRvcnMuQWRkKG5ldyBTdWJzZXRFbnVtZXJhdG9yLkVudW1lcmF0b3IocG90U2l6ZSwgZihpKSkpO1xyXG4gICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBfc3RlcCA9IHN0ZXA7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdGFydDsgaSsrKSBpZiAoIU1vdmVOZXh0SW50ZXJuYWwoKSkgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gSUVudW1lcmF0b3I8bG9uZ1tdPiBNZW1iZXJzXHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgTGlzdDxJbnQ2ND4gQ3VycmVudFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnZXQgeyByZXR1cm4gX2N1cnJlbnQ7IH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBJRGlzcG9zYWJsZSBNZW1iZXJzXHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBEaXNwb3NlKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICAgICAjcmVnaW9uIElFbnVtZXJhdG9yIE1lbWJlcnNcclxuXHJcbiAgICAgICAgICAgIG9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IuQ3VycmVudFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnZXQgeyByZXR1cm4gQ3VycmVudDsgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBNb3ZlTmV4dCgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgX3N0ZXA7IGorKykgaWYgKCFNb3ZlTmV4dEludGVybmFsKCkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYm9vbCBNb3ZlTmV4dEludGVybmFsKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9jdXJyZW50ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2N1cnJlbnQgPSBuZXcgTGlzdDxJbnQ2ND4oX2VudW1lcmF0b3JzLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgZW51bWVyYXRvciBpbiBfZW51bWVyYXRvcnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhdG9yLk1vdmVOZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jdXJyZW50LkFkZChlbnVtZXJhdG9yLkN1cnJlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaW50IGkgPSBfZW51bWVyYXRvcnMuQ291bnQgLSAxO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGkgPj0gMSlcclxuICAgICAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9lbnVtZXJhdG9yc1tpXS5Nb3ZlTmV4dCgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2N1cnJlbnRbaV0gPSBfZW51bWVyYXRvcnNbaV0uQ3VycmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBfZW51bWVyYXRvcnNbaV0uUmVzZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfZW51bWVyYXRvcnNbaV0uTW92ZU5leHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2N1cnJlbnRbaV0gPSBfZW51bWVyYXRvcnNbaV0uQ3VycmVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBpID49IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZvaWQgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yLlJlc2V0KClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIENob29zYWJpbGl0eVJlc3VsdFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gQmFkQXNzaWdubWVudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0O1xyXG4gICAgICAgICAgICBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENhbmNlbGVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQ7XHJcbiAgICAgICAgICAgIHByaXZhdGUgc2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNDaG9vc2FibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBCYWRBc3NpZ25tZW50ID09IG51bGw7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBDaG9vc2FiaWxpdHlSZXN1bHQoTGlzdDxMaXN0PGludD4+IGJhZEFzc2lnbm1lbnQsIGJvb2wgY2FuY2VsZWQgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJhZEFzc2lnbm1lbnQgPSBiYWRBc3NpZ25tZW50O1xyXG4gICAgICAgICAgICBDYW5jZWxlZCA9IGNhbmNlbGVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgT3JpZW50YXRpb25SZXN1bHRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgR3JhcGggR3JhcGggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgRXZlbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBPZGQgeyBnZXQ7IHNldDsgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQ291bnRpbmdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgQmlub21pYWxDb2VmZmljaWVudChsb25nIG4sIGxvbmcgaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChrIDwgMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxvbmcgbWF4ID0gTWF0aC5NYXgoaywgbiAtIGspO1xyXG4gICAgICAgICAgICBsb25nIG1pbiA9IE1hdGguTWluKGssIG4gLSBrKTtcclxuXHJcbiAgICAgICAgICAgIGxvbmcgcmVzdWx0ID0gMTtcclxuICAgICAgICAgICAgd2hpbGUgKG4gPiBtYXgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCAqPSBuO1xyXG4gICAgICAgICAgICAgICAgbi0tO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAobWluID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0IC89IG1pbjtcclxuXHJcbiAgICAgICAgICAgICAgICBtaW4tLTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBGYWN0b3JpYWwoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIHRvdGFsID0gMTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgdG90YWwgKj0gaTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEJpamVjdGlvbjxELCBDPlxyXG4gICAge1xyXG4gICAgICAgIERpY3Rpb25hcnk8RCwgQz4gX2YgPSBuZXcgRGljdGlvbmFyeTxELCBDPigpO1xyXG4gICAgICAgIERpY3Rpb25hcnk8QywgRD4gX2ZpbnZlcnNlID0gbmV3IERpY3Rpb25hcnk8QywgRD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIEMgdGhpc1tEIGRdXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2ZbZF07IH1cclxuICAgICAgICAgICAgc2V0IFxyXG4gICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgX2ZbZF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIF9maW52ZXJzZVt2YWx1ZV0gPSBkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRCB0aGlzW0MgY11cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfZmludmVyc2VbY107IH1cclxuICAgICAgICAgICAgc2V0IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfZlt2YWx1ZV0gPSBjO1xyXG4gICAgICAgICAgICAgICAgX2ZpbnZlcnNlW2NdID0gdmFsdWU7IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8Qz4gQXBwbHkoSUVudW1lcmFibGU8RD4gZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxELEM+KGUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8RCwgQz4pKGQgPT4gdGhpc1tkXSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEQ+IEFwcGx5KElFbnVtZXJhYmxlPEM+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8QyxEPihlLChnbG9iYWw6OlN5c3RlbS5GdW5jPEMsIEQ+KShjID0+IHRoaXNbY10pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaWplY3Rpb25FeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBCaWplY3Rpb248aW50LCBUPiBOdW1iZXJPYmplY3RzPFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gb2JqZWN0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBudW1iZXJpbmcgPSBuZXcgQmlqZWN0aW9uPGludCwgVD4oKTtcclxuXHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG8gaW4gb2JqZWN0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyaW5nW2ldID0gbztcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bWJlcmluZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFVuaW9uRmluZDxUPlxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBOb2RlIE1ha2VTZXQoVCB0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBuZXcgTm9kZSgpO1xyXG4gICAgICAgICAgICBub2RlLlBhcmVudCA9IG5vZGU7XHJcbiAgICAgICAgICAgIG5vZGUuUmFuayA9IDA7XHJcbiAgICAgICAgICAgIG5vZGUuVCA9IHQ7XHJcblxyXG4gICAgICAgICAgICBSb290QWRkZWQobm9kZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVW5pb24oTm9kZSBueCwgTm9kZSBueSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4Um9vdCA9IEZpbmQobngpO1xyXG4gICAgICAgICAgICB2YXIgeVJvb3QgPSBGaW5kKG55KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh4Um9vdCA9PSB5Um9vdClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmICh4Um9vdC5SYW5rIDwgeVJvb3QuUmFuaylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeFJvb3QuUGFyZW50ID0geVJvb3Q7XHJcbiAgICAgICAgICAgICAgICBSb290UmVtb3ZlZCh4Um9vdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoeFJvb3QuUmFuayA+IHlSb290LlJhbmspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHlSb290LlBhcmVudCA9IHhSb290O1xyXG4gICAgICAgICAgICAgICAgUm9vdFJlbW92ZWQoeVJvb3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeVJvb3QuUGFyZW50ID0geFJvb3Q7XHJcbiAgICAgICAgICAgICAgICB4Um9vdC5SYW5rKys7XHJcbiAgICAgICAgICAgICAgICBSb290UmVtb3ZlZCh5Um9vdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBOb2RlIEZpbmQoTm9kZSBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG4uUGFyZW50ICE9IG4pXHJcbiAgICAgICAgICAgICAgICBuLlBhcmVudCA9IEZpbmQobi5QYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG4uUGFyZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsYXNzIE5vZGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBOb2RlIFBhcmVudCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgUmFuayB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgICAgIHB1YmxpYyBUIFQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBSb290QWRkZWQoTm9kZSBuKSB7IH1cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIFJvb3RSZW1vdmVkKE5vZGUgbikgeyB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQm9hcmQgOiBJRW51bWVyYWJsZTxsb25nPlxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBTdG9yZVBlcm11dGF0aW9uSW5mbztcclxuXHJcbiNpZiBERUJVR1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PHN0cmluZz4gU3RhY2tTdHJpbmdzIHsgZ2V0IHsgcmV0dXJuIFN0YWNrcy5TZWxlY3QocyA9PiBzLlRvU2V0U3RyaW5nKCkpLlRvTGlzdCgpOyB9IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFBvdFN0cmluZyB7IGdldCB7IHJldHVybiBQb3QuVG9TZXRTdHJpbmcoKTsgfSB9XHJcbiNlbmRpZlxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxsb25nPiBTdGFja3M7XHJcbiAgICAgICAgaW50IF9oYXNoQ29kZTtcclxuICAgICAgICBMaXN0PGludD4gUG90U2V0O1xyXG4gICAgICAgIExpc3Q8SW50NjQ+IFRyYWNlcztcclxuICAgICAgICBMaXN0PFR1cGxlPGludCwgSW50NjQ+PiBUcmFjZXNGb3JQZXJtdXRhdGlvbkluZm87XHJcbiAgICAgICAgTGlzdDxpbnQ+IFRyYWNlQ2hhbmdlSW5kaWNlcztcclxuICAgICAgICBwdWJsaWMgTGF6eTxUZW1wbGF0ZT4gVGVtcGxhdGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBsb25nIFBvdDtcclxuICAgICAgICBwdWJsaWMgaW50IENvbG9yQ291bnQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBUdXJuIFR1cm47XHJcbiAgICAgICAgcHVibGljIGludCBOO1xyXG4gICAgICAgIHB1YmxpYyBNb3ZlIExhc3RNb3ZlO1xyXG4gICAgICAgIHB1YmxpYyBsb25nIHRoaXNbaW50IHhdIHsgZ2V0IHsgcmV0dXJuIFN0YWNrc1t4XTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBCb2FyZChMaXN0PGxvbmc+IHN0YWNrcywgbG9uZyBwb3QsIGJvb2wgY29tcHV0ZUhhc2ggPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU3RhY2tzID0gc3RhY2tzO1xyXG4gICAgICAgICAgICBQb3QgPSBwb3Q7XHJcbiAgICAgICAgICAgIFR1cm4gPSBUdXJuLkZpeGVyO1xyXG4gICAgICAgICAgICBOID0gU3RhY2tzLkNvdW50O1xyXG4gICAgICAgICAgICBUZW1wbGF0ZSA9IG5ldyBMYXp5PFRlbXBsYXRlPigoKSA9PiBuZXcgVGVtcGxhdGUoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxpbnQ+KFN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBpbnQ+KShzID0+IHMuUG9wdWxhdGlvbkNvdW50KCkpKS5Ub0xpc3QoKSkpO1xyXG4gICAgICAgICAgICBQb3RTZXQgPSBQb3QuVG9TZXQoKTtcclxuICAgICAgICAgICAgQ29sb3JDb3VudCA9IFBvdFNldC5Db3VudDtcclxuICAgICAgICAgICAgVHJhY2VzID0gbmV3IExpc3Q8SW50NjQ+KENvbG9yQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFN0b3JlUGVybXV0YXRpb25JbmZvKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUcmFjZXNGb3JQZXJtdXRhdGlvbkluZm8gPSBuZXcgTGlzdDxUdXBsZTxpbnQsIEludDY0Pj4oQ29sb3JDb3VudCk7XHJcbiAgICAgICAgICAgICAgICBUcmFjZUNoYW5nZUluZGljZXMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjb21wdXRlSGFzaClcclxuICAgICAgICAgICAgICAgIENvbXB1dGVIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBDb21wdXRlSGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2hhc2hDb2RlID0gKGludCkoTik7XHJcbiAgICAgICAgICAgIFVwZGF0ZUhhc2gocmVmIF9oYXNoQ29kZSwgKGxvbmcpKFR1cm4pKTtcclxuXHJcbiAgICAgICAgICAgIFRyYWNlcy5DbGVhcigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYyBpbiBQb3RTZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gR2V0VHJhY2UoYyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgVHJhY2VzLkFkZCh0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVHJhY2VzLlNvcnQoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIFRyYWNlcylcclxuICAgICAgICAgICAgICAgIFVwZGF0ZUhhc2gocmVmIF9oYXNoQ29kZSwgdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoU3RvcmVQZXJtdXRhdGlvbkluZm8pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mby5DbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgVHJhY2VDaGFuZ2VJbmRpY2VzLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGMgaW4gUG90U2V0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gR2V0VHJhY2UoYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBUcmFjZXNGb3JQZXJtdXRhdGlvbkluZm8uQWRkKG5ldyBUdXBsZTxpbnQsIEludDY0PihjLCB0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvLlNvcnQoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBsb25nPiwgZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBsb25nPiwgaW50PikoKHgsIHkpID0+IHguSXRlbTIuQ29tcGFyZVRvKHkuSXRlbTIpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgSW50NjQgcHJldmlvdXNUcmFjZSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBUcmFjZXNGb3JQZXJtdXRhdGlvbkluZm8uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mb1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQuSXRlbTIgIT0gcHJldmlvdXNUcmFjZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRyYWNlQ2hhbmdlSW5kaWNlcy5BZGQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVHJhY2UgPSB0Lkl0ZW0yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBUcmFjZUNoYW5nZUluZGljZXMuQWRkKFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mby5Db3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIFVwZGF0ZUhhc2gocmVmIGludCBoYXNoLCBsb25nIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaGFzaCA9IChpbnQpKDM3ICogaGFzaCArIHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEludDY0IEdldFRyYWNlKGludCBjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGsgPSAxTCA8PCBjO1xyXG4gICAgICAgICAgICBJbnQ2NCB0cmFjZSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKFN0YWNrc1tpXSAmIGspICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhY2UgfD0gKDFMIDw8IGkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJhY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBNYWtlTW92ZShNb3ZlIG1vdmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMYXN0TW92ZSA9IG1vdmU7XHJcblxyXG4gICAgICAgICAgICBpZiAobW92ZS5TdGFjayA+PSAwKVxyXG4gICAgICAgICAgICAgICAgU3RhY2tzW21vdmUuU3RhY2tdID0gU3RhY2tzW21vdmUuU3RhY2tdLkZsaXBCaXRzKG1vdmUuQWRkZWQsIG1vdmUuUmVtb3ZlZCk7XHJcblxyXG4gICAgICAgICAgICBUdXJuID0gT3RoZXJUdXJuKFR1cm4pO1xyXG5cclxuICAgICAgICAgICAgQ29tcHV0ZUhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb01vdmVDb21iaW5hdGlvbihJRW51bWVyYWJsZTxNb3ZlPiBtb3ZlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBtb3ZlIGluIG1vdmVzKVxyXG4gICAgICAgICAgICAgICAgU3RhY2tzW21vdmUuU3RhY2tdID0gU3RhY2tzW21vdmUuU3RhY2tdLkZsaXBCaXRzKG1vdmUuQWRkZWQsIG1vdmUuUmVtb3ZlZCk7XHJcblxyXG4gICAgICAgICAgICBDb21wdXRlSGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBCb2FyZCBDbG9uZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2xvbmUgPSBuZXcgQm9hcmQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8bG9uZz4oU3RhY2tzKSwgUG90KTtcclxuICAgICAgICAgICAgY2xvbmUuVHVybiA9IFR1cm47XHJcbiAgICAgICAgICAgIGNsb25lLkxhc3RNb3ZlID0gTGFzdE1vdmU7XHJcbiAgICAgICAgICAgIGNsb25lLl9oYXNoQ29kZSA9IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgICAgIGNsb25lLkNvbXB1dGVIYXNoQ29kZSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEJvYXJkIERvTW92ZUNvbWJpbmF0aW9uT25DbG9uZShJRW51bWVyYWJsZTxNb3ZlPiBzd2FwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNsb25lID0gbmV3IEJvYXJkKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGxvbmc+KFN0YWNrcyksIFBvdCwgZmFsc2UpO1xyXG4gICAgICAgICAgICBjbG9uZS5UdXJuID0gVHVybjtcclxuICAgICAgICAgICAgY2xvbmUuTGFzdE1vdmUgPSBMYXN0TW92ZTtcclxuXHJcbiAgICAgICAgICAgIGNsb25lLkRvTW92ZUNvbWJpbmF0aW9uKHN3YXApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKG9iaiBhcyBCb2FyZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoQm9hcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKFR1cm4gIT0gb3RoZXIuVHVybilcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKE4gIT0gb3RoZXIuTilcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8bG9uZz4oVHJhY2VzLG90aGVyLlRyYWNlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IEZpbmRQZXJtdXRhdGlvbihCb2FyZCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghU3RvcmVQZXJtdXRhdGlvbkluZm8pXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwibm90IHN0b3JpbmcgcGVybXV0YXRpb24gaW5mb1wiKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBsb25nPixsb25nPihUcmFjZXNGb3JQZXJtdXRhdGlvbkluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBsb25nPiwgbG9uZz4pKHQgPT4gdC5JdGVtMikpLlNlcXVlbmNlRXF1YWwoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBsb25nPixsb25nPihvdGhlci5UcmFjZXNGb3JQZXJtdXRhdGlvbkluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBsb25nPiwgbG9uZz4pKHQgPT4gdC5JdGVtMikpKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1hcHBpbmdQYWlycyA9IG5ldyBMaXN0PFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+Pj4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBUcmFjZUNoYW5nZUluZGljZXMuQ291bnQgLSAxOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb21haW4gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29kb21haW4gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IFRyYWNlQ2hhbmdlSW5kaWNlc1tpXTsgaiA8IFRyYWNlQ2hhbmdlSW5kaWNlc1tpICsgMV07IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkb21haW4uQWRkKFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mb1tqXS5JdGVtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kb21haW4uQWRkKG90aGVyLlRyYWNlc0ZvclBlcm11dGF0aW9uSW5mb1tqXS5JdGVtMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbWFwcGluZ1BhaXJzLkFkZChuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KGRvbWFpbiwgY29kb21haW4pKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4sZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PixnbG9iYWw6OlN5c3RlbS5MaW5xLkVudW1lcmFibGVJbnN0YW5jZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+Pj4obWFwcGluZ1BhaXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGdsb2JhbDo6U3lzdGVtLkxpbnEuRW51bWVyYWJsZUluc3RhbmNlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+PikobXAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oUGVybXV0YXRpb24uRW51bWVyYXRlQWxsKG1wLkl0ZW0yLkNvdW50KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4pKHAgPT4gbmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PihtcC5JdGVtMSwgcC5BcHBseTxpbnQ+KG1wLkl0ZW0yKSkpKSkpXHJcbilcclxuLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4sIGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KShtYXBwaW5nID0+IEZsYXR0ZW5NYXBwaW5nKG1hcHBpbmcpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5GaXJzdE9yRGVmYXVsdCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBib29sPikobWFwcGluZyA9PiBTZXF1ZW5jZUVxdWFsUGVybXV0ZWQobWFwcGluZywgb3RoZXIpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gRmxhdHRlbk1hcHBpbmcoSUVudW1lcmFibGU8VHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+PiBtYXBwaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4saW50PihtYXBwaW5nLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKHggPT4geC5JdGVtMSkpLlRvTGlzdCgpLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PixpbnQ+KG1hcHBpbmcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PikoeCA9PiB4Lkl0ZW0yKSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBTZXF1ZW5jZUVxdWFsUGVybXV0ZWQoVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IG1hcHBpbmcsIEJvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBTdGFja3MuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBlcm11dGVkU3RhY2sgPSBBcHBseU1hcHBpbmcobWFwcGluZywgU3RhY2tzW2ldKTtcclxuICAgICAgICAgICAgICAgIGlmIChwZXJtdXRlZFN0YWNrICE9IG90aGVyLlN0YWNrc1tpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChUdXJuID09IEZpeGVyQnJlYWtlci5UdXJuLkZpeGVyKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoTGFzdE1vdmUuU3RhY2sgIT0gb3RoZXIuTGFzdE1vdmUuU3RhY2spXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3VycyA9IG5ld1tdIHsgTGFzdE1vdmUuQWRkZWQsIExhc3RNb3ZlLlJlbW92ZWQgfTtcclxuICAgICAgICAgICAgdmFyIHRoZWlycyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vMik9PntfbzIuQWRkKG90aGVyLkxhc3RNb3ZlLkFkZGVkKTtfbzIuQWRkKG90aGVyLkxhc3RNb3ZlLlJlbW92ZWQpO3JldHVybiBfbzI7fSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkVxdWFsPGludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihBcHBseU1hcHBpbmcobWFwcGluZywgb3VycykpLHRoZWlycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgbG9uZyBBcHBseU1hcHBpbmcoVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IG1hcHBpbmcsIGxvbmcgc3RhY2spXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQXBwbHlNYXBwaW5nKG1hcHBpbmcsIHN0YWNrLlRvU2V0KCkpLlRvSW50NjQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBBcHBseU1hcHBpbmcoVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IG1hcHBpbmcsIElFbnVtZXJhYmxlPGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHNldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGMgPT4gbWFwcGluZy5JdGVtMlttYXBwaW5nLkl0ZW0xLkluZGV4T2YoYyldKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBBcHBseUludmVyc2VNYXBwaW5nKFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBtYXBwaW5nLCBJRW51bWVyYWJsZTxpbnQ+IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihzZXQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShjID0+IG1hcHBpbmcuSXRlbTFbbWFwcGluZy5JdGVtMi5JbmRleE9mKGMpXSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUdXJuIE90aGVyVHVybihUdXJuIHR1cm4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gMSAtIHR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmF0b3I8bG9uZz4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3RhY2tzLkdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvciBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCJ8XCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihTdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgc3RyaW5nPikoeCA9PiB4LlRvU2V0U3RyaW5nU21hbGwoKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVG9UZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihTdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50LCBzdHJpbmc+KSgoc3RhY2ssIGkpID0+IFwiJEwodl9cIiArIChpICsgMSkgKyBcIikgPSBcIiArIHN0YWNrLlRvU2V0U3RyaW5nKCkuUmVwbGFjZShcIntcIiwgXCJcXFxce1wiKS5SZXBsYWNlKFwifVwiLCBcIlxcXFx9XCIpICsgXCIkXCIpKS5Kb2luUHJldHR5KFwiLCBcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJyYW5jaEdlbmVyYXRvclxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyBEaWN0aW9uYXJ5PGludCwgTGlzdDxMaXN0PExpc3Q8aW50Pj4+PiBQYXJ0aXRpb25zQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8TGlzdDxMaXN0PGludD4+Pj4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8TGlzdDxpbnQ+Pj4gR2V0UGFydGl0aW9ucyhpbnQgY291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PExpc3Q8TGlzdDxpbnQ+Pj4gcGFydGl0aW9ucztcclxuICAgICAgICAgICAgaWYgKCFQYXJ0aXRpb25zQ2FjaGUuVHJ5R2V0VmFsdWUoY291bnQsIG91dCBwYXJ0aXRpb25zKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGFydGl0aW9ucyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KEVudW1lcmF0ZVBhcnRpdGlvbnMoY291bnQpKTtcclxuICAgICAgICAgICAgICAgIFBhcnRpdGlvbnNDYWNoZVtjb3VudF0gPSBwYXJ0aXRpb25zO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcGFydGl0aW9ucztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxDaHJvbmljbGVkQnJhbmNoPiBFbnVtZXJhdGVCcmFuY2hlcyhCb2FyZCBib2FyZCwgVHVwbGU8aW50LCBpbnQ+IGNvbG9yUGFpcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBTID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihFbnVtZXJhdGVFeGFjdGx5T25lSW50ZXJzZWN0ZXJzKGJvYXJkLCBjb2xvclBhaXIpKTtcclxuICAgICAgICAgICAgdmFyIHBhcnRpdGlvbnMgPSBHZXRQYXJ0aXRpb25zKFMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGUuQ2hyb25pY2xlZEJyYW5jaD4ocGFydGl0aW9ucywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZS5DaHJvbmljbGVkQnJhbmNoPikocGFydGl0aW9uID0+IG5ldyBDaHJvbmljbGVkQnJhbmNoKFMsIGNvbG9yUGFpci5JdGVtMSwgY29sb3JQYWlyLkl0ZW0yLCBwYXJ0aXRpb24pKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxMaXN0PGludD4+PiBFbnVtZXJhdGVQYXJ0aXRpb25zKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG4gJSAyID09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0aXRpb24gaW4gRW51bWVyYXRlUGFydGl0aW9ucyhFbnVtZXJhYmxlLlJhbmdlKDAsIG4pLlRvTGlzdCgpKSlcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gcGFydGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBFbnVtZXJhdGVQYXJ0aXRpb25zKEVudW1lcmFibGUuUmFuZ2UoMCwgbikuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaiA9PiBqICE9IGkpKS5Ub0xpc3QoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aXRpb24uSW5zZXJ0KDAsIEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vMyk9PntfbzMuQWRkKGkpO3JldHVybiBfbzM7fSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gcGFydGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8TGlzdDxpbnQ+Pj4gRW51bWVyYXRlUGFydGl0aW9ucyhMaXN0PGludD4gaW5kaWNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpbmRpY2VzLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IGluZGljZXNbMF07XHJcbiAgICAgICAgICAgICAgICBpbmRpY2VzLlJlbW92ZUF0KDApO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpbmRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzQpPT57X280LkFkZChmaXJzdCk7X280LkFkZChpbmRpY2VzW2ldKTtyZXR1cm4gX280O30pO1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGljZXMuUmVtb3ZlQXQoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0aXRpb24gaW4gRW51bWVyYXRlUGFydGl0aW9ucyhpbmRpY2VzKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpdGlvbi5BZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBwYXJ0aXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLkluc2VydChpLCBwYXJ0WzFdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpbmRpY2VzLkluc2VydCgwLCBmaXJzdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBFbnVtZXJhdGVFeGFjdGx5T25lSW50ZXJzZWN0ZXJzKEJvYXJkIGJvYXJkLCBUdXBsZTxpbnQsIGludD4gY29sb3JQYWlyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmFibGUuUmFuZ2UoMCwgYm9hcmQuU3RhY2tzLkNvdW50KS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShpID0+IGJvYXJkLlN0YWNrc1tpXS5Jc0JpdFNldChjb2xvclBhaXIuSXRlbTEpIF4gYm9hcmQuU3RhY2tzW2ldLklzQml0U2V0KGNvbG9yUGFpci5JdGVtMikpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQm9hcmRLbm93bGVkZ2VcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgQm9hcmQgQm9hcmQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZWFzb24geyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVwdGggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBUdXBsZTxpbnQsIGludD4gQ29sb3JQYWlyIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4+IFN3YXBzIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEJvYXJkS25vd2xlZGdlKEJvYXJkIGJvYXJkLCBzdHJpbmcgcmVhc29uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQm9hcmQgPSBib2FyZDtcclxuICAgICAgICAgICAgUmVhc29uID0gcmVhc29uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHcmFwaEtub3dsZWRnZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBHcmFwaCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggTGluZUdyYXBoIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFR1cGxlPGludCwgaW50Pj4gRWRnZXMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBFZGdlSW5kaWNlcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IExlYXZlcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGF6eTxEaWN0aW9uYXJ5PFR1cGxlPGludCwgaW50PiwgTGlzdDxMaXN0PGludD4+Pj4gQ29ubmVjdGVkT3JkZXJpbmdzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhLbm93bGVkZ2UoR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdyYXBoID0gZztcclxuICAgICAgICAgICAgTGVhdmVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxpbnQ+KEdyYXBoLlZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gR3JhcGguRGVncmVlKHYpID09IDEpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgQnVpbGRMaW5lR3JhcGgoKTtcclxuXHJcbiAgICAgICAgICAgIENvbm5lY3RlZE9yZGVyaW5ncyA9IG5ldyBMYXp5PERpY3Rpb25hcnk8VHVwbGU8aW50LCBpbnQ+LCBMaXN0PExpc3Q8aW50Pj4+PigoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY28gPSBuZXcgRGljdGlvbmFyeTxUdXBsZTxpbnQsIGludD4sIExpc3Q8TGlzdDxpbnQ+Pj4oKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIEVkZ2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvW2VdID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEdyYXBoLkVudW1lcmF0ZUNvbm5lY3RlZE9yZGVyaW5ncyhCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzUpPT57X281LkFkZChlLkl0ZW0xKTtfbzUuQWRkKGUuSXRlbTIpO3JldHVybiBfbzU7fSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY287XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBCdWlsZExpbmVHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYWRqYWNlbnQgPSBHcmFwaC5BZGphY2VudDtcclxuICAgICAgICAgICAgaW50IG4gPSBhZGphY2VudC5HZXRVcHBlckJvdW5kKDApICsgMTtcclxuXHJcbiAgICAgICAgICAgIEVkZ2VzID0gbmV3IExpc3Q8VHVwbGU8aW50LCBpbnQ+PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkZ2VzLkFkZChuZXcgVHVwbGU8aW50LCBpbnQ+KGksIGopKTtcclxuXHJcbiAgICAgICAgICAgIEVkZ2VJbmRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBFZGdlcy5Db3VudCkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWVldHMgPSBuZXcgYm9vbFtFZGdlcy5Db3VudCwgRWRnZXMuQ291bnRdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEVkZ2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBFZGdlcy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChFZGdlc1tpXS5JdGVtMSA9PSBFZGdlc1tqXS5JdGVtMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBFZGdlc1tpXS5JdGVtMSA9PSBFZGdlc1tqXS5JdGVtMiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBFZGdlc1tpXS5JdGVtMiA9PSBFZGdlc1tqXS5JdGVtMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBFZGdlc1tpXS5JdGVtMiA9PSBFZGdlc1tqXS5JdGVtMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVldHNbaSwgal0gPSBtZWV0c1tqLCBpXSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBMaW5lR3JhcGggPSBuZXcgR3JhcGgobWVldHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBLbm93bGVkZ2VcclxuICAgIHtcclxuICAgICAgICBEaWN0aW9uYXJ5PFRlbXBsYXRlLCBUZW1wbGF0ZUtub3dsZWRnZT4gX3RlbXBsYXRlTG9va3VwID0gbmV3IERpY3Rpb25hcnk8VGVtcGxhdGUsIFRlbXBsYXRlS25vd2xlZGdlPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhLbm93bGVkZ2UgR3JhcGhLbm93bGVkZ2UgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFRlbXBsYXRlS25vd2xlZGdlIHRoaXNbVGVtcGxhdGUgdGVtcGxhdGVdXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGVtcGxhdGVLbm93bGVkZ2UgcDtcclxuICAgICAgICAgICAgICAgIGlmICghX3RlbXBsYXRlTG9va3VwLlRyeUdldFZhbHVlKHRlbXBsYXRlLCBvdXQgcCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcCA9IG5ldyBUZW1wbGF0ZUtub3dsZWRnZSh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RlbXBsYXRlTG9va3VwW3RlbXBsYXRlXSA9IHA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIEtub3dsZWRnZShHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR3JhcGhLbm93bGVkZ2UgPSBuZXcgR3JhcGhLbm93bGVkZ2UoZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbG9uZyBHZXRFZGdlQ29sb3JMaXN0KEJvYXJkIGJvYXJkLCBpbnQgZWRnZUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJvYXJkW0dyYXBoS25vd2xlZGdlLkVkZ2VzW2VkZ2VJbmRleF0uSXRlbTFdICYgYm9hcmRbR3JhcGhLbm93bGVkZ2UuRWRnZXNbZWRnZUluZGV4XS5JdGVtMl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBsb25nIEdldEVkZ2VDb2xvckxpc3QoTGlzdDxsb25nPiBzdGFja3MsIGludCBlZGdlSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhY2tzW0dyYXBoS25vd2xlZGdlLkVkZ2VzW2VkZ2VJbmRleF0uSXRlbTFdICYgc3RhY2tzW0dyYXBoS25vd2xlZGdlLkVkZ2VzW2VkZ2VJbmRleF0uSXRlbTJdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRyZWU8VD4gIHdoZXJlIFQgOiBUcmVlPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFQgUGFyZW50IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIFQgVGhpcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8VD4gQ2hpbGRyZW4geyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRoaXMgPSAoVCl0aGlzO1xyXG4gICAgICAgICAgICBDaGlsZHJlbiA9IG5ldyBMaXN0PFQ+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZW1vdmVDaGlsZChUIGNoaWxkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2hpbGRyZW4uUmVtb3ZlKGNoaWxkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIEFkZENoaWxkKFQgY2hpbGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjaGlsZC5QYXJlbnQgPSBUaGlzO1xyXG4gICAgICAgICAgICBDaGlsZHJlbi5BZGQoY2hpbGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBHZXREZXB0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZGVwdGggPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY2hpbGQgaW4gQ2hpbGRyZW4pXHJcbiAgICAgICAgICAgICAgICBkZXB0aCA9IE1hdGguTWF4KGRlcHRoLCBjaGlsZC5HZXREZXB0aCgpICsgMSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGVwdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdm9pZCBUcmF2ZXJzZShBY3Rpb248VCwgVD4gb25EZXNjZW50LCBpbnQgbWF4RGVwdGggPSBpbnQuTWF4VmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUcmF2ZXJzZUludGVybmFsKChnbG9iYWw6OlN5c3RlbS5BY3Rpb248VCwgVD4pb25EZXNjZW50LCBtYXhEZXB0aCwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIFRyYXZlcnNlSW50ZXJuYWwoQWN0aW9uPFQsIFQ+IG9uRGVzY2VudCwgaW50IG1heERlcHRoLCBpbnQgZGVwdGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZGVwdGggPj0gbWF4RGVwdGggLSAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNoaWxkIGluIENoaWxkcmVuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvbkRlc2NlbnQoVGhpcywgY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuVHJhdmVyc2VJbnRlcm5hbCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPFQsIFQ+KW9uRGVzY2VudCwgbWF4RGVwdGgsIGRlcHRoICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUdXBsZTxHcmFwaCwgRGljdGlvbmFyeTxpbnQsIFQ+PiBCdWlsZEdyYXBoKGludCBtYXhEZXB0aCA9IGludC5NYXhWYWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IDA7XHJcbiAgICAgICAgICAgIHZhciB2ZXJ0ZXhMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxULCBpbnQ+KCk7XHJcbiAgICAgICAgICAgIHZhciB0cmVlTG9va3VwID0gbmV3IERpY3Rpb25hcnk8aW50LCBUPigpO1xyXG4gICAgICAgICAgICB2YXIgZWRnZXMgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIFRyYXZlcnNlKChnbG9iYWw6OlN5c3RlbS5BY3Rpb248VCwgVD4pKChwYXJlbnQsIGNoaWxkKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgcDtcclxuICAgICAgICAgICAgICAgIGlmICghdmVydGV4TG9va3VwLlRyeUdldFZhbHVlKHBhcmVudCwgb3V0IHApKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHAgPSB2ZXJ0aWNlcysrO1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleExvb2t1cFtwYXJlbnRdID0gcDtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlTG9va3VwW3BdID0gcGFyZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlZGdlc1twXSA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgYztcclxuICAgICAgICAgICAgICAgIGlmICghdmVydGV4TG9va3VwLlRyeUdldFZhbHVlKGNoaWxkLCBvdXQgYykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYyA9IHZlcnRpY2VzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4TG9va3VwW2NoaWxkXSA9IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZUxvb2t1cFtjXSA9IGNoaWxkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlZGdlc1tjXSA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlZGdlc1twXS5BZGQoYyk7XHJcbiAgICAgICAgICAgIH0pLCBtYXhEZXB0aCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodmVydGljZXMgPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJlZUxvb2t1cFswXSA9IChUKXRoaXM7XHJcbiAgICAgICAgICAgICAgICBlZGdlc1swXSA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVkZ2VXZWlnaHRzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHZlcnRpY2VzOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IHZlcnRpY2VzOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2VzW2ldLkNvbnRhaW5zKGopKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlV2VpZ2h0cy5BZGQoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZWRnZXNbal0uQ29udGFpbnMoaSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlV2VpZ2h0cy5BZGQoMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHVwbGU8R3JhcGgsIERpY3Rpb25hcnk8aW50LCBUPj4obmV3IEdyYXBoKGVkZ2VXZWlnaHRzKSwgdHJlZUxvb2t1cCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIE1ldGFLbm93bGVkZ2VcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGludCBJbmZpbml0eSA9IGludC5NYXhWYWx1ZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEV4aXN0cyh0aGlzIG9iamVjdCBvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG8gIT0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBOYXR1cmFscygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYWJsZS5SYW5nZSgwLCBJbmZpbml0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gSW50ZXJ2YWwoaW50IGZpcnN0LCBpbnQgbGFzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhYmxlLlJhbmdlKGZpcnN0LCBsYXN0IC0gZmlyc3QgKyAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50PyBUcnlQYXJzZUludCh0aGlzIHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHg7XHJcbiAgICAgICAgICAgIGlmIChpbnQuVHJ5UGFyc2Uocywgb3V0IHgpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkb3VibGU/IFRyeVBhcnNlRG91YmxlKHRoaXMgc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkb3VibGUgeDtcclxuICAgICAgICAgICAgaWYgKGRvdWJsZS5UcnlQYXJzZShzLCBvdXQgeCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBEZWdyZWVDb25kaXRpb24odGhpcyBHcmFwaCBnLCBCb2FyZCBiLCBGdW5jPExpc3Q8aW50PiwgaW50PiBtaXNzaW5nRWRnZXMgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIERlZ3JlZUNvbmRpdGlvbihnLCBiLlN0YWNrcywgYi5Qb3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIERlZ3JlZUNvbmRpdGlvbih0aGlzIEdyYXBoIGcsIExpc3Q8bG9uZz4gc3RhY2tzLCBsb25nIHBvdCwgRnVuYzxMaXN0PGludD4sIGludD4gbWlzc2luZ0VkZ2VzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChtaXNzaW5nRWRnZXMgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIG1pc3NpbmdFZGdlcyA9IFkgPT4gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvckdyYXBocyA9IEdldENvbG9yR3JhcGhzKHN0YWNrcywgcG90KTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBYIGluIExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4oZy5WZXJ0aWNlcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gZy5FZGdlc09uKFgpIC0gbWlzc2luZ0VkZ2VzKFgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TdW08Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGNvbG9yR3JhcGhzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShjZyA9PiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uQ291bnQ8aW50PihjZyxYKSAvIDIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPCBlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxpbnQ+PiBHZXRDb2xvckdyYXBocyhMaXN0PGxvbmc+IHN0YWNrcywgbG9uZyBwb3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihwb3QuRW51bWVyYXRlQml0cygpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShhbHBoYSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEdfYWxwaGEoYWxwaGEsIHN0YWNrcykpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gR19hbHBoYShpbnQgYWxwaGEsIExpc3Q8bG9uZz4gc3RhY2tzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuSW5kaWNlc1doZXJlPGxvbmc+KHN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBib29sPikoc3RhY2sgPT4gc3RhY2suSXNCaXRTZXQoYWxwaGEpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBkX0goaW50IGFscGhhLCBJRW51bWVyYWJsZTxsb25nPiBzdGFja3NJbkgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxsb25nPihzdGFja3NJbkgsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgYm9vbD4pKHN0YWNrID0+IHN0YWNrLklzQml0U2V0KGFscGhhKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgU3VycGx1cyh0aGlzIEJvYXJkIGJvYXJkLCBHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihHZXRDb2xvckdyYXBocyhib2FyZC5TdGFja3MsIGJvYXJkLlBvdCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGludD4pKGNnID0+IGNnLkNvdW50IC8gMikpIC0gZy5FO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgU3VycGx1cyh0aGlzIEJvYXJkIGJvYXJkLCBHcmFwaCBnLCBMaXN0PGludD4gdmVydGljZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TdW08Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEdldENvbG9yR3JhcGhzKGJvYXJkLlN0YWNrcywgYm9hcmQuUG90KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoY2cgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbkNvdW50PGludD4oY2csdmVydGljZXMpIC8gMikpIC0gZy5FZGdlc09uKHZlcnRpY2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBUb0NvbnNvbGUodGhpcyBzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIE1vdmUgTWFwTW92ZShUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gZiwgTW92ZSBtb3ZlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1hcHBlZE1vdmUgPSBuZXcgTW92ZSgpIHsgU3RhY2sgPSBtb3ZlLlN0YWNrIH07XHJcbiAgICAgICAgICAgIHZhciBtID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihCb2FyZC5BcHBseU1hcHBpbmcoZiwgbmV3W10geyBtb3ZlLkFkZGVkLCBtb3ZlLlJlbW92ZWQgfSkpO1xyXG5cclxuICAgICAgICAgICAgbWFwcGVkTW92ZS5BZGRlZCA9IG1bMF07XHJcbiAgICAgICAgICAgIG1hcHBlZE1vdmUuUmVtb3ZlZCA9IG1bMV07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWFwcGVkTW92ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlO1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQWxnb3JpdGhtcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIE1pbmRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgYm9vbCBTdG9wQW5hbHlzaXNPbkJyZWFrZXJXaW4geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEZpbmRDbGVhbmVzdFdpbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgTmVhcmx5Q29sb3JhYmxlT25seSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgU3VwZXJhYnVuZGFudE9ubHkgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWluUG90IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE1heFBvdCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIEJvYXJkIEJyZWFrZXJXb25Cb2FyZCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgVG90YWxQb3NpdGlvbnMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIExpc3Q8SUJvYXJkQW5hbHl6ZXI+IEJvYXJkQW5hbHlzaXNQaXBlbGluZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgS25vd2xlZGdlIEtub3dsZWRnZSB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBNaW5kKEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBGaW5kQ2xlYW5lc3RXaW4gPSB0cnVlO1xyXG4gICAgICAgICAgICBTdXBlcmFidW5kYW50T25seSA9IHRydWU7XHJcbiAgICAgICAgICAgIE5lYXJseUNvbG9yYWJsZU9ubHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgTWF4UG90ID0gTWV0YUtub3dsZWRnZS5JbmZpbml0eTtcclxuICAgICAgICAgICAgS25vd2xlZGdlID0gbmV3IEtub3dsZWRnZShnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEJvYXJkQW5hbHlzaXNQaXBlbGluZSA9IG5ldyBMaXN0PElCb2FyZEFuYWx5emVyPigpO1xyXG4gICAgICAgICAgICBCb2FyZEFuYWx5c2lzUGlwZWxpbmUuQWRkKG5ldyBDb2xvcmluZ0FuYWx5emVyKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkQm9hcmRBbmFseXplcihJQm9hcmRBbmFseXplciBhbmFseXplcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJvYXJkQW5hbHlzaXNQaXBlbGluZS5BZGQoYW5hbHl6ZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShUZW1wbGF0ZSB0ZW1wbGF0ZSwgQWN0aW9uPFRob3VnaHRQcm9ncmVzcz4gcHJvZ3Jlc3MgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVG90YWxQb3NpdGlvbnMgPSAwO1xyXG4gICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBFbnN1cmVTd2FwQW5hbHl6ZXJFeGlzdGVuY2UoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtaW5pbXVtQ29sb3JDb3VudCA9IE1hdGguTWF4KE1pblBvdCwgdGVtcGxhdGUuU2l6ZXMuTWF4KCkpO1xyXG4gICAgICAgICAgICB2YXIgbWF4aW11bUNvbG9yQ291bnQgPSBNYXRoLk1pbihNYXhQb3QsIHRlbXBsYXRlLlNpemVzLlN1bSgpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3VuZEF0TGVhc3RPbmVCb2FyZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JDb3VudCBpbiBNZXRhS25vd2xlZGdlLkludGVydmFsKG1pbmltdW1Db2xvckNvdW50LCBtYXhpbXVtQ29sb3JDb3VudCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUaG91Z2h0UHJvZ3Jlc3MoKSB7IElzSW5pdGlhbFRob3VnaHQgPSB0cnVlIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBib2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihHZW5lcmF0ZUFsbEJvYXJkcyh0ZW1wbGF0ZSwgY29sb3JDb3VudCwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5UaG91Z2h0UHJvZ3Jlc3M+KXByb2dyZXNzKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRBdExlYXN0T25lQm9hcmQgJiYgYm9hcmRzLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgVG90YWxQb3NpdGlvbnMgKz0gYm9hcmRzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgZm91bmRBdExlYXN0T25lQm9hcmQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBicmVha2VyV2luID0gIUFuYWx5emUoYm9hcmRzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlRob3VnaHRQcm9ncmVzcz4pcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJyZWFrZXJXaW4gJiYgU3RvcEFuYWx5c2lzT25CcmVha2VyV2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBLbm93bGVkZ2VbdGVtcGxhdGVdLlByb21vdGUoY29sb3JDb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KEtub3dsZWRnZVt0ZW1wbGF0ZV0uTG9zdEJvYXJkcykgPD0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQW5hbHl6ZShMaXN0PEJvYXJkPiBib2FyZHMsIEFjdGlvbjxUaG91Z2h0UHJvZ3Jlc3M+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB3aW5MZW5ndGggPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGFuYWx5emVyIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuSUJvYXJkQW5hbHl6ZXI+KEJvYXJkQW5hbHlzaXNQaXBlbGluZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5JQm9hcmRBbmFseXplciwgYm9vbD4pKGEgPT4gIWEuSXNLbm93bGVkZ2VEZXBlbmRlbnQpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNodW5rID0gbmV3IExpc3Q8Qm9hcmQ+KCk7XHJcbkFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KCAgICAgICAgICAgICAgICBib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgYm9vbD4pKGIgPT4gYW5hbHl6ZXIuQW5hbHl6ZShLbm93bGVkZ2UsIGIpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPikoKHJlbW92ZWQpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsuQWRkKHJlbW92ZWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsuQ291bnQgPiAxMDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUaG91Z2h0UHJvZ3Jlc3MoKSB7IEJvYXJkc1JlbW92ZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihjaHVuayksIFdpbkxlbmd0aCA9IHdpbkxlbmd0aCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLkNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaHVuay5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUaG91Z2h0UHJvZ3Jlc3MoKSB7IEJvYXJkc1JlbW92ZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihjaHVuayksIFdpbkxlbmd0aCA9IHdpbkxlbmd0aCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGtub3dsZWRnZURlcGVuZGVudEFuYWx5emVycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuSUJvYXJkQW5hbHl6ZXI+KEJvYXJkQW5hbHlzaXNQaXBlbGluZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5JQm9hcmRBbmFseXplciwgYm9vbD4pKGEgPT4gYS5Jc0tub3dsZWRnZURlcGVuZGVudCkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGJvYXJkcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpbkxlbmd0aCsrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IGJvYXJkcy5Db3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYW5hbHl6ZXIgaW4ga25vd2xlZGdlRGVwZW5kZW50QW5hbHl6ZXJzKVxyXG4gICAgICAgICAgICAgICAge1xyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPiggICAgICAgICAgICAgICAgICAgIGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkLCBib29sPikoYiA9PiBhbmFseXplci5BbmFseXplKEtub3dsZWRnZSwgYikpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KSgocmVtb3ZlZCkgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFRob3VnaHRQcm9ncmVzcygpIHsgQm9hcmRzUmVtb3ZlZCA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRW5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KHJlbW92ZWQpLCBXaW5MZW5ndGggPSB3aW5MZW5ndGggfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYm9hcmRzLkNvdW50ID09IGNvdW50KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIGJvYXJkcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgS25vd2xlZGdlW2IuVGVtcGxhdGUuVmFsdWVdW2IuQ29sb3JDb3VudF0uQWRkTG9zcyhiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBLbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuR3JhcGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZWFybHlDb2xvcmFibGUgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIEtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5MaW5lR3JhcGguTikuQWxsKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGUgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGJvb2w+KShiID0+IENvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoS25vd2xlZGdlLCBiLCBlKSkpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5lYXJseUNvbG9yYWJsZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3RPckRlZmF1bHQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGJvb2w+KShiID0+IGcuRGVncmVlQ29uZGl0aW9uKGIpICYmIENvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoS25vd2xlZGdlLCBiLCAwKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQnJlYWtlcldvbkJvYXJkID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkLCBib29sPikoYiA9PiBDb2xvcmluZ0FuYWx5emVyLkNvbG9yYWJsZVdpdGhvdXRFZGdlKEtub3dsZWRnZSwgYiwgMCkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEVuc3VyZVN3YXBBbmFseXplckV4aXN0ZW5jZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLklCb2FyZEFuYWx5emVyPihCb2FyZEFuYWx5c2lzUGlwZWxpbmUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuSUJvYXJkQW5hbHl6ZXIsIGJvb2w+KShhID0+IGEgaXMgU3dhcEFuYWx5emVyKSkpXHJcbiAgICAgICAgICAgICAgICBCb2FyZEFuYWx5c2lzUGlwZWxpbmUuQWRkKG5ldyBTd2FwQW5hbHl6ZXIoRmluZENsZWFuZXN0V2luLCBmYWxzZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSGFzaFNldDxCb2FyZD4gR2VuZXJhdGVBbGxCb2FyZHMoVGVtcGxhdGUgdGVtcGxhdGUsIGludCBjb2xvckNvdW50LCBBY3Rpb248VGhvdWdodFByb2dyZXNzPiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYm9hcmRzID0gbmV3IEhhc2hTZXQ8Qm9hcmQ+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIHRlbXBsYXRlLlNpemVzLkNvdW50KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHBvdFNldCA9IEVudW1lcmFibGUuUmFuZ2UoMCwgY29sb3JDb3VudCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBwb3QgPSBwb3RTZXQuVG9JbnQ2NCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZpeCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxpbnQsaW50Pih2ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gTWF0aC5BYnModGVtcGxhdGUuU2l6ZXNbdl0gLSBjb2xvckNvdW50IC8gMikpKS5GaXJzdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJvYXJkc0NodW5rID0gbmV3IExpc3Q8Qm9hcmQ+KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhc3NpZ25tZW50U2V0cyBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+Pih2ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikodiA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodiA9PSBmaXgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRW5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8aW50Pihwb3RTZXQsdGVtcGxhdGUuU2l6ZXNbdl0pLlRvTGlzdCgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50Pihwb3RTZXQsIHRlbXBsYXRlLlNpemVzW3ZdKTtcclxuICAgICAgICAgICAgfSkpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNldHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYXNzaWdubWVudFNldHMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvdGFsQ29sb3JzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4oc2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+Pikoc2V0ID0+IHNldCkpLkRpc3RpbmN0KCkuQ291bnQoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0b3RhbENvbG9ycyA8IGNvbG9yQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGxvbmc+KHNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGxvbmc+KShsaXN0ID0+IGxpc3QuVG9JbnQ2NCgpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHN1cGVyQWJ1bmRhbnQgPSBLbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuR3JhcGguRGVncmVlQ29uZGl0aW9uKHN0YWNrcywgcG90KTtcclxuICAgICAgICAgICAgICAgIHZhciBib2FyZCA9IG5ldyBCb2FyZChzdGFja3MsIHBvdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFN1cGVyYWJ1bmRhbnRPbmx5ICYmICFzdXBlckFidW5kYW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGJvYXJkcy5BZGQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgYm9hcmRzQ2h1bmsuQWRkKGJvYXJkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYm9hcmRzQ2h1bmsuQ291bnQgPiAxMDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUaG91Z2h0UHJvZ3Jlc3MoKSB7IEJvYXJkc0FkZGVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oYm9hcmRzQ2h1bmspLCBXaW5MZW5ndGggPSAtMSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYm9hcmRzQ2h1bmsuQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGJvYXJkc0NodW5rLkNvdW50ID4gMCAmJiBwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFRob3VnaHRQcm9ncmVzcygpIHsgQm9hcmRzQWRkZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihib2FyZHNDaHVuayksIFdpbkxlbmd0aCA9IC0xIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJvYXJkcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBpbnQgVHJlZU5vZGVOdW1iZXIgPSAxO1xyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxLbm93bGVkZ2VUcmVlPiBFbnVtZXJhdGVLbm93bGVkZ2VUcmVlcyhUZW1wbGF0ZSB0ZW1wbGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUtub3dsZWRnZSA9IEtub3dsZWRnZVt0ZW1wbGF0ZV07XHJcbiAgICAgICAgICAgIHZhciBjb2xvckNvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KE1ldGFLbm93bGVkZ2UuTmF0dXJhbHMoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShuID0+IHRlbXBsYXRlS25vd2xlZGdlLktub3dsZWRnZUV4aXN0cyhuKSAmJiAhdGVtcGxhdGVLbm93bGVkZ2UuS25vd2xlZGdlRXhpc3RzKG4gKyAxKSkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLkJvYXJkS25vd2xlZGdlPixnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5Lbm93bGVkZ2VUcmVlPih0ZW1wbGF0ZUtub3dsZWRnZVtjb2xvckNvdW50XS5FbnVtZXJhdGVCb2FyZEtub3dsZWRnZSgpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLkJvYXJkS25vd2xlZGdlPiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuS25vd2xlZGdlVHJlZT4pKGt2cCA9PiBHZW5lcmF0ZUtub3dsZWRnZVRyZWUoa3ZwLktleSkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEtub3dsZWRnZVRyZWUgR2VuZXJhdGVLbm93bGVkZ2VUcmVlKEJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVHJlZU5vZGVOdW1iZXIgPSAxO1xyXG4gICAgICAgICAgICB2YXIgc2VlbkNhY2hlID0gbmV3IERpY3Rpb25hcnk8Qm9hcmQsIFR1cGxlPGludCwgQm9hcmQ+PigpO1xyXG4gICAgICAgICAgICB2YXIga25vd2xlZGdlVHJlZSA9IG5ldyBLbm93bGVkZ2VUcmVlKCk7XHJcbiAgICAgICAgICAgIEZpbGxLbm93bGVkZ2VUcmVlKGtub3dsZWRnZVRyZWUsIGJvYXJkLCBzZWVuQ2FjaGUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGtub3dsZWRnZVRyZWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZvaWQgRmlsbEtub3dsZWRnZVRyZWUoS25vd2xlZGdlVHJlZSBrbm93bGVkZ2VUcmVlLCBCb2FyZCBib2FyZCwgRGljdGlvbmFyeTxCb2FyZCwgVHVwbGU8aW50LCBCb2FyZD4+IHNlZW5DYWNoZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGtub3dsZWRnZVRyZWUuQm9hcmQgPSBib2FyZC5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICBrbm93bGVkZ2VUcmVlLk51bWJlciA9IFRyZWVOb2RlTnVtYmVyKys7XHJcblxyXG4gICAgICAgICAgICB2YXIga25vd2xlZGdlID0gS25vd2xlZGdlW2JvYXJkLlRlbXBsYXRlLlZhbHVlXVtib2FyZC5Db2xvckNvdW50XVtib2FyZF07XHJcbiAgICAgICAgICAgIGlmIChrbm93bGVkZ2UuRXhpc3RzKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChrbm93bGVkZ2UuUmVhc29uICE9IFwiZ29vZCBzd2FwXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga25vd2xlZGdlVHJlZS5Ob3RlID0ga25vd2xlZGdlLlJlYXNvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUdXBsZTxpbnQsIEJvYXJkPiBzZWVuQm9hcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlZW5DYWNoZS5UcnlHZXRWYWx1ZShib2FyZCwgb3V0IHNlZW5Cb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrbm93bGVkZ2VUcmVlLk5vdGUgPSBcInNhbWUgYXMgI1wiICsgc2VlbkJvYXJkLkl0ZW0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGtub3dsZWRnZS5Cb2FyZC5GaW5kUGVybXV0YXRpb24oYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEJvYXJkLkFwcGx5TWFwcGluZyhmLCBuZXdbXSB7IGtub3dsZWRnZS5Db2xvclBhaXIuSXRlbTEsIGtub3dsZWRnZS5Db2xvclBhaXIuSXRlbTIgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvclBhaXIgPSBuZXcgVHVwbGU8aW50LCBpbnQ+KGNvbG9yc1swXSwgY29sb3JzWzFdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHN3YXAgaW4ga25vd2xlZGdlLlN3YXBzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBCb2FyZCA9IGJvYXJkLkNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZSxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmU+KHN3YXAuSXRlbTIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmU+KShtID0+IE1ldGFLbm93bGVkZ2UuTWFwTW92ZShmLCBtKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wQm9hcmQuRG9Nb3ZlQ29tYmluYXRpb24obW92ZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkS25vd2xlZGdlVHJlZSA9IGtub3dsZWRnZVRyZWUuQWRkQ2hpbGQoc3dhcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkS25vd2xlZGdlVHJlZS5Db2xvclBhaXIgPSBjb2xvclBhaXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZpbGxLbm93bGVkZ2VUcmVlKGNoaWxkS25vd2xlZGdlVHJlZSwgdGVtcEJvYXJkLCBzZWVuQ2FjaGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJzb21ldGhpbmcgd2VudCB3cm9uZyBpbiBidWlsZGluZyBzZWFyY2ggdHJlZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2VlbkNhY2hlW2JvYXJkXSA9IG5ldyBUdXBsZTxpbnQsIEJvYXJkPihrbm93bGVkZ2VUcmVlLk51bWJlciwgYm9hcmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFR1cGxlPEdyYXBoLCBEaWN0aW9uYXJ5PGludCwgS2V5VmFsdWVQYWlyPEJvYXJkLCBCb2FyZEtub3dsZWRnZT4+LCBEaWN0aW9uYXJ5PFR1cGxlPGludCwgaW50PiwgVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+Pj4gR2VuZXJhdGVUZW1wbGF0ZUtub3dsZWRnZUdyYXBoKFRlbXBsYXRlIHRlbXBsYXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlS25vd2xlZGdlID0gS25vd2xlZGdlW3RlbXBsYXRlXTtcclxuICAgICAgICAgICAgdmFyIGNvbG9yQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oTWV0YUtub3dsZWRnZS5OYXR1cmFscygpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKG4gPT4gdGVtcGxhdGVLbm93bGVkZ2UuS25vd2xlZGdlRXhpc3RzKG4pICYmICF0ZW1wbGF0ZUtub3dsZWRnZS5Lbm93bGVkZ2VFeGlzdHMobiArIDEpKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmV4dFZlcnRleElEID0gMDtcclxuICAgICAgICAgICAgdmFyIHZlcnRleExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PEJvYXJkLCBpbnQ+KCk7XHJcbiAgICAgICAgICAgIHZhciBzd2FwTG9va3VwID0gbmV3IERpY3Rpb25hcnk8VHVwbGU8aW50LCBpbnQ+LCBUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4+KCk7XHJcbiAgICAgICAgICAgIHZhciBib2FyZExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PGludCwgS2V5VmFsdWVQYWlyPEJvYXJkLCBCb2FyZEtub3dsZWRnZT4+KCk7XHJcbiAgICAgICAgICAgIHZhciBvdXRFZGdlcyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGt2cCBpbiB0ZW1wbGF0ZUtub3dsZWRnZVtjb2xvckNvdW50XS5FbnVtZXJhdGVCb2FyZEtub3dsZWRnZSgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhMb29rdXBba3ZwLktleV0gPSBuZXh0VmVydGV4SUQ7XHJcbiAgICAgICAgICAgICAgICBib2FyZExvb2t1cFtuZXh0VmVydGV4SURdID0ga3ZwO1xyXG4gICAgICAgICAgICAgICAgb3V0RWRnZXNbbmV4dFZlcnRleElEXSA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIG5leHRWZXJ0ZXhJRCsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiB0ZW1wbGF0ZUtub3dsZWRnZS5Mb3N0Qm9hcmRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhMb29rdXBbYl0gPSBuZXh0VmVydGV4SUQ7XHJcbiAgICAgICAgICAgICAgICBib2FyZExvb2t1cFtuZXh0VmVydGV4SURdID0gbmV3IEtleVZhbHVlUGFpcjxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+KGIsIG5ldyBCb2FyZEtub3dsZWRnZShiLCBcImJyZWFrZXIgd2luc1wiKSk7XHJcbiAgICAgICAgICAgICAgICBvdXRFZGdlc1tuZXh0VmVydGV4SURdID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgbmV4dFZlcnRleElEKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBrdnAgaW4gdGVtcGxhdGVLbm93bGVkZ2VbY29sb3JDb3VudF0uRW51bWVyYXRlQm9hcmRLbm93bGVkZ2UoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGt2cC5WYWx1ZS5SZWFzb24gPT0gXCJnb29kIHN3YXBcIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IHZlcnRleExvb2t1cFtrdnAuS2V5XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBrdnAuVmFsdWUuQm9hcmQuRmluZFBlcm11dGF0aW9uKGt2cC5LZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEJvYXJkLkFwcGx5TWFwcGluZyhmLCBuZXdbXSB7IGt2cC5WYWx1ZS5Db2xvclBhaXIuSXRlbTEsIGt2cC5WYWx1ZS5Db2xvclBhaXIuSXRlbTIgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvclBhaXIgPSBuZXcgVHVwbGU8aW50LCBpbnQ+KGNvbG9yc1swXSwgY29sb3JzWzFdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHN3YXAgaW4ga3ZwLlZhbHVlLlN3YXBzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBCb2FyZCA9IGt2cC5LZXkuQ2xvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vdmVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlLGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZT4oc3dhcC5JdGVtMiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmUsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZT4pKG0gPT4gTWV0YUtub3dsZWRnZS5NYXBNb3ZlKGYsIG0pKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBCb2FyZC5Eb01vdmVDb21iaW5hdGlvbihtb3Zlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IHZlcnRleExvb2t1cFt0ZW1wQm9hcmRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRFZGdlc1t2XS5BZGQodyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2FwTG9va3VwW25ldyBUdXBsZTxpbnQsIGludD4odiwgdyldID0gc3dhcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlZGdlV2VpZ2h0cyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuZXh0VmVydGV4SUQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgbmV4dFZlcnRleElEOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dEVkZ2VzW2ldLkNvbnRhaW5zKGopKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlV2VpZ2h0cy5BZGQoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3V0RWRnZXNbal0uQ29udGFpbnMoaSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlV2VpZ2h0cy5BZGQoMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHVwbGU8R3JhcGgsIERpY3Rpb25hcnk8aW50LCBLZXlWYWx1ZVBhaXI8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPj4sIERpY3Rpb25hcnk8VHVwbGU8aW50LCBpbnQ+LCBUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4+PihuZXcgR3JhcGgoZWRnZVdlaWdodHMpLCBib2FyZExvb2t1cCwgc3dhcExvb2t1cCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFBvdEtub3dsZWRnZVxyXG4gICAge1xyXG4gICAgICAgIERpY3Rpb25hcnk8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPiBfYm9hcmRMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+KCk7XHJcbiAgICAgICAgRGljdGlvbmFyeTxzdHJpbmcsIERpY3Rpb25hcnk8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPj4gX2ltcHJvdmVtZW50TG9va3VwID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBEaWN0aW9uYXJ5PEJvYXJkLCBCb2FyZEtub3dsZWRnZT4+KCk7XHJcbiAgICAgICAgSGFzaFNldDxCb2FyZD4gX2xvc3RCb2FyZHMgPSBuZXcgSGFzaFNldDxCb2FyZD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBDb2xvckNvdW50IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxUdXBsZTxpbnQsIGludD4+IENvbG9yUGFpcnMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEJvYXJkPiBMb3N0Qm9hcmRzIHsgZ2V0IHsgcmV0dXJuIF9sb3N0Qm9hcmRzOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIEJvYXJkS25vd2xlZGdlIHRoaXNbQm9hcmQgYm9hcmRdIFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIGdldCBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQm9hcmRLbm93bGVkZ2UgYjtcclxuICAgICAgICAgICAgICAgIF9ib2FyZExvb2t1cC5UcnlHZXRWYWx1ZShib2FyZCwgb3V0IGIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGI7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBEaWN0aW9uYXJ5PEJvYXJkLCBCb2FyZEtub3dsZWRnZT4gSW1wcm92ZW1lbnRMb29rdXAoc3RyaW5nIHJlYXNvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIERpY3Rpb25hcnk8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPiBsb29rdXA7XHJcbiAgICAgICAgICAgIGlmICghX2ltcHJvdmVtZW50TG9va3VwLlRyeUdldFZhbHVlKHJlYXNvbiwgb3V0IGxvb2t1cCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PEJvYXJkLCBCb2FyZEtub3dsZWRnZT4oKTtcclxuICAgICAgICAgICAgICAgIF9pbXByb3ZlbWVudExvb2t1cFtyZWFzb25dID0gbG9va3VwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbG9va3VwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgQm9hcmRLbm93bGVkZ2UgdGhpc1tzdHJpbmcgcmVhc29uLCBCb2FyZCBib2FyZF1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBCb2FyZEtub3dsZWRnZSBiO1xyXG4gICAgICAgICAgICAgICAgSW1wcm92ZW1lbnRMb29rdXAocmVhc29uKS5UcnlHZXRWYWx1ZShib2FyZCwgb3V0IGIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEltcHJvdmVtZW50TG9va3VwKHJlYXNvbilbYm9hcmRdID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQb3RLbm93bGVkZ2UoaW50IGNvbG9yQ291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb2xvckNvdW50ID0gY29sb3JDb3VudDtcclxuICAgICAgICAgICAgU2V0dXBDb2xvclBhaXJzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm9hcmRLbm93bGVkZ2UgQWRkV2luKEJvYXJkIGJvYXJkLCBzdHJpbmcgcmVhc29uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGtub3dsZWRnZSA9IG5ldyBCb2FyZEtub3dsZWRnZShib2FyZCwgcmVhc29uKTtcclxuICAgICAgICAgICAgX2JvYXJkTG9va3VwW2JvYXJkXSA9IGtub3dsZWRnZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBrbm93bGVkZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm9hcmRLbm93bGVkZ2UgQWRkV2luKEJvYXJkIGJvYXJkLCBzdHJpbmcgcmVhc29uLCBpbnQgd2luRGVwdGgsIFR1cGxlPGludCwgaW50PiBjb2xvclBhaXIsIExpc3Q8VHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+PiBnb29kU3dhcHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIga25vd2xlZGdlID0gbmV3IEJvYXJkS25vd2xlZGdlKGJvYXJkLCByZWFzb24pIHsgRGVwdGggPSB3aW5EZXB0aCwgQ29sb3JQYWlyID0gY29sb3JQYWlyLCBTd2FwcyA9IGdvb2RTd2FwcyB9O1xyXG4gICAgICAgICAgICBfYm9hcmRMb29rdXBbYm9hcmRdID0ga25vd2xlZGdlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGtub3dsZWRnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBCb2FyZEtub3dsZWRnZSBBZGRJbXByb3ZlbWVudChCb2FyZCBib2FyZCwgc3RyaW5nIHJlYXNvbiwgaW50IHdpbkRlcHRoLCBUdXBsZTxpbnQsIGludD4gY29sb3JQYWlyLCBMaXN0PFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPj4gZ29vZFN3YXBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGtub3dsZWRnZSA9IG5ldyBCb2FyZEtub3dsZWRnZShib2FyZCwgcmVhc29uKSB7IERlcHRoID0gd2luRGVwdGgsIENvbG9yUGFpciA9IGNvbG9yUGFpciwgU3dhcHMgPSBnb29kU3dhcHMgfTtcclxuICAgICAgICAgICAgdGhpc1tyZWFzb24sIGJvYXJkXSA9IGtub3dsZWRnZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBrbm93bGVkZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRMb3NzKEJvYXJkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfbG9zdEJvYXJkcy5BZGQoYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIFNldHVwQ29sb3JQYWlycygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb2xvclBhaXJzID0gbmV3IExpc3Q8VHVwbGU8aW50LCBpbnQ+PigpO1xyXG4gICAgICAgICAgICB2YXIgY29sb3JzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBDb2xvckNvdW50KS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29sb3JzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBjb2xvcnMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBDb2xvclBhaXJzLkFkZChuZXcgVHVwbGU8aW50LCBpbnQ+KGNvbG9yc1tpXSwgY29sb3JzW2pdKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDb3B5SW50byhQb3RLbm93bGVkZ2UgcG90S25vd2xlZGdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGt2cCBpbiBfYm9hcmRMb29rdXApXHJcbiAgICAgICAgICAgICAgICBwb3RLbm93bGVkZ2UuQWRkV2luKGt2cC5LZXksIGt2cC5WYWx1ZS5SZWFzb24sIGt2cC5WYWx1ZS5EZXB0aCwga3ZwLlZhbHVlLkNvbG9yUGFpciwga3ZwLlZhbHVlLlN3YXBzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxLZXlWYWx1ZVBhaXI8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPj4gRW51bWVyYXRlQm9hcmRLbm93bGVkZ2UoKVxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnlEZXNjZW5kaW5nPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLkJvYXJkS25vd2xlZGdlPixpbnQ+KF9ib2FyZExvb2t1cCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5Cb2FyZEtub3dsZWRnZT4sIGludD4pKHggPT4geC5WYWx1ZS5EZXB0aCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2xpbVN3YXBBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIEtub3dsZWRnZSBfa25vd2xlZGdlO1xyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBCb2FyZD4gX2JvYXJkTG9va3VwO1xyXG4gICAgICAgIERpY3Rpb25hcnk8Qm9hcmQsIGludD4gX2JvYXJkSURMb29rdXA7XHJcbiAgICAgICAgRGljdGlvbmFyeTxpbnQsIExpc3Q8TGlzdDxTb3J0ZWRJbnRMaXN0Pj4+IF9zaHJ1YnMgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8TGlzdDxTb3J0ZWRJbnRMaXN0Pj4+KCk7XHJcbiAgICAgICAgYm9vbCBfdXNlU2hydWJzO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2xpbVN3YXBBbmFseXplcihLbm93bGVkZ2Uga25vd2xlZGdlLCBEaWN0aW9uYXJ5PGludCwgQm9hcmQ+IGJvYXJkTG9va3VwLCBEaWN0aW9uYXJ5PEJvYXJkLCBpbnQ+IGJvYXJkSURMb29rdXAsIGJvb2wgdXNlU2hydWJzID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfa25vd2xlZGdlID0ga25vd2xlZGdlO1xyXG4gICAgICAgICAgICBfYm9hcmRMb29rdXAgPSBib2FyZExvb2t1cDtcclxuICAgICAgICAgICAgX2JvYXJkSURMb29rdXAgPSBib2FyZElETG9va3VwO1xyXG4gICAgICAgICAgICBfdXNlU2hydWJzID0gdXNlU2hydWJzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShpbnQgYm9hcmRJRCwgU29ydGVkSW50TGlzdCB3b25Cb2FyZElEcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghX3VzZVNocnVicylcclxuICAgICAgICAgICAgICAgIHJldHVybiBBbmFseXplU2hydWJGcmVlKGJvYXJkSUQsIHdvbkJvYXJkSURzKTtcclxuXHJcbiAgICAgICAgICAgIExpc3Q8TGlzdDxTb3J0ZWRJbnRMaXN0Pj4gc2hydWI7XHJcbiAgICAgICAgICAgIGlmICghX3NocnVicy5UcnlHZXRWYWx1ZShib2FyZElELCBvdXQgc2hydWIpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEluaXRpYWxpemVTaHJ1YnMoYm9hcmRJRCwgd29uQm9hcmRJRHMpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yUGFpckxpc3QgaW4gc2hydWIpXHJcbiAgICAgICAgICAgIHtcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5Tb3J0ZWRJbnRMaXN0PiggICAgICAgICAgICAgICAgY29sb3JQYWlyTGlzdCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlNvcnRlZEludExpc3QsIGJvb2w+KShicmFuY2hMaXN0ID0+IGJyYW5jaExpc3QuSW50ZXJzZWN0cyh3b25Cb2FyZElEcykpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU29ydGVkSW50TGlzdD4pKCh4KSA9PiB7IH0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb2xvclBhaXJMaXN0LkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQW5hbHl6ZVNocnViRnJlZShpbnQgYm9hcmRJRCwgU29ydGVkSW50TGlzdCB3b25Cb2FyZElEcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBib2FyZCA9IF9ib2FyZExvb2t1cFtib2FyZElEXTtcclxuICAgICAgICAgICAgdmFyIHBvdEtub3dsZWRnZSA9IF9rbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yUGFpciBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnlEZXNjZW5kaW5nPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PixpbnQ+KHBvdEtub3dsZWRnZS5Db2xvclBhaXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikocGFpciA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5FbnVtZXJhdGVFeGFjdGx5T25lSW50ZXJzZWN0ZXJzKGJvYXJkLCBwYWlyKSkgJSAyKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYnJhbmNoIGluIENocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuRW51bWVyYXRlQnJhbmNoZXMoYm9hcmQsIGNvbG9yUGFpcikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwRXhpc3RzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzd2FwIGluIGJyYW5jaClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvYXJkLkRvTW92ZUNvbWJpbmF0aW9uKHN3YXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRJRCA9IF9ib2FyZElETG9va3VwW2JvYXJkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9hcmQuRG9Nb3ZlQ29tYmluYXRpb24oc3dhcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod29uQm9hcmRJRHMuQ29udGFpbnMoY2hpbGRJRCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbm5pbmdTd2FwRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBJbml0aWFsaXplU2hydWJzKGludCBib2FyZElELCBTb3J0ZWRJbnRMaXN0IHdvbkJvYXJkSURzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNocnViID0gbmV3IExpc3Q8TGlzdDxTb3J0ZWRJbnRMaXN0Pj4oKTtcclxuICAgICAgICAgICAgX3NocnVic1tib2FyZElEXSA9IHNocnViO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJvYXJkID0gX2JvYXJkTG9va3VwW2JvYXJkSURdO1xyXG4gICAgICAgICAgICB2YXIgcG90S25vd2xlZGdlID0gX2tub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF07XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JQYWlyIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeURlc2NlbmRpbmc8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LGludD4ocG90S25vd2xlZGdlLkNvbG9yUGFpcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBpbnQ+KShwYWlyID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihDaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkVudW1lcmF0ZUV4YWN0bHlPbmVJbnRlcnNlY3RlcnMoYm9hcmQsIHBhaXIpKSAlIDIpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yUGFpckxpc3QgPSBuZXcgTGlzdDxTb3J0ZWRJbnRMaXN0PigpO1xyXG4gICAgICAgICAgICAgICAgc2hydWIuQWRkKGNvbG9yUGFpckxpc3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYnJhbmNoIGluIENocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuRW51bWVyYXRlQnJhbmNoZXMoYm9hcmQsIGNvbG9yUGFpcikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJyYW5jaExpc3QgPSBuZXcgU29ydGVkSW50TGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcEV4aXN0cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgc3dhcCBpbiBicmFuY2gpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2FyZC5Eb01vdmVDb21iaW5hdGlvbihzd2FwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkSUQgPSBfYm9hcmRJRExvb2t1cFtib2FyZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvYXJkLkRvTW92ZUNvbWJpbmF0aW9uKHN3YXApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvbkJvYXJkSURzLkNvbnRhaW5zKGNoaWxkSUQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmNoTGlzdC5BZGQoY2hpbGRJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbm5pbmdTd2FwRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JQYWlyTGlzdC5BZGQoYnJhbmNoTGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW1cclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNvcnRlZEludExpc3RcclxuICAgIHtcclxuICAgICAgICBpbnRbXSBfZGF0YTtcclxuICAgICAgICBpbnQgX2xlbmd0aDtcclxuXHJcbiAgICAgICAgcHVibGljIFNvcnRlZEludExpc3QoaW50IGluaXRpYWxDYXBhY2l0eSA9IDE2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2RhdGEgPSBuZXcgaW50W2luaXRpYWxDYXBhY2l0eV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGQoaW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IEFycmF5LkJpbmFyeVNlYXJjaDxpbnQ+KF9kYXRhLCAwLCBfbGVuZ3RoLCB4KTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIEVuc3VyZUNhcGFjaXR5KCk7XHJcblxyXG4gICAgICAgICAgICBpID0gfmk7XHJcbiAgICAgICAgICAgIGlmIChpIDwgX2xlbmd0aClcclxuICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoX2RhdGEsIGksIF9kYXRhLCBpICsgMSwgX2xlbmd0aCAtIGkpO1xyXG5cclxuICAgICAgICAgICAgX2RhdGFbaV0gPSB4O1xyXG4gICAgICAgICAgICBfbGVuZ3RoKys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWlucyhpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5CaW5hcnlTZWFyY2g8aW50PihfZGF0YSwgMCwgX2xlbmd0aCwgeCkgPj0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEludGVyc2VjdHMoU29ydGVkSW50TGlzdCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBqID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBrID0gQXJyYXkuQmluYXJ5U2VhcmNoPGludD4ob3RoZXIuX2RhdGEsIGosIG90aGVyLl9sZW5ndGggLSBqLCBfZGF0YVtpXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoayA+PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaiA9IH5rO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgRW5zdXJlQ2FwYWNpdHkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9sZW5ndGggPj0gX2RhdGEuTGVuZ3RoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBpbnRbMiAqIF9kYXRhLkxlbmd0aF07XHJcbiAgICAgICAgICAgICAgICBBcnJheS5Db3B5KF9kYXRhLCBkYXRhLCBfZGF0YS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgX2RhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQm9hcmRMZXhpZmllclxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyBEaWN0aW9uYXJ5PHN0cmluZywgVHVwbGU8c3RyaW5nLCBQZXJtdXRhdGlvbj4+IF9sb29rdXAgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFR1cGxlPHN0cmluZywgUGVybXV0YXRpb24+PigpO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvTGlzdFN0cmluZ0luTGV4T3JkZXIobG9uZ1tdIHNzLCBvdXQgUGVybXV0YXRpb24gcHAsIGludCBtYXhQb3QgPSAtMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHNzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikobCA9PiBsLlRvU2V0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHBvdCA9IG1heFBvdDtcclxuICAgICAgICAgICAgaWYgKHBvdCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcG90ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4obGlzdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKGwgPT4gbCkpLkRpc3RpbmN0KCkuQ291bnQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihsaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHMgPT4gcy5Db3VudCA8PSBwb3QpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFRvTGV4T3JkZXIoc3RyaW5nLkpvaW4oXCJ8XCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LHN0cmluZz4oc3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBzdHJpbmc+KShzID0+IHN0cmluZy5Kb2luPGludD4oXCJcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGludCxpbnQ+KHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh4ID0+IHgpKSkpKSksIG91dCBwcCwgbWF4UG90KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBzdHJpbmcgVG9MZXhPcmRlcihzdHJpbmcgc3RhY2tzU3RyaW5nLCBvdXQgUGVybXV0YXRpb24gcHAsIGludCBtYXhQb3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gc3RhY2tzU3RyaW5nICsgXCI7XCIgKyBtYXhQb3Q7XHJcbiAgICAgICAgICAgIFR1cGxlPHN0cmluZywgUGVybXV0YXRpb24+IHR1cDtcclxuICAgICAgICAgICAgaWYgKF9sb29rdXAuVHJ5R2V0VmFsdWUoa2V5LCBvdXQgdHVwKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcHAgPSB0dXAuSXRlbTI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHVwLkl0ZW0xO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwcCA9IG51bGw7XHJcbiAgICAgICAgICAgIHN0cmluZyBsZXhTbWFsbGVzdDtcclxuICAgICAgICAgICAgdmFyIHN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oc3RhY2tzU3RyaW5nLlNwbGl0KCd8JyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHMgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Y2hhcixpbnQ+KHMuVG9DaGFyQXJyYXkoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxjaGFyLCBpbnQ+KShjID0+IGludC5QYXJzZShjLlRvU3RyaW5nKCkpKSkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgbGV4U21hbGxlc3QgPSBzdGFja3NTdHJpbmc7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG90ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4oc3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KShsID0+IGwpKS5EaXN0aW5jdCgpLkNvdW50KCk7XHJcbiAgICAgICAgICAgIGlmIChtYXhQb3QgPiAwKVxyXG4gICAgICAgICAgICAgICAgcG90ID0gbWF4UG90O1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHAgaW4gUGVybXV0YXRpb24uRW51bWVyYXRlQWxsKHBvdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwZXJtdXRlZFN0cmluZyA9IHN0cmluZy5Kb2luKFwifFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixzdHJpbmc+KHN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Piwgc3RyaW5nPikocyA9PiBzdHJpbmcuSm9pbjxpbnQ+KFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShhID0+IHBbYV0pKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh4ID0+IHgpKSkpKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGVybXV0ZWRTdHJpbmcuQ29tcGFyZVRvKGxleFNtYWxsZXN0KSA8PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxleFNtYWxsZXN0ID0gcGVybXV0ZWRTdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgcHAgPSBwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfbG9va3VwW2tleV0gPSBuZXcgVHVwbGU8c3RyaW5nLCBQZXJtdXRhdGlvbj4obGV4U21hbGxlc3QsIHBwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGxleFNtYWxsZXN0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgc3RhdGljIGNsYXNzIEhhc2hpbmdcclxuICAgIHtcclxuICAgICAgICBjb25zdCBpbnQgTWF4TGVuZ3RoID0gMzI7XHJcbiAgICAgICAgc3RhdGljIExpc3Q8dWxvbmc+IF9tO1xyXG5cclxuICAgICAgICBzdGF0aWMgSGFzaGluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfbSA9IG5ldyBMaXN0PHVsb25nPihNYXhMZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIFJORyA9IG5ldyBSYW5kb20oRGF0ZVRpbWUuTm93Lk1pbGxpc2Vjb25kKTtcclxuICAgICAgICAgICAgdmFyIGIgPSBuZXcgYnl0ZVs4XTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTWF4TGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFJORy5OZXh0Qnl0ZXMoYik7XHJcbiAgICAgICAgICAgICAgICBfbS5BZGQoQml0Q29udmVydGVyLlRvVUludDY0KGIsIDApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgSGFzaCh1bG9uZ1tdIGxpc3QsIGludCBsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyBoYXNoID0gbGlzdFswXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBoYXNoICs9IF9tW2kgLSAxXSAqIGxpc3RbaV07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGludCkoaGFzaCA+PiAzMik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnNcclxue1xyXG4gICAgcHVibGljIGFic3RyYWN0IGNsYXNzIFByb29mQnVpbGRlclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1NaW5kIE1pbmQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8UHJvb2ZDYXNlPiBDYXNlcyB7IGdldDsgcHJvdGVjdGVkIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIFVzZVBlcm11dGF0aW9ucyB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQcm9vZkJ1aWxkZXIoU3VwZXJTbGltTWluZCBtaW5kLCBib29sIHVzZVBlcm11dGF0aW9ucyA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTWluZCA9IG1pbmQ7XHJcbiAgICAgICAgICAgIFVzZVBlcm11dGF0aW9ucyA9IHVzZVBlcm11dGF0aW9ucztcclxuICAgICAgICAgICAgRXh0cmFjdENhc2VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEV4dHJhY3RDYXNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDYXNlcyA9IG5ldyBMaXN0PFByb29mQ2FzZT4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjYXNlTnVtYmVyID0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvcmFibGVDYXNlID0gbmV3IFByb29mQ2FzZShNaW5kLCAwLCBNaW5kLkNvbG9yYWJsZUJvYXJkcyk7XHJcbiAgICAgICAgICAgIENhc2VzLkFkZChjb2xvcmFibGVDYXNlKTtcclxuICAgICAgICAgICAgY2FzZU51bWJlcisrO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlbWFpbmluZ0JvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KE1pbmQuTm9uQ29sb3JhYmxlQm9hcmRzKTtcclxuICAgICAgICAgICAgdmFyIHdvbkJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KE1pbmQuQ29sb3JhYmxlQm9hcmRzKTtcclxuICAgICAgICAgICAgd2hpbGUgKHJlbWFpbmluZ0JvYXJkcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcm9vZkNhc2UgPSBuZXcgUHJvb2ZDYXNlKE1pbmQsIGNhc2VOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgQ2FzZXMuQWRkKHByb29mQ2FzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFkZGVkQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYm9hcmQgaW4gcmVtYWluaW5nQm9hcmRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmVlSW5mbyA9IE1pbmQuR2V0V2luVHJlZUluZm8oYm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IHdvbkJvYXJkcy5Db250YWlucyhuZXcgU3VwZXJTbGltQm9hcmQoYm9hcmQuX3RyYWNlLCBiYy5BbHBoYSwgYmMuQmV0YSwgYmMuUmVzcG9uc2UsIGJvYXJkLl9zdGFja0NvdW50KSkpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRCb2FyZHMuQWRkKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYm9hcmQgaW4gYWRkZWRCb2FyZHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvb2ZDYXNlLkFkZEJvYXJkKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgICAgICB3b25Cb2FyZHMuQWRkKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdCb2FyZHMuUmVtb3ZlKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlTnVtYmVyKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIGludCBHZXRIYW5kbGVkQ2FzZU51bWJlcihTdXBlclNsaW1Cb2FyZCBiLCBCcmVha2VyQ2hvaWNlSW5mbyBiYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IFN1cGVyU2xpbUJvYXJkKGIuX3RyYWNlLCBiYy5BbHBoYSwgYmMuQmV0YSwgYmMuUmVzcG9uc2UsIGIuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuSW5kaWNlc1doZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLlByb29mQ2FzZT4oQ2FzZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuUHJvb2ZDYXNlLCBib29sPikoY2MgPT4gY2MuQm9hcmRzLkNvbnRhaW5zKGNoaWxkQm9hcmQpKSkpICsgMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBzdHJpbmcgV3JpdGVQcm9vZigpO1xyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRBcnRpY2xlKHRoaXMgc3RyaW5nIGxldHRlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobGV0dGVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiWFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImFuXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiWVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImFcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJaXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYVwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIExpc3RpZnk8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBzdHJpbmdzLCBzdHJpbmcgY29ubmVjdG9yID0gXCJhbmRcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsbCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PFQ+KHN0cmluZ3MpO1xyXG4gICAgICAgICAgICBpZiAobGwuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICBpZiAobGwuQ291bnQgPT0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBsbFswXS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbm5lY3RvciAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luPFQ+KFwiLCBcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPFQ+KGxsLGxsLkNvdW50IC0gMSkpICsgXCIgXCIgKyBjb25uZWN0b3IgKyBcIiBcIiArIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdDxUPihsbCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW48VD4oXCIsIFwiLCBsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBXb3JkaWZ5KHRoaXMgaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJmaXJzdFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNlY29uZFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRoaXJkXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZm91cnRoXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZmlmdGhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzaXh0aFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNldmVudGhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlaWdodGhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJuaW50aFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRlbnRoXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImVsZXZlbnRoXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAobiArIDEpICsgXCItdGhcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8VD4gRXhjZXB0PFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gbGlzdCwgVCB0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PFQ+KGxpc3QsbmV3W10geyB0IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTWF4SW5kZXg8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBsaXN0LCBGdW5jPFQsIGludD4gdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWF4SW5kZXggPSAtMTtcclxuICAgICAgICAgICAgdmFyIG1heCA9IGludC5NaW5WYWx1ZTtcclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBsaXN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdiA9IHZhbHVlKHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHYgPiBtYXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gdjtcclxuICAgICAgICAgICAgICAgICAgICBtYXhJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWF4SW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPFQ+IERpc3RpbmN0PFQsIFM+KHRoaXMgSUVudW1lcmFibGU8VD4gbGlzdCwgRnVuYzxULCBTPiB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkaXN0aW5jdCA9IG5ldyBMaXN0PFQ+KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIGxpc3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8VD4oZGlzdGluY3QsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgYm9vbD4pKHR0ID0+IHZhbHVlKHR0KS5FcXVhbHModmFsdWUodCkpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGluY3QuQWRkKHQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGlzdGluY3Q7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkFyYml0cmFyeU1heERlZ3JlZVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1RleCh0aGlzIFNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyIG1hdGNoZXIsIExpc3Q8TGlzdDxpbnQ+PiBsaXN0cywgaW50IGxpc3RTaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG1hdGNoZXIuTmFtZSA9PSBcIipcIilcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcIlwiLCBFbnVtZXJhYmxlLlJlcGVhdDxzdHJpbmc+KFwiXFxcXHdpbGRcIiwgbGlzdFNpemUpKSArIFwiIFwiO1xyXG5cclxuICAgICAgICAgICAgaW50IGk7XHJcbiAgICAgICAgICAgIGlmICghaW50LlRyeVBhcnNlKG1hdGNoZXIuTmFtZSwgb3V0IGkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiP1wiO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luPGludD4oXCJcIiwgbGlzdHNbaV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0QWN0aXZlTGlzdEluZGV4KHRoaXMgaW50IGksIFN1cGVyU2xpbUJvYXJkIGIsIGludCBtYXhQb3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGxvbmc+KGIuU3RhY2tzLlZhbHVlLGkgKyAxKS5Db3VudCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBib29sPikoc3MgPT4gc3MuUG9wdWxhdGlvbkNvdW50KCkgPCBtYXhQb3QpKSAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLk1heERlZ3JlZVRocmVlXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHN0cmluZyBBbHBoYWJldCA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIjtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9YWVoodGhpcyBTdXBlclNsaW1Cb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcIlwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4oYm9hcmQuU3RhY2tzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIHN0cmluZz4pVG9YWVopKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IFRvMDEyKHRoaXMgU3VwZXJTbGltQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxpbnQ+KGJvYXJkLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBpbnQ+KVRvMDEyKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh4ID0+IHggPj0gMCkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9Db21wYWN0ZWRQYXJ0aXRpb25JZCh0aGlzIFN1cGVyU2xpbUJvYXJkIGJvYXJkLCBMaXN0PExpc3Q8aW50Pj4gcGFydGl0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHh5eiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihib2FyZC5TdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgc3RyaW5nPilUb1hZWikuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiB4eXouVG9QYXJ0aXRpb25JZChwYXJ0aXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9QYXJ0aXRpb25JZCh0aGlzIFN1cGVyU2xpbUJvYXJkIGJvYXJkLCBMaXN0PExpc3Q8aW50Pj4gcGFydGl0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHh5eiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihib2FyZC5TdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgc3RyaW5nPikoc3RhY2sgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHN0YWNrLlRvWFlaKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMuTGVuZ3RoIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIipcIjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICAgICAgICAgIH0pKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4eXouVG9QYXJ0aXRpb25JZChwYXJ0aXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9QYXJ0aXRpb25JZCh0aGlzIExpc3Q8c3RyaW5nPiB4eXosIExpc3Q8TGlzdDxpbnQ+PiBwYXJ0aXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcHAgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihwYXJ0aXRpb24sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGludD4pKHBhcnQgPT4gcGFydC5NaW4oKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBwLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBsID0gQWxwaGFiZXRbaV0uVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBqIGluIHBwW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHh5eltqXSA9IGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcIlwiLCB4eXopO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9YWVoodGhpcyBsb25nIHN0YWNrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3dpdGNoIChzdGFjaylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJZXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiWlwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFRvMDEyKHRoaXMgbG9uZyBzdGFjaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzdGFjayA+IDYpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIHJldHVybiAoKGludClzdGFjayAvIDIpIC0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldFhZWkluZGV4KHRoaXMgaW50IGksIFN1cGVyU2xpbUJvYXJkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGxvbmc+KGIuU3RhY2tzLlZhbHVlLGkgKyAxKS5Db3VudCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBib29sPikoc3MgPT4gc3MuUG9wdWxhdGlvbkNvdW50KCkgPT0gMikpIC0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvVGV4KHRoaXMgU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXIgbWF0Y2hlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobWF0Y2hlci5OYW1lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiKlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlxcXFx3aWxkIFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIjBcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJYXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiMVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIllcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiWlwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIiEwXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXFxcXGJhcnt7WH19XCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiITFcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcXFxcYmFye3tZfX1cIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIhMlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlxcXFxiYXJ7e1p9fVwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gXCI/XCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFByb29mQ2FzZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1NaW5kIE1pbmQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8U3VwZXJTbGltQm9hcmQ+IEJvYXJkcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBCcmVha2VyV2luIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IENhc2VOdW1iZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgU3VwZXJhYnVuZGFudCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQcm9vZkNhc2UoU3VwZXJTbGltTWluZCBtaW5kLCBpbnQgY2FzZU51bWJlciwgTGlzdDxTdXBlclNsaW1Cb2FyZD4gYm9hcmRzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1pbmQgPSBtaW5kO1xyXG4gICAgICAgICAgICBDYXNlTnVtYmVyID0gY2FzZU51bWJlcjtcclxuICAgICAgICAgICAgQm9hcmRzID0gYm9hcmRzO1xyXG4gICAgICAgICAgICBpZiAoQm9hcmRzID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICBCb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZEJvYXJkKFN1cGVyU2xpbUJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQm9hcmRzLkFkZChib2FyZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXM7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTdXBlclNsaW1Cb2FyZFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMYXp5PGxvbmdbXT4gU3RhY2tzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyB1bG9uZ1tdIF90cmFjZTtcclxuICAgICAgICBwdWJsaWMgaW50IF9sZW5ndGg7XHJcbiAgICAgICAgcHVibGljIGludCBfc3RhY2tDb3VudDtcclxuICAgICAgICBpbnQgX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFR1cGxlPFN1cGVyU2xpbUJvYXJkLCBCaWplY3Rpb248aW50LCBUPj4gQ3JlYXRlPFQ+KExpc3Q8TGlzdDxUPj4gbGlzdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcG90ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixUPihsaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4+KShsID0+IGwpKS5EaXN0aW5jdCgpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgbnVtYmVyaW5nID0gQWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlcy5CaWplY3Rpb25FeHRlbnNpb25zLk51bWJlck9iamVjdHM8VD4ocG90KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbnRMaXN0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4obGlzdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGwgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihudW1iZXJpbmcuQXBwbHkobCkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciB0cmFjZSA9IG5ldyB1bG9uZ1twb3QuQ291bnRdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3QuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHRyYWNlW2ldID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGludExpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikobGwgPT4gbGwuQ29udGFpbnMoaSkpKS5Ub1VJbnQ2NCgpO1xyXG5cclxuICAgICAgICAgICAgcG90ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PFQsdWxvbmc+KHBvdCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCB1bG9uZz4pKGMgPT4gdHJhY2VbcG90LkluZGV4T2YoYyldKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIG51bWJlcmluZyA9IEFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXMuQmlqZWN0aW9uRXh0ZW5zaW9ucy5OdW1iZXJPYmplY3RzPFQ+KHBvdCk7XHJcblxyXG4gICAgICAgICAgICBBcnJheS5Tb3J0PHVsb25nPih0cmFjZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHVwbGU8U3VwZXJTbGltQm9hcmQsIEJpamVjdGlvbjxpbnQsIFQ+PihuZXcgU3VwZXJTbGltQm9hcmQodHJhY2UsIGxpc3RzLkNvdW50KSwgbnVtYmVyaW5nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgU3VwZXJTbGltQm9hcmQgRnJvbUxpc3RzKExpc3Q8TGlzdDxpbnQ+PiBsaXN0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwb3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihsaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PikobCA9PiBsKSkuRGlzdGluY3QoKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHRyYWNlID0gbmV3IHVsb25nW3BvdC5Db3VudF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgdHJhY2VbaV0gPSBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4obGlzdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShsbCA9PiBsbC5Db250YWlucyhpKSkpLlRvVUludDY0KCk7XHJcblxyXG4gICAgICAgICAgICBBcnJheS5Tb3J0PHVsb25nPih0cmFjZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3VwZXJTbGltQm9hcmQodHJhY2UsIGxpc3RzLkNvdW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihpbnQgbWF4UG90ID0gLTEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBQZXJtdXRhdGlvbiBwcDtcclxuICAgICAgICAgICAgcmV0dXJuIFRvTGlzdFN0cmluZ0luTGV4T3JkZXIob3V0IHBwLCBtYXhQb3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUb0xpc3RTdHJpbmdJbkxleE9yZGVyKG91dCBQZXJtdXRhdGlvbiBwcCwgaW50IG1heFBvdCA9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJvYXJkTGV4aWZpZXIuVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihTdGFja3MuVmFsdWUsIG91dCBwcCwgbWF4UG90KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1Cb2FyZCh1bG9uZ1tdIHRyYWNlLCBpbnQgc3RhY2tDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF90cmFjZSA9IHRyYWNlO1xyXG4gICAgICAgICAgICBfbGVuZ3RoID0gX3RyYWNlLkxlbmd0aDtcclxuICAgICAgICAgICAgX3N0YWNrQ291bnQgPSBzdGFja0NvdW50O1xyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoaW5nLkhhc2goX3RyYWNlLCBfbGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIE1ha2VMYXp5U3RhY2tzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltQm9hcmQodWxvbmdbXSB0cmFjZSwgaW50IGksIGludCBqLCB1bG9uZyBzd2FwLCBpbnQgc3RhY2tDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF90cmFjZSA9IG5ldyB1bG9uZ1t0cmFjZS5MZW5ndGhdO1xyXG4gICAgICAgICAgICBfbGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgayA9IDA7IGsgPCB0cmFjZS5MZW5ndGg7IGsrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWxvbmcgdiA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoayA9PSBpIHx8IGsgPT0gailcclxuICAgICAgICAgICAgICAgICAgICB2ID0gdHJhY2Vba10gXiBzd2FwO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHYgPSB0cmFjZVtrXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodiA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IHEgPSBfbGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChxID4gMCAmJiBfdHJhY2VbcSAtIDFdID4gdilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcS0tO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocSA8IF9sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoX3RyYWNlLCBxIDw8IDMsIF90cmFjZSwgKHEgKyAxKSA8PCAzLCAoX2xlbmd0aCAtIHEpIDw8IDMpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90cmFjZVtxXSA9IHY7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9sZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgX3N0YWNrQ291bnQgPSBzdGFja0NvdW50O1xyXG4gICAgICAgICAgICBNYWtlTGF6eVN0YWNrcygpO1xyXG5cclxuICAgICAgICAgICAgX2hhc2hDb2RlID0gSGFzaGluZy5IYXNoKF90cmFjZSwgX2xlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUGVybXV0YXRpb24gR2V0UGVybXV0YXRpb24oaW50IGksIGludCBqLCB1bG9uZyBzd2FwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDx1bG9uZz4oX3RyYWNlKTtcclxuXHJcbiAgICAgICAgICAgIHRbaV0gPSB0W2ldIF4gc3dhcDtcclxuICAgICAgICAgICAgdFtqXSA9IHRbal0gXiBzd2FwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRbaV0gPT0gMClcclxuICAgICAgICAgICAgICAgIHRbaV0gPSBpbnQuTWF4VmFsdWU7XHJcbiAgICAgICAgICAgIGlmICh0W2pdID09IDApXHJcbiAgICAgICAgICAgICAgICB0W2pdID0gaW50Lk1heFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNlcXVlbmNlID0gdC5aaXAoRW51bWVyYWJsZS5SYW5nZSgwLCB0LkNvdW50KSwgKHRyLCBpaSkgPT4gbmV3IHsgVCA9IHRyLCBJID0gaWkgfSkuT3JkZXJCeTx1bG9uZz4odiA9PiB2LlQpLlNlbGVjdDxpbnQ+KHYgPT4gdi5JKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVybXV0YXRpb24oc2VxdWVuY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbUJvYXJkIFBlcm11dGUoUGVybXV0YXRpb24gcCwgTGlzdDxpbnQ+IGluZGljZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdHJhY2UgPSBuZXcgdWxvbmdbX3RyYWNlLkxlbmd0aF07XHJcblxyXG4gICAgICAgICAgICB2YXIgcGVybXV0ZWRJbmRpY2VzID0gcC5BcHBseTxpbnQ+KGluZGljZXMpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF90cmFjZS5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG4gPSBfdHJhY2VbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgbSA9IF90cmFjZVtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGluZGljZXMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBtICY9IH4oMVVMIDw8IGluZGljZXNbal0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgaW5kaWNlcy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgobiAmICgxVUwgPDwgaW5kaWNlc1tqXSkpICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gfD0gKDFVTCA8PCBwZXJtdXRlZEluZGljZXNbal0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRyYWNlW2ldID0gbTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQXJyYXkuU29ydDx1bG9uZz4odHJhY2UpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdXBlclNsaW1Cb2FyZCh0cmFjZSwgX3N0YWNrQ291bnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBNYWtlTGF6eVN0YWNrcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdGFja3MgPSBuZXcgTGF6eTxsb25nW10+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IGxvbmdbX3N0YWNrQ291bnRdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyYWNlQml0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfdHJhY2UsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8dWxvbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikodCA9PiB0LlRvU2V0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGMgPSAwOyBjIDwgdHJhY2VCaXRzLkNvdW50OyBjKyspXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gdHJhY2VCaXRzW2NdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzW2ldIHw9IDFMIDw8IGM7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIFN1cGVyU2xpbUJvYXJkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhTdXBlclNsaW1Cb2FyZCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsIHx8IF9sZW5ndGggIT0gb3RoZXIuX2xlbmd0aClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaWYgKF90cmFjZVtpXSAhPSBvdGhlci5fdHJhY2VbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcInxcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KFN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KShsID0+IHN0cmluZy5Kb2luPGludD4oXCJcIiwgbC5Ub1NldCgpKSkpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQml0TGV2ZWxHZW5lcmF0aW9uO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN1cGVyU2xpbUNvbG9yaW5nQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBHcmFwaCBfbGluZUdyYXBoO1xyXG4gICAgICAgIEZ1bmM8U3VwZXJTbGltQm9hcmQsIGludCwgbG9uZz4gX2dldEVkZ2VDb2xvckxpc3Q7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1Db2xvcmluZ0FuYWx5emVyKEdyYXBoIGxpbmVHcmFwaCwgRnVuYzxTdXBlclNsaW1Cb2FyZCwgaW50LCBsb25nPiBnZXRFZGdlQ29sb3JMaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2xpbmVHcmFwaCA9IGxpbmVHcmFwaDtcclxuICAgICAgICAgICAgX2dldEVkZ2VDb2xvckxpc3QgPSBnZXRFZGdlQ29sb3JMaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShTdXBlclNsaW1Cb2FyZCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9saW5lR3JhcGguSXNDaG9vc2FibGUoRW51bWVyYWJsZS5SYW5nZSgwLCBfbGluZUdyYXBoLk4pLlNlbGVjdDxsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGxvbmc+KShlID0+IF9nZXRFZGdlQ29sb3JMaXN0KGIsIGUpKSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29sb3JhYmxlV2l0aG91dEVkZ2UoU3VwZXJTbGltQm9hcmQgYiwgaW50IGVkZ2VJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfbGluZUdyYXBoLklzQ2hvb3NhYmxlKEVudW1lcmFibGUuUmFuZ2UoMCwgX2xpbmVHcmFwaC5OKS5TZWxlY3Q8bG9uZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBsb25nPikoZSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZSA9PSBlZGdlSW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBfZ2V0RWRnZUNvbG9yTGlzdChiLCBlKTtcclxuICAgICAgICAgICAgfSkpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKFN1cGVyU2xpbUJvYXJkIGIsIG91dCBEaWN0aW9uYXJ5PGludCwgbG9uZz4gY29sb3JpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSXNDaG9vc2FibGUoRW51bWVyYWJsZS5SYW5nZSgwLCBfbGluZUdyYXBoLk4pLlNlbGVjdDxsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGxvbmc+KShlID0+IF9nZXRFZGdlQ29sb3JMaXN0KGIsIGUpKSkuVG9MaXN0KCksIG91dCBjb2xvcmluZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplV2l0aG91dEVkZ2UoU3VwZXJTbGltQm9hcmQgYiwgb3V0IERpY3Rpb25hcnk8aW50LCBsb25nPiBjb2xvcmluZywgaW50IGVkZ2VJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJc0Nob29zYWJsZShFbnVtZXJhYmxlLlJhbmdlKDAsIF9saW5lR3JhcGguTikuU2VsZWN0PGxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgbG9uZz4pKGUgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUgPT0gZWRnZUluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2dldEVkZ2VDb2xvckxpc3QoYiwgZSk7XHJcbiAgICAgICAgICAgIH0pKS5Ub0xpc3QoKSwgb3V0IGNvbG9yaW5nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ2hvb3NhYmxlKExpc3Q8bG9uZz4gYXNzaWdubWVudCwgb3V0IERpY3Rpb25hcnk8aW50LCBsb25nPiBjb2xvcmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbG9yaW5nID0gbmV3IERpY3Rpb25hcnk8aW50LCBsb25nPigpO1xyXG4gICAgICAgICAgICByZXR1cm4gSXNDaG9vc2FibGUoYXNzaWdubWVudCwgMCwgY29sb3JpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBib29sIElzQ2hvb3NhYmxlKExpc3Q8bG9uZz4gYXNzaWdubWVudCwgaW50IHYsIERpY3Rpb25hcnk8aW50LCBsb25nPiBjb2xvcmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2ID49IF9saW5lR3JhcGguTilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvcnMgPSBhc3NpZ25tZW50W3ZdO1xyXG4gICAgICAgICAgICB3aGlsZSAoY29sb3JzICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGNvbG9ycyAmIC1jb2xvcnM7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IExpc3Q8bG9uZz4oYXNzaWdubWVudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbmVpZ2hib3IgaW4gX2xpbmVHcmFwaC5fbGF0ZXJOZWlnaGJvcnMuVmFsdWVbdl0pXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudENvcHlbbmVpZ2hib3JdICY9IH5jb2xvcjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoSXNDaG9vc2FibGUoYXNzaWdubWVudENvcHksIHYgKyAxLCBjb2xvcmluZykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3Jpbmdbdl0gPSBjb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb2xvcnMgXj0gY29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTdXBlclNsaW1Td2FwQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgaW50IExhc3RXaW5DaGlsZENvdW50IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIGJvb2wgUHJvb2ZGaW5kaW5nTW9kZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgYm9vbCBXZWFrbHlGaXhhYmxlIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgRGljdGlvbmFyeTxTdXBlclNsaW1Cb2FyZCwgR2FtZVRyZWVJbmZvPiBXaW5UcmVlSW5mbyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgRGljdGlvbmFyeTxTdXBlclNsaW1Cb2FyZCwgR2FtZVRyZWVJbmZvPiBMb3NzVHJlZUluZm8geyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHVsb25nW10gX2ZpeGVyUmVzcG9uc2VzO1xyXG4gICAgICAgIGludCBfZml4ZXJSZXNwb25zZUNvdW50O1xyXG4gICAgICAgIERpY3Rpb25hcnk8dWxvbmcsIExpc3Q8TGlzdDx1bG9uZz4+PiBfYnJlYWtlckNob2ljZXNDYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PHVsb25nLCBMaXN0PExpc3Q8dWxvbmc+Pj4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbVN3YXBBbmFseXplcihpbnQgbiwgYm9vbCBwcm9vZkZpbmRpbmdNb2RlID0gZmFsc2UsIGJvb2wgd2Vha2x5Rml4YWJsZSA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VzID0gbmV3IHVsb25nWzgxOTJdO1xyXG4gICAgICAgICAgICBQcm9vZkZpbmRpbmdNb2RlID0gcHJvb2ZGaW5kaW5nTW9kZTtcclxuICAgICAgICAgICAgV2Vha2x5Rml4YWJsZSA9IHdlYWtseUZpeGFibGU7XHJcbiAgICAgICAgICAgIGlmIChQcm9vZkZpbmRpbmdNb2RlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBXaW5UcmVlSW5mbyA9IG5ldyBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBHYW1lVHJlZUluZm8+KCk7XHJcbiAgICAgICAgICAgICAgICBMb3NzVHJlZUluZm8gPSBuZXcgRGljdGlvbmFyeTxTdXBlclNsaW1Cb2FyZCwgR2FtZVRyZWVJbmZvPigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKFN1cGVyU2xpbUJvYXJkIGJvYXJkLCBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPiB3b25Cb2FyZHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoUHJvb2ZGaW5kaW5nTW9kZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBBbmFseXplRm9yUHJvb2ZJbnRlcm5hbChib2FyZCwgd29uQm9hcmRzKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBBbmFseXplSW50ZXJuYWwoYm9hcmQsIHdvbkJvYXJkcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgXHJcbiAgICAgICAgYm9vbCBBbmFseXplSW50ZXJuYWwoU3VwZXJTbGltQm9hcmQgYm9hcmQsIEhhc2hTZXQ8U3VwZXJTbGltQm9hcmQ+IHdvbkJvYXJkcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYm9hcmQuX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBib2FyZC5fbGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBib2FyZC5fdHJhY2VbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBib2FyZC5fdHJhY2Vbal07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN3YXBwYWJsZSA9IHggXiB5O1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJyZWFrZXJDaG9pY2UgaW4gR2V0QnJlYWtlckNob2ljZXMoc3dhcHBhYmxlKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcEV4aXN0cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgR2V0Rml4ZXJSZXNwb25zZXMoYnJlYWtlckNob2ljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGsgPSAxOyBrIDwgX2ZpeGVyUmVzcG9uc2VDb3VudDsgaysrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoV2Vha2x5Rml4YWJsZSAmJiBfZml4ZXJSZXNwb25zZXNba10uUG9wdWxhdGlvbkNvdW50KCkgPiAyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IFN1cGVyU2xpbUJvYXJkKGJvYXJkLl90cmFjZSwgaSwgaiwgX2ZpeGVyUmVzcG9uc2VzW2tdLCBib2FyZC5fc3RhY2tDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod29uQm9hcmRzLkNvbnRhaW5zKGNoaWxkQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5uaW5nU3dhcEV4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2lubmluZ1N3YXBBbHdheXNFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIEFuYWx5emVGb3JQcm9vZkludGVybmFsKFN1cGVyU2xpbUJvYXJkIGJvYXJkLCBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPiB3b25Cb2FyZHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgd2luSW5mbyA9IG5ldyBHYW1lVHJlZUluZm8oKTtcclxuICAgICAgICAgICAgV2luVHJlZUluZm9bYm9hcmRdID0gd2luSW5mbztcclxuXHJcbiAgICAgICAgICAgIHZhciBsb3NzSW5mbyA9IG5ldyBHYW1lVHJlZUluZm8oKTtcclxuICAgICAgICAgICAgTG9zc1RyZWVJbmZvW2JvYXJkXSA9IGxvc3NJbmZvO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9yUGFpcnMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYm9hcmQuX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgYm9hcmQuX2xlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGFpcnMuQWRkKG5ldyBUdXBsZTxpbnQsIGludD4oaSwgaikpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNwIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4saW50Pihjb2xvclBhaXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikoY3AgPT4gKGJvYXJkLl90cmFjZVtjcC5JdGVtMV0gXiBib2FyZC5fdHJhY2VbY3AuSXRlbTJdKS5Qb3B1bGF0aW9uQ291bnQoKSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGNwLkl0ZW0xO1xyXG4gICAgICAgICAgICAgICAgdmFyIGogPSBjcC5JdGVtMjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IGJvYXJkLl90cmFjZVtpXTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gYm9hcmQuX3RyYWNlW2pdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN3YXBwYWJsZSA9IHggXiB5O1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYnJlYWtlckNob2ljZSBpbiBHZXRCcmVha2VyQ2hvaWNlcyhzd2FwcGFibGUpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcEV4aXN0cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBHZXRGaXhlclJlc3BvbnNlcyhicmVha2VyQ2hvaWNlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2VzID0gRW51bWVyYWJsZS5SYW5nZSgxLCBfZml4ZXJSZXNwb25zZUNvdW50IC0gMSkuU2VsZWN0PHVsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIHVsb25nPikoayA9PiBfZml4ZXJSZXNwb25zZXNba10pKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8dWxvbmcsIGludD4pKGZyID0+IGZyLlBvcHVsYXRpb25Db3VudCgpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHJlc3BvbnNlIGluIHJlc3BvbnNlcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChXZWFrbHlGaXhhYmxlICYmIHJlc3BvbnNlLlBvcHVsYXRpb25Db3VudCgpID4gMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkQm9hcmQgPSBuZXcgU3VwZXJTbGltQm9hcmQoYm9hcmQuX3RyYWNlLCBpLCBqLCByZXNwb25zZSwgYm9hcmQuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod29uQm9hcmRzLkNvbnRhaW5zKGNoaWxkQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5JbmZvLkFkZChicmVha2VyQ2hvaWNlLCBpLCBqLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvc3NJbmZvLkFkZChicmVha2VyQ2hvaWNlLCBpLCBqLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghd2lubmluZ1N3YXBFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5JbmZvLkNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAod2lubmluZ1N3YXBBbHdheXNFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTGFzdFdpbkNoaWxkQ291bnQgPSBzd2FwcGFibGUuUG9wdWxhdGlvbkNvdW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgR2V0Rml4ZXJSZXNwb25zZXMoTGlzdDx1bG9uZz4gcG9zc2libGVNb3ZlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maXhlclJlc3BvbnNlQ291bnQgPSAxIDw8IHBvc3NpYmxlTW92ZXMuQ291bnQ7XHJcbiAgICAgICAgICAgIHZhciB0YWJsZUxlbmd0aCA9IF9maXhlclJlc3BvbnNlcy5MZW5ndGg7XHJcbiAgICAgICAgICAgIHdoaWxlICh0YWJsZUxlbmd0aCA8PSBfZml4ZXJSZXNwb25zZUNvdW50KVxyXG4gICAgICAgICAgICAgICAgdGFibGVMZW5ndGggKj0gMjtcclxuICAgICAgICAgICAgaWYgKHRhYmxlTGVuZ3RoID4gX2ZpeGVyUmVzcG9uc2VzLkxlbmd0aClcclxuICAgICAgICAgICAgICAgIF9maXhlclJlc3BvbnNlcyA9IG5ldyB1bG9uZ1t0YWJsZUxlbmd0aF07XHJcblxyXG4gICAgICAgICAgICB2YXIgc3Vic2V0ID0gMTtcclxuICAgICAgICAgICAgd2hpbGUgKHN1YnNldCA8IF9maXhlclJlc3BvbnNlQ291bnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IDBVTDtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gc3Vic2V0O1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgfD0gcG9zc2libGVNb3Zlc1tJbnQzMlVzYWdlLkdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCldO1xyXG5cclxuICAgICAgICAgICAgICAgIF9maXhlclJlc3BvbnNlc1tzdWJzZXRdID0gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICBzdWJzZXQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxMaXN0PHVsb25nPj4gR2V0QnJlYWtlckNob2ljZXModWxvbmcgc3dhcHBhYmxlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxMaXN0PHVsb25nPj4gY2hvaWNlcztcclxuICAgICAgICAgICAgaWYgKCFfYnJlYWtlckNob2ljZXNDYWNoZS5UcnlHZXRWYWx1ZShzd2FwcGFibGUsIG91dCBjaG9pY2VzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdHMgPSBzd2FwcGFibGUuR2V0Qml0cygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpdGlvbnMgPSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkdldFBhcnRpdGlvbnMoYml0cy5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBjaG9pY2VzID0gbmV3IExpc3Q8TGlzdDx1bG9uZz4+KHBhcnRpdGlvbnMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0aXRpb24gaW4gcGFydGl0aW9ucylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hvaWNlID0gbmV3IExpc3Q8dWxvbmc+KHBhcnRpdGlvbi5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hvaWNlcy5BZGQoY2hvaWNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnQgaW4gcGFydGl0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSAwVUw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIHBhcnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4IHw9IGJpdHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2UuQWRkKHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfYnJlYWtlckNob2ljZXNDYWNoZVtzd2FwcGFibGVdID0gY2hvaWNlcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNob2ljZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRleHQuUmVndWxhckV4cHJlc3Npb25zO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVGVtcGxhdGVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IFNpemVzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGVtcGxhdGUoTGlzdDxpbnQ+IHNpemVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU2l6ZXMgPSBzaXplcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZW1wbGF0ZShzdHJpbmcgcywgR3JhcGggZylcclxuICAgICAgICB7IH1cclxuICAgICAgICAvL3B1YmxpYyBUZW1wbGF0ZShzdHJpbmcgcywgR3JhcGggZylcclxuICAgICAgICAvLyAgICA6IHRoaXMoUmVnZXguU3BsaXQocyA/PyBcIlwiLCBAXCJcXFcrXCIpLlNlbGVjdCgoeCwgdikgPT5cclxuICAgICAgICAvLyAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgdmFyIHh4ID0geC5Ub0xvd2VyKCk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgICAgaWYgKHh4LlN0YXJ0c1dpdGgoXCJkXCIpKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIHJldHVybiBnLkRlZ3JlZSh2KSArICh4Lkxlbmd0aCA+IDEgPyB4eC5TdWJzdHJpbmcoMSkuVHJ5UGFyc2VJbnQoKS5WYWx1ZSA6IDApO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgaWYgKHh4LlN0YXJ0c1dpdGgoXCJwXCIpKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIHJldHVybiBnLkRlZ3JlZSh2KSAtICh4Lkxlbmd0aCA+IDEgPyB4eC5TdWJzdHJpbmcoMSkuVHJ5UGFyc2VJbnQoKS5WYWx1ZSA6IDApO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgICAgIHJldHVybiB4eC5UcnlQYXJzZUludCgpLlZhbHVlO1xyXG4gICAgICAgIC8vICAgICAgICB9KS5Ub0xpc3QoKSlcclxuICAgICAgICAvL3tcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyhvIGFzIFRlbXBsYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhUZW1wbGF0ZSB0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCF0LkV4aXN0cygpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KFNpemVzLHQuU2l6ZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8aW50LGludD4oU2l6ZXMsU2l6ZXMuQ291bnQsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50LCBpbnQ+KSgodCwgcykgPT4gMzEgKiB0ICsgcykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW48aW50PihcIixcIiwgU2l6ZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbXBsaWNpdCBvcGVyYXRvciBUZW1wbGF0ZShzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGVtcGxhdGUocywgbnVsbCk7XHJcbiAgICAgICAgICAgIC8vcmV0dXJuIG5ldyBUZW1wbGF0ZShSZWdleC5TcGxpdChzID8/IFwiXCIsIEBcIlxcRCtcIikuU2VsZWN0KE1ldGFLbm93bGVkZ2UuVHJ5UGFyc2VJbnQpLldoZXJlKHggPT4geC5IYXNWYWx1ZSkuU2VsZWN0KHggPT4geC5WYWx1ZSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBUZW1wbGF0ZUtub3dsZWRnZVxyXG4gICAge1xyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBQb3RLbm93bGVkZ2U+IF9wb3RMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxpbnQsIFBvdEtub3dsZWRnZT4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIFRlbXBsYXRlIFRlbXBsYXRlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxCb2FyZD4gTG9zdEJvYXJkcyB7IGdldCB7IHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuUG90S25vd2xlZGdlLGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KF9wb3RMb29rdXAuVmFsdWVzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlBvdEtub3dsZWRnZSwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPj4pKHBrID0+IHBrLkxvc3RCb2FyZHMpKS5EaXN0aW5jdCgpOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIFBvdEtub3dsZWRnZSB0aGlzW2ludCBjb2xvckNvdW50XVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFBvdEtub3dsZWRnZSBwO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfcG90TG9va3VwLlRyeUdldFZhbHVlKGNvbG9yQ291bnQsIG91dCBwKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwID0gbmV3IFBvdEtub3dsZWRnZShjb2xvckNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICBfcG90TG9va3VwW2NvbG9yQ291bnRdID0gcDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRlbXBsYXRlS25vd2xlZGdlKFRlbXBsYXRlIHRlbXBsYXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFByb21vdGUoaW50IGNvbG9yQ291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzW2NvbG9yQ291bnRdLkNvcHlJbnRvKHRoaXNbY29sb3JDb3VudCArIDFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgS25vd2xlZGdlRXhpc3RzKGludCBjb2xvckNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9wb3RMb29rdXAuQ29udGFpbnNLZXkoY29sb3JDb3VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmU7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNsb3dCb2FyZCA6IElFbnVtZXJhYmxlPGxvbmc+XHJcbiAgICB7XHJcbiNpZiBERUJVR1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PHN0cmluZz4gU3RhY2tTdHJpbmdzIHsgZ2V0IHsgcmV0dXJuIFN0YWNrcy5TZWxlY3QocyA9PiBzLlRvU2V0U3RyaW5nKCkpLlRvTGlzdCgpOyB9IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFBvdFN0cmluZyB7IGdldCB7IHJldHVybiBQb3QuVG9TZXRTdHJpbmcoKTsgfSB9XHJcbiNlbmRpZlxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxsb25nPiBTdGFja3MgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgaW50IF9oYXNoQ29kZTtcclxuICAgICAgICBMaXN0PGludD4gUG90U2V0IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBMaXN0PFR1cGxlPGludCwgaW50Pj4gRGVncmVlcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgTGlzdDxpbnQ+IERlZ3JlZUNoYW5nZUluZGljZXMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBUZW1wbGF0ZSBUZW1wbGF0ZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGxvbmcgUG90IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29sb3JDb3VudCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFR1cm4gVHVybiB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE4geyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIE1vdmUgTGFzdE1vdmUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGxvbmcgdGhpc1tpbnQgeF0geyBnZXQgeyByZXR1cm4gU3RhY2tzW3hdOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIFNsb3dCb2FyZChMaXN0PGxvbmc+IHN0YWNrcywgbG9uZyBwb3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdGFja3MgPSBzdGFja3M7XHJcbiAgICAgICAgICAgIFBvdCA9IHBvdDtcclxuICAgICAgICAgICAgVHVybiA9IFR1cm4uRml4ZXI7XHJcbiAgICAgICAgICAgIE4gPSBTdGFja3MuQ291bnQ7XHJcbiAgICAgICAgICAgIFRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsaW50PihTdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50PikocyA9PiBzLlBvcHVsYXRpb25Db3VudCgpKSkuVG9MaXN0KCkpO1xyXG5cclxuICAgICAgICAgICAgUG90U2V0ID0gUG90LlRvU2V0KCk7XHJcbiAgICAgICAgICAgIENvbG9yQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oUG90U2V0KTtcclxuICAgICAgICAgICAgRGVncmVlcyA9IG5ldyBMaXN0PFR1cGxlPGludCwgaW50Pj4oKTtcclxuICAgICAgICAgICAgRGVncmVlQ2hhbmdlSW5kaWNlcyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgQ29tcHV0ZUhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIENvbXB1dGVIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSAoaW50KShOKTtcclxuICAgICAgICAgICAgVXBkYXRlSGFzaChyZWYgX2hhc2hDb2RlLCAobG9uZykoVHVybikpO1xyXG5cclxuICAgICAgICAgICAgRGVncmVlcy5DbGVhcigpO1xyXG4gICAgICAgICAgICBEZWdyZWVDaGFuZ2VJbmRpY2VzLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICBEZWdyZWVzLkFkZFJhbmdlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4+KFBvdFNldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50Pj4pKGMgPT4gbmV3IFR1cGxlPGludCwgaW50PihjLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGxvbmc+KFN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBib29sPikocyA9PiBzLklzQml0U2V0KGMpKSkpKSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBib29sPikoeCA9PiB4Lkl0ZW0yID4gMCkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGludD4pKHggPT4geC5JdGVtMikpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcmV2aW91c0RlZ3JlZSA9IC0xO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IERlZ3JlZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZ3JlZSA9IERlZ3JlZXNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgVXBkYXRlSGFzaChyZWYgX2hhc2hDb2RlLCBkZWdyZWUuSXRlbTIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkZWdyZWUuSXRlbTIgIT0gcHJldmlvdXNEZWdyZWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRGVncmVlQ2hhbmdlSW5kaWNlcy5BZGQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNEZWdyZWUgPSBkZWdyZWUuSXRlbTI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIERlZ3JlZUNoYW5nZUluZGljZXMuQWRkKERlZ3JlZXMuQ291bnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgVXBkYXRlSGFzaChyZWYgaW50IGhhc2gsIGxvbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBoYXNoID0gKGludCkoMTAwICogaGFzaCArIHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE1ha2VNb3ZlKE1vdmUgbW92ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExhc3RNb3ZlID0gbW92ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb3ZlLlN0YWNrID49IDApXHJcbiAgICAgICAgICAgICAgICBTdGFja3NbbW92ZS5TdGFja10gPSBTdGFja3NbbW92ZS5TdGFja10uRmxpcEJpdHMobW92ZS5BZGRlZCwgbW92ZS5SZW1vdmVkKTtcclxuXHJcbiAgICAgICAgICAgIFR1cm4gPSBPdGhlclR1cm4oVHVybik7XHJcblxyXG4gICAgICAgICAgICBDb21wdXRlSGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvTW92ZUNvbWJpbmF0aW9uKElFbnVtZXJhYmxlPE1vdmU+IG1vdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG1vdmUgaW4gbW92ZXMpXHJcbiAgICAgICAgICAgICAgICBTdGFja3NbbW92ZS5TdGFja10gPSBTdGFja3NbbW92ZS5TdGFja10uRmxpcEJpdHMobW92ZS5BZGRlZCwgbW92ZS5SZW1vdmVkKTtcclxuXHJcbiAgICAgICAgICAgIENvbXB1dGVIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFNsb3dCb2FyZCBDbG9uZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2xvbmUgPSBuZXcgU2xvd0JvYXJkKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGxvbmc+KFN0YWNrcyksIFBvdCk7XHJcbiAgICAgICAgICAgIGNsb25lLlR1cm4gPSBUdXJuO1xyXG4gICAgICAgICAgICBjbG9uZS5MYXN0TW92ZSA9IExhc3RNb3ZlO1xyXG4gICAgICAgICAgICBjbG9uZS5faGFzaENvZGUgPSBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgICAgICBjbG9uZS5Db21wdXRlSGFzaENvZGUoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjbG9uZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyhvYmogYXMgU2xvd0JvYXJkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhTbG93Qm9hcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKFR1cm4gIT0gb3RoZXIuVHVybilcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKE4gIT0gb3RoZXIuTilcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8bG9uZz4oU3RhY2tzLG90aGVyLlN0YWNrcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChUdXJuID09IEZpeGVyQnJlYWtlci5UdXJuLkZpeGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChMYXN0TW92ZS5TdGFjayA9PSBvdGhlci5MYXN0TW92ZS5TdGFjayAmJlxyXG4gICAgICAgICAgICAgICAgICAgKExhc3RNb3ZlLkFkZGVkID09IG90aGVyLkxhc3RNb3ZlLkFkZGVkICYmIExhc3RNb3ZlLlJlbW92ZWQgPT0gb3RoZXIuTGFzdE1vdmUuUmVtb3ZlZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIExhc3RNb3ZlLkFkZGVkID09IG90aGVyLkxhc3RNb3ZlLlJlbW92ZWQgJiYgTGFzdE1vdmUuUmVtb3ZlZCA9PSBvdGhlci5MYXN0TW92ZS5BZGRlZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRmluZFBlcm11dGF0aW9uKG90aGVyKSAhPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBGaW5kUGVybXV0YXRpb24oU2xvd0JvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4saW50PihEZWdyZWVzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikoeCA9PiB4Lkl0ZW0yKSkuU2VxdWVuY2VFcXVhbChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4saW50PihvdGhlci5EZWdyZWVzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikoeCA9PiB4Lkl0ZW0yKSkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWFwcGluZ1BhaXJzID0gbmV3IExpc3Q8VHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IERlZ3JlZUNoYW5nZUluZGljZXMuQ291bnQgLSAxOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb21haW4gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29kb21haW4gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IERlZ3JlZUNoYW5nZUluZGljZXNbaV07IGogPCBEZWdyZWVDaGFuZ2VJbmRpY2VzW2kgKyAxXTsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbi5BZGQoRGVncmVlc1tqXS5JdGVtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kb21haW4uQWRkKG90aGVyLkRlZ3JlZXNbal0uSXRlbTEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG1hcHBpbmdQYWlycy5BZGQobmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+Pihkb21haW4sIGNvZG9tYWluKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+LGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sZ2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4+KG1hcHBpbmdQYWlycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OlN5c3RlbS5MaW5xLkVudW1lcmFibGVJbnN0YW5jZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+Pj4pKG1wID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KFBlcm11dGF0aW9uLkVudW1lcmF0ZUFsbChtcC5JdGVtMi5Db3VudCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KShwID0+IG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4obXAuSXRlbTEsIHAuQXBwbHk8aW50PihtcC5JdGVtMikpKSkpKVxyXG4pXHJcbiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+LCBnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikobWFwcGluZyA9PiBGbGF0dGVuTWFwcGluZyhtYXBwaW5nKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuRmlyc3RPckRlZmF1bHQoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgYm9vbD4pKG1hcHBpbmcgPT4gU2VxdWVuY2VFcXVhbFBlcm11dGVkKG1hcHBpbmcsIG90aGVyKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IEZsYXR0ZW5NYXBwaW5nKElFbnVtZXJhYmxlPFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+Pj4gbWFwcGluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LGludD4obWFwcGluZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KSh4ID0+IHguSXRlbTEpKS5Ub0xpc3QoKSwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4saW50PihtYXBwaW5nLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKHggPT4geC5JdGVtMikpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgU2VxdWVuY2VFcXVhbFBlcm11dGVkKFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBtYXBwaW5nLCBTbG93Qm9hcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFN0YWNrcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGVybXV0ZWRTdGFjayA9IEFwcGx5TWFwcGluZyhtYXBwaW5nLCBTdGFja3NbaV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBlcm11dGVkU3RhY2sgIT0gb3RoZXIuU3RhY2tzW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFR1cm4gPT0gRml4ZXJCcmVha2VyLlR1cm4uRml4ZXIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChMYXN0TW92ZS5TdGFjayAhPSBvdGhlci5MYXN0TW92ZS5TdGFjaylcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvdXJzID0gbmV3W10geyBMYXN0TW92ZS5BZGRlZCwgTGFzdE1vdmUuUmVtb3ZlZCB9O1xyXG4gICAgICAgICAgICB2YXIgdGhlaXJzID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX285KT0+e19vOS5BZGQob3RoZXIuTGFzdE1vdmUuQWRkZWQpO19vOS5BZGQob3RoZXIuTGFzdE1vdmUuUmVtb3ZlZCk7cmV0dXJuIF9vOTt9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRXF1YWw8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEFwcGx5TWFwcGluZyhtYXBwaW5nLCBvdXJzKSksdGhlaXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBsb25nIEFwcGx5TWFwcGluZyhUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgbG9uZyBzdGFjaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcHBseU1hcHBpbmcobWFwcGluZywgc3RhY2suVG9TZXQoKSkuVG9JbnQ2NCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEFwcGx5TWFwcGluZyhUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgSUVudW1lcmFibGU8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oc2V0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYyA9PiBtYXBwaW5nLkl0ZW0yW21hcHBpbmcuSXRlbTEuSW5kZXhPZihjKV0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEFwcGx5SW52ZXJzZU1hcHBpbmcoVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IG1hcHBpbmcsIElFbnVtZXJhYmxlPGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHNldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGMgPT4gbWFwcGluZy5JdGVtMVttYXBwaW5nLkl0ZW0yLkluZGV4T2YoYyldKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFeGFjdGx5RXF1YWwoU2xvd0JvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChUdXJuICE9IG90aGVyLlR1cm4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChOICE9IG90aGVyLk4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChQb3QgIT0gb3RoZXIuUG90KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxsb25nPihTdGFja3Msb3RoZXIuU3RhY2tzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFR1cm4gPT0gRml4ZXJCcmVha2VyLlR1cm4uRml4ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKExhc3RNb3ZlLlN0YWNrID09IG90aGVyLkxhc3RNb3ZlLlN0YWNrICYmXHJcbiAgICAgICAgICAgICAgICAgICAoTGFzdE1vdmUuQWRkZWQgPT0gb3RoZXIuTGFzdE1vdmUuQWRkZWQgJiYgTGFzdE1vdmUuUmVtb3ZlZCA9PSBvdGhlci5MYXN0TW92ZS5SZW1vdmVkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgTGFzdE1vdmUuQWRkZWQgPT0gb3RoZXIuTGFzdE1vdmUuUmVtb3ZlZCAmJiBMYXN0TW92ZS5SZW1vdmVkID09IG90aGVyLkxhc3RNb3ZlLkFkZGVkKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUdXJuIE90aGVyVHVybihUdXJuIHR1cm4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gMSAtIHR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmF0b3I8bG9uZz4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3RhY2tzLkdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvciBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCJ8XCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihTdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgc3RyaW5nPikoeCA9PiB4LlRvU2V0U3RyaW5nU21hbGwoKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVG9UZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihTdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50LCBzdHJpbmc+KSgoc3RhY2ssIGkpID0+IFwiJEwodl9cIiArIChpICsgMSkgKyBcIikgPSBcIiArIHN0YWNrLlRvU2V0U3RyaW5nKCkuUmVwbGFjZShcIntcIiwgXCJcXFxce1wiKS5SZXBsYWNlKFwifVwiLCBcIlxcXFx9XCIpICsgXCIkXCIpKS5Kb2luUHJldHR5KFwiLCBcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBHZW5lcmljRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTaHVmZmxlPFQ+KHRoaXMgSUxpc3Q8VD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBybmcgPSBuZXcgUmFuZG9tKERhdGVUaW1lLk5vdy5NaWxsaXNlY29uZCk7XHJcbiAgICAgICAgICAgIGludCBuID0gbGlzdC5Db3VudDtcclxuICAgICAgICAgICAgd2hpbGUgKG4gPiAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuLS07XHJcbiAgICAgICAgICAgICAgICBpbnQgayA9IHJuZy5OZXh0KG4gKyAxKTtcclxuICAgICAgICAgICAgICAgIFQgdmFsdWUgPSBsaXN0W2tdO1xyXG4gICAgICAgICAgICAgICAgbGlzdFtrXSA9IGxpc3Rbbl07XHJcbiAgICAgICAgICAgICAgICBsaXN0W25dID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTaHVmZmxlQWxsKHRoaXMgSUxpc3Q8SUxpc3Q+IGxpc3RzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJuZyA9IG5ldyBSYW5kb20oRGF0ZVRpbWUuTm93Lk1pbGxpc2Vjb25kKTtcclxuICAgICAgICAgICAgaW50IG4gPSBsaXN0c1swXS5Db3VudDtcclxuICAgICAgICAgICAgd2hpbGUgKG4gPiAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuLS07XHJcbiAgICAgICAgICAgICAgICBpbnQgayA9IHJuZy5OZXh0KG4gKyAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbGlzdCBpbiBsaXN0cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBsaXN0W2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rba10gPSBsaXN0W25dO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rbbl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IEVuTGlzdDxUPih0aGlzIFQgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8VD4oKSwoX28xMCk9PntfbzEwLkFkZCh0KTtyZXR1cm4gX28xMDt9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBJbmRpY2VzV2hlcmU8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBzb3VyY2UsIEZ1bmM8VCwgYm9vbD4gY29uZGl0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciB0IGluIHNvdXJjZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbih0KSlcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gaTtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEZpcnN0SW5kZXg8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBzb3VyY2UsIEZ1bmM8VCwgYm9vbD4gY29uZGl0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBzb3VyY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24odCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBKb2luUHJldHR5KHRoaXMgSUVudW1lcmFibGU8c3RyaW5nPiBzb3VyY2UsIHN0cmluZyBzZXBhcmF0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PHN0cmluZz4oc291cmNlKTtcclxuICAgICAgICAgICAgaWYgKGNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgaWYgKGNvdW50ID09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxzdHJpbmc+KHNvdXJjZSk7XHJcbiAgICAgICAgICAgIGlmIChjb3VudCA9PSAyKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRWxlbWVudEF0PHN0cmluZz4oc291cmNlLDApICsgXCIgYW5kIFwiICsgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FbGVtZW50QXQ8c3RyaW5nPihzb3VyY2UsMSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oc2VwYXJhdG9yLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8c3RyaW5nPihzb3VyY2UsY291bnQgLSAxKSkgKyBcIiBhbmQgXCIgKyBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkVsZW1lbnRBdDxzdHJpbmc+KHNvdXJjZSxjb3VudCAtIDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgUmVtb3ZlQWxsPFQ+KHRoaXMgTGlzdDxUPiBsaXN0LCBGdW5jPFQsIGJvb2w+IHByZWRpY2F0ZSwgQWN0aW9uPFQ+IG9uUmVtb3ZlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmVkID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGxpc3QuQ291bnQgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShsaXN0W2ldKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBvblJlbW92ZWQobGlzdFtpXSk7XHJcbiAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5SZW1vdmVBdChpKTtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZW1vdmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXI7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JhcGhcclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgUmFuZG9tIFJORyA9IG5ldyBSYW5kb20oRGF0ZVRpbWUuTm93Lk1pbGxpc2Vjb25kKTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgQ2FjaGVIaXRzO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBOb2Rlc1Zpc2l0ZWQ7XHJcblxyXG4gICAgICAgIGJvb2xbLF0gX2FkamFjZW50O1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfbmVpZ2hib3JzO1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfY29tcGxlbWVudE5laWdoYm9ycztcclxuICAgICAgICBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX291dE5laWdoYm9ycztcclxuICAgICAgICBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX2luTmVpZ2hib3JzO1xyXG4gICAgICAgIHB1YmxpYyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX2xhdGVyTmVpZ2hib3JzO1xyXG4gICAgICAgIExpc3Q8aW50PiBfdmVydGljZXM7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF9pbmRlcGVuZGVudFNldHM7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF9tYXhpbWFsSW5kZXBlbmRlbnRTZXRzO1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfaW5kZXBlbmRlbnRUd29TZXRzO1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfaW5kZXBlbmRlbnRUaHJlZVNldHM7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF92ZXJ0ZXhTdWJzZXRzO1xyXG4gICAgICAgIExhenk8aW50PiBfZTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBOIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgRSB7IGdldCB7IHJldHVybiBfZS5WYWx1ZTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sWyxdIEFkamFjZW50IHsgZ2V0IHsgcmV0dXJuIF9hZGphY2VudDsgfSB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgdGhpc1tpbnQgeCwgaW50IHldXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2FkamFjZW50W3gsIHldOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbFssXSBEaXJlY3RlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0O1xyXG4gICAgICAgICAgICBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gVmVydGV4V2VpZ2h0IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IE5laWdoYm9ycyB7IGdldCB7IHJldHVybiBfbmVpZ2hib3JzLlZhbHVlOyB9IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IENvbXBsZW1lbnROZWlnaGJvcnMgeyBnZXQgeyByZXR1cm4gX2NvbXBsZW1lbnROZWlnaGJvcnMuVmFsdWU7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gT3V0TmVpZ2hib3JzIHsgZ2V0IHsgcmV0dXJuIF9vdXROZWlnaGJvcnMuVmFsdWU7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gSW5OZWlnaGJvcnMgeyBnZXQgeyByZXR1cm4gX2luTmVpZ2hib3JzLlZhbHVlOyB9IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IFZlcnRpY2VzIHsgZ2V0IHsgcmV0dXJuIF92ZXJ0aWNlczsgfSB9XHJcbiAgICAgICAgcHVibGljIExhenk8aW50W10+IERlZ3JlZVNlcXVlbmNlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMYXp5PGludFtdPiBJbkRlZ3JlZVNlcXVlbmNlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMYXp5PGludFtdPiBPdXREZWdyZWVTZXF1ZW5jZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGF6eTxpbnRbXT4gTm9kZUludmFyaWFudE9uZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGF6eTxpbnRbXT4gTm9kZUludmFyaWFudFR3byB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBUcmFuc2l0aXZlUGFydGl0aW9uIFRyYW5zaXRpdmVQYXJ0aXRpb24geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gRWRnZVdlaWdodHNXaXRoTXVsdGlwbGljaXR5IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBJbmRlcGVuZGVudFNldHMgeyBnZXQgeyByZXR1cm4gX2luZGVwZW5kZW50U2V0cy5WYWx1ZTsgfSB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBNYXhpbWFsSW5kZXBlbmRlbnRTZXRzIHsgZ2V0IHsgcmV0dXJuIF9tYXhpbWFsSW5kZXBlbmRlbnRTZXRzLlZhbHVlOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoIEZyb21PdXROZWlnaGJvckxpc3RzKERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IG91dE5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBOID0gb3V0TmVpZ2hib3JzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgdmFyIGVkZ2VXZWlnaHRzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXROZWlnaGJvcnNbaV0uQ29udGFpbnMoaikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgxKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvdXROZWlnaGJvcnNbal0uQ29udGFpbnMoaSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlV2VpZ2h0cy5BZGQoMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoZWRnZVdlaWdodHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoKExpc3Q8aW50PiBlZGdlV2VpZ2h0cywgTGlzdDxpbnQ+IHZlcnRleFdlaWdodCA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOID0gKGludCkoKDEgKyBNYXRoLlNxcnQoMSArIDggKiBlZGdlV2VpZ2h0cy5Db3VudCkpIC8gMik7XHJcbiAgICAgICAgICAgIFZlcnRleFdlaWdodCA9IHZlcnRleFdlaWdodDtcclxuXHJcbiAgICAgICAgICAgIF92ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgTikuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIF9hZGphY2VudCA9IG5ldyBib29sW04sIE5dO1xyXG4gICAgICAgICAgICBEaXJlY3RlZCA9IG5ldyBib29sW04sIE5dO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlZGdlV2VpZ2h0c1trXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkamFjZW50W2ksIGpdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkamFjZW50W2osIGldID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZGdlV2VpZ2h0c1trXSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RlZFtpLCBqXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZGdlV2VpZ2h0c1trXSA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RlZFtqLCBpXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoKGJvb2xbLF0gYWRqYWNlbnQsIExpc3Q8aW50PiB2ZXJ0ZXhXZWlnaHQgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2FkamFjZW50ID0gYWRqYWNlbnQ7XHJcbiAgICAgICAgICAgIE4gPSBfYWRqYWNlbnQuR2V0VXBwZXJCb3VuZCgwKSArIDE7XHJcbiAgICAgICAgICAgIFZlcnRleFdlaWdodCA9IHZlcnRleFdlaWdodDtcclxuXHJcbiAgICAgICAgICAgIF92ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgTikuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIERpcmVjdGVkID0gbmV3IGJvb2xbTiwgTl07XHJcblxyXG4gICAgICAgICAgICBJbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEluaXRpYWxpemUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2UgPSBuZXcgTGF6eTxpbnQ+KCgpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGUgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBTZXR1cE5laWdoYm9ycygpO1xyXG4gICAgICAgICAgICBJbml0aWFsaXplTGF6eUxvYWRlcnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU2V0dXBOZWlnaGJvcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX25laWdoYm9ycyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnMuQWRkKG5ldyBMaXN0PGludD4oKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzW2ldLkFkZChqKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5laWdoYm9ycztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgX2NvbXBsZW1lbnROZWlnaGJvcnMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBubiA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIG5uLkFkZChuZXcgTGlzdDxpbnQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPSBqICYmICFfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBubltpXS5BZGQoaik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5uO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIF9vdXROZWlnaGJvcnMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZWlnaGJvcnMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnMuQWRkKG5ldyBMaXN0PGludD4oKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0gJiYgRGlyZWN0ZWRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnNbaV0uQWRkKGopO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZWlnaGJvcnM7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgX2luTmVpZ2hib3JzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzLkFkZChuZXcgTGlzdDxpbnQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdICYmIERpcmVjdGVkW2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzW2pdLkFkZChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmVpZ2hib3JzO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIF9sYXRlck5laWdoYm9ycyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGF0ZXIgPSBuZXcgTGlzdDxMaXN0PGludD4+KE5laWdoYm9ycy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhdGVyLkFkZChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGludD4oTmVpZ2hib3JzW2ldLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKG4gPT4gbiA+IGkpKS5Ub0xpc3QoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXRlcjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgVHJhbnNpdGl2ZVBhcnRpdGlvbiA9IG5ldyBUcmFuc2l0aXZlUGFydGl0aW9uKF92ZXJ0aWNlcyk7XHJcblxyXG4gICAgICAgICAgICBEZWdyZWVTZXF1ZW5jZSA9IG5ldyBMYXp5PGludFtdPigoKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNbdl0gPSBEZWdyZWUodik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBJbkRlZ3JlZVNlcXVlbmNlID0gbmV3IExhenk8aW50W10+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICBzW3ZdID0gSW5EZWdyZWUodik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgT3V0RGVncmVlU2VxdWVuY2UgPSBuZXcgTGF6eTxpbnRbXT4oKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBuZXcgaW50W05dO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIHNbdl0gPSBPdXREZWdyZWUodik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgTm9kZUludmFyaWFudE9uZSA9IG5ldyBMYXp5PGludFtdPigoKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3AgPSBuZXcgaW50W05dO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgc1t2XSA9IERlZ3JlZVNlcXVlbmNlLlZhbHVlW3ZdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgayA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBrOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwW3ZdID0gKGludCkoKHNbdl0gPDwgMTMgfCBzW3ZdID4+IDE5KSBeIDB4ZmYwMGZmMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gTmVpZ2hib3JzW3ZdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwW3ZdICs9IHNbd107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNbdl0gPSBzcFt2XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBOb2RlSW52YXJpYW50VHdvID0gbmV3IExhenk8aW50W10+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzW3ZdID0gRGVncmVlU2VxdWVuY2UuVmFsdWVbdl07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIE5laWdoYm9yc1t2XSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNbdl0gKz0gMyAqIERlZ3JlZVNlcXVlbmNlLlZhbHVlW3ddO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHogaW4gTmVpZ2hib3JzW3ddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeiAhPSB2KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNbdl0gKz0gNyAqIERlZ3JlZVNlcXVlbmNlLlZhbHVlW3pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdm9pZCBJbml0aWFsaXplTGF6eUxvYWRlcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2luZGVwZW5kZW50U2V0cyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEluZGVwZW5kZW50U2V0c0luU3ViZ3JhcGgoMCkpLCB0cnVlKTtcclxuICAgICAgICAgICAgX2luZGVwZW5kZW50VHdvU2V0cyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX2luZGVwZW5kZW50U2V0cy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNldCA9PiBzZXQuQ291bnQgPT0gMikpLlRvTGlzdCgpLCB0cnVlKTtcclxuICAgICAgICAgICAgX2luZGVwZW5kZW50VGhyZWVTZXRzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfaW5kZXBlbmRlbnRTZXRzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc2V0ID0+IHNldC5Db3VudCA9PSAzKSkuVG9MaXN0KCksIHRydWUpO1xyXG4gICAgICAgICAgICBfdmVydGV4U3Vic2V0cyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT4gTGlzdFV0aWxpdHkuR2VuZXJhdGVTdWJsaXN0czxpbnQ+KF92ZXJ0aWNlcykpO1xyXG4gICAgICAgICAgICBfbWF4aW1hbEluZGVwZW5kZW50U2V0cyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT4gTGlzdFV0aWxpdHkuTWF4aW1hbEVsZW1lbnRzPGludD4oX2luZGVwZW5kZW50U2V0cy5WYWx1ZSksIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBFcXVhbGl0eSBhbmQgSXNvbW9ycGhpc21cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcIiBcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LHN0cmluZz4oR2V0RWRnZVdlaWdodHMoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIHN0cmluZz4pKHggPT4geC5Ub1N0cmluZygpKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBUb1N0cmluZygpLkdldEhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIEggPSBvYmogYXMgR3JhcGg7XHJcbiAgICAgICAgICAgIGlmIChIID09IG51bGwpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChOICE9IEguTikgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoRSAhPSBILkUpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0gIT0gSFtpLCBqXSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgPT0oR3JhcGggQSwgR3JhcGggQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAob2JqZWN0KUEgPT0gbnVsbCAmJiAob2JqZWN0KUIgPT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgICAgICAgKG9iamVjdClBICE9IG51bGwgJiYgKG9iamVjdClCICE9IG51bGwgJiYgQS5FcXVhbHMoQik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShHcmFwaCBBLCBHcmFwaCBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICEoQSA9PSBCKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIFBlcm11dGVWZXJ0aWNlcyhQZXJtdXRhdGlvbiBwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gbmV3IGJvb2xbTiwgTl07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGFkamFjZW50W3BbaV0sIHBbal1dID0gX2FkamFjZW50W2ksIGpdO1xyXG5cclxuICAgICAgICAgICAgTGlzdDxpbnQ+IHZlcnRleFdlaWdodCA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChWZXJ0ZXhXZWlnaHQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0ID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBwID0gcC5JbnZlcnNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleFdlaWdodC5BZGQoVmVydGV4V2VpZ2h0W3BwW3ZdXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoYWRqYWNlbnQsIHZlcnRleFdlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBNYXliZUlzb21vcnBoaWMoR3JhcGggQSwgR3JhcGggQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBLk4gIT0gQi5OKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChBLkUgIT0gQi5FKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBBLlRyYW5zaXRpdmVQYXJ0aXRpb24uUmVmaW5lKEEuRGVncmVlU2VxdWVuY2UuVmFsdWUsIDEpO1xyXG4gICAgICAgICAgICBCLlRyYW5zaXRpdmVQYXJ0aXRpb24uUmVmaW5lKEIuRGVncmVlU2VxdWVuY2UuVmFsdWUsIDEpO1xyXG5cclxuICAgICAgICAgICAgQS5UcmFuc2l0aXZlUGFydGl0aW9uLlJlZmluZShBLk5vZGVJbnZhcmlhbnRPbmUuVmFsdWUsIDIpO1xyXG4gICAgICAgICAgICBCLlRyYW5zaXRpdmVQYXJ0aXRpb24uUmVmaW5lKEIuTm9kZUludmFyaWFudE9uZS5WYWx1ZSwgMik7XHJcblxyXG4gICAgICAgICAgICBBLlRyYW5zaXRpdmVQYXJ0aXRpb24uUmVmaW5lKEEuTm9kZUludmFyaWFudFR3by5WYWx1ZSwgMyk7XHJcbiAgICAgICAgICAgIEIuVHJhbnNpdGl2ZVBhcnRpdGlvbi5SZWZpbmUoQi5Ob2RlSW52YXJpYW50VHdvLlZhbHVlLCAzKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghQS5UcmFuc2l0aXZlUGFydGl0aW9uLkVxdWFscyhCLlRyYW5zaXRpdmVQYXJ0aXRpb24pKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc29tb3JwaGljKEdyYXBoIEEsIEdyYXBoIEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIU1heWJlSXNvbW9ycGhpYyhBLCBCKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBBLkNvbnRhaW5zKEIsIGluZHVjZWQ6IHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgY2xhc3MgSXNvbW9ycGhpc21Db21wYXJlciA6IElFcXVhbGl0eUNvbXBhcmVyPEdyYXBoPlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKEdyYXBoIHgsIEdyYXBoIHkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBHcmFwaC5Jc29tb3JwaGljKHgsIHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgR2V0SGFzaENvZGUoR3JhcGggZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKEdyYXBoIEEsIGJvb2wgaW5kdWNlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250YWlucyhBLCBpbmR1Y2VkLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgaW50LCBpbnQsIGJvb2w+KSgoXywgX18sIF9fXywgX19fXykgPT4gdHJ1ZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnMoR3JhcGggQSwgYm9vbCBpbmR1Y2VkLCBGdW5jPEdyYXBoLCBHcmFwaCwgaW50LCBpbnQsIGJvb2w+IGNvbmRpdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChOIDwgQS5OKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGF1ID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICByZXR1cm4gQ29udGFpbnMoQSwgaW5kdWNlZCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGludCwgaW50LCBib29sPiljb25kaXRpb24sIG5ldyBpbnRbQS5OXSwgdGF1LCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQ29udGFpbnMoR3JhcGggQSwgYm9vbCBpbmR1Y2VkLCBGdW5jPEdyYXBoLCBHcmFwaCwgaW50LCBpbnQsIGJvb2w+IGNvbmRpdGlvbiwgaW50W10gdGF1LCBMaXN0PGludD4gcGxhY2VkLCBpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2ID09IEEuTilcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGltYWdlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHBsYWNlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHUgPT4gdGF1W3VdKSkuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodCA9PiB0KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciByZXF1aXJlZE5laWdoYm9ycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KEEuTmVpZ2hib3JzW3ZdLkludGVyc2VjdGlvblNvcnRlZChwbGFjZWQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodSA9PiB0YXVbdV0pKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh0ID0+IHQpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxpbnQ+KFZlcnRpY2VzLGltYWdlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh3ID0+IEEuRGVncmVlKHYpIDw9IERlZ3JlZSh3KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodyA9PiBpbmR1Y2VkID8gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4ocmVxdWlyZWROZWlnaGJvcnMsQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbjxpbnQ+KE5laWdoYm9yc1t3XSxpbWFnZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJlcXVpcmVkTmVpZ2hib3JzLlN1YnNldEVxdWFsU29ydGVkKE5laWdoYm9yc1t3XSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHcgPT4gY29uZGl0aW9uKHRoaXMsIEEsIHcsIHYpKSk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY2FuZGlkYXRlIGluIGNhbmRpZGF0ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRhdVt2XSA9IGNhbmRpZGF0ZTtcclxuICAgICAgICAgICAgICAgIHBsYWNlZC5BZGQodik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKENvbnRhaW5zKEEsIGluZHVjZWQsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgZ2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBpbnQsIGludCwgYm9vbD4pY29uZGl0aW9uLCB0YXUsIHBsYWNlZCwgdiArIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHBsYWNlZC5SZW1vdmVBdChwbGFjZWQuQ291bnQgLSAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnNJbmR1Y2VkKEdyYXBoIEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29udGFpbnMoQSwgaW5kdWNlZDogdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWluc0luZHVjZWRPbGQoR3JhcGggQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChOIDwgQS5OKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmVydGV4U2V0cyA9IF92ZXJ0ZXhTdWJzZXRzLlZhbHVlO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHZlcnRpY2VzIGluIHZlcnRleFNldHMpXHJcbiAgICAgICAgICAgICAgICBpZiAoR3JhcGguSXNvbW9ycGhpYyhJbmR1Y2VkU3ViZ3JhcGgodmVydGljZXMpLCBBKSkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxMaXN0PGludD4+IEVudW1lcmF0ZUNvbm5lY3RlZE9yZGVyaW5ncyhMaXN0PGludD4gaW5pdGlhbFZlcnRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxpbnQ+KFZlcnRpY2VzLGluaXRpYWxWZXJ0aWNlcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChEZWdyZWVJblN1YmdyYXBoKHYsIGluaXRpYWxWZXJ0aWNlcykgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxWZXJ0aWNlcy5BZGQodik7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG9yZGVyaW5nIGluIEVudW1lcmF0ZUNvbm5lY3RlZE9yZGVyaW5ncyhpbml0aWFsVmVydGljZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihvcmRlcmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZlcnRpY2VzLlJlbW92ZUF0KGluaXRpYWxWZXJ0aWNlcy5Db3VudCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZG9uZSlcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBpbml0aWFsVmVydGljZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1NwYW5uaW5nU3ViZ3JhcGhPZihHcmFwaCBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKE4gIT0gQS5OKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdICYmICFBW2ksIGpdKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIEV4cG9ydFxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gR2V0RWRnZVdlaWdodHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVkZ2VXZWlnaHRzKG5ldyBpbnRbXSB7IH0sIG5ldyBUdXBsZTxpbnQsIGludD5bXSB7IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoIEluZHVjZWRTdWJncmFwaChMaXN0PGludD4gc3ViZ3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PGludD4gdmVydGV4V2VpZ2h0ID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKFZlcnRleFdlaWdodCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHQgPSBuZXcgTGlzdDxpbnQ+KHN1YmdyYXBoLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHN1YmdyYXBoKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleFdlaWdodC5BZGQoVmVydGV4V2VpZ2h0W3ZdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChHZXRFZGdlV2VpZ2h0cyhzdWJncmFwaCksIHZlcnRleFdlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gR2V0RWRnZVdlaWdodHMoTGlzdDxpbnQ+IHN1YmdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG4gPSBzdWJncmFwaC5Db3VudDtcclxuICAgICAgICAgICAgdmFyIHcgPSBuZXcgTGlzdDxpbnQ+KG4pO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHcuQWRkKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W3N1YmdyYXBoW2ldLCBzdWJncmFwaFtqXV0gfHwgX2FkamFjZW50W3N1YmdyYXBoW2pdLCBzdWJncmFwaFtpXV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdba10gPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBHZXRFZGdlV2VpZ2h0cyhib29sWyxdIGFkamFjZW50LCBib29sWyxdIGRpcmVjdGVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVkZ2VXZWlnaHRzKGFkamFjZW50LCBkaXJlY3RlZCwgbmV3IGludFtdIHsgfSwgbmV3IFR1cGxlPGludCwgaW50PltdIHsgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PGludD4gR2V0RWRnZVdlaWdodHMoSUVudW1lcmFibGU8aW50PiByZW1vdmVkVmVydGljZXMsIElFbnVtZXJhYmxlPFR1cGxlPGludCwgaW50Pj4gcmVtb3ZlZEVkZ2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVkZ2VXZWlnaHRzKF9hZGphY2VudCwgRGlyZWN0ZWQsIHJlbW92ZWRWZXJ0aWNlcywgcmVtb3ZlZEVkZ2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8aW50PiBHZXRFZGdlV2VpZ2h0cyhib29sWyxdIGFkamFjZW50LCBib29sWyxdIGRpcmVjdGVkLCBJRW51bWVyYWJsZTxpbnQ+IHJlbW92ZWRWZXJ0aWNlcywgSUVudW1lcmFibGU8VHVwbGU8aW50LCBpbnQ+PiByZW1vdmVkRWRnZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3LkFkZCgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxpbnQ+KHJlbW92ZWRWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IHYgPT0gaSB8fCB2ID09IGopKSAmJiAhU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+PihyZW1vdmVkRWRnZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBib29sPikoZSA9PiBlLkl0ZW0xID09IGkgJiYgZS5JdGVtMiA9PSBqIHx8IGUuSXRlbTEgPT0gaiAmJiBlLkl0ZW0yID09IGkpKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGphY2VudFtpLCBqXSB8fCBhZGphY2VudFtqLCBpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd1trXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0ZWRbaiwgaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd1trXSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IExpc3Q8c3RyaW5nPiBEb3RDb2xvcnMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8c3RyaW5nPigpLChfbzExKT0+e19vMTEuQWRkKFwiY2FkZXRibHVlXCIpO19vMTEuQWRkKFwiYnJvd25cIik7X28xMS5BZGQoXCJkb2RnZXJibHVlXCIpO19vMTEuQWRkKFwidHVycXVvaXNlXCIpO19vMTEuQWRkKFwib3JjaGlkXCIpO19vMTEuQWRkKFwiYmx1ZVwiKTtfbzExLkFkZChcInJlZFwiKTtfbzExLkFkZChcImdyZWVuXCIpO19vMTEuQWRkKFwieWVsbG93XCIpO19vMTEuQWRkKFwiY3lhblwiKTtfbzExLkFkZChcImxpbWVncmVlblwiKTtfbzExLkFkZChcInBpbmtcIik7X28xMS5BZGQoXCJvcmFuZ2VcIik7X28xMS5BZGQoXCJnb2xkZW5yb2RcIik7X28xMS5BZGQoXCJhcXVhbWFyaW5lXCIpO19vMTEuQWRkKFwiYmxhY2tcIik7cmV0dXJuIF9vMTE7fSk7XHJcblxyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBMaXN0PHN0cmluZz4gVGlrekNvbG9ycyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxzdHJpbmc+KCksKF9vMTIpPT57X28xMi5BZGQoXCJibHVlXCIpO19vMTIuQWRkKFwicmVkXCIpO19vMTIuQWRkKFwiZ3JlZW5cIik7X28xMi5BZGQoXCJPcmNoaWRcIik7X28xMi5BZGQoXCJ5ZWxsb3dcIik7X28xMi5BZGQoXCJjeWFuXCIpO19vMTIuQWRkKFwiVHVycXVvaXNlXCIpO19vMTIuQWRkKFwiQ2FkZXRCbHVlXCIpO19vMTIuQWRkKFwiTGltZUdyZWVuXCIpO19vMTIuQWRkKFwiYnJvd25cIik7X28xMi5BZGQoXCJwaW5rXCIpO19vMTIuQWRkKFwib3JhbmdlXCIpO19vMTIuQWRkKFwiQ2VydWxlYW5cIik7X28xMi5BZGQoXCJHb2xkZW5yb2RcIik7X28xMi5BZGQoXCJBcXVhbWFyaW5lXCIpO19vMTIuQWRkKFwiYmxhY2tcIik7cmV0dXJuIF9vMTI7fSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVG9Eb3RXaXRoRmFjdG9ycyhib29sIGxhYmVsRWRnZXMgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZmFjdG9ycyA9IEZhY3RvcigpO1xyXG4gICAgICAgICAgICB2YXIgY29sb3JSYW5nZXMgPSBuZXcgTGlzdDxJRW51bWVyYWJsZTxpbnQ+PigpO1xyXG4gICAgICAgICAgICBpbnQgbGFzdCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBHID0gR3JhcGhzLkVtcHR5O1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZmFjdG9yIGluIGZhY3RvcnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbG9yUmFuZ2VzLkFkZChFbnVtZXJhYmxlLlJhbmdlKGxhc3QsIGZhY3Rvci5OKSk7XHJcbiAgICAgICAgICAgICAgICBsYXN0ICs9IGZhY3Rvci5OO1xyXG5cclxuICAgICAgICAgICAgICAgIEcgKj0gZmFjdG9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiZ3JhcGggRyB7XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwib3ZlcmxhcCA9IGZhbHNlO1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcInNwbGluZXM9dHJ1ZTtcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJzZXA9MC4zO1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIm5vZGVbZm9udHNpemU9MjAsIHN0eWxlPWJvbGQsIGNvbG9yPWJsYWNrOyBzaGFwZT1jaXJjbGUsIHBlbndpZHRoPTFdO1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcImVkZ2Vbc3R5bGU9Ym9sZCwgY29sb3I9YmxhY2ssIHBlbndpZHRoPTJdO1wiKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAoaW50IHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgY29sb3JJbmRleCA9IGNvbG9yUmFuZ2VzLlNlbGVjdCgociwgaSkgPT4gbmV3IHsgcmFuZ2UgPSByLCBpbmRleCA9IGkgfSkuRmlyc3QocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPGludD4ocC5yYW5nZSx2KSkuaW5kZXggJSBEb3RDb2xvcnMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSB2LlRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKHN0cmluZy5Gb3JtYXQoQFwiezB9IFtsYWJlbCA9IFwiXCJ7Mn1cIlwiLCBzdHlsZSA9IGZpbGxlZCwgZmlsbGNvbG9yID0gXCJcInsxfVwiXCJdO1wiLCB2LCBEb3RDb2xvcnNbY29sb3JJbmRleF0sIGxhYmVsKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEcuX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsRWRnZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKHN0cmluZy5Gb3JtYXQoQFwiezB9IC0tIHsxfSBbbGFiZWwgPSBcIlwiezJ9XCJcIl1cIiwgaSwgaiwgaykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKHN0cmluZy5Gb3JtYXQoXCJ7MH0gLS0gezF9XCIsIGksIGopKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJ9XCIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNiLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRvRG90Rm9yVGlreigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZhY3RvcnMgPSBGYWN0b3IoKTtcclxuICAgICAgICAgICAgdmFyIGNvbG9yUmFuZ2VzID0gbmV3IExpc3Q8SUVudW1lcmFibGU8aW50Pj4oKTtcclxuICAgICAgICAgICAgaW50IGxhc3QgPSAwO1xyXG4gICAgICAgICAgICB2YXIgRyA9IEdyYXBocy5FbXB0eTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGZhY3RvciBpbiBmYWN0b3JzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb2xvclJhbmdlcy5BZGQoRW51bWVyYWJsZS5SYW5nZShsYXN0LCBmYWN0b3IuTikpO1xyXG4gICAgICAgICAgICAgICAgbGFzdCArPSBmYWN0b3IuTjtcclxuXHJcbiAgICAgICAgICAgICAgICBHICo9IGZhY3RvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcImdyYXBoIEcge1wiKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAoaW50IHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgY29sb3JJbmRleCA9IGNvbG9yUmFuZ2VzLlNlbGVjdCgociwgaSkgPT4gbmV3IHsgcmFuZ2UgPSByLCBpbmRleCA9IGkgfSkuRmlyc3QocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPGludD4ocC5yYW5nZSx2KSkuaW5kZXggJSBUaWt6Q29sb3JzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShzdHJpbmcuRm9ybWF0KEBcInswfSBbbGFiZWwgPSBcIlwiXCJcIiwgc3R5bGUgPSBcIlwiZHJhdywgY2lyY2xlLCBmaWxsPXsxfVwiXCJdO1wiLCB2LCBUaWt6Q29sb3JzW2NvbG9ySW5kZXhdKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChHLl9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShzdHJpbmcuRm9ybWF0KFwiezB9IC0tIHsxfVwiLCBpLCBqKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJ9XCIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNiLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBPcGVyYXRpb25zXHJcbiAgICAgICAgYm9vbCBJc1Byb3BlckZhY3RvcihMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN1YnNldC5Db3VudCA8PSAwKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHN1YnNldC5Db3VudCA+PSBOKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzdCA9IExpc3RVdGlsaXR5LkRpZmZlcmVuY2U8aW50PihfdmVydGljZXMsIHN1YnNldCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcGFpcnMgPSBmcm9tIGkgaW4gc3Vic2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gaiBpbiByZXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdCBuZXcgVHVwbGU8aW50LCBpbnQ+KGksIGopO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhaXIgaW4gcGFpcnMpXHJcbiAgICAgICAgICAgICAgICBpZiAoIV9hZGphY2VudFtwYWlyLkl0ZW0xLCBwYWlyLkl0ZW0yXSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxHcmFwaD4gRmFjdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJGYWN0b3JzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX3ZlcnRleFN1YnNldHMuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KSh2ZXJ0aWNlcyA9PiBJc1Byb3BlckZhY3Rvcih2ZXJ0aWNlcykpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIG1heGltYWxGYWN0b3IgPSBMaXN0VXRpbGl0eS5NYXhpbWFsRWxlbWVudHM8aW50Pihwcm9wZXJGYWN0b3JzKVswXTtcclxuICAgICAgICAgICAgaWYgKG1heGltYWxGYWN0b3IuQ291bnQgPD0gMCkgcmV0dXJuIEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxHcmFwaD4oKSwoX28xMyk9PntfbzEzLkFkZChDbG9uZSgpKTtyZXR1cm4gX28xMzt9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXN0ID0gTGlzdFV0aWxpdHkuRGlmZmVyZW5jZTxpbnQ+KF92ZXJ0aWNlcywgbWF4aW1hbEZhY3Rvcik7XHJcbiAgICAgICAgICAgIHZhciBtYXhGYWN0b3IgPSBJbmR1Y2VkU3ViZ3JhcGgobWF4aW1hbEZhY3Rvcik7XHJcbiAgICAgICAgICAgIHZhciByZXN0R3JhcGggPSBJbmR1Y2VkU3ViZ3JhcGgocmVzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbmNhdDxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGg+KG1heEZhY3Rvci5GYWN0b3IoKSxyZXN0R3JhcGguRmFjdG9yKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggQ2xvbmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChHZXRFZGdlV2VpZ2h0cygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIENvbXBsZW1lbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gbmV3IGJvb2xbTiwgTl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gaikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbaSwgal0gPSAhX2FkamFjZW50W2ksIGpdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChhZGphY2VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBSZW1vdmVWZXJ0ZXgoaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc3ViZ3JhcGggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KFZlcnRpY2VzKTtcclxuICAgICAgICAgICAgc3ViZ3JhcGguUmVtb3ZlKHYpO1xyXG4gICAgICAgICAgICByZXR1cm4gSW5kdWNlZFN1YmdyYXBoKHN1YmdyYXBoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIFJlbW92ZUVkZ2UoVHVwbGU8aW50LCBpbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKEdldEVkZ2VXZWlnaHRzKG5ldyBpbnRbXSB7IH0sIG5ldyBUdXBsZTxpbnQsIGludD5bXSB7IGUgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggUmVtb3ZlRWRnZShpbnQgdjEsIGludCB2MilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZW1vdmVFZGdlKG5ldyBUdXBsZTxpbnQsIGludD4odjEsIHYyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBBZGRFZGdlKGludCB2MSwgaW50IHYyLCBib29sIGRpcmVjdGVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBDbG9uZSgpO1xyXG4gICAgICAgICAgICBnLl9hZGphY2VudFt2MSwgdjJdID0gZy5fYWRqYWNlbnRbdjIsIHYxXSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChkaXJlY3RlZClcclxuICAgICAgICAgICAgICAgIGcuRGlyZWN0ZWRbdjEsIHYyXSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKGcuR2V0RWRnZVdlaWdodHMoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFR1cGxlPGludCwgaW50PiBHZXRBcmJpdHJhcnlFZGdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHVwbGU8aW50LCBpbnQ+KGksIGopO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIExpc3Q8VHVwbGU8aW50LCBpbnQ+PiBHZXRFZGdlVHVwbGVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0dXBsZXMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERpcmVjdGVkW2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGVzLkFkZChuZXcgVHVwbGU8aW50LCBpbnQ+KGksIGopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGVzLkFkZChuZXcgVHVwbGU8aW50LCBpbnQ+KGosIGkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHVwbGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggRGlzam9pbnRVbmlvbihHcmFwaCBIKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IG4gPSBOICsgSC5OO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gbmV3IGJvb2xbbiwgbl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbaSwgal0gPSBfYWRqYWNlbnRbaSwgal07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEguTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBILk47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBhZGphY2VudFtOICsgaSwgTiArIGpdID0gSFtpLCBqXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoYWRqYWNlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggSm9pbihHcmFwaCBIKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIEcgPSBEaXNqb2ludFVuaW9uKEgpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IEguTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEcuX2FkamFjZW50W2ksIE4gKyBqXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgRy5fYWRqYWNlbnRbTiArIGosIGldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEcuSW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gRztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEFkZEVkZ2UoaW50IHgsIGludCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIEcgPSBDbG9uZSgpO1xyXG4gICAgICAgICAgICBHLl9hZGphY2VudFt4LCB5XSA9IHRydWU7XHJcbiAgICAgICAgICAgIEcuX2FkamFjZW50W3ksIHhdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIEcuSW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gRztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEF0dGFjaE5ld1ZlcnRleChwYXJhbXMgaW50W10gbmVpZ2hib3JzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEF0dGFjaE5ld1ZlcnRleCgoSUxpc3Q8aW50PiluZWlnaGJvcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggQXR0YWNoTmV3VmVydGV4KElMaXN0PGludD4gbmVpZ2hib3JzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gbmV3IGJvb2xbTiArIDEsIE4gKyAxXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbaSwgal0gPSBfYWRqYWNlbnRbaSwgal07XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbmVpZ2hib3IgaW4gbmVpZ2hib3JzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhZGphY2VudFtOLCBuZWlnaGJvcl0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYWRqYWNlbnRbbmVpZ2hib3IsIE5dID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChhZGphY2VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggb3BlcmF0b3IgKyhHcmFwaCBBLCBHcmFwaCBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuRGlzam9pbnRVbmlvbihCKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBvcGVyYXRvciAqKEdyYXBoIEEsIEdyYXBoIEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5Kb2luKEIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIG9wZXJhdG9yICooaW50IGssIEdyYXBoIEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgRyA9IEEuQ2xvbmUoKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBrOyBpKyspXHJcbiAgICAgICAgICAgICAgICBHICs9IEE7XHJcblxyXG4gICAgICAgICAgICBHLkluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIEc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGggU3F1YXJlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gQ2xvbmUoKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYWlyIGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oTmVpZ2hib3JzW3ZdLE5laWdoYm9yc1t2XSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhaXIuSXRlbTEgIT0gcGFpci5JdGVtMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZy5fYWRqYWNlbnRbcGFpci5JdGVtMSwgcGFpci5JdGVtMl0gPSBnLl9hZGphY2VudFtwYWlyLkl0ZW0yLCBwYWlyLkl0ZW0xXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnLkNsb25lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBFZGdlc1xyXG4gICAgICAgIHB1YmxpYyBpbnQgU2l6ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHQgKz0gT3V0RGVncmVlKGkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWF4RGVncmVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IG1heCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBtYXggPSBNYXRoLk1heChtYXgsIERlZ3JlZShpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IE1pbkRlZ3JlZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBtaW4gPSBpbnQuTWF4VmFsdWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBNYXRoLk1pbihtaW4sIERlZ3JlZShpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1pbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IE1heE91dERlZ3JlZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBtYXggPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5NYXgobWF4LCBPdXREZWdyZWUoaSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBNYXhJbkRlZ3JlZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBtYXggPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5NYXgobWF4LCBJbkRlZ3JlZShpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNSZWd1bGFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChOIDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oTmVpZ2hib3JzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikobiA9PiBuLkNvdW50ID09IE5laWdoYm9yc1swXS5Db3VudCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBEZWdyZWUoaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTmVpZ2hib3JzW3ZdLkNvdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IE91dERlZ3JlZShpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBPdXROZWlnaGJvcnNbdl0uQ291bnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5EZWdyZWUoaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSW5OZWlnaGJvcnNbdl0uQ291bnQ7ICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVncmVlSW5TdWJncmFwaChpbnQgdiwgTGlzdDxpbnQ+IHN1YmdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5LkludGVyc2VjdGlvbkNvdW50U29ydGVkKE5laWdoYm9yc1t2XSwgc3ViZ3JhcGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBOZWlnaGJvcnNJblN1YmdyYXBoKGludCB2LCBMaXN0PGludD4gc3ViZ3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uU29ydGVkKE5laWdoYm9yc1t2XSwgc3ViZ3JhcGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBTdW1PdmVyU3ViZ3JhcGhOZWlnaGJvcnMoaW50IHYsIExpc3Q8aW50PiBzdWJncmFwaCwgaW50W10gZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxpbnQ+KExpc3RVdGlsaXR5LkludGVyc2VjdGlvblNvcnRlZChOZWlnaGJvcnNbdl0sIHN1YmdyYXBoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHcgPT4gZ1t3XSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZ1bmM8aW50LCBpbnQ+IEdldERlZ3JlZU1pbnVzS0Z1bmMoaW50IGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdiA9PiBEZWdyZWUodikgLSBrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBFZGdlc09uKExpc3Q8aW50PiBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGVkZ2VzID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBBLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBBLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtBW2ldLCBBW2pdXSkgZWRnZXMrKztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlZGdlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gRWRnZUluZGljZXNPbihMaXN0PGludD4gQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlZGdlSW5kaWNlcyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEEuQ29udGFpbnMoaSkgJiYgQS5Db250YWlucyhqKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VJbmRpY2VzLkFkZChrKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlZGdlSW5kaWNlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBFZGdlc0JldHdlZW4oTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbiA9IExpc3RVdGlsaXR5LkludGVyc2VjdGlvbjxpbnQ+KEEsIEIpO1xyXG4gICAgICAgICAgICBBID0gTGlzdFV0aWxpdHkuRGlmZmVyZW5jZTxpbnQ+KEEsIEIpO1xyXG5cclxuICAgICAgICAgICAgaW50IGVkZ2VzID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBBLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IEIuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W0FbaV0sIEJbal1dKSBlZGdlcysrO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVkZ2VzICsgRWRnZXNPbihpbnRlcnNlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gSW5kZXBlbmRlbnQgc2V0c1xyXG4gICAgIFxyXG4gICAgICAgIElFbnVtZXJhYmxlPExpc3Q8aW50Pj4gSW5kZXBlbmRlbnRTZXRzSW5TdWJncmFwaChpbnQgZmlyc3RWZXJ0ZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZmlyc3RWZXJ0ZXggPj0gTikgcmV0dXJuIEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxMaXN0PGludD4+KCksKF9vMTQpPT57X28xNC5BZGQobmV3IExpc3Q8aW50PigpKTtyZXR1cm4gX28xNDt9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdWJncmFwaFNldHMgPSBJbmRlcGVuZGVudFNldHNJblN1YmdyYXBoKGZpcnN0VmVydGV4ICsgMSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5VbmlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oc3ViZ3JhcGhTZXRzLFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHN1YmdyYXBoU2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNldCA9PiBJc0luZGVwZW5kZW50T2YoZmlyc3RWZXJ0ZXgsIHNldCkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pikoc2V0ID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJpZ2dlciA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vMTUpPT57X28xNS5BZGQoZmlyc3RWZXJ0ZXgpO3JldHVybiBfbzE1O30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpZ2dlci5BZGRSYW5nZShzZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiaWdnZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBib29sIElzSW5kZXBlbmRlbnRPZihpbnQgdiwgTGlzdDxpbnQ+IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIHNldCkgaWYgKHcgPT0gdiB8fCBfYWRqYWNlbnRbdywgdl0pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0NsaXF1ZShMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdWJzZXQuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IHN1YnNldC5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghX2FkamFjZW50W3N1YnNldFtpXSwgc3Vic2V0W2pdXSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzSW5kZXBlbmRlbnQoTGlzdDxpbnQ+IHN1YnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3Vic2V0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBzdWJzZXQuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W3N1YnNldFtpXSwgc3Vic2V0W2pdXSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ29tcGxldGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIElzQ2xpcXVlKF92ZXJ0aWNlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ2xpcXVlTnVtYmVyQXRMZWFzdChpbnQgaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChrID4gX3ZlcnRpY2VzLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4oX3ZlcnRpY2VzLCBrKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKElzQ2xpcXVlKHNldCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5kZXBlbmRlbmNlTnVtYmVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJbmRlcGVuZGVuY2VOdW1iZXIoVmVydGljZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IEluZGVwZW5kZW5jZU51bWJlcihJRW51bWVyYWJsZTxpbnQ+IHN1YmdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWF4PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfaW5kZXBlbmRlbnRTZXRzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShJID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudDxpbnQ+KEksc3ViZ3JhcGgpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gTWF4aW11bUluZGVwZW5kZW50U3Vic2V0KElFbnVtZXJhYmxlPGludD4gc3ViZ3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IEluZGVwZW5kZW5jZU51bWJlcihzdWJncmFwaCk7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfaW5kZXBlbmRlbnRTZXRzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoSSA9PiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uQ291bnQ8aW50PihJLHN1YmdyYXBoKSA9PSBpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8TGlzdDxpbnQ+PiBFbnVtZXJhdGVNYXhpbWFsSW5kZXBlbmRlbnRTZXRzKExpc3Q8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlQnJvbktlcmJvc2NoKHNldCwgbmV3IExpc3Q8aW50PigpLCBuZXcgTGlzdDxpbnQ+KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPExpc3Q8aW50Pj4gRW51bWVyYXRlTWF4aW1hbEluZGVwZW5kZW50U2V0cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlQnJvbktlcmJvc2NoKFZlcnRpY2VzLCBuZXcgTGlzdDxpbnQ+KCksIG5ldyBMaXN0PGludD4oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PGludD4+IEVudW1lcmF0ZUJyb25LZXJib3NjaChMaXN0PGludD4gUCwgTGlzdDxpbnQ+IFIsIExpc3Q8aW50PiBYKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFAuQ291bnQgPT0gMCAmJiBYLkNvdW50ID09IDApXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihSKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgUEMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KFApO1xyXG4gICAgICAgICAgICAgICAgdmFyIFhDID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihYKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdSA9IFRvbWl0YVBpdm90KFAsIFgpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8aW50PihQLENvbXBsZW1lbnROZWlnaGJvcnNbdV0pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFIuQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzZXQgaW4gRW51bWVyYXRlQnJvbktlcmJvc2NoKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb248aW50PihQQyxDb21wbGVtZW50TmVpZ2hib3JzW3ZdKSwgUiwgQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbjxpbnQ+KFhDLENvbXBsZW1lbnROZWlnaGJvcnNbdl0pKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHNldDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUi5SZW1vdmUodik7XHJcbiAgICAgICAgICAgICAgICAgICAgUEMuUmVtb3ZlKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIFhDLkFkZCh2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IFRvbWl0YVBpdm90KExpc3Q8aW50PiBQLCBMaXN0PGludD4gWClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtYXggPSAtMTtcclxuICAgICAgICAgICAgdmFyIGJlc3QgPSAtMTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHUgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8aW50PihQLFgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbiA9IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudDxpbnQ+KENvbXBsZW1lbnROZWlnaGJvcnNbdV0sUCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobiA+IG1heClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXggPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3QgPSB1O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYmVzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gRmluZENoaUNvbG9yaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IEsgPSAwOyBLIDwgaW50Lk1heFZhbHVlOyBLKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gRmluZEtDb2xvcmluZyhWZXJ0aWNlcywgSyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gRmluZEtDb2xvcmluZyhMaXN0PGludD4gc3ViZ3JhcGgsIGludCBLKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN1YmdyYXBoLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICBpZiAoSyA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgSSBpbiBFbnVtZXJhdGVNYXhpbWFsSW5kZXBlbmRlbnRTZXRzKHN1YmdyYXBoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBGaW5kS0NvbG9yaW5nKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5EaWZmZXJlbmNlPGludD4oc3ViZ3JhcGgsSSksIEsgLSAxKTtcclxuICAgICAgICAgICAgICAgIGlmIChjICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYy5JbnNlcnQoMCwgSSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIExpc3QgY29sb3JpbmdcclxuXHJcbiAgICAgICAgcHVibGljIGludCBNYXhDb2xvcmFibGVTdWJzZXQoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1heENvbG9yYWJsZVN1YnNldChhc3NpZ25tZW50LCAwLCBzdWJzZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IE1heENvbG9yYWJsZVN1YnNldChMaXN0PGxvbmc+IGFzc2lnbm1lbnQsIGludCB2LCBMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHYgPj0gc3Vic2V0LkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWF4ID0gTWF4Q29sb3JhYmxlU3Vic2V0KGFzc2lnbm1lbnQsIHYgKyAxLCBzdWJzZXQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9ycyA9IGFzc2lnbm1lbnRbc3Vic2V0W3ZdXTtcclxuICAgICAgICAgICAgd2hpbGUgKGNvbG9ycyAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBjb2xvcnMgJiAtY29sb3JzO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyBMaXN0PGxvbmc+KGFzc2lnbm1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG5laWdoYm9yIGluIF9sYXRlck5laWdoYm9ycy5WYWx1ZVtzdWJzZXRbdl1dKVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRDb3B5W25laWdoYm9yXSAmPSB+Y29sb3I7XHJcblxyXG4gICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5NYXgobWF4LCAxICsgTWF4Q29sb3JhYmxlU3Vic2V0KGFzc2lnbm1lbnRDb3B5LCB2ICsgMSwgc3Vic2V0KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF4ID49IHN1YnNldC5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjb2xvcnMgXj0gY29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEdyZWVkeUNvbG9yKExpc3Q8bG9uZz4gYXNzaWdubWVudCwgTGlzdDxpbnQ+IHN1YnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb2xvcmluZyA9IG5ldyBsb25nW05dO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBzdWJzZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb3N0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8aW50LGxvbmc+KE5laWdoYm9yc1t2XSwwTCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50LCBsb25nPikoKGwsIHgpID0+IGwgfCBjb2xvcmluZ1t4XSkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9ycyA9IGFzc2lnbm1lbnRbdl0gJiB+bG9zdDtcclxuICAgICAgICAgICAgICAgIGNvbG9yaW5nW3ZdID0gY29sb3JzICYgLWNvbG9ycztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8bG9uZz4oY29sb3JpbmcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgYm9vbD4pKGMgPT4gYyAhPSAwKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0Nob29zYWJsZShMaXN0PGxvbmc+IGFzc2lnbm1lbnQsIExpc3Q8aW50PiBzdWJzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSXNDaG9vc2FibGUoYXNzaWdubWVudCwgMCwgc3Vic2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9vbCBJc0Nob29zYWJsZShMaXN0PGxvbmc+IGFzc2lnbm1lbnQsIGludCB2LCBMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHYgPj0gc3Vic2V0LkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JzID0gYXNzaWdubWVudFtzdWJzZXRbdl1dO1xyXG4gICAgICAgICAgICB3aGlsZSAoY29sb3JzICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGNvbG9ycyAmIC1jb2xvcnM7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IExpc3Q8bG9uZz4oYXNzaWdubWVudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbmVpZ2hib3IgaW4gX2xhdGVyTmVpZ2hib3JzLlZhbHVlW3N1YnNldFt2XV0pXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudENvcHlbbmVpZ2hib3JdICY9IH5jb2xvcjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoSXNDaG9vc2FibGUoYXNzaWdubWVudENvcHksIHYgKyAxLCBzdWJzZXQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbG9ycyBePSBjb2xvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0Nob29zYWJsZShMaXN0PGxvbmc+IGFzc2lnbm1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSXNDaG9vc2FibGUoYXNzaWdubWVudCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJvb2wgSXNDaG9vc2FibGUoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2ID49IE4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvcnMgPSBhc3NpZ25tZW50W3ZdO1xyXG4gICAgICAgICAgICB3aGlsZSAoY29sb3JzICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGNvbG9ycyAmIC1jb2xvcnM7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IExpc3Q8bG9uZz4oYXNzaWdubWVudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbmVpZ2hib3IgaW4gX2xhdGVyTmVpZ2hib3JzLlZhbHVlW3ZdKVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRDb3B5W25laWdoYm9yXSAmPSB+Y29sb3I7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKElzQ2hvb3NhYmxlKGFzc2lnbm1lbnRDb3B5LCB2ICsgMSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29sb3JzIF49IGNvbG9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ2xpcXVlQ292ZXJpbmcoTGlzdDxsb25nPiBhc3NpZ25tZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNldCBpbiBfaW5kZXBlbmRlbnRUd29TZXRzLlZhbHVlKSBcclxuICAgICAgICAgICAgICAgIGlmICgoYXNzaWdubWVudFtzZXRbMF1dICYgYXNzaWdubWVudFtzZXRbMV1dKSAhPSAwKSBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gQ2hlY2tGR0Nob29zYWJsZShGdW5jPGludCwgaW50PiBmLCBGdW5jPGludCwgaW50PiBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHBvdCA9IEVudW1lcmFibGUuUmFuZ2UoMCwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TdW08aW50PihWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gZyh2KSkpIC0gMSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdCA9IEVudW1lcmFibGUuUmFuZ2UoMCwgZigwKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBMIGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbmNhdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oKChJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxMaXN0PGludD4+PikobmV3W10geyAobmV3W10geyBmaXJzdCB9KSB9KSksU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ta2lwPGludD4oVmVydGljZXMsMSkuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikodiA9PiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KHBvdCwgZih2KSkpKSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgTEwgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oTCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUlzR0NvbG9yYWJsZShMTCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KWcpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMTDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIElzR0NvbG9yYWJsZShMaXN0PExpc3Q8aW50Pj4gTCwgRnVuYzxpbnQsIGludD4gZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvcmluZyBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikodiA9PiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KExbdl0sIGcodikpKSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoSXNQcm9wZXJDb2xvcmluZyhTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oY29sb3JpbmcpKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBJc1Byb3BlckNvbG9yaW5nKExpc3Q8TGlzdDxpbnQ+PiBjb2xvcmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IHYgPSAwOyB2IDwgTjsgdisrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCB3ID0gdiArIDE7IHcgPCBOOyB3KyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfYWRqYWNlbnRbdiwgd10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbkNvdW50PGludD4oY29sb3Jpbmdbdl0sY29sb3Jpbmdbd10pID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IFxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBPbmxpbmUgbGlzdCBjb2xvcmluZ1xyXG4gICAgICAgIHB1YmxpYyBpbnQgTWljKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtaWMgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIEVudW1lcmF0ZU1heGltYWxJbmRlcGVuZGVudFNldHMoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxpbnQ+KHNldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gRGVncmVlKHYpKSk7XHJcbiAgICAgICAgICAgICAgICBtaWMgPSBNYXRoLk1heChtaWMsIHQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWljO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc09ubGluZUZDaG9vc2FibGUoRnVuYzxpbnQsIGludD4gZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCA9IDA7XHJcbiAgICAgICAgICAgIENhY2hlSGl0cyA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgZlRyYWNlID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgZlRyYWNlW3ZdID0gZih2KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PE9ubGluZUNob2ljZUhhc2hHcmFwaCwgYm9vbD4oKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBJc09ubGluZUZDaG9vc2FibGUoZlRyYWNlLCBFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KDEsIE4pLlRvQXJyYXkoKSwgY2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBib29sIElzT25saW5lRkNob29zYWJsZShpbnRbXSBmLCBpbnRbXSBnLCBEaWN0aW9uYXJ5PE9ubGluZUNob2ljZUhhc2hHcmFwaCwgYm9vbD4gY2FjaGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOb2Rlc1Zpc2l0ZWQrKztcclxuXHJcbiAgICAgICAgICAgIE9ubGluZUNob2ljZUhhc2hHcmFwaCBrZXkgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGludFtdIGdDbG9uZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGl2ZVZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludCwgaW50PikoKHYsIGkpID0+IHYgPiAwID8gaSA6IC0xKSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaSA9PiBpID49IDApKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIGZyZWViaWVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxpbnQ+KGxpdmVWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IERlZ3JlZUluU3ViZ3JhcGgodiwgbGl2ZVZlcnRpY2VzKSA8IGZbdl0pKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChmcmVlYmllcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChnQ2xvbmUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBnQ2xvbmUgPSBuZXcgaW50W2cuTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgICAgICBBcnJheS5Db3B5KGcsIGdDbG9uZSwgZy5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGZyZWViaWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGdbdl0gPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGxpdmVWZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KGcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh2LCBpKSA9PiB2ID4gMCA/IGkgOiAtMSkpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gaSA+PSAwKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBmcmVlYmllcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8aW50PihsaXZlVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBEZWdyZWVJblN1YmdyYXBoKHYsIGxpdmVWZXJ0aWNlcykgPCBmW3ZdKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsaXZlVmVydGljZXMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGdvdG8gZG9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8aW50PihsaXZlVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBmW3ZdIDw9IDApKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBnb3RvIGRvbmU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGtleSA9IG5ldyBPbmxpbmVDaG9pY2VIYXNoR3JhcGgoZiwgZyk7XHJcbiAgICAgICAgICAgIGJvb2wgY2FjaGVkUmVzdWx0O1xyXG4gICAgICAgICAgICBpZiAoY2FjaGUuVHJ5R2V0VmFsdWUoa2V5LCBvdXQgY2FjaGVkUmVzdWx0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2FjaGVIaXRzKys7XHJcblxyXG4gICAgICAgICAgICAgICAga2V5ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNhY2hlZFJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGdvdG8gZG9uZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGluZGVwZW5kZW50U2V0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF9pbmRlcGVuZGVudFNldHMuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzZXQgPT4gc2V0LkNvdW50ID49IDEgJiYgTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQoc2V0LCBsaXZlVmVydGljZXMpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgViBpbiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KGxpdmVWZXJ0aWNlcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChWLkNvdW50IDw9IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihpbmRlcGVuZGVudFNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzcyA9PiBMaXN0VXRpbGl0eS5TdWJzZXRFcXVhbFNvcnRlZChWLCBzcykpKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBWKVxyXG4gICAgICAgICAgICAgICAgICAgIGZbdl0tLTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4aW1hbEluZGVwZW5kZW50U2V0cyA9IExpc3RVdGlsaXR5Lk1heGltYWxFbGVtZW50c1NvcnRlZChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihpbmRlcGVuZGVudFNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzZXQgPT4gTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQoc2V0LCBWKSkpLlRvTGlzdCgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2hvb3NhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgQyBpbiBtYXhpbWFsSW5kZXBlbmRlbnRTZXRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIEMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdbdl0tLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2hvb3NhYmxlID0gSXNPbmxpbmVGQ2hvb3NhYmxlKGYsIGcsIGNhY2hlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gQylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ1t2XSsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hvb3NhYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBWKVxyXG4gICAgICAgICAgICAgICAgICAgIGZbdl0rKztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWNob29zYWJsZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBnb3RvIGRvbmU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgZG9uZTpcclxuXHJcbiAgICAgICAgICAgIGlmIChnQ2xvbmUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoZ0Nsb25lLCBnLCBnLkxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoa2V5ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBjYWNoZVtrZXldID0gcmVzdWx0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgI3JlZ2lvbiBvbmxpbmUgKGY6ZyktY2hvb3NhYmlsaXR5XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNPbmxpbmVGR0Nob29zYWJsZShGdW5jPGludCwgaW50PiBmLCBGdW5jPGludCwgaW50PiBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTm9kZXNWaXNpdGVkID0gMDtcclxuICAgICAgICAgICAgQ2FjaGVIaXRzID0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PE9ubGluZUNob2ljZUhhc2hHcmFwaCwgYm9vbD4oKTtcclxuICAgICAgICAgICAgcmV0dXJuIElzT25saW5lRkdDaG9vc2FibGUoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oX3ZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBmKHYpKSkuVG9BcnJheSgpLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihfdmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IGcodikpKS5Ub0FycmF5KCksIGNhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9vbCBJc09ubGluZUZHQ2hvb3NhYmxlKGludFtdIGYsIGludFtdIGcsIERpY3Rpb25hcnk8T25saW5lQ2hvaWNlSGFzaEdyYXBoLCBib29sPiBjYWNoZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCsrO1xyXG4gICAgICAgICAgICBPbmxpbmVDaG9pY2VIYXNoR3JhcGgga2V5ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpbnRbXSBnQ2xvbmUgPSBuZXcgaW50W2cuTGVuZ3RoXTtcclxuICAgICAgICAgICAgQXJyYXkuQ29weShnLCBnQ2xvbmUsIGcuTGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdbdl0gPD0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZWVkID0gZ1t2XSArIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGludD4oTmVpZ2hib3JzW3ZdLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodyA9PiBnW3ddKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZbdl0gPj0gbmVlZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdbdl0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFjaGFuZ2VkKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbGl2ZVZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxpbnQ+KGcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiB2ID4gMCkpKTtcclxuICAgICAgICAgICAgaWYgKGxpdmVWZXJ0aWNlcy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZ290byBkb25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxpbnQ+KGxpdmVWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IGZbdl0gPCBnW3ZdKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZ290byBkb25lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBrZXkgPSBuZXcgT25saW5lQ2hvaWNlSGFzaEdyYXBoKGYsIGcpO1xyXG4gICAgICAgICAgICBib29sIGNhY2hlZFJlc3VsdDtcclxuICAgICAgICAgICAgaWYgKGNhY2hlLlRyeUdldFZhbHVlKGtleSwgb3V0IGNhY2hlZFJlc3VsdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENhY2hlSGl0cysrO1xyXG5cclxuICAgICAgICAgICAgICAgIGtleSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjYWNoZWRSZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICBnb3RvIGRvbmU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRlcGVuZGVudFNldHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfaW5kZXBlbmRlbnRTZXRzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc2V0ID0+IHNldC5Db3VudCA+PSAxICYmIExpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkKHNldCwgbGl2ZVZlcnRpY2VzKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIFYgaW4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihsaXZlVmVydGljZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoVi5Db3VudCA8PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oaW5kZXBlbmRlbnRTZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc3MgPT4gTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQoViwgc3MpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gVilcclxuICAgICAgICAgICAgICAgICAgICBmW3ZdLS07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG1heGltYWxJbmRlcGVuZGVudFNldHMgPSBMaXN0VXRpbGl0eS5NYXhpbWFsRWxlbWVudHNTb3J0ZWQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oaW5kZXBlbmRlbnRTZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc2V0ID0+IExpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkKHNldCwgVikpKS5Ub0xpc3QoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNob29zYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIEMgaW4gbWF4aW1hbEluZGVwZW5kZW50U2V0cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBDKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnW3ZdLS07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNob29zYWJsZSA9IElzT25saW5lRkdDaG9vc2FibGUoZiwgZywgY2FjaGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBDKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnW3ZdKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaG9vc2FibGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIFYpXHJcbiAgICAgICAgICAgICAgICAgICAgZlt2XSsrO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghY2hvb3NhYmxlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGdvdG8gZG9uZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICBkb25lOlxyXG5cclxuICAgICAgICAgICAgaWYgKGdDbG9uZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgQXJyYXkuQ29weShnQ2xvbmUsIGcsIGcuTGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChrZXkgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSByZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE9yaWVudGF0aW9uc1xyXG4gICAgICAgIHB1YmxpYyBpbnQgRGlyZWN0aW9uKFR1cGxlPGludCwgaW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFfYWRqYWNlbnRbZS5JdGVtMSwgZS5JdGVtMl0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBEaXJlY3RlZFtlLkl0ZW0yLCBlLkl0ZW0xXSA/IC0xIDogMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9vbCBNYXRjaGVzT3V0TWludXNJbihMaXN0PGludD4gb3V0TWludXNJbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxpbnQ+KF92ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IE91dERlZ3JlZSh2KSAtIEluRGVncmVlKHYpID09IG91dE1pbnVzSW5bdl0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIE1lbW9pemVFdWxlcmlhblN1YmdyYXBoQ291bnRpbmcgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PEdyYXBoPiBTcGFubmluZ091dE1pbnVzSW5TdWJncmFwaHMoTGlzdDxpbnQ+IG91dE1pbnVzSW4sIExpc3Q8VHVwbGU8aW50LCBpbnQ+PiBlZGdlcywgRGljdGlvbmFyeTxPcmllbnRhdGlvbkhhc2hHcmFwaCwgTGlzdDxHcmFwaD4+IHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCsrO1xyXG5cclxuICAgICAgICAgICAgdmFyIGdyYXBocyA9IG5ldyBMaXN0PEdyYXBoPigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGludD4oX3ZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gb3V0TWludXNJblt2XSA+IE91dERlZ3JlZSh2KSB8fCAtb3V0TWludXNJblt2XSA+IEluRGVncmVlKHYpKSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3JhcGhzO1xyXG5cclxuICAgICAgICAgICAgdmFyIGtleSA9IG5ldyBPcmllbnRhdGlvbkhhc2hHcmFwaCh0aGlzLCBvdXRNaW51c0luKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChNZW1vaXplRXVsZXJpYW5TdWJncmFwaENvdW50aW5nKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBMaXN0PEdyYXBoPiBzcGFubmVycztcclxuICAgICAgICAgICAgICAgIGlmIChzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUuVHJ5R2V0VmFsdWUoa2V5LCBvdXQgc3Bhbm5lcnMpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENhY2hlSGl0cysrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzcGFubmVycztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGVkZ2VzLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChNYXRjaGVzT3V0TWludXNJbihvdXRNaW51c0luKSlcclxuICAgICAgICAgICAgICAgICAgICBncmFwaHMuQWRkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBncmFwaHM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5MYXN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50Pj4oZWRnZXMpO1xyXG5cclxuICAgICAgICAgICAgZWRnZXMuUmVtb3ZlKGUpO1xyXG4gICAgICAgICAgICB2YXIgZyA9IFJlbW92ZUVkZ2UoZSk7XHJcblxyXG4gICAgICAgICAgICBncmFwaHMuQWRkUmFuZ2UoZy5TcGFubmluZ091dE1pbnVzSW5TdWJncmFwaHMob3V0TWludXNJbiwgZWRnZXMsIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG91dE1pbnVzSW5QcmltZSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4ob3V0TWludXNJbik7XHJcbiAgICAgICAgICAgIHZhciB2MSA9IGUuSXRlbTE7XHJcbiAgICAgICAgICAgIHZhciB2MiA9IGUuSXRlbTI7XHJcblxyXG4gICAgICAgICAgICBpZiAoRGlyZWN0aW9uKGUpID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG91dE1pbnVzSW5QcmltZVtlLkl0ZW0xXS0tO1xyXG4gICAgICAgICAgICAgICAgb3V0TWludXNJblByaW1lW2UuSXRlbTJdKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvdXRNaW51c0luUHJpbWVbZS5JdGVtMV0rKztcclxuICAgICAgICAgICAgICAgIG91dE1pbnVzSW5QcmltZVtlLkl0ZW0yXS0tO1xyXG5cclxuICAgICAgICAgICAgICAgIHYxID0gZS5JdGVtMjtcclxuICAgICAgICAgICAgICAgIHYyID0gZS5JdGVtMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ3JhcGhzLkFkZFJhbmdlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGg+KGcuU3Bhbm5pbmdPdXRNaW51c0luU3ViZ3JhcGhzKG91dE1pbnVzSW5QcmltZSwgZWRnZXMsIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGg+KShncmFwaCA9PiBncmFwaC5BZGRFZGdlKHYxLCB2MiwgdHJ1ZSkpKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoTWVtb2l6ZUV1bGVyaWFuU3ViZ3JhcGhDb3VudGluZylcclxuICAgICAgICAgICAgICAgIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZVtrZXldID0gZ3JhcGhzO1xyXG5cclxuICAgICAgICAgICAgZWRnZXMuQWRkKGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JhcGhzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxHcmFwaD4gU3Bhbm5pbmdFdWxlcmlhblN1YmdyYXBocyhMaXN0PFR1cGxlPGludCwgaW50Pj4gZWRnZXMsIERpY3Rpb25hcnk8T3JpZW50YXRpb25IYXNoR3JhcGgsIExpc3Q8R3JhcGg+PiBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3Bhbm5pbmdPdXRNaW51c0luU3ViZ3JhcGhzKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4obmV3IGludFtOXSksIGVkZ2VzLCBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBDb3VudFNwYW5uaW5nRXVsZXJpYW5TdWJncmFwaHMob3V0IGludCBldmVuLCBvdXQgaW50IG9kZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENhY2hlSGl0cyA9IDA7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTxPcmllbnRhdGlvbkhhc2hHcmFwaCwgTGlzdDxHcmFwaD4+KCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlcyA9IEdldEVkZ2VUdXBsZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGV2ZW4gPSAwO1xyXG4gICAgICAgICAgICBvZGQgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZyBpbiBTcGFubmluZ0V1bGVyaWFuU3ViZ3JhcGhzKGVkZ2VzLCBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZy5TaXplICUgMiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW4rKztcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBvZGQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBDb3VudFNwYW5uaW5nRXVsZXJpYW5TdWJncmFwaHNVc2luZ1ZlcnRpY2VzKExpc3Q8aW50PiB2ZXJ0aWNlcywgb3V0IGludCBldmVuLCBvdXQgaW50IG9kZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENhY2hlSGl0cyA9IDA7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCA9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAodmVydGljZXMgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHZlcnRpY2VzID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PE9yaWVudGF0aW9uSGFzaEdyYXBoLCBMaXN0PEdyYXBoPj4oKTtcclxuICAgICAgICAgICAgdmFyIGVkZ2VzID0gR2V0RWRnZVR1cGxlcygpO1xyXG5cclxuICAgICAgICAgICAgZXZlbiA9IDA7XHJcbiAgICAgICAgICAgIG9kZCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBnIGluIFNwYW5uaW5nRXVsZXJpYW5TdWJncmFwaHMoZWRnZXMsIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnLkRlZ3JlZSh2KSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGcuU2l6ZSAlIDIgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBldmVuKys7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgb2RkKys7XHJcblxyXG4gICAgICAgICAgICBza2lwOiA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgQ291bnRTcGFubmluZ0V1bGVyaWFuU3ViZ3JhcGhzVXNpbmdFZGdlcyhMaXN0PFR1cGxlPGludCwgaW50Pj4gZWRnZXMsIG91dCBpbnQgZXZlbiwgb3V0IGludCBvZGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDYWNoZUhpdHMgPSAwO1xyXG4gICAgICAgICAgICBOb2Rlc1Zpc2l0ZWQgPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVkZ2VzID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICBlZGdlcyA9IG5ldyBMaXN0PFR1cGxlPGludCwgaW50Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTxPcmllbnRhdGlvbkhhc2hHcmFwaCwgTGlzdDxHcmFwaD4+KCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlVHVwbGVzID0gR2V0RWRnZVR1cGxlcygpO1xyXG5cclxuICAgICAgICAgICAgZXZlbiA9IDA7XHJcbiAgICAgICAgICAgIG9kZCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBnIGluIFNwYW5uaW5nRXVsZXJpYW5TdWJncmFwaHMoZWRnZVR1cGxlcywgc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnLl9hZGphY2VudFtlLkl0ZW0xLCBlLkl0ZW0yXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChnLlNpemUgJSAyID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbisrO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIG9kZCsrO1xyXG5cclxuICAgICAgICAgICAgc2tpcDogO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxHcmFwaD4gRW51bWVyYXRlT3JpZW50YXRpb25zKEZ1bmM8aW50LCBpbnQ+IHJlcXVpcmVkSW5kZWdyZWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZ2FpbiA9IG5ldyBpbnRbTl07XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaW5OZWlnaGJvckxpc3QgaW4gRW51bWVyYXRlT3JpZW50YXRpb25zRm9yKDAsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PilyZXF1aXJlZEluZGVncmVlLCBnYWluKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gbmV3IGJvb2xbTiwgTl07XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0ZWQgPSBuZXcgYm9vbFtOLCBOXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGluTmVpZ2hib3JMaXN0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBpbk5laWdoYm9yTGlzdC5Db3VudCAtIDEgLSBpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBpbk5laWdoYm9yTGlzdFtpXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkamFjZW50W3YsIHddID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbdywgdl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0ZWRbdywgdl0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dE5laWdoYm9ycyA9IExpc3RVdGlsaXR5LkRpZmZlcmVuY2U8aW50PihfbGF0ZXJOZWlnaGJvcnMuVmFsdWVbdl0sIGluTmVpZ2hib3JMaXN0W2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gb3V0TmVpZ2hib3JzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbdiwgd10gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGphY2VudFt3LCB2XSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RlZFt2LCB3XSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgR3JhcGgoR2V0RWRnZVdlaWdodHMoYWRqYWNlbnQsIGRpcmVjdGVkKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxMaXN0PGludD4+PiBFbnVtZXJhdGVPcmllbnRhdGlvbnNGb3IoaW50IHYsIEZ1bmM8aW50LCBpbnQ+IHJlcXVpcmVkSW5kZWdyZWUsIGludFtdIGdhaW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodiA+PSBOIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdhaW5bdl0gPCByZXF1aXJlZEluZGVncmVlKHYpKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGlucyBpbiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KF9sYXRlck5laWdoYm9ycy5WYWx1ZVt2XSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucy5Db3VudCA8IHJlcXVpcmVkSW5kZWdyZWUodikgLSBnYWluW3ZdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dHMgPSBMaXN0VXRpbGl0eS5EaWZmZXJlbmNlPGludD4oX2xhdGVyTmVpZ2hib3JzLlZhbHVlW3ZdLCBpbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgeCBpbiBvdXRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYWluW3hdKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvIGluIEVudW1lcmF0ZU9yaWVudGF0aW9uc0Zvcih2ICsgMSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KXJlcXVpcmVkSW5kZWdyZWUsIGdhaW4pKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5BZGQoaW5zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBvO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHggaW4gb3V0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2Fpblt4XS0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxHcmFwaD4gRW51bWVyYXRlT3JpZW50YXRpb25zKGJvb2wgZmFzdCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHVuZGlyZWN0ZWRXZWlnaHRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oR2V0RWRnZVdlaWdodHMoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHcgPT4gTWF0aC5BYnModykpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIGVkZ2VJbmRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4odW5kaXJlY3RlZFdlaWdodHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh3LCBpKSA9PiB3ICE9IDAgPyBpIDogLTEpKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh4ID0+IHggPiAwKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdW5kaXJlY3RlZCA9IG5ldyBHcmFwaCh1bmRpcmVjdGVkV2VpZ2h0cyk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbGlzdCBpbiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KGVkZ2VJbmRpY2VzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdlaWdodHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50Pih1bmRpcmVjdGVkV2VpZ2h0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludCwgaW50PikoKHcsIGkpID0+IGxpc3QuQ29udGFpbnMoaSkgPyAtdyA6IHcpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IEdyYXBoKHdlaWdodHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBHZW5lcmF0ZVJhbmRvbU9yaWVudGF0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB1bmRpcmVjdGVkV2VpZ2h0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KEdldEVkZ2VXZWlnaHRzKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh3ID0+IE1hdGguQWJzKHcpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlSW5kaWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHVuZGlyZWN0ZWRXZWlnaHRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50LCBpbnQ+KSgodywgaSkgPT4gdyAhPSAwID8gaSA6IC0xKSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoeCA9PiB4ID4gMCkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBuZXcgTGlzdDxpbnQ+KEUgLyAyKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gZWRnZUluZGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChSTkcuTmV4dCgyKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3QuQWRkKGkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgd2VpZ2h0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHVuZGlyZWN0ZWRXZWlnaHRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50LCBpbnQ+KSgodywgaSkgPT4gbGlzdC5Db250YWlucyhpKSA/IC13IDogdykpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaCh3ZWlnaHRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEdyYXBoPiBFbnVtZXJhdGVBY3ljbGljT3JpZW50YXRpb25zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVBY3ljbGljT3JpZW50YXRpb25zKDAsIG5ldyBEaWN0aW9uYXJ5PGludCxMaXN0PGludD4+KE4pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgSUVudW1lcmFibGU8R3JhcGg+IEVudW1lcmF0ZUFjeWNsaWNPcmllbnRhdGlvbnMoaW50IGksIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IG91dE5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpID49IE4pXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gRnJvbU91dE5laWdoYm9yTGlzdHMob3V0TmVpZ2hib3JzKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gTmVpZ2hib3JzSW5TdWJncmFwaChpLCBFbnVtZXJhYmxlLlJhbmdlKDAsIGkpLlRvTGlzdCgpKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZWlnaGJvcnMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvbmUgPSBDbG9uZU91dE5laWdoYm9ycyhvdXROZWlnaGJvcnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbG9uZVtpXSA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZyBpbiBFbnVtZXJhdGVBY3ljbGljT3JpZW50YXRpb25zKGkgKyAxLCBjbG9uZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ZWROZWlnaGJvcnMgPSBUb3BvbG9naWNhbFNvcnQoaSwgbmVpZ2hib3JzLCBvdXROZWlnaGJvcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBkIGluIEVudW1lcmF0ZUxlZ2FsRGlyZWN0aW9uQXNzaWdubWVudHMoaSwgc29ydGVkTmVpZ2hib3JzLCBvdXROZWlnaGJvcnMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lID0gQ2xvbmVPdXROZWlnaGJvcnMob3V0TmVpZ2hib3JzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lW2ldID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oZC5FbnVtZXJhdGVCaXRzKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShiID0+IHNvcnRlZE5laWdoYm9yc1tzb3J0ZWROZWlnaGJvcnMuQ291bnQgLSAxIC0gYl0pKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkRpZmZlcmVuY2U8aW50PihuZWlnaGJvcnMsY2xvbmVbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVbdl0uQWRkKGkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGcgaW4gRW51bWVyYXRlQWN5Y2xpY09yaWVudGF0aW9ucyhpICsgMSwgY2xvbmUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IENsb25lT3V0TmVpZ2hib3JzKERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IG91dE5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjbG9uZSA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PihvdXROZWlnaGJvcnMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGt2cCBpbiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAgICAgICAgICBjbG9uZVtrdnAuS2V5XSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oa3ZwLlZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjbG9uZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgTGlzdDxpbnQ+IFRvcG9sb2dpY2FsU29ydChpbnQgaSwgTGlzdDxpbnQ+IHZlcnRpY2VzLCBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaW5OZWlnaGJvckNvdW50ID0gbmV3IGludFtpXTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGt2cCBpbiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghdmVydGljZXMuQ29udGFpbnMoa3ZwLktleSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5JbnRlcnNlY3Q8aW50PihrdnAuVmFsdWUsdmVydGljZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgIGluTmVpZ2hib3JDb3VudFt2XSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgc29ydGVkID0gbmV3IExpc3Q8aW50PihpKTtcclxuICAgICAgICAgICAgdmFyIHNvdXJjZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGludD4odmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBpbk5laWdoYm9yQ291bnRbdl0gPT0gMCkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHNvdXJjZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gc291cmNlc1tzb3VyY2VzLkNvdW50IC0gMV07XHJcbiAgICAgICAgICAgICAgICBzb3VyY2VzLlJlbW92ZUF0KHNvdXJjZXMuQ291bnQgLSAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWQuQWRkKHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkludGVyc2VjdDxpbnQ+KG91dE5laWdoYm9yc1tzb3VyY2VdLHZlcnRpY2VzKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbk5laWdoYm9yQ291bnRbdl0tLTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5OZWlnaGJvckNvdW50W3ZdID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZXMuQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc29ydGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBJRW51bWVyYWJsZTxsb25nPiBFbnVtZXJhdGVMZWdhbERpcmVjdGlvbkFzc2lnbm1lbnRzKGludCBpLCBMaXN0PGludD4gc29ydGVkTmVpZ2hib3JzLCBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIGQgPSAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFuY2VzdG9yTGlzdHMgPSBHZXRBbmNlc3Rvckxpc3RzKGksIG91dE5laWdoYm9ycyk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gZDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZC5BbGxTZXQoc29ydGVkTmVpZ2hib3JzLkNvdW50KSlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBkID0gQ2xvc3VyZShkICsgMSwgc29ydGVkTmVpZ2hib3JzLCBhbmNlc3Rvckxpc3RzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsb25nIENsb3N1cmUobG9uZyBkLCBMaXN0PGludD4gc29ydGVkTmVpZ2hib3JzLCBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBhbmNlc3Rvckxpc3RzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICghZG9uZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgdiBpbiBzb3J0ZWROZWlnaGJvcnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZCaXQgPSBzb3J0ZWROZWlnaGJvcnMuQ291bnQgLSAxIC0gc29ydGVkTmVpZ2hib3JzLkluZGV4T2Yodik7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5JbnRlcnNlY3Q8aW50PihhbmNlc3Rvckxpc3RzW3ZdLHNvcnRlZE5laWdoYm9ycykpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd0JpdCA9IHNvcnRlZE5laWdoYm9ycy5Db3VudCAtIDEgLSBzb3J0ZWROZWlnaGJvcnMuSW5kZXhPZih3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQuSXNCaXRTZXQod0JpdCkgJiYgIWQuSXNCaXRTZXQodkJpdCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBkLlNldEJpdCh2Qml0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IEdldEFuY2VzdG9yTGlzdHMoaW50IGksIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IG91dE5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhbmNlc3Rvckxpc3RzID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+KGkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgdiA9IDA7IHYgPCBpOyB2KyspXHJcbiAgICAgICAgICAgICAgICBhbmNlc3Rvckxpc3RzW3ZdID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX28xNik9PntfbzE2LkFkZCh2KTtyZXR1cm4gX28xNjt9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkb25lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHdoaWxlICghZG9uZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgdiA9IDA7IHYgPCBpOyB2KyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gb3V0TmVpZ2hib3JzW3ZdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHcgPj0gaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBhbmNlc3Rvckxpc3RzW3ddLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmNlc3Rvckxpc3RzW3ddID0gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4oYW5jZXN0b3JMaXN0c1t3XSxhbmNlc3Rvckxpc3RzW3ZdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmNlc3Rvckxpc3RzW3ddLkNvdW50ID4gYylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhbmNlc3Rvckxpc3RzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gQ2xhc3NpYyBBbGdvcml0aG1zXHJcbiAgICAgICAgcHVibGljIEVxdWl2YWxlbmNlUmVsYXRpb248aW50PiBGaW5kRmFjdG9ycygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZXF1aXZhbGVuY2VSZWxhdGlvbiA9IG5ldyBBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXF1aXZhbGVuY2VSZWxhdGlvbi5BZGRFbGVtZW50KGkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXF1aXZhbGVuY2VSZWxhdGlvbi5SZWxhdGUoaSwgaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlcXVpdmFsZW5jZVJlbGF0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgRXF1aXZhbGVuY2VSZWxhdGlvbjxpbnQ+IEZpbmRDb21wb25lbnRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlcXVpdmFsZW5jZVJlbGF0aW9uID0gbmV3IEFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlcXVpdmFsZW5jZVJlbGF0aW9uLkFkZEVsZW1lbnQoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWl2YWxlbmNlUmVsYXRpb24uUmVsYXRlKGksIGopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXF1aXZhbGVuY2VSZWxhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEVxdWl2YWxlbmNlUmVsYXRpb248aW50PiBGaW5kQ29tcG9uZW50cyhMaXN0PGludD4gdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlcXVpdmFsZW5jZVJlbGF0aW9uID0gbmV3IEFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlcXVpdmFsZW5jZVJlbGF0aW9uLkFkZEVsZW1lbnQodltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgdi5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbdltpXSwgdltqXV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWl2YWxlbmNlUmVsYXRpb24uUmVsYXRlKHZbaV0sIHZbal0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXF1aXZhbGVuY2VSZWxhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9wdWJsaWMgTGlzdDxMaXN0PGludD4+IEZpbmRTdHJvbmdDb21wb25lbnRzVGFyamFuKClcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB2YXIgc3Ryb25nQ29tcG9uZW50cyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgdmFyIGluZGljZXMgPSBFbnVtZXJhYmxlLlJlcGVhdCgtMSwgTikuVG9BcnJheSgpO1xyXG4gICAgICAgIC8vICAgIHZhciBsb3dsaW5rID0gRW51bWVyYWJsZS5SZXBlYXQoLTEsIE4pLlRvQXJyYXkoKTtcclxuICAgICAgICAvLyAgICB2YXIgUyA9IG5ldyBTdGFjazxpbnQ+KCk7XHJcbiAgICAgICAgLy8gICAgdmFyIGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgLy8gICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgIC8vICAgIHtcclxuICAgICAgICAvLyAgICAgICAgaWYgKGluZGljZXNbdl0gPCAwKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgU3Ryb25nQ29ubmVjdCh2LCByZWYgaW5kZXgsIGluZGljZXMsIGxvd2xpbmssIFMsIHN0cm9uZ0NvbXBvbmVudHMpO1xyXG4gICAgICAgIC8vICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgcmV0dXJuIHN0cm9uZ0NvbXBvbmVudHM7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy92b2lkIFN0cm9uZ0Nvbm5lY3QoaW50IHYsIHJlZiBpbnQgaW5kZXgsIGludFtdIGluZGljZXMsIGludFtdIGxvd2xpbmssIFN0YWNrPGludD4gUywgTGlzdDxMaXN0PGludD4+IHN0cm9uZ0NvbXBvbmVudHMpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgaW5kaWNlc1t2XSA9IGluZGV4O1xyXG4gICAgICAgIC8vICAgIGxvd2xpbmtbdl0gPSBpbmRleDtcclxuICAgICAgICAvLyAgICBpbmRleCsrO1xyXG4gICAgICAgIC8vICAgIFMuUHVzaCh2KTtcclxuXHJcbiAgICAgICAgLy8gICAgZm9yZWFjaCAodmFyIHcgaW4gT3V0TmVpZ2hib3JzW3ZdKVxyXG4gICAgICAgIC8vICAgIHtcclxuICAgICAgICAvLyAgICAgICAgaWYgKGluZGljZXNbd10gPCAwKVxyXG4gICAgICAgIC8vICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBTdHJvbmdDb25uZWN0KHcsIHJlZiBpbmRleCwgaW5kaWNlcywgbG93bGluaywgUywgc3Ryb25nQ29tcG9uZW50cyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBsb3dsaW5rW3ZdID0gTWF0aC5NaW4obG93bGlua1t2XSwgbG93bGlua1t3XSk7XHJcbiAgICAgICAgLy8gICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgZWxzZSBpZiAoUy5Db250YWlucyh3KSlcclxuICAgICAgICAvLyAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgbG93bGlua1t2XSA9IE1hdGguTWluKGxvd2xpbmtbdl0sIGluZGljZXNbd10pO1xyXG4gICAgICAgIC8vICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgfVxyXG5cclxuICAgICAgICAvLyAgICBpZiAobG93bGlua1t2XSA9PSBpbmRpY2VzW3ZdKVxyXG4gICAgICAgIC8vICAgIHtcclxuICAgICAgICAvLyAgICAgICAgdmFyIGNvbXBvbmVudCA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAvLyAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgdmFyIHcgPSBTLlBvcCgpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgY29tcG9uZW50LkFkZCh3KTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICBpZiAodyA9PSB2KVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIC8vICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICAgICAgICBzdHJvbmdDb21wb25lbnRzLkFkZChjb21wb25lbnQpO1xyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgcHVibGljIGludCBDb21wdXRlRGlhbWV0ZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50WyxdIGRpc3RhbmNlO1xyXG4gICAgICAgICAgICBpbnRbLF0gbmV4dDtcclxuICAgICAgICAgICAgRmxveWRXYXJzaGFsbChvdXQgZGlzdGFuY2UsIG91dCBuZXh0KTtcclxuICAgICAgICAgICAgaW50IGRpYW1ldGVyID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIFZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZVt2LCB3XSA+IGRpYW1ldGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFtZXRlciA9IGRpc3RhbmNlW3YsIHddO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGlhbWV0ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBGbG95ZFdhcnNoYWxsKG91dCBpbnRbLF0gZGlzdGFuY2UsIG91dCBpbnRbLF0gbmV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGRpc3RhbmNlID0gbmV3IGludFtOLCBOXTtcclxuICAgICAgICAgICAgbmV4dCA9IG5ldyBpbnRbTiwgTl07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlW2ksIGpdID0gaW50Lk1heFZhbHVlIC8gMztcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVtpLCBqXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyppZiAoRGlyZWN0ZWRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVtpLCBqXSA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGlyZWN0ZWRbaiwgaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVtqLCBpXSA9IDE7Ki9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlW2ksIGpdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VbaiwgaV0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBuZXh0W2ksIGpdID0gLTE7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBrID0gMDsgayA8IE47IGsrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VbaSwga10gKyBkaXN0YW5jZVtrLCBqXSA8IGRpc3RhbmNlW2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVtpLCBqXSA9IGRpc3RhbmNlW2ksIGtdICsgZGlzdGFuY2Vbaywgal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0W2ksIGpdID0gaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8aW50PiBGbG95ZFdhcnNoYWxsU2hvcnRlc3RQYXRoKGludCB2LCBpbnQgdywgaW50WyxdIGRpc3RhbmNlLCBpbnRbLF0gbmV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZVt2LCB3XSA9PSBpbnQuTWF4VmFsdWUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmIChuZXh0W3YsIHddID09IC0xKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1tdIHsgdiwgdyB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVW5pb248aW50PihGbG95ZFdhcnNoYWxsU2hvcnRlc3RQYXRoKHYsIG5leHRbdiwgd10sIGRpc3RhbmNlLCBuZXh0KSxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNraXA8aW50PihGbG95ZFdhcnNoYWxsU2hvcnRlc3RQYXRoKG5leHRbdiwgd10sIHcsIGRpc3RhbmNlLCBuZXh0KSwxKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vcHVibGljIExpc3Q8aW50PiBGaW5kU2hvcnRlc3RDeWNsZSgpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgdmFyIHNob3J0ZXN0TGVuZ3RoID0gaW50Lk1heFZhbHVlO1xyXG4gICAgICAgIC8vICAgIHZhciBzaG9ydGVzdEN5Y2xlID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAvLyAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgLy8gICAge1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgZGlzdGFuY2UgPSBuZXcgaW50W05dO1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgcGFyZW50ID0gRW51bWVyYWJsZS5SZXBlYXQoLTEsIE4pLlRvQXJyYXkoKTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgIHZhciB2aXNpdGVkID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgbGVhdmVzID0gbmV3IFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLlF1ZXVlPGludD4oKTtcclxuICAgICAgICAvLyAgICAgICAgbGVhdmVzLkVucXVldWUodik7XHJcblxyXG4gICAgICAgIC8vICAgICAgICB3aGlsZSAobGVhdmVzLkNvdW50ID4gMClcclxuICAgICAgICAvLyAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgdmFyIHggPSBsZWF2ZXMuRGVxdWV1ZSgpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgdmlzaXRlZC5BZGQoeCk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgICAgZm9yZWFjaCAodmFyIHkgaW4gTmVpZ2hib3JzW3hdKVxyXG4gICAgICAgIC8vICAgICAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIGlmICh5ID09IHBhcmVudFt4XSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIGlmICghdmlzaXRlZC5Db250YWlucyh5KSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHBhcmVudFt5XSA9IHg7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlW3ldID0gZGlzdGFuY2VbeF0gKyAxO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICBsZWF2ZXMuRW5xdWV1ZSh5KTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGlzdGFuY2VbeF0gKyBkaXN0YW5jZVt5XSArIDEgPCBzaG9ydGVzdExlbmd0aClcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHNob3J0ZXN0TGVuZ3RoID0gZGlzdGFuY2VbeF0gKyBkaXN0YW5jZVt5XSArIDE7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHNob3J0ZXN0Q3ljbGUuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHZhciB3ID0geDtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHcgIT0gLTEpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0ZXN0Q3ljbGUuQWRkKHcpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHBhcmVudFt3XTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgaWYgKHkgIT0gdilcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodyAhPSAtMSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGVzdEN5Y2xlLkluc2VydCgwLCB3KTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gcGFyZW50W3ddO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgfVxyXG5cclxuICAgICAgICAvLyAgICByZXR1cm4gc2hvcnRlc3RDeWNsZTtcclxuICAgICAgICAvL31cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBHcmFwaHNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIEUoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKG5ldyBib29sW24sIG5dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBLKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEUobikuQ29tcGxlbWVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIFAoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgRyA9IEUobik7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDE7IGkrKylcclxuICAgICAgICAgICAgICAgIEcgPSBHLkFkZEVkZ2UoaSwgaSArIDEpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggU3RhcihpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBHID0gRShuKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBHID0gRy5BZGRFZGdlKDAsIGkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggQyhpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBQKG4pLkFkZEVkZ2UobiAtIDEsIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIERpYW1vbmRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBFKDIpICogSygyKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIEJ1bGxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBLKDMpLkF0dGFjaE5ld1ZlcnRleCgxKS5BdHRhY2hOZXdWZXJ0ZXgoMik7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBLaXRlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gRGlhbW9uZC5BdHRhY2hOZXdWZXJ0ZXgoMSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBEYXJ0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gRGlhbW9uZC5BdHRhY2hOZXdWZXJ0ZXgoMik7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBDaGFpclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIFAoNCkuQXR0YWNoTmV3VmVydGV4KDIpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggRW1wdHlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBuZXcgR3JhcGgobmV3IGJvb2xbMCwgMF0pOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggUGF3XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gUCg0KS5BZGRFZGdlKDAsIDIpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggSFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIFAoNCkuQXR0YWNoTmV3VmVydGV4KDEpLkF0dGFjaE5ld1ZlcnRleCgyKTsgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSGFzaEdyYXBoXHJcbiAgICB7XHJcbiAgICAgICAgYnl0ZVtdIF92YWx1ZXM7XHJcbiAgICAgICAgTGlzdDxpbnQ+IF9vdXRNaW51c0luO1xyXG4gICAgICAgIGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIYXNoR3JhcGgoR3JhcGggZywgTGlzdDxpbnQ+IG91dE1pbnVzSW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdmFsdWVzID0gbmV3IGJ5dGVbZy5OICogKGcuTiAtIDEpIC8gMl07XHJcbiAgICAgICAgICAgIF9vdXRNaW51c0luID0gb3V0TWludXNJbjtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBnLk47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgZy5OOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gKGJ5dGUpKGdbaSwgal0gPyAxIDogMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3ZhbHVlc1trXSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ1tpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hhc2hDb2RlICs9IDEgPDwgKGsgJSAzMik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gb3V0TWludXNJbilcclxuICAgICAgICAgICAgICAgIF9oYXNoQ29kZSA9IF9oYXNoQ29kZSAqIDMzICsgaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG90aGVyID0gb2JqIGFzIEhhc2hHcmFwaDtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4oX291dE1pbnVzSW4sb3RoZXIuX291dE1pbnVzSW4pICYmIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxieXRlPihfdmFsdWVzLG90aGVyLl92YWx1ZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgSGVyZWRpdGFyeUNsYXNzRW51bWVyYXRpb25cclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgU2l6ZUNvbXBhcmVyIF9zaXplQ29tcGFyZXIgPSBuZXcgU2l6ZUNvbXBhcmVyKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8R3JhcGg+IEVudW1lcmF0ZUNsYXNzKHBhcmFtcyBHcmFwaFtdIGV4Y2x1ZGVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZUNsYXNzKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaD4oZXhjbHVkZWQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8R3JhcGg+IEVudW1lcmF0ZUNsYXNzKExpc3Q8R3JhcGg+IGV4Y2x1ZGVkLCBpbnQgbWF4VmVydGljZXMgPSBpbnQuTWF4VmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBleGNsdWRlZC5Tb3J0KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgZ2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBpbnQ+KSgoZzEsIGcyKSA9PiBnMS5OLkNvbXBhcmVUbyhnMi5OKSkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGV4Y2x1ZGVkLkNvdW50ID4gMCAmJiBleGNsdWRlZFswXS5OIDw9IDEpIHlpZWxkIGJyZWFrO1xyXG4gICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IEdyYXBoKG5ldyBMaXN0PGludD4oKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGFzdExldmVsID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PEdyYXBoPigpLChfbzE3KT0+e19vMTcuQWRkKG5ldyBHcmFwaChuZXcgTGlzdDxpbnQ+KCkpKTtyZXR1cm4gX28xNzt9KTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChsYXN0TGV2ZWwuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudExldmVsID0gbmV3IExpc3Q8R3JhcGg+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIEcgaW4gbGFzdExldmVsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIExpc3Q8TGlzdDxpbnQ+PiBuZWlnaGJvclNldHM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChHLklzQ29tcGxldGUoKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9yU2V0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4oRW51bWVyYWJsZS5SYW5nZSgwLCBHLk4pLlRvTGlzdCgpKSxfc2l6ZUNvbXBhcmVyKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JTZXRzID0gTGlzdFV0aWxpdHkuR2VuZXJhdGVTdWJsaXN0czxpbnQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgRy5OKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuZWlnaGJvclNldCBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihuZWlnaGJvclNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShsID0+IGwuQ291bnQgPiAwKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgSCA9IEcuQXR0YWNoTmV3VmVydGV4KG5laWdoYm9yU2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGg+KGN1cnJlbnRMZXZlbCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGJvb2w+KShXID0+IEdyYXBoLklzb21vcnBoaWMoSCwgVykpKSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGg+KGV4Y2x1ZGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgYm9vbD4pKFcgPT4gSC5Db250YWluc0luZHVjZWQoVykpKSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TGV2ZWwuQWRkKEgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gSDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRMZXZlbC5Db3VudCA+IDAgJiYgY3VycmVudExldmVsWzBdLk4gPj0gbWF4VmVydGljZXMpIHlpZWxkIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgbGFzdExldmVsID0gY3VycmVudExldmVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjbGFzcyBTaXplQ29tcGFyZXIgOiBJRXF1YWxpdHlDb21wYXJlcjxMaXN0PGludD4+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoTGlzdDxpbnQ+IHgsIExpc3Q8aW50PiB5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geC5Db3VudCA9PSB5LkNvdW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IEdldEhhc2hDb2RlKExpc3Q8aW50PiBvYmopXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmouQ291bnQuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBIeXBlcmdyYXBoPFQ+XHJcbiAgICAgICAgd2hlcmUgVCA6IElDb21wYXJhYmxlXHJcbiAgICB7XHJcbiAgICAgICAgU29ydGVkTGlzdENvbXBhcmVyIF9saXN0Q29tcGFyZXIgPSBuZXcgU29ydGVkTGlzdENvbXBhcmVyKCk7XHJcbiAgICAgICAgcHVibGljIEhhc2hTZXQ8TGlzdDxUPj4gRSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEh5cGVyZ3JhcGgoTGlzdDxMaXN0PFQ+PiBlZGdlcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZWRnZXMgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZWRnZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZS5Tb3J0KCk7XHJcbiAgICAgICAgICAgICAgICBFID0gbmV3IEhhc2hTZXQ8TGlzdDxUPj4oZWRnZXMsIF9saXN0Q29tcGFyZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIEUgPSBuZXcgSGFzaFNldDxMaXN0PFQ+PihfbGlzdENvbXBhcmVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBIeXBlcmdyYXBoPFQ+IE1pbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hhaW5IZWFkcyA9IG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIEUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZW1vdmVkID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKGhlYWQgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkPFQ+KHNldCxoZWFkKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZWQgPiAwIHx8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oY2hhaW5IZWFkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShoZWFkID0+ICFBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQ8VD4oaGVhZCxzZXQpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5IZWFkcy5BZGQoc2V0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIeXBlcmdyYXBoPFQ+KGNoYWluSGVhZHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEh5cGVyZ3JhcGg8VD4gVHIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIEggPSBuZXcgSHlwZXJncmFwaDxUPihCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8TGlzdDxUPj4oKSwoX28xOCk9PntfbzE4LkFkZChuZXcgTGlzdDxUPigpKTtyZXR1cm4gX28xODt9KSk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBFKVxyXG4gICAgICAgICAgICAgICAgSCA9IEguUHJvZHVjdChFZGdlSHlwZXJncmFwaChlKSkuTWluKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gSDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEh5cGVyZ3JhcGg8VD4gRWRnZUh5cGVyZ3JhcGgoTGlzdDxUPiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIeXBlcmdyYXBoPFQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PFQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihlLChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKHYgPT4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8VD4odikpKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSHlwZXJncmFwaDxUPiBVbmlvbihIeXBlcmdyYXBoPFQ+IG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIeXBlcmdyYXBoPFQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVW5pb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihFLG90aGVyLkUpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBIeXBlcmdyYXBoPFQ+IFByb2R1Y3QoSHlwZXJncmFwaDxUPiBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSHlwZXJncmFwaDxUPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oRSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKGVfaSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihvdGhlci5FLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoZV9qID0+IExpc3RVdGlsaXR5LlVuaW9uPFQ+KGVfaSwgZV9qKSkpLlRvTGlzdCgpKSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xhc3MgU29ydGVkTGlzdENvbXBhcmVyIDogSUVxdWFsaXR5Q29tcGFyZXI8TGlzdDxUPj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhMaXN0PFQ+IHgsIExpc3Q8VD4geSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPih4LHkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IEdldEhhc2hDb2RlKExpc3Q8VD4gbGlzdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdW5jaGVja2VkXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGhhc2ggPSAxOTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgeCBpbiBsaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNoID0gaGFzaCAqIDMxICsgeC5HZXRIYXNoQ29kZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzaDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkluZGVwZW5kZW5jZVJhdGlvXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgTWlub3JGaW5kZXJcclxuICAgIHtcclxuICAgICAgICAvLyBUT0RPOiByZXBsYWNlIG5haXZlIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgd2l0aCBmYXN0IHZlcnNpb24gaWYgbmVjZXNzYXJ5LlxyXG4gICAgICAgIC8vIGFsc28sIHxKfCBpcyBoYXJkY29kZWQgdG8gMywgd2hpY2ggaXMgYWxsIHdlIG5lZWQgbm93LlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4+PiBGaW5kV2l0aEooR3JhcGggZywgTGlzdDxpbnQ+IEopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoSi5Db3VudCAhPSAzKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdHJpcGxlIGluIEVudW1lcmF0ZUNvbm5lY3RlZFRocmVlUGFydFBhcnRpdGlvbnMoZywgSikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChnLkluZGVwZW5kZW5jZU51bWJlcihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTEsSikpIDwgNClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmIChnLkluZGVwZW5kZW5jZU51bWJlcihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTIsSikpIDwgNClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmIChnLkluZGVwZW5kZW5jZU51bWJlcihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTMsSikpIDwgNClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmIChnLkVkZ2VzQmV0d2Vlbih0cmlwbGUuSXRlbTEsIHRyaXBsZS5JdGVtMikgPD0gMCAmJiBnLkluZGVwZW5kZW5jZU51bWJlcihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50PihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTEsdHJpcGxlLkl0ZW0yKSxKKSkgPCA1KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGcuRWRnZXNCZXR3ZWVuKHRyaXBsZS5JdGVtMSwgdHJpcGxlLkl0ZW0zKSA8PSAwICYmIGcuSW5kZXBlbmRlbmNlTnVtYmVyKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KHRyaXBsZS5JdGVtMSx0cmlwbGUuSXRlbTMpLEopKSA8IDUpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZy5FZGdlc0JldHdlZW4odHJpcGxlLkl0ZW0yLCB0cmlwbGUuSXRlbTMpIDw9IDAgJiYgZy5JbmRlcGVuZGVuY2VOdW1iZXIoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4oQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4odHJpcGxlLkl0ZW0yLHRyaXBsZS5JdGVtMiksSikpIDwgNSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+Pj4oKSwoX28xOSk9PntfbzE5LkFkZChuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4odHJpcGxlLkl0ZW0xKSwgZy5NYXhpbXVtSW5kZXBlbmRlbnRTdWJzZXQoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4odHJpcGxlLkl0ZW0xLEopKSkpO19vMTkuQWRkKG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih0cmlwbGUuSXRlbTIpLCBnLk1heGltdW1JbmRlcGVuZGVudFN1YnNldChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTIsSikpKSk7X28xOS5BZGQobmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHRyaXBsZS5JdGVtMyksIGcuTWF4aW11bUluZGVwZW5kZW50U3Vic2V0KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KHRyaXBsZS5JdGVtMyxKKSkpKTtyZXR1cm4gX28xOTt9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+LCBMaXN0PGludD4+PiBFbnVtZXJhdGVDb25uZWN0ZWRUaHJlZVBhcnRQYXJ0aXRpb25zKEdyYXBoIGcsIExpc3Q8aW50PiBKKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJlc3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxpbnQ+KGcuVmVydGljZXMsSikuVG9MaXN0KCk7XHJcbkFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuU2h1ZmZsZTxpbnQ+KCAgICAgICAgICAgIHJlc3QpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZmlyc3QgaW4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4ocmVzdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZpcnN0LkFkZChKWzBdKTtcclxuICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4oZy5GaW5kQ29tcG9uZW50cyhmaXJzdCkuR2V0RXF1aXZhbGVuY2VDbGFzc2VzKCkpICE9IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3QyID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8aW50PihyZXN0LGZpcnN0KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzZWNvbmQgaW4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4ocmVzdDIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZC5BZGQoSlsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PihnLkZpbmRDb21wb25lbnRzKHNlY29uZCkuR2V0RXF1aXZhbGVuY2VDbGFzc2VzKCkpICE9IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGhpcmQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxpbnQ+KHJlc3QyLHNlY29uZCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcmQuQWRkKEpbMl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4oZy5GaW5kQ29tcG9uZW50cyh0aGlyZCkuR2V0RXF1aXZhbGVuY2VDbGFzc2VzKCkpICE9IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+LCBMaXN0PGludD4+KGZpcnN0LCBzZWNvbmQsIHRoaXJkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEludDMyVXNhZ2VcclxuICAgIHtcclxuICAgICAgICBjb25zdCBVSW50MzIgRGVCcnVpam5NdWx0aXBsaWVyID0gMHgwNzdDQjUzMVU7XHJcbiAgICAgICAgc3RhdGljIGludFtdIERlQnJ1aWpuTG9va3VwID0gbmV3IGludFszMl0geyAwLCAxLCAyOCwgMiwgMjksIDE0LCAyNCwgMywgMzAsIDIyLCAyMCwgMTUsIDI1LCAxNywgNCwgOCwgMzEsIDI3LCAxMywgMjMsIDIxLCAxOSwgMTYsIDcsIDI2LCAxMiwgMTgsIDYsIDExLCA1LCAxMCwgOSB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IExlYXN0U2lnbmlmaWNhbnRCaXQodGhpcyBpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFt1bmNoZWNrZWQoKHVpbnQpKHggJiAteCkgKiBEZUJydWlqbk11bHRpcGxpZXIgPj4gMjcpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgaW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IHggJiAteDtcclxuICAgICAgICAgICAgeCBePSBtO1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbdW5jaGVja2VkKCh1aW50KW0gKiBEZUJydWlqbk11bHRpcGxpZXIgPj4gMjcpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFBvcHVsYXRpb25Db3VudCh0aGlzIHVpbnQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBxID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGIgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBxKys7XHJcbiAgICAgICAgICAgICAgICBiICY9IGIgLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBUb1NldCh0aGlzIHVpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvbkJpdHMgPSBuZXcgTGlzdDxpbnQ+KDEwKTtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxzYiA9IHggJiAoMCAtIHgpO1xyXG4gICAgICAgICAgICAgICAgb25CaXRzLkFkZChEZUJydWlqbkxvb2t1cFt1bmNoZWNrZWQobHNiICogRGVCcnVpam5NdWx0aXBsaWVyID4+IDI3KV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHggXj0gbHNiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb25CaXRzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEludDY0VXNhZ2VcclxuICAgIHtcclxuICAgICAgICBjb25zdCBVSW50NjQgRGVCcnVpam5NdWx0aXBsaWVyID0gMHgwN0VERDVFNTlBNEUyOEMyO1xyXG4gICAgICAgIHN0YXRpYyBpbnRbXSBEZUJydWlqbkxvb2t1cCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYzLCAgMCwgNTgsICAxLCA1OSwgNDcsIDUzLCAgMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYwLCAzOSwgNDgsIDI3LCA1NCwgMzMsIDQyLCAgMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYxLCA1MSwgMzcsIDQwLCA0OSwgMTgsIDI4LCAyMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDU1LCAzMCwgMzQsIDExLCA0MywgMTQsIDIyLCAgNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYyLCA1NywgNDYsIDUyLCAzOCwgMjYsIDMyLCA0MSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwLCAzNiwgMTcsIDE5LCAyOSwgMTAsIDEzLCAyMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDU2LCA0NSwgMjUsIDMxLCAzNSwgMTYsICA5LCAxMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQ0LCAyNCwgMTUsICA4LCAyMywgIDcsICA2LCAgNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgSW50NjRbXSBCaXRNYXNrID0gbmV3IEludDY0WzY0XTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgSW50NjRbXSBOb3RCaXRNYXNrID0gbmV3IEludDY0WzY0XTtcclxuXHJcbiAgICAgICAgc3RhdGljIEludDY0VXNhZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAoaW50IGJpdCBpbiBFbnVtZXJhYmxlLlJhbmdlKDAsIDY0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQml0TWFza1tiaXRdID0gKChJbnQ2NCkxKSA8PCBiaXQ7XHJcbiAgICAgICAgICAgICAgICBOb3RCaXRNYXNrW2JpdF0gPSB+KCgoSW50NjQpMSkgPDwgYml0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBEaWN0aW9uYXJ5PGxvbmcsIGxvbmc+IEdlbmVyYXRlUGFpck1hc2tzKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1hc2tNYXAgPSBuZXcgRGljdGlvbmFyeTxsb25nLCBsb25nPigpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXNrTWFwW0JpdE1hc2tbaV0gfCBCaXRNYXNrW2pdXSA9IEJpdE1hc2tbal07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXNrTWFwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJbnQ2NCBDbGVhckJpdCh0aGlzIEludDY0IHgsIGludCBiaXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4geCAmIE5vdEJpdE1hc2tbYml0XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSW50NjQgU2V0Qml0KHRoaXMgSW50NjQgeCwgaW50IGJpdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB4IHwgQml0TWFza1tiaXRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzQml0U2V0KHRoaXMgSW50NjQgeCwgaW50IGJpdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoeCAmIEJpdE1hc2tbYml0XSkgIT0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSW50NjQgRmxpcEJpdHModGhpcyBJbnQ2NCB4LCBpbnQgYml0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHggXiBCaXRNYXNrW2JpdF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSW50NjQgRmxpcEJpdHModGhpcyBJbnQ2NCB4LCBpbnQgYml0MSwgaW50IGJpdDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4geCBeIChCaXRNYXNrW2JpdDFdIHwgQml0TWFza1tiaXQyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSW50NjQgRmxpcEJpdHModGhpcyBJbnQ2NCB4LCBwYXJhbXMgaW50W10gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChiaXRzID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcclxuXHJcbiAgICAgICAgICAgIEludDY0IG1hc2sgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIGJpdHMpXHJcbiAgICAgICAgICAgICAgICBtYXNrIHw9IEJpdE1hc2tbYml0XTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4IF4gbWFzaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IExlYXN0U2lnbmlmaWNhbnRCaXQodGhpcyBJbnQ2NCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwW3VuY2hlY2tlZCgoVUludDY0KShiICYgLWIpICogRGVCcnVpam5NdWx0aXBsaWVyID4+IDU4KV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgSW50NjQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0geCAmIC14O1xyXG4gICAgICAgICAgICB4IF49IG07XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFsoKFVJbnQ2NCltICogRGVCcnVpam5NdWx0aXBsaWVyKSA+PiA1OF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBQb3B1bGF0aW9uQ291bnQodGhpcyBJbnQ2NCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHEgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoYiA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHErKztcclxuICAgICAgICAgICAgICAgIGIgJj0gYiAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBQb3B1bGF0aW9uQ291bnQodGhpcyB1bG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdWxvbmcgazEgPSAweDU1NTU1NTU1NTU1NTU1NTVVTDtcclxuICAgICAgICAgICAgY29uc3QgdWxvbmcgazIgPSAweDMzMzMzMzMzMzMzMzMzMzNVTDtcclxuICAgICAgICAgICAgY29uc3QgdWxvbmcgazQgPSAweDBmMGYwZjBmMGYwZjBmMGZVTDtcclxuICAgICAgICAgICAgeCA9IHggLSAoKHggPj4gMSkgJiBrMSk7XHJcbiAgICAgICAgICAgIHggPSAoeCAmIGsyKSArICgoeCA+PiAyKSAmIGsyKTtcclxuICAgICAgICAgICAgeCA9ICh4ICsgKHggPj4gNCkpICYgazQ7XHJcbiAgICAgICAgICAgIHggPSAoeCAqIDB4MDEwMTAxMDEwMTAxMDEwMVVMKSA+PiA1NjtcclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpeDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWxvbmcgUmlnaHRGaWxsVG9NU0IodGhpcyB1bG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDE7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAyO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gNDtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDg7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxNjtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDMyO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0JpdFN0cmluZyh0aGlzIEludDY0IHgsIGludCBsZW5ndGggPSA2NClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcIlwiLCBFbnVtZXJhYmxlLlJhbmdlKDAsIGxlbmd0aCkuU2VsZWN0PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBzdHJpbmc+KShiaXQgPT4geC5Jc0JpdFNldChiaXQpID8gXCIxXCIgOiBcIjBcIikpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IFRvU2V0KHRoaXMgSW50NjQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvbkJpdHMgPSBuZXcgTGlzdDxpbnQ+KDEwKTtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAgICAgIG9uQml0cy5BZGQoR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb25CaXRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gVG9TZXQodGhpcyBVSW50NjQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvbkJpdHMgPSBuZXcgTGlzdDxpbnQ+KDEwKTtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxzYiA9IHggJiAoMCAtIHgpO1xyXG4gICAgICAgICAgICAgICAgb25CaXRzLkFkZChEZUJydWlqbkxvb2t1cFt1bmNoZWNrZWQobHNiICogRGVCcnVpam5NdWx0aXBsaWVyID4+IDU4KV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHggXj0gbHNiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb25CaXRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEVudW1lcmF0ZUJpdHModGhpcyBJbnQ2NCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxzYiA9IEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCk7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbHNiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIFRvSW50NjQocGFyYW1zIGludFtdIGJpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBiaXRzKVxyXG4gICAgICAgICAgICAgICAgdG90YWwgfD0gQml0TWFza1tiaXRdO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIFRvSW50NjQodGhpcyBJRW51bWVyYWJsZTxpbnQ+IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIHNldClcclxuICAgICAgICAgICAgICAgIHRvdGFsIHw9IEJpdE1hc2tbYml0XTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1bG9uZyBUb1VJbnQ2NCh0aGlzIElFbnVtZXJhYmxlPGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIHNldClcclxuICAgICAgICAgICAgICAgIHRvdGFsIHw9IDFVTCA8PCBiaXQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxpbnQ+PiBFeHBhbmRJbnRvTGlzdHModGhpcyBMaXN0PEludDY0PiB4cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pih4cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHggPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih4LlRvU2V0KCkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1NldFN0cmluZyh0aGlzIEludDY0IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4geC5Ub1NldCgpLlRvU2V0U3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1NldFN0cmluZ1NtYWxsKHRoaXMgSW50NjQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcInxcIiwgc3RyaW5nLkpvaW48aW50PihcIlwiLCB4LlRvU2V0KCkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBBbGxTZXQodGhpcyBJbnQ2NCB4LCBpbnQgaSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoeCBeICh4ICsgMSkpLklzQml0U2V0KGkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGxvbmc+IEdldEJpdHModGhpcyBsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2V0Qml0cyA9IG5ldyBMaXN0PGxvbmc+KCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb25nIGxzYiA9IHggJiAteDtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRCaXRzLkFkZChsc2IpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggXj0gbHNiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2V0Qml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDx1bG9uZz4gR2V0Qml0cyh0aGlzIHVsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2V0Qml0cyA9IG5ldyBMaXN0PHVsb25nPigxNik7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyBsc2IgPSB4ICYgKDAgLSB4KTtcclxuICAgICAgICAgICAgICAgIHNldEJpdHMuQWRkKGxzYik7XHJcbiAgICAgICAgICAgICAgICB4IF49IGxzYjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNldEJpdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1NldFN0cmluZyh0aGlzIElFbnVtZXJhYmxlPEludDY0PiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwie1wiICsgc3RyaW5nLkpvaW4oXCIsIFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4obGlzdCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KShsID0+IGwuVG9TZXRTdHJpbmcoKSkpKSArIFwifVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9TZXRTdHJpbmcodGhpcyBJRW51bWVyYWJsZTxpbnQ+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ7XCIgKyBzdHJpbmcuSm9pbjxpbnQ+KFwiLCBcIiwgbGlzdCkgKyBcIn1cIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxueyBcclxuICAgIHB1YmxpYyBjbGFzcyBMYXp5PFQ+XHJcbiAgICB7XHJcbiAgICAgICAgRnVuYzxUPiBfY3JlYXRvcjtcclxuICAgICAgICBUIF92YWx1ZSA9IGRlZmF1bHQoVCk7XHJcbiAgICAgICAgb2JqZWN0IF90b2tlbiA9IG5ldyBvYmplY3QoKTtcclxuXHJcbiAgICAgICAgcHVibGljIFQgVmFsdWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3ZhbHVlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jayAoX3Rva2VuKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF92YWx1ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZhbHVlID0gX2NyZWF0b3IoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF92YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExhenkoRnVuYzxUPiBjcmVhdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NyZWF0b3IgPSBjcmVhdG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExhenkoRnVuYzxUPiBjcmVhdG9yLCBib29sIHRocmVhZFNhZmUpXHJcbiAgICAgICAgICAgIDogdGhpcyhjcmVhdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZvcmdldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChfdG9rZW4pXHJcbiAgICAgICAgICAgICAgICBfdmFsdWUgPSBkZWZhdWx0KFQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbXBsaWNpdCBvcGVyYXRvciBUKExhenk8VD4gZGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZGEuVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBPbmVGYWN0b3JpemF0aW9uc09mQ29tcGxldGVHcmFwaFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50W10+IEVudW1lcmF0ZU9uZUZhY3Rvcml6YXRpb25zKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyBsaXN0ID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuIC0gMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdCB8PSAxTCA8PCBpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9yaW5nID0gbmV3IGludFtuICogKG4gLSAxKSAvIDJdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4gLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICBjb2xvcmluZ1tpXSA9IGk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGlzdHMgPSBuZXcgbG9uZ1tuXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0c1tpXSA9IGxpc3QgXiAoMSA8PCAoaSAtIDEpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcmlvck5laWdoYm9ycyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoMSwgMiwgbiwgbGlzdHMsIGNvbG9yaW5nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxpbnRbXT4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoaW50IGksIGludCBqLCBpbnQgbiwgbG9uZ1tdIGxpc3RzLCBpbnRbXSBjb2xvcmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpID49IG4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb3B5ID0gbmV3IGludFtjb2xvcmluZy5MZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgQXJyYXkuQ29weShjb2xvcmluZywgY29weSwgY29sb3JpbmcuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBjb3B5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGogPj0gbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG9mIGluIEVudW1lcmF0ZU9uZUZhY3Rvcml6YXRpb25zKGkgKyAxLCBpICsgMiwgbiwgbGlzdHMsIGNvbG9yaW5nKSlcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gb2Y7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYyBpbiAobGlzdHNbaV0gJiBsaXN0c1tqXSkuRW51bWVyYXRlQml0cygpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RzW2ldID0gbGlzdHNbaV0uQ2xlYXJCaXQoYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbal0gPSBsaXN0c1tqXS5DbGVhckJpdChjKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JpbmdbaSAqIG4gLSBpICogKGkgKyAxKSAvIDIgKyBqIC0gaSAtIDFdID0gYztcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgb2YgaW4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoaSwgaiArIDEsIG4sIGxpc3RzLCBjb2xvcmluZykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBvZjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbaV0gPSBsaXN0c1tpXS5TZXRCaXQoYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbal0gPSBsaXN0c1tqXS5TZXRCaXQoYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldFNpZ25TdW0oaW50IG4sIG91dCBpbnQgcGx1cywgb3V0IGludCBtaW51cywgQWN0aW9uPGludCwgaW50PiBwcm9ncmVzcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBsdXMgPSAwO1xyXG4gICAgICAgICAgICBtaW51cyA9IDA7XHJcblxyXG4gICAgICAgICAgICBpbnQgbGlzdCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDE7IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3QgfD0gMSA8PCBpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG9mID0gbmV3IGludFtuLCBuXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBvZlswLCBpXSA9IG9mW2ksIDBdID0gaSAtIDE7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGlzdHMgPSBuZXcgaW50W25dO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3RzW2ldID0gbGlzdCBeICgxIDw8IChpIC0gMSkpO1xyXG5cclxuICAgICAgICAgICAgaW50IHRlcm0gPSBuICogKG4gLSAxKSAlIDQgPT0gMCA/IDEgOiAtMTtcclxuXHJcbiAgICAgICAgICAgIERvU2lnblN1bSgxLCAyLCBuLCBsaXN0cywgb2YsIHJlZiB0ZXJtLCByZWYgcGx1cywgcmVmIG1pbnVzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGludCwgaW50Pilwcm9ncmVzcyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcGx1cyAtIG1pbnVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgRG9UZXJtKGludCB0ZXJtLCByZWYgaW50IHBsdXMsIHJlZiBpbnQgbWludXMsIEFjdGlvbjxpbnQsIGludD4gcHJvZ3Jlc3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGVybSA+IDApXHJcbiAgICAgICAgICAgICAgICBwbHVzKys7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG1pbnVzKys7XHJcblxyXG4gICAgICAgICAgICBpZiAoKHBsdXMgKyBtaW51cykgJSAxMDAwMDAwID09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKHBsdXMsIG1pbnVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgRG9TaWduU3VtKGludCBpLCBpbnQgaiwgaW50IG4sIGludFtdIGxpc3RzLCBpbnRbLF0gb2YsIHJlZiBpbnQgdGVybSwgcmVmIGludCBwbHVzLCByZWYgaW50IG1pbnVzLCBBY3Rpb248aW50LCBpbnQ+IHByb2dyZXNzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGkgPj0gbiAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERvVGVybSh0ZXJtLCByZWYgcGx1cywgcmVmIG1pbnVzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGludCwgaW50Pilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IGxpc3RzW2ldICYgbGlzdHNbal07XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0geCAmIC14O1xyXG4gICAgICAgICAgICAgICAgICAgIHggXj0gYztcclxuICAgICAgICAgICAgICAgICAgICBsaXN0c1tpXSBePSBjO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RzW2pdIF49IGM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG9mW2ksIGpdID0gb2ZbaiwgaV0gPSBjO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmFjdG9yID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBrID0gMDsgayA8IGk7IGsrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjdG9yICo9IDEgfCAoKGMgLSBvZltrLCBqXSkgPj4gMzEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDwgajsgaysrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWN0b3IgKj0gMSB8ICgoYyAtIG9mW2ksIGtdKSA+PiAzMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRlcm0gKj0gZmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqID49IG4gLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb1NpZ25TdW0oaSArIDEsIGkgKyAyLCBuLCBsaXN0cywgb2YsIHJlZiB0ZXJtLCByZWYgcGx1cywgcmVmIG1pbnVzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGludCwgaW50Pilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb1NpZ25TdW0oaSwgaiArIDEsIG4sIGxpc3RzLCBvZiwgcmVmIHRlcm0sIHJlZiBwbHVzLCByZWYgbWludXMsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248aW50LCBpbnQ+KXByb2dyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXJtICo9IGZhY3RvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbaV0gXj0gYztcclxuICAgICAgICAgICAgICAgICAgICBsaXN0c1tqXSBePSBjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBPbkZhY3Rvcml6YXRpb25zT2ZDb21wbGV0ZUdyYXBoXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnRbXT4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIGxpc3QgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4gLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0IHw9IDFMIDw8IGk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JpbmcgPSBuZXcgaW50W24gKiAobiAtIDEpIC8gMl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDE7IGkrKylcclxuICAgICAgICAgICAgICAgIGNvbG9yaW5nW2ldID0gaTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsaXN0cyA9IG5ldyBsb25nW25dO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGlzdHNbaV0gPSBsaXN0IF4gKDEgPDwgKGkgLSAxKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29sb3JpbmdbaSAqIG4gLSBpICogKGkgKyAxKSAvIDJdID0gaSAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVPbmVGYWN0b3JpemF0aW9ucygxLCAyLCBuLCBsaXN0cywgY29sb3JpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPGludFtdPiBFbnVtZXJhdGVPbmVGYWN0b3JpemF0aW9ucyhpbnQgaSwgaW50IGosIGludCBuLCBsb25nW10gbGlzdHMsIGludFtdIGNvbG9yaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGkgPj0gbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvcHkgPSBuZXcgaW50W2NvbG9yaW5nLkxlbmd0aF07XHJcbiAgICAgICAgICAgICAgICBBcnJheS5Db3B5KGNvbG9yaW5nLCBjb3B5LCBjb2xvcmluZy5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGNvcHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaiA+PSBuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgb2YgaW4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoaSArIDEsIGkgKyAyLCBuLCBsaXN0cywgY29sb3JpbmcpKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBvZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjIGluIChsaXN0c1tpXSAmIGxpc3RzW2pdKS5FbnVtZXJhdGVCaXRzKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIGNsYXNzIE9ubGluZUNob2ljZUhhc2hHcmFwaFxyXG4gICAge1xyXG4gICAgICAgIGludFtdIF9mO1xyXG4gICAgICAgIGludFtdIF9nO1xyXG4gICAgICAgIGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBPbmxpbmVDaG9pY2VIYXNoR3JhcGgoaW50W10gZiwgaW50W10gZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9mID0gKGludFtdKWYuQ2xvbmUoKTtcclxuICAgICAgICAgICAgX2cgPSAoaW50W10pZy5DbG9uZSgpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZy5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9nW2ldID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgX2ZbaV0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBfZilcclxuICAgICAgICAgICAgICAgIF9oYXNoQ29kZSA9IF9oYXNoQ29kZSAqIDMzICsgaTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2godmFyIGkgaW4gX2cpXHJcbiAgICAgICAgICAgICAgICBfaGFzaENvZGUgPSBfaGFzaENvZGUgKiAzMyArIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvdGhlciA9IG9iaiBhcyBPbmxpbmVDaG9pY2VIYXNoR3JhcGg7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KF9nLG90aGVyLl9nKSAmJiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8aW50PihfZixvdGhlci5fZik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBPcmllbnRhdGlvbkhhc2hHcmFwaFxyXG4gICAge1xyXG4gICAgICAgIGJ5dGVbXSBfdmFsdWVzO1xyXG4gICAgICAgIExpc3Q8aW50PiBfb3V0TWludXNJbjtcclxuICAgICAgICBpbnQgX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgT3JpZW50YXRpb25IYXNoR3JhcGgoR3JhcGggZywgTGlzdDxpbnQ+IG91dE1pbnVzSW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdmFsdWVzID0gbmV3IGJ5dGVbZy5OICogKGcuTiAtIDEpIC8gMl07XHJcbiAgICAgICAgICAgIF9vdXRNaW51c0luID0gb3V0TWludXNJbjtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBnLk47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgZy5OOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gKGJ5dGUpKGdbaSwgal0gPyAxIDogMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3ZhbHVlc1trXSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ1tpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hhc2hDb2RlICs9IDEgPDwgKGsgJSAzMik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gb3V0TWludXNJbilcclxuICAgICAgICAgICAgICAgIF9oYXNoQ29kZSA9IF9oYXNoQ29kZSAqIDMzICsgaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG90aGVyID0gb2JqIGFzIE9yaWVudGF0aW9uSGFzaEdyYXBoO1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8aW50Pihfb3V0TWludXNJbixvdGhlci5fb3V0TWludXNJbikgJiYgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGJ5dGU+KF92YWx1ZXMsb3RoZXIuX3ZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlBvbHlub21pYWxzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBGYWN0b3JlZFJhdGlvbmFsXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHN0YXRpYyBGYWN0b3JlZFJhdGlvbmFsIFplcm8gPSBuZXcgRmFjdG9yZWRSYXRpb25hbCgpIHsgU2lnbiA9IDAgfTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBTaWduO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gSztcclxuXHJcbiAgICAgICAgcHVibGljIEZhY3RvcmVkUmF0aW9uYWwoKSB7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEZhY3RvcmVkUmF0aW9uYWwoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdnYgPSBuZXcgaW50WzExXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgamogPSAwOyBqaiA8PSAxMDsgamorKylcclxuICAgICAgICAgICAgICAgIHZ2W2pqXSA9IFBvd2VyKDIsIGpqKTtcclxuXHJcbiAgICAgICAgICAgIFNpZ24gPSBNYXRoLlNpZ24oKGRlY2ltYWwpbik7XHJcbiAgICAgICAgICAgIG4gKj0gU2lnbjtcclxuXHJcbiAgICAgICAgICAgIEsgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChuID4gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSy5BZGQoMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IFByaW1lTnVtYmVycy5HZXQoaSk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiAlIHAgPT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBLW2ldKys7XHJcbiAgICAgICAgICAgICAgICAgICAgbiAvPSBwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBGYWN0b3JlZFJhdGlvbmFsIG9wZXJhdG9yICooRmFjdG9yZWRSYXRpb25hbCBmaSwgRmFjdG9yZWRSYXRpb25hbCBmaTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2lnbiA9IGZpLlNpZ24gKiBmaTIuU2lnbjtcclxuICAgICAgICAgICAgdmFyIGsgPSBuZXcgTGlzdDxpbnQ+KE1hdGguTWF4KGZpLksuQ291bnQsIGZpMi5LLkNvdW50KSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2lnbiAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE1hdGguTWF4KGZpLksuQ291bnQsIGZpMi5LLkNvdW50KTsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGsuQWRkKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpIDwgZmkuSy5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICAgICAga1tpXSArPSBmaS5LW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpIDwgZmkyLksuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtbaV0gKz0gZmkyLktbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmFjdG9yZWRSYXRpb25hbCgpIHsgSyA9IGssIFNpZ24gPSBzaWduIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEZhY3RvcmVkUmF0aW9uYWwgb3BlcmF0b3IgLyhGYWN0b3JlZFJhdGlvbmFsIGZpLCBGYWN0b3JlZFJhdGlvbmFsIGZpMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaWduID0gZmkuU2lnbiAqIGZpMi5TaWduO1xyXG4gICAgICAgICAgICB2YXIgayA9IG5ldyBMaXN0PGludD4oTWF0aC5NYXgoZmkuSy5Db3VudCwgZmkyLksuQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzaWduICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTWF0aC5NYXgoZmkuSy5Db3VudCwgZmkyLksuQ291bnQpOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgay5BZGQoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBmaS5LLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrW2ldICs9IGZpLktbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBmaTIuSy5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICAgICAga1tpXSAtPSBmaTIuS1tpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGYWN0b3JlZFJhdGlvbmFsKCkgeyBLID0gaywgU2lnbiA9IHNpZ24gfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRvUmF0aW9uYWwob3V0IGludCB0b3AsIG91dCBpbnQgYm90dG9tKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEsgPT0gbnVsbCB8fCBTaWduID09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICBib3R0b20gPSAxO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0b3AgPSBTaWduO1xyXG4gICAgICAgICAgICBib3R0b20gPSAxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEsuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEtbaV0gPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHRvcCAqPSBQb3dlcihQcmltZU51bWJlcnMuR2V0KGkpLCBLW2ldKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBib3R0b20gKj0gUG93ZXIoUHJpbWVOdW1iZXJzLkdldChpKSwgLUtbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgUG93ZXIoaW50IHAsIGludCBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAoayA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gMTtcclxuICAgICAgICAgICAgICAgIHZhciBuID0gcDtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChlIDw9IGsgPj4gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuICo9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgZSA8PD0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBrIC09IGU7XHJcbiAgICAgICAgICAgICAgICBtICo9IG47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Qb2x5bm9taWFsc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JhcGhQb2x5bm9taWFsXHJcbiAgICB7XHJcbiAgICAgICAgQWxnb3JpdGhtcy5HcmFwaCBfZztcclxuICAgICAgICBMaXN0PExpc3Q8aW50Pj4gX3ByaW9yTmVpZ2hib3JzO1xyXG4gICAgICAgIE5vcm1hbGl6ZXIgX25vcm1hbGl6ZXI7XHJcbiAgICAgICAgU2lnbkxvb2t1cCBfc2lnbkxvb2t1cDtcclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgR3JhcGhQb2x5bm9taWFsKEFsZ29yaXRobXMuR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9nID0gZztcclxuICAgICAgIFxyXG4gICAgICAgICAgICBfcHJpb3JOZWlnaGJvcnMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IHcgPSAwOyB3IDwgX2cuTjsgdysrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfcHJpb3JOZWlnaGJvcnMuQWRkKG5ldyBMaXN0PGludD4oKSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCB2ID0gMDsgdiA8IHc7IHYrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ1t2LCB3XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3ByaW9yTmVpZ2hib3JzW3ddLkFkZCh2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBHZXRDb2VmZmljaWVudChpbnRbXSBwb3dlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9ub3JtYWxpemVyID0gbmV3IE5vcm1hbGl6ZXIocG93ZXIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGEgPSBuZXcgaW50W3Bvd2VyLkxlbmd0aF07XHJcbiAgICAgICAgICAgIGxvbmcgdG9wID0gMEw7XHJcbiAgICAgICAgICAgIGxvbmcgYm90dG9tID0gMUw7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0aWFsUHJvZHVjdCA9IG5ldyBGYWN0b3JlZFJhdGlvbmFsKCkgeyBLID0gbmV3IExpc3Q8aW50PigpLCBTaWduID0gMSB9O1xyXG4gICAgICAgICAgICBTdW1UZXJtcygwLCBhLCBwb3dlciwgcmVmIHBhcnRpYWxQcm9kdWN0LCByZWYgdG9wLCByZWYgYm90dG9tKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KSh0b3AgLyBib3R0b20pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBHZXRTaWduU3VtKGludFtdIHBvd2VyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3NpZ25Mb29rdXAgPSBuZXcgU2lnbkxvb2t1cChwb3dlcik7XHJcblxyXG4gICAgICAgICAgICB2YXIgYSA9IG5ldyBpbnRbcG93ZXIuTGVuZ3RoXTtcclxuICAgICAgICAgICAgdmFyIHN1bSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0aWFsUHJvZHVjdCA9IDE7XHJcbiAgICAgICAgICAgIFN1bVNpZ25zKDAsIGEsIHBvd2VyLCByZWYgcGFydGlhbFByb2R1Y3QsIHJlZiBzdW0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN1bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU3VtU2lnbnMoaW50IHcsIGludFtdIGEsIGludFtdIHBvd2VyLCByZWYgaW50IHBhcnRpYWxQcm9kdWN0LCByZWYgaW50IHN1bSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh3ID09IHBvd2VyLkxlbmd0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3VtICs9IHBhcnRpYWxQcm9kdWN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPD0gcG93ZXJbd107IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhW3ddID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9wcmlvck5laWdoYm9yc1t3XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCAqPSBfc2lnbkxvb2t1cC5TaWduW2Fbdl0sIGFbd11dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbFByb2R1Y3QgKj0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgICAgICBTdW1TaWducyh3ICsgMSwgYSwgcG93ZXIsIHJlZiBwYXJ0aWFsUHJvZHVjdCwgcmVmIHN1bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbFByb2R1Y3QgLz0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBTdW1UZXJtcyhpbnQgdywgaW50W10gYSwgaW50W10gcG93ZXIsIHJlZiBGYWN0b3JlZFJhdGlvbmFsIHBhcnRpYWxQcm9kdWN0LCByZWYgbG9uZyB0b3AsIHJlZiBsb25nIGJvdHRvbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh3ID09IHBvd2VyLkxlbmd0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBwYXJ0aWFsUHJvZHVjdCAvIF9ub3JtYWxpemVyLkdldChhKTtcclxuICAgICAgICAgICAgICAgIGludCB0b3AyO1xyXG4gICAgICAgICAgICAgICAgaW50IGJvdHRvbTI7XHJcbiAgICAgICAgICAgICAgICByLlRvUmF0aW9uYWwob3V0IHRvcDIsIG91dCBib3R0b20yKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0b3AgPSB0b3AgKiBib3R0b20yICsgYm90dG9tICogdG9wMjtcclxuICAgICAgICAgICAgICAgIGJvdHRvbSA9IGJvdHRvbSAqIGJvdHRvbTI7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdjZCA9IEdDRCh0b3AsIGJvdHRvbSk7XHJcbiAgICAgICAgICAgICAgICB0b3AgLz0gZ2NkO1xyXG4gICAgICAgICAgICAgICAgYm90dG9tIC89IGdjZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDw9IHBvd2VyW3ddOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYVt3XSA9IGo7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gbmV3IEZhY3RvcmVkUmF0aW9uYWwoKSB7IEsgPSBuZXcgTGlzdDxpbnQ+KCksIFNpZ24gPSAxIH07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ByaW9yTmVpZ2hib3JzW3ddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ICo9IF9ub3JtYWxpemVyLkZhY3RvcmVkRGlmZmVyZW5jZVthW3ZdLCBhW3ddXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuU2lnbiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbFByb2R1Y3QgKj0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgICAgICBTdW1UZXJtcyh3ICsgMSwgYSwgcG93ZXIsIHJlZiBwYXJ0aWFsUHJvZHVjdCwgcmVmIHRvcCwgcmVmIGJvdHRvbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbFByb2R1Y3QgLz0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9uZyBHQ0QobG9uZyB4LCBsb25nIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIHRtcDtcclxuICAgICAgICAgICAgeCA9IE1hdGguQWJzKHgpO1xyXG4gICAgICAgICAgICB5ID0gTWF0aC5BYnMoeSk7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdG1wID0geDtcclxuICAgICAgICAgICAgICAgIHggPSB5ICUgeDtcclxuICAgICAgICAgICAgICAgIHkgPSB0bXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgR3JhcGhQb2x5bm9taWFsRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldENvZWZmaWNpZW50KHRoaXMgQWxnb3JpdGhtcy5HcmFwaCBnLCBpbnRbXSBwb3dlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBncCA9IG5ldyBHcmFwaFBvbHlub21pYWwoZyk7XHJcbiAgICAgICAgICAgIHJldHVybiBncC5HZXRDb2VmZmljaWVudChwb3dlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRTaWduU3VtKHRoaXMgQWxnb3JpdGhtcy5HcmFwaCBnLCBpbnRbXSBwb3dlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBncCA9IG5ldyBHcmFwaFBvbHlub21pYWwoZyk7XHJcbiAgICAgICAgICAgIHJldHVybiBncC5HZXRTaWduU3VtKHBvd2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuUG9seW5vbWlhbHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIE5vcm1hbGl6ZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRmFjdG9yZWRSYXRpb25hbFssXSBGYWN0b3JlZERpZmZlcmVuY2U7XHJcbiAgICAgICAgcHVibGljIEZhY3RvcmVkUmF0aW9uYWxbLF0gSW5zaWRlUHJvZHVjdDtcclxuXHJcbiAgICAgICAgcHVibGljIE5vcm1hbGl6ZXIoaW50W10gaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBoZWlnaHQuTWF4KCk7XHJcblxyXG4gICAgICAgICAgICBGYWN0b3JlZERpZmZlcmVuY2UgPSBuZXcgRmFjdG9yZWRSYXRpb25hbFttICsgMSwgbSArIDFdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8PSBtOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8PSBtOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgRmFjdG9yZWREaWZmZXJlbmNlW2ksIGpdID0gbmV3IEZhY3RvcmVkUmF0aW9uYWwoaSAtIGopO1xyXG5cclxuICAgICAgICAgICAgSW5zaWRlUHJvZHVjdCA9IG5ldyBGYWN0b3JlZFJhdGlvbmFsW2hlaWdodC5MZW5ndGgsIG0gKyAxXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBoZWlnaHQuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDw9IGhlaWdodFtpXTsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEluc2lkZVByb2R1Y3RbaSwgal0gPSBuZXcgRmFjdG9yZWRSYXRpb25hbCgpIHsgSyA9IG5ldyBMaXN0PGludD4oKSwgU2lnbiA9IDEgfTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBrID0gMDsgayA8PSBoZWlnaHRbaV07IGsrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09IGopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEluc2lkZVByb2R1Y3RbaSwgal0gKj0gRmFjdG9yZWREaWZmZXJlbmNlW2osIGtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZhY3RvcmVkUmF0aW9uYWwgR2V0KGludFtdIGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbm9ybWFsaXplciA9IG5ldyBGYWN0b3JlZFJhdGlvbmFsKCkgeyBLID0gbmV3IExpc3Q8aW50PigpLCBTaWduID0gMSB9O1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgYS5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZXIgKj0gSW5zaWRlUHJvZHVjdFtpLCBhW2ldXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBub3JtYWxpemVyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Qb2x5bm9taWFsc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFByaW1lTnVtYmVyc1xyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyBMaXN0PGludD4gX3ByaW1lcyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vMjApPT57X28yMC5BZGQoMik7X28yMC5BZGQoMyk7X28yMC5BZGQoNSk7X28yMC5BZGQoNyk7X28yMC5BZGQoMTEpO19vMjAuQWRkKDEzKTtfbzIwLkFkZCgxNyk7X28yMC5BZGQoMTkpO3JldHVybiBfbzIwO30pO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXQoaW50IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBfcHJpbWVzLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgQ29tcHV0ZU1vcmVQcmltZXMoaSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gX3ByaW1lc1tpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIENvbXB1dGVNb3JlUHJpbWVzKGludCBpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBNYXRoLk1heChpLCAyICogX3ByaW1lcy5Db3VudCk7XHJcbiAgICAgICAgICAgIHZhciBwID0gX3ByaW1lc1tfcHJpbWVzLkNvdW50IC0gMV0gKyAyO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKF9wcmltZXMuQ291bnQgPD0gbSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKElzUHJpbWUocCkpXHJcbiAgICAgICAgICAgICAgICAgICAgX3ByaW1lcy5BZGQocCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBJc1ByaW1lKGludCBwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yKGludCBrID0gMDsgX3ByaW1lc1trXSAqIF9wcmltZXNba10gPD0gcDsgaysrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAocCAlIF9wcmltZXNba10gPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Qb2x5bm9taWFsc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2lnbkxvb2t1cFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnRbLF0gU2lnbjtcclxuICAgICAgICBwdWJsaWMgU2lnbkxvb2t1cChpbnRbXSBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IGhlaWdodC5NYXgoKTtcclxuXHJcbiAgICAgICAgICAgIFNpZ24gPSBuZXcgaW50W20gKyAxLCBtICsgMV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDw9IG07IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDw9IG07IGorKylcclxuICAgICAgICAgICAgICAgICAgICBTaWduW2ksIGpdID0gTWF0aC5TaWduKChkZWNpbWFsKShpIC0gaikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3Vic2V0RW51bWVyYXRvciA6IElFbnVtZXJhYmxlPEludDY0PlxyXG4gICAge1xyXG4gICAgICAgIGludCBfc2V0U2l6ZTtcclxuICAgICAgICBpbnQgX3N1YnNldFNpemU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdWJzZXRFbnVtZXJhdG9yKGludCBzZXRTaXplLCBpbnQgc3Vic2V0U2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9zZXRTaXplID0gc2V0U2l6ZTtcclxuICAgICAgICAgICAgX3N1YnNldFNpemUgPSBzdWJzZXRTaXplO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBJRW51bWVyYWJsZTxsb25nPiBNZW1iZXJzXHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxJbnQ2ND4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEVudW1lcmF0b3IoX3NldFNpemUsIF9zdWJzZXRTaXplKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBJRW51bWVyYWJsZSBNZW1iZXJzXHJcblxyXG4gICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvciBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgRW51bWVyYXRvciA6IElFbnVtZXJhdG9yPEludDY0PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYm9vbCBfaXNGaXJzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGludCBfc2V0U2l6ZTtcclxuICAgICAgICAgICAgaW50IF9zdWJzZXRTaXplO1xyXG5cclxuICAgICAgICAgICAgSW50NjQgX2N1cnJlbnQ7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgRW51bWVyYXRvcihpbnQgc2V0U2l6ZSwgaW50IHN1YnNldFNpemUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9zZXRTaXplID0gc2V0U2l6ZTtcclxuICAgICAgICAgICAgICAgIF9zdWJzZXRTaXplID0gc3Vic2V0U2l6ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBJRW51bWVyYXRvcjxsb25nPiBNZW1iZXJzXHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgbG9uZyBDdXJyZW50XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldCB7IHJldHVybiBfY3VycmVudDsgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICAgICAjcmVnaW9uIElEaXNwb3NhYmxlIE1lbWJlcnNcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIERpc3Bvc2UoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gSUVudW1lcmF0b3IgTWVtYmVyc1xyXG5cclxuICAgICAgICAgICAgb2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvci5DdXJyZW50XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldCB7IHJldHVybiBDdXJyZW50OyB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIE1vdmVOZXh0KClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9pc0ZpcnN0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfc3Vic2V0U2l6ZSA+IF9zZXRTaXplKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9jdXJyZW50ID0gKCgxIDw8IF9zdWJzZXRTaXplKSAtIDEpIDw8IChfc2V0U2l6ZSAtIF9zdWJzZXRTaXplKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2lzRmlyc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBJbnQ2NCBsc2IgPSBfY3VycmVudCAmIC1fY3VycmVudDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobHNiID4gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY3VycmVudCA9IF9jdXJyZW50IF4gbHNiIF4gKGxzYiA+PiAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgSW50NjQgaGlnaCA9IF9jdXJyZW50ICYgKF9jdXJyZW50ICsgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhpZ2ggPT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIEludDY0IGxvdyA9IF9jdXJyZW50IF4gaGlnaDtcclxuICAgICAgICAgICAgICAgIGxvdyA9IChsb3cgPDwgMikgKyAzO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlICgobG93ICYgaGlnaCkgPT0gMCkgbG93IDw8PSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIF9jdXJyZW50ID0gaGlnaCBeIGxvdztcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHZvaWQgUmVzZXQoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfaXNGaXJzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRyYW5zaXRpdmVQYXJ0aXRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxQYXJ0PiBQYXJ0cyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgVHJhbnNpdGl2ZVBhcnRpdGlvbihMaXN0PGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUGFydHMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8UGFydD4oKSwoX28yMSk9PntfbzIxLkFkZChuZXcgUGFydCgpIHsgU2V0ID0gc2V0LCBTY29yZXMgPSBuZXcgTGlzdDxpbnQ+KCkgfSk7cmV0dXJuIF9vMjE7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZWZpbmUoaW50W10gc2NvcmUsIGludCBzY29yZU51bWJlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQYXJ0c1swXS5TY29yZXMuQ291bnQgPj0gc2NvcmVOdW1iZXIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVmaW5lZCA9IG5ldyBMaXN0PFBhcnQ+KFBhcnRzLkNvdW50KTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnQgaW4gUGFydHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBSZWZpbmVQYXJ0KHBhcnQsIHNjb3JlKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBrdnAgaW4gbWFwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gbmV3IFBhcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBwLlNldCA9IGt2cC5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBwLlNjb3JlcyA9IG5ldyBMaXN0PGludD4ocGFydC5TY29yZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHAuU2NvcmVzLkFkZChrdnAuS2V5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmaW5lZC5BZGQocCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFBhcnRzID0gcmVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IFJlZmluZVBhcnQoUGFydCBwYXJ0LCBpbnRbXSBzY29yZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtYXAgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gcGFydC5TZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gc2NvcmVbdl07XHJcbiAgICAgICAgICAgICAgICBMaXN0PGludD4gbDtcclxuICAgICAgICAgICAgICAgIGlmICghbWFwLlRyeUdldFZhbHVlKHgsIG91dCBsKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcFt4XSA9IGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbC5BZGQodik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0cCA9IG9iaiBhcyBUcmFuc2l0aXZlUGFydGl0aW9uO1xyXG4gICAgICAgICAgICBpZiAodHAgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0IGluIFBhcnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHRwLkZpbmRQYXJ0V2l0aFNjb3JlcyhwYXJ0LlNjb3Jlcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocC5TZXQuQ291bnQgIT0gcGFydC5TZXQuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJhc2UuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFBhcnQgRmluZFBhcnRXaXRoU2NvcmVzKExpc3Q8aW50PiBzY29yZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydCBpbiBQYXJ0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KHBhcnQuU2NvcmVzLCBzY29yZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBQYXJ0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IFNldCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgICAgIHB1YmxpYyBMaXN0PGludD4gU2NvcmVzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFVucGVybXV0ZWRBc3NpZ25tZW50RW51bWVyYXRvciA6IElFbnVtZXJhYmxlPExpc3Q8SW50NjQ+PlxyXG4gICAge1xyXG4gICAgICAgIGludCBfdmVydGV4Q291bnQ7XHJcbiAgICAgICAgRnVuYzxpbnQsIGludD4gX2Y7XHJcbiAgICAgICAgaW50IF9wb3RTaXplO1xyXG4gICAgICAgIGludCBfc3RhcnQ7XHJcbiAgICAgICAgaW50IF9zdGVwO1xyXG5cclxuICAgICAgICBEaWN0aW9uYXJ5PGxvbmcsIGxvbmc+IF9wYWlyTWFza1RvQmFkTWFzaztcclxuXHJcbiAgICAgICAgcHVibGljIFVucGVybXV0ZWRBc3NpZ25tZW50RW51bWVyYXRvcihpbnQgdmVydGV4Q291bnQsIEZ1bmM8aW50LCBpbnQ+IGYsIGludCBwb3RTaXplLCBpbnQgc3RhcnQgPSAwLCBpbnQgc3RlcCA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdmVydGV4Q291bnQgPSB2ZXJ0ZXhDb3VudDtcclxuICAgICAgICAgICAgX2YgPSBmO1xyXG4gICAgICAgICAgICBfcG90U2l6ZSA9IHBvdFNpemU7XHJcbiAgICAgICAgICAgIF9zdGFydCA9IHN0YXJ0O1xyXG4gICAgICAgICAgICBfc3RlcCA9IHN0ZXA7XHJcblxyXG4gICAgICAgICAgICBfcGFpck1hc2tUb0JhZE1hc2sgPSBJbnQ2NFVzYWdlLkdlbmVyYXRlUGFpck1hc2tzKF9wb3RTaXplKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxMaXN0PGxvbmc+PiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPj4oR2V0RW51bWVyYWJsZShfdmVydGV4Q291bnQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPiwgaW50LCBib29sPikoKGxpc3QsIGkpID0+IChpIC0gX3N0YXJ0KSAlIF9zdGVwID09IDApKS5HZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PGxvbmc+PiBHZXRFbnVtZXJhYmxlUmVjdXJzaXZlKGludCB2ZXJ0ZXhDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2ZXJ0ZXhDb3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRW5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPj4oQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8bG9uZz4oKCgobG9uZykxIDw8IF9mKDApKSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4+KEdldEVudW1lcmFibGVSZWN1cnNpdmUodmVydGV4Q291bnQgLSAxKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+Pj4pKGxpc3QgPT4gR2V0RXh0ZW5zaW9ucyhsaXN0KSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxsb25nPj4gR2V0RW51bWVyYWJsZShpbnQgdmVydGV4Q291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJRW51bWVyYWJsZTxMaXN0PGxvbmc+PiBlbnVtZXJhYmxlID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+PihBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkVuTGlzdDxsb25nPigoKChsb25nKTEgPDwgX2YoMCkpIC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgdmVydGV4Q291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPj4oZW51bWVyYWJsZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+Pj4pKGxpc3QgPT4gR2V0RXh0ZW5zaW9ucyhsaXN0KSkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVudW1lcmFibGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PGxvbmc+PiBHZXRFeHRlbnNpb25zKExpc3Q8bG9uZz4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByZXN0cmljdGVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxsb25nLCBsb25nPj4oX3BhaXJNYXNrVG9CYWRNYXNrLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGxvbmcsIGxvbmc+LCBib29sPikoa3ZwID0+IElzUmVzdHJpY3RlZChrdnAuS2V5LCBsaXN0KSkpO1xyXG5cclxuICAgICAgICAgICAgaW50IHNpemUgPSBfZihsaXN0LkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmcm9tIHN1YnNldCBpbiBuZXcgU3Vic2V0RW51bWVyYXRvcihfcG90U2l6ZSwgc2l6ZSlcclxuICAgICAgICAgICAgICAgICAgIHdoZXJlIHJlc3RyaWN0ZWQuQWxsKChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGxvbmcsIGxvbmc+LCBib29sPikoa3ZwID0+IChzdWJzZXQgJiBrdnAuS2V5KSAhPSBrdnAuVmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgICAgc2VsZWN0IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PGxvbmc+KGxpc3QsbmV3W10geyBzdWJzZXQgfSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIElzUmVzdHJpY3RlZChsb25nIHAsIExpc3Q8bG9uZz4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB4IGluIGxpc3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbnRlcnNlY3Rpb24gPSB4ICYgcDtcclxuICAgICAgICAgICAgICAgIGlmIChpbnRlcnNlY3Rpb24gIT0gMCAmJiBpbnRlcnNlY3Rpb24gIT0geClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEVxdWl2YWxlbmNlUmVsYXRpb248VD5cclxuICAgIHtcclxuICAgICAgICBEaWN0aW9uYXJ5PFQsIE5vZGU+IF9ub2RlTG9va3VwID0gbmV3IERpY3Rpb25hcnk8VCwgTm9kZT4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkRWxlbWVudChUIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMb29rdXBOb2RlKHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVsYXRlKFQgeCwgVCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG54ID0gTG9va3VwTm9kZSh4KTtcclxuICAgICAgICAgICAgdmFyIG55ID0gTG9va3VwTm9kZSh5KTtcclxuXHJcbiAgICAgICAgICAgIHZhciB4Um9vdCA9IEZpbmQobngpO1xyXG4gICAgICAgICAgICB2YXIgeVJvb3QgPSBGaW5kKG55KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh4Um9vdCA9PSB5Um9vdClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmICh4Um9vdC5SYW5rIDwgeVJvb3QuUmFuaylcclxuICAgICAgICAgICAgICAgIHhSb290LlBhcmVudCA9IHlSb290O1xyXG4gICAgICAgICAgICBlbHNlIGlmICh4Um9vdC5SYW5rID4geVJvb3QuUmFuaylcclxuICAgICAgICAgICAgICAgIHlSb290LlBhcmVudCA9IHhSb290O1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHlSb290LlBhcmVudCA9IHhSb290O1xyXG4gICAgICAgICAgICAgICAgeFJvb3QuUmFuaysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBcmVSZWxhdGVkKFQgeCwgVCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG54ID0gTG9va3VwTm9kZSh4KTtcclxuICAgICAgICAgICAgdmFyIG55ID0gTG9va3VwTm9kZSh5KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBGaW5kKG54KSA9PSBGaW5kKG55KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxUPiBHZXRFcXVpdmFsZW5jZUNsYXNzKFQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBueCA9IExvb2t1cE5vZGUoeCk7XHJcbiAgICAgICAgICAgIHZhciB4Um9vdCA9IEZpbmQobngpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlPihfbm9kZUxvb2t1cC5WYWx1ZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlLCBib29sPikobm9kZSA9PiBGaW5kKG5vZGUpID09IHhSb290KSkuU2VsZWN0PFQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZSwgVD4pKG5vZGUgPT4gbm9kZS5UKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8SUVudW1lcmFibGU8VD4+IEdldEVxdWl2YWxlbmNlQ2xhc3NlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Hcm91cEJ5PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZSxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGU+KF9ub2RlTG9va3VwLlZhbHVlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGUsIGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZT4pKG5vZGUgPT4gRmluZChub2RlKSkpLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5MaW5xLkVudW1lcmFibGVJbnN0YW5jZTxUPj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGUsIGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZT4sIGdsb2JhbDo6U3lzdGVtLkxpbnEuRW51bWVyYWJsZUluc3RhbmNlPFQ+PikoZ3JvdXAgPT4gZ3JvdXAuU2VsZWN0PFQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZSwgVD4pKG5vZGUgPT4gbm9kZS5UKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIE5vZGUgRmluZChOb2RlIG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobi5QYXJlbnQgIT0gbilcclxuICAgICAgICAgICAgICAgIG4uUGFyZW50ID0gRmluZChuLlBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbi5QYXJlbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBOb2RlIExvb2t1cE5vZGUoVCB0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTm9kZSBub2RlO1xyXG4gICAgICAgICAgICBpZiAoIV9ub2RlTG9va3VwLlRyeUdldFZhbHVlKHQsIG91dCBub2RlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5ldyBOb2RlKCk7XHJcbiAgICAgICAgICAgICAgICBub2RlLlBhcmVudCA9IG5vZGU7XHJcbiAgICAgICAgICAgICAgICBub2RlLlJhbmsgPSAwO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5UID0gdDtcclxuXHJcbiAgICAgICAgICAgICAgICBfbm9kZUxvb2t1cFt0XSA9IG5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xhc3MgTm9kZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIE5vZGUgUGFyZW50IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgICAgcHVibGljIGludCBSYW5rIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgICAgcHVibGljIFQgVCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuVXRpbGl0eVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRmFjdG9yYWRpY1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBGYWN0b3JhZGljKGxvbmcgdmFsdWUsIGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVmFsdWUgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIERpZ2l0cyA9IG5ldyBMaXN0PGludD4obik7XHJcbiAgICAgICAgICAgIERpZ2l0cy5BZGQoMCk7XHJcblxyXG4gICAgICAgICAgICBpbnQgaSA9IDE7XHJcbiAgICAgICAgICAgIHdoaWxlICh2YWx1ZSA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERpZ2l0cy5BZGQoKGludCkodmFsdWUgJSArK2kpKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgLyBpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGkgPSBEaWdpdHMuQ291bnQ7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBEaWdpdHMuQWRkKDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZhY3RvcmFkaWMoUGVybXV0YXRpb24gcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIERpZ2l0cyA9IG5ldyBMaXN0PGludD4ocC5OKTtcclxuXHJcbiAgICAgICAgICAgIExpc3Q8aW50PiBlbGVtZW50cyA9IG5ldyBMaXN0PGludD4ocC5OKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwLk47IGkrKylcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLkFkZChpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcC5OOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERpZ2l0cy5BZGQoZWxlbWVudHMuSW5kZXhPZihwW2ldKSk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5SZW1vdmUocFtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIERpZ2l0cy5SZXZlcnNlKCk7XHJcblxyXG4gICAgICAgICAgICBWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgIGludCBuID0gMTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBEaWdpdHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmFsdWUgKz0gRGlnaXRzW2ldICogbjtcclxuICAgICAgICAgICAgICAgIG4gKj0gKGkgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IERpZ2l0c1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0O1xyXG4gICAgICAgICAgICBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBsb25nIFZhbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQ7XHJcbiAgICAgICAgICAgIHByaXZhdGUgc2V0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBGbG93c1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEJpcGFydGl0ZU1heGltdW1NYXRjaGluZyhpbnQgbiwgTGlzdDxMaXN0PGludD4+IGFkamFjZW5jaWVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNhcGFjaXR5ID0gbmV3IGludFtuICsgMiwgbiArIDJdO1xyXG4gICAgICAgICAgICB2YXIgc291cmNlID0gMDtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IDE7XHJcblxyXG4gICAgICAgICAgICB2YXIgbG8gPSAyO1xyXG4gICAgICAgICAgICB2YXIgcm8gPSBsbyArIGFkamFjZW5jaWVzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBhZGphY2VuY2llcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXBhY2l0eVtzb3VyY2UsIGxvICsgaV0gPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBqIGluIGFkamFjZW5jaWVzW2ldKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcGFjaXR5W2xvICsgaSwgcm8gKyBqXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FwYWNpdHlbcm8gKyBqLCB0YXJnZXRdID0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE1heEZsb3coY2FwYWNpdHksIHNvdXJjZSwgdGFyZ2V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IE1heEZsb3coaW50WyxdIGNhcGFjaXR5LCBpbnQgc291cmNlLCBpbnQgdGFyZ2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGb3JkRnVsa2Vyc29uKGNhcGFjaXR5LCBzb3VyY2UsIHRhcmdldCkuTWF4RmxvdygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xhc3MgRm9yZEZ1bGtlcnNvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IF9uO1xyXG4gICAgICAgICAgICBpbnQgX3NvdXJjZTtcclxuICAgICAgICAgICAgaW50IF90YXJnZXQ7XHJcbiAgICAgICAgICAgIGludFssXSBfY2FwYWNpdHk7XHJcbiAgICAgICAgICAgIGludFssXSBfZmxvdztcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBGb3JkRnVsa2Vyc29uKGludFssXSBjYXBhY2l0eSwgaW50IHNvdXJjZSwgaW50IHRhcmdldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2NhcGFjaXR5ID0gY2FwYWNpdHk7XHJcbiAgICAgICAgICAgICAgICBfc291cmNlID0gc291cmNlO1xyXG4gICAgICAgICAgICAgICAgX3RhcmdldCA9IHRhcmdldDtcclxuXHJcbiAgICAgICAgICAgICAgICBfbiA9IGNhcGFjaXR5LkdldExlbmd0aCgwKTtcclxuICAgICAgICAgICAgICAgIF9mbG93ID0gbmV3IGludFtfbiwgX25dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IE1heEZsb3coKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vMjIpPT57X28yMi5BZGQoMCk7cmV0dXJuIF9vMjI7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvbmUgPSAhRmluZEF1Z21lbnRpbmdQYXRoKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb25lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgQWRkRmxvdyhwYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRW51bWVyYWJsZS5SYW5nZSgwLCBfbikuU3VtKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoaSA9PiBfZmxvd1tfc291cmNlLCBpXSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBib29sIEZpbmRBdWdtZW50aW5nUGF0aChMaXN0PGludD4gcGF0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3QgPSBwYXRoW3BhdGguQ291bnQgLSAxXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdCA9PSBfdGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBqIGluIE91dE5laWdoYm9ycyhsYXN0KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGF0aC5Db250YWlucyhqKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBhdGguQWRkKGopO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXNBdWdtZW50aW5nID0gRmluZEF1Z21lbnRpbmdQYXRoKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0F1Z21lbnRpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwYXRoLlJlbW92ZShqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIElFbnVtZXJhYmxlPGludD4gT3V0TmVpZ2hib3JzKGludCBpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IF9uOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9jYXBhY2l0eVtpLCBqXSAtIF9mbG93W2ksIGpdID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGo7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZvaWQgQWRkRmxvdyhMaXN0PGludD4gcGF0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdhaW4gPSBGaW5kR2FpbihwYXRoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBhdGguQ291bnQgLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Zsb3dbcGF0aFtpXSwgcGF0aFtpICsgMV1dICs9IGdhaW47XHJcbiAgICAgICAgICAgICAgICAgICAgX2Zsb3dbcGF0aFtpICsgMV0sIHBhdGhbaV1dID0gLV9mbG93W3BhdGhbaV0sIHBhdGhbaSArIDFdXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50IEZpbmRHYWluKExpc3Q8aW50PiBwYXRoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2FpbiA9IGludC5NYXhWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBhdGguQ291bnQgLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FpbiA9IE1hdGguTWluKGdhaW4sIF9jYXBhY2l0eVtwYXRoW2ldLCBwYXRoW2kgKyAxXV0gLSBfZmxvd1twYXRoW2ldLCBwYXRoW2kgKyAxXV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBnYWluO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBMaW5xRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8VHVwbGU8VCwgVD4+IENhcnRlc2lhblByb2R1Y3Q8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBhLCBJRW51bWVyYWJsZTxUPiBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4sZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8VCwgVD4+KENhcnRlc2lhblByb2R1Y3Q8VD4obmV3W10geyBhLCBiIH0pLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4sIGdsb2JhbDo6U3lzdGVtLlR1cGxlPFQsIFQ+PikocyA9PiBuZXcgVHVwbGU8VCwgVD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FbGVtZW50QXQ8VD4ocywwKSwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FbGVtZW50QXQ8VD4ocywxKSkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxUPj4gQ2FydGVzaWFuUHJvZHVjdDxUPih0aGlzIElFbnVtZXJhYmxlPElFbnVtZXJhYmxlPFQ+PiBzZXF1ZW5jZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxUPj4gZW1wdHlQcm9kdWN0ID0gbmV3W10geyBFbnVtZXJhYmxlLkVtcHR5PFQ+KCkgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4+KFxyXG5zZXF1ZW5jZXMsICAgICAgICAgICAgICBlbXB0eVByb2R1Y3QsXHJcbihnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4+KSggICAgICAgICAgICAgIChhY2N1bXVsYXRvciwgc2VxdWVuY2UpID0+XHJcbiAgICAgICAgICAgICAgICBmcm9tIGFjY3NlcSBpbiBhY2N1bXVsYXRvclxyXG4gICAgICAgICAgICAgICAgZnJvbSBpdGVtIGluIHNlcXVlbmNlXHJcbiAgICAgICAgICAgICAgICBzZWxlY3QgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8VD4oYWNjc2VxLG5ld1tdIHsgaXRlbSB9KSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxUPj4gQ2FydGVzaWFuUHJvZHVjdDxUPih0aGlzIElFbnVtZXJhYmxlPExpc3Q8VD4+IHNlcXVlbmNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIElFbnVtZXJhYmxlPElFbnVtZXJhYmxlPFQ+PiBlbXB0eVByb2R1Y3QgPSBuZXdbXSB7IEVudW1lcmFibGUuRW1wdHk8VD4oKSB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4+Pihcclxuc2VxdWVuY2VzLCAgICAgICAgICAgICAgZW1wdHlQcm9kdWN0LFxyXG4oZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4+KSggICAgICAgICAgICAgIChhY2N1bXVsYXRvciwgc2VxdWVuY2UpID0+XHJcbiAgICAgICAgICAgICAgICBmcm9tIGFjY3NlcSBpbiBhY2N1bXVsYXRvclxyXG4gICAgICAgICAgICAgICAgZnJvbSBpdGVtIGluIHNlcXVlbmNlXHJcbiAgICAgICAgICAgICAgICBzZWxlY3QgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8VD4oYWNjc2VxLG5ld1tdIHsgaXRlbSB9KSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxUPiBDb25jYXQ8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBlLCBUIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gZSlcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiB2O1xyXG4gICAgICAgICAgICB5aWVsZCByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPFQ+IERpc3RpbmN0PFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gc291cmNlLCBGdW5jPFQsIFQsIGJvb2w+IGFyZUVxdWFsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHlpZWxkZWQgPSBuZXcgTGlzdDxUPigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gc291cmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8VD4oeWllbGRlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBib29sPikoeCA9PiAhYXJlRXF1YWwoeCwgdCkpKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZGVkLkFkZCh0KTtcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgTGlzdFV0aWxpdHlcclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgY2xhc3MgTGlzdFV0aWxpdHlHZW5lcmljPFQ+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdGF0aWMgSGFzaFNldDxUPiBfc2V0ID0gbmV3IEhhc2hTZXQ8VD4oKTtcclxuICAgICAgICAgICAgc3RhdGljIERpY3Rpb25hcnk8VCwgaW50PiBfbXVsdGlTZXQgPSBuZXcgRGljdGlvbmFyeTxULCBpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gSW50ZXJzZWN0aW9uKElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxUPigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbkIgPSBfc2V0O1xyXG4gICAgICAgICAgICAgICAgaW5CLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQilcclxuICAgICAgICAgICAgICAgICAgICBpbkIuQWRkKHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbnRlcnNlY3Rpb24gPSBuZXcgTGlzdDxUPihpbkIuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5CLkNvbnRhaW5zKHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24uQWRkKHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcnNlY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEludGVyc2VjdGlvbkNvdW50KElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbkIgPSBfc2V0O1xyXG4gICAgICAgICAgICAgICAgaW5CLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQilcclxuICAgICAgICAgICAgICAgICAgICBpbkIuQWRkKHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkIuQ29udGFpbnModCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gRGlmZmVyZW5jZShJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBCID0gbmV3IExpc3Q8VD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5CID0gX3NldDtcclxuICAgICAgICAgICAgICAgIGluQi5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEIpXHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLkFkZCh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IG5ldyBMaXN0PFQ+KGluQi5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5CLkNvbnRhaW5zKHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlLkFkZCh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlmZmVyZW5jZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IFVuaW9uKExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQSA9PSBudWxsICYmIEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICAgICAgICAgIGlmIChBID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEI7XHJcbiAgICAgICAgICAgICAgICBpZiAoQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBBO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbkIgPSBfc2V0O1xyXG4gICAgICAgICAgICAgICAgaW5CLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoVCB0IGluIEIpXHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLkFkZCh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdW5pb24gPSBuZXcgTGlzdDxUPihCKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKFQgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5CLkNvbnRhaW5zKHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlvbi5BZGQodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuaW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gVW5pb24oTGlzdDxUPiBBLCBUIGIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB1bmlvbiA9IG5ldyBMaXN0PFQ+KEEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF1bmlvbi5Db250YWlucyhiKSlcclxuICAgICAgICAgICAgICAgICAgICB1bmlvbi5BZGQoYik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuaW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gTXVsdGlTZXRJbnRlcnNlY3Rpb24oSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PFQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGluQiA9IF9tdWx0aVNldDtcclxuICAgICAgICAgICAgICAgIGluQi5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGluQi5UcnlHZXRWYWx1ZSh0LCBvdXQgY291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbkJbdF0gPSBjb3VudCArIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbiA9IG5ldyBMaXN0PFQ+KGluQi5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBjb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBpbkIuVHJ5R2V0VmFsdWUodCwgb3V0IGNvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5BZGQodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQlt0XSA9IGNvdW50IC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludGVyc2VjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTXVsdGlTZXRJbnRlcnNlY3Rpb25Db3VudChJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5CID0gX211bHRpU2V0O1xyXG4gICAgICAgICAgICAgICAgaW5CLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLlRyeUdldFZhbHVlKHQsIG91dCBjb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGluQlt0XSA9IGNvdW50ICsgMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLlRyeUdldFZhbHVlKHQsIG91dCBjb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbkJbdF0gPSBjb3VudCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBzb3J0ZWQgbGlzdHNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gRGlmZmVyZW5jZVNvcnRlZDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8VD4oQSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgQyA9IG5ldyBMaXN0PFQ+KE1hdGguTWF4KDQsIEEuQ291bnQgLSBCLkNvdW50KSk7XHJcbiAgICAgICAgICAgIGludCBqID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBBLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgQi5Db3VudCAmJiBBW2ldLkNvbXBhcmVUbyhCW2pdKSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgaisrO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChqID49IEIuQ291bnQgfHwgQVtpXS5Db21wYXJlVG8oQltqXSkgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIEMuQWRkKEFbaV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBJbnRlcnNlY3Rpb25Tb3J0ZWQ8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICAgICAgd2hlcmUgVCA6IElDb21wYXJhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxUPigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIEMgPSBuZXcgTGlzdDxUPihNYXRoLk1pbihBLkNvdW50LCBCLkNvdW50KSk7XHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuICAgICAgICAgICAgaW50IGogPSAwO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGkgPCBBLkNvdW50ICYmIGogPCBCLkNvdW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29tcGFyZSA9IEFbaV0uQ29tcGFyZVRvKEJbal0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgQy5BZGQoQVtpXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlID49IDApXHJcbiAgICAgICAgICAgICAgICAgICAgaisrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEludGVyc2VjdGlvbkNvdW50U29ydGVkPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuICAgICAgICAgICAgaW50IGogPSAwO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGkgPCBBLkNvdW50ICYmIGogPCBCLkNvdW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29tcGFyZSA9IEFbaV0uQ29tcGFyZVRvKEJbal0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmUgPj0gMClcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBVbmlvblNvcnRlZDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkRpZmZlcmVuY2VTb3J0ZWQ8VD4oQSxCKTtcclxuICAgICAgICAgICAgbGlzdC5BZGRSYW5nZShBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRGlmZmVyZW5jZVNvcnRlZDxUPihCLEEpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEVxdWFsU29ydGVkPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPT0gQi5Db3VudCAmJiBJbnRlcnNlY3Rpb25Db3VudFNvcnRlZDxUPihBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFN1YnNldEVxdWFsU29ydGVkPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEludGVyc2VjdGlvbkNvdW50U29ydGVkPFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU3Vic2V0U29ydGVkPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPCBCLkNvdW50ICYmIEludGVyc2VjdGlvbkNvdW50U29ydGVkPFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxUPj4gTWF4aW1hbEVsZW1lbnRzU29ydGVkPFQ+KHRoaXMgTGlzdDxMaXN0PFQ+PiBBKVxyXG4gICAgICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQS5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2hhaW5IZWFkcyA9IG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIEEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZW1vdmVkID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKGhlYWQgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkPFQ+KGhlYWQsc2V0KSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoKHgpID0+IHsgfSApKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZW1vdmVkID4gMCB8fCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGNoYWluSGVhZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoaGVhZCA9PiAhQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkPFQ+KHNldCxoZWFkKSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSGVhZHMuQWRkKHNldCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaGFpbkhlYWRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBpbnQgc3BlY2lmaWNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBEaWZmZXJlbmNlU29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEEpO1xyXG5cclxuICAgICAgICAgICAgdmFyIEMgPSBuZXcgTGlzdDxpbnQ+KE1hdGguTWF4KDQsIEEuQ291bnQgLSBCLkNvdW50KSk7XHJcbiAgICAgICAgICAgIGludCBqID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBBLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgQi5Db3VudCAmJiBBW2ldID4gQltqXSlcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGogPj0gQi5Db3VudCB8fCBBW2ldIDwgQltqXSlcclxuICAgICAgICAgICAgICAgICAgICBDLkFkZChBW2ldKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBJbnRlcnNlY3Rpb25Tb3J0ZWQodGhpcyBMaXN0PGludD4gQSwgTGlzdDxpbnQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgQyA9IG5ldyBMaXN0PGludD4oTWF0aC5NaW4oQS5Db3VudCwgQi5Db3VudCkpO1xyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIGludCBqID0gMDtcclxuXHJcbiAgICAgICAgICAgIGludCBhYyA9IEEuQ291bnQ7XHJcbiAgICAgICAgICAgIGludCBiYyA9IEIuQ291bnQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChpIDwgYWMgJiYgaiA8IGJjKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYSA9IEFbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IEJbal07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGEgPT0gYilcclxuICAgICAgICAgICAgICAgICAgICBDLkFkZChhKTtcclxuICAgICAgICAgICAgICAgIGlmIChhIDw9IGIpXHJcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGEgPj0gYilcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgSW50ZXJzZWN0aW9uQ291bnRTb3J0ZWQodGhpcyBMaXN0PGludD4gQSwgTGlzdDxpbnQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICBpbnQgaiA9IDA7XHJcblxyXG4gICAgICAgICAgICBpbnQgYWMgPSBBLkNvdW50O1xyXG4gICAgICAgICAgICBpbnQgYmMgPSBCLkNvdW50O1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IGFjICYmIGogPCBiYylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBBW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBCW2pdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhID09IGIpXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIGlmIChhIDw9IGIpXHJcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGEgPj0gYilcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IFVuaW9uU29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBBLkRpZmZlcmVuY2VTb3J0ZWQoQik7XHJcbiAgICAgICAgICAgIGxpc3QuQWRkUmFuZ2UoQi5EaWZmZXJlbmNlU29ydGVkKEEpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEVxdWFsU29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPT0gQi5Db3VudCAmJiBJbnRlcnNlY3Rpb25Db3VudFNvcnRlZChBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFN1YnNldEVxdWFsU29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEludGVyc2VjdGlvbkNvdW50U29ydGVkKEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU3Vic2V0U29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPCBCLkNvdW50ICYmIEludGVyc2VjdGlvbkNvdW50U29ydGVkKEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxpbnQ+PiBNYXhpbWFsRWxlbWVudHNTb3J0ZWQodGhpcyBMaXN0PExpc3Q8aW50Pj4gQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQS5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjaGFpbkhlYWRzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNldCBpbiBBKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlZCA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoaGVhZCA9PiBoZWFkLlN1YnNldEVxdWFsU29ydGVkKHNldCkpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZWQgPiAwIHx8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoaGVhZCA9PiAhc2V0LlN1YnNldEVxdWFsU29ydGVkKGhlYWQpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5IZWFkcy5BZGQoc2V0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNoYWluSGVhZHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBNdWx0aVNldEludGVyc2VjdGlvbjxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHlHZW5lcmljPFQ+Lk11bHRpU2V0SW50ZXJzZWN0aW9uKEEsIEIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTXVsdGlTZXRJbnRlcnNlY3Rpb25Db3VudDxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHlHZW5lcmljPFQ+Lk11bHRpU2V0SW50ZXJzZWN0aW9uQ291bnQoQSwgQik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgTXVsdGlTZXRFcXVhbDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPT0gQi5Db3VudCAmJiBNdWx0aVNldEludGVyc2VjdGlvbkNvdW50PFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgTXVsdGlTZXRTdWJzZXRFcXVhbDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE11bHRpU2V0SW50ZXJzZWN0aW9uQ291bnQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBNdWx0aVNldFN1YnNldDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPCBCLkNvdW50ICYmIE11bHRpU2V0SW50ZXJzZWN0aW9uQ291bnQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBCaW5vbWlhbENvZWZmaWNpZW50KGxvbmcgbiwgbG9uZyBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGsgPCAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbG9uZyBtYXggPSBNYXRoLk1heChrLCBuIC0gayk7XHJcbiAgICAgICAgICAgIGxvbmcgbWluID0gTWF0aC5NaW4oaywgbiAtIGspO1xyXG5cclxuICAgICAgICAgICAgbG9uZyByZXN1bHQgPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAobiA+IG1heClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICo9IG47XHJcbiAgICAgICAgICAgICAgICBuLS07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChtaW4gPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgLz0gbWluO1xyXG5cclxuICAgICAgICAgICAgICAgIG1pbi0tO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9TdHJpbmc8VD4oTGlzdDxUPiBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKFQgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kRm9ybWF0KFwiezB9LCBcIiwgdC5Ub1N0cmluZygpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzYi5Ub1N0cmluZygpLlRyaW1FbmQoJyAnLCAnLCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IERpZmZlcmVuY2U8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5R2VuZXJpYzxUPi5EaWZmZXJlbmNlKEEsIEIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IEludGVyc2VjdGlvbjxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHlHZW5lcmljPFQ+LkludGVyc2VjdGlvbihBLCBCKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEludGVyc2VjdGlvbkNvdW50PFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eUdlbmVyaWM8VD4uSW50ZXJzZWN0aW9uQ291bnQoQSwgQik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gVW5pb248VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eUdlbmVyaWM8VD4uVW5pb24oQSwgQik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gVW5pb248VD4odGhpcyBMaXN0PFQ+IEEsIFQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eUdlbmVyaWM8VD4uVW5pb24oQSwgYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgRXF1YWw8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBLkNvdW50ID09IEIuQ291bnQgJiYgSW50ZXJzZWN0aW9uQ291bnQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBTdWJzZXRFcXVhbDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEludGVyc2VjdGlvbkNvdW50PFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU3Vic2V0PFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5Db3VudCA8IEIuQ291bnQgJiYgSW50ZXJzZWN0aW9uQ291bnQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PFQ+PiBNYXhpbWFsRWxlbWVudHM8VD4odGhpcyBMaXN0PExpc3Q8VD4+IEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEEuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxMaXN0PFQ+PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNoYWluSGVhZHMgPSBuZXcgTGlzdDxMaXN0PFQ+PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNldCBpbiBBKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlZCA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oY2hhaW5IZWFkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShoZWFkID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbDxUPihoZWFkLHNldCkpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKCh4KSA9PiB7IH0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZW1vdmVkID4gMCB8fCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGNoYWluSGVhZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoaGVhZCA9PiAhQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsPFQ+KHNldCxoZWFkKSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSGVhZHMuQWRkKHNldCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaGFpbkhlYWRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8VD4+IEdlbmVyYXRlU3VibGlzdHM8VD4odGhpcyBMaXN0PFQ+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PExpc3Q8VD4+IHN1Ymxpc3RzID0gbmV3IExpc3Q8TGlzdDxUPj4oKTtcclxuICAgICAgICAgICAgc3VibGlzdHMuQWRkKG5ldyBMaXN0PFQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgTGlzdDxUPiBjbG9uZSA9IG5ldyBMaXN0PFQ+KGxpc3QpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGNsb25lLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVCBoZWFkID0gY2xvbmVbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgaW50IGNvdW50ID0gc3VibGlzdHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTGlzdDxUPiB1bmlvbiA9IG5ldyBMaXN0PFQ+KHN1Ymxpc3RzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB1bmlvbi5BZGQoaGVhZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN1Ymxpc3RzLkFkZCh1bmlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY2xvbmUuUmVtb3ZlQXQoMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdWJsaXN0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PFQ+PiBHZW5lcmF0ZVN1Ymxpc3RzPFQ+KHRoaXMgTGlzdDxUPiBsaXN0LCBpbnQgc2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8TGlzdDxUPj4gc3VibGlzdHMgPSBuZXcgTGlzdDxMaXN0PFQ+PigpO1xyXG4gICAgICAgICAgICBpbnQgbiA9IGxpc3QuQ291bnQ7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKExpc3Q8Ym9vbD4gaW5PdXQgaW4gRW51bWVyYXRlU2hvcnRMZXgobiwgc2l6ZSkpXHJcbiAgICAgICAgICAgICAgICBzdWJsaXN0cy5BZGQoRXh0cmFjdFN1Ymxpc3Q8VD4obGlzdCwgaW5PdXQpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdWJsaXN0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxUPj4gRW51bWVyYXRlU3VibGlzdHM8VD4odGhpcyBMaXN0PFQ+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgbiA9IGxpc3QuQ291bnQ7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKExpc3Q8Ym9vbD4gaW5PdXQgaW4gRW51bWVyYXRlU2hvcnRMZXgobikpXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gRXh0cmFjdFN1Ymxpc3Q8VD4obGlzdCwgaW5PdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PFQ+PiBFbnVtZXJhdGVTdWJsaXN0czxUPih0aGlzIExpc3Q8VD4gbGlzdCwgaW50IHNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgbiA9IGxpc3QuQ291bnQ7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKExpc3Q8Ym9vbD4gaW5PdXQgaW4gRW51bWVyYXRlU2hvcnRMZXgobiwgc2l6ZSkpXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gRXh0cmFjdFN1Ymxpc3Q8VD4obGlzdCwgaW5PdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IE5leHRTdWJsaXN0PFQ+KExpc3Q8VD4gbGlzdCwgaW50IHNpemUsIHJlZiBMaXN0PGJvb2w+IHN0YXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IG4gPSBsaXN0LkNvdW50O1xyXG4gICAgICAgICAgICBib29sIGFyZU1vcmUgPSBOZXh0U2hvcnRMZXgobiwgc2l6ZSwgcmVmIHN0YXRlKTtcclxuXHJcbiAgICAgICAgICAgIExpc3Q8VD4gc3VibGlzdCA9IEV4dHJhY3RTdWJsaXN0PFQ+KGxpc3QsIHN0YXRlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghYXJlTW9yZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3VibGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBMaXN0PFQ+IEV4dHJhY3RTdWJsaXN0PFQ+KExpc3Q8VD4gbGlzdCwgTGlzdDxib29sPiBpbk91dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8VD4gc3VibGlzdCA9IG5ldyBMaXN0PFQ+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5PdXQuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluT3V0W2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHN1Ymxpc3QuQWRkKGxpc3RbaV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3VibGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PGJvb2w+PiBFbnVtZXJhdGVTaG9ydExleChpbnQgbiwgaW50IGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBrID0gTWF0aC5NYXgoMCwgayk7XHJcblxyXG4gICAgICAgICAgICBMaXN0PGJvb2w+IGxpc3QgPSBuZXcgTGlzdDxib29sPihuKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBrOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0LkFkZCh0cnVlKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGs7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0LkFkZChmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICBkb1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbGlzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoTmV4dFNhbWVUcnVlQ291bnQobGlzdCwgaykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PGJvb2w+PiBFbnVtZXJhdGVTaG9ydExleChpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3Q8Ym9vbD4obik7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdC5BZGQoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgZG9cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2hpbGUgKE5leHQobGlzdCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PGJvb2w+PiBFbnVtZXJhdGVTaG9ydExleE5vbmVtcHR5KGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgayA9IDE7IGsgPD0gbjsgaysrKVxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGxpc3QgaW4gRW51bWVyYXRlU2hvcnRMZXgobiwgaykpXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBOZXh0U2hvcnRMZXgoaW50IG4sIGludCBrLCByZWYgTGlzdDxib29sPiBzdGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBrID0gTWF0aC5NYXgoMCwgayk7XHJcblxyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSBuZXcgTGlzdDxib29sPihuKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgazsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLkFkZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBrOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLkFkZChmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGsgPiAwICYmIGsgPCBuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFNhbWVUcnVlQ291bnQoc3RhdGUsIGspO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgTmV4dChMaXN0PGJvb2w+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgdHJ1ZUNvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxib29sPigoKElFbnVtZXJhYmxlPGJvb2w+KWxpc3QpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGJvb2wsIGJvb2w+KShiID0+IGIpKTtcclxuICAgICAgICAgICAgaWYgKHRydWVDb3VudCA9PSBsaXN0LkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaW50IGZpcnN0SG9sZSA9IEZpbmRGaXJzdEhvbGUobGlzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmlyc3RIb2xlID49IGxpc3QuQ291bnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdHJ1ZUNvdW50ICsgMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RbaV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IHRydWVDb3VudCArIDE7IGkgPCBsaXN0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdFtpXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGlzdFtmaXJzdEhvbGVdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgaW5pdGlhbFRydWVzID0gdHJ1ZUNvdW50O1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IGZpcnN0SG9sZTsgaSA8IGxpc3QuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdFtpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFRydWVzLS07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpbml0aWFsVHJ1ZXM7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBsaXN0W2ldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBpbml0aWFsVHJ1ZXM7IGkgPCBmaXJzdEhvbGU7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBsaXN0W2ldID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgTmV4dFNhbWVUcnVlQ291bnQoTGlzdDxib29sPiBsaXN0LCBpbnQgdHJ1ZUNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGZpcnN0SG9sZSA9IEZpbmRGaXJzdEhvbGUobGlzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmlyc3RIb2xlID49IGxpc3QuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBsaXN0W2ZpcnN0SG9sZV0gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaW50IGluaXRpYWxUcnVlcyA9IHRydWVDb3VudDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGZpcnN0SG9sZTsgaSA8IGxpc3QuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFRydWVzLS07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5pdGlhbFRydWVzOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0W2ldID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluaXRpYWxUcnVlczsgaSA8IGZpcnN0SG9sZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdFtpXSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgaW50IEZpbmRGaXJzdEhvbGUoTGlzdDxib29sPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IGxpc3QuQ291bnQgLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdFtpXSAmJiAhbGlzdFtpICsgMV0pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaSArIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIGludCBiYXNlZFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBOZXh0U2hvcnRMZXgoaW50IG4sIGludCBrLCByZWYgaW50W10gc3RhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgayA9IE1hdGguTWF4KDAsIGspO1xyXG5cclxuICAgICAgICAgICAgICAgIHN0YXRlID0gbmV3IGludFtuXTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgazsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlW2ldID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gayA8PSAwIHx8IGsgPj0gbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYm9vbCBkb25lID0gIU5leHRTYW1lT25Db3VudChzdGF0ZSwgayk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZG9uZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBrOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVbaV0gPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBrOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlW2ldID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRvbmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBOZXh0U2FtZU9uQ291bnQoaW50W10gbGlzdCwgaW50IHRydWVDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBmaXJzdEhvbGUgPSBGaW5kRmlyc3RIb2xlKGxpc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZpcnN0SG9sZSA+PSBsaXN0Lkxlbmd0aClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGxpc3RbZmlyc3RIb2xlXSA9IDE7XHJcblxyXG4gICAgICAgICAgICBpbnQgaW5pdGlhbE9uZXMgPSB0cnVlQ291bnQ7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBmaXJzdEhvbGU7IGkgPCBsaXN0Lkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsT25lcyAtPSBsaXN0W2ldO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGluaXRpYWxPbmVzOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0W2ldID0gMTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluaXRpYWxPbmVzOyBpIDwgZmlyc3RIb2xlOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0W2ldID0gMDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGludCBGaW5kRmlyc3RIb2xlKGludFtdIGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChpIDwgbGlzdC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdFtpXSA9PSAxICYmIGxpc3RbaSArIDFdID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaSArIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gcGFydGl0aW9uc1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxMaXN0PGludD4+PiBFbnVtZXJhdGVQYXJ0aXRpb25zVW5vcmRlcmVkKGludFtdIHNpemVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihFbnVtZXJhdGVQYXJ0aXRpb25zKHNpemVzLCAwKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBib29sPikoKGFhLCBiYikgPT4gUGFydGlhbE9yZGVyLkVtYmVkczxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYWEsIGJiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBhcnRpYWxPcmRlclJlc3VsdD4pKChhLCBiKSA9PiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRXF1YWw8aW50PihhLGIpID8gbmV3IFBhcnRpYWxPcmRlclJlc3VsdCgpIHsgQXRNb3N0ID0gdHJ1ZSwgQXRMZWFzdCA9IHRydWUgfSA6IG5ldyBQYXJ0aWFsT3JkZXJSZXN1bHQoKSkpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8TGlzdDxpbnQ+Pj4gRW51bWVyYXRlUGFydGl0aW9ucyhpbnRbXSBzaXplcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVQYXJ0aXRpb25zKHNpemVzLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PExpc3Q8aW50Pj4+IEVudW1lcmF0ZVBhcnRpdGlvbnMoaW50W10gc2l6ZXMsIGludCBpdGVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkbGVzcyA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2l6ZXMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzaXplc1tpXSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNoaWxkbGVzcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHNpemVzW2ldLS07XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBFbnVtZXJhdGVQYXJ0aXRpb25zKHNpemVzLCBpdGVtICsgMSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGl0aW9uW2ldLkFkZChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gcGFydGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNpemVzW2ldKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjaGlsZGxlc3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0aXRpb24gPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNpemVzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpdGlvbi5BZGQobmV3IExpc3Q8aW50PigpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gcGFydGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBzdHJ1Y3QgUGFydGlhbE9yZGVyUmVzdWx0XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGJvb2wgQXRNb3N0O1xyXG4gICAgICAgIHB1YmxpYyBib29sIEF0TGVhc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBQYXJ0aWFsT3JkZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgRW1iZWRzPFQ+KExpc3Q8VD4gQSwgTGlzdDxUPiBCLCBGdW5jPFQsIFQsIFBhcnRpYWxPcmRlclJlc3VsdD4gb3JkZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQS5Db3VudCA+IEIuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgbiA9IEEuQ291bnQgKyBCLkNvdW50O1xyXG4gICAgICAgICAgICB2YXIgYWRqYWNlbmNpZXMgPSBuZXcgTGlzdDxMaXN0PGludD4+KEEuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGEgaW4gQSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5laWdoYm9ycyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBCLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG9yZGVyKGEsIEJbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuQXRNb3N0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnMuQWRkKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGFkamFjZW5jaWVzLkFkZChuZWlnaGJvcnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRmxvd3MuQmlwYXJ0aXRlTWF4aW11bU1hdGNoaW5nKG4sIGFkamFjZW5jaWVzKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBQZXJtdXRhdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBQZXJtdXRhdGlvbihGYWN0b3JhZGljIGYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2VxdWVuY2UgPSBuZXcgTGlzdDxpbnQ+KGYuRGlnaXRzLkNvdW50KTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmLkRpZ2l0cy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2UuQWRkKGkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmLkRpZ2l0cy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgaiA9IGYuRGlnaXRzW2YuRGlnaXRzLkNvdW50IC0gMSAtIGldICsgaTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZS5JbnNlcnQoaSwgc2VxdWVuY2Vbal0pO1xyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2UuUmVtb3ZlQXQoaiArIDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBTZXF1ZW5jZSA9IHNlcXVlbmNlO1xyXG4gICAgICAgICAgICBOID0gU2VxdWVuY2UuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUGVybXV0YXRpb24oTGlzdDxpbnQ+IHNlcXVlbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU2VxdWVuY2UgPSBuZXcgTGlzdDxpbnQ+KHNlcXVlbmNlKTtcclxuICAgICAgICAgICAgTiA9IFNlcXVlbmNlLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgdmFyIGhhc2ggPSBuZXcgRGljdGlvbmFyeTxpbnQsIGJvb2w+KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKGludCBpIGluIHNlcXVlbmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzaC5Db250YWluc0tleShpKSlcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiVGhlIHN1cHBsaWVkIHNlcXVlbmNlIGhhcyBkdXBsaWNhdGVzLlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDAgfHwgaSA+IE4gLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJUaGUgc3VwcGxpZWQgc2VxdWVuY2UgaGFzIGVsZW1lbnRzIHRoYXQgYXJlIG91dCBvZiByYW5nZS5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaGFzaFtpXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFQ+IEFwcGx5PFQ+KExpc3Q8VD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChsaXN0ID09IG51bGwgfHwgbGlzdC5Db3VudCAhPSBOKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlRoZSBwZXJtdXRhdGlvbiBjYW5ub3QgYmUgYXBwbGllZCB0byB0aGUgZ2l2ZW4gbGlzdC5cIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgcGVybXV0ZWRMaXN0ID0gbmV3IExpc3Q8VD4oTik7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIHBlcm11dGVkTGlzdC5BZGQobGlzdFt0aGlzW2ldXSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcGVybXV0ZWRMaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFBlcm11dGF0aW9uIEludmVyc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNlcXVlbmNlID0gbmV3IGludFtOXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VbdGhpc1tpXV0gPSBpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJtdXRhdGlvbihuZXcgTGlzdDxpbnQ+KHNlcXVlbmNlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFBlcm11dGF0aW9uIG9wZXJhdG9yICooUGVybXV0YXRpb24gcDEsIFBlcm11dGF0aW9uIHAyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHAxID09IG51bGwgfHwgcDIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgaWYgKHAxLk4gIT0gcDIuTilcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJZb3UgdHJpZWQgdG8gbXVsdGlwbHkgcGVybXV0YXRpb25zIG9mIGRpZmZlcmVudCBzZXRzLlwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZXF1ZW5jZSA9IG5ldyBMaXN0PGludD4ocDIuTik7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHAyLk47IGkrKylcclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlLkFkZChwMVtwMltpXV0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJtdXRhdGlvbihzZXF1ZW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgPT0oUGVybXV0YXRpb24gcDEsIFBlcm11dGF0aW9uIHAyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKChvYmplY3QpcDEgPT0gbnVsbCAmJiAob2JqZWN0KXAyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKChvYmplY3QpcDEgPT0gbnVsbCB8fCAob2JqZWN0KXAyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcDEuRXF1YWxzKHAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShQZXJtdXRhdGlvbiBwMSwgUGVybXV0YXRpb24gcDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gIShwMSA9PSBwMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvYmogPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBUb1N0cmluZygpID09IG9iai5Ub1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIoXCIgKyBzdHJpbmcuSm9pbjxpbnQ+KFwiIFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihTZXF1ZW5jZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGkgPT4gaSArIDEpKSkgKyBcIilcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRvU3RyaW5nKCkuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8UGVybXV0YXRpb24+IEVudW1lcmF0ZUFsbChpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IENvdW50aW5nLkZhY3RvcmlhbChuKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobG9uZyBpID0gMDsgaSA8IGNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IFBlcm11dGF0aW9uKG5ldyBGYWN0b3JhZGljKGksIG4pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgdGhpc1tpbnQgaV1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU2VxdWVuY2VbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gU2VxdWVuY2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDtcclxuICAgICAgICAgICAgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IE5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDtcclxuICAgICAgICAgICAgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuVXRpbGl0eVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2FmZUNvbGxlY3Rpb248VD4gOiBJQ29sbGVjdGlvbjxUPlxyXG4gICAge1xyXG4gICAgICAgIGludCBfY291bnQ7XHJcbiAgICAgICAgTm9kZSBfZmlyc3Q7XHJcbiAgICAgICAgTm9kZSBfbGFzdDtcclxuXHJcbiAgICAgICAgcHVibGljIFNhZmVDb2xsZWN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maXJzdCA9IG5ldyBOb2RlKCk7XHJcbiAgICAgICAgICAgIF9sYXN0ID0gX2ZpcnN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkKFQgaXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9sYXN0Lk5leHQgPSBuZXcgTm9kZSgpIHsgSXRlbSA9IGl0ZW0gfTtcclxuICAgICAgICAgICAgX2xhc3QgPSBfbGFzdC5OZXh0O1xyXG4gICAgICAgICAgICBfY291bnQrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maXJzdC5OZXh0ID0gbnVsbDtcclxuICAgICAgICAgICAgX2xhc3QgPSBfZmlyc3Q7XHJcbiAgICAgICAgICAgIF9jb3VudCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWlucyhUIGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRmluZFByZXZpb3VzTm9kZShpdGVtKSAhPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ29weVRvKFRbXSBhcnJheSwgaW50IGFycmF5SW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IF9maXJzdDtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gbm9kZS5OZXh0O1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBhcnJheVthcnJheUluZGV4KytdID0gbmV4dC5JdGVtO1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5leHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ291bnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfY291bnQ7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzUmVhZE9ubHlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgUmVtb3ZlKFQgaXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gRmluZFByZXZpb3VzTm9kZShpdGVtKTtcclxuICAgICAgICAgICAgaWYgKG5vZGUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZXh0ID0gbm9kZS5OZXh0O1xyXG4gICAgICAgICAgICBpZiAobmV4dCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICBcclxuICAgICAgICAgICAgbm9kZS5OZXh0ID0gbmV4dC5OZXh0O1xyXG4gICAgICAgICAgICBfY291bnQtLTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmF0b3I8VD4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IF9maXJzdDtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gbm9kZS5OZXh0O1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5leHQuSXRlbTtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhYmxlLkdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIE5vZGUgRmluZFByZXZpb3VzTm9kZShUIGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IF9maXJzdDtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gbm9kZS5OZXh0O1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoRXF1YWxpdHlDb21wYXJlcjxUPi5EZWZhdWx0LkVxdWFscyhuZXh0Lkl0ZW0sIGl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG5cclxuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXh0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNsYXNzIE5vZGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBUIEl0ZW07XHJcbiAgICAgICAgICAgIHB1YmxpYyBOb2RlIE5leHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNlcXVlbmNlR2VuZXJhbGl6ZXI8VD5cclxuICAgIHtcclxuICAgICAgICBpbnQgX2xlbmd0aDtcclxuICAgICAgICBMaXN0PFQ+IF9hbHBoYWJldDtcclxuICAgICAgICBMaXN0PE1hdGNoZXI+IF9tYXRjaGVycyA9IG5ldyBMaXN0PE1hdGNoZXI+KCk7XHJcbiAgICAgICAgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gX2dlbmVyYWxpemVycztcclxuXHJcbiAgICAgICAgcHVibGljIFNlcXVlbmNlR2VuZXJhbGl6ZXIoaW50IGxlbmd0aCwgTGlzdDxUPiBhbHBoYWJldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSBsZW5ndGg7XHJcbiAgICAgICAgICAgIF9hbHBoYWJldCA9IGFscGhhYmV0O1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gYWxwaGFiZXQpXHJcbiAgICAgICAgICAgICAgICBBZGRNYXRjaGVyKHQuVG9TdHJpbmcoKSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgYm9vbD4pKHR0ID0+IHQuRXF1YWxzKHR0KSkpO1xyXG5cclxuICAgICAgICAgICAgQWRkTWF0Y2hlcihcIipcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgYm9vbD4pKHR0ID0+IHRydWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZE1hdGNoZXIoc3RyaW5nIG5hbWUsIEZ1bmM8VCwgYm9vbD4gbWF0Y2gpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfbWF0Y2hlcnMuQWRkKG5ldyBNYXRjaGVyKCkgeyBOYW1lID0gbmFtZSwgTWF0Y2ggPSBtYXRjaCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFZlY3RvckNvbXBhcmVyIF92ZWN0b3JDb21wYXJlciA9IG5ldyBWZWN0b3JDb21wYXJlcigpO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8TWF0Y2hlcj4+IEdlbmVyYWxpemUoTGlzdDxMaXN0PFQ+PiBleGFtcGxlcywgTGlzdDxMaXN0PFQ+PiBub25FeGFtcGxlcywgYm9vbCBtb3N0R2VuZXJhbCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQnVpbGRNYXRjaGVyTGF0dGljZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvc3NpYmxlcyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGV4YW1wbGUgaW4gZXhhbXBsZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBhc01hdGNoZXJJbmRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8VCxpbnQ+KGV4YW1wbGUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgaW50PikodCA9PiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkZpcnN0SW5kZXg8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyPihfbWF0Y2hlcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyLCBib29sPikobSA9PiBtLk5hbWUgPT0gdC5Ub1N0cmluZygpKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHBvc3NpYmxlcy5BZGRSYW5nZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihhc01hdGNoZXJJbmRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShpID0+IF9nZW5lcmFsaXplcnNbaV0pKSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHYgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih2KSkpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcG9zc2libGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4ocG9zc2libGVzLF92ZWN0b3JDb21wYXJlcikuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbm9uRXhhbXBsZSBpbiBub25FeGFtcGxlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFzTWF0Y2hlckluZGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxULGludD4obm9uRXhhbXBsZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBpbnQ+KSh0ID0+IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRmlyc3RJbmRleDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPFQ+Lk1hdGNoZXI+KF9tYXRjaGVycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPFQ+Lk1hdGNoZXIsIGJvb2w+KShtID0+IG0uTmFtZSA9PSB0LlRvU3RyaW5nKCkpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgcG9zc2libGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHBvc3NpYmxlcyxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihhc01hdGNoZXJJbmRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShpID0+IF9nZW5lcmFsaXplcnNbaV0pKSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHYgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih2KSkpLCBfdmVjdG9yQ29tcGFyZXIpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZ2VuZXJhbGl6YXRpb25zID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihleGFtcGxlcyk7XHJcbiAgICAgICAgICAgIHdoaWxlIChyZW1haW5pbmcuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JkZXJlZCA9IHBvc3NpYmxlcy5TZWxlY3QocHAgPT4gbmV3IHtWZWN0b3IgPSBwcCwgQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocmVtYWluaW5nLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHIgPT4gSXNNYXRjaChyLCBwcCkpKX0pLk9yZGVyQnlEZXNjZW5kaW5nPGludD4oeHggPT4geHguQ291bnQpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1heGVycyA9IG9yZGVyZWQuVGFrZVdoaWxlKHh4ID0+IHh4LkNvdW50ID09IG9yZGVyZWRbMF0uQ291bnQpLk9yZGVyQnlEZXNjZW5kaW5nPGludD4oeHggPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8aW50Pih4eC5WZWN0b3IsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh0b3RhbCwgeCkgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfbWF0Y2hlcnNbeF0uTmFtZSA9PSBcIipcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b3RhbCAqIF9hbHBoYWJldC5Db3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9tYXRjaGVyc1t4XS5OYW1lLlN0YXJ0c1dpdGgoXCIhXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvdGFsICogKF9hbHBoYWJldC5Db3VudCAtIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJlc3QgPSBtb3N0R2VuZXJhbCA/IG1heGVycy5GaXJzdCgpLlZlY3RvciA6IG1heGVycy5MYXN0KCkuVmVjdG9yO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBnZW5lcmFsaXphdGlvbnMuQWRkKGJlc3QpO1xyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KCAgICAgICAgICAgICAgICByZW1haW5pbmcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikociA9PiBJc01hdGNoKHIsIGJlc3QpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyPj4oZ2VuZXJhbGl6YXRpb25zLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyPj4pKGwgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8VD4uTWF0Y2hlcj4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8VD4uTWF0Y2hlcj4pKGkgPT4gX21hdGNoZXJzW2ldKSkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBWZWN0b3JDb21wYXJlciA6IElFcXVhbGl0eUNvbXBhcmVyPExpc3Q8aW50Pj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhMaXN0PGludD4geCwgTGlzdDxpbnQ+IHkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8aW50Pih4LHkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IEdldEhhc2hDb2RlKExpc3Q8aW50PiBsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bmNoZWNrZWRcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgaGFzaCA9IDE3O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB4IGluIGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2ggPSBoYXNoICogMjMgKyB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzaDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBCdWlsZE1hdGNoZXJMYXR0aWNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9nZW5lcmFsaXplcnMgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IF9tYXRjaGVycy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfZ2VuZXJhbGl6ZXJzW2ldID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPFQ+KF9hbHBoYWJldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBib29sPikoYSA9PiBfbWF0Y2hlcnNbaV0uTWF0Y2goYSkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGogPSAwOyBqIDwgX21hdGNoZXJzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbDxUPihtYXRjaGVzLFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8VD4oX2FscGhhYmV0LChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGJvb2w+KShhID0+IF9tYXRjaGVyc1tqXS5NYXRjaChhKSkpLlRvTGlzdCgpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dlbmVyYWxpemVyc1tpXS5BZGQoaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgSXNNYXRjaChMaXN0PFQ+IHZlY3RvciwgTGlzdDxpbnQ+IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHZlY3Rvci5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV9tYXRjaGVyc1ttW2ldXS5NYXRjaCh2ZWN0b3JbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgTWF0Y2hlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIHN0cmluZyBOYW1lO1xyXG4gICAgICAgICAgICBwdWJsaWMgRnVuYzxULCBib29sPiBNYXRjaDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQWNjZXNzaWJpbGl0eUNoZWNrZXJcclxuICAgIHtcclxuICAgICAgICBMaXN0PGNoYXI+IF9hbHBoYWJldDtcclxuICAgICAgICBwdWJsaWMgQWNjZXNzaWJpbGl0eUNoZWNrZXIoSUVudW1lcmFibGU8Y2hhcj4gYWxwaGFiZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfYWxwaGFiZXQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxjaGFyPihhbHBoYWJldCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0FjY2Vzc2libGUoc3RyaW5nIHcsIExpc3Q8c3RyaW5nPiBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgYyBpbiBfYWxwaGFiZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBnb29kQ2hvaWNlQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3dhcHBlcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxjaGFyPihfYWxwaGFiZXQsbmV3W10geyBjIH0pLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgcGFydGl0aW9uIGluIEVudW1lcmF0ZVBhcnRpdGlvbnModywgc3dhcHBlcnMpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBnb29kQ2hvaWNlRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNob2ljZSBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuR2VuZXJhdGVTdWJsaXN0czxpbnQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgcGFydGl0aW9uLkNvdW50KS5Ub0xpc3QoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hvaWNlLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3dyA9IE1ha2VNb3ZlKHcsIHBhcnRpdGlvbiwgY2hvaWNlLCBzd2FwcGVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTLkNvbnRhaW5zKHd3KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZENob2ljZUV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnb29kQ2hvaWNlRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ29vZENob2ljZUFsd2F5c0V4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGdvb2RDaG9pY2VBbHdheXNFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPExpc3Q8TGlzdDxpbnQ+Pj4gRW51bWVyYXRlUGFydGl0aW9ucyhzdHJpbmcgdywgTGlzdDxjaGFyPiBzd2FwcGVycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGFycyA9IHcuVG9DaGFyQXJyYXkoKTtcclxuICAgICAgICAgICAgdmFyIGluZGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuSW5kaWNlc1doZXJlPGNoYXI+KGNoYXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGNoYXIsIGJvb2w+KShjID0+IHN3YXBwZXJzLkNvbnRhaW5zKGMpKSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4UGFydGl0aW9ucyA9IEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuR2V0UGFydGl0aW9ucyhpbmRpY2VzLkNvdW50KTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGluZGV4UGFydGl0aW9uIGluIGluZGV4UGFydGl0aW9ucylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpdGlvbiA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oaW5kZXhQYXJ0aXRpb24uQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGluZGV4UGFydCBpbiBpbmRleFBhcnRpdGlvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KGluZGV4UGFydCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGkgPT4gaW5kaWNlc1tpXSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpdGlvbi5BZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHBhcnRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RyaW5nIE1ha2VNb3ZlKHN0cmluZyB3LCBMaXN0PExpc3Q8aW50Pj4gcGFydGl0aW9uLCBMaXN0PGludD4gY2hvaWNlLCBMaXN0PGNoYXI+IHN3YXBwZXJzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNoYXJzID0gdy5Ub0NoYXJBcnJheSgpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaiBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8aW50LGludD4oY2hvaWNlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PikoaSA9PiBwYXJ0aXRpb25baV0pKSlcclxuICAgICAgICAgICAgICAgIGNoYXJzW2pdID0gc3dhcHBlcnNbMSAtIHN3YXBwZXJzLkluZGV4T2YoY2hhcnNbal0pXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgc3RyaW5nKGNoYXJzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJveGlmaWNhdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUdXBsZTxMaXN0PExpc3Q8VD4+LCBMaXN0PExpc3Q8VD4+Pj4gU3BsaXQ8VD4oTGlzdDxMaXN0PFQ+PiBhbGxQb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2h1bmtzID0gbmV3IExpc3Q8VHVwbGU8TGlzdDxMaXN0PFQ+PiwgTGlzdDxMaXN0PFQ+Pj4+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9pbnRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihhbGxQb2ludHMpO1xyXG4gICAgICAgICAgICBpbnQgbiA9IGFsbFBvaW50c1swXS5Db3VudDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChwb2ludHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgYmVzdFQgPSAxO1xyXG4gICAgICAgICAgICAgICAgaW50IGJlc3RTcGxpdCA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgc3BsaXQgPSAxOyBzcGxpdCA8IG4gLSAxOyBzcGxpdCsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8VD4ocCxzcGxpdCkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2tpcDxUPihwLHNwbGl0KS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IEJpbmFyeSgxLCBwb2ludHMuQ291bnQgLSAxLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGkgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4obGVmdCxpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKChsMSwgbDIpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihsMSxsMikpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByaWdodHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHJpZ2h0LGkpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoKGwxLCBsMikgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KGwxLGwyKSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFuID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihsZWZ0cyxyaWdodHMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikodHVwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PFQ+KHR1cC5JdGVtMSx0dXAuSXRlbTIpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGxFeGlzdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oc3BhbiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHBwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihwcCxwKSkpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWxsRXhpc3QgPyAxIDogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpIC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPj0gYmVzdFQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA+IGJlc3RUIHx8IE1hdGguQWJzKG4vMiAtIHNwbGl0KSA8IE1hdGguQWJzKG4vMiAtIGJlc3RTcGxpdCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RUID0gdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RTcGxpdCA9IHNwbGl0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8VD4ocCxiZXN0U3BsaXQpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ta2lwPFQ+KHAsYmVzdFNwbGl0KS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihsLGJlc3RUKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKChsMSwgbDIpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihsMSxsMikpKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHIsYmVzdFQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoKGwxLCBsMikgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KGwxLGwyKSkpKTtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihscyxycyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSh0dXAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8VD4odHVwLkl0ZW0xLHR1cC5JdGVtMikuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjaHVua3MuQWRkKG5ldyBUdXBsZTxMaXN0PExpc3Q8VD4+LCBMaXN0PExpc3Q8VD4+PihscywgcnMpKTtcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiggICAgICAgICAgICAgICAgcG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHBwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihwcCxwKSkpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaHVua3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxMaXN0PExpc3Q8VD4+Pj4gU3BsaXRNdWx0aXdheTxUPihMaXN0PExpc3Q8VD4+IGFsbFBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaHVua3MgPSBuZXcgTGlzdDxMaXN0PExpc3Q8TGlzdDxUPj4+PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvaW50cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oYWxsUG9pbnRzKTtcclxuICAgICAgICAgICAgaW50IG4gPSBhbGxQb2ludHNbMF0uQ291bnQ7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAocG9pbnRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGJlc3RUID0gMTtcclxuICAgICAgICAgICAgICAgIExpc3Q8aW50PiBiZXN0U3BsaXQgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNwbGl0IGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihFbnVtZXJhYmxlLlJhbmdlKDAsIG4pLlRvTGlzdCgpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxpbnQsaW50PihsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoeCA9PiB4KSkuVG9MaXN0KCkpKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRXh0cmFjdFJhbmdlczxUPihzcGxpdCwgcG9pbnRzWzBdKS5Db3VudCA8PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBCaW5hcnkoMSwgcG9pbnRzLkNvdW50IC0gMSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLGkpLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKHAgPT4gRXh0cmFjdFJhbmdlczxUPihzcGxpdCwgcCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmdlVmFsdWVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pj4ocmFuZ2VzLEVudW1lcmFibGUuUmFuZ2UoMCwgcmFuZ2VzWzBdLkNvdW50KS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KShfXyA9PiBuZXcgTGlzdDxMaXN0PFQ+PigpKSkuVG9MaXN0KCksXHJcbihnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+PikoICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1bmlvbiwgbmV4dCkgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5aaXA8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pih1bmlvbixuZXh0LCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKChBLCBCKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5Db25jYXQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBLEIpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoKGwxLCBsMikgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KGwxLGwyKSkpKSkpLlRvTGlzdCgpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3AgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocmFuZ2VWYWx1ZXMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KShsbCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGxsKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhbiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oY3AsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKGxsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sVD4obGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+PikocHAgPT4gcHApKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxsRXhpc3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHNwYW4sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwcCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4ocHAscCkpKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFsbEV4aXN0ID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKSAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ID4gYmVzdFQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0VCA9IHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RTcGxpdCA9IHNwbGl0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcnIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsYmVzdFQpLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKHAgPT4gRXh0cmFjdFJhbmdlczxUPihiZXN0U3BsaXQsIHApKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnJ2ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pj4ocnIsRW51bWVyYWJsZS5SYW5nZSgwLCByclswXS5Db3VudCkuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikoX18gPT4gbmV3IExpc3Q8TGlzdDxUPj4oKSkpLlRvTGlzdCgpLFxyXG4oZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pj4pKCAgICAgICAgICAgICAgICAgICAgKHVuaW9uLCBuZXh0KSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlppcDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KHVuaW9uLG5leHQsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikoKEEsIEIpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNvbmNhdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEEsQiksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KSgobDEsIGwyKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4obDEsbDIpKSkpKSkuVG9MaXN0KCkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocnJ2KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKGxsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sVD4obGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+PikocHAgPT4gcHApKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNodW5rcy5BZGQocnJ2KTtcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiggICAgICAgICAgICAgICAgcG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHBwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihwcCxwKSkpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaHVua3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgTGlzdDxMaXN0PFQ+PiBFeHRyYWN0UmFuZ2VzPFQ+KExpc3Q8aW50PiBzdG9wcywgTGlzdDxUPiBsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJhbmdlcyA9IG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGVmdCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzdG9wIGluIHN0b3BzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByYW5nZXMuQWRkKGwuR2V0UmFuZ2UobGVmdCwgc3RvcCAtIGxlZnQgKyAxKSk7XHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gc3RvcCArIDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsZWZ0IDwgbC5Db3VudClcclxuICAgICAgICAgICAgICAgIHJhbmdlcy5BZGQobC5HZXRSYW5nZShsZWZ0LCBsLkNvdW50IC0gbGVmdCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJhbmdlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PExpc3Q8VD4+PiBCb3hpZnk8VD4oTGlzdDxMaXN0PFQ+PiBwb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYm94ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikocCA9PiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkVuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHApKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm94Q29udGFpbmVycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KGJveGVzLGJveGVzKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+LCBib29sPikocGFpciA9PiAhU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocGFpci5JdGVtMSxwYWlyLkl0ZW0yKSkpLlNlbGVjdChwYWlyID0+IG5ldyB7IFBhaXIgPSBwYWlyLCBCb3hlZFVuaW9uID0gQm94Q29udGFpbmVyPFQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocGFpci5JdGVtMSxwYWlyLkl0ZW0yKS5Ub0xpc3QoKSkgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3duID0gYm94Q29udGFpbmVycy5GaXJzdE9yRGVmYXVsdChiYyA9PiBDb250YWluc0JveENvbnRhaW5lcjxUPihwb2ludHMsIGJjLkJveGVkVW5pb24pKTtcclxuICAgICAgICAgICAgICAgIGlmIChncm93biA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IGJveGVzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgYm94ZXMuUmVtb3ZlKGdyb3duLlBhaXIuSXRlbTEpO1xyXG4gICAgICAgICAgICAgICAgYm94ZXMuUmVtb3ZlKGdyb3duLlBhaXIuSXRlbTIpO1xyXG4gICAgICAgICAgICAgICAgYm94ZXMuQWRkKGdyb3duLkJveGVkVW5pb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChib3hlcy5Db3VudCA9PSBjb3VudClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJveGVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8TGlzdDxUPj4+IFByZWZpeEJveGlmeTxUPihMaXN0PExpc3Q8VD4+IHBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cyk7XHJcbiAgICAgICAgICAgIHZhciBib3hlcyA9IG5ldyBMaXN0PExpc3Q8TGlzdDxUPj4+KCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBCaW5hcnkoMSwgcG9pbnRzLkNvdW50IC0gMSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29udGFpbnNCb3g8VD4oYWxsUG9pbnRzLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsaSkuVG9MaXN0KCkpID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgICAgICBib3hlcy5BZGQoQm94Q29udGFpbmVyPFQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cyx0KS5Ub0xpc3QoKSkpO1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ta2lwPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLHQpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvaW50cy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYm94ZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgQ29udGFpbnNCb3g8VD4oTGlzdDxMaXN0PFQ+PiBhbGxQb2ludHMsIExpc3Q8TGlzdDxUPj4gcG9pbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJveCA9IEJveENvbnRhaW5lcjxUPihwb2ludHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gQ29udGFpbnNCb3hDb250YWluZXI8VD4oYWxsUG9pbnRzLCBib3gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgQ29udGFpbnNCb3hDb250YWluZXI8VD4oTGlzdDxMaXN0PFQ+PiBhbGxQb2ludHMsIExpc3Q8TGlzdDxUPj4gYm94Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oYm94Q29udGFpbmVyLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihhbGxQb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KHBwLHApKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PFQ+PiBCb3hDb250YWluZXI8VD4oTGlzdDxMaXN0PFQ+PiBwb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PFQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgcG9pbnRzWzBdLkNvdW50KS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKGkgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LFQ+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIFQ+KShwID0+IHBbaV0pKS5EaXN0aW5jdCgpLlRvTGlzdCgpKSlcclxuKVxyXG4sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoZSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxUPihlKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNCb3g8VD4oTGlzdDxMaXN0PFQ+PiBwb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gcG9pbnRzLkNvdW50ID09IEJveENvbnRhaW5lcjxUPihwb2ludHMpLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9Cb3hTdHJpbmc8VD4oTGlzdDxMaXN0PFQ+PiBwb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCIgKiBcIiwgRW51bWVyYWJsZS5SYW5nZSgwLCBwb2ludHNbMF0uQ291bnQpLlNlbGVjdDxzdHJpbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgc3RyaW5nPikoaSA9PiBcIntcIiArIHN0cmluZy5Kb2luPFQ+KFwiLFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sVD4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgVD4pKHAgPT4gcFtpXSkpLkRpc3RpbmN0KCkpICsgXCJ9XCIpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb011bHRpQ2h1bmtTdHJpbmc8VD4oTGlzdDxMaXN0PExpc3Q8VD4+PiBtdWx0aUNodW5rKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiICogXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LHN0cmluZz4obXVsdGlDaHVuaywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Piwgc3RyaW5nPikoY2h1bmsgPT4gVG9MaXN0T2ZMaXN0c1N0cmluZzxUPihjaHVuaykpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0NodW5rU3RyaW5nPFQ+KFR1cGxlPExpc3Q8TGlzdDxUPj4sIExpc3Q8TGlzdDxUPj4+IGNodW5rKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRvTGlzdE9mTGlzdHNTdHJpbmc8VD4oY2h1bmsuSXRlbTEpICsgXCIgKiBcIiArIFRvTGlzdE9mTGlzdHNTdHJpbmc8VD4oY2h1bmsuSXRlbTIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHN0cmluZyBUb0xpc3RPZkxpc3RzU3RyaW5nPFQ+KExpc3Q8TGlzdDxUPj4gbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIntcIiArIHN0cmluZy5Kb2luKFwiLFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sc3RyaW5nPihsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgc3RyaW5nPikoc2wgPT4gXCJ7XCIgKyBzdHJpbmcuSm9pbjxUPihcIixcIiwgc2wpICsgXCJ9XCIpKSkgKyBcIn1cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBpbnQgQmluYXJ5KGludCBmaXJzdCwgaW50IGxhc3QsIEZ1bmM8aW50LCBpbnQ+IHRhcmdldERpcmVjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gZmlyc3QgLSAxO1xyXG4gICAgICAgICAgICB2YXIgcmlnaHQgPSBsYXN0ICsgMTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChyaWdodCAtIGxlZnQgPj0gMilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IG1pZGRsZSA9IGxlZnQgKyAocmlnaHQgLSBsZWZ0KSAvIDI7XHJcbiAgICAgICAgICAgICAgICBpbnQgZGlyZWN0aW9uID0gdGFyZ2V0RGlyZWN0aW9uKG1pZGRsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtaWRkbGU7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gbWlkZGxlO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBtaWRkbGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsZWZ0IDwgZmlyc3QpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3QgLSAxO1xyXG4gICAgICAgICAgICBpZiAocmlnaHQgPiBsYXN0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhc3QgKyAxO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxlZnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZhc3RBY2Nlc3NpYmlsaXR5Q2hlY2tlclxyXG4gICAge1xyXG4gICAgICAgIHVsb25nW10gX2ZpeGVyUmVzcG9uc2VzO1xyXG4gICAgICAgIGludCBfZml4ZXJSZXNwb25zZUNvdW50O1xyXG4gICAgICAgIERpY3Rpb25hcnk8dWxvbmcsIExpc3Q8TGlzdDx1bG9uZz4+PiBfYnJlYWtlckNob2ljZXNDYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PHVsb25nLCBMaXN0PExpc3Q8dWxvbmc+Pj4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIEZhc3RBY2Nlc3NpYmlsaXR5Q2hlY2tlcihpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maXhlclJlc3BvbnNlcyA9IG5ldyB1bG9uZ1sxIDw8ICgobiArIDEpID4+IDEpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQWNjZXNzaWJsZShGYXN0V29yZCBib2FyZCwgSGFzaFNldDxGYXN0V29yZD4gd29uQm9hcmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBib2FyZC5fbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGJvYXJkLl9sZW5ndGg7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGJvYXJkLl90cmFjZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IGJvYXJkLl90cmFjZVtqXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3dhcHBhYmxlID0geCBeIHk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYnJlYWtlckNob2ljZSBpbiBHZXRCcmVha2VyQ2hvaWNlcyhzd2FwcGFibGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwRXhpc3RzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBHZXRGaXhlclJlc3BvbnNlcyhicmVha2VyQ2hvaWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgayA9IDE7IGsgPCBfZml4ZXJSZXNwb25zZUNvdW50OyBrKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IEZhc3RXb3JkKGJvYXJkLl90cmFjZSwgaSwgaiwgX2ZpeGVyUmVzcG9uc2VzW2tdLCBib2FyZC5fc3RhY2tDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod29uQm9hcmRzLkNvbnRhaW5zKGNoaWxkQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5uaW5nU3dhcEV4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2lubmluZ1N3YXBBbHdheXNFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEdldEZpeGVyUmVzcG9uc2VzKExpc3Q8dWxvbmc+IHBvc3NpYmxlTW92ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZml4ZXJSZXNwb25zZUNvdW50ID0gMSA8PCBwb3NzaWJsZU1vdmVzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgdmFyIHN1YnNldCA9IDE7XHJcbiAgICAgICAgICAgIHdoaWxlIChzdWJzZXQgPCBfZml4ZXJSZXNwb25zZUNvdW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSAwVUw7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IHN1YnNldDtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlIHw9IHBvc3NpYmxlTW92ZXNbSW50MzJVc2FnZS5HZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBfZml4ZXJSZXNwb25zZXNbc3Vic2V0XSA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgc3Vic2V0Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgTGlzdDxMaXN0PHVsb25nPj4gR2V0QnJlYWtlckNob2ljZXModWxvbmcgc3dhcHBhYmxlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxMaXN0PHVsb25nPj4gY2hvaWNlcztcclxuICAgICAgICAgICAgaWYgKCFfYnJlYWtlckNob2ljZXNDYWNoZS5UcnlHZXRWYWx1ZShzd2FwcGFibGUsIG91dCBjaG9pY2VzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdHMgPSBzd2FwcGFibGUuR2V0Qml0cygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpdGlvbnMgPSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkdldFBhcnRpdGlvbnMoYml0cy5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBjaG9pY2VzID0gbmV3IExpc3Q8TGlzdDx1bG9uZz4+KHBhcnRpdGlvbnMuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydGl0aW9uIGluIHBhcnRpdGlvbnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNob2ljZSA9IG5ldyBMaXN0PHVsb25nPihwYXJ0aXRpb24uQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNob2ljZXMuQWRkKGNob2ljZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0IGluIHBhcnRpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gMFVMO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBwYXJ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCB8PSBiaXRzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlLkFkZCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX2JyZWFrZXJDaG9pY2VzQ2FjaGVbc3dhcHBhYmxlXSA9IGNob2ljZXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaG9pY2VzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLldvcmRHYW1lXHJcbntcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBUYXJwaXRFbnVtZXJhdG9yXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBMaXN0PGNoYXI+IEFscGhhYmV0ID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGNoYXI+KCksKF9vMjMpPT57X28yMy5BZGQoJ3gnKTtfbzIzLkFkZCgneScpO19vMjMuQWRkKCd6Jyk7cmV0dXJuIF9vMjM7fSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc1Blcm11dGF0aW9uQ2xvc2VkKExpc3Q8c3RyaW5nPiBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxzdHJpbmc+LHN0cmluZz4oRW51bWVyYXRlQWxwaGFiZXRQZXJtdXRhdGlvbnMoUyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4sIHN0cmluZz4pKFQgPT4gc3RyaW5nLkpvaW4oXCIsXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxzdHJpbmcsc3RyaW5nPihULChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgc3RyaW5nPikocyA9PiBzKSkpKSkuRGlzdGluY3QoKS5Db3VudCgpID09IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8c3RyaW5nPiBSZW1vdmVQZXJtdXRhdGlvblJlZHVuZGFuY2llcyhMaXN0PHN0cmluZz4gUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBoYXNoID0gbmV3IEhhc2hTZXQ8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICB2YXIgcGVybXV0ZWRMaXN0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxzdHJpbmc+PihFbnVtZXJhdGVBbHBoYWJldFBlcm11dGF0aW9ucyhTKSk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgUy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBoYXNoLkFkZChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8c3RyaW5nPixzdHJpbmc+KHBlcm11dGVkTGlzdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4sIHN0cmluZz4pKGwgPT4gbFtpXSkpLk9yZGVyQnk8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT4gcykpLkZpcnN0KCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8c3RyaW5nPihoYXNoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxzdHJpbmc+IFJlb3JkZXJBbHBoYWJldEJ5T2NjdXJlbmNlUmF0ZShMaXN0PHN0cmluZz4gUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsc3RyaW5nPihTLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgc3RyaW5nPikocyA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhcnMgPSBzLlRvQ2hhckFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IEFscGhhYmV0LlNlbGVjdChjID0+IG5ldyB7IEMgPSBjLCBSYXRlID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxjaGFyPihjaGFycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxjaGFyLCBib29sPikoY2MgPT4gY2MgPT0gYykpIH0pLk9yZGVyQnlEZXNjZW5kaW5nPGludD4oZCA9PiBkLlJhdGUpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzLlJlcGxhY2UocFswXS5DLCAnWCcpLlJlcGxhY2UocFsxXS5DLCAnWScpLlJlcGxhY2UocFsyXS5DLCAnWicpLlRvTG93ZXIoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8c3RyaW5nPj4gRW51bWVyYXRlQWxwaGFiZXRQZXJtdXRhdGlvbnMoTGlzdDxzdHJpbmc+IFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdXBwZXJlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxzdHJpbmc+KFMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBzdHJpbmc+KShzID0+IHMuVG9VcHBlcigpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwZXJtdXRhdGlvbiBpbiBQZXJtdXRhdGlvbi5FbnVtZXJhdGVBbGwoMykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gcGVybXV0YXRpb24uQXBwbHk8Y2hhcj4oQWxwaGFiZXQpO1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxzdHJpbmc+KHVwcGVyZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBzdHJpbmc+KShzID0+IHMuUmVwbGFjZSgnWCcsIHBbMF0pLlJlcGxhY2UoJ1knLCBwWzFdKS5SZXBsYWNlKCdaJywgcFsyXSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IElFbnVtZXJhYmxlPExpc3Q8c3RyaW5nPj4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHMoKTtcclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIEdlbmVyYXRlTWluaW1hbFRhcnBpdHMoQWN0aW9uPExpc3Q8c3RyaW5nPj4gZm91bmRUYXJwaXQpIHsgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZhc3RXb3JkXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHVsb25nW10gX3RyYWNlO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgX2xlbmd0aDtcclxuICAgICAgICBwdWJsaWMgaW50IF9zdGFja0NvdW50O1xyXG4gICAgICAgIGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBGYXN0V29yZCh1bG9uZ1tdIHRyYWNlLCBpbnQgc3RhY2tDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF90cmFjZSA9IHRyYWNlO1xyXG4gICAgICAgICAgICBfbGVuZ3RoID0gX3RyYWNlLkxlbmd0aDtcclxuICAgICAgICAgICAgX3N0YWNrQ291bnQgPSBzdGFja0NvdW50O1xyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoaW5nLkhhc2goX3RyYWNlLCBfbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBGYXN0V29yZCh1bG9uZ1tdIHRyYWNlLCBpbnQgaSwgaW50IGosIHVsb25nIHN3YXAsIGludCBzdGFja0NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3RyYWNlID0gbmV3IHVsb25nW3RyYWNlLkxlbmd0aF07XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBrID0gMDsgayA8IHRyYWNlLkxlbmd0aDsgaysrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyB2ID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChrID09IGkgfHwgayA9PSBqKVxyXG4gICAgICAgICAgICAgICAgICAgIHYgPSB0cmFjZVtrXSBeIHN3YXA7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IHRyYWNlW2tdO1xyXG5cclxuICAgICAgICAgICAgICAgIGludCBxID0gX2xlbmd0aDtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChxID4gMCAmJiBfdHJhY2VbcSAtIDFdID4gdilcclxuICAgICAgICAgICAgICAgICAgICBxLS07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHEgPCBfbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoX3RyYWNlLCBxIDw8IDMsIF90cmFjZSwgKHEgKyAxKSA8PCAzLCAoX2xlbmd0aCAtIHEpIDw8IDMpO1xyXG4gICAgICAgICAgICAgICAgX3RyYWNlW3FdID0gdjtcclxuXHJcbiAgICAgICAgICAgICAgICBfbGVuZ3RoKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF9zdGFja0NvdW50ID0gc3RhY2tDb3VudDtcclxuICAgICAgICAgICAgX2hhc2hDb2RlID0gSGFzaGluZy5IYXNoKF90cmFjZSwgX2xlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIEZhc3RXb3JkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhGYXN0V29yZCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsIHx8IF9sZW5ndGggIT0gb3RoZXIuX2xlbmd0aClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaWYgKF90cmFjZVtpXSAhPSBvdGhlci5fdHJhY2VbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEJpdExldmVsR2VuZXJhdGlvbjtcclxudXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXI7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRmFzdFdvcmRHZW5lcmF0b3JcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxGYXN0V29yZD4gR2VuZXJhdGVXb3JkcyhpbnQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHdvcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmdbXSxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihUaGVFbnVtZXJhdGlvbk1hY2hpbmUuRW51bWVyYXRlKEVudW1lcmFibGUuUmVwZWF0PGludD4oMSwgbGVuZ3RoKSwgMyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8dWxvbmdbXSwgZ2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4pKHRyYWNlID0+IG5ldyBGYXN0V29yZCh0cmFjZSwgbGVuZ3RoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gd29yZHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFRoZUVudW1lcmF0aW9uTWFjaGluZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTx1bG9uZ1tdPiBFbnVtZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191bG9uZy5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgdWxvbmdbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDx1bG9uZz5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc191bG9uZy5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHVsb25nIGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICAgICAgdWxvbmcgZGMgPSAodWxvbmcpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudCwgciwgMCwgMCwgYywgZGMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8dWxvbmdbXT4gRW51bWVyYXRlKExpc3Q8dWxvbmc+IHNpemVzLCB1bG9uZ1tdIGFzc2lnbm1lbnQsIExpc3Q8dWxvbmc+W10gciwgaW50IGksIHVsb25nIGxhc3QsIHVsb25nIGNhcmUsIHVsb25nIGRvbnRDYXJlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyB4O1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBnID0gKHVsb25nKShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHEgPSAodWxvbmcpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9ICh1bG9uZykofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9ICh1bG9uZykoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkyID0gKHVsb25nKShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gKHVsb25nKShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgdWxvbmdbYXNzaWdubWVudC5MZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGFzc2lnbm1lbnRDb3B5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodWxvbmcpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhIGluIEVudW1lcmF0ZShzaXplcywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxudXNpbmcgQWxnb3JpdGhtcztcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFdvcmRFbnVtZXJhdG9yXHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxjaGFyPiBfYWxwaGFiZXQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBXb3JkRW51bWVyYXRvcihwYXJhbXMgY2hhcltdIGFscGhhYmV0KSA6IHRoaXMoKChJRW51bWVyYWJsZTxjaGFyPilhbHBoYWJldCkpIHsgfVxyXG4gICAgICAgIHB1YmxpYyBXb3JkRW51bWVyYXRvcihJRW51bWVyYWJsZTxjaGFyPiBhbHBoYWJldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9hbHBoYWJldCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGNoYXI+KGFscGhhYmV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxzdHJpbmc+IEVudW1lcmF0ZVdvcmRzKGludCBsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxjaGFyPixzdHJpbmc+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGNoYXI+KEVudW1lcmFibGUuUmVwZWF0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxjaGFyPj4oX2FscGhhYmV0LCBsZW5ndGgpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGNoYXI+LCBzdHJpbmc+KShjaGFycyA9PiBuZXcgc3RyaW5nKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9BcnJheTxjaGFyPihjaGFycykpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIlxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEFzc2lnbm1lbnRzX3Vsb25nXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PHVsb25nW10+IEdlbmVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplLCBpbnQgY291bnRFc3RpbWF0ZSA9IDIwNDgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191bG9uZy5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudHMgPSBuZXcgTGlzdDx1bG9uZ1tdPihjb3VudEVzdGltYXRlKTtcclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgdWxvbmdbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PHVsb25nPltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc191bG9uZy5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgdWxvbmcgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIHVsb25nIGRjID0gKHVsb25nKSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIEdlbmVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnRzLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXNzaWdubWVudHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBHZW5lcmF0ZShMaXN0PHVsb25nPiBzaXplcywgTGlzdDx1bG9uZ1tdPiBhc3NpZ25tZW50cywgdWxvbmdbXSBhc3NpZ25tZW50LCBMaXN0PHVsb25nPltdIHIsIGludCBpLCB1bG9uZyBsYXN0LCB1bG9uZyBjYXJlLCB1bG9uZyBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9ICh1bG9uZykoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAodWxvbmcpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICh1bG9uZykofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKHVsb25nKShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKHVsb25nKShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAodWxvbmcpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyB1bG9uZ1thc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRzLkFkZChhc3NpZ25tZW50Q29weSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKHVsb25nKSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlKHNpemVzLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTx1bG9uZ1tdPiBFbnVtZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191bG9uZy5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyB1bG9uZ1twb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8dWxvbmc+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX3Vsb25nLlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB1bG9uZyBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgdWxvbmcgZGMgPSAodWxvbmcpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8dWxvbmdbXT4gRW51bWVyYXRlKExpc3Q8dWxvbmc+IHNpemVzLCB1bG9uZ1tdIGFzc2lnbm1lbnQsIExpc3Q8dWxvbmc+W10gciwgaW50IGksIHVsb25nIGxhc3QsIHVsb25nIGNhcmUsIHVsb25nIGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKHVsb25nKShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9ICh1bG9uZykofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKHVsb25nKSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAodWxvbmcpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9ICh1bG9uZykoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKHVsb25nKShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgdWxvbmdbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHRcdHlpZWxkIHJldHVybiBhc3NpZ25tZW50Q29weTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodWxvbmcpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgYSBpbiBFbnVtZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYykpXHJcblx0XHRcdFx0XHRcdFx0eWllbGQgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEFzc2lnbm1lbnRzX2xvbmdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8bG9uZ1tdPiBHZW5lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSwgaW50IGNvdW50RXN0aW1hdGUgPSAyMDQ4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfbG9uZy5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudHMgPSBuZXcgTGlzdDxsb25nW10+KGNvdW50RXN0aW1hdGUpO1xyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyBsb25nW3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDxsb25nPltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc19sb25nLlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICBsb25nIGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICBsb25nIGRjID0gKGxvbmcpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ25tZW50cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEdlbmVyYXRlKExpc3Q8bG9uZz4gc2l6ZXMsIExpc3Q8bG9uZ1tdPiBhc3NpZ25tZW50cywgbG9uZ1tdIGFzc2lnbm1lbnQsIExpc3Q8bG9uZz5bXSByLCBpbnQgaSwgbG9uZyBsYXN0LCBsb25nIGNhcmUsIGxvbmcgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9IChsb25nKShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9IChsb25nKSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAobG9uZykoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IChsb25nKSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAobG9uZykoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9IChsb25nKShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9IChsb25nKShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgbG9uZ1thc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRzLkFkZChhc3NpZ25tZW50Q29weSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAobG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAobG9uZykofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmF0ZShzaXplcywgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAobG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxsb25nW10+IEVudW1lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX2xvbmcuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgbG9uZ1twb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8bG9uZz5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfbG9uZy5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgbG9uZyBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgbG9uZyBkYyA9IChsb25nKSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPGxvbmdbXT4gRW51bWVyYXRlKExpc3Q8bG9uZz4gc2l6ZXMsIGxvbmdbXSBhc3NpZ25tZW50LCBMaXN0PGxvbmc+W10gciwgaW50IGksIGxvbmcgbGFzdCwgbG9uZyBjYXJlLCBsb25nIGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAobG9uZykoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAobG9uZykofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAobG9uZykofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKGxvbmcpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9IChsb25nKShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9IChsb25nKShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgbG9uZ1thc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0eWllbGQgcmV0dXJuIGFzc2lnbm1lbnRDb3B5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKGxvbmcpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgYSBpbiBFbnVtZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYykpXHJcblx0XHRcdFx0XHRcdFx0eWllbGQgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAobG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQXNzaWdubWVudHNfdWludFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDx1aW50W10+IEdlbmVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplLCBpbnQgY291bnRFc3RpbWF0ZSA9IDIwNDgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191aW50LlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50cyA9IG5ldyBMaXN0PHVpbnRbXT4oY291bnRFc3RpbWF0ZSk7XHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IHVpbnRbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PHVpbnQ+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX3VpbnQuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIHVpbnQgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIHVpbnQgZGMgPSAodWludCkofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICBHZW5lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbm1lbnRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgR2VuZXJhdGUoTGlzdDx1aW50PiBzaXplcywgTGlzdDx1aW50W10+IGFzc2lnbm1lbnRzLCB1aW50W10gYXNzaWdubWVudCwgTGlzdDx1aW50PltdIHIsIGludCBpLCB1aW50IGxhc3QsIHVpbnQgY2FyZSwgdWludCBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVpbnQgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKHVpbnQpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKHVpbnQpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKHVpbnQpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9ICh1aW50KShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKHVpbnQpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAodWludCkoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKHVpbnQpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyB1aW50W2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudHMuQWRkKGFzc2lnbm1lbnRDb3B5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9ICh1aW50KSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlKHNpemVzLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPHVpbnRbXT4gRW51bWVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfdWludC5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyB1aW50W3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDx1aW50Pltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc191aW50LlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB1aW50IGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICB1aW50IGRjID0gKHVpbnQpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8dWludFtdPiBFbnVtZXJhdGUoTGlzdDx1aW50PiBzaXplcywgdWludFtdIGFzc2lnbm1lbnQsIExpc3Q8dWludD5bXSByLCBpbnQgaSwgdWludCBsYXN0LCB1aW50IGNhcmUsIHVpbnQgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9ICh1aW50KShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9ICh1aW50KSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAodWludCkoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICh1aW50KSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAodWludCkoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKHVpbnQpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAodWludCkoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKHVpbnQpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyB1aW50W2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYXNzaWdubWVudENvcHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWludCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodWludCkofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciBhIGluIEVudW1lcmF0ZShzaXplcywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKSlcclxuXHRcdFx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBBc3NpZ25tZW50c191c2hvcnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8dXNob3J0W10+IEdlbmVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplLCBpbnQgY291bnRFc3RpbWF0ZSA9IDIwNDgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191c2hvcnQuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRzID0gbmV3IExpc3Q8dXNob3J0W10+KGNvdW50RXN0aW1hdGUpO1xyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyB1c2hvcnRbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PHVzaG9ydD5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfdXNob3J0LlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB1c2hvcnQgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIHVzaG9ydCBkYyA9ICh1c2hvcnQpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ25tZW50cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEdlbmVyYXRlKExpc3Q8dXNob3J0PiBzaXplcywgTGlzdDx1c2hvcnRbXT4gYXNzaWdubWVudHMsIHVzaG9ydFtdIGFzc2lnbm1lbnQsIExpc3Q8dXNob3J0PltdIHIsIGludCBpLCB1c2hvcnQgbGFzdCwgdXNob3J0IGNhcmUsIHVzaG9ydCBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVzaG9ydCB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAodXNob3J0KShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9ICh1c2hvcnQpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAodXNob3J0KSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAodXNob3J0KShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKHVzaG9ydCkoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9ICh1c2hvcnQpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyB1c2hvcnRbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50cy5BZGQoYXNzaWdubWVudENvcHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodXNob3J0KSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlKHNpemVzLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8dXNob3J0W10+IEVudW1lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX3VzaG9ydC5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyB1c2hvcnRbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PHVzaG9ydD5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfdXNob3J0LlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB1c2hvcnQgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIHVzaG9ydCBkYyA9ICh1c2hvcnQpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8dXNob3J0W10+IEVudW1lcmF0ZShMaXN0PHVzaG9ydD4gc2l6ZXMsIHVzaG9ydFtdIGFzc2lnbm1lbnQsIExpc3Q8dXNob3J0PltdIHIsIGludCBpLCB1c2hvcnQgbGFzdCwgdXNob3J0IGNhcmUsIHVzaG9ydCBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVzaG9ydCB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAodXNob3J0KShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9ICh1c2hvcnQpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAodXNob3J0KSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAodXNob3J0KShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSAodXNob3J0KShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKHVzaG9ydCkoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IHVzaG9ydFthc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0eWllbGQgcmV0dXJuIGFzc2lnbm1lbnRDb3B5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodXNob3J0KSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGEgaW4gRW51bWVyYXRlKHNpemVzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpKVxyXG5cdFx0XHRcdFx0XHRcdHlpZWxkIHJldHVybiBhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQXNzaWdubWVudHNfYnl0ZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxieXRlW10+IEdlbmVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplLCBpbnQgY291bnRFc3RpbWF0ZSA9IDIwNDgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc19ieXRlLlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50cyA9IG5ldyBMaXN0PGJ5dGVbXT4oY291bnRFc3RpbWF0ZSk7XHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IGJ5dGVbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PGJ5dGU+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX2J5dGUuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIGJ5dGUgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIGJ5dGUgZGMgPSAoYnl0ZSkofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICBHZW5lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbm1lbnRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgR2VuZXJhdGUoTGlzdDxieXRlPiBzaXplcywgTGlzdDxieXRlW10+IGFzc2lnbm1lbnRzLCBieXRlW10gYXNzaWdubWVudCwgTGlzdDxieXRlPltdIHIsIGludCBpLCBieXRlIGxhc3QsIGJ5dGUgY2FyZSwgYnl0ZSBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJ5dGUgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKGJ5dGUpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKGJ5dGUpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9IChieXRlKSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKGJ5dGUpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IChieXRlKShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKGJ5dGUpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKGJ5dGUpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyBieXRlW2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudHMuQWRkKGFzc2lnbm1lbnRDb3B5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IChieXRlKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9IChieXRlKSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlKHNpemVzLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IChieXRlKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGJ5dGVbXT4gRW51bWVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfYnl0ZS5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyBieXRlW3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDxieXRlPltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc19ieXRlLlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICBieXRlIGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICBieXRlIGRjID0gKGJ5dGUpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8Ynl0ZVtdPiBFbnVtZXJhdGUoTGlzdDxieXRlPiBzaXplcywgYnl0ZVtdIGFzc2lnbm1lbnQsIExpc3Q8Ynl0ZT5bXSByLCBpbnQgaSwgYnl0ZSBsYXN0LCBieXRlIGNhcmUsIGJ5dGUgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBieXRlIHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9IChieXRlKShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9IChieXRlKSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IChieXRlKSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAoYnl0ZSkoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKGJ5dGUpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKGJ5dGUpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyBieXRlW2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYXNzaWdubWVudENvcHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAoYnl0ZSkofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciBhIGluIEVudW1lcmF0ZShzaXplcywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKSlcclxuXHRcdFx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IChieXRlKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRPcGVyYXRpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1bG9uZyBUb191bG9uZyh0aGlzIElFbnVtZXJhYmxlPGludD4gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIHggPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIGJpdHMpXHJcbiAgICAgICAgICAgICAgICB4IHw9IDFVTCA8PCBiaXQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdXNob3J0IFRvX3VzaG9ydCh0aGlzIElFbnVtZXJhYmxlPGludD4gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVzaG9ydCB4ID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBiaXRzKVxyXG4gICAgICAgICAgICAgICAgeCB8PSAodXNob3J0KSgxIDw8IGJpdCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYnl0ZSBUb19ieXRlKHRoaXMgSUVudW1lcmFibGU8aW50PiBiaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYnl0ZSB4ID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBiaXRzKVxyXG4gICAgICAgICAgICAgICAgeCB8PSAoYnl0ZSkoMSA8PCBiaXQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdWxvbmcgUmlnaHRGaWxsVG9NU0IodGhpcyB1bG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDE7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAyO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gNDtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDg7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxNjtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDMyO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdXNob3J0IFJpZ2h0RmlsbFRvTVNCKHRoaXMgdXNob3J0IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB4IHw9ICh1c2hvcnQpKHggPj4gMSk7XHJcbiAgICAgICAgICAgIHggfD0gKHVzaG9ydCkoeCA+PiAyKTtcclxuICAgICAgICAgICAgeCB8PSAodXNob3J0KSh4ID4+IDQpO1xyXG4gICAgICAgICAgICB4IHw9ICh1c2hvcnQpKHggPj4gOCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBieXRlIFJpZ2h0RmlsbFRvTVNCKHRoaXMgYnl0ZSB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgeCB8PSAoYnl0ZSkoeCA+PiAxKTtcclxuICAgICAgICAgICAgeCB8PSAoYnl0ZSkoeCA+PiAyKTtcclxuICAgICAgICAgICAgeCB8PSAoYnl0ZSkoeCA+PiA0KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuXHR9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRVc2FnZV91aW50XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgdWludCBEZUJydWlqbk11bHRpcGxpZXIgPSAweDA3N0NCNTMxVTtcclxuICAgICAgICBzdGF0aWMgaW50W10gRGVCcnVpam5Mb29rdXAgPSBuZXcgaW50WzMyXSB7IDAsIDEsIDI4LCAyLCAyOSwgMTQsIDI0LCAzLCAzMCwgMjIsIDIwLCAxNSwgMjUsIDE3LCA0LCA4LCAzMSwgMjcsIDEzLCAyMywgMjEsIDE5LCAxNiwgNywgMjYsIDEyLCAxOCwgNiwgMTEsIDUsIDEwLCA5IH07XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEV4dHJhY3QodGhpcyB1aW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbKHggKiBEZUJydWlqbk11bHRpcGxpZXIpID4+IDI3XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IExlYXN0U2lnbmlmaWNhbnRCaXQodGhpcyB1aW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbKCh4ICYgKH54ICsgMSkpICogRGVCcnVpam5NdWx0aXBsaWVyKSA+PiAyN107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHVpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0geCAmICh+eCArIDEpO1xyXG4gICAgICAgICAgICB4IF49IG07XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFsobSAqIERlQnJ1aWpuTXVsdGlwbGllcikgPj4gMjddO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgUG9wdWxhdGlvbkNvdW50KHRoaXMgdWludCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHEgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoYiA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHErKztcclxuICAgICAgICAgICAgICAgIGIgJj0gYiAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IFRvU2V0KHRoaXMgdWludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG9uQml0cyA9IG5ldyBMaXN0PGludD4oMTApO1xyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgb25CaXRzLkFkZChHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvbkJpdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWludCBSaWdodEZpbGxUb01TQih0aGlzIHVpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMjtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDQ7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiA4O1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMTY7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1aW50IFRvX3VpbnQodGhpcyBJRW51bWVyYWJsZTxpbnQ+IGJpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IHggPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIGJpdHMpXHJcbiAgICAgICAgICAgICAgICB4IHw9IDFVIDw8IGJpdDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1aW50IE9yKHRoaXMgdWludFtdIGNvbG9yR3JhcGgsIGludCBvZmZzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMFU7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBvZmZzZXQ7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0IHw9IGNvbG9yR3JhcGhbaV07XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgVHJ1ZUZvckFsbEJpdEluZGljZXModGhpcyB1aW50IHgsIEZ1bmM8aW50LCBib29sPiBwcmVkaWNhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZWRpY2F0ZShHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJpdFVzYWdlX2xvbmdcclxuICAgIHtcclxuICAgICAgICBjb25zdCBVSW50NjQgRGVCcnVpam5NdWx0aXBsaWVyID0gMHgwN0VERDVFNTlBNEUyOEMyO1xyXG4gICAgICAgIHN0YXRpYyBpbnRbXSBEZUJydWlqbkxvb2t1cCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYzLCAgMCwgNTgsICAxLCA1OSwgNDcsIDUzLCAgMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYwLCAzOSwgNDgsIDI3LCA1NCwgMzMsIDQyLCAgMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYxLCA1MSwgMzcsIDQwLCA0OSwgMTgsIDI4LCAyMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDU1LCAzMCwgMzQsIDExLCA0MywgMTQsIDIyLCAgNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYyLCA1NywgNDYsIDUyLCAzOCwgMjYsIDMyLCA0MSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwLCAzNiwgMTcsIDE5LCAyOSwgMTAsIDEzLCAyMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDU2LCA0NSwgMjUsIDMxLCAzNSwgMTYsICA5LCAxMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQ0LCAyNCwgMTUsICA4LCAyMywgIDcsICA2LCAgNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBFeHRyYWN0KHRoaXMgbG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwWygoVUludDY0KXggKiBEZUJydWlqbk11bHRpcGxpZXIpID4+IDU4XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IExlYXN0U2lnbmlmaWNhbnRCaXQodGhpcyBsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbdW5jaGVja2VkKChVSW50NjQpKHggJiAteCkgKiBEZUJydWlqbk11bHRpcGxpZXIgPj4gNTgpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgbG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSB4ICYgLXg7XHJcbiAgICAgICAgICAgIHggXj0gbTtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwWygoVUludDY0KW0gKiBEZUJydWlqbk11bHRpcGxpZXIpID4+IDU4XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFBvcHVsYXRpb25Db3VudCh0aGlzIGxvbmcgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBxID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGIgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBxKys7XHJcbiAgICAgICAgICAgICAgICBiICY9IGIgLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgUG9wdWxhdGlvbkNvdW50RGVuc2UodGhpcyBsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB4ID0geCAtICgoeCA+PiAxKSAmIDB4NTU1NTU1NTU1NTU1NTU1NUwpO1xyXG4gICAgICAgICAgICB4ID0gKHggJiAweDMzMzMzMzMzMzMzMzMzMzNMKSArICgoeCA+PiAyKSAmIDB4MzMzMzMzMzMzMzMzMzMzM0wpO1xyXG4gICAgICAgICAgICB4ID0gKHggKyAoeCA+PiA0KSkgJiAweDBmMGYwZjBmMGYwZjBmMGZMO1xyXG4gICAgICAgICAgICB4ID0gKHggKiAweDAxMDEwMTAxMDEwMTAxMDFMKSA+PiA1NjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBUb1NldChsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb25CaXRzID0gbmV3IExpc3Q8aW50PigxMCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICBvbkJpdHMuQWRkKEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9uQml0cztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIFJpZ2h0RmlsbFRvTVNCKHRoaXMgbG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDE7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAyO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gNDtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDg7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxNjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgVG9fbG9uZyh0aGlzIElFbnVtZXJhYmxlPGludD4gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgeCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiaXQgaW4gYml0cylcclxuICAgICAgICAgICAgICAgIHggfD0gMUwgPDwgYml0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgT3IodGhpcyBsb25nW10gY29sb3JHcmFwaCwgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwTDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IG9mZnNldDsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgfD0gY29sb3JHcmFwaFtpXTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBUcnVlRm9yQWxsQml0SW5kaWNlcyh0aGlzIGxvbmcgeCwgRnVuYzxpbnQsIGJvb2w+IHByZWRpY2F0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghcHJlZGljYXRlKEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIlxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQml0VmVjdG9yc191bG9uZ1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IEZyb21CaXRWZWN0b3IodGhpcyBMaXN0PHVsb25nPiBuKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gbmV3IExpc3Q8aW50Pig2NCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNjQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSAodWxvbmcpKDFVTCA8PCBpKTtcclxuICAgICAgICAgICAgICAgIGludCBtID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbi5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYiAmIG5bal0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gMSA8PCBqO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHYuQWRkKG0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDx1bG9uZz4gVG9CaXRWZWN0b3IoSUVudW1lcmFibGU8aW50PiB3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHcpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IG5ldyBMaXN0PHVsb25nPigpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWxvbmcgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgemVybyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHYuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodltpXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB6ZXJvID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgodltpXSAmIDEpICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gfD0gKHVsb25nKSgxVUwgPDwgaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZbaV0gPj49IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbi5BZGQobSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHplcm8pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEluY3JlbWVudCh0aGlzIExpc3Q8dWxvbmc+IG4sIHVsb25nIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9ICh1bG9uZykobSAmIG5baV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gKHVsb25nKShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERlY3JlbWVudCh0aGlzIExpc3Q8dWxvbmc+IG4sIHVsb25nIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9ICh1bG9uZykobSAmIH5uW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9ICh1bG9uZykobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWxvbmcgWmVyb2VzKHRoaXMgTGlzdDx1bG9uZz4gbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIG0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIG0gfD0gbltpXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodWxvbmcpfm07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVsb25nIEdyZWF0ZXJUaGFuKHRoaXMgTGlzdDx1bG9uZz4gbiwgTGlzdDx1bG9uZz4gaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIGEgPSAwO1xyXG4gICAgICAgICAgICB1bG9uZyBiID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IE1hdGguTWF4KG4uQ291bnQsIGsuQ291bnQpIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID49IGsuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSBuW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA+PSBuLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0ga1tpXTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhIHw9ICh1bG9uZykofmIgJiBuW2ldICYgfmtbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0gKHVsb25nKSh+YSAmIH5uW2ldICYga1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodWxvbmcpKGEgJiB+Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRWZWN0b3JzX2xvbmdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBGcm9tQml0VmVjdG9yKHRoaXMgTGlzdDxsb25nPiBuKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gbmV3IExpc3Q8aW50Pig2NCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNjQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSAobG9uZykoMUwgPDwgaSk7XHJcbiAgICAgICAgICAgICAgICBpbnQgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG4uQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGIgJiBuW2pdKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtICs9IDEgPDwgajtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2LkFkZChtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8bG9uZz4gVG9CaXRWZWN0b3IoSUVudW1lcmFibGU8aW50PiB3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHcpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IG5ldyBMaXN0PGxvbmc+KCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb25nIG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHplcm8gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZbaV0gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgemVybyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHZbaV0gJiAxKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtIHw9IChsb25nKSgxTCA8PCBpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdltpXSA+Pj0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBuLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoemVybylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgSW5jcmVtZW50KHRoaXMgTGlzdDxsb25nPiBuLCBsb25nIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9IChsb25nKShtICYgbltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAobG9uZykobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEZWNyZW1lbnQodGhpcyBMaXN0PGxvbmc+IG4sIGxvbmcgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKGxvbmcpKG0gJiB+bltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAobG9uZykobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBaZXJvZXModGhpcyBMaXN0PGxvbmc+IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIG0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIG0gfD0gbltpXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAobG9uZyl+bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBHcmVhdGVyVGhhbih0aGlzIExpc3Q8bG9uZz4gbiwgTGlzdDxsb25nPiBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyBhID0gMDtcclxuICAgICAgICAgICAgbG9uZyBiID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IE1hdGguTWF4KG4uQ291bnQsIGsuQ291bnQpIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID49IGsuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSBuW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA+PSBuLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0ga1tpXTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhIHw9IChsb25nKSh+YiAmIG5baV0gJiB+a1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSAobG9uZykofmEgJiB+bltpXSAmIGtbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGxvbmcpKGEgJiB+Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRWZWN0b3JzX3VpbnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBGcm9tQml0VmVjdG9yKHRoaXMgTGlzdDx1aW50PiBuKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gbmV3IExpc3Q8aW50PigzMik7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMzI7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSAodWludCkoMVUgPDwgaSk7XHJcbiAgICAgICAgICAgICAgICBpbnQgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG4uQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGIgJiBuW2pdKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtICs9IDEgPDwgajtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2LkFkZChtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8dWludD4gVG9CaXRWZWN0b3IoSUVudW1lcmFibGU8aW50PiB3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHcpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IG5ldyBMaXN0PHVpbnQ+KCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1aW50IG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHplcm8gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZbaV0gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgemVybyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHZbaV0gJiAxKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtIHw9ICh1aW50KSgxVSA8PCBpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdltpXSA+Pj0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBuLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoemVybylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgSW5jcmVtZW50KHRoaXMgTGlzdDx1aW50PiBuLCB1aW50IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9ICh1aW50KShtICYgbltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAodWludCkobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEZWNyZW1lbnQodGhpcyBMaXN0PHVpbnQ+IG4sIHVpbnQgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKHVpbnQpKG0gJiB+bltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAodWludCkobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWludCBaZXJvZXModGhpcyBMaXN0PHVpbnQ+IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IG0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIG0gfD0gbltpXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodWludCl+bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWludCBHcmVhdGVyVGhhbih0aGlzIExpc3Q8dWludD4gbiwgTGlzdDx1aW50PiBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWludCBhID0gMDtcclxuICAgICAgICAgICAgdWludCBiID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IE1hdGguTWF4KG4uQ291bnQsIGsuQ291bnQpIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID49IGsuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSBuW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA+PSBuLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0ga1tpXTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhIHw9ICh1aW50KSh+YiAmIG5baV0gJiB+a1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSAodWludCkofmEgJiB+bltpXSAmIGtbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKHVpbnQpKGEgJiB+Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRWZWN0b3JzX3VzaG9ydFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IEZyb21CaXRWZWN0b3IodGhpcyBMaXN0PHVzaG9ydD4gbikgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IG5ldyBMaXN0PGludD4oMTYpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDE2OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gKHVzaG9ydCkoMSA8PCBpKTtcclxuICAgICAgICAgICAgICAgIGludCBtID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbi5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYiAmIG5bal0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gMSA8PCBqO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHYuQWRkKG0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDx1c2hvcnQ+IFRvQml0VmVjdG9yKElFbnVtZXJhYmxlPGludD4gdylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih3KTtcclxuICAgICAgICAgICAgdmFyIG4gPSBuZXcgTGlzdDx1c2hvcnQ+KCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1c2hvcnQgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgemVybyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHYuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodltpXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB6ZXJvID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgodltpXSAmIDEpICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gfD0gKHVzaG9ydCkoMSA8PCBpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdltpXSA+Pj0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBuLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoemVybylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgSW5jcmVtZW50KHRoaXMgTGlzdDx1c2hvcnQ+IG4sIHVzaG9ydCBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDEgPSAodXNob3J0KShtICYgbltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAodXNob3J0KShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERlY3JlbWVudCh0aGlzIExpc3Q8dXNob3J0PiBuLCB1c2hvcnQgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKHVzaG9ydCkobSAmIH5uW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9ICh1c2hvcnQpKG0gXiBuW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtID0gdDE7XHJcbiAgICAgICAgICAgICAgICBuW2ldID0gdDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVzaG9ydCBaZXJvZXModGhpcyBMaXN0PHVzaG9ydD4gbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVzaG9ydCBtID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBtIHw9IG5baV07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKHVzaG9ydCl+bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdXNob3J0IEdyZWF0ZXJUaGFuKHRoaXMgTGlzdDx1c2hvcnQ+IG4sIExpc3Q8dXNob3J0PiBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdXNob3J0IGEgPSAwO1xyXG4gICAgICAgICAgICB1c2hvcnQgYiA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBNYXRoLk1heChuLkNvdW50LCBrLkNvdW50KSAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSBrLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGEgfD0gbltpXTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPj0gbi5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBiIHw9IGtbaV07XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSAodXNob3J0KSh+YiAmIG5baV0gJiB+a1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSAodXNob3J0KSh+YSAmIH5uW2ldICYga1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodXNob3J0KShhICYgfmIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQml0VmVjdG9yc19ieXRlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gRnJvbUJpdFZlY3Rvcih0aGlzIExpc3Q8Ynl0ZT4gbikgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IG5ldyBMaXN0PGludD4oOCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgODsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IChieXRlKSgxIDw8IGkpO1xyXG4gICAgICAgICAgICAgICAgaW50IG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChiICYgbltqXSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSArPSAxIDw8IGo7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdi5BZGQobSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGJ5dGU+IFRvQml0VmVjdG9yKElFbnVtZXJhYmxlPGludD4gdylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih3KTtcclxuICAgICAgICAgICAgdmFyIG4gPSBuZXcgTGlzdDxieXRlPigpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZSBtID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciB6ZXJvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2W2ldICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHplcm8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2W2ldICYgMSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSB8PSAoYnl0ZSkoMSA8PCBpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdltpXSA+Pj0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBuLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoemVybylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgSW5jcmVtZW50KHRoaXMgTGlzdDxieXRlPiBuLCBieXRlIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9IChieXRlKShtICYgbltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAoYnl0ZSkobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEZWNyZW1lbnQodGhpcyBMaXN0PGJ5dGU+IG4sIGJ5dGUgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKGJ5dGUpKG0gJiB+bltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAoYnl0ZSkobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYnl0ZSBaZXJvZXModGhpcyBMaXN0PGJ5dGU+IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBieXRlIG0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIG0gfD0gbltpXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoYnl0ZSl+bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYnl0ZSBHcmVhdGVyVGhhbih0aGlzIExpc3Q8Ynl0ZT4gbiwgTGlzdDxieXRlPiBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYnl0ZSBhID0gMDtcclxuICAgICAgICAgICAgYnl0ZSBiID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IE1hdGguTWF4KG4uQ291bnQsIGsuQ291bnQpIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID49IGsuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSBuW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA+PSBuLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0ga1tpXTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhIHw9IChieXRlKSh+YiAmIG5baV0gJiB+a1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSAoYnl0ZSkofmEgJiB+bltpXSAmIGtbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGJ5dGUpKGEgJiB+Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgR3JhcGhDaG9vc2FiaWxpdHlfdWludFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0ZDaG9vc2FibGUodGhpcyBJR3JhcGhfdWludCBncmFwaCwgRnVuYzxpbnQsIGludD4gZiwgb3V0IExpc3Q8TGlzdDxpbnQ+PiBiYWRBc3NpZ25tZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyBub2Rlc1Zpc2l0ZWQsIGNhY2hlSGl0cztcclxuICAgICAgICAgICAgcmV0dXJuIGdyYXBoLklzRkNob29zYWJsZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pZiwgb3V0IGJhZEFzc2lnbm1lbnQsIG91dCBub2Rlc1Zpc2l0ZWQsIG91dCBjYWNoZUhpdHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNGQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX3VpbnQgZ3JhcGgsIEZ1bmM8aW50LCBpbnQ+IGYsIG91dCBMaXN0PExpc3Q8aW50Pj4gYmFkQXNzaWdubWVudCwgb3V0IGxvbmcgbm9kZXNWaXNpdGVkLCBvdXQgbG9uZyBjYWNoZUhpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYWRBc3NpZ25tZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIG5vZGVzVmlzaXRlZCA9IDA7XHJcbiAgICAgICAgICAgIGNhY2hlSGl0cyA9IDA7XHJcbiAgICAgICAgICAgIHZhciBsaXZlVmVydGV4Qml0cyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgZ3JhcGguTikuVG9fdWludCgpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihncmFwaC5WZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gZih2KSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgbWF4TGlzdFNpemUgPSBzaXplcy5NYXgoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAoaW50IHBvdFNpemUgPSBtYXhMaXN0U2l6ZTsgcG90U2l6ZSA8IGdyYXBoLk47IHBvdFNpemUrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy92YXIgY2FjaGUgPSBuZXcgRGljdGlvbmFyeTxCaXRMZXZlbEdlbmVyYXRpb24uSGFzaGVkQXNzaWdubWVudF91aW50LCBib29sPigpO1xyXG4gICAgICAgICAgICAgICAgRGljdGlvbmFyeTxCaXRMZXZlbEdlbmVyYXRpb24uSGFzaGVkQXNzaWdubWVudF91aW50LCBib29sPiBjYWNoZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yR3JhcGggaW4gQml0TGV2ZWxHZW5lcmF0aW9uLkFzc2lnbm1lbnRzX3VpbnQuRW51bWVyYXRlKHNpemVzLCBwb3RTaXplKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocG90U2l6ZSA+IG1heExpc3RTaXplKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWludCB4eCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeHggfD0gY29sb3JHcmFwaFtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeHguUG9wdWxhdGlvbkNvdW50KCkgPD0gaSArIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBjb2xvckdyYXBoLkxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY29sb3JHcmFwaFtpXSAmIGNvbG9yR3JhcGhbal0pID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvciBpbiBjb2xvckdyYXBoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyYXBoLklzSW5kZXBlbmRlbnQoY29sb3IpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgbGl2ZVZlcnRleEJpdHMsIDAsIGNhY2hlLCByZWYgbm9kZXNWaXNpdGVkLCByZWYgY2FjaGVIaXRzKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhZEFzc2lnbm1lbnQgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGdyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgYml0ID0gMVUgPDwgdjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGJpdCAmIGNvbG9yR3JhcGhbaV0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuQWRkKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhZEFzc2lnbm1lbnQuQWRkKGxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNraXA6IDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNDaG9vc2FibGUodGhpcyBJR3JhcGhfdWludCBncmFwaCwgdWludFtdIGNvbG9yR3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIG5vZGVzVmlzaXRlZCwgY2FjaGVIaXRzO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgb3V0IG5vZGVzVmlzaXRlZCwgb3V0IGNhY2hlSGl0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNDaG9vc2FibGUodGhpcyBJR3JhcGhfdWludCBncmFwaCwgdWludFtdIGNvbG9yR3JhcGgsIG91dCBsb25nIG5vZGVzVmlzaXRlZCwgb3V0IGxvbmcgY2FjaGVIaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbm9kZXNWaXNpdGVkID0gMDtcclxuICAgICAgICAgICAgY2FjaGVIaXRzID0gMDtcclxuICAgICAgICAgICAgLy92YXIgY2FjaGUgPSBuZXcgRGljdGlvbmFyeTxCaXRMZXZlbEdlbmVyYXRpb24uSGFzaGVkQXNzaWdubWVudF91aW50LCBib29sPigpO1xyXG4gICAgICAgICAgICBEaWN0aW9uYXJ5PEJpdExldmVsR2VuZXJhdGlvbi5IYXNoZWRBc3NpZ25tZW50X3VpbnQsIGJvb2w+IGNhY2hlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBncmFwaC5Jc0Nob29zYWJsZShjb2xvckdyYXBoLCBFbnVtZXJhYmxlLlJhbmdlKDAsIGdyYXBoLk4pLlRvX3VpbnQoKSwgMCwgY2FjaGUsIHJlZiBub2Rlc1Zpc2l0ZWQsIHJlZiBjYWNoZUhpdHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgSXNDaG9vc2FibGUodGhpcyBJR3JhcGhfdWludCBncmFwaCwgdWludFtdIGNvbG9yR3JhcGgsIHVpbnQgbGl2ZVZlcnRleEJpdHMsIGludCBjLCBEaWN0aW9uYXJ5PEJpdExldmVsR2VuZXJhdGlvbi5IYXNoZWRBc3NpZ25tZW50X3VpbnQsIGJvb2w+IGNhY2hlLCByZWYgbG9uZyBub2Rlc1Zpc2l0ZWQsIHJlZiBsb25nIGNhY2hlSGl0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5vZGVzVmlzaXRlZCsrO1xyXG5cclxuICAgICAgICAgICAgZ3JhcGguQmVHcmVlZHkoY29sb3JHcmFwaCwgcmVmIGxpdmVWZXJ0ZXhCaXRzLCBjKTtcclxuICAgICAgICAgICAgaWYgKGxpdmVWZXJ0ZXhCaXRzID09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKChsaXZlVmVydGV4Qml0cyAmIH5jb2xvckdyYXBoLk9yKGMpKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy9ib29sIGNhY2hlZFJlc3VsdDtcclxuICAgICAgICAgICAgLy92YXIga2V5ID0gbmV3IEJpdExldmVsR2VuZXJhdGlvbi5IYXNoZWRBc3NpZ25tZW50X3VpbnQoY29sb3JHcmFwaCwgYywgbGl2ZVZlcnRleEJpdHMpO1xyXG4gICAgICAgICAgICAvL2lmIChjYWNoZS5UcnlHZXRWYWx1ZShrZXksIG91dCBjYWNoZWRSZXN1bHQpKVxyXG4gICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgLy8gICAgY2FjaGVIaXRzKys7XHJcbiAgICAgICAgICAgIC8vICAgIHJldHVybiBjYWNoZWRSZXN1bHQ7XHJcbiAgICAgICAgICAgIC8vfVxyXG5cclxuICAgICAgICAgICAgdmFyIGNob29zYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgViA9IGNvbG9yR3JhcGhbY10gJiBsaXZlVmVydGV4Qml0cztcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIEMgaW4gZ3JhcGguTWF4aW1hbEluZGVwZW5kZW50U3Vic2V0cyhWKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyYXBoLklzQ2hvb3NhYmxlKGNvbG9yR3JhcGgsIGxpdmVWZXJ0ZXhCaXRzIF4gQywgYyArIDEsIGNhY2hlLCByZWYgbm9kZXNWaXNpdGVkLCByZWYgY2FjaGVIaXRzKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaG9vc2FibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2NhY2hlW2tleV0gPSBjaG9vc2FibGU7XHJcbiAgICAgICAgICAgIHJldHVybiBjaG9vc2FibGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBCZUdyZWVkeSh0aGlzIElHcmFwaF91aW50IGdyYXBoLCB1aW50W10gY29sb3JHcmFwaCwgcmVmIHVpbnQgbGl2ZVZlcnRleEJpdHMsIGludCBjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsQml0cyA9IGxpdmVWZXJ0ZXhCaXRzO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdHMgPSBsaXZlVmVydGV4Qml0cztcclxuICAgICAgICAgICAgICAgIHdoaWxlIChiaXRzICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpdCA9IGJpdHMgJiAofmJpdHMgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICBiaXRzIF49IGJpdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBjOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoYml0ICYgY29sb3JHcmFwaFtpXSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvckNvdW50ID4gZ3JhcGguRGVncmVlSW5TZXQoYml0LkV4dHJhY3QoKSwgbGl2ZVZlcnRleEJpdHMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXZlVmVydGV4Qml0cyBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxpdmVWZXJ0ZXhCaXRzID09IG9yaWdpbmFsQml0cylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEdyYXBoQ2hvb3NhYmlsaXR5X2xvbmdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNGQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX2xvbmcgZ3JhcGgsIEZ1bmM8aW50LCBpbnQ+IGYsIG91dCBMaXN0PExpc3Q8aW50Pj4gYmFkQXNzaWdubWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhZEFzc2lnbm1lbnQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxpdmVWZXJ0ZXhCaXRzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBncmFwaC5OKS5Ub19sb25nKCk7XHJcbiAgICAgICAgICAgIHZhciBzaXplcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KGdyYXBoLlZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBmKHYpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBtYXhMaXN0U2l6ZSA9IHNpemVzLk1heCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgcG90U2l6ZSA9IG1heExpc3RTaXplOyBwb3RTaXplIDwgZ3JhcGguTjsgcG90U2l6ZSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JHcmFwaCBpbiBCaXRMZXZlbEdlbmVyYXRpb24uQXNzaWdubWVudHNfbG9uZy5FbnVtZXJhdGUoc2l6ZXMsIHBvdFNpemUpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3RTaXplID4gbWF4TGlzdFNpemUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeHggPSAwTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4eCB8PSBjb2xvckdyYXBoW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4eC5Qb3B1bGF0aW9uQ291bnQoKSA8PSBpICsgMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGNvbG9yR3JhcGguTGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChjb2xvckdyYXBoW2ldICYgY29sb3JHcmFwaFtqXSkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yIGluIGNvbG9yR3JhcGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JhcGguSXNJbmRlcGVuZGVudChjb2xvcikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgbGl2ZVZlcnRleEJpdHMsIDApKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFkQXNzaWdubWVudCA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gZ3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJpdCA9IDFMIDw8IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChiaXQgJiBjb2xvckdyYXBoW2ldKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0LkFkZChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWRBc3NpZ25tZW50LkFkZChsaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBza2lwOiA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX2xvbmcgZ3JhcGgsIGxvbmdbXSBjb2xvckdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdyYXBoLklzQ2hvb3NhYmxlKGNvbG9yR3JhcGgsIEVudW1lcmFibGUuUmFuZ2UoMCwgZ3JhcGguTikuVG9fbG9uZygpLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0Nob29zYWJsZSh0aGlzIElHcmFwaF9sb25nIGdyYXBoLCBsb25nW10gY29sb3JHcmFwaCwgbG9uZyBzdWJzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgc3Vic2V0LCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIElzQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX2xvbmcgZ3JhcGgsIGxvbmdbXSBjb2xvckdyYXBoLCBsb25nIGxpdmVWZXJ0ZXhCaXRzLCBpbnQgYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdyYXBoLkJlR3JlZWR5KGNvbG9yR3JhcGgsIHJlZiBsaXZlVmVydGV4Qml0cywgYyk7XHJcbiAgICAgICAgICAgIGlmIChsaXZlVmVydGV4Qml0cyA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGlmICgobGl2ZVZlcnRleEJpdHMgJiB+Y29sb3JHcmFwaC5PcihjKSkgIT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjaG9vc2FibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIFYgPSBjb2xvckdyYXBoW2NdICYgbGl2ZVZlcnRleEJpdHM7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBDIGluIGdyYXBoLk1heGltYWxJbmRlcGVuZGVudFN1YnNldHMoVikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChncmFwaC5Jc0Nob29zYWJsZShjb2xvckdyYXBoLCBsaXZlVmVydGV4Qml0cyBeIEMsIGMgKyAxKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaG9vc2FibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hvb3NhYmxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgQmVHcmVlZHkodGhpcyBJR3JhcGhfbG9uZyBncmFwaCwgbG9uZ1tdIGNvbG9yR3JhcGgsIHJlZiBsb25nIGxpdmVWZXJ0ZXhCaXRzLCBpbnQgYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxCaXRzID0gbGl2ZVZlcnRleEJpdHM7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0cyA9IGxpdmVWZXJ0ZXhCaXRzO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gYml0cyAmIC1iaXRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJpdHMgXj0gYml0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IGM7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChiaXQgJiBjb2xvckdyYXBoW2ldKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yQ291bnQgPiBncmFwaC5EZWdyZWVJblNldChiaXQuRXh0cmFjdCgpLCBsaXZlVmVydGV4Qml0cykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpdmVWZXJ0ZXhCaXRzIF49IGJpdDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGl2ZVZlcnRleEJpdHMgPT0gb3JpZ2luYWxCaXRzKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNTdWJzZXRUd29Db2xvcmFibGUoQml0R3JhcGhfbG9uZyBnLCBsb25nIHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjID0gbmV3IGludFtnLk5dO1xyXG4gICAgICAgICAgICB2YXIgcSA9IG5ldyBpbnRbZy5OXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsZWZ0b3ZlciA9IHNldDtcclxuICAgICAgICAgICAgdmFyIHMgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobGVmdG92ZXIgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBsZWZ0b3Zlci5MZWFzdFNpZ25pZmljYW50Qml0KCk7XHJcbiAgICAgICAgICAgICAgICBxW3NdID0gcjtcclxuICAgICAgICAgICAgICAgIGNbcl0gPSAxO1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBzO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChzIDw9IGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBxW3MrK107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBnLk5laWdoYm9yc0luU2V0KHYsIHNldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChuICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gbiAmIC1uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IGJpdC5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY1t3XSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxWysrZV0gPSB3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY1t3XSA9IDMgLSBjW3ZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNbd10gIT0gMyAtIGNbdl0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbiBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZWZ0b3ZlciBePSAoMUwgPDwgdik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSGFzaGVkQXNzaWdubWVudF91bG9uZ1xyXG4gICAge1xyXG4gICAgICAgIHVsb25nW10gX2Fzc2lnbm1lbnQ7IFxyXG4gICAgICAgIGludCBfbGVuZ3RoO1xyXG5cdFx0aW50IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgcHVibGljIEhhc2hlZEFzc2lnbm1lbnRfdWxvbmcodWxvbmdbXSBhc3NpZ25tZW50LCBpbnQgaW5kZXgsIHVsb25nIG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2Fzc2lnbm1lbnQgPSBuZXcgdWxvbmdbYXNzaWdubWVudC5MZW5ndGggLSBpbmRleF07XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluZGV4OyBpIDwgYXNzaWdubWVudC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAodWxvbmcpKGFzc2lnbm1lbnRbaV0gJiBvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9hc3NpZ25tZW50W19sZW5ndGhdID0geDtcclxuICAgICAgICAgICAgICAgICAgICBfbGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFycmF5LlNvcnQ8dWxvbmc+KF9hc3NpZ25tZW50LCAwLCBfbGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IEhhc2goX2Fzc2lnbm1lbnQsIF9sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IEhhc2godWxvbmdbXSBsaXN0LCBpbnQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgaGFzaCA9IDUzODE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBoYXNoID0gKHVsb25nKShsaXN0W2ldICsgKGhhc2ggPDwgNSkgKyBoYXNoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KWhhc2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIEhhc2hlZEFzc2lnbm1lbnRfdWxvbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKEhhc2hlZEFzc2lnbm1lbnRfdWxvbmcgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbCB8fCBfbGVuZ3RoICE9IG90aGVyLl9sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGlmIChfYXNzaWdubWVudFtpXSAhPSBvdGhlci5fYXNzaWdubWVudFtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSGFzaGVkQXNzaWdubWVudF91aW50XHJcbiAgICB7XHJcbiAgICAgICAgdWludFtdIF9hc3NpZ25tZW50OyBcclxuICAgICAgICBpbnQgX2xlbmd0aDtcclxuXHRcdGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIYXNoZWRBc3NpZ25tZW50X3VpbnQodWludFtdIGFzc2lnbm1lbnQsIGludCBpbmRleCwgdWludCBvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9hc3NpZ25tZW50ID0gbmV3IHVpbnRbYXNzaWdubWVudC5MZW5ndGggLSBpbmRleF07XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluZGV4OyBpIDwgYXNzaWdubWVudC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAodWludCkoYXNzaWdubWVudFtpXSAmIG9uKTtcclxuICAgICAgICAgICAgICAgIGlmICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2lnbm1lbnRbX2xlbmd0aF0gPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIF9sZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQXJyYXkuU29ydDx1aW50PihfYXNzaWdubWVudCwgMCwgX2xlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoKF9hc3NpZ25tZW50LCBfbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBIYXNoKHVpbnRbXSBsaXN0LCBpbnQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgaGFzaCA9IDUzODE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBoYXNoID0gKHVsb25nKShsaXN0W2ldICsgKGhhc2ggPDwgNSkgKyBoYXNoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KWhhc2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIEhhc2hlZEFzc2lnbm1lbnRfdWludCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoSGFzaGVkQXNzaWdubWVudF91aW50IG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwgfHwgX2xlbmd0aCAhPSBvdGhlci5fbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBpZiAoX2Fzc2lnbm1lbnRbaV0gIT0gb3RoZXIuX2Fzc2lnbm1lbnRbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIGNsYXNzIEhhc2hlZEFzc2lnbm1lbnRfdXNob3J0XHJcbiAgICB7XHJcbiAgICAgICAgdXNob3J0W10gX2Fzc2lnbm1lbnQ7IFxyXG4gICAgICAgIGludCBfbGVuZ3RoO1xyXG5cdFx0aW50IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgcHVibGljIEhhc2hlZEFzc2lnbm1lbnRfdXNob3J0KHVzaG9ydFtdIGFzc2lnbm1lbnQsIGludCBpbmRleCwgdXNob3J0IG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2Fzc2lnbm1lbnQgPSBuZXcgdXNob3J0W2Fzc2lnbm1lbnQuTGVuZ3RoIC0gaW5kZXhdO1xyXG4gICAgICAgICAgICBfbGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBpbmRleDsgaSA8IGFzc2lnbm1lbnQuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gKHVzaG9ydCkoYXNzaWdubWVudFtpXSAmIG9uKTtcclxuICAgICAgICAgICAgICAgIGlmICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2lnbm1lbnRbX2xlbmd0aF0gPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIF9sZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQXJyYXkuU29ydDx1c2hvcnQ+KF9hc3NpZ25tZW50LCAwLCBfbGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IEhhc2goX2Fzc2lnbm1lbnQsIF9sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IEhhc2godXNob3J0W10gbGlzdCwgaW50IGxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIGhhc2ggPSA1MzgxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaGFzaCA9ICh1bG9uZykobGlzdFtpXSArIChoYXNoIDw8IDUpICsgaGFzaCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGludCloYXNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKG9iaiBhcyBIYXNoZWRBc3NpZ25tZW50X3VzaG9ydCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoSGFzaGVkQXNzaWdubWVudF91c2hvcnQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbCB8fCBfbGVuZ3RoICE9IG90aGVyLl9sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGlmIChfYXNzaWdubWVudFtpXSAhPSBvdGhlci5fYXNzaWdubWVudFtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSGFzaGVkQXNzaWdubWVudF9ieXRlXHJcbiAgICB7XHJcbiAgICAgICAgYnl0ZVtdIF9hc3NpZ25tZW50OyBcclxuICAgICAgICBpbnQgX2xlbmd0aDtcclxuXHRcdGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIYXNoZWRBc3NpZ25tZW50X2J5dGUoYnl0ZVtdIGFzc2lnbm1lbnQsIGludCBpbmRleCwgYnl0ZSBvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9hc3NpZ25tZW50ID0gbmV3IGJ5dGVbYXNzaWdubWVudC5MZW5ndGggLSBpbmRleF07XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluZGV4OyBpIDwgYXNzaWdubWVudC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAoYnl0ZSkoYXNzaWdubWVudFtpXSAmIG9uKTtcclxuICAgICAgICAgICAgICAgIGlmICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2lnbm1lbnRbX2xlbmd0aF0gPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIF9sZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQXJyYXkuU29ydDxieXRlPihfYXNzaWdubWVudCwgMCwgX2xlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoKF9hc3NpZ25tZW50LCBfbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBIYXNoKGJ5dGVbXSBsaXN0LCBpbnQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgaGFzaCA9IDUzODE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBoYXNoID0gKHVsb25nKShsaXN0W2ldICsgKGhhc2ggPDwgNSkgKyBoYXNoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KWhhc2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIEhhc2hlZEFzc2lnbm1lbnRfYnl0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoSGFzaGVkQXNzaWdubWVudF9ieXRlIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwgfHwgX2xlbmd0aCAhPSBvdGhlci5fbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBpZiAoX2Fzc2lnbm1lbnRbaV0gIT0gb3RoZXIuX2Fzc2lnbm1lbnRbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBNYXhpbWFsbmRlcGVuZGVudFNldFNlYXJjaGluZ1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxsb25nPiBHZW5lcmF0ZU1heGltYWxJbmRlcGVuZGVudFN1YnNldHMoQml0R3JhcGhfbG9uZyBnLCBsb25nIHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkID0gbmV3IGludFs2NF07XHJcblxyXG4gICAgICAgICAgICB2YXIgbiA9IHNldC5Qb3B1bGF0aW9uQ291bnREZW5zZSgpO1xyXG4gICAgICAgICAgICB2YXIgRCA9IG5ldyBsb25nW25dO1xyXG5cclxuICAgICAgICAgICAgdmFyIHEgPSBzZXQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiaXQgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGJpdC5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZFt2XSA9IGcuRGVncmVlSW5TZXQodiwgc2V0KTtcclxuICAgICAgICAgICAgICAgIERbZFt2XV0gfD0gYml0O1xyXG5cclxuICAgICAgICAgICAgICAgIHEgXj0gYml0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYml0cyA9IG5ldyBsb25nW25dO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKERbal0gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSBEW2pdICYgLURbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpdHNbbiAtIDEgLSBpXSA9IGJpdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gYml0LkV4dHJhY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGcuTmVpZ2hib3JzSW5TZXQodiwgc2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gcSAmIC1xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBiLkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEW2RbeF1dIF49IGI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW3hdLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEW2RbeF1dIHw9IGI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcSBePSBiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQgXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEW2pdIF49IGJpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gR2VuZXJhdGVNYXhpbWFsSW5kZXBlbmRlbnRTdWJzZXRzKGcsIGJpdHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIExpc3Q8bG9uZz4gR2VuZXJhdGVNYXhpbWFsSW5kZXBlbmRlbnRTdWJzZXRzKEJpdEdyYXBoX2xvbmcgZywgbG9uZ1tdIGJpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWlzID0gbmV3IExpc3Q8bG9uZz4oOCk7XHJcbiAgICAgICAgICAgIG1pcy5BZGQoMEwpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVhcmxpZXIgPSAwTDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBiaXRzLkxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0ID0gYml0c1tqXTtcclxuICAgICAgICAgICAgICAgIHZhciB2ID0gYml0LkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBtaXMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBtaXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE4gPSBnLk5laWdoYm9yc0luU2V0KHYsIG0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChOID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaXNbaV0gfD0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXAgPSBtICYgfk47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtcHAgPSBtcCB8IGJpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHEgPSBOO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGVhcmxpZXIgJiB+bXBwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IGIuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxcSA9IGcuTmVpZ2hib3JzSW5TZXQodywgbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocXEgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmIgPSBxcSAmIC1xcTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IGJiLkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGcuTmVpZ2hib3JzSW5TZXQoeiwgbXBwKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHFxIF49IGJiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgXj0gYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFggPSBnLk5laWdoYm9yc0luU2V0KHYsIGVhcmxpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxID0gWCAmIH5OO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IGIuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnLk5laWdoYm9yc0luU2V0KHcsIG1wKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFggXj0gYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgXj0gYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFggIT0gTilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFogPSAwTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChaIDwgTilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBaID0gKFogLSBYKSAmIFg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoWiAmIE4pID09IFopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWcuSXNJbmRlcGVuZGVudChaKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtbSA9IG1wIHwgWjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZWFybGllciAmIH5tbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gTiAmIH5aO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gYi5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXEgPSBnLk5laWdoYm9yc0luU2V0KHcsIGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocXEgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJiID0gcXEgJiAtcXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IGJiLkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZy5OZWlnaGJvcnNJblNldCh6LCBtbSkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIG5vdE1heGltYWw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXEgXj0gYmI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgXj0gYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxubm90TWF4aW1hbDogO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaXMuQWRkKChtIHwgYml0KSAmIH5OKTtcclxuc2tpcDogO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlYXJsaWVyIHw9IGJpdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1pcztcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgTGV4aWNvZ3JhcGhpY2FsbHlGaXJzdENvbnRhaW5pbmcoQml0R3JhcGhfbG9uZyBnLCBsb25nIHNldCwgbG9uZyBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc2V0IF49IFM7XHJcbiAgICAgICAgICAgIHdoaWxlIChzZXQgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdCA9IHNldCAmIC1zZXQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGJpdC5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGcuTmVpZ2hib3JzSW5TZXQodiwgUykgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBTIHw9IGJpdDtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXQgXj0gYml0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBQYXJlbnQoQml0R3JhcGhfbG9uZyBnLCBsb25nIHNldCwgbG9uZyBMRk1JUywgbG9uZyBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGEgPSBMRk1JUyAmIH5TO1xyXG4gICAgICAgICAgICB2YXIgYml0ID0gYSAmIC1hO1xyXG4gICAgICAgICAgICB2YXIgdiA9IGJpdC5FeHRyYWN0KCk7XHJcbiAgICAgICAgICAgIHZhciBOID0gZy5OZWlnaGJvcnNJblNldCh2LCBTKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBMZXhpY29ncmFwaGljYWxseUZpcnN0Q29udGFpbmluZyhnLCBzZXQsIChTIHwgYml0KSBeIE4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIExhdGVyKEJpdEdyYXBoX2xvbmcgZywgbG9uZyBzZXQsIGxvbmcgTEZNSVMsIGludCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHEgPSBnLk5laWdoYm9yc0luU2V0KHYsIHNldCBeIExGTUlTKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBlYXJsaWVyID0gKCgxTCA8PCB2KSAtIDEpICYgTEZNSVM7XHJcbiAgICAgICAgICAgIHZhciBsYXRlciA9IDBMO1xyXG4gICAgICAgICAgICB3aGlsZSAoc2V0ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiaXQgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICB2YXIgdyA9IGJpdC5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGcuTmVpZ2hib3JzSW5TZXQodywgZWFybGllcikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBsYXRlciB8PSBiaXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgcSBePSBiaXQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsYXRlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEdyYXBoaWNzTGF5ZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEFSR0JcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEFSR0IgQmFzaWNQYWxldHRlKGludCBxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHEgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFSR0IoMjU1LCAyNTUsIDI1NSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRnJvbUhTTCgwLjYgKyAoZG91YmxlKVJldmVyc2VCaXRzKCh1aW50KXEpIC8gTWF0aC5Qb3coMi4wZiwgMzIpLCAxLjAsIDAuNjUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBBUkdCIEZyb21GcmFjdGlvbmFsKGRvdWJsZSBhLCBkb3VibGUgciwgZG91YmxlIGcsIGRvdWJsZSBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBUkdCKChpbnQpKGEgKiAyNTUpLCAoaW50KShyICogMjU1KSwgKGludCkoZyAqIDI1NSksIChpbnQpKGIgKiAyNTUpKTsgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEFSR0IgRnJvbUhTTChkb3VibGUgaCwgZG91YmxlIHMsIGRvdWJsZSBsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUgKGggPiAxLjApXHJcbiAgICAgICAgICAgICAgICBoIC09IDEuMDtcclxuICAgICAgICAgICAgd2hpbGUgKHMgPiAxLjApXHJcbiAgICAgICAgICAgICAgICBzIC09IDEuMDtcclxuICAgICAgICAgICAgd2hpbGUgKGwgPiAxLjApXHJcbiAgICAgICAgICAgICAgICBsIC09IDEuMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChzID09IDAuMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBGcm9tRnJhY3Rpb25hbCgxLjAsIGwsIGwsIGwpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHEgPSBsIDwgMC41ID8gbCAqICgxLjAgKyBzKSA6IGwgKyBzIC0gbCAqIHM7XHJcbiAgICAgICAgICAgIHZhciBwID0gMi4wICogbCAtIHE7XHJcbiAgICAgICAgICAgIHZhciByID0gSHVlVG9SZ2IocCwgcSwgaCArIDEuMCAvIDMuMCk7XHJcbiAgICAgICAgICAgIHZhciBnID0gSHVlVG9SZ2IocCwgcSwgaCk7XHJcbiAgICAgICAgICAgIHZhciBiID0gSHVlVG9SZ2IocCwgcSwgaCAtIDEuMCAvIDMuMCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRnJvbUZyYWN0aW9uYWwoMS4wLCByLCBnLCBiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBkb3VibGUgSHVlVG9SZ2IoZG91YmxlIHAsIGRvdWJsZSBxLCBkb3VibGUgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0IDwgMC4wKSB0ICs9IDEuMGY7XHJcbiAgICAgICAgICAgIGlmICh0ID4gMS4wKSB0IC09IDEuMDtcclxuICAgICAgICAgICAgaWYgKHQgPCAxLjAgLyA2LjApIHJldHVybiBwICsgKHEgLSBwKSAqIDYuMCAqIHQ7XHJcbiAgICAgICAgICAgIGlmICh0IDwgMS4wIC8gMi4wKSByZXR1cm4gcTtcclxuICAgICAgICAgICAgaWYgKHQgPCAyLjAgLyAzLjApIHJldHVybiBwICsgKHEgLSBwKSAqICgyLjAgLyAzLjAgLSB0KSAqIDYuMDtcclxuICAgICAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdWludCBSZXZlcnNlQml0cyh1aW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IHkgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDMyOyBpKyspXHJcbiAgICAgICAgICAgICAgICB5IHw9ICh1aW50KSgoeCAmICgxIDw8IGkpKSA8PCAoMzEgLSAyICogaSkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEEgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgUiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBHIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IEIgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQVJHQihpbnQgYSwgaW50IHIsIGludCBnLCBpbnQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEEgPSBhO1xyXG4gICAgICAgICAgICBSID0gcjtcclxuICAgICAgICAgICAgRyA9IGc7XHJcbiAgICAgICAgICAgIEIgPSBiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgQVJHQihpbnQgciwgaW50IGcsIGludCBiKVxyXG4gICAgICAgICAgICA6IHRoaXMoMjU1LCByLCBnLCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJ7MH0sezF9LHsyfSx7M31cIiwgQSwgUiwgRywgQik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaGljc0xheWVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCb3hcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEJveCBFbXB0eSA9IG5ldyBCb3goMCwgMCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgVG9wIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIExlZnQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgV2lkdGggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgSGVpZ2h0IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBYIHsgZ2V0IHsgcmV0dXJuIExlZnQ7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgWSB7IGdldCB7IHJldHVybiBUb3A7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgUmlnaHQgeyBnZXQgeyByZXR1cm4gTGVmdCArIFdpZHRoOyB9IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIEJvdHRvbSB7IGdldCB7IHJldHVybiBUb3AgKyBIZWlnaHQ7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm94KGRvdWJsZSBsZWZ0LCBkb3VibGUgdG9wKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGVmdCA9IGxlZnQ7XHJcbiAgICAgICAgICAgIFRvcCA9IHRvcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEJveChkb3VibGUgbGVmdCwgZG91YmxlIHRvcCwgZG91YmxlIHdpZHRoLCBkb3VibGUgaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGVmdCA9IGxlZnQ7XHJcbiAgICAgICAgICAgIFRvcCA9IHRvcDtcclxuICAgICAgICAgICAgV2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgSGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgSW5mbGF0ZShkb3VibGUgeCwgZG91YmxlIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMZWZ0IC09IHg7XHJcbiAgICAgICAgICAgIFRvcCAtPSB5O1xyXG4gICAgICAgICAgICBXaWR0aCArPSAyICogeDtcclxuICAgICAgICAgICAgSGVpZ2h0ICs9IDIgKiB5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWlucyhkb3VibGUgeCwgZG91YmxlIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGVmdCA8PSB4ICYmIHggPD0gUmlnaHQgJiZcclxuICAgICAgICAgICAgICAgICAgIFRvcCA8PSB5ICYmIHkgPD0gQm90dG9tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWlucyhCb3ggYm94KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExlZnQgPD0gYm94LkxlZnQgJiYgYm94LlJpZ2h0IDw9IFJpZ2h0ICYmXHJcbiAgICAgICAgICAgICAgICAgICBUb3AgPD0gYm94LlRvcCAmJiBib3guQm90dG9tIDw9IEJvdHRvbTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEdyYXBoaWNzTGF5ZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZvbnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgU2l6ZSB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBGb250KHN0cmluZyBuYW1lLCBpbnQgc2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICBTaXplID0gc2l6ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxuXHJcbi8vLyA8c3VtbWFyeT5cclxuLy8vIEMjIGltcGxlbWVudGF0aW9uIG9mIEFTQ0lJODUgZW5jb2RpbmcuIFxyXG4vLy8gQmFzZWQgb24gQyBjb2RlIGZyb20gaHR0cDovL3d3dy5zdGlsbGhxLmNvbS9jZ2ktYmluL2N2c3dlYi9hc2NpaTg1L1xyXG4vLy8gPC9zdW1tYXJ5PlxyXG4vLy8gPHJlbWFya3M+XHJcbi8vLyBKZWZmIEF0d29vZFxyXG4vLy8gaHR0cDovL3d3dy5jb2Rpbmdob3Jyb3IuY29tL2Jsb2cvYXJjaGl2ZXMvMDAwNDEwLmh0bWxcclxuLy8vIDwvcmVtYXJrcz5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQXNjaWk4NVxyXG4gICAge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gUHJlZml4IG1hcmsgdGhhdCBpZGVudGlmaWVzIGFuIGVuY29kZWQgQVNDSUk4NSBzdHJpbmcsIHRyYWRpdGlvbmFsbHkgJzx+J1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBQcmVmaXhNYXJrID0gXCJcIjtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIFN1ZmZpeCBtYXJrIHRoYXQgaWRlbnRpZmllcyBhbiBlbmNvZGVkIEFTQ0lJODUgc3RyaW5nLCB0cmFkaXRpb25hbGx5ICd+PidcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgU3VmZml4TWFyayA9IFwiXCI7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBNYXhpbXVtIGxpbmUgbGVuZ3RoIGZvciBlbmNvZGVkIEFTQ0lJODUgc3RyaW5nOyBcclxuICAgICAgICAvLy8gc2V0IHRvIHplcm8gZm9yIG9uZSB1bmJyb2tlbiBsaW5lLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIGludCBMaW5lTGVuZ3RoID0gMDtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEFkZCB0aGUgUHJlZml4IGFuZCBTdWZmaXggbWFya3Mgd2hlbiBlbmNvZGluZywgYW5kIGVuZm9yY2UgdGhlaXIgcHJlc2VuY2UgZm9yIGRlY29kaW5nXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFbmZvcmNlTWFya3MgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdCBpbnQgX2FzY2lpT2Zmc2V0ID0gMzM7XHJcbiAgICAgICAgcHJpdmF0ZSBieXRlW10gX2VuY29kZWRCbG9jayA9IG5ldyBieXRlWzVdO1xyXG4gICAgICAgIHByaXZhdGUgYnl0ZVtdIF9kZWNvZGVkQmxvY2sgPSBuZXcgYnl0ZVs0XTtcclxuICAgICAgICBwcml2YXRlIHVpbnQgX3R1cGxlID0gMDtcclxuICAgICAgICBwcml2YXRlIGludCBfbGluZVBvcyA9IDA7XHJcblxyXG4gICAgICAgIHByaXZhdGUgdWludFtdIHBvdzg1ID0geyA4NSAqIDg1ICogODUgKiA4NSwgODUgKiA4NSAqIDg1LCA4NSAqIDg1LCA4NSwgMSB9O1xyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIERlY29kZXMgYW4gQVNDSUk4NSBlbmNvZGVkIHN0cmluZyBpbnRvIHRoZSBvcmlnaW5hbCBiaW5hcnkgZGF0YVxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic1wiPkFTQ0lJODUgZW5jb2RlZCBzdHJpbmc8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz5ieXRlIGFycmF5IG9mIGRlY29kZWQgYmluYXJ5IGRhdGE8L3JldHVybnM+XHJcbiAgICAgICAgcHVibGljIGJ5dGVbXSBEZWNvZGUoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoRW5mb3JjZU1hcmtzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXMuU3RhcnRzV2l0aChQcmVmaXhNYXJrKSB8ICFzLkVuZHNXaXRoKFN1ZmZpeE1hcmspKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJBU0NJSTg1IGVuY29kZWQgZGF0YSBzaG91bGQgYmVnaW4gd2l0aCAnXCIgKyBQcmVmaXhNYXJrICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCInIGFuZCBlbmQgd2l0aCAnXCIgKyBTdWZmaXhNYXJrICsgXCInXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzdHJpcCBwcmVmaXggYW5kIHN1ZmZpeCBpZiBwcmVzZW50XHJcbiAgICAgICAgICAgIGlmIChzLlN0YXJ0c1dpdGgoUHJlZml4TWFyaykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHMgPSBzLlN1YnN0cmluZyhQcmVmaXhNYXJrLkxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHMuRW5kc1dpdGgoU3VmZml4TWFyaykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHMgPSBzLlN1YnN0cmluZygwLCBzLkxlbmd0aCAtIFN1ZmZpeE1hcmsuTGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG1zID0gbmV3IExpc3Q8Ynl0ZT4oKTtcclxuICAgICAgICAgICAgaW50IGNvdW50ID0gMDtcclxuICAgICAgICAgICAgYm9vbCBwcm9jZXNzQ2hhciA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAoY2hhciBjIGluIHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd6JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJUaGUgY2hhcmFjdGVyICd6JyBpcyBpbnZhbGlkIGluc2lkZSBhbiBBU0NJSTg1IGJsb2NrLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGVjb2RlZEJsb2NrWzBdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RlY29kZWRCbG9ja1sxXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWNvZGVkQmxvY2tbMl0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGVjb2RlZEJsb2NrWzNdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXMuQWRkUmFuZ2UoX2RlY29kZWRCbG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDaGFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1xcbic6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXFxyJzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdcXHQnOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1xcMCc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXFxmJzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdcXGInOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzQ2hhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA8ICchJyB8fCBjID4gJ3UnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiQmFkIGNoYXJhY3RlciAnXCIgKyBjICsgXCInIGZvdW5kLiBBU0NJSTg1IG9ubHkgYWxsb3dzIGNoYXJhY3RlcnMgJyEnIHRvICd1Jy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0NoYXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzc0NoYXIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3R1cGxlICs9ICgodWludCkoYyAtIF9hc2NpaU9mZnNldCkgKiBwb3c4NVtjb3VudF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID09IF9lbmNvZGVkQmxvY2suTGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlQmxvY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXMuQWRkUmFuZ2UoX2RlY29kZWRCbG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90dXBsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgc29tZSBieXRlcyBsZWZ0IG92ZXIgYXQgdGhlIGVuZC4uXHJcbiAgICAgICAgICAgIGlmIChjb3VudCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiVGhlIGxhc3QgYmxvY2sgb2YgQVNDSUk4NSBkYXRhIGNhbm5vdCBiZSBhIHNpbmdsZSBieXRlLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvdW50LS07XHJcbiAgICAgICAgICAgICAgICBfdHVwbGUgKz0gcG93ODVbY291bnRdO1xyXG4gICAgICAgICAgICAgICAgRGVjb2RlQmxvY2soY291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1zLkFkZChfZGVjb2RlZEJsb2NrW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1zLlRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gRW5jb2RlcyBiaW5hcnkgZGF0YSBpbnRvIGEgcGxhaW50ZXh0IEFTQ0lJODUgZm9ybWF0IHN0cmluZ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYmFcIj5iaW5hcnkgZGF0YSB0byBlbmNvZGU8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz5BU0NJSTg1IGVuY29kZWQgc3RyaW5nPC9yZXR1cm5zPlxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRW5jb2RlKGJ5dGVbXSBiYSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigoaW50KShiYS5MZW5ndGggKiAoX2VuY29kZWRCbG9jay5MZW5ndGggLyBfZGVjb2RlZEJsb2NrLkxlbmd0aCkpKTtcclxuICAgICAgICAgICAgX2xpbmVQb3MgPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKEVuZm9yY2VNYXJrcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQXBwZW5kU3RyaW5nKHNiLCBQcmVmaXhNYXJrKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50IGNvdW50ID0gMDtcclxuICAgICAgICAgICAgX3R1cGxlID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAoYnl0ZSBiIGluIGJhKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPj0gX2RlY29kZWRCbG9jay5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF90dXBsZSB8PSBiO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdHVwbGUgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFwcGVuZENoYXIoc2IsICd6Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVuY29kZUJsb2NrKHNiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgX3R1cGxlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3R1cGxlIHw9ICh1aW50KShiIDw8ICgyNCAtIChjb3VudCAqIDgpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBzb21lIGJ5dGVzIGxlZnQgb3ZlciBhdCB0aGUgZW5kLi5cclxuICAgICAgICAgICAgaWYgKGNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRW5jb2RlQmxvY2soY291bnQgKyAxLCBzYik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChFbmZvcmNlTWFya3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFwcGVuZFN0cmluZyhzYiwgU3VmZml4TWFyayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNiLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgRW5jb2RlQmxvY2soU3RyaW5nQnVpbGRlciBzYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVuY29kZUJsb2NrKF9lbmNvZGVkQmxvY2suTGVuZ3RoLCBzYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgRW5jb2RlQmxvY2soaW50IGNvdW50LCBTdHJpbmdCdWlsZGVyIHNiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IF9lbmNvZGVkQmxvY2suTGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9lbmNvZGVkQmxvY2tbaV0gPSAoYnl0ZSkoKF90dXBsZSAlIDg1KSArIF9hc2NpaU9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICBfdHVwbGUgLz0gODU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2hhciBjID0gKGNoYXIpX2VuY29kZWRCbG9ja1tpXTtcclxuICAgICAgICAgICAgICAgIEFwcGVuZENoYXIoc2IsIGMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIERlY29kZUJsb2NrKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIERlY29kZUJsb2NrKF9kZWNvZGVkQmxvY2suTGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBEZWNvZGVCbG9jayhpbnQgYnl0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJ5dGVzOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9kZWNvZGVkQmxvY2tbaV0gPSAoYnl0ZSkoX3R1cGxlID4+IDI0IC0gKGkgKiA4KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBBcHBlbmRTdHJpbmcoU3RyaW5nQnVpbGRlciBzYiwgc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoTGluZUxlbmd0aCA+IDAgJiYgKF9saW5lUG9zICsgcy5MZW5ndGggPiBMaW5lTGVuZ3RoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2xpbmVQb3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kKCdcXHInKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZCgnXFxuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfbGluZVBvcyArPSBzLkxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzYi5BcHBlbmQocyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgQXBwZW5kQ2hhcihTdHJpbmdCdWlsZGVyIHNiLCBjaGFyIGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzYi5BcHBlbmQoYyk7XHJcbiAgICAgICAgICAgIF9saW5lUG9zKys7XHJcbiAgICAgICAgICAgIGlmIChMaW5lTGVuZ3RoID4gMCAmJiAoX2xpbmVQb3MgPj0gTGluZUxlbmd0aCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9saW5lUG9zID0gMDtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZCgnXFxyJyk7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmQoJ1xcbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBHcmFwaGljc0xheWVyO1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUG9seWdvbkNvbnRhaW5lclxyXG4gICAge1xyXG4gICAgICAgIElMaXN0PEJveD4gX2RvdHM7XHJcbiAgICAgICAgQm94IF9ib3VuZGluZ0JveDtcclxuXHJcbiAgICAgICAgcHVibGljIFBvbHlnb25Db250YWluZXIoSUxpc3Q8Qm94PiBkb3RzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2RvdHMgPSBkb3RzO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1pbnggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1pbjxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94PihfZG90cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94LCBkb3VibGU+KShkb3QgPT4gZG90LlgpKTtcclxuICAgICAgICAgICAgdmFyIG1heHggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94PihfZG90cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94LCBkb3VibGU+KShkb3QgPT4gZG90LlgpKTtcclxuICAgICAgICAgICAgdmFyIG1pbnkgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1pbjxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94PihfZG90cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94LCBkb3VibGU+KShkb3QgPT4gZG90LlkpKTtcclxuICAgICAgICAgICAgdmFyIG1heHkgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94PihfZG90cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94LCBkb3VibGU+KShkb3QgPT4gZG90LlkpKTtcclxuXHJcbiAgICAgICAgICAgIF9ib3VuZGluZ0JveCA9IG5ldyBCb3gobWlueCwgbWlueSwgbWF4eCAtIG1pbngsIG1heHkgLSBtaW55KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKEJveCBkb3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIV9ib3VuZGluZ0JveC5Db250YWlucyhkb3QpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbnRhaW5zID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBqID0gX2RvdHMuQ291bnQgLSAxO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfZG90cy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKF9kb3RzW2ldLlkgPD0gZG90LlkgJiYgZG90LlkgPCBfZG90c1tqXS5ZIHx8IF9kb3RzW2pdLlkgPD0gZG90LlkgJiYgZG90LlkgPCBfZG90c1tpXS5ZKSAmJiAgZG90LlggPCAoX2RvdHNbal0uWCAtIF9kb3RzW2ldLlgpICogKGRvdC5ZIC0gX2RvdHNbaV0uWSkgLyAoX2RvdHNbal0uWSAtIF9kb3RzW2ldLlkpICsgX2RvdHNbaV0uWClcclxuICAgICAgICAgICAgICAgICAgICBjb250YWlucyA9ICFjb250YWlucztcclxuXHJcbiAgICAgICAgICAgICAgICBqID0gaTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5zO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5SdW50aW1lLlNlcmlhbGl6YXRpb247XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBbRGF0YUNvbnRyYWN0KE5hbWUgPSBcIlZlY3RvclwiKV1cclxuICAgIHB1YmxpYyBjbGFzcyBTZXJpYWxpemF0aW9uVmVjdG9yXHJcbiAgICB7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBYO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgWTtcclxuXHJcbiAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25WZWN0b3IoKSB7IH1cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvblZlY3RvcihWZWN0b3IgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFggPSB2Llg7XHJcbiAgICAgICAgICAgIFkgPSB2Llk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgW0RhdGFDb250cmFjdChOYW1lID0gXCJWZXJ0ZXhcIildXHJcbiAgICBwdWJsaWMgY2xhc3MgU2VyaWFsaXphdGlvblZlcnRleFxyXG4gICAge1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uVmVjdG9yIExvY2F0aW9uO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTGFiZWw7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIGZsb2F0IFBhZGRpbmc7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTdHlsZTtcclxuXHJcbiAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25WZXJ0ZXgoKSB7IH1cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvblZlcnRleChWZXJ0ZXggdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExvY2F0aW9uID0gbmV3IFNlcmlhbGl6YXRpb25WZWN0b3Iodi5Mb2NhdGlvbik7XHJcbiAgICAgICAgICAgIExhYmVsID0gdi5MYWJlbDtcclxuICAgICAgICAgICAgUGFkZGluZyA9IHYuUGFkZGluZztcclxuICAgICAgICAgICAgU3R5bGUgPSB2LlN0eWxlID8/IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgW0RhdGFDb250cmFjdChOYW1lID0gXCJFZGdlXCIpXVxyXG4gICAgcHVibGljIGNsYXNzIFNlcmlhbGl6YXRpb25FZGdlXHJcbiAgICB7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIGludCBJbmRleFYxO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5kZXhWMjtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgRWRnZS5PcmllbnRhdGlvbnMgT3JpZW50YXRpb247XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIGZsb2F0IFRoaWNrbmVzcztcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgaW50IE11bHRpcGxpY2l0eTtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFN0eWxlO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTGFiZWw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uRWRnZSgpIHsgfVxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uRWRnZShFZGdlIGUsIExpc3Q8VmVydGV4PiB2ZXJ0aWNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEluZGV4VjEgPSB2ZXJ0aWNlcy5JbmRleE9mKGUuVjEpO1xyXG4gICAgICAgICAgICBJbmRleFYyID0gdmVydGljZXMuSW5kZXhPZihlLlYyKTtcclxuICAgICAgICAgICAgT3JpZW50YXRpb24gPSBlLk9yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICBUaGlja25lc3MgPSBlLlRoaWNrbmVzcztcclxuICAgICAgICAgICAgTXVsdGlwbGljaXR5ID0gZS5NdWx0aXBsaWNpdHk7XHJcbiAgICAgICAgICAgIFN0eWxlID0gZS5TdHlsZSA/PyBcIlwiO1xyXG4gICAgICAgICAgICBMYWJlbCA9IGUuTGFiZWwgPz8gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGlmIChTdHlsZSA9PSBcIlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoT3JpZW50YXRpb24gPT0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZClcclxuICAgICAgICAgICAgICAgICAgICBTdHlsZSA9IGUuU3R5bGUgPSBcInBvc3RcIjtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKE9yaWVudGF0aW9uID09IEVkZ2UuT3JpZW50YXRpb25zLkJhY2t3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgIFN0eWxlID0gZS5TdHlsZSA9IFwicHJlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBbRGF0YUNvbnRyYWN0KE5hbWUgPSBcIkdyYXBoXCIpXVxyXG4gICAgcHVibGljIGNsYXNzIFNlcmlhbGl6YXRpb25HcmFwaFxyXG4gICAge1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFNlcmlhbGl6YXRpb25WZXJ0ZXg+IFZlcnRpY2VzO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFNlcmlhbGl6YXRpb25FZGdlPiBFZGdlcztcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uR3JhcGgoKSB7IH1cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvbkdyYXBoKEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBWZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6R3JhcGhzLlZlcnRleCxnbG9iYWw6OkdyYXBocy5TZXJpYWxpemF0aW9uVmVydGV4PihnLlZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlcnRleCwgZ2xvYmFsOjpHcmFwaHMuU2VyaWFsaXphdGlvblZlcnRleD4pKHYgPT4gbmV3IFNlcmlhbGl6YXRpb25WZXJ0ZXgodikpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgRWRnZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkdyYXBocy5FZGdlLGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25FZGdlPihnLkVkZ2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLkVkZ2UsIGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25FZGdlPikoZSA9PiBuZXcgU2VyaWFsaXphdGlvbkVkZ2UoZSwgZy5WZXJ0aWNlcykpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgTmFtZSA9IGcuTmFtZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uUnVudGltZS5TZXJpYWxpemF0aW9uO1xyXG51c2luZyBHcmFwaGljc0xheWVyO1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFV0aWxpdHlcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIGdlb21ldHJ5IHN0dWZmXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBCb3ggUm90YXRlQXJvdW5kUG9pbnQoQm94IHYsIEJveCBjZW50ZXIsIGRvdWJsZSBhbmdsZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gY2VudGVyLlggKyAodi5YIC0gY2VudGVyLlgpICogTWF0aC5Db3MoYW5nbGUpIC0gKHYuWSAtIGNlbnRlci5ZKSAqIE1hdGguU2luKGFuZ2xlKTtcclxuICAgICAgICAgICAgdmFyIHkgPSBjZW50ZXIuWSArICh2LlggLSBjZW50ZXIuWCkgKiBNYXRoLlNpbihhbmdsZSkgKyAodi5ZIC0gY2VudGVyLlkpICogTWF0aC5Db3MoYW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3goeCwgeSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvciBSb3RhdGVBcm91bmRQb2ludChWZWN0b3IgdiwgVmVjdG9yIGNlbnRlciwgZG91YmxlIGFuZ2xlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBjZW50ZXIuWCArICh2LlggLSBjZW50ZXIuWCkgKiBNYXRoLkNvcyhhbmdsZSkgLSAodi5ZIC0gY2VudGVyLlkpICogTWF0aC5TaW4oYW5nbGUpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGNlbnRlci5ZICsgKHYuWCAtIGNlbnRlci5YKSAqIE1hdGguU2luKGFuZ2xlKSArICh2LlkgLSBjZW50ZXIuWSkgKiBNYXRoLkNvcyhhbmdsZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih4LCB5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yIFBvbGFyVG9SZWN0YW5ndWxhcihkb3VibGUgciwgZG91YmxlIHRoZXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IociAqIE1hdGguQ29zKHRoZXRhKSwgciAqIE1hdGguU2luKHRoZXRhKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSGF2ZUludGVyc2VjdGlvbihCb3ggc3RhcnQxLCBCb3ggZW5kMSwgQm94IHN0YXJ0MiwgQm94IGVuZDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZGVub20gPSAoKGVuZDEuWCAtIHN0YXJ0MS5YKSAqIChlbmQyLlkgLSBzdGFydDIuWSkpIC0gKChlbmQxLlkgLSBzdGFydDEuWSkgKiAoZW5kMi5YIC0gc3RhcnQyLlgpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZW5vbSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG51bWVyID0gKChzdGFydDEuWSAtIHN0YXJ0Mi5ZKSAqIChlbmQyLlggLSBzdGFydDIuWCkpIC0gKChzdGFydDEuWCAtIHN0YXJ0Mi5YKSAqIChlbmQyLlkgLSBzdGFydDIuWSkpO1xyXG4gICAgICAgICAgICB2YXIgciA9IG51bWVyIC8gZGVub207XHJcbiAgICAgICAgICAgIHZhciBudW1lcjIgPSAoKHN0YXJ0MS5ZIC0gc3RhcnQyLlkpICogKGVuZDEuWCAtIHN0YXJ0MS5YKSkgLSAoKHN0YXJ0MS5YIC0gc3RhcnQyLlgpICogKGVuZDEuWSAtIHN0YXJ0MS5ZKSk7XHJcbiAgICAgICAgICAgIHZhciBzID0gbnVtZXIyIC8gZGVub207XHJcblxyXG4gICAgICAgICAgICBpZiAociA8IDAgfHwgciA+IDEgfHwgcyA8IDAgfHwgcyA+IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAvLyNyZWdpb24gc3RyaW5nIHN0dWZmXHJcbiAgICAgICAgLy9wdWJsaWMgc3RhdGljIHN0cmluZyBDb21wcmVzcyhzdHJpbmcgcylcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB2YXIgdW5jb21wcmVzc2VkID0gRW5jb2RpbmcuVW5pY29kZS5HZXRCeXRlcyhzKTtcclxuICAgICAgICAvLyAgICB2YXIgY29tcHJlc3NlZCA9IFF1aWNrTFouY29tcHJlc3ModW5jb21wcmVzc2VkKTtcclxuICAgICAgICAvLyAgICByZXR1cm4gQ29udmVydC5Ub0Jhc2U2NFN0cmluZyhjb21wcmVzc2VkKTtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RhdGljIHN0cmluZyBEZWNvbXByZXNzKHN0cmluZyBzKVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vICAgIHZhciBjb21wcmVzc2VkID0gQ29udmVydC5Gcm9tQmFzZTY0U3RyaW5nKHMpO1xyXG4gICAgICAgIC8vICAgIHZhciB1bmNvbXByZXNzZWQgPSBRdWlja0xaLmRlY29tcHJlc3MoY29tcHJlc3NlZCk7XHJcbiAgICAgICAgLy8gICAgcmV0dXJuIEVuY29kaW5nLlVuaWNvZGUuR2V0U3RyaW5nKHVuY29tcHJlc3NlZCwgMCwgdW5jb21wcmVzc2VkLkxlbmd0aCk7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy8jZW5kcmVnaW9uXHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBWZWN0b3JcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVmVjdG9yKGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9YID0geDtcclxuICAgICAgICAgICAgX1kgPSB5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBMZW5ndGhcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5TcXJ0KF9YICogX1ggKyBfWSAqIF9ZKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgTm9ybWFsaXplKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBMZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBfWCA9IF9YIC8gbGVuZ3RoO1xyXG4gICAgICAgICAgICBfWSA9IF9ZIC8gbGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxlbmd0aCA+IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIERvdChWZWN0b3IgdmVjdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9YICogdmVjdG9yLl9YICsgX1kgKiB2ZWN0b3IuX1k7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIERpc3RhbmNlKFZlY3RvciB2ZWN0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKGRvdWJsZSlNYXRoLlNxcnQoTWF0aC5Qb3codmVjdG9yLl9YIC0gX1gsIDIpICsgTWF0aC5Qb3codmVjdG9yLl9ZIC0gX1ksIDIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yIG9wZXJhdG9yICsoVmVjdG9yIGEsIFZlY3RvciBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoYS5fWCArIGIuX1gsIGEuX1kgKyBiLl9ZKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yIG9wZXJhdG9yIC0oVmVjdG9yIGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcigtYS5fWCwgLWEuX1kpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3Igb3BlcmF0b3IgLShWZWN0b3IgYSwgVmVjdG9yIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihhLl9YIC0gYi5fWCwgYS5fWSAtIGIuX1kpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3Igb3BlcmF0b3IgKihWZWN0b3IgYSwgZG91YmxlIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihhLl9YICogYiwgYS5fWSAqIGIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3Igb3BlcmF0b3IgKihWZWN0b3IgYSwgaW50IGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihhLl9YICogYiwgYS5fWSAqIGIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIShvYmogaXMgVmVjdG9yKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIFZlY3RvciB2ID0gKFZlY3RvcilvYmo7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKHYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKFZlY3RvciB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9YID09IHYuX1ggJiYgX1kgPT0gdi5fWTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRvU3RyaW5nKCkuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciA9PShWZWN0b3IgYSwgVmVjdG9yIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYS5FcXVhbHMoYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgIT0oVmVjdG9yIGEsIFZlY3RvciBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICEoYSA9PSBiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW1wbGljaXQgb3BlcmF0b3IgQm94KFZlY3RvciB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3godi5YLCB2LlkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIoXCIgKyBfWCArIFwiLCBcIiArIF9ZICsgXCIpXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFhcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX1g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9YID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBZXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9ZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfWSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb3VibGUgX1g7XHJcbiAgICAgICAgZG91YmxlIF9ZO1xyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEdyYXBocztcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNDb3JlXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQ29tcGFjdFNlcmlhbGl6ZXJcclxuICAgIHtcclxuICAgICAgICBjb25zdCBpbnQgU2NhbGUgPSAxMDAwMDtcclxuICAgICAgICBjb25zdCBzdHJpbmcgUHJlZml4ID0gXCJ3ZWJncmFwaDpcIjtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIExvb2tzTGlrZUFTZXJpYWxpemVkR3JhcGgoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gIXN0cmluZy5Jc051bGxPckVtcHR5KHMpICYmIHMuU3RhcnRzV2l0aChQcmVmaXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgU2VyaWFsaXplKEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSBTZXJpYWxpemVUb0J5dGVBcnJheShnKTtcclxuICAgICAgICAgICAgdmFyIGNvbXByZXNzZWQgPSBRdWlja0xaLmNvbXByZXNzKGJ5dGVzKTtcclxuICAgICAgICAgICAgdmFyIEFzY2lpODUgPSBuZXcgQXNjaWk4NSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJlZml4ICsgQXNjaWk4NS5FbmNvZGUoY29tcHJlc3NlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYnl0ZVtdIFNlcmlhbGl6ZVRvQnl0ZUFycmF5KEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSBuZXcgTGlzdDxieXRlPigpO1xyXG4gICAgICAgICAgICBieXRlcy5BZGQoKGJ5dGUpZy5WZXJ0aWNlcy5Db3VudCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGcuVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEJpdENvbnZlcnRlci5HZXRCeXRlcygoVUludDE2KU1hdGguUm91bmQodi5YICogU2NhbGUpKSk7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGRSYW5nZShCaXRDb252ZXJ0ZXIuR2V0Qnl0ZXMoKFVJbnQxNilNYXRoLlJvdW5kKHYuWSAqIFNjYWxlKSkpO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkUmFuZ2UoQml0Q29udmVydGVyLkdldEJ5dGVzKChVSW50MTYpTWF0aC5Sb3VuZCh2LlBhZGRpbmcgKiBTY2FsZSkpKTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEdldEJ5dGVzKHYuTGFiZWwpKTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEdldEJ5dGVzKHYuU3R5bGUgPz8gXCJcIikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBieXRlcy5BZGRSYW5nZShCaXRDb252ZXJ0ZXIuR2V0Qnl0ZXMoKFVJbnQxNilnLkVkZ2VzLkNvdW50KSk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGcuRWRnZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZCgoYnl0ZSkoZy5WZXJ0aWNlcy5JbmRleE9mKGUuVjEpKSk7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGQoKGJ5dGUpKGcuVmVydGljZXMuSW5kZXhPZihlLlYyKSkpO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkKChieXRlKWUuTXVsdGlwbGljaXR5KTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZCgoYnl0ZSllLk9yaWVudGF0aW9uKTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEJpdENvbnZlcnRlci5HZXRCeXRlcygoVUludDE2KU1hdGguUm91bmQoZS5UaGlja25lc3MgKiAxMDApKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gZS5MYWJlbCA/PyBcIlwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhhY2tlZFN0eWxlID0gKGUuU3R5bGUgPz8gXCJcIikgKyBcIn5+fH58fn5cIiArIGxhYmVsO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkUmFuZ2UoR2V0Qnl0ZXMoaGFja2VkU3R5bGUpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJ5dGVzLlRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggRGVzZXJpYWxpemUoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIEFzY2lpODUgPSBuZXcgQXNjaWk4NSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXByZXNzZWQgPSBBc2NpaTg1LkRlY29kZShzLlN1YnN0cmluZyhQcmVmaXguTGVuZ3RoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnl0ZXMgPSBRdWlja0xaLmRlY29tcHJlc3MoY29tcHJlc3NlZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGVzZXJpYWxpemVGcm9tQnl0ZUFycmF5KGJ5dGVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShleC5NZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgR3JhcGggRGVzZXJpYWxpemVGcm9tQnl0ZUFycmF5KGJ5dGVbXSBieXRlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgbiA9IFJlYWRCeXRlKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gbmV3IExpc3Q8VmVydGV4PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAoZG91YmxlKVJlYWRVSW50MTYoYnl0ZXMsIHJlZiBvZmZzZXQpIC8gU2NhbGU7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IChkb3VibGUpUmVhZFVJbnQxNihieXRlcywgcmVmIG9mZnNldCkgLyBTY2FsZTtcclxuICAgICAgICAgICAgICAgIHZhciBwYWRkaW5nID0gKGZsb2F0KVJlYWRVSW50MTYoYnl0ZXMsIHJlZiBvZmZzZXQpIC8gU2NhbGU7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBSZWFkU3RyaW5nKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IFJlYWRTdHJpbmcoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgdmVydGljZXMuQWRkKG5ldyBWZXJ0ZXgoeCwgeSkgeyBQYWRkaW5nID0gcGFkZGluZywgTGFiZWwgPSBsYWJlbCwgU3R5bGUgPSBzdHlsZSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGUgPSBSZWFkVUludDE2KGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgdmFyIGVkZ2VzID0gbmV3IExpc3Q8RWRnZT4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBlOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB2MSA9IFJlYWRCeXRlKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIHZhciB2MiA9IFJlYWRCeXRlKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIHZhciBtdWx0aXBsaWNpdHkgPSBSZWFkQnl0ZShieXRlcywgcmVmIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JpZW50YXRpb24gPSAoRWRnZS5PcmllbnRhdGlvbnMpUmVhZEJ5dGUoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaWNrbmVzcyA9IChmbG9hdClSZWFkVUludDE2KGJ5dGVzLCByZWYgb2Zmc2V0KSAvIDEwMDtcclxuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IFJlYWRTdHJpbmcoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGVkZ2VzLkFkZChuZXcgRWRnZSh2ZXJ0aWNlc1t2MV0sIHZlcnRpY2VzW3YyXSkgeyBNdWx0aXBsaWNpdHkgPSBtdWx0aXBsaWNpdHksIE9yaWVudGF0aW9uID0gb3JpZW50YXRpb24sIFRoaWNrbmVzcyA9IHRoaWNrbmVzcywgU3R5bGUgPSBzdHlsZSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaCh2ZXJ0aWNlcywgZWRnZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJ5dGUgUmVhZEJ5dGUoYnl0ZVtdIGJ5dGVzLCByZWYgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBieXRlc1tvZmZzZXQrK107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgVUludDE2IFJlYWRVSW50MTYoYnl0ZVtdIGJ5dGVzLCByZWYgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gQml0Q29udmVydGVyLlRvVUludDE2KGJ5dGVzLCBvZmZzZXQpO1xyXG4gICAgICAgICAgICBvZmZzZXQgKz0gMjtcclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgVUludDMyIFJlYWRVSW50MzIoYnl0ZVtdIGJ5dGVzLCByZWYgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gQml0Q29udmVydGVyLlRvVUludDMyKGJ5dGVzLCBvZmZzZXQpO1xyXG4gICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYnl0ZVtdIEdldDdCaXRFbmNvZGVkSW50KGludCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBieXRlcyA9IG5ldyBMaXN0PGJ5dGU+KCk7XHJcbiAgICAgICAgICAgIHVpbnQgbnVtID0gKHVpbnQpdmFsdWU7XHJcbiAgICAgICAgICAgIHdoaWxlIChudW0gPj0gMTI4VSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkKChieXRlKShudW0gfCAxMjhVKSk7XHJcbiAgICAgICAgICAgICAgICBudW0gPj49IDc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnl0ZXMuQWRkKChieXRlKW51bSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYnl0ZXMuVG9BcnJheSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGludCBSZWFkN0JpdEVuY29kZWRJbnQoYnl0ZVtdIGJ5dGVzLCByZWYgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBudW0xID0gMDtcclxuICAgICAgICAgICAgaW50IG51bTIgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobnVtMiAhPSAzNSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZSBudW0zID0gUmVhZEJ5dGUoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgbnVtMSB8PSAoKGludCludW0zICYgKGludClzYnl0ZS5NYXhWYWx1ZSkgPDwgbnVtMjtcclxuICAgICAgICAgICAgICAgIG51bTIgKz0gNztcclxuICAgICAgICAgICAgICAgIGlmICgoKGludCludW0zICYgMTI4KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudW0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oXCJiYWQgNy1iaXQgZW5jb2RlZCBpbnRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYnl0ZVtdIEdldEJ5dGVzKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJ5dGVzID0gbmV3IExpc3Q8Ynl0ZT4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgYyBpbiBzLlRvQ2hhckFycmF5KCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEJpdENvbnZlcnRlci5HZXRCeXRlcyhjKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuUmV2ZXJzZTxieXRlPigoKElFbnVtZXJhYmxlPGJ5dGU+KUdldDdCaXRFbmNvZGVkSW50KGJ5dGVzLkNvdW50KSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5JbnNlcnQoMCwgYik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBieXRlcy5Ub0FycmF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzdHJpbmcgQVNDSUkgPSBcIiAhXFxcIiMkJSZcXCcoKSorLC0uLzAxMjM0NTY3ODk6Ozw9Pj9AQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXFxcXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5cIjtcclxuICAgICAgICBzdGF0aWMgc3RyaW5nIFJlYWRTdHJpbmcoYnl0ZVtdIGJ5dGVzLCByZWYgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBSZWFkN0JpdEVuY29kZWRJbnQoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHMgPSBcIlwiO1xyXG4gICAgICAgICAgICB3aGlsZShsZW5ndGgtLSA+IDApIHMgKz0gQVNDSUlbYnl0ZXNbb2Zmc2V0KytdIC0gMzJdO1xyXG4gICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBNb3JlTGlucTtcclxudXNpbmcgR3JhcGhzO1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc0NvcmVcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBHcmFwaElPXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9BZGphY2VuY3lNYXRyaXgodGhpcyBMaXN0PGludD4gZWRnZVdlaWdodHMsIGJvb2wgaXNEaXJlY3RlZCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG4gPSAoaW50KSgoMSArIE1hdGguU3FydCgxICsgOCAqIGVkZ2VXZWlnaHRzLkNvdW50KSkgLyAyKTtcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgY2hhcltuLCBuXTtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXcgPSBlZGdlV2VpZ2h0c1trXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEaXJlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1baSwgal0gPSBtW2osIGldID0gJzAnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV3ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1baSwgal0gPSAnMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV3IDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1baiwgaV0gPSAnMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1baSwgal0gPSBtW2osIGldID0gZXcgIT0gMCA/ICcxJyA6ICcwJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBtW2ksIGldID0gJzAnO1xyXG5cclxuICAgICAgICAgICAgdmFyIHMgPSBcIlwiO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgcyArPSBtW2ksIGpdO1xyXG4gICAgICAgICAgICAgICAgcyArPSBFbnZpcm9ubWVudC5OZXdMaW5lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vcHVibGljIHN0YXRpYyBHcmFwaHMuR3JhcGggR3JhcGhGcm9tR3JhcGg2KHN0cmluZyBncmFwaDYpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgdmFyIHcgPSBHZXRFZGdlV2VpZ2h0cyhncmFwaDYpO1xyXG4gICAgICAgIC8vICAgIHZhciBoID0gbmV3IENob29zYWJpbGl0eS5HcmFwaCh3KTtcclxuXHJcbiAgICAgICAgLy8gICAgdmFyIGcgPSBuZXcgR3JhcGhzLkdyYXBoKGgsIGguR2V0U3ByaW5nc0xheW91dCgxMiksIGZhbHNlKTtcclxuICAgICAgICAvLyAgICBnLk5hbWUgPSBncmFwaDY7XHJcbiAgICAgICAgLy8gICAgcmV0dXJuIGc7XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIC8vcHVibGljIHN0YXRpYyBHcmFwaHMuR3JhcGggR3JhcGhGcm9tRWRnZVdlaWdodFN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB2YXIgaXNEaXJlY3RlZCA9IHMuQ29udGFpbnMoXCItMVwiKTtcclxuXHJcbiAgICAgICAgLy8gICAgdmFyIHBhcnRzID0gcy5TcGxpdCgnICcpO1xyXG4gICAgICAgIC8vICAgIHZhciBlZGdlV2VpZ2h0cyA9IHBhcnRzLldoZXJlKHAgPT4gIXAuU3RhcnRzV2l0aChcIltcIikpLlNlbGVjdCh4ID0+IGludC5QYXJzZSh4KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgIC8vICAgIExpc3Q8aW50PiB2ZXJ0ZXhXZWlnaHRzID0gbnVsbDtcclxuICAgICAgICAvLyAgICB2YXIgdndwID0gcGFydHMuRmlyc3RPckRlZmF1bHQocCA9PiBwLlN0YXJ0c1dpdGgoXCJbXCIpKTtcclxuICAgICAgICAvLyAgICBpZiAodndwICE9IG51bGwpXHJcbiAgICAgICAgLy8gICAgICAgIHZlcnRleFdlaWdodHMgPSB2d3AuVHJpbSgnWycpLlRyaW0oJ10nKS5TcGxpdCgnLCcpLlNlbGVjdCh4ID0+IGludC5QYXJzZSh4KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgIC8vICAgIHZhciBoID0gbmV3IENob29zYWJpbGl0eS5HcmFwaChlZGdlV2VpZ2h0cywgdmVydGV4V2VpZ2h0cyk7XHJcblxyXG4gICAgICAgIC8vICAgIHJldHVybiBuZXcgR3JhcGhzLkdyYXBoKGgsIGguR2V0U3ByaW5nc0xheW91dCgxMiksIGlzRGlyZWN0ZWQpO1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICAvL3B1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IEdldEVkZ2VXZWlnaHRzKHN0cmluZyBncmFwaDYpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgdmFyIGNoYXJzID0gZ3JhcGg2LlRvQ2hhckFycmF5KCk7XHJcblxyXG4gICAgICAgIC8vICAgIHZhciBieXRlcyA9IFVURjhFbmNvZGluZy5VVEY4LkdldEJ5dGVzKGNoYXJzKTtcclxuXHJcbiAgICAgICAgLy8gICAgdmFyIE4gPSBieXRlc1swXSAtIDYzO1xyXG4gICAgICAgIC8vICAgIHZhciBoID0gTiAqIChOIC0gMSkgLyAyO1xyXG4gICAgICAgIC8vICAgIHZhciB3ID0gYnl0ZXMuU2tpcCgxKS5TZWxlY3RNYW55KGIgPT4gTG93NigoYnl0ZSkoYiAtIDYzKSkpLlRha2UoaCkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgIC8vICAgIHZhciBwID0gUm93VG9Db2x1bW5QZXJtdXRhdGlvbihOKS5Ub0xpc3QoKTtcclxuICAgICAgICAvLyAgICB2YXIgd3AgPSBuZXcgTGlzdDxpbnQ+KGgpO1xyXG5cclxuICAgICAgICAvLyAgICBmb3IgKGludCBpID0gMDsgaSA8IHAuQ291bnQ7IGkrKylcclxuICAgICAgICAvLyAgICAgICAgd3AuQWRkKHdbcFtpXV0pO1xyXG5cclxuICAgICAgICAvLyAgICByZXR1cm4gd3A7XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIC8vcHVibGljIHN0YXRpYyBib29sWyxdIEdldEFkamFjZW5jeU1hdHJpeChzdHJpbmcgYWRqYWNlbmN5TGlzdFN0cmluZylcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoYWRqYWNlbmN5TGlzdFN0cmluZykpXHJcbiAgICAgICAgLy8gICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAvLyAgICB0cnlcclxuICAgICAgICAvLyAgICB7XHJcbiAgICAgICAgLy8gICAgICAgIHZhciBsaW5lcyA9IGFkamFjZW5jeUxpc3RTdHJpbmcuU3BsaXQobmV3W10geyBFbnZpcm9ubWVudC5OZXdMaW5lIH0sIFN0cmluZ1NwbGl0T3B0aW9ucy5SZW1vdmVFbXB0eUVudHJpZXMpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgdmFyIGFkamFjZW5jeUxpc3QgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAvLyAgICAgICAgZm9yZWFjaCAodmFyIGxpbmUgaW4gbGluZXMuV2hlcmUobCA9PiBsLkNvbnRhaW5zKFwiOlwiKSkpXHJcbiAgICAgICAgLy8gICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgIHZhciBjaHVua3MgPSBsaW5lLlNwbGl0KCc6JywgJywnKTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICBhZGphY2VuY3lMaXN0W2ludC5QYXJzZShjaHVua3NbMF0pXSA9IGNodW5rcy5Ta2lwKDEpLlNlbGVjdChjID0+IGludC5QYXJzZShjKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgLy8gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgICAgIHZhciBtaW4gPSBhZGphY2VuY3lMaXN0Lk1pbihrdnAgPT4ga3ZwLktleSk7XHJcbiAgICAgICAgLy8gICAgICAgIHZhciBtYXggPSBhZGphY2VuY3lMaXN0Lk1heChrdnAgPT4ga3ZwLktleSk7XHJcbiAgICAgICAgLy8gICAgICAgIHZhciBOID0gbWF4ICsgMSAtIG1pbjtcclxuXHJcbiAgICAgICAgLy8gICAgICAgIHZhciBhZGphY2VuY3lNYXRyaXggPSBuZXcgYm9vbFtOLCBOXTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgIGZvcmVhY2ggKHZhciBrdnAgaW4gYWRqYWNlbmN5TGlzdClcclxuICAgICAgICAvLyAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuZWlnaGJvciBpbiBrdnAuVmFsdWUpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgYWRqYWNlbmN5TWF0cml4W2t2cC5LZXkgLSBtaW4sIG5laWdoYm9yIC0gbWluXSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vICAgICAgICByZXR1cm4gYWRqYWNlbmN5TWF0cml4O1xyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvLyAgICBjYXRjaCB7IH1cclxuXHJcbiAgICAgICAgLy8gICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvR3JhcGg2KHRoaXMgR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBnLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHN0cmluZyBBU0NJSSA9IFwiICFcXFwiIyQlJlxcJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXFxcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9flwiO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvR3JhcGg2KHRoaXMgTGlzdDxpbnQ+IHcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbiA9IChpbnQpKCgxICsgTWF0aC5TcXJ0KDEgKyA4ICogdy5Db3VudCkpIC8gMik7XHJcbiAgICAgICAgICAgIGlmIChuID4gNjIpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24oXCJpIGhhdmUgeWV0IHRvIHdyaXRlL3JlYWQgZ3JhcGg2IGZpbGVzIHdpdGggbW9yZSB0aGFuIDYyIHZlcnRpY2VzLlwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihSb3dUb0NvbHVtblBlcm11dGF0aW9uKG4pKTtcclxuICAgICAgICAgICAgdmFyIHdwID0gbmV3IExpc3Q8aW50Pih3LkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgd3AuQWRkKE1hdGguQWJzKHdbcC5JbmRleE9mKGkpXSkpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHdwLkNvdW50ICUgNiAhPSAwKVxyXG4gICAgICAgICAgICAgICAgd3AuQWRkKDApO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJiID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0FycmF5PGJ5dGU+KE1vcmVMaW5xLk1vcmVFbnVtZXJhYmxlLlByZXBlbmQ8Ynl0ZT4od3AuQmF0Y2g8aW50LCBieXRlPig2LCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sIGJ5dGU+KShiaXRzID0+IChieXRlKShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIGludD4saW50PihNb3JlTGlucS5Nb3JlRW51bWVyYWJsZS5JbmRleDxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuUmV2ZXJzZTxpbnQ+KGJpdHMpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIGludD4sIGludD4pKHBhaXIgPT4gcGFpci5WYWx1ZSA8PCBwYWlyLktleSkpLlN1bSgpICsgNjMpKSksKGJ5dGUpKG4gKyA2MykpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGJ5dGUsc3RyaW5nPihiYiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxieXRlLCBzdHJpbmc+KShiID0+IEFTQ0lJW2IgLSAzMl0uVG9TdHJpbmcoKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IFJvd1RvQ29sdW1uUGVybXV0YXRpb24oaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbiAtIDE7IGorKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSB4O1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuIC0gMSAtIGo7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4geTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeSArPSAxICsgaiArIGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgeCArPSAyICsgajtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPGludD4gTG93NihieXRlIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gNTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gKGIgJiAoMSA8PCBpKSkgPj4gaTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiI3JlZ2lvbiBMaWNlbnNlIGFuZCBUZXJtc1xyXG4vLyBNb3JlTElOUSAtIEV4dGVuc2lvbnMgdG8gTElOUSB0byBPYmplY3RzXHJcbi8vIENvcHlyaWdodCAoYykgMjAwOC0yMDExIEpvbmF0aGFuIFNrZWV0LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBcclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuLy8gXHJcbi8vICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuLy8gXHJcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuI2VuZHJlZ2lvblxyXG5cclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxuXHJcbm5hbWVzcGFjZSBNb3JlTGlucVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnRpYWwgY2xhc3MgTW9yZUVudW1lcmFibGVcclxuICAgIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEJhdGNoZXMgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpbnRvIHNpemVkIGJ1Y2tldHMuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHR5cGVwYXJhbSBuYW1lPVwiVFNvdXJjZVwiPlR5cGUgb2YgZWxlbWVudHMgaW4gPHBhcmFtcmVmIG5hbWU9XCJzb3VyY2VcIi8+IHNlcXVlbmNlLjwvdHlwZXBhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNvdXJjZVwiPlRoZSBzb3VyY2Ugc2VxdWVuY2UuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzaXplXCI+U2l6ZSBvZiBidWNrZXRzLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPkEgc2VxdWVuY2Ugb2YgZXF1YWxseSBzaXplZCBidWNrZXRzIGNvbnRhaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBjb2xsZWN0aW9uLjwvcmV0dXJucz5cclxuICAgICAgICAvLy8gPHJlbWFya3M+IFRoaXMgb3BlcmF0b3IgdXNlcyBkZWZlcnJlZCBleGVjdXRpb24gYW5kIHN0cmVhbXMgaXRzIHJlc3VsdHMgKGJ1Y2tldHMgYW5kIGJ1Y2tldCBjb250ZW50KS48L3JlbWFya3M+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxUU291cmNlPj4gQmF0Y2g8VFNvdXJjZT4odGhpcyBJRW51bWVyYWJsZTxUU291cmNlPiBzb3VyY2UsIGludCBzaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJhdGNoPFRTb3VyY2UsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUU291cmNlPj4oc291cmNlLCBzaXplLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFRTb3VyY2U+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFRTb3VyY2U+PikoeCA9PiB4KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEJhdGNoZXMgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpbnRvIHNpemVkIGJ1Y2tldHMgYW5kIGFwcGxpZXMgYSBwcm9qZWN0aW9uIHRvIGVhY2ggYnVja2V0LlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDx0eXBlcGFyYW0gbmFtZT1cIlRTb3VyY2VcIj5UeXBlIG9mIGVsZW1lbnRzIGluIDxwYXJhbXJlZiBuYW1lPVwic291cmNlXCIvPiBzZXF1ZW5jZS48L3R5cGVwYXJhbT5cclxuICAgICAgICAvLy8gPHR5cGVwYXJhbSBuYW1lPVwiVFJlc3VsdFwiPlR5cGUgb2YgcmVzdWx0IHJldHVybmVkIGJ5IDxwYXJhbXJlZiBuYW1lPVwicmVzdWx0U2VsZWN0b3JcIi8+LjwvdHlwZXBhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNvdXJjZVwiPlRoZSBzb3VyY2Ugc2VxdWVuY2UuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzaXplXCI+U2l6ZSBvZiBidWNrZXRzLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicmVzdWx0U2VsZWN0b3JcIj5UaGUgcHJvamVjdGlvbiB0byBhcHBseSB0byBlYWNoIGJ1Y2tldC48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz5BIHNlcXVlbmNlIG9mIHByb2plY3Rpb25zIG9uIGVxdWFsbHkgc2l6ZWQgYnVja2V0cyBjb250YWluaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgY29sbGVjdGlvbi48L3JldHVybnM+XHJcbiAgICAgICAgLy8vIDxyZW1hcmtzPiBUaGlzIG9wZXJhdG9yIHVzZXMgZGVmZXJyZWQgZXhlY3V0aW9uIGFuZCBzdHJlYW1zIGl0cyByZXN1bHRzIChidWNrZXRzIGFuZCBidWNrZXQgY29udGVudCkuPC9yZW1hcmtzPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8VFJlc3VsdD4gQmF0Y2g8VFNvdXJjZSwgVFJlc3VsdD4odGhpcyBJRW51bWVyYWJsZTxUU291cmNlPiBzb3VyY2UsIGludCBzaXplLFxyXG4gICAgICAgICAgICBGdW5jPElFbnVtZXJhYmxlPFRTb3VyY2U+LCBUUmVzdWx0PiByZXN1bHRTZWxlY3RvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBCYXRjaEltcGw8VFNvdXJjZSxUUmVzdWx0Pihzb3VyY2UsIHNpemUsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VFNvdXJjZT4sIFRSZXN1bHQ+KXJlc3VsdFNlbGVjdG9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIElFbnVtZXJhYmxlPFRSZXN1bHQ+IEJhdGNoSW1wbDxUU291cmNlLCBUUmVzdWx0Pih0aGlzIElFbnVtZXJhYmxlPFRTb3VyY2U+IHNvdXJjZSwgaW50IHNpemUsXHJcbiAgICAgICAgICAgIEZ1bmM8SUVudW1lcmFibGU8VFNvdXJjZT4sIFRSZXN1bHQ+IHJlc3VsdFNlbGVjdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVFNvdXJjZVtdIGJ1Y2tldCA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBzb3VyY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChidWNrZXQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBidWNrZXQgPSBuZXcgVFNvdXJjZVtzaXplXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBidWNrZXRbY291bnQrK10gPSBpdGVtO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRoZSBidWNrZXQgaXMgZnVsbHkgYnVmZmVyZWQgYmVmb3JlIGl0J3MgeWllbGRlZFxyXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ICE9IHNpemUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2VsZWN0IGlzIG5lY2Vzc2FyeSBzbyBidWNrZXQgY29udGVudHMgYXJlIHN0cmVhbWVkIHRvb1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHJlc3VsdFNlbGVjdG9yKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PFRTb3VyY2UsVFNvdXJjZT4oYnVja2V0LChnbG9iYWw6OlN5c3RlbS5GdW5jPFRTb3VyY2UsIFRTb3VyY2U+KSh4ID0+IHgpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYnVja2V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBsYXN0IGJ1Y2tldCB3aXRoIGFsbCByZW1haW5pbmcgZWxlbWVudHNcclxuICAgICAgICAgICAgaWYgKGJ1Y2tldCAhPSBudWxsICYmIGNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHJlc3VsdFNlbGVjdG9yKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxUU291cmNlPihidWNrZXQsY291bnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vIFF1aWNrTFogZGF0YSBjb21wcmVzc2lvbiBsaWJyYXJ5XHJcbi8vIENvcHlyaWdodCAoQykgMjAwNi0yMDExIExhc3NlIE1pa2tlbCBSZWluaG9sZFxyXG4vLyBsYXJAcXVpY2tsei5jb21cclxuLy9cclxuLy8gUXVpY2tMWiBjYW4gYmUgdXNlZCBmb3IgZnJlZSB1bmRlciB0aGUgR1BMIDEsIDIgb3IgMyBsaWNlbnNlICh3aGVyZSBhbnl0aGluZyBcclxuLy8gcmVsZWFzZWQgaW50byBwdWJsaWMgbXVzdCBiZSBvcGVuIHNvdXJjZSkgb3IgdW5kZXIgYSBjb21tZXJjaWFsIGxpY2Vuc2UgaWYgc3VjaCBcclxuLy8gaGFzIGJlZW4gYWNxdWlyZWQgKHNlZSBodHRwOi8vd3d3LnF1aWNrbHouY29tL29yZGVyLmh0bWwpLiBUaGUgY29tbWVyY2lhbCBsaWNlbnNlIFxyXG4vLyBkb2VzIG5vdCBjb3ZlciBkZXJpdmVkIG9yIHBvcnRlZCB2ZXJzaW9ucyBjcmVhdGVkIGJ5IHRoaXJkIHBhcnRpZXMgdW5kZXIgR1BMLlxyXG4vL1xyXG4vLyBPbmx5IGEgc3Vic2V0IG9mIHRoZSBDIGxpYnJhcnkgaGFzIGJlZW4gcG9ydGVkLCBuYW1lbHkgbGV2ZWwgMSBhbmQgMyBub3QgaW4gXHJcbi8vIHN0cmVhbWluZyBtb2RlLiBcclxuLy9cclxuLy8gVmVyc2lvbjogMS41LjAgZmluYWxcclxuXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5JTztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5zdGF0aWMgY2xhc3MgUXVpY2tMWlxyXG57XHJcbiAgICBwdWJsaWMgY29uc3QgaW50IFFMWl9WRVJTSU9OX01BSk9SID0gMTtcclxuICAgIHB1YmxpYyBjb25zdCBpbnQgUUxaX1ZFUlNJT05fTUlOT1IgPSA1O1xyXG4gICAgcHVibGljIGNvbnN0IGludCBRTFpfVkVSU0lPTl9SRVZJU0lPTiA9IDA7XHJcblxyXG4gICAgLy8gU3RyZWFtaW5nIG1vZGUgbm90IHN1cHBvcnRlZFxyXG4gICAgcHVibGljIGNvbnN0IGludCBRTFpfU1RSRUFNSU5HX0JVRkZFUiA9IDA7XHJcblxyXG4gICAgLy8gQm91bmRzIGNoZWNraW5nIG5vdCBzdXBwb3J0ZWQgIFVzZSB0cnkuLi5jYXRjaCBpbnN0ZWFkXHJcbiAgICBwdWJsaWMgY29uc3QgaW50IFFMWl9NRU1PUllfU0FGRSA9IDA7XHJcblxyXG4gICAgLy8gRGVjcmVhc2UgUUxaX1BPSU5URVJTXzMgdG8gaW5jcmVhc2UgbGV2ZWwgMyBjb21wcmVzc2lvbiBzcGVlZC4gRG8gbm90IGVkaXQgYW55IG90aGVyIHZhbHVlcyFcclxuICAgIHByaXZhdGUgY29uc3QgaW50IEhBU0hfVkFMVUVTID0gNDA5NjtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IE1JTk9GRlNFVCA9IDI7XHJcbiAgICBwcml2YXRlIGNvbnN0IGludCBVTkNPTkRJVElPTkFMX01BVENITEVOID0gNjtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IFVOQ09NUFJFU1NFRF9FTkQgPSA0O1xyXG4gICAgcHJpdmF0ZSBjb25zdCBpbnQgQ1dPUkRfTEVOID0gNDtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IERFRkFVTFRfSEVBREVSTEVOID0gOTtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IFFMWl9QT0lOVEVSU18xID0gMTtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IFFMWl9QT0lOVEVSU18zID0gMTY7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW50IGhlYWRlckxlbihieXRlW10gc291cmNlKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiAoKHNvdXJjZVswXSAmIDIpID09IDIpID8gOSA6IDM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBpbnQgc2l6ZURlY29tcHJlc3NlZChieXRlW10gc291cmNlKVxyXG4gICAge1xyXG4gICAgICAgIGlmIChoZWFkZXJMZW4oc291cmNlKSA9PSA5KVxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlWzVdIHwgKHNvdXJjZVs2XSA8PCA4KSB8IChzb3VyY2VbN10gPDwgMTYpIHwgKHNvdXJjZVs4XSA8PCAyNCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlWzJdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgaW50IHNpemVDb21wcmVzc2VkKGJ5dGVbXSBzb3VyY2UpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGhlYWRlckxlbihzb3VyY2UpID09IDkpXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VbMV0gfCAoc291cmNlWzJdIDw8IDgpIHwgKHNvdXJjZVszXSA8PCAxNikgfCAoc291cmNlWzRdIDw8IDI0KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VbMV07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCB3cml0ZV9oZWFkZXIoYnl0ZVtdIGRzdCwgaW50IGxldmVsLCBib29sIGNvbXByZXNzaWJsZSwgaW50IHNpemVfY29tcHJlc3NlZCwgaW50IHNpemVfZGVjb21wcmVzc2VkKVxyXG4gICAge1xyXG4gICAgICAgIGRzdFswXSA9IChieXRlKSgyIHwgKGNvbXByZXNzaWJsZSA/IDEgOiAwKSk7XHJcbiAgICAgICAgZHN0WzBdIHw9IChieXRlKShsZXZlbCA8PCAyKTtcclxuICAgICAgICBkc3RbMF0gfD0gKDEgPDwgNik7XHJcbiAgICAgICAgZHN0WzBdIHw9ICgwIDw8IDQpO1xyXG4gICAgICAgIGZhc3Rfd3JpdGUoZHN0LCAxLCBzaXplX2RlY29tcHJlc3NlZCwgNCk7XHJcbiAgICAgICAgZmFzdF93cml0ZShkc3QsIDUsIHNpemVfY29tcHJlc3NlZCwgNCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBieXRlW10gY29tcHJlc3MoYnl0ZVtdIHNvdXJjZSwgaW50IGxldmVsID0gMSlcclxuICAgIHtcclxuICAgICAgICBpbnQgc3JjID0gMDtcclxuICAgICAgICBpbnQgZHN0ID0gREVGQVVMVF9IRUFERVJMRU4gKyBDV09SRF9MRU47XHJcbiAgICAgICAgdWludCBjd29yZF92YWwgPSAweDgwMDAwMDAwO1xyXG4gICAgICAgIGludCBjd29yZF9wdHIgPSBERUZBVUxUX0hFQURFUkxFTjtcclxuICAgICAgICBieXRlW10gZGVzdGluYXRpb24gPSBuZXcgYnl0ZVtzb3VyY2UuTGVuZ3RoICsgNDAwXTtcclxuICAgICAgICBpbnRbLF0gaGFzaHRhYmxlO1xyXG4gICAgICAgIGludFtdIGNhY2hldGFibGUgPSBuZXcgaW50W0hBU0hfVkFMVUVTXTtcclxuICAgICAgICBieXRlW10gaGFzaF9jb3VudGVyID0gbmV3IGJ5dGVbSEFTSF9WQUxVRVNdO1xyXG4gICAgICAgIGJ5dGVbXSBkMjtcclxuICAgICAgICBpbnQgZmV0Y2ggPSAwO1xyXG4gICAgICAgIGludCBsYXN0X21hdGNoc3RhcnQgPSAoc291cmNlLkxlbmd0aCAtIFVOQ09ORElUSU9OQUxfTUFUQ0hMRU4gLSBVTkNPTVBSRVNTRURfRU5EIC0gMSk7XHJcbiAgICAgICAgaW50IGxpdHMgPSAwO1xyXG5cclxuICAgICAgICBpZiAobGV2ZWwgIT0gMSAmJiBsZXZlbCAhPSAzKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJDIyB2ZXJzaW9uIG9ubHkgc3VwcG9ydHMgbGV2ZWwgMSBhbmQgM1wiKTtcclxuXHJcbiAgICAgICAgaWYgKGxldmVsID09IDEpXHJcbiAgICAgICAgICAgIGhhc2h0YWJsZSA9IG5ldyBpbnRbSEFTSF9WQUxVRVMsIFFMWl9QT0lOVEVSU18xXTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGhhc2h0YWJsZSA9IG5ldyBpbnRbSEFTSF9WQUxVRVMsIFFMWl9QT0lOVEVSU18zXTtcclxuXHJcbiAgICAgICAgaWYgKHNvdXJjZS5MZW5ndGggPT0gMClcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBieXRlWzBdO1xyXG5cclxuICAgICAgICBpZiAoc3JjIDw9IGxhc3RfbWF0Y2hzdGFydClcclxuICAgICAgICAgICAgZmV0Y2ggPSBzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KTtcclxuXHJcbiAgICAgICAgd2hpbGUgKHNyYyA8PSBsYXN0X21hdGNoc3RhcnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoKGN3b3JkX3ZhbCAmIDEpID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzcmMgPiBzb3VyY2UuTGVuZ3RoID4+IDEgJiYgZHN0ID4gc3JjIC0gKHNyYyA+PiA1KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkMiA9IG5ldyBieXRlW3NvdXJjZS5MZW5ndGggKyBERUZBVUxUX0hFQURFUkxFTl07XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVfaGVhZGVyKGQyLCBsZXZlbCwgZmFsc2UsIHNvdXJjZS5MZW5ndGgsIHNvdXJjZS5MZW5ndGggKyBERUZBVUxUX0hFQURFUkxFTik7XHJcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkFycmF5LkNvcHkoc291cmNlLCAwLCBkMiwgREVGQVVMVF9IRUFERVJMRU4sIHNvdXJjZS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkMjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBjd29yZF9wdHIsIChpbnQpKChjd29yZF92YWwgPj4gMSkgfCAweDgwMDAwMDAwKSwgNCk7XHJcbiAgICAgICAgICAgICAgICBjd29yZF9wdHIgPSBkc3Q7XHJcbiAgICAgICAgICAgICAgICBkc3QgKz0gQ1dPUkRfTEVOO1xyXG4gICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gMHg4MDAwMDAwMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGxldmVsID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBoYXNoID0gKChmZXRjaCA+PiAxMikgXiBmZXRjaCkgJiAoSEFTSF9WQUxVRVMgLSAxKTtcclxuICAgICAgICAgICAgICAgIGludCBvID0gaGFzaHRhYmxlW2hhc2gsIDBdO1xyXG4gICAgICAgICAgICAgICAgaW50IGNhY2hlID0gY2FjaGV0YWJsZVtoYXNoXSBeIGZldGNoO1xyXG4gICAgICAgICAgICAgICAgY2FjaGV0YWJsZVtoYXNoXSA9IGZldGNoO1xyXG4gICAgICAgICAgICAgICAgaGFzaHRhYmxlW2hhc2gsIDBdID0gc3JjO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZSA9PSAwICYmIGhhc2hfY291bnRlcltoYXNoXSAhPSAwICYmIChzcmMgLSBvID4gTUlOT0ZGU0VUIHx8IChzcmMgPT0gbyArIDEgJiYgbGl0cyA+PSAzICYmIHNyYyA+IDMgJiYgc291cmNlW3NyY10gPT0gc291cmNlW3NyYyAtIDNdICYmIHNvdXJjZVtzcmNdID09IHNvdXJjZVtzcmMgLSAyXSAmJiBzb3VyY2Vbc3JjXSA9PSBzb3VyY2Vbc3JjIC0gMV0gJiYgc291cmNlW3NyY10gPT0gc291cmNlW3NyYyArIDFdICYmIHNvdXJjZVtzcmNdID09IHNvdXJjZVtzcmMgKyAyXSkpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9ICgoY3dvcmRfdmFsID4+IDEpIHwgMHg4MDAwMDAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZVtvICsgM10gIT0gc291cmNlW3NyYyArIDNdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IGYgPSAzIC0gMiB8IChoYXNoIDw8IDQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3QgKyAwXSA9IChieXRlKShmID4+IDAgKiA4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0ICsgMV0gPSAoYnl0ZSkoZiA+PiAxICogOCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3QgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IG9sZF9zcmMgPSBzcmM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCByZW1haW5pbmcgPSAoKHNvdXJjZS5MZW5ndGggLSBVTkNPTVBSRVNTRURfRU5EIC0gc3JjICsgMSAtIDEpID4gMjU1ID8gMjU1IDogKHNvdXJjZS5MZW5ndGggLSBVTkNPTVBSRVNTRURfRU5EIC0gc3JjICsgMSAtIDEpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlW28gKyBzcmMgLSBvbGRfc3JjXSA9PSBzb3VyY2Vbc3JjXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlW28gKyBzcmMgLSBvbGRfc3JjXSA9PSBzb3VyY2Vbc3JjXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc291cmNlW28gKyAoc3JjIC0gb2xkX3NyYyldID09IHNvdXJjZVtzcmNdICYmIChzcmMgLSBvbGRfc3JjKSA8IHJlbWFpbmluZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBtYXRjaGxlbiA9IHNyYyAtIG9sZF9zcmM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNoIDw8PSA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hsZW4gPCAxOClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGYgPSAoaGFzaCB8IChtYXRjaGxlbiAtIDIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdCArIDBdID0gKGJ5dGUpKGYgPj4gMCAqIDgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0ICsgMV0gPSAoYnl0ZSkoZiA+PiAxICogOCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3QgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGRzdCwgaGFzaCB8IChtYXRjaGxlbiA8PCAxNiksIDMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0ICs9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSBzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KTtcclxuICAgICAgICAgICAgICAgICAgICBsaXRzID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXRzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzaF9jb3VudGVyW2hhc2hdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3RdID0gc291cmNlW3NyY107XHJcbiAgICAgICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gKGN3b3JkX3ZhbCA+PiAxKTtcclxuICAgICAgICAgICAgICAgICAgICBzcmMrKztcclxuICAgICAgICAgICAgICAgICAgICBkc3QrKztcclxuICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICgoZmV0Y2ggPj4gOCkgJiAweGZmZmYpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZmV0Y2ggPSBzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgbywgb2Zmc2V0MjtcclxuICAgICAgICAgICAgICAgIGludCBtYXRjaGxlbiwgaywgbSwgYmVzdF9rID0gMDtcclxuICAgICAgICAgICAgICAgIGJ5dGUgYztcclxuICAgICAgICAgICAgICAgIGludCByZW1haW5pbmcgPSAoKHNvdXJjZS5MZW5ndGggLSBVTkNPTVBSRVNTRURfRU5EIC0gc3JjICsgMSAtIDEpID4gMjU1ID8gMjU1IDogKHNvdXJjZS5MZW5ndGggLSBVTkNPTVBSRVNTRURfRU5EIC0gc3JjICsgMSAtIDEpKTtcclxuICAgICAgICAgICAgICAgIGludCBoYXNoID0gKChmZXRjaCA+PiAxMikgXiBmZXRjaCkgJiAoSEFTSF9WQUxVRVMgLSAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjID0gaGFzaF9jb3VudGVyW2hhc2hdO1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSAwO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0MiA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgUUxaX1BPSU5URVJTXzMgJiYgYyA+IGs7IGsrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBvID0gaGFzaHRhYmxlW2hhc2gsIGtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYnl0ZSlmZXRjaCA9PSBzb3VyY2Vbb10gJiYgKGJ5dGUpKGZldGNoID4+IDgpID09IHNvdXJjZVtvICsgMV0gJiYgKGJ5dGUpKGZldGNoID4+IDE2KSA9PSBzb3VyY2VbbyArIDJdICYmIG8gPCBzcmMgLSBNSU5PRkZTRVQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtID0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNvdXJjZVtvICsgbV0gPT0gc291cmNlW3NyYyArIG1dICYmIG0gPCByZW1haW5pbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgobSA+IG1hdGNobGVuKSB8fCAobSA9PSBtYXRjaGxlbiAmJiBvID4gb2Zmc2V0MikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDIgPSBvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSBtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdF9rID0gaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG8gPSBvZmZzZXQyO1xyXG4gICAgICAgICAgICAgICAgaGFzaHRhYmxlW2hhc2gsIGMgJiAoUUxaX1BPSU5URVJTXzMgLSAxKV0gPSBzcmM7XHJcbiAgICAgICAgICAgICAgICBjKys7XHJcbiAgICAgICAgICAgICAgICBoYXNoX2NvdW50ZXJbaGFzaF0gPSBjO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtYXRjaGxlbiA+PSAzICYmIHNyYyAtIG8gPCAxMzEwNzEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IG9mZnNldCA9IHNyYyAtIG87XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IHUgPSAxOyB1IDwgbWF0Y2hsZW47IHUrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoID0gc291cmNlW3NyYyArIHVdIHwgKHNvdXJjZVtzcmMgKyB1ICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIHUgKyAyXSA8PCAxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2ggPSAoKGZldGNoID4+IDEyKSBeIGZldGNoKSAmIChIQVNIX1ZBTFVFUyAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjID0gaGFzaF9jb3VudGVyW2hhc2hdKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2h0YWJsZVtoYXNoLCBjICYgKFFMWl9QT0lOVEVSU18zIC0gMSldID0gc3JjICsgdTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNyYyArPSBtYXRjaGxlbjtcclxuICAgICAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAoKGN3b3JkX3ZhbCA+PiAxKSB8IDB4ODAwMDAwMDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hsZW4gPT0gMyAmJiBvZmZzZXQgPD0gNjMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBkc3QsIG9mZnNldCA8PCAyLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHN0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNobGVuID09IDMgJiYgb2Zmc2V0IDw9IDE2MzgzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFzdF93cml0ZShkZXN0aW5hdGlvbiwgZHN0LCAob2Zmc2V0IDw8IDIpIHwgMSwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdCArPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChtYXRjaGxlbiA8PSAxOCAmJiBvZmZzZXQgPD0gMTAyMylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGRzdCwgKChtYXRjaGxlbiAtIDMpIDw8IDIpIHwgKG9mZnNldCA8PCA2KSB8IDIsIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3QgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobWF0Y2hsZW4gPD0gMzMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBkc3QsICgobWF0Y2hsZW4gLSAyKSA8PCAyKSB8IChvZmZzZXQgPDwgNykgfCAzLCAzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHN0ICs9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGRzdCwgKChtYXRjaGxlbiAtIDMpIDw8IDcpIHwgKG9mZnNldCA8PCAxNSkgfCAzLCA0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHN0ICs9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxpdHMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdF0gPSBzb3VyY2Vbc3JjXTtcclxuICAgICAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAoY3dvcmRfdmFsID4+IDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNyYysrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRzdCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlIChzcmMgPD0gc291cmNlLkxlbmd0aCAtIDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoKGN3b3JkX3ZhbCAmIDEpID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGN3b3JkX3B0ciwgKGludCkoKGN3b3JkX3ZhbCA+PiAxKSB8IDB4ODAwMDAwMDApLCA0KTtcclxuICAgICAgICAgICAgICAgIGN3b3JkX3B0ciA9IGRzdDtcclxuICAgICAgICAgICAgICAgIGRzdCArPSBDV09SRF9MRU47XHJcbiAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAweDgwMDAwMDAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkZXN0aW5hdGlvbltkc3RdID0gc291cmNlW3NyY107XHJcbiAgICAgICAgICAgIHNyYysrO1xyXG4gICAgICAgICAgICBkc3QrKztcclxuICAgICAgICAgICAgY3dvcmRfdmFsID0gKGN3b3JkX3ZhbCA+PiAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKChjd29yZF92YWwgJiAxKSAhPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY3dvcmRfdmFsID0gKGN3b3JkX3ZhbCA+PiAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmFzdF93cml0ZShkZXN0aW5hdGlvbiwgY3dvcmRfcHRyLCAoaW50KSgoY3dvcmRfdmFsID4+IDEpIHwgMHg4MDAwMDAwMCksIENXT1JEX0xFTik7XHJcbiAgICAgICAgd3JpdGVfaGVhZGVyKGRlc3RpbmF0aW9uLCBsZXZlbCwgdHJ1ZSwgc291cmNlLkxlbmd0aCwgZHN0KTtcclxuICAgICAgICBkMiA9IG5ldyBieXRlW2RzdF07XHJcbiAgICAgICAgU3lzdGVtLkFycmF5LkNvcHkoZGVzdGluYXRpb24sIGQyLCBkc3QpO1xyXG4gICAgICAgIHJldHVybiBkMjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBmYXN0X3dyaXRlKGJ5dGVbXSBhLCBpbnQgaSwgaW50IHZhbHVlLCBpbnQgbnVtYnl0ZXMpXHJcbiAgICB7XHJcbiAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBudW1ieXRlczsgaisrKVxyXG4gICAgICAgICAgICBhW2kgKyBqXSA9IChieXRlKSh2YWx1ZSA+PiAoaiAqIDgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ5dGVbXSBkZWNvbXByZXNzKGJ5dGVbXSBzb3VyY2UpXHJcbiAgICB7XHJcbiAgICAgICAgaW50IGxldmVsO1xyXG4gICAgICAgIGludCBzaXplID0gc2l6ZURlY29tcHJlc3NlZChzb3VyY2UpO1xyXG4gICAgICAgIGludCBzcmMgPSBoZWFkZXJMZW4oc291cmNlKTtcclxuICAgICAgICBpbnQgZHN0ID0gMDtcclxuICAgICAgICB1aW50IGN3b3JkX3ZhbCA9IDE7XHJcbiAgICAgICAgYnl0ZVtdIGRlc3RpbmF0aW9uID0gbmV3IGJ5dGVbc2l6ZV07XHJcbiAgICAgICAgaW50W10gaGFzaHRhYmxlID0gbmV3IGludFs0MDk2XTtcclxuICAgICAgICBieXRlW10gaGFzaF9jb3VudGVyID0gbmV3IGJ5dGVbNDA5Nl07XHJcbiAgICAgICAgaW50IGxhc3RfbWF0Y2hzdGFydCA9IHNpemUgLSBVTkNPTkRJVElPTkFMX01BVENITEVOIC0gVU5DT01QUkVTU0VEX0VORCAtIDE7XHJcbiAgICAgICAgaW50IGxhc3RfaGFzaGVkID0gLTE7XHJcbiAgICAgICAgaW50IGhhc2g7XHJcbiAgICAgICAgdWludCBmZXRjaCA9IDA7XHJcblxyXG4gICAgICAgIGxldmVsID0gKHNvdXJjZVswXSA+PiAyKSAmIDB4MztcclxuXHJcbiAgICAgICAgaWYgKGxldmVsICE9IDEgJiYgbGV2ZWwgIT0gMylcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiQyMgdmVyc2lvbiBvbmx5IHN1cHBvcnRzIGxldmVsIDEgYW5kIDNcIik7XHJcblxyXG4gICAgICAgIGlmICgoc291cmNlWzBdICYgMSkgIT0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJ5dGVbXSBkMiA9IG5ldyBieXRlW3NpemVdO1xyXG4gICAgICAgICAgICBTeXN0ZW0uQXJyYXkuQ29weShzb3VyY2UsIGhlYWRlckxlbihzb3VyY2UpLCBkMiwgMCwgc2l6ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoOyA7IClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjd29yZF92YWwgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gKHVpbnQpKHNvdXJjZVtzcmNdIHwgKHNvdXJjZVtzcmMgKyAxXSA8PCA4KSB8IChzb3VyY2Vbc3JjICsgMl0gPDwgMTYpIHwgKHNvdXJjZVtzcmMgKyAzXSA8PCAyNCkpO1xyXG4gICAgICAgICAgICAgICAgc3JjICs9IDQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoZHN0IDw9IGxhc3RfbWF0Y2hzdGFydClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAodWludCkoc291cmNlW3NyY10gfCAoc291cmNlW3NyYyArIDFdIDw8IDgpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAodWludCkoc291cmNlW3NyY10gfCAoc291cmNlW3NyYyArIDFdIDw8IDgpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNikgfCAoc291cmNlW3NyYyArIDNdIDw8IDI0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgoY3dvcmRfdmFsICYgMSkgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWludCBtYXRjaGxlbjtcclxuICAgICAgICAgICAgICAgIHVpbnQgb2Zmc2V0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBjd29yZF92YWwgPSBjd29yZF92YWwgPj4gMTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBoYXNoID0gKChpbnQpZmV0Y2ggPj4gNCkgJiAweGZmZjtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQyID0gKHVpbnQpaGFzaHRhYmxlW2hhc2hdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGZldGNoICYgMHhmKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSAoZmV0Y2ggJiAweGYpICsgMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNobGVuID0gc291cmNlW3NyYyArIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gMztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdWludCBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChmZXRjaCAmIDMpID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAoZmV0Y2ggJiAweGZmKSA+PiAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGxlbiA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoZmV0Y2ggJiAyKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGZldGNoICYgMHhmZmZmKSA+PiAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGxlbiA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoZmV0Y2ggJiAxKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGZldGNoICYgMHhmZmZmKSA+PiA2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGxlbiA9ICgoZmV0Y2ggPj4gMikgJiAxNSkgKyAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKGZldGNoICYgMTI3KSAhPSAzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGZldGNoID4+IDcpICYgMHgxZmZmZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSAoKGZldGNoID4+IDIpICYgMHgxZikgKyAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gMztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGZldGNoID4+IDE1KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSAoKGZldGNoID4+IDcpICYgMjU1KSArIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQyID0gKHVpbnQpKGRzdCAtIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0ICsgMF0gPSBkZXN0aW5hdGlvbltvZmZzZXQyICsgMF07XHJcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3QgKyAxXSA9IGRlc3RpbmF0aW9uW29mZnNldDIgKyAxXTtcclxuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdCArIDJdID0gZGVzdGluYXRpb25bb2Zmc2V0MiArIDJdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAzOyBpIDwgbWF0Y2hsZW47IGkgKz0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3QgKyBpXSA9IGRlc3RpbmF0aW9uW29mZnNldDIgKyBpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkc3QgKz0gKGludCltYXRjaGxlbjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShkZXN0aW5hdGlvbltsYXN0X2hhc2hlZCArIDFdIHwgKGRlc3RpbmF0aW9uW2xhc3RfaGFzaGVkICsgMl0gPDwgOCkgfCAoZGVzdGluYXRpb25bbGFzdF9oYXNoZWQgKyAzXSA8PCAxNikpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChsYXN0X2hhc2hlZCA8IGRzdCAtIG1hdGNobGVuKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9oYXNoZWQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaCA9IChpbnQpKCgoZmV0Y2ggPj4gMTIpIF4gZmV0Y2gpICYgKEhBU0hfVkFMVUVTIC0gMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNodGFibGVbaGFzaF0gPSBsYXN0X2hhc2hlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaF9jb3VudGVyW2hhc2hdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAodWludCkoZmV0Y2ggPj4gOCAmIDB4ZmZmZiB8ICh1aW50KShkZXN0aW5hdGlvbltsYXN0X2hhc2hlZCArIDNdIDw8IDE2KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZldGNoID0gKHVpbnQpKHNvdXJjZVtzcmNdIHwgKHNvdXJjZVtzcmMgKyAxXSA8PCA4KSB8IChzb3VyY2Vbc3JjICsgMl0gPDwgMTYpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KSB8IChzb3VyY2Vbc3JjICsgM10gPDwgMjQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxhc3RfaGFzaGVkID0gZHN0IC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkc3QgPD0gbGFzdF9tYXRjaHN0YXJ0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdF0gPSBzb3VyY2Vbc3JjXTtcclxuICAgICAgICAgICAgICAgICAgICBkc3QgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICBzcmMgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjd29yZF92YWwgPSBjd29yZF92YWwgPj4gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxldmVsID09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobGFzdF9oYXNoZWQgPCBkc3QgLSAzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0X2hhc2hlZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGZldGNoMiA9IGRlc3RpbmF0aW9uW2xhc3RfaGFzaGVkXSB8IChkZXN0aW5hdGlvbltsYXN0X2hhc2hlZCArIDFdIDw8IDgpIHwgKGRlc3RpbmF0aW9uW2xhc3RfaGFzaGVkICsgMl0gPDwgMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaCA9ICgoZmV0Y2gyID4+IDEyKSBeIGZldGNoMikgJiAoSEFTSF9WQUxVRVMgLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2h0YWJsZVtoYXNoXSA9IGxhc3RfaGFzaGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaF9jb3VudGVyW2hhc2hdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShmZXRjaCA+PiA4ICYgMHhmZmZmIHwgKHVpbnQpKHNvdXJjZVtzcmMgKyAyXSA8PCAxNikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShmZXRjaCA+PiA4ICYgMHhmZmZmIHwgKHVpbnQpKHNvdXJjZVtzcmMgKyAyXSA8PCAxNikgfCAodWludCkoc291cmNlW3NyYyArIDNdIDw8IDI0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChkc3QgPD0gc2l6ZSAtIDEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3dvcmRfdmFsID09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSBDV09SRF9MRU47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAweDgwMDAwMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3RdID0gc291cmNlW3NyY107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gY3dvcmRfdmFsID4+IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXN0aW5hdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuIH1cclxuICIsInVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBHcmFwaHM7XHJcbnVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcbnVzaW5nIE5ld3RvbnNvZnQuSnNvbjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBCcmlkZ2UualF1ZXJ5MjtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBHcmFwaHNDb3JlO1xyXG5cclxubmFtZXNwYWNlIFRlc3Rcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEFwcFxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyBIVE1MRWxlbWVudCBfc2FnZUNvbnRhaW5lcjtcclxuICAgICAgICBzdGF0aWMgSFRNTExJRWxlbWVudCBfbmV3U2hlZXRUYWI7XHJcbiAgICAgICAgc3RhdGljIHN0cmluZyBfY3VycmVudFRhYkNhbnZhcztcclxuICAgICAgICBzdGF0aWMgaW50IF90YWJJRCA9IDE7XHJcblxyXG4gICAgICAgIHN0YXRpYyBEaWN0aW9uYXJ5PHN0cmluZywgVGFiQ2FudmFzPiBfY2FudmFzTG9va3VwID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBUYWJDYW52YXM+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBNYWluKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFdpbmRvdy5PbkxvYWQgKz0gT25XaW5kb3dMb2FkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgT25XaW5kb3dMb2FkKEV2ZW50IGVlZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFdpbmRvdy5BZGRFdmVudExpc3RlbmVyKFwiY29weVwiLCAoQWN0aW9uPEV2ZW50PikoKEV2ZW50IGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICgoZS5UYXJnZXQgaXMgSFRNTFNwYW5FbGVtZW50KSB8fCAoZS5UYXJnZXQgaXMgSFRNTEFuY2hvckVsZW1lbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgIGUuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0YyA9IF9jYW52YXNMb29rdXBbX2N1cnJlbnRUYWJDYW52YXNdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSB0Yy5HcmFwaENhbnZhcy5Eb0NvcHkoKTtcclxuICAgICAgICAgICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkocykpXHJcbiAgICAgICAgICAgICAgICAgICAgZS5Ub0R5bmFtaWMoKS5jbGlwYm9hcmREYXRhLnNldERhdGEoXCJUZXh0XCIsIHMpO1xyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICBXaW5kb3cuQWRkRXZlbnRMaXN0ZW5lcihcInBhc3RlXCIsIChBY3Rpb248RXZlbnQ+KSgoRXZlbnQgZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZS5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBlLlRvRHluYW1pYygpLmNsaXBib2FyZERhdGEuZ2V0RGF0YShcIlRleHRcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGMgPSBfY2FudmFzTG9va3VwW19jdXJyZW50VGFiQ2FudmFzXTtcclxuICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLkRvUGFzdGUocyA/PyBcIlwiKTtcclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgalF1ZXJ5LkRvY3VtZW50Lk9uKFwia2V5ZG93blwiLCAoQWN0aW9uPEtleWJvYXJkRXZlbnQ+KU9uS2V5RG93bik7XHJcbiAgICAgICAgICAgIGpRdWVyeS5Eb2N1bWVudC5PbihcImNvbnRleHRtZW51XCIsIFwiLklBbUFHcmFwaENhbnZhc1wiLCAoQWN0aW9uPEV2ZW50PikoKEV2ZW50IGUpID0+IHsgZS5QcmV2ZW50RGVmYXVsdCgpOyB9KSk7XHJcblxyXG4gICAgICAgICAgICAjcmVnaW9uIFNhZ2VcclxuICAgICAgICAgICAgX3NhZ2VDb250YWluZXIgPSBEb2N1bWVudC5HZXRFbGVtZW50QnlJZChcIlNhZ2VDb250YWluZXJcIik7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZU1hbnVhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZU1hbnVhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUdyYXBoNlwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUdyYXBoNigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVNwYXJzZTZcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VTcGFyc2U2KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ2hyb21hdGljTnVtYmVyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQ2hyb21hdGljTnVtYmVyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ2hyb21hdGljUG9seW5vbWlhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNocm9tYXRpY1BvbHlub21pYWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDb2xvcmluZ1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNvbG9yaW5nKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSW5kZXBlbmRlbnRTZXRcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJbmRlcGVuZGVudFNldCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzUGVyZmVjdFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzUGVyZmVjdCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZU1hdGNoaW5nUG9seW5vbWlhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZU1hdGNoaW5nUG9seW5vbWlhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVBhdGh3aWR0aFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVBhdGh3aWR0aCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVRyZWV3aWR0aFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVRyZWV3aWR0aCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVR1dHRlUG9seW5vbWlhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVR1dHRlUG9seW5vbWlhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVZlcnRleENvdmVyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlVmVydGV4Q292ZXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDbGlxdWVDb21wbGV4XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQ2xpcXVlQ29tcGxleCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNsaXF1ZU1heGltdW1cIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDbGlxdWVNYXhpbXVtKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ2xpcXVlTnVtYmVyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQ2xpcXVlTnVtYmVyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ2xpcXVlUG9seW5vbWlhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNsaXF1ZVBvbHlub21pYWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VCcmlkZ2VzXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQnJpZGdlcygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUdvbW9yeUh1VHJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUdvbW9yeUh1VHJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVJhbmRvbVNwYW5uaW5nVHJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVJhbmRvbVNwYW5uaW5nVHJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUFwZXhWZXJ0aWNlc1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUFwZXhWZXJ0aWNlcygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQXBleFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQXBleCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQXJjVHJhbnNpdGl2ZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQXJjVHJhbnNpdGl2ZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQXN0ZXJvaWRhbFRyaXBsZUZyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0FzdGVyb2lkYWxUcmlwbGVGcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNCaWNvbm5lY3RlZFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQmljb25uZWN0ZWQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0JpcGFydGl0ZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQmlwYXJ0aXRlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNCbG9ja0dyYXBoXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNCbG9ja0dyYXBoKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNDYXJ0ZXNpYW5Qcm9kdWN0XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNDYXJ0ZXNpYW5Qcm9kdWN0KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNEaXN0YW5jZVJlZ3VsYXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0Rpc3RhbmNlUmVndWxhcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzRWRnZVRyYW5zaXRpdmVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0VkZ2VUcmFuc2l0aXZlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNFdmVuSG9sZUZyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0V2ZW5Ib2xlRnJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzRm9yZXN0XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNGb3Jlc3QoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0hhbGZUcmFuc2l0aXZlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNIYWxmVHJhbnNpdGl2ZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzTGluZUdyYXBoXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNMaW5lR3JhcGgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0xvbmdBbnRpaG9sZUZyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0xvbmdBbnRpaG9sZUZyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0xvbmdIb2xlRnJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzTG9uZ0hvbGVGcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNPZGRIb2xlRnJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzT2RkSG9sZUZyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc092ZXJmdWxsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNPdmVyZnVsbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzUGFydGlhbEN1YmVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1BhcnRpYWxDdWJlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNQcmltZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzUHJpbWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1NlbWlTeW1tZXRyaWNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1NlbWlTeW1tZXRyaWMoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1NwbGl0XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNTcGxpdCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzU3Ryb25nbHlSZWd1bGFyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNTdHJvbmdseVJlZ3VsYXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1RyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1RyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1RyaWFuZ2xlRnJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzVHJpYW5nbGVGcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNXZWFrbHlDaG9yZGFsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNXZWFrbHlDaG9yZGFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlT2RkR2lydGhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VPZGRHaXJ0aCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUZyYWN0aW9uYWxDaHJvbWF0aWNJbmRleFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUZyYWN0aW9uYWxDaHJvbWF0aWNJbmRleCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUhhc1BlcmZlY3RNYXRjaGluZ1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUhhc1BlcmZlY3RNYXRjaGluZygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUtpcmNoaG9mZlN5bWFuemlrUG9seW5vbWlhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUtpcmNoaG9mZlN5bWFuemlrUG9seW5vbWlhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUxvdmFzelRoZXRhXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTG92YXN6VGhldGEoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VNYXRjaGluZ1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZU1hdGNoaW5nKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTWF4aW11bUF2ZXJhZ2VEZWdyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VNYXhpbXVtQXZlcmFnZURlZ3JlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVNlaWRlbEFkamFjZW5jeU1hdHJpeFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVNlaWRlbEFkamFjZW5jeU1hdHJpeCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZU5ldHdvcmt4R3JhcGhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VOZXR3b3JreEdyYXBoKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQWRqYWNlbmN5TWF0cml4XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQWRqYWNlbmN5TWF0cml4KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSW5jaWRlbmNlTWF0cml4XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSW5jaWRlbmNlTWF0cml4KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRGlzdGFuY2VNYXRyaXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VEaXN0YW5jZU1hdHJpeCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUtpcmNoaG9mZk1hdHJpeFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUtpcmNoaG9mZk1hdHJpeCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZURlbnNpdHlcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VEZW5zaXR5KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlT3JkZXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VPcmRlcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVNpemVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VTaXplKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQXZlcmFnZURlZ3JlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUF2ZXJhZ2VEZWdyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VEZWdyZWVTZXF1ZW5jZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZURlZ3JlZVNlcXVlbmNlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ3ljbGVCYXNpc1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUN5Y2xlQmFzaXMoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VBbGxQYXRoc1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUFsbFBhdGhzKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlVHJpYW5nbGVzQ291bnRcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VUcmlhbmdsZXNDb3VudCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVNwZWN0cnVtXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlU3BlY3RydW0oKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VFaWdlbnZlY3RvcnNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VFaWdlbnZlY3RvcnMoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VFaWdlbnNwYWNlc1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUVpZ2Vuc3BhY2VzKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQXV0b21vcnBoaXNtR3JvdXBcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VBdXRvbW9ycGhpc21Hcm91cCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzVmVydGV4VHJhbnNpdGl2ZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzVmVydGV4VHJhbnNpdGl2ZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNhbm9uaWNhbExhYmVsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQ2Fub25pY2FsTGFiZWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0NheWxleVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQ2F5bGV5KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNFdWxlcmlhblwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzRXVsZXJpYW4oKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1BsYW5hclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzUGxhbmFyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNSZWd1bGFyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNSZWd1bGFyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNDaG9yZGFsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNDaG9yZGFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNDaXJjdWxhbnRcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0NpcmN1bGFudCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzSW50ZXJ2YWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0ludGVydmFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNHYWxsYWlUcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNHYWxsYWlUcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNDbGlxdWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0NsaXF1ZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQ3ljbGVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0N5Y2xlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNJbmRlcGVuZGVudFNldFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzSW5kZXBlbmRlbnRTZXQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1RyYW5zaXRpdmVseVJlZHVjZWRcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1RyYW5zaXRpdmVseVJlZHVjZWQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0VxdWl0YWJsZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzRXF1aXRhYmxlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRWNjZW50cmljaXR5XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRWNjZW50cmljaXR5KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlUmFkaXVzXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlUmFkaXVzKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRGlhbWV0ZXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VEaWFtZXRlcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUdpcnRoXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlR2lydGgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VFZGdlQ29ubmVjdGl2aXR5XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRWRnZUNvbm5lY3Rpdml0eSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVZlcnRleENvbm5lY3Rpdml0eVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVZlcnRleENvbm5lY3Rpdml0eSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzSGFtaWx0b25pYW5cIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0hhbWlsdG9uaWFuKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ2hhcmFjdGVyaXN0aWNQb2x5bm9taWFsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQ2hhcmFjdGVyaXN0aWNQb2x5bm9taWFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlR2VudXNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VHZW51cygpKSk7XHJcblxyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBMYXlvdXRcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTGF5b3V0U3ByaW5nc1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUxheW91dFNwcmluZygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUxheW91dFJhbmtlZFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUxheW91dFJhbmtlZCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUxheW91dFJhbmRvbVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUxheW91dEV4dGVuZFJhbmRvbWx5KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTGF5b3V0Q2lyY3VsYXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMYXlvdXRDaXJjdWxhcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUxheW91dFRyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMYXlvdXRUcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTGF5b3V0R3JhcGhWaXpcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMYXlvdXRHcmFwaHZpeigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUxheW91dFBsYW5hclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUxheW91dFBsYW5hcigpKSk7XHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIuTmFtZWRHcmFwaFwiKS5PbihcImNsaWNrXCIsIChBY3Rpb248RXZlbnQ+KSgoRXZlbnQgZWUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEN1cnJlbnRUYWJDYW52YXMuU2FnZUxvYWROYW1lZEdyYXBoKCgoSFRNTEVsZW1lbnQpZWUuQ3VycmVudFRhcmdldCkuVGV4dENvbnRlbnQpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgTmV3VGFiKCk7XHJcbiAgICAgICAgICAgIEFkZE5ld1NoZWV0VGFiKCk7XHJcblxyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiLm5hdi10YWJzXCIpLk9uKFwiY2xpY2tcIiwgXCJhXCIsIChBY3Rpb248RXZlbnQ+KSgoRXZlbnQgZWUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVlLlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWpRdWVyeS5UaGlzLkhhc0NsYXNzKFwibmV3LXNoZWV0LWFuY2hvclwiKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGpRdWVyeS5UaGlzLlRvRHluYW1pYygpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9jdXJyZW50VGFiQ2FudmFzID0gZWUuVGFyZ2V0LkFzPEhUTUxBbmNob3JFbGVtZW50PigpLkhyZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IEN1cnJlbnRUYWJDYW52YXMuQ2FudmFzO1xyXG4gICAgICAgICAgICAgICAgICAgIGQudGFiKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIi5uZXctc2hlZXQtYW5jaG9yXCIpLk9uKFwiY2xpY2tcIiwgKEFjdGlvbjxFdmVudD4pKChFdmVudCBlZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWUuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIE5ld1RhYigpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBBZGROZXdTaGVldFRhYigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdGFiQ29udHJvbCA9IERvY3VtZW50LkdldEVsZW1lbnRCeUlkKFwiVGFiQ29udHJvbFwiKTtcclxuICAgICAgICAgICAgX25ld1NoZWV0VGFiID0gbmV3IEhUTUxMSUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgX25ld1NoZWV0VGFiLklkID0gXCJuZXctc2hlZXRcIjtcclxuXHJcbiAgICAgICAgICAgIHZhciBhbmNob3IgPSBuZXcgSFRNTEFuY2hvckVsZW1lbnQoKTtcclxuICAgICAgICAgICAgYW5jaG9yLkNsYXNzTmFtZSA9IFwibmV3LXNoZWV0LWFuY2hvclwiO1xyXG4gICAgICAgICAgICBhbmNob3IuVGV4dENvbnRlbnQgPSBcIitcIjtcclxuICAgICAgICAgICAgYW5jaG9yLkhyZWYgPSBcIiNcIjtcclxuXHJcbiAgICAgICAgICAgIF9uZXdTaGVldFRhYi5BcHBlbmRDaGlsZChhbmNob3IpO1xyXG4gICAgICAgICAgICB0YWJDb250cm9sLkFwcGVuZENoaWxkKF9uZXdTaGVldFRhYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgTmV3VGFiKHN0cmluZyBuYW1lID0gbnVsbCwgR3JhcGggRyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkobmFtZSkpXHJcbiAgICAgICAgICAgICAgICBuYW1lID0gXCJzaGVldCBcIiArIF90YWJJRDtcclxuXHJcbiAgICAgICAgICAgIHZhciBjYW52YXMgPSBuZXcgSFRNTENhbnZhc0VsZW1lbnQoKTtcclxuICAgICAgICAgICAgY2FudmFzLklkID0gXCJUYWJcIiArIF90YWJJRDtcclxuICAgICAgICAgICAgY2FudmFzLldpZHRoID0gKGludCkoV2luZG93LklubmVyV2lkdGgpO1xyXG4gICAgICAgICAgICBjYW52YXMuSGVpZ2h0ID0gKGludCkoV2luZG93LklubmVySGVpZ2h0KTtcclxuICAgICAgICAgICAgY2FudmFzLkNsYXNzTmFtZSA9IFwiSUFtQUdyYXBoQ2FudmFzXCI7XHJcblxyXG4gICAgICAgICAgICBjYW52YXMuT25TaG93ICs9IGRlbGVnYXRlIFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuV2lkdGggPSBjYW52YXMuUGFyZW50RWxlbWVudC5DbGllbnRXaWR0aDtcclxuICAgICAgICAgICAgICAgIGNhbnZhcy5IZWlnaHQgPSBjYW52YXMuUGFyZW50RWxlbWVudC5DbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoRyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgRyA9IG5ldyBHcmFwaCgpO1xyXG4gICAgICAgICAgICB2YXIgZ3JhcGhDYW52YXMgPSBuZXcgR3JhcGhDYW52YXMoRyk7XHJcbiAgICAgICAgICAgIHZhciB0YyA9IG5ldyBUYWJDYW52YXMoY2FudmFzLCBncmFwaENhbnZhcyk7XHJcbiAgICAgICAgICAgIHRjLkludmFsaWRhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0YWJQYW5lID0gbmV3IEhUTUxEaXZFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIHRhYlBhbmUuQ2xhc3NOYW1lID0gXCJ0YWItcGFuZSBhY3RpdmVcIjtcclxuICAgICAgICAgICAgdGFiUGFuZS5JZCA9IFwiVGFiXCIgKyBfdGFiSUQ7XHJcbiAgICAgICAgICAgIHRhYlBhbmUuQXBwZW5kQ2hpbGQoY2FudmFzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0YWJDb250cm9sQ29udGVudCA9IERvY3VtZW50LkdldEVsZW1lbnRCeUlkKFwiVGFiQ29udHJvbENvbnRlbnRcIik7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjaGlsZCBpbiB0YWJDb250cm9sQ29udGVudC5DaGlsZHJlbilcclxuICAgICAgICAgICAgICAgIGNoaWxkLkNsYXNzTmFtZSA9IFwidGFiLXBhbmVcIjtcclxuICAgICAgICAgICAgdGFiQ29udHJvbENvbnRlbnQuQXBwZW5kQ2hpbGQodGFiUGFuZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGFiID0gbmV3IEhUTUxMSUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgdGFiLkNsYXNzTmFtZSA9IFwiYWN0aXZlXCI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gbmV3IEhUTUxBbmNob3JFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIGFuY2hvci5TZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZVwiLCBcInRhYlwiKTtcclxuICAgICAgICAgICAgYW5jaG9yLlRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICAgICAgYW5jaG9yLkhyZWYgPSBcIiNUYWJcIiArIF90YWJJRDtcclxuICAgICAgICAgICAgX2NhbnZhc0xvb2t1cFthbmNob3IuSHJlZl0gPSB0YztcclxuICAgICAgICAgICAgX2N1cnJlbnRUYWJDYW52YXMgPSBhbmNob3IuSHJlZjtcclxuXHJcbiAgICAgICAgICAgIHRhYi5BcHBlbmRDaGlsZChhbmNob3IpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRhYkNvbnRyb2wgPSBEb2N1bWVudC5HZXRFbGVtZW50QnlJZChcIlRhYkNvbnRyb2xcIik7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjaGlsZCBpbiB0YWJDb250cm9sLkNoaWxkcmVuKVxyXG4gICAgICAgICAgICAgICAgY2hpbGQuQ2xhc3NOYW1lID0gXCJuYXJmXCI7XHJcbiAgICAgICAgICAgIHRhYkNvbnRyb2wuSW5zZXJ0QmVmb3JlKHRhYiwgX25ld1NoZWV0VGFiKTtcclxuXHJcbiAgICAgICAgICAgIF90YWJJRCsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUYWJDYW52YXMgQ3VycmVudFRhYkNhbnZhcyB7IGdldCB7IHJldHVybiBfY2FudmFzTG9va3VwW19jdXJyZW50VGFiQ2FudmFzXTsgfSB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIE9uS2V5RG93bihLZXlib2FyZEV2ZW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdGMgPSBDdXJyZW50VGFiQ2FudmFzO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChlLktleSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImZcIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Eb1pvb21GaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCItXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuRG9ab29tKC0xLCBuZXcgQm94KDAuNSwgMC41KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiK1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLkRvWm9vbSgxLCBuZXcgQm94KDAuNSwgMC41KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiaVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLlRvZ2dsZVZlcnRleEluZGljZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJJXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuUm90YXRlVmVydGV4SW5kaWNlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImpcIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Ub2dnbGVFZGdlSW5kaWNlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkpcIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Sb3RhdGVFZGdlSW5kaWNlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJcIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Eb1JldmVyc2VTZWxlY3RlZEVkZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLkRvUm90YXRlU2VsZWN0ZWRFZGdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInlcIjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5DdHJsS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Eb1JlZG8oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ6XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuQ3RybEtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuRG9VbmRvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQXNrU2FnZShzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkaXYgPSBBcHBlbmRTYWdlRGl2KHMpO1xyXG5cclxuICAgICAgICAgICAgU2NyaXB0LldyaXRlKFwic2FnZWNlbGwubWFrZVNhZ2VjZWxsKHtcXFwiaW5wdXRMb2NhdGlvblxcXCI6IFxcXCJkaXYuY29tcHV0ZVxcXCIsIGhpZGU6IFtcXFwicGVybWFsaW5rXFxcIiwgXFxcImZ1bGxTY3JlZW5cXFwiXSwgYXV0b2V2YWw6ZmFsc2V9KTtcIik7XHJcbiAgICAgICAgICAgIFNjcmlwdC5Xcml0ZShcIiQoXFxcIiNTYWdlTW9kYWxcXFwiKS5tb2RhbCgnc2hvdycpO1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBBc2tTYWdlQXV0byhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcGVuZFNhZ2VEaXYocyk7XHJcblxyXG4gICAgICAgICAgICBTY3JpcHQuV3JpdGUoXCJzYWdlY2VsbC5tYWtlU2FnZWNlbGwoe1xcXCJpbnB1dExvY2F0aW9uXFxcIjogXFxcImRpdi5jb21wdXRlXFxcIiwgaGlkZTogW1xcXCJwZXJtYWxpbmtcXFwiLCBcXFwiZXZhbEJ1dHRvblxcXCIsIFxcXCJmdWxsU2NyZWVuXFxcIiwgXFxcImVkaXRvclxcXCJdLCBhdXRvZXZhbDp0cnVlfSk7XCIpO1xyXG4gICAgICAgICAgICBTY3JpcHQuV3JpdGUoXCIkKFxcXCIjU2FnZU1vZGFsXFxcIikubW9kYWwoJ3Nob3cnKTtcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGFzeW5jIFRhc2s8c3RyaW5nPiBBc2tTYWdlQXN5bmMoR3JhcGggRywgc3RyaW5nIHNhZ2VDb2RlQWJvdXRHKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoXCJHID0gR3JhcGgoJ1wiICsgRy5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgc2FnZUNvZGVBYm91dEcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBhc3luYyBUYXNrPHN0cmluZz4gQXNrU2FnZUFzeW5jKHN0cmluZyBzYWdlQ29kZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSBEb2N1bWVudC5HZXRFbGVtZW50QnlJZChcIlNhZ2VTZWNyZXRPdXRwdXRIb2xlXCIpO1xyXG4gICAgICAgICAgICBvdXRwdXQuVGV4dENvbnRlbnQgPSBcIndvcmtpbmdcIjtcclxuICAgICAgICAgICAgQXBwZW5kU2FnZURpdihzYWdlQ29kZSk7XHJcblxyXG4gICAgICAgICAgICBTY3JpcHQuV3JpdGUoXCJzYWdlY2VsbC5tYWtlU2FnZWNlbGwoe1xcXCJpbnB1dExvY2F0aW9uXFxcIjogXFxcImRpdi5jb21wdXRlXFxcIiwgaGlkZTogW1xcXCJwZXJtYWxpbmtcXFwiLCBcXFwiZXZhbEJ1dHRvblxcXCIsIFxcXCJmdWxsU2NyZWVuXFxcIiwgXFxcImVkaXRvclxcXCJdLCBhdXRvZXZhbDp0cnVlLCBvdXRwdXRMb2NhdGlvbjpcXFwiI1NhZ2VTZWNyZXRPdXRwdXRIb2xlXFxcIn0pO1wiKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICghb3V0cHV0LlRleHRDb250ZW50LkNvbnRhaW5zKFwiQWNjZXB0ZWQ6XCIpKVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgVGFzay5EZWxheSgxMDApO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gb3V0cHV0LlRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkocmVzcG9uc2UpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZmxpYmJsZVwiO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdE9yRGVmYXVsdDxzdHJpbmc+KHJlc3BvbnNlLlNwbGl0KG5ld1tdIHsgRW52aXJvbm1lbnQuTmV3TGluZSB9LCBTdHJpbmdTcGxpdE9wdGlvbnMuUmVtb3ZlRW1wdHlFbnRyaWVzKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGJvb2w+KShsaW5lID0+IGxpbmUuQ29udGFpbnMoXCJBY2NlcHRlZDpcIikpKTtcclxuICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHNzKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImZsYWJibGVcIjtcclxuXHJcbiAgICAgICAgICAgIHNzID0gc3MuU3Vic3RyaW5nKHNzLkluZGV4T2YoXCJ0ZXh0L3BsYWluXCIpICsgXCJ0ZXh0L3BsYWluXCIuTGVuZ3RoICsgMyk7XHJcbiAgICAgICAgICAgIHNzID0gc3MuU3Vic3RyaW5nKDAsIHNzLkluZGV4T2YoXCJcXFwiXCIpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBIVE1MRGl2RWxlbWVudCBBcHBlbmRTYWdlRGl2KHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9zYWdlQ29udGFpbmVyLkNoaWxkRWxlbWVudENvdW50ID4gMClcclxuICAgICAgICAgICAgICAgIF9zYWdlQ29udGFpbmVyLlJlbW92ZUNoaWxkKF9zYWdlQ29udGFpbmVyLkNoaWxkcmVuWzBdKTtcclxuICAgICAgICAgICAgdmFyIGRpdiA9IG5ldyBIVE1MRGl2RWxlbWVudCgpO1xyXG4gICAgICAgICAgICBkaXYuQ2xhc3NOYW1lID0gXCJjb21wdXRlXCI7XHJcbiAgICAgICAgICAgIGRpdi5UZXh0Q29udGVudCA9IHM7XHJcbiAgICAgICAgICAgIF9zYWdlQ29udGFpbmVyLkFwcGVuZENoaWxkKGRpdik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBUZXN0XHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgSGVscGVyRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvQ29sb3IodGhpcyBBUkdCIGFyZ2IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChcInJnYmEoezB9LHsxfSx7Mn0sezM6MC4wMH0pXCIsIGFyZ2IuUiwgYXJnYi5HLCBhcmdiLkIsIGFyZ2IuQSAvIDI1NS4wKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIFRlc3Rcclxue1xyXG4gICAgY2xhc3MgTGF5b3V0QW5pbWF0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgaW50IFN0ZXBzID0gMTAwO1xyXG5cclxuICAgICAgICBBY3Rpb24gX3VwZGF0ZTtcclxuICAgICAgICBBY3Rpb24gX2ZpbmFsVXBkYXRlO1xyXG4gICAgICAgIExpc3Q8R3JhcGhzLlZlY3Rvcj4gX2xheW91dDtcclxuICAgICAgICBkb3VibGVbXSBfeHN0ZXA7XHJcbiAgICAgICAgZG91YmxlW10gX3lzdGVwO1xyXG4gICAgICAgIGludCBfc3RlcCA9IDA7XHJcbiAgICAgICAgR3JhcGhzLkdyYXBoIF9HO1xyXG5cclxuICAgICAgICBwdWJsaWMgTGF5b3V0QW5pbWF0aW9uKEFjdGlvbiB1cGRhdGUsIEFjdGlvbiBmaW5hbFVwZGF0ZSwgTGlzdDxHcmFwaHMuVmVjdG9yPiBsYXlvdXQsIEdyYXBocy5HcmFwaCBHKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX0cgPSBHO1xyXG4gICAgICAgICAgICBfdXBkYXRlID0gdXBkYXRlO1xyXG4gICAgICAgICAgICBfZmluYWxVcGRhdGUgPSBmaW5hbFVwZGF0ZTtcclxuICAgICAgICAgICAgX2xheW91dCA9IGxheW91dDtcclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfeHN0ZXAgPSBuZXcgZG91YmxlW19sYXlvdXQuQ291bnRdO1xyXG4gICAgICAgICAgICAgICAgX3lzdGVwID0gbmV3IGRvdWJsZVtfbGF5b3V0LkNvdW50XTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2xheW91dC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF94c3RlcFtpXSA9IChfbGF5b3V0W2ldLlggLSBfRy5WZXJ0aWNlc1tpXS5YKSAvIFN0ZXBzO1xyXG4gICAgICAgICAgICAgICAgICAgIF95c3RlcFtpXSA9IChfbGF5b3V0W2ldLlkgLSBfRy5WZXJ0aWNlc1tpXS5ZKSAvIFN0ZXBzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jIFRhc2sgQW5pbWF0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aGlsZShfc3RlcCA8IFN0ZXBzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEb1N0ZXAoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IFRhc2suRGVsYXkoMTApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIERvU3RlcCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sYXlvdXQuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX0cuVmVydGljZXNbaV0uWCArPSBfeHN0ZXBbaV07XHJcbiAgICAgICAgICAgICAgICBfRy5WZXJ0aWNlc1tpXS5ZICs9IF95c3RlcFtpXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgX3VwZGF0ZSgpO1xyXG4gICAgICAgICAgICBfc3RlcCsrO1xyXG4gICAgICAgICAgICBpZiAoX3N0ZXAgPj0gU3RlcHMpXHJcbiAgICAgICAgICAgICAgICBPbkZpbmlzaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBPbkZpbmlzaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sYXlvdXQuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX0cuVmVydGljZXNbaV0uWCA9IF9sYXlvdXRbaV0uWDtcclxuICAgICAgICAgICAgICAgIF9HLlZlcnRpY2VzW2ldLlkgPSBfbGF5b3V0W2ldLlk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX2ZpbmFsVXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBVbmlvbkZpbmRUcmFja2VkUm9vdHM8VD4gOiBVbmlvbkZpbmQ8VD5cclxuICAgIHtcclxuICAgICAgICBMaXN0PE5vZGU+IF9yb290cyA9IG5ldyBMaXN0PE5vZGU+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxOb2RlPiBGaW5kQWxsRXhjZXB0KElFbnVtZXJhYmxlPE5vZGU+IG5vZGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGdsb2JhbDo6QWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlcy5VbmlvbkZpbmQ8VD4uTm9kZT4oX3Jvb3RzLFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlcy5VbmlvbkZpbmQ8VD4uTm9kZSxnbG9iYWw6OkFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXMuVW5pb25GaW5kPFQ+Lk5vZGU+KG5vZGVzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlcy5VbmlvbkZpbmQ8VD4uTm9kZSwgZ2xvYmFsOjpBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzLlVuaW9uRmluZDxUPi5Ob2RlPikobiA9PiBGaW5kKG4pKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgUm9vdEFkZGVkKE5vZGUgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9yb290cy5BZGQobik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBSb290UmVtb3ZlZChOb2RlIG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfcm9vdHMuUmVtb3ZlKG4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIENocm9uaWNsZWRCcmFuY2ggOiBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxNb3ZlPj5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgaW50IEFscGhhIHtnZXQ7IHByaXZhdGUgc2V0O31cclxuICAgICAgICBwdWJsaWMgaW50IEJldGEge2dldDsgcHJpdmF0ZSBzZXQ7fVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gU3dhcENvbXBvbmVudHMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBDaHJvbmljbGVkQnJhbmNoKExpc3Q8aW50PiBTLCBpbnQgYWxwaGEsIGludCBiZXRhLCBMaXN0PExpc3Q8aW50Pj4gcGFydGl0aW9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFscGhhID0gYWxwaGE7XHJcbiAgICAgICAgICAgIEJldGEgPSBiZXRhO1xyXG4gICAgICAgICAgICBTd2FwQ29tcG9uZW50cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihwYXJ0aXRpb25zLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4ocCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGkgPT4gU1tpXSkpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmF0b3I8SUVudW1lcmFibGU8TW92ZT4+IEdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxib29sPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZT4+KExpc3RVdGlsaXR5LkVudW1lcmF0ZVNob3J0TGV4Tm9uZW1wdHkoU3dhcENvbXBvbmVudHMuQ291bnQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxib29sPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmU+PikoY2YgPT4gRW51bWVyYXRlTW92ZXMoY2YpKSkuR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8TW92ZT4gRW51bWVyYXRlTW92ZXMoTGlzdDxib29sPiBjZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY2YuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjZltpXSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcyBpbiBTd2FwQ29tcG9uZW50c1tpXSlcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IE1vdmUoKSB7IEFkZGVkID0gQWxwaGEsIFJlbW92ZWQgPSBCZXRhLCBTdGFjayA9IHMgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIENvbG9yaW5nQW5hbHl6ZXIgOiBJQm9hcmRBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUmVhc29uIHsgZ2V0IHsgcmV0dXJuIFwiY29sb3IgYWxsXCI7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzS25vd2xlZGdlRGVwZW5kZW50IHsgZ2V0IHsgcmV0dXJuIGZhbHNlOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsaW5lR3JhcGggPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuTGluZUdyYXBoO1xyXG4gICAgICAgICAgICB2YXIgY2FuQ29sb3IgPSBsaW5lR3JhcGguSXNDaG9vc2FibGUoRW51bWVyYWJsZS5SYW5nZSgwLCBsaW5lR3JhcGguTikuU2VsZWN0PGxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgbG9uZz4pKGUgPT4ga25vd2xlZGdlLkdldEVkZ2VDb2xvckxpc3QoYm9hcmQsIGUpKSkuVG9MaXN0KCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNhbkNvbG9yKVxyXG4gICAgICAgICAgICAgICAga25vd2xlZGdlW2JvYXJkLlRlbXBsYXRlLlZhbHVlXVtib2FyZC5Db2xvckNvdW50XS5BZGRXaW4oYm9hcmQsIFJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2FuQ29sb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgQ29sb3JhYmxlV2l0aG91dEVkZ2UoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIGludCBlZGdlSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29sb3JhYmxlV2l0aG91dEVkZ2Uoa25vd2xlZGdlLCBib2FyZC5TdGFja3MsIGVkZ2VJbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgQ29sb3JhYmxlV2l0aG91dEVkZ2UoS25vd2xlZGdlIGtub3dsZWRnZSwgTGlzdDxsb25nPiBzdGFja3MsIGludCBlZGdlSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGcgPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuTGluZUdyYXBoO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxnLklzQ2hvb3NhYmxlKEVudW1lcmFibGUuUmFuZ2UoMCwgbGcuTikuU2VsZWN0PGxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgbG9uZz4pKGUgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUgPT0gZWRnZUluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ga25vd2xlZGdlLkdldEVkZ2VDb2xvckxpc3Qoc3RhY2tzLCBlKTtcclxuICAgICAgICAgICAgfSkpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQ29tbW9uQ29sb3JBbmFseXplciA6IElCb2FyZEFuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZWFzb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBcImNvbW1vbiBjb2xvclwiOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0tub3dsZWRnZURlcGVuZGVudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvbW1vbkNvbG9yID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8bG9uZyxsb25nPihib2FyZC5TdGFja3MsLTFMLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBsb25nLCBsb25nPikoKHQsIHMpID0+IHQgJiBzKSkgIT0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb21tb25Db2xvcilcclxuICAgICAgICAgICAgICAgIGtub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF0uQWRkV2luKGJvYXJkLCBSZWFzb24pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbkNvbG9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTd2FwQW5hbHl6ZXIgOiBJQm9hcmRBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIGJvb2wgRmluZENsZWFuZXN0V2luIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBib29sIERvU3VwZXJhYnVuZGFudENoZWNrIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBzdHJpbmcgUmVhc29uIHsgZ2V0IHsgcmV0dXJuIFwiZ29vZCBzd2FwXCI7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzS25vd2xlZGdlRGVwZW5kZW50IHsgZ2V0IHsgcmV0dXJuIHRydWU7IH0gfVxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHN0cmluZyBDaGlsZFJlYXNvbiB7IGdldCB7IHJldHVybiBzdHJpbmcuRW1wdHk7IH0gfVxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIGJvb2wgSXNDaGlsZEJvYXJkQmV0dGVyKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBCb2FyZCBjaGlsZEJvYXJkKSB7IHJldHVybiBmYWxzZTsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3dhcEFuYWx5emVyKGJvb2wgZmluZENsZWFuZXN0V2luID0gdHJ1ZSwgYm9vbCBzdXBlcmFidW5kYW50T25seSA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBGaW5kQ2xlYW5lc3RXaW4gPSBmaW5kQ2xlYW5lc3RXaW47XHJcbiAgICAgICAgICAgIERvU3VwZXJhYnVuZGFudENoZWNrID0gc3VwZXJhYnVuZGFudE9ubHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHBvdEtub3dsZWRnZSA9IGtub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF07XHJcbiAgICAgICAgICAgIHZhciBncmFwaEtub3dsZWRnZSA9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBib2FyZEtub3dsZWRnZSA9IHBvdEtub3dsZWRnZVtib2FyZF07XHJcbiAgICAgICAgICAgIGlmIChib2FyZEtub3dsZWRnZS5FeGlzdHMoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHdpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgd2luRGVwdGggPSBNZXRhS25vd2xlZGdlLkluZmluaXR5O1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JQYWlyIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeURlc2NlbmRpbmc8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LGludD4ocG90S25vd2xlZGdlLkNvbG9yUGFpcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBpbnQ+KShwYWlyID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihDaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkVudW1lcmF0ZUV4YWN0bHlPbmVJbnRlcnNlY3RlcnMoYm9hcmQsIHBhaXIpKSAlIDIpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yUGFpcldpbkRlcHRoID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcHMgPSBuZXcgTGlzdDxUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4+KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW1wcm92aW5nU3dhcHMgPSBuZXcgTGlzdDxUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4+KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGltcHJvdmluZ1N3YXBBbHdheXNFeGlzdHMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBicmFuY2ggaW4gQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5FbnVtZXJhdGVCcmFuY2hlcyhib2FyZCwgY29sb3JQYWlyKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4gd2lubmluZ1N3YXAgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPiBpbXByb3ZpbmdTd2FwID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJyYW5jaFdpbkRlcHRoID0gTWV0YUtub3dsZWRnZS5JbmZpbml0eTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHN3YXAgaW4gYnJhbmNoKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkQm9hcmQgPSBib2FyZC5DbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEJvYXJkLkRvTW92ZUNvbWJpbmF0aW9uKHN3YXApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERvU3VwZXJhYnVuZGFudENoZWNrICYmICFncmFwaEtub3dsZWRnZS5HcmFwaC5EZWdyZWVDb25kaXRpb24oY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkS25vd2xlZGdlID0gcG90S25vd2xlZGdlW2NoaWxkQm9hcmRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGRCb2FyZEtub3dsZWRnZS5FeGlzdHMoKSAmJiBjaGlsZEJvYXJkS25vd2xlZGdlLkRlcHRoICsgMSA8IGJyYW5jaFdpbkRlcHRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmFuY2hXaW5EZXB0aCA9IGNoaWxkQm9hcmRLbm93bGVkZ2UuRGVwdGggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXAgPSBuZXcgVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+KGJyYW5jaC5Td2FwQ29tcG9uZW50cywgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPihzd2FwKSwgY2hpbGRCb2FyZEtub3dsZWRnZS5SZWFzb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghRmluZENsZWFuZXN0V2luKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKElzQ2hpbGRCb2FyZEJldHRlcihrbm93bGVkZ2UsIGJvYXJkLCBjaGlsZEJvYXJkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wcm92aW5nU3dhcCA9IG5ldyBUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4oYnJhbmNoLlN3YXBDb21wb25lbnRzLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmU+KHN3YXApLCBDaGlsZFJlYXNvbiArIFwiIGJldHRlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JQYWlyV2luRGVwdGggPSBNYXRoLk1heChjb2xvclBhaXJXaW5EZXB0aCwgYnJhbmNoV2luRGVwdGgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2lubmluZ1N3YXAuRXhpc3RzKCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcHMuQWRkKHdpbm5pbmdTd2FwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1wcm92aW5nU3dhcHMuQWRkKHdpbm5pbmdTd2FwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltcHJvdmluZ1N3YXAuRXhpc3RzKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXByb3ZpbmdTd2Fwcy5BZGQoaW1wcm92aW5nU3dhcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wcm92aW5nU3dhcEFsd2F5c0V4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvclBhaXJXaW5EZXB0aCA8IHdpbkRlcHRoKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luRGVwdGggPSBjb2xvclBhaXJXaW5EZXB0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvdEtub3dsZWRnZS5BZGRXaW4oYm9hcmQsIFJlYXNvbiwgd2luRGVwdGgsIGNvbG9yUGFpciwgd2lubmluZ1N3YXBzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghRmluZENsZWFuZXN0V2luKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW1wcm92aW5nU3dhcEFsd2F5c0V4aXN0cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3RLbm93bGVkZ2UuQWRkSW1wcm92ZW1lbnQoYm9hcmQsIENoaWxkUmVhc29uLCBjb2xvclBhaXJXaW5EZXB0aCwgY29sb3JQYWlyLCBpbXByb3ZpbmdTd2Fwcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB3aW47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEtpZXJzdGVhZEFuYWx5emVyIDogSUJvYXJkQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlYXNvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIFwicnVuIGtpZXJzdGVhZFwiOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0tub3dsZWRnZURlcGVuZGVudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIElzS2llcnN0ZWFkKGtub3dsZWRnZSwgYm9hcmQsIHRydWUsIFJlYXNvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNLaWVyc3RlYWQoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIGJvb2wgZW5mb3JjZURlZ3JlZVJlcXVpcmVtZW50ID0gZmFsc2UsIHN0cmluZyByZWFzb24gPSBcIlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGludD4oRW51bWVyYXRlS2llcnN0ZWFkRWRnZUluZGljZXMoa25vd2xlZGdlLCBib2FyZCwgZW5mb3JjZURlZ3JlZVJlcXVpcmVtZW50LCByZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBFbnVtZXJhdGVLaWVyc3RlYWRFZGdlSW5kaWNlcyhLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZCwgYm9vbCBlbmZvcmNlRGVncmVlUmVxdWlyZW1lbnQgPSBmYWxzZSwgc3RyaW5nIHJlYXNvbiA9IFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaDtcclxuICAgICAgICAgICAgdmFyIGludGVybmFsVmVydGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGludD4oZy5WZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IGcuRGVncmVlKHYpID49IDIpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlZGdlSW5kZXggaW4ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkVkZ2VJbmRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5FZGdlc1tlZGdlSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGludGVybmFsVmVydGljZXMuQ29udGFpbnMoZS5JdGVtMSkgJiYgaW50ZXJuYWxWZXJ0aWNlcy5Db250YWlucyhlLkl0ZW0yKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoSXNLaWVyc3RlYWQoa25vd2xlZGdlLCBib2FyZCwgZWRnZUluZGV4KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdLkFkZFdpbihib2FyZCwgcmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gZWRnZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNLaWVyc3RlYWQoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIGludCBlZGdlSW5kZXgsIGJvb2wgZW5mb3JjZURlZ3JlZVJlcXVpcmVtZW50ID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgb3JkZXJpbmcgaW4ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkNvbm5lY3RlZE9yZGVyaW5ncy5WYWx1ZVtrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuRWRnZXNbZWRnZUluZGV4XV0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwZW51bHRpbWF0ZSA9IG9yZGVyaW5nW29yZGVyaW5nLkNvdW50IC0gMl07XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5mb3JjZURlZ3JlZVJlcXVpcmVtZW50ICYmIGJvYXJkLlN0YWNrc1twZW51bHRpbWF0ZV0uUG9wdWxhdGlvbkNvdW50KCkgPD0ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkdyYXBoLkRlZ3JlZShwZW51bHRpbWF0ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKElzS2llcnN0ZWFkKGtub3dsZWRnZSwgYm9hcmQsIGVkZ2VJbmRleCwgb3JkZXJpbmcpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNLaWVyc3RlYWQoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIGludCBlZGdlSW5kZXgsIExpc3Q8aW50PiBvcmRlcmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnbiA9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnbi5MaW5lR3JhcGguSXNDaG9vc2FibGUoRW51bWVyYWJsZS5SYW5nZSgwLCBnbi5MaW5lR3JhcGguTikuU2VsZWN0PGxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgbG9uZz4pKGUgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUgPT0gZWRnZUluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZWRnZSA9IGduLkVkZ2VzW2VdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGogPSBNYXRoLk1heChvcmRlcmluZy5JbmRleE9mKGVkZ2UuSXRlbTEpLCBvcmRlcmluZy5JbmRleE9mKGVkZ2UuSXRlbTIpKTtcclxuICAgICAgICAgICAgICAgIHZhciBwcmlvclN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8bG9uZz4oYm9hcmQuU3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGludCwgYm9vbD4pKChzdGFjaywgaSkgPT4gb3JkZXJpbmcuSW5kZXhPZihpKSA8IGopKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsb25nIGFsbG93ZWRMaXN0ID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciBsaXN0ID0ga25vd2xlZGdlLkdldEVkZ2VDb2xvckxpc3QoYm9hcmQsIGUpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGFscGhhIGluIGxpc3QuRW51bWVyYXRlQml0cygpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChNZXRhS25vd2xlZGdlLmRfSChhbHBoYSwgcHJpb3JTdGFja3MpICUgMiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxvd2VkTGlzdCA9IGFsbG93ZWRMaXN0LlNldEJpdChhbHBoYSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFsbG93ZWRMaXN0O1xyXG4gICAgICAgICAgICB9KSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBLbm93bGVkZ2VUcmVlIDogVHJlZTxLbm93bGVkZ2VUcmVlPlxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4gU3dhcCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgVHVwbGU8aW50LCBpbnQ+IENvbG9yUGFpciB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBCb2FyZCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOb3RlIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE51bWJlciB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBLbm93bGVkZ2VUcmVlIEFkZENoaWxkKFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPiBzd2FwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gbmV3IEtub3dsZWRnZVRyZWUoKSB7IFN3YXAgPSBzd2FwIH07XHJcbiAgICAgICAgICAgIEFkZENoaWxkKGNoaWxkKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUmVkdWN0aW9uQW5hbHl6ZXIgOiBJQm9hcmRBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUmVhc29uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gXCJyZWR1Y2libGVcIjsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNLbm93bGVkZ2VEZXBlbmRlbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkdyYXBoO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkVkZ2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IE1hdGguTWluKGUuSXRlbTEsIGUuSXRlbTIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSBNYXRoLk1heChlLkl0ZW0xLCBlLkl0ZW0yKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY29tbW9uID0gYm9hcmQuU3RhY2tzW3hdICYgYm9hcmQuU3RhY2tzW3ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGxvbmc+KGJvYXJkLlN0YWNrcyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjIGluIGNvbW1vbi5FbnVtZXJhdGVCaXRzKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhY2tzW3hdID0gYm9hcmQuU3RhY2tzW3hdLkNsZWFyQml0KGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrc1t5XSA9IGJvYXJkLlN0YWNrc1t5XS5DbGVhckJpdChjKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGcuRGVncmVlQ29uZGl0aW9uKHN0YWNrcywgYm9hcmQuUG90LCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoWCA9PiBYLkNvbnRhaW5zKHgpICYmIFguQ29udGFpbnMoeSkgPyAxIDogMCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga25vd2xlZGdlW2JvYXJkLlRlbXBsYXRlLlZhbHVlXVtib2FyZC5Db2xvckNvdW50XS5BZGRXaW4oYm9hcmQsIHN0cmluZy5Gb3JtYXQoXCJjb2xvciB7MH17MX0gd2l0aCB7Mn1cIiwgeCArIDEsIHkgKyAxLCBjKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGU7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBBbGdvcml0aG1zO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTbGltTWluZCA6IElNaW5kXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGJvb2wgU3RvcEFuYWx5c2lzT25CcmVha2VyV2luIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBOZWFybHlDb2xvcmFibGVPbmx5IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBTdXBlcmFidW5kYW50T25seSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBNaW5Qb3QgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWF4UG90IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgQm9hcmQgQnJlYWtlcldvbkJvYXJkIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBUb3RhbFBvc2l0aW9ucyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgS25vd2xlZGdlIEtub3dsZWRnZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgQ29sb3JpbmdBbmFseXplciBDb2xvcmluZ0FuYWx5emVyIHtnZXQ7IHNldDt9XHJcbiAgICAgICAgU2xpbVN3YXBBbmFseXplciBTd2FwQW5hbHl6ZXIgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBCb2FyZD4gQm9hcmRMb29rdXAgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIERpY3Rpb25hcnk8Qm9hcmQsIGludD4gQm9hcmRJRExvb2t1cCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgTGlzdDxpbnQ+IFJlbWFpbmluZ0JvYXJkSURzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBTb3J0ZWRJbnRMaXN0IFdvbkJvYXJkSURzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBpbnQgTmV4dEJvYXJkSUQgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU2xpbU1pbmQoR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN1cGVyYWJ1bmRhbnRPbmx5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIE5lYXJseUNvbG9yYWJsZU9ubHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgTWF4UG90ID0gTWV0YUtub3dsZWRnZS5JbmZpbml0eTtcclxuICAgICAgICAgICAgS25vd2xlZGdlID0gbmV3IEtub3dsZWRnZShnKTtcclxuXHJcbiAgICAgICAgICAgIENvbG9yaW5nQW5hbHl6ZXIgPSBuZXcgQ29sb3JpbmdBbmFseXplcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShUZW1wbGF0ZSB0ZW1wbGF0ZSwgQWN0aW9uPFR1cGxlPHN0cmluZywgaW50Pj4gcHJvZ3Jlc3MgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQm9hcmRMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxpbnQsIEJvYXJkPigpO1xyXG4gICAgICAgICAgICBCb2FyZElETG9va3VwID0gbmV3IERpY3Rpb25hcnk8Qm9hcmQsIGludD4oKTtcclxuICAgICAgICAgICAgV29uQm9hcmRJRHMgPSBuZXcgU29ydGVkSW50TGlzdCgpO1xyXG4gICAgICAgICAgICBTd2FwQW5hbHl6ZXIgPSBuZXcgU2xpbVN3YXBBbmFseXplcihLbm93bGVkZ2UsIEJvYXJkTG9va3VwLCBCb2FyZElETG9va3VwKTtcclxuXHJcbiAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtaW5pbXVtQ29sb3JDb3VudCA9IE1hdGguTWF4KE1pblBvdCwgdGVtcGxhdGUuU2l6ZXMuTWF4KCkpO1xyXG4gICAgICAgICAgICB2YXIgbWF4aW11bUNvbG9yQ291bnQgPSBNYXRoLk1pbihNYXhQb3QsIHRlbXBsYXRlLlNpemVzLlN1bSgpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3VuZEF0TGVhc3RPbmVCb2FyZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JDb3VudCBpbiBNZXRhS25vd2xlZGdlLkludGVydmFsKG1pbmltdW1Db2xvckNvdW50LCBtYXhpbXVtQ29sb3JDb3VudCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEdlbmVyYXRlQWxsQm9hcmRzKHRlbXBsYXRlLCBjb2xvckNvdW50LCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLlR1cGxlPHN0cmluZywgaW50Pj4pcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kQXRMZWFzdE9uZUJvYXJkICYmIEJvYXJkTG9va3VwLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgVG90YWxQb3NpdGlvbnMgPSBCb2FyZExvb2t1cC5Db3VudDtcclxuICAgICAgICAgICAgICAgIGZvdW5kQXRMZWFzdE9uZUJvYXJkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIFJlbWFpbmluZ0JvYXJkSURzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihCb2FyZExvb2t1cC5LZXlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYnJlYWtlcldpbiA9ICFBbmFseXplKChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8c3RyaW5nLCBpbnQ+Pilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnJlYWtlcldpbiAmJiBTdG9wQW5hbHlzaXNPbkJyZWFrZXJXaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIEtub3dsZWRnZVt0ZW1wbGF0ZV0uUHJvbW90ZShjb2xvckNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oS25vd2xlZGdlW3RlbXBsYXRlXS5Mb3N0Qm9hcmRzKSA8PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBBbmFseXplKEFjdGlvbjxUdXBsZTxzdHJpbmcsIGludD4+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB3aW5MZW5ndGggPSAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRvdGFsQm9hcmRzID0gUmVtYWluaW5nQm9hcmRJRHMuQ291bnQ7XHJcbiAgICAgICAgICAgIHZhciBsYXN0UCA9IC0xO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IFJlbWFpbmluZ0JvYXJkSURzLkNvdW50IC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBpZCA9IFJlbWFpbmluZ0JvYXJkSURzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBiID0gQm9hcmRMb29rdXBbaWRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKENvbG9yaW5nQW5hbHl6ZXIuQW5hbHl6ZShLbm93bGVkZ2UsIGIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFJlbWFpbmluZ0JvYXJkSURzLlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIFdvbkJvYXJkSURzLkFkZChpZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSAxMDAgKiAodG90YWxCb2FyZHMgLSBSZW1haW5pbmdCb2FyZElEcy5Db3VudCkgLyB0b3RhbEJvYXJkcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAgPiBsYXN0UClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFR1cGxlPHN0cmluZywgaW50PihcIkZpbmRpbmcgYWxsIGNvbG9yYWJsZSBwb3NpdGlvbnMuLi5cIiwgcCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFAgPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoUmVtYWluaW5nQm9hcmRJRHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aW5MZW5ndGgrKztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBSZW1haW5pbmdCb2FyZElEcy5Db3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gUmVtYWluaW5nQm9hcmRJRHMuQ291bnQgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBSZW1haW5pbmdCb2FyZElEc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBCb2FyZExvb2t1cFtpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFN3YXBBbmFseXplci5BbmFseXplKGlkLCBXb25Cb2FyZElEcykpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZW1haW5pbmdCb2FyZElEcy5SZW1vdmVBdChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgV29uQm9hcmRJRHMuQWRkKGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IDEwMCAqICh0b3RhbEJvYXJkcyAtIFJlbWFpbmluZ0JvYXJkSURzLkNvdW50KSAvIHRvdGFsQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAgPiBsYXN0UClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVHVwbGU8c3RyaW5nLCBpbnQ+KHN0cmluZy5Gb3JtYXQoXCJGaW5kaW5nIGFsbCB7MH0gbW92ZSB3aW5zLi4uXCIsIHdpbkxlbmd0aCksIHApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UCA9IHA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFJlbWFpbmluZ0JvYXJkSURzLkNvdW50ID09IGNvdW50KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpZCBpbiBSZW1haW5pbmdCb2FyZElEcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gQm9hcmRMb29rdXBbaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBLbm93bGVkZ2VbYi5UZW1wbGF0ZS5WYWx1ZV1bYi5Db2xvckNvdW50XS5BZGRMb3NzKGIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBLbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuR3JhcGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZWFybHlDb2xvcmFibGUgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIEtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5MaW5lR3JhcGguTikuQWxsKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGUgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8aW50PihSZW1haW5pbmdCb2FyZElEcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShpZCA9PiBDb2xvcmluZ0FuYWx5emVyLkNvbG9yYWJsZVdpdGhvdXRFZGdlKEtub3dsZWRnZSwgQm9hcmRMb29rdXBbaWRdLCBlKSkpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5lYXJseUNvbG9yYWJsZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8aW50PihSZW1haW5pbmdCb2FyZElEcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShpZCA9PiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IEJvYXJkTG9va3VwW2lkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZy5EZWdyZWVDb25kaXRpb24oYikgJiYgQ29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2UsIGIsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KShpZCA9PiBCb2FyZExvb2t1cFtpZF0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuRmlyc3RPckRlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChCcmVha2VyV29uQm9hcmQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IEJvYXJkTG9va3VwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihSZW1haW5pbmdCb2FyZElEcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShpZCA9PiBDb2xvcmluZ0FuYWx5emVyLkNvbG9yYWJsZVdpdGhvdXRFZGdlKEtub3dsZWRnZSwgQm9hcmRMb29rdXBbaWRdLCAwKSkpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEdlbmVyYXRlQWxsQm9hcmRzKFRlbXBsYXRlIHRlbXBsYXRlLCBpbnQgY29sb3JDb3VudCwgQWN0aW9uPFR1cGxlPHN0cmluZywgaW50Pj4gcHJvZ3Jlc3MgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJvYXJkcyA9IG5ldyBIYXNoU2V0PEJvYXJkPigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCB0ZW1wbGF0ZS5TaXplcy5Db3VudCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBwb3RTZXQgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIGNvbG9yQ291bnQpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgcG90ID0gcG90U2V0LlRvSW50NjQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmaXggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8aW50LGludD4odmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IE1hdGguQWJzKHRlbXBsYXRlLlNpemVzW3ZdIC0gY29sb3JDb3VudCAvIDIpKSkuRmlyc3QoKTtcclxuICAgICAgICAgICAgdmFyIGxhc3RQID0gLTE7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gMDtcclxuICAgICAgICAgICAgdmFyIHRvdGFsID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8aW50LGxvbmc+KHZlcnRpY2VzLDFMLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBpbnQsIGxvbmc+KSgoeCwgdikgPT4gXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPT0gZml4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHggKiBMaXN0VXRpbGl0eS5CaW5vbWlhbENvZWZmaWNpZW50KHBvdFNldC5Db3VudCwgdGVtcGxhdGUuU2l6ZXNbdl0pO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGFzc2lnbm1lbnRTZXRzIGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KHZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KSh2ID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2ID09IGZpeClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxpbnQ+KHBvdFNldCx0ZW1wbGF0ZS5TaXplc1t2XSkuVG9MaXN0KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KHBvdFNldCwgdGVtcGxhdGUuU2l6ZXNbdl0pO1xyXG4gICAgICAgICAgICB9KSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2V0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihhc3NpZ25tZW50U2V0cyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG90YWxDb2xvcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihzZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KShzZXQgPT4gc2V0KSkuRGlzdGluY3QoKS5Db3VudCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRvdGFsQ29sb3JzIDwgY29sb3JDb3VudClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sbG9uZz4oc2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgbG9uZz4pKGxpc3QgPT4gbGlzdC5Ub0ludDY0KCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoU3VwZXJhYnVuZGFudE9ubHkgJiYgIUtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaC5EZWdyZWVDb25kaXRpb24oc3RhY2tzLCBwb3QpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBib2FyZCA9IG5ldyBCb2FyZChzdGFja3MsIHBvdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYm9hcmRzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgYm9hcmRzLkFkZChib2FyZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJvYXJkcy5Db3VudCA+IGNvdW50KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEJvYXJkTG9va3VwW05leHRCb2FyZElEXSA9IGJvYXJkO1xyXG4gICAgICAgICAgICAgICAgICAgIEJvYXJkSURMb29rdXBbYm9hcmRdID0gTmV4dEJvYXJkSUQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE5leHRCb2FyZElEKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSAoaW50KSgxMDAgKiBjdXJyZW50IC8gdG90YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwID4gbGFzdFApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVHVwbGU8c3RyaW5nLCBpbnQ+KFwiRmluZGluZyBhbGwgcG9zaXRpb25zLi4uXCIsIHApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFAgPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHYW1lVHJlZSA6IFRyZWU8R2FtZVRyZWU+XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbUJvYXJkIEJvYXJkIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0NvbG9yYWJsZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNTdXBlcmFidW5kYW50IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0ZpeGVyV2luIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IEdhbWVUcmVlSW5kZXggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgU2FtZUFzSW5kZXggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBCcmVha2VyQ2hvaWNlSW5mbyBJbmZvIHtnZXQ7IHNldDt9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZENoaWxkKEdhbWVUcmVlIHRyZWUsIEJyZWFrZXJDaG9pY2VJbmZvIGluZm8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0cmVlLkluZm8gPSBpbmZvO1xyXG4gICAgICAgICAgICBBZGRDaGlsZCh0cmVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGdnID0gb2JqIGFzIEdhbWVUcmVlO1xyXG4gICAgICAgICAgICBpZiAoZ2cgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnZy5Cb2FyZC5FcXVhbHMoQm9hcmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQm9hcmQuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHYW1lVHJlZUluZm8gOiBMaXN0PEJyZWFrZXJDaG9pY2VJbmZvPlxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZChMaXN0PHVsb25nPiBicmVha2VyQ2hvaWNlLCBpbnQgaSwgaW50IGosIHVsb25nIGZpeGVyUmVzcG9uc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBZGQobmV3IEJyZWFrZXJDaG9pY2VJbmZvKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUGFydGl0aW9uID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGJyZWFrZXJDaG9pY2UsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8dWxvbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoY2hvaWNlID0+IGNob2ljZS5Ub1NldCgpKSkuVG9MaXN0KCksXHJcbiAgICAgICAgICAgICAgICBBbHBoYSA9IGksXHJcbiAgICAgICAgICAgICAgICBCZXRhID0gaixcclxuICAgICAgICAgICAgICAgIFJlc3BvbnNlID0gZml4ZXJSZXNwb25zZSxcclxuICAgICAgICAgICAgICAgIFN3YXBWZXJ0aWNlcyA9IGZpeGVyUmVzcG9uc2UuVG9TZXQoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIEJyZWFrZXJDaG9pY2VJbmZvXHJcbiAgICB7XHJcbiAgICAgICAgIHB1YmxpYyBpbnQgQWxwaGEgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICBwdWJsaWMgaW50IEJldGEgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IFBhcnRpdGlvbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgIHB1YmxpYyB1bG9uZyBSZXNwb25zZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgIHB1YmxpYyBMaXN0PGludD4gU3dhcFZlcnRpY2VzIHsgZ2V0OyBzZXQ7IH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdyZWVkeVdpbkZpbHRlciA6IElXaW5GaWx0ZXJcclxuICAgIHtcclxuICAgICAgICBTdXBlclNsaW1Td2FwQW5hbHl6ZXIgX3N3YXBBbmFseXplcjtcclxuXHJcbiAgICAgICAgcHVibGljIEdyZWVkeVdpbkZpbHRlcihTdXBlclNsaW1Td2FwQW5hbHl6ZXIgc3dhcEFuYWx5emVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3N3YXBBbmFseXplciA9IHN3YXBBbmFseXplcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBJRW51bWVyYWJsZTxpbnQ+IEZpbHRlcihMaXN0PFN1cGVyU2xpbUJvYXJkPiBSLCBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPiBXKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuSW5kaWNlc1doZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KFIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gX3N3YXBBbmFseXplci5BbmFseXplKGIsIFcpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mc1xyXG57XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgUGVybXV0YXRpb25Bd2FyZVByb29mQnVpbGRlciA6IFByb29mQnVpbGRlclxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBMaXN0PFR1cGxlPFBlcm11dGF0aW9uLCBTdXBlclNsaW1Cb2FyZD4+PiBfcGVybXV0YXRpb25MaW5rZWQ7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHB1YmxpYyBQZXJtdXRhdGlvbkF3YXJlUHJvb2ZCdWlsZGVyKFN1cGVyU2xpbU1pbmQgbWluZCwgYm9vbCB1c2VQZXJtdXRhdGlvbnMgPSBmYWxzZSlcclxuICAgICAgICAgICAgOiBiYXNlKG1pbmQsIHVzZVBlcm11dGF0aW9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgRXh0cmFjdENhc2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENhc2VzID0gbmV3IExpc3Q8UHJvb2ZDYXNlPigpO1xyXG5cclxuICAgICAgICAgICAgX3Blcm11dGF0aW9uTGlua2VkID0gbmV3IERpY3Rpb25hcnk8U3VwZXJTbGltQm9hcmQsIExpc3Q8VHVwbGU8UGVybXV0YXRpb24sIFN1cGVyU2xpbUJvYXJkPj4+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kaWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgTWluZC5Db2xvcmFibGVCb2FyZHNbMF0uU3RhY2tzLlZhbHVlLkxlbmd0aCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBwZXJtdXRhdGlvbnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbj4oUGVybXV0YXRpb24uRW51bWVyYXRlQWxsKGluZGljZXMuQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjYXNlTnVtYmVyID0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvcmFibGVDYXNlID0gbmV3IFByb29mQ2FzZShNaW5kLCAwLCBNaW5kLkNvbG9yYWJsZUJvYXJkcyk7XHJcbiAgICAgICAgICAgIENhc2VzLkFkZChjb2xvcmFibGVDYXNlKTtcclxuICAgICAgICAgICAgY2FzZU51bWJlcisrO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlbWFpbmluZ0JvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KE1pbmQuTm9uQ29sb3JhYmxlQm9hcmRzLE1pbmQuQnJlYWtlcldvbkJvYXJkcykuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciB3b25Cb2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihNaW5kLkNvbG9yYWJsZUJvYXJkcyk7XHJcbiAgICAgICAgICAgIHdoaWxlIChyZW1haW5pbmdCb2FyZHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvb2ZDYXNlID0gbmV3IFByb29mQ2FzZShNaW5kLCBjYXNlTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgIENhc2VzLkFkZChwcm9vZkNhc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhZGRlZFJvb3RCb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgICAgIHZhciBhZGRlZEJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJvYXJkIGluIHJlbWFpbmluZ0JvYXJkcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkZWRCb2FyZHMuQ29udGFpbnMoYm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPih0cmVlSW5mbywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPikoYmMgPT4gbmV3IFN1cGVyU2xpbUJvYXJkKGJvYXJkLl90cmFjZSwgYmMuQWxwaGEsIGJjLkJldGEsIGJjLlJlc3BvbnNlLCBib2FyZC5fc3RhY2tDb3VudCkpKS5EaXN0aW5jdCgpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KGNoaWxkQm9hcmRzLHdvbkJvYXJkcykpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRlZFJvb3RCb2FyZHMuQWRkKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRCb2FyZHMuQWRkKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Blcm11dGF0aW9uTGlua2VkW2JvYXJkXSA9IG5ldyBMaXN0PFR1cGxlPFBlcm11dGF0aW9uLCBTdXBlclNsaW1Cb2FyZD4+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVXNlUGVybXV0YXRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcCBpbiBwZXJtdXRhdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBiID0gYm9hcmQuUGVybXV0ZShwLCBpbmRpY2VzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod29uQm9hcmRzLkNvbnRhaW5zKHBiKSB8fCBhZGRlZEJvYXJkcy5Db250YWlucyhwYikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgY2IgaW4gY2hpbGRCb2FyZHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdvbkJvYXJkcy5Db250YWlucyhjYi5QZXJtdXRlKHAsIGluZGljZXMpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wZXJtdXRhdGlvbkxpbmtlZFtib2FyZF0uQWRkKG5ldyBUdXBsZTxQZXJtdXRhdGlvbiwgU3VwZXJTbGltQm9hcmQ+KHAsIHBiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkQm9hcmRzLkFkZChwYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBib2FyZCBpbiBhZGRlZFJvb3RCb2FyZHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvb2ZDYXNlLkFkZEJvYXJkKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYm9hcmQgaW4gYWRkZWRCb2FyZHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29uQm9hcmRzLkFkZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nQm9hcmRzLlJlbW92ZShib2FyZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZU51bWJlcisrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoTWluZC5CcmVha2VyV29uQm9hcmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGdyb3VwIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuR3JvdXBCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGJvb2w+KE1pbmQuQnJlYWtlcldvbkJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBib29sPikoYiA9PiBNaW5kLklzU3VwZXJhYnVuZGFudChiKSkpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb3N0Q2FzZSA9IG5ldyBQcm9vZkNhc2UoTWluZCwgY2FzZU51bWJlciwgZ3JvdXAuVG9MaXN0KCkpIHsgQnJlYWtlcldpbiA9IHRydWUsIFN1cGVyYWJ1bmRhbnQgPSBncm91cC5LZXkgfTtcclxuICAgICAgICAgICAgICAgICAgICBDYXNlcy5BZGQobG9zdENhc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgaW50IEdldEhhbmRsZWRDYXNlTnVtYmVyKFN1cGVyU2xpbUJvYXJkIGIsIEJyZWFrZXJDaG9pY2VJbmZvIGJjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkQm9hcmQgPSBuZXcgU3VwZXJTbGltQm9hcmQoYi5fdHJhY2UsIGJjLkFscGhhLCBiYy5CZXRhLCBiYy5SZXNwb25zZSwgYi5fc3RhY2tDb3VudCk7XHJcbiAgICAgICAgICAgIGlmIChDYXNlc1swXS5Cb2FyZHMuQ29udGFpbnMoY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuUHJvb2ZDYXNlPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNraXA8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuUHJvb2ZDYXNlPihDYXNlcywxKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5Qcm9vZkNhc2UsIGJvb2w+KShjYyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihjYy5Cb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPj4pKGJiID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVW5pb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4obmV3W10geyBiYiB9LFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihfcGVybXV0YXRpb25MaW5rZWRbYmJdLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4pKHR1cCA9PiB0dXAuSXRlbTIpKSkpKS5Db250YWlucyhjaGlsZEJvYXJkKSkpKSArIDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU21hcnRGaWx0ZXIgOiBJV2luRmlsdGVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIElFbnVtZXJhYmxlPGludD4gRmlsdGVyKExpc3Q8U3VwZXJTbGltQm9hcmQ+IFIsIEhhc2hTZXQ8U3VwZXJTbGltQm9hcmQ+IFcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPENvbG9yUGFpck91dGNvbWU+IEFuYWx5emUoU3VwZXJTbGltQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY29sb3JQYWlycyA9IG5ldyBMaXN0PFR1cGxlPGludCwgaW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBib2FyZC5fbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBib2FyZC5fbGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JQYWlycy5BZGQobmV3IFR1cGxlPGludCwgaW50PihpLCBqKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PixpbnQ+KGNvbG9yUGFpcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBpbnQ+KShjcCA9PiAoYm9hcmQuX3RyYWNlW2NwLkl0ZW0xXSBeIGJvYXJkLl90cmFjZVtjcC5JdGVtMl0pLlBvcHVsYXRpb25Db3VudCgpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQ29sb3JQYWlyT3V0Y29tZT4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkNvbG9yUGFpck91dGNvbWU+KShjcCA9PiBuZXcgQ29sb3JQYWlyT3V0Y29tZSgpIHsgQ29sb3JzID0gY3AsIEZpeGVyT3V0Y29tZXMgPSBBbmFseXplQ29sb3JQYWlyKGNwLCBib2FyZCkgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8Rml4ZXJPdXRjb21lPiBBbmFseXplQ29sb3JQYWlyKFR1cGxlPGludCwgaW50PiBjb2xvcnMsIFN1cGVyU2xpbUJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSBjb2xvcnMuSXRlbTE7XHJcbiAgICAgICAgICAgIHZhciBqID0gY29sb3JzLkl0ZW0yO1xyXG5cclxuICAgICAgICAgICAgdmFyIHggPSBib2FyZC5fdHJhY2VbaV07XHJcbiAgICAgICAgICAgIHZhciB5ID0gYm9hcmQuX3RyYWNlW2pdO1xyXG4gICAgICAgICAgICB2YXIgc3dhcHBhYmxlID0geCBeIHk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYnJlYWtlckNob2ljZSBpbiBHZXRCcmVha2VyQ2hvaWNlcyhzd2FwcGFibGUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBHZXRGaXhlclJlc3BvbnNlcyhicmVha2VyQ2hvaWNlKTtcclxuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDEsIF9maXhlclJlc3BvbnNlQ291bnQgLSAxKS5TZWxlY3Q8dWxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgdWxvbmc+KShrID0+IF9maXhlclJlc3BvbnNlc1trXSkpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPHVsb25nLCBib29sPikoZnIgPT4gZnIuUG9wdWxhdGlvbkNvdW50KCkgPD0gMSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgRml4ZXJPdXRjb21lKCkgeyBCcmVha2VyQ2hvaWNlID0gYnJlYWtlckNob2ljZSwgRXhpdHMgPSByZXNwb25zZXMuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPHVsb25nLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPikocmVzcG9uc2UgPT4gbmV3IFN1cGVyU2xpbUJvYXJkKGJvYXJkLl90cmFjZSwgaSwgaiwgcmVzcG9uc2UsIGJvYXJkLl9zdGFja0NvdW50KSkpLlRvTGlzdCgpIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gZ3V0c1xyXG4gICAgICAgIHVsb25nW10gX2ZpeGVyUmVzcG9uc2VzID0gbmV3IHVsb25nWzgxOTJdO1xyXG4gICAgICAgIGludCBfZml4ZXJSZXNwb25zZUNvdW50O1xyXG4gICAgICAgIERpY3Rpb25hcnk8dWxvbmcsIExpc3Q8TGlzdDx1bG9uZz4+PiBfYnJlYWtlckNob2ljZXNDYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PHVsb25nLCBMaXN0PExpc3Q8dWxvbmc+Pj4oKTtcclxuICAgICAgICB2b2lkIEdldEZpeGVyUmVzcG9uc2VzKExpc3Q8dWxvbmc+IHBvc3NpYmxlTW92ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZml4ZXJSZXNwb25zZUNvdW50ID0gMSA8PCBwb3NzaWJsZU1vdmVzLkNvdW50O1xyXG4gICAgICAgICAgICB2YXIgdGFibGVMZW5ndGggPSBfZml4ZXJSZXNwb25zZXMuTGVuZ3RoO1xyXG4gICAgICAgICAgICB3aGlsZSAodGFibGVMZW5ndGggPD0gX2ZpeGVyUmVzcG9uc2VDb3VudClcclxuICAgICAgICAgICAgICAgIHRhYmxlTGVuZ3RoICo9IDI7XHJcbiAgICAgICAgICAgIGlmICh0YWJsZUxlbmd0aCA+IF9maXhlclJlc3BvbnNlcy5MZW5ndGgpXHJcbiAgICAgICAgICAgICAgICBfZml4ZXJSZXNwb25zZXMgPSBuZXcgdWxvbmdbdGFibGVMZW5ndGhdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHN1YnNldCA9IDE7XHJcbiAgICAgICAgICAgIHdoaWxlIChzdWJzZXQgPCBfZml4ZXJSZXNwb25zZUNvdW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSAwVUw7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IHN1YnNldDtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlIHw9IHBvc3NpYmxlTW92ZXNbSW50MzJVc2FnZS5HZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBfZml4ZXJSZXNwb25zZXNbc3Vic2V0XSA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgc3Vic2V0Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8TGlzdDx1bG9uZz4+IEdldEJyZWFrZXJDaG9pY2VzKHVsb25nIHN3YXBwYWJsZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8TGlzdDx1bG9uZz4+IGNob2ljZXM7XHJcbiAgICAgICAgICAgIGlmICghX2JyZWFrZXJDaG9pY2VzQ2FjaGUuVHJ5R2V0VmFsdWUoc3dhcHBhYmxlLCBvdXQgY2hvaWNlcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiaXRzID0gc3dhcHBhYmxlLkdldEJpdHMoKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0aXRpb25zID0gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5HZXRQYXJ0aXRpb25zKGJpdHMuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgY2hvaWNlcyA9IG5ldyBMaXN0PExpc3Q8dWxvbmc+PihwYXJ0aXRpb25zLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydGl0aW9uIGluIHBhcnRpdGlvbnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNob2ljZSA9IG5ldyBMaXN0PHVsb25nPihwYXJ0aXRpb24uQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNob2ljZXMuQWRkKGNob2ljZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0IGluIHBhcnRpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gMFVMO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBwYXJ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCB8PSBiaXRzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlLkFkZCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX2JyZWFrZXJDaG9pY2VzQ2FjaGVbc3dhcHBhYmxlXSA9IGNob2ljZXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaG9pY2VzO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3VwZXJTbGltTWluZCA6IElNaW5kXHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxTdXBlclNsaW1Cb2FyZD4gX3JlbWFpbmluZ0JvYXJkcztcclxuICAgICAgICBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPiBfd29uQm9hcmRzO1xyXG4gICAgICAgIFN1cGVyU2xpbVN3YXBBbmFseXplciBfc3dhcEFuYWx5emVyO1xyXG4gICAgICAgIFN1cGVyU2xpbUNvbG9yaW5nQW5hbHl6ZXIgX2NvbG9yaW5nQW5hbHl6ZXI7XHJcbiAgICAgICAgR3JhcGggX2dyYXBoO1xyXG4gICAgICAgIEdyYXBoIF9saW5lR3JhcGg7XHJcbiAgICAgICAgcHVibGljIExpc3Q8VHVwbGU8aW50LCBpbnQ+PiBfZWRnZXM7XHJcbiAgICAgICAgaW50IF90b3RhbFBvc2l0aW9ucztcclxuXHJcbiAgICAgICAgcHVibGljIGludCBNaW5Qb3QgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWF4UG90IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBIYXNOb25TdXBlcmFidW5kYW50Qm9hcmRUaGF0SXNOZWFybHlDb2xvcmFibGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBUb3RhbFBvc2l0aW9ucyB7IGdldCB7IHJldHVybiBfdG90YWxQb3NpdGlvbnM7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1Cb2FyZCBCcmVha2VyV29uQm9hcmQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBCb2FyZENvdW50cyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IEJvYXJkQ291bnRzTGlzdCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBPbmx5Q29uc2lkZXJOZWFybHlDb2xvcmFibGVCb2FyZHMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEV4Y2x1ZGVOb25OZWFybHlDb2xvcmFibGVOb25TdXBlcmFidW5kYW50Qm9hcmRzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE1pc3NpbmdFZGdlSW5kZXggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIFN1cGVyYWJ1bmRhbnRPbmx5IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBUaGlua0hhcmRlciB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgUGVyZm9ybUNvbXBsZXRlQW5hbHlzaXMgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltQ29sb3JpbmdBbmFseXplciBDb2xvcmluZ0FuYWx5emVyIHsgZ2V0IHsgcmV0dXJuIF9jb2xvcmluZ0FuYWx5emVyOyB9IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxTdXBlclNsaW1Cb2FyZD4gTm9uQ29sb3JhYmxlQm9hcmRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFN1cGVyU2xpbUJvYXJkPiBDb2xvcmFibGVCb2FyZHMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8U3VwZXJTbGltQm9hcmQ+IEJyZWFrZXJXb25Cb2FyZHMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIEhhc2hTZXQ8U3VwZXJTbGltQm9hcmQ+IEZpeGVyV29uQm9hcmRzIHsgZ2V0IHsgcmV0dXJuIF93b25Cb2FyZHM7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBEaWN0aW9uYXJ5PGludCwgTGlzdDxTdXBlclNsaW1Cb2FyZD4+IEJvYXJkc09mRGVwdGggeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBFeHRyYVBzaSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgSVdpbkZpbHRlciBXaW5GaWx0ZXIgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltTWluZChHcmFwaCBnLCBib29sIHByb29mRmluZGluZ01vZGUgPSBmYWxzZSwgYm9vbCB3ZWFrbHlGaXhhYmxlID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZ3JhcGggPSBnO1xyXG4gICAgICAgICAgICBCdWlsZExpbmVHcmFwaCgpO1xyXG5cclxuICAgICAgICAgICAgX2NvbG9yaW5nQW5hbHl6ZXIgPSBuZXcgU3VwZXJTbGltQ29sb3JpbmdBbmFseXplcihfbGluZUdyYXBoLCBHZXRFZGdlQ29sb3JMaXN0KTtcclxuICAgICAgICAgICAgX3N3YXBBbmFseXplciA9IG5ldyBTdXBlclNsaW1Td2FwQW5hbHl6ZXIoZy5OLCBwcm9vZkZpbmRpbmdNb2RlLCBwcm9vZkZpbmRpbmdNb2RlIHx8IHdlYWtseUZpeGFibGUpO1xyXG4gICAgICAgICAgICBfd29uQm9hcmRzID0gbmV3IEhhc2hTZXQ8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgIF9yZW1haW5pbmdCb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuXHJcbiAgICAgICAgICAgIE1pc3NpbmdFZGdlSW5kZXggPSAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoVGVtcGxhdGUgdGVtcGxhdGUsIEFjdGlvbjxUdXBsZTxzdHJpbmcsIGludD4+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF93b25Cb2FyZHMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgX3JlbWFpbmluZ0JvYXJkcy5DbGVhcigpO1xyXG4gICAgICAgICAgICBCb2FyZENvdW50c0xpc3QgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IG51bGw7XHJcbiAgICAgICAgICAgIE5vbkNvbG9yYWJsZUJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgICAgICBDb2xvcmFibGVCb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFdpbkZpbHRlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgV2luRmlsdGVyID0gbmV3IEdyZWVkeVdpbkZpbHRlcihfc3dhcEFuYWx5emVyKTtcclxuXHJcbiAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtaW5pbXVtQ29sb3JDb3VudCA9IE1hdGguTWF4KE1pblBvdCwgdGVtcGxhdGUuU2l6ZXMuTWF4KCkpO1xyXG4gICAgICAgICAgICB2YXIgbWF4aW11bUNvbG9yQ291bnQgPSBNYXRoLk1pbihNYXhQb3QsIHRlbXBsYXRlLlNpemVzLlN1bSgpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3VuZEF0TGVhc3RPbmVCb2FyZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgZml4ZXJXaW4gPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3IgKGludCBjb2xvckNvdW50ID0gbWluaW11bUNvbG9yQ291bnQ7IGNvbG9yQ291bnQgPD0gbWF4aW11bUNvbG9yQ291bnQ7IGNvbG9yQ291bnQrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgR2VuZXJhdGVBbGxCb2FyZHModGVtcGxhdGUsIGNvbG9yQ291bnQsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8c3RyaW5nLCBpbnQ+Pilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoT25seUNvbnNpZGVyTmVhcmx5Q29sb3JhYmxlQm9hcmRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChNaXNzaW5nRWRnZUluZGV4ID49IDApXHJcbkFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KCAgICAgICAgICAgICAgICAgICAgICAgIF9yZW1haW5pbmdCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gIU5lYXJseUNvbG9yYWJsZUZvckVkZ2UoYiwgTWlzc2luZ0VkZ2VJbmRleCkpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiggICAgICAgICAgICAgICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShiID0+ICFOZWFybHlDb2xvcmFibGVGb3JTb21lRWRnZShiKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4pKCh4KSA9PiB7IH0pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRBdExlYXN0T25lQm9hcmQgJiYgX3JlbWFpbmluZ0JvYXJkcy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIF90b3RhbFBvc2l0aW9ucyA9IF9yZW1haW5pbmdCb2FyZHMuQ291bnQgKyBfd29uQm9hcmRzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgZm91bmRBdExlYXN0T25lQm9hcmQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZpeGVyV2luICY9IEFuYWx5emUoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5UdXBsZTxzdHJpbmcsIGludD4+KXByb2dyZXNzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZpeGVyV2luO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBBbmFseXplKEFjdGlvbjxUdXBsZTxzdHJpbmcsIGludD4+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB3aW5MZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB2YXIgdG90YWxCb2FyZHMgPSBfcmVtYWluaW5nQm9hcmRzLkNvdW50O1xyXG4gICAgICAgICAgICB2YXIgbGFzdFAgPSAtMTtcclxuXHJcbiAgICAgICAgICAgIEJvYXJkc09mRGVwdGggPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8U3VwZXJTbGltQm9hcmQ+PigpO1xyXG4gICAgICAgICAgICBCb2FyZENvdW50cyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgQm9hcmRDb3VudHNMaXN0LkFkZChCb2FyZENvdW50cyk7XHJcbiAgICAgICAgICAgIEJvYXJkQ291bnRzLkFkZChfcmVtYWluaW5nQm9hcmRzLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBfcmVtYWluaW5nQm9hcmRzLkNvdW50IC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gX3JlbWFpbmluZ0JvYXJkc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChfY29sb3JpbmdBbmFseXplci5BbmFseXplKGIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9yZW1haW5pbmdCb2FyZHMuUmVtb3ZlQXQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dvbkJvYXJkcy5BZGQoYik7XHJcbiAgICAgICAgICAgICAgICAgICAgQ29sb3JhYmxlQm9hcmRzLkFkZChiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IDEwMCAqICh0b3RhbEJvYXJkcyAtIF9yZW1haW5pbmdCb2FyZHMuQ291bnQpIC8gdG90YWxCb2FyZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAgPiBsYXN0UClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUdXBsZTxzdHJpbmcsIGludD4oXCJGaW5kaW5nIGFsbCBjb2xvcmFibGUgcG9zaXRpb25zLi4uXCIsIHApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFAgPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQm9hcmRzT2ZEZXB0aFt3aW5MZW5ndGhdID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oX3dvbkJvYXJkcyk7XHJcbiAgICAgICAgICAgIEJvYXJkQ291bnRzLkFkZChfcmVtYWluaW5nQm9hcmRzLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBub25TdXBlcmFidW5kYW50Qm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IF9yZW1haW5pbmdCb2FyZHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIUlzU3VwZXJhYnVuZGFudChiKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT25seUNvbnNpZGVyTmVhcmx5Q29sb3JhYmxlQm9hcmRzICYmIE1pc3NpbmdFZGdlSW5kZXggPj0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEhhc05vblN1cGVyYWJ1bmRhbnRCb2FyZFRoYXRJc05lYXJseUNvbG9yYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IGI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVBlcmZvcm1Db21wbGV0ZUFuYWx5c2lzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3JlbWFpbmluZ0JvYXJkcy5SZW1vdmVBdChpKTtcclxuICAgICAgICAgICAgICAgICAgICBub25TdXBlcmFidW5kYW50Qm9hcmRzLkFkZChiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IDEwMCAqICh0b3RhbEJvYXJkcyAtIF9yZW1haW5pbmdCb2FyZHMuQ291bnQpIC8gdG90YWxCb2FyZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAgPiBsYXN0UClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUdXBsZTxzdHJpbmcsIGludD4oXCJGaW5kaW5nIGFsbCBub24tc3VwZXJhYnVuZGFudCBwb3NpdGlvbnMuLi5cIiwgcCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UCA9IHA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobm9uU3VwZXJhYnVuZGFudEJvYXJkcy5Db3VudCA+IDAgJiYgIVN1cGVyYWJ1bmRhbnRPbmx5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIU9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcyAmJiAhRXhjbHVkZU5vbk5lYXJseUNvbG9yYWJsZU5vblN1cGVyYWJ1bmRhbnRCb2FyZHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBub25TdXBlcmFidW5kYW50Qm9hcmRzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZHMuQWRkUmFuZ2Uobm9uU3VwZXJhYnVuZGFudEJvYXJkcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghUGVyZm9ybUNvbXBsZXRlQW5hbHlzaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKEV4aXN0c05lYXJseUNvbG9yYWJsZUJvYXJkRm9yRWFjaEVkZ2Uobm9uU3VwZXJhYnVuZGFudEJvYXJkcykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBIYXNOb25TdXBlcmFidW5kYW50Qm9hcmRUaGF0SXNOZWFybHlDb2xvcmFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IG5vblN1cGVyYWJ1bmRhbnRCb2FyZHNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkcy5BZGRSYW5nZShub25TdXBlcmFidW5kYW50Qm9hcmRzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVBlcmZvcm1Db21wbGV0ZUFuYWx5c2lzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEJvYXJkQ291bnRzLkFkZChfcmVtYWluaW5nQm9hcmRzLkNvdW50KTtcclxuICAgICAgICAgICAgTm9uQ29sb3JhYmxlQm9hcmRzLkFkZFJhbmdlKF9yZW1haW5pbmdCb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKF9yZW1haW5pbmdCb2FyZHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBfcmVtYWluaW5nQm9hcmRzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgd2luTGVuZ3RoKys7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkSW5kaWNlc1RvQWRkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5RGVzY2VuZGluZzxpbnQsaW50PihXaW5GaWx0ZXIuRmlsdGVyKF9yZW1haW5pbmdCb2FyZHMsIF93b25Cb2FyZHMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoeCA9PiB4KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgd29uQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihfcmVtYWluaW5nQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGludCwgYm9vbD4pKChiLCBpKSA9PiBib2FyZEluZGljZXNUb0FkZC5Db250YWlucyhpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGIgaW4gd29uQm9hcmRzKVxyXG4gICAgICAgICAgICAgICAgICAgIF93b25Cb2FyZHMuQWRkKGIpO1xyXG4gICAgICAgICAgICAgICAgQm9hcmRzT2ZEZXB0aFt3aW5MZW5ndGhdID0gd29uQm9hcmRzO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIGJvYXJkSW5kaWNlc1RvQWRkKVxyXG4gICAgICAgICAgICAgICAgICAgIF9yZW1haW5pbmdCb2FyZHMuUmVtb3ZlQXQoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSAxMDAgKiAodG90YWxCb2FyZHMgLSBfcmVtYWluaW5nQm9hcmRzLkNvdW50KSAvIHRvdGFsQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwID4gbGFzdFApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVHVwbGU8c3RyaW5nLCBpbnQ+KHN0cmluZy5Gb3JtYXQoXCJGaW5kaW5nIGFsbCB7MH0gbW92ZSB3aW5zLi4uXCIsIHdpbkxlbmd0aCksIHApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFAgPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBCb2FyZENvdW50cy5BZGQoX3JlbWFpbmluZ0JvYXJkcy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKF9yZW1haW5pbmdCb2FyZHMuQ291bnQgPT0gY291bnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkcy5BZGRSYW5nZShfcmVtYWluaW5nQm9hcmRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEJyZWFrZXJXb25Cb2FyZCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBfcmVtYWluaW5nQm9hcmRzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoT25seUNvbnNpZGVyTmVhcmx5Q29sb3JhYmxlQm9hcmRzICYmIE1pc3NpbmdFZGdlSW5kZXggPj0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEV4aXN0c05lYXJseUNvbG9yYWJsZUJvYXJkRm9yRWFjaEVkZ2UoX3JlbWFpbmluZ0JvYXJkcykpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0T3JEZWZhdWx0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KF9yZW1haW5pbmdCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gX2NvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoYiwgMCkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChCcmVha2VyV29uQm9hcmQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oX3JlbWFpbmluZ0JvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBib29sPikoYiA9PiBfY29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShiLCAwKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgTmVhcmx5Q29sb3JhYmxlRm9yRWRnZShTdXBlclNsaW1Cb2FyZCBib2FyZCwgaW50IGVkZ2VJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfY29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShib2FyZCwgZWRnZUluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgRXhpc3RzTmVhcmx5Q29sb3JhYmxlQm9hcmRGb3JFYWNoRWRnZShMaXN0PFN1cGVyU2xpbUJvYXJkPiBib2FyZHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYWJsZS5SYW5nZSgwLCBfbGluZUdyYXBoLk4pLkFsbCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShlID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBib29sPikoYiA9PiBOZWFybHlDb2xvcmFibGVGb3JFZGdlKGIsIGUpKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIE5lYXJseUNvbG9yYWJsZUZvclNvbWVFZGdlKFN1cGVyU2xpbUJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmFibGUuUmFuZ2UoMCwgX2xpbmVHcmFwaC5OKS5BbnkoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoZSA9PiBOZWFybHlDb2xvcmFibGVGb3JFZGdlKGJvYXJkLCBlKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBMb29rQXRTdXBlcmFidW5kYW5jZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcGFja3MgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIF9saW5lR3JhcGguTikuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4+KShlID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oX3JlbWFpbmluZ0JvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBib29sPikoYiA9PiBfY29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShiLCBlKSkpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBnb29kUGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPj4ocGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LCBib29sPikocGFjayA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihwYWNrLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShzc2IgPT4gSXNTdXBlcmFidW5kYW50KHNzYikpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNTdXBlcmFidW5kYW50KFN1cGVyU2xpbUJvYXJkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyBzdWJzZXQgPSAwO1xyXG5cclxuICAgICAgICAgICAgaW50IHRvdGFsID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKHN1YnNldCA8ICgxVUwgPDwgYi5fc3RhY2tDb3VudCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYi5fbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWwgKz0gKHN1YnNldCAmIGIuX3RyYWNlW2ldKS5Qb3B1bGF0aW9uQ291bnQoKSAvIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBfZ3JhcGguRWRnZXNPbihzdWJzZXQuVG9TZXQoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodG90YWwgPCBlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBzdWJzZXQrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKEV4dHJhUHNpID4gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0b3RhbCA+PSBfZ3JhcGguRSArIEV4dHJhUHNpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IENvbXB1dGVBYnVuZGFuY2VTdXJwbHVzKFN1cGVyU2xpbUJvYXJkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGIuX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gYi5fdHJhY2VbaV0uUG9wdWxhdGlvbkNvdW50KCkgLyAyO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsIC0gX2dyYXBoLkU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PGludD4gQ29tcHV0ZU1hdGNoaW5nQWJ1bmRhbmNlU2hhZG93KFN1cGVyU2xpbUJvYXJkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2hhZG93ID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgdWxvbmcgc3Vic2V0ID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKHN1YnNldCA8ICgxVUwgPDwgYi5fc3RhY2tDb3VudCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFJc01hdGNoaW5nQWJ1bmRhbnQoYiwgc3Vic2V0LCBvdXQgZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93LkFkZChlKTtcclxuICAgICAgICAgICAgICAgIHN1YnNldCsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzaGFkb3cuU29ydCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNoYWRvdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgSXNNYXRjaGluZ0FidW5kYW50KFN1cGVyU2xpbUJvYXJkIGIsIHVsb25nIHN1YnNldCwgb3V0IGludCBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZSA9IF9ncmFwaC5FZGdlc09uKHN1YnNldC5Ub1NldCgpKTtcclxuXHJcbiAgICAgICAgICAgIGludCB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYi5fbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YyA9IChzdWJzZXQgJiBiLl90cmFjZVtpXSkuVG9TZXQoKTtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IF9saW5lR3JhcGguSW5kZXBlbmRlbmNlTnVtYmVyKF9ncmFwaC5FZGdlSW5kaWNlc09uKHZjKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbCA+PSBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBHZW5lcmF0ZUFsbEJvYXJkcyhUZW1wbGF0ZSB0ZW1wbGF0ZSwgaW50IGNvbG9yQ291bnQsIEFjdGlvbjxUdXBsZTxzdHJpbmcsIGludD4+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFR1cGxlPHN0cmluZywgaW50PihcIkZpbmRpbmcgYWxsIHBvc2l0aW9ucy4uLlwiLCAwKSk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBCaXRMZXZlbEdlbmVyYXRpb24uQXNzaWdubWVudHNfdWxvbmcuR2VuZXJhdGUodGVtcGxhdGUuU2l6ZXMsIGNvbG9yQ291bnQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IG5ldyBTdXBlclNsaW1Cb2FyZCh0LCB0ZW1wbGF0ZS5TaXplcy5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzLkFkZChiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBCdWlsZExpbmVHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYWRqYWNlbnQgPSBfZ3JhcGguQWRqYWNlbnQ7XHJcbiAgICAgICAgICAgIGludCBuID0gYWRqYWNlbnQuR2V0VXBwZXJCb3VuZCgwKSArIDE7XHJcblxyXG4gICAgICAgICAgICBfZWRnZXMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2VkZ2VzLkFkZChuZXcgVHVwbGU8aW50LCBpbnQ+KGksIGopKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtZWV0cyA9IG5ldyBib29sW19lZGdlcy5Db3VudCwgX2VkZ2VzLkNvdW50XTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZWRnZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IF9lZGdlcy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZWRnZXNbaV0uSXRlbTEgPT0gX2VkZ2VzW2pdLkl0ZW0xIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlc1tpXS5JdGVtMSA9PSBfZWRnZXNbal0uSXRlbTIgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2VkZ2VzW2ldLkl0ZW0yID09IF9lZGdlc1tqXS5JdGVtMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZWRnZXNbaV0uSXRlbTIgPT0gX2VkZ2VzW2pdLkl0ZW0yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWV0c1tpLCBqXSA9IG1lZXRzW2osIGldID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIF9saW5lR3JhcGggPSBuZXcgR3JhcGgobWVldHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9uZyBHZXRFZGdlQ29sb3JMaXN0KFN1cGVyU2xpbUJvYXJkIGIsIGludCBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYxID0gX2VkZ2VzW2VdLkl0ZW0xO1xyXG4gICAgICAgICAgICB2YXIgdjIgPSBfZWRnZXNbZV0uSXRlbTI7XHJcbiAgICAgICAgICAgIHZhciBzdGFja3MgPSBiLlN0YWNrcy5WYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdGFja3NbdjFdICYgc3RhY2tzW3YyXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHYW1lVHJlZUluZm8gR2V0V2luVHJlZUluZm8oU3VwZXJTbGltQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX3N3YXBBbmFseXplci5XaW5UcmVlSW5mb1tib2FyZF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgX2dhbWVUcmVlSW5kZXg7XHJcbiAgICAgICAgcHVibGljIEdhbWVUcmVlIEJ1aWxkR2FtZVRyZWUoU3VwZXJTbGltQm9hcmQgYm9hcmQsIGJvb2wgd2luID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzZWVuQm9hcmRzID0gIG5ldyBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBpbnQ+KCk7XHJcbiAgICAgICAgICAgIF9nYW1lVHJlZUluZGV4ID0gMTtcclxuICAgICAgICAgICAgcmV0dXJuIEJ1aWxkR2FtZVRyZWUoYm9hcmQsIHNlZW5Cb2FyZHMsIHdpbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHYW1lVHJlZSBCdWlsZEdhbWVUcmVlKFN1cGVyU2xpbUJvYXJkIGJvYXJkLCBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBpbnQ+IHNlZW5Cb2FyZHMsIGJvb2wgd2luID0gdHJ1ZSwgaW50IGRlcHRoID0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNlZW5Cb2FyZHNbYm9hcmRdID0gX2dhbWVUcmVlSW5kZXg7XHJcbiAgICAgICAgICAgIHZhciB0cmVlID0gbmV3IEdhbWVUcmVlKCkgeyBCb2FyZCA9IGJvYXJkLCBJc0ZpeGVyV2luID0gd2luIH07XHJcbiAgICAgICAgICAgIHRyZWUuSXNDb2xvcmFibGUgPSBfY29sb3JpbmdBbmFseXplci5BbmFseXplKGJvYXJkKTtcclxuICAgICAgICAgICAgdHJlZS5Jc1N1cGVyYWJ1bmRhbnQgPSB3aW4gfHwgSXNTdXBlcmFidW5kYW50KGJvYXJkKTtcclxuICAgICAgICAgICAgdHJlZS5HYW1lVHJlZUluZGV4ID0gX2dhbWVUcmVlSW5kZXg7XHJcbiAgICAgICAgICAgIF9nYW1lVHJlZUluZGV4Kys7XHJcblxyXG4gICAgICAgICAgICBpZiAodHJlZS5Jc0NvbG9yYWJsZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0cmVlLklzU3VwZXJhYnVuZGFudClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmVlO1xyXG5cclxuICAgICAgICAgICAgR2FtZVRyZWVJbmZvIHRyZWVJbmZvO1xyXG4gICAgICAgICAgICBpZiAod2luKVxyXG4gICAgICAgICAgICAgICAgX3N3YXBBbmFseXplci5XaW5UcmVlSW5mby5UcnlHZXRWYWx1ZShib2FyZCwgb3V0IHRyZWVJbmZvKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgX3N3YXBBbmFseXplci5Mb3NzVHJlZUluZm8uVHJ5R2V0VmFsdWUoYm9hcmQsIG91dCB0cmVlSW5mbyk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHJlZUluZm8gIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvY2FsU2VlbkJvYXJkcyA9IG5ldyBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJjIGluIHRyZWVJbmZvKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IFN1cGVyU2xpbUJvYXJkKGJvYXJkLl90cmFjZSwgYmMuQWxwaGEsIGJjLkJldGEsIGJjLlJlc3BvbnNlLCBib2FyZC5fc3RhY2tDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsU2VlbkJvYXJkcy5Db250YWlucyhjaGlsZEJvYXJkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTZWVuQm9hcmRzLkFkZChjaGlsZEJvYXJkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW4gJiYgc2VlbkJvYXJkcy5Db250YWluc0tleShjaGlsZEJvYXJkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZFRyZWUgPSBCdWlsZEdhbWVUcmVlKGNoaWxkQm9hcmQsIHNlZW5Cb2FyZHMsIHdpbiwgZGVwdGggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlLkFkZENoaWxkKGNoaWxkVHJlZSwgYmMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJlZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTdWJUZW1wbGF0ZUFuYWx5emVyIDogSUJvYXJkQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBMaXN0PFRlbXBsYXRlPiBTdWJUZW1wbGF0ZXMgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlYXNvbiB7IGdldCB7IHJldHVybiBcInN1YiB0ZW1wbGF0ZVwiOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNLbm93bGVkZ2VEZXBlbmRlbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFN1YlRlbXBsYXRlQW5hbHl6ZXIocGFyYW1zIFRlbXBsYXRlW10gc3ViVGVtcGxhdGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU3ViVGVtcGxhdGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuVGVtcGxhdGU+KHN1YlRlbXBsYXRlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHRlbXBsYXRlIGluIFN1YlRlbXBsYXRlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGNvbG9yO1xyXG4gICAgICAgICAgICAgICAgaW50IHg7XHJcbiAgICAgICAgICAgICAgICBpZiAoQ29udGFpbnNTdWJlcmFidW5kYW50U3ViU3RhY2tzQWJvdmVUZW1wbGF0ZShrbm93bGVkZ2UsIGJvYXJkLCB0ZW1wbGF0ZSwgb3V0IGNvbG9yLCBvdXQgeCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga25vd2xlZGdlW2JvYXJkLlRlbXBsYXRlLlZhbHVlXVtib2FyZC5Db2xvckNvdW50XS5BZGRXaW4oYm9hcmQsIHN0cmluZy5Gb3JtYXQoXCJzZXQgTCh7MH0pID0gTCh7MH0pIC0gezF9XCIsIHggKyAxLCBjb2xvcikpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIENvbnRhaW5zU3ViZXJhYnVuZGFudFN1YlN0YWNrc0Fib3ZlVGVtcGxhdGUoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIFRlbXBsYXRlIHRlbXBsYXRlLCBvdXQgaW50IGNvbG9yLCBvdXQgaW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb2xvciA9IC0xO1xyXG4gICAgICAgICAgICB4ID0gLTE7XHJcbiAgICAgICAgICAgIHZhciBnID0ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkdyYXBoO1xyXG4gICAgICAgICAgICB2YXIgc3RhY2tTZXRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYm9hcmQuU3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikocyA9PiBzLlRvU2V0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIGJpZ3MgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIHN0YWNrU2V0cy5Db3VudCkuQ291bnQoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaSA9PiBzdGFja1NldHNbaV0uQ291bnQgPiB0ZW1wbGF0ZS5TaXplc1tpXSkpO1xyXG4gICAgICAgICAgICBpZiAoYmlncyA8PSAwIHx8IGJpZ3MgPiAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNocmlua2FibGUgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIHN0YWNrU2V0cy5Db3VudCkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaSA9PiBzdGFja1NldHNbaV0uQ291bnQgPT0gdGVtcGxhdGUuU2l6ZXNbaV0gKyAxKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIGlmIChzaHJpbmthYmxlLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB4ID0gc2hyaW5rYWJsZVswXTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGMgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihzdGFja1NldHNbeF0pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdGFja1NldHNbeF0uUmVtb3ZlKGMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChnLkRlZ3JlZUNvbmRpdGlvbihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pixsb25nPihzdGFja1NldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGxvbmc+KShzID0+IHMuVG9JbnQ2NCgpKSkuVG9MaXN0KCksIGJvYXJkLlBvdCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBjO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHN0YWNrU2V0c1t4XS5BZGQoYyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZhc3RUYXJwaXRFbnVtZXJhdG9yIDogVGFycGl0RW51bWVyYXRvclxyXG4gICAge1xyXG4gICAgICAgIExpc3Q8RmFzdFdvcmQ+IF93b3JkcztcclxuICAgICAgICBGYXN0QWNjZXNzaWJpbGl0eUNoZWNrZXIgX2FjY2Vzc2liaWxpdHlDaGVja2VyO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBMaXN0PEZhc3RXb3JkPiBFbXB0eUxpc3QgPSBuZXcgTGlzdDxGYXN0V29yZD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIEZhc3RUYXJwaXRFbnVtZXJhdG9yKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3dvcmRzID0gbmV3IEZhc3RXb3JkR2VuZXJhdG9yKCkuR2VuZXJhdGVXb3JkcyhuKTtcclxuICAgICAgICAgICAgX2FjY2Vzc2liaWxpdHlDaGVja2VyID0gbmV3IEZhc3RBY2Nlc3NpYmlsaXR5Q2hlY2tlcihuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIEdlbmVyYXRlTWluaW1hbFRhcnBpdHMoQWN0aW9uPExpc3Q8c3RyaW5nPj4gZm91bmRUYXJwaXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHZW5lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPj4pKGwgPT4gZm91bmRUYXJwaXQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZCxzdHJpbmc+KGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZCwgc3RyaW5nPikocyA9PiBXb3JkaWZ5KHMpKSkuVG9MaXN0KCkpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBHZW5lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdChBY3Rpb248TGlzdDxGYXN0V29yZD4+IGZvdW5kVGFycGl0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR2VuZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3RJbihfd29yZHMsIG5ldyBMaXN0PEZhc3RXb3JkPigpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPj4pZm91bmRUYXJwaXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBHZW5lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdEluKExpc3Q8RmFzdFdvcmQ+IFMsIExpc3Q8RmFzdFdvcmQ+IG11c3RIYXZlcywgQWN0aW9uPExpc3Q8RmFzdFdvcmQ+PiBmb3VuZFRhcnBpdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBleGNsdWRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGV4dGVuZGVkTXVzdEhhdmVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4obXVzdEhhdmVzKTtcclxuICAgICAgICAgICAgdmFyIFQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihTLG11c3RIYXZlcykuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBUKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgVyA9IFJ1bkVzY2FwZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihTLG5ld1tdIHsgdyB9KSwgZXh0ZW5kZWRNdXN0SGF2ZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChXICE9IG51bGwgJiYgVy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhjbHVkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlTWluaW1hbFRhcnBpdHNGYXN0SW4oVywgZXh0ZW5kZWRNdXN0SGF2ZXMsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+Pilmb3VuZFRhcnBpdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZXh0ZW5kZWRNdXN0SGF2ZXMuQWRkKHcpOyAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFleGNsdWRlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gbXVzdEhhdmVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBXID0gUnVuRXNjYXBlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KFMsbmV3W10geyB3IH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoVy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGNsdWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWV4Y2x1ZGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kVGFycGl0KFMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PEZhc3RXb3JkPiBSdW5Fc2NhcGUoSUVudW1lcmFibGU8RmFzdFdvcmQ+IFMsIExpc3Q8RmFzdFdvcmQ+IG11c3RIYXZlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBUID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oUyk7XHJcbiAgICAgICAgICAgIHZhciBSID0gbmV3IEhhc2hTZXQ8RmFzdFdvcmQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KF93b3JkcyxUKSk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4obXVzdEhhdmVzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQsIGJvb2w+KSh3ID0+IF9hY2Nlc3NpYmlsaXR5Q2hlY2tlci5Jc0FjY2Vzc2libGUodywgUikpKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZXNjYXBlcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihULG11c3RIYXZlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZCwgYm9vbD4pKHcgPT4gX2FjY2Vzc2liaWxpdHlDaGVja2VyLklzQWNjZXNzaWJsZSh3LCBSKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIGVzY2FwZXJzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFQuUmVtb3ZlKHcpO1xyXG4gICAgICAgICAgICAgICAgICAgIFIuQWRkKHcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlc2NhcGVycy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gVDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8RmFzdFdvcmQ+IFJ1bkVzY2FwZShJRW51bWVyYWJsZTxGYXN0V29yZD4gUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBSdW5Fc2NhcGUoUywgRW1wdHlMaXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0cmluZyBXb3JkaWZ5KEZhc3RXb3JkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc3QgPSBuZXcgbG9uZ1tiLl9zdGFja0NvdW50XTtcclxuICAgICAgICAgICAgdmFyIHRyYWNlQml0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihiLl90cmFjZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzx1bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KSh0ID0+IHQuVG9TZXQoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBjID0gMDsgYyA8IHRyYWNlQml0cy5Db3VudDsgYysrKVxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gdHJhY2VCaXRzW2NdKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0W2ldIHw9IDFMIDw8IGM7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW48Y2hhcj4oXCJcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxjaGFyPihzdCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBjaGFyPikocyA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gJ3gnO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuICd5JztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiAneic7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuICc/JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gZW51bm1lcmFibGUgd2F5XHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIElFbnVtZXJhYmxlPExpc3Q8c3RyaW5nPj4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8c3RyaW5nPj4oRW51bWVyYXRlTWluaW1hbFRhcnBpdHNGYXN0KCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8c3RyaW5nPj4pKGxpc3QgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZCxzdHJpbmc+KGxpc3QsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZCwgc3RyaW5nPilXb3JkaWZ5KS5Ub0xpc3QoKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPExpc3Q8RmFzdFdvcmQ+PiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGV4cGxvcmVkID0gbmV3IEhhc2hTZXQ8TGlzdDxGYXN0V29yZD4+KG5ldyBTb3J0ZWRMaXN0Q29tcGFyZXIoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3RJbihfd29yZHMsIGV4cGxvcmVkLCBuZXcgTGlzdDxGYXN0V29yZD4oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PEZhc3RXb3JkPj4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHNGYXN0SW4oTGlzdDxGYXN0V29yZD4gUywgSGFzaFNldDxMaXN0PEZhc3RXb3JkPj4gZXhwbG9yZWQsIExpc3Q8RmFzdFdvcmQ+IG11c3RIYXZlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBleGNsdWRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gUylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIFcgPSBSdW5Fc2NhcGUoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oUyxuZXdbXSB7IHcgfSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKFcuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBleGNsdWRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihtdXN0SGF2ZXMsVykgJiYgIWV4cGxvcmVkLkNvbnRhaW5zKFcpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBUUCBpbiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3RJbihXLCBleHBsb3JlZCwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4obXVzdEhhdmVzKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBUUDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBleHBsb3JlZC5BZGQoVyk7XHJcbiAgICAgICAgICAgICAgICBtdXN0SGF2ZXMuQWRkKHcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIWV4Y2x1ZGVkKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KFMpO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICBjbGFzcyBTb3J0ZWRMaXN0Q29tcGFyZXIgOiBJRXF1YWxpdHlDb21wYXJlcjxMaXN0PEZhc3RXb3JkPj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhMaXN0PEZhc3RXb3JkPiB4LCBMaXN0PEZhc3RXb3JkPiB5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KHgseSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgR2V0SGFzaENvZGUoTGlzdDxGYXN0V29yZD4gbGlzdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdW5jaGVja2VkXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGhhc2ggPSAxOTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgeCBpbiBsaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNoID0gaGFzaCAqIDMxICsgeC5HZXRIYXNoQ29kZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzaDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUmVmZXJlbmNlVGFycGl0RW51bWVyYXRvciA6IFRhcnBpdEVudW1lcmF0b3JcclxuICAgIHtcclxuICAgICAgICBMaXN0PHN0cmluZz4gX3dvcmRzO1xyXG4gICAgICAgIEFjY2Vzc2liaWxpdHlDaGVja2VyIF9hY2Nlc3NpYmlsaXR5Q2hlY2tlcjtcclxuXHJcbiAgICAgICAgcHVibGljIFJlZmVyZW5jZVRhcnBpdEVudW1lcmF0b3IoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfd29yZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxzdHJpbmc+KG5ldyBXb3JkRW51bWVyYXRvcihBbHBoYWJldCkuRW51bWVyYXRlV29yZHMobikpO1xyXG4gICAgICAgICAgICBfYWNjZXNzaWJpbGl0eUNoZWNrZXIgPSBuZXcgQWNjZXNzaWJpbGl0eUNoZWNrZXIoQWxwaGFiZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIElFbnVtZXJhYmxlPExpc3Q8c3RyaW5nPj4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNlZW4gPSBuZXcgSGFzaFNldDxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0c0luKF93b3Jkcywgc2Vlbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PHN0cmluZz4+IEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzSW4oTGlzdDxzdHJpbmc+IFMsIEhhc2hTZXQ8c3RyaW5nPiBzZWVuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGV4Y2x1ZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBUIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8c3RyaW5nPj4oUywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxzdHJpbmc+PikodyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxzdHJpbmc+KFMsbmV3W10geyB3IH0pLlRvTGlzdCgpKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBXID0gUnVuRXNjYXBlKFQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKFcuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBleGNsdWRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IEdlbmVyYXRlU2ltcGxlS2V5KFcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlZW4uQ29udGFpbnMoa2V5KSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZWVuLkFkZChrZXkpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIFRQIGluIEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzSW4oVywgc2VlbikpXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIFRQO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIWV4Y2x1ZGVkKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxzdHJpbmcsc3RyaW5nPihTLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgc3RyaW5nPikocyA9PiBzKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PHN0cmluZz4gUnVuRXNjYXBlKExpc3Q8c3RyaW5nPiBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIFQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxzdHJpbmc+KFMpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIFIgPSBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRGlmZmVyZW5jZTxzdHJpbmc+KF93b3JkcyxUKTtcclxuICAgICAgICAgICAgICAgIGlmIChBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxzdHJpbmc+KFQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBib29sPikodyA9PiBfYWNjZXNzaWJpbGl0eUNoZWNrZXIuSXNBY2Nlc3NpYmxlKHcsIFIpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxzdHJpbmc+KSgoeCkgPT4geyB9KSkgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHJpbmcgR2VuZXJhdGVTaW1wbGVLZXkoTGlzdDxzdHJpbmc+IFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCIsXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxzdHJpbmcsc3RyaW5nPihTLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgc3RyaW5nPikocyA9PiBzKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIGNsYXNzIEJpdEdyYXBoX2xvbmcgOiBJR3JhcGhfbG9uZ1xyXG4gICAge1xyXG4gICAgICAgIGludFtdIF92ZXJ0aWNlcztcclxuICAgICAgICBsb25nW10gX25laWdoYm9yaG9vZDtcclxuXHJcbiAgICAgICAgcHVibGljIEJpdEdyYXBoX2xvbmcoTGlzdDxpbnQ+IGVkZ2VXZWlnaHRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG4gPSAoaW50KSgoMSArIE1hdGguU3FydCgxICsgOCAqIGVkZ2VXZWlnaHRzLkNvdW50KSkgLyAyKTtcclxuICAgICAgICAgICAgX3ZlcnRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBuKS5Ub0FycmF5KCk7XHJcblxyXG4gICAgICAgICAgICBfbmVpZ2hib3Job29kID0gbmV3IGxvbmdbbl07XHJcblxyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaUJpdCA9IDFMIDw8IGk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpCaXQgPSAxTCA8PCBqO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWRnZVdlaWdodHNba10gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9uZWlnaGJvcmhvb2RbaV0gfD0gakJpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX25laWdoYm9yaG9vZFtqXSB8PSBpQml0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBCaXRHcmFwaF9sb25nKGludCBuLCBsb25nW10gbmVpZ2hib3Job29kKVxyXG4gICAgICAgIHtcclxuXHRcdFx0X3ZlcnRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBuKS5Ub0FycmF5KCk7XHJcblx0XHRcdF9uZWlnaGJvcmhvb2QgPSBuZWlnaGJvcmhvb2Q7XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgTiB7IGdldCB7IHJldHVybiBfdmVydGljZXMuTGVuZ3RoOyB9IH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8aW50PiBWZXJ0aWNlcyB7IGdldCB7IHJldHVybiBfdmVydGljZXM7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0luZGVwZW5kZW50KGxvbmcgc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldC5UcnVlRm9yQWxsQml0SW5kaWNlcygoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShpID0+IChfbmVpZ2hib3Job29kW2ldICYgc2V0KSA9PSAwKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IERlZ3JlZShpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfbmVpZ2hib3Job29kW3ZdLlBvcHVsYXRpb25Db3VudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IERlZ3JlZUluU2V0KGludCB2LCBsb25nIHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoX25laWdoYm9yaG9vZFt2XSAmIHNldCkuUG9wdWxhdGlvbkNvdW50KCk7XHJcbiAgICAgICAgfVxyXG5cdFx0cHVibGljIGxvbmcgTmVpZ2hib3JzSW5TZXQoaW50IHYsIGxvbmcgc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9uZWlnaGJvcmhvb2Rbdl0gJiBzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxsb25nPiBNYXhpbWFsSW5kZXBlbmRlbnRTdWJzZXRzKGxvbmcgc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBuZXcgTGlzdDxsb25nPig4KTtcclxuICAgICAgICAgICAgQnJvbktlcmJvc2NoKHNldCwgMEwsIDBMLCBsaXN0KTtcclxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEJyb25LZXJib3NjaChsb25nIFAsIGxvbmcgUiwgbG9uZyBYLCBMaXN0PGxvbmc+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoUCA9PSAwICYmIFggPT0gMClcclxuICAgICAgICAgICAgICAgIGxpc3QuQWRkKFIpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB1ID0gVG9taXRhUGl2b3QoUCwgWCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcSA9IFAgJiAoKDFMIDw8IHUpIHwgX25laWdoYm9yaG9vZFt1XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gcSAmIC1xO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gYml0LkV4dHJhY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbm9uID0gfihiaXQgfCBfbmVpZ2hib3Job29kW3ZdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgQnJvbktlcmJvc2NoKFAgJiBub24sIFIgfCBiaXQsIFggJiBub24sIGxpc3QpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBxIF49IGJpdDtcclxuICAgICAgICAgICAgICAgICAgICBQIF49IGJpdDtcclxuICAgICAgICAgICAgICAgICAgICBYIHw9IGJpdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IFRvbWl0YVBpdm90KGxvbmcgUCwgbG9uZyBYKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1pbiA9IGludC5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIGJlc3QgPSAtMTtcclxuICAgICAgICAgICAgdmFyIHEgPSBQIHwgWDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiaXQgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICB2YXIgdSA9IGJpdC5FeHRyYWN0KCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIG4gPSAoKGJpdCB8IF9uZWlnaGJvcmhvb2RbdV0pICYgUCkuUG9wdWxhdGlvbkNvdW50KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobiA8IG1pbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3QgPSB1O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHEgXj0gYml0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYmVzdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCaXRHcmFwaF91aW50IDogSUdyYXBoX3VpbnRcclxuICAgIHtcclxuICAgICAgICBpbnRbXSBfdmVydGljZXM7XHJcbiAgICAgICAgdWludFtdIF9uZWlnaGJvcmhvb2Q7XHJcblxyXG4gICAgICAgIHB1YmxpYyBCaXRHcmFwaF91aW50KExpc3Q8aW50PiBlZGdlV2VpZ2h0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuID0gKGludCkoKDEgKyBNYXRoLlNxcnQoMSArIDggKiBlZGdlV2VpZ2h0cy5Db3VudCkpIC8gMik7XHJcbiAgICAgICAgICAgIF92ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgbikuVG9BcnJheSgpO1xyXG5cclxuICAgICAgICAgICAgX25laWdoYm9yaG9vZCA9IG5ldyB1aW50W25dO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlCaXQgPSAxVSA8PCBpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqQml0ID0gMVUgPDwgajtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2VXZWlnaHRzW2tdICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbmVpZ2hib3Job29kW2ldIHw9IGpCaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9uZWlnaGJvcmhvb2Rbal0gfD0gaUJpdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgQml0R3JhcGhfdWludChpbnQgbiwgdWludFtdIG5laWdoYm9yaG9vZClcclxuICAgICAgICB7XHJcblx0XHRcdF92ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgbikuVG9BcnJheSgpO1xyXG5cdFx0XHRfbmVpZ2hib3Job29kID0gbmVpZ2hib3Job29kO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IE4geyBnZXQgeyByZXR1cm4gX3ZlcnRpY2VzLkxlbmd0aDsgfSB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPGludD4gVmVydGljZXMgeyBnZXQgeyByZXR1cm4gX3ZlcnRpY2VzOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNJbmRlcGVuZGVudCh1aW50IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXQuVHJ1ZUZvckFsbEJpdEluZGljZXMoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaSA9PiAoX25laWdoYm9yaG9vZFtpXSAmIHNldCkgPT0gMCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBEZWdyZWUoaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX25laWdoYm9yaG9vZFt2XS5Qb3B1bGF0aW9uQ291bnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBEZWdyZWVJblNldChpbnQgdiwgdWludCBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKF9uZWlnaGJvcmhvb2Rbdl0gJiBzZXQpLlBvcHVsYXRpb25Db3VudCgpO1xyXG4gICAgICAgIH1cclxuXHRcdHB1YmxpYyB1aW50IE5laWdoYm9yc0luU2V0KGludCB2LCB1aW50IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfbmVpZ2hib3Job29kW3ZdICYgc2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8dWludD4gTWF4aW1hbEluZGVwZW5kZW50U3Vic2V0cyh1aW50IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3Q8dWludD4oOCk7XHJcbiAgICAgICAgICAgIEJyb25LZXJib3NjaChzZXQsIDBVLCAwVSwgbGlzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBCcm9uS2VyYm9zY2godWludCBQLCB1aW50IFIsIHVpbnQgWCwgTGlzdDx1aW50PiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFAgPT0gMCAmJiBYID09IDApXHJcbiAgICAgICAgICAgICAgICBsaXN0LkFkZChSKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdSA9IFRvbWl0YVBpdm90KFAsIFgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHEgPSBQICYgKCgxVSA8PCB1KSB8IF9uZWlnaGJvcmhvb2RbdV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpdCA9IHEgJiAofnEgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGJpdC5FeHRyYWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vbiA9IH4oYml0IHwgX25laWdoYm9yaG9vZFt2XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIEJyb25LZXJib3NjaChQICYgbm9uLCBSIHwgYml0LCBYICYgbm9uLCBsaXN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcSBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgUCBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgWCB8PSBiaXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBUb21pdGFQaXZvdCh1aW50IFAsIHVpbnQgWClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtaW4gPSBpbnQuTWF4VmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBiZXN0ID0gLTE7XHJcbiAgICAgICAgICAgIHZhciBxID0gUCB8IFg7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0ID0gcSAmICh+cSArIDEpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHUgPSBiaXQuRXh0cmFjdCgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBuID0gKChiaXQgfCBfbmVpZ2hib3Job29kW3VdKSAmIFApLlBvcHVsYXRpb25Db3VudCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG4gPCBtaW4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluID0gbjtcclxuICAgICAgICAgICAgICAgICAgICBiZXN0ID0gdTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBxIF49IGJpdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJlc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG5cclxudXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsO1xyXG51c2luZyBTeXN0ZW0uUnVudGltZS5TZXJpYWxpemF0aW9uO1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRWRnZSA6IEdyYXBoaWNzTGF5ZXIuSVBhaW50YWJsZSwgSUhpdHRhYmxlXHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuRm9udCBMYWJlbEZvbnQgPSBuZXcgR3JhcGhpY3NMYXllci5Gb250KFwiVGltZXMgTmV3IFJvbWFuXCIsIDE4KTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIExhYmVsQnJ1c2hDb2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMTIwLCAwLCAwLCAyNTUpO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkZvbnQgSW5kZXhGb250ID0gbmV3IEdyYXBoaWNzTGF5ZXIuRm9udChcIlN5c3RlbVwiLCA4KTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIEluZGV4QnJ1c2hDb2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMjAwLCAyMDAsIDAsIDApO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IFBhcmVudEluZGV4IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIEluZGV4QW5nbGUgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZW51bSBPcmllbnRhdGlvbnNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5vbmUsXHJcbiAgICAgICAgICAgIEZvcndhcmQsXHJcbiAgICAgICAgICAgIEJhY2t3YXJkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBFZGdlKFZlcnRleCB2MSwgVmVydGV4IHYyKVxyXG4gICAgICAgICAgICA6IHRoaXModjEsIHYyLCBPcmllbnRhdGlvbnMuTm9uZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRWRnZShWZXJ0ZXggdjEsIFZlcnRleCB2MiwgT3JpZW50YXRpb25zIG9yaWVudGF0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX1YxID0gdjE7XHJcbiAgICAgICAgICAgIF9WMiA9IHYyO1xyXG4gICAgICAgICAgICBfT3JpZW50YXRpb24gPSBvcmllbnRhdGlvbjtcclxuICAgICAgICAgICAgX011bHRpcGxpY2l0eSA9IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRWRnZShTZXJpYWxpemF0aW9uRWRnZSBlLCBMaXN0PFZlcnRleD4gdmVydGljZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBWMSA9IHZlcnRpY2VzW2UuSW5kZXhWMV07XHJcbiAgICAgICAgICAgIFYyID0gdmVydGljZXNbZS5JbmRleFYyXTtcclxuICAgICAgICAgICAgT3JpZW50YXRpb24gPSBlLk9yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICBUaGlja25lc3MgPSBlLlRoaWNrbmVzcztcclxuICAgICAgICAgICAgTXVsdGlwbGljaXR5ID0gZS5NdWx0aXBsaWNpdHk7XHJcbiAgICAgICAgICAgIFN0eWxlID0gZS5TdHlsZTtcclxuICAgICAgICAgICAgTGFiZWwgPSBlLkxhYmVsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUGFpbnQoR3JhcGhpY3NMYXllci5JR3JhcGhpY3MgZywgaW50IHdpZHRoLCBpbnQgaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9WMSA9PSBfVjIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vIERyYXcgc2VsZiBsb29wLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1heFJhZGl1czEgPSBNYXRoLk1heChfVjEuTG9jYWxCb3VuZHMuV2lkdGgsIF9WMS5Mb2NhbEJvdW5kcy5IZWlnaHQpIC8gMjtcclxuICAgICAgICAgICAgICAgIHZhciBtYXhSYWRpdXMyID0gTWF0aC5NYXgoX1YyLkxvY2FsQm91bmRzLldpZHRoLCBfVjIuTG9jYWxCb3VuZHMuSGVpZ2h0KSAvIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvcyA9IChfVjIuWCAtIF9WMS5YKSAvIE1hdGguU3FydCgoX1YyLlggLSBfVjEuWCkgKiAoX1YyLlggLSBfVjEuWCkgKyAoX1YyLlkgLSBfVjEuWSkgKiAoX1YyLlkgLSBfVjEuWSkpO1xyXG4gICAgICAgICAgICAgICAgY29zID0gTWF0aC5NaW4oTWF0aC5NYXgoY29zLCAtMSksIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzaW4gPSAoX1YyLlkgLSBfVjEuWSkgLyBNYXRoLlNxcnQoKF9WMi5YIC0gX1YxLlgpICogKF9WMi5YIC0gX1YxLlgpICsgKF9WMi5ZIC0gX1YxLlkpICogKF9WMi5ZIC0gX1YxLlkpKTtcclxuICAgICAgICAgICAgICAgIHNpbiA9IE1hdGguTWluKE1hdGguTWF4KHNpbiwgLTEpLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLkFjb3MoY29zKTtcclxuICAgICAgICAgICAgICAgIGlmIChfVjEuWSA+IF9WMi5ZKVxyXG4gICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gLWFuZ2xlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkb3VibGUuSXNOYU4oYW5nbGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYW5nbGVTdGVwID0gTWF0aC5QSSAvIDIuMCAvIF9NdWx0aXBsaWNpdHk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXZlbk1vZGlmaWVyID0gKF9NdWx0aXBsaWNpdHkgJSAyID09IDApID8gMC41IDogMDtcclxuXHJcbiAgICAgICAgICAgICAgICBHcmFwaGljc0xheWVyLkJveCB0b3BTdGFydCA9IG5ldyBHcmFwaGljc0xheWVyLkJveCgwLCAwKTtcclxuICAgICAgICAgICAgICAgIEdyYXBoaWNzTGF5ZXIuQm94IHRvcEZpbmlzaCA9IG5ldyBHcmFwaGljc0xheWVyLkJveCgwLCAwKTtcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gLShfTXVsdGlwbGljaXR5IC0gMSkgLyAyOyBpIDwgTWF0aC5DZWlsaW5nKChfTXVsdGlwbGljaXR5ICsgMSkgLyAyLjApOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0QW5nbGUgPSBhbmdsZSArIGFuZ2xlU3RlcCAqIChpIC0gZXZlbk1vZGlmaWVyKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmluaXNoQW5nbGUgPSBhbmdsZSAtIGFuZ2xlU3RlcCAqIChpIC0gZXZlbk1vZGlmaWVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gTG9jYWxUb0dsb2JhbChfVjEuTG9jYXRpb24gKyBVdGlsaXR5LlBvbGFyVG9SZWN0YW5ndWxhcihtYXhSYWRpdXMxICsgMC4wMSwgc3RhcnRBbmdsZSksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmaW5pc2ggPSBMb2NhbFRvR2xvYmFsKF9WMi5Mb2NhdGlvbiAtIFV0aWxpdHkuUG9sYXJUb1JlY3Rhbmd1bGFyKG1heFJhZGl1czIgKyAwLjAxLCBmaW5pc2hBbmdsZSksIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wU3RhcnQgPSBzdGFydDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wRmluaXNoID0gZmluaXNoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZy5EcmF3TGluZShfcGVuQ29sb3IsIHN0YXJ0LCBmaW5pc2gsIF90aGlja25lc3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfT3JpZW50YXRpb24gIT0gT3JpZW50YXRpb25zLk5vbmUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50cyA9IG5ldyBHcmFwaGljc0xheWVyLkJveFszXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX09yaWVudGF0aW9uID09IE9yaWVudGF0aW9ucy5Gb3J3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN3ZWVwID0gX1YyLkxvY2F0aW9uIC0gVXRpbGl0eS5Qb2xhclRvUmVjdGFuZ3VsYXIobWF4UmFkaXVzMiArIDAuMDI1ZiwgYW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzWzBdID0gTG9jYWxUb0dsb2JhbChVdGlsaXR5LlJvdGF0ZUFyb3VuZFBvaW50KHN3ZWVwLCBfVjIuTG9jYXRpb24sIE1hdGguUEkgLyAxODAuMCAqIDEwLjApLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzWzFdID0gTG9jYWxUb0dsb2JhbChfVjIuTG9jYXRpb24gLSBVdGlsaXR5LlBvbGFyVG9SZWN0YW5ndWxhcihtYXhSYWRpdXMyICsgMC4wMDVmLCBhbmdsZSksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbMl0gPSBMb2NhbFRvR2xvYmFsKFV0aWxpdHkuUm90YXRlQXJvdW5kUG9pbnQoc3dlZXAsIF9WMi5Mb2NhdGlvbiwgLU1hdGguUEkgLyAxODAuMCAqIDEwLjApLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoX09yaWVudGF0aW9uID09IE9yaWVudGF0aW9ucy5CYWNrd2FyZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzd2VlcCA9IF9WMS5Mb2NhdGlvbiArIFV0aWxpdHkuUG9sYXJUb1JlY3Rhbmd1bGFyKG1heFJhZGl1czEgKyAwLjAyNWYsIGFuZ2xlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1swXSA9IExvY2FsVG9HbG9iYWwoVXRpbGl0eS5Sb3RhdGVBcm91bmRQb2ludChzd2VlcCwgX1YxLkxvY2F0aW9uLCBNYXRoLlBJIC8gMTgwLjAgKiAxMC4wKSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1sxXSA9IExvY2FsVG9HbG9iYWwoX1YxLkxvY2F0aW9uICsgVXRpbGl0eS5Qb2xhclRvUmVjdGFuZ3VsYXIobWF4UmFkaXVzMSArIDAuMDA1ZiwgYW5nbGUpLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzWzJdID0gTG9jYWxUb0dsb2JhbChVdGlsaXR5LlJvdGF0ZUFyb3VuZFBvaW50KHN3ZWVwLCBfVjEuTG9jYXRpb24sIC1NYXRoLlBJIC8gMTgwLjAgKiAxMC4wKSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBnLkZpbGxQb2x5Z29uKG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMCwgMCwgMCksIHBvaW50cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gTGFiZWw7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KGxhYmVsKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm94ID0gZy5NZWFzdXJlU3RyaW5nKGxhYmVsLCBMYWJlbEZvbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3godG9wU3RhcnQuWCArICh0b3BGaW5pc2guWCAtIHRvcFN0YXJ0LlgpIC8gMiAtIGJveC5XaWR0aCAvIDIgLSAwLjc1ICogYm94LldpZHRoICogc2luLCB0b3BTdGFydC5ZICsgKHRvcEZpbmlzaC5ZIC0gdG9wU3RhcnQuWSkgLyAyIC0gYm94LkhlaWdodCAvIDIgKyAwLjc1ICogYm94LkhlaWdodCAqIGNvcywgYm94LldpZHRoLCBib3guSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICBnLkRyYXdTdHJpbmcobGFiZWwsIExhYmVsRm9udCwgTGFiZWxCcnVzaENvbG9yLCBib3VuZHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfc2hvd0luZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3godG9wU3RhcnQuWCArICh0b3BGaW5pc2guWCAtIHRvcFN0YXJ0LlgpIC8gMiwgdG9wU3RhcnQuWSArICh0b3BGaW5pc2guWSAtIHRvcFN0YXJ0LlkpIC8gMiwgMTAsIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3ggPSAoYm91bmRzLkxlZnQgKyBib3VuZHMuUmlnaHQpIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3kgPSAoYm91bmRzLkJvdHRvbSArIGJvdW5kcy5Ub3ApIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE1hdGguTWF4KGJvdW5kcy5XaWR0aCwgYm91bmRzLkhlaWdodCkgLyAyICsgNTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmIgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3goY3ggKyByICogTWF0aC5Db3MoSW5kZXhBbmdsZSkgLSA1LCBjeSArIHIgKiBNYXRoLlNpbihJbmRleEFuZ2xlKSAtIDUsIDEwLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZy5EcmF3U3RyaW5nKFBhcmVudEluZGV4LlRvU3RyaW5nKCksIEluZGV4Rm9udCwgSW5kZXhCcnVzaENvbG9yLCBiYik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdyYXBoaWNzTGF5ZXIuQm94IExvY2FsVG9HbG9iYWwoVmVjdG9yIGxvY2FsLCBpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KHdpZHRoICogbG9jYWwuWCwgaGVpZ2h0ICogbG9jYWwuWSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBIaXQoZG91YmxlIHgsIGRvdWJsZSB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgTWVldHMoRWRnZSBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfVjEgPT0gb3RoZXIuVjEgfHxcclxuICAgICAgICAgICAgICAgICAgIF9WMiA9PSBvdGhlci5WMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgX1YxID09IG90aGVyLlYyIHx8XHJcbiAgICAgICAgICAgICAgICAgICBfVjIgPT0gb3RoZXIuVjI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgVmVydGV4IFYxXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9WMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX1YxID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBWZXJ0ZXggVjJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX1YyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfVjIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIE9yaWVudGF0aW9ucyBPcmllbnRhdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfT3JpZW50YXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9PcmllbnRhdGlvbiA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIFVwZGF0ZVN0eWxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgVXBkYXRlU3R5bGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFN0eWxlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICBTdHlsZSA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG4gICAgICAgICAgICBTdHlsZSA9IHNiLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgZmxvYXQgVGhpY2tuZXNzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlja25lc3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF90aGlja25lc3MgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIEdyYXBoaWNzTGF5ZXIuQVJHQiBDb2xvclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfQ29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9Db2xvciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgX3BlbkNvbG9yID0gX0NvbG9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1NlbGVjdGVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Jc1NlbGVjdGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gX0lzU2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIF9Jc1NlbGVjdGVkID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgQ29sb3IgPSBfSXNTZWxlY3RlZCA/IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoNTAsIDIwNSwgNTApIDogbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigwLCAwLCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIGludCBNdWx0aXBsaWNpdHlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX011bHRpcGxpY2l0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX011bHRpcGxpY2l0eSA9IE1hdGguTWF4KDEsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTdHlsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfc3R5bGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzdHlsZS5Db250YWlucyhcIn5+fH58fn5cIikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gc3R5bGUuU3BsaXQobmV3IHN0cmluZ1tdIHsgXCJ+fnx+fH5+XCIgfSwgU3RyaW5nU3BsaXRPcHRpb25zLk5vbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5MZW5ndGggPj0gMilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlID0gcGFydHNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIExhYmVsID0gcGFydHNbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzdHlsZS5TdGFydHNXaXRoKFwiK1wiKSAmJiAhc3RyaW5nLklzTnVsbE9yRW1wdHkoX3N0eWxlKSlcclxuICAgICAgICAgICAgICAgICAgICBfc3R5bGUgKz0gXCIsIFwiICsgc3R5bGUuVHJpbVN0YXJ0KCcrJyk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgX3N0eWxlID0gc3R5bGUuVHJpbVN0YXJ0KCcrJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTGFiZWwgeyBnZXQ7IHNldDsgfVxyXG4gICBcclxuICAgICAgICBWZXJ0ZXggX1YxO1xyXG4gICAgICAgIFZlcnRleCBfVjI7XHJcbiAgICAgICAgT3JpZW50YXRpb25zIF9PcmllbnRhdGlvbjtcclxuICAgICAgICBmbG9hdCBfdGhpY2tuZXNzID0gNDtcclxuICAgICAgICBHcmFwaGljc0xheWVyLkFSR0IgX0NvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigwLCAwLCAwKTtcclxuICAgICAgICBHcmFwaGljc0xheWVyLkFSR0IgX3BlbkNvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigwLCAwLCAwKTtcclxuICAgICAgICBib29sIF9Jc1NlbGVjdGVkO1xyXG4gICAgICAgIGludCBfTXVsdGlwbGljaXR5O1xyXG4gICAgICAgIHN0cmluZyBfc3R5bGU7XHJcbiAgICAgICAgYm9vbCBfc2hvd0luZGV4ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgVG9nZ2xlSW5kZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3Nob3dJbmRleCA9ICFfc2hvd0luZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBSb3RhdGVJbmRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJbmRleEFuZ2xlICs9IE1hdGguUEkgLyAxNjtcclxuICAgICAgICAgICAgaWYgKEluZGV4QW5nbGUgPj0gMiAqIE1hdGguUEkpXHJcbiAgICAgICAgICAgICAgICBJbmRleEFuZ2xlID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JhcGggOiBHcmFwaGljc0xheWVyLklQYWludGFibGVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgY29uc3Qgc3RyaW5nIEdyYXBoRXh0ZW5zaW9uID0gXCIuZ3JhcGhcIjtcclxuICAgICAgICBwdWJsaWMgY29uc3Qgc3RyaW5nIEVkZ2VXZWlnaHRFeHRlbnNpb24gPSBcIi5lZGdlIHdlaWdodFwiO1xyXG5cclxuICAgICAgICBMaXN0PFZlcnRleD4gX3ZlcnRpY2VzID0gbmV3IExpc3Q8VmVydGV4PigpO1xyXG4gICAgICAgIExpc3Q8RWRnZT4gX2VkZ2VzID0gbmV3IExpc3Q8RWRnZT4oKTtcclxuICAgICAgICBvYmplY3QgX01vZGlmeUxpc3RzVG9rZW4gPSBuZXcgb2JqZWN0KCk7XHJcblxyXG4gICAgICAgIHN0cmluZyBfRmlsZU5hbWUgPSBudWxsO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0RpcmVjdGVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpHcmFwaHMuRWRnZT4oX2VkZ2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLkVkZ2UsIGJvb2w+KShlID0+IGUuT3JpZW50YXRpb24gIT0gRWRnZS5PcmllbnRhdGlvbnMuTm9uZSkpOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxJSGl0dGFibGU+IFNlbGVjdGVkSXRlbXNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJdGVtcyA9IG5ldyBMaXN0PElIaXR0YWJsZT4oKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBTZWxlY3RlZFZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1zLkFkZChpKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBTZWxlY3RlZEVkZ2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1zLkFkZChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFZlcnRleD4gU2VsZWN0ZWRWZXJ0aWNlc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oX3ZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlcnRleCwgYm9vbD4pKHYgPT4gdi5Jc1NlbGVjdGVkKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PEVkZ2U+IFNlbGVjdGVkRWRnZXNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkdyYXBocy5FZGdlPihfZWRnZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuRWRnZSwgYm9vbD4pKGUgPT4gZS5Jc1NlbGVjdGVkKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljc0xheWVyLkJveCBCb3VuZGluZ1JlY3RhbmdsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gZG91YmxlLk1heFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByaWdodCA9IGRvdWJsZS5NaW5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gZG91YmxlLk1heFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBib3R0b20gPSBkb3VibGUuTWluVmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSBNYXRoLk1pbihsZWZ0LCB2LkxvY2FsQm91bmRzLkxlZnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodCA9IE1hdGguTWF4KHJpZ2h0LCB2LkxvY2FsQm91bmRzLlJpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gTWF0aC5NaW4odG9wLCB2LkxvY2FsQm91bmRzLlRvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbSA9IE1hdGguTWF4KGJvdHRvbSwgdi5Mb2NhbEJvdW5kcy5Cb3R0b20pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaGljc0xheWVyLkJveChsZWZ0LCB0b3AsIHJpZ2h0IC0gbGVmdCwgYm90dG9tIC0gdG9wKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoaWNzTGF5ZXIuQm94IFNlbGVjdGVkQm91bmRpbmdSZWN0YW5nbGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3YgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KFNlbGVjdGVkVmVydGljZXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN2LkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJvdW5kaW5nUmVjdGFuZ2xlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gZG91YmxlLk1heFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByaWdodCA9IGRvdWJsZS5NaW5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gZG91YmxlLk1heFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBib3R0b20gPSBkb3VibGUuTWluVmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHN2KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IE1hdGguTWluKGxlZnQsIHYuTG9jYWxCb3VuZHMuTGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gTWF0aC5NYXgocmlnaHQsIHYuTG9jYWxCb3VuZHMuUmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBNYXRoLk1pbih0b3AsIHYuTG9jYWxCb3VuZHMuVG9wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0gTWF0aC5NYXgoYm90dG9tLCB2LkxvY2FsQm91bmRzLkJvdHRvbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KGxlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0LCBib3R0b20gLSB0b3ApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9GaWxlTmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX0ZpbGVOYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFZlcnRleD4gVmVydGljZXNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3ZlcnRpY2VzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxFZGdlPiBFZGdlc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfZWRnZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFBhcmFtZXRlcnNEaXJ0eSB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBQYXJhbWV0ZXJzRGlydHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoKFNlcmlhbGl6YXRpb25HcmFwaCBnKVxyXG4gICAgICAgICAgICA6IHRoaXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3ZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpHcmFwaHMuU2VyaWFsaXphdGlvblZlcnRleCxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KGcuVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuU2VyaWFsaXphdGlvblZlcnRleCwgZ2xvYmFsOjpHcmFwaHMuVmVydGV4PikodiA9PiBuZXcgVmVydGV4KHYpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIF9lZGdlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25FZGdlLGdsb2JhbDo6R3JhcGhzLkVkZ2U+KGcuRWRnZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuU2VyaWFsaXphdGlvbkVkZ2UsIGdsb2JhbDo6R3JhcGhzLkVkZ2U+KShlID0+IG5ldyBFZGdlKGUsIF92ZXJ0aWNlcykpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgTmFtZSA9IGcuTmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaChJRW51bWVyYWJsZTxWZXJ0ZXg+IHZlcnRpY2VzLCBJRW51bWVyYWJsZTxFZGdlPiBlZGdlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF92ZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6R3JhcGhzLlZlcnRleD4odmVydGljZXMpO1xyXG4gICAgICAgICAgICBfZWRnZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkdyYXBocy5FZGdlPihlZGdlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGgoQWxnb3JpdGhtcy5HcmFwaCBnLCBMaXN0PFZlY3Rvcj4gcG9zaXRpb24sIGJvb2wgZGlyZWN0ZWQgPSB0cnVlKVxyXG4gICAgICAgICAgICA6IHRoaXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGcuVmVydGV4V2VpZ2h0ICE9IG51bGwgJiYgZy5WZXJ0ZXhXZWlnaHQuQ291bnQgPT0gZy5OKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfdmVydGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpHcmFwaHMuVmVydGV4PihnLlZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpHcmFwaHMuVmVydGV4PikodiA9PiBuZXcgVmVydGV4KHBvc2l0aW9uW3ZdLlgsIHBvc2l0aW9uW3ZdLlksIGcuVmVydGV4V2VpZ2h0W3ZdLlRvU3RyaW5nKCkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfdmVydGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpHcmFwaHMuVmVydGV4PihnLlZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpHcmFwaHMuVmVydGV4PikodiA9PiBuZXcgVmVydGV4KHBvc2l0aW9uW3ZdLlgsIHBvc2l0aW9uW3ZdLlkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX2VkZ2VzID0gbmV3IExpc3Q8RWRnZT4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZy5OOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGcuTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnLkRpcmVjdGVkW2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2VkZ2VzLkFkZChuZXcgRWRnZShfdmVydGljZXNbaV0sIF92ZXJ0aWNlc1tqXSwgRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChnLkFkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2VkZ2VzLkFkZChuZXcgRWRnZShfdmVydGljZXNbal0sIF92ZXJ0aWNlc1tpXSwgRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChnLkFkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2VkZ2VzLkFkZChuZXcgRWRnZShfdmVydGljZXNbaV0sIF92ZXJ0aWNlc1tqXSwgRWRnZS5PcmllbnRhdGlvbnMuTm9uZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUGFpbnQoR3JhcGhpY3NMYXllci5JR3JhcGhpY3MgZywgaW50IHdpZHRoLCBpbnQgaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChQYXJhbWV0ZXJzRGlydHkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyYXBoID0gbmV3IEFsZ29yaXRobXMuR3JhcGgoR2V0RWRnZVdlaWdodHMoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBWZXJ0aWNlcy5Db3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBWZXJ0aWNlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBWZXJ0aWNlc1tpXS5Jc1VuaXZlcnNhbCA9IGdyYXBoLkRlZ3JlZShpKSA9PSBuIC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUGFyYW1ldGVyc0RpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGpqID0gMDtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2LlBhcmVudEluZGV4ID0gamorKztcclxuICAgICAgICAgICAgICAgICAgICB2LlBhaW50KGcsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGpqID0gMDtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9lZGdlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBlLlBhcmVudEluZGV4ID0gamorKztcclxuICAgICAgICAgICAgICAgICAgICBlLlBhaW50KGcsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IEdldEVkZ2VXZWlnaHRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB3ZWlnaHRzID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfdmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgX3ZlcnRpY2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRWRnZSBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChFZGdlRXhpc3RzKF92ZXJ0aWNlc1tpXSwgX3ZlcnRpY2VzW2pdLCBvdXQgZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHMuQWRkKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEVkZ2VFeGlzdHMoX3ZlcnRpY2VzW2pdLCBfdmVydGljZXNbaV0sIG91dCBlKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLk9yaWVudGF0aW9uID09IEVkZ2UuT3JpZW50YXRpb25zLk5vbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzLkFkZCgxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cy5BZGQoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHMuQWRkKDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gd2VpZ2h0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE1vZGlmeU9yaWVudGF0aW9uKExpc3Q8aW50PiBlZGdlV2VpZ2h0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfdmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgX3ZlcnRpY2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSBlZGdlV2VpZ2h0c1trXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHcgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gR2V0RWRnZShfdmVydGljZXNbaV0sIF92ZXJ0aWNlc1tqXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5WMSA9PSBfdmVydGljZXNbaV0gJiYgZS5WMiA9PSBfdmVydGljZXNbal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3IDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLk9yaWVudGF0aW9uID0gRWRnZS5PcmllbnRhdGlvbnMuQmFja3dhcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5PcmllbnRhdGlvbiA9IEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodyA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5PcmllbnRhdGlvbiA9IEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5PcmllbnRhdGlvbiA9IEVkZ2UuT3JpZW50YXRpb25zLkJhY2t3YXJkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFBhcmFtZXRlcnNEaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBDbG9uZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcyA9IEdyYXBoc0NvcmUuQ29tcGFjdFNlcmlhbGl6ZXIuU2VyaWFsaXplKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgZyA9IEdyYXBoc0NvcmUuQ29tcGFjdFNlcmlhbGl6ZXIuRGVzZXJpYWxpemUocyk7XHJcbiAgICAgICAgICAgIGlmIChnICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBnLlBhcmFtZXRlcnNEaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKFwiY2xvbmUgaXMgbnVsbFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUhpdHRhYmxlIEhpdFRlc3QoZG91YmxlIHgsIGRvdWJsZSB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodi5IaXQoeCwgeSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9lZGdlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuSGl0KHgsIHkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVuc2VsZWN0QWxsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFVuc2VsZWN0QWxsVmVydGljZXMoKTtcclxuICAgICAgICAgICAgVW5zZWxlY3RBbGxFZGdlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVW5zZWxlY3RBbGxWZXJ0aWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB2LklzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVuc2VsZWN0QWxsRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2VkZ2VzKVxyXG4gICAgICAgICAgICAgICAgZS5Jc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZWxlY3RFZGdlcyhJRW51bWVyYWJsZTxFZGdlPiBlZGdlcywgYm9vbCBzeW1tZXRyaWNEaWZmZXJlbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVW5zZWxlY3RBbGxWZXJ0aWNlcygpO1xyXG4gICAgICAgICAgICBpZiAoIXN5bW1ldHJpY0RpZmZlcmVuY2UpXHJcbiAgICAgICAgICAgICAgICBVbnNlbGVjdEFsbEVkZ2VzKCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBlZGdlcylcclxuICAgICAgICAgICAgICAgIGUuSXNTZWxlY3RlZCA9IHN5bW1ldHJpY0RpZmZlcmVuY2UgPyAhZS5Jc1NlbGVjdGVkIDogdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNlbGVjdFZlcnRpY2VzKElFbnVtZXJhYmxlPFZlcnRleD4gdmVydGljZXMsIGJvb2wgc3ltbWV0cmljRGlmZmVyZW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFVuc2VsZWN0QWxsRWRnZXMoKTtcclxuICAgICAgICAgICAgaWYgKCFzeW1tZXRyaWNEaWZmZXJlbmNlKVxyXG4gICAgICAgICAgICAgICAgVW5zZWxlY3RBbGxWZXJ0aWNlcygpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB2LklzU2VsZWN0ZWQgPSBzeW1tZXRyaWNEaWZmZXJlbmNlID8gIXYuSXNTZWxlY3RlZCA6IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNlbGVjdE9iamVjdHMoTGlzdDxHcmFwaGljc0xheWVyLkJveD4gc2VsZWN0aW9uUG9pbnRzLCBib29sIHN5bW1ldHJpY0RpZmZlcmVuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG5ldyBQb2x5Z29uQ29udGFpbmVyKHNlbGVjdGlvblBvaW50cy5Ub0FycmF5KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB2ZXJ0aWNlc0luUG9seWdvbiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpHcmFwaHMuVmVydGV4PihfdmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVydGV4LCBib29sPikodiA9PiBib3VuZHMuQ29udGFpbnMobmV3IEdyYXBoaWNzTGF5ZXIuQm94KHYuWCwgdi5ZKSkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodmVydGljZXNJblBvbHlnb24uQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFNlbGVjdFZlcnRpY2VzKHZlcnRpY2VzSW5Qb2x5Z29uLCBzeW1tZXRyaWNEaWZmZXJlbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWRnZXNIaXR0aW5nUG9seWdvbiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpHcmFwaHMuRWRnZT4oX2VkZ2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLkVkZ2UsIGJvb2w+KShlID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNlbGVjdGlvblBvaW50cy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBzZWxlY3Rpb25Qb2ludHNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gc2VsZWN0aW9uUG9pbnRzWyhpICsgMSkgJSBzZWxlY3Rpb25Qb2ludHMuQ291bnRdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChVdGlsaXR5LkhhdmVJbnRlcnNlY3Rpb24oc3RhcnQsIGVuZCwgZS5WMS5Mb2NhdGlvbiwgZS5WMi5Mb2NhdGlvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFNlbGVjdEVkZ2VzKGVkZ2VzSGl0dGluZ1BvbHlnb24sIHN5bW1ldHJpY0RpZmZlcmVuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBBZGRWZXJ0ZXgoVmVydGV4IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX3Nob3dWZXJ0ZXhJbmRpY2VzKVxyXG4gICAgICAgICAgICAgICAgdi5Ub2dnbGVJbmRleCgpO1xyXG4gICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgIF92ZXJ0aWNlcy5BZGQodik7XHJcblxyXG4gICAgICAgICAgICBQYXJhbWV0ZXJzRGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgUmVtb3ZlVmVydGV4KFZlcnRleCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG5laWdoYm9ycyA9IEZpbmROZWlnaGJvcnModik7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB4IGluIG5laWdoYm9ycylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmVtb3ZlRWRnZSh2LCB4KTtcclxuICAgICAgICAgICAgICAgIFJlbW92ZUVkZ2UoeCwgdik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAgX3ZlcnRpY2VzLlJlbW92ZSh2KTtcclxuXHJcbiAgICAgICAgICAgIFBhcmFtZXRlcnNEaXJ0eSA9IG5laWdoYm9ycy5Db3VudCA+IDA7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmVpZ2hib3JzLkNvdW50ID4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgQWRkRWRnZShWZXJ0ZXggdjEsIFZlcnRleCB2MiwgaW50IG11bHRpcGxpY2l0eSA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQWRkRWRnZSh2MSwgdjIsIEVkZ2UuT3JpZW50YXRpb25zLk5vbmUsIG11bHRpcGxpY2l0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEFkZEVkZ2UoVmVydGV4IHYxLCBWZXJ0ZXggdjIsIEVkZ2UuT3JpZW50YXRpb25zIG9yaWVudGF0aW9uLCBpbnQgbXVsdGlwbGljaXR5ID0gMSwgZmxvYXQgdGhpY2tuZXNzID0gMywgc3RyaW5nIHN0eWxlID0gXCJcIiwgc3RyaW5nIGxhYmVsID0gXCJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2MSA9PSB2MilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gTm90IGFsbG93aW5nIHNlbGYtbG9vcHMgZm9yIG5vdy5cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFFZGdlRXhpc3RzKHYxLCB2MikgJiYgIUVkZ2VFeGlzdHModjIsIHYxKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVkZ2UgPSBuZXcgRWRnZSh2MSwgdjIsIG9yaWVudGF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBlZGdlLk11bHRpcGxpY2l0eSA9IG11bHRpcGxpY2l0eTtcclxuICAgICAgICAgICAgICAgICAgICBlZGdlLlRoaWNrbmVzcyA9IHRoaWNrbmVzcztcclxuICAgICAgICAgICAgICAgICAgICBlZGdlLlN0eWxlID0gc3R5bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZS5MYWJlbCA9IGxhYmVsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfc2hvd0VkZ2VJbmRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlLlRvZ2dsZUluZGV4KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2VkZ2VzLkFkZChlZGdlKTtcclxuICAgICAgICAgICAgICAgICAgICBQYXJhbWV0ZXJzRGlydHkgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgUmVtb3ZlRWRnZShWZXJ0ZXggdjEsIFZlcnRleCB2MilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8RWRnZT4gdG9SZW1vdmU7XHJcblxyXG4gICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdG9SZW1vdmUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6R3JhcGhzLkVkZ2U+KF9lZGdlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5FZGdlLCBib29sPikoZSA9PiBlLlYxID09IHYxICYmIGUuVjIgPT0gdjIpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gdG9SZW1vdmUpXHJcbiAgICAgICAgICAgICAgICBfZWRnZXMuUmVtb3ZlKGUpO1xyXG5cclxuICAgICAgICAgICAgUGFyYW1ldGVyc0RpcnR5ID0gdG9SZW1vdmUuQ291bnQgPiAwO1xyXG4gICAgICAgICAgICByZXR1cm4gdG9SZW1vdmUuQ291bnQgPiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBFZGdlRXhpc3RzKFZlcnRleCB2MSwgVmVydGV4IHYyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRWRnZSBlZGdlO1xyXG4gICAgICAgICAgICByZXR1cm4gRWRnZUV4aXN0cyh2MSwgdjIsIG91dCBlZGdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgRWRnZUV4aXN0cyhWZXJ0ZXggdjEsIFZlcnRleCB2Miwgb3V0IEVkZ2UgZWRnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVkZ2UgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9lZGdlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBlZGdlID0gZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5WMSA9PSB2MSAmJiBlLlYyID09IHYyICYmIChlLk9yaWVudGF0aW9uID09IEVkZ2UuT3JpZW50YXRpb25zLk5vbmUgfHwgZS5PcmllbnRhdGlvbiA9PSBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLlYxID09IHYyICYmIGUuVjIgPT0gdjEgJiYgZS5PcmllbnRhdGlvbiA9PSBFZGdlLk9yaWVudGF0aW9ucy5CYWNrd2FyZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBFZGdlIEdldEVkZ2UoVmVydGV4IHYxLCBWZXJ0ZXggdjIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2VkZ2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLlYxID09IHYxICYmIGUuVjIgPT0gdjIgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5WMSA9PSB2MiAmJiBlLlYyID09IHYxKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBJbmR1Y2VkU3ViZ3JhcGgoTGlzdDxWZXJ0ZXg+IHZlcnRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGluZHVjZWQgPSBuZXcgR3JhcGgoKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICBpbmR1Y2VkLkFkZFZlcnRleCh2KTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2MSBpbiBpbmR1Y2VkLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdjIgaW4gaW5kdWNlZC5WZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBFZGdlIGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEVkZ2VFeGlzdHModjEsIHYyLCBvdXQgZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZHVjZWQuQWRkRWRnZSh2MSwgdjIsIGUuT3JpZW50YXRpb24gIT0gRWRnZS5PcmllbnRhdGlvbnMuTm9uZSA/IEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQgOiBFZGdlLk9yaWVudGF0aW9ucy5Ob25lLCBlLk11bHRpcGxpY2l0eSwgZS5UaGlja25lc3MsIGUuU3R5bGUsIGUuTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW5kdWNlZC5DbG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRGlzam9pbnRVbmlvbihHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gZy5WZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIEFkZFZlcnRleCh2KTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGcuRWRnZXMpXHJcbiAgICAgICAgICAgICAgICBBZGRFZGdlKGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBBZGRFZGdlKEVkZ2UgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFkZEVkZ2UoZS5WMSwgZS5WMiwgZS5PcmllbnRhdGlvbiwgTWF0aC5NYXgoMSwgZS5NdWx0aXBsaWNpdHkpLCBlLlRoaWNrbmVzcywgZS5TdHlsZSwgZS5MYWJlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxWZXJ0ZXg+IEZpbmROZWlnaGJvcnMoVmVydGV4IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gbmV3IExpc3Q8VmVydGV4PigpO1xyXG5cclxuICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9lZGdlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5WMSA9PSB2KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnMuQWRkKGUuVjIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLlYyID09IHYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9ycy5BZGQoZS5WMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZWlnaGJvcnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBUcmFuc2xhdGUoVmVjdG9yIG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdi5YICs9IG9mZnNldC5YO1xyXG4gICAgICAgICAgICAgICAgICAgIHYuWSArPSBvZmZzZXQuWTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBfc2hvd1ZlcnRleEluZGljZXM7XHJcbiAgICAgICAgYm9vbCBfc2hvd0VkZ2VJbmRpY2VzO1xyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRvZ2dsZUVkZ2VJbmRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9zaG93RWRnZUluZGljZXMgPSAhX3Nob3dFZGdlSW5kaWNlcztcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGEgaW4gRWRnZXMpXHJcbiAgICAgICAgICAgICAgICBhLlRvZ2dsZUluZGV4KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBUb2dnbGVWZXJ0ZXhJbmRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9zaG93VmVydGV4SW5kaWNlcyA9ICFfc2hvd1ZlcnRleEluZGljZXM7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhIGluIFZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgYS5Ub2dnbGVJbmRleCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBHcmFwaGljc0xheWVyO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uSU87XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgR3JhcGhzQ29yZTtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdyYXBoQ2FudmFzIDogR3JhcGhpY3NMYXllci5JUGFpbnRhYmxlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxHcmFwaD4gR3JhcGhNb2RpZmllZDtcclxuICAgICAgICBwdWJsaWMgZXZlbnQgQWN0aW9uPHN0cmluZz4gTmFtZU1vZGlmaWVkO1xyXG5cclxuICAgICAgICBjb25zdCBpbnQgRGVmYXVsdEJhc2VWaWV3U2NhbGUgPSA4MDA7XHJcbiAgICAgICAgcHVibGljIGludCBCYXNlVmlld1NjYWxlID0gRGVmYXVsdEJhc2VWaWV3U2NhbGU7XHJcbiAgICAgICAgY29uc3QgaW50IE1heFpvb21TY2FsZSA9IDYwMDA7XHJcbiAgICAgICAgZG91YmxlIFpvb21EZWx0YSA9IDAuMTU7XHJcbiAgICAgICAgZG91YmxlIE1pblpvb20gPSAwLjE1O1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZXRab29tRGVsdGEoZG91YmxlIGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBab29tRGVsdGEgPSBkO1xyXG4gICAgICAgICAgICBNaW5ab29tID0gZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgX3pvb21GaXROZXh0UGFpbnQ7XHJcbiAgICAgICAgYm9vbCBfc25hcFRvR3JpZCA9IHRydWU7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkb3VibGUgX2dyaWRTdGVwID0gMC4wNDtcclxuICAgICAgICBib29sIF9kcmF3R3JpZCA9IHRydWU7XHJcbiAgICAgICAgcHVibGljIGJvb2wgU25hcFRvR3JpZCB7IGdldCB7IHJldHVybiBfc25hcFRvR3JpZDsgfSBzZXQgeyB2YXIgbmVlZFJlZHJhdyA9IHZhbHVlICYmICFfc25hcFRvR3JpZDsgX3NuYXBUb0dyaWQgPSB2YWx1ZTsgaWYgKG5lZWRSZWRyYXcpIEludmFsaWRhdGUoKTsgfSB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBHcmlkU3RlcCB7IGdldCB7IHJldHVybiBfZ3JpZFN0ZXA7IH0gc2V0IHsgdmFyIG5lZWRSZWRyYXcgPSBTbmFwVG9HcmlkICYmIHZhbHVlICE9IF9ncmlkU3RlcDsgX2dyaWRTdGVwID0gdmFsdWU7IGlmIChuZWVkUmVkcmF3KSBJbnZhbGlkYXRlKCk7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBib29sIERyYXdHcmlkIHsgZ2V0IHsgcmV0dXJuIF9kcmF3R3JpZDsgfSBzZXQgeyB2YXIgbmVlZFJlZHJhdyA9IF9kcmF3R3JpZCAhPSB2YWx1ZTsgX2RyYXdHcmlkID0gdmFsdWU7IGlmIChuZWVkUmVkcmF3KSBJbnZhbGlkYXRlKCk7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEhhc1BhaW50ZWQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIEdyYXBoIF9ncmFwaDtcclxuXHJcbiAgICAgICAgaW50IFdpZHRoIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBpbnQgSGVpZ2h0IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBkcmFnZ2luZyB2ZXJ0ZXggdmFyaWFibGVzXHJcbiAgICAgICAgVmVydGV4IF9EcmFnZ2VkVmVydGV4ID0gbnVsbDtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gZHJhZ2dpbmcgc2VsZWN0aW9uIHZhcmlhYmxlc1xyXG4gICAgICAgIExpc3Q8Qm94PiBfc2VsZWN0aW9uUG9pbnRzID0gbmV3IExpc3Q8Qm94PigpO1xyXG4gICAgICAgIG9iamVjdCBfU2VsZWN0aW9uUG9pbnRzVG9rZW4gPSBuZXcgb2JqZWN0KCk7XHJcbiAgICAgICAgYm9vbCBfY29udHJvbFdhc0Rvd247XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIGNoaWxkcmVuIGl0ZW1zXHJcbiAgICAgICAgcHVibGljIEdyYXBoIEdyYXBoIHsgZ2V0IHsgcmV0dXJuIF9ncmFwaDsgfSB9XHJcbiAgICAgICAgSUNhbnZhcyBfY2FudmFzO1xyXG4gICAgICAgIHB1YmxpYyBJQ2FudmFzIENhbnZhcyBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfY2FudmFzOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfY2FudmFzID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgX2NhbnZhcy5Nb3VzZU1vdmVkICs9IE9uTW91c2VNb3ZlO1xyXG4gICAgICAgICAgICAgICAgX2NhbnZhcy5Nb3VzZUJ1dHRvbkRvd24gKz0gT25Nb3VzZURvd247XHJcbiAgICAgICAgICAgICAgICBfY2FudmFzLk1vdXNlQnV0dG9uVXAgKz0gT25Nb3VzZVVwO1xyXG4gICAgICAgICAgICAgICAgX2NhbnZhcy5Nb3VzZUJ1dHRvbkRvdWJsZUNsaWNrZWQgKz0gT25Nb3VzZURvdWJsZUNsaWNrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgZG91YmxlIFpvb21cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gX1pvb20pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIF9ab29tID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2NhbGUgPSAoaW50KShfWm9vbSAqIEJhc2VWaWV3U2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjYWxlID4gTWF4Wm9vbVNjYWxlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlID0gTWF4Wm9vbVNjYWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIF9ab29tID0gc2NhbGUgLyBCYXNlVmlld1NjYWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIFZpZXdTY2FsZSA9IHNjYWxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgVmlld1NjYWxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF92aWV3U2NhbGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJvdGVjdGVkIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gX3ZpZXdTY2FsZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgX3ZpZXdTY2FsZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzRW1wdHkgeyBnZXQgeyByZXR1cm4gX2dyYXBoLlZlcnRpY2VzLkNvdW50IDw9IDA7IH0gfVxyXG5cclxuICAgICAgICBTdGF0ZXMgX3N0YXRlID0gU3RhdGVzLklkbGU7XHJcbiAgICAgICAgaW50IF92aWV3U2NhbGUgPSBEZWZhdWx0QmFzZVZpZXdTY2FsZTtcclxuICAgICAgICBkb3VibGUgX1pvb20gPSAxLjA7XHJcbiAgICAgICAgRnVuYzxzdHJpbmcsIEdyYXBoPiBfc2Vjb25kYXJ5Q29udmVydGVyO1xyXG5cclxuICAgICAgICBMaXN0PEhpc3RvcmljYWxHcmFwaD4gX2hpc3RvcnkgPSBuZXcgTGlzdDxIaXN0b3JpY2FsR3JhcGg+KCk7XHJcbiAgICAgICAgaW50IF9oaXN0b3J5SW5kZXggPSAwO1xyXG5cclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgQVJHQiBTZWxlY3Rpb25QZW5Db2xvciA9IG5ldyBBUkdCKDAsIDAsIDI1NSk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEFSR0IgR3JpZFBlbkNvbG9yID0gbmV3IEFSR0IoNzUsIDAsIDEwLCAwKTtcclxuXHJcbiAgICAgICAgZW51bSBTdGF0ZXNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIElkbGUsXHJcbiAgICAgICAgICAgIERyYWdnaW5nVmVydGV4LFxyXG4gICAgICAgICAgICBEcmFnZ2luZ1NlbGVjdGlvblJlZ2lvbixcclxuICAgICAgICAgICAgRHJhZ2dpbmdTZWxlY3RlZFZlcnRpY2VzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgQVJHQiBCYWNrZ3JvdW5kQ29sb3IgPSBuZXcgQVJHQigweGY3LCAweGY3LCAweGY3KTtcclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoQ2FudmFzKEdyYXBoIGdyYXBoLCAgRnVuYzxzdHJpbmcsIEdyYXBoPiBzZWNvbmRhcnlDb252ZXJ0ZXIgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2dyYXBoID0gZ3JhcGggIT0gbnVsbCA/IGdyYXBoIDogbmV3IEdyYXBoKCk7XHJcbiAgICAgICAgICAgIF9zZWNvbmRhcnlDb252ZXJ0ZXIgPSBzZWNvbmRhcnlDb252ZXJ0ZXI7XHJcbiAgICAgICAgICAgIF9oaXN0b3J5LkFkZChuZXcgSGlzdG9yaWNhbEdyYXBoKCkgeyBHcmFwaCA9IF9ncmFwaC5DbG9uZSgpLCBab29tID0gX1pvb20sIFZpZXdTY2FsZSA9IF92aWV3U2NhbGUgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBJbnZhbGlkYXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChDYW52YXMgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIENhbnZhcy5JbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBHcmFwaENoYW5nZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9oaXN0b3J5LkNvdW50IC0gX2hpc3RvcnlJbmRleCAtIDEgPiAwKVxyXG4gICAgICAgICAgICAgICAgX2hpc3RvcnkuUmVtb3ZlUmFuZ2UoX2hpc3RvcnlJbmRleCArIDEsIF9oaXN0b3J5LkNvdW50IC0gX2hpc3RvcnlJbmRleCAtIDEpO1xyXG5cclxuICAgICAgICAgICAgX2hpc3RvcnkuQWRkKG5ldyBIaXN0b3JpY2FsR3JhcGgoKSB7IEdyYXBoID0gX2dyYXBoLkNsb25lKCksIFpvb20gPSBfWm9vbSwgVmlld1NjYWxlID0gX3ZpZXdTY2FsZSB9KTtcclxuICAgICAgICAgICAgX2hpc3RvcnlJbmRleCA9IF9oaXN0b3J5LkNvdW50IC0gMTtcclxuXHJcbiAgICAgICAgICAgIGlmIChHcmFwaE1vZGlmaWVkICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBHcmFwaE1vZGlmaWVkKEdyYXBoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIERvVW5kbygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2hpc3RvcnlJbmRleCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgX2hpc3RvcnlJbmRleC0tO1xyXG4gICAgICAgICAgICBPYmV5SGlzdG9yeSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIF9oaXN0b3J5SW5kZXggPiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBEb1JlZG8oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9oaXN0b3J5SW5kZXggPj0gX2hpc3RvcnkuQ291bnQgLSAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgX2hpc3RvcnlJbmRleCsrO1xyXG4gICAgICAgICAgICBPYmV5SGlzdG9yeSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIF9oaXN0b3J5SW5kZXggPCBfaGlzdG9yeS5Db3VudCAtIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9iZXlIaXN0b3J5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9ncmFwaCA9IF9oaXN0b3J5W19oaXN0b3J5SW5kZXhdLkdyYXBoLkNsb25lKCk7XHJcbiAgICAgICAgICAgIFZpZXdTY2FsZSA9IF9oaXN0b3J5W19oaXN0b3J5SW5kZXhdLlZpZXdTY2FsZTtcclxuICAgICAgICAgICAgWm9vbSA9IF9oaXN0b3J5W19oaXN0b3J5SW5kZXhdLlpvb207XHJcbiAgICAgICAgICAgIF9ncmFwaC5QYXJhbWV0ZXJzRGlydHkgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKEdyYXBoTW9kaWZpZWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIEdyYXBoTW9kaWZpZWQoR3JhcGgpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBhY3Rpb25zXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgU2F2ZShzdHJpbmcgbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9ncmFwaC5OYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7Ly8gX2dyYXBoLlNlcmlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICBcclxuICAgICAgICBwdWJsaWMgdm9pZCBEb1pvb20oaW50IGFtb3VudCwgQm94IGxvY2F0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHdpZHRoID0gV2lkdGg7XHJcbiAgICAgICAgICAgIGludCBoZWlnaHQgPSBIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgb2xkQ2VudGVyID0gbmV3IFZlY3RvcigoZG91YmxlKXdpZHRoIC8gKGRvdWJsZSlfdmlld1NjYWxlICogbG9jYXRpb24uWCwgKGRvdWJsZSloZWlnaHQgLyAoZG91YmxlKV92aWV3U2NhbGUgKiBsb2NhdGlvbi5ZKTtcclxuXHJcbiAgICAgICAgICAgIFpvb20gPSBNYXRoLk1heChNaW5ab29tLCBfWm9vbSArIFpvb21EZWx0YSAqIGFtb3VudCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2VudGVyID0gbmV3IFZlY3RvcigoZG91YmxlKXdpZHRoIC8gKGRvdWJsZSlfdmlld1NjYWxlICogbG9jYXRpb24uWCwgKGRvdWJsZSloZWlnaHQgLyAoZG91YmxlKV92aWV3U2NhbGUgKiBsb2NhdGlvbi5ZKTtcclxuXHJcbiAgICAgICAgICAgIF9ncmFwaC5UcmFuc2xhdGUoY2VudGVyIC0gb2xkQ2VudGVyKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvWm9vbUZpdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2dyYXBoLlZlcnRpY2VzLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFpvb20gPSAxO1xyXG4gICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbnQgd2lkdGggPSBXaWR0aDtcclxuICAgICAgICAgICAgaW50IGhlaWdodCA9IEhlaWdodDtcclxuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IF9ncmFwaC5TZWxlY3RlZEJvdW5kaW5nUmVjdGFuZ2xlO1xyXG4gICAgICAgICAgICB2YXIgYyA9IG5ldyBWZWN0b3IoYm91bmRzLkxlZnQgKyBib3VuZHMuV2lkdGggLyAyLCBib3VuZHMuVG9wICsgYm91bmRzLkhlaWdodCAvIDIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFjdHVhbCA9IE1hdGguTWluKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICBab29tID0gMC45ICogYWN0dWFsIC8gTWF0aC5NYXgoYm91bmRzLldpZHRoLCBib3VuZHMuSGVpZ2h0KSAvIEJhc2VWaWV3U2NhbGU7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2VudGVyID0gbmV3IFZlY3RvcigoZG91YmxlKXdpZHRoIC8gKGRvdWJsZSlfdmlld1NjYWxlICogMC41LCAoZG91YmxlKWhlaWdodCAvIChkb3VibGUpX3ZpZXdTY2FsZSAqIDAuNSk7XHJcbiAgICAgICAgICAgIF9ncmFwaC5UcmFuc2xhdGUoY2VudGVyIC0gYyk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb0RlbGV0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2dyYXBoLlNlbGVjdGVkVmVydGljZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICBfZ3JhcGguUmVtb3ZlVmVydGV4KHYpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoX2dyYXBoLlNlbGVjdGVkRWRnZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZ3JhcGguU2VsZWN0ZWRFZGdlcylcclxuICAgICAgICAgICAgICAgICAgICBfZ3JhcGguUmVtb3ZlRWRnZShlLlYxLCBlLlYyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvUmV2ZXJzZVNlbGVjdGVkRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9ncmFwaC5TZWxlY3RlZEVkZ2VzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2dyYXBoLlNlbGVjdGVkRWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9vID0gZS5PcmllbnRhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob28gPT0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgb28gPSBFZGdlLk9yaWVudGF0aW9ucy5CYWNrd2FyZDtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbyA9PSBFZGdlLk9yaWVudGF0aW9ucy5CYWNrd2FyZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgb28gPSBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlLk9yaWVudGF0aW9uID0gb287XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvUm90YXRlU2VsZWN0ZWRFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2dyYXBoLlNlbGVjdGVkRWRnZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZ3JhcGguU2VsZWN0ZWRFZGdlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb28gPSBlLk9yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbyA9PSBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbyA9IEVkZ2UuT3JpZW50YXRpb25zLkJhY2t3YXJkO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9vID09IEVkZ2UuT3JpZW50YXRpb25zLkJhY2t3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbyA9IEVkZ2UuT3JpZW50YXRpb25zLk5vbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob28gPT0gRWRnZS5PcmllbnRhdGlvbnMuTm9uZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgb28gPSBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlLk9yaWVudGF0aW9uID0gb287XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvQ3V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIERvQ29weSgpO1xyXG4gICAgICAgICAgICBEb0RlbGV0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBEb0NvcHkoYm9vbCB2ZXJib3NlID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaCA9ICBfZ3JhcGguSW5kdWNlZFN1YmdyYXBoKF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzKTtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBhY3RTZXJpYWxpemVyLlNlcmlhbGl6ZShoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvUGFzdGUoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcmFwaCBnID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKHMuQ29udGFpbnMoXCJ0aWt6cGljdHVyZVwiKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy9nID0gVGVYQ29udmVydGVyLkZyb21UaWt6KHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKENvbXBhY3RTZXJpYWxpemVyLkxvb2tzTGlrZUFTZXJpYWxpemVkR3JhcGgocykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGcgPSBDb21wYWN0U2VyaWFsaXplci5EZXNlcmlhbGl6ZShzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vZyA9IEdyYXBoLkRlc2VyaWFsaXplKHMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguRGlzam9pbnRVbmlvbihnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxzdHJpbmc+KHMuVHJpbSgpLlNwbGl0KCcgJyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBib29sPikoeCA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4LlN0YXJ0c1dpdGgoXCJbXCIpIHx8IGludC5UcnlQYXJzZSh4LCBvdXQgZCk7XHJcbiAgICAgICAgICAgICAgICB9KSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZyA9IEdyYXBoSU8uR3JhcGhGcm9tRWRnZVdlaWdodFN0cmluZyhzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLkRpc2pvaW50VW5pb24oZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZyA9IEdyYXBoSU8uR3JhcGhGcm9tR3JhcGg2KHMuVHJpbSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGcgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbXB0eSA9IF9ncmFwaC5WZXJ0aWNlcy5Db3VudCA8PSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguRGlzam9pbnRVbmlvbihnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbXB0eSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5hbWVNb2RpZmllZChnLk5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9Db21wbGVtZW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2dyYXBoLlNlbGVjdGVkVmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgX2dyYXBoLlNlbGVjdGVkVmVydGljZXMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdjEgPSBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdjIgPSBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlc1tqXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVkZ2VFeGlzdHMgPSBfZ3JhcGguRWRnZUV4aXN0cyh2MSwgdjIpIHx8IF9ncmFwaC5FZGdlRXhpc3RzKHYyLCB2MSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlZGdlRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlJlbW92ZUVkZ2UodjEsIHYyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlJlbW92ZUVkZ2UodjIsIHYxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLkFkZEVkZ2UodjEsIHYyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoIERvU3F1YXJlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gbmV3IEdyYXBoKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmVydGV4TWFwID0gbmV3IERpY3Rpb25hcnk8VmVydGV4LCBWZXJ0ZXg+KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9ncmFwaC5WZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgIHZhciB3ID0gbmV3IFZlcnRleCh2LlgsIHYuWSwgdi5MYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgZy5BZGRWZXJ0ZXgodyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVydGV4TWFwW3ZdID0gdztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX2dyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVW5pb248Z2xvYmFsOjpHcmFwaHMuVmVydGV4PihfZ3JhcGguRmluZE5laWdoYm9ycyh2KSxuZXdbXSB7IHYgfSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgcS5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZy5BZGRFZGdlKHZlcnRleE1hcFtxW2ldXSwgdmVydGV4TWFwW3Fbal1dKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoIERvTGluZUdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gbmV3IEdyYXBoKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZWRnZVRvQ2xpcXVlTWFwID0gbmV3IERpY3Rpb25hcnk8RWRnZSwgTGlzdDxWZXJ0ZXg+PigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZ3JhcGguRWRnZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbGlxdWUgPSBuZXcgTGlzdDxWZXJ0ZXg+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBlLk11bHRpcGxpY2l0eTsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gbmV3IFZlcnRleCgoZS5WMS5YICsgZS5WMi5YKSAvIDIsIChlLlYxLlkgKyBlLlYyLlkpIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgZy5BZGRWZXJ0ZXgodik7XHJcbiAgICAgICAgICAgICAgICAgICAgdi5MYWJlbCA9IGUuTGFiZWw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvdGhlciBpbiBjbGlxdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGcuQWRkRWRnZShvdGhlciwgdik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNsaXF1ZS5BZGQodik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZWRnZVRvQ2xpcXVlTWFwW2VdID0gY2xpcXVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9ncmFwaC5FZGdlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBfZ3JhcGguRWRnZXMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2dyYXBoLkVkZ2VzW2ldLk1lZXRzKF9ncmFwaC5FZGdlc1tqXSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdjEgaW4gZWRnZVRvQ2xpcXVlTWFwW19ncmFwaC5FZGdlc1tpXV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2MiBpbiBlZGdlVG9DbGlxdWVNYXBbX2dyYXBoLkVkZ2VzW2pdXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLkFkZEVkZ2UodjEsIHYyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb0NvbnRyYWN0U2VsZWN0ZWRTdWJncmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcztcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgeCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQXZlcmFnZTxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KHNlbGVjdGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlcnRleCwgZG91YmxlPikoeiA9PiB6LlgpKTtcclxuICAgICAgICAgICAgdmFyIHkgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkF2ZXJhZ2U8Z2xvYmFsOjpHcmFwaHMuVmVydGV4PihzZWxlY3RlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsIGRvdWJsZT4pKHogPT4gei5ZKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29udHJhY3RlZFZlcnRleCA9IG5ldyBWZXJ0ZXgoeCwgeSk7XHJcbiAgICAgICAgICAgIF9ncmFwaC5BZGRWZXJ0ZXgoY29udHJhY3RlZFZlcnRleCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6R3JhcGhzLlZlcnRleCxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KHNlbGVjdGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlcnRleCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+PikodiA9PiBfZ3JhcGguRmluZE5laWdoYm9ycyh2KSkpLkRpc3RpbmN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbmVpZ2hib3IgaW4gbmVpZ2hib3JzKVxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLkFkZEVkZ2UoY29udHJhY3RlZFZlcnRleCwgbmVpZ2hib3IpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gc2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguUmVtb3ZlVmVydGV4KHYpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgICBwdWJsaWMgdm9pZCBEb0luZGV4TGFiZWxpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBuZXcgQWxnb3JpdGhtcy5HcmFwaChfZ3JhcGguR2V0RWRnZVdlaWdodHMoKSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9ncmFwaC5WZXJ0aWNlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzW2ldLkxhYmVsID0gaS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9EZWdyZWVMYWJlbGluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBBbGdvcml0aG1zLkdyYXBoKF9ncmFwaC5HZXRFZGdlV2VpZ2h0cygpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2dyYXBoLlZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXNbaV0uTGFiZWwgPSBnLkRlZ3JlZShpKS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9JbkRlZ3JlZUxhYmVsaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gbmV3IEFsZ29yaXRobXMuR3JhcGgoX2dyYXBoLkdldEVkZ2VXZWlnaHRzKCkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZ3JhcGguVmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlc1tpXS5MYWJlbCA9IGcuSW5EZWdyZWUoaSkuVG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvT3V0RGVncmVlTGFiZWxpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBuZXcgQWxnb3JpdGhtcy5HcmFwaChfZ3JhcGguR2V0RWRnZVdlaWdodHMoKSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9ncmFwaC5WZXJ0aWNlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzW2ldLkxhYmVsID0gZy5PdXREZWdyZWUoaSkuVG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvT3V0RGVncmVlUGx1c09uZUxhYmVsaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gbmV3IEFsZ29yaXRobXMuR3JhcGgoX2dyYXBoLkdldEVkZ2VXZWlnaHRzKCkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZ3JhcGguVmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlc1tpXS5MYWJlbCA9IChnLk91dERlZ3JlZShpKSArIDEpLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb0NsZWFyTGFiZWxzKHN0cmluZyBzID0gXCJcIiwgSUVudW1lcmFibGU8aW50PiB2ZXJ0aWNlcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodmVydGljZXMgPT0gbnVsbCB8fCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4odmVydGljZXMpIDw9IDApXHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgX2dyYXBoLlZlcnRpY2VzLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzW3ZdLkxhYmVsID0gcztcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb1NuYXBUb0dyaWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEdyaWRTdGVwIDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfZ3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHYuWCA9IChmbG9hdCkoX2dyaWRTdGVwICogTWF0aC5Sb3VuZCh2LlggLyBfZ3JpZFN0ZXApKTtcclxuICAgICAgICAgICAgICAgIHYuWSA9IChmbG9hdCkoX2dyaWRTdGVwICogTWF0aC5Sb3VuZCh2LlkgLyBfZ3JpZFN0ZXApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIHZvaWQgUGFpbnRHcmlkKElHcmFwaGljcyBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFEcmF3R3JpZCB8fCBHcmlkU3RlcCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyIHggPSAwLjA7XHJcbiAgICAgICAgICAgIHdoaWxlICh4IDw9IFdpZHRoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnLkRyYXdMaW5lKEdyaWRQZW5Db2xvciwgeCwgMCwgeCwgSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHggKz0gR3JpZFN0ZXAgKiBfdmlld1NjYWxlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgeSA9IDAuMDtcclxuICAgICAgICAgICAgd2hpbGUgKHkgPD0gSGVpZ2h0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnLkRyYXdMaW5lKEdyaWRQZW5Db2xvciwgMCwgeSwgV2lkdGgsIHkpO1xyXG4gICAgICAgICAgICAgICAgeSArPSBHcmlkU3RlcCAqIF92aWV3U2NhbGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElIaXR0YWJsZSBHZXRIaXQoZG91YmxlIHgsIGRvdWJsZSB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9ncmFwaC5IaXRUZXN0KHgsIHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xhc3MgSGlzdG9yaWNhbEdyYXBoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgR3JhcGggR3JhcGggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IFZpZXdTY2FsZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgICAgIHB1YmxpYyBkb3VibGUgWm9vbSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBQYWludChHcmFwaGljc0xheWVyLklHcmFwaGljcyBnLCBpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAod2lkdGggPT0gMCB8fCBoZWlnaHQgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBXaWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgSGVpZ2h0ID0gaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChTbmFwVG9HcmlkKVxyXG4gICAgICAgICAgICAgICAgICAgIERvU25hcFRvR3JpZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGcuQ2xlYXIoQmFja2dyb3VuZENvbG9yKTtcclxuICAgICAgICAgICAgICAgIFBhaW50R3JpZChnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguUGFpbnQoZywgX3ZpZXdTY2FsZSwgX3ZpZXdTY2FsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfc3RhdGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuSWRsZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdWZXJ0ZXg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nU2VsZWN0aW9uUmVnaW9uOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaXN0PEJveD4gc2VsZWN0aW9uUG9pbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jayAoX1NlbGVjdGlvblBvaW50c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblBvaW50cyA9IG5ldyBMaXN0PEJveD4oX3NlbGVjdGlvblBvaW50cy5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHAgaW4gX3NlbGVjdGlvblBvaW50cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uUG9pbnRzLkFkZChuZXcgQm94KHAuWCAqIF92aWV3U2NhbGUsIHAuWSAqIF92aWV3U2NhbGUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uUG9pbnRzLkNvdW50ID4gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLkRyYXdMaW5lcyhTZWxlY3Rpb25QZW5Db2xvciwgc2VsZWN0aW9uUG9pbnRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIHsgfVxyXG5cclxuICAgICAgICAgICAgSGFzUGFpbnRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoX3pvb21GaXROZXh0UGFpbnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF96b29tRml0TmV4dFBhaW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBEb1pvb21GaXQoKTtcclxuICAgICAgICAgICAgICAgIERvWm9vbSg0LCBuZXcgR3JhcGhpY3NMYXllci5Cb3goMC41LCAwLjUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgT25Nb3VzZU1vdmUoZG91YmxlIFgsIGRvdWJsZSBZKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBYIC8gX3ZpZXdTY2FsZTtcclxuICAgICAgICAgICAgdmFyIHkgPSBZIC8gX3ZpZXdTY2FsZTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoX3N0YXRlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5JZGxlOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdWZXJ0ZXg6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfRHJhZ2dlZFZlcnRleC5YID0gX0RyYWdnZWRWZXJ0ZXguRHJhZ09mZnNldC5YICsgeDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX0RyYWdnZWRWZXJ0ZXguWSA9IF9EcmFnZ2VkVmVydGV4LkRyYWdPZmZzZXQuWSArIHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nU2VsZWN0aW9uUmVnaW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jayAoX1NlbGVjdGlvblBvaW50c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZWN0aW9uUG9pbnRzLkFkZChuZXcgQm94KHgsIHkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdTZWxlY3RlZFZlcnRpY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX2dyYXBoLlNlbGVjdGVkVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuWCA9IHYuRHJhZ09mZnNldC5YICsgeDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuWSA9IHYuRHJhZ09mZnNldC5ZICsgeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRvZ2dsZUVkZ2VJbmRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9ncmFwaC5Ub2dnbGVFZGdlSW5kaWNlcygpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUm90YXRlVmVydGV4SW5kaWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzO1xyXG4gICAgICAgICAgICBpZiAoeC5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgeCA9IF9ncmFwaC5WZXJ0aWNlcztcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhIGluIHgpXHJcbiAgICAgICAgICAgICAgICBhLlJvdGF0ZUluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSb3RhdGVFZGdlSW5kaWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IF9ncmFwaC5TZWxlY3RlZEVkZ2VzO1xyXG4gICAgICAgICAgICBpZiAoeC5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgeCA9IF9ncmFwaC5FZGdlcztcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhIGluIHgpXHJcbiAgICAgICAgICAgICAgICBhLlJvdGF0ZUluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZXRJbmRleChpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gX2dyYXBoLlNlbGVjdGVkVmVydGljZXM7XHJcbiAgICAgICAgICAgIGlmICh4LkNvdW50ID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB2ID0geFswXTtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gX2dyYXBoLlZlcnRpY2VzLkluZGV4T2Yodik7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSAhPSBuKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlcy5SZW1vdmUodik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4gPj0gX2dyYXBoLlZlcnRpY2VzLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzLkFkZCh2KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobiA8IGkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXMuSW5zZXJ0KG4sIHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXMuSW5zZXJ0KG4sIHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gX2dyYXBoLlNlbGVjdGVkRWRnZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoeS5Db3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0geVswXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IF9ncmFwaC5FZGdlcy5JbmRleE9mKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpICE9IG4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguRWRnZXMuUmVtb3ZlKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA+PSBfZ3JhcGguRWRnZXMuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5FZGdlcy5BZGQodik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobiA8IGkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5FZGdlcy5JbnNlcnQobiwgdik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguRWRnZXMuSW5zZXJ0KG4sIHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBUb2dnbGVWZXJ0ZXhJbmRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9ncmFwaC5Ub2dnbGVWZXJ0ZXhJbmRpY2VzKCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBPbk1vdXNlRG93bihkb3VibGUgWCwgZG91YmxlIFksIEdyYXBoaWNzTGF5ZXIuTW91c2VCdXR0b24gYnV0dG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRyb2xXYXNEb3duID0gQ2FudmFzLklzQ29udHJvbEtleURvd247XHJcblxyXG4gICAgICAgICAgICB2YXIgeCA9IFggLyBfdmlld1NjYWxlO1xyXG4gICAgICAgICAgICB2YXIgeSA9IFkgLyBfdmlld1NjYWxlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG8gPSBHZXRIaXQoeCwgeSk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKF9zdGF0ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuSWRsZTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b24gPT0gTW91c2VCdXR0b24uTGVmdClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZWN0aW9uUG9pbnRzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGVjdGlvblBvaW50cy5BZGQobmV3IEJveCh4LCB5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N0YXRlID0gU3RhdGVzLkRyYWdnaW5nU2VsZWN0aW9uUmVnaW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobyBpcyBWZXJ0ZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgoVmVydGV4KW8pLklzU2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoIChWZXJ0ZXggdiBpbiBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5EcmFnT2Zmc2V0ID0gbmV3IEJveCh2LlggLSB4LCB2LlkgLSB5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N0YXRlID0gU3RhdGVzLkRyYWdnaW5nU2VsZWN0ZWRWZXJ0aWNlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0RyYWdnZWRWZXJ0ZXggPSAoVmVydGV4KW87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9EcmFnZ2VkVmVydGV4LkRyYWdPZmZzZXQgPSBuZXcgQm94KF9EcmFnZ2VkVmVydGV4LlggLSB4LCBfRHJhZ2dlZFZlcnRleC5ZIC0geSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGF0ZSA9IFN0YXRlcy5EcmFnZ2luZ1ZlcnRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvIGlzIEVkZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYnV0dG9uID09IE1vdXNlQnV0dG9uLlJpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobyBpcyBWZXJ0ZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvIGlzIEVkZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nVmVydGV4OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdTZWxlY3Rpb25SZWdpb246XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE9uTW91c2VVcChkb3VibGUgWCwgZG91YmxlIFksIEdyYXBoaWNzTGF5ZXIuTW91c2VCdXR0b24gYnV0dG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBYIC8gX3ZpZXdTY2FsZTtcclxuICAgICAgICAgICAgdmFyIHkgPSBZIC8gX3ZpZXdTY2FsZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvID0gR2V0SGl0KHgsIHkpO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChfc3RhdGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLklkbGU6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1ZlcnRleDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b24gPT0gTW91c2VCdXR0b24uTGVmdClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N0YXRlID0gU3RhdGVzLklkbGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFNuYXBUb0dyaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9TbmFwVG9HcmlkKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdTZWxlY3Rpb25SZWdpb246XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uID09IE1vdXNlQnV0dG9uLkxlZnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGF0ZSA9IFN0YXRlcy5JZGxlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpc3Q8Qm94PiBzZWxlY3Rpb25Qb2ludHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NrIChfU2VsZWN0aW9uUG9pbnRzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uUG9pbnRzID0gbmV3IExpc3Q8Qm94Pihfc2VsZWN0aW9uUG9pbnRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblBvaW50cy5Db3VudCA+IDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguU2VsZWN0T2JqZWN0cyhzZWxlY3Rpb25Qb2ludHMsIF9jb250cm9sV2FzRG93bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYW52YXMuU2VsZWN0ZWRPYmplY3RzID0gX2dyYXBoLlNlbGVjdGVkSXRlbXMuQ2FzdDxvYmplY3Q+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGVkVmVydGljZXM6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uID09IE1vdXNlQnV0dG9uLkxlZnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGF0ZSA9IFN0YXRlcy5JZGxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBPbk1vdXNlRG91YmxlQ2xpY2soZG91YmxlIFgsIGRvdWJsZSBZLCBHcmFwaGljc0xheWVyLk1vdXNlQnV0dG9uIGJ1dHRvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gWCAvIF92aWV3U2NhbGU7XHJcbiAgICAgICAgICAgIHZhciB5ID0gWSAvIF92aWV3U2NhbGU7XHJcblxyXG4gICAgICAgICAgICB2YXIgbyA9IEdldEhpdCh4LCB5KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBncmFwaENoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKF9zdGF0ZSA9PSBTdGF0ZXMuSWRsZSAmJiAhQ2FudmFzLklzQ29udHJvbEtleURvd24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChidXR0b24gPT0gTW91c2VCdXR0b24uTGVmdClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBuZXcgVmVydGV4KHgsIHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2dyYXBoLkFkZFZlcnRleCh2KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyYXBoQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG8gaXMgVmVydGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZFZlcnRleCA9IChWZXJ0ZXgpbztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX2dyYXBoLlNlbGVjdGVkVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZ3JhcGguQWRkRWRnZSh2LCBlbmRWZXJ0ZXgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyYXBoQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChidXR0b24gPT0gTW91c2VCdXR0b24uUmlnaHQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8gaXMgVmVydGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9ncmFwaC5SZW1vdmVWZXJ0ZXgoKFZlcnRleClvKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyYXBoQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZ3JhcGhDaGFuZ2VkKVxyXG4gICAgICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBab29tRml0TmV4dFBhaW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF96b29tRml0TmV4dFBhaW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbDtcclxudXNpbmcgU3lzdGVtLlJ1bnRpbWUuU2VyaWFsaXphdGlvbjtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFZlcnRleCA6IEdyYXBoaWNzTGF5ZXIuSVBhaW50YWJsZSwgSUhpdHRhYmxlXHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuRm9udCBMYWJlbEZvbnQgPSBuZXcgR3JhcGhpY3NMYXllci5Gb250KFwiVGltZXMgTmV3IFJvbWFuXCIsIDEyKTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5Gb250IEluZGV4Rm9udCA9IG5ldyBHcmFwaGljc0xheWVyLkZvbnQoXCJTeXN0ZW1cIiwgOCk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuQVJHQiBMYWJlbEJydXNoQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDAsIDAsIDApO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgSW5kZXhCcnVzaENvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigyMDAsIDIwMCwgMCwgMCk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuQVJHQiBCb3VuZGFyeVBlbkNvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigwLCAwLCAwKTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIEJvdW5kYXJ5U2VsZWN0ZWRQZW5Db2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMjU1LCAwLCAyNTUsIDApO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBpbnQgQm91bmRhcnlTZWxlY3RlZFBlbldpZHRoID0gMjtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIERlZmF1bHRGaWxsQnJ1c2hDb2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMTIwLCAwLCAwLCAwKTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIFVuaXZlcnNhbFZlcnRleEZpbGxCcnVzaENvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigxMjAsIDAsIDAsIDI1NSk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuQVJHQiBTZWxlY3RlZEZpbGxCcnVzaENvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigyNTUsIDAsIDI1NSwgMTI3KTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBQYXJlbnRJbmRleCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBJbmRleEFuZ2xlIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFZlcnRleChkb3VibGUgeCwgZG91YmxlIHkpXHJcbiAgICAgICAgICAgIDogdGhpcyh4LCB5LCBcIlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZXJ0ZXgoVmVjdG9yIHYpXHJcbiAgICAgICAgICAgIDogdGhpcyh2LCBcIlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZXJ0ZXgoVmVjdG9yIHYsIHN0cmluZyBsYWJlbClcclxuICAgICAgICAgICAgOiB0aGlzKHYuWCwgdi5ZLCBsYWJlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVmVydGV4KGRvdWJsZSB4LCBkb3VibGUgeSwgc3RyaW5nIGxhYmVsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX0xvY2F0aW9uID0gbmV3IFZlY3Rvcih4LCB5KTtcclxuICAgICAgICAgICAgX2xhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVmVydGV4KFNlcmlhbGl6YXRpb25WZXJ0ZXggdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExvY2F0aW9uID0gbmV3IFZlY3Rvcih2LkxvY2F0aW9uLlgsIHYuTG9jYXRpb24uWSk7XHJcbiAgICAgICAgICAgIExhYmVsID0gdi5MYWJlbDtcclxuICAgICAgICAgICAgUGFkZGluZyA9IHYuUGFkZGluZztcclxuICAgICAgICAgICAgU3R5bGUgPSB2LlN0eWxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBQYWludChHcmFwaGljc0xheWVyLklHcmFwaGljcyBnLCBpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYm91bmRzID0gQ29tcHV0ZUJvdW5kcyhnLCB3aWR0aCwgaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoX2xhYmVsKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKENvbG9yLkVxdWFscyhkZWZhdWx0KEdyYXBoaWNzTGF5ZXIuQVJHQikpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChJc1VuaXZlcnNhbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZy5GaWxsRWxsaXBzZShVbml2ZXJzYWxWZXJ0ZXhGaWxsQnJ1c2hDb2xvciwgYm91bmRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBnLkZpbGxFbGxpcHNlKENvbG9yLCBib3VuZHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGcuRHJhd0VsbGlwc2UoX0lzU2VsZWN0ZWQgPyBCb3VuZGFyeVNlbGVjdGVkUGVuQ29sb3IgOiBCb3VuZGFyeVBlbkNvbG9yLCBib3VuZHMsIF9Jc1NlbGVjdGVkID8gQm91bmRhcnlTZWxlY3RlZFBlbldpZHRoIDogMSk7XHJcbiAgICAgICAgICAgICAgICBnLkRyYXdTdHJpbmcoX2xhYmVsLCBMYWJlbEZvbnQsIExhYmVsQnJ1c2hDb2xvciwgYm91bmRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChDb2xvci5FcXVhbHMoZGVmYXVsdChHcmFwaGljc0xheWVyLkFSR0IpKSlcclxuICAgICAgICAgICAgICAgICAgICBnLkZpbGxFbGxpcHNlKElzVW5pdmVyc2FsID8gVW5pdmVyc2FsVmVydGV4RmlsbEJydXNoQ29sb3IgOiBEZWZhdWx0RmlsbEJydXNoQ29sb3IsIGJvdW5kcyk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZy5GaWxsRWxsaXBzZShDb2xvciwgYm91bmRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGcuRHJhd0VsbGlwc2UoX0lzU2VsZWN0ZWQgPyBCb3VuZGFyeVNlbGVjdGVkUGVuQ29sb3IgOiBCb3VuZGFyeVBlbkNvbG9yLCBib3VuZHMsIF9Jc1NlbGVjdGVkID8gQm91bmRhcnlTZWxlY3RlZFBlbldpZHRoIDogMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChfc2hvd0luZGV4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3ggPSAoYm91bmRzLkxlZnQgKyBib3VuZHMuUmlnaHQpIC8gMjtcclxuICAgICAgICAgICAgICAgIHZhciBjeSA9IChib3VuZHMuQm90dG9tICsgYm91bmRzLlRvcCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLk1heChib3VuZHMuV2lkdGgsIGJvdW5kcy5IZWlnaHQpIC8gMiArIDU7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmIgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3goY3ggKyByICogTWF0aC5Db3MoSW5kZXhBbmdsZSkgLSA1LCBjeSArIHIgKiBNYXRoLlNpbihJbmRleEFuZ2xlKSAtIDUsIDEwLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBnLkRyYXdTdHJpbmcoUGFyZW50SW5kZXguVG9TdHJpbmcoKSwgSW5kZXhGb250LCBJbmRleEJydXNoQ29sb3IsIGJiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSGl0KGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBoaXQgPSBfTG9jYWxCb3VuZHMuQ29udGFpbnMoeCwgeSk7XHJcbiAgICAgICAgICAgIHJldHVybiBoaXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5Cb3ggQ29tcHV0ZUJvdW5kcyhHcmFwaGljc0xheWVyLklHcmFwaGljcyBnLCBpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcmFwaGljc0xheWVyLkJveCBib3VuZHM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KF9sYWJlbCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzaXplID0gZy5NZWFzdXJlU3RyaW5nKF9sYWJlbCwgTGFiZWxGb250KTtcclxuXHJcbiAgICAgICAgICAgICAgICBib3VuZHMgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3goWCAqIHdpZHRoIC0gc2l6ZS5XaWR0aCAvIDIsIFkgKiBoZWlnaHQgLSBzaXplLkhlaWdodCAvIDIsIHNpemUuV2lkdGgsIHNpemUuSGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvdW5kcyA9IG5ldyBHcmFwaGljc0xheWVyLkJveChYICogd2lkdGgsIFkgKiBoZWlnaHQsIDAsIDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBib3VuZHMuSW5mbGF0ZShfcGFkZGluZyAqIHdpZHRoLCBfcGFkZGluZyAqIGhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICBfTG9jYWxCb3VuZHMgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3goYm91bmRzLlggLyB3aWR0aCwgYm91bmRzLlkgLyBoZWlnaHQsIGJvdW5kcy5XaWR0aCAvIHdpZHRoLCBib3VuZHMuSGVpZ2h0IC8gaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBib3VuZHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5BUkdCIENvbG9yIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBNb2RpZmllciB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgWFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfTG9jYXRpb24uWDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX0xvY2F0aW9uLlggPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBZXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Mb2NhdGlvbi5ZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfTG9jYXRpb24uWSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVmVjdG9yIExvY2F0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Mb2NhdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX0xvY2F0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTGFiZWxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2xhYmVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gX2xhYmVsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBfbGFiZWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGZsb2F0IFBhZGRpbmdcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3BhZGRpbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBfcGFkZGluZylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgX3BhZGRpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoaWNzTGF5ZXIuQm94IExvY2FsQm91bmRzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Mb2NhbEJvdW5kcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNTZWxlY3RlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfSXNTZWxlY3RlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IF9Jc1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBfSXNTZWxlY3RlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5Cb3ggRHJhZ09mZnNldFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfRHJhZ09mZnNldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX0RyYWdPZmZzZXQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTdHlsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfU3R5bGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5TdGFydHNXaXRoKFwiK1wiKSAmJiAhc3RyaW5nLklzTnVsbE9yRW1wdHkoX1N0eWxlKSlcclxuICAgICAgICAgICAgICAgICAgICBfU3R5bGUgKz0gXCIsIFwiICsgdmFsdWUuVHJpbVN0YXJ0KCcrJyk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgX1N0eWxlID0gdmFsdWUuVHJpbVN0YXJ0KCcrJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzVW5pdmVyc2FsIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgVmVjdG9yIF9Mb2NhdGlvbjtcclxuICAgICAgICBHcmFwaGljc0xheWVyLkJveCBfRHJhZ09mZnNldCA9IEdyYXBoaWNzTGF5ZXIuQm94LkVtcHR5O1xyXG4gICAgICAgIHN0cmluZyBfbGFiZWw7XHJcbiAgICAgICAgc3RyaW5nIF9TdHlsZTtcclxuICAgICAgICBib29sIF9Jc1NlbGVjdGVkO1xyXG5cclxuICAgICAgICBmbG9hdCBfcGFkZGluZyA9IDIuMGYgLyAxMDAuMGY7XHJcbiAgICAgICAgR3JhcGhpY3NMYXllci5Cb3ggX0xvY2FsQm91bmRzID0gR3JhcGhpY3NMYXllci5Cb3guRW1wdHk7XHJcbiAgICAgICAgYm9vbCBfc2hvd0luZGV4ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgUm90YXRlSW5kZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSW5kZXhBbmdsZSArPSBNYXRoLlBJIC8gMTY7XHJcbiAgICAgICAgICAgIGlmIChJbmRleEFuZ2xlID49IDIgKiBNYXRoLlBJKVxyXG4gICAgICAgICAgICAgICAgSW5kZXhBbmdsZSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFRvZ2dsZUluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9zaG93SW5kZXggPSAhX3Nob3dJbmRleDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBHcmFwaGljc0xheWVyO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uRHJhd2luZztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIFRlc3Rcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdyYXBoaWNzIDogSUdyYXBoaWNzXHJcbiAgICB7XHJcbiAgICAgICAgSFRNTENhbnZhc0VsZW1lbnQgX2NhbnZhcztcclxuICAgICAgICBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgX2NvbnRleHQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljcyhIVE1MQ2FudmFzRWxlbWVudCBjYW52YXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY2FudmFzID0gY2FudmFzO1xyXG4gICAgICAgICAgICBfY29udGV4dCA9IGNhbnZhcy5HZXRDb250ZXh0KFwiMmRcIikuQXM8Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xlYXIoQVJHQiBhcmdiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuRmlsbFN0eWxlID0gYXJnYi5Ub0NvbG9yKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lkdsb2JhbEFscGhhID0gYXJnYi5BIC8gMjU1LjBmO1xyXG4gICAgICAgICAgICBfY29udGV4dC5DbGVhclJlY3QoMCwgMCwgX2NhbnZhcy5XaWR0aCwgX2NhbnZhcy5IZWlnaHQpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5GaWxsUmVjdCgwLCAwLCBfY2FudmFzLldpZHRoLCBfY2FudmFzLkhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3TGluZShBUkdCIGFyZ2IsIEJveCBwMSwgQm94IHAyLCBkb3VibGUgd2lkdGggPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuU3Ryb2tlU3R5bGUgPSBhcmdiLlRvQ29sb3IoKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuTGluZVdpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lkdsb2JhbEFscGhhID0gTWF0aC5NaW4oMS4wZiwgTWF0aC5NYXgoMC4wZiwgYXJnYi5BIC8gMjU1LjBmKSk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5Nb3ZlVG8ocDEuWCwgcDEuWSk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkxpbmVUbyhwMi5YLCBwMi5ZKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuU3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdMaW5lKEFSR0IgYXJnYiwgZG91YmxlIHgxLCBkb3VibGUgeTEsIGRvdWJsZSB4MiwgZG91YmxlIHkyLCBkb3VibGUgd2lkdGggPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRHJhd0xpbmUoYXJnYiwgbmV3IEJveCh4MSwgeTEpLCBuZXcgQm94KHgyLCB5MiksIHdpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd0xpbmVzKEFSR0IgYXJnYiwgSUVudW1lcmFibGU8Qm94PiBwb2ludHMsIGRvdWJsZSB3aWR0aCA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2VTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5HbG9iYWxBbHBoYSA9IGFyZ2IuQSAvIDI1NS4wZjtcclxuICAgICAgICAgICAgX2NvbnRleHQuTGluZVdpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICB2YXIgZmlyc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiBwb2ludHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5Nb3ZlVG8oYi5YLCBiLlkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQuTGluZVRvKGIuWCwgYi5ZKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRmlsbFBvbHlnb24oQVJHQiBhcmdiLCBJRW51bWVyYWJsZTxCb3g+IHBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZpbGxTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5HbG9iYWxBbHBoYSA9IGFyZ2IuQSAvIDI1NS4wZjtcclxuICAgICAgICAgICAgX2NvbnRleHQuQmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHBvaW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lk1vdmVUbyhiLlgsIGIuWSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5MaW5lVG8oYi5YLCBiLlkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZpbGwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd0VsbGlwc2UoQVJHQiBhcmdiLCBCb3ggYm91bmRzLCBkb3VibGUgd2lkdGggPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuU3Ryb2tlU3R5bGUgPSBhcmdiLlRvQ29sb3IoKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuR2xvYmFsQWxwaGEgPSBhcmdiLkEgLyAyNTUuMGY7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5BcmMoYm91bmRzLkxlZnQgKyBib3VuZHMuV2lkdGggLyAyLCBib3VuZHMuVG9wICsgYm91bmRzLkhlaWdodCAvIDIsIGJvdW5kcy5XaWR0aCAvIDIsIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuU3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZpbGxFbGxpcHNlKEFSR0IgYXJnYiwgQm94IGJvdW5kcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5GaWxsU3R5bGUgPSBhcmdiLlRvQ29sb3IoKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuR2xvYmFsQWxwaGEgPSBhcmdiLkEgLyAyNTUuMGY7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkFyYyhib3VuZHMuTGVmdCArIGJvdW5kcy5XaWR0aCAvIDIsIGJvdW5kcy5Ub3AgKyBib3VuZHMuSGVpZ2h0IC8gMiwgYm91bmRzLldpZHRoIC8gMiwgMCwgMiAqIE1hdGguUEkpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5GaWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdTdHJpbmcoc3RyaW5nIHMsIEZvbnQgZm9udCwgQVJHQiBhcmdiLCBCb3ggYm91bmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuRm9udCA9IGZvbnQuTmFtZSArIFwiIFwiICsgZm9udC5TaXplICsgXCJweFwiO1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2VTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5HbG9iYWxBbHBoYSA9IGFyZ2IuQSAvIDI1NS4wZjtcclxuICAgICAgICAgICAgX2NvbnRleHQuU3Ryb2tlVGV4dChzLCAoaW50KWJvdW5kcy5YLCAoaW50KWJvdW5kcy5ZKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEJveCBNZWFzdXJlU3RyaW5nKHN0cmluZyBzLCBGb250IGZvbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5Gb250ID0gZm9udC5OYW1lICsgXCIgXCIgKyBmb250LlNpemUgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHZhciBtZXRyaWNzID0gX2NvbnRleHQuTWVhc3VyZVRleHQocyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJveCgwLCAwLCBtZXRyaWNzLldpZHRoLCBtZXRyaWNzLkVtSGVpZ2h0QXNjZW50ICsgbWV0cmljcy5FbUhlaWdodERlc2NlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdvb2RuZXNzQW5hbHl6ZXIgOiBTd2FwQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgc3RyaW5nIENoaWxkUmVhc29uIHsgZ2V0IHsgcmV0dXJuIFwiZ29vZG5lc3MgaW5jcmVhc2VkXCI7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgR29vZG5lc3NBbmFseXplcihib29sIGZpbmRDbGVhbmVzdFdpbiA9IHRydWUpXHJcbiAgICAgICAgICAgIDogYmFzZShmaW5kQ2xlYW5lc3RXaW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIGJvb2wgSXNDaGlsZEJvYXJkQmV0dGVyKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBCb2FyZCBjaGlsZEJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KE1ldGFLbm93bGVkZ2UuR2V0Q29sb3JHcmFwaHMoY2hpbGRCb2FyZC5TdGFja3MsIGNoaWxkQm9hcmQuUG90KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoYyA9PiBjLkNvdW50KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciB5ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihNZXRhS25vd2xlZGdlLkdldENvbG9yR3JhcGhzKGJvYXJkLlN0YWNrcywgYm9hcmQuUG90KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoYyA9PiBjLkNvdW50KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3RhbmRhcmREZXZpYXRpb24oeCkgPCBTdGFuZGFyZERldmlhdGlvbih5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvdWJsZSBNZWFuKExpc3Q8aW50PiB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHguU3VtKCkgLyB4LkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZG91YmxlIE1lZGlhbihMaXN0PGludD4geClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8aW50LGludD4oeCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGEgPT4gYSkpLkVsZW1lbnRBdCh4LkNvdW50IC8gMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb3VibGUgU3RhbmRhcmREZXZpYXRpb24oTGlzdDxpbnQ+IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbXUgPSBNZWFuKHgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguU3FydChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxpbnQ+KHgsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBkb3VibGU+KShhID0+IChhIC0gbXUpICogKGEgLSBtdSkpKSAvIHguQ291bnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZG91YmxlIEFic29sdXRlRGV2aWF0aW9uKExpc3Q8aW50PiB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG11ID0gTWVkaWFuKHgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGludD4oeCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGRvdWJsZT4pKGEgPT4gTWF0aC5BYnMobXUgLSBhKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBQdXNoTGVmdE9yZGVyaW5nKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBCb2FyZCBjaGlsZEJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBHZXRWZWN0b3JzKGNoaWxkQm9hcmQpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IEdldFZlY3RvcnMoYm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBNYXRoLk1pbih4LkNvdW50LCB5LkNvdW50KTsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IENvbXBhcmVWZWN0b3JzKHhbaV0sIHlbaV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjID4gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChjIDwgMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4LkNvdW50IDwgeS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8TGlzdDxpbnQ+PiBHZXRWZWN0b3JzKEJvYXJkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5RGVzY2VuZGluZzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KE1ldGFLbm93bGVkZ2UuR2V0Q29sb3JHcmFwaHMoYi5TdGFja3MsIGIuUG90KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoYyA9PiBjLkNvdW50KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgQ29tcGFyZVZlY3RvcnMoTGlzdDxpbnQ+IHgsIExpc3Q8aW50PiB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHguQ291bnQgPiB5LkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICBpZiAoeC5Db3VudCA8IHkuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgeC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeFtpXSA8IHlbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoeFtpXSA+IHlbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxudXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkFyYml0cmFyeU1heERlZ3JlZTtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQXJiaXRyYXJ5RGVncmVlUHJvb2ZCdWlsZGVyIDogUGVybXV0YXRpb25Bd2FyZVByb29mQnVpbGRlclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBib29sIFVzZVdpbGRDYXJkcyB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHN0cmluZyBfZmlndXJlVGlrejtcclxuICAgICAgICBpbnQgX21heFBvdDtcclxuICAgICAgICBMaXN0PGludD4gX2FjdGl2ZUluZGljZXM7XHJcbiAgICAgICAgTGlzdDxpbnQ+IF9hY3RpdmVMaXN0U2l6ZXM7XHJcbiAgICAgICAgTGlzdDxpbnQ+IF9wb3NzaWJsZUxpc3RJbmRpY2VzO1xyXG4gICAgICAgIExpc3Q8TGlzdDxpbnQ+PiBfcG9zc2libGVMaXN0cztcclxuICAgICAgICBMaXN0PFN1cGVyU2xpbUJvYXJkPiBfYWxsQm9hcmRzO1xyXG4gICAgICAgIFNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5WZWN0b3JDb21wYXJlciBfc2VxdWVuY2VDb21wYXJlcjtcclxuICAgICAgICBTZXF1ZW5jZUdlbmVyYWxpemVyPGludD4gX3NlcXVlbmNlR2VuZXJhbGl6ZXI7XHJcbiAgICAgICAgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz4gX29yZGVyRmlsdGVyID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+KCk7XHJcbiAgICAgICAgYm9vbCBfaXNXaW47XHJcblxyXG4gICAgICAgIHB1YmxpYyBBcmJpdHJhcnlEZWdyZWVQcm9vZkJ1aWxkZXIoU3VwZXJTbGltTWluZCBtaW5kLCBzdHJpbmcgZmlndXJlVGlreiA9IFwiXCIsIGJvb2wgdXNlUGVybXV0YXRpb25zID0gZmFsc2UpXHJcbiAgICAgICAgICAgIDogYmFzZShtaW5kLCB1c2VQZXJtdXRhdGlvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZmlndXJlVGlreiA9IGZpZ3VyZVRpa3o7XHJcbiAgICAgICAgICAgIF9tYXhQb3QgPSBtaW5kLk1heFBvdDtcclxuICAgICAgICAgICAgVXNlV2lsZENhcmRzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgV3JpdGVQcm9vZigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG5cclxuICAgICAgICAgICAgX2lzV2luID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuUHJvb2ZDYXNlPihDYXNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5Qcm9vZkNhc2UsIGJvb2w+KShjID0+ICFjLkJyZWFrZXJXaW4pKTtcclxuICAgICAgIFxyXG4gICAgICAgICAgICBBZGRGaWd1cmUoc2IpO1xyXG4gICAgICAgICAgICBCZWdpblByb29mKHNiKTtcclxuICAgICAgICAgICAgR2VuZXJhdGVQb3NzaWJsZUxpc3RzKCk7XHJcbiAgICAgICAgICAgIEdlbmVyYWxpemVBbGxCb2FyZHMoc2IpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHdvbkJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBjYXNlTnVtYmVyID0gMTsgY2FzZU51bWJlciA8PSBDYXNlcy5Db3VudDsgY2FzZU51bWJlcisrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IENhc2VzW2Nhc2VOdW1iZXIgLSAxXTtcclxuICAgICAgICAgICAgICAgIHZhciBib2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxzdHJpbmc+KGMuQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIHN0cmluZz4pKGIgPT4gYi5Ub0xpc3RTdHJpbmdJbkxleE9yZGVyKF9tYXhQb3QpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIExpc3Q8U3VwZXJTbGltQm9hcmQ+IHRoaXNDbGFpbUJvYXJkcztcclxuICAgICAgICAgICAgICAgIGlmIChjYXNlTnVtYmVyID4gMSAmJiAhYy5CcmVha2VyV2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNDbGFpbUJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+PikoYiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlVuaW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KG5ld1tdIHsgYiB9LFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihfcGVybXV0YXRpb25MaW5rZWRbYl0sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPikodHVwID0+IHR1cC5JdGVtMikpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNDbGFpbUJvYXJkcyA9IGJvYXJkcztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWMuQnJlYWtlcldpbilcclxuICAgICAgICAgICAgICAgICAgICB3b25Cb2FyZHMuQWRkUmFuZ2UodGhpc0NsYWltQm9hcmRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0NsYWltQm9hcmRzVGV4ID0gR2VuZXJhbGl6ZUJvYXJkcyh0aGlzQ2xhaW1Cb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmlnc2tpcFwiKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoc3RyaW5nLkZvcm1hdChcIlxcXFxjYXNle3t7MH19fXt7JEIkIGlzIG9uZSBvZiB0aGUgezF9IGZvbGxvd2luZyBib2FyZHM6XFxuIFwiICsgdGhpc0NsYWltQm9hcmRzVGV4ICsgXCIufX1cIixjYXNlTnVtYmVyLCB0aGlzQ2xhaW1Cb2FyZHMuQ291bnQpKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmlnc2tpcFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYy5CcmVha2VyV2luKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMuU3VwZXJhYnVuZGFudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIk5vIHNpbmdsZSBLZW1wZSBleGNoYW5nZSBnZXRzIGZyb20gdGhlc2UgYm9hcmRzIHRvIGEgcHJldmlvdXMgY2FzZS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVGhlc2UgYm9hcmRzIGFyZSBub3Qgc3VwZXJhYnVuZGFudC5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjYXNlTnVtYmVyID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJJbiBhbGwgdGhlc2UgY2FzZXMsICRIJCBpcyBpbW1lZGlhdGVseSBjb2xvcmFibGUgZnJvbSB0aGUgbGlzdHMuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN3YXBDb3VudEdyb3VwcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuR3JvdXBCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGludD4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGludD4pKGIgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5NYXg8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oTWluZC5HZXRXaW5UcmVlSW5mbyhiKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KSh0aSA9PiB0aS5Td2FwVmVydGljZXMuQ291bnQpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzd2FwQ291bnRHcm91cCBpbiBzd2FwQ291bnRHcm91cHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3dhcENvdW50R3JvdXAuS2V5ID09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJFYWNoIG9mIHRoZSBmb2xsb3dpbmcgYm9hcmRzIGNhbiBiZSBoYW5kbGVkIGJ5IGEgc2luZ2xlIEtlbXBlIGNoYW5nZSB0aGF0IGhhcyBhbiBlbmRwb2ludCBhdCBpbmZpbml0eS5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGIgaW4gc3dhcENvdW50R3JvdXApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGVybXV0YXRpb24gcHA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RTdHJpbmcgPSBiLlRvTGlzdFN0cmluZ0luTGV4T3JkZXIob3V0IHBwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxwaGEgPSBNYXRoLk1pbihwcFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKS5BbHBoYV0sIHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkJldGFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmV0YSA9IE1hdGguTWF4KHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkFscGhhXSwgcHBbU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQmV0YV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncm91cHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkdyb3VwQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KHRyZWVJbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKHNzID0+IHNzLlN3YXBWZXJ0aWNlc1swXSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUNoZWNrUGVybXV0YXRpb25Hb29kTmVzcyhhbHBoYSwgYmV0YSwgbGlzdFN0cmluZywgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KHRyZWVJbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKHNzID0+IHNzLlN3YXBWZXJ0aWNlc1swXSkpLkRpc3RpbmN0KCkuVG9MaXN0KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwidGhlcmUgaXMgYmFkbmVzcyBoZXJlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIkXFxcXEtfe1wiICsgYWxwaGEgKyBcIlwiICsgYmV0YSArIFwiLFxcXFxpbmZ0eX0oXCIgKyBsaXN0U3RyaW5nICsgXCIsXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PGludD4oZ3JvdXBzLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5MaW5xLkdyb3VwaW5nPGludCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4sIGludD4pKGdnID0+IGdnLktleSkpLlNlbGVjdDxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgaW50PikoZ2cgPT4gZ2cuS2V5LkdldEFjdGl2ZUxpc3RJbmRleChiLCBfbWF4UG90KSArIDEpKSxudWxsKSArIFwiKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXFJpZ2h0YXJyb3cgJCBcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihncm91cHMuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgaW50PikoZ2cgPT4gZ2cuS2V5KSkuU2VsZWN0PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBzdHJpbmc+KShnZyA9PiBcIiRcIiArIEdldENoaWxkQm9hcmROYW1lKGIsIGdnLkZpcnN0KCkpICsgXCIkIChDYXNlIFwiICsgR2V0SGFuZGxlZENhc2VOdW1iZXIoYiwgZ2cuRmlyc3QoKSkgKyBcIilcIikpLG51bGwpICsgXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9wZXJtdXRhdGlvbkxpbmtlZFtiXS5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkZyZWUgYnkgdmVydGV4IHBlcm11dGF0aW9uOiBcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sc3RyaW5nPihfcGVybXV0YXRpb25MaW5rZWRbYl0sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LCBzdHJpbmc+KShwcHAgPT4gXCIkXCIgKyBwcHAuSXRlbTEgKyBcIlxcXFxSaWdodGFycm93IFwiICsgcHBwLkl0ZW0yLlRvTGlzdFN0cmluZ0luTGV4T3JkZXIoX21heFBvdCkgKyBcIiRcIikpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiaWdza2lwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzd2FwQ291bnRHcm91cC5LZXkgPT0gMilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiaWdza2lwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkVhY2ggb2YgdGhlIGZvbGxvd2luZyBib2FyZHMgY2FuIGJlIGhhbmRsZWQgYnkgYSBzaW5nbGUgS2VtcGUgY2hhbmdlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHN3YXBDb3VudEdyb3VwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBlcm11dGF0aW9uIHBwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0U3RyaW5nID0gYi5Ub0xpc3RTdHJpbmdJbkxleE9yZGVyKG91dCBwcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmVlSW5mbyA9IE1pbmQuR2V0V2luVHJlZUluZm8oYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhID0gTWF0aC5NaW4ocHBbU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQWxwaGFdLCBwcFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKS5CZXRhXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJldGEgPSBNYXRoLk1heChwcFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKS5BbHBoYV0sIHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkJldGFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdG92ZXIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQ2hlY2tQZXJtdXRhdGlvbkdvb2ROZXNzKGFscGhhLCBiZXRhLCBsaXN0U3RyaW5nLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KHRyZWVJbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKHNzID0+IHNzLlN3YXBWZXJ0aWNlcykpLkRpc3RpbmN0KCkuVG9MaXN0KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwidGhlcmUgaXMgYmFkbmVzcyBoZXJlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobGVmdG92ZXIuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1vbmVzdFN3YXBwZXIgPSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5NYXhJbmRleDxpbnQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgYi5fc3RhY2tDb3VudCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4obGVmdG92ZXIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db250YWlucyh2KSkpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkQWxsID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihsZWZ0b3ZlciwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvbnRhaW5zKGNvbW1vbmVzdFN3YXBwZXIpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KGhhbmRsZWRBbGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID09IDEgPyAtMSA6IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiJFxcXFxLX3tcIiArIGFscGhhICsgXCJcIiArIGJldGEgKyBcIixcIiArIChjb21tb25lc3RTd2FwcGVyLkdldEFjdGl2ZUxpc3RJbmRleChiLCBfbWF4UG90KSArIDEpICsgXCJ9KFwiICsgbGlzdFN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2luZ2xlID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdE9yRGVmYXVsdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihoYW5kbGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPT0gMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2luZ2xlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIsXFxcXGluZnR5XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID4gMSkpLkNvdW50KCkgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiLFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID4gMSkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRXhjZXB0PGludD4oYmMuU3dhcFZlcnRpY2VzLGNvbW1vbmVzdFN3YXBwZXIpKSkpLlNlbGVjdDxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKGJjID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpLkdldEFjdGl2ZUxpc3RJbmRleChiLCBfbWF4UG90KSArIDEpKSxudWxsKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIilcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXFJpZ2h0YXJyb3cgJCBcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID09IDEgPyAtMSA6IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpKSkuU2VsZWN0PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgc3RyaW5nPikoYmMgPT4gXCIkXCIgKyBHZXRDaGlsZEJvYXJkTmFtZShiLCBiYykgKyBcIiQgKENhc2UgXCIgKyBHZXRIYW5kbGVkQ2FzZU51bWJlcihiLCBiYykgKyBcIilcIikpLG51bGwpICsgXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYmMgaW4gaGFuZGxlZEFsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRvdmVyLlJlbW92ZShiYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3Blcm11dGF0aW9uTGlua2VkW2JdLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiRnJlZSBieSB2ZXJ0ZXggcGVybXV0YXRpb246IFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixzdHJpbmc+KF9wZXJtdXRhdGlvbkxpbmtlZFtiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIHN0cmluZz4pKHBwcCA9PiBcIiRcIiArIHBwcC5JdGVtMSArIFwiXFxcXFJpZ2h0YXJyb3cgXCIgKyBwcHAuSXRlbTIuVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihfbWF4UG90KSArIFwiJFwiKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiaWdza2lwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRW5kUHJvb2Yoc2IpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNiLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIENoZWNrUGVybXV0YXRpb25Hb29kTmVzcyhpbnQgYWxwaGEsIGludCBiZXRhLCBzdHJpbmcgc3RhY2tzU3RyaW5nLCBMaXN0PGludD4gc3dhcFZlcnRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oc3RhY2tzU3RyaW5nLlNwbGl0KCd8JyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHMgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Y2hhcixpbnQ+KHMuVG9DaGFyQXJyYXkoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxjaGFyLCBpbnQ+KShjID0+IGludC5QYXJzZShjLlRvU3RyaW5nKCkpKSkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvcnMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzYpPT57X282LkFkZChhbHBoYSk7X282LkFkZChiZXRhKTtyZXR1cm4gX282O30pO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBzd2FwVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uQ291bnQ8aW50Pihjb2xvcnMsc3RhY2tzW3ZdKSAhPSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5EaWFnbm9zdGljcy5EZWJ1Z2dlci5CcmVhaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHJpbmcgR2V0Q2hpbGRCb2FyZE5hbWUoU3VwZXJTbGltQm9hcmQgYiwgQnJlYWtlckNob2ljZUluZm8gYmMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBTdXBlclNsaW1Cb2FyZChiLl90cmFjZSwgYmMuQWxwaGEsIGJjLkJldGEsIGJjLlJlc3BvbnNlLCBiLl9zdGFja0NvdW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkQm9hcmQuVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihfbWF4UG90KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgR2VuZXJhbGl6ZUFsbEJvYXJkcyhTdHJpbmdCdWlsZGVyIHNiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2FsbEJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oTWluZC5Db2xvcmFibGVCb2FyZHMsTWluZC5Ob25Db2xvcmFibGVCb2FyZHMpLE1pbmQuQnJlYWtlcldvbkJvYXJkcykpO1xyXG4gICAgICAgICAgICBfc2VxdWVuY2VDb21wYXJlciA9IG5ldyBTZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uVmVjdG9yQ29tcGFyZXIoKTtcclxuICAgICAgICAgICAgX3NlcXVlbmNlR2VuZXJhbGl6ZXIgPSBuZXcgU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+KF9hY3RpdmVJbmRpY2VzLkNvdW50LCBfcG9zc2libGVMaXN0SW5kaWNlcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYWxsQm9hcmRzVGV4ID0gR2VuZXJhbGl6ZUJvYXJkcyhfYWxsQm9hcmRzKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChNaW5kLk9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcylcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJXZSBuZWVkIHRvIGhhbmRsZSBhbGwgYm9hcmRzIHRoYXQgYXJlIG5lYXJseSBjb2xvcmFibGUgZm9yIGVkZ2UgJGUkIHVwIHRvIHBlcm11dGF0aW9uIG9mIGNvbG9ycywgc28gaXQgd2lsbCBzdWZmaWNlIHRvIGhhbmRsZSB0aGUgZm9sbG93aW5nIFwiICsgX2FsbEJvYXJkcy5Db3VudCArIFwiIGJvYXJkczogXCIgKyBhbGxCb2FyZHNUZXggKyBcIi5cIik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJXZSBuZWVkIHRvIGhhbmRsZSBhbGwgYm9hcmRzIHVwIHRvIHBlcm11dGF0aW9uIG9mIGNvbG9ycywgc28gaXQgd2lsbCBzdWZmaWNlIHRvIGhhbmRsZSB0aGUgZm9sbG93aW5nIFwiICsgX2FsbEJvYXJkcy5Db3VudCArIFwiIGJvYXJkczogXCIgKyBhbGxCb2FyZHNUZXggKyBcIi5cIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoTWluZC5CcmVha2VyV29uQm9hcmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlVuZm9ydHVuYXRlbHksIHRoZSBmb2xsb3dpbmcgXCIgKyBNaW5kLkJyZWFrZXJXb25Cb2FyZHMuQ291bnQgKyAgXCIgYm9hcmRzIGNhbm5vdCBiZSBoYW5kbGVkOiBcIiArIEdlbmVyYWxpemVCb2FyZHMoTWluZC5CcmVha2VyV29uQm9hcmRzKSArIFwiLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RyaW5nIEdlbmVyYWxpemVCb2FyZHMoTGlzdDxTdXBlclNsaW1Cb2FyZD4gYm9hcmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFVzZVdpbGRDYXJkcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4YW1wbGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoYiA9PiBUb0xpc3RJbmRpY2VzKGIpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9uRXhhbXBsZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oRW51bWVyYWJsZS5SZXBlYXQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF9wb3NzaWJsZUxpc3RJbmRpY2VzLCBfYWN0aXZlSW5kaWNlcy5Db3VudCkpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsbCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KGxsKSkpLkV4Y2VwdChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihleGFtcGxlcyxfc2VxdWVuY2VDb21wYXJlciksIF9zZXF1ZW5jZUNvbXBhcmVyKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZ2VuZXJhbGl6ZWQgPSBfc2VxdWVuY2VHZW5lcmFsaXplci5HZW5lcmFsaXplKGV4YW1wbGVzLCBub25FeGFtcGxlcywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXI+LHN0cmluZz4oZ2VuZXJhbGl6ZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyPiwgc3RyaW5nPikoZ2cgPT4gXCIkXCIgKyBzdHJpbmcuSm9pbihcInxcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXIsc3RyaW5nPihnZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlciwgaW50LCBzdHJpbmc+KSgoXywgaSkgPT4gXy5Ub1RleChfcG9zc2libGVMaXN0cywgX2FjdGl2ZUxpc3RTaXplc1tpXSkpKSkgKyBcIiRcIikpLFwiYW5kXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsc3RyaW5nPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgc3RyaW5nPikoYiA9PiBiLlRvTGlzdFN0cmluZ0luTGV4T3JkZXIoX21heFBvdCkpKS5PcmRlckJ5PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBzdHJpbmc+KSh4ID0+IHgpKS5TZWxlY3Q8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT4gXCIkXCIgKyBzICsgXCIkXCIpKSxcImFuZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8aW50PiBUb0xpc3RJbmRpY2VzKFN1cGVyU2xpbUJvYXJkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYi5TdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsID0+IGwuVG9TZXQoKSkpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikocyA9PiBzLkNvdW50IDwgX21heFBvdCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihzdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGludD4pKHMgPT4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5GaXJzdEluZGV4PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfcG9zc2libGVMaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNzID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KHNzLHMpKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgR2VuZXJhdGVQb3NzaWJsZUxpc3RzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihNaW5kLkNvbG9yYWJsZUJvYXJkc1swXS5TdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsID0+IGwuVG9TZXQoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBfYWN0aXZlSW5kaWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHMgPT4gcy5Db3VudCA8IF9tYXhQb3QpKSk7XHJcbiAgICAgICAgICAgIF9hY3RpdmVMaXN0U2l6ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KHN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikocyA9PiBzLkNvdW50KSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoYyA9PiBjIDwgX21heFBvdCkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvdCA9IEVudW1lcmFibGUuUmFuZ2UoMCwgX21heFBvdCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIF9wb3NzaWJsZUxpc3RzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGludCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5EaXN0aW5jdDxpbnQ+KF9hY3RpdmVMaXN0U2l6ZXMpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGMgPT4gYykpLlRvTGlzdCgpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KShjID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KHBvdCxjKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBfcG9zc2libGVMaXN0SW5kaWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgX3Bvc3NpYmxlTGlzdHMuQ291bnQpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHN0YXRpYyB2b2lkIEJlZ2luUHJvb2YoU3RyaW5nQnVpbGRlciBzYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmVnaW57cHJvb2Z9XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHN0YXRpYyB2b2lkIEVuZFByb29mKFN0cmluZ0J1aWxkZXIgc2IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGVuZHtwcm9vZn1cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEFkZEZpZ3VyZShTdHJpbmdCdWlsZGVyIHNiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGZpZ3VyZUlEID0gXCJmaWc6XCIgKyBHdWlkLk5ld0d1aWQoKS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiZWdpbntmaWd1cmV9XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGNlbnRlcmluZ1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShfZmlndXJlVGlreik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcY2FwdGlvbntWZXJ0aWNlcyBhcmUgb3JkZXJlZCBhcyBsYWJlbGVkLn1cXFxcbGFiZWx7XCIgKyBmaWd1cmVJRCArIFwifVwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxlbmR7ZmlndXJlfVwiKTtcclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmVnaW57bGVtfVwiKTtcclxuICAgICAgICAgICAgaWYgKF9pc1dpbilcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJUaGUgZ3JhcGggaW4gRmlndXJlIFxcXFxyZWZ7XCIgKyBmaWd1cmVJRCArIFwifSBpcyByZWR1Y2libGUuXCIpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVGhlIGdyYXBoIGluIEZpZ3VyZSBcXFxccmVme1wiICsgZmlndXJlSUQgKyBcIn0gaXMgbm90IHJlZHVjaWJsZS5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcZW5ke2xlbX1cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuTWF4RGVncmVlVGhyZWU7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBNYXhpbXVtRGVncmVlVGhyZWVQcm9vZkJ1aWxkZXIgOiBQZXJtdXRhdGlvbkF3YXJlUHJvb2ZCdWlsZGVyXHJcbiAgICB7XHJcbiAgICAgICAgc3RyaW5nIF9maWd1cmVUaWt6O1xyXG4gICAgICAgIHB1YmxpYyBNYXhpbXVtRGVncmVlVGhyZWVQcm9vZkJ1aWxkZXIoU3VwZXJTbGltTWluZCBtaW5kLCBzdHJpbmcgZmlndXJlVGlreiA9IFwiXCIpXHJcbiAgICAgICAgICAgIDogYmFzZShtaW5kKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2ZpZ3VyZVRpa3ogPSBmaWd1cmVUaWt6O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBXcml0ZVByb29mKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBNaW5kLkNvbG9yYWJsZUJvYXJkc1swXS5Ub1hZWigpLkxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGFsbEJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihNaW5kLkNvbG9yYWJsZUJvYXJkcyxNaW5kLk5vbkNvbG9yYWJsZUJvYXJkcykpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbXBhcmVyID0gbmV3IFNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5WZWN0b3JDb21wYXJlcigpO1xyXG4gICAgICAgICAgICB2YXIgc2cgPSBuZXcgU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+KGxlbmd0aCwgQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX283KT0+e19vNy5BZGQoMCk7X283LkFkZCgxKTtfbzcuQWRkKDIpO3JldHVybiBfbzc7fSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHpvdDIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihhbGxCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShiID0+IGIuVG8wMTIoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgZXhhbXBsZXMyID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYWxsQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoYiA9PiBiLlRvMDEyKCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBub25FeGFtcGxlczIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oRW51bWVyYWJsZS5SZXBlYXQ8Z2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8aW50Pj4oRW51bWVyYWJsZS5SYW5nZSgwLCAzKSwgbGVuZ3RoKSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGxsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4obGwpKSkuRXhjZXB0KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHpvdDIsY29tcGFyZXIpLCBjb21wYXJlcikuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZ2VuZXJhbGl6ZWQyID0gc2cuR2VuZXJhbGl6ZShleGFtcGxlczIsIG5vbkV4YW1wbGVzMiwgZmFsc2UpO1xyXG4gICAgICAgICAgICB2YXIgYWxsQm9hcmRzWFlaID0gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcj4sc3RyaW5nPihnZW5lcmFsaXplZDIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyPiwgc3RyaW5nPikoZ2cgPT4gXCIkXCIgKyBzdHJpbmcuSm9pbihcIlwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcixzdHJpbmc+KGdnLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyLCBzdHJpbmc+KShfID0+IF8uVG9UZXgoKSkpKSArIFwiJFwiKSksXCJvclwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcbiAgICAgICAgICAgIHZhciBmaWd1cmVJRCA9IFwiZmlnOlwiICsgR3VpZC5OZXdHdWlkKCkuVG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmVnaW57ZmlndXJlfVwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxjZW50ZXJpbmdcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoX2ZpZ3VyZVRpa3opO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGNhcHRpb257U29saWQgdmVydGljZXMgaGF2ZSBsaXN0cyBvZiBzaXplIDMgYW5kIHRoZSBsYWJlbGVkIHZlcnRpY2VzIGhhdmUgbGlzdHMgb2Ygc2l6ZSAyLn1cXFxcbGFiZWx7XCIgKyBmaWd1cmVJRCArIFwifVwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxlbmR7ZmlndXJlfVwiKTtcclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmVnaW57bGVtfVwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlRoZSBncmFwaCBpbiBGaWd1cmUgXFxcXHJlZntcIiArIGZpZ3VyZUlEICsgXCJ9IGlzIHJlZHVjaWJsZS5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcZW5ke2xlbX1cIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGV0dGVycyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxzdHJpbmc+KCksKF9vOCk9PntfbzguQWRkKFwiWFwiKTtfbzguQWRkKFwiWVwiKTtfbzguQWRkKFwiWlwiKTtyZXR1cm4gX284O30pO1xyXG4gICAgICAgICAgICB2YXIgc3RyaW5nTGVuZ3RoID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxsb25nPihNaW5kLkNvbG9yYWJsZUJvYXJkc1swXS5TdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgYm9vbD4pKHNzID0+IHNzLlBvcHVsYXRpb25Db3VudCgpID09IDIpKTtcclxuICAgICAgICAgICAgdmFyIHJuZyA9IG5ldyBSYW5kb20oRGF0ZVRpbWUuTm93Lk1pbGxpc2Vjb25kKTtcclxuICAgICAgICAgICAgdmFyIHJhbmRvbVN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RyaW5nTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICByYW5kb21TdHJpbmcgKz0gbGV0dGVyc1tybmcuTmV4dCgzKV07XHJcblxyXG4gICAgICAgICAgICB2YXIgcmFuZG9tU3RyaW5nMiA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RyaW5nTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICByYW5kb21TdHJpbmcyICs9IGxldHRlcnNbcm5nLk5leHQoMyldO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJhbmRvbVN0cmluZzMgPSBcIlwiO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN0cmluZ0xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcmFuZG9tU3RyaW5nMyArPSBsZXR0ZXJzW3JuZy5OZXh0KDMpXTtcclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZChcIlxcXFxiZWdpbntwcm9vZn1cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJMZXQgJFggPSBcXFxcezAsMVxcXFx9JCwgJFkgPSBcXFxcezAsMlxcXFx9JCBhbmQgJFogPSBcXFxcezEsMlxcXFx9JC4gVGhlbiB3aXRoIHRoZSB2ZXJ0ZXggb3JkZXJpbmcgaW4gRmlndXJlIFxcXFxyZWZ7XCIgKyBmaWd1cmVJRCArIFwifSwgYSBzdHJpbmcgc3VjaCBhcyBcIiArIHJhbmRvbVN0cmluZyArIFwiLCBcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJyZXByZXNlbnRzIGEgcG9zc2libGUgbGlzdCBhc3NpZ25tZW50IG9uICRWKEgpJCBhcmlzaW5nIGZyb20gYSAkMyQtZWRnZS1jb2xvcmluZyBvZiAkRy1FKEgpJC5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJCeSBhbiAkWCQtS2VtcGUgY2hhbmdlLCB3ZSBtZWFuIGZsaXBwaW5nIGNvbG9ycyAkMCQgYW5kICQxJCBvbiBhIHR3by1jb2xvcmVkIHBhdGggaW4gJEctRShIKSQuICBXZSBjYWxsIHN1Y2ggYSBwYXRoIGFuICRYJC1wYXRoLiBcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJBbnkgZW5kcG9pbnQgb2YgYW4gJFgkLXBhdGggaW4gJEgkIG11c3QgZW5kIGF0IGEgJFkkIG9yICRaJCB2ZXJ0ZXguICBUaGUgbWVhbmluZ3Mgb2YgJFkkLUtlbXBlIGNoYW5nZSwgJFokLUtlbXBlIGNoYW5nZSwgJFkkLXBhdGggYW5kICRaJC1wYXRoIGFyZSBhbmFsb2dvdXMuXCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiTm90ZSB0aGF0IGlmIHRoZXJlIGFyZSBhbiBvZGQgbnVtYmVyIG9mICRZJCdzIGFuZCAkWiQncywgdGhlbiBhdCBsZWFzdCBvbmUgJFgkLXBhdGggaGFzIG9ubHkgb25lIGVuZHBvaW50IGluICRIJC5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJXZSB1c2Ugc2hvcnRoYW5kIG5vdGF0aW9uIGxpa2UgJFxcXFxLX3tYLCAyfShcIiArIHJhbmRvbVN0cmluZyArIFwiLDUsNikgXFxcXFJpZ2h0YXJyb3cgXCIgKyByYW5kb21TdHJpbmcyICsgXCIsXCIgKyByYW5kb21TdHJpbmczICsgXCIkIChDYXNlIDEpLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlRoaXMgbWVhbnMgdGhlICRYJC1LZW1wZSBjaGFuZ2Ugb24gXCIgKyByYW5kb21TdHJpbmcgKyBcIiBzdGFydGluZyBhdCB0aGUgc2Vjb25kIHZlcnRleCBhbmQgZW5kaW5nIGF0IHRoZSBmaWZ0aCBhbmQgc2l4dGggcmVzdWx0IGluIGJvYXJkcyBcIiArIHJhbmRvbVN0cmluZzIgKyBcIiBhbmQgXCIgKyByYW5kb21TdHJpbmczICsgXCIgcmVzcGVjdGl2ZWx5IGFuZCB0aGVzZSBhcmUgaGFuZGxlZCBieSBDYXNlIDEuXCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVGhlICRcXFxcaW5mdHkkIHN5bWJvbCBtZWFucyBzdGFydGluZyAob3IgZW5kaW5nKSBvdXRzaWRlICRIJC5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChNaW5kLk9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIldlIG5lZWQgdG8gaGFuZGxlIGFsbCBib2FyZHMgdGhhdCBhcmUgbmVhcmx5IGNvbG9yYWJsZSBmb3IgZWRnZSAkZSQgdXAgdG8gcGVybXV0YXRpb25zIG9mICRcXFxce1gsWSxaXFxcXH0kLCBzbyBpdCB3aWxsIHN1ZmZpY2UgdG8gaGFuZGxlIGFsbCBib2FyZHMgb2YgdGhlIGZvcm0gXCIgKyBhbGxCb2FyZHNYWVogKyBcIi5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiV2UgbmVlZCB0byBoYW5kbGUgYWxsIGJvYXJkcyB1cCB0byBwZXJtdXRhdGlvbnMgb2YgJFxcXFx7WCxZLFpcXFxcfSQsIHNvIGl0IHdpbGwgc3VmZmljZSB0byBoYW5kbGUgYWxsIGJvYXJkcyBvZiB0aGUgZm9ybSBcIiArIGFsbEJvYXJkc1hZWiArIFwiLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICB2YXIgd29uQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGNhc2VOdW1iZXIgPSAxOyBjYXNlTnVtYmVyIDw9IENhc2VzLkNvdW50OyBjYXNlTnVtYmVyKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gQ2FzZXNbY2FzZU51bWJlciAtIDFdO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBib2FyZHMgPSBjLkJvYXJkcztcclxuICAgICAgICAgICAgICAgIExpc3Q8U3VwZXJTbGltQm9hcmQ+IHRoaXNDbGFpbUJvYXJkcztcclxuICAgICAgICAgICAgICAgIGlmIChjYXNlTnVtYmVyID4gMSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQ2xhaW1Cb2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPj4pKGIgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5VbmlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihuZXdbXSB7IGIgfSxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oX3Blcm11dGF0aW9uTGlua2VkW2JdLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4pKHR1cCA9PiB0dXAuSXRlbTIpKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQ2xhaW1Cb2FyZHMgPSBib2FyZHM7XHJcblxyXG4gICAgICAgICAgICAgICAgd29uQm9hcmRzLkFkZFJhbmdlKHRoaXNDbGFpbUJvYXJkcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHpvdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHRoaXNDbGFpbUJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGIgPT4gYi5UbzAxMigpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhhbXBsZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pih0aGlzQ2xhaW1Cb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShiID0+IGIuVG8wMTIoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vbkV4YW1wbGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxpbnQ+KEVudW1lcmFibGUuUmVwZWF0PGdsb2JhbDo6U3lzdGVtLkxpbnEuRW51bWVyYWJsZUluc3RhbmNlPGludD4+KEVudW1lcmFibGUuUmFuZ2UoMCwgMyksIGxlbmd0aCkpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsbCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KGxsKSkpLkV4Y2VwdChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pih6b3QsY29tcGFyZXIpLCBjb21wYXJlcikuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdlbmVyYWxpemVkID0gc2cuR2VuZXJhbGl6ZShleGFtcGxlcywgbm9uRXhhbXBsZXMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkc1hZWiA9IEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXI+LHN0cmluZz4oZ2VuZXJhbGl6ZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyPiwgc3RyaW5nPikoZ2cgPT4gXCIkXCIgKyBzdHJpbmcuSm9pbihcIlwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcixzdHJpbmc+KGdnLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyLCBzdHJpbmc+KShfID0+IF8uVG9UZXgoKSkpKSArIFwiJFwiKSksXCJvclwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJpZ3NraXBcIik7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKHN0cmluZy5Gb3JtYXQoXCJcXFxcY2FzZXt7ezB9fX17eyRCJCBpcyBvbmUgb2YgXCIgKyBib2FyZHNYWVogKyBcIi59fVwiLCBjYXNlTnVtYmVyKSk7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJpZ3NraXBcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FzZU51bWJlciA9PSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiSW4gYWxsIHRoZXNlIGNhc2VzLCAkSCQgaXMgaW1tZWRpYXRlbHkgY29sb3JhYmxlIGZyb20gdGhlIGxpc3RzLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpeEdyb3VwcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuR3JvdXBCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLHN0cmluZz4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIHN0cmluZz4pKGIgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmVlSW5mbyA9IE1pbmQuR2V0V2luVHJlZUluZm8oYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXhMZXR0ZXIgPSAoKGxvbmcpKCgxIDw8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkFscGhhKSB8ICgxIDw8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkJldGEpKSkuVG9YWVooKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaXhMZXR0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZml4R3JvdXAgaW4gZml4R3JvdXBzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG90aGVycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PHN0cmluZz4obGV0dGVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVycy5SZW1vdmUoZml4R3JvdXAuS2V5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzd2FwQ291bnRHcm91cHMgPSBmaXhHcm91cC5Hcm91cEJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgaW50PikoYiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihNaW5kLkdldFdpblRyZWVJbmZvKGIpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKHRpID0+IHRpLlN3YXBWZXJ0aWNlcy5Db3VudCkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzd2FwQ291bnRHcm91cCBpbiBzd2FwQ291bnRHcm91cHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzd2FwQ291bnRHcm91cC5LZXkgPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiBzd2FwQ291bnRHcm91cClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmVlSW5mbyA9IE1pbmQuR2V0V2luVHJlZUluZm8oYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncm91cHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkdyb3VwQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KHRyZWVJbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKHNzID0+IHNzLlN3YXBWZXJ0aWNlc1swXSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiJFxcXFxLX3tcIiArIGZpeEdyb3VwLktleSArIFwiLFxcXFxpbmZ0eX0oXCIgKyBiLlRvWFlaKCkgKyBcIixcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8aW50Pihncm91cHMuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgaW50PikoZ2cgPT4gZ2cuS2V5KSkuU2VsZWN0PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBpbnQ+KShnZyA9PiBnZy5LZXkuR2V0WFlaSW5kZXgoYikgKyAxKSksbnVsbCkgKyBcIilcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcUmlnaHRhcnJvdyAkXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oZ3JvdXBzLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5MaW5xLkdyb3VwaW5nPGludCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4sIGludD4pKGdnID0+IGdnLktleSkpLlNlbGVjdDxzdHJpbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgc3RyaW5nPikoZ2cgPT4gXCIkXCIgKyBHZXRDaGlsZEJvYXJkTmFtZShiLCBnZy5GaXJzdCgpKSArIFwiJFwiKSksbnVsbCkgKyBcIiggQ2FzZSBcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gR2V0SGFuZGxlZENhc2VOdW1iZXIoYiwgYmMpKSkuRGlzdGluY3QoKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh4eCA9PiB4eCkpKSArIFwiKS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfcGVybXV0YXRpb25MaW5rZWRbYl0uQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sc3RyaW5nPihfcGVybXV0YXRpb25MaW5rZWRbYl0sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LCBzdHJpbmc+KShwcHAgPT4gXCIkXCIgKyBwcHAuSXRlbTEgKyBcIlxcXFxSaWdodGFycm93IFwiICsgcHBwLkl0ZW0yLlRvWFlaKCkgKyBcIiRcIikpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzd2FwQ291bnRHcm91cC5LZXkgPT0gMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiBzd2FwQ291bnRHcm91cClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmVlSW5mbyA9IE1pbmQuR2V0V2luVHJlZUluZm8oYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0b3ZlciA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChsZWZ0b3Zlci5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21tb25lc3RTd2FwcGVyID0gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTWF4SW5kZXg8aW50PihFbnVtZXJhYmxlLlJhbmdlKDAsIGIuX3N0YWNrQ291bnQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGxlZnRvdmVyLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ29udGFpbnModikpKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZWRBbGwgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGxlZnRvdmVyLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ29udGFpbnMoY29tbW9uZXN0U3dhcHBlcikpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KGhhbmRsZWRBbGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID09IDEgPyAtMSA6IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIiRcXFxcS197XCIgKyBmaXhHcm91cC5LZXkgKyBcIixcIiArIChjb21tb25lc3RTd2FwcGVyLkdldFhZWkluZGV4KGIpICsgMSkgKyBcIn0oXCIgKyBiLlRvWFlaKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaW5nbGUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0T3JEZWZhdWx0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db3VudCA9PSAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2luZ2xlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiLFxcXFxpbmZ0eVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID4gMSkpLkNvdW50KCkgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIixcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db3VudCA+IDEpKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkV4Y2VwdDxpbnQ+KGJjLlN3YXBWZXJ0aWNlcyxjb21tb25lc3RTd2FwcGVyKSkpKS5TZWxlY3Q8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRXhjZXB0PGludD4oYmMuU3dhcFZlcnRpY2VzLGNvbW1vbmVzdFN3YXBwZXIpKS5HZXRYWVpJbmRleChiKSArIDEpKSxudWxsKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIpXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcUmlnaHRhcnJvdyAkXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8saW50PihoYW5kbGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db3VudCA9PSAxID8gLTEgOiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRXhjZXB0PGludD4oYmMuU3dhcFZlcnRpY2VzLGNvbW1vbmVzdFN3YXBwZXIpKSkpLlNlbGVjdDxzdHJpbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIHN0cmluZz4pKGJjID0+IFwiJFwiICsgR2V0Q2hpbGRCb2FyZE5hbWUoYiwgYmMpICsgXCIkXCIpKSxudWxsKSArIFwiKENhc2UgXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PGludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gR2V0SGFuZGxlZENhc2VOdW1iZXIoYiwgYmMpKSkuRGlzdGluY3QoKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh4eCA9PiB4eCkpKSArIFwiKS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJjIGluIGhhbmRsZWRBbGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdG92ZXIuUmVtb3ZlKGJjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9wZXJtdXRhdGlvbkxpbmtlZFtiXS5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixzdHJpbmc+KF9wZXJtdXRhdGlvbkxpbmtlZFtiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIHN0cmluZz4pKHBwcCA9PiBcIiRcIiArIHBwcC5JdGVtMSArIFwiXFxcXFJpZ2h0YXJyb3cgXCIgKyBwcHAuSXRlbTIuVG9YWVooKSArIFwiJFwiKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcZW5ke3Byb29mfVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNiLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHJpbmcgR2V0Q2hpbGRCb2FyZE5hbWUoU3VwZXJTbGltQm9hcmQgYiwgQnJlYWtlckNob2ljZUluZm8gYmMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBTdXBlclNsaW1Cb2FyZChiLl90cmFjZSwgYmMuQWxwaGEsIGJjLkJldGEsIGJjLlJlc3BvbnNlLCBiLl9zdGFja0NvdW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkQm9hcmQuVG9YWVooKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBHcmFwaGljc0xheWVyO1xyXG51c2luZyBHcmFwaHM7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgR3JhcGhzQ29yZTtcclxuXHJcbm5hbWVzcGFjZSBUZXN0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBUYWJDYW52YXMgOiBJQ2FudmFzXHJcbiAgICB7XHJcbiAgICAgICAgYm9vbCBfY3RybERvd247XHJcbiAgICAgICAgc3RyaW5nIF90aXRsZTtcclxuICAgICAgICBwdWJsaWMgSFRNTENhbnZhc0VsZW1lbnQgQ2FudmFzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaENhbnZhcyBHcmFwaENhbnZhcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFRhYkNhbnZhcyhIVE1MQ2FudmFzRWxlbWVudCBjYW52YXMsIEdyYXBoQ2FudmFzIGdyYXBoQ2FudmFzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR3JhcGhDYW52YXMgPSBncmFwaENhbnZhcztcclxuICAgICAgICAgICAgQ2FudmFzID0gY2FudmFzO1xyXG4gICAgICAgICAgICBHcmFwaENhbnZhcy5DYW52YXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgQ2FudmFzLk9uRGJsQ2xpY2sgKz0gT25Nb3VzZURvdWJsZUNsaWNrO1xyXG4gICAgICAgICAgICBDYW52YXMuT25Nb3VzZURvd24gKz0gT25Nb3VzZUJ1dHRvbkRvd247XHJcbiAgICAgICAgICAgIENhbnZhcy5Pbk1vdXNlVXAgKz0gT25Nb3VzZUJ1dHRvblVwO1xyXG4gICAgICAgICAgICBDYW52YXMuT25Nb3VzZU1vdmUgKz0gT25Nb3VzZU1vdmU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBDYW52YXMuT25Mb2FkID0gT25Mb2FkO1xyXG5cclxuICAgICAgICAgICAgR3JhcGhDYW52YXMuR3JhcGhNb2RpZmllZCArPSBPbkdyYXBoTW9kaWZpZWQ7XHJcbiAgICAgICAgICAgIEdyYXBoQ2FudmFzLk5hbWVNb2RpZmllZCArPSBPbk5hbWVNb2RpZmllZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25OYW1lTW9kaWZpZWQoc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUaXRsZSA9IG5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIFNhZ2VcclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNYW51YWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2UoXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNocm9tYXRpY1BvbHlub21pYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2hyb21hdGljX3BvbHlub21pYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR3JhcGg2KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdyYXBoNl9zdHJpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3BhcnNlNigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zcGFyc2U2X3N0cmluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDaHJvbWF0aWNOdW1iZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2hyb21hdGljX251bWJlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDaHJvbWF0aWNRdWFzaXN5bW1ldHJpY0Z1bmN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNocm9tYXRpY19xdWFzaXN5bW1ldHJpY19mdW5jdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDaHJvbWF0aWNTeW1tZXRyaWNGdW5jdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jaHJvbWF0aWNfc3ltbWV0cmljX2Z1bmN0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvbG9yaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbG9yaW5nKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvbnZleGl0eVByb3BlcnRpZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29udmV4aXR5X3Byb3BlcnRpZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSGFzSG9tb21vcnBoaXNtVG8oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaGFzX2hvbW9tb3JwaGlzbV90bygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJbmRlcGVuZGVudFNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pbmRlcGVuZGVudF9zZXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSW5kZXBlbmRlbnRTZXRPZlJlcHJlc2VudGF0aXZlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pbmRlcGVuZGVudF9zZXRfb2ZfcmVwcmVzZW50YXRpdmVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzUGVyZmVjdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19wZXJmZWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1hdGNoaW5nUG9seW5vbWlhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tYXRjaGluZ19wb2x5bm9taWFsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1pbm9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1pbm9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVBhdGh3aWR0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5wYXRod2lkdGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmFua0RlY29tcG9zaXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFua19kZWNvbXBvc2l0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRvcG9sb2dpY2FsTWlub3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudG9wb2xvZ2ljYWxfbWlub3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVHJlZXdpZHRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRyZWV3aWR0aCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUdXR0ZVBvbHlub21pYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudHV0dGVfcG9seW5vbWlhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VWZXJ0ZXhDb3ZlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy52ZXJ0ZXhfY292ZXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQmlwYXJ0aXRlQ29sb3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYmlwYXJ0aXRlX2NvbG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUJpcGFydGl0ZVNldHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYmlwYXJ0aXRlX3NldHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR3JhcGg2U3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdyYXBoNl9zdHJpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNEaXJlY3RlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19kaXJlY3RlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VKb2luKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmpvaW4oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3BhcnNlNlN0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zcGFyc2U2X3N0cmluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUb0RpcmVjdGVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRvX2RpcmVjdGVkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRvVW5kaXJlY3RlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50b191bmRpcmVjdGVkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVdyaXRlVG9FcHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcud3JpdGVfdG9fZXBzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZUNvbXBsZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlX2NvbXBsZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlTWF4aW11bSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVfbWF4aW11bSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVOdW1iZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlX251bWJlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVQb2x5bm9taWFsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZV9wb2x5bm9taWFsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZXNDb250YWluaW5nVmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfY29udGFpbmluZ192ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc0dldENsaXF1ZUJpcGFydGl0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVzX2dldF9jbGlxdWVfYmlwYXJ0aXRlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZXNHZXRNYXhDbGlxdWVHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVzX2dldF9tYXhfY2xpcXVlX2dyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZXNNYXhpbWFsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfbWF4aW1hbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVzTWF4aW11bSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVzX21heGltdW0oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc051bWJlck9mKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfbnVtYmVyX29mKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZXNWZXJ0ZXhDbGlxdWVOdW1iZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlc192ZXJ0ZXhfY2xpcXVlX251bWJlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VCb3VuZGVkT3V0ZGVncmVlT3JpZW50YXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYm91bmRlZF9vdXRkZWdyZWVfb3JpZW50YXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQnJpZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5icmlkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlZ3JlZUNvbnN0cmFpbmVkU3ViZ3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVncmVlX2NvbnN0cmFpbmVkX3N1YmdyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdvbW9yeUh1VHJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5nb21vcnlfaHVfdHJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNaW5pbXVtT3V0ZGVncmVlT3JpZW50YXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubWluaW11bV9vdXRkZWdyZWVfb3JpZW50YXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlT3JpZW50YXRpb25zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm9yaWVudGF0aW9ucygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSYW5kb21TcGFubmluZ1RyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFuZG9tX3NwYW5uaW5nX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3Bhbm5pbmdUcmVlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zcGFubmluZ190cmVlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTdHJvbmdPcmllbnRhdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdHJvbmdfb3JpZW50YXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQXBleFZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFwZXhfdmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQXBleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19hcGV4KClcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0FyY1RyYW5zaXRpdmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfYXJjX3RyYW5zaXRpdmUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNBc3Rlcm9pZGFsVHJpcGxlRnJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19hc3Rlcm9pZGFsX3RyaXBsZV9mcmVlKClcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgXHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQmljb25uZWN0ZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfYmljb25uZWN0ZWQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNCaXBhcnRpdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfYmlwYXJ0aXRlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQmxvY2tHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19ibG9ja19ncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0NhcnRlc2lhblByb2R1Y3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfY2FydGVzaWFuX3Byb2R1Y3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNEaXN0YW5jZVJlZ3VsYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZGlzdGFuY2VfcmVndWxhcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0VkZ2VUcmFuc2l0aXZlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2VkZ2VfdHJhbnNpdGl2ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0V2ZW5Ib2xlRnJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19ldmVuX2hvbGVfZnJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0ZvcmVzdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19mb3Jlc3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNIYWxmVHJhbnNpdGl2ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19oYWxmX3RyYW5zaXRpdmUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNMaW5lR3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfbGluZV9ncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0xvbmdBbnRpaG9sZUZyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfbG9uZ19hbnRpaG9sZV9mcmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzTG9uZ0hvbGVGcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2xvbmdfaG9sZV9mcmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzT2RkSG9sZUZyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfb2RkX2hvbGVfZnJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc092ZXJmdWxsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX292ZXJmdWxsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzUGFydGlhbEN1YmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfcGFydGlhbF9jdWJlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzUHJpbWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfcHJpbWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNTZW1pU3ltbWV0cmljKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3NlbWlfc3ltbWV0cmljKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzU3BsaXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfc3BsaXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNTdHJvbmdseVJlZ3VsYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfc3Ryb25nbHlfcmVndWxhcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1RyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfdHJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1RyaWFuZ2xlRnJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc190cmlhbmdsZV9mcmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzV2Vha2x5Q2hvcmRhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc193ZWFrbHlfY2hvcmRhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VPZGRHaXJ0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5vZGRfZ2lydGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ29yZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29yZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRnJhY3Rpb25hbENocm9tYXRpY0luZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmZyYWN0aW9uYWxfY2hyb21hdGljX2luZGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUhhc1BlcmZlY3RNYXRjaGluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5oYXNfcGVyZmVjdF9tYXRjaGluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJaGFyYVpldGFGdW5jdGlvbkludmVyc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaWhhcmFfemV0YV9mdW5jdGlvbl9pbnZlcnNlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUtpcmNoaG9mZlN5bWFuemlrUG9seW5vbWlhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5raXJjaGhvZmZfc3ltYW56aWtfcG9seW5vbWlhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMb3Zhc3pUaGV0YSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5sb3Zhc3pfdGhldGEoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTWFnbml0dWRlRnVuY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubWFnbml0dWRlX2Z1bmN0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1hdGNoaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1hdGNoaW5nKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1heGltdW1BdmVyYWdlRGVncmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1heGltdW1fYXZlcmFnZV9kZWdyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTW9kdWxhckRlY29tcG9zaXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubW9kdWxhcl9kZWNvbXBvc2l0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVBlcmZlY3RNYXRjaGluZ3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucGVyZmVjdF9tYXRjaGluZ3MoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2VpZGVsQWRqYWNlbmN5TWF0cml4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNlaWRlbF9hZGphY2VuY3lfbWF0cml4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU5ldHdvcmt4R3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubmV0d29ya3hfZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSWdyYXBoR3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaWdyYXBoX2dyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRvRGljdGlvbmFyeSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50b19kaWN0aW9uYXJ5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvcHkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29weSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFeHBvcnRUb0ZpbGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZXhwb3J0X3RvX2ZpbGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWRqYWNlbmN5TWF0cml4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFkamFjZW5jeV9tYXRyaXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSW5jaWRlbmNlTWF0cml4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmluY2lkZW5jZV9tYXRyaXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzdGFuY2VNYXRyaXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGlzdGFuY2VfbWF0cml4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVdlaWdodGVkQWRqYWNlbmN5TWF0cml4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLndlaWdodGVkX2FkamFjZW5jeV9tYXRyaXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlS2lyY2hob2ZmTWF0cml4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmtpcmNoaG9mZl9tYXRyaXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSGFzTG9vcHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaGFzX2xvb3BzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFsbG93c0xvb3BzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFsbG93c19sb29wcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBbGxvd0xvb3BzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFsbG93X2xvb3BzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxvb3BzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxvb3BzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxvb3BFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5sb29wX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU51bWJlck9mTG9vcHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubnVtYmVyX29mX2xvb3BzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxvb3BWZXJ0aWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5sb29wX3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJlbW92ZUxvb3BzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnJlbW92ZV9sb29wcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VIYXNNdWx0aXBsZUVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmhhc19tdWx0aXBsZV9lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBbGxvd3NNdWx0aXBsZUVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFsbG93c19tdWx0aXBsZV9lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBbGxvd011bHRpcGxlRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWxsb3dfbXVsdGlwbGVfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTXVsdGlwbGVFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tdWx0aXBsZV9lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VOYW1lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm5hbWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNJbW11dGFibGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfaW1tdXRhYmxlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVdlaWdodGVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLndlaWdodGVkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFudGlzeW1tZXRyaWMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYW50aXN5bW1ldHJpYygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZW5zaXR5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlbnNpdHkoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlT3JkZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcub3JkZXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2l6ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zaXplKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFkZFZlcnRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hZGRfdmVydGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFkZFZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFkZF92ZXJ0aWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWxldGVWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVsZXRlX3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWxldGVWZXJ0aWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWxldGVfdmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSGFzVmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmhhc192ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmFuZG9tVmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnJhbmRvbV92ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmFuZG9tVmVydGV4SXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFuZG9tX3ZlcnRleF9pdGVyYXRvcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSYW5kb21FZGdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnJhbmRvbV9lZGdlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJhbmRvbUVkZ2VJdGVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yYW5kb21fZWRnZV9pdGVyYXRvcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VWZXJ0ZXhCb3VuZGFyeSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy52ZXJ0ZXhfYm91bmRhcnkoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2V0VmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNldFZlcnRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zZXRfdmVydGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdldFZlcnRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5nZXRfdmVydGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdldFZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdldF92ZXJ0aWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VWZXJ0ZXhJdGVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy52ZXJ0ZXhfaXRlcmF0b3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTmVpZ2hib3JJdGVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5uZWlnaGJvcl9pdGVyYXRvcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VWZXJ0aWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy52ZXJ0aWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VOZWlnaGJvcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubmVpZ2hib3JzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1lcmdlVmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubWVyZ2VfdmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWRkRWRnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hZGRfZWRnZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBZGRFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hZGRfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3ViZGl2aWRlRWRnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdWJkaXZpZGVfZWRnZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTdWJkaXZpZGVFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdWJkaXZpZGVfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVsZXRlRWRnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWxldGVfZWRnZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWxldGVFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWxldGVfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVsZXRlTXVsdGllZGdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlbGV0ZV9tdWx0aWVkZ2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2V0RWRnZUxhYmVsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNldF9lZGdlX2xhYmVsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUhhc0VkZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaGFzX2VkZ2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZUJvdW5kYXJ5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VfYm91bmRhcnkoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZUl0ZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VfaXRlcmF0b3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZXNJbmNpZGVudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlc19pbmNpZGVudCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFZGdlTGFiZWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWRnZV9sYWJlbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFZGdlTGFiZWxzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VfbGFiZWxzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJlbW92ZU11bHRpcGxlRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmVtb3ZlX211bHRpcGxlX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsZWFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsZWFyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlZ3JlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWdyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQXZlcmFnZURlZ3JlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hdmVyYWdlX2RlZ3JlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWdyZWVIaXN0b2dyYW0oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVncmVlX2hpc3RvZ3JhbSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWdyZWVJdGVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWdyZWVfaXRlcmF0b3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVncmVlU2VxdWVuY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVncmVlX3NlcXVlbmNlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJhbmRvbVN1YmdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnJhbmRvbV9zdWJncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBZGRDbGlxdWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX2NsaXF1ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBZGRDeWNsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hZGRfY3ljbGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWRkUGF0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hZGRfcGF0aCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb21wbGVtZW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbXBsZW1lbnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTGluZUdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxpbmVfZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVG9TaW1wbGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudG9fc2ltcGxlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURpc2pvaW50VW5pb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGlzam9pbnRfdW5pb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVW5pb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudW5pb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmVsYWJlbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yZWxhYmVsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlZ3JlZVRvQ2VsbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWdyZWVfdG9fY2VsbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTdWJncmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdWJncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1N1YmdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3N1YmdyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNhcnRlc2lhblByb2R1Y3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2FydGVzaWFuX3Byb2R1Y3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVGVuc29yUHJvZHVjdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50ZW5zb3JfcHJvZHVjdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMZXhpY29ncmFwaGljUHJvZHVjdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5sZXhpY29ncmFwaGljX3Byb2R1Y3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3Ryb25nUHJvZHVjdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdHJvbmdfcHJvZHVjdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXNqdW5jdGl2ZVByb2R1Y3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGlzanVuY3RpdmVfcHJvZHVjdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFdWxlcmlhbk9yaWVudGF0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmV1bGVyaWFuX29yaWVudGF0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUV1bGVyaWFuQ2lyY3VpdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ldWxlcmlhbl9jaXJjdWl0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUN5Y2xlQmFzaXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY3ljbGVfYmFzaXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWxsUGF0aHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWxsX3BhdGhzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRyaWFuZ2xlc0NvdW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRyaWFuZ2xlc19jb3VudCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTcGVjdHJ1bSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zcGVjdHJ1bSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFaWdlbnZlY3RvcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWlnZW52ZWN0b3JzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVpZ2Vuc3BhY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVpZ2Vuc3BhY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsdXN0ZXJUcmlhbmdsZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2x1c3Rlcl90cmlhbmdsZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2x1c3RlcmluZ0F2ZXJhZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2x1c3RlcmluZ19hdmVyYWdlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsdXN0ZXJpbmdDb2VmZigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbHVzdGVyaW5nX2NvZWZmKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsdXN0ZXJUcmFuc2l0aXZpdHkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2x1c3Rlcl90cmFuc2l0aXZpdHkoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3plZ2VkSW5kZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3plZ2VkX2luZGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvYXJzZXN0RXF1aXRhYmxlUmVmaW5lbWVudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jb2Fyc2VzdF9lcXVpdGFibGVfcmVmaW5lbWVudCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBdXRvbW9ycGhpc21Hcm91cCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hdXRvbW9ycGhpc21fZ3JvdXAoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNWZXJ0ZXhUcmFuc2l0aXZlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3ZlcnRleF90cmFuc2l0aXZlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzSXNvbW9ycGhpYygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19pc29tb3JwaGljKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNhbm9uaWNhbExhYmVsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNhbm9uaWNhbF9sYWJlbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0NheWxleSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jYXlsZXkoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNFdWxlcmlhbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19ldWxlcmlhbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1BsYW5hcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19wbGFuYXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDaXJjdWxhclBsYW5hcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jaXJjdWxhcl9wbGFuYXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNSZWd1bGFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3JlZ3VsYXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDaG9yZGFsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2Nob3JkYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDaXJjdWxhbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfY2lyY3VsYW50KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzSW50ZXJ2YWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfaW50ZXJ2YWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNHYWxsYWlUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2dhbGxhaV90cmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ2xpcXVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2NsaXF1ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0N5Y2xlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2N5Y2xlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzSW5kZXBlbmRlbnRTZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfaW5kZXBlbmRlbnRfc2V0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzVHJhbnNpdGl2ZWx5UmVkdWNlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc190cmFuc2l0aXZlbHlfcmVkdWNlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0VxdWl0YWJsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19lcXVpdGFibGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQnJlYWR0aEZpcnN0U2VhcmNoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJyZWFkdGhfZmlyc3Rfc2VhcmNoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlcHRoRmlyc3RTZWFyY2goKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVwdGhfZmlyc3Rfc2VhcmNoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxleEJGUygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5sZXhfQkZTKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNlbnRyYWxpdHlCZXR3ZWVubmVzcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jZW50cmFsaXR5X2JldHdlZW5uZXNzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNlbnRyYWxpdHlDbG9zZW5lc3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2VudHJhbGl0eV9jbG9zZW5lc3MoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzdGFuY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGlzdGFuY2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzdGFuY2VBbGxQYWlycygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaXN0YW5jZV9hbGxfcGFpcnMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzdGFuY2VzRGlzdHJpYnV0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc3RhbmNlc19kaXN0cmlidXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWNjZW50cmljaXR5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVjY2VudHJpY2l0eSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSYWRpdXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFkaXVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNlbnRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jZW50ZXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlhbWV0ZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGlhbWV0ZXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzdGFuY2VHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaXN0YW5jZV9ncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHaXJ0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5naXJ0aCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VQZXJpcGhlcnkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucGVyaXBoZXJ5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3J0ZXN0UGF0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zaG9ydGVzdF9wYXRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3J0ZXN0UGF0aExlbmd0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zaG9ydGVzdF9wYXRoX2xlbmd0aCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTaG9ydGVzdFBhdGhzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNob3J0ZXN0X3BhdGhzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3J0ZXN0UGF0aExlbmd0aHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2hvcnRlc3RfcGF0aF9sZW5ndGhzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3J0ZXN0UGF0aEFsbFBhaXJzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNob3J0ZXN0X3BhdGhfYWxsX3BhaXJzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVdpZW5lckluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLndpZW5lcl9pbmRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBdmVyYWdlRGlzdGFuY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYXZlcmFnZV9kaXN0YW5jZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0Nvbm5lY3RlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jb25uZWN0ZWQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ29ubmVjdGVkQ29tcG9uZW50cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jb25uZWN0ZWRfY29tcG9uZW50cygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb25uZWN0ZWRDb21wb25lbnRzTnVtYmVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbm5lY3RlZF9jb21wb25lbnRzX251bWJlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb25uZWN0ZWRDb21wb25lbnRzU3ViZ3JhcGhzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbm5lY3RlZF9jb21wb25lbnRzX3N1YmdyYXBocygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb25uZWN0ZWRDb21wb25lbnRDb250YWluaW5nVmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbm5lY3RlZF9jb21wb25lbnRfY29udGFpbmluZ192ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ29ubmVjdGVkQ29tcG9uZW50c1NpemVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbm5lY3RlZF9jb21wb25lbnRzX3NpemVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUJsb2Nrc0FuZEN1dFZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJsb2Nrc19hbmRfY3V0X3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUJsb2Nrc0FuZEN1dHNUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJsb2Nrc19hbmRfY3V0c190cmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ3V0RWRnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jdXRfZWRnZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0N1dFZlcnRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jdXRfdmVydGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VDdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWRnZV9jdXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVmVydGV4Q3V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnZlcnRleF9jdXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRmxvdygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5mbG93KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VEaXNqb2ludFBhdGhzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VfZGlzam9pbnRfcGF0aHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVmVydGV4RGlzam9pbnRQYXRocygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy52ZXJ0ZXhfZGlzam9pbnRfcGF0aHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZUNvbm5lY3Rpdml0eSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2Nvbm5lY3Rpdml0eSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VWZXJ0ZXhDb25uZWN0aXZpdHkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudmVydGV4X2Nvbm5lY3Rpdml0eSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUcmFuc2l0aXZlQ2xvc3VyZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50cmFuc2l0aXZlX2Nsb3N1cmUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVHJhbnNpdGl2ZVJlZHVjdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50cmFuc2l0aXZlX3JlZHVjdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNaW5TcGFubmluZ1RyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubWluX3NwYW5uaW5nX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3Bhbm5pbmdUcmVlc0NvdW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNwYW5uaW5nX3RyZWVzX2NvdW50KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURvbWluYXRvclRyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZG9taW5hdG9yX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2V0RW1iZWRkaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNldF9lbWJlZGRpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR2V0RW1iZWRkaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdldF9lbWJlZGRpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRmFjZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZmFjZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR2V0UG9zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdldF9wb3MoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2V0UG9zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNldF9wb3MoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2V0UGxhbmFyUG9zaXRpb25zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNldF9wbGFuYXJfcG9zaXRpb25zKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNEcmF3bkZyZWVPZkVkZ2VDcm9zc2luZ3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZHJhd25fZnJlZV9vZl9lZGdlX2Nyb3NzaW5ncygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMYXRleE9wdGlvbnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubGF0ZXhfb3B0aW9ucygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRMYXRleE9wdGlvbnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X2xhdGV4X29wdGlvbnMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTGF5b3V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxheW91dCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgIFxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdyYXBocGxvdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ncmFwaHBsb3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUGxvdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5wbG90KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3coKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2hvdygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VQbG90M2QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucGxvdDNkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3czZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zaG93M2QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR3JhcGh2aXpTdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ3JhcGh2aXpfc3RyaW5nKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdyYXBodml6VG9GaWxlTmFtZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ3JhcGh2aXpfdG9fZmlsZV9uYW1lZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTdGVpbmVyVHJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdGVpbmVyX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZURpc2pvaW50U3Bhbm5pbmdUcmVlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2Rpc2pvaW50X3NwYW5uaW5nX3RyZWVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUZlZWRiYWNrVmVydGV4U2V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmZlZWRiYWNrX3ZlcnRleF9zZXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTXVsdGl3YXlDdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubXVsdGl3YXlfY3V0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1heEN1dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tYXhfY3V0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxvbmdlc3RQYXRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxvbmdlc3RfcGF0aCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUcmF2ZWxpbmdTYWxlc21hblByb2JsZW0oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudHJhdmVsaW5nX3NhbGVzbWFuX3Byb2JsZW0oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNIYW1pbHRvbmlhbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19oYW1pbHRvbmlhbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VIYW1pbHRvbmlhbkN5Y2xlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmhhbWlsdG9uaWFuX2N5Y2xlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUhhbWlsdG9uaWFuUGF0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5oYW1pbHRvbmlhbl9wYXRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU11bHRpY29tbW9kaXR5RmxvdygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tdWx0aWNvbW1vZGl0eV9mbG93KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURpc2pvaW50Um91dGVkUGF0aHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGlzam9pbnRfcm91dGVkX3BhdGhzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURvbWluYXRpbmdTZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZG9taW5hdGluZ19zZXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3ViZ3JhcGhTZWFyY2goKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZ3JhcGhfc2VhcmNoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN1YmdyYXBoU2VhcmNoQ291bnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZ3JhcGhfc2VhcmNoX2NvdW50KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN1YmdyYXBoU2VhcmNoSXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZ3JhcGhfc2VhcmNoX2l0ZXJhdG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNoYXJhY3RlcmlzdGljUG9seW5vbWlhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jaGFyYWN0ZXJpc3RpY19wb2x5bm9taWFsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdlbnVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdlbnVzKClcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIExheW91dFxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dFNwcmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGF5b3V0ID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLmxheW91dF9zcHJpbmcoKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VMYXlvdXRSYW5rZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5sYXlvdXRfcmFua2VkKClcIik7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBTY2FsZShFeHRyYWN0UG9pbnRzKGxheW91dCkpO1xyXG4gICAgICAgICAgICBhd2FpdCBMYXlvdXRHcmFwaChwb3NpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VMYXlvdXRFeHRlbmRSYW5kb21seSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGF5b3V0ID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLmxheW91dF9leHRlbmRfcmFuZG9tbHkoKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dENpcmN1bGFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X2NpcmN1bGFyKClcIik7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBTY2FsZShFeHRyYWN0UG9pbnRzKGxheW91dCkpO1xyXG4gICAgICAgICAgICBhd2FpdCBMYXlvdXRHcmFwaChwb3NpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VMYXlvdXRUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X3RyZWUoKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dEdyYXBodml6KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X2dyYXBodml6KClcIik7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBTY2FsZShFeHRyYWN0UG9pbnRzKGxheW91dCkpO1xyXG4gICAgICAgICAgICBhd2FpdCBMYXlvdXRHcmFwaChwb3NpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlTGF5b3V0UGxhbmFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X3BsYW5hcigpXCIpO1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25zID0gU2NhbGUoRXh0cmFjdFBvaW50cyhsYXlvdXQpKTtcclxuICAgICAgICAgICAgYXdhaXQgTGF5b3V0R3JhcGgocG9zaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VMb2FkTmFtZWRHcmFwaChzdHJpbmcgbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhcIkcgPSBncmFwaHMuXCIgKyBuYW1lICsgXCIoKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hZGphY2VuY3lfbWF0cml4KCkuc3RyKClcIik7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKFwiRyA9IGdyYXBocy5cIiArIG5hbWUgKyBcIigpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxheW91dCgpXCIpO1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25zID0gU2NhbGUoRXh0cmFjdFBvaW50cyhsYXlvdXQpKTtcclxuICAgICAgICAgICAgdmFyIGFkaiA9IFBhcnNlQWRqYWNlbmN5TWF0cml4KGEpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSBuZXcgQWxnb3JpdGhtcy5HcmFwaChhZGopO1xyXG5cclxuICAgICAgICAgICAgQXBwLk5ld1RhYihuYW1lLCBuZXcgR3JhcGhzLkdyYXBoKGcsIHBvc2l0aW9ucywgZmFsc2UpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICBMaXN0PFZlY3Rvcj4gU2NhbGUoSUVudW1lcmFibGU8VmVjdG9yPiBwb3NpdGlvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6R3JhcGhzLlZlY3Rvcj4ocG9zaXRpb25zKTtcclxuICAgICAgICAgICAgdmFyIG1pblggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1pbjxnbG9iYWw6OkdyYXBocy5WZWN0b3I+KGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVjdG9yLCBkb3VibGU+KShwID0+IHAuWCkpO1xyXG4gICAgICAgICAgICB2YXIgbWluWSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWluPGdsb2JhbDo6R3JhcGhzLlZlY3Rvcj4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZWN0b3IsIGRvdWJsZT4pKHAgPT4gcC5ZKSk7XHJcbiAgICAgICAgICAgIHZhciBtYXhYID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5NYXg8Z2xvYmFsOjpHcmFwaHMuVmVjdG9yPihsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlY3RvciwgZG91YmxlPikocCA9PiBwLlgpKTtcclxuICAgICAgICAgICAgdmFyIG1heFkgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkdyYXBocy5WZWN0b3I+KGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVjdG9yLCBkb3VibGU+KShwID0+IHAuWSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHcgPSBtYXhYIC0gbWluWDtcclxuICAgICAgICAgICAgdmFyIGggPSBtYXhZIC0gbWluWTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkdyYXBocy5WZWN0b3IsZ2xvYmFsOjpHcmFwaHMuVmVjdG9yPihwb3NpdGlvbnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVjdG9yLCBnbG9iYWw6OkdyYXBocy5WZWN0b3I+KShwID0+IG5ldyBWZWN0b3IoMC4xICsgMC44ICogKHAuWCAtIG1pblgpIC8gdywgMC4xICsgMC44ICogKHAuWSAtIG1pblkpIC8gaCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFzeW5jIFRhc2sgTGF5b3V0R3JhcGgoTGlzdDxWZWN0b3I+IHBvc2l0aW9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFNuYXBQb3NpdGlvbnNUb0dyaWQocG9zaXRpb25zKTtcclxuICAgICAgICAgICAgdmFyIGEgPSBuZXcgTGF5b3V0QW5pbWF0aW9uKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIEdyYXBoQ2FudmFzLkludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9LCAoKSA9PiBHcmFwaENhbnZhcy5JbnZhbGlkYXRlKCksIHBvc2l0aW9ucywgR3JhcGhDYW52YXMuR3JhcGgpO1xyXG5cclxuICAgICAgICAgICAgR3JhcGhDYW52YXMuU25hcFRvR3JpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBhd2FpdCBhLkFuaW1hdGUoKTtcclxuICAgICAgICAgICAgR3JhcGhDYW52YXMuU25hcFRvR3JpZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIFNuYXBQb3NpdGlvbnNUb0dyaWQoTGlzdDxWZWN0b3I+IHBvc2l0aW9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG9zaXRpb25zLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uc1tpXS5YID0gKGZsb2F0KShHcmFwaENhbnZhcy5fZ3JpZFN0ZXAgKiBNYXRoLlJvdW5kKHBvc2l0aW9uc1tpXS5YIC8gR3JhcGhDYW52YXMuX2dyaWRTdGVwKSk7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnNbaV0uWSA9IChmbG9hdCkoR3JhcGhDYW52YXMuX2dyaWRTdGVwICogTWF0aC5Sb3VuZChwb3NpdGlvbnNbaV0uWSAvIEdyYXBoQ2FudmFzLl9ncmlkU3RlcCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uR3JhcGhNb2RpZmllZChHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBPbkxvYWQoRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VNb3ZlKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY3RybERvd24gPSBlLkN0cmxLZXk7XHJcbiAgICAgICAgICAgIGlmIChNb3VzZU1vdmVkICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBNb3VzZU1vdmVkKGUuTGF5ZXJYLCBlLkxheWVyWSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VCdXR0b25Eb3duKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY3RybERvd24gPSBlLkN0cmxLZXk7XHJcbiAgICAgICAgICAgLy8gQ2FudmFzLlNldENhcHR1cmUodHJ1ZSk7ICAvLyBjaHJvbWUgZG9lcyBub3Qgc2VlbSB0byBzdXBwb3J0IHRoaXMsIHdoYXQ/XHJcblxyXG4gICAgICAgICAgICBpZiAoZS5TaGlmdEtleSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uRG91YmxlQ2xpY2tlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uRG91YmxlQ2xpY2tlZChlLkxheWVyWCwgZS5MYXllclksIGUuQnV0dG9uID09IDAgPyBNb3VzZUJ1dHRvbi5MZWZ0IDogTW91c2VCdXR0b24uUmlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uRG93biAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uRG93bihlLkxheWVyWCwgZS5MYXllclksIGUuQnV0dG9uID09IDAgPyBNb3VzZUJ1dHRvbi5MZWZ0IDogTW91c2VCdXR0b24uUmlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VCdXR0b25VcChNb3VzZUV2ZW50PEhUTUxDYW52YXNFbGVtZW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2N0cmxEb3duID0gZS5DdHJsS2V5O1xyXG4gICAgICAgICAgIC8vIENhbnZhcy5TZXRDYXB0dXJlKGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKGUuU2hpZnRLZXkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uVXAgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uVXAoZS5MYXllclgsIGUuTGF5ZXJZLCBlLkJ1dHRvbiA9PSAwID8gTW91c2VCdXR0b24uTGVmdCA6IE1vdXNlQnV0dG9uLlJpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlLkN0cmxLZXkgJiYgZS5BbHRLZXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFwcC5Bc2tTYWdlKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25Nb3VzZURvdWJsZUNsaWNrKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0Q2xpcGJvYXJkVGV4dChzdHJpbmcgdGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEdldENsaXBib2FyZFRleHQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0NvbnRyb2xLZXlEb3duXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2N0cmxEb3duOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8b2JqZWN0PiBTZWxlY3RlZE9iamVjdHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEludmFsaWRhdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGdyYXBoaWNzID0gbmV3IEdyYXBoaWNzKENhbnZhcyk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2FudmFzLlBhaW50KGdyYXBoaWNzLCBDYW52YXMuV2lkdGgsIENhbnZhcy5IZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUaXRsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF90aXRsZTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3RpdGxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBldmVudCBBY3Rpb248ZG91YmxlLCBkb3VibGU+IE1vdXNlTW92ZWQ7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxkb3VibGUsIGRvdWJsZSwgTW91c2VCdXR0b24+IE1vdXNlQnV0dG9uVXA7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxkb3VibGUsIGRvdWJsZSwgTW91c2VCdXR0b24+IE1vdXNlQnV0dG9uRG93bjtcclxuICAgICAgICBwdWJsaWMgZXZlbnQgQWN0aW9uPGRvdWJsZSwgZG91YmxlLCBNb3VzZUJ1dHRvbj4gTW91c2VCdXR0b25Eb3VibGVDbGlja2VkO1xyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8VmVjdG9yPiBFeHRyYWN0UG9pbnRzKHN0cmluZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGogPSB4LkluZGV4T2YoXCJbXCIsIGkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGogPCAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGogPSB4LkluZGV4T2YoXCIoXCIsIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqIDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBqID0geC5JbmRleE9mKFwiXVwiLCBpKTtcclxuICAgICAgICAgICAgICAgIGlmIChqIDwgMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBqID0geC5JbmRleE9mKFwiKVwiLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaiA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSB4LlN1YnN0cmluZyhpLCBqIC0gaSkuU3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgVmVjdG9yKGRvdWJsZS5QYXJzZShwWzBdLlRyaW0oJ1snLCAnXScsICcoJywgJyknKSksIGRvdWJsZS5QYXJzZShwWzFdLlRyaW0oJ1snLCAnXScsICcoJywgJyknKSkpO1xyXG4gICAgICAgICAgICAgICAgaSA9IGo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sWyxdIFBhcnNlQWRqYWNlbmN5TWF0cml4KHN0cmluZyBhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJpdHMgPSBhLlJlcGxhY2UoXCInXCIsIFwiXCIpLlNwbGl0KG5ld1tdIHsgXCIsXCIsIFwiXFxcXFxcXFxuXCIsIFwiW1wiLCBcIl1cIiwgXCIgXCIgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyk7XHJcbiAgICAgICAgICAgIHZhciBuID0gKGludClNYXRoLlNxcnQoYml0cy5MZW5ndGgpO1xyXG4gICAgICAgICAgICB2YXIgYWRqID0gbmV3IGJvb2xbbiwgbl07XHJcblxyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIGJpdHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGFkaltpIC8gbiwgaSAlIG5dID0gYiA9PSBcIjFcIjtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFkajtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0KfQo=
