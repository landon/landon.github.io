/**
 * @version 1.0.0.0
 * @author Hewlett-Packard
 * @copyright Copyright Â© Hewlett-Packard 2017
 * @compiler Bridge.NET 16.0.1
 */
Bridge.assembly("Test", function ($asm, globals) {
    "use strict";

    Bridge.define("Algorithms.AssignmentEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _vertexCount: 0,
            _f: null,
            _potSize: 0,
            _start: 0,
            _step: 0
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$List$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._vertexCount = vertexCount;
                this._f = f;
                this._potSize = potSize;
                this._start = start;
                this._step = step;
            }
        },
        methods: {
            getEnumerator: function () {
                return new Algorithms.AssignmentEnumerator.Enumerator(this._vertexCount, this._f, this._potSize, this._start, this._step);
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            }
        }
    });

    Bridge.define("Algorithms.AssignmentEnumerator.Enumerator", {
        inherits: [System.Collections.Generic.IEnumerator$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _enumerators: null,
            _current: null,
            _step: 0
        },
        props: {
            Current: {
                get: function () {
                    return this._current;
                }
            },
            System$Collections$IEnumerator$Current: {
                get: function () {
                    return this.Current;
                }
            }
        },
        alias: [
            "Current", ["System$Collections$Generic$IEnumerator$1$System$Collections$Generic$List$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1"],
            "dispose", "System$IDisposable$dispose",
            "moveNext", "System$Collections$IEnumerator$moveNext"
        ],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._enumerators = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerator$1(System.Int64)))(vertexCount);
                var first = Algorithms.Int64Usage.ToInt64(System.Linq.Enumerable.range(0, f(0)));
                this._enumerators.add(function (_o1) {
                        _o1.add(first);
                        return _o1;
                    }(new (System.Collections.Generic.List$1(System.Int64))()).getEnumerator());
                for (var i = 1; i < vertexCount; i = (i + 1) | 0) {
                    this._enumerators.add(new Algorithms.SubsetEnumerator.Enumerator(potSize, f(i)));
                }

                this._step = step;

                for (var i1 = 0; i1 < start; i1 = (i1 + 1) | 0) {
                    if (!this.MoveNextInternal()) {
                        break;
                    }
                }
            }
        },
        methods: {
            dispose: function () { },
            moveNext: function () {
                for (var j = 0; j < this._step; j = (j + 1) | 0) {
                    if (!this.MoveNextInternal()) {
                        return false;
                    }
                }

                return true;
            },
            MoveNextInternal: function () {
                var $t, $t1, $t2;
                if (this._current == null) {
                    this._current = new (System.Collections.Generic.List$1(System.Int64))(this._enumerators.Count);

                    $t = Bridge.getEnumerator(this._enumerators);
                    try {
                        while ($t.moveNext()) {
                            var enumerator = $t.Current;
                            enumerator.System$Collections$IEnumerator$moveNext();
                            this._current.add(enumerator[Bridge.geti(enumerator, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return true;
                }

                var i = (this._enumerators.Count - 1) | 0;
                while (i >= 1) {
                    if (this._enumerators.getItem(i).System$Collections$IEnumerator$moveNext()) {
                        this._current.setItem(i, ($t1 = this._enumerators.getItem(i))[Bridge.geti($t1, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);
                        break;
                    }

                    this._enumerators.getItem(i).System$Collections$IEnumerator$reset();
                    this._enumerators.getItem(i).System$Collections$IEnumerator$moveNext();

                    this._current.setItem(i, ($t2 = this._enumerators.getItem(i))[Bridge.geti($t2, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);

                    i = (i - 1) | 0;
                }

                return i >= 1;
            },
            System$Collections$IEnumerator$reset: function () {
                throw new System.NotImplementedException();
            }
        }
    });

    Bridge.define("Algorithms.ChoosabilityResult", {
        props: {
            BadAssignment: null,
            Canceled: false,
            IsChoosable: {
                get: function () {
                    return this.BadAssignment == null;
                }
            }
        },
        ctors: {
            ctor: function (badAssignment, canceled) {
                if (canceled === void 0) { canceled = false; }

                this.$initialize();
                this.BadAssignment = badAssignment;
                this.Canceled = canceled;
            }
        }
    });

    Bridge.define("Algorithms.Counting", {
        statics: {
            methods: {
                BinomialCoefficient: function (n, k) {
                    if (k.lt(System.Int64(0))) {
                        return System.Int64(1);
                    }

                    var max = System.Int64.max(k, n.sub(k));
                    var min = System.Int64.min(k, n.sub(k));

                    var result = System.Int64(1);
                    while (n.gt(max)) {
                        result = result.mul(n);
                        n = n.dec();
                    }

                    while (min.gt(System.Int64(0))) {
                        result = result.div(min);

                        min = min.dec();
                    }

                    return result;
                },
                Factorial: function (n) {
                    var total = System.Int64(1);
                    for (var i = 1; i <= n; i = (i + 1) | 0) {
                        total = total.mul(System.Int64(i));
                    }

                    return total;
                }
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.Bijection$2", function (D, C) { return {
        fields: {
            _f: null,
            _finverse: null
        },
        ctors: {
            init: function () {
                this._f = new (System.Collections.Generic.Dictionary$2(D,C))();
                this._finverse = new (System.Collections.Generic.Dictionary$2(C,D))();
            }
        },
        methods: {
            getItem: function (d) {
                return this._f.get(d);
            },
            setItem: function (d, value) {
                this._f.set(d, value);
                this._finverse.set(value, d);
            },
            getItem$1: function (c) {
                return this._finverse.get(c);
            },
            setItem$1: function (c, value) {
                this._f.set(value, c);
                this._finverse.set(c, value);
            },
            Apply$1: function (e) {
                return System.Linq.Enumerable.from(e).select(Bridge.fn.bind(this, $asm.$.Algorithms.DataStructures.Bijection$2.f1));
            },
            Apply: function (e) {
                return System.Linq.Enumerable.from(e).select(Bridge.fn.bind(this, $asm.$.Algorithms.DataStructures.Bijection$2.f2));
            }
        }
    }; });

    Bridge.ns("Algorithms.DataStructures.Bijection$2", $asm.$);

    Bridge.apply($asm.$.Algorithms.DataStructures.Bijection$2, {
        f1: function (d) {
            return this.getItem(d);
        },
        f2: function (c) {
            return this.getItem$1(c);
        }
    });

    Bridge.define("Algorithms.DataStructures.BijectionExtensions", {
        statics: {
            methods: {
                NumberObjects: function (T, objects) {
                    var $t;
                    var numbering = new (Algorithms.DataStructures.Bijection$2(System.Int32,T))();

                    var i = 0;
                    $t = Bridge.getEnumerator(objects, T);
                    try {
                        while ($t.moveNext()) {
                            var o = $t.Current;
                            numbering.setItem(i, o);
                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return numbering;
                }
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.UnionFind$1", function (T) { return {
        methods: {
            MakeSet: function (t) {
                var node = new (Algorithms.DataStructures.UnionFind$1.Node(T))();
                node.Parent = node;
                node.Rank = 0;
                node.T = t;

                this.RootAdded(node);
                return node;
            },
            Union: function (nx, ny) {
                var xRoot = this.Find(nx);
                var yRoot = this.Find(ny);

                if (Bridge.referenceEquals(xRoot, yRoot)) {
                    return;
                }

                if (xRoot.Rank < yRoot.Rank) {
                    xRoot.Parent = yRoot;
                    this.RootRemoved(xRoot);
                } else if (xRoot.Rank > yRoot.Rank) {
                    yRoot.Parent = xRoot;
                    this.RootRemoved(yRoot);
                } else {
                    yRoot.Parent = xRoot;
                    xRoot.Rank = (xRoot.Rank + 1) | 0;
                    this.RootRemoved(yRoot);
                }
            },
            Find: function (n) {
                if (!Bridge.referenceEquals(n.Parent, n)) {
                    n.Parent = this.Find(n.Parent);
                }

                return n.Parent;
            },
            RootAdded: function (n) { },
            RootRemoved: function (n) { }
        }
    }; });

    Bridge.define("Algorithms.DataStructures.UnionFind$1.Node", function (T) { return {
        props: {
            Parent: null,
            Rank: 0,
            T: Bridge.getDefaultValue(T)
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.Board", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        statics: {
            fields: {
                StorePermutationInfo: false
            },
            methods: {
                UpdateHash: function (hash, value) {
                    hash.v = System.Int64.clip32(System.Int64(Bridge.Int.mul(37, hash.v)).add(value));
                },
                ApplyMapping$1: function (mapping, stack) {
                    return Algorithms.Int64Usage.ToInt64(Algorithms.FixerBreaker.Board.ApplyMapping(mapping, Algorithms.Int64Usage.ToSet(stack)));
                },
                ApplyMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item2.getItem(mapping.item1.indexOf(c));
                        });
                },
                ApplyInverseMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item1.getItem(mapping.item2.indexOf(c));
                        });
                },
                OtherTurn: function (turn) {
                    return ((1 - turn) | 0);
                }
            }
        },
        fields: {
            Stacks: null,
            _hashCode: 0,
            PotSet: null,
            Traces: null,
            TracesForPermutationInfo: null,
            TraceChangeIndices: null,
            Template: null,
            Pot: System.Int64(0),
            ColorCount: 0,
            Turn: 0,
            N: 0,
            LastMove: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            init: function () {
                this.LastMove = new Algorithms.FixerBreaker.Move();
            },
            ctor: function (stacks, pot, computeHash) {
                if (computeHash === void 0) { computeHash = true; }

                this.$initialize();
                this.Stacks = stacks;
                this.Pot = pot;
                this.Turn = Algorithms.FixerBreaker.Turn.Fixer;
                this.N = this.Stacks.Count;
                this.Template = new (Algorithms.Lazy$1(Algorithms.FixerBreaker.KnowledgeEngine.Template)).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Board.f2));
                this.PotSet = Algorithms.Int64Usage.ToSet(this.Pot);
                this.ColorCount = this.PotSet.Count;
                this.Traces = new (System.Collections.Generic.List$1(System.Int64))(this.ColorCount);

                if (Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    this.TracesForPermutationInfo = new (System.Collections.Generic.List$1(System.Object))(this.ColorCount);
                    this.TraceChangeIndices = new (System.Collections.Generic.List$1(System.Int32))();
                }

                if (computeHash) {
                    this.ComputeHashCode();
                }
            }
        },
        methods: {
            getItem: function (x) {
                return this.Stacks.getItem(x);
            },
            ComputeHashCode: function () {
                var $t, $t1, $t2;
                this._hashCode = this.N;
                Algorithms.FixerBreaker.Board.UpdateHash(Bridge.ref(this, "_hashCode"), this.Turn);

                this.Traces.clear();
                $t = Bridge.getEnumerator(this.PotSet);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        var t = this.GetTrace(c);
                        if (t.gt(System.Int64(0))) {
                            this.Traces.add(t);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Traces.sort();

                $t1 = Bridge.getEnumerator(this.Traces);
                try {
                    while ($t1.moveNext()) {
                        var t1 = $t1.Current;
                        Algorithms.FixerBreaker.Board.UpdateHash(Bridge.ref(this, "_hashCode"), t1);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                if (Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    this.TracesForPermutationInfo.clear();
                    this.TraceChangeIndices.clear();

                    $t2 = Bridge.getEnumerator(this.PotSet);
                    try {
                        while ($t2.moveNext()) {
                            var c1 = $t2.Current;
                            var t2 = this.GetTrace(c1);
                            if (t2.gt(System.Int64(0))) {
                                this.TracesForPermutationInfo.add({ item1: c1, item2: t2 });
                            }
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }
                    this.TracesForPermutationInfo.sort($asm.$.Algorithms.FixerBreaker.Board.f3);

                    var previousTrace = System.Int64(-1);
                    for (var i = 0; i < this.TracesForPermutationInfo.Count; i = (i + 1) | 0) {
                        var t3 = this.TracesForPermutationInfo.getItem(i);

                        if (t3.item2.ne(previousTrace)) {
                            this.TraceChangeIndices.add(i);
                            previousTrace = t3.item2;
                        }
                    }

                    this.TraceChangeIndices.add(this.TracesForPermutationInfo.Count);
                }
            },
            GetTrace: function (c) {
                var k = System.Int64(1).shl(c);
                var trace = System.Int64(0);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    if ((this.Stacks.getItem(i).and(k)).ne(System.Int64(0))) {
                        trace = trace.or((System.Int64(1).shl(i)));
                    }
                }

                return trace;
            },
            MakeMove: function (move) {
                this.LastMove = move.$clone();

                if (move.Stack >= 0) {
                    this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                }

                this.Turn = Algorithms.FixerBreaker.Board.OtherTurn(this.Turn);

                this.ComputeHashCode();
            },
            DoMoveCombination: function (moves) {
                var $t;
                $t = Bridge.getEnumerator(moves, Algorithms.FixerBreaker.Move);
                try {
                    while ($t.moveNext()) {
                        var move = $t.Current.$clone();
                        this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ComputeHashCode();
            },
            Clone: function () {
                var clone = new Algorithms.FixerBreaker.Board(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();
                clone._hashCode = this._hashCode;

                clone.ComputeHashCode();

                return clone;
            },
            DoMoveCombinationOnClone: function (swap) {
                var clone = new Algorithms.FixerBreaker.Board(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot, false);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();

                clone.DoMoveCombination(swap);

                return clone;
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.Board));
            },
            Equals: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }

                return System.Linq.Enumerable.from(this.Traces).sequenceEqual(other.Traces);
            },
            FindPermutation: function (other) {
                if (!Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    throw new System.Exception("not storing permutation info");
                }

                if (!System.Linq.Enumerable.from(this.TracesForPermutationInfo).select($asm.$.Algorithms.FixerBreaker.Board.f4).sequenceEqual(System.Linq.Enumerable.from(other.TracesForPermutationInfo).select($asm.$.Algorithms.FixerBreaker.Board.f4))) {
                    return null;
                }

                var mappingPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < ((this.TraceChangeIndices.Count - 1) | 0); i = (i + 1) | 0) {
                    var domain = new (System.Collections.Generic.List$1(System.Int32))();
                    var codomain = new (System.Collections.Generic.List$1(System.Int32))();

                    for (var j = this.TraceChangeIndices.getItem(i); j < this.TraceChangeIndices.getItem(((i + 1) | 0)); j = (j + 1) | 0) {
                        domain.add(this.TracesForPermutationInfo.getItem(j).item1);
                        codomain.add(other.TracesForPermutationInfo.getItem(j).item1);
                    }

                    mappingPairs.add({ item1: domain, item2: codomain });
                }

                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Object, System.Linq.Enumerable.from(mappingPairs).select($asm.$.Algorithms.FixerBreaker.Board.f5))).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Board.f6)).firstOrDefault(Bridge.fn.bind(this, function (mapping) {
                        return this.SequenceEqualPermuted(mapping, other);
                    }), null);
            },
            FlattenMapping: function (mapping) {
                return { item1: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.Board.f7).toList(System.Int32), item2: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.Board.f8).toList(System.Int32) };
            },
            SequenceEqualPermuted: function (mapping, other) {
                for (var i = 0; i < this.Stacks.Count; i = (i + 1) | 0) {
                    var permutedStack = Algorithms.FixerBreaker.Board.ApplyMapping$1(mapping, this.Stacks.getItem(i));
                    if (permutedStack.ne(other.Stacks.getItem(i))) {
                        return false;
                    }
                }

                if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                    return true;
                }

                if (this.LastMove.Stack !== other.LastMove.Stack) {
                    return false;
                }

                var ours = System.Array.init([this.LastMove.Added, this.LastMove.Removed], System.Int32);
                var theirs = function (_o2) {
                        _o2.add(other.LastMove.Added);
                        _o2.add(other.LastMove.Removed);
                        return _o2;
                    }(new (System.Collections.Generic.List$1(System.Int32))());

                return Algorithms.Utility.ListUtility.Equal(System.Int32, System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(mapping, ours)).toList(System.Int32), theirs);
            },
            getHashCode: function () {
                return this._hashCode;
            },
            getEnumerator: function () {
                return this.Stacks.getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f9)).join("|");
            },
            ToTex: function () {
                return Algorithms.GenericExtensions.JoinPretty(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f10), ", ");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.Board", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.Board, {
        f1: function (s) {
            return Algorithms.Int64Usage.PopulationCount(s);
        },
        f2: function () {
            return new Algorithms.FixerBreaker.KnowledgeEngine.Template.ctor(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f1).toList(System.Int32));
        },
        f3: function (x, y) {
            return x.item2.compareTo(y.item2);
        },
        f4: function (t) {
            return t.item2;
        },
        f5: function (mp) {
            return System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(mp.item2.Count)).select(function (p) {
                    return { item1: mp.item1, item2: p.Apply(System.Int32, mp.item2) };
                });
        },
        f6: function (mapping) {
            return this.FlattenMapping(mapping);
        },
        f7: function (x) {
            return x.item1;
        },
        f8: function (x) {
            return x.item2;
        },
        f9: function (x) {
            return Algorithms.Int64Usage.ToSetStringSmall(x);
        },
        f10: function (stack, i) {
            return System.String.concat("$L(v_" + (((i + 1) | 0)) + ") = ", System.String.replaceAll(System.String.replaceAll(Algorithms.Int64Usage.ToSetString$2(stack), "{", "\\{"), "}", "\\}"), "$");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Chronicle.BranchGenerator", {
        statics: {
            fields: {
                PartitionsCache: null
            },
            ctors: {
                init: function () {
                    this.PartitionsCache = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))))();
                }
            },
            methods: {
                GetPartitions: function (count) {
                    var partitions = { };
                    if (!Algorithms.FixerBreaker.Chronicle.BranchGenerator.PartitionsCache.tryGetValue(count, partitions)) {
                        partitions.v = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions$1(count)).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                        Algorithms.FixerBreaker.Chronicle.BranchGenerator.PartitionsCache.set(count, partitions.v);
                    }

                    return partitions.v;
                },
                EnumerateBranches: function (board, colorPair) {
                    var S = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, colorPair)).toList(System.Int32);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(S.Count);

                    return System.Linq.Enumerable.from(partitions).select(function (partition) {
                            return new Algorithms.FixerBreaker.Chronicle.ChronicledBranch(S, colorPair.item1, colorPair.item2, partition);
                        });
                },
                EnumeratePartitions$1: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            partition,
                            i,
                            $t1,
                            partition1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (n % 2 === 0) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            $t = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(System.Linq.Enumerable.range(0, n).toList(System.Int32)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 2;
                                                continue;
                                        }
                                        case 2: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 3;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 3: {
                                            $enumerator.current = partition;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 2;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 6: {
                                            i = 0;
                                                $step = 7;
                                                continue;
                                        }
                                        case 7: {
                                            if ( i < n ) {
                                                    $step = 8;
                                                    continue;
                                                }
                                            $step = 14;
                                            continue;
                                        }
                                        case 8: {
                                            $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(System.Linq.Enumerable.range(0, n).where(function (j) {
                                                    return j !== i;
                                                }).toList(System.Int32)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 9;
                                                continue;
                                        }
                                        case 9: {
                                            if ($t1.moveNext()) {
                                                    partition1 = $t1.Current;
                                                    $step = 10;
                                                    continue;
                                                }
                                            $step = 12;
                                            continue;
                                        }
                                        case 10: {
                                            partition1.insert(0, function (_o3) {
                                                        _o3.add(i);
                                                        return _o3;
                                                    }(new (System.Collections.Generic.List$1(System.Int32))()));
                                                $enumerator.current = partition1;
                                                $step = 11;
                                                return true;
                                        }
                                        case 11: {
                                            $step = 9;
                                            continue;
                                        }
                                        case 12: {
                                            $step = 13;
                                            continue;
                                        }
                                        case 13: {
                                            i = (i + 1) | 0;
                                            $step = 7;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumeratePartitions: function (indices) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (indices) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            first,
                            i,
                            part,
                            $t,
                            partition,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (indices.Count <= 0) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            $enumerator.current = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 12;
                                            continue;
                                        }
                                        case 3: {
                                            first = indices.getItem(0);
                                                indices.removeAt(0);
                                                i = 0;
                                                $step = 4;
                                                continue;
                                        }
                                        case 4: {
                                            if ( i < indices.Count ) {
                                                    $step = 5;
                                                    continue;
                                                }
                                            $step = 11;
                                            continue;
                                        }
                                        case 5: {
                                            part = function (_o4) {
                                                        _o4.add(first);
                                                        _o4.add(indices.getItem(i));
                                                        return _o4;
                                                    }(new (System.Collections.Generic.List$1(System.Int32))());
                                                indices.removeAt(i);

                                                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(indices), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 6;
                                                continue;
                                        }
                                        case 6: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 7;
                                                    continue;
                                                }
                                            $step = 9;
                                            continue;
                                        }
                                        case 7: {
                                            partition.add(part);
                                                $enumerator.current = partition;
                                                $step = 8;
                                                return true;
                                        }
                                        case 8: {
                                            $step = 6;
                                            continue;
                                        }
                                        case 9: {
                                            indices.insert(i, part.getItem(1));
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            i = (i + 1) | 0;
                                            $step = 4;
                                            continue;
                                        }
                                        case 11: {
                                            indices.insert(0, first);
                                            $step = 12;
                                            continue;
                                        }
                                        case 12: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateExactlyOneIntersecters: function (board, colorPair) {
                    return System.Linq.Enumerable.range(0, board.Stacks.Count).where(function (i) {
                        return Algorithms.Int64Usage.IsBitSet(board.Stacks.getItem(i), System.Int64(colorPair.item1)) ^ Algorithms.Int64Usage.IsBitSet(board.Stacks.getItem(i), System.Int64(colorPair.item2));
                    });
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Move", {
        $kind: "struct",
        statics: {
            methods: {
                getDefaultValue: function () { return new Algorithms.FixerBreaker.Move(); }
            }
        },
        fields: {
            Stack: 0,
            Added: 0,
            Removed: 0
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([1702260557, this.Stack, this.Added, this.Removed]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, Algorithms.FixerBreaker.Move)) {
                    return false;
                }
                return Bridge.equals(this.Stack, o.Stack) && Bridge.equals(this.Added, o.Added) && Bridge.equals(this.Removed, o.Removed);
            },
            $clone: function (to) {
                var s = to || new Algorithms.FixerBreaker.Move();
                s.Stack = this.Stack;
                s.Added = this.Added;
                s.Removed = this.Removed;
                return s;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge", {
        props: {
            Board: null,
            Reason: null,
            Depth: 0,
            ColorPair: null,
            Swaps: null
        },
        ctors: {
            ctor: function (board, reason) {
                this.$initialize();
                this.Board = board;
                this.Reason = reason;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer", {
        $kind: "interface"
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge", {
        props: {
            Graph: null,
            LineGraph: null,
            Edges: null,
            EdgeIndices: null,
            Leaves: null,
            ConnectedOrderings: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.Graph = g;
                this.Leaves = System.Linq.Enumerable.from(this.Graph.Vertices).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge.f1)).toList(System.Int32);
                this.BuildLineGraph();

                this.ConnectedOrderings = new (Algorithms.Lazy$1(System.Collections.Generic.Dictionary$2(System.Object,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var co = new (System.Collections.Generic.Dictionary$2(System.Object,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))();
                    $t = Bridge.getEnumerator(this.Edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            co.set(e, System.Linq.Enumerable.from(this.Graph.EnumerateConnectedOrderings((function ($me, e) {
                                        return function (_o5) {
                                            _o5.add(e.item1);
                                            _o5.add(e.item2);
                                            return _o5;
                                        };
                                    })(this, e)(new (System.Collections.Generic.List$1(System.Int32))()))).toList(System.Collections.Generic.List$1(System.Int32)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return co;
                }));
            }
        },
        methods: {
            BuildLineGraph: function () {
                var adjacent = this.Graph.Adjacent;
                var n = ((System.Array.getLength(adjacent, 0) - 1) + 1) | 0;

                this.Edges = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        if (adjacent.get([i, j])) {
                            this.Edges.add({ item1: i, item2: j });
                        }
                    }
                }

                this.EdgeIndices = System.Linq.Enumerable.range(0, this.Edges.Count).toList(System.Int32);

                var meets = System.Array.create(false, null, System.Boolean, this.Edges.Count, this.Edges.Count);
                for (var i1 = 0; i1 < this.Edges.Count; i1 = (i1 + 1) | 0) {
                    for (var j1 = (i1 + 1) | 0; j1 < this.Edges.Count; j1 = (j1 + 1) | 0) {
                        if (this.Edges.getItem(i1).item1 === this.Edges.getItem(j1).item1 || this.Edges.getItem(i1).item1 === this.Edges.getItem(j1).item2 || this.Edges.getItem(i1).item2 === this.Edges.getItem(j1).item1 || this.Edges.getItem(i1).item2 === this.Edges.getItem(j1).item2) {
                            meets.set([i1, j1], (meets.set([j1, i1], true), true));
                        }
                    }
                }

                this.LineGraph = new Algorithms.Graph.ctor(meets);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge, {
        f1: function (v) {
            return this.Graph.Degree(v) === 1;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.IMind", {
        $kind: "interface"
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Knowledge", {
        fields: {
            _templateLookup: null
        },
        props: {
            GraphKnowledge: null
        },
        ctors: {
            init: function () {
                this._templateLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Template,Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge))();
            },
            ctor: function (g) {
                this.$initialize();
                this.GraphKnowledge = new Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge(g);
            }
        },
        methods: {
            getItem: function (template) {
                var p = { };
                if (!this._templateLookup.tryGetValue(template, p)) {
                    p.v = new Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge(template);
                    this._templateLookup.set(template, p.v);
                }

                return p.v;
            },
            GetEdgeColorList: function (board, edgeIndex) {
                return board.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item1).and(board.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item2));
            },
            GetEdgeColorList$1: function (stacks, edgeIndex) {
                return stacks.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item1).and(stacks.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item2));
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Tree$1", function (T) { return {
        props: {
            Parent: Bridge.getDefaultValue(T),
            This: Bridge.getDefaultValue(T),
            Children: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                this.This = Bridge.cast(this, T);
                this.Children = new (System.Collections.Generic.List$1(T))();
            }
        },
        methods: {
            RemoveChild: function (child) {
                this.Children.remove(child);
            },
            AddChild: function (child) {
                child.Parent = this.This;
                this.Children.add(child);
            },
            GetDepth: function () {
                var $t;
                var depth = 0;
                $t = Bridge.getEnumerator(this.Children);
                try {
                    while ($t.moveNext()) {
                        var child = $t.Current;
                        depth = Math.max(depth, ((child.GetDepth() + 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return depth;
            },
            Traverse: function (onDescent, maxDepth) {
                if (maxDepth === void 0) { maxDepth = 2147483647; }
                this.TraverseInternal(onDescent, maxDepth, 0);
            },
            TraverseInternal: function (onDescent, maxDepth, depth) {
                var $t;
                if (depth >= ((maxDepth - 1) | 0)) {
                    return;
                }

                $t = Bridge.getEnumerator(this.Children);
                try {
                    while ($t.moveNext()) {
                        var child = $t.Current;
                        onDescent(this.This, child);
                        child.TraverseInternal(onDescent, maxDepth, ((depth + 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            BuildGraph: function (maxDepth) {
                if (maxDepth === void 0) { maxDepth = 2147483647; }
                var vertices = 0;
                var vertexLookup = new (System.Collections.Generic.Dictionary$2(T,System.Int32))();
                var treeLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,T))();
                var edges = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();

                this.Traverse(function (parent, child) {
                    var p = { };
                    if (!vertexLookup.tryGetValue(parent, p)) {
                        p.v = Bridge.identity(vertices, (vertices = (vertices + 1) | 0));
                        vertexLookup.set(parent, p.v);
                        treeLookup.set(p.v, parent);

                        edges.set(p.v, new (System.Collections.Generic.List$1(System.Int32))());
                    }

                    var c = { };
                    if (!vertexLookup.tryGetValue(child, c)) {
                        c.v = Bridge.identity(vertices, (vertices = (vertices + 1) | 0));
                        vertexLookup.set(child, c.v);
                        treeLookup.set(c.v, child);

                        edges.set(c.v, new (System.Collections.Generic.List$1(System.Int32))());
                    }

                    edges.get(p.v).add(c.v);
                }, maxDepth);

                if (vertices === 0) {
                    treeLookup.set(0, Bridge.cast(this, T));
                    edges.set(0, new (System.Collections.Generic.List$1(System.Int32))());
                }

                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < vertices; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < vertices; j = (j + 1) | 0) {
                        if (edges.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (edges.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return { item1: new Algorithms.Graph.$ctor1(edgeWeights), item2: treeLookup };
            }
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge", {
        statics: {
            fields: {
                Infinity: 0
            },
            ctors: {
                init: function () {
                    this.Infinity = 2147483647;
                }
            },
            methods: {
                Exists: function (o) {
                    return o != null;
                },
                Naturals: function () {
                    return System.Linq.Enumerable.range(0, Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity);
                },
                Interval: function (first, last) {
                    return System.Linq.Enumerable.range(first, ((((last - first) | 0) + 1) | 0));
                },
                TryParseInt: function (s) {
                    var x = { };
                    if (System.Int32.tryParse(s, x)) {
                        return x.v;
                    }

                    return null;
                },
                TryParseDouble: function (s) {
                    var x = { };
                    if (System.Double.tryParse(s, null, x)) {
                        return x.v;
                    }

                    return null;
                },
                DegreeCondition: function (g, b, missingEdges) {
                    if (missingEdges === void 0) { missingEdges = null; }
                    return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, b.Stacks, b.Pot);
                },
                DegreeCondition$1: function (g, stacks, pot, missingEdges) {
                    var $t;
                    if (missingEdges === void 0) { missingEdges = null; }
                    if (Bridge.staticEquals(missingEdges, null)) {
                        missingEdges = $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.f1;
                    }

                    var colorGraphs = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(stacks, pot);

                    $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, g.Vertices), System.Collections.Generic.List$1(System.Int32));
                    try {
                        while ($t.moveNext()) {
                            var X = $t.Current;
                            var e = (g.EdgesOn(X) - missingEdges(X)) | 0;

                            if (e <= 0) {
                                continue;
                            }

                            var value = System.Linq.Enumerable.from(colorGraphs).sum((function ($me, X) {
                                    return function (cg) {
                                        return ((Bridge.Int.div(Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, cg, X), 2)) | 0);
                                    };
                                })(this, X));

                            if (value < e) {
                                return false;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return true;
                },
                GetColorGraphs: function (stacks, pot) {
                    return System.Linq.Enumerable.from(Algorithms.Int64Usage.EnumerateBits(pot)).select(function (alpha) {
                            return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.G_alpha(alpha, stacks)).toList(System.Int32);
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                },
                G_alpha: function (alpha, stacks) {
                    return Algorithms.GenericExtensions.IndicesWhere(System.Int64, stacks, function (stack) {
                        return Algorithms.Int64Usage.IsBitSet(stack, System.Int64(alpha));
                    });
                },
                d_H: function (alpha, stacksInH) {
                    return System.Linq.Enumerable.from(stacksInH).count(function (stack) {
                            return Algorithms.Int64Usage.IsBitSet(stack, System.Int64(alpha));
                        });
                },
                Surplus: function (board, g) {
                    return ((System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).sum($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.f2) - g.E) | 0);
                },
                Surplus$1: function (board, g, vertices) {
                    return ((System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).sum(function (cg) {
                            return ((Bridge.Int.div(Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, cg, vertices), 2)) | 0);
                        }) - g.EdgesOn(vertices)) | 0);
                },
                ToConsole: function (s) { },
                MapMove: function (f, move) {
                    var $t;
                    var mappedMove = ($t = new Algorithms.FixerBreaker.Move(), $t.Stack = move.Stack, $t);
                    var m = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f, System.Array.init([move.Added, move.Removed], System.Int32))).toList(System.Int32);

                    mappedMove.Added = m.getItem(0);
                    mappedMove.Removed = m.getItem(1);

                    return mappedMove.$clone();
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge, {
        f1: function (Y) {
            return 0;
        },
        f2: function (cg) {
            return ((Bridge.Int.div(cg.Count, 2)) | 0);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Mind", {
        statics: {
            fields: {
                TreeNodeNumber: 0
            },
            ctors: {
                init: function () {
                    this.TreeNodeNumber = 1;
                }
            }
        },
        props: {
            StopAnalysisOnBreakerWin: false,
            FindCleanestWin: false,
            NearlyColorableOnly: false,
            SuperabundantOnly: false,
            MinPot: 0,
            MaxPot: 0,
            BreakerWonBoard: null,
            FixerWonAllNearlyColorableBoards: false,
            TotalPositions: 0,
            BoardAnalysisPipeline: null,
            Knowledge: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.FindCleanestWin = true;
                this.SuperabundantOnly = true;
                this.NearlyColorableOnly = false;
                this.MaxPot = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                this.Knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.Knowledge(g);

                this.BoardAnalysisPipeline = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer))();
                this.BoardAnalysisPipeline.add(new Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer());
            }
        },
        methods: {
            AddBoardAnalyzer: function (analyzer) {
                this.BoardAnalysisPipeline.add(analyzer);
            },
            Analyze: function (template, progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                this.TotalPositions = 0;
                this.FixerWonAllNearlyColorableBoards = true;

                this.EnsureSwapAnalyzerExistence();

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Interval(minimumColorCount, maximumColorCount), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var colorCount = $t.Current;
                        if (!Bridge.staticEquals(progress, null)) {
                            progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.IsInitialThought = true, $t1));
                        }

                        var boards = System.Linq.Enumerable.from(this.GenerateAllBoards(template, colorCount, progress)).toList(Algorithms.FixerBreaker.Board);
                        if (foundAtLeastOneBoard && boards.Count <= 0) {
                            break;
                        }

                        this.TotalPositions = (this.TotalPositions + boards.Count) | 0;
                        foundAtLeastOneBoard = true;

                        var breakerWin = !this.Analyze$1(boards, progress);
                        if (breakerWin && this.StopAnalysisOnBreakerWin) {
                            return false;
                        }

                        this.Knowledge.getItem(template).Promote(colorCount);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(this.Knowledge.getItem(template).LostBoards).count() <= 0;
            },
            Analyze$1: function (boards, progress) {
                var $t, $t1, $t2;
                if (progress === void 0) { progress = null; }
                var winLength = 0;

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(this.BoardAnalysisPipeline).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f1));
                try {
                    while ($t.moveNext()) {
                        var analyzer = $t.Current;
                        var chunk = { v : new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.Board))() };
                        Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.Board, boards, (function ($me, analyzer) {
                            return Bridge.fn.bind($me, function (b) {
                                return analyzer.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze(this.Knowledge, b);
                            });
                        })(this, analyzer), (function ($me, chunk) {
                            return function (removed) {
                                var $t1;
                                chunk.v.add(removed);

                                if (chunk.v.Count > 100) {
                                    if (!Bridge.staticEquals(progress, null)) {
                                        progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsRemoved = System.Linq.Enumerable.from(chunk.v).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = winLength, $t1));
                                    }

                                    chunk.v.clear();
                                }
                            };
                        })(this, chunk));

                        if (chunk.v.Count > 0) {
                            if (!Bridge.staticEquals(progress, null)) {
                                progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsRemoved = System.Linq.Enumerable.from(chunk.v).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = winLength, $t1));
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var knowledgeDependentAnalyzers = System.Linq.Enumerable.from(this.BoardAnalysisPipeline).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f2).toList(Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer);

                while (boards.Count > 0) {
                    winLength = (winLength + 1) | 0;

                    var count = boards.Count;

                    $t1 = Bridge.getEnumerator(knowledgeDependentAnalyzers);
                    try {
                        while ($t1.moveNext()) {
                            var analyzer1 = $t1.Current;
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.Board, boards, Bridge.fn.bind(this, function (b) {
                                return analyzer1.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze(this.Knowledge, b);
                            }), function (removed) {
                                var $t2;
                                if (!Bridge.staticEquals(progress, null)) {
                                    progress(($t2 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t2.BoardsRemoved = Algorithms.GenericExtensions.EnList(Algorithms.FixerBreaker.Board, removed), $t2.WinLength = winLength, $t2));
                                }
                            });
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (boards.Count === count) {
                        $t2 = Bridge.getEnumerator(boards);
                        try {
                            while ($t2.moveNext()) {
                                var b = $t2.Current;
                                this.Knowledge.getItem(b.Template.Value).getItem(b.ColorCount).AddLoss(b);
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                        var g = { v : this.Knowledge.GraphKnowledge.Graph };

                        var nearlyColorable = System.Linq.Enumerable.range(0, this.Knowledge.GraphKnowledge.LineGraph.N).all(Bridge.fn.bind(this, function (e) {
                            return System.Linq.Enumerable.from(boards).any(Bridge.fn.bind(this, function (b1) {
                                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, e);
                                }));
                        }));
                        if (nearlyColorable) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(boards).firstOrDefault((function ($me, g) {
                                    return Bridge.fn.bind($me, function (b1) {
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(g.v, b1) && Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, 0);
                                    });
                                })(this, g), null);
                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = System.Linq.Enumerable.from(boards).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f3));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            EnsureSwapAnalyzerExistence: function () {
                if (!System.Linq.Enumerable.from(this.BoardAnalysisPipeline).any($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f4)) {
                    this.BoardAnalysisPipeline.add(new Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer(this.FindCleanestWin, false));
                }
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                var boards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();

                var vertices = System.Linq.Enumerable.range(0, template.Sizes.Count).toList(System.Int32);
                var potSet = System.Linq.Enumerable.range(0, colorCount).toList(System.Int32);
                var pot = Algorithms.Int64Usage.ToInt64(potSet);

                var fix = System.Linq.Enumerable.from(vertices).orderBy(function (v) {
                        return Math.abs(((template.Sizes.getItem(v) - ((Bridge.Int.div(colorCount, 2)) | 0)) | 0));
                    }).first();

                var boardsChunk = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.Board))();
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(vertices).select(function (v) {
                        if (v === fix) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(potSet).take(template.Sizes.getItem(v)).toList(System.Int32));
                        }

                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, potSet, template.Sizes.getItem(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var assignmentSets = $t.Current;
                        var sets = System.Linq.Enumerable.from(assignmentSets).toList(System.Collections.Generic.List$1(System.Int32));
                        var totalColors = System.Linq.Enumerable.from(sets).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f5).distinct().count();
                        if (totalColors < colorCount) {
                            continue;
                        }

                        var stacks = System.Linq.Enumerable.from(sets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f6).toList(System.Int64);

                        var superAbundant = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(this.Knowledge.GraphKnowledge.Graph, stacks, pot);
                        var board = new Algorithms.FixerBreaker.Board(stacks, pot);

                        if (this.SuperabundantOnly && !superAbundant) {
                            continue;
                        }

                        boards.add(board);
                        boardsChunk.add(board);

                        if (boardsChunk.Count > 100) {
                            if (!Bridge.staticEquals(progress, null)) {
                                progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsAdded = System.Linq.Enumerable.from(boardsChunk).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = -1, $t1));
                            }

                            boardsChunk.clear();
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                if (boardsChunk.Count > 0 && !Bridge.staticEquals(progress, null)) {
                    progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsAdded = System.Linq.Enumerable.from(boardsChunk).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = -1, $t1));
                }

                return boards;
            },
            EnumerateKnowledgeTrees: function (template) {
                var templateKnowledge = this.Knowledge.getItem(template);
                var colorCount = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Naturals()).first(function (n) {
                        return templateKnowledge.KnowledgeExists(n) && !templateKnowledge.KnowledgeExists(((n + 1) | 0));
                    });

                return System.Linq.Enumerable.from(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge()).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f7));
            },
            GenerateKnowledgeTree: function (board) {
                Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber = 1;
                var seenCache = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Object))();
                var knowledgeTree = new Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree();
                this.FillKnowledgeTree(knowledgeTree, board, seenCache);

                return knowledgeTree;
            },
            FillKnowledgeTree: function (knowledgeTree, board, seenCache) {
                var $t, $t1;
                knowledgeTree.Board = board.toString();
                knowledgeTree.Number = Bridge.identity(Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber, ($t = (Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber + 1) | 0, Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber = $t, $t));

                var knowledge = this.Knowledge.getItem(board.Template.Value).getItem(board.ColorCount).getItem(board);
                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(knowledge)) {
                    if (!Bridge.referenceEquals(knowledge.Reason, "good swap")) {
                        knowledgeTree.Note = knowledge.Reason;
                    } else {
                        var seenBoard = { };
                        if (seenCache.tryGetValue(board, seenBoard)) {
                            knowledgeTree.Note = "same as #" + seenBoard.v.item1;
                            return;
                        }

                        var f = knowledge.Board.FindPermutation(board);
                        var colors = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f, System.Array.init([knowledge.ColorPair.item1, knowledge.ColorPair.item2], System.Int32))).toList(System.Int32);
                        var colorPair = { item1: colors.getItem(0), item2: colors.getItem(1) };

                        $t1 = Bridge.getEnumerator(knowledge.Swaps);
                        try {
                            while ($t1.moveNext()) {
                                var swap = $t1.Current;
                                var tempBoard = board.Clone();
                                var moves = System.Linq.Enumerable.from(swap.item2).select(function (m) {
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.MapMove(f, m.$clone());
                                    }).toList(Algorithms.FixerBreaker.Move);
                                tempBoard.DoMoveCombination(moves);

                                var childKnowledgeTree = knowledgeTree.AddChild$1(swap);
                                childKnowledgeTree.ColorPair = colorPair;
                                this.FillKnowledgeTree(childKnowledgeTree, tempBoard, seenCache);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }}
                } else {
                    throw new System.Exception("something went wrong in building search tree");
                }

                seenCache.set(board, { item1: knowledgeTree.Number, item2: board });
            },
            GenerateTemplateKnowledgeGraph: function (template) {
                var $t, $t1, $t2, $t3;
                var templateKnowledge = this.Knowledge.getItem(template);
                var colorCount = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Naturals()).first(function (n) {
                        return templateKnowledge.KnowledgeExists(n) && !templateKnowledge.KnowledgeExists(((n + 1) | 0));
                    });

                var nextVertexID = 0;
                var vertexLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Int32))();
                var swapLookup = new (System.Collections.Generic.Dictionary$2(System.Object,System.Object))();
                var boardLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge)))();
                var outEdges = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();

                $t = Bridge.getEnumerator(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge(), System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge));
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        vertexLookup.set(kvp.key, nextVertexID);
                        boardLookup.set(nextVertexID, kvp);
                        outEdges.set(nextVertexID, new (System.Collections.Generic.List$1(System.Int32))());
                        nextVertexID = (nextVertexID + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(templateKnowledge.LostBoards, Algorithms.FixerBreaker.Board);
                try {
                    while ($t1.moveNext()) {
                        var b = $t1.Current;
                        vertexLookup.set(b, nextVertexID);
                        boardLookup.set(nextVertexID, new (System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))(b, new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(b, "breaker wins")));
                        outEdges.set(nextVertexID, new (System.Collections.Generic.List$1(System.Int32))());
                        nextVertexID = (nextVertexID + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                $t2 = Bridge.getEnumerator(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge(), System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge));
                try {
                    while ($t2.moveNext()) {
                        var kvp1 = $t2.Current;
                        if (Bridge.referenceEquals(kvp1.value.Reason, "good swap")) {
                            var v = vertexLookup.get(kvp1.key);

                            var f = { v : kvp1.value.Board.FindPermutation(kvp1.key) };
                            var colors = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f.v, System.Array.init([kvp1.value.ColorPair.item1, kvp1.value.ColorPair.item2], System.Int32))).toList(System.Int32);
                            var colorPair = { item1: colors.getItem(0), item2: colors.getItem(1) };

                            $t3 = Bridge.getEnumerator(kvp1.value.Swaps);
                            try {
                                while ($t3.moveNext()) {
                                    var swap = $t3.Current;
                                    var tempBoard = kvp1.key.Clone();
                                    var moves = System.Linq.Enumerable.from(swap.item2).select((function ($me, f) {
                                            return function (m) {
                                                return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.MapMove(f.v, m.$clone());
                                            };
                                        })(this, f)).toList(Algorithms.FixerBreaker.Move);
                                    tempBoard.DoMoveCombination(moves);

                                    var w = vertexLookup.get(tempBoard);
                                    outEdges.get(v).add(w);

                                    swapLookup.set({ item1: v, item2: w }, swap);
                                }
                            } finally {
                                if (Bridge.is($t3, System.IDisposable)) {
                                    $t3.System$IDisposable$dispose();
                                }
                            }}
                    }
                } finally {
                    if (Bridge.is($t2, System.IDisposable)) {
                        $t2.System$IDisposable$dispose();
                    }
                }
                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < nextVertexID; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < nextVertexID; j = (j + 1) | 0) {
                        if (outEdges.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (outEdges.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return { item1: new Algorithms.Graph.$ctor1(edgeWeights), item2: boardLookup, item3: swapLookup };
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Mind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind, {
        f1: function (a) {
            return !a.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent;
        },
        f2: function (a) {
            return a.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent;
        },
        f3: function (b1) {
            return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, 0);
        },
        f4: function (a) {
            return Bridge.is(a, Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer);
        },
        f5: function (set) {
            return set;
        },
        f6: function (list) {
            return Algorithms.Int64Usage.ToInt64(list);
        },
        f7: function (kvp) {
            return this.GenerateKnowledgeTree(kvp.key);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge", {
        fields: {
            _boardLookup: null,
            _improvementLookup: null,
            _lostBoards: null
        },
        props: {
            ColorCount: 0,
            ColorPairs: null,
            LostBoards: {
                get: function () {
                    return this._lostBoards;
                }
            }
        },
        ctors: {
            init: function () {
                this._boardLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))();
                this._improvementLookup = new (System.Collections.Generic.Dictionary$2(System.String,System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge)))();
                this._lostBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();
            },
            ctor: function (colorCount) {
                this.$initialize();
                this.ColorCount = colorCount;
                this.SetupColorPairs();
            }
        },
        methods: {
            getItem: function (board) {
                var b = { };
                this._boardLookup.tryGetValue(board, b);
                return b.v;
            },
            getItem$1: function (reason, board) {
                var b = { };
                this.ImprovementLookup(reason).tryGetValue(board, b);
                return b.v;
            },
            setItem$1: function (reason, board, value) {
                this.ImprovementLookup(reason).set(board, value);
            },
            ImprovementLookup: function (reason) {
                var lookup = { };
                if (!this._improvementLookup.tryGetValue(reason, lookup)) {
                    lookup.v = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))();
                    this._improvementLookup.set(reason, lookup.v);
                }

                return lookup.v;
            },
            AddWin: function (board, reason) {
                var knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason);
                this._boardLookup.set(board, knowledge);

                return knowledge;
            },
            AddWin$1: function (board, reason, winDepth, colorPair, goodSwaps) {
                var $t;
                var knowledge = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason), $t.Depth = winDepth, $t.ColorPair = colorPair, $t.Swaps = goodSwaps, $t);
                this._boardLookup.set(board, knowledge);

                return knowledge;
            },
            AddImprovement: function (board, reason, winDepth, colorPair, goodSwaps) {
                var $t;
                var knowledge = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason), $t.Depth = winDepth, $t.ColorPair = colorPair, $t.Swaps = goodSwaps, $t);
                this.setItem$1(reason, board, knowledge);

                return knowledge;
            },
            AddLoss: function (b) {
                this._lostBoards.add(b);
            },
            SetupColorPairs: function () {
                this.ColorPairs = new (System.Collections.Generic.List$1(System.Object))();
                var colors = System.Linq.Enumerable.range(0, this.ColorCount).toList(System.Int32);

                for (var i = 0; i < colors.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < colors.Count; j = (j + 1) | 0) {
                        this.ColorPairs.add({ item1: colors.getItem(i), item2: colors.getItem(j) });
                    }
                }
            },
            CopyInto: function (potKnowledge) {
                var $t;
                $t = Bridge.getEnumerator(this._boardLookup);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        potKnowledge.AddWin$1(kvp.key, kvp.value.Reason, kvp.value.Depth, kvp.value.ColorPair, kvp.value.Swaps);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            EnumerateBoardKnowledge: function () {
                return System.Linq.Enumerable.from(this._boardLookup).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge.f1);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge, {
        f1: function (x) {
            return x.value.Depth;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer", {
        fields: {
            _knowledge: null,
            _boardLookup: null,
            _boardIDLookup: null,
            _shrubs: null,
            _useShrubs: false
        },
        ctors: {
            init: function () {
                this._shrubs = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList))))();
            },
            ctor: function (knowledge, boardLookup, boardIDLookup, useShrubs) {
                if (useShrubs === void 0) { useShrubs = false; }

                this.$initialize();
                this._knowledge = knowledge;
                this._boardLookup = boardLookup;
                this._boardIDLookup = boardIDLookup;
                this._useShrubs = useShrubs;
            }
        },
        methods: {
            Analyze: function (boardID, wonBoardIDs) {
                var $t;
                if (!this._useShrubs) {
                    return this.AnalyzeShrubFree(boardID, wonBoardIDs);
                }

                var shrub = { };
                if (!this._shrubs.tryGetValue(boardID, shrub)) {
                    return this.InitializeShrubs(boardID, wonBoardIDs);
                }

                $t = Bridge.getEnumerator(shrub.v);
                try {
                    while ($t.moveNext()) {
                        var colorPairList = $t.Current;
                        Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList, colorPairList, function (branchList) {
                            return branchList.Intersects(wonBoardIDs);
                        }, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer.f1);
                        if (colorPairList.Count <= 0) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            AnalyzeShrubFree: function (boardID, wonBoardIDs) {
                var $t, $t1, $t2;
                var board = this._boardLookup.get(boardID);
                var potKnowledge = this._knowledge.getItem(board.Template.Value).getItem(board.ColorCount);

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var winningSwapExists = false;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        board.DoMoveCombination(swap);
                                        var childID = this._boardIDLookup.get(board);
                                        board.DoMoveCombination(swap);

                                        if (wonBoardIDs.Contains(childID)) {
                                            winningSwapExists = true;
                                            break;
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            InitializeShrubs: function (boardID, wonBoardIDs) {
                var $t, $t1, $t2;
                var shrub = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList)))();
                this._shrubs.set(boardID, shrub);

                var board = this._boardLookup.get(boardID);
                var potKnowledge = this._knowledge.getItem(board.Template.Value).getItem(board.ColorCount);

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var colorPairList = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList))();
                        shrub.add(colorPairList);

                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var branchList = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList();
                                var winningSwapExists = false;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        board.DoMoveCombination(swap);
                                        var childID = this._boardIDLookup.get(board);
                                        board.DoMoveCombination(swap);

                                        if (wonBoardIDs.Contains(childID)) {
                                            winningSwapExists = true;
                                            break;
                                        }

                                        branchList.Add(childID);
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    colorPairList.add(branchList);
                                    winningSwapAlwaysExists = false;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer, {
        f1: function (x) { }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList", {
        fields: {
            _data: null,
            _length: 0
        },
        ctors: {
            ctor: function (initialCapacity) {
                if (initialCapacity === void 0) { initialCapacity = 16; }

                this.$initialize();
                this._data = System.Array.init(initialCapacity, 0, System.Int32);
            }
        },
        methods: {
            Add: function (x) {
                var i = System.Array.binarySearch(this._data, 0, this._length, x);
                if (i >= 0) {
                    return;
                }

                this.EnsureCapacity();

                i = ~i;
                if (i < this._length) {
                    System.Array.copy(this._data, i, this._data, ((i + 1) | 0), ((this._length - i) | 0));
                }

                this._data[System.Array.index(i, this._data)] = x;
                this._length = (this._length + 1) | 0;
            },
            Contains: function (x) {
                return System.Array.binarySearch(this._data, 0, this._length, x) >= 0;
            },
            Intersects: function (other) {
                var j = 0;
                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    var k = System.Array.binarySearch(other._data, j, ((other._length - j) | 0), this._data[System.Array.index(i, this._data)]);
                    if (k >= 0) {
                        return true;
                    }
                    j = ~k;
                }

                return false;
            },
            EnsureCapacity: function () {
                if (this._length >= this._data.length) {
                    var data = System.Array.init(Bridge.Int.mul(2, this._data.length), 0, System.Int32);
                    System.Array.copy(this._data, 0, data, 0, this._data.length);
                    this._data = data;
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier", {
        statics: {
            fields: {
                _lookup: null
            },
            ctors: {
                init: function () {
                    this._lookup = new (System.Collections.Generic.Dictionary$2(System.String,System.Object))();
                }
            },
            methods: {
                ToListStringInLexOrder: function (ss, pp, maxPot) {
                    if (maxPot === void 0) { maxPot = -1; }
                    var lists = System.Linq.Enumerable.from(ss).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f1).toList(System.Collections.Generic.List$1(System.Int32));
                    var pot = maxPot;
                    if (pot <= 0) {
                        pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f2).distinct().count();
                    }

                    var stacks = System.Linq.Enumerable.from(lists).where(function (s) {
                            return s.Count <= pot;
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.ToLexOrder(Bridge.toArray(System.Linq.Enumerable.from(stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f4)).join("|"), pp, maxPot);
                },
                ToLexOrder: function (stacksString, pp, maxPot) {
                    var $t;
                    var key = System.String.concat(stacksString, ";", maxPot);
                    var tup = { };
                    if (Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier._lookup.tryGetValue(key, tup)) {
                        pp.v = tup.v.item2;
                        return tup.v.item1;
                    }

                    pp.v = null;
                    var lexSmallest;
                    var stacks = System.Linq.Enumerable.from(System.String.split(stacksString, [124].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f6).toList(System.Collections.Generic.List$1(System.Int32));
                    lexSmallest = stacksString;

                    var pot = System.Linq.Enumerable.from(stacks).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f2).distinct().count();
                    if (maxPot > 0) {
                        pot = maxPot;
                    }

                    $t = Bridge.getEnumerator(Algorithms.Utility.Permutation.EnumerateAll(pot), Algorithms.Utility.Permutation);
                    try {
                        while ($t.moveNext()) {
                            var p = $t.Current;
                            var permutedString = Bridge.toArray(System.Linq.Enumerable.from(stacks).select((function ($me, p) {
                                        return function (s) {
                                            return Bridge.toArray(System.Linq.Enumerable.from(s).select(function (a) {
                                                        return p.getItem(a);
                                                    }).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f3)).join("");
                                        };
                                    })(this, p))).join("|");
                            if (System.String.compare(permutedString, lexSmallest) <= 0) {
                                lexSmallest = permutedString;
                                pp.v = p;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier._lookup.set(key, { item1: lexSmallest, item2: pp.v });
                    return lexSmallest;
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier, {
        f1: function (l) {
            return Algorithms.Int64Usage.ToSet(l);
        },
        f2: function (l) {
            return l;
        },
        f3: function (x) {
            return x;
        },
        f4: function (s) {
            return Bridge.toArray(System.Linq.Enumerable.from(s).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f3)).join("");
        },
        f5: function (c) {
            return System.Int32.parse(String.fromCharCode(c));
        },
        f6: function (s) {
            return System.Linq.Enumerable.from(System.String.toCharArray(s, 0, s.length)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f5).toList(System.Int32);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo", {
        props: {
            Alpha: 0,
            Beta: 0,
            Partition: null,
            Response: System.UInt64(0),
            SwapVertices: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.ColorPairOutcome", {
        fields: {
            Colors: null,
            FixerOutcomes: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome", {
        fields: {
            BreakerChoice: null,
            Exits: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter");

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing", {
        statics: {
            fields: {
                MaxLength: 0,
                _m: null
            },
            ctors: {
                init: function () {
                    this.MaxLength = 32;
                },
                ctor: function () {
                    Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m = new (System.Collections.Generic.List$1(System.UInt64))(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.MaxLength);

                    var RNG = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var b = System.Array.init(8, 0, System.Byte);

                    for (var i = 0; i < Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.MaxLength; i = (i + 1) | 0) {
                        RNG.nextBytes(b);
                        Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m.add(System.BitConverter.toUInt64(b, 0));
                    }
                }
            },
            methods: {
                Hash: function (list, length) {
                    var hash = list[System.Array.index(0, list)];

                    for (var i = 1; i < length; i = (i + 1) | 0) {
                        hash = hash.add((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m.getItem(((i - 1) | 0)).mul(list[System.Array.index(i, list)])));
                    }

                    return System.Int64.clip32(hash.shru(32));
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder", {
        props: {
            Mind: null,
            Cases: null,
            UsePermutations: false
        },
        ctors: {
            ctor: function (mind, usePermutations) {
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                this.Mind = mind;
                this.UsePermutations = usePermutations;
                this.ExtractCases();
            }
        },
        methods: {
            ExtractCases: function () {
                var $t, $t1;
                this.Cases = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase))();

                var caseNumber = 0;

                var colorableCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, 0, this.Mind.ColorableBoards);
                this.Cases.add(colorableCase);
                caseNumber = (caseNumber + 1) | 0;

                var remainingBoards = System.Linq.Enumerable.from(this.Mind.NonColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                var wonBoards = System.Linq.Enumerable.from(this.Mind.ColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                while (remainingBoards.Count > 0) {
                    var proofCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber);
                    this.Cases.add(proofCase);

                    var addedBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    $t = Bridge.getEnumerator(remainingBoards);
                    try {
                        while ($t.moveNext()) {
                            var board = $t.Current;
                            var treeInfo = this.Mind.GetWinTreeInfo(board);

                            if (System.Linq.Enumerable.from(treeInfo).all(function (bc) {
                                    return wonBoards.contains(new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount));
                                })) {
                                addedBoards.add(board);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t1 = Bridge.getEnumerator(addedBoards);
                    try {
                        while ($t1.moveNext()) {
                            var board1 = $t1.Current;
                            proofCase.AddBoard(board1);
                            wonBoards.add(board1);
                            remainingBoards.remove(board1);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    caseNumber = (caseNumber + 1) | 0;
                }
            },
            GetHandledCaseNumber: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return ((System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase, this.Cases, function (cc) {
                        return cc.Boards.contains(childBoard);
                    })).first() + 1) | 0);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions", {
        statics: {
            methods: {
                ToTex: function (matcher, lists, listSize) {
                    if (Bridge.referenceEquals(matcher.Name, "*")) {
                        return System.String.concat(Bridge.toArray(System.Linq.Enumerable.repeat("\\wild", listSize)).join(""), " ");
                    }

                    var i = { };
                    if (!System.Int32.tryParse(matcher.Name, i)) {
                        return "?";
                    }

                    return Bridge.toArray(lists.getItem(i.v)).join("");
                },
                GetActiveListIndex: function (i, b, maxPot) {
                    return ((System.Linq.Enumerable.from(b.Stacks.Value).take(((i + 1) | 0)).count(function (ss) {
                        return Algorithms.Int64Usage.PopulationCount(ss) < maxPot;
                    }) - 1) | 0);
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions", {
        statics: {
            methods: {
                GetArticle: function (letter) {
                    switch (letter) {
                        case "X": 
                            return "an";
                        case "Y": 
                            return "a";
                        case "Z": 
                            return "a";
                    }

                    return "";
                },
                Listify: function (T, strings, connector) {
                    if (connector === void 0) { connector = "and"; }
                    var ll = System.Linq.Enumerable.from(strings).toList(T);
                    if (ll.Count <= 0) {
                        return "";
                    }
                    if (ll.Count === 1) {
                        return ll.getItem(0).toString();
                    }

                    if (connector != null) {
                        return System.String.concat(Bridge.toArray(System.Linq.Enumerable.from(ll).take(((ll.Count - 1) | 0))).join(", "), " ", connector, " ", System.Linq.Enumerable.from(ll).last());
                    }

                    return Bridge.toArray(ll).join(", ");
                },
                Wordify: function (n) {
                    switch (n) {
                        case 0: 
                            return "first";
                        case 1: 
                            return "second";
                        case 2: 
                            return "third";
                        case 3: 
                            return "fourth";
                        case 4: 
                            return "fifth";
                        case 5: 
                            return "sixth";
                        case 6: 
                            return "seventh";
                        case 7: 
                            return "eighth";
                        case 8: 
                            return "ninth";
                        case 9: 
                            return "tenth";
                        case 10: 
                            return "eleventh";
                    }

                    return (((n + 1) | 0)) + "-th";
                },
                Except: function (T, list, t) {
                    return System.Linq.Enumerable.from(list).except(System.Array.init([t], T));
                },
                MaxIndex: function (T, list, value) {
                    var $t;
                    var maxIndex = -1;
                    var max = -2147483648;
                    var i = 0;
                    $t = Bridge.getEnumerator(list, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var v = value(t);
                            if (v > max) {
                                max = v;
                                maxIndex = i;
                            }

                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return maxIndex;
                },
                Distinct: function (T, S, list, value) {
                    var $t;
                    var distinct = new (System.Collections.Generic.List$1(T))();
                    $t = Bridge.getEnumerator(list, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            if (!System.Linq.Enumerable.from(distinct).any((function ($me, t) {
                                    return function (tt) {
                                        return Bridge.equals(value(tt), value(t));
                                    };
                                })(this, t))) {
                                distinct.add(t);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return distinct;
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions", {
        statics: {
            fields: {
                Alphabet: null
            },
            ctors: {
                init: function () {
                    this.Alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                }
            },
            methods: {
                ToXYZ: function (board) {
                    return Bridge.toArray(System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1)).join("");
                },
                ToXYZ$1: function (stack) {
                    switch (stack.toString()) {
                        case "3": 
                            return "X";
                        case "5": 
                            return "Y";
                        case "6": 
                            return "Z";
                    }

                    return "";
                },
                To012: function (board) {
                    return System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.To012$1).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f1).toList(System.Int32);
                },
                To012$1: function (stack) {
                    if (stack.gt(System.Int64(6))) {
                        return -1;
                    }
                    return (((((Bridge.Int.div(System.Int64.clip32(stack), 2)) | 0)) - 1) | 0);
                },
                ToCompactedPartitionId: function (board, partition) {
                    var xyz = System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1).toList(System.String);
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToPartitionId$1(xyz, partition);
                },
                ToPartitionId: function (board, partition) {
                    var xyz = System.Linq.Enumerable.from(board.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f2).toList(System.String);

                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToPartitionId$1(xyz, partition);
                },
                ToPartitionId$1: function (xyz, partition) {
                    var $t;
                    var pp = System.Linq.Enumerable.from(partition).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f3).toList(System.Collections.Generic.List$1(System.Int32));
                    for (var i = 0; i < pp.Count; i = (i + 1) | 0) {
                        var l = String.fromCharCode(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.Alphabet.charCodeAt(i));
                        $t = Bridge.getEnumerator(pp.getItem(i));
                        try {
                            while ($t.moveNext()) {
                                var j = $t.Current;
                                xyz.setItem(j, l);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    return Bridge.toArray(xyz).join("");
                },
                GetXYZIndex: function (i, b) {
                    return ((System.Linq.Enumerable.from(b.Stacks.Value).take(((i + 1) | 0)).count($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f4) - 1) | 0);
                },
                ToTex: function (matcher) {
                    switch (matcher.Name) {
                        case "*": 
                            return "\\wild ";
                        case "0": 
                            return "X";
                        case "1": 
                            return "Y";
                        case "2": 
                            return "Z";
                        case "!0": 
                            return "\\bar{{X}}";
                        case "!1": 
                            return "\\bar{{Y}}";
                        case "!2": 
                            return "\\bar{{Z}}";
                    }

                    return "?";
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions, {
        f1: function (x) {
            return x >= 0;
        },
        f2: function (stack) {
            var s = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1(stack);
            if (s.length <= 0) {
                return "*";
            }
            return s;
        },
        f3: function (part) {
            return System.Linq.Enumerable.from(part).min();
        },
        f4: function (ss) {
            return Algorithms.Int64Usage.PopulationCount(ss) === 2;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase", {
        props: {
            Mind: null,
            Boards: null,
            BreakerWin: false,
            CaseNumber: 0,
            Superabundant: false
        },
        ctors: {
            ctor: function (mind, caseNumber, boards) {
                if (boards === void 0) { boards = null; }

                this.$initialize();
                this.Mind = mind;
                this.CaseNumber = caseNumber;
                this.Boards = boards;
                if (this.Boards == null) {
                    this.Boards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                }
            }
        },
        methods: {
            AddBoard: function (board) {
                this.Boards.add(board);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard", {
        statics: {
            methods: {
                Create: function (T, lists) {
                    var pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f1).distinct().toList(T);
                    var numbering = Algorithms.DataStructures.BijectionExtensions.NumberObjects(T, pot);

                    var intLists = System.Linq.Enumerable.from(lists).select(function (l) {
                            return System.Linq.Enumerable.from(numbering.Apply(l)).toList(System.Int32);
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                    var trace = System.Array.init(pot.Count, System.UInt64(0), System.UInt64);

                    for (var i = 0; i < pot.Count; i = (i + 1) | 0) {
                        trace[System.Array.index(i, trace)] = Algorithms.Int64Usage.ToUInt64(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), intLists, function (ll) {
                            return ll.contains(i);
                        }));
                    }

                    pot = System.Linq.Enumerable.from(pot).orderBy(function (c) {
                            return trace[System.Array.index(pot.indexOf(c), trace)];
                        }).toList(T);
                    numbering = Algorithms.DataStructures.BijectionExtensions.NumberObjects(T, pot);

                    System.Array.sort(trace);
                    return { item1: new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, lists.Count), item2: numbering };
                },
                FromLists: function (lists) {
                    var pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f1).distinct().toList(System.Int32);
                    var trace = System.Array.init(pot.Count, System.UInt64(0), System.UInt64);

                    for (var i = 0; i < pot.Count; i = (i + 1) | 0) {
                        trace[System.Array.index(i, trace)] = Algorithms.Int64Usage.ToUInt64(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), lists, function (ll) {
                            return ll.contains(i);
                        }));
                    }

                    System.Array.sort(trace);
                    return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, lists.Count);
                }
            }
        },
        fields: {
            _trace: null,
            _length: 0,
            _stackCount: 0,
            _hashCode: 0
        },
        props: {
            Stacks: null
        },
        ctors: {
            ctor: function (trace, stackCount) {
                this.$initialize();
                this._trace = trace;
                this._length = this._trace.length;
                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);

                this.MakeLazyStacks();
            },
            $ctor1: function (trace, i, j, swap, stackCount) {
                this.$initialize();
                this._trace = System.Array.init(trace.length, System.UInt64(0), System.UInt64);
                this._length = 0;
                for (var k = 0; k < trace.length; k = (k + 1) | 0) {
                    var v = System.UInt64(0);
                    if (k === i || k === j) {
                        v = trace[System.Array.index(k, trace)].xor(swap);
                    } else {
                        v = trace[System.Array.index(k, trace)];
                    }

                    if (v.gt(System.UInt64(0))) {
                        var q = this._length;
                        while (q > 0 && this._trace[System.Array.index(((q - 1) | 0), this._trace)].gt(v)) {
                            q = (q - 1) | 0;
                        }

                        if (q < this._length) {
                            System.Array.copy(this._trace, q << 3, this._trace, (((q + 1) | 0)) << 3, (((this._length - q) | 0)) << 3);
                        }
                        this._trace[System.Array.index(q, this._trace)] = v;

                        this._length = (this._length + 1) | 0;
                    }
                }

                this._stackCount = stackCount;
                this.MakeLazyStacks();

                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            }
        },
        methods: {
            ToListStringInLexOrder$1: function (maxPot) {
                if (maxPot === void 0) { maxPot = -1; }
                var pp = { };
                return this.ToListStringInLexOrder(pp, maxPot);
            },
            ToListStringInLexOrder: function (pp, maxPot) {
                if (maxPot === void 0) { maxPot = -1; }
                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.ToListStringInLexOrder(this.Stacks.Value, pp, maxPot);
            },
            GetPermutation: function (i, j, swap) {
                var t = System.Linq.Enumerable.from(this._trace).toList(System.UInt64);

                t.setItem(i, t.getItem(i).xor(swap));
                t.setItem(j, t.getItem(j).xor(swap));

                if (t.getItem(i).equals(System.UInt64(0))) {
                    t.setItem(i, System.UInt64(2147483647));
                }
                if (t.getItem(j).equals(System.UInt64(0))) {
                    t.setItem(j, System.UInt64(2147483647));
                }

                var sequence = System.Linq.Enumerable.from(t).zip(System.Linq.Enumerable.range(0, t.Count), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f2).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f3).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f4).toList(System.Int32);

                return new Algorithms.Utility.Permutation.$ctor1(sequence);
            },
            Permute: function (p, indices) {
                var trace = System.Array.init(this._trace.length, System.UInt64(0), System.UInt64);

                var permutedIndices = p.Apply(System.Int32, indices);
                for (var i = 0; i < this._trace.length; i = (i + 1) | 0) {
                    var n = this._trace[System.Array.index(i, this._trace)];
                    var m = this._trace[System.Array.index(i, this._trace)];

                    for (var j = 0; j < indices.Count; j = (j + 1) | 0) {
                        m = m.and(((System.UInt64(1).shl(indices.getItem(j))).not()));
                    }

                    for (var j1 = 0; j1 < indices.Count; j1 = (j1 + 1) | 0) {
                        if ((n.and((System.UInt64(1).shl(indices.getItem(j1))))).ne(System.UInt64(0))) {
                            m = m.or((System.UInt64(1).shl(permutedIndices.getItem(j1))));
                        }
                    }

                    trace[System.Array.index(i, trace)] = m;
                }

                System.Array.sort(trace);

                return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, this._stackCount);
            },
            MakeLazyStacks: function () {
                this.Stacks = new (Algorithms.Lazy$1(System.Array.type(System.Int64))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this._stackCount, System.Int64(0), System.Int64);
                    var traceBits = System.Linq.Enumerable.from(this._trace).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f5).toList(System.Collections.Generic.List$1(System.Int32));
                    for (var c = 0; c < traceBits.Count; c = (c + 1) | 0) {
                        $t = Bridge.getEnumerator(traceBits.getItem(c));
                        try {
                            while ($t.moveNext()) {
                                var i = $t.Current;
                                s[System.Array.index(i, s)] = s[System.Array.index(i, s)].or((System.Int64(1).shl(c)));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                    return s;
                }));
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._trace[System.Array.index(i, this._trace)].ne(other._trace[System.Array.index(i, other._trace)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f6)).join("|");
            }
        }
    });

    Bridge.define("$AnonymousType$1", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (t, i) {
                this.T = t;
                this.I = i;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$1)) {
                    return false;
                }
                return Bridge.equals(this.T, o.T) && Bridge.equals(this.I, o.I);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196186, this.T, this.I]);
                return h;
            },
            toJSON: function () {
                return {
                    T : this.T,
                    I : this.I
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"I","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_I","t":8,"rt":System.Int32,"fg":"I"},"fn":"I"},{"a":2,"n":"T","t":16,"rt":System.UInt64,"g":{"a":2,"n":"get_T","t":8,"rt":System.UInt64,"fg":"T"},"fn":"T"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, {
        f1: function (l) {
            return l;
        },
        f2: function (tr, ii) {
            return new $asm.$AnonymousType$1(tr, ii);
        },
        f3: function (v) {
            return v.T;
        },
        f4: function (v) {
            return v.I;
        },
        f5: function (t) {
            return Algorithms.Int64Usage.ToSet$1(t);
        },
        f6: function (l) {
            return Bridge.toArray(Algorithms.Int64Usage.ToSet(l)).join("");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimColoringAnalyzer", {
        fields: {
            _lineGraph: null,
            _getEdgeColorList: null
        },
        ctors: {
            ctor: function (lineGraph, getEdgeColorList) {
                this.$initialize();
                this._lineGraph = lineGraph;
                this._getEdgeColorList = getEdgeColorList;
            }
        },
        methods: {
            Analyze: function (b) {
                return this._lineGraph.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64));
            },
            Analyze$1: function (b, coloring) {
                return this.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64), coloring);
            },
            ColorableWithoutEdge: function (b, edgeIndex) {
                return this._lineGraph.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    if (e === edgeIndex) {
                        return System.Int64(-1);
                    }

                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64));
            },
            AnalyzeWithoutEdge: function (b, coloring, edgeIndex) {
                return this.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    if (e === edgeIndex) {
                        return System.Int64(-1);
                    }

                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64), coloring);
            },
            IsChoosable: function (assignment, coloring) {
                coloring.v = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Int64))();
                return this.IsChoosable$1(assignment, 0, coloring.v);
            },
            IsChoosable$1: function (assignment, v, coloring) {
                var $t;
                if (v >= this._lineGraph.N) {
                    return true;
                }

                var colors = assignment.getItem(v);
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._lineGraph._laterNeighbors.Value.getItem(v));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$1(assignmentCopy, ((v + 1) | 0), coloring)) {
                        coloring.set(v, color);
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer", {
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        props: {
            LastWinChildCount: 0,
            ProofFindingMode: false,
            WeaklyFixable: false,
            WinTreeInfo: null,
            LossTreeInfo: null
        },
        ctors: {
            init: function () {
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            },
            ctor: function (n, proofFindingMode, weaklyFixable) {
                if (proofFindingMode === void 0) { proofFindingMode = false; }
                if (weaklyFixable === void 0) { weaklyFixable = false; }

                this.$initialize();
                this._fixerResponses = System.Array.init(8192, System.UInt64(0), System.UInt64);
                this.ProofFindingMode = proofFindingMode;
                this.WeaklyFixable = weaklyFixable;
                if (this.ProofFindingMode) {
                    this.WinTreeInfo = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo))();
                    this.LossTreeInfo = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo))();
                }
            }
        },
        methods: {
            Analyze: function (board, wonBoards) {
                if (this.ProofFindingMode) {
                    return this.AnalyzeForProofInternal(board, wonBoards);
                }

                return this.AnalyzeInternal(board, wonBoards);
            },
            AnalyzeInternal: function (board, wonBoards) {
                var $t;
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        var x = board._trace[System.Array.index(i, board._trace)];
                        var y = board._trace[System.Array.index(j, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t.moveNext()) {
                                var breakerChoice = $t.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                for (var k = 1; k < this._fixerResponseCount; k = (k + 1) | 0) {
                                    if (this.WeaklyFixable && Algorithms.Int64Usage.PopulationCount$1(this._fixerResponses[System.Array.index(k, this._fixerResponses)]) > 2) {
                                        continue;
                                    }

                                    var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i, j, this._fixerResponses[System.Array.index(k, this._fixerResponses)], board._stackCount);
                                    if (wonBoards.contains(childBoard)) {
                                        winningSwapExists = true;
                                        break;
                                    }
                                }

                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                }

                return false;
            },
            AnalyzeForProofInternal: function (board, wonBoards) {
                var $t, $t1, $t2;
                var winInfo = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo();
                this.WinTreeInfo.set(board, winInfo);

                var lossInfo = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo();
                this.LossTreeInfo.set(board, lossInfo);

                var colorPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        colorPairs.add({ item1: i, item2: j });
                    }
                }

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(colorPairs).orderBy(function (cp) {
                        return Algorithms.Int64Usage.PopulationCount$1((board._trace[System.Array.index(cp.item1, board._trace)].xor(board._trace[System.Array.index(cp.item2, board._trace)])));
                    }));
                try {
                    while ($t.moveNext()) {
                        var cp = $t.Current;
                        var i1 = cp.item1;
                        var j1 = cp.item2;

                        var x = board._trace[System.Array.index(i1, board._trace)];
                        var y = board._trace[System.Array.index(j1, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t1.moveNext()) {
                                var breakerChoice = $t1.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                var responses = System.Linq.Enumerable.range(1, ((this._fixerResponseCount - 1) | 0)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer.f1)).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer.f2);
                                $t2 = Bridge.getEnumerator(responses);
                                try {
                                    while ($t2.moveNext()) {
                                        var response = $t2.Current;
                                        if (this.WeaklyFixable && Algorithms.Int64Usage.PopulationCount$1(response) > 2) {
                                            break;
                                        }

                                        var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i1, j1, response, board._stackCount);
                                        if (wonBoards.contains(childBoard)) {
                                            winningSwapExists = true;
                                            winInfo.Add(breakerChoice, i1, j1, response);
                                            break;
                                        } else {
                                            lossInfo.Add(breakerChoice, i1, j1, response);
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    winInfo.clear();
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            this.LastWinChildCount = Algorithms.Int64Usage.PopulationCount$1(swappable);
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;
                var tableLength = this._fixerResponses.length;
                while (tableLength <= this._fixerResponseCount) {
                    tableLength = Bridge.Int.mul(tableLength, 2);
                }
                if (tableLength > this._fixerResponses.length) {
                    this._fixerResponses = System.Array.init(tableLength, System.UInt64(0), System.UInt64);
                }

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer, {
        f1: function (k) {
            return this._fixerResponses[System.Array.index(k, this._fixerResponses)];
        },
        f2: function (fr) {
            return Algorithms.Int64Usage.PopulationCount$1(fr);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Template", {
        statics: {
            methods: {
                op_Implicit: function (s) {
                    return new Algorithms.FixerBreaker.KnowledgeEngine.Template.$ctor1(s, null);
                    //return new Template(Regex.Split(s ?? "", @"\D+").Select(MetaKnowledge.TryParseInt).Where(x => x.HasValue).Select(x => x.Value).ToList());
                }
            }
        },
        props: {
            Sizes: null
        },
        ctors: {
            ctor: function (sizes) {
                this.$initialize();
                this.Sizes = sizes;
            },
            $ctor1: function (s, g) {
                this.$initialize();
            }
        },
        methods: {
            equals: function (o) {
                return this.Equals(Bridge.as(o, Algorithms.FixerBreaker.KnowledgeEngine.Template));
            },
            Equals: function (t) {
                if (!Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(t)) {
                    return false;
                }

                return System.Linq.Enumerable.from(this.Sizes).sequenceEqual(t.Sizes);
            },
            getHashCode: function () {
                return System.Linq.Enumerable.from(this.Sizes).aggregate(this.Sizes.Count, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Template.f1);
            },
            toString: function () {
                return Bridge.toArray(this.Sizes).join(",");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Template", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Template, {
        f1: function (t, s) {
            return ((Bridge.Int.mul(31, t) + s) | 0);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge", {
        fields: {
            _potLookup: null
        },
        props: {
            Template: null,
            LostBoards: {
                get: function () {
                    return System.Linq.Enumerable.from(this._potLookup.getValues()).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge.f1).distinct();
                }
            }
        },
        ctors: {
            init: function () {
                this._potLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge))();
            },
            ctor: function (template) {
                this.$initialize();
                this.Template = template;
            }
        },
        methods: {
            getItem: function (colorCount) {
                var p = { };
                if (!this._potLookup.tryGetValue(colorCount, p)) {
                    p.v = new Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge(colorCount);
                    this._potLookup.set(colorCount, p.v);
                }

                return p.v;
            },
            Promote: function (colorCount) {
                this.getItem(colorCount).CopyInto(this.getItem(((colorCount + 1) | 0)));
            },
            KnowledgeExists: function (colorCount) {
                return this._potLookup.containsKey(colorCount);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge, {
        f1: function (pk) {
            return pk.LostBoards;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress", {
        props: {
            IsInitialThought: false,
            BoardsAdded: null,
            BoardsRemoved: null,
            WinLength: 0
        }
    });

    Bridge.define("Algorithms.FixerBreaker.SlowBoard", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        statics: {
            methods: {
                UpdateHash: function (hash, value) {
                    hash.v = System.Int64.clip32(System.Int64(Bridge.Int.mul(100, hash.v)).add(value));
                },
                ApplyMapping$1: function (mapping, stack) {
                    return Algorithms.Int64Usage.ToInt64(Algorithms.FixerBreaker.SlowBoard.ApplyMapping(mapping, Algorithms.Int64Usage.ToSet(stack)));
                },
                ApplyMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item2.getItem(mapping.item1.indexOf(c));
                        });
                },
                ApplyInverseMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item1.getItem(mapping.item2.indexOf(c));
                        });
                },
                OtherTurn: function (turn) {
                    return ((1 - turn) | 0);
                }
            }
        },
        fields: {
            _hashCode: 0
        },
        props: {
            Stacks: null,
            PotSet: null,
            Degrees: null,
            DegreeChangeIndices: null,
            Template: null,
            Pot: System.Int64(0),
            ColorCount: 0,
            Turn: 0,
            N: 0,
            LastMove: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            init: function () {
                this.LastMove = new Algorithms.FixerBreaker.Move();
            },
            ctor: function (stacks, pot) {
                this.$initialize();
                this.Stacks = stacks;
                this.Pot = pot;
                this.Turn = Algorithms.FixerBreaker.Turn.Fixer;
                this.N = this.Stacks.Count;
                this.Template = new Algorithms.FixerBreaker.KnowledgeEngine.Template.ctor(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f1).toList(System.Int32));

                this.PotSet = Algorithms.Int64Usage.ToSet(this.Pot);
                this.ColorCount = System.Linq.Enumerable.from(this.PotSet).count();
                this.Degrees = new (System.Collections.Generic.List$1(System.Object))();
                this.DegreeChangeIndices = new (System.Collections.Generic.List$1(System.Int32))();
                this.ComputeHashCode();
            }
        },
        methods: {
            getItem: function (x) {
                return this.Stacks.getItem(x);
            },
            ComputeHashCode: function () {
                this._hashCode = this.N;
                Algorithms.FixerBreaker.SlowBoard.UpdateHash(Bridge.ref(this, "_hashCode"), this.Turn);

                this.Degrees.clear();
                this.DegreeChangeIndices.clear();

                this.Degrees.addRange(System.Linq.Enumerable.from(this.PotSet).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.SlowBoard.f2)).where($asm.$.Algorithms.FixerBreaker.SlowBoard.f3).orderBy($asm.$.Algorithms.FixerBreaker.SlowBoard.f4));

                var previousDegree = -1;
                for (var i = 0; i < this.Degrees.Count; i = (i + 1) | 0) {
                    var degree = this.Degrees.getItem(i);

                    Algorithms.FixerBreaker.SlowBoard.UpdateHash(Bridge.ref(this, "_hashCode"), System.Int64(degree.item2));

                    if (degree.item2 !== previousDegree) {
                        this.DegreeChangeIndices.add(i);
                        previousDegree = degree.item2;
                    }
                }

                this.DegreeChangeIndices.add(this.Degrees.Count);
            },
            MakeMove: function (move) {
                this.LastMove = move.$clone();

                if (move.Stack >= 0) {
                    this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                }

                this.Turn = Algorithms.FixerBreaker.SlowBoard.OtherTurn(this.Turn);

                this.ComputeHashCode();
            },
            DoMoveCombination: function (moves) {
                var $t;
                $t = Bridge.getEnumerator(moves, Algorithms.FixerBreaker.Move);
                try {
                    while ($t.moveNext()) {
                        var move = $t.Current.$clone();
                        this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ComputeHashCode();
            },
            Clone: function () {
                var clone = new Algorithms.FixerBreaker.SlowBoard(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();
                clone._hashCode = this._hashCode;

                clone.ComputeHashCode();

                return clone;
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.SlowBoard));
            },
            Equals: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }

                if (System.Linq.Enumerable.from(this.Stacks).sequenceEqual(other.Stacks)) {
                    if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                        return true;
                    }

                    if (this.LastMove.Stack === other.LastMove.Stack && (this.LastMove.Added === other.LastMove.Added && this.LastMove.Removed === other.LastMove.Removed || this.LastMove.Added === other.LastMove.Removed && this.LastMove.Removed === other.LastMove.Added)) {
                        return true;
                    }

                    return false;
                }

                return this.FindPermutation(other) != null;
            },
            FindPermutation: function (other) {
                if (!System.Linq.Enumerable.from(this.Degrees).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f4).sequenceEqual(System.Linq.Enumerable.from(other.Degrees).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f4))) {
                    return null;
                }

                var mappingPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < ((this.DegreeChangeIndices.Count - 1) | 0); i = (i + 1) | 0) {
                    var domain = new (System.Collections.Generic.List$1(System.Int32))();
                    var codomain = new (System.Collections.Generic.List$1(System.Int32))();

                    for (var j = this.DegreeChangeIndices.getItem(i); j < this.DegreeChangeIndices.getItem(((i + 1) | 0)); j = (j + 1) | 0) {
                        domain.add(this.Degrees.getItem(j).item1);
                        codomain.add(other.Degrees.getItem(j).item1);
                    }

                    mappingPairs.add({ item1: domain, item2: codomain });
                }

                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Object, System.Linq.Enumerable.from(mappingPairs).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f5))).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.SlowBoard.f6)).firstOrDefault(Bridge.fn.bind(this, function (mapping) {
                        return this.SequenceEqualPermuted(mapping, other);
                    }), null);
            },
            FlattenMapping: function (mapping) {
                return { item1: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.SlowBoard.f7).toList(System.Int32), item2: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.SlowBoard.f4).toList(System.Int32) };
            },
            SequenceEqualPermuted: function (mapping, other) {
                for (var i = 0; i < this.Stacks.Count; i = (i + 1) | 0) {
                    var permutedStack = Algorithms.FixerBreaker.SlowBoard.ApplyMapping$1(mapping, this.Stacks.getItem(i));
                    if (permutedStack.ne(other.Stacks.getItem(i))) {
                        return false;
                    }
                }

                if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                    return true;
                }

                if (this.LastMove.Stack !== other.LastMove.Stack) {
                    return false;
                }

                var ours = System.Array.init([this.LastMove.Added, this.LastMove.Removed], System.Int32);
                var theirs = function (_o9) {
                        _o9.add(other.LastMove.Added);
                        _o9.add(other.LastMove.Removed);
                        return _o9;
                    }(new (System.Collections.Generic.List$1(System.Int32))());

                return Algorithms.Utility.ListUtility.Equal(System.Int32, System.Linq.Enumerable.from(Algorithms.FixerBreaker.SlowBoard.ApplyMapping(mapping, ours)).toList(System.Int32), theirs);
            },
            ExactlyEqual: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }
                if (this.Pot.ne(other.Pot)) {
                    return false;
                }

                if (System.Linq.Enumerable.from(this.Stacks).sequenceEqual(other.Stacks)) {
                    if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                        return true;
                    }

                    if (this.LastMove.Stack === other.LastMove.Stack && (this.LastMove.Added === other.LastMove.Added && this.LastMove.Removed === other.LastMove.Removed || this.LastMove.Added === other.LastMove.Removed && this.LastMove.Removed === other.LastMove.Added)) {
                        return true;
                    }
                }

                return false;
            },
            getHashCode: function () {
                return this._hashCode;
            },
            getEnumerator: function () {
                return this.Stacks.getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f8)).join("|");
            },
            ToTex: function () {
                return Algorithms.GenericExtensions.JoinPretty(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f9), ", ");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.SlowBoard", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.SlowBoard, {
        f1: function (s) {
            return Algorithms.Int64Usage.PopulationCount(s);
        },
        f2: function (c) {
            return { item1: c, item2: System.Linq.Enumerable.from(this.Stacks).count(function (s) {
                        return Algorithms.Int64Usage.IsBitSet(s, System.Int64(c));
                    }) };
        },
        f3: function (x) {
            return x.item2 > 0;
        },
        f4: function (x) {
            return x.item2;
        },
        f5: function (mp) {
            return System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(mp.item2.Count)).select(function (p) {
                    return { item1: mp.item1, item2: p.Apply(System.Int32, mp.item2) };
                });
        },
        f6: function (mapping) {
            return this.FlattenMapping(mapping);
        },
        f7: function (x) {
            return x.item1;
        },
        f8: function (x) {
            return Algorithms.Int64Usage.ToSetStringSmall(x);
        },
        f9: function (stack, i) {
            return System.String.concat("$L(v_" + (((i + 1) | 0)) + ") = ", System.String.replaceAll(System.String.replaceAll(Algorithms.Int64Usage.ToSetString$2(stack), "{", "\\{"), "}", "\\}"), "$");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Turn", {
        $kind: "enum",
        statics: {
            fields: {
                Fixer: 0,
                Breaker: 1
            }
        }
    });

    Bridge.define("Algorithms.GenericExtensions", {
        statics: {
            methods: {
                Shuffle: function (T, list) {
                    var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var n = System.Array.getCount(list, T);
                    while (n > 1) {
                        n = (n - 1) | 0;
                        var k = rng.next$1(((n + 1) | 0));
                        var value = System.Array.getItem(list, k, T);
                        System.Array.setItem(list, k, System.Array.getItem(list, n, T), T);
                        System.Array.setItem(list, n, value, T);
                    }
                },
                ShuffleAll: function (lists) {
                    var $t;
                    var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var n = System.Array.getCount(System.Array.getItem(lists, 0, System.Collections.IList));
                    while (n > 1) {
                        n = (n - 1) | 0;
                        var k = rng.next$1(((n + 1) | 0));

                        $t = Bridge.getEnumerator(lists, System.Collections.IList);
                        try {
                            while ($t.moveNext()) {
                                var list = $t.Current;
                                var value = System.Array.getItem(list, k);
                                System.Array.setItem(list, k, System.Array.getItem(list, n));
                                System.Array.setItem(list, n, value);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                },
                EnList: function (T, t) {
                    return function (_o10) {
                            _o10.add(t);
                            return _o10;
                        }(new (System.Collections.Generic.List$1(T))());
                },
                IndicesWhere: function (T, source, condition) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (T, source, condition) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            $t,
                            t,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 0;
                                                $t = Bridge.getEnumerator(source, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    t = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            if (condition(t)) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            $enumerator.current = i;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            i = (i + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                FirstIndex: function (T, source, condition) {
                    var $t;
                    var i = 0;
                    $t = Bridge.getEnumerator(source, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            if (condition(t)) {
                                return i;
                            }

                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return -1;
                },
                JoinPretty: function (source, separator) {
                    var count = System.Linq.Enumerable.from(source).count();
                    if (count <= 0) {
                        return "";
                    }
                    if (count === 1) {
                        return System.Linq.Enumerable.from(source).first();
                    }
                    if (count === 2) {
                        return System.String.concat(System.Linq.Enumerable.from(source).elementAt(0), " and ", System.Linq.Enumerable.from(source).elementAt(1));
                    }

                    return System.String.concat(Bridge.toArray(System.Linq.Enumerable.from(source).take(((count - 1) | 0))).join(separator), " and ", System.Linq.Enumerable.from(source).elementAt(((count - 1) | 0)));
                },
                RemoveAll: function (T, list, predicate, onRemoved) {
                    var removed = 0;
                    for (var i = (list.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (predicate(list.getItem(i))) {
                            onRemoved(list.getItem(i));

                            list.removeAt(i);
                            removed = (removed + 1) | 0;
                        }
                    }

                    return removed;
                }
            }
        }
    });

    Bridge.define("Algorithms.Graph", {
        statics: {
            fields: {
                RNG: null,
                CacheHits: System.Int64(0),
                NodesVisited: System.Int64(0),
                DotColors: null,
                TikzColors: null
            },
            props: {
                MemoizeEulerianSubgraphCounting: false
            },
            ctors: {
                init: function () {
                    this.RNG = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    this.DotColors = $asm.$.Algorithms.Graph.f1(new (System.Collections.Generic.List$1(System.String))());
                    this.TikzColors = $asm.$.Algorithms.Graph.f2(new (System.Collections.Generic.List$1(System.String))());
                }
            },
            methods: {
                MaybeIsomorphic: function (A, B) {
                    if (A.N !== B.N) {
                        return false;
                    }
                    if (A.E !== B.E) {
                        return false;
                    }

                    A.TransitivePartition.Refine(A.DegreeSequence.Value, 1);
                    B.TransitivePartition.Refine(B.DegreeSequence.Value, 1);

                    A.TransitivePartition.Refine(A.NodeInvariantOne.Value, 2);
                    B.TransitivePartition.Refine(B.NodeInvariantOne.Value, 2);

                    A.TransitivePartition.Refine(A.NodeInvariantTwo.Value, 3);
                    B.TransitivePartition.Refine(B.NodeInvariantTwo.Value, 3);

                    if (!A.TransitivePartition.equals(B.TransitivePartition)) {
                        return false;
                    }

                    return true;
                },
                Isomorphic: function (A, B) {
                    if (!Algorithms.Graph.MaybeIsomorphic(A, B)) {
                        return false;
                    }

                    return A.Contains(B, true);
                },
                op_Equality: function (A, B) {
                    return A == null && B == null || A != null && B != null && A.equals(B);
                },
                op_Inequality: function (A, B) {
                    return !(Algorithms.Graph.op_Equality(A, B));
                },
                op_Addition: function (A, B) {
                    return A.DisjointUnion(B);
                },
                op_Multiply: function (A, B) {
                    return A.Join(B);
                },
                op_Multiply$1: function (k, A) {
                    var G = A.Clone();
                    for (var i = 1; i < k; i = (i + 1) | 0) {
                        G = Algorithms.Graph.op_Addition(G, A);
                    }

                    G.Initialize();
                    return G;
                }
            }
        },
        fields: {
            _adjacent: null,
            _neighbors: null,
            _complementNeighbors: null,
            _outNeighbors: null,
            _inNeighbors: null,
            _laterNeighbors: null,
            _vertices: null,
            _independentSets: null,
            _maximalIndependentSets: null,
            _independentTwoSets: null,
            _independentThreeSets: null,
            _vertexSubsets: null,
            _e: null
        },
        props: {
            N: 0,
            E: {
                get: function () {
                    return this._e.Value;
                }
            },
            Adjacent: {
                get: function () {
                    return this._adjacent;
                }
            },
            Directed: null,
            VertexWeight: null,
            Neighbors: {
                get: function () {
                    return this._neighbors.Value;
                }
            },
            ComplementNeighbors: {
                get: function () {
                    return this._complementNeighbors.Value;
                }
            },
            OutNeighbors: {
                get: function () {
                    return this._outNeighbors.Value;
                }
            },
            InNeighbors: {
                get: function () {
                    return this._inNeighbors.Value;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            },
            DegreeSequence: null,
            InDegreeSequence: null,
            OutDegreeSequence: null,
            NodeInvariantOne: null,
            NodeInvariantTwo: null,
            TransitivePartition: null,
            EdgeWeightsWithMultiplicity: null,
            IndependentSets: {
                get: function () {
                    return this._independentSets.Value;
                }
            },
            MaximalIndependentSets: {
                get: function () {
                    return this._maximalIndependentSets.Value;
                }
            },
            Size: {
                get: function () {
                    var t = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        t = (t + (this.OutDegree(i))) | 0;
                    }

                    return t;
                }
            },
            MaxDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.Degree(i));
                    }

                    return max;
                }
            },
            MinDegree: {
                get: function () {
                    var min = 2147483647;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        min = Math.min(min, this.Degree(i));
                    }

                    return min;
                }
            },
            MaxOutDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.OutDegree(i));
                    }

                    return max;
                }
            },
            MaxInDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.InDegree(i));
                    }

                    return max;
                }
            }
        },
        ctors: {
            $ctor1: function (edgeWeights, vertexWeight) {
                if (vertexWeight === void 0) { vertexWeight = null; }

                this.$initialize();
                this.N = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this.VertexWeight = vertexWeight;

                this._vertices = System.Linq.Enumerable.range(0, this.N).toList(System.Int32);
                this._adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                this.Directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (edgeWeights.getItem(k) !== 0) {
                            this._adjacent.set([i, j], true);
                            this._adjacent.set([j, i], true);

                            if (edgeWeights.getItem(k) > 0) {
                                this.Directed.set([i, j], true);
                            }
                            if (edgeWeights.getItem(k) < 0) {
                                this.Directed.set([j, i], true);
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                this.Initialize();
            },
            ctor: function (adjacent, vertexWeight) {
                if (vertexWeight === void 0) { vertexWeight = null; }

                this.$initialize();
                this._adjacent = adjacent;
                this.N = ((System.Array.getLength(this._adjacent, 0) - 1) + 1) | 0;
                this.VertexWeight = vertexWeight;

                this._vertices = System.Linq.Enumerable.range(0, this.N).toList(System.Int32);
                this.Directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                this.Initialize();
            }
        },
        methods: {
            getItem: function (x, y) {
                return this._adjacent.get([x, y]);
            },
            FromOutNeighborLists: function (outNeighbors) {
                var N = outNeighbors.count;

                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < N; j = (j + 1) | 0) {
                        if (outNeighbors.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (outNeighbors.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return new Algorithms.Graph.$ctor1(edgeWeights);
            },
            Initialize: function () {
                this._e = new (Algorithms.Lazy$1(System.Int32)).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f3));

                this.SetupNeighbors();
                this.InitializeLazyLoaders();
            },
            SetupNeighbors: function () {
                this._neighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f4));

                this._complementNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f5));

                this._outNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f6));

                this._inNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f7));

                this._laterNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f8));

                this.TransitivePartition = new Algorithms.TransitivePartition(this._vertices);

                this.DegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.Degree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.InDegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.InDegree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.OutDegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.OutDegree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.NodeInvariantOne = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t, $t1, $t2, $t3, $t4;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    var sp = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = ($t1 = this.DegreeSequence.Value)[System.Array.index(v, $t1)];
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var k = 3;
                    for (var i = 0; i < k; i = (i + 1) | 0) {
                        $t2 = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t2.moveNext()) {
                                var v1 = $t2.Current;
                                sp[System.Array.index(v1, sp)] = System.Int64.clip32(System.Int64((s[System.Array.index(v1, s)] << 13 | s[System.Array.index(v1, s)] >> 19)).xor(System.Int64(4278255360)));
                                $t3 = Bridge.getEnumerator(this.Neighbors.getItem(v1));
                                try {
                                    while ($t3.moveNext()) {
                                        var w = $t3.Current;
                                        sp[System.Array.index(v1, sp)] = (sp[System.Array.index(v1, sp)] + s[System.Array.index(w, s)]) | 0;
                                    }
                                } finally {
                                    if (Bridge.is($t3, System.IDisposable)) {
                                        $t3.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                        $t4 = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t4.moveNext()) {
                                var v2 = $t4.Current;
                                s[System.Array.index(v2, s)] = sp[System.Array.index(v2, sp)];
                            }
                        } finally {
                            if (Bridge.is($t4, System.IDisposable)) {
                                $t4.System$IDisposable$dispose();
                            }
                        }}

                    return s;
                }));

                this.NodeInvariantTwo = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t, $t1, $t2, $t3, $t4, $t5;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = ($t1 = this.DegreeSequence.Value)[System.Array.index(v, $t1)];

                            $t2 = Bridge.getEnumerator(this.Neighbors.getItem(v));
                            try {
                                while ($t2.moveNext()) {
                                    var w = $t2.Current;
                                    s[System.Array.index(v, s)] = (s[System.Array.index(v, s)] + (Bridge.Int.mul(3, ($t3 = this.DegreeSequence.Value)[System.Array.index(w, $t3)]))) | 0;

                                    $t4 = Bridge.getEnumerator(this.Neighbors.getItem(w));
                                    try {
                                        while ($t4.moveNext()) {
                                            var z = $t4.Current;
                                            if (z !== v) {
                                                s[System.Array.index(v, s)] = (s[System.Array.index(v, s)] + (Bridge.Int.mul(7, ($t5 = this.DegreeSequence.Value)[System.Array.index(z, $t5)]))) | 0;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t4, System.IDisposable)) {
                                            $t4.System$IDisposable$dispose();
                                        }
                                    }
                                }
                            } finally {
                                if (Bridge.is($t2, System.IDisposable)) {
                                    $t2.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));
            },
            InitializeLazyLoaders: function () {
                this._independentSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f9), true);
                this._independentTwoSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f11), true);
                this._independentThreeSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f13), true);
                this._vertexSubsets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f14));
                this._maximalIndependentSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f15), true);
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f16)).join(" ");
            },
            getHashCode: function () {
                return Bridge.getHashCode(this.toString());
            },
            equals: function (obj) {
                var H = Bridge.as(obj, Algorithms.Graph);
                if (Algorithms.Graph.op_Equality(H, null)) {
                    return false;
                }

                if (this.N !== H.N) {
                    return false;
                }
                if (this.E !== H.E) {
                    return false;
                }

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j]) !== H.getItem(i, j)) {
                            return false;
                        }
                    }
                }

                return true;
            },
            PermuteVertices: function (p) {
                var $t;
                var adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([p.getItem(i), p.getItem(j)], this._adjacent.get([i, j]));
                    }
                }

                var vertexWeight = null;
                if (this.VertexWeight != null) {
                    vertexWeight = new (System.Collections.Generic.List$1(System.Int32))();
                    var pp = p.Inverse();

                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            vertexWeight.add(this.VertexWeight.getItem(pp.getItem(v)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return new Algorithms.Graph.ctor(adjacent, vertexWeight);
            },
            Contains: function (A, induced) {
                return this.Contains$1(A, induced, $asm.$.Algorithms.Graph.f17);
            },
            Contains$1: function (A, induced, condition) {
                if (this.N < A.N) {
                    return false;
                }

                var tau = new (System.Collections.Generic.List$1(System.Int32))();
                return this.Contains$2(A, induced, condition, System.Array.init(A.N, 0, System.Int32), tau, 0);
            },
            Contains$2: function (A, induced, condition, tau, placed, v) {
                var $t;
                if (v === A.N) {
                    return true;
                }

                var images = System.Linq.Enumerable.from(placed).select(function (u) {
                        return tau[System.Array.index(u, tau)];
                    }).orderBy($asm.$.Algorithms.Graph.f18).toList(System.Int32);
                var requiredNeighbors = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.IntersectionSorted$1(A.Neighbors.getItem(v), placed)).select(function (u) {
                        return tau[System.Array.index(u, tau)];
                    }).orderBy($asm.$.Algorithms.Graph.f18).toList(System.Int32);
                var candidates = System.Linq.Enumerable.from(this.Vertices).except(images).where(Bridge.fn.bind(this, function (w) {
                    return A.Degree(v) <= this.Degree(w);
                })).where(Bridge.fn.bind(this, function (w) {
                    return induced ? System.Linq.Enumerable.from(requiredNeighbors).sequenceEqual(Algorithms.Utility.ListUtility.Intersection(System.Int32, this.Neighbors.getItem(w), images)) : Algorithms.Utility.ListUtility.SubsetEqualSorted(requiredNeighbors, this.Neighbors.getItem(w));
                })).where(Bridge.fn.bind(this, function (w) {
                    return condition(this, A, w, v);
                }));

                $t = Bridge.getEnumerator(candidates);
                try {
                    while ($t.moveNext()) {
                        var candidate = $t.Current;
                        tau[System.Array.index(v, tau)] = candidate;
                        placed.add(v);

                        if (this.Contains$2(A, induced, condition, tau, placed, ((v + 1) | 0))) {
                            return true;
                        }

                        placed.removeAt(((placed.Count - 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            ContainsInduced: function (A) {
                return this.Contains(A, true);
            },
            ContainsInducedOld: function (A) {
                var $t;
                if (this.N < A.N) {
                    return false;
                }

                var vertexSets = this._vertexSubsets.Value;

                $t = Bridge.getEnumerator(vertexSets);
                try {
                    while ($t.moveNext()) {
                        var vertices = $t.Current;
                        if (Algorithms.Graph.Isomorphic(this.InducedSubgraph(vertices), A)) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            EnumerateConnectedOrderings: function (initialVertices) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function (initialVertices) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        done,
                        $t,
                        v,
                        $t1,
                        ordering,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        done = true;
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(this.Vertices).except(initialVertices));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                v = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 2: {
                                        done = false;
                                            if (this.DegreeInSubgraph(v, initialVertices) > 0) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 8;
                                            continue;
                                    }
                                    case 3: {
                                        initialVertices.add(v);
                                            $t1 = Bridge.getEnumerator(this.EnumerateConnectedOrderings(initialVertices), System.Collections.Generic.List$1(System.Int32));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t1.moveNext()) {
                                                ordering = $t1.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        $enumerator.current = System.Linq.Enumerable.from(ordering).toList(System.Int32);
                                            $step = 6;
                                            return true;
                                    }
                                    case 6: {
                                        $step = 4;
                                        continue;
                                    }
                                    case 7: {
                                        initialVertices.removeAt(((initialVertices.Count - 1) | 0));
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 9: {
                                        if (done) {
                                                $step = 10;
                                                continue;
                                            } 
                                            $step = 12;
                                            continue;
                                    }
                                    case 10: {
                                        $enumerator.current = initialVertices;
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            IsSpanningSubgraphOf: function (A) {
                if (this.N !== A.N) {
                    return false;
                }

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j]) && !A.getItem(i, j)) {
                            return false;
                        }
                    }
                }

                return true;
            },
            GetEdgeWeights: function () {
                return this.GetEdgeWeights$4(System.Array.init([], System.Int32), System.Array.init([], System.Object));
            },
            GetEdgeWeights$2: function (subgraph) {
                var n = subgraph.Count;
                var w = new (System.Collections.Generic.List$1(System.Int32))(n);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        w.add(0);

                        if (this._adjacent.get([subgraph.getItem(i), subgraph.getItem(j)]) || this._adjacent.get([subgraph.getItem(j), subgraph.getItem(i)])) {
                            w.setItem(k, 1);
                        }

                        k = (k + 1) | 0;
                    }
                }

                return w;
            },
            GetEdgeWeights$1: function (adjacent, directed) {
                return this.GetEdgeWeights$3(adjacent, directed, System.Array.init([], System.Int32), System.Array.init([], System.Object));
            },
            GetEdgeWeights$4: function (removedVertices, removedEdges) {
                return this.GetEdgeWeights$3(this._adjacent, this.Directed, removedVertices, removedEdges);
            },
            GetEdgeWeights$3: function (adjacent, directed, removedVertices, removedEdges) {
                var w = new (System.Collections.Generic.List$1(System.Int32))();

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = { v : (i + 1) | 0 }; j.v < this.N; j.v = (j.v + 1) | 0) {
                        w.add(0);

                        if (!System.Linq.Enumerable.from(removedVertices).any((function ($me, j) {
                                return function (v) {
                                    return v === i || v === j.v;
                                };
                            })(this, j)) && !System.Linq.Enumerable.from(removedEdges).any((function ($me, j) {
                                return function (e) {
                                    return e.item1 === i && e.item2 === j.v || e.item1 === j.v && e.item2 === i;
                                };
                            })(this, j))) {
                            if (adjacent.get([i, j.v]) || adjacent.get([j.v, i])) {
                                w.setItem(k, 1);
                                if (directed.get([j.v, i])) {
                                    w.setItem(k, -1);
                                }
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                return w;
            },
            InducedSubgraph: function (subgraph) {
                var $t;
                var vertexWeight = null;
                if (this.VertexWeight != null) {
                    vertexWeight = new (System.Collections.Generic.List$1(System.Int32))(subgraph.Count);
                    $t = Bridge.getEnumerator(subgraph);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            vertexWeight.add(this.VertexWeight.getItem(v));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights$2(subgraph), vertexWeight);
            },
            ToDotWithFactors: function (labelEdges) {
                var $t, $t1;
                if (labelEdges === void 0) { labelEdges = false; }
                var sb = new System.Text.StringBuilder();

                var factors = this.Factor();
                var colorRanges = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerable$1(System.Int32)))();
                var last = 0;
                var G = Algorithms.Graphs.Empty;
                $t = Bridge.getEnumerator(factors, Algorithms.Graph);
                try {
                    while ($t.moveNext()) {
                        var factor = $t.Current;
                        colorRanges.add(System.Linq.Enumerable.range(last, factor.N));
                        last = (last + factor.N) | 0;

                        G = Algorithms.Graph.op_Multiply(G, factor);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                sb.appendLine("graph G {");
                sb.appendLine("overlap = false;");
                sb.appendLine("splines=true;");
                sb.appendLine("sep=0.3;");
                sb.appendLine("node[fontsize=20, style=bold, color=black; shape=circle, penwidth=1];");
                sb.appendLine("edge[style=bold, color=black, penwidth=2];");
                $t1 = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t1.moveNext()) {
                        var v = $t1.Current;
                        var colorIndex = System.Linq.Enumerable.from(colorRanges).select($asm.$.Algorithms.Graph.f19).first((function ($me, v) {
                            return function (p) {
                                return System.Linq.Enumerable.from(p.range).contains(v);
                            };
                        })(this, v)).index % Algorithms.Graph.DotColors.Count;
                        var label = v.toString();
                        sb.appendLine(System.String.format("{0} [label = \"{2}\", style = filled, fillcolor = \"{1}\"];", Bridge.box(v, System.Int32), Algorithms.Graph.DotColors.getItem(colorIndex), label));
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (G._adjacent.get([i, j])) {
                            if (labelEdges) {
                                sb.appendLine(System.String.format("{0} -- {1} [label = \"{2}\"]", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32), Bridge.box(k, System.Int32)));
                            } else {
                                sb.appendLine(System.String.format("{0} -- {1}", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32)));
                            }

                            k = (k + 1) | 0;
                        }
                    }
                }
                sb.appendLine("}");

                return sb.toString();
            },
            ToDotForTikz: function () {
                var $t, $t1;
                var sb = new System.Text.StringBuilder();

                var factors = this.Factor();
                var colorRanges = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerable$1(System.Int32)))();
                var last = 0;
                var G = Algorithms.Graphs.Empty;
                $t = Bridge.getEnumerator(factors, Algorithms.Graph);
                try {
                    while ($t.moveNext()) {
                        var factor = $t.Current;
                        colorRanges.add(System.Linq.Enumerable.range(last, factor.N));
                        last = (last + factor.N) | 0;

                        G = Algorithms.Graph.op_Multiply(G, factor);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                sb.appendLine("graph G {");
                $t1 = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t1.moveNext()) {
                        var v = $t1.Current;
                        var colorIndex = System.Linq.Enumerable.from(colorRanges).select($asm.$.Algorithms.Graph.f19).first((function ($me, v) {
                            return function (p) {
                                return System.Linq.Enumerable.from(p.range).contains(v);
                            };
                        })(this, v)).index % Algorithms.Graph.TikzColors.Count;
                        sb.appendLine(System.String.format("{0} [label = \"\", style = \"draw, circle, fill={1}\"];", Bridge.box(v, System.Int32), Algorithms.Graph.TikzColors.getItem(colorIndex)));
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (G._adjacent.get([i, j])) {
                            sb.appendLine(System.String.format("{0} -- {1}", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32)));
                        }
                    }
                }
                sb.appendLine("}");

                return sb.toString();
            },
            IsProperFactor: function (subset) {
                var $t;
                if (subset.Count <= 0) {
                    return true;
                }
                if (subset.Count >= this.N) {
                    return false;
                }

                var rest = Algorithms.Utility.ListUtility.Difference(System.Int32, this._vertices, subset);

                var pairs = System.Linq.Enumerable.from(subset).selectMany(function (i) {
                        return rest;
                    }, $asm.$.Algorithms.Graph.f20);

                $t = Bridge.getEnumerator(pairs);
                try {
                    while ($t.moveNext()) {
                        var pair = $t.Current;
                        if (!this._adjacent.get([pair.item1, pair.item2])) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            Factor: function () {
                var properFactors = System.Linq.Enumerable.from(this._vertexSubsets.Value).where(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f21)).toList(System.Collections.Generic.List$1(System.Int32));
                var maximalFactor = Algorithms.Utility.ListUtility.MaximalElements(System.Int32, properFactors).getItem(0);
                if (maximalFactor.Count <= 0) {
                    return Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f22)(new (System.Collections.Generic.List$1(Algorithms.Graph))());
                }

                var rest = Algorithms.Utility.ListUtility.Difference(System.Int32, this._vertices, maximalFactor);
                var maxFactor = this.InducedSubgraph(maximalFactor);
                var restGraph = this.InducedSubgraph(rest);
                return System.Linq.Enumerable.from(maxFactor.Factor()).concat(restGraph.Factor());
            },
            Clone: function () {
                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights());
            },
            Complement: function () {
                var adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        if (i === j) {
                            continue;
                        }
                        adjacent.set([i, j], !this._adjacent.get([i, j]));
                    }
                }

                return new Algorithms.Graph.ctor(adjacent);
            },
            RemoveVertex: function (v) {
                var subgraph = System.Linq.Enumerable.from(this.Vertices).toList(System.Int32);
                subgraph.remove(v);
                return this.InducedSubgraph(subgraph);
            },
            RemoveEdge$1: function (e) {
                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights$4(System.Array.init([], System.Int32), System.Array.init([e], System.Object)));
            },
            RemoveEdge: function (v1, v2) {
                return this.RemoveEdge$1({ item1: v1, item2: v2 });
            },
            AddEdge$1: function (v1, v2, directed) {
                var g = this.Clone();
                g._adjacent.set([v1, v2], (g._adjacent.set([v2, v1], true), true));
                if (directed) {
                    g.Directed.set([v1, v2], true);
                }

                return new Algorithms.Graph.$ctor1(g.GetEdgeWeights());
            },
            AddEdge: function (x, y) {
                var G = this.Clone();
                G._adjacent.set([x, y], true);
                G._adjacent.set([y, x], true);

                G.Initialize();
                return G;
            },
            GetArbitraryEdge: function () {
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            return { item1: i, item2: j };
                        }
                    }
                }

                return null;
            },
            GetEdgeTuples: function () {
                var tuples = new (System.Collections.Generic.List$1(System.Object))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            if (this.Directed.get([i, j])) {
                                tuples.add({ item1: i, item2: j });
                            } else {
                                tuples.add({ item1: j, item2: i });
                            }
                        }
                    }
                }

                return tuples;
            },
            DisjointUnion: function (H) {
                var n = (this.N + H.N) | 0;

                var adjacent = System.Array.create(false, null, System.Boolean, n, n);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([i, j], this._adjacent.get([i, j]));
                    }
                }

                for (var i1 = 0; i1 < H.N; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 < H.N; j1 = (j1 + 1) | 0) {
                        adjacent.set([((this.N + i1) | 0), ((this.N + j1) | 0)], H.getItem(i1, j1));
                    }
                }

                return new Algorithms.Graph.ctor(adjacent);
            },
            Join: function (H) {
                var G = this.DisjointUnion(H);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < H.N; j = (j + 1) | 0) {
                        G._adjacent.set([i, ((this.N + j) | 0)], true);
                        G._adjacent.set([((this.N + j) | 0), i], true);
                    }
                }

                G.Initialize();
                return G;
            },
            AttachNewVertex$1: function (neighbors) {
                if (neighbors === void 0) { neighbors = []; }
                return this.AttachNewVertex(Bridge.cast(neighbors, System.Collections.Generic.IList$1(System.Int32)));
            },
            AttachNewVertex: function (neighbors) {
                var $t;
                var adjacent = System.Array.create(false, null, System.Boolean, ((this.N + 1) | 0), ((this.N + 1) | 0));

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([i, j], this._adjacent.get([i, j]));
                    }
                }

                $t = Bridge.getEnumerator(neighbors, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var neighbor = $t.Current;
                        adjacent.set([this.N, neighbor], true);
                        adjacent.set([neighbor, this.N], true);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return new Algorithms.Graph.ctor(adjacent);
            },
            Square: function () {
                var $t, $t1;
                var g = this.Clone();
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        $t1 = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Int32, this.Neighbors.getItem(v), this.Neighbors.getItem(v)), System.Object);
                        try {
                            while ($t1.moveNext()) {
                                var pair = $t1.Current;
                                if (pair.item1 !== pair.item2) {
                                    g._adjacent.set([pair.item1, pair.item2], (g._adjacent.set([pair.item2, pair.item1], true), true));
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return g.Clone();
            },
            IsRegular: function () {
                if (this.N <= 0) {
                    return true;
                }

                return System.Linq.Enumerable.from(this.Neighbors).all(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f23));
            },
            Degree: function (v) {
                return this.Neighbors.getItem(v).Count;
            },
            OutDegree: function (v) {
                return this.OutNeighbors.getItem(v).Count;
            },
            InDegree: function (v) {
                return this.InNeighbors.getItem(v).Count;
            },
            DegreeInSubgraph: function (v, subgraph) {
                return Algorithms.Utility.ListUtility.IntersectionCountSorted(this.Neighbors.getItem(v), subgraph);
            },
            NeighborsInSubgraph: function (v, subgraph) {
                return Algorithms.Utility.ListUtility.IntersectionSorted$1(this.Neighbors.getItem(v), subgraph);
            },
            SumOverSubgraphNeighbors: function (v, subgraph, g) {
                return System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.IntersectionSorted$1(this.Neighbors.getItem(v), subgraph)).sum(function (w) {
                        return g[System.Array.index(w, g)];
                    });
            },
            GetDegreeMinusKFunc: function (k) {
                return Bridge.fn.bind(this, function (v) {
                    return ((this.Degree(v) - k) | 0);
                });
            },
            EdgesOn: function (A) {
                var edges = 0;
                for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < A.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([A.getItem(i), A.getItem(j)])) {
                            edges = (edges + 1) | 0;
                        }
                    }
                }

                return edges;
            },
            EdgeIndicesOn: function (A) {
                var edgeIndices = new (System.Collections.Generic.List$1(System.Int32))();

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            if (A.contains(i) && A.contains(j)) {
                                edgeIndices.add(k);
                            }

                            k = (k + 1) | 0;
                        }
                    }
                }

                return edgeIndices;
            },
            EdgesBetween: function (A, B) {
                var intersection = Algorithms.Utility.ListUtility.Intersection(System.Int32, A, B);
                A = Algorithms.Utility.ListUtility.Difference(System.Int32, A, B);

                var edges = 0;
                for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                    for (var j = 0; j < B.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([A.getItem(i), B.getItem(j)])) {
                            edges = (edges + 1) | 0;
                        }
                    }
                }

                return ((edges + this.EdgesOn(intersection)) | 0);
            },
            IndependentSetsInSubgraph: function (firstVertex) {
                if (firstVertex >= this.N) {
                    return $asm.$.Algorithms.Graph.f24(new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))());
                }

                var subgraphSets = this.IndependentSetsInSubgraph(((firstVertex + 1) | 0));

                return System.Linq.Enumerable.from(subgraphSets).union(System.Linq.Enumerable.from(subgraphSets).where(Bridge.fn.bind(this, function (set) {
                            return this.IsIndependentOf(firstVertex, set);
                        })).select(function (set) {
                        var bigger = function (_o15) {
                                _o15.add(firstVertex);
                                return _o15;
                            }(new (System.Collections.Generic.List$1(System.Int32))());
                        bigger.addRange(set);
                        return bigger;
                    }));
            },
            IsIndependentOf: function (v, set) {
                var $t;
                $t = Bridge.getEnumerator(set);
                try {
                    while ($t.moveNext()) {
                        var w = $t.Current;
                        if (w === v || this._adjacent.get([w, v])) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            IsClique: function (subset) {
                for (var i = 0; i < subset.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < subset.Count; j = (j + 1) | 0) {
                        if (!this._adjacent.get([subset.getItem(i), subset.getItem(j)])) {
                            return false;
                        }
                    }
                }

                return true;
            },
            IsIndependent: function (subset) {
                for (var i = 0; i < subset.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < subset.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([subset.getItem(i), subset.getItem(j)])) {
                            return false;
                        }
                    }
                }

                return true;
            },
            IsComplete: function () {
                return this.IsClique(this._vertices);
            },
            IsCliqueNumberAtLeast: function (k) {
                var $t;
                if (k > this._vertices.Count) {
                    return false;
                }
                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, this._vertices, k), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        if (this.IsClique(set)) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            IndependenceNumber: function () {
                return this.IndependenceNumber$1(this.Vertices);
            },
            IndependenceNumber$1: function (subgraph) {
                return System.Linq.Enumerable.from(this._independentSets.Value).max(function (I) {
                        return Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, I, subgraph);
                    });
            },
            MaximumIndependentSubset: function (subgraph) {
                var i = this.IndependenceNumber$1(subgraph);
                return System.Linq.Enumerable.from(this._independentSets.Value).first(function (I) {
                        return Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, I, subgraph) === i;
                    });
            },
            EnumerateMaximalIndependentSets$1: function (set) {
                return this.EnumerateBronKerbosch(set, new (System.Collections.Generic.List$1(System.Int32))(), new (System.Collections.Generic.List$1(System.Int32))());
            },
            EnumerateMaximalIndependentSets: function () {
                return this.EnumerateBronKerbosch(this.Vertices, new (System.Collections.Generic.List$1(System.Int32))(), new (System.Collections.Generic.List$1(System.Int32))());
            },
            EnumerateBronKerbosch: function (P, R, X) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function (P, R, X) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        PC,
                        XC,
                        u,
                        $t,
                        v,
                        $t1,
                        set,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (P.Count === 0 && X.Count === 0) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        $enumerator.current = System.Linq.Enumerable.from(R).toList(System.Int32);
                                            $step = 2;
                                            return true;
                                    }
                                    case 2: {
                                        $step = 11;
                                        continue;
                                    }
                                    case 3: {
                                        PC = System.Linq.Enumerable.from(P).toList(System.Int32);
                                            XC = System.Linq.Enumerable.from(X).toList(System.Int32);

                                            u = this.TomitaPivot(P, X);
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(P).except(this.ComplementNeighbors.getItem(u)));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t.moveNext()) {
                                                v = $t.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 10;
                                        continue;
                                    }
                                    case 5: {
                                        R.add(v);
                                            $t1 = Bridge.getEnumerator(this.EnumerateBronKerbosch(Algorithms.Utility.ListUtility.Intersection(System.Int32, PC, this.ComplementNeighbors.getItem(v)), R, Algorithms.Utility.ListUtility.Intersection(System.Int32, XC, this.ComplementNeighbors.getItem(v))), System.Collections.Generic.List$1(System.Int32));
                                            $step = 6;
                                            continue;
                                    }
                                    case 6: {
                                        if ($t1.moveNext()) {
                                                set = $t1.Current;
                                                $step = 7;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 7: {
                                        $enumerator.current = set;
                                            $step = 8;
                                            return true;
                                    }
                                    case 8: {
                                        $step = 6;
                                        continue;
                                    }
                                    case 9: {
                                        R.remove(v);
                                            PC.remove(v);
                                            XC.add(v);
                                        $step = 4;
                                        continue;
                                    }
                                    case 10: {
                                        $step = 11;
                                        continue;
                                    }
                                    case 11: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            TomitaPivot: function (P, X) {
                var $t;
                var max = -1;
                var best = -1;
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(P).concat(X));
                try {
                    while ($t.moveNext()) {
                        var u = $t.Current;
                        var n = Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, this.ComplementNeighbors.getItem(u), P);
                        if (n > max) {
                            max = n;
                            best = u;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return best;
            },
            FindChiColoring: function () {
                for (var K = 0; K < 2147483647; K = (K + 1) | 0) {
                    var c = this.FindKColoring(this.Vertices, K);
                    if (c != null) {
                        return c;
                    }
                }

                return null;
            },
            FindKColoring: function (subgraph, K) {
                var $t;
                if (subgraph.Count <= 0) {
                    return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                }
                if (K <= 0) {
                    return null;
                }

                $t = Bridge.getEnumerator(this.EnumerateMaximalIndependentSets$1(subgraph), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var I = $t.Current;
                        var c = this.FindKColoring(Algorithms.Utility.ListUtility.Difference(System.Int32, subgraph, I), ((K - 1) | 0));
                        if (c != null) {
                            c.insert(0, I);
                            return c;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            MaxColorableSubset: function (assignment, subset) {
                return this.MaxColorableSubset$1(assignment, 0, subset);
            },
            MaxColorableSubset$1: function (assignment, v, subset) {
                var $t;
                if (v >= subset.Count) {
                    return 0;
                }

                var max = this.MaxColorableSubset$1(assignment, ((v + 1) | 0), subset);

                var colors = assignment.getItem(subset.getItem(v));
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(subset.getItem(v)));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    max = Math.max(max, ((1 + this.MaxColorableSubset$1(assignmentCopy, ((v + 1) | 0), subset)) | 0));
                    if (max >= subset.Count) {
                        break;
                    }

                    colors = colors.xor(color);
                }

                return max;
            },
            GreedyColor: function (assignment, subset) {
                var $t;
                var coloring = System.Array.init(this.N, System.Int64(0), System.Int64);
                $t = Bridge.getEnumerator(subset);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        var lost = System.Linq.Enumerable.from(this.Neighbors.getItem(v)).aggregate(System.Int64(0), function (l, x) {
                                return l.or(coloring[System.Array.index(x, coloring)]);
                            });
                        var colors = assignment.getItem(v).and(lost.not());
                        coloring[System.Array.index(v, coloring)] = colors.and(colors.neg());
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(coloring).count($asm.$.Algorithms.Graph.f25);
            },
            IsChoosable$1: function (assignment, subset) {
                return this.IsChoosable$3(assignment, 0, subset);
            },
            IsChoosable$3: function (assignment, v, subset) {
                var $t;
                if (v >= subset.Count) {
                    return true;
                }

                var colors = assignment.getItem(subset.getItem(v));
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(subset.getItem(v)));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$3(assignmentCopy, ((v + 1) | 0), subset)) {
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            },
            IsChoosable: function (assignment) {
                return this.IsChoosable$2(assignment, 0);
            },
            IsChoosable$2: function (assignment, v) {
                var $t;
                if (v >= this.N) {
                    return true;
                }

                var colors = assignment.getItem(v);
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(v));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$2(assignmentCopy, ((v + 1) | 0))) {
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            },
            IsCliqueCovering: function (assignment) {
                var $t;
                $t = Bridge.getEnumerator(this._independentTwoSets.Value);
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        if ((assignment.getItem(set.getItem(0)).and(assignment.getItem(set.getItem(1)))).ne(System.Int64(0))) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            CheckFGChoosable: function (f, g) {
                var $t;
                var pot = System.Linq.Enumerable.range(0, ((System.Linq.Enumerable.from(this.Vertices).sum(function (v) {
                        return g(v);
                    }) - 1) | 0)).toList(System.Int32);
                var first = System.Linq.Enumerable.range(0, f(0)).toList(System.Int32);
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(Bridge.cast((System.Array.init([(System.Array.init([first], System.Collections.Generic.List$1(System.Int32)))], System.Array.type(System.Collections.Generic.List$1(System.Int32)))), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32))))).concat(System.Linq.Enumerable.from(this.Vertices).skip(1).select(function (v) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, pot, f(v));
                    }))), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var L = $t.Current;
                        var LL = System.Linq.Enumerable.from(L).toList(System.Collections.Generic.List$1(System.Int32));
                        if (!this.IsGColorable(LL, g)) {
                            return LL;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            IsGColorable: function (L, g) {
                var $t;
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(this.Vertices).select(function (v) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, L.getItem(v), g(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var coloring = $t.Current;
                        if (this.IsProperColoring(System.Linq.Enumerable.from(coloring).toList(System.Collections.Generic.List$1(System.Int32)))) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            IsProperColoring: function (coloring) {
                for (var v = 0; v < this.N; v = (v + 1) | 0) {
                    for (var w = (v + 1) | 0; w < this.N; w = (w + 1) | 0) {
                        if (!this._adjacent.get([v, w])) {
                            continue;
                        }

                        if (Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, coloring.getItem(v), coloring.getItem(w)) > 0) {
                            return false;
                        }
                    }
                }

                return true;
            },
            Mic: function () {
                var $t;
                var mic = 0;
                $t = Bridge.getEnumerator(this.EnumerateMaximalIndependentSets(), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        var t = System.Linq.Enumerable.from(set).sum(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f26));
                        mic = Math.max(mic, t);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return mic;
            },
            IsOnlineFChoosable: function (f) {
                var $t;
                Algorithms.Graph.NodesVisited = System.Int64(0);
                Algorithms.Graph.CacheHits = System.Int64(0);

                var fTrace = System.Array.init(this.N, 0, System.Int32);
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        fTrace[System.Array.index(v, fTrace)] = f(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var cache = new (System.Collections.Generic.Dictionary$2(Algorithms.OnlineChoiceHashGraph,System.Boolean))();

                return this.IsOnlineFChoosable$1(fTrace, System.Linq.Enumerable.repeat(1, this.N).toArray(System.Int32), cache);
            },
            IsOnlineFChoosable$1: function (f, g, cache) {
                var $step = 0,
                    $jumpFromFinally, 
                    key, 
                    result, 
                    gClone, 
                    liveVertices, 
                    freebies, 
                    $t, 
                    v, 
                    cachedResult, 
                    independentSets, 
                    $t1, 
                    V, 
                    $t2, 
                    v1, 
                    maximalIndependentSets, 
                    choosable, 
                    $t3, 
                    C, 
                    $t4, 
                    v2, 
                    $t5, 
                    v3, 
                    $t6, 
                    v4, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();

                                    key = null;

                                    result = true;
                                    gClone = null;

                                    liveVertices = System.Linq.Enumerable.from(g).select($asm.$.Algorithms.Graph.f27).where($asm.$.Algorithms.Graph.f28).toList(System.Int32);
                                    freebies = System.Linq.Enumerable.from(liveVertices).where(Bridge.fn.bind(this, function (v) {
                                        return this.DegreeInSubgraph(v, liveVertices) < f[System.Array.index(v, f)];
                                    })).toList(System.Int32);

                                    while (freebies.Count > 0) {
                                        if (gClone == null) {
                                            gClone = System.Array.init(g.length, 0, System.Int32);
                                            System.Array.copy(g, 0, gClone, 0, g.length);
                                        }

                                        $t = Bridge.getEnumerator(freebies);
                                        try {
                                            while ($t.moveNext()) {
                                                v = $t.Current;
                                                g[System.Array.index(v, g)] = 0;
                                            }
                                        } finally {
                                            if (Bridge.is($t, System.IDisposable)) {
                                                $t.System$IDisposable$dispose();
                                            }
                                        }
                                        liveVertices = System.Linq.Enumerable.from(g).select($asm.$.Algorithms.Graph.f29).where($asm.$.Algorithms.Graph.f28).toList(System.Int32);
                                        freebies = System.Linq.Enumerable.from(liveVertices).where(Bridge.fn.bind(this, function (v1) {
                                            return this.DegreeInSubgraph(v1, liveVertices) < f[System.Array.index(v1, f)];
                                        })).toList(System.Int32);
                                    }

                                    if (liveVertices.Count <= 0) {
                                        $step = 1;
                                        continue;
                                    } 
                                    $step = 2;
                                    continue;
                                }
                                case 1: {
                                    result = true;
                                    $step = 12;
                                    continue;
                                }
                                case 2: {
                                    if (System.Linq.Enumerable.from(liveVertices).any(function (v1) {
                                        return f[System.Array.index(v1, f)] <= 0;
                                    })) {
                                        $step = 3;
                                        continue;
                                    } 
                                    $step = 4;
                                    continue;
                                }
                                case 3: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 4: {
                                    key = new Algorithms.OnlineChoiceHashGraph(f, g);
                                    cachedResult = { };
                                    if (cache.tryGetValue(key, cachedResult)) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();

                                    key = null;
                                    result = cachedResult.v;
                                    $step = 12;
                                    continue;
                                }
                                case 6: {
                                    independentSets = System.Linq.Enumerable.from(this._independentSets.Value).where(function (set) {
                                        return set.Count >= 1 && Algorithms.Utility.ListUtility.SubsetEqualSorted(set, liveVertices);
                                    }).toList(System.Collections.Generic.List$1(System.Int32));

                                    $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, liveVertices), System.Collections.Generic.List$1(System.Int32));
                                    $step = 7;
                                    continue;
                                }
                                case 7: {
                                    if ($t1.moveNext()) {
                                        V = $t1.Current;
                                        $step = 8;
                                        continue;
                                    }
                                    $step = 11;
                                    continue;
                                }
                                case 8: {
                                    if (V.Count <= 1) {
                                        $step = 7;
                                        continue;
                                    }

                                    if (System.Linq.Enumerable.from(independentSets).any((function ($me, V) {
                                        return function (ss) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(V, ss);
                                        };
                                    })(this, V))) {
                                        $step = 7;
                                        continue;
                                    }

                                    $t2 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t2.moveNext()) {
                                            v1 = $t2.Current;
                                            f[System.Array.index(v1, f)] = (f[System.Array.index(v1, f)] - 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    maximalIndependentSets = Algorithms.Utility.ListUtility.MaximalElementsSorted$1(System.Linq.Enumerable.from(independentSets).where((function ($me, V) {
                                        return function (set) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(set, V);
                                        };
                                    })(this, V)).toList(System.Collections.Generic.List$1(System.Int32)));

                                    choosable = false;
                                    $t3 = Bridge.getEnumerator(maximalIndependentSets);
                                    try {
                                        while ($t3.moveNext()) {
                                            C = $t3.Current;
                                            $t4 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t4.moveNext()) {
                                                    v2 = $t4.Current;
                                                    g[System.Array.index(v2, g)] = (g[System.Array.index(v2, g)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t4, System.IDisposable)) {
                                                    $t4.System$IDisposable$dispose();
                                                }
                                            }
                                            choosable = this.IsOnlineFChoosable$1(f, g, cache);

                                            $t5 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t5.moveNext()) {
                                                    v3 = $t5.Current;
                                                    g[System.Array.index(v3, g)] = (g[System.Array.index(v3, g)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t5, System.IDisposable)) {
                                                    $t5.System$IDisposable$dispose();
                                                }
                                            }
                                            if (choosable) {
                                                break;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t3, System.IDisposable)) {
                                            $t3.System$IDisposable$dispose();
                                        }
                                    }
                                    $t6 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t6.moveNext()) {
                                            v4 = $t6.Current;
                                            f[System.Array.index(v4, f)] = (f[System.Array.index(v4, f)] + 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t6, System.IDisposable)) {
                                            $t6.System$IDisposable$dispose();
                                        }
                                    }
                                    if (!choosable) {
                                        $step = 9;
                                        continue;
                                    } 
                                    $step = 10;
                                    continue;
                                }
                                case 9: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 10: {
                                    $step = 7;
                                    continue;
                                }
                                case 11: {

                                }
                                case 12: {
                                    if (gClone != null) {
                                        System.Array.copy(gClone, 0, g, 0, g.length);
                                    }

                                    if (key != null) {
                                        cache.set(key, result);
                                    }

                                    return result;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            IsOnlineFGChoosable: function (f, g) {
                Algorithms.Graph.NodesVisited = System.Int64(0);
                Algorithms.Graph.CacheHits = System.Int64(0);

                var cache = new (System.Collections.Generic.Dictionary$2(Algorithms.OnlineChoiceHashGraph,System.Boolean))();
                return this.IsOnlineFGChoosable$1(System.Linq.Enumerable.from(this._vertices).select(function (v) {
                        return f(v);
                    }).toArray(System.Int32), System.Linq.Enumerable.from(this._vertices).select(function (v) {
                        return g(v);
                    }).toArray(System.Int32), cache);
            },
            IsOnlineFGChoosable$1: function (f, g, cache) {
                var $step = 0,
                    $jumpFromFinally, 
                    key, 
                    result, 
                    gClone, 
                    changed, 
                    $t, 
                    v, 
                    need, 
                    liveVertices, 
                    cachedResult, 
                    independentSets, 
                    $t1, 
                    V, 
                    $t2, 
                    v1, 
                    maximalIndependentSets, 
                    choosable, 
                    $t3, 
                    C, 
                    $t4, 
                    v2, 
                    $t5, 
                    v3, 
                    $t6, 
                    v4, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();
                                    key = null;

                                    result = true;
                                    gClone = System.Array.init(g.length, 0, System.Int32);
                                    System.Array.copy(g, 0, gClone, 0, g.length);

                                    while (true) {
                                        changed = false;
                                        $t = Bridge.getEnumerator(this._vertices);
                                        try {
                                            while ($t.moveNext()) {
                                                v = $t.Current;
                                                if (g[System.Array.index(v, g)] <= 0) {
                                                    continue;
                                                }

                                                need = (g[System.Array.index(v, g)] + System.Linq.Enumerable.from(this.Neighbors.getItem(v)).sum(function (w) {
                                                    return g[System.Array.index(w, g)];
                                                })) | 0;
                                                if (f[System.Array.index(v, f)] >= need) {
                                                    g[System.Array.index(v, g)] = 0;
                                                    changed = true;
                                                }
                                            }
                                        } finally {
                                            if (Bridge.is($t, System.IDisposable)) {
                                                $t.System$IDisposable$dispose();
                                            }
                                        }
                                        if (!changed) {
                                            break;
                                        }
                                    }

                                    liveVertices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Int32, g, $asm.$.Algorithms.Graph.f30)).toList(System.Int32);
                                    if (liveVertices.Count <= 0) {
                                        $step = 1;
                                        continue;
                                    } 
                                    $step = 2;
                                    continue;
                                }
                                case 1: {
                                    result = true;
                                    $step = 12;
                                    continue;
                                }
                                case 2: {
                                    if (System.Linq.Enumerable.from(liveVertices).any(function (v1) {
                                        return f[System.Array.index(v1, f)] < g[System.Array.index(v1, g)];
                                    })) {
                                        $step = 3;
                                        continue;
                                    } 
                                    $step = 4;
                                    continue;
                                }
                                case 3: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 4: {
                                    key = new Algorithms.OnlineChoiceHashGraph(f, g);
                                    cachedResult = { };
                                    if (cache.tryGetValue(key, cachedResult)) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();

                                    key = null;
                                    result = cachedResult.v;
                                    $step = 12;
                                    continue;
                                }
                                case 6: {
                                    independentSets = System.Linq.Enumerable.from(this._independentSets.Value).where(function (set) {
                                        return set.Count >= 1 && Algorithms.Utility.ListUtility.SubsetEqualSorted(set, liveVertices);
                                    }).toList(System.Collections.Generic.List$1(System.Int32));

                                    $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, liveVertices), System.Collections.Generic.List$1(System.Int32));
                                    $step = 7;
                                    continue;
                                }
                                case 7: {
                                    if ($t1.moveNext()) {
                                        V = $t1.Current;
                                        $step = 8;
                                        continue;
                                    }
                                    $step = 11;
                                    continue;
                                }
                                case 8: {
                                    if (V.Count <= 1) {
                                        $step = 7;
                                        continue;
                                    }

                                    if (System.Linq.Enumerable.from(independentSets).any((function ($me, V) {
                                        return function (ss) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(V, ss);
                                        };
                                    })(this, V))) {
                                        $step = 7;
                                        continue;
                                    }

                                    $t2 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t2.moveNext()) {
                                            v1 = $t2.Current;
                                            f[System.Array.index(v1, f)] = (f[System.Array.index(v1, f)] - 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    maximalIndependentSets = Algorithms.Utility.ListUtility.MaximalElementsSorted$1(System.Linq.Enumerable.from(independentSets).where((function ($me, V) {
                                        return function (set) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(set, V);
                                        };
                                    })(this, V)).toList(System.Collections.Generic.List$1(System.Int32)));

                                    choosable = false;
                                    $t3 = Bridge.getEnumerator(maximalIndependentSets);
                                    try {
                                        while ($t3.moveNext()) {
                                            C = $t3.Current;
                                            $t4 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t4.moveNext()) {
                                                    v2 = $t4.Current;
                                                    g[System.Array.index(v2, g)] = (g[System.Array.index(v2, g)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t4, System.IDisposable)) {
                                                    $t4.System$IDisposable$dispose();
                                                }
                                            }
                                            choosable = this.IsOnlineFGChoosable$1(f, g, cache);

                                            $t5 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t5.moveNext()) {
                                                    v3 = $t5.Current;
                                                    g[System.Array.index(v3, g)] = (g[System.Array.index(v3, g)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t5, System.IDisposable)) {
                                                    $t5.System$IDisposable$dispose();
                                                }
                                            }
                                            if (choosable) {
                                                break;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t3, System.IDisposable)) {
                                            $t3.System$IDisposable$dispose();
                                        }
                                    }
                                    $t6 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t6.moveNext()) {
                                            v4 = $t6.Current;
                                            f[System.Array.index(v4, f)] = (f[System.Array.index(v4, f)] + 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t6, System.IDisposable)) {
                                            $t6.System$IDisposable$dispose();
                                        }
                                    }
                                    if (!choosable) {
                                        $step = 9;
                                        continue;
                                    } 
                                    $step = 10;
                                    continue;
                                }
                                case 9: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 10: {
                                    $step = 7;
                                    continue;
                                }
                                case 11: {

                                }
                                case 12: {
                                    if (gClone != null) {
                                        System.Array.copy(gClone, 0, g, 0, g.length);
                                    }

                                    if (key != null) {
                                        cache.set(key, result);
                                    }

                                    return result;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            Direction: function (e) {
                if (!this._adjacent.get([e.item1, e.item2])) {
                    return 0;
                }

                return this.Directed.get([e.item2, e.item1]) ? -1 : 1;
            },
            MatchesOutMinusIn: function (outMinusIn) {
                return System.Linq.Enumerable.from(this._vertices).all(Bridge.fn.bind(this, function (v) {
                        return ((this.OutDegree(v) - this.InDegree(v)) | 0) === outMinusIn.getItem(v);
                    }));
            },
            SpanningOutMinusInSubgraphs: function (outMinusIn, edges, spanningEulerianOrientationsCache) {
                Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();

                var graphs = new (System.Collections.Generic.List$1(Algorithms.Graph))();

                if (System.Linq.Enumerable.from(this._vertices).any(Bridge.fn.bind(this, function (v) {
                        return outMinusIn.getItem(v) > this.OutDegree(v) || ((-outMinusIn.getItem(v)) | 0) > this.InDegree(v);
                    }))) {
                    return graphs;
                }

                var key = new Algorithms.OrientationHashGraph(this, outMinusIn);

                if (Algorithms.Graph.MemoizeEulerianSubgraphCounting) {
                    var spanners = { };
                    if (spanningEulerianOrientationsCache.tryGetValue(key, spanners)) {
                        Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();
                        return spanners.v;
                    }
                }

                if (edges.Count <= 0) {
                    if (this.MatchesOutMinusIn(outMinusIn)) {
                        graphs.add(this);
                    }

                    return graphs;
                }

                var e = System.Linq.Enumerable.from(edges).last();

                edges.remove(e);
                var g = this.RemoveEdge$1(e);

                graphs.addRange(g.SpanningOutMinusInSubgraphs(outMinusIn, edges, spanningEulerianOrientationsCache));

                var outMinusInPrime = System.Linq.Enumerable.from(outMinusIn).toList(System.Int32);
                var v1 = e.item1;
                var v2 = e.item2;

                if (this.Direction(e) === 1) {
                    outMinusInPrime.setItem(e.item1, (outMinusInPrime.getItem(e.item1) - 1) | 0);
                    outMinusInPrime.setItem(e.item2, (outMinusInPrime.getItem(e.item2) + 1) | 0);
                } else {
                    outMinusInPrime.setItem(e.item1, (outMinusInPrime.getItem(e.item1) + 1) | 0);
                    outMinusInPrime.setItem(e.item2, (outMinusInPrime.getItem(e.item2) - 1) | 0);

                    v1 = e.item2;
                    v2 = e.item1;
                }

                graphs.addRange(System.Linq.Enumerable.from(g.SpanningOutMinusInSubgraphs(outMinusInPrime, edges, spanningEulerianOrientationsCache)).select(function (graph) {
                        return graph.AddEdge$1(v1, v2, true);
                    }));

                if (Algorithms.Graph.MemoizeEulerianSubgraphCounting) {
                    spanningEulerianOrientationsCache.set(key, graphs);
                }

                edges.add(e);
                return graphs;
            },
            SpanningEulerianSubgraphs: function (edges, spanningEulerianOrientationsCache) {
                return this.SpanningOutMinusInSubgraphs(System.Linq.Enumerable.from(System.Array.init(this.N, 0, System.Int32)).toList(System.Int32), edges, spanningEulerianOrientationsCache);
            },
            CountSpanningEulerianSubgraphs: function (even, odd) {
                var $t;
                Algorithms.Graph.CacheHits = System.Int64(0);
                Algorithms.Graph.NodesVisited = System.Int64(0);
                var spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                var edges = this.GetEdgeTuples();

                even.v = 0;
                odd.v = 0;
                $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edges, spanningEulerianOrientationsCache));
                try {
                    while ($t.moveNext()) {
                        var g = $t.Current;
                        if (g.Size % 2 === 0) {
                            even.v = (even.v + 1) | 0;
                        } else {
                            odd.v = (odd.v + 1) | 0;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            CountSpanningEulerianSubgraphsUsingVertices: function (vertices, even, odd) {
                var $step = 0,
                    $jumpFromFinally, 
                    spanningEulerianOrientationsCache, 
                    edges, 
                    $t, 
                    g, 
                    $t1, 
                    v, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.CacheHits = System.Int64(0);
                                    Algorithms.Graph.NodesVisited = System.Int64(0);

                                    if (vertices == null) {
                                        vertices = new (System.Collections.Generic.List$1(System.Int32))();
                                    }

                                    spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                                    edges = this.GetEdgeTuples();

                                    even.v = 0;
                                    odd.v = 0;
                                    $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edges, spanningEulerianOrientationsCache));
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ($t.moveNext()) {
                                        g = $t.Current;
                                        $step = 2;
                                        continue;
                                    }
                                    $step = 9;
                                    continue;
                                }
                                case 2: {
                                    $t1 = Bridge.getEnumerator(vertices);
                                    $step = 3;
                                    continue;
                                }
                                case 3: {
                                    if ($t1.moveNext()) {
                                        v = $t1.Current;
                                        $step = 4;
                                        continue;
                                    }
                                    $step = 7;
                                    continue;
                                }
                                case 4: {
                                    if (g.Degree(v) <= 0) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    $step = 8;
                                    continue;
                                }
                                case 6: {
                                    $step = 3;
                                    continue;
                                }
                                case 7: {
                                    if (g.Size % 2 === 0) {
                                        even.v = (even.v + 1) | 0;
                                    } else {
                                        odd.v = (odd.v + 1) | 0;
                                    }
                                }
                                case 8: {
                                    ;
                                    $step = 1;
                                    continue;
                                }
                                case 9: {
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            CountSpanningEulerianSubgraphsUsingEdges: function (edges, even, odd) {
                var $step = 0,
                    $jumpFromFinally, 
                    spanningEulerianOrientationsCache, 
                    edgeTuples, 
                    $t, 
                    g, 
                    $t1, 
                    e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.CacheHits = System.Int64(0);
                                    Algorithms.Graph.NodesVisited = System.Int64(0);

                                    if (edges == null) {
                                        edges = new (System.Collections.Generic.List$1(System.Object))();
                                    }

                                    spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                                    edgeTuples = this.GetEdgeTuples();

                                    even.v = 0;
                                    odd.v = 0;
                                    $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edgeTuples, spanningEulerianOrientationsCache));
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ($t.moveNext()) {
                                        g = $t.Current;
                                        $step = 2;
                                        continue;
                                    }
                                    $step = 9;
                                    continue;
                                }
                                case 2: {
                                    $t1 = Bridge.getEnumerator(edges);
                                    $step = 3;
                                    continue;
                                }
                                case 3: {
                                    if ($t1.moveNext()) {
                                        e = $t1.Current;
                                        $step = 4;
                                        continue;
                                    }
                                    $step = 7;
                                    continue;
                                }
                                case 4: {
                                    if (!g._adjacent.get([e.item1, e.item2])) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    $step = 8;
                                    continue;
                                }
                                case 6: {
                                    $step = 3;
                                    continue;
                                }
                                case 7: {
                                    if (g.Size % 2 === 0) {
                                        even.v = (even.v + 1) | 0;
                                    } else {
                                        odd.v = (odd.v + 1) | 0;
                                    }
                                }
                                case 8: {
                                    ;
                                    $step = 1;
                                    continue;
                                }
                                case 9: {
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            EnumerateOrientations$1: function (requiredIndegree) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (requiredIndegree) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        gain,
                        $t,
                        inNeighborList,
                        adjacent,
                        directed,
                        i,
                        v,
                        $t1,
                        w,
                        outNeighbors,
                        $t2,
                        w1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        gain = System.Array.init(this.N, 0, System.Int32);

                                            $t = Bridge.getEnumerator(this.EnumerateOrientationsFor(0, requiredIndegree, gain), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                inNeighborList = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                                            directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                                            for (i = 0; i < inNeighborList.Count; i = (i + 1) | 0) {
                                                v = (((inNeighborList.Count - 1) | 0) - i) | 0;

                                                $t1 = Bridge.getEnumerator(inNeighborList.getItem(i));
                                                try {
                                                    while ($t1.moveNext()) {
                                                        w = $t1.Current;
                                                        adjacent.set([v, w], true);
                                                        adjacent.set([w, v], true);

                                                        directed.set([w, v], true);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t1, System.IDisposable)) {
                                                        $t1.System$IDisposable$dispose();
                                                    }
                                                }
                                                outNeighbors = Algorithms.Utility.ListUtility.Difference(System.Int32, this._laterNeighbors.Value.getItem(v), inNeighborList.getItem(i));

                                                $t2 = Bridge.getEnumerator(outNeighbors);
                                                try {
                                                    while ($t2.moveNext()) {
                                                        w1 = $t2.Current;
                                                        adjacent.set([v, w1], true);
                                                        adjacent.set([w1, v], true);

                                                        directed.set([v, w1], true);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t2, System.IDisposable)) {
                                                        $t2.System$IDisposable$dispose();
                                                    }
                                                }}

                                            $enumerator.current = new Algorithms.Graph.$ctor1(this.GetEdgeWeights$1(adjacent, directed));
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            EnumerateOrientations: function (fast) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (fast) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        undirectedWeights,
                        edgeIndices,
                        undirected,
                        $t,
                        list,
                        weights,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (fast === void 0) { fast = false; }
                                            undirectedWeights = System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f31).toList(System.Int32);
                                            edgeIndices = System.Linq.Enumerable.from(undirectedWeights).select($asm.$.Algorithms.Graph.f32).where($asm.$.Algorithms.Graph.f33).toList(System.Int32);

                                            undirected = new Algorithms.Graph.$ctor1(undirectedWeights);

                                            $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, edgeIndices), System.Collections.Generic.List$1(System.Int32));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                list = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        weights = System.Linq.Enumerable.from(undirectedWeights).select((function ($me, list) {
                                                    return function (w, i) {
                                                        return list.contains(i) ? ((-w) | 0) : w;
                                                    };
                                                })(this, list)).toList(System.Int32);

                                            $enumerator.current = new Algorithms.Graph.$ctor1(weights);
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            EnumerateOrientationsFor: function (v, requiredIndegree, gain) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (v, requiredIndegree, gain) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        $t,
                        ins,
                        outs,
                        $t1,
                        x,
                        $t2,
                        o,
                        $t3,
                        x1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (v >= ((this.N - 1) | 0)) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 6;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        if (gain[System.Array.index(v, gain)] < requiredIndegree(v)) {
                                                $step = 2;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 2: {
                                        return false;
                                    }
                                    case 3: {
                                        $enumerator.current = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $step = 4;
                                            return true;
                                    }
                                    case 4: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $step = 14;
                                        continue;
                                    }
                                    case 6: {
                                        $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, this._laterNeighbors.Value.getItem(v)), System.Collections.Generic.List$1(System.Int32));
                                            $step = 7;
                                            continue;
                                    }
                                    case 7: {
                                        if ($t.moveNext()) {
                                                ins = $t.Current;
                                                $step = 8;
                                                continue;
                                            }
                                        $step = 13;
                                        continue;
                                    }
                                    case 8: {
                                        if (ins.Count < ((requiredIndegree(v) - gain[System.Array.index(v, gain)]) | 0)) {
                                                $step = 7;
                                                continue;
                                            }

                                            outs = Algorithms.Utility.ListUtility.Difference(System.Int32, this._laterNeighbors.Value.getItem(v), ins);

                                            $t1 = Bridge.getEnumerator(outs);
                                            try {
                                                while ($t1.moveNext()) {
                                                    x = $t1.Current;
                                                    gain[System.Array.index(x, gain)] = (gain[System.Array.index(x, gain)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t1, System.IDisposable)) {
                                                    $t1.System$IDisposable$dispose();
                                                }
                                            }
                                            $t2 = Bridge.getEnumerator(this.EnumerateOrientationsFor(((v + 1) | 0), requiredIndegree, gain), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                            $step = 9;
                                            continue;
                                    }
                                    case 9: {
                                        if ($t2.moveNext()) {
                                                o = $t2.Current;
                                                $step = 10;
                                                continue;
                                            }
                                        $step = 12;
                                        continue;
                                    }
                                    case 10: {
                                        o.add(ins);

                                            $enumerator.current = o;
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 9;
                                        continue;
                                    }
                                    case 12: {
                                        $t3 = Bridge.getEnumerator(outs);
                                            try {
                                                while ($t3.moveNext()) {
                                                    x1 = $t3.Current;
                                                    gain[System.Array.index(x1, gain)] = (gain[System.Array.index(x1, gain)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t3, System.IDisposable)) {
                                                    $t3.System$IDisposable$dispose();
                                                }
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 13: {
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            GenerateRandomOrientation: function () {
                var $t;
                var undirectedWeights = System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f31).toList(System.Int32);
                var edgeIndices = System.Linq.Enumerable.from(undirectedWeights).select($asm.$.Algorithms.Graph.f32).where($asm.$.Algorithms.Graph.f33).toList(System.Int32);

                var list = new (System.Collections.Generic.List$1(System.Int32))(((Bridge.Int.div(this.E, 2)) | 0));
                $t = Bridge.getEnumerator(edgeIndices);
                try {
                    while ($t.moveNext()) {
                        var i = $t.Current;
                        if (Algorithms.Graph.RNG.next$1(2) === 0) {
                            list.add(i);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var weights = System.Linq.Enumerable.from(undirectedWeights).select(function (w, i1) {
                        return list.contains(i1) ? ((-w) | 0) : w;
                    }).toList(System.Int32);

                return new Algorithms.Graph.$ctor1(weights);
            },
            EnumerateAcyclicOrientations: function () {
                return this.EnumerateAcyclicOrientations$1(0, new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))());
            },
            EnumerateAcyclicOrientations$1: function (i, outNeighbors) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (i, outNeighbors) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        neighbors,
                        clone,
                        $t,
                        g,
                        sortedNeighbors,
                        $t1,
                        d,
                        clone1,
                        $t2,
                        v,
                        $t3,
                        g1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (i >= this.N) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        $enumerator.current = this.FromOutNeighborLists(outNeighbors);
                                            $step = 2;
                                            return true;
                                    }
                                    case 2: {
                                        $step = 18;
                                        continue;
                                    }
                                    case 3: {
                                        neighbors = this.NeighborsInSubgraph(i, System.Linq.Enumerable.range(0, i).toList(System.Int32));
                                            if (neighbors.Count <= 0) {
                                                $step = 4;
                                                continue;
                                            } else  {
                                                $step = 9;
                                                continue;
                                            }
                                    }
                                    case 4: {
                                        clone = this.CloneOutNeighbors(outNeighbors);

                                            clone.set(i, new (System.Collections.Generic.List$1(System.Int32))());
                                            $t = Bridge.getEnumerator(this.EnumerateAcyclicOrientations$1(((i + 1) | 0), clone), Algorithms.Graph);
                                            $step = 5;
                                            continue;
                                    }
                                    case 5: {
                                        if ($t.moveNext()) {
                                                g = $t.Current;
                                                $step = 6;
                                                continue;
                                            }
                                        $step = 8;
                                        continue;
                                    }
                                    case 6: {
                                        $enumerator.current = g;
                                            $step = 7;
                                            return true;
                                    }
                                    case 7: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 17;
                                        continue;
                                    }
                                    case 9: {
                                        sortedNeighbors = this.TopologicalSort(i, neighbors, outNeighbors);
                                            $t1 = Bridge.getEnumerator(this.EnumerateLegalDirectionAssignments(i, sortedNeighbors, outNeighbors), System.Int64);
                                            $step = 10;
                                            continue;
                                    }
                                    case 10: {
                                        if ($t1.moveNext()) {
                                                d = $t1.Current;
                                                $step = 11;
                                                continue;
                                            }
                                        $step = 16;
                                        continue;
                                    }
                                    case 11: {
                                        clone1 = this.CloneOutNeighbors(outNeighbors);

                                            clone1.set(i, System.Linq.Enumerable.from(Algorithms.Int64Usage.EnumerateBits(d)).select(function (b) {
                                                    return sortedNeighbors.getItem(((((sortedNeighbors.Count - 1) | 0) - b) | 0));
                                                }).toList(System.Int32));
                                            $t2 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.Difference(System.Int32, neighbors, clone1.get(i)));
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    clone1.get(v).add(i);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            $t3 = Bridge.getEnumerator(this.EnumerateAcyclicOrientations$1(((i + 1) | 0), clone1), Algorithms.Graph);
                                            $step = 12;
                                            continue;
                                    }
                                    case 12: {
                                        if ($t3.moveNext()) {
                                                g1 = $t3.Current;
                                                $step = 13;
                                                continue;
                                            }
                                        $step = 15;
                                        continue;
                                    }
                                    case 13: {
                                        $enumerator.current = g1;
                                            $step = 14;
                                            return true;
                                    }
                                    case 14: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 15: {
                                        $step = 10;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 17;
                                        continue;
                                    }
                                    case 17: {
                                        $step = 18;
                                        continue;
                                    }
                                    case 18: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            CloneOutNeighbors: function (outNeighbors) {
                var $t;
                var clone = new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))();

                $t = Bridge.getEnumerator(outNeighbors);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        clone.set(kvp.key, System.Linq.Enumerable.from(kvp.value).toList(System.Int32));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return clone;
            },
            TopologicalSort: function (i, vertices, outNeighbors) {
                var $t, $t1, $t2;
                var inNeighborCount = System.Array.init(i, 0, System.Int32);
                $t = Bridge.getEnumerator(outNeighbors);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        if (!vertices.contains(kvp.key)) {
                            continue;
                        }

                        $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(kvp.value).intersect(vertices));
                        try {
                            while ($t1.moveNext()) {
                                var v = $t1.Current;
                                inNeighborCount[System.Array.index(v, inNeighborCount)] = (inNeighborCount[System.Array.index(v, inNeighborCount)] + 1) | 0;
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var sorted = new (System.Collections.Generic.List$1(System.Int32))(i);
                var sources = System.Linq.Enumerable.from(vertices).where(function (v1) {
                        return inNeighborCount[System.Array.index(v1, inNeighborCount)] === 0;
                    }).toList(System.Int32);

                while (sources.Count > 0) {
                    var source = sources.getItem(((sources.Count - 1) | 0));
                    sources.removeAt(((sources.Count - 1) | 0));

                    sorted.add(source);
                    $t2 = Bridge.getEnumerator(System.Linq.Enumerable.from(outNeighbors.get(source)).intersect(vertices));
                    try {
                        while ($t2.moveNext()) {
                            var v1 = $t2.Current;
                            inNeighborCount[System.Array.index(v1, inNeighborCount)] = (inNeighborCount[System.Array.index(v1, inNeighborCount)] - 1) | 0;
                            if (inNeighborCount[System.Array.index(v1, inNeighborCount)] === 0) {
                                sources.add(v1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }}

                return sorted;
            },
            EnumerateLegalDirectionAssignments: function (i, sortedNeighbors, outNeighbors) {
                return new (Bridge.GeneratorEnumerable$1(System.Int64))(Bridge.fn.bind(this, function (i, sortedNeighbors, outNeighbors) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        d,
                        ancestorLists,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int64))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        d = System.Int64(0);

                                            ancestorLists = this.GetAncestorLists(i, outNeighbors);
                                            
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( true ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                    }
                                    case 2: {
                                        $enumerator.current = d;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        if (Algorithms.Int64Usage.AllSet(d, System.Int64(sortedNeighbors.Count))) {
                                                $step = 4;
                                                continue;
                                            }

                                            d = this.Closure(d.add(System.Int64(1)), sortedNeighbors, ancestorLists);

                                            $step = 1;
                                            continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            Closure: function (d, sortedNeighbors, ancestorLists) {
                var $t, $t1;
                var done = false;

                while (!done) {
                    done = true;

                    $t = Bridge.getEnumerator(sortedNeighbors);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            var vBit = (((sortedNeighbors.Count - 1) | 0) - sortedNeighbors.indexOf(v)) | 0;
                            $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(ancestorLists.get(v)).intersect(sortedNeighbors));
                            try {
                                while ($t1.moveNext()) {
                                    var w = $t1.Current;
                                    var wBit = (((sortedNeighbors.Count - 1) | 0) - sortedNeighbors.indexOf(w)) | 0;
                                    if (Algorithms.Int64Usage.IsBitSet(d, System.Int64(wBit)) && !Algorithms.Int64Usage.IsBitSet(d, System.Int64(vBit))) {
                                        d = Algorithms.Int64Usage.SetBit(d, System.Int64(vBit));
                                        done = false;
                                    }
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return d;
            },
            GetAncestorLists: function (i, outNeighbors) {
                var $t;
                var ancestorLists = new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))();

                for (var v = 0; v < i; v = (v + 1) | 0) {
                    ancestorLists.set(v, function (_o16) {
                            _o16.add(v);
                            return _o16;
                        }(new (System.Collections.Generic.List$1(System.Int32))()));
                }

                var done = false;
                while (!done) {
                    done = true;

                    for (var v1 = 0; v1 < i; v1 = (v1 + 1) | 0) {
                        $t = Bridge.getEnumerator(outNeighbors.get(v1));
                        try {
                            while ($t.moveNext()) {
                                var w = $t.Current;
                                if (w >= i) {
                                    continue;
                                }

                                var c = ancestorLists.get(w).Count;
                                ancestorLists.set(w, Algorithms.Utility.ListUtility.Union$1(System.Int32, ancestorLists.get(w), ancestorLists.get(v1)));

                                if (ancestorLists.get(w).Count > c) {
                                    done = false;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                }

                return ancestorLists;
            },
            FindFactors: function () {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(i);

                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (!this._adjacent.get([i, j])) {
                            equivalenceRelation.Relate(i, j);
                        }
                    }
                }

                return equivalenceRelation;
            },
            FindComponents: function () {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(i);

                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            equivalenceRelation.Relate(i, j);
                        }
                    }
                }

                return equivalenceRelation;
            },
            FindComponents$1: function (v) {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(v.getItem(i));

                    for (var j = (i + 1) | 0; j < v.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([v.getItem(i), v.getItem(j)])) {
                            equivalenceRelation.Relate(v.getItem(i), v.getItem(j));
                        }
                    }
                }

                return equivalenceRelation;
            },
            ComputeDiameter: function () {
                var $t, $t1;
                var distance = { };
                var next = { };
                this.FloydWarshall(distance, next);
                var diameter = 0;
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        $t1 = Bridge.getEnumerator(this.Vertices);
                        try {
                            while ($t1.moveNext()) {
                                var w = $t1.Current;
                                if (distance.v.get([v, w]) > diameter) {
                                    diameter = distance.v.get([v, w]);
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return diameter;
            },
            FloydWarshall: function (distance, next) {
                distance.v = System.Array.create(0, null, System.Int32, this.N, this.N);
                next.v = System.Array.create(0, null, System.Int32, this.N, this.N);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        distance.v.set([i, j], 715827882);
                    }
                }

                for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 < this.N; j1 = (j1 + 1) | 0) {
                        if (i1 === j1) {
                            distance.v.set([i1, j1], 0);
                        } else {
                            if (this._adjacent.get([i1, j1])) {
                                /* if (Directed[i, j])
                                   distance[i, j] = 1;

                                if (Directed[j, i])
                                   distance[j, i] = 1;*/

                                distance.v.set([i1, j1], 1);
                                distance.v.set([j1, i1], 1);
                            }
                        }
                    }
                }

                for (var i2 = 0; i2 < this.N; i2 = (i2 + 1) | 0) {
                    for (var j2 = 0; j2 < this.N; j2 = (j2 + 1) | 0) {
                        next.v.set([i2, j2], -1);
                    }
                }

                for (var k = 0; k < this.N; k = (k + 1) | 0) {
                    for (var i3 = 0; i3 < this.N; i3 = (i3 + 1) | 0) {
                        for (var j3 = 0; j3 < this.N; j3 = (j3 + 1) | 0) {
                            if (((distance.v.get([i3, k]) + distance.v.get([k, j3])) | 0) < distance.v.get([i3, j3])) {
                                distance.v.set([i3, j3], (distance.v.get([i3, k]) + distance.v.get([k, j3])) | 0);
                                next.v.set([i3, j3], k);
                            }
                        }
                    }
                }
            },
            FloydWarshallShortestPath: function (v, w, distance, next) {
                if (distance.get([v, w]) === 2147483647) {
                    return null;
                }

                if (next.get([v, w]) === -1) {
                    return System.Array.init([v, w], System.Int32);
                }

                return System.Linq.Enumerable.from(this.FloydWarshallShortestPath(v, next.get([v, w]), distance, next)).union(System.Linq.Enumerable.from(this.FloydWarshallShortestPath(next.get([v, w]), w, distance, next)).skip(1));
            }
        }
    });

    Bridge.define("$AnonymousType$2", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (range, index) {
                this.range = range;
                this.index = index;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$2)) {
                    return false;
                }
                return Bridge.equals(this.range, o.range) && Bridge.equals(this.index, o.index);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196187, this.range, this.index]);
                return h;
            },
            toJSON: function () {
                return {
                    range : this.range,
                    index : this.index
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"index","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_index","t":8,"rt":System.Int32,"fg":"index"},"fn":"index"},{"a":2,"n":"range","t":16,"rt":System.Collections.Generic.IEnumerable$1(System.Int32),"g":{"a":2,"n":"get_range","t":8,"rt":System.Collections.Generic.IEnumerable$1(System.Int32),"fg":"range"},"fn":"range"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.Graph", $asm.$);

    Bridge.apply($asm.$.Algorithms.Graph, {
        f1: function (_o11) {
            _o11.add("cadetblue");
            _o11.add("brown");
            _o11.add("dodgerblue");
            _o11.add("turquoise");
            _o11.add("orchid");
            _o11.add("blue");
            _o11.add("red");
            _o11.add("green");
            _o11.add("yellow");
            _o11.add("cyan");
            _o11.add("limegreen");
            _o11.add("pink");
            _o11.add("orange");
            _o11.add("goldenrod");
            _o11.add("aquamarine");
            _o11.add("black");
            return _o11;
        },
        f2: function (_o12) {
            _o12.add("blue");
            _o12.add("red");
            _o12.add("green");
            _o12.add("Orchid");
            _o12.add("yellow");
            _o12.add("cyan");
            _o12.add("Turquoise");
            _o12.add("CadetBlue");
            _o12.add("LimeGreen");
            _o12.add("brown");
            _o12.add("pink");
            _o12.add("orange");
            _o12.add("Cerulean");
            _o12.add("Goldenrod");
            _o12.add("Aquamarine");
            _o12.add("black");
            return _o12;
        },
        f3: function () {
            var e = 0;

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i, j])) {
                        e = (e + 1) | 0;
                    }
                }
            }

            return e;
        },
        f4: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j])) {
                        neighbors.getItem(i1).add(j);
                    }
                }
            }

            return neighbors;
        },
        f5: function () {
            var nn = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                nn.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (i1 !== j && !this._adjacent.get([i1, j])) {
                        nn.getItem(i1).add(j);
                    }
                }
            }

            return nn;
        },
        f6: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j]) && this.Directed.get([i1, j])) {
                        neighbors.getItem(i1).add(j);
                    }
                }
            }

            return neighbors;
        },
        f7: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j]) && this.Directed.get([i1, j])) {
                        neighbors.getItem(j).add(i1);
                    }
                }
            }

            return neighbors;
        },
        f8: function () {
            var later = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(this.Neighbors.Count);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                later.add(System.Linq.Enumerable.from(this.Neighbors.getItem(i)).where(function (n) {
                        return n > i;
                    }).toList(System.Int32));
            }

            return later;
        },
        f9: function () {
            return System.Linq.Enumerable.from(this.IndependentSetsInSubgraph(0)).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f10: function (set) {
            return set.Count === 2;
        },
        f11: function () {
            return System.Linq.Enumerable.from(this._independentSets.Value).where($asm.$.Algorithms.Graph.f10).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f12: function (set) {
            return set.Count === 3;
        },
        f13: function () {
            return System.Linq.Enumerable.from(this._independentSets.Value).where($asm.$.Algorithms.Graph.f12).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f14: function () {
            return Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, this._vertices);
        },
        f15: function () {
            return Algorithms.Utility.ListUtility.MaximalElements(System.Int32, this._independentSets.Value);
        },
        f16: function (x) {
            return x.toString();
        },
        f17: function (_, __, ___, ____) {
            return true;
        },
        f18: function (t) {
            return t;
        },
        f19: function (r, i) {
            return new $asm.$AnonymousType$2(r, i);
        },
        f20: function (i, j) {
            return { item1: i, item2: j };
        },
        f21: function (vertices) {
            return this.IsProperFactor(vertices);
        },
        f22: function (_o13) {
            _o13.add(this.Clone());
            return _o13;
        },
        f23: function (n) {
            return n.Count === this.Neighbors.getItem(0).Count;
        },
        f24: function (_o14) {
            _o14.add(new (System.Collections.Generic.List$1(System.Int32))());
            return _o14;
        },
        f25: function (c) {
            return c.ne(System.Int64(0));
        },
        f26: function (v) {
            return this.Degree(v);
        },
        f27: function (v, i) {
        return v > 0 ? i : -1;
    },
        f28: function (i) {
        return i >= 0;
    },
        f29: function (v1, i) {
        return v1 > 0 ? i : -1;
    },
        f30: function (v1) {
        return v1 > 0;
    },
        f31: function (w) {
            return Math.abs(w);
        },
        f32: function (w, i) {
            return w !== 0 ? i : -1;
        },
        f33: function (x) {
            return x > 0;
        }
    });

    Bridge.define("Algorithms.Graphs", {
        statics: {
            props: {
                Diamond: {
                    get: function () {
                        return Algorithms.Graph.op_Multiply(Algorithms.Graphs.E(2), Algorithms.Graphs.K(2));
                    }
                },
                Bull: {
                    get: function () {
                        return Algorithms.Graphs.K(3).AttachNewVertex$1([1]).AttachNewVertex$1([2]);
                    }
                },
                Kite: {
                    get: function () {
                        return Algorithms.Graphs.Diamond.AttachNewVertex$1([1]);
                    }
                },
                Dart: {
                    get: function () {
                        return Algorithms.Graphs.Diamond.AttachNewVertex$1([2]);
                    }
                },
                Chair: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AttachNewVertex$1([2]);
                    }
                },
                Empty: {
                    get: function () {
                        return new Algorithms.Graph.ctor(System.Array.create(false, null, System.Boolean, 0, 0));
                    }
                },
                Paw: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AddEdge(0, 2);
                    }
                },
                H: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AttachNewVertex$1([1]).AttachNewVertex$1([2]);
                    }
                }
            },
            methods: {
                E: function (n) {
                    return new Algorithms.Graph.ctor(System.Array.create(false, null, System.Boolean, n, n));
                },
                K: function (n) {
                    return Algorithms.Graphs.E(n).Complement();
                },
                P: function (n) {
                    var G = Algorithms.Graphs.E(n);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        G = G.AddEdge(i, ((i + 1) | 0));
                    }

                    return G;
                },
                Star: function (n) {
                    var G = Algorithms.Graphs.E(n);
                    for (var i = 1; i < n; i = (i + 1) | 0) {
                        G = G.AddEdge(0, i);
                    }

                    return G;
                },
                C: function (n) {
                    return Algorithms.Graphs.P(n).AddEdge(((n - 1) | 0), 0);
                }
            }
        }
    });

    Bridge.define("Algorithms.HashGraph", {
        fields: {
            _values: null,
            _outMinusIn: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (g, outMinusIn) {
                this.$initialize();                var $t;

                this._values = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(g.N, (((g.N - 1) | 0))), 2)) | 0), 0, System.Byte);
                this._outMinusIn = outMinusIn;

                var k = 0;
                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        var value = (g.getItem(i, j) ? 1 : 0) & 255;
                        this._values[System.Array.index(k, this._values)] = value;

                        if (g.getItem(i, j)) {
                            this._hashCode = (this._hashCode + (1 << (k % 32))) | 0;
                        }

                        k = (k + 1) | 0;
                    }
                }

                $t = Bridge.getEnumerator(outMinusIn);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.HashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._outMinusIn).sequenceEqual(other._outMinusIn) && System.Linq.Enumerable.from(this._values).sequenceEqual(other._values);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.HereditaryClassEnumeration", {
        statics: {
            fields: {
                _sizeComparer: null
            },
            ctors: {
                init: function () {
                    this._sizeComparer = new Algorithms.HereditaryClassEnumeration.SizeComparer();
                }
            },
            methods: {
                EnumerateClass: function (excluded) {
                    if (excluded === void 0) { excluded = []; }
                    return Algorithms.HereditaryClassEnumeration.EnumerateClass$1(System.Linq.Enumerable.from(excluded).toList(Algorithms.Graph));
                },
                EnumerateClass$1: function (excluded, maxVertices) {
                    return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (excluded, maxVertices) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            lastLevel,
                            currentLevel,
                            $t,
                            G,
                            neighborSets,
                            $t1,
                            neighborSet,
                            H,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (maxVertices === void 0) { maxVertices = 2147483647; }
                                                excluded.sort($asm.$.Algorithms.HereditaryClassEnumeration.f1);

                                                if (excluded.Count > 0 && excluded.getItem(0).N <= 1) {
                                                    $step = 1;
                                                    continue;
                                                } 
                                                $step = 2;
                                                continue;
                                        }
                                        case 1: {
                                            return false;
                                        }
                                        case 2: {
                                            $enumerator.current = new Algorithms.Graph.$ctor1(new (System.Collections.Generic.List$1(System.Int32))());
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            lastLevel = $asm.$.Algorithms.HereditaryClassEnumeration.f2(new (System.Collections.Generic.List$1(Algorithms.Graph))());

                                                
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            if ( lastLevel.Count > 0 ) {
                                                    $step = 5;
                                                    continue;
                                                } 
                                                $step = 15;
                                                continue;
                                        }
                                        case 5: {
                                            currentLevel = new (System.Collections.Generic.List$1(Algorithms.Graph))();

                                                $t = Bridge.getEnumerator(lastLevel);
                                                $step = 6;
                                                continue;
                                        }
                                        case 6: {
                                            if ($t.moveNext()) {
                                                    G = $t.Current;
                                                    $step = 7;
                                                    continue;
                                                }
                                            $step = 12;
                                            continue;
                                        }
                                        case 7: {
                                            if (G.IsComplete()) {
                                                    neighborSets = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, System.Linq.Enumerable.range(0, G.N).toList(System.Int32))).distinct(Algorithms.HereditaryClassEnumeration._sizeComparer).toList(System.Collections.Generic.List$1(System.Int32));
                                                } else {
                                                    neighborSets = Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, System.Linq.Enumerable.range(0, G.N).toList(System.Int32));
                                                }

                                                $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(neighborSets).where($asm.$.Algorithms.HereditaryClassEnumeration.f3));
                                                $step = 8;
                                                continue;
                                        }
                                        case 8: {
                                            if ($t1.moveNext()) {
                                                    neighborSet = $t1.Current;
                                                    $step = 9;
                                                    continue;
                                                }
                                            $step = 11;
                                            continue;
                                        }
                                        case 9: {
                                            H = { v : G.AttachNewVertex(neighborSet) };

                                                if (System.Linq.Enumerable.from(currentLevel).any((function ($me, H) {
                                                        return function (W) {
                                                            return Algorithms.Graph.Isomorphic(H.v, W);
                                                        };
                                                    })(this, H))) {
                                                    $step = 8;
                                                    continue;
                                                }
                                                if (System.Linq.Enumerable.from(excluded).any((function ($me, H) {
                                                        return function (W) {
                                                            return H.v.ContainsInduced(W);
                                                        };
                                                    })(this, H))) {
                                                    $step = 8;
                                                    continue;
                                                }

                                                currentLevel.add(H.v);
                                                $enumerator.current = H.v;
                                                $step = 10;
                                                return true;
                                        }
                                        case 10: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 11: {
                                            $step = 6;
                                            continue;
                                        }
                                        case 12: {
                                            if (currentLevel.Count > 0 && currentLevel.getItem(0).N >= maxVertices) {
                                                    $step = 13;
                                                    continue;
                                                } 
                                                $step = 14;
                                                continue;
                                        }
                                        case 13: {
                                            return false;
                                        }
                                        case 14: {
                                            lastLevel = currentLevel;

                                                $step = 4;
                                                continue;
                                        }
                                        case 15: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("Algorithms.HereditaryClassEnumeration", $asm.$);

    Bridge.apply($asm.$.Algorithms.HereditaryClassEnumeration, {
        f1: function (g1, g2) {
            return Bridge.compare(g1.N, g2.N);
        },
        f2: function (_o17) {
            _o17.add(new Algorithms.Graph.$ctor1(new (System.Collections.Generic.List$1(System.Int32))()));
            return _o17;
        },
        f3: function (l) {
            return l.Count > 0;
        }
    });

    Bridge.define("Algorithms.HereditaryClassEnumeration.SizeComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(System.Int32))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return x.Count === y.Count;
            },
            getHashCode2: function (obj) {
                return Bridge.getHashCode(obj.Count);
            }
        }
    });

    Bridge.define("Algorithms.Hypergraph$1", function (T) { return {
        fields: {
            _listComparer: null
        },
        props: {
            E: null
        },
        ctors: {
            init: function () {
                this._listComparer = new (Algorithms.Hypergraph$1.SortedListComparer(T))();
            },
            ctor: function (edges) {
                if (edges === void 0) { edges = null; }

                this.$initialize();                var $t;

                if (edges != null) {
                    $t = Bridge.getEnumerator(edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            e.sort();
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }this.E = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(T))).$ctor2(edges, this._listComparer);
                } else {
                    this.E = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(T))).$ctor3(this._listComparer);
                }
        }
    },
    methods: {
        Min: function () {
            var $t;
            var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

            $t = Bridge.getEnumerator(this.E);
            try {
                while ($t.moveNext()) {
                    var set = $t.Current;
                    var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                        return function (head) {
                            return Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, set, head);
                        };
                    })(this, set), $asm.$.Algorithms.Hypergraph$1.f1);
                    if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                            return function (head) {
                                return !Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, head, set);
                            };
                        })(this, set))) {
                        chainHeads.add(set);
                    }
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            return new (Algorithms.Hypergraph$1(T))(chainHeads);
        },
        Tr: function () {
            var $t;
            var H = new (Algorithms.Hypergraph$1(T))(function (_o18) {
                    _o18.add(new (System.Collections.Generic.List$1(T))());
                    return _o18;
                }(new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))()));

            $t = Bridge.getEnumerator(this.E);
            try {
                while ($t.moveNext()) {
                    var e = $t.Current;
                    H = H.Product(this.EdgeHypergraph(e)).Min();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            return H;
        },
        EdgeHypergraph: function (e) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(e).select(function (v) {
                    return Algorithms.GenericExtensions.EnList(T, v);
                }).toList(System.Collections.Generic.List$1(T)));
        },
        Union: function (other) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(this.E).union(other.E).toList(System.Collections.Generic.List$1(T)));
        },
        Product: function (other) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(this.E).selectMany(function (e_i) {
                    return System.Linq.Enumerable.from(other.E).select(function (e_j) {
                            return Algorithms.Utility.ListUtility.Union$1(T, e_i, e_j);
                        }).toList(System.Collections.Generic.List$1(T));
                }).toList(System.Collections.Generic.List$1(T)));
        }
    }
    }; });

    Bridge.ns("Algorithms.Hypergraph$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Hypergraph$1, {
        f1: function (x) { }
    });

    Bridge.define("Algorithms.Hypergraph$1.SortedListComparer", function (T) { return {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(T))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$" + Bridge.getTypeAlias(T) + "$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$" + Bridge.getTypeAlias(T) + "$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (list) {
                var $t;
                var hash = 19;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 31) | 0) + Bridge.getHashCode(x)) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    }; });

    Bridge.define("Algorithms.IndependenceRatio.MinorFinder", {
        statics: {
            methods: {
                FindWithJ: function (g, J) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Object)))(Bridge.fn.bind(this, function (g, J) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            triple,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Object)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (J.Count !== 3) {
                                                    $step = 1;
                                                    continue;
                                                } 
                                                $step = 2;
                                                continue;
                                        }
                                        case 1: {
                                            return false;
                                        }
                                        case 2: {
                                            $t = Bridge.getEnumerator(Algorithms.IndependenceRatio.MinorFinder.EnumerateConnectedThreePartPartitions(g, J), System.Object);
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    triple = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item3, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item1, triple.item2) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, triple.item2), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item1, triple.item3) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, triple.item3), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item2, triple.item3) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, triple.item2), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                $enumerator.current = (function ($me, triple) {
                                                        return function (_o19) {
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item1).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, J)) });
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item2).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, J)) });
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item3).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item3, J)) });
                                                            return _o19;
                                                        };
                                                    })(this, triple)(new (System.Collections.Generic.List$1(System.Object))());
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateConnectedThreePartPartitions: function (g, J) {
                    return new (Bridge.GeneratorEnumerable$1(System.Object))(Bridge.fn.bind(this, function (g, J) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            rest,
                            $t,
                            first,
                            rest2,
                            $t1,
                            second,
                            third,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Object))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            rest = System.Linq.Enumerable.from(g.Vertices).except(J).toList(System.Int32);
                                                Algorithms.GenericExtensions.Shuffle(System.Int32, rest);
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, rest), System.Collections.Generic.List$1(System.Int32));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    first = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 7;
                                            continue;
                                        }
                                        case 2: {
                                            first.add(J.getItem(0));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(first).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                rest2 = System.Linq.Enumerable.from(rest).except(first).toList(System.Int32);
                                                $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, rest2), System.Collections.Generic.List$1(System.Int32));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t1.moveNext()) {
                                                    second = $t1.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            second.add(J.getItem(1));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(second).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                third = System.Linq.Enumerable.from(rest2).except(second).toList(System.Int32);
                                                third.add(J.getItem(2));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(third).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                $enumerator.current = { item1: first, item2: second, item3: third };
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 7: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.Int32Usage", {
        statics: {
            fields: {
                DeBruijnMultiplier: 0,
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = 125613361;
                    this.DeBruijnLookup = System.Array.init([0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8, 31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9], System.Int32);
                }
            },
            methods: {
                LeastSignificantBit: function (x) {
                    return Algorithms.Int32Usage.DeBruijnLookup[System.Array.index((((((x & ((-x) | 0))) >>> 0) * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = x.v & ((-x.v) | 0);
                    x.v = x.v ^ m;
                    return Algorithms.Int32Usage.DeBruijnLookup[System.Array.index((((m >>> 0) * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b > 0) {
                        q = (q + 1) | 0;
                        b = (b & (((b - 1) >>> 0))) >>> 0;
                    }
                    return q;
                },
                ToSet: function (x) {
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x !== 0) {
                        var lsb = (x & (((0 - x) >>> 0))) >>> 0;
                        onBits.add(Algorithms.Int32Usage.DeBruijnLookup[System.Array.index(((lsb * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)]);

                        x = (x ^ lsb) >>> 0;
                    }

                    return onBits;
                }
            }
        }
    });

    Bridge.define("Algorithms.Int64Usage", {
        statics: {
            fields: {
                DeBruijnMultiplier: System.UInt64(0),
                DeBruijnLookup: null,
                BitMask: null,
                NotBitMask: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = System.UInt64(System.Int64([-1706153790,133027301]));
                    this.DeBruijnLookup = System.Array.init([
                        63, 
                        0, 
                        58, 
                        1, 
                        59, 
                        47, 
                        53, 
                        2, 
                        60, 
                        39, 
                        48, 
                        27, 
                        54, 
                        33, 
                        42, 
                        3, 
                        61, 
                        51, 
                        37, 
                        40, 
                        49, 
                        18, 
                        28, 
                        20, 
                        55, 
                        30, 
                        34, 
                        11, 
                        43, 
                        14, 
                        22, 
                        4, 
                        62, 
                        57, 
                        46, 
                        52, 
                        38, 
                        26, 
                        32, 
                        41, 
                        50, 
                        36, 
                        17, 
                        19, 
                        29, 
                        10, 
                        13, 
                        21, 
                        56, 
                        45, 
                        25, 
                        31, 
                        35, 
                        16, 
                        9, 
                        12, 
                        44, 
                        24, 
                        15, 
                        8, 
                        23, 
                        7, 
                        6, 
                        5
                    ], System.Int32);
                    this.BitMask = System.Array.init(64, System.Int64(0), System.Int64);
                    this.NotBitMask = System.Array.init(64, System.Int64(0), System.Int64);
                },
                ctor: function () {
                    var $t;
                    $t = Bridge.getEnumerator(System.Linq.Enumerable.range(0, 64));
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)] = (System.Int64(1)).shl(bit);
                            Algorithms.Int64Usage.NotBitMask[System.Array.index(bit, Algorithms.Int64Usage.NotBitMask)] = ((System.Int64(1)).shl(bit)).not();
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}
        },
        methods: {
            GeneratePairMasks: function (n) {
                var maskMap = new (System.Collections.Generic.Dictionary$2(System.Int64,System.Int64))();

                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        maskMap.set(Algorithms.Int64Usage.BitMask[System.Array.index(i, Algorithms.Int64Usage.BitMask)].or(Algorithms.Int64Usage.BitMask[System.Array.index(j, Algorithms.Int64Usage.BitMask)]), Algorithms.Int64Usage.BitMask[System.Array.index(j, Algorithms.Int64Usage.BitMask)]);
                    }
                }

                return maskMap;
            },
            ClearBit: function (x, bit) {
                return x.and(Algorithms.Int64Usage.NotBitMask[System.Array.index(bit, Algorithms.Int64Usage.NotBitMask)]);
            },
            SetBit: function (x, bit) {
                return x.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
            },
            IsBitSet: function (x, bit) {
                return (x.and(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)])).ne(System.Int64(0));
            },
            FlipBits: function (x, bit) {
                return x.xor(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
            },
            FlipBits$1: function (x, bit1, bit2) {
                return x.xor((Algorithms.Int64Usage.BitMask[System.Array.index(bit1, Algorithms.Int64Usage.BitMask)].or(Algorithms.Int64Usage.BitMask[System.Array.index(bit2, Algorithms.Int64Usage.BitMask)])));
            },
            FlipBits$2: function (x, bits) {
                var $t;
                if (bits === void 0) { bits = []; }
                if (bits == null) {
                    return x;
                }

                var mask = System.Int64(0);
                $t = Bridge.getEnumerator(bits);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        mask = mask.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return x.xor(mask);
            },
            LeastSignificantBit: function (b) {
                return Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(System.Int64.clipu64((b.and(b.neg()))).mul(Algorithms.Int64Usage.DeBruijnMultiplier).shru(58), Algorithms.Int64Usage.DeBruijnLookup)];
            },
            GetAndClearLeastSignificantBit: function (x) {
                var m = x.v.and(x.v.neg());
                x.v = x.v.xor(m);
                return Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(m).mul(Algorithms.Int64Usage.DeBruijnMultiplier)).shru(58)), Algorithms.Int64Usage.DeBruijnLookup)];
            },
            PopulationCount: function (b) {
                var q = 0;
                while (b.gt(System.Int64(0))) {
                    q = (q + 1) | 0;
                    b = b.and((b.sub(System.Int64(1))));
                }
                return q;
            },
            PopulationCount$1: function (x) {
                var k1 = System.UInt64([1431655765,1431655765]);
                var k2 = System.UInt64([858993459,858993459]);
                var k4 = System.UInt64([252645135,252645135]);
                x = x.sub(((x.shru(1)).and(k1)));
                x = (x.and(k2)).add(((x.shru(2)).and(k2)));
                x = (x.add((x.shru(4)))).and(k4);
                x = (x.mul(System.UInt64([16843009,16843009]))).shru(56);
                return System.Int64.clip32(x);
            },
            RightFillToMSB: function (x) {
                x = x.or((x.shru(1)));
                x = x.or((x.shru(2)));
                x = x.or((x.shru(4)));
                x = x.or((x.shru(8)));
                x = x.or((x.shru(16)));
                x = x.or((x.shru(32)));

                return x;
            },
            ToBitString: function (x, length) {
                if (length === void 0) { length = 64; }
                return Bridge.toArray(System.Linq.Enumerable.range(0, length).select(function (bit) {
                        return Algorithms.Int64Usage.IsBitSet(x, System.Int64(bit)) ? "1" : "0";
                    })).join("");
            },
            ToSet: function (x) {
                x = {v:x};
                var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                while (x.v.ne(System.Int64(0))) {
                    onBits.add(Algorithms.Int64Usage.GetAndClearLeastSignificantBit(x));
                }

                return onBits;
            },
            ToSet$1: function (x) {
                var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                while (x.ne(System.UInt64(0))) {
                    var lsb = x.and((System.UInt64(0).sub(x)));
                    onBits.add(Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(lsb.mul(Algorithms.Int64Usage.DeBruijnMultiplier).shru(58), Algorithms.Int64Usage.DeBruijnLookup)]);

                    x = x.xor(lsb);
                }

                return onBits;
            },
            EnumerateBits: function (x) {
                return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (x) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        lsb,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        x = {v:x};
                                            
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( x.v.ne(System.Int64(0)) ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                    }
                                    case 2: {
                                        lsb = Algorithms.Int64Usage.GetAndClearLeastSignificantBit(x);
                                            $enumerator.current = lsb;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        
                                            $step = 1;
                                            continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            ToInt64$1: function (bits) {
                var $t;
                if (bits === void 0) { bits = []; }
                var total = System.Int64(0);
                $t = Bridge.getEnumerator(bits);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ToInt64: function (set) {
                var $t;
                var total = System.Int64(0);
                $t = Bridge.getEnumerator(set, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ToUInt64: function (set) {
                var $t;
                var total = System.UInt64(0);
                $t = Bridge.getEnumerator(set, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or((System.UInt64(1).shl(bit)));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ExpandIntoLists: function (xs) {
                return System.Linq.Enumerable.from(xs).select($asm.$.Algorithms.Int64Usage.f1).toList(System.Collections.Generic.List$1(System.Int32));
            },
            ToSetString$2: function (x) {
                return Algorithms.Int64Usage.ToSetString(Algorithms.Int64Usage.ToSet(x));
            },
            ToSetString$1: function (list) {
                return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(list).select($asm.$.Algorithms.Int64Usage.f2)).join(", "), "}");
            },
            ToSetString: function (list) {
                return System.String.concat("{", Bridge.toArray(list).join(", "), "}");
            },
            ToSetStringSmall: function (x) {
                return [Bridge.toArray(Algorithms.Int64Usage.ToSet(x)).join("")].join("|");
            },
            AllSet: function (x, i) {
                return Algorithms.Int64Usage.IsBitSet((x.xor((x.add(System.Int64(1))))), System.Int64(i));
            },
            GetBits: function (x) {
                var setBits = new (System.Collections.Generic.List$1(System.Int64))();

                while (x.ne(System.Int64(0))) {
                    var lsb = x.and(x.neg());

                    setBits.add(lsb);

                    x = x.xor(lsb);
                }

                return setBits;
            },
            GetBits$1: function (x) {
                var setBits = new (System.Collections.Generic.List$1(System.UInt64))(16);

                while (x.ne(System.UInt64(0))) {
                    var lsb = x.and((System.UInt64(0).sub(x)));
                    setBits.add(lsb);
                    x = x.xor(lsb);
                }

                return setBits;
            }
        }
    }
    });

    Bridge.ns("Algorithms.Int64Usage", $asm.$);

    Bridge.apply($asm.$.Algorithms.Int64Usage, {
        f1: function (x) {
            return System.Linq.Enumerable.from(Algorithms.Int64Usage.ToSet(x)).toList(System.Int32);
        },
        f2: function (l) {
            return Algorithms.Int64Usage.ToSetString$2(l);
        }
    });

    Bridge.define("Algorithms.Lazy$1", function (T) { return {
        statics: {
            methods: {
                op_Implicit: function (da) {
                    return da.Value;
                }
            }
        },
        fields: {
            _creator: null,
            _value: null,
            _token: null
        },
        props: {
            Value: {
                get: function () {
                    if (this._value == null) {
                        this._token;
                        {
                            if (this._value == null) {
                                this._value = this._creator();
                            }
                        }
                    }

                    return this._value;
                }
            }
        },
        ctors: {
            init: function () {
                this._value = Bridge.getDefaultValue(T);
                this._token = {  };
            },
            ctor: function (creator) {
                this.$initialize();
                this._creator = creator;
            },
            $ctor1: function (creator, threadSafe) {
                Algorithms.Lazy$1(T).ctor.call(this, creator);
            }
        },
        methods: {
            Forget: function () {
                this._token;
                this._value = Bridge.getDefaultValue(T);
            }
        }
    }; });

    Bridge.define("Algorithms.OneFactorizationsOfCompleteGraph", {
        statics: {
            methods: {
                EnumerateOneFactorizations: function (n) {
                    var list = System.Int64(0);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list.or((System.Int64(1).shl(i)));
                    }

                    var coloring = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(n, (((n - 1) | 0))), 2)) | 0), 0, System.Int32);
                    for (var i1 = 0; i1 < ((n - 1) | 0); i1 = (i1 + 1) | 0) {
                        coloring[System.Array.index(i1, coloring)] = i1;
                    }

                    var lists = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list.xor(System.Int64((1 << (((i2 - 1) | 0)))));
                    }

                    var priorNeighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();


                    return Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(1, 2, n, lists, coloring);
                },
                EnumerateOneFactorizations$1: function (i, j, n, lists, coloring) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function (i, j, n, lists, coloring) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            copy,
                            $t,
                            of,
                            $t1,
                            c,
                            $t2,
                            of1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (i >= n) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            copy = System.Array.init(coloring.length, 0, System.Int32);
                                                System.Array.copy(coloring, 0, copy, 0, coloring.length);
                                                $enumerator.current = copy;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 3: {
                                            if (j >= n) {
                                                    $step = 4;
                                                    continue;
                                                } else  {
                                                    $step = 9;
                                                    continue;
                                                }
                                        }
                                        case 4: {
                                            $t = Bridge.getEnumerator(Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(((i + 1) | 0), ((i + 2) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 5;
                                                continue;
                                        }
                                        case 5: {
                                            if ($t.moveNext()) {
                                                    of = $t.Current;
                                                    $step = 6;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 6: {
                                            $enumerator.current = of;
                                                $step = 7;
                                                return true;
                                        }
                                        case 7: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 8: {
                                            $step = 17;
                                            continue;
                                        }
                                        case 9: {
                                            $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits((lists[System.Array.index(i, lists)].and(lists[System.Array.index(j, lists)]))), System.Int32);
                                                $step = 10;
                                                continue;
                                        }
                                        case 10: {
                                            if ($t1.moveNext()) {
                                                    c = $t1.Current;
                                                    $step = 11;
                                                    continue;
                                                }
                                            $step = 16;
                                            continue;
                                        }
                                        case 11: {
                                            lists[System.Array.index(i, lists)] = Algorithms.Int64Usage.ClearBit(lists[System.Array.index(i, lists)], System.Int64(c));
                                                lists[System.Array.index(j, lists)] = Algorithms.Int64Usage.ClearBit(lists[System.Array.index(j, lists)], System.Int64(c));

                                                coloring[System.Array.index(((((((((Bridge.Int.mul(i, n) - ((Bridge.Int.div(Bridge.Int.mul(i, (((i + 1) | 0))), 2)) | 0)) | 0) + j) | 0) - i) | 0) - 1) | 0), coloring)] = c;
                                                $t2 = Bridge.getEnumerator(Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(i, ((j + 1) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 12;
                                                continue;
                                        }
                                        case 12: {
                                            if ($t2.moveNext()) {
                                                    of1 = $t2.Current;
                                                    $step = 13;
                                                    continue;
                                                }
                                            $step = 15;
                                            continue;
                                        }
                                        case 13: {
                                            $enumerator.current = of1;
                                                $step = 14;
                                                return true;
                                        }
                                        case 14: {
                                            $step = 12;
                                            continue;
                                        }
                                        case 15: {
                                            lists[System.Array.index(i, lists)] = Algorithms.Int64Usage.SetBit(lists[System.Array.index(i, lists)], System.Int64(c));
                                                lists[System.Array.index(j, lists)] = Algorithms.Int64Usage.SetBit(lists[System.Array.index(j, lists)], System.Int64(c));
                                            $step = 10;
                                            continue;
                                        }
                                        case 16: {
                                            $step = 17;
                                            continue;
                                        }
                                        case 17: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 18: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                GetSignSum: function (n, plus, minus, progress) {
                    var $t;
                    plus.v = 0;
                    minus.v = 0;

                    var list = 0;
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list | (1 << i);
                    }

                    var of = System.Array.create(0, null, System.Int32, n, n);
                    for (var i1 = 1; i1 < n; i1 = (i1 + 1) | 0) {
                        of.set([0, i1], ($t = (i1 - 1) | 0, of.set([i1, 0], $t), $t));
                    }

                    var lists = System.Array.init(n, 0, System.Int32);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list ^ (1 << (((i2 - 1) | 0)));
                    }

                    var term = { v : Bridge.Int.mul(n, (((n - 1) | 0))) % 4 === 0 ? 1 : -1 };

                    Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(1, 2, n, lists, of, term, plus, minus, progress);

                    return ((plus.v - minus.v) | 0);
                },
                DoTerm: function (term, plus, minus, progress) {
                    if (term > 0) {
                        plus.v = (plus.v + 1) | 0;
                    } else {
                        minus.v = (minus.v + 1) | 0;
                    }

                    if ((((plus.v + minus.v) | 0)) % 1000000 === 0) {
                        if (!Bridge.staticEquals(progress, null)) {
                            progress(plus.v, minus.v);
                        }
                    }
                },
                DoSignSum: function (i, j, n, lists, of, term, plus, minus, progress) {
                    if (i >= ((n - 1) | 0)) {
                        Algorithms.OneFactorizationsOfCompleteGraph.DoTerm(term.v, plus, minus, progress);
                    } else {
                        var x = lists[System.Array.index(i, lists)] & lists[System.Array.index(j, lists)];
                        while (x !== 0) {
                            var c = x & ((-x) | 0);
                            x = x ^ c;
                            lists[System.Array.index(i, lists)] = lists[System.Array.index(i, lists)] ^ c;
                            lists[System.Array.index(j, lists)] = lists[System.Array.index(j, lists)] ^ c;

                            of.set([i, j], (of.set([j, i], c), c));

                            var factor = 1;
                            for (var k = 0; k < i; k = (k + 1) | 0) {
                                factor = Bridge.Int.mul(factor, (1 | ((((c - of.get([k, j])) | 0)) >> 31)));
                            }
                            for (var k1 = 0; k1 < j; k1 = (k1 + 1) | 0) {
                                factor = Bridge.Int.mul(factor, (1 | ((((c - of.get([i, k1])) | 0)) >> 31)));
                            }

                            term.v = Bridge.Int.mul(term.v, factor);
                            if (j >= ((n - 1) | 0)) {
                                Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(((i + 1) | 0), ((i + 2) | 0), n, lists, of, term, plus, minus, progress);
                            } else {
                                Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(i, ((j + 1) | 0), n, lists, of, term, plus, minus, progress);
                            }
                            term.v = Bridge.Int.mul(term.v, factor);

                            lists[System.Array.index(i, lists)] = lists[System.Array.index(i, lists)] ^ c;
                            lists[System.Array.index(j, lists)] = lists[System.Array.index(j, lists)] ^ c;
                        }
                    }
                }
            }
        }
    });

    Bridge.define("Algorithms.OnFactorizationsOfCompleteGraph", {
        statics: {
            methods: {
                EnumerateOneFactorizations: function (n) {
                    var list = System.Int64(0);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list.or((System.Int64(1).shl(i)));
                    }

                    var coloring = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(n, (((n - 1) | 0))), 2)) | 0), 0, System.Int32);
                    for (var i1 = 0; i1 < ((n - 1) | 0); i1 = (i1 + 1) | 0) {
                        coloring[System.Array.index(i1, coloring)] = i1;
                    }

                    var lists = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list.xor(System.Int64((1 << (((i2 - 1) | 0)))));

                        coloring[System.Array.index(((Bridge.Int.mul(i2, n) - ((Bridge.Int.div(Bridge.Int.mul(i2, (((i2 + 1) | 0))), 2)) | 0)) | 0), coloring)] = (i2 - 1) | 0;
                    }

                    return Algorithms.OnFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(1, 2, n, lists, coloring);
                },
                EnumerateOneFactorizations$1: function (i, j, n, lists, coloring) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function (i, j, n, lists, coloring) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            copy,
                            $t,
                            of,
                            $t1,
                            c,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (i >= n) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            copy = System.Array.init(coloring.length, 0, System.Int32);
                                                System.Array.copy(coloring, 0, copy, 0, coloring.length);
                                                $enumerator.current = copy;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 3: {
                                            if (j >= n) {
                                                    $step = 4;
                                                    continue;
                                                } else  {
                                                    $step = 9;
                                                    continue;
                                                }
                                        }
                                        case 4: {
                                            $t = Bridge.getEnumerator(Algorithms.OnFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(((i + 1) | 0), ((i + 2) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 5;
                                                continue;
                                        }
                                        case 5: {
                                            if ($t.moveNext()) {
                                                    of = $t.Current;
                                                    $step = 6;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 6: {
                                            $enumerator.current = of;
                                                $step = 7;
                                                return true;
                                        }
                                        case 7: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 8: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 9: {
                                            $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits((lists[System.Array.index(i, lists)].and(lists[System.Array.index(j, lists)]))), System.Int32);
                                                try {
                                                    while ($t1.moveNext()) {
                                                        c = $t1.Current;

                                                    }
                                                } finally {
                                                    if (Bridge.is($t1, System.IDisposable)) {
                                                        $t1.System$IDisposable$dispose();
                                                    }
                                                }
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 11: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.OnlineChoiceHashGraph", {
        fields: {
            _f: null,
            _g: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (f, g) {
                this.$initialize();                var $t, $t1;

                this._f = Bridge.cast(System.Array.clone(f), System.Array.type(System.Int32));
                this._g = Bridge.cast(System.Array.clone(g), System.Array.type(System.Int32));

                for (var i = 0; i < this._g.length; i = (i + 1) | 0) {
                    if (this._g[System.Array.index(i, this._g)] === 0) {
                        this._f[System.Array.index(i, this._f)] = 0;
                    }
                }

                $t = Bridge.getEnumerator(this._f);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(this._g);
                try {
                    while ($t1.moveNext()) {
                        var i2 = $t1.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i2) | 0;
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.OnlineChoiceHashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._g).sequenceEqual(other._g) && System.Linq.Enumerable.from(this._f).sequenceEqual(other._f);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.OrientationHashGraph", {
        fields: {
            _values: null,
            _outMinusIn: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (g, outMinusIn) {
                this.$initialize();                var $t;

                this._values = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(g.N, (((g.N - 1) | 0))), 2)) | 0), 0, System.Byte);
                this._outMinusIn = outMinusIn;

                var k = 0;
                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        var value = (g.getItem(i, j) ? 1 : 0) & 255;
                        this._values[System.Array.index(k, this._values)] = value;

                        if (g.getItem(i, j)) {
                            this._hashCode = (this._hashCode + (1 << (k % 32))) | 0;
                        }

                        k = (k + 1) | 0;
                    }
                }

                $t = Bridge.getEnumerator(outMinusIn);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.OrientationHashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._outMinusIn).sequenceEqual(other._outMinusIn) && System.Linq.Enumerable.from(this._values).sequenceEqual(other._values);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.OrientationResult", {
        props: {
            Graph: null,
            Even: 0,
            Odd: 0
        }
    });

    Bridge.define("Algorithms.Polynomials.FactoredRational", {
        statics: {
            fields: {
                Zero: null
            },
            ctors: {
                init: function () {
                    var $t;
                    this.Zero = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.Sign = 0, $t);
                }
            },
            methods: {
                op_Multiply: function (fi, fi2) {
                    var $t;
                    var sign = Bridge.Int.mul(fi.Sign, fi2.Sign);
                    var k = new (System.Collections.Generic.List$1(System.Int32))(Math.max(fi.K.Count, fi2.K.Count));

                    if (sign !== 0) {
                        for (var i = 0; i < Math.max(fi.K.Count, fi2.K.Count); i = (i + 1) | 0) {
                            k.add(0);
                            if (i < fi.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi.K.getItem(i)) | 0);
                            }
                            if (i < fi2.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi2.K.getItem(i)) | 0);
                            }
                        }
                    }

                    return ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = k, $t.Sign = sign, $t);
                },
                op_Division: function (fi, fi2) {
                    var $t;
                    var sign = Bridge.Int.mul(fi.Sign, fi2.Sign);
                    var k = new (System.Collections.Generic.List$1(System.Int32))(Math.max(fi.K.Count, fi2.K.Count));

                    if (sign !== 0) {
                        for (var i = 0; i < Math.max(fi.K.Count, fi2.K.Count); i = (i + 1) | 0) {
                            k.add(0);
                            if (i < fi.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi.K.getItem(i)) | 0);
                            }
                            if (i < fi2.K.Count) {
                                k.setItem(i, (k.getItem(i) - fi2.K.getItem(i)) | 0);
                            }
                        }
                    }

                    return ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = k, $t.Sign = sign, $t);
                }
            }
        },
        fields: {
            Sign: 0,
            K: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (n) {
                this.$initialize();
                var vv = System.Array.init(11, 0, System.Int32);
                for (var jj = 0; jj <= 10; jj = (jj + 1) | 0) {
                    vv[System.Array.index(jj, vv)] = this.Power(2, jj);
                }

                this.Sign = System.Decimal(n).sign();
                n = Bridge.Int.mul(n, this.Sign);

                this.K = new (System.Collections.Generic.List$1(System.Int32))();
                var i = 0;

                while (n > 1) {
                    this.K.add(0);
                    var p = Algorithms.Polynomials.PrimeNumbers.Get(i);
                    while (n % p === 0) {
                        this.K.setItem(i, (this.K.getItem(i) + 1) | 0);
                        n = (Bridge.Int.div(n, p)) | 0;
                    }

                    i = (i + 1) | 0;
                }
            }
        },
        methods: {
            ToRational: function (top, bottom) {
                if (this.K == null || this.Sign === 0) {
                    top.v = 0;
                    bottom.v = 1;
                    return;
                }

                top.v = this.Sign;
                bottom.v = 1;
                for (var i = 0; i < this.K.Count; i = (i + 1) | 0) {
                    if (this.K.getItem(i) > 0) {
                        top.v = Bridge.Int.mul(top.v, (this.Power(Algorithms.Polynomials.PrimeNumbers.Get(i), this.K.getItem(i))));
                    } else {
                        bottom.v = Bridge.Int.mul(bottom.v, (this.Power(Algorithms.Polynomials.PrimeNumbers.Get(i), ((-this.K.getItem(i)) | 0))));
                    }
                }
            },
            Power: function (p, k) {
                var m = 1;
                while (k > 0) {
                    var e = 1;
                    var n = p;
                    while (e <= k >> 1) {
                        n = Bridge.Int.mul(n, n);
                        e = e << 1;
                    }

                    k = (k - e) | 0;
                    m = Bridge.Int.mul(m, n);
                }

                return m;
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.GraphPolynomial", {
        fields: {
            _g: null,
            _priorNeighbors: null,
            _normalizer: null,
            _signLookup: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this._g = g;

                this._priorNeighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                for (var w = 0; w < this._g.N; w = (w + 1) | 0) {
                    this._priorNeighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
                    for (var v = 0; v < w; v = (v + 1) | 0) {
                        if (g.getItem(v, w)) {
                            this._priorNeighbors.getItem(w).add(v);
                        }
                    }
                }
            }
        },
        methods: {
            GetCoefficient: function (power) {
                var $t;
                this._normalizer = new Algorithms.Polynomials.Normalizer(power);

                var a = System.Array.init(power.length, 0, System.Int32);
                var top = { v : System.Int64(0) };
                var bottom = { v : System.Int64(1) };
                var partialProduct = { v : ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t) };
                this.SumTerms(0, a, power, partialProduct, top, bottom);

                return System.Int64.clip32(top.v.div(bottom.v));
            },
            GetSignSum: function (power) {
                this._signLookup = new Algorithms.Polynomials.SignLookup(power);

                var a = System.Array.init(power.length, 0, System.Int32);
                var sum = { v : 0 };
                var partialProduct = { v : 1 };
                this.SumSigns(0, a, power, partialProduct, sum);

                return sum.v;
            },
            SumSigns: function (w, a, power, partialProduct, sum) {
                var $t;
                if (w === power.length) {
                    sum.v = (sum.v + partialProduct.v) | 0;
                } else {
                    for (var j = 0; j <= power[System.Array.index(w, power)]; j = (j + 1) | 0) {
                        a[System.Array.index(w, a)] = j;

                        var current = 1;
                        $t = Bridge.getEnumerator(this._priorNeighbors.getItem(w));
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                current = Bridge.Int.mul(current, this._signLookup.Sign.get([a[System.Array.index(v, a)], a[System.Array.index(w, a)]]));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (current === 0) {
                            continue;
                        }

                        partialProduct.v = Bridge.Int.mul(partialProduct.v, current);
                        this.SumSigns(((w + 1) | 0), a, power, partialProduct, sum);
                        partialProduct.v = (Bridge.Int.div(partialProduct.v, current)) | 0;
                    }
                }
            },
            SumTerms: function (w, a, power, partialProduct, top, bottom) {
                var $t;
                if (w === power.length) {
                    var r = Algorithms.Polynomials.FactoredRational.op_Division(partialProduct.v, this._normalizer.Get(a));
                    var top2 = { };
                    var bottom2 = { };
                    r.ToRational(top2, bottom2);

                    top.v = top.v.mul(System.Int64(bottom2.v)).add(bottom.v.mul(System.Int64(top2.v)));
                    bottom.v = bottom.v.mul(System.Int64(bottom2.v));

                    var gcd = this.GCD(top.v, bottom.v);
                    top.v = top.v.div(gcd);
                    bottom.v = bottom.v.div(gcd);
                } else {
                    for (var j = 0; j <= power[System.Array.index(w, power)]; j = (j + 1) | 0) {
                        a[System.Array.index(w, a)] = j;

                        var current = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t);
                        $t = Bridge.getEnumerator(this._priorNeighbors.getItem(w));
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                current = Algorithms.Polynomials.FactoredRational.op_Multiply(current, this._normalizer.FactoredDifference.get([a[System.Array.index(v, a)], a[System.Array.index(w, a)]]));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (current.Sign === 0) {
                            continue;
                        }

                        partialProduct.v = Algorithms.Polynomials.FactoredRational.op_Multiply(partialProduct.v, current);
                        this.SumTerms(((w + 1) | 0), a, power, partialProduct, top, bottom);
                        partialProduct.v = Algorithms.Polynomials.FactoredRational.op_Division(partialProduct.v, current);
                    }
                }
            },
            GCD: function (x, y) {
                var tmp;
                x = x.abs();
                y = y.abs();
                while (x.gt(System.Int64(0))) {
                    tmp = x;
                    x = y.mod(x);
                    y = tmp;
                }
                return y;
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.GraphPolynomialExtensions", {
        statics: {
            methods: {
                GetCoefficient: function (g, power) {
                    var gp = new Algorithms.Polynomials.GraphPolynomial(g);
                    return gp.GetCoefficient(power);
                },
                GetSignSum: function (g, power) {
                    var gp = new Algorithms.Polynomials.GraphPolynomial(g);
                    return gp.GetSignSum(power);
                }
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.Normalizer", {
        fields: {
            FactoredDifference: null,
            InsideProduct: null
        },
        ctors: {
            ctor: function (height) {
                this.$initialize();                var $t;

                var m = System.Linq.Enumerable.from(height).max();

                this.FactoredDifference = System.Array.create(null, null, Algorithms.Polynomials.FactoredRational, ((m + 1) | 0), ((m + 1) | 0));
                for (var i = 0; i <= m; i = (i + 1) | 0) {
                    for (var j = 0; j <= m; j = (j + 1) | 0) {
                        this.FactoredDifference.set([i, j], new Algorithms.Polynomials.FactoredRational.$ctor1(((i - j) | 0)));
                    }
                }

                this.InsideProduct = System.Array.create(null, null, Algorithms.Polynomials.FactoredRational, height.length, ((m + 1) | 0));
                for (var i1 = 0; i1 < height.length; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 <= height[System.Array.index(i1, height)]; j1 = (j1 + 1) | 0) {
                        this.InsideProduct.set([i1, j1], ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t));
                        for (var k = 0; k <= height[System.Array.index(i1, height)]; k = (k + 1) | 0) {
                            if (k === j1) {
                                continue;
                            }

                            this.InsideProduct.set([i1, j1], Algorithms.Polynomials.FactoredRational.op_Multiply(this.InsideProduct.get([i1, j1]), this.FactoredDifference.get([j1, k])));
                        }
                    }
                }
        }
    },
    methods: {
        Get: function (a) {
            var $t;
            var normalizer = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t);
            for (var i = 0; i < a.length; i = (i + 1) | 0) {
                normalizer = Algorithms.Polynomials.FactoredRational.op_Multiply(normalizer, this.InsideProduct.get([i, a[System.Array.index(i, a)]]));
            }

            return normalizer;
        }
    }
    });

    Bridge.define("Algorithms.Polynomials.PrimeNumbers", {
        statics: {
            fields: {
                _primes: null
            },
            ctors: {
                init: function () {
                    this._primes = $asm.$.Algorithms.Polynomials.PrimeNumbers.f1(new (System.Collections.Generic.List$1(System.Int32))());
                }
            },
            methods: {
                Get: function (i) {
                    if (i >= Algorithms.Polynomials.PrimeNumbers._primes.Count) {
                        Algorithms.Polynomials.PrimeNumbers.ComputeMorePrimes(i);
                    }

                    return Algorithms.Polynomials.PrimeNumbers._primes.getItem(i);
                },
                ComputeMorePrimes: function (i) {
                    var m = Math.max(i, Bridge.Int.mul(2, Algorithms.Polynomials.PrimeNumbers._primes.Count));
                    var p = (Algorithms.Polynomials.PrimeNumbers._primes.getItem(((Algorithms.Polynomials.PrimeNumbers._primes.Count - 1) | 0)) + 2) | 0;

                    while (Algorithms.Polynomials.PrimeNumbers._primes.Count <= m) {
                        if (Algorithms.Polynomials.PrimeNumbers.IsPrime(p)) {
                            Algorithms.Polynomials.PrimeNumbers._primes.add(p);
                        }

                        p = (p + 2) | 0;
                    }
                },
                IsPrime: function (p) {
                    for (var k = 0; Bridge.Int.mul(Algorithms.Polynomials.PrimeNumbers._primes.getItem(k), Algorithms.Polynomials.PrimeNumbers._primes.getItem(k)) <= p; k = (k + 1) | 0) {
                        if (p % Algorithms.Polynomials.PrimeNumbers._primes.getItem(k) === 0) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.ns("Algorithms.Polynomials.PrimeNumbers", $asm.$);

    Bridge.apply($asm.$.Algorithms.Polynomials.PrimeNumbers, {
        f1: function (_o20) {
            _o20.add(2);
            _o20.add(3);
            _o20.add(5);
            _o20.add(7);
            _o20.add(11);
            _o20.add(13);
            _o20.add(17);
            _o20.add(19);
            return _o20;
        }
    });

    Bridge.define("Algorithms.Polynomials.SignLookup", {
        fields: {
            Sign: null
        },
        ctors: {
            ctor: function (height) {
                this.$initialize();
                var m = System.Linq.Enumerable.from(height).max();

                this.Sign = System.Array.create(0, null, System.Int32, ((m + 1) | 0), ((m + 1) | 0));
                for (var i = 0; i <= m; i = (i + 1) | 0) {
                    for (var j = 0; j <= m; j = (j + 1) | 0) {
                        this.Sign.set([i, j], System.Decimal(((i - j) | 0)).sign());
                    }
                }
            }
        }
    });

    Bridge.define("Algorithms.SubsetEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        fields: {
            _setSize: 0,
            _subsetSize: 0
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (setSize, subsetSize) {
                this.$initialize();
                this._setSize = setSize;
                this._subsetSize = subsetSize;
            }
        },
        methods: {
            getEnumerator: function () {
                return new Algorithms.SubsetEnumerator.Enumerator(this._setSize, this._subsetSize);
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            }
        }
    });

    Bridge.define("Algorithms.SubsetEnumerator.Enumerator", {
        inherits: [System.Collections.Generic.IEnumerator$1(System.Int64)],
        fields: {
            _isFirst: false,
            _setSize: 0,
            _subsetSize: 0,
            _current: System.Int64(0)
        },
        props: {
            Current: {
                get: function () {
                    return this._current;
                }
            },
            System$Collections$IEnumerator$Current: {
                get: function () {
                    return this.Current;
                }
            }
        },
        alias: [
            "Current", ["System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1"],
            "dispose", "System$IDisposable$dispose",
            "moveNext", "System$Collections$IEnumerator$moveNext",
            "reset", "System$Collections$IEnumerator$reset"
        ],
        ctors: {
            init: function () {
                this._isFirst = true;
            },
            ctor: function (setSize, subsetSize) {
                this.$initialize();
                this._setSize = setSize;
                this._subsetSize = subsetSize;
            }
        },
        methods: {
            dispose: function () { },
            moveNext: function () {
                if (this._isFirst) {
                    if (this._subsetSize > this._setSize) {
                        return false;
                    }

                    this._current = System.Int64(((((1 << this._subsetSize) - 1) | 0)) << (((this._setSize - this._subsetSize) | 0)));

                    this._isFirst = false;
                    return true;
                }

                var lsb = this._current.and(this._current.neg());

                if (lsb.gt(System.Int64(1))) {
                    this._current = this._current.xor(lsb).xor((lsb.shr(1)));

                    return true;
                }

                var high = this._current.and((this._current.add(System.Int64(1))));

                if (high.equals(System.Int64(0))) {
                    return false;
                }

                var low = this._current.xor(high);
                low = (low.shl(2)).add(System.Int64(3));

                while ((low.and(high)).equals(System.Int64(0))) {
                    low = low.shl(1);
                }

                this._current = high.xor(low);

                return true;
            },
            reset: function () {
                this._isFirst = true;
            }
        }
    });

    Bridge.define("Algorithms.TransitivePartition", {
        props: {
            Parts: null
        },
        ctors: {
            ctor: function (set) {
                this.$initialize();
                this.Parts = function (_o21) {
                        var $t;
                        _o21.add(($t = new Algorithms.TransitivePartition.Part(), $t.Set = set, $t.Scores = new (System.Collections.Generic.List$1(System.Int32))(), $t));
                        return _o21;
                    }(new (System.Collections.Generic.List$1(Algorithms.TransitivePartition.Part))());
            }
        },
        methods: {
            Refine: function (score, scoreNumber) {
                var $t, $t1;
                if (this.Parts.getItem(0).Scores.Count >= scoreNumber) {
                    return;
                }

                var refined = new (System.Collections.Generic.List$1(Algorithms.TransitivePartition.Part))(this.Parts.Count);
                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        var map = this.RefinePart(part, score);
                        $t1 = Bridge.getEnumerator(map);
                        try {
                            while ($t1.moveNext()) {
                                var kvp = $t1.Current;
                                var p = new Algorithms.TransitivePartition.Part();
                                p.Set = kvp.value;
                                p.Scores = new (System.Collections.Generic.List$1(System.Int32))(part.Scores);
                                p.Scores.add(kvp.key);

                                refined.add(p);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Parts = refined;
            },
            RefinePart: function (part, score) {
                var $t;
                var map = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();
                $t = Bridge.getEnumerator(part.Set);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        var x = score[System.Array.index(v, score)];
                        var l = { };
                        if (!map.tryGetValue(x, l)) {
                            l.v = new (System.Collections.Generic.List$1(System.Int32))();
                            map.set(x, l.v);
                        }

                        l.v.add(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return map;
            },
            equals: function (obj) {
                var $t;
                var tp = Bridge.as(obj, Algorithms.TransitivePartition);
                if (tp == null) {
                    return false;
                }

                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        var p = tp.FindPartWithScores(part.Scores);
                        if (p == null) {
                            return false;
                        }

                        if (p.Set.Count !== part.Set.Count) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            getHashCode: function () {
                return Bridge.getHashCode(this);
            },
            FindPartWithScores: function (scores) {
                var $t;
                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        if (System.Linq.Enumerable.from(part.Scores).sequenceEqual(scores)) {
                            return part;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            }
        }
    });

    Bridge.define("Algorithms.TransitivePartition.Part", {
        props: {
            Set: null,
            Scores: null
        }
    });

    Bridge.define("Algorithms.UnpermutedAssignmentEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _vertexCount: 0,
            _f: null,
            _potSize: 0,
            _start: 0,
            _step: 0,
            _pairMaskToBadMask: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$List$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._vertexCount = vertexCount;
                this._f = f;
                this._potSize = potSize;
                this._start = start;
                this._step = step;

                this._pairMaskToBadMask = Algorithms.Int64Usage.GeneratePairMasks(this._potSize);
            }
        },
        methods: {
            getEnumerator: function () {
                return System.Linq.Enumerable.from(this.GetEnumerable(this._vertexCount)).where(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f1)).getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            GetEnumerableRecursive: function (vertexCount) {
                if (vertexCount === 1) {
                    return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int64), Algorithms.GenericExtensions.EnList(System.Int64, ((System.Int64(1).shl(this._f(0))).sub(System.Int64(1)))));
                }

                return System.Linq.Enumerable.from(this.GetEnumerableRecursive(((vertexCount - 1) | 0))).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f2));
            },
            GetEnumerable: function (vertexCount) {
                var enumerable = Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int64), Algorithms.GenericExtensions.EnList(System.Int64, ((System.Int64(1).shl(this._f(0))).sub(System.Int64(1)))));

                for (var i = 1; i < vertexCount; i = (i + 1) | 0) {
                    enumerable = System.Linq.Enumerable.from(enumerable).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f2));
                }

                return enumerable;
            },
            GetExtensions: function (list) {
                var restricted = System.Linq.Enumerable.from(this._pairMaskToBadMask).where(Bridge.fn.bind(this, function (kvp) {
                        return this.IsRestricted(kvp.key, list);
                    }));

                var size = this._f(list.Count);

                return System.Linq.Enumerable.from(new Algorithms.SubsetEnumerator(this._potSize, size)).where(function (subset) {
                        return restricted.all(function (kvp) {
                            return (subset.and(kvp.key)).ne(kvp.value);
                        });
                    }).select(function (subset) {
                    return System.Linq.Enumerable.from(list).concat(System.Array.init([subset], System.Int64)).toList(System.Int64);
                });
            },
            IsRestricted: function (p, list) {
                var $t;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        var intersection = x.and(p);
                        if (intersection.ne(System.Int64(0)) && intersection.ne(x)) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            }
        }
    });

    Bridge.ns("Algorithms.UnpermutedAssignmentEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.UnpermutedAssignmentEnumerator, {
        f1: function (list, i) {
            return (((i - this._start) | 0)) % this._step === 0;
        },
        f2: function (list) {
            return this.GetExtensions(list);
        }
    });

    Bridge.define("Algorithms.Utility.EquivalenceRelation$1", function (T) { return {
        fields: {
            _nodeLookup: null
        },
        ctors: {
            init: function () {
                this._nodeLookup = new (System.Collections.Generic.Dictionary$2(T,Algorithms.Utility.EquivalenceRelation$1.Node(T)))();
            }
        },
        methods: {
            AddElement: function (t) {
                this.LookupNode(t);
            },
            Relate: function (x, y) {
                var nx = this.LookupNode(x);
                var ny = this.LookupNode(y);

                var xRoot = this.Find(nx);
                var yRoot = this.Find(ny);

                if (Bridge.referenceEquals(xRoot, yRoot)) {
                    return;
                }

                if (xRoot.Rank < yRoot.Rank) {
                    xRoot.Parent = yRoot;
                } else {
                    if (xRoot.Rank > yRoot.Rank) {
                        yRoot.Parent = xRoot;
                    } else {
                        yRoot.Parent = xRoot;
                        xRoot.Rank = (xRoot.Rank + 1) | 0;
                    }
                }
            },
            AreRelated: function (x, y) {
                var nx = this.LookupNode(x);
                var ny = this.LookupNode(y);

                return Bridge.referenceEquals(this.Find(nx), this.Find(ny));
            },
            GetEquivalenceClass: function (x) {
                var nx = this.LookupNode(x);
                var xRoot = this.Find(nx);

                return System.Linq.Enumerable.from(this._nodeLookup.getValues()).where(Bridge.fn.bind(this, function (node) {
                        return Bridge.referenceEquals(this.Find(node), xRoot);
                    })).select($asm.$.Algorithms.Utility.EquivalenceRelation$1.f1);
            },
            GetEquivalenceClasses: function () {
                return System.Linq.Enumerable.from(this._nodeLookup.getValues()).groupBy(Bridge.fn.bind(this, function (node) {
                        return this.Find(node);
                    })).select(function (group) {
                    return group.select($asm.$.Algorithms.Utility.EquivalenceRelation$1.f1);
                });
            },
            Find: function (n) {
                if (!Bridge.referenceEquals(n.Parent, n)) {
                    n.Parent = this.Find(n.Parent);
                }

                return n.Parent;
            },
            LookupNode: function (t) {
                var node = { };
                if (!this._nodeLookup.tryGetValue(t, node)) {
                    node.v = new (Algorithms.Utility.EquivalenceRelation$1.Node(T))();
                    node.v.Parent = node.v;
                    node.v.Rank = 0;
                    node.v.T = t;

                    this._nodeLookup.set(t, node.v);
                }

                return node.v;
            }
        }
    }; });

    Bridge.ns("Algorithms.Utility.EquivalenceRelation$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.EquivalenceRelation$1, {
        f1: function (node) {
            return node.T;
        }
    });

    Bridge.define("Algorithms.Utility.EquivalenceRelation$1.Node", function (T) { return {
        props: {
            Parent: null,
            Rank: 0,
            T: Bridge.getDefaultValue(T)
        }
    }; });

    Bridge.define("Algorithms.Utility.Factoradic", {
        props: {
            Digits: null,
            Value: System.Int64(0)
        },
        ctors: {
            $ctor1: function (value, n) {
                this.$initialize();
                this.Value = value;

                this.Digits = new (System.Collections.Generic.List$1(System.Int32))(n);
                this.Digits.add(0);

                var i = 1;
                while (value.gt(System.Int64(0))) {
                    this.Digits.add(System.Int64.clip32(value.mod(System.Int64(((i = (i + 1) | 0))))));
                    value = value.div(System.Int64(i));
                }

                for (i = this.Digits.Count; i < n; i = (i + 1) | 0) {
                    this.Digits.add(0);
                }
            },
            ctor: function (p) {
                this.$initialize();
                this.Digits = new (System.Collections.Generic.List$1(System.Int32))(p.N);

                var elements = new (System.Collections.Generic.List$1(System.Int32))(p.N);
                for (var i = 0; i < p.N; i = (i + 1) | 0) {
                    elements.add(i);
                }

                for (var i1 = 0; i1 < p.N; i1 = (i1 + 1) | 0) {
                    this.Digits.add(elements.indexOf(p.getItem(i1)));
                    elements.remove(p.getItem(i1));
                }

                this.Digits.reverse();

                this.Value = System.Int64(0);
                var n = 1;
                for (var i2 = 0; i2 < this.Digits.Count; i2 = (i2 + 1) | 0) {
                    this.Value = this.Value.add(System.Int64((Bridge.Int.mul(this.Digits.getItem(i2), n))));
                    n = Bridge.Int.mul(n, (((i2 + 1) | 0)));
                }

            }
        }
    });

    Bridge.define("Algorithms.Utility.Flows", {
        statics: {
            methods: {
                BipartiteMaximumMatching: function (n, adjacencies) {
                    var $t;
                    var capacity = System.Array.create(0, null, System.Int32, ((n + 2) | 0), ((n + 2) | 0));
                    var source = 0;
                    var target = 1;

                    var lo = 2;
                    var ro = (lo + adjacencies.Count) | 0;

                    for (var i = 0; i < adjacencies.Count; i = (i + 1) | 0) {
                        capacity.set([source, ((lo + i) | 0)], 1);

                        $t = Bridge.getEnumerator(adjacencies.getItem(i));
                        try {
                            while ($t.moveNext()) {
                                var j = $t.Current;
                                capacity.set([((lo + i) | 0), ((ro + j) | 0)], 1);
                                capacity.set([((ro + j) | 0), target], 1);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    return Algorithms.Utility.Flows.MaxFlow(capacity, source, target);
                },
                MaxFlow: function (capacity, source, target) {
                    return new Algorithms.Utility.Flows.FordFulkerson(capacity, source, target).MaxFlow();
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.Flows.FordFulkerson", {
        fields: {
            _n: 0,
            _source: 0,
            _target: 0,
            _capacity: null,
            _flow: null
        },
        ctors: {
            ctor: function (capacity, source, target) {
                this.$initialize();
                this._capacity = capacity;
                this._source = source;
                this._target = target;

                this._n = System.Array.getLength(capacity, 0);
                this._flow = System.Array.create(0, null, System.Int32, this._n, this._n);
            }
        },
        methods: {
            MaxFlow: function () {
                while (true) {
                    var path = $asm.$.Algorithms.Utility.Flows.FordFulkerson.f1(new (System.Collections.Generic.List$1(System.Int32))());
                    var done = !this.FindAugmentingPath(path);
                    if (done) {
                        break;
                    }

                    this.AddFlow(path);
                }

                return System.Linq.Enumerable.range(0, this._n).sum(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.Flows.FordFulkerson.f2));
            },
            FindAugmentingPath: function (path) {
                var $t;
                var last = path.getItem(((path.Count - 1) | 0));

                if (last === this._target) {
                    return true;
                }

                $t = Bridge.getEnumerator(this.OutNeighbors(last), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var j = $t.Current;
                        if (path.contains(j)) {
                            continue;
                        }

                        path.add(j);

                        var isAugmenting = this.FindAugmentingPath(path);
                        if (isAugmenting) {
                            return true;
                        }

                        path.remove(j);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            OutNeighbors: function (i) {
                return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (i) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        j,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        j = 0;
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ( j < this._n ) {
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 2: {
                                        if (((this._capacity.get([i, j]) - this._flow.get([i, j])) | 0) > 0) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 5;
                                            continue;
                                    }
                                    case 3: {
                                        $enumerator.current = j;
                                            $step = 4;
                                            return true;
                                    }
                                    case 4: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        j = (j + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 7: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            AddFlow: function (path) {
                var gain = this.FindGain(path);

                for (var i = 0; i < ((path.Count - 1) | 0); i = (i + 1) | 0) {
                    this._flow.set([path.getItem(i), path.getItem(((i + 1) | 0))], (this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))]) + gain) | 0);
                    this._flow.set([path.getItem(((i + 1) | 0)), path.getItem(i)], (-this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))])) | 0);
                }
            },
            FindGain: function (path) {
                var gain = 2147483647;

                for (var i = 0; i < ((path.Count - 1) | 0); i = (i + 1) | 0) {
                    gain = Math.min(gain, ((this._capacity.get([path.getItem(i), path.getItem(((i + 1) | 0))]) - this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))])) | 0));
                }

                return gain;
            }
        }
    });

    Bridge.ns("Algorithms.Utility.Flows.FordFulkerson", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.Flows.FordFulkerson, {
        f1: function (_o22) {
            _o22.add(0);
            return _o22;
        },
        f2: function (i) {
            return this._flow.get([this._source, i]);
        }
    });

    Bridge.define("Algorithms.Utility.LinqExtensions", {
        statics: {
            methods: {
                CartesianProduct$2: function (T, a, b) {
                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(T, System.Array.init([a, b], System.Collections.Generic.IEnumerable$1(T)))).select(function (s) {
                            return { item1: System.Linq.Enumerable.from(s).elementAt(0), item2: System.Linq.Enumerable.from(s).elementAt(1) };
                        });
                },
                CartesianProduct: function (T, sequences) {
                    var emptyProduct = System.Array.init([System.Linq.Enumerable.empty()], System.Linq.EnumerableInstance$1);

                    return System.Linq.Enumerable.from(sequences).aggregate(emptyProduct, function (accumulator, sequence) {
                            return System.Linq.Enumerable.from(accumulator).selectMany(function (accseq) {
                                    return sequence;
                                }, function (accseq, item) {
                                    return System.Linq.Enumerable.from(accseq).concat(System.Array.init([item], T));
                                });
                        });
                },
                CartesianProduct$1: function (T, sequences) {
                    var emptyProduct = System.Array.init([System.Linq.Enumerable.empty()], System.Linq.EnumerableInstance$1);

                    return System.Linq.Enumerable.from(sequences).aggregate(emptyProduct, function (accumulator, sequence) {
                            return System.Linq.Enumerable.from(accumulator).selectMany(function (accseq) {
                                    return sequence;
                                }, function (accseq, item) {
                                    return System.Linq.Enumerable.from(accseq).concat(System.Array.init([item], T));
                                });
                        });
                },
                Concat: function (T, e, value) {
                    return new (Bridge.GeneratorEnumerable$1(T))(Bridge.fn.bind(this, function (T, e, value) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            v,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            $t = Bridge.getEnumerator(e, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    v = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = v;
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = value;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                Distinct: function (T, source, areEqual) {
                    return new (Bridge.GeneratorEnumerable$1(T))(Bridge.fn.bind(this, function (T, source, areEqual) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            yielded,
                            $t,
                            t,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            yielded = new (System.Collections.Generic.List$1(T))();

                                                $t = Bridge.getEnumerator(source, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    t = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            if (System.Linq.Enumerable.from(yielded).all((function ($me, t) {
                                                        return function (x) {
                                                            return !areEqual(x, t);
                                                        };
                                                    })(this, t))) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            yielded.add(t);
                                                $enumerator.current = t;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.ListUtility", {
        statics: {
            methods: {
                DifferenceSorted: function (T, A, B) {
                    if (B == null) {
                        return System.Linq.Enumerable.from(A).toList(T);
                    }

                    var C = new (System.Collections.Generic.List$1(T))(Math.max(4, ((A.Count - B.Count) | 0)));
                    var j = 0;
                    for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                        while (j < B.Count && Bridge.compare(A.getItem(i), B.getItem(j)) > 0) {
                            j = (j + 1) | 0;
                        }

                        if (j >= B.Count || Bridge.compare(A.getItem(i), B.getItem(j)) < 0) {
                            C.add(A.getItem(i));
                        }
                    }

                    return C;
                },
                DifferenceSorted$1: function (A, B) {
                    if (B == null) {
                        return System.Linq.Enumerable.from(A).toList(System.Int32);
                    }

                    var C = new (System.Collections.Generic.List$1(System.Int32))(Math.max(4, ((A.Count - B.Count) | 0)));
                    var j = 0;
                    for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                        while (j < B.Count && A.getItem(i) > B.getItem(j)) {
                            j = (j + 1) | 0;
                        }

                        if (j >= B.Count || A.getItem(i) < B.getItem(j)) {
                            C.add(A.getItem(i));
                        }
                    }

                    return C;
                },
                IntersectionSorted: function (T, A, B) {
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var C = new (System.Collections.Generic.List$1(T))(Math.min(A.Count, B.Count));
                    var i = 0;
                    var j = 0;

                    while (i < A.Count && j < B.Count) {
                        var compare = Bridge.compare(A.getItem(i), B.getItem(j));

                        if (compare === 0) {
                            C.add(A.getItem(i));
                        }
                        if (compare <= 0) {
                            i = (i + 1) | 0;
                        }
                        if (compare >= 0) {
                            j = (j + 1) | 0;
                        }
                    }

                    return C;
                },
                IntersectionSorted$1: function (A, B) {
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(System.Int32))();
                    }

                    var C = new (System.Collections.Generic.List$1(System.Int32))(Math.min(A.Count, B.Count));
                    var i = 0;
                    var j = 0;

                    var ac = A.Count;
                    var bc = B.Count;
                    while (i < ac && j < bc) {
                        var a = A.getItem(i);
                        var b = B.getItem(j);

                        if (a === b) {
                            C.add(a);
                        }
                        if (a <= b) {
                            i = (i + 1) | 0;
                        }
                        if (a >= b) {
                            j = (j + 1) | 0;
                        }
                    }

                    return C;
                },
                IntersectionCountSorted$1: function (T, A, B) {
                    if (A == null || B == null) {
                        return 0;
                    }

                    var count = 0;
                    var i = 0;
                    var j = 0;

                    while (i < A.Count && j < B.Count) {
                        var compare = Bridge.compare(A.getItem(i), B.getItem(j));

                        if (compare === 0) {
                            count = (count + 1) | 0;
                        }
                        if (compare <= 0) {
                            i = (i + 1) | 0;
                        }
                        if (compare >= 0) {
                            j = (j + 1) | 0;
                        }
                    }

                    return count;
                },
                IntersectionCountSorted: function (A, B) {
                    if (A == null || B == null) {
                        return 0;
                    }

                    var count = 0;
                    var i = 0;
                    var j = 0;

                    var ac = A.Count;
                    var bc = B.Count;
                    while (i < ac && j < bc) {
                        var a = A.getItem(i);
                        var b = B.getItem(j);

                        if (a === b) {
                            count = (count + 1) | 0;
                        }
                        if (a <= b) {
                            i = (i + 1) | 0;
                        }
                        if (a >= b) {
                            j = (j + 1) | 0;
                        }
                    }

                    return count;
                },
                UnionSorted: function (T, A, B) {
                    var list = Algorithms.Utility.ListUtility.DifferenceSorted(T, A, B);
                    list.addRange(Algorithms.Utility.ListUtility.DifferenceSorted(T, B, A));

                    return list;
                },
                UnionSorted$1: function (A, B) {
                    var list = Algorithms.Utility.ListUtility.DifferenceSorted$1(A, B);
                    list.addRange(Algorithms.Utility.ListUtility.DifferenceSorted$1(B, A));

                    return list;
                },
                EqualSorted$1: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                EqualSorted: function (A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                SubsetEqualSorted$1: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                SubsetEqualSorted: function (A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                SubsetSorted$1: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                SubsetSorted: function (A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                MaximalElementsSorted: function (T, A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                MaximalElementsSorted$1: function (A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(System.Int32), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqualSorted(head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqualSorted(set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                MultiSetIntersection: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).MultiSetIntersection(A, B);
                },
                MultiSetIntersectionCount: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).MultiSetIntersectionCount(A, B);
                },
                MultiSetEqual: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                MultiSetSubsetEqual: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                MultiSetSubset: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                BinomialCoefficient: function (n, k) {
                    if (k.lt(System.Int64(0))) {
                        return System.Int64(1);
                    }

                    var max = System.Int64.max(k, n.sub(k));
                    var min = System.Int64.min(k, n.sub(k));

                    var result = System.Int64(1);
                    while (n.gt(max)) {
                        result = result.mul(n);
                        n = n.dec();
                    }

                    while (min.gt(System.Int64(0))) {
                        result = result.div(min);

                        min = min.dec();
                    }

                    return result;
                },
                ToString: function (T, A) {
                    var $t;
                    var sb = new System.Text.StringBuilder();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            sb.appendFormat("{0}, ", t.toString());
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return System.String.trimEnd(sb.toString(), [32, 44]);
                },
                Difference: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Difference(A, B);
                },
                Intersection: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Intersection(A, B);
                },
                IntersectionCount: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).IntersectionCount(A, B);
                },
                Union$1: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Union$1(A, B);
                },
                Union: function (T, A, b) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Union(A, b);
                },
                Equal: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                SubsetEqual: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                Subset: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                MaximalElements: function (T, A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqual(T, head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqual(T, set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                GenerateSublists: function (T, list) {
                    var sublists = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    sublists.add(new (System.Collections.Generic.List$1(T))());

                    var clone = new (System.Collections.Generic.List$1(T))(list);

                    while (clone.Count > 0) {
                        var head = clone.getItem(0);

                        var count = sublists.Count;
                        for (var i = 0; i < count; i = (i + 1) | 0) {
                            var union = new (System.Collections.Generic.List$1(T))(sublists.getItem(i));
                            union.add(head);

                            sublists.add(union);
                        }

                        clone.removeAt(0);
                    }

                    return sublists;
                },
                GenerateSublists$1: function (T, list, size) {
                    var $t;
                    var sublists = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    var n = list.Count;
                    $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, size), System.Collections.Generic.List$1(System.Boolean));
                    try {
                        while ($t.moveNext()) {
                            var inOut = $t.Current;
                            sublists.add(Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return sublists;
                },
                EnumerateSublists: function (T, list) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function (T, list) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            n,
                            $t,
                            inOut,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            n = list.Count;
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex(n), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    inOut = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateSublists$1: function (T, list, size) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function (T, list, size) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            n,
                            $t,
                            inOut,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            n = list.Count;
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, size), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    inOut = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                NextSublist: function (T, list, size, state) {
                    var n = list.Count;
                    var areMore = Algorithms.Utility.ListUtility.NextShortLex$1(n, size, state);

                    var sublist = Algorithms.Utility.ListUtility.ExtractSublist(T, list, state.v);

                    if (!areMore) {
                        state.v = null;
                    }

                    return sublist;
                },
                ExtractSublist: function (T, list, inOut) {
                    var sublist = new (System.Collections.Generic.List$1(T))();
                    for (var i = 0; i < inOut.Count; i = (i + 1) | 0) {
                        if (inOut.getItem(i)) {
                            sublist.add(list.getItem(i));
                        }
                    }

                    return sublist;
                },
                EnumerateShortLex$1: function (n, k) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n, k) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            list,
                            i,
                            i1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            k = Math.max(0, k);

                                                list = new (System.Collections.Generic.List$1(System.Boolean))(n);
                                                for (i = 0; i < k; i = (i + 1) | 0) {
                                                    list.add(true);
                                                }
                                                for (i1 = k; i1 < n; i1 = (i1 + 1) | 0) {
                                                    list.add(false);
                                                }

                                                
                                        }
                                        case 1: {
                                            $enumerator.current = list;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 3: {
                                            if ( Algorithms.Utility.ListUtility.NextSameTrueCount(list, k) ) {

                                                    $step = 1;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateShortLex: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            list,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            list = new (System.Collections.Generic.List$1(System.Boolean))(n);
                                                for (i = 0; i < n; i = (i + 1) | 0) {
                                                    list.add(false);
                                                }

                                                
                                        }
                                        case 1: {
                                            $enumerator.current = list;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 3: {
                                            if ( Algorithms.Utility.ListUtility.Next(list) ) {

                                                    $step = 1;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateShortLexNonempty: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            k,
                            $t,
                            list,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            k = 1;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( k <= n ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, k), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    list = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = list;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            k = (k + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 8: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                NextShortLex$1: function (n, k, state) {
                    if (state.v == null) {
                        k = Math.max(0, k);

                        state.v = new (System.Collections.Generic.List$1(System.Boolean))(n);
                        for (var i = 0; i < k; i = (i + 1) | 0) {
                            state.v.add(true);
                        }
                        for (var i1 = k; i1 < n; i1 = (i1 + 1) | 0) {
                            state.v.add(false);
                        }

                        return k > 0 && k < n;
                    }

                    return Algorithms.Utility.ListUtility.NextSameTrueCount(state.v, k);
                },
                NextShortLex: function (n, k, state) {
                    if (state.v == null) {
                        k = Math.max(0, k);

                        state.v = System.Array.init(n, 0, System.Int32);
                        for (var i = 0; i < k; i = (i + 1) | 0) {
                            state.v[System.Array.index(i, state.v)] = 1;
                        }

                        return k <= 0 || k >= n;
                    }

                    var done = !Algorithms.Utility.ListUtility.NextSameOnCount(state.v, k);

                    if (done) {
                        for (var i1 = 0; i1 < k; i1 = (i1 + 1) | 0) {
                            state.v[System.Array.index(i1, state.v)] = 1;
                        }

                        for (var i2 = k; i2 < n; i2 = (i2 + 1) | 0) {
                            state.v[System.Array.index(i2, state.v)] = 0;
                        }
                    }

                    return done;
                },
                Next: function (list) {
                    var trueCount = System.Linq.Enumerable.from(Bridge.cast(list, System.Collections.Generic.IEnumerable$1(System.Boolean))).count($asm.$.Algorithms.Utility.ListUtility.f2);
                    if (trueCount === list.Count) {
                        return false;
                    }

                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole(list);

                    if (firstHole >= list.Count) {
                        for (var i = 0; i < ((trueCount + 1) | 0); i = (i + 1) | 0) {
                            list.setItem(i, true);
                        }
                        for (var i1 = (trueCount + 1) | 0; i1 < list.Count; i1 = (i1 + 1) | 0) {
                            list.setItem(i1, false);
                        }
                    } else {
                        list.setItem(firstHole, true);

                        var initialTrues = trueCount;
                        for (var i2 = firstHole; i2 < list.Count; i2 = (i2 + 1) | 0) {
                            if (list.getItem(i2)) {
                                initialTrues = (initialTrues - 1) | 0;
                            }
                        }

                        for (var i3 = 0; i3 < initialTrues; i3 = (i3 + 1) | 0) {
                            list.setItem(i3, true);
                        }
                        for (var i4 = initialTrues; i4 < firstHole; i4 = (i4 + 1) | 0) {
                            list.setItem(i4, false);
                        }
                    }

                    return true;
                },
                NextSameTrueCount: function (list, trueCount) {
                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole(list);

                    if (firstHole >= list.Count) {
                        return false;
                    }

                    list.setItem(firstHole, true);

                    var initialTrues = trueCount;
                    for (var i = firstHole; i < list.Count; i = (i + 1) | 0) {
                        if (list.getItem(i)) {
                            initialTrues = (initialTrues - 1) | 0;
                        }
                    }

                    for (var i1 = 0; i1 < initialTrues; i1 = (i1 + 1) | 0) {
                        list.setItem(i1, true);
                    }
                    for (var i2 = initialTrues; i2 < firstHole; i2 = (i2 + 1) | 0) {
                        list.setItem(i2, false);
                    }

                    return true;
                },
                FindFirstHole: function (list) {
                    var i = 0;
                    while (i < ((list.Count - 1) | 0)) {
                        if (list.getItem(i) && !list.getItem(((i + 1) | 0))) {
                            break;
                        }

                        i = (i + 1) | 0;
                    }

                    return ((i + 1) | 0);
                },
                FindFirstHole$1: function (list) {
                    var i = 0;
                    while (i < ((list.length - 1) | 0)) {
                        if (list[System.Array.index(i, list)] === 1 && list[System.Array.index(((i + 1) | 0), list)] === 0) {
                            break;
                        }

                        i = (i + 1) | 0;
                    }

                    return ((i + 1) | 0);
                },
                NextSameOnCount: function (list, trueCount) {
                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole$1(list);

                    if (firstHole >= list.length) {
                        return false;
                    }

                    list[System.Array.index(firstHole, list)] = 1;

                    var initialOnes = trueCount;
                    for (var i = firstHole; i < list.length; i = (i + 1) | 0) {
                        initialOnes = (initialOnes - list[System.Array.index(i, list)]) | 0;
                    }

                    for (var i1 = 0; i1 < initialOnes; i1 = (i1 + 1) | 0) {
                        list[System.Array.index(i1, list)] = 1;
                    }
                    for (var i2 = initialOnes; i2 < firstHole; i2 = (i2 + 1) | 0) {
                        list[System.Array.index(i2, list)] = 0;
                    }

                    return true;
                },
                EnumeratePartitionsUnordered: function (sizes) {
                    return Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)), Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, 0), $asm.$.Algorithms.Utility.ListUtility.f4);
                },
                EnumeratePartitions: function (sizes) {
                    return Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, 0);
                },
                EnumeratePartitions$1: function (sizes, item) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (sizes, item) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            childless,
                            i,
                            $t,
                            partition,
                            partition1,
                            i1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            childless = true;
                                                i = 0;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i < sizes.length ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (sizes[System.Array.index(i, sizes)] <= 0) {
                                                    $step = 7;
                                                    continue;
                                                }

                                                childless = false;

                                                sizes[System.Array.index(i, sizes)] = (sizes[System.Array.index(i, sizes)] - 1) | 0;

                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, ((item + 1) | 0)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            partition.getItem(i).add(item);
                                                $enumerator.current = partition;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            sizes[System.Array.index(i, sizes)] = (sizes[System.Array.index(i, sizes)] + 1) | 0;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            i = (i + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 8: {
                                            if (childless) {
                                                    $step = 9;
                                                    continue;
                                                } 
                                                $step = 11;
                                                continue;
                                        }
                                        case 9: {
                                            partition1 = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                                for (i1 = 0; i1 < sizes.length; i1 = (i1 + 1) | 0) {
                                                    partition1.add(new (System.Collections.Generic.List$1(System.Int32))());
                                                }

                                                $enumerator.current = partition1;
                                                $step = 10;
                                                return true;
                                        }
                                        case 10: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 11: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("Algorithms.Utility.ListUtility", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.ListUtility, {
        f1: function (x) { },
        f2: function (b) {
            return b;
        },
        f3: function (a, b) {
            var $t;
            return Algorithms.Utility.ListUtility.Equal(System.Int32, a, b) ? ($t = new Algorithms.Utility.PartialOrderResult(), $t.AtMost = true, $t.AtLeast = true, $t) : new Algorithms.Utility.PartialOrderResult();
        },
        f4: function (aa, bb) {
            return Algorithms.Utility.PartialOrder.Embeds(System.Collections.Generic.List$1(System.Int32), aa, bb, $asm.$.Algorithms.Utility.ListUtility.f3);
        }
    });

    Bridge.define("Algorithms.Utility.ListUtility.ListUtilityGeneric$1", function (T) { return {
        statics: {
            fields: {
                _set: null,
                _multiSet: null
            },
            ctors: {
                init: function () {
                    this._set = new (System.Collections.Generic.HashSet$1(T)).ctor();
                    this._multiSet = new (System.Collections.Generic.Dictionary$2(T,System.Int32))();
                }
            },
            methods: {
                Intersection: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var intersection = new (System.Collections.Generic.List$1(T))(inB.Count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (inB.contains(t1)) {
                                intersection.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return intersection;
                },
                IntersectionCount: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return 0;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var count = 0;
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (inB.contains(t1)) {
                                count = (count + 1) | 0;
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return count;
                },
                Difference: function (A, B) {
                    var $t, $t1;
                    if (A == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }
                    if (B == null) {
                        B = new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var difference = new (System.Collections.Generic.List$1(T))(inB.Count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (!inB.contains(t1)) {
                                difference.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return difference;
                },
                Union$1: function (A, B) {
                    var $t, $t1;
                    if (A == null && B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }
                    if (A == null) {
                        return B;
                    }
                    if (B == null) {
                        return A;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var union = new (System.Collections.Generic.List$1(T))(B);
                    $t1 = Bridge.getEnumerator(A);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (!inB.contains(t1)) {
                                union.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return union;
                },
                Union: function (A, b) {
                    var union = new (System.Collections.Generic.List$1(T))(A);
                    if (!union.contains(b)) {
                        union.add(b);
                    }

                    return union;
                },
                MultiSetIntersection: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._multiSet;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var count = { };
                            inB.tryGetValue(t, count);

                            inB.set(t, (count.v + 1) | 0);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var intersection = new (System.Collections.Generic.List$1(T))(inB.count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            var count1 = { };
                            inB.tryGetValue(t1, count1);

                            if (count1.v > 0) {
                                intersection.add(t1);
                                inB.set(t1, (count1.v - 1) | 0);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return intersection;
                },
                MultiSetIntersectionCount: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return 0;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._multiSet;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var count = { };
                            inB.tryGetValue(t, count);

                            inB.set(t, (count.v + 1) | 0);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var total = 0;
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            var count1 = { };
                            inB.tryGetValue(t1, count1);

                            if (count1.v > 0) {
                                total = (total + 1) | 0;
                                inB.set(t1, (count1.v - 1) | 0);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return total;
                }
            }
        }
    }; });

    Bridge.define("Algorithms.Utility.PartialOrder", {
        statics: {
            methods: {
                Embeds: function (T, A, B, order) {
                    var $t;
                    if (A.Count > B.Count) {
                        return false;
                    }

                    var n = (A.Count + B.Count) | 0;
                    var adjacencies = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(A.Count);

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var a = $t.Current;
                            var neighbors = new (System.Collections.Generic.List$1(System.Int32))();
                            for (var i = 0; i < B.Count; i = (i + 1) | 0) {
                                var result = order(a, B.getItem(i));
                                if (result.AtMost) {
                                    neighbors.add(i);
                                }
                            }

                            adjacencies.add(neighbors);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return Algorithms.Utility.Flows.BipartiteMaximumMatching(n, adjacencies) === A.Count;
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.PartialOrderResult", {
        $kind: "struct",
        statics: {
            methods: {
                getDefaultValue: function () { return new Algorithms.Utility.PartialOrderResult(); }
            }
        },
        fields: {
            AtMost: false,
            AtLeast: false
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([7175930089, this.AtMost, this.AtLeast]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, Algorithms.Utility.PartialOrderResult)) {
                    return false;
                }
                return Bridge.equals(this.AtMost, o.AtMost) && Bridge.equals(this.AtLeast, o.AtLeast);
            },
            $clone: function (to) {
                var s = to || new Algorithms.Utility.PartialOrderResult();
                s.AtMost = this.AtMost;
                s.AtLeast = this.AtLeast;
                return s;
            }
        }
    });

    Bridge.define("Algorithms.Utility.Permutation", {
        statics: {
            methods: {
                EnumerateAll: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(Algorithms.Utility.Permutation))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            count,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Utility.Permutation))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            count = Algorithms.Counting.Factorial(n);

                                                i = System.Int64(0);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i.lt(count) ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = new Algorithms.Utility.Permutation.ctor(new Algorithms.Utility.Factoradic.$ctor1(i, n));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            i = i.inc();
                                            $step = 1;
                                            continue;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                op_Multiply: function (p1, p2) {
                    if (Algorithms.Utility.Permutation.op_Equality(p1, null) || Algorithms.Utility.Permutation.op_Equality(p2, null)) {
                        return null;
                    }

                    if (p1.N !== p2.N) {
                        throw new System.Exception("You tried to multiply permutations of different sets.");
                    }

                    var sequence = new (System.Collections.Generic.List$1(System.Int32))(p2.N);

                    for (var i = 0; i < p2.N; i = (i + 1) | 0) {
                        sequence.add(p1.getItem(p2.getItem(i)));
                    }

                    return new Algorithms.Utility.Permutation.$ctor1(sequence);
                },
                op_Equality: function (p1, p2) {
                    if (p1 == null && p2 == null) {
                        return true;
                    }
                    if (p1 == null || p2 == null) {
                        return false;
                    }

                    return p1.equals(p2);
                },
                op_Inequality: function (p1, p2) {
                    return !(Algorithms.Utility.Permutation.op_Equality(p1, p2));
                }
            }
        },
        props: {
            Sequence: null,
            N: 0
        },
        ctors: {
            ctor: function (f) {
                this.$initialize();
                var sequence = new (System.Collections.Generic.List$1(System.Int32))(f.Digits.Count);
                for (var i = 0; i < f.Digits.Count; i = (i + 1) | 0) {
                    sequence.add(i);
                }

                for (var i1 = 0; i1 < f.Digits.Count; i1 = (i1 + 1) | 0) {
                    var j = (f.Digits.getItem(((((f.Digits.Count - 1) | 0) - i1) | 0)) + i1) | 0;

                    sequence.insert(i1, sequence.getItem(j));
                    sequence.removeAt(((j + 1) | 0));
                }

                this.Sequence = sequence;
                this.N = this.Sequence.Count;
            },
            $ctor1: function (sequence) {
                this.$initialize();                var $t;

                this.Sequence = new (System.Collections.Generic.List$1(System.Int32))(sequence);
                this.N = this.Sequence.Count;

                var hash = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Boolean))();
                $t = Bridge.getEnumerator(sequence);
                try {
                    while ($t.moveNext()) {
                        var i = $t.Current;
                        if (hash.containsKey(i)) {
                            throw new System.Exception("The supplied sequence has duplicates.");
                        }

                        if (i < 0 || i > ((this.N - 1) | 0)) {
                            throw new System.Exception("The supplied sequence has elements that are out of range.");
                        }

                        hash.set(i, true);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        getItem: function (i) {
            return this.Sequence.getItem(i);
        },
        Apply: function (T, list) {
            if (list == null || list.Count !== this.N) {
                throw new System.Exception("The permutation cannot be applied to the given list.");
            }

            var permutedList = new (System.Collections.Generic.List$1(T))(this.N);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                permutedList.add(list.getItem(this.getItem(i)));
            }

            return permutedList;
        },
        Inverse: function () {
            var sequence = System.Array.init(this.N, 0, System.Int32);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                sequence[System.Array.index(this.getItem(i), sequence)] = i;
            }

            return new Algorithms.Utility.Permutation.$ctor1(new (System.Collections.Generic.List$1(System.Int32))(sequence));
        },
        equals: function (obj) {
            if (obj == null) {
                return false;
            }

            return Bridge.referenceEquals(this.toString(), obj.toString());
        },
        toString: function () {
            return System.String.concat("(", Bridge.toArray(System.Linq.Enumerable.from(this.Sequence).select($asm.$.Algorithms.Utility.Permutation.f1)).join(" "), ")");
        },
        getHashCode: function () {
            return Bridge.getHashCode(this.toString());
        }
    }
    });

    Bridge.ns("Algorithms.Utility.Permutation", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.Permutation, {
        f1: function (i) {
            return ((i + 1) | 0);
        }
    });

    Bridge.define("Algorithms.Utility.SafeCollection$1", function (T) { return {
        inherits: [System.Collections.Generic.ICollection$1(T)],
        fields: {
            _count: 0,
            _first: null,
            _last: null
        },
        props: {
            Count: {
                get: function () {
                    return this._count;
                }
            },
            IsReadOnly: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "add", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$add",
            "clear", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$clear",
            "contains", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$contains",
            "copyTo", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$copyTo",
            "Count", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$Count",
            "IsReadOnly", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$IsReadOnly",
            "remove", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$remove",
            "getEnumerator", ["System$Collections$Generic$IEnumerable$1$" + Bridge.getTypeAlias(T) + "$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]
        ],
        ctors: {
            ctor: function () {
                this.$initialize();
                this._first = new (Algorithms.Utility.SafeCollection$1.Node(T))();
                this._last = this._first;
            }
        },
        methods: {
            add: function (item) {
                var $t;
                this._last.Next = ($t = new (Algorithms.Utility.SafeCollection$1.Node(T))(), $t.Item = item, $t);
                this._last = this._last.Next;
                this._count = (this._count + 1) | 0;
            },
            clear: function () {
                this._first.Next = null;
                this._last = this._first;
                this._count = 0;
            },
            contains: function (item) {
                return this.FindPreviousNode(item) != null;
            },
            copyTo: function (array, arrayIndex) {
                var node = this._first;
                while (true) {
                    var next = node.Next;
                    if (next == null) {
                        break;
                    }

                    array[System.Array.index(Bridge.identity(arrayIndex, (arrayIndex = (arrayIndex + 1) | 0)), array)] = next.Item;
                    node = next;
                }
            },
            remove: function (item) {
                var node = this.FindPreviousNode(item);
                if (node == null) {
                    return false;
                }

                var next = node.Next;
                if (next == null) {
                    return false;
                }

                node.Next = next.Next;
                this._count = (this._count - 1) | 0;
                return true;
            },
            getEnumerator: function () {
                var $step = 0,
                    $jumpFromFinally,
                    $returnValue,
                    node,
                    next,
                    $async_e;

                var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                    try {
                        for (;;) {
                            switch ($step) {
                                case 0: {
                                    node = this._first;
                                        
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ( true ) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                }
                                case 2: {
                                    next = node.Next;
                                        if (next == null) {
                                            $step = 4;
                                            continue;
                                        }

                                        $enumerator.current = next.Item;
                                        $step = 3;
                                        return true;
                                }
                                case 3: {
                                    node = next;

                                        $step = 1;
                                        continue;
                                }
                                case 4: {

                                }
                                default: {
                                    return false;
                                }
                            }
                        }
                    } catch($async_e1) {
                        $async_e = System.Exception.create($async_e1);
                        throw $async_e;
                    }
                }));
                return $enumerator;
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            FindPreviousNode: function (item) {
                var node = this._first;
                while (true) {
                    var next = node.Next;
                    if (next == null) {
                        break;
                    }

                    if (System.Collections.Generic.EqualityComparer$1(T).def.equals2(next.Item, item)) {
                        return node;
                    }

                    node = next;
                }

                return null;
            }
        }
    }; });

    Bridge.define("Algorithms.Utility.SafeCollection$1.Node", function (T) { return {
        fields: {
            Item: Bridge.getDefaultValue(T),
            Next: null
        }
    }; });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1", function (T) { return {
        fields: {
            _length: 0,
            _alphabet: null,
            _matchers: null,
            _generalizers: null,
            _vectorComparer: null
        },
        ctors: {
            init: function () {
                this._matchers = new (System.Collections.Generic.List$1(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T)))();
                this._vectorComparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(T))();
            },
            ctor: function (length, alphabet) {
                this.$initialize();                var $t;

                this._length = length;
                this._alphabet = alphabet;

                $t = Bridge.getEnumerator(alphabet);
                try {
                    while ($t.moveNext()) {
                        var t = $t.Current;
                        this.AddMatcher(t.toString(), (function ($me, t) {
                            return function (tt) {
                                return Bridge.equals(t, tt);
                            };
                        })(this, t));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.AddMatcher("*", $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f1);
        }
    },
    methods: {
        AddMatcher: function (name, match) {
            var $t;
            this._matchers.add(($t = new (Algorithms.Utility.SequenceGeneralizer$1.Matcher(T))(), $t.Name = name, $t.Match = match, $t));
        },
        Generalize: function (examples, nonExamples, mostGeneral) {
            var $t, $t1;
            if (mostGeneral === void 0) { mostGeneral = false; }
            this.BuildMatcherLattice();

            var possibles = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            $t = Bridge.getEnumerator(examples);
            try {
                while ($t.moveNext()) {
                    var example = $t.Current;
                    var asMatcherIndices = System.Linq.Enumerable.from(example).select(Bridge.fn.bind(this, function (t) {
                            return Algorithms.GenericExtensions.FirstIndex(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T), this._matchers, function (m) {
                                return Bridge.referenceEquals(m.Name, t.toString());
                            });
                        })).toList(System.Int32);
                    possibles.addRange(System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.from(asMatcherIndices).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f2)))).select($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f3));
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            possibles = System.Linq.Enumerable.from(possibles).distinct(this._vectorComparer).toList(System.Collections.Generic.List$1(System.Int32));

            $t1 = Bridge.getEnumerator(nonExamples);
            try {
                while ($t1.moveNext()) {
                    var nonExample = $t1.Current;
                    var asMatcherIndices1 = System.Linq.Enumerable.from(nonExample).select(Bridge.fn.bind(this, function (t) {
                            return Algorithms.GenericExtensions.FirstIndex(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T), this._matchers, function (m) {
                                return Bridge.referenceEquals(m.Name, t.toString());
                            });
                        })).toList(System.Int32);
                    possibles = System.Linq.Enumerable.from(possibles).except(System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.from(asMatcherIndices1).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f2)))).select($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f3), this._vectorComparer).toList(System.Collections.Generic.List$1(System.Int32));
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }
            var generalizations = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            var remaining = System.Linq.Enumerable.from(examples).toList(System.Collections.Generic.List$1(T));
            while (remaining.Count > 0) {
                var ordered = { v : System.Linq.Enumerable.from(possibles).select(Bridge.fn.bind(this, function (pp) {
                        return new $asm.$AnonymousType$3(pp, System.Linq.Enumerable.from(remaining).count(Bridge.fn.bind(this, function (r) {
                                return this.IsMatch(r, pp);
                            })));
                    })).orderByDescending($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f4).toList(System.Object) };
                var maxers = System.Linq.Enumerable.from(ordered.v).takeWhile((function ($me, ordered) {
                        return function (xx) {
                            return xx.Count === ordered.v.getItem(0).Count;
                        };
                    })(this, ordered)).orderByDescending(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f6));

                var best = { v : mostGeneral ? maxers.first().Vector : maxers.last().Vector };

                generalizations.add(best.v);
                Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), remaining, (function ($me, best) {
                    return Bridge.fn.bind($me, function (r) {
                        return this.IsMatch(r, best.v);
                    });
                })(this, best), $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f7);
            }

            return System.Linq.Enumerable.from(generalizations).select(Bridge.fn.bind(this, function (l) {
                    return System.Linq.Enumerable.from(l).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f8)).toList(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T));
                })).toList(System.Collections.Generic.List$1(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T)));
        },
        BuildMatcherLattice: function () {
            this._generalizers = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this._matchers.Count; i = (i + 1) | 0) {
                this._generalizers.set(i, new (System.Collections.Generic.List$1(System.Int32))());
                var matches = System.Linq.Enumerable.from(this._alphabet).where(Bridge.fn.bind(this, function (a) {
                        return this._matchers.getItem(i).Match(a);
                    })).toList(T);

                for (var j = { v : 0 }; j.v < this._matchers.Count; j.v = (j.v + 1) | 0) {
                    if (Algorithms.Utility.ListUtility.SubsetEqual(T, matches, System.Linq.Enumerable.from(this._alphabet).where((function ($me, j) {
                            return Bridge.fn.bind($me, function (a) {
                                return this._matchers.getItem(j.v).Match(a);
                            });
                        })(this, j)).toList(T))) {
                        this._generalizers.get(i).add(j.v);
                    }
                }
            }
        },
        IsMatch: function (vector, m) {
            for (var i = 0; i < vector.Count; i = (i + 1) | 0) {
                if (!this._matchers.getItem(m.getItem(i)).Match(vector.getItem(i))) {
                    return false;
                }
            }

            return true;
        }
    }
    }; });

    Bridge.define("$AnonymousType$3", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (vector, count) {
                this.Vector = vector;
                this.Count = count;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$3)) {
                    return false;
                }
                return Bridge.equals(this.Vector, o.Vector) && Bridge.equals(this.Count, o.Count);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196188, this.Vector, this.Count]);
                return h;
            },
            toJSON: function () {
                return {
                    Vector : this.Vector,
                    Count : this.Count
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"Count","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_Count","t":8,"rt":System.Int32,"fg":"Count"},"fn":"Count"},{"a":2,"n":"Vector","t":16,"rt":System.Collections.Generic.List$1(System.Int32),"g":{"a":2,"n":"get_Vector","t":8,"rt":System.Collections.Generic.List$1(System.Int32),"fg":"Vector"},"fn":"Vector"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.Utility.SequenceGeneralizer$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.SequenceGeneralizer$1, {
        f1: function (tt) {
            return true;
        },
        f2: function (i) {
            return this._generalizers.get(i);
        },
        f3: function (v) {
            return System.Linq.Enumerable.from(v).toList(System.Int32);
        },
        f4: function (xx) {
            return xx.Count;
        },
        f5: function (total, x) {
            if (Bridge.referenceEquals(this._matchers.getItem(x).Name, "*")) {
                return Bridge.Int.mul(total, this._alphabet.Count);
            }
            if (System.String.startsWith(this._matchers.getItem(x).Name, "!")) {
                return Bridge.Int.mul(total, (((this._alphabet.Count - 1) | 0)));
            }

            return total;
        },
        f6: function (xx) {
            return System.Linq.Enumerable.from(xx.Vector).aggregate(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f5));
        },
        f7: function (x) { },
        f8: function (i) {
            return this._matchers.getItem(i);
        }
    });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1.Matcher", function (T) { return {
        fields: {
            Name: null,
            Match: null
        }
    }; });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1.VectorComparer", function (T) { return {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(System.Int32))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (l) {
                var $t;
                var hash = 17;
                $t = Bridge.getEnumerator(l);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 23) | 0) + x) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    }; });

    Bridge.define("Algorithms.WordGame.AccessibilityChecker", {
        fields: {
            _alphabet: null
        },
        ctors: {
            ctor: function (alphabet) {
                this.$initialize();
                this._alphabet = System.Linq.Enumerable.from(alphabet).toList(System.Char);
            }
        },
        methods: {
            IsAccessible: function (w, S) {
                var $t, $t1, $t2;
                $t = Bridge.getEnumerator(this._alphabet);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        var goodChoiceAlwaysExists = true;

                        var swappers = System.Linq.Enumerable.from(this._alphabet).except(System.Array.init([c], System.Char)).toList(System.Char);
                        $t1 = Bridge.getEnumerator(this.EnumeratePartitions(w, swappers), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                        try {
                            while ($t1.moveNext()) {
                                var partition = $t1.Current;
                                var goodChoiceExists = false;
                                $t2 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, System.Linq.Enumerable.range(0, partition.Count).toList(System.Int32)));
                                try {
                                    while ($t2.moveNext()) {
                                        var choice = $t2.Current;
                                        if (choice.Count <= 0) {
                                            continue;
                                        }

                                        var ww = this.MakeMove(w, partition, choice, swappers);
                                        if (S.contains(ww)) {
                                            goodChoiceExists = true;
                                            break;
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!goodChoiceExists) {
                                    goodChoiceAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (goodChoiceAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            EnumeratePartitions: function (w, swappers) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (w, swappers) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        chars,
                        indices,
                        indexPartitions,
                        $t,
                        indexPartition,
                        partition,
                        $t1,
                        indexPart,
                        part,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        chars = System.String.toCharArray(w, 0, w.length);
                                            indices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Char, chars, function (c) {
                                                    return swappers.contains(c);
                                                })).toList(System.Int32);

                                            indexPartitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(indices.Count);
                                            $t = Bridge.getEnumerator(indexPartitions);
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                indexPartition = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        partition = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(indexPartition.Count);
                                            $t1 = Bridge.getEnumerator(indexPartition);
                                            try {
                                                while ($t1.moveNext()) {
                                                    indexPart = $t1.Current;
                                                    part = System.Linq.Enumerable.from(indexPart).select(function (i) {
                                                            return indices.getItem(i);
                                                        }).toList(System.Int32);
                                                    partition.add(part);
                                                }
                                            } finally {
                                                if (Bridge.is($t1, System.IDisposable)) {
                                                    $t1.System$IDisposable$dispose();
                                                }
                                            }
                                            $enumerator.current = partition;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            MakeMove: function (w, partition, choice, swappers) {
                var $t;
                var chars = System.String.toCharArray(w, 0, w.length);
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(choice).selectMany(function (i) {
                        return partition.getItem(i);
                    }));
                try {
                    while ($t.moveNext()) {
                        var j = $t.Current;
                        chars[System.Array.index(j, chars)] = swappers.getItem(((1 - swappers.indexOf(chars[System.Array.index(j, chars)])) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return String.fromCharCode.apply(null, chars);
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Boxification", {
        statics: {
            methods: {
                Split: function (T, allPoints) {
                    var chunks = new (System.Collections.Generic.List$1(System.Object))();

                    var points = System.Linq.Enumerable.from(allPoints).toList(System.Collections.Generic.List$1(T));
                    var n = allPoints.getItem(0).Count;

                    while (points.Count > 0) {
                        var bestT = 1;
                        var bestSplit = { v : 1 };

                        for (var split = { v : 1 }; split.v < ((n - 1) | 0); split.v = (split.v + 1) | 0) {
                            var left = { v : System.Linq.Enumerable.from(points).select((function ($me, split) {
                                    return function (p) {
                                        return System.Linq.Enumerable.from(p).take(split.v).toList(T);
                                    };
                                })(this, split)).toList(System.Collections.Generic.List$1(T)) };
                            var right = { v : System.Linq.Enumerable.from(points).select((function ($me, split) {
                                    return function (p) {
                                        return System.Linq.Enumerable.from(p).skip(split.v).toList(T);
                                    };
                                })(this, split)).toList(System.Collections.Generic.List$1(T)) };

                            var t = (Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), (function ($me, left, right) {
                                return function (i) {
                                    var lefts = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(left.v).take(i), function (l1, l2) {
                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                        })).toList(System.Collections.Generic.List$1(T));
                                    var rights = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(right.v).take(i), function (l1, l2) {
                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                        })).toList(System.Collections.Generic.List$1(T));

                                    var span = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(T), lefts, rights)).select(function (tup) {
                                            return System.Linq.Enumerable.from(tup.item1).concat(tup.item2).toList(T);
                                        }).toList(System.Collections.Generic.List$1(T));
                                    var allExist = System.Linq.Enumerable.from(span).all(function (p) {
                                            return System.Linq.Enumerable.from(points).any(function (pp) {
                                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                                });
                                        });

                                    return allExist ? 1 : -1;
                                };
                            })(this, left, right)) - 1) | 0;

                            if (t >= bestT) {
                                if (t > bestT || Math.abs(((((Bridge.Int.div(n, 2)) | 0) - split.v) | 0)) < Math.abs(((((Bridge.Int.div(n, 2)) | 0) - bestSplit.v) | 0))) {
                                    bestT = t;
                                    bestSplit.v = split.v;
                                }
                            }
                        }

                        var l = System.Linq.Enumerable.from(points).select((function ($me, bestSplit) {
                                return function (p) {
                                    return System.Linq.Enumerable.from(p).take(bestSplit.v).toList(T);
                                };
                            })(this, bestSplit)).toList(System.Collections.Generic.List$1(T));
                        var r = System.Linq.Enumerable.from(points).select((function ($me, bestSplit) {
                                return function (p) {
                                    return System.Linq.Enumerable.from(p).skip(bestSplit.v).toList(T);
                                };
                            })(this, bestSplit)).toList(System.Collections.Generic.List$1(T));
                        var ls = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(l).take(bestT), function (l1, l2) {
                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                            })).toList(System.Collections.Generic.List$1(T));
                        var rs = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(r).take(bestT), function (l1, l2) {
                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                            })).toList(System.Collections.Generic.List$1(T));
                        var s = { v : System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(T), ls, rs)).select(function (tup) {
                                return System.Linq.Enumerable.from(tup.item1).concat(tup.item2).toList(T);
                            }).toList(System.Collections.Generic.List$1(T)) };

                        chunks.add({ item1: ls, item2: rs });
                        Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), points, (function ($me, s) {
                            return function (p) {
                                return System.Linq.Enumerable.from(s.v).any(function (pp) {
                                        return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                    });
                            };
                        })(this, s), $asm.$.Algorithms.WordGame.Boxification.f1);
                    }

                    return chunks;
                },
                SplitMultiway: function (T, allPoints) {
                    var $t;
                    var chunks = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))))();

                    var points = System.Linq.Enumerable.from(allPoints).toList(System.Collections.Generic.List$1(T));
                    var n = allPoints.getItem(0).Count;

                    while (points.Count > 0) {
                        var bestT = 1;
                        var bestSplit = { v : new (System.Collections.Generic.List$1(System.Int32))() };

                        $t = Bridge.getEnumerator(System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, System.Linq.Enumerable.range(0, n).toList(System.Int32))).select($asm.$.Algorithms.WordGame.Boxification.f3));
                        try {
                            while ($t.moveNext()) {
                                var split = $t.Current;
                                if (Algorithms.WordGame.Boxification.ExtractRanges(T, split, points.getItem(0)).Count <= 1) {
                                    continue;
                                }

                                var t = (Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), function (i) {
                                    var ranges = System.Linq.Enumerable.from(points).take(i).select(function (p) {
                                        return Algorithms.WordGame.Boxification.ExtractRanges(T, split, p);
                                    }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                    var rangeValues = System.Linq.Enumerable.from(ranges).aggregate(System.Linq.Enumerable.range(0, ranges.getItem(0).Count).select(function (__) {
                                            return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))), function (union, next) {
                                            return System.Linq.Enumerable.from(union).zip(next, function (A, B) {
                                                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), Algorithms.Utility.LinqExtensions.Concat(System.Collections.Generic.List$1(T), A, B), function (l1, l2) {
                                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                                        })).toList(System.Collections.Generic.List$1(T));
                                                }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                        });

                                    var cp = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Collections.Generic.List$1(T), rangeValues)).select(function (ll) {
                                            return System.Linq.Enumerable.from(ll).toList(System.Collections.Generic.List$1(T));
                                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                    var span = System.Linq.Enumerable.from(cp).select(function (ll) {
                                            return System.Linq.Enumerable.from(ll).selectMany($asm.$.Algorithms.WordGame.Boxification.f4).toList(T);
                                        }).toList(System.Collections.Generic.List$1(T));
                                    var allExist = System.Linq.Enumerable.from(span).all(function (p) {
                                            return System.Linq.Enumerable.from(points).any(function (pp) {
                                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                                });
                                        });

                                    return allExist ? 1 : -1;
                                }) - 1) | 0;

                                if (t > bestT) {
                                    bestT = t;
                                    bestSplit.v = split;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        var rr = System.Linq.Enumerable.from(points).take(bestT).select((function ($me, bestSplit) {
                            return function (p) {
                                return Algorithms.WordGame.Boxification.ExtractRanges(T, bestSplit.v, p);
                            };
                        })(this, bestSplit)).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                        var rrv = System.Linq.Enumerable.from(rr).aggregate(System.Linq.Enumerable.range(0, rr.getItem(0).Count).select(function (__) {
                                return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                            }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))), function (union, next) {
                                return System.Linq.Enumerable.from(union).zip(next, function (A, B) {
                                        return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), Algorithms.Utility.LinqExtensions.Concat(System.Collections.Generic.List$1(T), A, B), function (l1, l2) {
                                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                            })).toList(System.Collections.Generic.List$1(T));
                                    }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                            });

                        var s = { v : System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Collections.Generic.List$1(T), rrv)).select(function (ll) {
                                return System.Linq.Enumerable.from(ll).selectMany($asm.$.Algorithms.WordGame.Boxification.f4).toList(T);
                            }).toList(System.Collections.Generic.List$1(T)) };

                        chunks.add(rrv);
                        Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), points, (function ($me, s) {
                            return function (p) {
                                return System.Linq.Enumerable.from(s.v).any(function (pp) {
                                        return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                    });
                            };
                        })(this, s), $asm.$.Algorithms.WordGame.Boxification.f1);
                    }

                    return chunks;
                },
                ExtractRanges: function (T, stops, l) {
                    var $t;
                    var ranges = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    var left = 0;
                    $t = Bridge.getEnumerator(stops);
                    try {
                        while ($t.moveNext()) {
                            var stop = $t.Current;
                            ranges.add(l.getRange(left, ((((stop - left) | 0) + 1) | 0)));
                            left = (stop + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (left < l.Count) {
                        ranges.add(l.getRange(left, ((l.Count - left) | 0)));
                    }

                    return ranges;
                },
                Boxify: function (T, points) {
                    var boxes = System.Linq.Enumerable.from(points).select(function (p) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(T), p);
                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                    while (true) {
                        var boxContainers = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)), boxes, boxes)).where(function (pair) {
                                return !System.Linq.Enumerable.from(pair.item1).sequenceEqual(pair.item2);
                            }).select(function (pair) {
                            return new $asm.$AnonymousType$4(pair, Algorithms.WordGame.Boxification.BoxContainer(T, System.Linq.Enumerable.from(pair.item1).concat(pair.item2).toList(System.Collections.Generic.List$1(T))));
                        });

                        var grown = boxContainers.firstOrDefault(function (bc) {
                                return Algorithms.WordGame.Boxification.ContainsBoxContainer(T, points, bc.BoxedUnion);
                            }, null);
                        if (grown == null) {
                            break;
                        }

                        var count = boxes.Count;
                        boxes.remove(grown.Pair.item1);
                        boxes.remove(grown.Pair.item2);
                        boxes.add(grown.BoxedUnion);

                        if (boxes.Count === count) {
                            break;
                        }
                    }

                    return boxes;
                },
                PrefixBoxify: function (T, points) {
                    var allPoints = System.Linq.Enumerable.from(points).toList(System.Collections.Generic.List$1(T));
                    var boxes = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))))();

                    while (true) {
                        var t = Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), function (i) {
                            return Algorithms.WordGame.Boxification.ContainsBox(T, allPoints, System.Linq.Enumerable.from(points).take(i).toList(System.Collections.Generic.List$1(T))) ? 1 : -1;
                        });

                        boxes.add(Algorithms.WordGame.Boxification.BoxContainer(T, System.Linq.Enumerable.from(points).take(t).toList(System.Collections.Generic.List$1(T))));
                        points = System.Linq.Enumerable.from(points).skip(t).toList(System.Collections.Generic.List$1(T));
                        if (points.Count <= 0) {
                            break;
                        }
                    }

                    return boxes;
                },
                ContainsBox: function (T, allPoints, points) {
                    var box = Algorithms.WordGame.Boxification.BoxContainer(T, points);
                    return Algorithms.WordGame.Boxification.ContainsBoxContainer(T, allPoints, box);
                },
                ContainsBoxContainer: function (T, allPoints, boxContainer) {
                    return System.Linq.Enumerable.from(boxContainer).all(function (p) {
                            return System.Linq.Enumerable.from(allPoints).any(function (pp) {
                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                });
                        });
                },
                BoxContainer: function (T, points) {
                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(T, System.Linq.Enumerable.range(0, points.getItem(0).Count).select(function (i) {
                            return System.Linq.Enumerable.from(points).select(function (p) {
                                    return p.getItem(i);
                                }).distinct().toList(T);
                        }))).select(function (e) {
                            return System.Linq.Enumerable.from(e).toList(T);
                        }).toList(System.Collections.Generic.List$1(T));
                },
                IsBox: function (T, points) {
                    return points.Count === Algorithms.WordGame.Boxification.BoxContainer(T, points).Count;
                },
                ToBoxString: function (T, points) {
                    return Bridge.toArray(System.Linq.Enumerable.range(0, points.getItem(0).Count).select(function (i) {
                            return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(points).select(function (p) {
                                        return p.getItem(i);
                                    }).distinct()).join(","), "}");
                        })).join(" * ");
                },
                ToMultiChunkString: function (T, multiChunk) {
                    return Bridge.toArray(System.Linq.Enumerable.from(multiChunk).select(function (chunk) {
                                return Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk);
                            })).join(" * ");
                },
                ToChunkString: function (T, chunk) {
                    return System.String.concat(Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk.item1), " * ", Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk.item2));
                },
                ToListOfListsString: function (T, l) {
                    return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(l).select(function (sl) {
                                return System.String.concat("{", Bridge.toArray(sl).join(","), "}");
                            })).join(","), "}");
                },
                Binary: function (first, last, targetDirection) {
                    var left = (first - 1) | 0;
                    var right = (last + 1) | 0;

                    while (((right - left) | 0) >= 2) {
                        var middle = (left + ((Bridge.Int.div((((right - left) | 0)), 2)) | 0)) | 0;
                        var direction = targetDirection(middle);

                        if (direction === 0) {
                            return middle;
                        } else {
                            if (direction < 0) {
                                right = middle;
                            } else {
                                left = middle;
                            }
                        }
                    }

                    if (left < first) {
                        return ((first - 1) | 0);
                    }
                    if (right > last) {
                        return ((last + 1) | 0);
                    }

                    return left;
                }
            }
        }
    });

    Bridge.define("$AnonymousType$4", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (pair, boxedUnion) {
                this.Pair = pair;
                this.BoxedUnion = boxedUnion;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$4)) {
                    return false;
                }
                return Bridge.equals(this.Pair, o.Pair) && Bridge.equals(this.BoxedUnion, o.BoxedUnion);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196189, this.Pair, this.BoxedUnion]);
                return h;
            },
            toJSON: function () {
                return {
                    Pair : this.Pair,
                    BoxedUnion : this.BoxedUnion
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"BoxedUnion","t":16,"rt":System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Object)),"g":{"a":2,"n":"get_BoxedUnion","t":8,"rt":System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Object)),"fg":"BoxedUnion"},"fn":"BoxedUnion"},{"a":2,"n":"Pair","t":16,"rt":System.Object,"g":{"a":2,"n":"get_Pair","t":8,"rt":System.Object,"fg":"Pair"},"fn":"Pair"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.Boxification", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.Boxification, {
        f1: function (x) { },
        f2: function (x) {
            return x;
        },
        f3: function (l) {
            return System.Linq.Enumerable.from(l).orderBy($asm.$.Algorithms.WordGame.Boxification.f2).toList(System.Int32);
        },
        f4: function (pp) {
            return pp;
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastAccessibilityChecker", {
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        ctors: {
            init: function () {
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            },
            ctor: function (n) {
                this.$initialize();
                this._fixerResponses = System.Array.init(1 << ((((n + 1) | 0)) >> 1), System.UInt64(0), System.UInt64);
            }
        },
        methods: {
            IsAccessible: function (board, wonBoards) {
                var $t;
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        var x = board._trace[System.Array.index(i, board._trace)];
                        var y = board._trace[System.Array.index(j, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t.moveNext()) {
                                var breakerChoice = $t.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                for (var k = 1; k < this._fixerResponseCount; k = (k + 1) | 0) {
                                    var childBoard = new Algorithms.WordGame.Optimized.FastWord.$ctor1(board._trace, i, j, this._fixerResponses[System.Array.index(k, this._fixerResponses)], board._stackCount);
                                    if (wonBoards.contains(childBoard)) {
                                        winningSwapExists = true;
                                        break;
                                    }
                                }

                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                }

                return false;
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.TarpitEnumerator", {
        statics: {
            fields: {
                Alphabet: null
            },
            ctors: {
                init: function () {
                    this.Alphabet = $asm.$.Algorithms.WordGame.TarpitEnumerator.f1(new (System.Collections.Generic.List$1(System.Char))());
                }
            },
            methods: {
                IsPermutationClosed: function (S) {
                    return System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.EnumerateAlphabetPermutations(S)).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f3).distinct().count() === 1;
                },
                RemovePermutationRedundancies: function (S) {
                    var hash = new (System.Collections.Generic.HashSet$1(System.String)).ctor();
                    var permutedLists = System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.EnumerateAlphabetPermutations(S)).toList(System.Collections.Generic.List$1(System.String));
                    for (var i = 0; i < S.Count; i = (i + 1) | 0) {
                        hash.add(System.Linq.Enumerable.from(permutedLists).select(function (l) {
                                return l.getItem(i);
                            }).orderBy($asm.$.Algorithms.WordGame.TarpitEnumerator.f2).first());
                    }

                    return System.Linq.Enumerable.from(hash).toList(System.String);
                },
                ReorderAlphabetByOccurenceRate: function (S) {
                    return System.Linq.Enumerable.from(S).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f5).toList(System.String);
                },
                EnumerateAlphabetPermutations: function (S) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function (S) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            uppered,
                            $t,
                            permutation,
                            p,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            uppered = System.Linq.Enumerable.from(S).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f6).toList(System.String);
                                                $t = Bridge.getEnumerator(Algorithms.Utility.Permutation.EnumerateAll(3), Algorithms.Utility.Permutation);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    permutation = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            p = { v : permutation.Apply(System.Char, Algorithms.WordGame.TarpitEnumerator.Alphabet) };
                                                $enumerator.current = System.Linq.Enumerable.from(uppered).select((function ($me, p) {
                                                        return function (s) {
                                                            return System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, String.fromCharCode(88), String.fromCharCode(p.v.getItem(0))), String.fromCharCode(89), String.fromCharCode(p.v.getItem(1))), String.fromCharCode(90), String.fromCharCode(p.v.getItem(2)));
                                                        };
                                                    })(this, p)).toList(System.String);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        },
        methods: {
            GenerateMinimalTarpits: function (foundTarpit) { }
        }
    });

    Bridge.define("$AnonymousType$5", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (c, rate) {
                this.C = c;
                this.Rate = rate;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$5)) {
                    return false;
                }
                return Bridge.equals(this.C, o.C) && Bridge.equals(this.Rate, o.Rate);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196190, this.C, this.Rate]);
                return h;
            },
            toJSON: function () {
                return {
                    C : this.C,
                    Rate : this.Rate
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"C","t":16,"rt":System.Char,"g":{"a":2,"n":"get_C","t":8,"rt":System.Char,"fg":"C"},"fn":"C"},{"a":2,"n":"Rate","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_Rate","t":8,"rt":System.Int32,"fg":"Rate"},"fn":"Rate"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.TarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.TarpitEnumerator, {
        f1: function (_o23) {
            _o23.add(120);
            _o23.add(121);
            _o23.add(122);
            return _o23;
        },
        f2: function (s) {
            return s;
        },
        f3: function (T) {
            return Bridge.toArray(System.Linq.Enumerable.from(T).orderBy($asm.$.Algorithms.WordGame.TarpitEnumerator.f2)).join(",");
        },
        f4: function (d) {
            return d.Rate;
        },
        f5: function (s) {
            var chars = System.String.toCharArray(s, 0, s.length);
            var p = System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.Alphabet).select(function (c) {
                    return new $asm.$AnonymousType$5(c, System.Linq.Enumerable.from(chars).count(function (cc) {
                            return cc === c;
                        }));
                }).orderByDescending($asm.$.Algorithms.WordGame.TarpitEnumerator.f4).toList(System.Object);

            return System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, String.fromCharCode(p.getItem(0).C), String.fromCharCode(88)), String.fromCharCode(p.getItem(1).C), String.fromCharCode(89)), String.fromCharCode(p.getItem(2).C), String.fromCharCode(90)).toLowerCase();

        },
        f6: function (s) {
            return s.toUpperCase();
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWord", {
        fields: {
            _trace: null,
            _length: 0,
            _stackCount: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (trace, stackCount) {
                this.$initialize();
                this._trace = trace;
                this._length = this._trace.length;
                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            },
            $ctor1: function (trace, i, j, swap, stackCount) {
                this.$initialize();
                this._trace = System.Array.init(trace.length, System.UInt64(0), System.UInt64);
                this._length = 0;
                for (var k = 0; k < trace.length; k = (k + 1) | 0) {
                    var v = System.UInt64(0);
                    if (k === i || k === j) {
                        v = trace[System.Array.index(k, trace)].xor(swap);
                    } else {
                        v = trace[System.Array.index(k, trace)];
                    }

                    var q = this._length;
                    while (q > 0 && this._trace[System.Array.index(((q - 1) | 0), this._trace)].gt(v)) {
                        q = (q - 1) | 0;
                    }

                    if (q < this._length) {
                        System.Array.copy(this._trace, q << 3, this._trace, (((q + 1) | 0)) << 3, (((this._length - q) | 0)) << 3);
                    }
                    this._trace[System.Array.index(q, this._trace)] = v;

                    this._length = (this._length + 1) | 0;
                }

                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            }
        },
        methods: {
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.WordGame.Optimized.FastWord));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._trace[System.Array.index(i, this._trace)].ne(other._trace[System.Array.index(i, other._trace)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWordGenerator", {
        methods: {
            GenerateWords: function (length) {
                var words = System.Linq.Enumerable.from(Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate(System.Linq.Enumerable.repeat(1, length), 3)).select(function (trace) {
                        return new Algorithms.WordGame.Optimized.FastWord.ctor(trace, length);
                    }).toList(Algorithms.WordGame.Optimized.FastWord);
                return words;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine", {
        statics: {
            methods: {
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    return Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate$1(sizeVector, assignment, r, 0, System.UInt64(0), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = Algorithms.Int64Usage.RightFillToMSB(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = Algorithms.Int64Usage.RightFillToMSB(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.UInt64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                                                x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.UInt64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.WordGame.WordEnumerator", {
        fields: {
            _alphabet: null
        },
        ctors: {
            ctor: function (alphabet) {
                if (alphabet === void 0) { alphabet = []; }

                Algorithms.WordGame.WordEnumerator.$ctor1.call(this, Bridge.cast(alphabet, System.Collections.Generic.IEnumerable$1(System.Char)));
            },
            $ctor1: function (alphabet) {
                this.$initialize();
                this._alphabet = System.Linq.Enumerable.from(alphabet).toList(System.Char);
            }
        },
        methods: {
            EnumerateWords: function (length) {
                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Char, System.Linq.Enumerable.repeat(this._alphabet, length))).select($asm.$.Algorithms.WordGame.WordEnumerator.f1);
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.WordEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.WordEnumerator, {
        f1: function (chars) {
            return String.fromCharCode.apply(null, System.Linq.Enumerable.from(chars).toArray());
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_byte", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_byte.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.Byte)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.Byte);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Byte));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_byte.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_byte.Zeroes(sizeVector))) & 255;
                    BitLevelGeneration.Assignments_byte.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = (care & ~last) & 255;
                    var q = (~care & ~dontCare & last) & 255;

                    if (g > q) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB(g);
                        x = ((care & f) | (last & ~f)) & 255;
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB(q);
                        var t = (~f1 & last) & 255;
                        var y = (dontCare & ~f1 & ~t) & 255;
                        if (y === 0) {
                            return;
                        }

                        var y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 255;

                        x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 255;
                    } else {
                        x = last;
                    }

                    var end = (care | dontCare) & 255;
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.Byte);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_byte.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_byte.Zeroes(sizes);

                            if ((c & z) === 0) {
                                var dc = (~(c | z)) & 255;
                                BitLevelGeneration.Assignments_byte.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_byte.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_byte.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.Byte);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Byte));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_byte.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_byte.Zeroes(sizeVector))) & 255;
                    return BitLevelGeneration.Assignments_byte.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Byte)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Byte)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = (care & ~last) & 255;
                                                q = (~care & ~dontCare & last) & 255;

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB(g);
                                                x = ((care & f) | (last & ~f)) & 255;
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB(q);
                                                t = (~f1 & last) & 255;
                                                y = (dontCare & ~f1 & ~t) & 255;
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 255;

                                                x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 255;
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = (care | dontCare) & 255;
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.Byte);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_byte.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_byte.Zeroes(sizes);

                                                if ((c & z) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (~(c | z)) & 255;
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_byte.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.Byte));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_byte.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_long", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_long.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.Int64)))(countEstimate);
                    var assignment = System.Array.init(potSize, System.Int64(0), System.Int64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Int64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_long.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_long.Zeroes(sizeVector))).not();
                    BitLevelGeneration.Assignments_long.Generate$1(sizeVector, assignments, assignment, r, 0, System.Int64(1), c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = care.and(last.not());
                    var q = care.not().and(dontCare.not()).and(last);

                    if (g.gt(q)) {
                        var f = BitLevelGeneration.BitUsage_long.RightFillToMSB(g);
                        x = (care.and(f)).or((last.and(f.not())));
                    } else if (q.gt(g)) {
                        var f1 = BitLevelGeneration.BitUsage_long.RightFillToMSB(q);
                        var t = f1.not().and(last);
                        var y = dontCare.and(f1.not()).and(t.not());
                        if (y.equals(System.Int64(0))) {
                            return;
                        }

                        var y2 = dontCare.and(t).and((y.or((y.sub(System.Int64(1))))));

                        x = (care.and((f1.shr(1)))).or((t.and(y2.not()))).or((y.and((System.Int64(0).sub(y)))));
                    } else {
                        x = last;
                    }

                    var end = care.or(dontCare);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, System.Int64(0), System.Int64);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_long.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_long.Zeroes(sizes);

                            if ((c.and(z)).equals(System.Int64(0))) {
                                var dc = (c.or(z)).not();
                                BitLevelGeneration.Assignments_long.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_long.Increment(sizes, x);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_long.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.Int64(0), System.Int64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Int64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_long.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_long.Zeroes(sizeVector))).not();
                    return BitLevelGeneration.Assignments_long.Enumerate$1(sizeVector, assignment, r, 0, System.Int64(1), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitUsage_long.RightFillToMSB(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitUsage_long.RightFillToMSB(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.Int64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.Int64(1))))));

                                                x = (care.and((f1.shr(1)))).or((t.and(y2.not()))).or((y.and((System.Int64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.Int64(0), System.Int64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_long.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_long.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_long.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.Int64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_long.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.Int64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_long.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_uint", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_uint.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt32)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.UInt32);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt32));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_uint.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = ~(((c | BitLevelGeneration.BitVectors_uint.Zeroes(sizeVector)) >>> 0));
                    BitLevelGeneration.Assignments_uint.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = ((care & ~last) >>> 0);
                    var q = ((((~care & ~dontCare) >>> 0) & last) >>> 0);

                    if (g > q) {
                        var f = BitLevelGeneration.BitUsage_uint.RightFillToMSB(g);
                        x = (((((care & f) >>> 0)) | (((last & ~f) >>> 0))) >>> 0);
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitUsage_uint.RightFillToMSB(q);
                        var t = ((~f1 & last) >>> 0);
                        var y = ((((dontCare & ~f1) >>> 0) & ~t) >>> 0);
                        if (y === 0) {
                            return;
                        }

                        var y2 = ((((dontCare & t) >>> 0) & (((y | (((y - 1) >>> 0))) >>> 0))) >>> 0);

                        x = (((((((care & (f1 >>> 1)) >>> 0)) | (((t & ~y2) >>> 0))) >>> 0) | (((y & (((0 - y) >>> 0))) >>> 0))) >>> 0);
                    } else {
                        x = last;
                    }

                    var end = ((care | dontCare) >>> 0);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.UInt32);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_uint.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_uint.Zeroes(sizes);

                            if ((((c & z) >>> 0)) === 0) {
                                var dc = ~(((c | z) >>> 0));
                                BitLevelGeneration.Assignments_uint.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_uint.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_uint.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.UInt32);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt32));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_uint.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = ~(((c | BitLevelGeneration.BitVectors_uint.Zeroes(sizeVector)) >>> 0));
                    return BitLevelGeneration.Assignments_uint.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt32)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = ((care & ~last) >>> 0);
                                                q = ((((~care & ~dontCare) >>> 0) & last) >>> 0);

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitUsage_uint.RightFillToMSB(g);
                                                x = (((((care & f) >>> 0)) | (((last & ~f) >>> 0))) >>> 0);
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitUsage_uint.RightFillToMSB(q);
                                                t = ((~f1 & last) >>> 0);
                                                y = ((((dontCare & ~f1) >>> 0) & ~t) >>> 0);
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = ((((dontCare & t) >>> 0) & (((y | (((y - 1) >>> 0))) >>> 0))) >>> 0);

                                                x = (((((((care & (f1 >>> 1)) >>> 0)) | (((t & ~y2) >>> 0))) >>> 0) | (((y & (((0 - y) >>> 0))) >>> 0))) >>> 0);
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = ((care | dontCare) >>> 0);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.UInt32);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_uint.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_uint.Zeroes(sizes);

                                                if ((((c & z) >>> 0)) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = ~(((c | z) >>> 0));
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_uint.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt32));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_uint.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_ulong", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt64)))(countEstimate);
                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    BitLevelGeneration.Assignments_ulong.Generate$1(sizeVector, assignments, assignment, r, 0, System.UInt64(1), c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = care.and(last.not());
                    var q = care.not().and(dontCare.not()).and(last);

                    if (g.gt(q)) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB$2(g);
                        x = (care.and(f)).or((last.and(f.not())));
                    } else if (q.gt(g)) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB$2(q);
                        var t = f1.not().and(last);
                        var y = dontCare.and(f1.not()).and(t.not());
                        if (y.equals(System.UInt64(0))) {
                            return;
                        }

                        var y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                        x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                    } else {
                        x = last;
                    }

                    var end = care.or(dontCare);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                            if ((c.and(z)).equals(System.UInt64(0))) {
                                var dc = (c.or(z)).not();
                                BitLevelGeneration.Assignments_ulong.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    return BitLevelGeneration.Assignments_ulong.Enumerate$1(sizeVector, assignment, r, 0, System.UInt64(1), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB$2(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB$2(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.UInt64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                                                x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.UInt64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ulong.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_ushort", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ushort.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt16)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.UInt16);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt16));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ushort.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_ushort.Zeroes(sizeVector))) & 65535;
                    BitLevelGeneration.Assignments_ushort.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = (care & ~last) & 65535;
                    var q = (~care & ~dontCare & last) & 65535;

                    if (g > q) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB$1(g);
                        x = ((care & f) | (last & ~f)) & 65535;
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB$1(q);
                        var t = (~f1 & last) & 65535;
                        var y = (dontCare & ~f1 & ~t) & 65535;
                        if (y === 0) {
                            return;
                        }

                        var y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 65535;

                        x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 65535;
                    } else {
                        x = last;
                    }

                    var end = (care | dontCare) & 65535;
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.UInt16);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_ushort.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_ushort.Zeroes(sizes);

                            if ((c & z) === 0) {
                                var dc = (~(c | z)) & 65535;
                                BitLevelGeneration.Assignments_ushort.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_ushort.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ushort.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.UInt16);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt16));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ushort.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_ushort.Zeroes(sizeVector))) & 65535;
                    return BitLevelGeneration.Assignments_ushort.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt16)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt16)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = (care & ~last) & 65535;
                                                q = (~care & ~dontCare & last) & 65535;

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB$1(g);
                                                x = ((care & f) | (last & ~f)) & 65535;
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB$1(q);
                                                t = (~f1 & last) & 65535;
                                                y = (dontCare & ~f1 & ~t) & 65535;
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 65535;

                                                x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 65535;
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = (care | dontCare) & 65535;
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.UInt16);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ushort.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ushort.Zeroes(sizes);

                                                if ((c & z) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (~(c | z)) & 65535;
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ushort.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt16));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ushort.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.IGraph_long", {
        $kind: "interface"
    });

    Bridge.define("BitLevelGeneration.IGraph_uint", {
        $kind: "interface"
    });

    Bridge.define("BitLevelGeneration.BitOperations", {
        statics: {
            methods: {
                To_ulong: function (bits) {
                    var $t;
                    var x = System.UInt64(0);
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = x.or((System.UInt64(1).shl(bit)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                To_ushort: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | ((1 << bit) & 65535)) & 65535;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                To_byte: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | ((1 << bit) & 255)) & 255;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                RightFillToMSB$2: function (x) {
                    x = x.or((x.shru(1)));
                    x = x.or((x.shru(2)));
                    x = x.or((x.shru(4)));
                    x = x.or((x.shru(8)));
                    x = x.or((x.shru(16)));
                    x = x.or((x.shru(32)));

                    return x;
                },
                RightFillToMSB$1: function (x) {
                    x = (x | ((x >> 1) & 65535)) & 65535;
                    x = (x | ((x >> 2) & 65535)) & 65535;
                    x = (x | ((x >> 4) & 65535)) & 65535;
                    x = (x | ((x >> 8) & 65535)) & 65535;

                    return x;
                },
                RightFillToMSB: function (x) {
                    x = (x | ((x >> 1) & 255)) & 255;
                    x = (x | ((x >> 2) & 255)) & 255;
                    x = (x | ((x >> 4) & 255)) & 255;

                    return x;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitUsage_long", {
        statics: {
            fields: {
                DeBruijnMultiplier: System.UInt64(0),
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = System.UInt64(System.Int64([-1706153790,133027301]));
                    this.DeBruijnLookup = System.Array.init([
                        63, 
                        0, 
                        58, 
                        1, 
                        59, 
                        47, 
                        53, 
                        2, 
                        60, 
                        39, 
                        48, 
                        27, 
                        54, 
                        33, 
                        42, 
                        3, 
                        61, 
                        51, 
                        37, 
                        40, 
                        49, 
                        18, 
                        28, 
                        20, 
                        55, 
                        30, 
                        34, 
                        11, 
                        43, 
                        14, 
                        22, 
                        4, 
                        62, 
                        57, 
                        46, 
                        52, 
                        38, 
                        26, 
                        32, 
                        41, 
                        50, 
                        36, 
                        17, 
                        19, 
                        29, 
                        10, 
                        13, 
                        21, 
                        56, 
                        45, 
                        25, 
                        31, 
                        35, 
                        16, 
                        9, 
                        12, 
                        44, 
                        24, 
                        15, 
                        8, 
                        23, 
                        7, 
                        6, 
                        5
                    ], System.Int32);
                }
            },
            methods: {
                Extract: function (x) {
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(x).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier)).shru(58)), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                LeastSignificantBit: function (x) {
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.clipu64((x.and(x.neg()))).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier).shru(58), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = x.v.and(x.v.neg());
                    x.v = x.v.xor(m);
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(m).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier)).shru(58)), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b.gt(System.Int64(0))) {
                        q = (q + 1) | 0;
                        b = b.and((b.sub(System.Int64(1))));
                    }
                    return q;
                },
                PopulationCountDense: function (x) {
                    x = x.sub(((x.shr(1)).and(System.Int64([1431655765,1431655765]))));
                    x = (x.and(System.Int64([858993459,858993459]))).add(((x.shr(2)).and(System.Int64([858993459,858993459]))));
                    x = (x.add((x.shr(4)))).and(System.Int64([252645135,252645135]));
                    x = (x.mul(System.Int64([16843009,16843009]))).shr(56);

                    return System.Int64.clip32(x);
                },
                ToSet: function (x) {
                    x = {v:x};
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x.v.ne(System.Int64(0))) {
                        onBits.add(BitLevelGeneration.BitUsage_long.GetAndClearLeastSignificantBit(x));
                    }

                    return onBits;
                },
                RightFillToMSB: function (x) {
                    x = x.or((x.shr(1)));
                    x = x.or((x.shr(2)));
                    x = x.or((x.shr(4)));
                    x = x.or((x.shr(8)));
                    x = x.or((x.shr(16)));

                    return x;
                },
                To_long: function (bits) {
                    var $t;
                    var x = System.Int64(0);
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = x.or((System.Int64(1).shl(bit)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                Or: function (colorGraph, offset) {
                    var result = System.Int64(0);
                    for (var i = offset; i < colorGraph.length; i = (i + 1) | 0) {
                        result = result.or(colorGraph[System.Array.index(i, colorGraph)]);
                    }
                    return result;
                },
                TrueForAllBitIndices: function (x, predicate) {
                    x = {v:x};
                    while (x.v.ne(System.Int64(0))) {
                        if (!predicate(BitLevelGeneration.BitUsage_long.GetAndClearLeastSignificantBit(x))) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitUsage_uint", {
        statics: {
            fields: {
                DeBruijnMultiplier: 0,
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = 125613361;
                    this.DeBruijnLookup = System.Array.init([0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8, 31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9], System.Int32);
                }
            },
            methods: {
                Extract: function (x) {
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul(x, BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                LeastSignificantBit: function (x) {
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul((((x & (((~x + 1) >>> 0))) >>> 0)), BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = (x.v & (((~x.v + 1) >>> 0))) >>> 0;
                    x.v = (x.v ^ m) >>> 0;
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul(m, BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b > 0) {
                        q = (q + 1) | 0;
                        b = (b & (((b - 1) >>> 0))) >>> 0;
                    }
                    return q;
                },
                ToSet: function (x) {
                    x = {v:x};
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x.v !== 0) {
                        onBits.add(BitLevelGeneration.BitUsage_uint.GetAndClearLeastSignificantBit(x));
                    }

                    return onBits;
                },
                RightFillToMSB: function (x) {
                    x = (x | (x >>> 1)) >>> 0;
                    x = (x | (x >>> 2)) >>> 0;
                    x = (x | (x >>> 4)) >>> 0;
                    x = (x | (x >>> 8)) >>> 0;
                    x = (x | (x >>> 16)) >>> 0;

                    return x;
                },
                To_uint: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | (((1 << bit) >>> 0))) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                Or: function (colorGraph, offset) {
                    var result = 0;
                    for (var i = offset; i < colorGraph.length; i = (i + 1) | 0) {
                        result = (result | colorGraph[System.Array.index(i, colorGraph)]) >>> 0;
                    }
                    return result;
                },
                TrueForAllBitIndices: function (x, predicate) {
                    x = {v:x};
                    while (x.v !== 0) {
                        if (!predicate(BitLevelGeneration.BitUsage_uint.GetAndClearLeastSignificantBit(x))) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_byte", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(8);
                    for (var i = 0; i < 8; i = (i + 1) | 0) {
                        var b = (1 << i) & 255;
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b & n.getItem(j)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.Byte))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) & 255)) & 255;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & n.getItem(i)) & 255;
                        var t2 = (m ^ n.getItem(i)) & 255;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & ~n.getItem(i)) & 255;
                        var t2 = (m ^ n.getItem(i)) & 255;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) & 255;
                    }

                    return ((~m) & 255);
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) & 255;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) & 255;
                            } else {
                                a = (a | ((~b & n.getItem(i) & ~k.getItem(i)) & 255)) & 255;
                                b = (b | ((~a & ~n.getItem(i) & k.getItem(i)) & 255)) & 255;
                            }
                        }
                    }

                    return ((a & ~b) & 255);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_long", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(64);
                    for (var i = 0; i < 64; i = (i + 1) | 0) {
                        var b = System.Int64(1).shl(i);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b.and(n.getItem(j))).ne(System.Int64(0))) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.Int64))();
                    while (true) {
                        var m = System.Int64(0);
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = m.or(System.Int64(1).shl(i));
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m.ne(System.Int64(0))) {
                        var t1 = m.and(n.getItem(i));
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m.ne(System.Int64(0))) {
                        var t1 = m.and(n.getItem(i).not());
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = System.Int64(0);
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = m.or(n.getItem(i));
                    }

                    return m.not();
                },
                GreaterThan: function (n, k) {
                    var a = System.Int64(0);
                    var b = System.Int64(0);
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = a.or(n.getItem(i));
                        } else {
                            if (i >= n.Count) {
                                b = b.or(k.getItem(i));
                            } else {
                                a = a.or(b.not().and(n.getItem(i)).and(k.getItem(i).not()));
                                b = b.or(a.not().and(n.getItem(i).not()).and(k.getItem(i)));
                            }
                        }
                    }

                    return a.and(b.not());
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_uint", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(32);
                    for (var i = 0; i < 32; i = (i + 1) | 0) {
                        var b = ((1 << i) >>> 0);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((((b & n.getItem(j)) >>> 0)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt32))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) >>> 0)) >>> 0;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = ((m & n.getItem(i)) >>> 0);
                        var t2 = ((m ^ n.getItem(i)) >>> 0);

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = ((m & ~n.getItem(i)) >>> 0);
                        var t2 = ((m ^ n.getItem(i)) >>> 0);

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) >>> 0;
                    }

                    return ~m;
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) >>> 0;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) >>> 0;
                            } else {
                                a = (a | ((((~b & n.getItem(i)) >>> 0) & ~k.getItem(i)) >>> 0)) >>> 0;
                                b = (b | ((((~a & ~n.getItem(i)) >>> 0) & k.getItem(i)) >>> 0)) >>> 0;
                            }
                        }
                    }

                    return ((a & ~b) >>> 0);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_ulong", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(64);
                    for (var i = 0; i < 64; i = (i + 1) | 0) {
                        var b = System.UInt64(1).shl(i);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b.and(n.getItem(j))).ne(System.UInt64(0))) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt64))();
                    while (true) {
                        var m = System.UInt64(0);
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = m.or(System.UInt64(1).shl(i));
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m.ne(System.UInt64(0))) {
                        var t1 = m.and(n.getItem(i));
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m.ne(System.UInt64(0))) {
                        var t1 = m.and(n.getItem(i).not());
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = System.UInt64(0);
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = m.or(n.getItem(i));
                    }

                    return m.not();
                },
                GreaterThan: function (n, k) {
                    var a = System.UInt64(0);
                    var b = System.UInt64(0);
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = a.or(n.getItem(i));
                        } else {
                            if (i >= n.Count) {
                                b = b.or(k.getItem(i));
                            } else {
                                a = a.or(b.not().and(n.getItem(i)).and(k.getItem(i).not()));
                                b = b.or(a.not().and(n.getItem(i).not()).and(k.getItem(i)));
                            }
                        }
                    }

                    return a.and(b.not());
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_ushort", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(16);
                    for (var i = 0; i < 16; i = (i + 1) | 0) {
                        var b = (1 << i) & 65535;
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b & n.getItem(j)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt16))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) & 65535)) & 65535;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & n.getItem(i)) & 65535;
                        var t2 = (m ^ n.getItem(i)) & 65535;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & ~n.getItem(i)) & 65535;
                        var t2 = (m ^ n.getItem(i)) & 65535;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) & 65535;
                    }

                    return ((~m) & 65535);
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) & 65535;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) & 65535;
                            } else {
                                a = (a | ((~b & n.getItem(i) & ~k.getItem(i)) & 65535)) & 65535;
                                b = (b | ((~a & ~n.getItem(i) & k.getItem(i)) & 65535)) & 65535;
                            }
                        }
                    }

                    return ((a & ~b) & 65535);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.GraphChoosability_long", {
        statics: {
            methods: {
                IsFChoosable: function (graph, f, badAssignment) {
                    var $step = 0,
                        $jumpFromFinally, 
                        liveVertexBits, 
                        sizes, 
                        maxListSize, 
                        potSize, 
                        $t, 
                        colorGraph, 
                        xx, 
                        i, 
                        i1, 
                        j, 
                        $t1, 
                        color, 
                        $t2, 
                        v, 
                        list, 
                        bit, 
                        i2, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,18,20,21,22,23,24,25,27,28,30,31], $step);
                                switch ($step) {
                                    case 0: {
                                        badAssignment.v = null;

                                        liveVertexBits = BitLevelGeneration.BitUsage_long.To_long(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_long$N));
                                        sizes = System.Linq.Enumerable.from(graph.BitLevelGeneration$IGraph_long$Vertices).select(function (v) {
                                            return f(v);
                                        }).toList(System.Int32);
                                        maxListSize = System.Linq.Enumerable.from(sizes).max();

                                        potSize = maxListSize;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( potSize < graph.BitLevelGeneration$IGraph_long$N ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 31;
                                        continue;
                                    }
                                    case 2: {
                                        $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_long.Enumerate(sizes, potSize), System.Array.type(System.Int64));
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                            colorGraph = $t.Current;
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 29;
                                        continue;
                                    }
                                    case 4: {
                                        if (potSize > maxListSize) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 5: {
                                        xx = System.Int64(0);
                                        i = 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        if ( i < colorGraph.length ) {
                                            $step = 7;
                                            continue;
                                        }
                                        $step = 11;
                                        continue;
                                    }
                                    case 7: {
                                        xx = xx.or(colorGraph[System.Array.index(i, colorGraph)]);

                                        if (BitLevelGeneration.BitUsage_long.PopulationCount(xx) <= ((i + 1) | 0)) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 9;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 10: {
                                        i = (i + 1) | 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 11: {
                                        i1 = 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {
                                        if ( i1 < colorGraph.length ) {
                                            $step = 13;
                                            continue;
                                        }
                                        $step = 21;
                                        continue;
                                    }
                                    case 13: {
                                        j = (i1 + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {
                                        if ( j < colorGraph.length ) {
                                            $step = 15;
                                            continue;
                                        }
                                        $step = 19;
                                        continue;
                                    }
                                    case 15: {
                                        if ((colorGraph[System.Array.index(i1, colorGraph)].and(colorGraph[System.Array.index(j, colorGraph)])).equals(System.Int64(0))) {
                                            $step = 16;
                                            continue;
                                        } 
                                        $step = 17;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 18: {
                                        j = (j + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }

                                    case 20: {
                                        i1 = (i1 + 1) | 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 21: {
                                        $t1 = Bridge.getEnumerator(colorGraph);
                                        $step = 22;
                                        continue;
                                    }
                                    case 22: {
                                        if ($t1.moveNext()) {
                                            color = $t1.Current;
                                            $step = 23;
                                            continue;
                                        }
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        if (graph.BitLevelGeneration$IGraph_long$IsIndependent(color)) {
                                            $step = 24;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 24: {
                                        $step = 28;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 22;
                                        continue;
                                    }

                                    case 27: {
                                        if (!BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, liveVertexBits, System.Int64(0))) {
                                            badAssignment.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $t2 = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_long$Vertices, System.Int32);
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    list = new (System.Collections.Generic.List$1(System.Int32))();
                                                    bit = System.Int64(1).shl(v);
                                                    for (i2 = 0; i2 < colorGraph.length; i2 = (i2 + 1) | 0) {
                                                        if ((bit.and(colorGraph[System.Array.index(i2, colorGraph)])).ne(System.Int64(0))) {
                                                            list.add(i2);
                                                        }
                                                    }

                                                    badAssignment.v.add(list);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            return false;
                                        }
                                    }
                                    case 28: {
                                        ;
                                        $step = 3;
                                        continue;
                                    }

                                    case 30: {
                                        potSize = (potSize + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 31: {
                                        return true;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                IsChoosable: function (graph, colorGraph) {
                    return BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, BitLevelGeneration.BitUsage_long.To_long(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_long$N)), System.Int64(0));
                },
                IsChoosable$1: function (graph, colorGraph, subset) {
                    return BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, subset, System.Int64(0));
                },
                IsChoosable$2: function (graph, colorGraph, liveVertexBits, c) {
                    var $t;
                    liveVertexBits = {v:liveVertexBits};
                    BitLevelGeneration.GraphChoosability_long.BeGreedy(graph, colorGraph, liveVertexBits, c);
                    if (liveVertexBits.v.equals(System.Int64(0))) {
                        return true;
                    }
                    if ((liveVertexBits.v.and(BitLevelGeneration.BitUsage_long.Or(colorGraph, c).not())).ne(System.Int64(0))) {
                        return false;
                    }

                    var choosable = false;
                    var V = colorGraph[System.Array.index(c, colorGraph)].and(liveVertexBits.v);
                    $t = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_long$MaximalIndependentSubsets(V), System.Int64);
                    try {
                        while ($t.moveNext()) {
                            var C = $t.Current;
                            if (BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, liveVertexBits.v.xor(C), System.Int64(c + 1))) {
                                choosable = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return choosable;
                },
                BeGreedy: function (graph, colorGraph, liveVertexBits, c) {
                    while (true) {
                        var originalBits = liveVertexBits.v;
                        var bits = liveVertexBits.v;
                        while (bits.ne(System.Int64(0))) {
                            var bit = bits.and(bits.neg());
                            bits = bits.xor(bit);

                            var colorCount = 0;
                            for (var i = c; i < colorGraph.length; i = (i + 1) | 0) {
                                if ((bit.and(colorGraph[System.Array.index(i, colorGraph)])).ne(System.Int64(0))) {
                                    colorCount = (colorCount + 1) | 0;
                                }
                            }

                            if (colorCount > graph.BitLevelGeneration$IGraph_long$DegreeInSet(BitLevelGeneration.BitUsage_long.Extract(bit), liveVertexBits.v)) {
                                liveVertexBits.v = liveVertexBits.v.xor(bit);
                            }
                        }

                        if (liveVertexBits.v.equals(originalBits)) {
                            break;
                        }
                    }
                },
                IsSubsetTwoColorable: function (g, set) {
                    var c = System.Array.init(g.N, 0, System.Int32);
                    var q = System.Array.init(g.N, 0, System.Int32);

                    var leftover = set;
                    var s = 0;
                    while (leftover.ne(System.Int64(0))) {
                        var r = BitLevelGeneration.BitUsage_long.LeastSignificantBit(leftover);
                        q[System.Array.index(s, q)] = r;
                        c[System.Array.index(r, c)] = 1;
                        var e = s;

                        while (s <= e) {
                            var v = q[System.Array.index(Bridge.identity(s, (s = (s + 1) | 0)), q)];
                            var n = g.NeighborsInSet(v, set);

                            while (n.ne(System.Int64(0))) {
                                var bit = n.and(n.neg());
                                var w = BitLevelGeneration.BitUsage_long.Extract(bit);

                                if (c[System.Array.index(w, c)] === 0) {
                                    q[System.Array.index(((e = (e + 1) | 0)), q)] = w;
                                    c[System.Array.index(w, c)] = (3 - c[System.Array.index(v, c)]) | 0;
                                } else if (c[System.Array.index(w, c)] !== ((3 - c[System.Array.index(v, c)]) | 0)) {
                                    return false;
                                }

                                n = n.xor(bit);
                            }

                            leftover = leftover.xor((System.Int64(1).shl(v)));
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.GraphChoosability_uint", {
        statics: {
            methods: {
                IsFChoosable: function (graph, f, badAssignment) {
                    var nodesVisited = { }, cacheHits = { };
                    return BitLevelGeneration.GraphChoosability_uint.IsFChoosable$1(graph, f, badAssignment, nodesVisited, cacheHits);
                },
                IsFChoosable$1: function (graph, f, badAssignment, nodesVisited, cacheHits) {
                    var $step = 0,
                        $jumpFromFinally, 
                        liveVertexBits, 
                        sizes, 
                        maxListSize, 
                        potSize, 
                        cache, 
                        $t, 
                        colorGraph, 
                        xx, 
                        i, 
                        i1, 
                        j, 
                        $t1, 
                        color, 
                        $t2, 
                        v, 
                        list, 
                        bit, 
                        i2, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,18,20,21,22,23,24,25,27,28,30,31], $step);
                                switch ($step) {
                                    case 0: {
                                        badAssignment.v = null;

                                        nodesVisited.v = System.Int64(0);
                                        cacheHits.v = System.Int64(0);
                                        liveVertexBits = BitLevelGeneration.BitUsage_uint.To_uint(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_uint$N));
                                        sizes = System.Linq.Enumerable.from(graph.BitLevelGeneration$IGraph_uint$Vertices).select(function (v) {
                                            return f(v);
                                        }).toList(System.Int32);
                                        maxListSize = System.Linq.Enumerable.from(sizes).max();

                                        potSize = maxListSize;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( potSize < graph.BitLevelGeneration$IGraph_uint$N ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 31;
                                        continue;
                                    }
                                    case 2: {
                                        //var cache = new Dictionary<BitLevelGeneration.HashedAssignment_uint, bool>();
                                        cache = null;

                                        $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_uint.Enumerate(sizes, potSize), System.Array.type(System.UInt32));
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                            colorGraph = $t.Current;
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 29;
                                        continue;
                                    }
                                    case 4: {
                                        if (potSize > maxListSize) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 5: {
                                        xx = 0;
                                        i = 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        if ( i < colorGraph.length ) {
                                            $step = 7;
                                            continue;
                                        }
                                        $step = 11;
                                        continue;
                                    }
                                    case 7: {
                                        xx = (xx | colorGraph[System.Array.index(i, colorGraph)]) >>> 0;

                                        if (BitLevelGeneration.BitUsage_uint.PopulationCount(xx) <= ((i + 1) | 0)) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 9;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 10: {
                                        i = (i + 1) | 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 11: {
                                        i1 = 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {
                                        if ( i1 < colorGraph.length ) {
                                            $step = 13;
                                            continue;
                                        }
                                        $step = 21;
                                        continue;
                                    }
                                    case 13: {
                                        j = (i1 + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {
                                        if ( j < colorGraph.length ) {
                                            $step = 15;
                                            continue;
                                        }
                                        $step = 19;
                                        continue;
                                    }
                                    case 15: {
                                        if ((((colorGraph[System.Array.index(i1, colorGraph)] & colorGraph[System.Array.index(j, colorGraph)]) >>> 0)) === 0) {
                                            $step = 16;
                                            continue;
                                        } 
                                        $step = 17;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 18: {
                                        j = (j + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }

                                    case 20: {
                                        i1 = (i1 + 1) | 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 21: {
                                        $t1 = Bridge.getEnumerator(colorGraph);
                                        $step = 22;
                                        continue;
                                    }
                                    case 22: {
                                        if ($t1.moveNext()) {
                                            color = $t1.Current;
                                            $step = 23;
                                            continue;
                                        }
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        if (graph.BitLevelGeneration$IGraph_uint$IsIndependent(color)) {
                                            $step = 24;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 24: {
                                        $step = 28;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 22;
                                        continue;
                                    }

                                    case 27: {
                                        if (!BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, liveVertexBits, 0, cache, nodesVisited, cacheHits)) {
                                            badAssignment.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $t2 = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_uint$Vertices, System.Int32);
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    list = new (System.Collections.Generic.List$1(System.Int32))();
                                                    bit = (1 << v) >>> 0;
                                                    for (i2 = 0; i2 < colorGraph.length; i2 = (i2 + 1) | 0) {
                                                        if ((((bit & colorGraph[System.Array.index(i2, colorGraph)]) >>> 0)) !== 0) {
                                                            list.add(i2);
                                                        }
                                                    }

                                                    badAssignment.v.add(list);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            return false;
                                        }
                                    }
                                    case 28: {
                                        ;
                                        $step = 3;
                                        continue;
                                    }

                                    case 30: {
                                        potSize = (potSize + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 31: {
                                        return true;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                IsChoosable: function (graph, colorGraph) {
                    var nodesVisited = { }, cacheHits = { };
                    return BitLevelGeneration.GraphChoosability_uint.IsChoosable$1(graph, colorGraph, nodesVisited, cacheHits);
                },
                IsChoosable$1: function (graph, colorGraph, nodesVisited, cacheHits) {
                    nodesVisited.v = System.Int64(0);
                    cacheHits.v = System.Int64(0);
                    //var cache = new Dictionary<BitLevelGeneration.HashedAssignment_uint, bool>();
                    var cache = null;

                    return BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, BitLevelGeneration.BitUsage_uint.To_uint(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_uint$N)), 0, cache, nodesVisited, cacheHits);
                },
                IsChoosable$2: function (graph, colorGraph, liveVertexBits, c, cache, nodesVisited, cacheHits) {
                    var $t;
                    liveVertexBits = {v:liveVertexBits};
                    nodesVisited.v = nodesVisited.v.inc();

                    BitLevelGeneration.GraphChoosability_uint.BeGreedy(graph, colorGraph, liveVertexBits, c);
                    if (liveVertexBits.v === 0) {
                        return true;
                    }
                    if ((((liveVertexBits.v & ~BitLevelGeneration.BitUsage_uint.Or(colorGraph, c)) >>> 0)) !== 0) {
                        return false;
                    }

                    //bool cachedResult;
                    //var key = new BitLevelGeneration.HashedAssignment_uint(colorGraph, c, liveVertexBits);
                    //if (cache.TryGetValue(key, out cachedResult))
                    //{
                    //    cacheHits++;
                    //    return cachedResult;
                    //}

                    var choosable = false;
                    var V = (colorGraph[System.Array.index(c, colorGraph)] & liveVertexBits.v) >>> 0;
                    $t = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_uint$MaximalIndependentSubsets(V), System.UInt32);
                    try {
                        while ($t.moveNext()) {
                            var C = $t.Current;
                            if (BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, ((liveVertexBits.v ^ C) >>> 0), ((c + 1) | 0), cache, nodesVisited, cacheHits)) {
                                choosable = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    //cache[key] = choosable;
                    return choosable;
                },
                BeGreedy: function (graph, colorGraph, liveVertexBits, c) {
                    while (true) {
                        var originalBits = liveVertexBits.v;
                        var bits = liveVertexBits.v;
                        while (bits !== 0) {
                            var bit = (bits & (((~bits + 1) >>> 0))) >>> 0;
                            bits = (bits ^ bit) >>> 0;

                            var colorCount = 0;
                            for (var i = c; i < colorGraph.length; i = (i + 1) | 0) {
                                if ((((bit & colorGraph[System.Array.index(i, colorGraph)]) >>> 0)) !== 0) {
                                    colorCount = (colorCount + 1) | 0;
                                }
                            }

                            if (colorCount > graph.BitLevelGeneration$IGraph_uint$DegreeInSet(BitLevelGeneration.BitUsage_uint.Extract(bit), liveVertexBits.v)) {
                                liveVertexBits.v = (liveVertexBits.v ^ bit) >>> 0;
                            }
                        }

                        if (liveVertexBits.v === originalBits) {
                            break;
                        }
                    }
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_byte", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.Byte);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = (assignment[System.Array.index(i, assignment)] & on) & 255;
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_byte));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_uint", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.UInt32);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = ((assignment[System.Array.index(i, assignment)] & on) >>> 0);
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_uint));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_ulong", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), System.UInt64(0), System.UInt64);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = assignment[System.Array.index(i, assignment)].and(on);
                    if (x.ne(System.UInt64(0))) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = list[System.Array.index(i, list)].add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_ulong));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)].ne(other._assignment[System.Array.index(i, other._assignment)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_ushort", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.UInt16);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = (assignment[System.Array.index(i, assignment)] & on) & 65535;
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_ushort));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.MaximalndependentSetSearching", {
        statics: {
            methods: {
                GenerateMaximalIndependentSubsets: function (g, set) {
                    var d = System.Array.init(64, 0, System.Int32);

                    var n = BitLevelGeneration.BitUsage_long.PopulationCountDense(set);
                    var D = System.Array.init(n, System.Int64(0), System.Int64);

                    var q = set;
                    while (q.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);

                        d[System.Array.index(v, d)] = g.DegreeInSet(v, set);
                        D[System.Array.index(d[System.Array.index(v, d)], D)] = D[System.Array.index(d[System.Array.index(v, d)], D)].or(bit);

                        q = q.xor(bit);
                    }

                    var bits = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        for (var j = 0; j < n; j = (j + 1) | 0) {
                            if (D[System.Array.index(j, D)].ne(System.Int64(0))) {
                                var bit1 = D[System.Array.index(j, D)].and(D[System.Array.index(j, D)].neg());
                                bits[System.Array.index(((((n - 1) | 0) - i) | 0), bits)] = bit1;

                                var v1 = BitLevelGeneration.BitUsage_long.Extract(bit1);
                                q = g.NeighborsInSet(v1, set);

                                while (q.ne(System.Int64(0))) {
                                    var b = q.and(q.neg());
                                    var x = BitLevelGeneration.BitUsage_long.Extract(b);

                                    D[System.Array.index(d[System.Array.index(x, d)], D)] = D[System.Array.index(d[System.Array.index(x, d)], D)].xor(b);
                                    d[System.Array.index(x, d)] = (d[System.Array.index(x, d)] - 1) | 0;
                                    D[System.Array.index(d[System.Array.index(x, d)], D)] = D[System.Array.index(d[System.Array.index(x, d)], D)].or(b);

                                    q = q.xor(b);
                                }

                                set = set.xor(bit1);
                                D[System.Array.index(j, D)] = D[System.Array.index(j, D)].xor(bit1);
                                break;
                            }
                        }
                    }

                    return BitLevelGeneration.MaximalndependentSetSearching.GenerateMaximalIndependentSubsets$1(g, bits);
                },
                GenerateMaximalIndependentSubsets$1: function (g, bits) {
                    var $step = 0,
                        $jumpFromFinally, 
                        mis, 
                        earlier, 
                        j, 
                        bit, 
                        v, 
                        count, 
                        i, 
                        m, 
                        N, 
                        mp, 
                        mpp, 
                        q, 
                        l, 
                        b, 
                        w, 
                        qq, 
                        bb, 
                        z, 
                        X, 
                        b1, 
                        w1, 
                        Z, 
                        mm, 
                        b2, 
                        w2, 
                        qq1, 
                        bb1, 
                        z1, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,28,29,31,32,33,34], $step);
                                switch ($step) {
                                    case 0: {
                                        mis = new (System.Collections.Generic.List$1(System.Int64))(8);
                                        mis.add(System.Int64(0));

                                        earlier = System.Int64(0);
                                        j = 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( j < bits.length ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 34;
                                        continue;
                                    }
                                    case 2: {
                                        bit = bits[System.Array.index(j, bits)];
                                        v = BitLevelGeneration.BitUsage_long.Extract(bit);

                                        count = mis.Count;
                                        i = 0;
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ( i < count ) {
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 32;
                                        continue;
                                    }
                                    case 4: {
                                        m = mis.getItem(i);
                                        N = g.NeighborsInSet(v, m);
                                        if (N.equals(System.Int64(0))) {
                                            $step = 5;
                                            continue;
                                        } else  {
                                            $step = 6;
                                            continue;
                                        }
                                    }
                                    case 5: {
                                        mis.setItem(i, mis.getItem(i).or(bit));
                                        $step = 30;
                                        continue;
                                    }
                                    case 6: {
                                        mp = m.and(N.not());
                                        mpp = mp.or(bit);
                                        q = N;
                                        l = earlier.and(mpp.not());

                                        
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        if ( q.ne(System.Int64(0)) ) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 14;
                                        continue;
                                    }
                                    case 8: {
                                        b = q.and(q.neg());
                                        w = BitLevelGeneration.BitUsage_long.Extract(b);

                                        qq = g.NeighborsInSet(w, l);
                                        
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {
                                        if ( qq.ne(System.Int64(0)) ) {
                                            $step = 10;
                                            continue;
                                        } 
                                        $step = 13;
                                        continue;
                                    }
                                    case 10: {
                                        bb = qq.and(qq.neg());
                                        z = BitLevelGeneration.BitUsage_long.Extract(bb);

                                        if (g.NeighborsInSet(z, mpp).equals(System.Int64(0))) {
                                            $step = 11;
                                            continue;
                                        } 
                                        $step = 12;
                                        continue;
                                    }
                                    case 11: {
                                        $step = 29;
                                        continue;
                                    }
                                    case 12: {
                                        qq = qq.xor(bb);

                                        $step = 9;
                                        continue;
                                    }
                                    case 13: {
                                        q = q.xor(b);

                                        $step = 7;
                                        continue;
                                    }
                                    case 14: {
                                        X = g.NeighborsInSet(v, earlier);
                                        q = X.and(N.not());

                                        while (q.ne(System.Int64(0))) {
                                            b1 = q.and(q.neg());
                                            w1 = BitLevelGeneration.BitUsage_long.Extract(b1);

                                            if (g.NeighborsInSet(w1, mp).ne(System.Int64(0))) {
                                                X = X.xor(b1);
                                            }
                                            q = q.xor(b1);
                                        }

                                        if (X.ne(N)) {
                                            $step = 15;
                                            continue;
                                        } 
                                        $step = 28;
                                        continue;
                                    }
                                    case 15: {
                                        Z = System.Int64(0);
                                        
                                        $step = 16;
                                        continue;
                                    }
                                    case 16: {
                                        if ( Z.lt(N) ) {
                                            $step = 17;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 17: {
                                        Z = (Z.sub(X)).and(X);

                                        if ((Z.and(N)).equals(Z)) {
                                            $step = 16;
                                            continue;
                                        }

                                        if (!g.IsIndependent(Z)) {
                                            $step = 16;
                                            continue;
                                        }

                                        mm = mp.or(Z);
                                        l = earlier.and(mm.not());
                                        q = N.and(Z.not());

                                        
                                        $step = 18;
                                        continue;
                                    }
                                    case 18: {
                                        if ( q.ne(System.Int64(0)) ) {
                                            $step = 19;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 19: {
                                        b2 = q.and(q.neg());
                                        w2 = BitLevelGeneration.BitUsage_long.Extract(b2);

                                        qq1 = g.NeighborsInSet(w2, l);
                                        
                                        $step = 20;
                                        continue;
                                    }
                                    case 20: {
                                        if ( qq1.ne(System.Int64(0)) ) {
                                            $step = 21;
                                            continue;
                                        } 
                                        $step = 24;
                                        continue;
                                    }
                                    case 21: {
                                        bb1 = qq1.and(qq1.neg());
                                        z1 = BitLevelGeneration.BitUsage_long.Extract(bb1);

                                        if (g.NeighborsInSet(z1, mm).equals(System.Int64(0))) {
                                            $step = 22;
                                            continue;
                                        } 
                                        $step = 23;
                                        continue;
                                    }
                                    case 22: {
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        qq1 = qq1.xor(bb1);

                                        $step = 20;
                                        continue;
                                    }
                                    case 24: {
                                        q = q.xor(b2);

                                        $step = 18;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 29;
                                        continue;
                                    }
                                    case 26: {
                                        ;

                                        $step = 16;
                                        continue;
                                    }

                                    case 28: {
                                        mis.add((m.or(bit)).and(N.not()));
                                    }
                                    case 29: {
                                        ;
                                        $step = 30;
                                        continue;
                                    }

                                    case 31: {
                                        i = (i + 1) | 0;
                                        $step = 3;
                                        continue;
                                    }
                                    case 32: {
                                        earlier = earlier.or(bit);
                                        $step = 33;
                                        continue;
                                    }
                                    case 33: {
                                        j = (j + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 34: {
                                        return mis;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                LexicographicallyFirstContaining: function (g, set, S) {
                    set = set.xor(S);
                    while (set.ne(System.Int64(0))) {
                        var bit = set.and(set.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);

                        if (g.NeighborsInSet(v, S).equals(System.Int64(0))) {
                            S = S.or(bit);
                        }

                        set = set.xor(bit);
                    }

                    return S;
                },
                Parent: function (g, set, LFMIS, S) {
                    var a = LFMIS.and(S.not());
                    var bit = a.and(a.neg());
                    var v = BitLevelGeneration.BitUsage_long.Extract(bit);
                    var N = g.NeighborsInSet(v, S);

                    return BitLevelGeneration.MaximalndependentSetSearching.LexicographicallyFirstContaining(g, set, (S.or(bit)).xor(N));
                },
                Later: function (g, set, LFMIS, v) {
                    var q = g.NeighborsInSet(v, set.xor(LFMIS));

                    var earlier = ((System.Int64(1).shl(v)).sub(System.Int64(1))).and(LFMIS);
                    var later = System.Int64(0);
                    while (set.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var w = BitLevelGeneration.BitUsage_long.Extract(bit);

                        if (g.NeighborsInSet(w, earlier).equals(System.Int64(0))) {
                            later = later.or(bit);
                        }

                        q = q.xor(bit);
                    }

                    return later;
                }
            }
        }
    });

    Bridge.define("GraphicsLayer.ARGB", {
        statics: {
            methods: {
                BasicPalette: function (q) {
                    if (q === -1) {
                        return new GraphicsLayer.ARGB.ctor(255, 255, 255);
                    }

                    return GraphicsLayer.ARGB.FromHSL(0.6 + GraphicsLayer.ARGB.ReverseBits((q >>> 0)) / Math.pow(2.0, 32), 1.0, 0.65);
                },
                FromFractional: function (a, r, g, b) {
                    return new GraphicsLayer.ARGB.$ctor1(Bridge.Int.clip32(a * 255), Bridge.Int.clip32(r * 255), Bridge.Int.clip32(g * 255), Bridge.Int.clip32(b * 255));
                },
                FromHSL: function (h, s, l) {
                    while (h > 1.0) {
                        h -= 1.0;
                    }
                    while (s > 1.0) {
                        s -= 1.0;
                    }
                    while (l > 1.0) {
                        l -= 1.0;
                    }

                    if (s === 0.0) {
                        return GraphicsLayer.ARGB.FromFractional(1.0, l, l, l);
                    }

                    var q = l < 0.5 ? l * (1.0 + s) : l + s - l * s;
                    var p = 2.0 * l - q;
                    var r = GraphicsLayer.ARGB.HueToRgb(p, q, h + 0.33333333333333331);
                    var g = GraphicsLayer.ARGB.HueToRgb(p, q, h);
                    var b = GraphicsLayer.ARGB.HueToRgb(p, q, h - 0.33333333333333331);

                    return GraphicsLayer.ARGB.FromFractional(1.0, r, g, b);
                },
                HueToRgb: function (p, q, t) {
                    if (t < 0.0) {
                        t += 1.0;
                    }
                    if (t > 1.0) {
                        t -= 1.0;
                    }
                    if (t < 0.16666666666666666) {
                        return p + (q - p) * 6.0 * t;
                    }
                    if (t < 0.5) {
                        return q;
                    }
                    if (t < 0.66666666666666663) {
                        return p + (q - p) * (0.66666666666666663 - t) * 6.0;
                    }
                    return p;
                },
                ReverseBits: function (x) {
                    var y = 0;
                    for (var i = 0; i < 32; i = (i + 1) | 0) {
                        y = (y | System.Int64.clipu32((System.Int64(x).and(System.Int64((1 << i)))).shl((((31 - Bridge.Int.mul(2, i)) | 0))))) >>> 0;
                    }

                    return y;
                }
            }
        },
        props: {
            A: 0,
            R: 0,
            G: 0,
            B: 0
        },
        ctors: {
            $ctor1: function (a, r, g, b) {
                this.$initialize();
                this.A = a;
                this.R = r;
                this.G = g;
                this.B = b;
            },
            ctor: function (r, g, b) {
                GraphicsLayer.ARGB.$ctor1.call(this, 255, r, g, b);
            }
        },
        methods: {
            toString: function () {
                return System.String.format("{0},{1},{2},{3}", Bridge.box(this.A, System.Int32), Bridge.box(this.R, System.Int32), Bridge.box(this.G, System.Int32), Bridge.box(this.B, System.Int32));
            }
        }
    });

    Bridge.define("GraphicsLayer.Box", {
        statics: {
            fields: {
                Empty: null
            },
            ctors: {
                init: function () {
                    this.Empty = new GraphicsLayer.Box.ctor(0, 0);
                }
            }
        },
        props: {
            Top: 0,
            Left: 0,
            Width: 0,
            Height: 0,
            X: {
                get: function () {
                    return this.Left;
                }
            },
            Y: {
                get: function () {
                    return this.Top;
                }
            },
            Right: {
                get: function () {
                    return this.Left + this.Width;
                }
            },
            Bottom: {
                get: function () {
                    return this.Top + this.Height;
                }
            }
        },
        ctors: {
            ctor: function (left, top) {
                this.$initialize();
                this.Left = left;
                this.Top = top;
            },
            $ctor1: function (left, top, width, height) {
                this.$initialize();
                this.Left = left;
                this.Top = top;
                this.Width = width;
                this.Height = height;
            }
        },
        methods: {
            Inflate: function (x, y) {
                this.Left -= x;
                this.Top -= y;
                this.Width += 2 * x;
                this.Height += 2 * y;
            },
            Contains$1: function (x, y) {
                return this.Left <= x && x <= this.Right && this.Top <= y && y <= this.Bottom;
            },
            Contains: function (box) {
                return this.Left <= box.Left && box.Right <= this.Right && this.Top <= box.Top && box.Bottom <= this.Bottom;
            }
        }
    });

    Bridge.define("GraphicsLayer.Font", {
        props: {
            Name: null,
            Size: 0
        },
        ctors: {
            ctor: function (name, size) {
                this.$initialize();
                this.Name = name;
                this.Size = size;
            }
        }
    });

    Bridge.define("GraphicsLayer.IProduceMouseEvents", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.IGraphics", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.IPaintable", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.MouseButton", {
        $kind: "enum",
        statics: {
            fields: {
                Left: 0,
                Middle: 1,
                Right: 2
            }
        }
    });

    Bridge.define("Graphs.Ascii85", {
        statics: {
            fields: {
                _asciiOffset: 0
            },
            ctors: {
                init: function () {
                    this._asciiOffset = 33;
                }
            }
        },
        fields: {
            
            PrefixMark: null,
            /**
             * Suffix mark that identifies an encoded ASCII85 string, traditionally '~&gt;'
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default ""
             * @type string
             */
            SuffixMark: null,
            /**
             * Maximum line length for encoded ASCII85 string; 
             set to zero for one unbroken line.
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default 0
             * @type number
             */
            LineLength: 0,
            /**
             * Add the Prefix and Suffix marks when encoding, and enforce their presence for decoding
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default false
             * @type boolean
             */
            EnforceMarks: false,
            _encodedBlock: null,
            _decodedBlock: null,
            _tuple: 0,
            _linePos: 0,
            pow85: null
        },
        ctors: {
            init: function () {
                this.PrefixMark = "";
                this.SuffixMark = "";
                this.LineLength = 0;
                this.EnforceMarks = false;
                this._encodedBlock = System.Array.init(5, 0, System.Byte);
                this._decodedBlock = System.Array.init(4, 0, System.Byte);
                this._tuple = 0;
                this._linePos = 0;
                this.pow85 = System.Array.init([
                    52200625, 
                    614125, 
                    7225, 
                    85, 
                    1
                ], System.UInt32);
            }
        },
        methods: {
            /**
             * Decodes an ASCII85 encoded string into the original binary data
             *
             * @instance
             * @public
             * @this Graphs.Ascii85
             * @memberof Graphs.Ascii85
             * @param   {string}            s    ASCII85 encoded string
             * @return  {Array.<number>}         byte array of decoded binary data
             */
            Decode: function (s) {
                var $t;
                if (this.EnforceMarks) {
                    if (!!(!System.String.startsWith(s, this.PrefixMark) | !System.String.endsWith(s, this.SuffixMark))) {
                        throw new System.Exception(System.String.concat("ASCII85 encoded data should begin with '", this.PrefixMark, "' and end with '", this.SuffixMark, "'"));
                    }
                }

                // strip prefix and suffix if present
                if (System.String.startsWith(s, this.PrefixMark)) {
                    s = s.substr(this.PrefixMark.length);
                }
                if (System.String.endsWith(s, this.SuffixMark)) {
                    s = s.substr(0, ((s.length - this.SuffixMark.length) | 0));
                }

                var ms = new (System.Collections.Generic.List$1(System.Byte))();
                var count = 0;
                var processChar = false;

                $t = Bridge.getEnumerator(s);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        switch (c) {
                            case 122: 
                                if (count !== 0) {
                                    throw new System.Exception("The character 'z' is invalid inside an ASCII85 block.");
                                }
                                this._decodedBlock[System.Array.index(0, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(1, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(2, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(3, this._decodedBlock)] = 0;
                                ms.addRange(this._decodedBlock);
                                processChar = false;
                                break;
                            case 10: 
                            case 13: 
                            case 9: 
                            case 0: 
                            case 12: 
                            case 8: 
                                processChar = false;
                                break;
                            default: 
                                if (c < 33 || c > 117) {
                                    throw new System.Exception("Bad character '" + String.fromCharCode(c) + "' found. ASCII85 only allows characters '!' to 'u'.");
                                }
                                processChar = true;
                                break;
                        }

                        if (processChar) {
                            this._tuple = (this._tuple + (Bridge.Int.umul((((((c - Graphs.Ascii85._asciiOffset) | 0))) >>> 0), this.pow85[System.Array.index(count, this.pow85)]))) >>> 0;
                            count = (count + 1) | 0;
                            if (count === this._encodedBlock.length) {
                                this.DecodeBlock();
                                ms.addRange(this._decodedBlock);
                                this._tuple = 0;
                                count = 0;
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                // if we have some bytes left over at the end..
                if (count !== 0) {
                    if (count === 1) {
                        throw new System.Exception("The last block of ASCII85 data cannot be a single byte.");
                    }
                    count = (count - 1) | 0;
                    this._tuple = (this._tuple + this.pow85[System.Array.index(count, this.pow85)]) >>> 0;
                    this.DecodeBlock$1(count);
                    for (var i = 0; i < count; i = (i + 1) | 0) {
                        ms.add(this._decodedBlock[System.Array.index(i, this._decodedBlock)]);
                    }
                }

                return ms.toArray();
            },
            /**
             * Encodes binary data into a plaintext ASCII85 format string
             *
             * @instance
             * @public
             * @this Graphs.Ascii85
             * @memberof Graphs.Ascii85
             * @param   {Array.<number>}    ba    binary data to encode
             * @return  {string}                  ASCII85 encoded string
             */
            Encode: function (ba) {
                var $t;
                var sb = new System.Text.StringBuilder("", Bridge.Int.mul(ba.length, (((Bridge.Int.div(this._encodedBlock.length, this._decodedBlock.length)) | 0))));
                this._linePos = 0;

                if (this.EnforceMarks) {
                    this.AppendString(sb, this.PrefixMark);
                }

                var count = 0;
                this._tuple = 0;
                $t = Bridge.getEnumerator(ba);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (count >= ((this._decodedBlock.length - 1) | 0)) {
                            this._tuple = (this._tuple | b) >>> 0;
                            if (this._tuple === 0) {
                                this.AppendChar(sb, 122);
                            } else {
                                this.EncodeBlock$1(sb);
                            }
                            this._tuple = 0;
                            count = 0;
                        } else {
                            this._tuple = (this._tuple | ((b << (((24 - (Bridge.Int.mul(count, 8))) | 0))) >>> 0)) >>> 0;
                            count = (count + 1) | 0;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                // if we have some bytes left over at the end..
                if (count > 0) {
                    this.EncodeBlock(((count + 1) | 0), sb);
                }

                if (this.EnforceMarks) {
                    this.AppendString(sb, this.SuffixMark);
                }
                return sb.toString();
            },
            EncodeBlock$1: function (sb) {
                this.EncodeBlock(this._encodedBlock.length, sb);
            },
            EncodeBlock: function (count, sb) {
                for (var i = (this._encodedBlock.length - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    this._encodedBlock[System.Array.index(i, this._encodedBlock)] = ((((this._tuple % 85) + Graphs.Ascii85._asciiOffset) >>> 0)) & 255;
                    this._tuple = (Bridge.Int.div(this._tuple, 85)) >>> 0;
                }

                for (var i1 = 0; i1 < count; i1 = (i1 + 1) | 0) {
                    var c = this._encodedBlock[System.Array.index(i1, this._encodedBlock)];
                    this.AppendChar(sb, c);
                }

            },
            DecodeBlock: function () {
                this.DecodeBlock$1(this._decodedBlock.length);
            },
            DecodeBlock$1: function (bytes) {
                for (var i = 0; i < bytes; i = (i + 1) | 0) {
                    this._decodedBlock[System.Array.index(i, this._decodedBlock)] = (this._tuple >>> ((24 - (Bridge.Int.mul(i, 8))) | 0)) & 255;
                }
            },
            AppendString: function (sb, s) {
                if (this.LineLength > 0 && (((this._linePos + s.length) | 0) > this.LineLength)) {
                    this._linePos = 0;
                    sb.append(String.fromCharCode(13));
                    sb.append(String.fromCharCode(10));
                } else {
                    this._linePos = (this._linePos + s.length) | 0;
                }
                sb.append(s);
            },
            AppendChar: function (sb, c) {
                sb.append(String.fromCharCode(c));
                this._linePos = (this._linePos + 1) | 0;
                if (this.LineLength > 0 && (this._linePos >= this.LineLength)) {
                    this._linePos = 0;
                    sb.append(String.fromCharCode(13));
                    sb.append(String.fromCharCode(10));
                }
            }
        }
    });

    Bridge.define("Graphs.IHittable", {
        $kind: "interface"
    });

    Bridge.define("Graphs.Edge.Orientations", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                Forward: 1,
                Backward: 2
            }
        }
    });

    Bridge.define("Graphs.GraphCanvas.HistoricalGraph", {
        props: {
            Graph: null,
            ViewScale: 0,
            Zoom: 0
        }
    });

    Bridge.define("Graphs.GraphCanvas.States", {
        $kind: "enum",
        statics: {
            fields: {
                Idle: 0,
                DraggingVertex: 1,
                DraggingSelectionRegion: 2,
                DraggingSelectedVertices: 3
            }
        }
    });

    Bridge.define("Graphs.PolygonContainer", {
        fields: {
            _dots: null,
            _boundingBox: null
        },
        ctors: {
            ctor: function (dots) {
                this.$initialize();
                this._dots = dots;

                var minx = System.Linq.Enumerable.from(this._dots).min($asm.$.Graphs.PolygonContainer.f1);
                var maxx = System.Linq.Enumerable.from(this._dots).max($asm.$.Graphs.PolygonContainer.f1);
                var miny = System.Linq.Enumerable.from(this._dots).min($asm.$.Graphs.PolygonContainer.f2);
                var maxy = System.Linq.Enumerable.from(this._dots).max($asm.$.Graphs.PolygonContainer.f2);

                this._boundingBox = new GraphicsLayer.Box.$ctor1(minx, miny, maxx - minx, maxy - miny);
            }
        },
        methods: {
            Contains: function (dot) {
                if (!this._boundingBox.Contains(dot)) {
                    return false;
                }

                var contains = false;
                var j = (System.Array.getCount(this._dots, GraphicsLayer.Box) - 1) | 0;

                for (var i = 0; i < System.Array.getCount(this._dots, GraphicsLayer.Box); i = (i + 1) | 0) {
                    if ((System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y <= dot.Y && dot.Y < System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y || System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y <= dot.Y && dot.Y < System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) && dot.X < (System.Array.getItem(this._dots, j, GraphicsLayer.Box).X - System.Array.getItem(this._dots, i, GraphicsLayer.Box).X) * (dot.Y - System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) / (System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y - System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) + System.Array.getItem(this._dots, i, GraphicsLayer.Box).X) {
                        contains = !contains;
                    }

                    j = i;
                }

                return contains;
            }
        }
    });

    Bridge.ns("Graphs.PolygonContainer", $asm.$);

    Bridge.apply($asm.$.Graphs.PolygonContainer, {
        f1: function (dot) {
            return dot.X;
        },
        f2: function (dot) {
            return dot.Y;
        }
    });

    Bridge.define("Graphs.SerializationEdge", {
        fields: {
            IndexV1: 0,
            IndexV2: 0,
            Orientation: 0,
            Thickness: 0,
            Multiplicity: 0,
            Style: null,
            Label: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (e, vertices) {
                this.$initialize();                var $t, $t1;

                this.IndexV1 = vertices.indexOf(e.V1);
                this.IndexV2 = vertices.indexOf(e.V2);
                this.Orientation = e.Orientation;
                this.Thickness = e.Thickness;
                this.Multiplicity = e.Multiplicity;
                this.Style = ($t = e.Style, $t != null ? $t : "");
                this.Label = ($t1 = e.Label, $t1 != null ? $t1 : "");

                if (Bridge.referenceEquals(this.Style, "")) {
                    if (this.Orientation === Graphs.Edge.Orientations.Forward) {
                        this.Style = (e.Style = "post", "post");
                    } else {
                        if (this.Orientation === Graphs.Edge.Orientations.Backward) {
                            this.Style = (e.Style = "pre", "pre");
                        }
                    }
                }
        }
    }
    });

    Bridge.define("Graphs.SerializationGraph", {
        fields: {
            Vertices: null,
            Edges: null,
            Name: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (g) {
                this.$initialize();
                this.Vertices = System.Linq.Enumerable.from(g.Vertices).select($asm.$.Graphs.SerializationGraph.f1).toList(Graphs.SerializationVertex);
                this.Edges = System.Linq.Enumerable.from(g.Edges).select(function (e) {
                        return new Graphs.SerializationEdge.$ctor1(e, g.Vertices);
                    }).toList(Graphs.SerializationEdge);
                this.Name = g.Name;
            }
        }
    });

    Bridge.ns("Graphs.SerializationGraph", $asm.$);

    Bridge.apply($asm.$.Graphs.SerializationGraph, {
        f1: function (v) {
            return new Graphs.SerializationVertex.$ctor1(v);
        }
    });

    Bridge.define("Graphs.SerializationVector", {
        fields: {
            X: 0,
            Y: 0
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (v) {
                this.$initialize();
                this.X = v.X;
                this.Y = v.Y;
            }
        }
    });

    Bridge.define("Graphs.SerializationVertex", {
        fields: {
            Location: null,
            Label: null,
            Padding: 0,
            Style: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (v) {
                this.$initialize();                var $t;

                this.Location = new Graphs.SerializationVector.$ctor1(v.Location);
                this.Label = v.Label;
                this.Padding = v.Padding;
                this.Style = ($t = v.Style, $t != null ? $t : "");
        }
    }
    });

    Bridge.define("Graphs.Utility", {
        statics: {
            methods: {
                RotateAroundPoint: function (v, center, angle) {
                    var x = center.X + (v.X - center.X) * Math.cos(angle) - (v.Y - center.Y) * Math.sin(angle);
                    var y = center.Y + (v.X - center.X) * Math.sin(angle) + (v.Y - center.Y) * Math.cos(angle);

                    return new GraphicsLayer.Box.ctor(x, y);
                },
                RotateAroundPoint$1: function (v, center, angle) {
                    var x = center.X + (v.X - center.X) * Math.cos(angle) - (v.Y - center.Y) * Math.sin(angle);
                    var y = center.Y + (v.X - center.X) * Math.sin(angle) + (v.Y - center.Y) * Math.cos(angle);

                    return new Graphs.Vector(x, y);
                },
                PolarToRectangular: function (r, theta) {
                    return new Graphs.Vector(r * Math.cos(theta), r * Math.sin(theta));
                },
                HaveIntersection: function (start1, end1, start2, end2) {
                    var denom = ((end1.X - start1.X) * (end2.Y - start2.Y)) - ((end1.Y - start1.Y) * (end2.X - start2.X));

                    if (denom === 0) {
                        return false;
                    }

                    var numer = ((start1.Y - start2.Y) * (end2.X - start2.X)) - ((start1.X - start2.X) * (end2.Y - start2.Y));
                    var r = numer / denom;
                    var numer2 = ((start1.Y - start2.Y) * (end1.X - start1.X)) - ((start1.X - start2.X) * (end1.Y - start1.Y));
                    var s = numer2 / denom;

                    if (r < 0 || r > 1 || s < 0 || s > 1) {
                        return false;
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("Graphs.Vector", {
        statics: {
            methods: {
                op_Addition: function (a, b) {
                    return new Graphs.Vector(a._X + b._X, a._Y + b._Y);
                },
                op_UnaryNegation: function (a) {
                    return new Graphs.Vector(-a._X, -a._Y);
                },
                op_Subtraction: function (a, b) {
                    return new Graphs.Vector(a._X - b._X, a._Y - b._Y);
                },
                op_Multiply: function (a, b) {
                    return new Graphs.Vector(a._X * b, a._Y * b);
                },
                op_Multiply$1: function (a, b) {
                    return new Graphs.Vector(a._X * b, a._Y * b);
                },
                op_Equality: function (a, b) {
                    return a.Equals(b);
                },
                op_Inequality: function (a, b) {
                    return !(Graphs.Vector.op_Equality(a, b));
                },
                op_Implicit: function (v) {
                    return new GraphicsLayer.Box.ctor(v.X, v.Y);
                }
            }
        },
        fields: {
            _X: 0,
            _Y: 0
        },
        props: {
            Length: {
                get: function () {
                    return Math.sqrt(this._X * this._X + this._Y * this._Y);
                }
            },
            X: {
                get: function () {
                    return this._X;
                },
                set: function (value) {
                    this._X = value;
                }
            },
            Y: {
                get: function () {
                    return this._Y;
                },
                set: function (value) {
                    this._Y = value;
                }
            }
        },
        ctors: {
            ctor: function (x, y) {
                this.$initialize();
                this._X = x;
                this._Y = y;
            }
        },
        methods: {
            Normalize: function () {
                var length = this.Length;

                this._X = this._X / length;
                this._Y = this._Y / length;

                return length > 0;
            },
            Dot: function (vector) {
                return this._X * vector._X + this._Y * vector._Y;
            },
            Distance: function (vector) {
                return Math.sqrt(Math.pow(vector._X - this._X, 2) + Math.pow(vector._Y - this._Y, 2));
            },
            equals: function (obj) {
                if (!(Bridge.is(obj, Graphs.Vector))) {
                    return false;
                }

                var v = Bridge.cast(obj, Graphs.Vector);

                return this.Equals(v);
            },
            Equals: function (v) {
                return this._X === v._X && this._Y === v._Y;
            },
            getHashCode: function () {
                return Bridge.getHashCode(this.toString());
            },
            toString: function () {
                return "(" + System.Double.format(this._X) + ", " + System.Double.format(this._Y) + ")";
            }
        }
    });

    Bridge.define("GraphsCore.CompactSerializer", {
        statics: {
            fields: {
                Scale: 0,
                Prefix: null,
                ASCII: null
            },
            ctors: {
                init: function () {
                    this.Scale = 10000;
                    this.Prefix = "webgraph:";
                    this.ASCII = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";
                }
            },
            methods: {
                LooksLikeASerializedGraph: function (s) {
                    return !System.String.isNullOrEmpty(s) && System.String.startsWith(s, GraphsCore.CompactSerializer.Prefix);
                },
                Serialize: function (g) {
                    var bytes = GraphsCore.CompactSerializer.SerializeToByteArray(g);
                    var compressed = QuickLZ.compress(bytes);
                    var Ascii85 = new Graphs.Ascii85();
                    return System.String.concat(GraphsCore.CompactSerializer.Prefix, Ascii85.Encode(compressed));
                },
                SerializeToByteArray: function (g) {
                    var $t, $t1, $t2, $t3, $t4;
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    bytes.add(((g.Vertices.Count) & 255));
                    $t = Bridge.getEnumerator(g.Vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.X * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.Y * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.Padding * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(v.Label));
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(($t1 = v.Style, $t1 != null ? $t1 : "")));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    bytes.addRange(System.BitConverter.getBytes$7(((g.Edges.Count) & 65535)));
                    $t2 = Bridge.getEnumerator(g.Edges);
                    try {
                        while ($t2.moveNext()) {
                            var e = $t2.Current;
                            bytes.add(((g.Vertices.indexOf(e.V1)) & 255));
                            bytes.add(((g.Vertices.indexOf(e.V2)) & 255));
                            bytes.add(((e.Multiplicity) & 255));
                            bytes.add(((e.Orientation) & 255));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(e.Thickness * 100, 0, 6))));

                            var label = ($t3 = e.Label, $t3 != null ? $t3 : "");
                            var hackedStyle = System.String.concat((($t4 = e.Style, $t4 != null ? $t4 : "")), "~~|~|~~", label);
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(hackedStyle));
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }
                    return bytes.toArray();
                },
                Deserialize: function (s) {
                    try {
                        var Ascii85 = new Graphs.Ascii85();
                        var compressed = Ascii85.Decode(s.substr(GraphsCore.CompactSerializer.Prefix.length));
                        var bytes = QuickLZ.decompress(compressed);
                        return GraphsCore.CompactSerializer.DeserializeFromByteArray(bytes);
                    }
                    catch (ex) {
                        ex = System.Exception.create(ex);
                        System.Console.WriteLine(ex.Message);
                    }

                    return null;
                },
                DeserializeFromByteArray: function (bytes) {
                    var $t;
                    var offset = { v : 0 };
                    var n = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                    var vertices = new (System.Collections.Generic.List$1(Graphs.Vertex))();
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        var x = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var y = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var padding = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var label = GraphsCore.CompactSerializer.ReadString(bytes, offset);
                        var style = GraphsCore.CompactSerializer.ReadString(bytes, offset);
                        vertices.add(($t = new Graphs.Vertex.$ctor3(x, y), $t.Padding = padding, $t.Label = label, $t.Style = style, $t));
                    }

                    var e = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset);
                    var edges = new (System.Collections.Generic.List$1(Graphs.Edge))();
                    for (var i1 = 0; i1 < e; i1 = (i1 + 1) | 0) {
                        var v1 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var v2 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var multiplicity = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var orientation = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var thickness = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / 100;
                        var style1 = GraphsCore.CompactSerializer.ReadString(bytes, offset);

                        edges.add(($t = new Graphs.Edge.$ctor1(vertices.getItem(v1), vertices.getItem(v2)), $t.Multiplicity = multiplicity, $t.Orientation = orientation, $t.Thickness = thickness, $t.Style = style1, $t));
                    }

                    return new Graphs.Graph.$ctor3(vertices, edges);
                },
                ReadByte: function (bytes, offset) {
                    return bytes[System.Array.index(Bridge.identity(offset.v, (offset.v = (offset.v + 1) | 0)), bytes)];
                },
                ReadUInt16: function (bytes, offset) {
                    var x = System.BitConverter.toUInt16(bytes, offset.v);
                    offset.v = (offset.v + 2) | 0;
                    return x;
                },
                ReadUInt32: function (bytes, offset) {
                    var x = System.BitConverter.toUInt32(bytes, offset.v);
                    offset.v = (offset.v + 4) | 0;
                    return x;
                },
                Get7BitEncodedInt: function (value) {
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    var num = value >>> 0;
                    while (num >= 128) {
                        bytes.add(((((num | 128) >>> 0)) & 255));
                        num = num >>> 7;
                    }
                    bytes.add((num & 255));

                    return bytes.toArray();
                },
                Read7BitEncodedInt: function (bytes, offset) {
                    var num1 = 0;
                    var num2 = 0;
                    while (num2 !== 35) {
                        var num3 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        num1 = num1 | ((num3 & 127) << num2);
                        num2 = (num2 + 7) | 0;
                        if ((num3 & 128) === 0) {
                            return num1;
                        }
                    }
                    throw new System.FormatException("bad 7-bit encoded int");
                },
                GetBytes: function (s) {
                    var $t, $t1;
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    $t = Bridge.getEnumerator(System.String.toCharArray(s, 0, s.length));
                    try {
                        while ($t.moveNext()) {
                            var c = $t.Current;
                            bytes.addRange(System.BitConverter.getBytes$1(c));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(Bridge.cast(GraphsCore.CompactSerializer.Get7BitEncodedInt(bytes.Count), System.Collections.Generic.IEnumerable$1(System.Byte))).reverse());
                    try {
                        while ($t1.moveNext()) {
                            var b = $t1.Current;
                            bytes.insert(0, b);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return bytes.toArray();
                },
                ReadString: function (bytes, offset) {
                    var length = GraphsCore.CompactSerializer.Read7BitEncodedInt(bytes, offset);

                    var s = "";
                    while (Bridge.identity(length, (length = (length - 1) | 0)) > 0) {
                        s = System.String.concat(s, String.fromCharCode(GraphsCore.CompactSerializer.ASCII.charCodeAt(((bytes[System.Array.index(Bridge.identity(offset.v, (offset.v = (offset.v + 1) | 0)), bytes)] - 32) | 0))));
                    }
                    return s;
                }
            }
        }
    });

    Bridge.define("GraphsCore.GraphIO", {
        statics: {
            fields: {
                ASCII: null
            },
            ctors: {
                init: function () {
                    this.ASCII = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";
                }
            },
            methods: {
                ToAdjacencyMatrix: function (edgeWeights, isDirected) {
                    var $t;
                    if (isDirected === void 0) { isDirected = false; }
                    var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                    var m = System.Array.create(0, null, System.Char, n, n);

                    var k = 0;
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                            var ew = edgeWeights.getItem(k);
                            if (isDirected) {
                                m.set([i, j], (m.set([j, i], 48), 48));

                                if (ew > 0) {
                                    m.set([i, j], 49);
                                } else {
                                    if (ew < 0) {
                                        m.set([j, i], 49);
                                    }
                                }
                            } else {
                                m.set([i, j], ($t = ew !== 0 ? 49 : 48, m.set([j, i], $t), $t));
                            }

                            k = (k + 1) | 0;
                        }
                    }

                    for (var i1 = 0; i1 < n; i1 = (i1 + 1) | 0) {
                        m.set([i1, i1], 48);
                    }

                    var s = "";
                    for (var i2 = 0; i2 < n; i2 = (i2 + 1) | 0) {
                        for (var j1 = 0; j1 < n; j1 = (j1 + 1) | 0) {
                            s = System.String.concat(s, String.fromCharCode(m.get([i2, j1])));
                        }
                        s = System.String.concat(s, '\n');
                    }

                    return s;
                },
                ToGraph6: function (g) {
                    return GraphsCore.GraphIO.ToGraph6$1(g.GetEdgeWeights());
                },
                ToGraph6$1: function (w) {
                    var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, w.Count)) | 0))) / 2);
                    if (n > 62) {
                        throw new System.NotImplementedException("i have yet to write/read graph6 files with more than 62 vertices.");
                    }

                    var p = System.Linq.Enumerable.from(GraphsCore.GraphIO.RowToColumnPermutation(n)).toList(System.Int32);
                    var wp = new (System.Collections.Generic.List$1(System.Int32))(w.Count);

                    for (var i = 0; i < p.Count; i = (i + 1) | 0) {
                        wp.add(Math.abs(w.getItem(p.indexOf(i))));
                    }

                    while (wp.Count % 6 !== 0) {
                        wp.add(0);
                    }

                    var bb = System.Linq.Enumerable.from(MoreLinq.MoreEnumerable.Prepend(System.Byte, MoreLinq.MoreEnumerable.Batch(System.Int32, System.Byte, wp, 6, $asm.$.GraphsCore.GraphIO.f2), ((((n + 63) | 0)) & 255))).toArray();
                    return Bridge.toArray(System.Linq.Enumerable.from(bb).select($asm.$.GraphsCore.GraphIO.f3)).join("");
                },
                RowToColumnPermutation: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            j,
                            y,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            x = 0;
                                                j = 0;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( j < ((n - 1) | 0) ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 9;
                                            continue;
                                        }
                                        case 2: {
                                            y = x;
                                                i = 0;
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ( i < ((((n - 1) | 0) - j) | 0) ) {
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 7;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = y;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            y = (y + (((((1 + j) | 0) + i) | 0))) | 0;
                                            $step = 6;
                                            continue;
                                        }
                                        case 6: {
                                            i = (i + 1) | 0;
                                            $step = 3;
                                            continue;
                                        }
                                        case 7: {
                                            x = (x + (((2 + j) | 0))) | 0;
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            j = (j + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 9: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                Low6: function (b) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (b) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 5;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i >= 0 ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = (b & (1 << i)) >> i;
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            i = (i - 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("GraphsCore.GraphIO", $asm.$);

    Bridge.apply($asm.$.GraphsCore.GraphIO, {
        f1: function (pair) {
            return pair.value << pair.key;
        },
        f2: function (bits) {
            return ((((System.Linq.Enumerable.from(MoreLinq.MoreEnumerable.Index(System.Int32, System.Linq.Enumerable.from(bits).reverse())).select($asm.$.GraphsCore.GraphIO.f1).sum() + 63) | 0)) & 255);
        },
        f3: function (b) {
            return String.fromCharCode(GraphsCore.GraphIO.ASCII.charCodeAt(((b - 32) | 0)));
        }
    });

    /** @namespace System */

    /**
     * @memberof System
     * @callback System.Func
     * @param   {System.Collections.Generic.IEnumerable$1}    arg
     * @return  {TResult}
     */

    Bridge.define("MoreLinq.MoreEnumerable", {
        statics: {
            methods: {
                /**
                 * Batches the source sequence into sized buckets.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The source sequence.
                 * @param   {number}                                      size       Size of buckets.
                 * @return  {System.Collections.Generic.IEnumerable$1}               A sequence of equally sized buckets containing elements of the source collection.
                 */
                Batch$1: function (TSource, source, size) {
                    return MoreLinq.MoreEnumerable.Batch(TSource, System.Collections.Generic.IEnumerable$1(TSource), source, size, $asm.$.MoreLinq.MoreEnumerable.f1);
                },
                /**
                 * Batches the source sequence into sized buckets and applies a projection to each bucket.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource           Type of elements in <b>TSource</b> sequence.
                 * @param   {Function}                                    TResult           Type of result returned by <b>TResult</b>.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source            The source sequence.
                 * @param   {number}                                      size              Size of buckets.
                 * @param   {System.Func}                                 resultSelector    The projection to apply to each bucket.
                 * @return  {System.Collections.Generic.IEnumerable$1}                      A sequence of projections on equally sized buckets containing elements of the source collection.
                 */
                Batch: function (TSource, TResult, source, size, resultSelector) {
                    return MoreLinq.MoreEnumerable.BatchImpl(TSource, TResult, source, size, resultSelector);
                },
                BatchImpl: function (TSource, TResult, source, size, resultSelector) {
                    return new (Bridge.GeneratorEnumerable$1(TResult))(Bridge.fn.bind(this, function (TSource, TResult, source, size, resultSelector) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            bucket,
                            count,
                            $t,
                            item,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(TResult))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            bucket = null;
                                                count = 0;

                                                $t = Bridge.getEnumerator(source, TSource);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    item = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            if (bucket == null) {
                                                    bucket = System.Array.init(size, function (){
                                                        return Bridge.getDefaultValue(TSource);
                                                    }, TSource);
                                                }

                                                bucket[System.Array.index(Bridge.identity(count, (count = (count + 1) | 0)), bucket)] = item;

                                                // The bucket is fully buffered before it's yielded
                                                if (count !== size) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                // Select is necessary so bucket contents are streamed too
                                                $enumerator.current = resultSelector(System.Linq.Enumerable.from(bucket).select($asm.$.MoreLinq.MoreEnumerable.f1));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            bucket = null;
                                                count = 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            // Return the last bucket with all remaining elements
                                                if (bucket != null && count > 0) {
                                                    $step = 5;
                                                    continue;
                                                } 
                                                $step = 7;
                                                continue;
                                        }
                                        case 5: {
                                            $enumerator.current = resultSelector(System.Linq.Enumerable.from(bucket).take(count));
                                                $step = 6;
                                                return true;
                                        }
                                        case 6: {
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                /**
                 * Returns a sequence of {@link } 
                 where the key is the zero-based index of the value in the source 
                 sequence.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The source sequence.
                 * @return  {System.Collections.Generic.IEnumerable$1}               A sequence of {@link }.
                 */
                Index: function (TSource, source) {
                    return MoreLinq.MoreEnumerable.Index$1(TSource, source, 0);
                },
                /**
                 * Returns a sequence of {@link } 
                 where the key is the index of the value in the source sequence.
                 An additional parameter specifies the starting index.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource       Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source        The source sequence.
                 * @param   {number}                                      startIndex
                 * @return  {System.Collections.Generic.IEnumerable$1}                  A sequence of {@link }.
                 */
                Index$1: function (TSource, source, startIndex) {
                    return System.Linq.Enumerable.from(source).select(function (item, index) {
                            return new (System.Collections.Generic.KeyValuePair$2(System.Int32,TSource))(((startIndex + index) | 0), item);
                        });
                },
                /**
                 * Prepends a single value to a sequence.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    The type of the elements of <b>TSource</b>.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The sequence to prepend to.
                 * @param   {TSource}                                     value      The value to prepend.
                 * @return  {System.Collections.Generic.IEnumerable$1}               Returns a sequence where a value is prepended to it.
                 */
                Prepend: function (TSource, source, value) {
                    if (source == null) {
                        throw new System.ArgumentNullException("source");
                    }
                    return System.Linq.Enumerable.from(System.Linq.Enumerable.repeat(value, 1)).concat(source);
                }
            }
        }
    });

    Bridge.ns("MoreLinq.MoreEnumerable", $asm.$);

    Bridge.apply($asm.$.MoreLinq.MoreEnumerable, {
        f1: function (x) {
            return x;
        }
    });

    Bridge.define("QuickLZ", {
        statics: {
            fields: {
                QLZ_VERSION_MAJOR: 0,
                QLZ_VERSION_MINOR: 0,
                QLZ_VERSION_REVISION: 0,
                QLZ_STREAMING_BUFFER: 0,
                QLZ_MEMORY_SAFE: 0,
                HASH_VALUES: 0,
                MINOFFSET: 0,
                UNCONDITIONAL_MATCHLEN: 0,
                UNCOMPRESSED_END: 0,
                CWORD_LEN: 0,
                DEFAULT_HEADERLEN: 0,
                QLZ_POINTERS_1: 0,
                QLZ_POINTERS_3: 0
            },
            ctors: {
                init: function () {
                    this.QLZ_VERSION_MAJOR = 1;
                    this.QLZ_VERSION_MINOR = 5;
                    this.QLZ_VERSION_REVISION = 0;
                    this.QLZ_STREAMING_BUFFER = 0;
                    this.QLZ_MEMORY_SAFE = 0;
                    this.HASH_VALUES = 4096;
                    this.MINOFFSET = 2;
                    this.UNCONDITIONAL_MATCHLEN = 6;
                    this.UNCOMPRESSED_END = 4;
                    this.CWORD_LEN = 4;
                    this.DEFAULT_HEADERLEN = 9;
                    this.QLZ_POINTERS_1 = 1;
                    this.QLZ_POINTERS_3 = 16;
                }
            },
            methods: {
                headerLen: function (source) {
                    return ((source[System.Array.index(0, source)] & 2) === 2) ? 9 : 3;
                },
                sizeDecompressed: function (source) {
                    if (QuickLZ.headerLen(source) === 9) {
                        return source[System.Array.index(5, source)] | (source[System.Array.index(6, source)] << 8) | (source[System.Array.index(7, source)] << 16) | (source[System.Array.index(8, source)] << 24);
                    } else {
                        return source[System.Array.index(2, source)];
                    }
                },
                sizeCompressed: function (source) {
                    if (QuickLZ.headerLen(source) === 9) {
                        return source[System.Array.index(1, source)] | (source[System.Array.index(2, source)] << 8) | (source[System.Array.index(3, source)] << 16) | (source[System.Array.index(4, source)] << 24);
                    } else {
                        return source[System.Array.index(1, source)];
                    }
                },
                write_header: function (dst, level, compressible, size_compressed, size_decompressed) {
                    dst[System.Array.index(0, dst)] = (2 | (compressible ? 1 : 0)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | ((level << 2) & 255)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | (64)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | (0)) & 255;
                    QuickLZ.fast_write(dst, 1, size_decompressed, 4);
                    QuickLZ.fast_write(dst, 5, size_compressed, 4);
                },
                compress: function (source, level) {
                    var $t;
                    if (level === void 0) { level = 1; }
                    var src = 0;
                    var dst = 13;
                    var cword_val = 2147483648;
                    var cword_ptr = QuickLZ.DEFAULT_HEADERLEN;
                    var destination = System.Array.init(((source.length + 400) | 0), 0, System.Byte);
                    var hashtable;
                    var cachetable = System.Array.init(QuickLZ.HASH_VALUES, 0, System.Int32);
                    var hash_counter = System.Array.init(QuickLZ.HASH_VALUES, 0, System.Byte);
                    var d2;
                    var fetch = 0;
                    var last_matchstart = (((((((source.length - QuickLZ.UNCONDITIONAL_MATCHLEN) | 0) - QuickLZ.UNCOMPRESSED_END) | 0) - 1) | 0));
                    var lits = 0;

                    if (level !== 1 && level !== 3) {
                        throw new System.ArgumentException("C# version only supports level 1 and 3");
                    }

                    if (level === 1) {
                        hashtable = System.Array.create(0, null, System.Int32, 4096, 1);
                    } else {
                        hashtable = System.Array.create(0, null, System.Int32, 4096, 16);
                    }

                    if (source.length === 0) {
                        return System.Array.init(0, 0, System.Byte);
                    }

                    if (src <= last_matchstart) {
                        fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                    }

                    while (src <= last_matchstart) {
                        if ((((cword_val & 1) >>> 0)) === 1) {
                            if (src > source.length >> 1 && dst > ((src - (src >> 5)) | 0)) {
                                d2 = System.Array.init(((source.length + QuickLZ.DEFAULT_HEADERLEN) | 0), 0, System.Byte);
                                QuickLZ.write_header(d2, level, false, source.length, ((source.length + QuickLZ.DEFAULT_HEADERLEN) | 0));
                                System.Array.copy(source, 0, d2, QuickLZ.DEFAULT_HEADERLEN, source.length);
                                return d2;
                            }

                            QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), 4);
                            cword_ptr = dst;
                            dst = (dst + QuickLZ.CWORD_LEN) | 0;
                            cword_val = 2147483648;
                        }

                        if (level === 1) {
                            var hash = ((fetch >> 12) ^ fetch) & (4095);
                            var o = hashtable.get([hash, 0]);
                            var cache = cachetable[System.Array.index(hash, cachetable)] ^ fetch;
                            cachetable[System.Array.index(hash, cachetable)] = fetch;
                            hashtable.set([hash, 0], src);

                            if (cache === 0 && hash_counter[System.Array.index(hash, hash_counter)] !== 0 && (((src - o) | 0) > QuickLZ.MINOFFSET || (src === ((o + 1) | 0) && lits >= 3 && src > 3 && source[System.Array.index(src, source)] === source[System.Array.index(((src - 3) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src - 2) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src - 1) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src + 1) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src + 2) | 0), source)]))) {
                                cword_val = ((((cword_val >>> 1) | 2147483648) >>> 0));
                                if (source[System.Array.index(((o + 3) | 0), source)] !== source[System.Array.index(((src + 3) | 0), source)]) {
                                    var f = 1 | (hash << 4);
                                    destination[System.Array.index(((dst + 0) | 0), destination)] = (f >> 0) & 255;
                                    destination[System.Array.index(((dst + 1) | 0), destination)] = (f >> 8) & 255;
                                    src = (src + 3) | 0;
                                    dst = (dst + 2) | 0;
                                } else {
                                    var old_src = src;
                                    var remaining = ((((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)) > 255 ? 255 : (((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)));

                                    src = (src + 4) | 0;
                                    if (source[System.Array.index(((((o + src) | 0) - old_src) | 0), source)] === source[System.Array.index(src, source)]) {
                                        src = (src + 1) | 0;
                                        if (source[System.Array.index(((((o + src) | 0) - old_src) | 0), source)] === source[System.Array.index(src, source)]) {
                                            src = (src + 1) | 0;
                                            while (source[System.Array.index(((o + (((src - old_src) | 0))) | 0), source)] === source[System.Array.index(src, source)] && (((src - old_src) | 0)) < remaining) {
                                                src = (src + 1) | 0;
                                            }
                                        }
                                    }

                                    var matchlen = (src - old_src) | 0;

                                    hash = hash << 4;
                                    if (matchlen < 18) {
                                        var f1 = (hash | (((matchlen - 2) | 0)));
                                        destination[System.Array.index(((dst + 0) | 0), destination)] = (f1 >> 0) & 255;
                                        destination[System.Array.index(((dst + 1) | 0), destination)] = (f1 >> 8) & 255;
                                        dst = (dst + 2) | 0;
                                    } else {
                                        QuickLZ.fast_write(destination, dst, hash | (matchlen << 16), 3);
                                        dst = (dst + 3) | 0;
                                    }
                                }
                                fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                                lits = 0;
                            } else {
                                lits = (lits + 1) | 0;
                                hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                cword_val = (cword_val >>> 1);
                                src = (src + 1) | 0;
                                dst = (dst + 1) | 0;
                                fetch = ((fetch >> 8) & 65535) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                            }

                        } else {
                            fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);

                            var o1, offset2;
                            var matchlen1, k, m, best_k = 0;
                            var c;
                            var remaining1 = ((((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)) > 255 ? 255 : (((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)));
                            var hash1 = ((fetch >> 12) ^ fetch) & (4095);

                            c = hash_counter[System.Array.index(hash1, hash_counter)];
                            matchlen1 = 0;
                            offset2 = 0;
                            for (k = 0; k < QuickLZ.QLZ_POINTERS_3 && c > k; k = (k + 1) | 0) {
                                o1 = hashtable.get([hash1, k]);
                                if ((fetch & 255) === source[System.Array.index(o1, source)] && (((fetch >> 8)) & 255) === source[System.Array.index(((o1 + 1) | 0), source)] && (((fetch >> 16)) & 255) === source[System.Array.index(((o1 + 2) | 0), source)] && o1 < ((src - QuickLZ.MINOFFSET) | 0)) {
                                    m = 3;
                                    while (source[System.Array.index(((o1 + m) | 0), source)] === source[System.Array.index(((src + m) | 0), source)] && m < remaining1) {
                                        m = (m + 1) | 0;
                                    }
                                    if ((m > matchlen1) || (m === matchlen1 && o1 > offset2)) {
                                        offset2 = o1;
                                        matchlen1 = m;
                                        best_k = k;
                                    }
                                }
                            }
                            o1 = offset2;
                            hashtable.set([hash1, c & (15)], src);
                            c = (c + 1) & 255;
                            hash_counter[System.Array.index(hash1, hash_counter)] = c;

                            if (matchlen1 >= 3 && ((src - o1) | 0) < 131071) {
                                var offset = (src - o1) | 0;

                                for (var u = 1; u < matchlen1; u = (u + 1) | 0) {
                                    fetch = source[System.Array.index(((src + u) | 0), source)] | (source[System.Array.index(((((src + u) | 0) + 1) | 0), source)] << 8) | (source[System.Array.index(((((src + u) | 0) + 2) | 0), source)] << 16);
                                    hash1 = ((fetch >> 12) ^ fetch) & (4095);
                                    c = Bridge.identity(hash_counter[System.Array.index(hash1, hash_counter)], ($t = (hash_counter[System.Array.index(hash1, hash_counter)] + 1) & 255, hash_counter[System.Array.index(hash1, hash_counter)] = $t, $t));
                                    hashtable.set([hash1, c & (15)], (src + u) | 0);
                                }

                                src = (src + matchlen1) | 0;
                                cword_val = ((((cword_val >>> 1) | 2147483648) >>> 0));

                                if (matchlen1 === 3 && offset <= 63) {
                                    QuickLZ.fast_write(destination, dst, offset << 2, 1);
                                    dst = (dst + 1) | 0;
                                } else if (matchlen1 === 3 && offset <= 16383) {
                                    QuickLZ.fast_write(destination, dst, (offset << 2) | 1, 2);
                                    dst = (dst + 2) | 0;
                                } else if (matchlen1 <= 18 && offset <= 1023) {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 3) | 0)) << 2) | (offset << 6) | 2, 2);
                                    dst = (dst + 2) | 0;
                                } else if (matchlen1 <= 33) {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 2) | 0)) << 2) | (offset << 7) | 3, 3);
                                    dst = (dst + 3) | 0;
                                } else {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 3) | 0)) << 7) | (offset << 15) | 3, 4);
                                    dst = (dst + 4) | 0;
                                }
                                lits = 0;
                            } else {
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                cword_val = (cword_val >>> 1);
                                src = (src + 1) | 0;
                                dst = (dst + 1) | 0;
                            }
                        }
                    }
                    while (src <= ((source.length - 1) | 0)) {
                        if ((((cword_val & 1) >>> 0)) === 1) {
                            QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), 4);
                            cword_ptr = dst;
                            dst = (dst + QuickLZ.CWORD_LEN) | 0;
                            cword_val = 2147483648;
                        }

                        destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                        src = (src + 1) | 0;
                        dst = (dst + 1) | 0;
                        cword_val = (cword_val >>> 1);
                    }
                    while ((((cword_val & 1) >>> 0)) !== 1) {
                        cword_val = (cword_val >>> 1);
                    }
                    QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), QuickLZ.CWORD_LEN);
                    QuickLZ.write_header(destination, level, true, source.length, dst);
                    d2 = System.Array.init(dst, 0, System.Byte);
                    System.Array.copy(destination, 0, d2, 0, dst);
                    return d2;
                },
                fast_write: function (a, i, value, numbytes) {
                    for (var j = 0; j < numbytes; j = (j + 1) | 0) {
                        a[System.Array.index(((i + j) | 0), a)] = (value >> (Bridge.Int.mul(j, 8))) & 255;
                    }
                },
                decompress: function (source) {
                    var level;
                    var size = QuickLZ.sizeDecompressed(source);
                    var src = QuickLZ.headerLen(source);
                    var dst = 0;
                    var cword_val = 1;
                    var destination = System.Array.init(size, 0, System.Byte);
                    var hashtable = System.Array.init(4096, 0, System.Int32);
                    var hash_counter = System.Array.init(4096, 0, System.Byte);
                    var last_matchstart = (((((size - QuickLZ.UNCONDITIONAL_MATCHLEN) | 0) - QuickLZ.UNCOMPRESSED_END) | 0) - 1) | 0;
                    var last_hashed = -1;
                    var hash;
                    var fetch = 0;

                    level = (source[System.Array.index(0, source)] >> 2) & 3;

                    if (level !== 1 && level !== 3) {
                        throw new System.ArgumentException("C# version only supports level 1 and 3");
                    }

                    if ((source[System.Array.index(0, source)] & 1) !== 1) {
                        var d2 = System.Array.init(size, 0, System.Byte);
                        System.Array.copy(source, QuickLZ.headerLen(source), d2, 0, size);
                        return d2;
                    }

                    for (; ; ) {
                        if (cword_val === 1) {
                            cword_val = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                            src = (src + 4) | 0;
                            if (dst <= last_matchstart) {
                                if (level === 1) {
                                    fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0;
                                } else {
                                    fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                                }
                            }
                        }

                        if ((((cword_val & 1) >>> 0)) === 1) {
                            var matchlen;
                            var offset2;

                            cword_val = cword_val >>> 1;

                            if (level === 1) {
                                hash = ((fetch | 0) >> 4) & 4095;
                                offset2 = (hashtable[System.Array.index(hash, hashtable)]) >>> 0;

                                if ((((fetch & 15) >>> 0)) !== 0) {
                                    matchlen = ((((fetch & 15) >>> 0)) + 2) >>> 0;
                                    src = (src + 2) | 0;
                                } else {
                                    matchlen = source[System.Array.index(((src + 2) | 0), source)];
                                    src = (src + 3) | 0;
                                }
                            } else {
                                var offset;
                                if ((((fetch & 3) >>> 0)) === 0) {
                                    offset = (((fetch & 255) >>> 0)) >>> 2;
                                    matchlen = 3;
                                    src = (src + 1) | 0;
                                } else if ((((fetch & 2) >>> 0)) === 0) {
                                    offset = (((fetch & 65535) >>> 0)) >>> 2;
                                    matchlen = 3;
                                    src = (src + 2) | 0;
                                } else if ((((fetch & 1) >>> 0)) === 0) {
                                    offset = (((fetch & 65535) >>> 0)) >>> 6;
                                    matchlen = (((((fetch >>> 2) & 15) >>> 0)) + 3) >>> 0;
                                    src = (src + 2) | 0;
                                } else if ((((fetch & 127) >>> 0)) !== 3) {
                                    offset = ((fetch >>> 7) & 131071) >>> 0;
                                    matchlen = (((((fetch >>> 2) & 31) >>> 0)) + 2) >>> 0;
                                    src = (src + 3) | 0;
                                } else {
                                    offset = (fetch >>> 15);
                                    matchlen = (((((fetch >>> 7) & 255) >>> 0)) + 3) >>> 0;
                                    src = (src + 4) | 0;
                                }
                                offset2 = System.Int64.clipu32(System.Int64(dst).sub(System.Int64(offset)));
                            }

                            destination[System.Array.index(((dst + 0) | 0), destination)] = destination[System.Array.index(((offset2 + 0) >>> 0), destination)];
                            destination[System.Array.index(((dst + 1) | 0), destination)] = destination[System.Array.index(((offset2 + 1) >>> 0), destination)];
                            destination[System.Array.index(((dst + 2) | 0), destination)] = destination[System.Array.index(((offset2 + 2) >>> 0), destination)];

                            for (var i = 3; System.Int64(i).lt(System.Int64(matchlen)); i = (i + 1) | 0) {
                                destination[System.Array.index(((dst + i) | 0), destination)] = destination[System.Array.index(System.Int64.toNumber(System.Int64(offset2).add(System.Int64(i))), destination)];
                            }

                            dst = (dst + (matchlen | 0)) | 0;

                            if (level === 1) {
                                fetch = (destination[System.Array.index(((last_hashed + 1) | 0), destination)] | (destination[System.Array.index(((last_hashed + 2) | 0), destination)] << 8) | (destination[System.Array.index(((last_hashed + 3) | 0), destination)] << 16)) >>> 0;
                                while (System.Int64(last_hashed).lt(System.Int64(dst).sub(System.Int64(matchlen)))) {
                                    last_hashed = (last_hashed + 1) | 0;
                                    hash = (((((((fetch >>> 12) ^ fetch) >>> 0)) & (4095)) >>> 0)) | 0;
                                    hashtable[System.Array.index(hash, hashtable)] = last_hashed;
                                    hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                    fetch = ((((fetch >>> 8 & 65535) >>> 0) | (((destination[System.Array.index(((last_hashed + 3) | 0), destination)] << 16)) >>> 0)) >>> 0);
                                }
                                fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0;
                            } else {
                                fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                            }
                            last_hashed = (dst - 1) | 0;
                        } else {
                            if (dst <= last_matchstart) {
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                dst = (dst + 1) | 0;
                                src = (src + 1) | 0;
                                cword_val = cword_val >>> 1;

                                if (level === 1) {
                                    while (last_hashed < ((dst - 3) | 0)) {
                                        last_hashed = (last_hashed + 1) | 0;
                                        var fetch2 = destination[System.Array.index(last_hashed, destination)] | (destination[System.Array.index(((last_hashed + 1) | 0), destination)] << 8) | (destination[System.Array.index(((last_hashed + 2) | 0), destination)] << 16);
                                        hash = ((fetch2 >> 12) ^ fetch2) & (4095);
                                        hashtable[System.Array.index(hash, hashtable)] = last_hashed;
                                        hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                    }
                                    fetch = ((((fetch >>> 8 & 65535) >>> 0) | (((source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0)) >>> 0);
                                } else {
                                    fetch = ((((((fetch >>> 8 & 65535) >>> 0) | (((source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0)) >>> 0) | (((source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0)) >>> 0);
                                }
                            } else {
                                while (dst <= ((size - 1) | 0)) {
                                    if (cword_val === 1) {
                                        src = (src + QuickLZ.CWORD_LEN) | 0;
                                        cword_val = 2147483648;
                                    }

                                    destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                    dst = (dst + 1) | 0;
                                    src = (src + 1) | 0;
                                    cword_val = cword_val >>> 1;
                                }
                                return destination;
                            }
                        }
                    }
                }
            }
        }
    });

    Bridge.define("Test.App", {
        main: function Main () {
            window.onload = Bridge.fn.combine(window.onload, Test.App.OnWindowLoad);
            window.onresize = Bridge.fn.combine(window.onresize, Test.App.OnResize);
            window.ondeviceorientation = Bridge.fn.combine(window.ondeviceorientation, Test.App.OnDeviceOrientation);
        },
        statics: {
            fields: {
                _sageContainer: null,
                _newSheetTab: null,
                _currentTabCanvas: null,
                _tabID: 0,
                _canvasLookup: null
            },
            props: {
                CurrentTabCanvas: {
                    get: function () {
                        return Test.App._canvasLookup.get(Test.App._currentTabCanvas);
                    }
                }
            },
            ctors: {
                init: function () {
                    this._tabID = 1;
                    this._canvasLookup = new (System.Collections.Generic.Dictionary$2(System.String,Test.TabCanvas))();
                }
            },
            methods: {
                OnDeviceOrientation: function (e) {
                    Test.App.OnLayoutChange();
                },
                OnResize: function (e) {
                    Test.App.OnLayoutChange();
                },
                OnLayoutChange: function () {
                    var tc = Test.App.CurrentTabCanvas;
                    if (tc != null) {
                        tc.OnLayoutChange();
                    }
                },
                OnWindowLoad: function (eee) {
                    window.addEventListener("copy", $asm.$.Test.App.f1);

                    window.addEventListener("paste", $asm.$.Test.App.f2);

                    $(document).on("keydown", Test.App.OnKeyDown);
                    $(document).on("contextmenu", ".IAmAGraphCanvas", $asm.$.Test.App.f3);

                    Test.App._sageContainer = document.getElementById("SageContainer");
                    $("#SageManual").on("click", $asm.$.Test.App.f4);
                    $("#SageGraph6").on("click", $asm.$.Test.App.f5);
                    $("#SageSparse6").on("click", $asm.$.Test.App.f6);
                    $("#SageChromaticNumber").on("click", $asm.$.Test.App.f7);
                    $("#SageChromaticPolynomial").on("click", $asm.$.Test.App.f8);
                    $("#SageColoring").on("click", $asm.$.Test.App.f9);
                    $("#SageIndependentSet").on("click", $asm.$.Test.App.f10);
                    $("#SageIsPerfect").on("click", $asm.$.Test.App.f11);
                    $("#SageMatchingPolynomial").on("click", $asm.$.Test.App.f12);
                    $("#SagePathwidth").on("click", $asm.$.Test.App.f13);
                    $("#SageTreewidth").on("click", $asm.$.Test.App.f14);
                    $("#SageTuttePolynomial").on("click", $asm.$.Test.App.f15);
                    $("#SageVertexCover").on("click", $asm.$.Test.App.f16);
                    $("#SageCliqueComplex").on("click", $asm.$.Test.App.f17);
                    $("#SageCliqueMaximum").on("click", $asm.$.Test.App.f18);
                    $("#SageCliqueNumber").on("click", $asm.$.Test.App.f19);
                    $("#SageCliquePolynomial").on("click", $asm.$.Test.App.f20);
                    $("#SageBridges").on("click", $asm.$.Test.App.f21);
                    $("#SageGomoryHuTree").on("click", $asm.$.Test.App.f22);
                    $("#SageRandomSpanningTree").on("click", $asm.$.Test.App.f23);
                    $("#SageApexVertices").on("click", $asm.$.Test.App.f24);
                    $("#SageIsApex").on("click", $asm.$.Test.App.f25);
                    $("#SageIsArcTransitive").on("click", $asm.$.Test.App.f26);
                    $("#SageIsAsteroidalTripleFree").on("click", $asm.$.Test.App.f27);
                    $("#SageIsBiconnected").on("click", $asm.$.Test.App.f28);
                    $("#SageIsBipartite").on("click", $asm.$.Test.App.f29);
                    $("#SageIsBlockGraph").on("click", $asm.$.Test.App.f30);
                    $("#SageIsCartesianProduct").on("click", $asm.$.Test.App.f31);
                    $("#SageIsDistanceRegular").on("click", $asm.$.Test.App.f32);
                    $("#SageIsEdgeTransitive").on("click", $asm.$.Test.App.f33);
                    $("#SageIsEvenHoleFree").on("click", $asm.$.Test.App.f34);
                    $("#SageIsForest").on("click", $asm.$.Test.App.f35);
                    $("#SageIsHalfTransitive").on("click", $asm.$.Test.App.f36);
                    $("#SageIsLineGraph").on("click", $asm.$.Test.App.f37);
                    $("#SageIsLongAntiholeFree").on("click", $asm.$.Test.App.f38);
                    $("#SageIsLongHoleFree").on("click", $asm.$.Test.App.f39);
                    $("#SageIsOddHoleFree").on("click", $asm.$.Test.App.f40);
                    $("#SageIsOverfull").on("click", $asm.$.Test.App.f41);
                    $("#SageIsPartialCube").on("click", $asm.$.Test.App.f42);
                    $("#SageIsPrime").on("click", $asm.$.Test.App.f43);
                    $("#SageIsSemiSymmetric").on("click", $asm.$.Test.App.f44);
                    $("#SageIsSplit").on("click", $asm.$.Test.App.f45);
                    $("#SageIsStronglyRegular").on("click", $asm.$.Test.App.f46);
                    $("#SageIsTree").on("click", $asm.$.Test.App.f47);
                    $("#SageIsTriangleFree").on("click", $asm.$.Test.App.f48);
                    $("#SageIsWeaklyChordal").on("click", $asm.$.Test.App.f49);
                    $("#SageOddGirth").on("click", $asm.$.Test.App.f50);
                    $("#SageFractionalChromaticIndex").on("click", $asm.$.Test.App.f51);
                    $("#SageHasPerfectMatching").on("click", $asm.$.Test.App.f52);
                    $("#SageKirchhoffSymanzikPolynomial").on("click", $asm.$.Test.App.f53);
                    $("#SageLovaszTheta").on("click", $asm.$.Test.App.f54);
                    $("#SageMatching").on("click", $asm.$.Test.App.f55);
                    $("#SageMaximumAverageDegree").on("click", $asm.$.Test.App.f56);
                    $("#SageSeidelAdjacencyMatrix").on("click", $asm.$.Test.App.f57);
                    $("#SageNetworkxGraph").on("click", $asm.$.Test.App.f58);
                    $("#SageAdjacencyMatrix").on("click", $asm.$.Test.App.f59);
                    $("#SageIncidenceMatrix").on("click", $asm.$.Test.App.f60);
                    $("#SageDistanceMatrix").on("click", $asm.$.Test.App.f61);
                    $("#SageKirchhoffMatrix").on("click", $asm.$.Test.App.f62);
                    $("#SageDensity").on("click", $asm.$.Test.App.f63);
                    $("#SageOrder").on("click", $asm.$.Test.App.f64);
                    $("#SageSize").on("click", $asm.$.Test.App.f65);
                    $("#SageAverageDegree").on("click", $asm.$.Test.App.f66);
                    $("#SageDegreeSequence").on("click", $asm.$.Test.App.f67);
                    $("#SageCycleBasis").on("click", $asm.$.Test.App.f68);
                    $("#SageAllPaths").on("click", $asm.$.Test.App.f69);
                    $("#SageTrianglesCount").on("click", $asm.$.Test.App.f70);
                    $("#SageSpectrum").on("click", $asm.$.Test.App.f71);
                    $("#SageEigenvectors").on("click", $asm.$.Test.App.f72);
                    $("#SageEigenspaces").on("click", $asm.$.Test.App.f73);
                    $("#SageAutomorphismGroup").on("click", $asm.$.Test.App.f74);
                    $("#SageIsVertexTransitive").on("click", $asm.$.Test.App.f75);
                    $("#SageCanonicalLabel").on("click", $asm.$.Test.App.f76);
                    $("#SageIsCayley").on("click", $asm.$.Test.App.f77);
                    $("#SageIsEulerian").on("click", $asm.$.Test.App.f78);
                    $("#SageIsPlanar").on("click", $asm.$.Test.App.f79);
                    $("#SageIsRegular").on("click", $asm.$.Test.App.f80);
                    $("#SageIsChordal").on("click", $asm.$.Test.App.f81);
                    $("#SageIsCirculant").on("click", $asm.$.Test.App.f82);
                    $("#SageIsInterval").on("click", $asm.$.Test.App.f83);
                    $("#SageIsGallaiTree").on("click", $asm.$.Test.App.f84);
                    $("#SageIsClique").on("click", $asm.$.Test.App.f85);
                    $("#SageIsCycle").on("click", $asm.$.Test.App.f86);
                    $("#SageIsIndependentSet").on("click", $asm.$.Test.App.f87);
                    $("#SageIsTransitivelyReduced").on("click", $asm.$.Test.App.f88);
                    $("#SageIsEquitable").on("click", $asm.$.Test.App.f89);
                    $("#SageEccentricity").on("click", $asm.$.Test.App.f90);
                    $("#SageRadius").on("click", $asm.$.Test.App.f91);
                    $("#SageDiameter").on("click", $asm.$.Test.App.f92);
                    $("#SageGirth").on("click", $asm.$.Test.App.f93);
                    $("#SageEdgeConnectivity").on("click", $asm.$.Test.App.f94);
                    $("#SageVertexConnectivity").on("click", $asm.$.Test.App.f95);
                    $("#SageIsHamiltonian").on("click", $asm.$.Test.App.f96);
                    $("#SageCharacteristicPolynomial").on("click", $asm.$.Test.App.f97);
                    $("#SageGenus").on("click", $asm.$.Test.App.f98);


                    $("#SageLayoutSprings").on("click", $asm.$.Test.App.f99);
                    $("#SageLayoutRanked").on("click", $asm.$.Test.App.f100);
                    $("#SageLayoutRandom").on("click", $asm.$.Test.App.f101);
                    $("#SageLayoutCircular").on("click", $asm.$.Test.App.f102);
                    $("#SageLayoutTree").on("click", $asm.$.Test.App.f103);
                    $("#SageLayoutGraphViz").on("click", $asm.$.Test.App.f104);
                    $("#SageLayoutPlanar").on("click", $asm.$.Test.App.f105);

                    $(".NamedGraph").on("click", $asm.$.Test.App.f106);



                    Test.App.NewTab();
                    Test.App.AddNewSheetTab();

                    $(".nav-tabs").on("click", "a", $asm.$.Test.App.f107);

                    $(".new-sheet-anchor").on("click", $asm.$.Test.App.f108);
                },
                AddNewSheetTab: function () {
                    var tabControl = document.getElementById("TabControl");
                    Test.App._newSheetTab = document.createElement('li');
                    Test.App._newSheetTab.id = "new-sheet";

                    var anchor = document.createElement('a');
                    anchor.className = "new-sheet-anchor";
                    anchor.textContent = "+";
                    anchor.href = "#";

                    Test.App._newSheetTab.appendChild(anchor);
                    tabControl.appendChild(Test.App._newSheetTab);
                },
                NewTab: function (name, G) {
                    var $t, $t1;
                    if (name === void 0) { name = null; }
                    if (G === void 0) { G = null; }
                    if (System.String.isNullOrEmpty(name)) {
                        name = "sheet " + Test.App._tabID;
                    }

                    var canvas = document.createElement('canvas');
                    canvas.id = "Tab" + Test.App._tabID;
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    canvas.className = "IAmAGraphCanvas";

                    canvas.onshow = Bridge.fn.combine(canvas.onshow, function () {
                        canvas.width = canvas.parentElement.clientWidth;
                        canvas.height = canvas.parentElement.clientHeight;
                    });

                    if (G == null) {
                        G = new Graphs.Graph.ctor();
                    }
                    var graphCanvas = new Graphs.GraphCanvas(G);
                    var tc = new Test.TabCanvas(canvas, graphCanvas);
                    tc.Invalidate();

                    var tabPane = document.createElement('div');
                    tabPane.className = "tab-pane active";
                    tabPane.id = "Tab" + Test.App._tabID;
                    tabPane.appendChild(canvas);

                    var tabControlContent = document.getElementById("TabControlContent");
                    $t = Bridge.getEnumerator(tabControlContent.children);
                    try {
                        while ($t.moveNext()) {
                            var child = $t.Current;
                            child.className = "tab-pane";
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }tabControlContent.appendChild(tabPane);

                    var tab = document.createElement('li');
                    tab.className = "active";

                    var anchor = document.createElement('a');
                    anchor.setAttribute("data-toggle", "tab");
                    anchor.textContent = name;
                    anchor.href = "#Tab" + Test.App._tabID;
                    Test.App._canvasLookup.set(anchor.href, tc);
                    Test.App._currentTabCanvas = anchor.href;

                    tab.appendChild(anchor);

                    var tabControl = document.getElementById("TabControl");
                    $t1 = Bridge.getEnumerator(tabControl.children);
                    try {
                        while ($t1.moveNext()) {
                            var child1 = $t1.Current;
                            child1.className = "narf";
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }tabControl.insertBefore(tab, Test.App._newSheetTab);

                    Test.App._tabID = (Test.App._tabID + 1) | 0;
                },
                OnKeyDown: function (e) {
                    var tc = Test.App.CurrentTabCanvas;

                    switch (e.key) {
                        case "f": 
                            tc.GraphCanvas.DoZoomFit();
                            break;
                        case "-": 
                            tc.GraphCanvas.DoZoom(-1, new GraphicsLayer.Box.ctor(0.5, 0.5));
                            break;
                        case "+": 
                            tc.GraphCanvas.DoZoom(1, new GraphicsLayer.Box.ctor(0.5, 0.5));
                            break;
                        case "i": 
                            tc.GraphCanvas.ToggleVertexIndices();
                            break;
                        case "I": 
                            tc.GraphCanvas.RotateVertexIndices();
                            break;
                        case "j": 
                            tc.GraphCanvas.ToggleEdgeIndices();
                            break;
                        case "J": 
                            tc.GraphCanvas.RotateEdgeIndices();
                            break;
                        case "r": 
                            tc.GraphCanvas.DoReverseSelectedEdges();
                            break;
                        case "R": 
                            tc.GraphCanvas.DoRotateSelectedEdges();
                            break;
                        case "y": 
                            if (e.ctrlKey) {
                                tc.GraphCanvas.DoRedo();
                            }
                            break;
                        case "z": 
                            if (e.ctrlKey) {
                                tc.GraphCanvas.DoUndo();
                            }
                            break;
                    }
                },
                AskSage: function (s) {
                    var div = Test.App.AppendSageDiv(s);

                    sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "fullScreen"], autoeval:false});
                    $("#SageModal").modal('show');
                },
                AskSageAuto: function (s) {
                    Test.App.AppendSageDiv(s);

                    sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "evalButton", "fullScreen", "editor"], autoeval:true});
                    $("#SageModal").modal('show');
                },
                AskSageAsync: function (G, sageCodeAboutG) {
                    var $step = 0,
                        $task1, 
                        $taskResult1, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([0,1], $step);
                                    switch ($step) {
                                        case 0: {
                                            $task1 = Test.App.AskSageAsync$1(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(G.GetEdgeWeights()), "')", '\n', sageCodeAboutG));
                                            $step = 1;
                                            $task1.continueWith($asyncBody);
                                            return;
                                        }
                                        case 1: {
                                            $taskResult1 = $task1.getAwaitedResult();
                                            $tcs.setResult($taskResult1);
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                },
                AskSageAsync$1: function (sageCode) {
                    var $step = 0,
                        $task1, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        output, 
                        response, 
                        ss, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([0,1,2,3,4], $step);
                                    switch ($step) {
                                        case 0: {
                                            output = document.getElementById("SageSecretOutputHole");
                                            output.textContent = "working";
                                            Test.App.AppendSageDiv(sageCode);

                                            sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "evalButton", "fullScreen", "editor"], autoeval:true, outputLocation:"#SageSecretOutputHole"});

                                            
                                            $step = 1;
                                            continue;
                                        }
                                        case 1: {
                                            if ( !System.String.contains(output.textContent,"Accepted:") ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $task1 = System.Threading.Tasks.Task.delay(100);
                                            $step = 3;
                                            $task1.continueWith($asyncBody);
                                            return;
                                        }
                                        case 3: {
                                            $task1.getAwaitedResult();
                                            
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            response = output.textContent;
                                            if (System.String.isNullOrEmpty(response)) {
                                                $tcs.setResult("flibble");
                                                return;
                                            }

                                            ss = System.Linq.Enumerable.from(System.String.split(response, System.Array.init(['\n'], System.String), null, 1)).firstOrDefault($asm.$.Test.App.f109, null);
                                            if (System.String.isNullOrEmpty(ss)) {
                                                $tcs.setResult("flabble");
                                                return;
                                            }

                                            ss = ss.substr(((((System.String.indexOf(ss, "text/plain") + ("text/plain").length) | 0) + 3) | 0));
                                            ss = ss.substr(0, System.String.indexOf(ss, "\""));

                                            $tcs.setResult(ss);
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                },
                AppendSageDiv: function (s) {
                    var $t;
                    if (Test.App._sageContainer.childElementCount > 0) {
                        Test.App._sageContainer.removeChild(($t = Test.App._sageContainer.children)[System.Array.index(0, $t)]);
                    }
                    var div = document.createElement('div');
                    div.className = "compute";
                    div.textContent = s;
                    Test.App._sageContainer.appendChild(div);

                    return div;
                }
            }
        }
    });

    Bridge.ns("Test.App", $asm.$);

    Bridge.apply($asm.$.Test.App, {
        f1: function (e) {
            if ((Bridge.is(e.target, HTMLSpanElement)) || (Bridge.is(e.target, HTMLAnchorElement))) {
                e.preventDefault();
            }
            var tc = Test.App._canvasLookup.get(Test.App._currentTabCanvas);
            var s = tc.GraphCanvas.DoCopy();
            if (!System.String.isNullOrEmpty(s)) {
                e.clipboardData.setData("Text", s);
            }
        },
        f2: function (e) {
            e.preventDefault();
            var s = e.clipboardData.getData("Text");
            var tc = Test.App._canvasLookup.get(Test.App._currentTabCanvas);
            tc.GraphCanvas.DoPaste(s || "");
        },
        f3: function (e) {
            e.preventDefault();
        },
        f4: function () {
            Test.App.CurrentTabCanvas.SageManual();
        },
        f5: function () {
            Test.App.CurrentTabCanvas.SageGraph6();
        },
        f6: function () {
            Test.App.CurrentTabCanvas.SageSparse6();
        },
        f7: function () {
            Test.App.CurrentTabCanvas.SageChromaticNumber();
        },
        f8: function () {
            Test.App.CurrentTabCanvas.SageChromaticPolynomial();
        },
        f9: function () {
            Test.App.CurrentTabCanvas.SageColoring();
        },
        f10: function () {
            Test.App.CurrentTabCanvas.SageIndependentSet();
        },
        f11: function () {
            Test.App.CurrentTabCanvas.SageIsPerfect();
        },
        f12: function () {
            Test.App.CurrentTabCanvas.SageMatchingPolynomial();
        },
        f13: function () {
            Test.App.CurrentTabCanvas.SagePathwidth();
        },
        f14: function () {
            Test.App.CurrentTabCanvas.SageTreewidth();
        },
        f15: function () {
            Test.App.CurrentTabCanvas.SageTuttePolynomial();
        },
        f16: function () {
            Test.App.CurrentTabCanvas.SageVertexCover();
        },
        f17: function () {
            Test.App.CurrentTabCanvas.SageCliqueComplex();
        },
        f18: function () {
            Test.App.CurrentTabCanvas.SageCliqueMaximum();
        },
        f19: function () {
            Test.App.CurrentTabCanvas.SageCliqueNumber();
        },
        f20: function () {
            Test.App.CurrentTabCanvas.SageCliquePolynomial();
        },
        f21: function () {
            Test.App.CurrentTabCanvas.SageBridges();
        },
        f22: function () {
            Test.App.CurrentTabCanvas.SageGomoryHuTree();
        },
        f23: function () {
            Test.App.CurrentTabCanvas.SageRandomSpanningTree();
        },
        f24: function () {
            Test.App.CurrentTabCanvas.SageApexVertices();
        },
        f25: function () {
            Test.App.CurrentTabCanvas.SageIsApex();
        },
        f26: function () {
            Test.App.CurrentTabCanvas.SageIsArcTransitive();
        },
        f27: function () {
            Test.App.CurrentTabCanvas.SageIsAsteroidalTripleFree();
        },
        f28: function () {
            Test.App.CurrentTabCanvas.SageIsBiconnected();
        },
        f29: function () {
            Test.App.CurrentTabCanvas.SageIsBipartite();
        },
        f30: function () {
            Test.App.CurrentTabCanvas.SageIsBlockGraph();
        },
        f31: function () {
            Test.App.CurrentTabCanvas.SageIsCartesianProduct();
        },
        f32: function () {
            Test.App.CurrentTabCanvas.SageIsDistanceRegular();
        },
        f33: function () {
            Test.App.CurrentTabCanvas.SageIsEdgeTransitive();
        },
        f34: function () {
            Test.App.CurrentTabCanvas.SageIsEvenHoleFree();
        },
        f35: function () {
            Test.App.CurrentTabCanvas.SageIsForest();
        },
        f36: function () {
            Test.App.CurrentTabCanvas.SageIsHalfTransitive();
        },
        f37: function () {
            Test.App.CurrentTabCanvas.SageIsLineGraph();
        },
        f38: function () {
            Test.App.CurrentTabCanvas.SageIsLongAntiholeFree();
        },
        f39: function () {
            Test.App.CurrentTabCanvas.SageIsLongHoleFree();
        },
        f40: function () {
            Test.App.CurrentTabCanvas.SageIsOddHoleFree();
        },
        f41: function () {
            Test.App.CurrentTabCanvas.SageIsOverfull();
        },
        f42: function () {
            Test.App.CurrentTabCanvas.SageIsPartialCube();
        },
        f43: function () {
            Test.App.CurrentTabCanvas.SageIsPrime();
        },
        f44: function () {
            Test.App.CurrentTabCanvas.SageIsSemiSymmetric();
        },
        f45: function () {
            Test.App.CurrentTabCanvas.SageIsSplit();
        },
        f46: function () {
            Test.App.CurrentTabCanvas.SageIsStronglyRegular();
        },
        f47: function () {
            Test.App.CurrentTabCanvas.SageIsTree();
        },
        f48: function () {
            Test.App.CurrentTabCanvas.SageIsTriangleFree();
        },
        f49: function () {
            Test.App.CurrentTabCanvas.SageIsWeaklyChordal();
        },
        f50: function () {
            Test.App.CurrentTabCanvas.SageOddGirth();
        },
        f51: function () {
            Test.App.CurrentTabCanvas.SageFractionalChromaticIndex();
        },
        f52: function () {
            Test.App.CurrentTabCanvas.SageHasPerfectMatching();
        },
        f53: function () {
            Test.App.CurrentTabCanvas.SageKirchhoffSymanzikPolynomial();
        },
        f54: function () {
            Test.App.CurrentTabCanvas.SageLovaszTheta();
        },
        f55: function () {
            Test.App.CurrentTabCanvas.SageMatching();
        },
        f56: function () {
            Test.App.CurrentTabCanvas.SageMaximumAverageDegree();
        },
        f57: function () {
            Test.App.CurrentTabCanvas.SageSeidelAdjacencyMatrix();
        },
        f58: function () {
            Test.App.CurrentTabCanvas.SageNetworkxGraph();
        },
        f59: function () {
            Test.App.CurrentTabCanvas.SageAdjacencyMatrix();
        },
        f60: function () {
            Test.App.CurrentTabCanvas.SageIncidenceMatrix();
        },
        f61: function () {
            Test.App.CurrentTabCanvas.SageDistanceMatrix();
        },
        f62: function () {
            Test.App.CurrentTabCanvas.SageKirchhoffMatrix();
        },
        f63: function () {
            Test.App.CurrentTabCanvas.SageDensity();
        },
        f64: function () {
            Test.App.CurrentTabCanvas.SageOrder();
        },
        f65: function () {
            Test.App.CurrentTabCanvas.SageSize();
        },
        f66: function () {
            Test.App.CurrentTabCanvas.SageAverageDegree();
        },
        f67: function () {
            Test.App.CurrentTabCanvas.SageDegreeSequence();
        },
        f68: function () {
            Test.App.CurrentTabCanvas.SageCycleBasis();
        },
        f69: function () {
            Test.App.CurrentTabCanvas.SageAllPaths();
        },
        f70: function () {
            Test.App.CurrentTabCanvas.SageTrianglesCount();
        },
        f71: function () {
            Test.App.CurrentTabCanvas.SageSpectrum();
        },
        f72: function () {
            Test.App.CurrentTabCanvas.SageEigenvectors();
        },
        f73: function () {
            Test.App.CurrentTabCanvas.SageEigenspaces();
        },
        f74: function () {
            Test.App.CurrentTabCanvas.SageAutomorphismGroup();
        },
        f75: function () {
            Test.App.CurrentTabCanvas.SageIsVertexTransitive();
        },
        f76: function () {
            Test.App.CurrentTabCanvas.SageCanonicalLabel();
        },
        f77: function () {
            Test.App.CurrentTabCanvas.SageIsCayley();
        },
        f78: function () {
            Test.App.CurrentTabCanvas.SageIsEulerian();
        },
        f79: function () {
            Test.App.CurrentTabCanvas.SageIsPlanar();
        },
        f80: function () {
            Test.App.CurrentTabCanvas.SageIsRegular();
        },
        f81: function () {
            Test.App.CurrentTabCanvas.SageIsChordal();
        },
        f82: function () {
            Test.App.CurrentTabCanvas.SageIsCirculant();
        },
        f83: function () {
            Test.App.CurrentTabCanvas.SageIsInterval();
        },
        f84: function () {
            Test.App.CurrentTabCanvas.SageIsGallaiTree();
        },
        f85: function () {
            Test.App.CurrentTabCanvas.SageIsClique();
        },
        f86: function () {
            Test.App.CurrentTabCanvas.SageIsCycle();
        },
        f87: function () {
            Test.App.CurrentTabCanvas.SageIsIndependentSet();
        },
        f88: function () {
            Test.App.CurrentTabCanvas.SageIsTransitivelyReduced();
        },
        f89: function () {
            Test.App.CurrentTabCanvas.SageIsEquitable();
        },
        f90: function () {
            Test.App.CurrentTabCanvas.SageEccentricity();
        },
        f91: function () {
            Test.App.CurrentTabCanvas.SageRadius();
        },
        f92: function () {
            Test.App.CurrentTabCanvas.SageDiameter();
        },
        f93: function () {
            Test.App.CurrentTabCanvas.SageGirth();
        },
        f94: function () {
            Test.App.CurrentTabCanvas.SageEdgeConnectivity();
        },
        f95: function () {
            Test.App.CurrentTabCanvas.SageVertexConnectivity();
        },
        f96: function () {
            Test.App.CurrentTabCanvas.SageIsHamiltonian();
        },
        f97: function () {
            Test.App.CurrentTabCanvas.SageCharacteristicPolynomial();
        },
        f98: function () {
            Test.App.CurrentTabCanvas.SageGenus();
        },
        f99: function () {
            Test.App.CurrentTabCanvas.SageLayoutSpring();
        },
        f100: function () {
            Test.App.CurrentTabCanvas.SageLayoutRanked();
        },
        f101: function () {
            Test.App.CurrentTabCanvas.SageLayoutExtendRandomly();
        },
        f102: function () {
            Test.App.CurrentTabCanvas.SageLayoutCircular();
        },
        f103: function () {
            Test.App.CurrentTabCanvas.SageLayoutTree();
        },
        f104: function () {
            Test.App.CurrentTabCanvas.SageLayoutGraphviz();
        },
        f105: function () {
            Test.App.CurrentTabCanvas.SageLayoutPlanar();
        },
        f106: function (ee) {
            Test.App.CurrentTabCanvas.SageLoadNamedGraph(Bridge.cast(ee.currentTarget, HTMLElement).textContent);
        },
        f107: function (ee) {
            ee.preventDefault();
            if (!$(this).hasClass("new-sheet-anchor")) {
                var d = $(this);
                Test.App._currentTabCanvas = ee.target.href;
                var canvas = Test.App.CurrentTabCanvas.Canvas;
                d.tab("show");
            }
        },
        f108: function (ee) {
            ee.preventDefault();
            Test.App.NewTab();
        },
        f109: function (line) {
        return System.String.contains(line,"Accepted:");
    }
    });

    Bridge.define("Test.HelperExtensions", {
        statics: {
            methods: {
                ToColor: function (argb) {
                    return System.String.format("rgba({0},{1},{2},{3:0.00})", Bridge.box(argb.R, System.Int32), Bridge.box(argb.G, System.Int32), Bridge.box(argb.B, System.Int32), Bridge.box(argb.A / 255.0, System.Double, System.Double.format, System.Double.getHashCode));
                }
            }
        }
    });

    Bridge.define("Test.LayoutAnimation", {
        statics: {
            fields: {
                Steps: 0
            },
            ctors: {
                init: function () {
                    this.Steps = 100;
                }
            }
        },
        fields: {
            _update: null,
            _finalUpdate: null,
            _layout: null,
            _xstep: null,
            _ystep: null,
            _step: 0,
            _G: null
        },
        ctors: {
            init: function () {
                this._step = 0;
            },
            ctor: function (update, finalUpdate, layout, G) {
                this.$initialize();
                this._G = G;
                this._update = update;
                this._finalUpdate = finalUpdate;
                this._layout = layout;

                try {
                    this._xstep = System.Array.init(this._layout.Count, 0, System.Double);
                    this._ystep = System.Array.init(this._layout.Count, 0, System.Double);
                    for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                        this._xstep[System.Array.index(i, this._xstep)] = (this._layout.getItem(i).X - this._G.Vertices.getItem(i).X) / Test.LayoutAnimation.Steps;
                        this._ystep[System.Array.index(i, this._ystep)] = (this._layout.getItem(i).Y - this._G.Vertices.getItem(i).Y) / Test.LayoutAnimation.Steps;
                    }
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            }
        },
        methods: {
            Animate: function () {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([1,2,3,4], $step);
                                switch ($step) {

                                    case 1: {
                                        if ( this._step < Test.LayoutAnimation.Steps ) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        this.DoStep();
                                        $task1 = System.Threading.Tasks.Task.delay(10);
                                        $step = 3;
                                        $task1.continueWith($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $task1.getAwaitedResult();
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoStep: function () {
                var $t, $t1;
                for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                    $t = this._G.Vertices.getItem(i);
                    $t.X += this._xstep[System.Array.index(i, this._xstep)];
                    $t1 = this._G.Vertices.getItem(i);
                    $t1.Y += this._ystep[System.Array.index(i, this._ystep)];
                }

                this._update();
                this._step = (this._step + 1) | 0;
                if (this._step >= Test.LayoutAnimation.Steps) {
                    this.OnFinish();
                }
            },
            OnFinish: function () {
                for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                    this._G.Vertices.getItem(i).X = this._layout.getItem(i).X;
                    this._G.Vertices.getItem(i).Y = this._layout.getItem(i).Y;
                }
                this._finalUpdate();
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.UnionFindTrackedRoots$1", function (T) { return {
        inherits: [Algorithms.DataStructures.UnionFind$1(T)],
        fields: {
            _roots: null
        },
        ctors: {
            init: function () {
                this._roots = new (System.Collections.Generic.List$1(Algorithms.DataStructures.UnionFind$1.Node(T)))();
            }
        },
        methods: {
            FindAllExcept: function (nodes) {
                return System.Linq.Enumerable.from(this._roots).except(System.Linq.Enumerable.from(nodes).select(Bridge.fn.bind(this, function (n) {
                            return this.Find(n);
                        })));
            },
            RootAdded: function (n) {
                this._roots.add(n);
            },
            RootRemoved: function (n) {
                this._roots.remove(n);
            }
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.Chronicle.ChronicledBranch", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.IEnumerable$1(Algorithms.FixerBreaker.Move))],
        props: {
            Alpha: 0,
            Beta: 0,
            SwapComponents: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$IEnumerable$1$Algorithms$FixerBreaker$Move$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (S, alpha, beta, partitions) {
                this.$initialize();
                this.Alpha = alpha;
                this.Beta = beta;
                this.SwapComponents = System.Linq.Enumerable.from(partitions).select(function (p) {
                        return System.Linq.Enumerable.from(p).select(function (i) {
                                return S.getItem(i);
                            }).toList(System.Int32);
                    }).toList(System.Collections.Generic.List$1(System.Int32));
            }
        },
        methods: {
            getEnumerator: function () {
                return System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateShortLexNonempty(this.SwapComponents.Count)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Chronicle.ChronicledBranch.f1)).getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            EnumerateMoves: function (cf) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.FixerBreaker.Move))(Bridge.fn.bind(this, function (cf) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        i,
                        $t,
                        s,
                        $t1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.FixerBreaker.Move))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        i = 0;
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ( i < cf.Count ) {
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 8;
                                        continue;
                                    }
                                    case 2: {
                                        if (!cf.getItem(i)) {
                                                $step = 7;
                                                continue;
                                            }

                                            $t = Bridge.getEnumerator(this.SwapComponents.getItem(i));
                                            $step = 3;
                                            continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                                s = $t.Current;
                                                $step = 4;
                                                continue;
                                            }
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $enumerator.current = ($t1 = new Algorithms.FixerBreaker.Move(), $t1.Added = this.Alpha, $t1.Removed = this.Beta, $t1.Stack = s, $t1);
                                            $step = 5;
                                            return true;
                                    }
                                    case 5: {
                                        $step = 3;
                                        continue;
                                    }
                                    case 6: {
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        i = (i + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 8: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.Chronicle.ChronicledBranch", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.Chronicle.ChronicledBranch, {
        f1: function (cf) {
            return this.EnumerateMoves(cf);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        statics: {
            methods: {
                ColorableWithoutEdge: function (knowledge, board, edgeIndex) {
                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge$1(knowledge, board.Stacks, edgeIndex);
                },
                ColorableWithoutEdge$1: function (knowledge, stacks, edgeIndex) {
                    var lg = knowledge.GraphKnowledge.LineGraph;

                    return lg.IsChoosable(System.Linq.Enumerable.range(0, lg.N).select(function (e) {
                        if (e === edgeIndex) {
                            return System.Int64(-1);
                        }

                        return knowledge.GetEdgeColorList$1(stacks, e);
                    }).toList(System.Int64));
                }
            }
        },
        props: {
            Reason: {
                get: function () {
                    return "color all";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var lineGraph = knowledge.GraphKnowledge.LineGraph;
                var canColor = lineGraph.IsChoosable(System.Linq.Enumerable.range(0, lineGraph.N).select(function (e) {
                    return knowledge.GetEdgeColorList(board, e);
                }).toList(System.Int64));

                if (canColor) {
                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, this.Reason);
                }

                return canColor;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            Reason: {
                get: function () {
                    return "common color";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var commonColor = System.Linq.Enumerable.from(board.Stacks).aggregate(System.Int64(-1), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer.f1).ne(System.Int64(0));

                if (commonColor) {
                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, this.Reason);
                }

                return commonColor;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer, {
        f1: function (t, s) {
            return t.and(s);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            FindCleanestWin: false,
            DoSuperabundantCheck: false,
            Reason: {
                get: function () {
                    return "good swap";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return true;
                }
            },
            ChildReason: {
                get: function () {
                    return "";
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        ctors: {
            ctor: function (findCleanestWin, superabundantOnly) {
                if (findCleanestWin === void 0) { findCleanestWin = true; }
                if (superabundantOnly === void 0) { superabundantOnly = true; }

                this.$initialize();
                this.FindCleanestWin = findCleanestWin;
                this.DoSuperabundantCheck = superabundantOnly;
            }
        },
        methods: {
            IsChildBoardBetter: function (knowledge, board, childBoard) {
                return false;
            },
            Analyze: function (knowledge, board) {
                var $t, $t1, $t2;
                var potKnowledge = knowledge.getItem(board.Template.Value).getItem(board.ColorCount);
                var graphKnowledge = knowledge.GraphKnowledge;

                var boardKnowledge = potKnowledge.getItem(board);
                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(boardKnowledge)) {
                    return true;
                }

                var win = false;
                var winDepth = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var colorPairWinDepth = 0;
                        var winningSwaps = new (System.Collections.Generic.List$1(System.Object))();
                        var improvingSwaps = new (System.Collections.Generic.List$1(System.Object))();
                        var winningSwapAlwaysExists = true;
                        var improvingSwapAlwaysExists = true;

                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var winningSwap = null;
                                var improvingSwap = null;

                                var branchWinDepth = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        var childBoard = board.Clone();
                                        childBoard.DoMoveCombination(swap);

                                        if (this.DoSuperabundantCheck && !Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(graphKnowledge.Graph, childBoard)) {
                                            continue;
                                        }

                                        var childBoardKnowledge = potKnowledge.getItem(childBoard);
                                        if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(childBoardKnowledge) && ((childBoardKnowledge.Depth + 1) | 0) < branchWinDepth) {
                                            branchWinDepth = (childBoardKnowledge.Depth + 1) | 0;
                                            winningSwap = { item1: branch.SwapComponents, item2: System.Linq.Enumerable.from(swap).toList(Algorithms.FixerBreaker.Move), item3: childBoardKnowledge.Reason };

                                            if (!this.FindCleanestWin) {
                                                break;
                                            }
                                        } else if (this.IsChildBoardBetter(knowledge, board, childBoard)) {
                                            improvingSwap = { item1: branch.SwapComponents, item2: System.Linq.Enumerable.from(swap).toList(Algorithms.FixerBreaker.Move), item3: System.String.concat(this.ChildReason, " better") };
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                colorPairWinDepth = Math.max(colorPairWinDepth, branchWinDepth);

                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(winningSwap)) {
                                    winningSwaps.add(winningSwap);
                                    improvingSwaps.add(winningSwap);
                                } else {
                                    winningSwapAlwaysExists = false;
                                    if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(improvingSwap)) {
                                        improvingSwaps.add(improvingSwap);
                                    } else {
                                        improvingSwapAlwaysExists = false;
                                        break;
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            if (colorPairWinDepth < winDepth) {
                                winDepth = colorPairWinDepth;

                                win = true;
                                potKnowledge.AddWin$1(board, this.Reason, winDepth, colorPair, winningSwaps);

                                if (!this.FindCleanestWin) {
                                    break;
                                }
                            }
                        } else if (improvingSwapAlwaysExists) {
                            potKnowledge.AddImprovement(board, this.ChildReason, colorPairWinDepth, colorPair, improvingSwaps);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return win;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        statics: {
            methods: {
                IsKierstead: function (knowledge, board, enforceDegreeRequirement, reason) {
                    if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                    if (reason === void 0) { reason = ""; }
                    return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.EnumerateKiersteadEdgeIndices(knowledge, board, enforceDegreeRequirement, reason)).any();
                },
                IsKierstead$1: function (knowledge, board, edgeIndex, enforceDegreeRequirement) {
                    var $t;
                    if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                    $t = Bridge.getEnumerator(knowledge.GraphKnowledge.ConnectedOrderings.Value.get(knowledge.GraphKnowledge.Edges.getItem(edgeIndex)));
                    try {
                        while ($t.moveNext()) {
                            var ordering = $t.Current;
                            var penultimate = ordering.getItem(((ordering.Count - 2) | 0));
                            if (enforceDegreeRequirement && Algorithms.Int64Usage.PopulationCount(board.Stacks.getItem(penultimate)) <= knowledge.GraphKnowledge.Graph.Degree(penultimate)) {
                                continue;
                            }

                            if (Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead$2(knowledge, board, edgeIndex, ordering)) {
                                return true;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return false;
                },
                IsKierstead$2: function (knowledge, board, edgeIndex, ordering) {
                    var gn = knowledge.GraphKnowledge;

                    return gn.LineGraph.IsChoosable(System.Linq.Enumerable.range(0, gn.LineGraph.N).select(function (e) {
                        var $t;
                        if (e === edgeIndex) {
                            return System.Int64(-1);
                        }

                        var edge = gn.Edges.getItem(e);
                        var j = Math.max(ordering.indexOf(edge.item1), ordering.indexOf(edge.item2));
                        var priorStacks = System.Linq.Enumerable.from(board.Stacks).where(function (stack, i) {
                                return ordering.indexOf(i) < j;
                            }).toList(System.Int64);

                        var allowedList = System.Int64(0);
                        var list = knowledge.GetEdgeColorList(board, e);
                        $t = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits(list), System.Int32);
                        try {
                            while ($t.moveNext()) {
                                var alpha = $t.Current;
                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.d_H(alpha, priorStacks) % 2 === 0) {
                                    allowedList = Algorithms.Int64Usage.SetBit(allowedList, System.Int64(alpha));
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return allowedList;
                    }).toList(System.Int64));
                },
                EnumerateKiersteadEdgeIndices: function (knowledge, board, enforceDegreeRequirement, reason) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (knowledge, board, enforceDegreeRequirement, reason) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            g,
                            internalVertices,
                            $t,
                            edgeIndex,
                            e,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                                                if (reason === void 0) { reason = ""; }
                                                g = knowledge.GraphKnowledge.Graph;
                                                internalVertices = System.Linq.Enumerable.from(g.Vertices).where(function (v) {
                                                        return g.Degree(v) >= 2;
                                                    }).toList(System.Int32);

                                                $t = Bridge.getEnumerator(knowledge.GraphKnowledge.EdgeIndices);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    edgeIndex = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            e = knowledge.GraphKnowledge.Edges.getItem(edgeIndex);
                                                if (internalVertices.contains(e.item1) && internalVertices.contains(e.item2)) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                if (Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead$1(knowledge, board, edgeIndex)) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, reason);
                                                $enumerator.current = edgeIndex;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        },
        props: {
            Reason: {
                get: function () {
                    return "run kierstead";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                return Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead(knowledge, board, true, this.Reason);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree", {
        inherits: function () { return [Algorithms.FixerBreaker.Tree$1(Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree)]; },
        props: {
            Swap: null,
            ColorPair: null,
            Board: null,
            Note: null,
            Number: 0
        },
        methods: {
            AddChild$1: function (swap) {
                var $t;
                var child = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree(), $t.Swap = swap, $t);
                this.AddChild(child);

                return child;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ReductionAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            Reason: {
                get: function () {
                    return "reducible";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var $t, $t1;
                var g = knowledge.GraphKnowledge.Graph;

                $t = Bridge.getEnumerator(knowledge.GraphKnowledge.Edges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var x = { v : Math.min(e.item1, e.item2) };
                        var y = { v : Math.max(e.item1, e.item2) };

                        var common = board.Stacks.getItem(x.v).and(board.Stacks.getItem(y.v));
                        var stacks = System.Linq.Enumerable.from(board.Stacks).toList(System.Int64);

                        $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits(common), System.Int32);
                        try {
                            while ($t1.moveNext()) {
                                var c = $t1.Current;
                                stacks.setItem(x.v, Algorithms.Int64Usage.ClearBit(board.Stacks.getItem(x.v), System.Int64(c)));
                                stacks.setItem(y.v, Algorithms.Int64Usage.ClearBit(board.Stacks.getItem(y.v), System.Int64(c)));

                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, stacks, board.Pot, (function ($me, x, y) {
                                    return function (X) {
                                        return X.contains(x.v) && X.contains(y.v) ? 1 : 0;
                                    };
                                })(this, x, y))) {
                                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, System.String.format("color {0}{1} with {2}", Bridge.box(((x.v + 1) | 0), System.Int32), Bridge.box(((y.v + 1) | 0), System.Int32), Bridge.box(c, System.Int32)));
                                    return true;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IMind],
        props: {
            StopAnalysisOnBreakerWin: false,
            NearlyColorableOnly: false,
            SuperabundantOnly: false,
            MinPot: 0,
            MaxPot: 0,
            BreakerWonBoard: null,
            FixerWonAllNearlyColorableBoards: false,
            TotalPositions: 0,
            Knowledge: null,
            ColoringAnalyzer: null,
            SwapAnalyzer: null,
            BoardLookup: null,
            BoardIDLookup: null,
            RemainingBoardIDs: null,
            WonBoardIDs: null,
            NextBoardID: 0
        },
        alias: [
            "MaxPot", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$MaxPot",
            "FixerWonAllNearlyColorableBoards", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$FixerWonAllNearlyColorableBoards",
            "TotalPositions", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$TotalPositions",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$Analyze"
        ],
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.SuperabundantOnly = false;
                this.NearlyColorableOnly = false;
                this.MaxPot = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                this.Knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.Knowledge(g);

                this.ColoringAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer();
            }
        },
        methods: {
            Analyze: function (template, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                this.BoardLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,Algorithms.FixerBreaker.Board))();
                this.BoardIDLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Int32))();
                this.WonBoardIDs = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList();
                this.SwapAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer(this.Knowledge, this.BoardLookup, this.BoardIDLookup);

                this.FixerWonAllNearlyColorableBoards = true;

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Interval(minimumColorCount, maximumColorCount), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var colorCount = $t.Current;
                        this.GenerateAllBoards(template, colorCount, progress);
                        if (foundAtLeastOneBoard && this.BoardLookup.count <= 0) {
                            break;
                        }

                        this.TotalPositions = this.BoardLookup.count;
                        foundAtLeastOneBoard = true;
                        this.RemainingBoardIDs = System.Linq.Enumerable.from(this.BoardLookup.getKeys()).toList(System.Int32);

                        var breakerWin = !this.Analyze$1(progress);
                        if (breakerWin && this.StopAnalysisOnBreakerWin) {
                            return false;
                        }

                        this.Knowledge.getItem(template).Promote(colorCount);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(this.Knowledge.getItem(template).LostBoards).count() <= 0;
            },
            Analyze$1: function (progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                var winLength = 0;

                var totalBoards = this.RemainingBoardIDs.Count;
                var lastP = -1;

                for (var i = (this.RemainingBoardIDs.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    var id = this.RemainingBoardIDs.getItem(i);

                    var b = this.BoardLookup.get(id);
                    if (this.ColoringAnalyzer.Analyze(this.Knowledge, b)) {
                        this.RemainingBoardIDs.removeAt(i);
                        this.WonBoardIDs.Add(id);

                        if (!Bridge.staticEquals(progress, null)) {
                            var p = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this.RemainingBoardIDs.Count) | 0))), totalBoards)) | 0;
                            if (p > lastP) {
                                progress({ item1: "Finding all colorable positions...", item2: p });
                                lastP = p;
                            }
                        }
                    }
                }

                while (this.RemainingBoardIDs.Count > 0) {
                    winLength = (winLength + 1) | 0;

                    var count = this.RemainingBoardIDs.Count;

                    for (var i1 = (this.RemainingBoardIDs.Count - 1) | 0; i1 >= 0; i1 = (i1 - 1) | 0) {
                        var id1 = this.RemainingBoardIDs.getItem(i1);

                        var b1 = this.BoardLookup.get(id1);
                        if (this.SwapAnalyzer.Analyze(id1, this.WonBoardIDs)) {
                            this.RemainingBoardIDs.removeAt(i1);
                            this.WonBoardIDs.Add(id1);

                            if (!Bridge.staticEquals(progress, null)) {
                                var p1 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this.RemainingBoardIDs.Count) | 0))), totalBoards)) | 0;
                                if (p1 > lastP) {
                                    progress({ item1: System.String.format("Finding all {0} move wins...", Bridge.box(winLength, System.Int32)), item2: p1 });
                                    lastP = p1;
                                }
                            }
                        }
                    }

                    if (this.RemainingBoardIDs.Count === count) {
                        $t = Bridge.getEnumerator(this.RemainingBoardIDs);
                        try {
                            while ($t.moveNext()) {
                                var id2 = $t.Current;
                                var b2 = this.BoardLookup.get(id2);
                                this.Knowledge.getItem(b2.Template.Value).getItem(b2.ColorCount).AddLoss(b2);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        var g = { v : this.Knowledge.GraphKnowledge.Graph };

                        var nearlyColorable = System.Linq.Enumerable.range(0, this.Knowledge.GraphKnowledge.LineGraph.N).all(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f1));
                        if (nearlyColorable) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(this.RemainingBoardIDs).where((function ($me, g) {
                                    return Bridge.fn.bind($me, function (id3) {
                                        var b3 = this.BoardLookup.get(id3);
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(g.v, b3) && Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b3, 0);
                                    });
                                })(this, g)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f2)).firstOrDefault(null, null);

                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = this.BoardLookup.get(System.Linq.Enumerable.from(this.RemainingBoardIDs).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f3)));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                var boards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();

                var vertices = System.Linq.Enumerable.range(0, template.Sizes.Count).toList(System.Int32);
                var potSet = System.Linq.Enumerable.range(0, colorCount).toList(System.Int32);
                var pot = Algorithms.Int64Usage.ToInt64(potSet);

                var fix = System.Linq.Enumerable.from(vertices).orderBy(function (v) {
                        return Math.abs(((template.Sizes.getItem(v) - ((Bridge.Int.div(colorCount, 2)) | 0)) | 0));
                    }).first();
                var lastP = -1;
                var current = 0;
                var total = System.Linq.Enumerable.from(vertices).aggregate(System.Int64(1), function (x, v) {
                        if (v === fix) {
                            return x;
                        }

                        return x.mul(Algorithms.Utility.ListUtility.BinomialCoefficient(System.Int64(potSet.Count), System.Int64(template.Sizes.getItem(v))));
                    });

                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(vertices).select(function (v) {
                        if (v === fix) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(potSet).take(template.Sizes.getItem(v)).toList(System.Int32));
                        }

                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, potSet, template.Sizes.getItem(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var assignmentSets = $t.Current;
                        var sets = System.Linq.Enumerable.from(assignmentSets).toList(System.Collections.Generic.List$1(System.Int32));
                        var totalColors = System.Linq.Enumerable.from(sets).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f4).distinct().count();
                        if (totalColors < colorCount) {
                            continue;
                        }

                        var stacks = System.Linq.Enumerable.from(sets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f5).toList(System.Int64);

                        if (this.SuperabundantOnly && !Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(this.Knowledge.GraphKnowledge.Graph, stacks, pot)) {
                            continue;
                        }

                        var board = new Algorithms.FixerBreaker.Board(stacks, pot);

                        var count = boards.Count;
                        boards.add(board);

                        if (boards.Count > count) {
                            this.BoardLookup.set(this.NextBoardID, board);
                            this.BoardIDLookup.set(board, this.NextBoardID);

                            this.NextBoardID = (this.NextBoardID + 1) | 0;
                        }

                        if (!Bridge.staticEquals(progress, null)) {
                            var p = System.Int64.clip32(System.Int64(Bridge.Int.mul(100, current)).div(total));
                            if (p > lastP) {
                                progress({ item1: "Finding all positions...", item2: p });
                                lastP = p;
                            }
                        }

                        current = (current + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind, {
        f1: function (e) {
            return System.Linq.Enumerable.from(this.RemainingBoardIDs).any(Bridge.fn.bind(this, function (id3) {
                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, this.BoardLookup.get(id3), e);
                }));
        },
        f2: function (id3) {
            return this.BoardLookup.get(id3);
        },
        f3: function (id3) {
            return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, this.BoardLookup.get(id3), 0);
        },
        f4: function (set) {
            return set;
        },
        f5: function (list) {
            return Algorithms.Int64Usage.ToInt64(list);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree", {
        inherits: function () { return [Algorithms.FixerBreaker.Tree$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree)]; },
        props: {
            Board: null,
            IsColorable: false,
            IsSuperabundant: false,
            IsFixerWin: false,
            GameTreeIndex: 0,
            SameAsIndex: 0,
            Info: null
        },
        methods: {
            AddChild$1: function (tree, info) {
                tree.Info = info;
                this.AddChild(tree);
            },
            equals: function (obj) {
                var gg = Bridge.as(obj, Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree);
                if (gg == null) {
                    return false;
                }

                return gg.Board.Equals(this.Board);
            },
            getHashCode: function () {
                return this.Board.getHashCode();
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo", {
        inherits: [System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo)],
        methods: {
            Add: function (breakerChoice, i, j, fixerResponse) {
                var $t;
                this.add(($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo(), $t.Partition = System.Linq.Enumerable.from(breakerChoice).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo.f1).toList(System.Collections.Generic.List$1(System.Int32)), $t.Alpha = i, $t.Beta = j, $t.Response = fixerResponse, $t.SwapVertices = Algorithms.Int64Usage.ToSet$1(fixerResponse), $t));
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo, {
        f1: function (choice) {
            return Algorithms.Int64Usage.ToSet$1(choice);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GreedyWinFilter", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter],
        fields: {
            _swapAnalyzer: null
        },
        ctors: {
            ctor: function (swapAnalyzer) {
                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter.ctor.call(this);
                this._swapAnalyzer = swapAnalyzer;
            }
        },
        methods: {
            Filter: function (R, W) {
                return Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, R, Bridge.fn.bind(this, function (b) {
                    return this._swapAnalyzer.Analyze(b, W);
                }));
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder],
        fields: {
            _permutationLinked: null
        },
        ctors: {
            ctor: function (mind, usePermutations) {
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder.ctor.call(this, mind, usePermutations);

            }
        },
        methods: {
            ExtractCases: function () {
                var $t, $t1, $t2, $t3, $t4, $t5, $t6;
                this.Cases = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase))();

                this._permutationLinked = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,System.Collections.Generic.List$1(System.Object)))();

                var indices = System.Linq.Enumerable.range(0, this.Mind.ColorableBoards.getItem(0).Stacks.Value.length).toList(System.Int32);
                var permutations = System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(indices.Count)).toList(Algorithms.Utility.Permutation);

                var caseNumber = 0;

                var colorableCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, 0, this.Mind.ColorableBoards);
                this.Cases.add(colorableCase);
                caseNumber = (caseNumber + 1) | 0;

                var remainingBoards = System.Linq.Enumerable.from(this.Mind.NonColorableBoards).except(this.Mind.BreakerWonBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                var wonBoards = System.Linq.Enumerable.from(this.Mind.ColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                while (remainingBoards.Count > 0) {
                    var proofCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber);
                    this.Cases.add(proofCase);

                    var addedRootBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    var addedBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    $t = Bridge.getEnumerator(remainingBoards);
                    try {
                        while ($t.moveNext()) {
                            var board = $t.Current;
                            if (addedBoards.contains(board)) {
                                continue;
                            }

                            var treeInfo = this.Mind.GetWinTreeInfo(board);
                            var childBoards = System.Linq.Enumerable.from(treeInfo).select(function (bc) {
                                    return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount);
                                }).distinct().toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                            if (Algorithms.Utility.ListUtility.SubsetEqual(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, childBoards, wonBoards)) {
                                addedRootBoards.add(board);
                                addedBoards.add(board);
                                this._permutationLinked.set(board, new (System.Collections.Generic.List$1(System.Object))());

                                if (this.UsePermutations) {
                                    $t1 = Bridge.getEnumerator(permutations);
                                    try {
                                        while ($t1.moveNext()) {
                                            var p = $t1.Current;
                                            var pb = board.Permute(p, indices);
                                            if (wonBoards.contains(pb) || addedBoards.contains(pb)) {
                                                continue;
                                            }

                                            var closed = true;
                                            $t2 = Bridge.getEnumerator(childBoards);
                                            try {
                                                while ($t2.moveNext()) {
                                                    var cb = $t2.Current;
                                                    if (!wonBoards.contains(cb.Permute(p, indices))) {
                                                        closed = false;
                                                        break;
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            if (closed) {
                                                this._permutationLinked.get(board).add({ item1: p, item2: pb });
                                                addedBoards.add(pb);
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }}
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t3 = Bridge.getEnumerator(addedRootBoards);
                    try {
                        while ($t3.moveNext()) {
                            var board1 = $t3.Current;
                            proofCase.AddBoard(board1);
                        }
                    } finally {
                        if (Bridge.is($t3, System.IDisposable)) {
                            $t3.System$IDisposable$dispose();
                        }
                    }
                    $t4 = Bridge.getEnumerator(addedBoards);
                    try {
                        while ($t4.moveNext()) {
                            var board2 = $t4.Current;
                            wonBoards.add(board2);
                            remainingBoards.remove(board2);
                        }
                    } finally {
                        if (Bridge.is($t4, System.IDisposable)) {
                            $t4.System$IDisposable$dispose();
                        }
                    }
                    caseNumber = (caseNumber + 1) | 0;
                }

                if (this.Mind.BreakerWonBoards.Count > 0) {
                    $t5 = Bridge.getEnumerator(System.Linq.Enumerable.from(this.Mind.BreakerWonBoards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f1)));
                    try {
                        while ($t5.moveNext()) {
                            var group = $t5.Current;
                            var lostCase = ($t6 = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber, group.toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)), $t6.BreakerWin = true, $t6.Superabundant = group.key(), $t6);
                            this.Cases.add(lostCase);
                        }
                    } finally {
                        if (Bridge.is($t5, System.IDisposable)) {
                            $t5.System$IDisposable$dispose();
                        }
                    }}
            },
            GetHandledCaseNumber: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                if (this.Cases.getItem(0).Boards.contains(childBoard)) {
                    return 1;
                }

                return ((System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase, System.Linq.Enumerable.from(this.Cases).skip(1), Bridge.fn.bind(this, function (cc) {
                        return System.Linq.Enumerable.from(cc.Boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f3)).contains(childBoard);
                    }))).first() + 2) | 0);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder, {
        f1: function (b) {
            return this.Mind.IsSuperabundant(b);
        },
        f2: function (tup) {
            return tup.item2;
        },
        f3: function (bb) {
            return System.Linq.Enumerable.from(System.Array.init([bb], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(bb)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f2));
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter],
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        ctors: {
            init: function () {
                this._fixerResponses = System.Array.init(8192, System.UInt64(0), System.UInt64);
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            }
        },
        methods: {
            Filter: function (R, W) {
                throw new System.NotImplementedException();
            },
            Analyze: function (board) {
                var colorPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        colorPairs.add({ item1: i, item2: j });
                    }
                }

                return System.Linq.Enumerable.from(colorPairs).orderBy(function (cp) {
                        return Algorithms.Int64Usage.PopulationCount$1((board._trace[System.Array.index(cp.item1, board._trace)].xor(board._trace[System.Array.index(cp.item2, board._trace)])));
                    }).select(Bridge.fn.bind(this, function (cp) {
                    var $t;
                    return ($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.ColorPairOutcome(), $t.Colors = cp, $t.FixerOutcomes = this.AnalyzeColorPair(cp, board), $t);
                }));
            },
            AnalyzeColorPair: function (colors, board) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome))(Bridge.fn.bind(this, function (colors, board) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        i,
                        j,
                        x,
                        y,
                        swappable,
                        $t,
                        breakerChoice,
                        responses,
                        $t1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        i = colors.item1;
                                            j = colors.item2;

                                            x = board._trace[System.Array.index(i, board._trace)];
                                            y = board._trace[System.Array.index(j, board._trace)];
                                            swappable = x.xor(y);

                                            $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                breakerChoice = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        this.GetFixerResponses(breakerChoice);
                                            responses = System.Linq.Enumerable.range(1, ((this._fixerResponseCount - 1) | 0)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter.f1)).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter.f2);

                                            $enumerator.current = ($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome(), $t1.BreakerChoice = breakerChoice, $t1.Exits = responses.select(function (response) {
                                                return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i, j, response, board._stackCount);
                                            }).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard), $t1);
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;
                var tableLength = this._fixerResponses.length;
                while (tableLength <= this._fixerResponseCount) {
                    tableLength = Bridge.Int.mul(tableLength, 2);
                }
                if (tableLength > this._fixerResponses.length) {
                    this._fixerResponses = System.Array.init(tableLength, System.UInt64(0), System.UInt64);
                }

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter, {
        f1: function (k) {
            return this._fixerResponses[System.Array.index(k, this._fixerResponses)];
        },
        f2: function (fr) {
            return Algorithms.Int64Usage.PopulationCount$1(fr) <= 1;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IMind],
        fields: {
            _remainingBoards: null,
            _wonBoards: null,
            _swapAnalyzer: null,
            _coloringAnalyzer: null,
            _graph: null,
            _lineGraph: null,
            _edges: null,
            _totalPositions: 0,
            _gameTreeIndex: 0
        },
        props: {
            MinPot: 0,
            MaxPot: 0,
            FixerWonAllNearlyColorableBoards: false,
            HasNonSuperabundantBoardThatIsNearlyColorable: false,
            TotalPositions: {
                get: function () {
                    return this._totalPositions;
                }
            },
            BreakerWonBoard: null,
            BoardCounts: null,
            BoardCountsList: null,
            OnlyConsiderNearlyColorableBoards: false,
            ExcludeNonNearlyColorableNonSuperabundantBoards: false,
            MissingEdgeIndex: 0,
            SuperabundantOnly: false,
            ThinkHarder: false,
            PerformCompleteAnalysis: false,
            ColoringAnalyzer: {
                get: function () {
                    return this._coloringAnalyzer;
                }
            },
            NonColorableBoards: null,
            ColorableBoards: null,
            BreakerWonBoards: null,
            FixerWonBoards: {
                get: function () {
                    return this._wonBoards;
                }
            },
            BoardsOfDepth: null,
            ExtraPsi: 0,
            WinFilter: null
        },
        alias: [
            "MaxPot", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$MaxPot",
            "FixerWonAllNearlyColorableBoards", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$FixerWonAllNearlyColorableBoards",
            "TotalPositions", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$TotalPositions",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$Analyze"
        ],
        ctors: {
            ctor: function (g, proofFindingMode, weaklyFixable) {
                if (proofFindingMode === void 0) { proofFindingMode = false; }
                if (weaklyFixable === void 0) { weaklyFixable = false; }

                this.$initialize();
                this._graph = g;
                this.BuildLineGraph();

                this._coloringAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimColoringAnalyzer(this._lineGraph, Bridge.fn.cacheBind(this, this.GetEdgeColorList));
                this._swapAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer(g.N, proofFindingMode, proofFindingMode || weaklyFixable);
                this._wonBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).ctor();
                this._remainingBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                this.MissingEdgeIndex = -1;
            }
        },
        methods: {
            Analyze: function (template, progress) {
                if (progress === void 0) { progress = null; }
                this._wonBoards.clear();
                this._remainingBoards.clear();
                this.BoardCountsList = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                this.BreakerWonBoard = null;
                this.NonColorableBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                this.ColorableBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                this.BreakerWonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                if (this.WinFilter == null) {
                    this.WinFilter = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GreedyWinFilter(this._swapAnalyzer);
                }

                this.FixerWonAllNearlyColorableBoards = true;

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                var fixerWin = true;
                for (var colorCount = minimumColorCount; colorCount <= maximumColorCount; colorCount = (colorCount + 1) | 0) {
                    this.GenerateAllBoards(template, colorCount, progress);
                    if (this.OnlyConsiderNearlyColorableBoards) {
                        if (this.MissingEdgeIndex >= 0) {
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this._remainingBoards, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f1), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f2);
                        } else {
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this._remainingBoards, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f3), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f2);
                        }
                    }

                    if (foundAtLeastOneBoard && this._remainingBoards.Count <= 0) {
                        break;
                    }

                    this._totalPositions = (this._remainingBoards.Count + this._wonBoards.Count) | 0;
                    foundAtLeastOneBoard = true;

                    fixerWin = !!(fixerWin & this.Analyze$1(progress));
                }

                return fixerWin;
            },
            Analyze$1: function (progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                var winLength = 0;
                var totalBoards = this._remainingBoards.Count;
                var lastP = -1;

                this.BoardsOfDepth = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)))();
                this.BoardCounts = new (System.Collections.Generic.List$1(System.Int32))();
                this.BoardCountsList.add(this.BoardCounts);
                this.BoardCounts.add(this._remainingBoards.Count);

                for (var i = (this._remainingBoards.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    var b = this._remainingBoards.getItem(i);
                    if (this._coloringAnalyzer.Analyze(b)) {
                        this._remainingBoards.removeAt(i);
                        this._wonBoards.add(b);
                        this.ColorableBoards.add(b);
                    }

                    if (!Bridge.staticEquals(progress, null)) {
                        var p = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p > lastP) {
                            progress({ item1: "Finding all colorable positions...", item2: p });
                            lastP = p;
                        }
                    }
                }

                this.BoardsOfDepth.set(winLength, System.Linq.Enumerable.from(this._wonBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
                this.BoardCounts.add(this._remainingBoards.Count);

                var nonSuperabundantBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                for (var i1 = (this._remainingBoards.Count - 1) | 0; i1 >= 0; i1 = (i1 - 1) | 0) {
                    var b1 = this._remainingBoards.getItem(i1);
                    if (!this.IsSuperabundant(b1)) {
                        if (this.OnlyConsiderNearlyColorableBoards && this.MissingEdgeIndex >= 0) {
                            this.HasNonSuperabundantBoardThatIsNearlyColorable = true;
                            this.BreakerWonBoard = b1;

                            if (!this.PerformCompleteAnalysis) {
                                return false;
                            }
                        }

                        this._remainingBoards.removeAt(i1);
                        nonSuperabundantBoards.add(b1);
                    }

                    if (!Bridge.staticEquals(progress, null)) {
                        var p1 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p1 > lastP) {
                            progress({ item1: "Finding all non-superabundant positions...", item2: p1 });
                            lastP = p1;
                        }
                    }
                }

                if (nonSuperabundantBoards.Count > 0 && !this.SuperabundantOnly) {
                    if (!this.OnlyConsiderNearlyColorableBoards && !this.ExcludeNonNearlyColorableNonSuperabundantBoards) {
                        this.FixerWonAllNearlyColorableBoards = false;
                        this.BreakerWonBoard = nonSuperabundantBoards.getItem(0);
                        this.BreakerWonBoards.addRange(nonSuperabundantBoards);

                        if (!this.PerformCompleteAnalysis) {
                            return false;
                        }
                    } else if (this.ExistsNearlyColorableBoardForEachEdge(nonSuperabundantBoards)) {
                        this.FixerWonAllNearlyColorableBoards = false;
                        this.HasNonSuperabundantBoardThatIsNearlyColorable = true;
                        this.BreakerWonBoard = nonSuperabundantBoards.getItem(0);
                        this.BreakerWonBoards.addRange(nonSuperabundantBoards);
                        if (!this.PerformCompleteAnalysis) {
                            return false;
                        }
                    }
                }

                this.BoardCounts.add(this._remainingBoards.Count);
                this.NonColorableBoards.addRange(this._remainingBoards);

                while (this._remainingBoards.Count > 0) {
                    var count = this._remainingBoards.Count;
                    winLength = (winLength + 1) | 0;

                    var boardIndicesToAdd = { v : System.Linq.Enumerable.from(this.WinFilter.Filter(this._remainingBoards, this._wonBoards)).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f4).toList(System.Int32) };
                    var wonBoards = System.Linq.Enumerable.from(this._remainingBoards).where((function ($me, boardIndicesToAdd) {
                            return function (b2, i2) {
                                return boardIndicesToAdd.v.contains(i2);
                            };
                        })(this, boardIndicesToAdd)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    $t = Bridge.getEnumerator(wonBoards);
                    try {
                        while ($t.moveNext()) {
                            var b2 = $t.Current;
                            this._wonBoards.add(b2);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }this.BoardsOfDepth.set(winLength, wonBoards);

                    $t1 = Bridge.getEnumerator(boardIndicesToAdd.v);
                    try {
                        while ($t1.moveNext()) {
                            var i2 = $t1.Current;
                            this._remainingBoards.removeAt(i2);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (!Bridge.staticEquals(progress, null)) {
                        var p2 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p2 > lastP) {
                            progress({ item1: System.String.format("Finding all {0} move wins...", Bridge.box(winLength, System.Int32)), item2: p2 });
                            lastP = p2;
                        }
                    }

                    this.BoardCounts.add(this._remainingBoards.Count);

                    if (this._remainingBoards.Count === count) {
                        this.BreakerWonBoards.addRange(this._remainingBoards);

                        if (this.BreakerWonBoard == null) {
                            this.BreakerWonBoard = this._remainingBoards.getItem(0);
                        }

                        if (this.OnlyConsiderNearlyColorableBoards && this.MissingEdgeIndex >= 0) {
                            this.FixerWonAllNearlyColorableBoards = false;
                        } else if (this.ExistsNearlyColorableBoardForEachEdge(this._remainingBoards)) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(this._remainingBoards).firstOrDefault(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f5), null);

                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = System.Linq.Enumerable.from(this._remainingBoards).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f5));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            NearlyColorableForEdge: function (board, edgeIndex) {
                return this._coloringAnalyzer.ColorableWithoutEdge(board, edgeIndex);
            },
            ExistsNearlyColorableBoardForEachEdge: function (boards) {
                return System.Linq.Enumerable.range(0, this._lineGraph.N).all(Bridge.fn.bind(this, function (e) {
                    return System.Linq.Enumerable.from(boards).any(Bridge.fn.bind(this, function (b) {
                            return this.NearlyColorableForEdge(b, e);
                        }));
                }));
            },
            NearlyColorableForSomeEdge: function (board) {
                return System.Linq.Enumerable.range(0, this._lineGraph.N).any(Bridge.fn.bind(this, function (e) {
                    return this.NearlyColorableForEdge(board, e);
                }));
            },
            LookAtSuperabundance: function () {
                var packs = System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f6)).toList(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
                var goodPacks = System.Linq.Enumerable.from(packs).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f8)).toList(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
            },
            IsSuperabundant: function (b) {
                var subset = System.UInt64(0);

                var total = 0;
                while (subset.lt((System.UInt64(1).shl(b._stackCount)))) {
                    total = 0;
                    for (var i = 0; i < b._length; i = (i + 1) | 0) {
                        total = (total + (((Bridge.Int.div(Algorithms.Int64Usage.PopulationCount$1((subset.and(b._trace[System.Array.index(i, b._trace)]))), 2)) | 0))) | 0;
                    }

                    var e = this._graph.EdgesOn(Algorithms.Int64Usage.ToSet$1(subset));
                    if (total < e) {
                        return false;
                    }

                    subset = subset.inc();
                }

                if (this.ExtraPsi > 0) {
                    return total >= ((this._graph.E + this.ExtraPsi) | 0);
                }

                return true;
            },
            ComputeAbundanceSurplus: function (b) {
                var total = 0;
                for (var i = 0; i < b._length; i = (i + 1) | 0) {
                    total = (total + (((Bridge.Int.div(Algorithms.Int64Usage.PopulationCount$1(b._trace[System.Array.index(i, b._trace)]), 2)) | 0))) | 0;
                }

                return ((total - this._graph.E) | 0);
            },
            ComputeMatchingAbundanceShadow: function (b) {
                var shadow = new (System.Collections.Generic.List$1(System.Int32))();

                var subset = System.UInt64(0);
                while (subset.lt((System.UInt64(1).shl(b._stackCount)))) {
                    var e = { };
                    if (!this.IsMatchingAbundant(b, subset, e)) {
                        shadow.add(e.v);
                    }
                    subset = subset.inc();
                }

                shadow.sort();

                return shadow;
            },
            IsMatchingAbundant: function (b, subset, e) {
                e.v = this._graph.EdgesOn(Algorithms.Int64Usage.ToSet$1(subset));

                var total = 0;
                for (var i = 0; i < b._length; i = (i + 1) | 0) {
                    var vc = Algorithms.Int64Usage.ToSet$1((subset.and(b._trace[System.Array.index(i, b._trace)])));
                    total = (total + (this._lineGraph.IndependenceNumber$1(this._graph.EdgeIndicesOn(vc)))) | 0;
                }

                return total >= e.v;
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                if (!Bridge.staticEquals(progress, null)) {
                    progress({ item1: "Finding all positions...", item2: 0 });
                }

                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ulong.Generate(template.Sizes, colorCount));
                try {
                    while ($t.moveNext()) {
                        var t = $t.Current;
                        var b = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(t, template.Sizes.Count);
                        this._remainingBoards.add(b);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            BuildLineGraph: function () {
                var adjacent = this._graph.Adjacent;
                var n = ((System.Array.getLength(adjacent, 0) - 1) + 1) | 0;

                this._edges = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        if (adjacent.get([i, j])) {
                            this._edges.add({ item1: i, item2: j });
                        }
                    }
                }

                var meets = System.Array.create(false, null, System.Boolean, this._edges.Count, this._edges.Count);
                for (var i1 = 0; i1 < this._edges.Count; i1 = (i1 + 1) | 0) {
                    for (var j1 = (i1 + 1) | 0; j1 < this._edges.Count; j1 = (j1 + 1) | 0) {
                        if (this._edges.getItem(i1).item1 === this._edges.getItem(j1).item1 || this._edges.getItem(i1).item1 === this._edges.getItem(j1).item2 || this._edges.getItem(i1).item2 === this._edges.getItem(j1).item1 || this._edges.getItem(i1).item2 === this._edges.getItem(j1).item2) {
                            meets.set([i1, j1], (meets.set([j1, i1], true), true));
                        }
                    }
                }

                this._lineGraph = new Algorithms.Graph.ctor(meets);
            },
            GetEdgeColorList: function (b, e) {
                var v1 = this._edges.getItem(e).item1;
                var v2 = this._edges.getItem(e).item2;
                var stacks = b.Stacks.Value;

                return stacks[System.Array.index(v1, stacks)].and(stacks[System.Array.index(v2, stacks)]);
            },
            GetWinTreeInfo: function (board) {
                return this._swapAnalyzer.WinTreeInfo.get(board);
            },
            BuildGameTree: function (board, win) {
                if (win === void 0) { win = true; }
                var seenBoards = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,System.Int32))();
                this._gameTreeIndex = 1;
                return this.BuildGameTree$1(board, seenBoards, win);
            },
            BuildGameTree$1: function (board, seenBoards, win, depth) {
                var $t;
                if (win === void 0) { win = true; }
                if (depth === void 0) { depth = 0; }
                seenBoards.set(board, this._gameTreeIndex);
                var tree = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree(), $t.Board = board, $t.IsFixerWin = win, $t);
                tree.IsColorable = this._coloringAnalyzer.Analyze(board);
                tree.IsSuperabundant = win || this.IsSuperabundant(board);
                tree.GameTreeIndex = this._gameTreeIndex;
                this._gameTreeIndex = (this._gameTreeIndex + 1) | 0;

                if (tree.IsColorable) {
                    return tree;
                }

                if (!tree.IsSuperabundant) {
                    return tree;
                }

                var treeInfo = { };
                if (win) {
                    this._swapAnalyzer.WinTreeInfo.tryGetValue(board, treeInfo);
                } else {
                    this._swapAnalyzer.LossTreeInfo.tryGetValue(board, treeInfo);
                }

                if (treeInfo.v != null) {
                    var localSeenBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).ctor();
                    $t = Bridge.getEnumerator(treeInfo.v);
                    try {
                        while ($t.moveNext()) {
                            var bc = $t.Current;
                            var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount);
                            if (localSeenBoards.contains(childBoard)) {
                                continue;
                            }
                            localSeenBoards.add(childBoard);

                            if (!win && seenBoards.containsKey(childBoard)) {
                                continue;
                            }

                            var childTree = this.BuildGameTree$1(childBoard, seenBoards, win, ((depth + 1) | 0));
                            tree.AddChild$1(childTree, bc);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return tree;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind, {
        f1: function (b) {
            return !this.NearlyColorableForEdge(b, this.MissingEdgeIndex);
        },
        f2: function (x) { },
        f3: function (b) {
            return !this.NearlyColorableForSomeEdge(b);
        },
        f4: function (x) {
            return x;
        },
        f5: function (b3) {
            return this._coloringAnalyzer.ColorableWithoutEdge(b3, 0);
        },
        f6: function (e) {
            return System.Linq.Enumerable.from(this._remainingBoards).where(Bridge.fn.bind(this, function (b) {
                    return this._coloringAnalyzer.ColorableWithoutEdge(b, e);
                })).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
        },
        f7: function (ssb) {
            return this.IsSuperabundant(ssb);
        },
        f8: function (pack) {
            return System.Linq.Enumerable.from(pack).all(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f7));
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            SubTemplates: null,
            Reason: {
                get: function () {
                    return "sub template";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        ctors: {
            ctor: function (subTemplates) {
                if (subTemplates === void 0) { subTemplates = []; }

                this.$initialize();
                this.SubTemplates = System.Linq.Enumerable.from(subTemplates).toList(Algorithms.FixerBreaker.KnowledgeEngine.Template);
            }
        },
        methods: {
            Analyze: function (knowledge, board) {
                var $t;
                $t = Bridge.getEnumerator(this.SubTemplates);
                try {
                    while ($t.moveNext()) {
                        var template = $t.Current;
                        var color = { };
                        var x = { };
                        if (this.ContainsSuberabundantSubStacksAboveTemplate(knowledge, board, template, color, x)) {
                            knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, System.String.format("set L({0}) = L({0}) - {1}", Bridge.box(((x.v + 1) | 0), System.Int32), Bridge.box(color.v, System.Int32)));
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            ContainsSuberabundantSubStacksAboveTemplate: function (knowledge, board, template, color, x) {
                var $t;
                color.v = -1;
                x.v = -1;
                var g = knowledge.GraphKnowledge.Graph;
                var stackSets = System.Linq.Enumerable.from(board.Stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer.f1).toList(System.Collections.Generic.List$1(System.Int32));
                var bigs = System.Linq.Enumerable.range(0, stackSets.Count).count(function (i) {
                    return stackSets.getItem(i).Count > template.Sizes.getItem(i);
                });
                if (bigs <= 0 || bigs > 1) {
                    return false;
                }

                var shrinkable = System.Linq.Enumerable.range(0, stackSets.Count).where(function (i) {
                    return stackSets.getItem(i).Count === ((template.Sizes.getItem(i) + 1) | 0);
                }).toList(System.Int32);
                if (shrinkable.Count <= 0) {
                    return false;
                }

                x.v = shrinkable.getItem(0);
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(stackSets.getItem(x.v)).toList(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        stackSets.getItem(x.v).remove(c);

                        if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, System.Linq.Enumerable.from(stackSets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer.f2).toList(System.Int64), board.Pot)) {
                            color.v = c;
                            return true;
                        }

                        stackSets.getItem(x.v).add(c);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer, {
        f1: function (s) {
            return Algorithms.Int64Usage.ToSet(s);
        },
        f2: function (s) {
            return Algorithms.Int64Usage.ToInt64(s);
        }
    });

    Bridge.define("Algorithms.Graph.IsomorphismComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(Algorithms.Graph)],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$Algorithms$Graph$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$Algorithms$Graph$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return Algorithms.Graph.Isomorphic(x, y);
            },
            getHashCode2: function (g) {
                return 0;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastTarpitEnumerator", {
        inherits: [Algorithms.WordGame.TarpitEnumerator],
        statics: {
            fields: {
                EmptyList: null
            },
            ctors: {
                init: function () {
                    this.EmptyList = new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))();
                }
            }
        },
        fields: {
            _words: null,
            _accessibilityChecker: null
        },
        ctors: {
            ctor: function (n) {
                this.$initialize();
                Algorithms.WordGame.TarpitEnumerator.ctor.call(this);
                this._words = new Algorithms.WordGame.Optimized.FastWordGenerator().GenerateWords(n);
                this._accessibilityChecker = new Algorithms.WordGame.Optimized.FastAccessibilityChecker(n);
            }
        },
        methods: {
            GenerateMinimalTarpits: function (foundTarpit) {
                this.GenerateMinimalTarpitsFast(Bridge.fn.bind(this, function (l) {
                    foundTarpit(System.Linq.Enumerable.from(l).select(Bridge.fn.bind(this, $asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f1)).toList(System.String));
                }));
            },
            GenerateMinimalTarpitsFast: function (foundTarpit) {
                this.GenerateMinimalTarpitsFastIn(this._words, new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))(), foundTarpit);
            },
            GenerateMinimalTarpitsFastIn: function (S, mustHaves, foundTarpit) {
                var $t, $t1;
                var excluded = false;

                var extendedMustHaves = System.Linq.Enumerable.from(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord);
                var T = System.Linq.Enumerable.from(S).except(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord);

                $t = Bridge.getEnumerator(T);
                try {
                    while ($t.moveNext()) {
                        var w = $t.Current;
                        var W = this.RunEscape$1(System.Linq.Enumerable.from(S).except(System.Array.init([w], Algorithms.WordGame.Optimized.FastWord)), extendedMustHaves);

                        if (W != null && W.Count > 0) {
                            excluded = true;
                            this.GenerateMinimalTarpitsFastIn(W, extendedMustHaves, foundTarpit);
                        }

                        extendedMustHaves.add(w);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                if (!excluded) {
                    $t1 = Bridge.getEnumerator(mustHaves);
                    try {
                        while ($t1.moveNext()) {
                            var w1 = $t1.Current;
                            var W1 = this.RunEscape(System.Linq.Enumerable.from(S).except(System.Array.init([w1], Algorithms.WordGame.Optimized.FastWord)));
                            if (W1.Count > 0) {
                                excluded = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (!excluded) {
                        foundTarpit(S);
                    }
                }
            },
            RunEscape$1: function (S, mustHaves) {
                var $t;
                var T = System.Linq.Enumerable.from(S).toList(Algorithms.WordGame.Optimized.FastWord);
                var R = new (System.Collections.Generic.HashSet$1(Algorithms.WordGame.Optimized.FastWord)).$ctor1(System.Linq.Enumerable.from(this._words).except(T));
                while (true) {
                    if (System.Linq.Enumerable.from(mustHaves).any(Bridge.fn.bind(this, function (w) {
                            return this._accessibilityChecker.IsAccessible(w, R);
                        }))) {
                        return null;
                    }

                    var escapers = System.Linq.Enumerable.from(T).except(mustHaves).where(Bridge.fn.bind(this, function (w) {
                        return this._accessibilityChecker.IsAccessible(w, R);
                    })).toList(Algorithms.WordGame.Optimized.FastWord);

                    $t = Bridge.getEnumerator(escapers);
                    try {
                        while ($t.moveNext()) {
                            var w = $t.Current;
                            T.remove(w);
                            R.add(w);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (escapers.Count <= 0) {
                        break;
                    }
                }

                return T;
            },
            RunEscape: function (S) {
                return this.RunEscape$1(S, Algorithms.WordGame.Optimized.FastTarpitEnumerator.EmptyList);
            },
            Wordify: function (b) {
                var $t;
                var st = System.Array.init(b._stackCount, System.Int64(0), System.Int64);
                var traceBits = System.Linq.Enumerable.from(b._trace).select($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f2).toList(System.Collections.Generic.List$1(System.Int32));
                for (var c = 0; c < traceBits.Count; c = (c + 1) | 0) {
                    $t = Bridge.getEnumerator(traceBits.getItem(c));
                    try {
                        while ($t.moveNext()) {
                            var i = $t.Current;
                            st[System.Array.index(i, st)] = st[System.Array.index(i, st)].or((System.Int64(1).shl(c)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return Bridge.toArray(System.Linq.Enumerable.from(st).select($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f3)).join("");
            },
            EnumerateMinimalTarpits: function () {
                return System.Linq.Enumerable.from(this.EnumerateMinimalTarpitsFast()).select(Bridge.fn.bind(this, $asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f4));
            },
            EnumerateMinimalTarpitsFast: function () {
                var explored = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))).$ctor3(new Algorithms.WordGame.Optimized.FastTarpitEnumerator.SortedListComparer());
                return this.EnumerateMinimalTarpitsFastIn(this._words, explored, new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))());
            },
            EnumerateMinimalTarpitsFastIn: function (S, explored, mustHaves) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord)))(Bridge.fn.bind(this, function (S, explored, mustHaves) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        excluded,
                        $t,
                        w,
                        W,
                        $t1,
                        TP,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        excluded = false;

                                            $t = Bridge.getEnumerator(S);
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                w = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 2: {
                                        W = this.RunEscape(System.Linq.Enumerable.from(S).except(System.Array.init([w], Algorithms.WordGame.Optimized.FastWord)));
                                            if (W.Count <= 0) {
                                                $step = 1;
                                                continue;
                                            }

                                            excluded = true;

                                            if (Algorithms.Utility.ListUtility.SubsetEqual(Algorithms.WordGame.Optimized.FastWord, mustHaves, W) && !explored.contains(W)) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 8;
                                            continue;
                                    }
                                    case 3: {
                                        $t1 = Bridge.getEnumerator(this.EnumerateMinimalTarpitsFastIn(W, explored, System.Linq.Enumerable.from(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord)), System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t1.moveNext()) {
                                                TP = $t1.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        $enumerator.current = TP;
                                            $step = 6;
                                            return true;
                                    }
                                    case 6: {
                                        $step = 4;
                                        continue;
                                    }
                                    case 7: {
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        explored.add(W);
                                            mustHaves.add(w);
                                        $step = 1;
                                        continue;
                                    }
                                    case 9: {
                                        if (!excluded) {
                                                $step = 10;
                                                continue;
                                            } 
                                            $step = 12;
                                            continue;
                                    }
                                    case 10: {
                                        $enumerator.current = System.Linq.Enumerable.from(S).toList(Algorithms.WordGame.Optimized.FastWord);
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.Optimized.FastTarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator, {
        f1: function (s) {
            return this.Wordify(s);
        },
        f2: function (t) {
            return Algorithms.Int64Usage.ToSet$1(t);
        },
        f3: function (s) {
            switch (s.toString()) {
                case "1": 
                    return 120;
                case "2": 
                    return 121;
                case "4": 
                    return 122;
                default: 
                    return 63;
            }
        },
        f4: function (list) {
            return System.Linq.Enumerable.from(list).select(Bridge.fn.cacheBind(this, this.Wordify)).toList(System.String);
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastTarpitEnumerator.SortedListComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$Algorithms$WordGame$Optimized$FastWord$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$Algorithms$WordGame$Optimized$FastWord$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (list) {
                var $t;
                var hash = 19;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 31) | 0) + x.getHashCode()) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.ReferenceTarpitEnumerator", {
        inherits: [Algorithms.WordGame.TarpitEnumerator],
        fields: {
            _words: null,
            _accessibilityChecker: null
        },
        ctors: {
            ctor: function (n) {
                this.$initialize();
                Algorithms.WordGame.TarpitEnumerator.ctor.call(this);
                this._words = System.Linq.Enumerable.from(new Algorithms.WordGame.WordEnumerator.$ctor1(Algorithms.WordGame.TarpitEnumerator.Alphabet).EnumerateWords(n)).toList(System.String);
                this._accessibilityChecker = new Algorithms.WordGame.AccessibilityChecker(Algorithms.WordGame.TarpitEnumerator.Alphabet);
            }
        },
        methods: {
            EnumerateMinimalTarpits: function () {
                var seen = new (System.Collections.Generic.HashSet$1(System.String)).ctor();
                return this.EnumerateMinimalTarpitsIn(this._words, seen);
            },
            EnumerateMinimalTarpitsIn: function (S, seen) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function (S, seen) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        excluded,
                        $t,
                        T,
                        W,
                        key,
                        $t1,
                        TP,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        excluded = false;
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(S).select(function (w) {
                                                    return System.Linq.Enumerable.from(S).except(System.Array.init([w], System.String)).toList(System.String);
                                                }));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                T = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 2: {
                                        W = this.RunEscape(T);
                                            if (W.Count <= 0) {
                                                $step = 1;
                                                continue;
                                            }

                                            excluded = true;

                                            key = this.GenerateSimpleKey(W);
                                            if (seen.contains(key)) {
                                                $step = 1;
                                                continue;
                                            }

                                            seen.add(key);
                                            $t1 = Bridge.getEnumerator(this.EnumerateMinimalTarpitsIn(W, seen), System.Collections.Generic.List$1(System.String));
                                            $step = 3;
                                            continue;
                                    }
                                    case 3: {
                                        if ($t1.moveNext()) {
                                                TP = $t1.Current;
                                                $step = 4;
                                                continue;
                                            }
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $enumerator.current = TP;
                                            $step = 5;
                                            return true;
                                    }
                                    case 5: {
                                        $step = 3;
                                        continue;
                                    }
                                    case 6: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 7: {
                                        if (!excluded) {
                                                $step = 8;
                                                continue;
                                            } 
                                            $step = 10;
                                            continue;
                                    }
                                    case 8: {
                                        $enumerator.current = System.Linq.Enumerable.from(S).orderBy($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f1).toList(System.String);
                                            $step = 9;
                                            return true;
                                    }
                                    case 9: {
                                        $step = 10;
                                        continue;
                                    }
                                    case 10: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            RunEscape: function (S) {
                var T = System.Linq.Enumerable.from(S).toList(System.String);
                while (true) {
                    var R = { v : Algorithms.Utility.ListUtility.Difference(System.String, this._words, T) };
                    if (Algorithms.GenericExtensions.RemoveAll(System.String, T, (function ($me, R) {
                        return Bridge.fn.bind($me, function (w) {
                            return this._accessibilityChecker.IsAccessible(w, R.v);
                        });
                    })(this, R), $asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f2) <= 0) {
                        break;
                    }
                }

                return T;
            },
            GenerateSimpleKey: function (S) {
                return Bridge.toArray(System.Linq.Enumerable.from(S).orderBy($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f1)).join(",");
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.ReferenceTarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator, {
        f1: function (s) {
            return s;
        },
        f2: function (x) { }
    });

    Bridge.define("BitLevelGeneration.BitGraph_long", {
        inherits: [BitLevelGeneration.IGraph_long],
        fields: {
            _vertices: null,
            _neighborhood: null
        },
        props: {
            N: {
                get: function () {
                    return this._vertices.length;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            }
        },
        alias: [
            "N", "BitLevelGeneration$IGraph_long$N",
            "Vertices", "BitLevelGeneration$IGraph_long$Vertices",
            "IsIndependent", "BitLevelGeneration$IGraph_long$IsIndependent",
            "Degree", "BitLevelGeneration$IGraph_long$Degree",
            "DegreeInSet", "BitLevelGeneration$IGraph_long$DegreeInSet",
            "NeighborsInSet", "BitLevelGeneration$IGraph_long$NeighborsInSet",
            "MaximalIndependentSubsets", "BitLevelGeneration$IGraph_long$MaximalIndependentSubsets"
        ],
        ctors: {
            ctor: function (edgeWeights) {
                this.$initialize();
                var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);

                this._neighborhood = System.Array.init(n, System.Int64(0), System.Int64);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    var iBit = System.Int64(1).shl(i);
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        var jBit = System.Int64(1).shl(j);

                        if (edgeWeights.getItem(k) !== 0) {
                            this._neighborhood[System.Array.index(i, this._neighborhood)] = this._neighborhood[System.Array.index(i, this._neighborhood)].or(jBit);
                            this._neighborhood[System.Array.index(j, this._neighborhood)] = this._neighborhood[System.Array.index(j, this._neighborhood)].or(iBit);
                        }

                        k = (k + 1) | 0;
                    }
                }
            },
            $ctor1: function (n, neighborhood) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);
                this._neighborhood = neighborhood;
            }
        },
        methods: {
            IsIndependent: function (set) {
                return BitLevelGeneration.BitUsage_long.TrueForAllBitIndices(set, Bridge.fn.bind(this, function (i) {
                    return (this._neighborhood[System.Array.index(i, this._neighborhood)].and(set)).equals(System.Int64(0));
                }));
            },
            Degree: function (v) {
                return BitLevelGeneration.BitUsage_long.PopulationCount(this._neighborhood[System.Array.index(v, this._neighborhood)]);
            },
            DegreeInSet: function (v, set) {
                return BitLevelGeneration.BitUsage_long.PopulationCount((this._neighborhood[System.Array.index(v, this._neighborhood)].and(set)));
            },
            NeighborsInSet: function (v, set) {
                return this._neighborhood[System.Array.index(v, this._neighborhood)].and(set);
            },
            MaximalIndependentSubsets: function (set) {
                var list = new (System.Collections.Generic.List$1(System.Int64))(8);
                this.BronKerbosch(set, System.Int64(0), System.Int64(0), list);
                return list;
            },
            BronKerbosch: function (P, R, X, list) {
                if (P.equals(System.Int64(0)) && X.equals(System.Int64(0))) {
                    list.add(R);
                } else {
                    var u = this.TomitaPivot(P, X);
                    var q = P.and(((System.Int64(1).shl(u)).or(this._neighborhood[System.Array.index(u, this._neighborhood)])));

                    while (q.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);
                        var non = (bit.or(this._neighborhood[System.Array.index(v, this._neighborhood)])).not();

                        this.BronKerbosch(P.and(non), R.or(bit), X.and(non), list);

                        q = q.xor(bit);
                        P = P.xor(bit);
                        X = X.or(bit);
                    }
                }
            },
            TomitaPivot: function (P, X) {
                var min = 2147483647;
                var best = -1;
                var q = P.or(X);

                while (q.ne(System.Int64(0))) {
                    var bit = q.and(q.neg());
                    var u = BitLevelGeneration.BitUsage_long.Extract(bit);

                    var n = BitLevelGeneration.BitUsage_long.PopulationCount(((bit.or(this._neighborhood[System.Array.index(u, this._neighborhood)])).and(P)));
                    if (n < min) {
                        min = n;
                        best = u;
                    }

                    q = q.xor(bit);
                }

                return best;
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitGraph_uint", {
        inherits: [BitLevelGeneration.IGraph_uint],
        fields: {
            _vertices: null,
            _neighborhood: null
        },
        props: {
            N: {
                get: function () {
                    return this._vertices.length;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            }
        },
        alias: [
            "N", "BitLevelGeneration$IGraph_uint$N",
            "Vertices", "BitLevelGeneration$IGraph_uint$Vertices",
            "IsIndependent", "BitLevelGeneration$IGraph_uint$IsIndependent",
            "Degree", "BitLevelGeneration$IGraph_uint$Degree",
            "DegreeInSet", "BitLevelGeneration$IGraph_uint$DegreeInSet",
            "NeighborsInSet", "BitLevelGeneration$IGraph_uint$NeighborsInSet",
            "MaximalIndependentSubsets", "BitLevelGeneration$IGraph_uint$MaximalIndependentSubsets"
        ],
        ctors: {
            ctor: function (edgeWeights) {
                this.$initialize();
                var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);

                this._neighborhood = System.Array.init(n, 0, System.UInt32);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    var iBit = (1 << i) >>> 0;
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        var jBit = (1 << j) >>> 0;

                        if (edgeWeights.getItem(k) !== 0) {
                            this._neighborhood[System.Array.index(i, this._neighborhood)] = (this._neighborhood[System.Array.index(i, this._neighborhood)] | jBit) >>> 0;
                            this._neighborhood[System.Array.index(j, this._neighborhood)] = (this._neighborhood[System.Array.index(j, this._neighborhood)] | iBit) >>> 0;
                        }

                        k = (k + 1) | 0;
                    }
                }
            },
            $ctor1: function (n, neighborhood) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);
                this._neighborhood = neighborhood;
            }
        },
        methods: {
            IsIndependent: function (set) {
                return BitLevelGeneration.BitUsage_uint.TrueForAllBitIndices(set, Bridge.fn.bind(this, function (i) {
                    return (((this._neighborhood[System.Array.index(i, this._neighborhood)] & set) >>> 0)) === 0;
                }));
            },
            Degree: function (v) {
                return BitLevelGeneration.BitUsage_uint.PopulationCount(this._neighborhood[System.Array.index(v, this._neighborhood)]);
            },
            DegreeInSet: function (v, set) {
                return BitLevelGeneration.BitUsage_uint.PopulationCount((((this._neighborhood[System.Array.index(v, this._neighborhood)] & set) >>> 0)));
            },
            NeighborsInSet: function (v, set) {
                return ((this._neighborhood[System.Array.index(v, this._neighborhood)] & set) >>> 0);
            },
            MaximalIndependentSubsets: function (set) {
                var list = new (System.Collections.Generic.List$1(System.UInt32))(8);
                this.BronKerbosch(set, 0, 0, list);
                return list;
            },
            BronKerbosch: function (P, R, X, list) {
                if (P === 0 && X === 0) {
                    list.add(R);
                } else {
                    var u = this.TomitaPivot(P, X);
                    var q = (P & ((((((1 << u) >>> 0)) | this._neighborhood[System.Array.index(u, this._neighborhood)]) >>> 0))) >>> 0;

                    while (q !== 0) {
                        var bit = (q & (((~q + 1) >>> 0))) >>> 0;
                        var v = BitLevelGeneration.BitUsage_uint.Extract(bit);
                        var non = ~(((bit | this._neighborhood[System.Array.index(v, this._neighborhood)]) >>> 0));

                        this.BronKerbosch(((P & non) >>> 0), ((R | bit) >>> 0), ((X & non) >>> 0), list);

                        q = (q ^ bit) >>> 0;
                        P = (P ^ bit) >>> 0;
                        X = (X | bit) >>> 0;
                    }
                }
            },
            TomitaPivot: function (P, X) {
                var min = 2147483647;
                var best = -1;
                var q = (P | X) >>> 0;

                while (q !== 0) {
                    var bit = (q & (((~q + 1) >>> 0))) >>> 0;
                    var u = BitLevelGeneration.BitUsage_uint.Extract(bit);

                    var n = BitLevelGeneration.BitUsage_uint.PopulationCount(((((((bit | this._neighborhood[System.Array.index(u, this._neighborhood)]) >>> 0)) & P) >>> 0)));
                    if (n < min) {
                        min = n;
                        best = u;
                    }

                    q = (q ^ bit) >>> 0;
                }

                return best;
            }
        }
    });

    Bridge.define("GraphicsLayer.ICanvas", {
        inherits: [GraphicsLayer.IProduceMouseEvents],
        $kind: "interface"
    });

    Bridge.define("Graphs.Edge", {
        inherits: [GraphicsLayer.IPaintable,Graphs.IHittable],
        statics: {
            fields: {
                LabelFont: null,
                LabelBrushColor: null,
                IndexFont: null,
                IndexBrushColor: null
            },
            ctors: {
                init: function () {
                    this.LabelFont = new GraphicsLayer.Font("Times New Roman", 18);
                    this.LabelBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 255);
                    this.IndexFont = new GraphicsLayer.Font("System", 8);
                    this.IndexBrushColor = new GraphicsLayer.ARGB.$ctor1(200, 200, 0, 0);
                }
            }
        },
        fields: {
            _V1: null,
            _V2: null,
            _Orientation: 0,
            _thickness: 0,
            _Color: null,
            _penColor: null,
            _IsSelected: false,
            _Multiplicity: 0,
            _style: null,
            _showIndex: false
        },
        props: {
            ParentIndex: 0,
            IndexAngle: 0,
            V1: {
                get: function () {
                    return this._V1;
                },
                set: function (value) {
                    this._V1 = value;
                }
            },
            V2: {
                get: function () {
                    return this._V2;
                },
                set: function (value) {
                    this._V2 = value;
                }
            },
            Orientation: {
                get: function () {
                    return this._Orientation;
                },
                set: function (value) {
                    this._Orientation = value;

                    this.UpdateStyle();
                }
            },
            Thickness: {
                get: function () {
                    return this._thickness;
                },
                set: function (value) {
                    this._thickness = value;
                }
            },
            Color: {
                get: function () {
                    return this._Color;
                },
                set: function (value) {
                    this._Color = value;
                    this._penColor = this._Color;
                }
            },
            IsSelected: {
                get: function () {
                    return this._IsSelected;
                },
                set: function (value) {
                    if (value === this._IsSelected) {
                        return;
                    }

                    this._IsSelected = value;

                    this.Color = this._IsSelected ? new GraphicsLayer.ARGB.ctor(50, 205, 50) : new GraphicsLayer.ARGB.ctor(0, 0, 0);
                }
            },
            Multiplicity: {
                get: function () {
                    return this._Multiplicity;
                },
                set: function (value) {
                    this._Multiplicity = Math.max(1, value);
                }
            },
            Style: {
                get: function () {
                    return this._style;
                },
                set: function (value) {
                    if (value == null) {
                        return;
                    }

                    var style = value;
                    if (System.String.contains(style,"~~|~|~~")) {
                        var parts = System.String.split(style, System.Array.init(["~~|~|~~"], System.String), null, 0);
                        if (parts.length >= 2) {
                            style = parts[System.Array.index(0, parts)];
                            this.Label = parts[System.Array.index(1, parts)];
                        }
                    }

                    if (System.String.startsWith(style, "+") && !System.String.isNullOrEmpty(this._style)) {
                        this._style = System.String.concat(this._style, (System.String.concat(", ", System.String.trimStart(style, [43]))));
                    } else {
                        this._style = System.String.trimStart(style, [43]);
                    }
                }
            },
            Label: null
        },
        alias: [
            "Paint", "GraphicsLayer$IPaintable$Paint",
            "Hit", "Graphs$IHittable$Hit"
        ],
        ctors: {
            init: function () {
                this._thickness = 4;
                this._Color = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                this._penColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                this._showIndex = false;
            },
            $ctor1: function (v1, v2) {
                Graphs.Edge.$ctor2.call(this, v1, v2, Graphs.Edge.Orientations.None);
            },
            $ctor2: function (v1, v2, orientation) {
                this.$initialize();
                this._V1 = v1;
                this._V2 = v2;
                this._Orientation = orientation;
                this._Multiplicity = 1;
            },
            ctor: function (e, vertices) {
                this.$initialize();
                this.V1 = vertices.getItem(e.IndexV1);
                this.V2 = vertices.getItem(e.IndexV2);
                this.Orientation = e.Orientation;
                this.Thickness = e.Thickness;
                this.Multiplicity = e.Multiplicity;
                this.Style = e.Style;
                this.Label = e.Label;
            }
        },
        methods: {
            Paint: function (g, width, height) {
                if (Bridge.referenceEquals(this._V1, this._V2)) {
                    // Draw self loop.
                } else {
                    var maxRadius1 = Math.max(this._V1.LocalBounds.Width, this._V1.LocalBounds.Height) / 2;
                    var maxRadius2 = Math.max(this._V2.LocalBounds.Width, this._V2.LocalBounds.Height) / 2;

                    var cos = (this._V2.X - this._V1.X) / Math.sqrt((this._V2.X - this._V1.X) * (this._V2.X - this._V1.X) + (this._V2.Y - this._V1.Y) * (this._V2.Y - this._V1.Y));
                    cos = Math.min(Math.max(cos, -1), 1);

                    var sin = (this._V2.Y - this._V1.Y) / Math.sqrt((this._V2.X - this._V1.X) * (this._V2.X - this._V1.X) + (this._V2.Y - this._V1.Y) * (this._V2.Y - this._V1.Y));
                    sin = Math.min(Math.max(sin, -1), 1);

                    var angle = Math.acos(cos);
                    if (this._V1.Y > this._V2.Y) {
                        angle = -angle;
                    }

                    if (isNaN(angle)) {
                        return;
                    }

                    var angleStep = 1.5707963267948966 / this._Multiplicity;
                    var evenModifier = (this._Multiplicity % 2 === 0) ? 0.5 : 0;

                    var topStart = new GraphicsLayer.Box.ctor(0, 0);
                    var topFinish = new GraphicsLayer.Box.ctor(0, 0);
                    var first = true;
                    for (var i = (Bridge.Int.div(((-(((this._Multiplicity - 1) | 0))) | 0), 2)) | 0; i < Math.ceil((((this._Multiplicity + 1) | 0)) / 2.0); i = (i + 1) | 0) {
                        var startAngle = angle + angleStep * (i - evenModifier);
                        var finishAngle = angle - angleStep * (i - evenModifier);

                        var start = this.LocalToGlobal(Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.01, startAngle)), width, height);
                        var finish = this.LocalToGlobal(Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.01, finishAngle)), width, height);


                        if (first) {
                            first = false;
                            topStart = start;
                            topFinish = finish;
                        }

                        g.GraphicsLayer$IGraphics$DrawLine(this._penColor, start, finish, this._thickness);
                    }

                    if (this._Orientation !== Graphs.Edge.Orientations.None) {
                        var points = System.Array.init(3, null, GraphicsLayer.Box);
                        if (this._Orientation === Graphs.Edge.Orientations.Forward) {
                            var sweep = Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.025, angle));

                            points[System.Array.index(0, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep, this._V2.Location, 0.17453292519943295), width, height);
                            points[System.Array.index(1, points)] = this.LocalToGlobal(Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.005, angle)), width, height);
                            points[System.Array.index(2, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep, this._V2.Location, -0.17453292519943295), width, height);
                        } else if (this._Orientation === Graphs.Edge.Orientations.Backward) {
                            var sweep1 = Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.025, angle));

                            points[System.Array.index(0, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep1, this._V1.Location, 0.17453292519943295), width, height);
                            points[System.Array.index(1, points)] = this.LocalToGlobal(Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.005, angle)), width, height);
                            points[System.Array.index(2, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep1, this._V1.Location, -0.17453292519943295), width, height);
                        }

                        g.GraphicsLayer$IGraphics$FillPolygon(new GraphicsLayer.ARGB.ctor(0, 0, 0), points);
                    }

                    var label = this.Label;
                    if (!System.String.isNullOrEmpty(label)) {
                        var box = g.GraphicsLayer$IGraphics$MeasureString(label, Graphs.Edge.LabelFont);
                        var bounds = new GraphicsLayer.Box.$ctor1(topStart.X + (topFinish.X - topStart.X) / 2 - box.Width / 2 - 0.75 * box.Width * sin, topStart.Y + (topFinish.Y - topStart.Y) / 2 - box.Height / 2 + 0.75 * box.Height * cos, box.Width, box.Height);
                        g.GraphicsLayer$IGraphics$DrawString(label, Graphs.Edge.LabelFont, Graphs.Edge.LabelBrushColor, bounds);
                    }

                    if (this._showIndex) {
                        var bounds1 = new GraphicsLayer.Box.$ctor1(topStart.X + (topFinish.X - topStart.X) / 2, topStart.Y + (topFinish.Y - topStart.Y) / 2, 10, 10);
                        var cx = (bounds1.Left + bounds1.Right) / 2;
                        var cy = (bounds1.Bottom + bounds1.Top) / 2;
                        var r = Math.max(bounds1.Width, bounds1.Height) / 2 + 5;
                        var bb = new GraphicsLayer.Box.$ctor1(cx + r * Math.cos(this.IndexAngle) - 5, cy + r * Math.sin(this.IndexAngle) - 5, 10, 10);
                        g.GraphicsLayer$IGraphics$DrawString(this.ParentIndex.toString(), Graphs.Edge.IndexFont, Graphs.Edge.IndexBrushColor, bb);
                    }
                }
            },
            LocalToGlobal: function (local, width, height) {
                return new GraphicsLayer.Box.ctor(width * local.X, height * local.Y);
            },
            Hit: function (x, y) {
                return false;
            },
            Meets: function (other) {
                return Bridge.referenceEquals(this._V1, other.V1) || Bridge.referenceEquals(this._V2, other.V1) || Bridge.referenceEquals(this._V1, other.V2) || Bridge.referenceEquals(this._V2, other.V2);
            },
            UpdateStyle: function () {
                if (this.Style == null) {
                    this.Style = "";
                }

                var sb = new System.Text.StringBuilder();
                this.Style = sb.toString();
            },
            ToggleIndex: function () {
                this._showIndex = !this._showIndex;
            },
            RotateIndex: function () {
                this.IndexAngle += 0.19634954084936207;
                if (this.IndexAngle >= 6.2831853071795862) {
                    this.IndexAngle = 0;
                }
            }
        }
    });

    Bridge.define("Graphs.Graph", {
        inherits: [GraphicsLayer.IPaintable],
        statics: {
            fields: {
                GraphExtension: null,
                EdgeWeightExtension: null
            },
            ctors: {
                init: function () {
                    this.GraphExtension = ".graph";
                    this.EdgeWeightExtension = ".edge weight";
                }
            }
        },
        fields: {
            _vertices: null,
            _edges: null,
            _ModifyListsToken: null,
            _FileName: null,
            _showVertexIndices: false,
            _showEdgeIndices: false
        },
        props: {
            IsDirected: {
                get: function () {
                    return System.Linq.Enumerable.from(this._edges).any($asm.$.Graphs.Graph.f1);
                }
            },
            SelectedItems: {
                get: function () {
                    var $t, $t1;
                    this._ModifyListsToken;
                    {
                        var selectedItems = new (System.Collections.Generic.List$1(Graphs.IHittable))();
                        $t = Bridge.getEnumerator(this.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var i = $t.Current;
                                selectedItems.add(i);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }$t1 = Bridge.getEnumerator(this.SelectedEdges);
                        try {
                            while ($t1.moveNext()) {
                                var i1 = $t1.Current;
                                selectedItems.add(i1);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        return selectedItems;
                    }
                }
            },
            SelectedVertices: {
                get: function () {
                    this._ModifyListsToken;
                    return System.Linq.Enumerable.from(this._vertices).where($asm.$.Graphs.Graph.f2).toList(Graphs.Vertex);
                }
            },
            SelectedEdges: {
                get: function () {
                    this._ModifyListsToken;
                    return System.Linq.Enumerable.from(this._edges).where($asm.$.Graphs.Graph.f3).toList(Graphs.Edge);
                }
            },
            BoundingRectangle: {
                get: function () {
                    var $t;
                    this._ModifyListsToken;
                    {
                        var left = System.Double.max;
                        var right = System.Double.min;
                        var top = System.Double.max;
                        var bottom = System.Double.min;

                        $t = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                left = Math.min(left, v.LocalBounds.Left);
                                right = Math.max(right, v.LocalBounds.Right);
                                top = Math.min(top, v.LocalBounds.Top);
                                bottom = Math.max(bottom, v.LocalBounds.Bottom);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return new GraphicsLayer.Box.$ctor1(left, top, right - left, bottom - top);
                    }
                }
            },
            SelectedBoundingRectangle: {
                get: function () {
                    var $t;
                    var sv = System.Linq.Enumerable.from(this.SelectedVertices).toList(Graphs.Vertex);
                    if (sv.Count <= 0) {
                        return this.BoundingRectangle;
                    }

                    this._ModifyListsToken;
                    {
                        var left = System.Double.max;
                        var right = System.Double.min;
                        var top = System.Double.max;
                        var bottom = System.Double.min;

                        $t = Bridge.getEnumerator(sv);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                left = Math.min(left, v.LocalBounds.Left);
                                right = Math.max(right, v.LocalBounds.Right);
                                top = Math.min(top, v.LocalBounds.Top);
                                bottom = Math.max(bottom, v.LocalBounds.Bottom);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return new GraphicsLayer.Box.$ctor1(left, top, right - left, bottom - top);
                    }
                }
            },
            Name: {
                get: function () {
                    return this._FileName;
                },
                set: function (value) {
                    this._FileName = value;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            },
            Edges: {
                get: function () {
                    return this._edges;
                }
            },
            ParametersDirty: false
        },
        alias: ["Paint", "GraphicsLayer$IPaintable$Paint"],
        ctors: {
            init: function () {
                this._vertices = new (System.Collections.Generic.List$1(Graphs.Vertex))();
                this._edges = new (System.Collections.Generic.List$1(Graphs.Edge))();
                this._ModifyListsToken = {  };
            },
            ctor: function () {
                this.$initialize();
                this.ParametersDirty = true;
            },
            $ctor2: function (g) {
                Graphs.Graph.ctor.call(this);
                this._vertices = System.Linq.Enumerable.from(g.Vertices).select($asm.$.Graphs.Graph.f4).toList(Graphs.Vertex);
                this._edges = System.Linq.Enumerable.from(g.Edges).select(Bridge.fn.bind(this, $asm.$.Graphs.Graph.f5)).toList(Graphs.Edge);
                this.Name = g.Name;
            },
            $ctor3: function (vertices, edges) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.from(vertices).toList(Graphs.Vertex);
                this._edges = System.Linq.Enumerable.from(edges).toList(Graphs.Edge);
            },
            $ctor1: function (g, position, directed) {
                if (directed === void 0) { directed = true; }

                Graphs.Graph.ctor.call(this);
                if (g.VertexWeight != null && g.VertexWeight.Count === g.N) {
                    this._vertices = System.Linq.Enumerable.from(g.Vertices).select(function (v) {
                            return new Graphs.Vertex.$ctor4(position.getItem(v).X, position.getItem(v).Y, g.VertexWeight.getItem(v).toString());
                        }).toList(Graphs.Vertex);
                } else {
                    this._vertices = System.Linq.Enumerable.from(g.Vertices).select(function (v) {
                            return new Graphs.Vertex.$ctor3(position.getItem(v).X, position.getItem(v).Y);
                        }).toList(Graphs.Vertex);
                }
                this._edges = new (System.Collections.Generic.List$1(Graphs.Edge))();

                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        if (directed) {
                            if (g.Directed.get([i, j])) {
                                this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(i), this._vertices.getItem(j), Graphs.Edge.Orientations.Forward));
                            } else {
                                if (g.Adjacent.get([i, j])) {
                                    this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(j), this._vertices.getItem(i), Graphs.Edge.Orientations.Forward));
                                }
                            }
                        } else if (g.Adjacent.get([i, j])) {
                            this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(i), this._vertices.getItem(j), Graphs.Edge.Orientations.None));
                        }
                    }
                }
            }
        },
        methods: {
            Paint: function (g, width, height) {
                var $t, $t1;
                this._ModifyListsToken;
                {
                    if (this.ParametersDirty) {
                        var graph = new Algorithms.Graph.$ctor1(this.GetEdgeWeights());
                        var n = this.Vertices.Count;

                        for (var i = 0; i < this.Vertices.Count; i = (i + 1) | 0) {
                            this.Vertices.getItem(i).IsUniversal = graph.Degree(i) === ((n - 1) | 0);
                        }

                        this.ParametersDirty = false;
                    }

                    var jj = 0;
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            v.ParentIndex = Bridge.identity(jj, (jj = (jj + 1) | 0));
                            v.Paint(g, width, height);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    jj = 0;
                    $t1 = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t1.moveNext()) {
                            var e = $t1.Current;
                            e.ParentIndex = Bridge.identity(jj, (jj = (jj + 1) | 0));
                            e.Paint(g, width, height);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }}
            },
            GetEdgeWeights: function () {
                var weights = new (System.Collections.Generic.List$1(System.Int32))();

                for (var i = 0; i < this._vertices.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this._vertices.Count; j = (j + 1) | 0) {
                        var e = { };
                        if (this.EdgeExists$1(this._vertices.getItem(i), this._vertices.getItem(j), e)) {
                            weights.add(1);
                        } else {
                            if (this.EdgeExists$1(this._vertices.getItem(j), this._vertices.getItem(i), e)) {
                                if (e.v.Orientation === Graphs.Edge.Orientations.None) {
                                    weights.add(1);
                                } else {
                                    weights.add(-1);
                                }
                            } else {
                                weights.add(0);
                            }
                        }
                    }
                }

                return weights;
            },
            ModifyOrientation: function (edgeWeights) {
                var k = 0;
                for (var i = 0; i < this._vertices.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this._vertices.Count; j = (j + 1) | 0) {
                        var w = edgeWeights.getItem(k);

                        if (w !== 0) {
                            var e = this.GetEdge(this._vertices.getItem(i), this._vertices.getItem(j));

                            if (Bridge.referenceEquals(e.V1, this._vertices.getItem(i)) && Bridge.referenceEquals(e.V2, this._vertices.getItem(j))) {
                                if (w < 0) {
                                    e.Orientation = Graphs.Edge.Orientations.Backward;
                                } else {
                                    e.Orientation = Graphs.Edge.Orientations.Forward;
                                }
                            } else {
                                if (w < 0) {
                                    e.Orientation = Graphs.Edge.Orientations.Forward;
                                } else {
                                    e.Orientation = Graphs.Edge.Orientations.Backward;
                                }
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                this.ParametersDirty = true;
            },
            Clone: function () {
                var s = GraphsCore.CompactSerializer.Serialize(this);
                var g = GraphsCore.CompactSerializer.Deserialize(s);
                if (g != null) {
                    g.ParametersDirty = true;
                } else {
                    System.Console.WriteLine("clone is null");
                }
                return g;
            },
            HitTest: function (x, y) {
                var $t, $t1;
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        if (v.Hit(x, y)) {
                            return v;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(this._edges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        if (e.Hit(x, y)) {
                            return e;
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            UnselectAll: function () {
                this.UnselectAllVertices();
                this.UnselectAllEdges();
            },
            UnselectAllVertices: function () {
                var $t;
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        v.IsSelected = false;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            UnselectAllEdges: function () {
                var $t;
                $t = Bridge.getEnumerator(this._edges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        e.IsSelected = false;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectEdges: function (edges, symmetricDifference) {
                var $t;
                this.UnselectAllVertices();
                if (!symmetricDifference) {
                    this.UnselectAllEdges();
                }

                $t = Bridge.getEnumerator(edges, Graphs.Edge);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        e.IsSelected = symmetricDifference ? !e.IsSelected : true;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectVertices: function (vertices, symmetricDifference) {
                var $t;
                this.UnselectAllEdges();
                if (!symmetricDifference) {
                    this.UnselectAllVertices();
                }

                $t = Bridge.getEnumerator(vertices, Graphs.Vertex);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        v.IsSelected = symmetricDifference ? !v.IsSelected : true;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectObjects: function (selectionPoints, symmetricDifference) {
                try {
                    var bounds = new Graphs.PolygonContainer(selectionPoints.toArray());

                    var verticesInPolygon = System.Linq.Enumerable.from(this._vertices).where(function (v) {
                            return bounds.Contains(new GraphicsLayer.Box.ctor(v.X, v.Y));
                        }).toList(Graphs.Vertex);

                    if (verticesInPolygon.Count > 0) {
                        this.SelectVertices(verticesInPolygon, symmetricDifference);
                    } else {
                        var edgesHittingPolygon = System.Linq.Enumerable.from(this._edges).where(function (e) {
                                for (var i = 0; i < selectionPoints.Count; i = (i + 1) | 0) {
                                    var start = selectionPoints.getItem(i);
                                    var end = selectionPoints.getItem((((i + 1) | 0)) % selectionPoints.Count);

                                    if (Graphs.Utility.HaveIntersection(start, end, Graphs.Vector.op_Implicit(e.V1.Location), Graphs.Vector.op_Implicit(e.V2.Location))) {
                                        return true;
                                    }
                                }

                                return false;
                            }).toList(Graphs.Edge);

                        this.SelectEdges(edgesHittingPolygon, symmetricDifference);
                    }
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            },
            AddVertex: function (v) {
                if (this._showVertexIndices) {
                    v.ToggleIndex();
                }
                this._ModifyListsToken;
                this._vertices.add(v);

                this.ParametersDirty = true;
                return true;
            },
            RemoveVertex: function (v) {
                var $t;
                var neighbors = this.FindNeighbors(v);
                $t = Bridge.getEnumerator(neighbors);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        this.RemoveEdge(v, x);
                        this.RemoveEdge(x, v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this._ModifyListsToken;
                this._vertices.remove(v);

                this.ParametersDirty = neighbors.Count > 0;

                return neighbors.Count > 0;
            },
            AddEdge$1: function (v1, v2, multiplicity) {
                if (multiplicity === void 0) { multiplicity = 1; }
                return this.AddEdge(v1, v2, Graphs.Edge.Orientations.None, multiplicity);
            },
            AddEdge: function (v1, v2, orientation, multiplicity, thickness, style, label) {
                if (multiplicity === void 0) { multiplicity = 1; }
                if (thickness === void 0) { thickness = 3.0; }
                if (style === void 0) { style = ""; }
                if (label === void 0) { label = ""; }
                if (Bridge.referenceEquals(v1, v2)) {
                    // Not allowing self-loops for now.
                    return false;
                }

                if (!this.EdgeExists(v1, v2) && !this.EdgeExists(v2, v1)) {
                    this._ModifyListsToken;
                    {
                        var edge = new Graphs.Edge.$ctor2(v1, v2, orientation);
                        edge.Multiplicity = multiplicity;
                        edge.Thickness = thickness;
                        edge.Style = style;
                        edge.Label = label;
                        if (this._showEdgeIndices) {
                            edge.ToggleIndex();
                        }
                        this._edges.add(edge);
                        this.ParametersDirty = true;

                        return true;
                    }
                }

                return false;
            },
            AddEdge$2: function (e) {
                this.AddEdge(e.V1, e.V2, e.Orientation, Math.max(1, e.Multiplicity), e.Thickness, e.Style, e.Label);
            },
            RemoveEdge: function (v1, v2) {
                var $t;
                var toRemove;

                this._ModifyListsToken;
                {
                    toRemove = System.Linq.Enumerable.from(this._edges).where(function (e) {
                            return Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2);
                        }).toList(Graphs.Edge);
                }

                $t = Bridge.getEnumerator(toRemove);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        this._edges.remove(e);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ParametersDirty = toRemove.Count > 0;
                return toRemove.Count > 0;
            },
            EdgeExists: function (v1, v2) {
                var edge = { };
                return this.EdgeExists$1(v1, v2, edge);
            },
            EdgeExists$1: function (v1, v2, edge) {
                var $t;
                edge.v = null;

                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            edge.v = e;
                            if (Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2) && (e.Orientation === Graphs.Edge.Orientations.None || e.Orientation === Graphs.Edge.Orientations.Forward)) {
                                return true;
                            }

                            if (Bridge.referenceEquals(e.V1, v2) && Bridge.referenceEquals(e.V2, v1) && e.Orientation === Graphs.Edge.Orientations.Backward) {
                                return true;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return false;
            },
            GetEdge: function (v1, v2) {
                var $t;
                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            if (Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2) || Bridge.referenceEquals(e.V1, v2) && Bridge.referenceEquals(e.V2, v1)) {
                                return e;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return null;
            },
            InducedSubgraph: function (vertices) {
                var $t, $t1, $t2;
                var induced = new Graphs.Graph.ctor();
                $t = Bridge.getEnumerator(vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        induced.AddVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(induced.Vertices);
                try {
                    while ($t1.moveNext()) {
                        var v1 = $t1.Current;
                        $t2 = Bridge.getEnumerator(induced.Vertices);
                        try {
                            while ($t2.moveNext()) {
                                var v2 = $t2.Current;
                                var e = { };
                                if (this.EdgeExists$1(v1, v2, e)) {
                                    induced.AddEdge(v1, v2, e.v.Orientation !== Graphs.Edge.Orientations.None ? Graphs.Edge.Orientations.Forward : Graphs.Edge.Orientations.None, e.v.Multiplicity, e.v.Thickness, e.v.Style, e.v.Label);
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                return induced.Clone();
            },
            DisjointUnion: function (g) {
                var $t, $t1;
                $t = Bridge.getEnumerator(g.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        this.AddVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(g.Edges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        this.AddEdge$2(e);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }},
            FindNeighbors: function (v) {
                var $t;
                var neighbors = new (System.Collections.Generic.List$1(Graphs.Vertex))();

                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            if (Bridge.referenceEquals(e.V1, v)) {
                                neighbors.add(e.V2);
                            }
                            if (Bridge.referenceEquals(e.V2, v)) {
                                neighbors.add(e.V1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return neighbors;
            },
            Translate: function (offset) {
                var $t;
                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            v.X += offset.X;
                            v.Y += offset.Y;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}
            },
            ToggleEdgeIndices: function () {
                var $t;
                this._showEdgeIndices = !this._showEdgeIndices;
                $t = Bridge.getEnumerator(this.Edges);
                try {
                    while ($t.moveNext()) {
                        var a = $t.Current;
                        a.ToggleIndex();
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            ToggleVertexIndices: function () {
                var $t;
                this._showVertexIndices = !this._showVertexIndices;
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var a = $t.Current;
                        a.ToggleIndex();
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
        }
    });

    Bridge.ns("Graphs.Graph", $asm.$);

    Bridge.apply($asm.$.Graphs.Graph, {
        f1: function (e) {
            return e.Orientation !== Graphs.Edge.Orientations.None;
        },
        f2: function (v) {
            return v.IsSelected;
        },
        f3: function (e) {
            return e.IsSelected;
        },
        f4: function (v) {
            return new Graphs.Vertex.ctor(v);
        },
        f5: function (e) {
            return new Graphs.Edge.ctor(e, this._vertices);
        }
    });

    Bridge.define("Graphs.GraphCanvas", {
        inherits: [GraphicsLayer.IPaintable],
        statics: {
            fields: {
                DefaultBaseViewScale: 0,
                MaxZoomScale: 0,
                _gridStep: 0,
                SelectionPenColor: null,
                GridPenColor: null,
                BackgroundColor: null
            },
            ctors: {
                init: function () {
                    this.DefaultBaseViewScale = 800;
                    this.MaxZoomScale = 6000;
                    this._gridStep = 0.04;
                    this.SelectionPenColor = new GraphicsLayer.ARGB.ctor(0, 0, 255);
                    this.GridPenColor = new GraphicsLayer.ARGB.$ctor1(75, 0, 10, 0);
                    this.BackgroundColor = new GraphicsLayer.ARGB.ctor(247, 247, 247);
                }
            }
        },
        fields: {
            BaseViewScale: 0,
            ZoomDelta: 0,
            MinZoom: 0,
            _zoomFitNextPaint: false,
            _snapToGrid: false,
            _drawGrid: false,
            _graph: null,
            _DraggedVertex: null,
            _selectionPoints: null,
            _SelectionPointsToken: null,
            _controlWasDown: false,
            _canvas: null,
            _state: 0,
            _viewScale: 0,
            _Zoom: 0,
            _secondaryConverter: null,
            _history: null,
            _historyIndex: 0
        },
        events: {
            GraphModified: null,
            NameModified: null
        },
        props: {
            SnapToGrid: {
                get: function () {
                    return this._snapToGrid;
                },
                set: function (value) {
                    var needRedraw = value && !this._snapToGrid;
                    this._snapToGrid = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            GridStep: {
                get: function () {
                    return Graphs.GraphCanvas._gridStep;
                },
                set: function (value) {
                    var needRedraw = this.SnapToGrid && value !== Graphs.GraphCanvas._gridStep;
                    Graphs.GraphCanvas._gridStep = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            DrawGrid: {
                get: function () {
                    return this._drawGrid;
                },
                set: function (value) {
                    var needRedraw = this._drawGrid !== value;
                    this._drawGrid = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            HasPainted: false,
            Width: 0,
            Height: 0,
            Graph: {
                get: function () {
                    return this._graph;
                }
            },
            Canvas: {
                get: function () {
                    return this._canvas;
                },
                set: function (value) {
                    this._canvas = value;

                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseMoved(Bridge.fn.cacheBind(this, this.OnMouseMove));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonDown(Bridge.fn.cacheBind(this, this.OnMouseDown));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonUp(Bridge.fn.cacheBind(this, this.OnMouseUp));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonDoubleClicked(Bridge.fn.cacheBind(this, this.OnMouseDoubleClick));
                }
            },
            Zoom: {
                set: function (value) {
                    if (value === this._Zoom) {
                        return;
                    }

                    this._Zoom = value;
                    var scale = Bridge.Int.clip32(this._Zoom * this.BaseViewScale);
                    if (scale > Graphs.GraphCanvas.MaxZoomScale) {
                        scale = Graphs.GraphCanvas.MaxZoomScale;
                        this._Zoom = (Bridge.Int.div(scale, this.BaseViewScale)) | 0;
                    }

                    this.ViewScale = scale;
                }
            },
            ViewScale: {
                get: function () {
                    return this._viewScale;
                },
                set: function (value) {
                    if (value === this._viewScale) {
                        return;
                    }

                    this._viewScale = value;
                }
            },
            IsEmpty: {
                get: function () {
                    return this._graph.Vertices.Count <= 0;
                }
            }
        },
        alias: ["Paint", "GraphicsLayer$IPaintable$Paint"],
        ctors: {
            init: function () {
                this.BaseViewScale = Graphs.GraphCanvas.DefaultBaseViewScale;
                this.ZoomDelta = 0.15;
                this.MinZoom = 0.15;
                this._snapToGrid = true;
                this._drawGrid = true;
                this._selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))();
                this._SelectionPointsToken = {  };
                this._state = Graphs.GraphCanvas.States.Idle;
                this._viewScale = Graphs.GraphCanvas.DefaultBaseViewScale;
                this._Zoom = 1.0;
                this._history = new (System.Collections.Generic.List$1(Graphs.GraphCanvas.HistoricalGraph))();
                this._historyIndex = 0;
            },
            ctor: function (graph, secondaryConverter) {
                if (secondaryConverter === void 0) { secondaryConverter = null; }

                this.$initialize();                var $t;

                this._graph = graph != null ? graph : new Graphs.Graph.ctor();
                this._secondaryConverter = secondaryConverter;
                this._history.add(($t = new Graphs.GraphCanvas.HistoricalGraph(), $t.Graph = this._graph.Clone(), $t.Zoom = this._Zoom, $t.ViewScale = this._viewScale, $t));
        }
    },
    methods: {
        SetZoomDelta: function (d) {
            this.ZoomDelta = d;
            this.MinZoom = d;
        },
        Invalidate: function () {
            if (this.Canvas != null) {
                this.Canvas.GraphicsLayer$ICanvas$Invalidate();
            }
        },
        GraphChanged: function () {
            var $t;
            if (((((this._history.Count - this._historyIndex) | 0) - 1) | 0) > 0) {
                this._history.removeRange(((this._historyIndex + 1) | 0), ((((this._history.Count - this._historyIndex) | 0) - 1) | 0));
            }

            this._history.add(($t = new Graphs.GraphCanvas.HistoricalGraph(), $t.Graph = this._graph.Clone(), $t.Zoom = this._Zoom, $t.ViewScale = this._viewScale, $t));
            this._historyIndex = (this._history.Count - 1) | 0;

            if (!Bridge.staticEquals(this.GraphModified, null)) {
                this.GraphModified(this.Graph);
            }
        },
        DoUndo: function () {
            if (this._historyIndex <= 0) {
                return false;
            }

            this._historyIndex = (this._historyIndex - 1) | 0;
            this.ObeyHistory();

            return this._historyIndex > 0;
        },
        DoRedo: function () {
            if (this._historyIndex >= ((this._history.Count - 1) | 0)) {
                return false;
            }

            this._historyIndex = (this._historyIndex + 1) | 0;
            this.ObeyHistory();

            return this._historyIndex < ((this._history.Count - 1) | 0);
        },
        ObeyHistory: function () {
            this._graph = this._history.getItem(this._historyIndex).Graph.Clone();
            this.ViewScale = this._history.getItem(this._historyIndex).ViewScale;
            this.Zoom = this._history.getItem(this._historyIndex).Zoom;
            this._graph.ParametersDirty = true;

            if (!Bridge.staticEquals(this.GraphModified, null)) {
                this.GraphModified(this.Graph);
            }

            this.Invalidate();
        },
        Save: function (name) {
            this._graph.Name = name;
            return ""; // _graph.Serialize();
        },
        DoZoom: function (amount, location) {
            var width = this.Width;
            var height = this.Height;

            var oldCenter = new Graphs.Vector(width / this._viewScale * location.X, height / this._viewScale * location.Y);

            this.Zoom = Math.max(this.MinZoom, this._Zoom + this.ZoomDelta * amount);

            var center = new Graphs.Vector(width / this._viewScale * location.X, height / this._viewScale * location.Y);

            this._graph.Translate(Graphs.Vector.op_Subtraction(center, oldCenter));

            this.Invalidate();
        },
        DoZoomFit: function () {
            if (this._graph.Vertices.Count <= 0) {
                this.Zoom = 1;
                this.Invalidate();
                return;
            }

            var width = this.Width;
            var height = this.Height;
            var bounds = this._graph.SelectedBoundingRectangle;
            var c = new Graphs.Vector(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2);

            var actual = Math.min(width, height);
            this.Zoom = 0.9 * actual / Math.max(bounds.Width, bounds.Height) / this.BaseViewScale;

            var center = new Graphs.Vector(width / this._viewScale * 0.5, height / this._viewScale * 0.5);
            this._graph.Translate(Graphs.Vector.op_Subtraction(center, c));

            this.Invalidate();
        },
        DoDelete: function () {
            var $t, $t1;
            if (this._graph.SelectedVertices.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        this._graph.RemoveVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}

            if (this._graph.SelectedEdges.Count > 0) {
                $t1 = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        this._graph.RemoveEdge(e.V1, e.V2);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }}

            this.Invalidate();
            this.GraphChanged();
        },
        DoReverseSelectedEdges: function () {
            var $t;
            if (this._graph.SelectedEdges.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var oo = e.Orientation;
                        if (oo === Graphs.Edge.Orientations.Forward) {
                            oo = Graphs.Edge.Orientations.Backward;
                        } else {
                            if (oo === Graphs.Edge.Orientations.Backward) {
                                oo = Graphs.Edge.Orientations.Forward;
                            }
                        }

                        e.Orientation = oo;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Invalidate();
                this.GraphChanged();
            }
        },
        DoRotateSelectedEdges: function () {
            var $t;
            if (this._graph.SelectedEdges.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var oo = e.Orientation;
                        if (oo === Graphs.Edge.Orientations.Forward) {
                            oo = Graphs.Edge.Orientations.Backward;
                        } else {
                            if (oo === Graphs.Edge.Orientations.Backward) {
                                oo = Graphs.Edge.Orientations.None;
                            } else {
                                if (oo === Graphs.Edge.Orientations.None) {
                                    oo = Graphs.Edge.Orientations.Forward;
                                }
                            }
                        }

                        e.Orientation = oo;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Invalidate();
                this.GraphChanged();
            }
        },
        DoCut: function () {
            this.DoCopy();
            this.DoDelete();
        },
        DoCopy: function (verbose) {
            if (verbose === void 0) { verbose = false; }
            var h = this._graph.InducedSubgraph(this._graph.SelectedVertices);
            return GraphsCore.CompactSerializer.Serialize(h);
        },
        DoPaste: function (s) {
            var g = null;
            if (System.String.contains(s,"tikzpicture")) {
                //g = TeXConverter.FromTikz(s);
            } else if (GraphsCore.CompactSerializer.LooksLikeASerializedGraph(s)) {
                g = GraphsCore.CompactSerializer.Deserialize(s);
            } else {
                //g = Graph.Deserialize(s);
            }

            if (g != null) {
                this._graph.DisjointUnion(g);

                this.Invalidate();
                this.GraphChanged();
            } else if (System.Linq.Enumerable.from(System.String.split(s.trim(), [32].map(function(i) {{ return String.fromCharCode(i); }}))).all($asm.$.Graphs.GraphCanvas.f1)) {
                try {
                    //g = GraphIO.GraphFromEdgeWeightString(s);
                    if (g != null) {
                        this._graph.DisjointUnion(g);

                        this.Invalidate();
                        this.GraphChanged();
                    }

                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            } else {
                try {
                    //g = GraphIO.GraphFromGraph6(s.Trim());

                    if (g != null) {
                        var empty = this._graph.Vertices.Count <= 0;
                        this._graph.DisjointUnion(g);

                        if (empty) {
                            this.NameModified(g.Name);
                        }

                        this.Invalidate();
                        this.GraphChanged();
                    }
                }
                catch ($e2) {
                    $e2 = System.Exception.create($e2);
                }
            }
        },
        DoComplement: function () {
            for (var i = 0; i < this._graph.SelectedVertices.Count; i = (i + 1) | 0) {
                for (var j = (i + 1) | 0; j < this._graph.SelectedVertices.Count; j = (j + 1) | 0) {
                    var v1 = this._graph.SelectedVertices.getItem(i);
                    var v2 = this._graph.SelectedVertices.getItem(j);

                    var edgeExists = this._graph.EdgeExists(v1, v2) || this._graph.EdgeExists(v2, v1);

                    if (edgeExists) {
                        this._graph.RemoveEdge(v1, v2);
                        this._graph.RemoveEdge(v2, v1);
                    } else {
                        this._graph.AddEdge$1(v1, v2);
                    }
                }
            }

            this.Invalidate();

            this.GraphChanged();
        },
        DoSquare: function () {
            var $t, $t1;
            var g = new Graphs.Graph.ctor();

            var vertexMap = new (System.Collections.Generic.Dictionary$2(Graphs.Vertex,Graphs.Vertex))();
            $t = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    var w = new Graphs.Vertex.$ctor4(v.X, v.Y, v.Label);
                    g.AddVertex(w);

                    vertexMap.set(v, w);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            $t1 = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t1.moveNext()) {
                    var v1 = $t1.Current;
                    var q = System.Linq.Enumerable.from(this._graph.FindNeighbors(v1)).union(System.Array.init([v1], Graphs.Vertex)).toList(Graphs.Vertex);

                    for (var i = 0; i < q.Count; i = (i + 1) | 0) {
                        for (var j = (i + 1) | 0; j < q.Count; j = (j + 1) | 0) {
                            g.AddEdge$1(vertexMap.get(q.getItem(i)), vertexMap.get(q.getItem(j)));
                        }
                    }
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }

            return g;
        },
        DoLineGraph: function () {
            var $t, $t1, $t2, $t3;
            var g = new Graphs.Graph.ctor();

            var edgeToCliqueMap = new (System.Collections.Generic.Dictionary$2(Graphs.Edge,System.Collections.Generic.List$1(Graphs.Vertex)))();
            $t = Bridge.getEnumerator(this._graph.Edges);
            try {
                while ($t.moveNext()) {
                    var e = $t.Current;
                    var clique = new (System.Collections.Generic.List$1(Graphs.Vertex))();

                    for (var i = 0; i < e.Multiplicity; i = (i + 1) | 0) {
                        var v = new Graphs.Vertex.$ctor3((e.V1.X + e.V2.X) / 2, (e.V1.Y + e.V2.Y) / 2);
                        g.AddVertex(v);
                        v.Label = e.Label;

                        $t1 = Bridge.getEnumerator(clique);
                        try {
                            while ($t1.moveNext()) {
                                var other = $t1.Current;
                                g.AddEdge$1(other, v);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        clique.add(v);
                    }

                    edgeToCliqueMap.set(e, clique);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            for (var i1 = 0; i1 < this._graph.Edges.Count; i1 = (i1 + 1) | 0) {
                for (var j = (i1 + 1) | 0; j < this._graph.Edges.Count; j = (j + 1) | 0) {
                    if (this._graph.Edges.getItem(i1).Meets(this._graph.Edges.getItem(j))) {
                        $t2 = Bridge.getEnumerator(edgeToCliqueMap.get(this._graph.Edges.getItem(i1)));
                        try {
                            while ($t2.moveNext()) {
                                var v1 = $t2.Current;
                                $t3 = Bridge.getEnumerator(edgeToCliqueMap.get(this._graph.Edges.getItem(j)));
                                try {
                                    while ($t3.moveNext()) {
                                        var v2 = $t3.Current;
                                        g.AddEdge$1(v1, v2);
                                    }
                                } finally {
                                    if (Bridge.is($t3, System.IDisposable)) {
                                        $t3.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }}
                }
            }

            return g;
        },
        DoContractSelectedSubgraph: function () {
            var $t, $t1;
            var selected = this._graph.SelectedVertices;
            if (selected.Count <= 0) {
                return;
            }

            var x = System.Linq.Enumerable.from(selected).average($asm.$.Graphs.GraphCanvas.f2);
            var y = System.Linq.Enumerable.from(selected).average($asm.$.Graphs.GraphCanvas.f3);

            var contractedVertex = new Graphs.Vertex.$ctor3(x, y);
            this._graph.AddVertex(contractedVertex);

            var neighbors = System.Linq.Enumerable.from(selected).selectMany(Bridge.fn.bind(this, $asm.$.Graphs.GraphCanvas.f4)).distinct();

            $t = Bridge.getEnumerator(neighbors);
            try {
                while ($t.moveNext()) {
                    var neighbor = $t.Current;
                    this._graph.AddEdge$1(contractedVertex, neighbor);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            $t1 = Bridge.getEnumerator(selected);
            try {
                while ($t1.moveNext()) {
                    var v = $t1.Current;
                    this._graph.RemoveVertex(v);
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }
            this.Invalidate();

            this.GraphChanged();
        },
        DoIndexLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = i.toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.Degree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoInDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.InDegree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoOutDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.OutDegree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoOutDegreePlusOneLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = (((g.OutDegree(i) + 1) | 0)).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoClearLabels: function (s, vertices) {
            var $t;
            if (s === void 0) { s = ""; }
            if (vertices === void 0) { vertices = null; }
            if (vertices == null || System.Linq.Enumerable.from(vertices).count() <= 0) {
                vertices = System.Linq.Enumerable.range(0, this._graph.Vertices.Count);
            }

            $t = Bridge.getEnumerator(vertices, System.Int32);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    this._graph.Vertices.getItem(v).Label = s;
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
            this.GraphChanged();
        },
        DoSnapToGrid: function () {
            var $t;
            if (this.GridStep <= 0) {
                return;
            }

            $t = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    v.X = Graphs.GraphCanvas._gridStep * Bridge.Math.round(v.X / Graphs.GraphCanvas._gridStep, 0, 6);
                    v.Y = Graphs.GraphCanvas._gridStep * Bridge.Math.round(v.Y / Graphs.GraphCanvas._gridStep, 0, 6);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }},
        PaintGrid: function (g) {
            if (!this.DrawGrid || this.GridStep <= 0) {
                return;
            }

            var x = 0.0;
            while (x <= this.Width) {
                g.GraphicsLayer$IGraphics$DrawLine$1(Graphs.GraphCanvas.GridPenColor, x, 0, x, this.Height, 1.0);
                x += this.GridStep * this._viewScale;
            }

            var y = 0.0;
            while (y <= this.Height) {
                g.GraphicsLayer$IGraphics$DrawLine$1(Graphs.GraphCanvas.GridPenColor, 0, y, this.Width, y, 1.0);
                y += this.GridStep * this._viewScale;
            }
        },
        GetHit: function (x, y) {
            return this._graph.HitTest(x, y);
        },
        Paint: function (g, width, height) {
            var $t;
            if (width === 0 || height === 0) {
                return;
            }

            try {
                this.Width = width;
                this.Height = height;

                if (this.SnapToGrid) {
                    this.DoSnapToGrid();
                }

                g.GraphicsLayer$IGraphics$Clear(Graphs.GraphCanvas.BackgroundColor);
                this.PaintGrid(g);

                this._graph.Paint(g, this._viewScale, this._viewScale);

                switch (this._state) {
                    case Graphs.GraphCanvas.States.Idle: 
                        break;
                    case Graphs.GraphCanvas.States.DraggingVertex: 
                        break;
                    case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                        {
                            var selectionPoints;
                            this._SelectionPointsToken;
                            {
                                selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))(this._selectionPoints.Count);
                                $t = Bridge.getEnumerator(this._selectionPoints);
                                try {
                                    while ($t.moveNext()) {
                                        var p = $t.Current;
                                        selectionPoints.add(new GraphicsLayer.Box.ctor(p.X * this._viewScale, p.Y * this._viewScale));
                                    }
                                } finally {
                                    if (Bridge.is($t, System.IDisposable)) {
                                        $t.System$IDisposable$dispose();
                                    }
                                }}

                            if (selectionPoints.Count > 1) {
                                g.GraphicsLayer$IGraphics$DrawLines(Graphs.GraphCanvas.SelectionPenColor, selectionPoints, 1.0);
                            }

                            break;
                        }
                }
            }
            catch ($e1) {
                $e1 = System.Exception.create($e1);
            }

            this.HasPainted = true;

            if (this._zoomFitNextPaint) {
                this._zoomFitNextPaint = false;
                this.DoZoomFit();
                this.DoZoom(4, new GraphicsLayer.Box.ctor(0.5, 0.5));
            }
        },
        OnMouseMove: function (X, Y) {
            var $t;
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    break;
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    {
                        this._DraggedVertex.X = this._DraggedVertex.DragOffset.X + x;
                        this._DraggedVertex.Y = this._DraggedVertex.DragOffset.Y + y;

                        this.Invalidate();
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    {
                        this._SelectionPointsToken;
                        {
                            this._selectionPoints.add(new GraphicsLayer.Box.ctor(x, y));

                            this.Invalidate();
                        }
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectedVertices: 
                    {
                        $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                v.X = v.DragOffset.X + x;
                                v.Y = v.DragOffset.Y + y;
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        this.Invalidate();
                        break;
                    }
            }
        },
        ToggleEdgeIndices: function () {
            this._graph.ToggleEdgeIndices();

            this.Invalidate();
        },
        RotateVertexIndices: function () {
            var $t;
            var x = this._graph.SelectedVertices;
            if (x.Count <= 0) {
                x = this._graph.Vertices;
            }

            $t = Bridge.getEnumerator(x);
            try {
                while ($t.moveNext()) {
                    var a = $t.Current;
                    a.RotateIndex();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
        },
        RotateEdgeIndices: function () {
            var $t;
            var x = this._graph.SelectedEdges;
            if (x.Count <= 0) {
                x = this._graph.Edges;
            }

            $t = Bridge.getEnumerator(x);
            try {
                while ($t.moveNext()) {
                    var a = $t.Current;
                    a.RotateIndex();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
        },
        SetIndex: function (n) {
            var x = this._graph.SelectedVertices;
            if (x.Count === 1) {
                var v = x.getItem(0);
                var i = this._graph.Vertices.indexOf(v);
                if (i !== n) {
                    this._graph.Vertices.remove(v);
                    if (n >= this._graph.Vertices.Count) {
                        this._graph.Vertices.add(v);
                    } else if (n < i) {
                        this._graph.Vertices.insert(n, v);
                    } else {
                        this._graph.Vertices.insert(n, v);
                    }
                }
            } else {
                var y = this._graph.SelectedEdges;
                if (y.Count === 1) {
                    var v1 = y.getItem(0);
                    var i1 = this._graph.Edges.indexOf(v1);
                    if (i1 !== n) {
                        this._graph.Edges.remove(v1);
                        if (n >= this._graph.Edges.Count) {
                            this._graph.Edges.add(v1);
                        } else if (n < i1) {
                            this._graph.Edges.insert(n, v1);
                        } else {
                            this._graph.Edges.insert(n, v1);
                        }
                    }
                }
            }

            this.Invalidate();
        },
        ToggleVertexIndices: function () {
            this._graph.ToggleVertexIndices();

            this.Invalidate();
        },
        OnMouseDown: function (X, Y, button) {
            var $t;
            this._controlWasDown = this.Canvas.GraphicsLayer$ICanvas$IsControlKeyDown;

            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            if (o == null) {
                                this._selectionPoints.clear();
                                this._selectionPoints.add(new GraphicsLayer.Box.ctor(x, y));
                                this._state = Graphs.GraphCanvas.States.DraggingSelectionRegion;
                            } else if (Bridge.is(o, Graphs.Vertex)) {
                                if (Bridge.cast(o, Graphs.Vertex).IsSelected) {
                                    $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                                    try {
                                        while ($t.moveNext()) {
                                            var v = $t.Current;
                                            v.DragOffset = new GraphicsLayer.Box.ctor(v.X - x, v.Y - y);
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    this._state = Graphs.GraphCanvas.States.DraggingSelectedVertices;
                                } else {
                                    this._DraggedVertex = Bridge.cast(o, Graphs.Vertex);
                                    this._DraggedVertex.DragOffset = new GraphicsLayer.Box.ctor(this._DraggedVertex.X - x, this._DraggedVertex.Y - y);
                                    this._state = Graphs.GraphCanvas.States.DraggingVertex;
                                }
                            } else if (Bridge.is(o, Graphs.Edge)) {
                            }
                        } else if (button === GraphicsLayer.MouseButton.Right) {
                            if (o == null) {
                            } else if (Bridge.is(o, Graphs.Vertex)) {
                            } else if (Bridge.is(o, Graphs.Edge)) {
                            }
                        }

                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    break;
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    break;
            }
        },
        OnMouseUp: function (X, Y, button) {
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    {
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;

                            if (this.SnapToGrid) {
                                this.DoSnapToGrid();
                            }

                            this.GraphChanged();
                        }
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;

                            var selectionPoints;
                            this._SelectionPointsToken;
                            {
                                selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))(this._selectionPoints);

                                if (selectionPoints.Count > 2) {
                                    this._graph.SelectObjects(selectionPoints, this._controlWasDown);
                                }

                                this.Canvas.GraphicsLayer$ICanvas$SelectedObjects = System.Linq.Enumerable.from(this._graph.SelectedItems).select(function(x) { return Bridge.cast(x, System.Object); });
                                this.Invalidate();
                            }
                        }

                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectedVertices: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;
                            this.GraphChanged();
                        }
                        break;
                    }
            }

            this.Invalidate();
        },
        OnMouseDoubleClick: function (X, Y, button) {
            var $t;
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            var graphChanged = false;
            if (this._state === Graphs.GraphCanvas.States.Idle && !this.Canvas.GraphicsLayer$ICanvas$IsControlKeyDown) {
                if (button === GraphicsLayer.MouseButton.Left) {
                    if (o == null) {
                        var v = new Graphs.Vertex.$ctor3(x, y);
                        if (this._graph.AddVertex(v)) {
                            graphChanged = true;
                        }
                    } else if (Bridge.is(o, Graphs.Vertex)) {
                        var endVertex = Bridge.cast(o, Graphs.Vertex);
                        $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var v1 = $t.Current;
                                if (this._graph.AddEdge$1(v1, endVertex)) {
                                    graphChanged = true;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                } else if (button === GraphicsLayer.MouseButton.Right) {
                    if (Bridge.is(o, Graphs.Vertex)) {
                        if (this._graph.RemoveVertex(Bridge.cast(o, Graphs.Vertex))) {
                            graphChanged = true;
                        }
                    }
                }
            }

            this.Invalidate();

            if (graphChanged) {
                this.GraphChanged();
            }
        },
        ZoomFitNextPaint: function () {
            this._zoomFitNextPaint = true;
            this.Invalidate();
        }
    }
    });

    Bridge.ns("Graphs.GraphCanvas", $asm.$);

    Bridge.apply($asm.$.Graphs.GraphCanvas, {
        f1: function (x) {
            var d = { };
            return System.String.startsWith(x, "[") || System.Int32.tryParse(x, d);
        },
        f2: function (z) {
            return z.X;
        },
        f3: function (z) {
            return z.Y;
        },
        f4: function (v) {
            return this._graph.FindNeighbors(v);
        }
    });

    Bridge.define("Graphs.Vertex", {
        inherits: [GraphicsLayer.IPaintable,Graphs.IHittable],
        statics: {
            fields: {
                LabelFont: null,
                IndexFont: null,
                LabelBrushColor: null,
                IndexBrushColor: null,
                BoundaryPenColor: null,
                BoundarySelectedPenColor: null,
                BoundarySelectedPenWidth: 0,
                DefaultFillBrushColor: null,
                UniversalVertexFillBrushColor: null,
                SelectedFillBrushColor: null
            },
            ctors: {
                init: function () {
                    this.LabelFont = new GraphicsLayer.Font("Times New Roman", 12);
                    this.IndexFont = new GraphicsLayer.Font("System", 8);
                    this.LabelBrushColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                    this.IndexBrushColor = new GraphicsLayer.ARGB.$ctor1(200, 200, 0, 0);
                    this.BoundaryPenColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                    this.BoundarySelectedPenColor = new GraphicsLayer.ARGB.$ctor1(255, 0, 255, 0);
                    this.BoundarySelectedPenWidth = 2;
                    this.DefaultFillBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 0);
                    this.UniversalVertexFillBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 255);
                    this.SelectedFillBrushColor = new GraphicsLayer.ARGB.$ctor1(255, 0, 255, 127);
                }
            }
        },
        fields: {
            _Location: null,
            _DragOffset: null,
            _label: null,
            _Style: null,
            _IsSelected: false,
            _padding: 0,
            _LocalBounds: null,
            _showIndex: false
        },
        props: {
            ParentIndex: 0,
            IndexAngle: 0,
            Color: null,
            Modifier: 0,
            X: {
                get: function () {
                    return this._Location.X;
                },
                set: function (value) {
                    this._Location.X = value;
                }
            },
            Y: {
                get: function () {
                    return this._Location.Y;
                },
                set: function (value) {
                    this._Location.Y = value;
                }
            },
            Location: {
                get: function () {
                    return this._Location;
                },
                set: function (value) {
                    this._Location = value;
                }
            },
            Label: {
                get: function () {
                    return this._label;
                },
                set: function (value) {
                    if (Bridge.referenceEquals(value, this._label)) {
                        return;
                    }

                    this._label = value;
                }
            },
            Padding: {
                get: function () {
                    return this._padding;
                },
                set: function (value) {
                    if (value === this._padding) {
                        return;
                    }

                    this._padding = value;
                }
            },
            LocalBounds: {
                get: function () {
                    return this._LocalBounds;
                }
            },
            IsSelected: {
                get: function () {
                    return this._IsSelected;
                },
                set: function (value) {
                    if (value === this._IsSelected) {
                        return;
                    }

                    this._IsSelected = value;
                }
            },
            DragOffset: {
                get: function () {
                    return this._DragOffset;
                },
                set: function (value) {
                    this._DragOffset = value;
                }
            },
            Style: {
                get: function () {
                    return this._Style;
                },
                set: function (value) {
                    if (System.String.startsWith(value, "+") && !System.String.isNullOrEmpty(this._Style)) {
                        this._Style = System.String.concat(this._Style, (System.String.concat(", ", System.String.trimStart(value, [43]))));
                    } else {
                        this._Style = System.String.trimStart(value, [43]);
                    }
                }
            },
            IsUniversal: false
        },
        alias: [
            "Paint", "GraphicsLayer$IPaintable$Paint",
            "Hit", "Graphs$IHittable$Hit"
        ],
        ctors: {
            init: function () {
                this._DragOffset = GraphicsLayer.Box.Empty;
                this._padding = 0.02;
                this._LocalBounds = GraphicsLayer.Box.Empty;
                this._showIndex = false;
            },
            $ctor3: function (x, y) {
                Graphs.Vertex.$ctor4.call(this, x, y, "");
            },
            $ctor1: function (v) {
                Graphs.Vertex.$ctor2.call(this, v, "");
            },
            $ctor2: function (v, label) {
                Graphs.Vertex.$ctor4.call(this, v.X, v.Y, label);
            },
            $ctor4: function (x, y, label) {
                this.$initialize();
                this._Location = new Graphs.Vector(x, y);
                this._label = label;
            },
            ctor: function (v) {
                this.$initialize();
                this.Location = new Graphs.Vector(v.Location.X, v.Location.Y);
                this.Label = v.Label;
                this.Padding = v.Padding;
                this.Style = v.Style;
            }
        },
        methods: {
            Paint: function (g, width, height) {
                var bounds = this.ComputeBounds(g, width, height);

                if (!System.String.isNullOrEmpty(this._label)) {
                    if (Bridge.equals(this.Color, null)) {
                        if (this.IsUniversal) {
                            g.GraphicsLayer$IGraphics$FillEllipse(Graphs.Vertex.UniversalVertexFillBrushColor, bounds);
                        }
                    } else {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.Color, bounds);
                    }

                    g.GraphicsLayer$IGraphics$DrawEllipse(this._IsSelected ? Graphs.Vertex.BoundarySelectedPenColor : Graphs.Vertex.BoundaryPenColor, bounds, this._IsSelected ? Graphs.Vertex.BoundarySelectedPenWidth : 1);
                    g.GraphicsLayer$IGraphics$DrawString(this._label, Graphs.Vertex.LabelFont, Graphs.Vertex.LabelBrushColor, bounds);
                } else {
                    if (Bridge.equals(this.Color, null)) {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.IsUniversal ? Graphs.Vertex.UniversalVertexFillBrushColor : Graphs.Vertex.DefaultFillBrushColor, bounds);
                    } else {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.Color, bounds);
                    }


                    g.GraphicsLayer$IGraphics$DrawEllipse(this._IsSelected ? Graphs.Vertex.BoundarySelectedPenColor : Graphs.Vertex.BoundaryPenColor, bounds, this._IsSelected ? Graphs.Vertex.BoundarySelectedPenWidth : 1);
                }

                if (this._showIndex) {
                    var cx = (bounds.Left + bounds.Right) / 2;
                    var cy = (bounds.Bottom + bounds.Top) / 2;
                    var r = Math.max(bounds.Width, bounds.Height) / 2 + 5;
                    var bb = new GraphicsLayer.Box.$ctor1(cx + r * Math.cos(this.IndexAngle) - 5, cy + r * Math.sin(this.IndexAngle) - 5, 10, 10);
                    g.GraphicsLayer$IGraphics$DrawString(this.ParentIndex.toString(), Graphs.Vertex.IndexFont, Graphs.Vertex.IndexBrushColor, bb);
                }
            },
            Hit: function (x, y) {
                var hit = this._LocalBounds.Contains$1(x, y);
                return hit;
            },
            ComputeBounds: function (g, width, height) {
                var bounds;

                if (!System.String.isNullOrEmpty(this._label)) {
                    var size = g.GraphicsLayer$IGraphics$MeasureString(this._label, Graphs.Vertex.LabelFont);

                    bounds = new GraphicsLayer.Box.$ctor1(this.X * width - size.Width / 2, this.Y * height - size.Height / 2, size.Width, size.Height);
                } else {
                    bounds = new GraphicsLayer.Box.$ctor1(this.X * width, this.Y * height, 0, 0);
                }

                bounds.Inflate(this._padding * width, this._padding * height);

                this._LocalBounds = new GraphicsLayer.Box.$ctor1(bounds.X / width, bounds.Y / height, bounds.Width / width, bounds.Height / height);

                return bounds;
            },
            RotateIndex: function () {
                this.IndexAngle += 0.19634954084936207;
                if (this.IndexAngle >= 6.2831853071795862) {
                    this.IndexAngle = 0;
                }
            },
            ToggleIndex: function () {
                this._showIndex = !this._showIndex;
            }
        }
    });

    Bridge.define("Test.Graphics", {
        inherits: [GraphicsLayer.IGraphics],
        fields: {
            _canvas: null,
            _context: null
        },
        alias: [
            "Clear", "GraphicsLayer$IGraphics$Clear",
            "DrawLine", "GraphicsLayer$IGraphics$DrawLine",
            "DrawLine$1", "GraphicsLayer$IGraphics$DrawLine$1",
            "DrawLines", "GraphicsLayer$IGraphics$DrawLines",
            "FillPolygon", "GraphicsLayer$IGraphics$FillPolygon",
            "DrawEllipse", "GraphicsLayer$IGraphics$DrawEllipse",
            "FillEllipse", "GraphicsLayer$IGraphics$FillEllipse",
            "DrawString", "GraphicsLayer$IGraphics$DrawString",
            "MeasureString", "GraphicsLayer$IGraphics$MeasureString"
        ],
        ctors: {
            ctor: function (canvas) {
                this.$initialize();
                this._canvas = canvas;
                this._context = canvas.getContext("2d");
            }
        },
        methods: {
            Clear: function (argb) {
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.clearRect(0, 0, this._canvas.width, this._canvas.height);
                this._context.fillRect(0, 0, this._canvas.width, this._canvas.height);
            },
            DrawLine: function (argb, p1, p2, width) {
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.lineWidth = width;
                this._context.globalAlpha = Math.min(1.0, Math.max(0.0, argb.A / 255.0));
                this._context.beginPath();
                this._context.moveTo(p1.X, p1.Y);
                this._context.lineTo(p2.X, p2.Y);
                this._context.stroke();
            },
            DrawLine$1: function (argb, x1, y1, x2, y2, width) {
                if (width === void 0) { width = 1.0; }
                this.DrawLine(argb, new GraphicsLayer.Box.ctor(x1, y1), new GraphicsLayer.Box.ctor(x2, y2), width);
            },
            DrawLines: function (argb, points, width) {
                var $t;
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.lineWidth = width;
                this._context.beginPath();
                var first = true;
                $t = Bridge.getEnumerator(points, GraphicsLayer.Box);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (first) {
                            this._context.moveTo(b.X, b.Y);
                            first = false;
                        } else {
                            this._context.lineTo(b.X, b.Y);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }this._context.stroke();
            },
            FillPolygon: function (argb, points) {
                var $t;
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.beginPath();
                var first = true;
                $t = Bridge.getEnumerator(points, GraphicsLayer.Box);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (first) {
                            this._context.moveTo(b.X, b.Y);
                            first = false;
                        } else {
                            this._context.lineTo(b.X, b.Y);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }this._context.fill();
            },
            DrawEllipse: function (argb, bounds, width) {
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.beginPath();
                this._context.arc(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2, bounds.Width / 2, 0, 6.2831853071795862);
                this._context.stroke();
            },
            FillEllipse: function (argb, bounds) {
                this._context.beginPath();
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.arc(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2, bounds.Width / 2, 0, 6.2831853071795862);
                this._context.fill();
            },
            DrawString: function (s, font, argb, bounds) {
                this._context.font = System.String.concat(font.Name, " ", font.Size, "px");
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.strokeText(s, bounds.X, bounds.Y);
            },
            MeasureString: function (s, font) {
                this._context.font = System.String.concat(font.Name, " ", font.Size, "px");
                var metrics = this._context.measureText(s);

                return new GraphicsLayer.Box.$ctor1(0, 0, metrics.width, metrics.emHeightAscent + metrics.emHeightDescent);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer],
        props: {
            ChildReason: {
                get: function () {
                    return "goodness increased";
                }
            }
        },
        ctors: {
            ctor: function (findCleanestWin) {
                if (findCleanestWin === void 0) { findCleanestWin = true; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer.ctor.call(this, findCleanestWin);
            }
        },
        methods: {
            IsChildBoardBetter: function (knowledge, board, childBoard) {
                var x = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(childBoard.Stacks, childBoard.Pot)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Int32);
                var y = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Int32);

                return this.StandardDeviation(x) < this.StandardDeviation(y);
            },
            Mean: function (x) {
                return ((Bridge.Int.div(System.Linq.Enumerable.from(x).sum(), x.Count)) | 0);
            },
            Median: function (x) {
                return System.Linq.Enumerable.from(x).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f2).elementAt(((Bridge.Int.div(x.Count, 2)) | 0));
            },
            StandardDeviation: function (x) {
                var mu = this.Mean(x);

                return Math.sqrt(System.Linq.Enumerable.from(x).sum(function (a) {
                        return (a - mu) * (a - mu);
                    }) / x.Count);
            },
            AbsoluteDeviation: function (x) {
                var mu = this.Median(x);

                return System.Linq.Enumerable.from(x).sum(function (a) {
                        return Math.abs(mu - a);
                    });
            },
            PushLeftOrdering: function (knowledge, board, childBoard) {
                var x = this.GetVectors(childBoard);
                var y = this.GetVectors(board);

                for (var i = 0; i < Math.min(x.Count, y.Count); i = (i + 1) | 0) {
                    var c = this.CompareVectors(x.getItem(i), y.getItem(i));

                    if (c > 0) {
                        return true;
                    }
                    if (c < 0) {
                        return false;
                    }
                }

                return x.Count < y.Count;
            },
            GetVectors: function (b) {
                return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(b.Stacks, b.Pot)).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Collections.Generic.List$1(System.Int32));
            },
            CompareVectors: function (x, y) {
                if (x.Count > y.Count) {
                    return -1;
                }
                if (x.Count < y.Count) {
                    return 1;
                }

                for (var i = 0; i < x.Count; i = (i + 1) | 0) {
                    if (x.getItem(i) < y.getItem(i)) {
                        return 1;
                    }
                    if (x.getItem(i) > y.getItem(i)) {
                        return -1;
                    }
                }

                return 0;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer, {
        f1: function (c) {
            return c.Count;
        },
        f2: function (a) {
            return a;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder],
        statics: {
            methods: {
                BeginProof: function (sb) {
                    sb.appendLine("\\begin{proof}");
                },
                EndProof: function (sb) {
                    sb.appendLine("\\end{proof}");
                }
            }
        },
        fields: {
            _figureTikz: null,
            _maxPot: 0,
            _activeIndices: null,
            _activeListSizes: null,
            _possibleListIndices: null,
            _possibleLists: null,
            _allBoards: null,
            _sequenceComparer: null,
            _sequenceGeneralizer: null,
            _orderFilter: null,
            _isWin: false
        },
        props: {
            UseWildCards: false
        },
        ctors: {
            init: function () {
                this._orderFilter = new (System.Collections.Generic.Dictionary$2(System.String,System.String))();
            },
            ctor: function (mind, figureTikz, usePermutations) {
                if (figureTikz === void 0) { figureTikz = ""; }
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.ctor.call(this, mind, usePermutations);
                this._figureTikz = figureTikz;
                this._maxPot = mind.MaxPot;
                this.UseWildCards = true;
            }
        },
        methods: {
            WriteProof: function () {
                var $t, $t1, $t2, $t3;
                var sb = new System.Text.StringBuilder();

                this._isWin = System.Linq.Enumerable.from(this.Cases).all($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f1);

                this.AddFigure(sb);
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.BeginProof(sb);
                this.GeneratePossibleLists();
                this.GeneralizeAllBoards(sb);

                var wonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                for (var caseNumber = 1; caseNumber <= this.Cases.Count; caseNumber = (caseNumber + 1) | 0) {
                    var c = this.Cases.getItem(((caseNumber - 1) | 0));
                    var boards = System.Linq.Enumerable.from(c.Boards).orderBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f2)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                    var thisClaimBoards;
                    if (caseNumber > 1 && !c.BreakerWin) {
                        thisClaimBoards = System.Linq.Enumerable.from(boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f4)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    } else {
                        thisClaimBoards = boards;
                    }

                    if (!c.BreakerWin) {
                        wonBoards.addRange(thisClaimBoards);
                    }

                    var thisClaimBoardsTex = this.GeneralizeBoards(thisClaimBoards);

                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    sb.appendLine(System.String.format(System.String.concat("\\case{{{0}}}{{$B$ is one of the {1} following boards:\n ", thisClaimBoardsTex, ".}}"), Bridge.box(caseNumber, System.Int32), Bridge.box(thisClaimBoards.Count, System.Int32)));
                    sb.appendLine();
                    sb.appendLine("\\bigskip");

                    if (c.BreakerWin) {
                        sb.appendLine();

                        if (c.Superabundant) {
                            sb.appendLine("No single Kempe exchange gets from these boards to a previous case.");
                        } else {
                            sb.appendLine("These boards are not superabundant.");
                        }
                    } else if (caseNumber === 1) {
                        sb.appendLine();
                        sb.appendLine("In all these cases, $H$ is immediately colorable from the lists.");
                    } else {
                        sb.appendLine();

                        var swapCountGroups = System.Linq.Enumerable.from(boards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f6)).toList(System.Linq.Grouping$2);
                        $t = Bridge.getEnumerator(swapCountGroups);
                        try {
                            while ($t.moveNext()) {
                                var swapCountGroup = $t.Current;
                                if (swapCountGroup.key() === 1) {
                                    sb.appendLine("Each of the following boards can be handled by a single Kempe change that has an endpoint at infinity.");

                                    $t1 = Bridge.getEnumerator(swapCountGroup);
                                    try {
                                        while ($t1.moveNext()) {
                                            var b = $t1.Current;
                                            var pp = { };
                                            var listString = b.ToListStringInLexOrder(pp);

                                            var treeInfo = this.Mind.GetWinTreeInfo(b);
                                            var alpha = Math.min(pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Alpha), pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Beta));
                                            var beta = Math.max(pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Alpha), pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Beta));
                                            var groups = System.Linq.Enumerable.from(treeInfo).groupBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f7);

                                            if (!this.CheckPermutationGoodNess(alpha, beta, listString, System.Linq.Enumerable.from(treeInfo).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f7).distinct().toList(System.Int32))) {
                                                sb.appendLine();
                                                sb.appendLine("there is badness here");
                                                sb.appendLine();
                                            }

                                            sb.append(System.String.concat("$\\K_{" + alpha + "" + beta + ",\\infty}(", listString, ",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f8).select(Bridge.fn.bind(this, function (gg) {
                                                return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(gg.key(), b, this._maxPot) + 1) | 0);
                                            })), null), ")"));
                                            sb.appendLine(System.String.concat("\\Rightarrow $ ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f8).select(Bridge.fn.bind(this, function (gg) {
                                                return System.String.concat("$", this.GetChildBoardName(b, gg.first()), "$ (Case ", this.GetHandledCaseNumber(b, gg.first()), ")");
                                            })), null), "."));
                                            sb.appendLine();

                                            if (this._permutationLinked.get(b).Count > 0) {
                                                sb.appendLine();
                                                sb.appendLine();
                                                sb.appendLine(System.String.concat("Free by vertex permutation: ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f9)))));
                                                sb.appendLine();
                                                sb.appendLine();
                                            }

                                            sb.appendLine("\\bigskip");
                                            sb.appendLine();
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }} else if (swapCountGroup.key() === 2) {
                                    sb.appendLine("\\bigskip");
                                    sb.appendLine();
                                    sb.appendLine("Each of the following boards can be handled by a single Kempe change.");
                                    $t2 = Bridge.getEnumerator(swapCountGroup);
                                    try {
                                        while ($t2.moveNext()) {
                                            var b1 = $t2.Current;
                                            var pp1 = { };
                                            var listString1 = b1.ToListStringInLexOrder(pp1);

                                            var treeInfo1 = this.Mind.GetWinTreeInfo(b1);
                                            var alpha1 = Math.min(pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Alpha), pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Beta));
                                            var beta1 = Math.max(pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Alpha), pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Beta));
                                            var leftover = { v : System.Linq.Enumerable.from(treeInfo1).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo) };

                                            if (!this.CheckPermutationGoodNess(alpha1, beta1, listString1, System.Linq.Enumerable.from(treeInfo1).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f10).distinct().toList(System.Int32))) {
                                                sb.appendLine();
                                                sb.appendLine("there is badness here");
                                                sb.appendLine();
                                            }

                                            while (leftover.v.Count > 0) {
                                                var commonestSwapper = { v : Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.MaxIndex(System.Int32, System.Linq.Enumerable.range(0, b1._stackCount), (function ($me, leftover) {
                                                    return function (v) {
                                                        return System.Linq.Enumerable.from(leftover.v).count(function (bc) {
                                                                return bc.SwapVertices.contains(v);
                                                            });
                                                    };
                                                })(this, leftover)) };
                                                var handledAll = System.Linq.Enumerable.from(leftover.v).where((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.contains(commonestSwapper.v);
                                                        };
                                                    })(this, commonestSwapper)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);
                                                var handled = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Distinct(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo, System.Int32, handledAll, (function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper))).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);

                                                sb.append(System.String.concat("$\\K_{" + alpha1 + "" + beta1 + "," + (((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(commonestSwapper.v, b1, this._maxPot) + 1) | 0)) + "}(", listString1));

                                                var single = System.Linq.Enumerable.from(handled).firstOrDefault($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f11, null);
                                                if (single != null) {
                                                    sb.append(",\\infty");
                                                }

                                                if (System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f12).count() > 0) {
                                                    sb.append(System.String.concat(",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f12).orderBy((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper)).select((function ($me, commonestSwapper) {
                                                        return Bridge.fn.bind($me, function (bc) {
                                                            return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first(), b1, this._maxPot) + 1) | 0);
                                                        });
                                                    })(this, commonestSwapper)), null)));
                                                }
                                                sb.append(")");

                                                sb.appendLine(System.String.concat("\\Rightarrow $ ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(handled).orderBy((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper)).select(Bridge.fn.bind(this, function (bc) {
                                                    return System.String.concat("$", this.GetChildBoardName(b1, bc), "$ (Case ", this.GetHandledCaseNumber(b1, bc), ")");
                                                })), null), "."));
                                                sb.appendLine();

                                                $t3 = Bridge.getEnumerator(handledAll);
                                                try {
                                                    while ($t3.moveNext()) {
                                                        var bc = $t3.Current;
                                                        leftover.v.remove(bc);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t3, System.IDisposable)) {
                                                        $t3.System$IDisposable$dispose();
                                                    }
                                                }}

                                            if (this._permutationLinked.get(b1).Count > 0) {
                                                sb.appendLine();
                                                sb.appendLine();
                                                sb.appendLine(System.String.concat("Free by vertex permutation: ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b1)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f9)))));
                                                sb.appendLine();
                                                sb.appendLine();
                                            }

                                            sb.appendLine();
                                            sb.appendLine("\\bigskip");
                                            sb.appendLine();
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }}
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                }

                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.EndProof(sb);

                return sb.toString();
            },
            CheckPermutationGoodNess: function (alpha, beta, stacksString, swapVertices) {
                var $t;
                var stacks = System.Linq.Enumerable.from(System.String.split(stacksString, [124].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f14).toList(System.Collections.Generic.List$1(System.Int32));

                var colors = function (_o6) {
                        _o6.add(alpha);
                        _o6.add(beta);
                        return _o6;
                    }(new (System.Collections.Generic.List$1(System.Int32))());
                $t = Bridge.getEnumerator(swapVertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        if (Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, colors, stacks.getItem(v)) !== 1) {
                            debugger;
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            GetChildBoardName: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return childBoard.ToListStringInLexOrder$1(this._maxPot);
            },
            GeneralizeAllBoards: function (sb) {
                this._allBoards = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this.Mind.ColorableBoards, this.Mind.NonColorableBoards), this.Mind.BreakerWonBoards)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                this._sequenceComparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(System.Int32))();
                this._sequenceGeneralizer = new (Algorithms.Utility.SequenceGeneralizer$1(System.Int32))(this._activeIndices.Count, this._possibleListIndices);

                var allBoardsTex = this.GeneralizeBoards(this._allBoards);

                if (this.Mind.OnlyConsiderNearlyColorableBoards) {
                    sb.appendLine(System.String.concat("We need to handle all boards that are nearly colorable for edge $e$ up to permutation of colors, so it will suffice to handle the following " + this._allBoards.Count + " boards: ", allBoardsTex, "."));
                } else {
                    sb.appendLine(System.String.concat("We need to handle all boards up to permutation of colors, so it will suffice to handle the following " + this._allBoards.Count + " boards: ", allBoardsTex, "."));
                }

                if (this.Mind.BreakerWonBoards.Count > 0) {
                    sb.appendLine(System.String.concat("Unfortunately, the following " + this.Mind.BreakerWonBoards.Count + " boards cannot be handled: ", this.GeneralizeBoards(this.Mind.BreakerWonBoards), "."));
                }

                sb.appendLine();
            },
            GeneralizeBoards: function (boards) {
                if (this.UseWildCards) {
                    var examples = System.Linq.Enumerable.from(boards).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f15)).toList(System.Collections.Generic.List$1(System.Int32));
                    var nonExamples = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.repeat(this._possibleListIndices, this._activeIndices.Count))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f16).except(System.Linq.Enumerable.from(examples).distinct(this._sequenceComparer), this._sequenceComparer).toList(System.Collections.Generic.List$1(System.Int32));

                    var generalized = this._sequenceGeneralizer.Generalize(examples, nonExamples, false);
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f18)), "and");
                }

                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(boards).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f2)).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f19).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f20), "and");
            },
            ToListIndices: function (b) {
                var stacks = System.Linq.Enumerable.from(b.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f21).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f22)).toList(System.Collections.Generic.List$1(System.Int32));
                return System.Linq.Enumerable.from(stacks).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f23)).toList(System.Int32);
            },
            GeneratePossibleLists: function () {
                var stacks = System.Linq.Enumerable.from(this.Mind.ColorableBoards.getItem(0).Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f21).toList(System.Collections.Generic.List$1(System.Int32));
                this._activeIndices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), stacks, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f22))).toList(System.Int32);
                this._activeListSizes = System.Linq.Enumerable.from(stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f24).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f25)).toList(System.Int32);

                var pot = System.Linq.Enumerable.range(0, this._maxPot).toList(System.Int32);
                this._possibleLists = System.Linq.Enumerable.from(System.Linq.Enumerable.from(this._activeListSizes).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f26).toList(System.Int32)).selectMany(function (c) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, pot, c);
                    }).toList(System.Collections.Generic.List$1(System.Int32));
                this._possibleListIndices = System.Linq.Enumerable.range(0, this._possibleLists.Count).toList(System.Int32);
            },
            AddFigure: function (sb) {
                var figureID = System.String.concat("fig:", System.Guid.newGuid().toString());

                sb.appendLine("\\begin{figure}");
                sb.appendLine("\\centering");
                sb.appendLine(this._figureTikz);
                sb.appendLine(System.String.concat("\\caption{Vertices are ordered as labeled.}\\label{", figureID, "}"));
                sb.appendLine("\\end{figure}");

                sb.appendLine("\\begin{lem}");
                if (this._isWin) {
                    sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is reducible."));
                } else {
                    sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is not reducible."));
                }
                sb.appendLine("\\end{lem}");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder, {
        f1: function (c) {
            return !c.BreakerWin;
        },
        f2: function (b) {
            return b.ToListStringInLexOrder$1(this._maxPot);
        },
        f3: function (tup) {
            return tup.item2;
        },
        f4: function (b) {
            return System.Linq.Enumerable.from(System.Array.init([b], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f3));
        },
        f5: function (ti) {
            return ti.SwapVertices.Count;
        },
        f6: function (b) {
            return System.Linq.Enumerable.from(this.Mind.GetWinTreeInfo(b)).max($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f5);
        },
        f7: function (ss) {
            return ss.SwapVertices.getItem(0);
        },
        f8: function (gg) {
            return gg.key();
        },
        f9: function (ppp) {
            return System.String.concat("$", ppp.item1, "\\Rightarrow ", ppp.item2.ToListStringInLexOrder$1(this._maxPot), "$");
        },
        f10: function (ss) {
            return ss.SwapVertices;
        },
        f11: function (bc) {
            return bc.SwapVertices.Count === 1;
        },
        f12: function (bc) {
            return bc.SwapVertices.Count > 1;
        },
        f13: function (c) {
            return System.Int32.parse(String.fromCharCode(c));
        },
        f14: function (s) {
            return System.Linq.Enumerable.from(System.String.toCharArray(s, 0, s.length)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f13).toList(System.Int32);
        },
        f15: function (b) {
            return this.ToListIndices(b);
        },
        f16: function (ll) {
            return System.Linq.Enumerable.from(ll).toList(System.Int32);
        },
        f17: function (_, i) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.ToTex(_, this._possibleLists, this._activeListSizes.getItem(i));
        },
        f18: function (gg) {
            return System.String.concat("$", Bridge.toArray(System.Linq.Enumerable.from(gg).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f17))).join("|"), "$");
        },
        f19: function (x) {
            return x;
        },
        f20: function (s) {
            return System.String.concat("$", s, "$");
        },
        f21: function (l) {
            return Algorithms.Int64Usage.ToSet(l);
        },
        f22: function (s) {
            return s.Count < this._maxPot;
        },
        f23: function (s) {
            return Algorithms.GenericExtensions.FirstIndex(System.Collections.Generic.List$1(System.Int32), this._possibleLists, function (ss) {
                return System.Linq.Enumerable.from(ss).sequenceEqual(s);
            });
        },
        f24: function (s) {
            return s.Count;
        },
        f25: function (c) {
            return c < this._maxPot;
        },
        f26: function (c) {
            return c;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder],
        fields: {
            _figureTikz: null
        },
        ctors: {
            ctor: function (mind, figureTikz) {
                if (figureTikz === void 0) { figureTikz = ""; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.ctor.call(this, mind);
                this._figureTikz = figureTikz;
            }
        },
        methods: {
            WriteProof: function () {
                var $t, $t1, $t2, $t3, $t4;
                var length = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(this.Mind.ColorableBoards.getItem(0)).length;
                var allBoards = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this.Mind.ColorableBoards, this.Mind.NonColorableBoards)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                var comparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(System.Int32))();
                var sg = new (Algorithms.Utility.SequenceGeneralizer$1(System.Int32))(length, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f1(new (System.Collections.Generic.List$1(System.Int32))()));

                var zot2 = System.Linq.Enumerable.from(allBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                var examples2 = System.Linq.Enumerable.from(allBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));

                var nonExamples2 = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Int32, System.Linq.Enumerable.repeat(System.Linq.Enumerable.range(0, 3), length))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f3).except(System.Linq.Enumerable.from(zot2).distinct(comparer), comparer).toList(System.Collections.Generic.List$1(System.Int32));

                var generalized2 = sg.Generalize(examples2, nonExamples2, false);
                var allBoardsXYZ = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized2).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f5), "or");

                var sb = new System.Text.StringBuilder();
                var figureID = System.String.concat("fig:", System.Guid.newGuid().toString());

                sb.appendLine("\\begin{figure}");
                sb.appendLine("\\centering");
                sb.appendLine(this._figureTikz);
                sb.appendLine(System.String.concat("\\caption{Solid vertices have lists of size 3 and the labeled vertices have lists of size 2.}\\label{", figureID, "}"));
                sb.appendLine("\\end{figure}");

                sb.appendLine("\\begin{lem}");
                sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is reducible."));
                sb.appendLine("\\end{lem}");

                var letters = $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f6(new (System.Collections.Generic.List$1(System.String))());
                var stringLength = System.Linq.Enumerable.from(this.Mind.ColorableBoards.getItem(0).Stacks.Value).count($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f7);
                var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                var randomString = "";
                for (var i = 0; i < stringLength; i = (i + 1) | 0) {
                    randomString = System.String.concat(randomString, letters.getItem(rng.next$1(3)));
                }

                var randomString2 = "";
                for (var i1 = 0; i1 < stringLength; i1 = (i1 + 1) | 0) {
                    randomString2 = System.String.concat(randomString2, letters.getItem(rng.next$1(3)));
                }

                var randomString3 = "";
                for (var i2 = 0; i2 < stringLength; i2 = (i2 + 1) | 0) {
                    randomString3 = System.String.concat(randomString3, letters.getItem(rng.next$1(3)));
                }

                sb.append("\\begin{proof}");
                sb.appendLine(System.String.concat("Let $X = \\{0,1\\}$, $Y = \\{0,2\\}$ and $Z = \\{1,2\\}$. Then with the vertex ordering in Figure \\ref{", figureID, "}, a string such as ", randomString, ", "));
                sb.appendLine("represents a possible list assignment on $V(H)$ arising from a $3$-edge-coloring of $G-E(H)$.");
                sb.appendLine("By an $X$-Kempe change, we mean flipping colors $0$ and $1$ on a two-colored path in $G-E(H)$.  We call such a path an $X$-path. ");
                sb.appendLine("Any endpoint of an $X$-path in $H$ must end at a $Y$ or $Z$ vertex.  The meanings of $Y$-Kempe change, $Z$-Kempe change, $Y$-path and $Z$-path are analogous.");
                sb.appendLine("Note that if there are an odd number of $Y$'s and $Z$'s, then at least one $X$-path has only one endpoint in $H$.");
                sb.appendLine(System.String.concat("We use shorthand notation like $\\K_{X, 2}(", randomString, ",5,6) \\Rightarrow ", randomString2, ",", randomString3, "$ (Case 1)."));
                sb.appendLine(System.String.concat("This means the $X$-Kempe change on ", randomString, " starting at the second vertex and ending at the fifth and sixth result in boards ", randomString2, " and ", randomString3, " respectively and these are handled by Case 1."));
                sb.appendLine("The $\\infty$ symbol means starting (or ending) outside $H$.");
                sb.appendLine();

                if (this.Mind.OnlyConsiderNearlyColorableBoards) {
                    sb.appendLine(System.String.concat("We need to handle all boards that are nearly colorable for edge $e$ up to permutations of $\\{X,Y,Z\\}$, so it will suffice to handle all boards of the form ", allBoardsXYZ, "."));
                } else {
                    sb.appendLine(System.String.concat("We need to handle all boards up to permutations of $\\{X,Y,Z\\}$, so it will suffice to handle all boards of the form ", allBoardsXYZ, "."));
                }

                sb.appendLine();
                var wonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                for (var caseNumber = 1; caseNumber <= this.Cases.Count; caseNumber = (caseNumber + 1) | 0) {
                    var c = this.Cases.getItem(((caseNumber - 1) | 0));

                    var boards = c.Boards;
                    var thisClaimBoards;
                    if (caseNumber > 1) {
                        thisClaimBoards = System.Linq.Enumerable.from(boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f9)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    } else {
                        thisClaimBoards = boards;
                    }

                    wonBoards.addRange(thisClaimBoards);

                    var zot = System.Linq.Enumerable.from(thisClaimBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                    var examples = System.Linq.Enumerable.from(thisClaimBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                    var nonExamples = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Int32, System.Linq.Enumerable.repeat(System.Linq.Enumerable.range(0, 3), length))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f3).except(System.Linq.Enumerable.from(zot).distinct(comparer), comparer).toList(System.Collections.Generic.List$1(System.Int32));

                    var generalized = sg.Generalize(examples, nonExamples);
                    var boardsXYZ = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f5), "or");

                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    sb.appendLine(System.String.format(System.String.concat("\\case{{{0}}}{{$B$ is one of ", boardsXYZ, ".}}"), Bridge.box(caseNumber, System.Int32)));
                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    if (caseNumber === 1) {
                        sb.appendLine();
                        sb.appendLine("In all these cases, $H$ is immediately colorable from the lists.");
                    } else {
                        sb.appendLine();
                        var fixGroups = System.Linq.Enumerable.from(boards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f10));

                        $t = Bridge.getEnumerator(fixGroups);
                        try {
                            while ($t.moveNext()) {
                                var fixGroup = $t.Current;
                                var others = System.Linq.Enumerable.from(letters).toList(System.String);
                                others.remove(fixGroup.key());

                                var swapCountGroups = fixGroup.groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f12)).toList(System.Linq.Grouping$2);
                                $t1 = Bridge.getEnumerator(swapCountGroups);
                                try {
                                    while ($t1.moveNext()) {
                                        var swapCountGroup = $t1.Current;
                                        if (swapCountGroup.key() === 1) {
                                            $t2 = Bridge.getEnumerator(swapCountGroup);
                                            try {
                                                while ($t2.moveNext()) {
                                                    var b = $t2.Current;
                                                    var treeInfo = this.Mind.GetWinTreeInfo(b);
                                                    var groups = System.Linq.Enumerable.from(treeInfo).groupBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f13);

                                                    sb.append(System.String.concat("$\\K_{", fixGroup.key(), ",\\infty}(", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(b), ",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f14).select(function (gg) {
                                                        return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(gg.key(), b) + 1) | 0);
                                                    }), null), ")"));
                                                    sb.appendLine(System.String.concat("\\Rightarrow $", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f14).select(Bridge.fn.bind(this, function (gg) {
                                                        return System.String.concat("$", this.GetChildBoardName(b, gg.first()), "$");
                                                    })), null), "( Case ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(treeInfo).select(Bridge.fn.bind(this, function (bc) {
                                                            return this.GetHandledCaseNumber(b, bc);
                                                        })).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f15)), ")."));
                                                    sb.appendLine();

                                                    if (this._permutationLinked.get(b).Count > 0) {
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                        sb.appendLine(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f16)));
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }} else if (swapCountGroup.key() === 2) {
                                            $t3 = Bridge.getEnumerator(swapCountGroup);
                                            try {
                                                while ($t3.moveNext()) {
                                                    var b1 = $t3.Current;
                                                    var treeInfo1 = this.Mind.GetWinTreeInfo(b1);
                                                    var leftover = { v : System.Linq.Enumerable.from(treeInfo1).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo) };

                                                    while (leftover.v.Count > 0) {
                                                        var commonestSwapper = { v : Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.MaxIndex(System.Int32, System.Linq.Enumerable.range(0, b1._stackCount), (function ($me, leftover) {
                                                            return function (v) {
                                                                return System.Linq.Enumerable.from(leftover.v).count(function (bc) {
                                                                        return bc.SwapVertices.contains(v);
                                                                    });
                                                            };
                                                        })(this, leftover)) };
                                                        var handledAll = System.Linq.Enumerable.from(leftover.v).where((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.contains(commonestSwapper.v);
                                                                };
                                                            })(this, commonestSwapper)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);
                                                        var handled = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Distinct(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo, System.Int32, handledAll, (function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper))).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);

                                                        sb.append(System.String.concat("$\\K_{", fixGroup.key(), ",", (((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(commonestSwapper.v, b1) + 1) | 0)), "}(", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(b1)));

                                                        var single = System.Linq.Enumerable.from(handled).firstOrDefault($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f17, null);
                                                        if (single != null) {
                                                            sb.append(",\\infty");
                                                        }

                                                        if (System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f18).count() > 0) {
                                                            sb.append(System.String.concat(",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f18).orderBy((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper)).select((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first(), b1) + 1) | 0);
                                                                };
                                                            })(this, commonestSwapper)), null)));
                                                        }
                                                        sb.append(")");

                                                        sb.appendLine(System.String.concat("\\Rightarrow $", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(handled).orderBy((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper)).select(Bridge.fn.bind(this, function (bc) {
                                                            return System.String.concat("$", this.GetChildBoardName(b1, bc), "$");
                                                        })), null), "(Case ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).select(Bridge.fn.bind(this, function (bc) {
                                                                return this.GetHandledCaseNumber(b1, bc);
                                                            })).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f15)), ")."));
                                                        sb.appendLine();

                                                        $t4 = Bridge.getEnumerator(handledAll);
                                                        try {
                                                            while ($t4.moveNext()) {
                                                                var bc = $t4.Current;
                                                                leftover.v.remove(bc);
                                                            }
                                                        } finally {
                                                            if (Bridge.is($t4, System.IDisposable)) {
                                                                $t4.System$IDisposable$dispose();
                                                            }
                                                        }}

                                                    if (this._permutationLinked.get(b1).Count > 0) {
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                        sb.appendLine(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b1)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f16)));
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t3, System.IDisposable)) {
                                                    $t3.System$IDisposable$dispose();
                                                }
                                            }}
                                    }
                                } finally {
                                    if (Bridge.is($t1, System.IDisposable)) {
                                        $t1.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    sb.appendLine();
                }

                sb.appendLine("\\end{proof}");
                return sb.toString();
            },
            GetChildBoardName: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(childBoard);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder, {
        f1: function (_o7) {
            _o7.add(0);
            _o7.add(1);
            _o7.add(2);
            return _o7;
        },
        f2: function (b) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.To012(b);
        },
        f3: function (ll) {
            return System.Linq.Enumerable.from(ll).toList(System.Int32);
        },
        f4: function (_) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToTex(_);
        },
        f5: function (gg) {
            return System.String.concat("$", Bridge.toArray(System.Linq.Enumerable.from(gg).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f4)).join(""), "$");
        },
        f6: function (_o8) {
            _o8.add("X");
            _o8.add("Y");
            _o8.add("Z");
            return _o8;
        },
        f7: function (ss) {
            return Algorithms.Int64Usage.PopulationCount(ss) === 2;
        },
        f8: function (tup) {
            return tup.item2;
        },
        f9: function (b) {
            return System.Linq.Enumerable.from(System.Array.init([b], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f8));
        },
        f10: function (b) {
            var treeInfo = this.Mind.GetWinTreeInfo(b);
            var fixLetter = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1(System.Int64((1 << System.Linq.Enumerable.from(treeInfo).first().Alpha) | (1 << System.Linq.Enumerable.from(treeInfo).first().Beta)));

            return fixLetter;
        },
        f11: function (ti) {
            return ti.SwapVertices.Count;
        },
        f12: function (b) {
            return System.Linq.Enumerable.from(this.Mind.GetWinTreeInfo(b)).max($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f11);
        },
        f13: function (ss) {
            return ss.SwapVertices.getItem(0);
        },
        f14: function (gg) {
            return gg.key();
        },
        f15: function (xx) {
            return xx;
        },
        f16: function (ppp) {
            return System.String.concat("$", ppp.item1, "\\Rightarrow ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(ppp.item2), "$");
        },
        f17: function (bc) {
            return bc.SwapVertices.Count === 1;
        },
        f18: function (bc) {
            return bc.SwapVertices.Count > 1;
        }
    });

    Bridge.define("Test.TabCanvas", {
        inherits: [GraphicsLayer.ICanvas],
        statics: {
            fields: {
                Colors: null
            },
            ctors: {
                init: function () {
                    this.Colors = $asm.$.Test.TabCanvas.f1(new (System.Collections.Generic.List$1(GraphicsLayer.ARGB))());
                }
            },
            methods: {
                ExtractPoints: function (x) {
                    return new (Bridge.GeneratorEnumerable$1(Graphs.Vector))(Bridge.fn.bind(this, function (x) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            j,
                            p,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Graphs.Vector))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 0;
                                                
                                            $step = 1;
                                            continue;
                                        }
                                        case 1: {
                                            if ( true ) {
                                                    $step = 2;
                                                    continue;
                                                } 
                                                $step = 4;
                                                continue;
                                        }
                                        case 2: {
                                            j = System.String.indexOf(x, "[", i);
                                                if (j < 0) {
                                                    j = System.String.indexOf(x, "(", i);
                                                    if (j < 0) {
                                                        $step = 4;
                                                        continue;
                                                    }
                                                }
                                                i = j;

                                                j = System.String.indexOf(x, "]", i);
                                                if (j < 0) {
                                                    j = System.String.indexOf(x, ")", i);
                                                    if (j < 0) {
                                                        $step = 4;
                                                        continue;
                                                    }
                                                }
                                                p = System.String.split(x.substr(i, ((j - i) | 0)), [44].map(function(i) {{ return String.fromCharCode(i); }}));
                                                $enumerator.current = new Graphs.Vector(System.Double.parse(System.String.trim(p[System.Array.index(0, p)], [91, 93, 40, 41])), System.Double.parse(System.String.trim(p[System.Array.index(1, p)], [91, 93, 40, 41])));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            i = j;

                                                $step = 1;
                                                continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                ParseAdjacencyMatrix: function (a) {
                    var $t;
                    var bits = System.String.split(System.String.replaceAll(a, "'", ""), System.Array.init([",", "\\\\n", "[", "]", " "], System.String), null, 1);
                    var n = Bridge.Int.clip32(Math.sqrt(bits.length));
                    var adj = System.Array.create(false, null, System.Boolean, n, n);

                    var i = 0;
                    $t = Bridge.getEnumerator(bits);
                    try {
                        while ($t.moveNext()) {
                            var b = $t.Current;
                            adj.set([((Bridge.Int.div(i, n)) | 0), i % n], Bridge.referenceEquals(b, "1"));
                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return adj;
                }
            }
        },
        fields: {
            _ctrlDown: false,
            _title: null
        },
        events: {
            MouseMoved: null,
            MouseButtonUp: null,
            MouseButtonDown: null,
            MouseButtonDoubleClicked: null
        },
        props: {
            Canvas: null,
            GraphCanvas: null,
            IsControlKeyDown: {
                get: function () {
                    return this._ctrlDown;
                }
            },
            SelectedObjects: {
                set: function (value) { }
            },
            Title: {
                get: function () {
                    return this._title;
                },
                set: function (value) {
                    this._title = value;
                    this.Invalidate();
                }
            }
        },
        alias: [
            "SetClipboardText", "GraphicsLayer$ICanvas$SetClipboardText",
            "GetClipboardText", "GraphicsLayer$ICanvas$GetClipboardText",
            "IsControlKeyDown", "GraphicsLayer$ICanvas$IsControlKeyDown",
            "SelectedObjects", "GraphicsLayer$ICanvas$SelectedObjects",
            "Invalidate", "GraphicsLayer$ICanvas$Invalidate",
            "Title", "GraphicsLayer$ICanvas$Title",
            "addMouseMoved", "GraphicsLayer$IProduceMouseEvents$addMouseMoved",
            "removeMouseMoved", "GraphicsLayer$IProduceMouseEvents$removeMouseMoved",
            "addMouseButtonUp", "GraphicsLayer$IProduceMouseEvents$addMouseButtonUp",
            "removeMouseButtonUp", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonUp",
            "addMouseButtonDown", "GraphicsLayer$IProduceMouseEvents$addMouseButtonDown",
            "removeMouseButtonDown", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonDown",
            "addMouseButtonDoubleClicked", "GraphicsLayer$IProduceMouseEvents$addMouseButtonDoubleClicked",
            "removeMouseButtonDoubleClicked", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonDoubleClicked"
        ],
        ctors: {
            ctor: function (canvas, graphCanvas) {
                this.$initialize();
                this.GraphCanvas = graphCanvas;
                this.Canvas = canvas;
                this.GraphCanvas.Canvas = this;

                this.Canvas.ondblclick = Bridge.fn.combine(this.Canvas.ondblclick, Bridge.fn.cacheBind(this, this.OnMouseDoubleClick));
                this.Canvas.onmousedown = Bridge.fn.combine(this.Canvas.onmousedown, Bridge.fn.cacheBind(this, this.OnMouseButtonDown));
                this.Canvas.onmouseup = Bridge.fn.combine(this.Canvas.onmouseup, Bridge.fn.cacheBind(this, this.OnMouseButtonUp));
                this.Canvas.onmousemove = Bridge.fn.combine(this.Canvas.onmousemove, Bridge.fn.cacheBind(this, this.OnMouseMove));

                this.Canvas.ontouchcancel = Bridge.fn.combine(this.Canvas.ontouchcancel, Bridge.fn.cacheBind(this, this.OnTouchCancel));
                this.Canvas.ontouchend = Bridge.fn.combine(this.Canvas.ontouchend, Bridge.fn.cacheBind(this, this.OnTouchEnd));
                this.Canvas.ontouchenter = Bridge.fn.combine(this.Canvas.ontouchenter, Bridge.fn.cacheBind(this, this.OnTouchEnter));
                this.Canvas.ontouchleave = Bridge.fn.combine(this.Canvas.ontouchleave, Bridge.fn.cacheBind(this, this.OnTouchLeave));
                this.Canvas.ontouchmove = Bridge.fn.combine(this.Canvas.ontouchmove, Bridge.fn.cacheBind(this, this.OnTouchMove));
                this.Canvas.ontouchstart = Bridge.fn.combine(this.Canvas.ontouchstart, Bridge.fn.cacheBind(this, this.OnTouchStart));

                this.Canvas.onload = Bridge.fn.cacheBind(this, this.OnLoad);

                this.GraphCanvas.addGraphModified(Bridge.fn.cacheBind(this, this.OnGraphModified));
                this.GraphCanvas.addNameModified(Bridge.fn.cacheBind(this, this.OnNameModified));
            }
        },
        methods: {
            OnLayoutChange: function () {
                this.Canvas.width = window.innerWidth;
                this.Canvas.height = window.innerHeight;
                this.Invalidate();
            },
            OnNameModified: function (name) {
                this.Title = name;
            },
            OnTouchCancel: function (e) { },
            OnTouchEnd: function (e) {
                if (!Bridge.staticEquals(this.MouseButtonUp, null)) {
                    this.MouseButtonUp(e.layerX, e.layerY, GraphicsLayer.MouseButton.Left);
                }
            },
            OnTouchEnter: function (e) { },
            OnTouchLeave: function (e) { },
            OnTouchMove: function (e) {
                if (!Bridge.staticEquals(this.MouseMoved, null)) {
                    this.MouseMoved(e.layerX, e.layerY);
                }
            },
            OnTouchStart: function (e) {
                if (!Bridge.staticEquals(this.MouseButtonDown, null)) {
                    this.MouseButtonDown(e.layerX, e.layerY, GraphicsLayer.MouseButton.Left);
                }
            },
            SageManual: function () {
                Test.App.AskSage(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n'));
            },
            SageChromaticPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_polynomial()"));
            },
            SageGraph6: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graph6_string()"));
            },
            SageSparse6: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.sparse6_string()"));
            },
            SageChromaticNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_number()"));
            },
            SageChromaticQuasisymmetricFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_quasisymmetric_function()"));
            },
            SageChromaticSymmetricFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_symmetric_function()"));
            },
            SageColoring: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    i, 
                    $t, 
                    v, 
                    c, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.coloring()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(coloring, System.Array.init(["],"], System.String), null, 1)).select($asm.$.Test.TabCanvas.f3).toList(System.Collections.Generic.List$1(System.Int32));

                                    i = 0;
                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            c = Algorithms.GenericExtensions.FirstIndex(System.Collections.Generic.List$1(System.Int32), cc, function (l) {
                                                return l.contains(i);
                                            });
                                            v.Color = Test.TabCanvas.Colors.getItem(c % Test.TabCanvas.Colors.Count);
                                            i = (i + 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageConvexityProperties: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.convexity_properties()"));
            },
            SageHasHomomorphismTo: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_homomorphism_to()"));
            },
            SageIndependentSet: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.independent_set()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageIndependentSetOfRepresentatives: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.independent_set_of_representatives()"));
            },
            SageIsPerfect: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_perfect()"));
            },
            SageMatchingPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.matching_polynomial()"));
            },
            SageMinor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.minor()"));
            },
            SagePathwidth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.pathwidth()"));
            },
            SageRankDecomposition: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.rank_decomposition()"));
            },
            SageTopologicalMinor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.topological_minor()"));
            },
            SageTreewidth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.treewidth()"));
            },
            SageTuttePolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.tutte_polynomial()"));
            },
            SageVertexCover: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.vertex_cover()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageBipartiteColor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bipartite_color()"));
            },
            SageBipartiteSets: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bipartite_sets()"));
            },
            SageGraph6String: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graph6_string()"));
            },
            SageIsDirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_directed()"));
            },
            SageJoin: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.join()"));
            },
            SageSparse6String: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.sparse6_string()"));
            },
            SageToDirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_directed()"));
            },
            SageToUndirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_undirected()"));
            },
            SageWriteToEps: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.write_to_eps()"));
            },
            SageCliqueComplex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_complex()"));
            },
            SageCliqueMaximum: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.clique_maximum()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageCliqueNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_number()"));
            },
            SageCliquePolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_polynomial()"));
            },
            SageCliquesContainingVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_containing_vertex()"));
            },
            SageCliquesGetCliqueBipartite: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_get_clique_bipartite()"));
            },
            SageCliquesGetMaxCliqueGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_get_max_clique_graph()"));
            },
            SageCliquesMaximal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_maximal()"));
            },
            SageCliquesMaximum: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_maximum()"));
            },
            SageCliquesNumberOf: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_number_of()"));
            },
            SageCliquesVertexCliqueNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_vertex_clique_number()"));
            },
            SageBoundedOutdegreeOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bounded_outdegree_orientation()"));
            },
            SageBridges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bridges()"));
            },
            SageDegreeConstrainedSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_constrained_subgraph()"));
            },
            SageGomoryHuTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.gomory_hu_tree().plot()"));
            },
            SageMinimumOutdegreeOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.minimum_outdegree_orientation()"));
            },
            SageOrientations: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.orientations()"));
            },
            SageRandomSpanningTree: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    edges, 
                    ee, 
                    $t, 
                    v, 
                    $t1, 
                    e, 
                    $t2, 
                    e1, 
                    v1, 
                    v2, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.random_spanning_tree()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    edges = $taskResult1;
                                    ee = System.Linq.Enumerable.from(System.String.split(edges, System.Array.init(["),"], System.String), null, 1)).select($asm.$.Test.TabCanvas.f4).toList(System.Collections.Generic.List$1(System.Int32));

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(this.GraphCanvas.Graph.Edges);
                                    try {
                                        while ($t1.moveNext()) {
                                            e = $t1.Current;
                                            e.Color = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    $t2 = Bridge.getEnumerator(ee);
                                    try {
                                        while ($t2.moveNext()) {
                                            e1 = $t2.Current;
                                            v1 = { v : this.GraphCanvas.Graph.Vertices.getItem(e1.getItem(0)) };
                                            v2 = { v : this.GraphCanvas.Graph.Vertices.getItem(e1.getItem(1)) };
                                            System.Linq.Enumerable.from(this.GraphCanvas.Graph.Edges).first((function ($me, v1, v2) {
                                                return function (x) {
                                                    return Bridge.referenceEquals(x.V1, v1.v) && Bridge.referenceEquals(x.V2, v2.v) || Bridge.referenceEquals(x.V1, v2.v) && Bridge.referenceEquals(x.V2, v1.v);
                                                };
                                            })(this, v1, v2)).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageSpanningTrees: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spanning_trees()"));
            },
            SageStrongOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.strong_orientation()"));
            },
            SageApexVertices: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.apex_vertices()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageIsApex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_apex()"));
            },
            SageIsArcTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_arc_transitive()"));
            },
            SageIsAsteroidalTripleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_asteroidal_triple_free()"));
            },
            SageIsBiconnected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_biconnected()"));
            },
            SageIsBipartite: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_bipartite()"));
            },
            SageIsBlockGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_block_graph()"));
            },
            SageIsCartesianProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cartesian_product()"));
            },
            SageIsDistanceRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_distance_regular()"));
            },
            SageIsEdgeTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_edge_transitive()"));
            },
            SageIsEvenHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_even_hole_free()"));
            },
            SageIsForest: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_forest()"));
            },
            SageIsHalfTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_half_transitive()"));
            },
            SageIsLineGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_line_graph()"));
            },
            SageIsLongAntiholeFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_long_antihole_free()"));
            },
            SageIsLongHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_long_hole_free()"));
            },
            SageIsOddHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_odd_hole_free()"));
            },
            SageIsOverfull: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_overfull()"));
            },
            SageIsPartialCube: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_partial_cube()"));
            },
            SageIsPrime: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_prime()"));
            },
            SageIsSemiSymmetric: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_semi_symmetric()"));
            },
            SageIsSplit: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_split()"));
            },
            SageIsStronglyRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_strongly_regular()"));
            },
            SageIsTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_tree()"));
            },
            SageIsTriangleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_triangle_free()"));
            },
            SageIsWeaklyChordal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_weakly_chordal()"));
            },
            SageOddGirth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.odd_girth()"));
            },
            SageCores: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cores()"));
            },
            SageFractionalChromaticIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.fractional_chromatic_index()"));
            },
            SageHasPerfectMatching: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_perfect_matching()"));
            },
            SageIharaZetaFunctionInverse: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.ihara_zeta_function_inverse()"));
            },
            SageKirchhoffSymanzikPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.kirchhoff_symanzik_polynomial()"));
            },
            SageLovaszTheta: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lovasz_theta()"));
            },
            SageMagnitudeFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.magnitude_function()"));
            },
            SageMatching: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.matching()"));
            },
            SageMaximumAverageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.maximum_average_degree()"));
            },
            SageModularDecomposition: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.modular_decomposition()"));
            },
            SagePerfectMatchings: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.perfect_matchings()"));
            },
            SageSeidelAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.seidel_adjacency_matrix()"));
            },
            SageNetworkxGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.networkx_graph()"));
            },
            SageIgraphGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.igraph_graph()"));
            },
            SageToDictionary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_dictionary()"));
            },
            SageCopy: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.copy()"));
            },
            SageExportToFile: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.export_to_file()"));
            },
            SageAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.adjacency_matrix()"));
            },
            SageIncidenceMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.incidence_matrix()"));
            },
            SageDistanceMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_matrix()"));
            },
            SageWeightedAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.weighted_adjacency_matrix()"));
            },
            SageKirchhoffMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.kirchhoff_matrix()"));
            },
            SageHasLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_loops()"));
            },
            SageAllowsLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allows_loops()"));
            },
            SageAllowLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allow_loops()"));
            },
            SageLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loops()"));
            },
            SageLoopEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loop_edges()"));
            },
            SageNumberOfLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.number_of_loops()"));
            },
            SageLoopVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loop_vertices()"));
            },
            SageRemoveLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.remove_loops()"));
            },
            SageHasMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_multiple_edges()"));
            },
            SageAllowsMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allows_multiple_edges()"));
            },
            SageAllowMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allow_multiple_edges()"));
            },
            SageMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multiple_edges()"));
            },
            SageName: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.name()"));
            },
            SageIsImmutable: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_immutable()"));
            },
            SageWeighted: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.weighted()"));
            },
            SageAntisymmetric: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.antisymmetric()"));
            },
            SageDensity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.density()"));
            },
            SageOrder: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.order()"));
            },
            SageSize: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.size()"));
            },
            SageAddVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_vertex()"));
            },
            SageAddVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_vertices()"));
            },
            SageDeleteVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_vertex()"));
            },
            SageDeleteVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_vertices()"));
            },
            SageHasVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_vertex()"));
            },
            SageRandomVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_vertex()"));
            },
            SageRandomVertexIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_vertex_iterator()"));
            },
            SageRandomEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_edge()"));
            },
            SageRandomEdgeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_edge_iterator()"));
            },
            SageVertexBoundary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_boundary()"));
            },
            SageSetVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_vertices()"));
            },
            SageSetVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_vertex()"));
            },
            SageGetVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_vertex()"));
            },
            SageGetVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_vertices()"));
            },
            SageVertexIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_iterator()"));
            },
            SageNeighborIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.neighbor_iterator()"));
            },
            SageVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertices()"));
            },
            SageNeighbors: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.neighbors()"));
            },
            SageMergeVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.merge_vertices()"));
            },
            SageAddEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_edge()"));
            },
            SageAddEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_edges()"));
            },
            SageSubdivideEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subdivide_edge()"));
            },
            SageSubdivideEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subdivide_edges()"));
            },
            SageDeleteEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_edge()"));
            },
            SageDeleteEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_edges()"));
            },
            SageDeleteMultiedge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_multiedge()"));
            },
            SageSetEdgeLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_edge_label()"));
            },
            SageHasEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_edge()"));
            },
            SageEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edges()"));
            },
            SageEdgeBoundary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_boundary()"));
            },
            SageEdgeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_iterator()"));
            },
            SageEdgesIncident: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edges_incident()"));
            },
            SageEdgeLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_label()"));
            },
            SageEdgeLabels: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_labels()"));
            },
            SageRemoveMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.remove_multiple_edges()"));
            },
            SageClear: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clear()"));
            },
            SageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree()"));
            },
            SageAverageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.average_degree()"));
            },
            SageDegreeHistogram: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_histogram()"));
            },
            SageDegreeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_iterator()"));
            },
            SageDegreeSequence: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_sequence()"));
            },
            SageRandomSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_subgraph()"));
            },
            SageAddClique: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_clique()"));
            },
            SageAddCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_cycle()"));
            },
            SageAddPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_path()"));
            },
            SageComplement: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.complement()"));
            },
            SageLineGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.line_graph()"));
            },
            SageToSimple: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_simple()"));
            },
            SageDisjointUnion: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjoint_union()"));
            },
            SageUnion: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.union()"));
            },
            SageRelabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.relabel()"));
            },
            SageDegreeToCell: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_to_cell()"));
            },
            SageSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph()"));
            },
            SageIsSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_subgraph()"));
            },
            SageCartesianProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cartesian_product()"));
            },
            SageTensorProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.tensor_product()"));
            },
            SageLexicographicProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lexicographic_product()"));
            },
            SageStrongProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.strong_product()"));
            },
            SageDisjunctiveProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjunctive_product()"));
            },
            SageEulerianOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eulerian_orientation()"));
            },
            SageEulerianCircuit: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eulerian_circuit()"));
            },
            SageCycleBasis: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cycle_basis()"));
            },
            SageAllPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.all_paths()"));
            },
            SageTrianglesCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.triangles_count()"));
            },
            SageSpectrum: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spectrum()"));
            },
            SageEigenvectors: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eigenvectors()"));
            },
            SageEigenspaces: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eigenspaces()"));
            },
            SageClusterTriangles: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cluster_triangles()"));
            },
            SageClusteringAverage: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clustering_average()"));
            },
            SageClusteringCoeff: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clustering_coeff()"));
            },
            SageClusterTransitivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cluster_transitivity()"));
            },
            SageSzegedIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.szeged_index()"));
            },
            SageCoarsestEquitableRefinement: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.coarsest_equitable_refinement()"));
            },
            SageAutomorphismGroup: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.automorphism_group()"));
            },
            SageIsVertexTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_vertex_transitive()"));
            },
            SageIsIsomorphic: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_isomorphic()"));
            },
            SageCanonicalLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.canonical_label().plot()"));
            },
            SageIsCayley: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cayley()"));
            },
            SageIsEulerian: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_eulerian()"));
            },
            SageIsPlanar: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_planar()"));
            },
            SageIsCircularPlanar: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_circular_planar()"));
            },
            SageIsRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_regular()"));
            },
            SageIsChordal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_chordal()"));
            },
            SageIsCirculant: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_circulant()"));
            },
            SageIsInterval: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_interval()"));
            },
            SageIsGallaiTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_gallai_tree()"));
            },
            SageIsClique: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_clique()"));
            },
            SageIsCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cycle()"));
            },
            SageIsIndependentSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_independent_set()"));
            },
            SageIsTransitivelyReduced: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_transitively_reduced()"));
            },
            SageIsEquitable: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_equitable()"));
            },
            SageBreadthFirstSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.breadth_first_search()"));
            },
            SageDepthFirstSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.depth_first_search()"));
            },
            SageLexBFS: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lex_BFS()"));
            },
            SageCentralityBetweenness: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.centrality_betweenness()"));
            },
            SageCentralityCloseness: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.centrality_closeness()"));
            },
            SageDistance: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance()"));
            },
            SageDistanceAllPairs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_all_pairs()"));
            },
            SageDistancesDistribution: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distances_distribution()"));
            },
            SageEccentricity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eccentricity()"));
            },
            SageRadius: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.radius()"));
            },
            SageCenter: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.center()"));
            },
            SageDiameter: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.diameter()"));
            },
            SageDistanceGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_graph()"));
            },
            SageGirth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.girth()"));
            },
            SagePeriphery: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.periphery()"));
            },
            SageShortestPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path()"));
            },
            SageShortestPathLength: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_length()"));
            },
            SageShortestPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_paths()"));
            },
            SageShortestPathLengths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_lengths()"));
            },
            SageShortestPathAllPairs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_all_pairs()"));
            },
            SageWienerIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.wiener_index()"));
            },
            SageAverageDistance: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.average_distance()"));
            },
            SageIsConnected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_connected()"));
            },
            SageConnectedComponents: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components()"));
            },
            SageConnectedComponentsNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_number()"));
            },
            SageConnectedComponentsSubgraphs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_subgraphs()"));
            },
            SageConnectedComponentContainingVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_component_containing_vertex()"));
            },
            SageConnectedComponentsSizes: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_sizes()"));
            },
            SageBlocksAndCutVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.blocks_and_cut_vertices()"));
            },
            SageBlocksAndCutsTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.blocks_and_cuts_tree()"));
            },
            SageIsCutEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cut_edge()"));
            },
            SageIsCutVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cut_vertex()"));
            },
            SageEdgeCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_cut()"));
            },
            SageVertexCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_cut()"));
            },
            SageFlow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.flow()"));
            },
            SageEdgeDisjointPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_disjoint_paths()"));
            },
            SageVertexDisjointPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_disjoint_paths()"));
            },
            SageEdgeConnectivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_connectivity()"));
            },
            SageVertexConnectivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_connectivity()"));
            },
            SageTransitiveClosure: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.transitive_closure()"));
            },
            SageTransitiveReduction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.transitive_reduction()"));
            },
            SageMinSpanningTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.min_spanning_tree()"));
            },
            SageSpanningTreesCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spanning_trees_count()"));
            },
            SageDominatorTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.dominator_tree()"));
            },
            SageSetEmbedding: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_embedding()"));
            },
            SageGetEmbedding: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_embedding()"));
            },
            SageFaces: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.faces()"));
            },
            SageGetPos: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_pos()"));
            },
            SageSetPos: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_pos()"));
            },
            SageSetPlanarPositions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_planar_positions()"));
            },
            SageIsDrawnFreeOfEdgeCrossings: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_drawn_free_of_edge_crossings()"));
            },
            SageLatexOptions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.latex_options()"));
            },
            SageSetLatexOptions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_latex_options()"));
            },
            SageLayout: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.layout()"));
            },
            SageGraphplot: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphplot()"));
            },
            SagePlot: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.plot()"));
            },
            SageShow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.show()"));
            },
            SagePlot3d: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.plot3d()"));
            },
            SageShow3d: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.show3d()"));
            },
            SageGraphvizString: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphviz_string()"));
            },
            SageGraphvizToFileNamed: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphviz_to_file_named()"));
            },
            SageSteinerTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.steiner_tree()"));
            },
            SageEdgeDisjointSpanningTrees: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_disjoint_spanning_trees()"));
            },
            SageFeedbackVertexSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.feedback_vertex_set()"));
            },
            SageMultiwayCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multiway_cut()"));
            },
            SageMaxCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.max_cut()"));
            },
            SageLongestPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.longest_path()"));
            },
            SageTravelingSalesmanProblem: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.traveling_salesman_problem()"));
            },
            SageIsHamiltonian: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_hamiltonian()"));
            },
            SageHamiltonianCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.hamiltonian_cycle()"));
            },
            SageHamiltonianPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.hamiltonian_path()"));
            },
            SageMulticommodityFlow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multicommodity_flow()"));
            },
            SageDisjointRoutedPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjoint_routed_paths()"));
            },
            SageDominatingSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.dominating_set()"));
            },
            SageSubgraphSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search()"));
            },
            SageSubgraphSearchCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search_count()"));
            },
            SageSubgraphSearchIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search_iterator()"));
            },
            SageCharacteristicPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.characteristic_polynomial()"));
            },
            SageGenus: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.genus()"));
            },
            SageLayoutSpring: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_spring()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutRanked: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_ranked()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutExtendRandomly: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_extend_randomly()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutCircular: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_circular()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutTree: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_tree()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutGraphviz: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_graphviz()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutPlanar: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_planar()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLoadNamedGraph: function (name) {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $taskResult2, 
                    $jumpFromFinally, 
                    a, 
                    layout, 
                    positions, 
                    adj, 
                    g, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync$1(System.String.concat("G = graphs.", name, "()", '\n', "G.adjacency_matrix().str()"));
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    a = $taskResult1;
                                    $task2 = Test.App.AskSageAsync$1(System.String.concat("G = graphs.", name, "()", '\n', "G.layout()"));
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $taskResult2 = $task2.getAwaitedResult();
                                    layout = $taskResult2;
                                    positions = this.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    adj = Test.TabCanvas.ParseAdjacencyMatrix(a);

                                    g = new Algorithms.Graph.ctor(adj);

                                    Test.App.NewTab(name, new Graphs.Graph.$ctor1(g, positions, false));
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            Scale: function (positions) {
                var l = System.Linq.Enumerable.from(positions).toList(Graphs.Vector);
                var minX = System.Linq.Enumerable.from(l).min($asm.$.Test.TabCanvas.f5);
                var minY = System.Linq.Enumerable.from(l).min($asm.$.Test.TabCanvas.f6);
                var maxX = System.Linq.Enumerable.from(l).max($asm.$.Test.TabCanvas.f5);
                var maxY = System.Linq.Enumerable.from(l).max($asm.$.Test.TabCanvas.f6);

                var w = maxX - minX;
                var h = maxY - minY;

                return System.Linq.Enumerable.from(positions).select(function (p) {
                        return new Graphs.Vector(0.1 + 0.8 * (p.X - minX) / w, 0.1 + 0.8 * (p.Y - minY) / h);
                    }).toList(Graphs.Vector);
            },
            LayoutGraph: function (positions) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    a, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        this.SnapPositionsToGrid(positions);
                                        a = new Test.LayoutAnimation(Bridge.fn.bind(this, $asm.$.Test.TabCanvas.f7), Bridge.fn.bind(this, $asm.$.Test.TabCanvas.f8), positions, this.GraphCanvas.Graph);

                                        this.GraphCanvas.SnapToGrid = false;
                                        $task1 = a.Animate();
                                        $step = 1;
                                        $task1.continueWith($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        this.GraphCanvas.SnapToGrid = true;
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            SnapPositionsToGrid: function (positions) {
                for (var i = 0; i < positions.Count; i = (i + 1) | 0) {
                    positions.getItem(i).X = Graphs.GraphCanvas._gridStep * Bridge.Math.round(positions.getItem(i).X / Graphs.GraphCanvas._gridStep, 0, 6);
                    positions.getItem(i).Y = Graphs.GraphCanvas._gridStep * Bridge.Math.round(positions.getItem(i).Y / Graphs.GraphCanvas._gridStep, 0, 6);
                }
            },
            OnGraphModified: function (g) {
                this.Invalidate();
            },
            OnLoad: function (e) {
                this.Invalidate();
            },
            OnMouseMove: function (e) {
                this._ctrlDown = e.ctrlKey;
                if (!Bridge.staticEquals(this.MouseMoved, null)) {
                    this.MouseMoved(e.layerX, e.layerY);
                }
            },
            OnMouseButtonDown: function (e) {
                this._ctrlDown = e.ctrlKey;
                // Canvas.SetCapture(true);  // chrome does not seem to support this, what?

                if (e.shiftKey) {
                    if (!Bridge.staticEquals(this.MouseButtonDoubleClicked, null)) {
                        this.MouseButtonDoubleClicked(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                    }
                } else {
                    if (!Bridge.staticEquals(this.MouseButtonDown, null)) {
                        this.MouseButtonDown(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                    }
                }
            },
            OnMouseButtonUp: function (e) {
                this._ctrlDown = e.ctrlKey;
                // Canvas.SetCapture(false);
                if (e.shiftKey) {
                    return;
                }


                if (!Bridge.staticEquals(this.MouseButtonUp, null)) {
                    this.MouseButtonUp(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                }

                if (e.ctrlKey && e.altKey) {
                    Test.App.AskSage(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')"));
                }
            },
            OnMouseDoubleClick: function (e) { },
            SetClipboardText: function (text) { },
            GetClipboardText: function () {
                return "";
            },
            Invalidate: function () {
                var graphics = new Test.Graphics(this.Canvas);
                this.GraphCanvas.Paint(graphics, this.Canvas.width, this.Canvas.height);
            }
        }
    });

    Bridge.ns("Test.TabCanvas", $asm.$);

    Bridge.apply($asm.$.Test.TabCanvas, {
        f1: function (_o24) {
            _o24.add(new GraphicsLayer.ARGB.ctor(255, 0, 0));
            _o24.add(new GraphicsLayer.ARGB.ctor(0, 0, 255));
            _o24.add(new GraphicsLayer.ARGB.ctor(0, 255, 0));
            _o24.add(new GraphicsLayer.ARGB.ctor(255, 255, 0));
            _o24.add(new GraphicsLayer.ARGB.ctor(95, 158, 160));
            _o24.add(new GraphicsLayer.ARGB.ctor(139, 69, 19));
            _o24.add(new GraphicsLayer.ARGB.ctor(30, 144, 255));
            _o24.add(new GraphicsLayer.ARGB.ctor(64, 224, 208));
            _o24.add(new GraphicsLayer.ARGB.ctor(218, 112, 214));
            return _o24;
        },
        f2: function (x) {
        return System.Int32.parse(x);
    },
        f3: function (s) {
        return System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);
    },
        f4: function (s) {
        return System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, "[", ""), "]", ""), "(", ""), ")", ""), " ", ""), '\n', ""), "\\n", ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f2).toList(System.Int32);
    },
        f5: function (p) {
            return p.X;
        },
        f6: function (p) {
            return p.Y;
        },
        f7: function () {
        this.GraphCanvas.Invalidate();

    },
        f8: function () {
        this.GraphCanvas.Invalidate();
    }
    });
});

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICJUZXN0LmpzIiwKICAic291cmNlUm9vdCI6ICIiLAogICJzb3VyY2VzIjogWyJBbGdvcml0aG1zL0Fzc2lnbm1lbnRFbnVtZXJhdG9yLmNzIiwiQWxnb3JpdGhtcy9DaG9vc2FiaWxpdHlSZXN1bHQuY3MiLCJBbGdvcml0aG1zL0NvdW50aW5nLmNzIiwiQWxnb3JpdGhtcy9EYXRhU3RydWN0dXJlcy9CaWplY3Rpb24uY3MiLCJBbGdvcml0aG1zL0RhdGFTdHJ1Y3R1cmVzL1VuaW9uRmluZC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0JvYXJkLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvQ2hyb25pY2xlL0JyYW5jaEdlbmVyYXRvci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Cb2FyZEtub3dsZWRnZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9HcmFwaEtub3dsZWRnZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Lbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9UcmVlLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL01ldGFLbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvTWluZC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Qb3RLbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TbGltU3dhcEFuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU29ydGVkSW50TGlzdC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL0JvYXJkTGV4aWZpZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9IYXNoaW5nLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvUHJvb2ZzL1Byb29mQnVpbGRlci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1Byb29mcy9FeHRlbnNpb25zLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvUHJvb2ZzL1Byb29mQ2FzZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1N1cGVyU2xpbUJvYXJkLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvU3VwZXJTbGltQ29sb3JpbmdBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1N1cGVyU2xpbVN3YXBBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9UZW1wbGF0ZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9UZW1wbGF0ZUtub3dsZWRnZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL1Nsb3dCb2FyZC5jcyIsIkFsZ29yaXRobXMvR2VuZXJpY0V4dGVuc2lvbnMuY3MiLCJBbGdvcml0aG1zL0dyYXBoLmNzIiwiQWxnb3JpdGhtcy9HcmFwaHMuY3MiLCJBbGdvcml0aG1zL0hhc2hHcmFwaC5jcyIsIkFsZ29yaXRobXMvSGVyZWRpdGFyeUNsYXNzRW51bWVyYXRpb24uY3MiLCJBbGdvcml0aG1zL0h5cGVyZ3JhcGguY3MiLCJBbGdvcml0aG1zL0luZGVwZW5kZW5jZVJhdGlvL01pbm9yRmluZGVyLmNzIiwiQWxnb3JpdGhtcy9JbnQzMlVzYWdlLmNzIiwiQWxnb3JpdGhtcy9JbnQ2NFVzYWdlLmNzIiwiQWxnb3JpdGhtcy9MYXp5LmNzIiwiQWxnb3JpdGhtcy9PbmVGYWN0b3JpemF0aW9uc09mQ29tcGxldGVHcmFwaC5jcyIsIkFsZ29yaXRobXMvT25GYWN0b3JpemF0aW9uc09mQ29tcGxldGVHcmFwaC5jcyIsIkFsZ29yaXRobXMvT25saW5lQ2hvaWNlSGFzaEdyYXBoLmNzIiwiQWxnb3JpdGhtcy9PcmllbnRhdGlvbkhhc2hHcmFwaC5jcyIsIkFsZ29yaXRobXMvUG9seW5vbWlhbHMvRmFjdG9yZWRSYXRpb25hbC5jcyIsIkFsZ29yaXRobXMvUG9seW5vbWlhbHMvR3JhcGhQb2x5bm9taWFsLmNzIiwiQWxnb3JpdGhtcy9Qb2x5bm9taWFscy9Ob3JtYWxpemVyLmNzIiwiQWxnb3JpdGhtcy9Qb2x5bm9taWFscy9QcmltZU51bWJlcnMuY3MiLCJBbGdvcml0aG1zL1BvbHlub21pYWxzL1NpZ25Mb29rdXAuY3MiLCJBbGdvcml0aG1zL1N1YnNldEVudW1lcmF0b3IuY3MiLCJBbGdvcml0aG1zL1RyYW5zaXRpdmVQYXJ0aXRpb24uY3MiLCJBbGdvcml0aG1zL1VucGVybXV0ZWRBc3NpZ25tZW50RW51bWVyYXRvci5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9FcXVpdmFsZW5jZVJlbGF0aW9uLmNzIiwiQWxnb3JpdGhtcy9VdGlsaXR5L0ZhY3RvcmFkaWMuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvRmxvd3MuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvTGlucUV4dGVuc2lvbnMuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvTGlzdFV0aWxpdHkuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvUGFydGlhbE9yZGVycy5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9QZXJtdXRhdGlvbi5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9TYWZlQ29sbGVjdGlvbi5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9TZXF1ZW5jZUdlbmVyYWxpemVyLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9BY2Nlc3NpYmlsaXR5Q2hlY2tlci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvQm94aWZpY2F0aW9uLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9PcHRpbWl6ZWQvRmFzdEFjY2Vzc2liaWxpdHlDaGVja2VyLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9UYXJwaXRFbnVtZXJhdG9yLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9PcHRpbWl6ZWQvRmFzdFdvcmQuY3MiLCJBbGdvcml0aG1zL1dvcmRHYW1lL09wdGltaXplZC9GYXN0V29yZEdlbmVyYXRvci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvV29yZEVudW1lcmF0b3IuY3MiLCJCaXRMZXZlbEdlbmVyYXRpb24vQXNzaWdubWVudHNfdHlwZS5jcyIsIkJpdExldmVsR2VuZXJhdGlvbi9CaXRPcGVyYXRpb25zLmNzIiwiQml0TGV2ZWxHZW5lcmF0aW9uL0JpdFZlY3RvcnMuY3MiLCJCaXRMZXZlbEdlbmVyYXRpb24vR3JhcGhDaG9vc2FiaWxpdHkuY3MiLCJCaXRMZXZlbEdlbmVyYXRpb24vSGFzaGVkQXNzaWdubWVudC5jcyIsIkJpdExldmVsR2VuZXJhdGlvbi9NYXhpbWFsbmRlcGVuZGVudFNldFNlYXJjaGluZy5jcyIsIkdyYXBoaWNzTGF5ZXIvQVJHQi5jcyIsIkdyYXBoaWNzTGF5ZXIvQm94LmNzIiwiR3JhcGhpY3NMYXllci9Gb250LmNzIiwiR3JhcGhzQ29yZS9Bc2NpaTg1LmNzIiwiR3JhcGhzQ29yZS9Qb2x5Z29uQ29udGFpbmVyLmNzIiwiR3JhcGhzQ29yZS9TZXJpYWxpemF0aW9uQ2xhc3Nlcy5jcyIsIkdyYXBoc0NvcmUvVXRpbGl0eS5jcyIsIkdyYXBoc0NvcmUvVmVjdG9yLmNzIiwiR3JhcGhzQ29yZS9Db21wYWN0U2VyaWFsaXplci5jcyIsIkdyYXBoc0NvcmUvR3JhcGhJTy5jcyIsIkdyYXBoc0NvcmUvQmF0Y2guY3MiLCJHcmFwaHNDb3JlL1F1aWNrTFouY3MiLCJBcHAuY3MiLCJIZWxwZXJFeHRlbnNpb25zLmNzIiwiTGF5b3V0QW5pbWF0aW9uLmNzIiwiQWxnb3JpdGhtcy9EYXRhU3RydWN0dXJlcy9VbmlvbkZpbmRUcmFja2VkUm9vdHMuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9DaHJvbmljbGUvQ2hyb25pY2xlZEJyYW5jaC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Db2xvcmluZ0FuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL0NvbW1vbkNvbG9yQW5hbHl6ZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU3dhcEFuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL0tpZXJzdGVhZEFuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL0tub3dsZWRnZVRyZWUuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvUmVkdWN0aW9uQW5hbHl6ZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TbGltTWluZC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL0dhbWVUcmVlLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvR2FtZVRyZWVJbmZvLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvR3JlZWR5V2luRmlsdGVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvUHJvb2ZzL1Blcm11dGF0aW9uQXdhcmVQcm9vZkJ1aWxkZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9TbWFydEZpbHRlci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1N1cGVyU2xpbU1pbmQuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU3ViVGVtcGxhdGVBbmFseXplci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvT3B0aW1pemVkL0Zhc3RUYXJwaXRFbnVtZXJhdG9yLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9SZWZlcmVuY2VUYXJwaXRFbnVtZXJhdG9yLmNzIiwiQml0TGV2ZWxHZW5lcmF0aW9uL0JpdEdyYXBoX3R5cGUuY3MiLCJHcmFwaHNDb3JlL0VkZ2UuY3MiLCJHcmFwaHNDb3JlL0dyYXBoLmNzIiwiR3JhcGhzQ29yZS9HcmFwaENhbnZhcy5jcyIsIkdyYXBoc0NvcmUvVmVydGV4LmNzIiwiR3JhcGhpY3MuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvR29vZG5lc3NBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1Byb29mcy9BcmJpdHJhcnlEZWdyZWVQcm9vZkJ1aWxkZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9Qcm9vZnMvTWF4aW11bURlZ3JlZVRocmVlUHJvb2ZCdWlsZGVyLmNzIiwiVGFiQ2FudmFzLmNzIl0sCiAgIm5hbWVzIjogWyIiXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkFlb0NBLGFBQWlCQSxHQUFrQkEsU0FBYUEsT0FBZUE7Ozs7O2dCQUV2RkEsb0JBQWVBO2dCQUNmQSxVQUFLQTtnQkFDTEEsZ0JBQVdBO2dCQUNYQSxjQUFTQTtnQkFDVEEsYUFBUUE7Ozs7O2dCQU9SQSxPQUFPQSxJ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QWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBS3ZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUt2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JB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QUFRQSxTQUFTQSxJQUFJQTtZQUFpQkEsU0FBU0EsSUFBSUE7WUFBaUJBLFNBQVNBLElBQUlBO1lBQWlCQSxTQUFTQSxJQUFJQTtZQUFtQkEsU0FBU0EsSUFBSUE7WUFBb0JBLFNBQVNBLElBQUlBO1lBQW1CQSxTQUFTQSxJQUFJQTtZQUFvQkEsU0FBU0EsSUFBSUE7WUFBb0JBLFNBQVNBLElBQUlBO1lBQXFCQSxPQUFPQTs7O2VBaUc0RUEsbUJBQVVBOzs7ZUFBaE5BLDRCQUEwQ0Esa0xBQTZEQSwyRkFBdURBLEFBQW1DQTs7O2VBc01wTUEsNEJBQTBDQSxpUkFBOEZBLHVHQUF5RUEsQUFBbUNBOzs7bUJBa2lDM1dBOzs7bUJBQ0FBOzs7UUFjckhBOzs7O1FBRUtBIiwKICAic291cmNlc0NvbnRlbnQiOiBbInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBBc3NpZ25tZW50RW51bWVyYXRvcjogSUVudW1lcmFibGU8TGlzdDxJbnQ2ND4+XHJcbiAgICB7XHJcbiAgICAgICAgaW50IF92ZXJ0ZXhDb3VudDtcclxuICAgICAgICBGdW5jPGludCwgaW50PiBfZjtcclxuICAgICAgICBpbnQgX3BvdFNpemU7XHJcbiAgICAgICAgaW50IF9zdGFydDtcclxuICAgICAgICBpbnQgX3N0ZXA7XHJcblxyXG4gICAgICAgIHB1YmxpYyBBc3NpZ25tZW50RW51bWVyYXRvcihpbnQgdmVydGV4Q291bnQsIEZ1bmM8aW50LCBpbnQ+IGYsIGludCBwb3RTaXplLCBpbnQgc3RhcnQgPSAwLCBpbnQgc3RlcCA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdmVydGV4Q291bnQgPSB2ZXJ0ZXhDb3VudDtcclxuICAgICAgICAgICAgX2YgPSBmO1xyXG4gICAgICAgICAgICBfcG90U2l6ZSA9IHBvdFNpemU7XHJcbiAgICAgICAgICAgIF9zdGFydCA9IHN0YXJ0O1xyXG4gICAgICAgICAgICBfc3RlcCA9IHN0ZXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIElFbnVtZXJhYmxlPGxvbmdbXT4gTWVtYmVyc1xyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmF0b3I8TGlzdDxJbnQ2ND4+IEdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKF92ZXJ0ZXhDb3VudCwgX2YsIF9wb3RTaXplLCBfc3RhcnQsIF9zdGVwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBJRW51bWVyYWJsZSBNZW1iZXJzXHJcblxyXG4gICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvciBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuXHJcbiAgICAgICAgY2xhc3MgRW51bWVyYXRvciA6IElFbnVtZXJhdG9yPExpc3Q8SW50NjQ+PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxJRW51bWVyYXRvcjxJbnQ2ND4+IF9lbnVtZXJhdG9ycztcclxuICAgICAgICAgICAgTGlzdDxJbnQ2ND4gX2N1cnJlbnQ7XHJcbiAgICAgICAgICAgIGludCBfc3RlcDtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBFbnVtZXJhdG9yKGludCB2ZXJ0ZXhDb3VudCwgRnVuYzxpbnQsIGludD4gZiwgaW50IHBvdFNpemUsIGludCBzdGFydCA9IDAsIGludCBzdGVwID0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2VudW1lcmF0b3JzID0gbmV3IExpc3Q8SUVudW1lcmF0b3I8SW50NjQ+Pih2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIGYoMCkpLlRvSW50NjQoKTtcclxuICAgICAgICAgICAgICAgIF9lbnVtZXJhdG9ycy5BZGQoQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PEludDY0PigpLChfbzEpPT57X28xLkFkZChmaXJzdCk7cmV0dXJuIF9vMTt9KS5HZXRFbnVtZXJhdG9yKCkpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIF9lbnVtZXJhdG9ycy5BZGQobmV3IFN1YnNldEVudW1lcmF0b3IuRW51bWVyYXRvcihwb3RTaXplLCBmKGkpKSk7XHJcbiAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIF9zdGVwID0gc3RlcDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN0YXJ0OyBpKyspIGlmICghTW92ZU5leHRJbnRlcm5hbCgpKSBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBJRW51bWVyYXRvcjxsb25nW10+IE1lbWJlcnNcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBMaXN0PEludDY0PiBDdXJyZW50XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldCB7IHJldHVybiBfY3VycmVudDsgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICAgICAjcmVnaW9uIElEaXNwb3NhYmxlIE1lbWJlcnNcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIERpc3Bvc2UoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gSUVudW1lcmF0b3IgTWVtYmVyc1xyXG5cclxuICAgICAgICAgICAgb2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvci5DdXJyZW50XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldCB7IHJldHVybiBDdXJyZW50OyB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIE1vdmVOZXh0KClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBfc3RlcDsgaisrKSBpZiAoIU1vdmVOZXh0SW50ZXJuYWwoKSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBib29sIE1vdmVOZXh0SW50ZXJuYWwoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2N1cnJlbnQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY3VycmVudCA9IG5ldyBMaXN0PEludDY0PihfZW51bWVyYXRvcnMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciBlbnVtZXJhdG9yIGluIF9lbnVtZXJhdG9ycylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmF0b3IuTW92ZU5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2N1cnJlbnQuQWRkKGVudW1lcmF0b3IuQ3VycmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgaSA9IF9lbnVtZXJhdG9ycy5Db3VudCAtIDE7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoaSA+PSAxKVxyXG4gICAgICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2VudW1lcmF0b3JzW2ldLk1vdmVOZXh0KCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY3VycmVudFtpXSA9IF9lbnVtZXJhdG9yc1tpXS5DdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9lbnVtZXJhdG9yc1tpXS5SZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9lbnVtZXJhdG9yc1tpXS5Nb3ZlTmV4dCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfY3VycmVudFtpXSA9IF9lbnVtZXJhdG9yc1tpXS5DdXJyZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpLS07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGkgPj0gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdm9pZCBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IuUmVzZXQoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQ2hvb3NhYmlsaXR5UmVzdWx0XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBCYWRBc3NpZ25tZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQ7XHJcbiAgICAgICAgICAgIHByaXZhdGUgc2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ2FuY2VsZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDtcclxuICAgICAgICAgICAgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0Nob29zYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEJhZEFzc2lnbm1lbnQgPT0gbnVsbDsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIENob29zYWJpbGl0eVJlc3VsdChMaXN0PExpc3Q8aW50Pj4gYmFkQXNzaWdubWVudCwgYm9vbCBjYW5jZWxlZCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQmFkQXNzaWdubWVudCA9IGJhZEFzc2lnbm1lbnQ7XHJcbiAgICAgICAgICAgIENhbmNlbGVkID0gY2FuY2VsZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBPcmllbnRhdGlvblJlc3VsdFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBHcmFwaCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBFdmVuIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE9kZCB7IGdldDsgc2V0OyB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBDb3VudGluZ1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBCaW5vbWlhbENvZWZmaWNpZW50KGxvbmcgbiwgbG9uZyBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGsgPCAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbG9uZyBtYXggPSBNYXRoLk1heChrLCBuIC0gayk7XHJcbiAgICAgICAgICAgIGxvbmcgbWluID0gTWF0aC5NaW4oaywgbiAtIGspO1xyXG5cclxuICAgICAgICAgICAgbG9uZyByZXN1bHQgPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAobiA+IG1heClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICo9IG47XHJcbiAgICAgICAgICAgICAgICBuLS07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChtaW4gPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgLz0gbWluO1xyXG5cclxuICAgICAgICAgICAgICAgIG1pbi0tO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIEZhY3RvcmlhbChpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgdG90YWwgPSAxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8PSBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICB0b3RhbCAqPSBpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQmlqZWN0aW9uPEQsIEM+XHJcbiAgICB7XHJcbiAgICAgICAgRGljdGlvbmFyeTxELCBDPiBfZiA9IG5ldyBEaWN0aW9uYXJ5PEQsIEM+KCk7XHJcbiAgICAgICAgRGljdGlvbmFyeTxDLCBEPiBfZmludmVyc2UgPSBuZXcgRGljdGlvbmFyeTxDLCBEPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgQyB0aGlzW0QgZF1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfZltkXTsgfVxyXG4gICAgICAgICAgICBzZXQgXHJcbiAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICBfZltkXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgX2ZpbnZlcnNlW3ZhbHVlXSA9IGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEIHRoaXNbQyBjXVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9maW52ZXJzZVtjXTsgfVxyXG4gICAgICAgICAgICBzZXQgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9mW3ZhbHVlXSA9IGM7XHJcbiAgICAgICAgICAgICAgICBfZmludmVyc2VbY10gPSB2YWx1ZTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxDPiBBcHBseShJRW51bWVyYWJsZTxEPiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PEQsQz4oZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxELCBDPikoZCA9PiB0aGlzW2RdKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8RD4gQXBwbHkoSUVudW1lcmFibGU8Qz4gZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxDLEQ+KGUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8QywgRD4pKGMgPT4gdGhpc1tjXSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJpamVjdGlvbkV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEJpamVjdGlvbjxpbnQsIFQ+IE51bWJlck9iamVjdHM8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBvYmplY3RzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG51bWJlcmluZyA9IG5ldyBCaWplY3Rpb248aW50LCBUPigpO1xyXG5cclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbyBpbiBvYmplY3RzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBudW1iZXJpbmdbaV0gPSBvO1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVtYmVyaW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVW5pb25GaW5kPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIE5vZGUgTWFrZVNldChUIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IG5ldyBOb2RlKCk7XHJcbiAgICAgICAgICAgIG5vZGUuUGFyZW50ID0gbm9kZTtcclxuICAgICAgICAgICAgbm9kZS5SYW5rID0gMDtcclxuICAgICAgICAgICAgbm9kZS5UID0gdDtcclxuXHJcbiAgICAgICAgICAgIFJvb3RBZGRlZChub2RlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBVbmlvbihOb2RlIG54LCBOb2RlIG55KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHhSb290ID0gRmluZChueCk7XHJcbiAgICAgICAgICAgIHZhciB5Um9vdCA9IEZpbmQobnkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHhSb290ID09IHlSb290KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYgKHhSb290LlJhbmsgPCB5Um9vdC5SYW5rKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4Um9vdC5QYXJlbnQgPSB5Um9vdDtcclxuICAgICAgICAgICAgICAgIFJvb3RSZW1vdmVkKHhSb290KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh4Um9vdC5SYW5rID4geVJvb3QuUmFuaylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeVJvb3QuUGFyZW50ID0geFJvb3Q7XHJcbiAgICAgICAgICAgICAgICBSb290UmVtb3ZlZCh5Um9vdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB5Um9vdC5QYXJlbnQgPSB4Um9vdDtcclxuICAgICAgICAgICAgICAgIHhSb290LlJhbmsrKztcclxuICAgICAgICAgICAgICAgIFJvb3RSZW1vdmVkKHlSb290KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE5vZGUgRmluZChOb2RlIG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobi5QYXJlbnQgIT0gbilcclxuICAgICAgICAgICAgICAgIG4uUGFyZW50ID0gRmluZChuLlBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbi5QYXJlbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgTm9kZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIE5vZGUgUGFyZW50IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgICAgcHVibGljIGludCBSYW5rIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgICAgcHVibGljIFQgVCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIFJvb3RBZGRlZChOb2RlIG4pIHsgfVxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgUm9vdFJlbW92ZWQoTm9kZSBuKSB7IH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCb2FyZCA6IElFbnVtZXJhYmxlPGxvbmc+XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFN0b3JlUGVybXV0YXRpb25JbmZvO1xyXG5cclxuI2lmIERFQlVHXHJcbiAgICAgICAgcHVibGljIExpc3Q8c3RyaW5nPiBTdGFja1N0cmluZ3MgeyBnZXQgeyByZXR1cm4gU3RhY2tzLlNlbGVjdChzID0+IHMuVG9TZXRTdHJpbmcoKSkuVG9MaXN0KCk7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUG90U3RyaW5nIHsgZ2V0IHsgcmV0dXJuIFBvdC5Ub1NldFN0cmluZygpOyB9IH1cclxuI2VuZGlmXHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGxvbmc+IFN0YWNrcztcclxuICAgICAgICBpbnQgX2hhc2hDb2RlO1xyXG4gICAgICAgIExpc3Q8aW50PiBQb3RTZXQ7XHJcbiAgICAgICAgTGlzdDxJbnQ2ND4gVHJhY2VzO1xyXG4gICAgICAgIExpc3Q8VHVwbGU8aW50LCBJbnQ2ND4+IFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mbztcclxuICAgICAgICBMaXN0PGludD4gVHJhY2VDaGFuZ2VJbmRpY2VzO1xyXG4gICAgICAgIHB1YmxpYyBMYXp5PFRlbXBsYXRlPiBUZW1wbGF0ZTtcclxuXHJcbiAgICAgICAgcHVibGljIGxvbmcgUG90O1xyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29sb3JDb3VudDtcclxuXHJcbiAgICAgICAgcHVibGljIFR1cm4gVHVybjtcclxuICAgICAgICBwdWJsaWMgaW50IE47XHJcbiAgICAgICAgcHVibGljIE1vdmUgTGFzdE1vdmU7XHJcbiAgICAgICAgcHVibGljIGxvbmcgdGhpc1tpbnQgeF0geyBnZXQgeyByZXR1cm4gU3RhY2tzW3hdOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIEJvYXJkKExpc3Q8bG9uZz4gc3RhY2tzLCBsb25nIHBvdCwgYm9vbCBjb21wdXRlSGFzaCA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdGFja3MgPSBzdGFja3M7XHJcbiAgICAgICAgICAgIFBvdCA9IHBvdDtcclxuICAgICAgICAgICAgVHVybiA9IFR1cm4uRml4ZXI7XHJcbiAgICAgICAgICAgIE4gPSBTdGFja3MuQ291bnQ7XHJcbiAgICAgICAgICAgIFRlbXBsYXRlID0gbmV3IExhenk8VGVtcGxhdGU+KCgpID0+IG5ldyBUZW1wbGF0ZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGludD4oU3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGludD4pKHMgPT4gcy5Qb3B1bGF0aW9uQ291bnQoKSkpLlRvTGlzdCgpKSk7XHJcbiAgICAgICAgICAgIFBvdFNldCA9IFBvdC5Ub1NldCgpO1xyXG4gICAgICAgICAgICBDb2xvckNvdW50ID0gUG90U2V0LkNvdW50O1xyXG4gICAgICAgICAgICBUcmFjZXMgPSBuZXcgTGlzdDxJbnQ2ND4oQ29sb3JDb3VudCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoU3RvcmVQZXJtdXRhdGlvbkluZm8pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mbyA9IG5ldyBMaXN0PFR1cGxlPGludCwgSW50NjQ+PihDb2xvckNvdW50KTtcclxuICAgICAgICAgICAgICAgIFRyYWNlQ2hhbmdlSW5kaWNlcyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNvbXB1dGVIYXNoKVxyXG4gICAgICAgICAgICAgICAgQ29tcHV0ZUhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIENvbXB1dGVIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSAoaW50KShOKTtcclxuICAgICAgICAgICAgVXBkYXRlSGFzaChyZWYgX2hhc2hDb2RlLCAobG9uZykoVHVybikpO1xyXG5cclxuICAgICAgICAgICAgVHJhY2VzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjIGluIFBvdFNldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBHZXRUcmFjZShjKTtcclxuICAgICAgICAgICAgICAgIGlmICh0ID4gMClcclxuICAgICAgICAgICAgICAgICAgICBUcmFjZXMuQWRkKHQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBUcmFjZXMuU29ydCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gVHJhY2VzKVxyXG4gICAgICAgICAgICAgICAgVXBkYXRlSGFzaChyZWYgX2hhc2hDb2RlLCB0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChTdG9yZVBlcm11dGF0aW9uSW5mbylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvLkNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICBUcmFjZUNoYW5nZUluZGljZXMuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYyBpbiBQb3RTZXQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBHZXRUcmFjZShjKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mby5BZGQobmV3IFR1cGxlPGludCwgSW50NjQ+KGMsIHQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBUcmFjZXNGb3JQZXJtdXRhdGlvbkluZm8uU29ydCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LCBnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LCBpbnQ+KSgoeCwgeSkgPT4geC5JdGVtMi5Db21wYXJlVG8oeS5JdGVtMikpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBJbnQ2NCBwcmV2aW91c1RyYWNlID0gLTE7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mby5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodC5JdGVtMiAhPSBwcmV2aW91c1RyYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVHJhY2VDaGFuZ2VJbmRpY2VzLkFkZChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNUcmFjZSA9IHQuSXRlbTI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIFRyYWNlQ2hhbmdlSW5kaWNlcy5BZGQoVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvLkNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgVXBkYXRlSGFzaChyZWYgaW50IGhhc2gsIGxvbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBoYXNoID0gKGludCkoMzcgKiBoYXNoICsgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSW50NjQgR2V0VHJhY2UoaW50IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgayA9IDFMIDw8IGM7XHJcbiAgICAgICAgICAgIEludDY0IHRyYWNlID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICgoU3RhY2tzW2ldICYgaykgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB0cmFjZSB8PSAoMUwgPDwgaSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cmFjZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE1ha2VNb3ZlKE1vdmUgbW92ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExhc3RNb3ZlID0gbW92ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb3ZlLlN0YWNrID49IDApXHJcbiAgICAgICAgICAgICAgICBTdGFja3NbbW92ZS5TdGFja10gPSBTdGFja3NbbW92ZS5TdGFja10uRmxpcEJpdHMobW92ZS5BZGRlZCwgbW92ZS5SZW1vdmVkKTtcclxuXHJcbiAgICAgICAgICAgIFR1cm4gPSBPdGhlclR1cm4oVHVybik7XHJcblxyXG4gICAgICAgICAgICBDb21wdXRlSGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvTW92ZUNvbWJpbmF0aW9uKElFbnVtZXJhYmxlPE1vdmU+IG1vdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG1vdmUgaW4gbW92ZXMpXHJcbiAgICAgICAgICAgICAgICBTdGFja3NbbW92ZS5TdGFja10gPSBTdGFja3NbbW92ZS5TdGFja10uRmxpcEJpdHMobW92ZS5BZGRlZCwgbW92ZS5SZW1vdmVkKTtcclxuXHJcbiAgICAgICAgICAgIENvbXB1dGVIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEJvYXJkIENsb25lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjbG9uZSA9IG5ldyBCb2FyZChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxsb25nPihTdGFja3MpLCBQb3QpO1xyXG4gICAgICAgICAgICBjbG9uZS5UdXJuID0gVHVybjtcclxuICAgICAgICAgICAgY2xvbmUuTGFzdE1vdmUgPSBMYXN0TW92ZTtcclxuICAgICAgICAgICAgY2xvbmUuX2hhc2hDb2RlID0gX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICAgICAgY2xvbmUuQ29tcHV0ZUhhc2hDb2RlKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm9hcmQgRG9Nb3ZlQ29tYmluYXRpb25PbkNsb25lKElFbnVtZXJhYmxlPE1vdmU+IHN3YXApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2xvbmUgPSBuZXcgQm9hcmQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8bG9uZz4oU3RhY2tzKSwgUG90LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGNsb25lLlR1cm4gPSBUdXJuO1xyXG4gICAgICAgICAgICBjbG9uZS5MYXN0TW92ZSA9IExhc3RNb3ZlO1xyXG5cclxuICAgICAgICAgICAgY2xvbmUuRG9Nb3ZlQ29tYmluYXRpb24oc3dhcCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIEJvYXJkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhCb2FyZCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoVHVybiAhPSBvdGhlci5UdXJuKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoTiAhPSBvdGhlci5OKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxsb25nPihUcmFjZXMsb3RoZXIuVHJhY2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gRmluZFBlcm11dGF0aW9uKEJvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFTdG9yZVBlcm11dGF0aW9uSW5mbylcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJub3Qgc3RvcmluZyBwZXJtdXRhdGlvbiBpbmZvXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LGxvbmc+KFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mbywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LCBsb25nPikodCA9PiB0Lkl0ZW0yKSkuU2VxdWVuY2VFcXVhbChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LGxvbmc+KG90aGVyLlRyYWNlc0ZvclBlcm11dGF0aW9uSW5mbywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LCBsb25nPikodCA9PiB0Lkl0ZW0yKSkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWFwcGluZ1BhaXJzID0gbmV3IExpc3Q8VHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFRyYWNlQ2hhbmdlSW5kaWNlcy5Db3VudCAtIDE7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvbWFpbiA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb2RvbWFpbiA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gVHJhY2VDaGFuZ2VJbmRpY2VzW2ldOyBqIDwgVHJhY2VDaGFuZ2VJbmRpY2VzW2kgKyAxXTsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbi5BZGQoVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvW2pdLkl0ZW0xKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2RvbWFpbi5BZGQob3RoZXIuVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvW2pdLkl0ZW0xKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBtYXBwaW5nUGFpcnMuQWRkKG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4oZG9tYWluLCBjb2RvbWFpbikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PixnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LGdsb2JhbDo6U3lzdGVtLkxpbnEuRW51bWVyYWJsZUluc3RhbmNlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+PihtYXBwaW5nUGFpcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgZ2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4+KShtcCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbixnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihQZXJtdXRhdGlvbi5FbnVtZXJhdGVBbGwobXAuSXRlbTIuQ291bnQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikocCA9PiBuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KG1wLkl0ZW0xLCBwLkFwcGx5PGludD4obXAuSXRlbTIpKSkpKSlcclxuKVxyXG4sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PiwgZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4pKG1hcHBpbmcgPT4gRmxhdHRlbk1hcHBpbmcobWFwcGluZykpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLkZpcnN0T3JEZWZhdWx0KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGJvb2w+KShtYXBwaW5nID0+IFNlcXVlbmNlRXF1YWxQZXJtdXRlZChtYXBwaW5nLCBvdGhlcikpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBGbGF0dGVuTWFwcGluZyhJRW51bWVyYWJsZTxUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4+IG1hcHBpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PixpbnQ+KG1hcHBpbmcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PikoeCA9PiB4Lkl0ZW0xKSkuVG9MaXN0KCksIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LGludD4obWFwcGluZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KSh4ID0+IHguSXRlbTIpKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIFNlcXVlbmNlRXF1YWxQZXJtdXRlZChUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgQm9hcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFN0YWNrcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGVybXV0ZWRTdGFjayA9IEFwcGx5TWFwcGluZyhtYXBwaW5nLCBTdGFja3NbaV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBlcm11dGVkU3RhY2sgIT0gb3RoZXIuU3RhY2tzW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFR1cm4gPT0gRml4ZXJCcmVha2VyLlR1cm4uRml4ZXIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChMYXN0TW92ZS5TdGFjayAhPSBvdGhlci5MYXN0TW92ZS5TdGFjaylcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvdXJzID0gbmV3W10geyBMYXN0TW92ZS5BZGRlZCwgTGFzdE1vdmUuUmVtb3ZlZCB9O1xyXG4gICAgICAgICAgICB2YXIgdGhlaXJzID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX28yKT0+e19vMi5BZGQob3RoZXIuTGFzdE1vdmUuQWRkZWQpO19vMi5BZGQob3RoZXIuTGFzdE1vdmUuUmVtb3ZlZCk7cmV0dXJuIF9vMjt9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRXF1YWw8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEFwcGx5TWFwcGluZyhtYXBwaW5nLCBvdXJzKSksdGhlaXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBsb25nIEFwcGx5TWFwcGluZyhUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgbG9uZyBzdGFjaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcHBseU1hcHBpbmcobWFwcGluZywgc3RhY2suVG9TZXQoKSkuVG9JbnQ2NCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEFwcGx5TWFwcGluZyhUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgSUVudW1lcmFibGU8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oc2V0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYyA9PiBtYXBwaW5nLkl0ZW0yW21hcHBpbmcuSXRlbTEuSW5kZXhPZihjKV0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEFwcGx5SW52ZXJzZU1hcHBpbmcoVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IG1hcHBpbmcsIElFbnVtZXJhYmxlPGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHNldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGMgPT4gbWFwcGluZy5JdGVtMVttYXBwaW5nLkl0ZW0yLkluZGV4T2YoYyldKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFR1cm4gT3RoZXJUdXJuKFR1cm4gdHVybilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAxIC0gdHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxsb25nPiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTdGFja3MuR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcInxcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KFN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KSh4ID0+IHguVG9TZXRTdHJpbmdTbWFsbCgpKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUb1RleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KFN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBpbnQsIHN0cmluZz4pKChzdGFjaywgaSkgPT4gXCIkTCh2X1wiICsgKGkgKyAxKSArIFwiKSA9IFwiICsgc3RhY2suVG9TZXRTdHJpbmcoKS5SZXBsYWNlKFwie1wiLCBcIlxcXFx7XCIpLlJlcGxhY2UoXCJ9XCIsIFwiXFxcXH1cIikgKyBcIiRcIikpLkpvaW5QcmV0dHkoXCIsIFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQnJhbmNoR2VuZXJhdG9yXHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIERpY3Rpb25hcnk8aW50LCBMaXN0PExpc3Q8TGlzdDxpbnQ+Pj4+IFBhcnRpdGlvbnNDYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxMaXN0PExpc3Q8aW50Pj4+PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxMaXN0PGludD4+PiBHZXRQYXJ0aXRpb25zKGludCBjb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8TGlzdDxMaXN0PGludD4+PiBwYXJ0aXRpb25zO1xyXG4gICAgICAgICAgICBpZiAoIVBhcnRpdGlvbnNDYWNoZS5UcnlHZXRWYWx1ZShjb3VudCwgb3V0IHBhcnRpdGlvbnMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0aXRpb25zID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oRW51bWVyYXRlUGFydGl0aW9ucyhjb3VudCkpO1xyXG4gICAgICAgICAgICAgICAgUGFydGl0aW9uc0NhY2hlW2NvdW50XSA9IHBhcnRpdGlvbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwYXJ0aXRpb25zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPENocm9uaWNsZWRCcmFuY2g+IEVudW1lcmF0ZUJyYW5jaGVzKEJvYXJkIGJvYXJkLCBUdXBsZTxpbnQsIGludD4gY29sb3JQYWlyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIFMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEVudW1lcmF0ZUV4YWN0bHlPbmVJbnRlcnNlY3RlcnMoYm9hcmQsIGNvbG9yUGFpcikpO1xyXG4gICAgICAgICAgICB2YXIgcGFydGl0aW9ucyA9IEdldFBhcnRpdGlvbnMoUy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PixnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZS5DaHJvbmljbGVkQnJhbmNoPihwYXJ0aXRpb25zLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlLkNocm9uaWNsZWRCcmFuY2g+KShwYXJ0aXRpb24gPT4gbmV3IENocm9uaWNsZWRCcmFuY2goUywgY29sb3JQYWlyLkl0ZW0xLCBjb2xvclBhaXIuSXRlbTIsIHBhcnRpdGlvbikpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PExpc3Q8aW50Pj4+IEVudW1lcmF0ZVBhcnRpdGlvbnMoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobiAlIDIgPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBFbnVtZXJhdGVQYXJ0aXRpb25zKEVudW1lcmFibGUuUmFuZ2UoMCwgbikuVG9MaXN0KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBwYXJ0aXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydGl0aW9uIGluIEVudW1lcmF0ZVBhcnRpdGlvbnMoRW51bWVyYWJsZS5SYW5nZSgwLCBuKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShqID0+IGogIT0gaSkpLlRvTGlzdCgpKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpdGlvbi5JbnNlcnQoMCwgQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX28zKT0+e19vMy5BZGQoaSk7cmV0dXJuIF9vMzt9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBwYXJ0aXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxMaXN0PGludD4+PiBFbnVtZXJhdGVQYXJ0aXRpb25zKExpc3Q8aW50PiBpbmRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGluZGljZXMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gaW5kaWNlc1swXTtcclxuICAgICAgICAgICAgICAgIGluZGljZXMuUmVtb3ZlQXQoMCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGluZGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vNCk9PntfbzQuQWRkKGZpcnN0KTtfbzQuQWRkKGluZGljZXNbaV0pO3JldHVybiBfbzQ7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kaWNlcy5SZW1vdmVBdChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBFbnVtZXJhdGVQYXJ0aXRpb25zKGluZGljZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydGl0aW9uLkFkZChwYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHBhcnRpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGluZGljZXMuSW5zZXJ0KGksIHBhcnRbMV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGluZGljZXMuSW5zZXJ0KDAsIGZpcnN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEVudW1lcmF0ZUV4YWN0bHlPbmVJbnRlcnNlY3RlcnMoQm9hcmQgYm9hcmQsIFR1cGxlPGludCwgaW50PiBjb2xvclBhaXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYWJsZS5SYW5nZSgwLCBib2FyZC5TdGFja3MuQ291bnQpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gYm9hcmQuU3RhY2tzW2ldLklzQml0U2V0KGNvbG9yUGFpci5JdGVtMSkgXiBib2FyZC5TdGFja3NbaV0uSXNCaXRTZXQoY29sb3JQYWlyLkl0ZW0yKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCb2FyZEtub3dsZWRnZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBCb2FyZCBCb2FyZCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlYXNvbiB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBEZXB0aCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFR1cGxlPGludCwgaW50PiBDb2xvclBhaXIgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPj4gU3dhcHMgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm9hcmRLbm93bGVkZ2UoQm9hcmQgYm9hcmQsIHN0cmluZyByZWFzb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCb2FyZCA9IGJvYXJkO1xyXG4gICAgICAgICAgICBSZWFzb24gPSByZWFzb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdyYXBoS25vd2xlZGdlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEdyYXBoIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBMaW5lR3JhcGggeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8VHVwbGU8aW50LCBpbnQ+PiBFZGdlcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IEVkZ2VJbmRpY2VzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gTGVhdmVzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMYXp5PERpY3Rpb25hcnk8VHVwbGU8aW50LCBpbnQ+LCBMaXN0PExpc3Q8aW50Pj4+PiBDb25uZWN0ZWRPcmRlcmluZ3MgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaEtub3dsZWRnZShHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR3JhcGggPSBnO1xyXG4gICAgICAgICAgICBMZWF2ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGludD4oR3JhcGguVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBHcmFwaC5EZWdyZWUodikgPT0gMSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBCdWlsZExpbmVHcmFwaCgpO1xyXG5cclxuICAgICAgICAgICAgQ29ubmVjdGVkT3JkZXJpbmdzID0gbmV3IExhenk8RGljdGlvbmFyeTxUdXBsZTxpbnQsIGludD4sIExpc3Q8TGlzdDxpbnQ+Pj4+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbyA9IG5ldyBEaWN0aW9uYXJ5PFR1cGxlPGludCwgaW50PiwgTGlzdDxMaXN0PGludD4+PigpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gRWRnZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgY29bZV0gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oR3JhcGguRW51bWVyYXRlQ29ubmVjdGVkT3JkZXJpbmdzKEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vNSk9PntfbzUuQWRkKGUuSXRlbTEpO19vNS5BZGQoZS5JdGVtMik7cmV0dXJuIF9vNTt9KSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjbztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEJ1aWxkTGluZUdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhZGphY2VudCA9IEdyYXBoLkFkamFjZW50O1xyXG4gICAgICAgICAgICBpbnQgbiA9IGFkamFjZW50LkdldFVwcGVyQm91bmQoMCkgKyAxO1xyXG5cclxuICAgICAgICAgICAgRWRnZXMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgRWRnZXMuQWRkKG5ldyBUdXBsZTxpbnQsIGludD4oaSwgaikpO1xyXG5cclxuICAgICAgICAgICAgRWRnZUluZGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIEVkZ2VzLkNvdW50KS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtZWV0cyA9IG5ldyBib29sW0VkZ2VzLkNvdW50LCBFZGdlcy5Db3VudF07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRWRnZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IEVkZ2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEVkZ2VzW2ldLkl0ZW0xID09IEVkZ2VzW2pdLkl0ZW0xIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkZ2VzW2ldLkl0ZW0xID09IEVkZ2VzW2pdLkl0ZW0yIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkZ2VzW2ldLkl0ZW0yID09IEVkZ2VzW2pdLkl0ZW0xIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkZ2VzW2ldLkl0ZW0yID09IEVkZ2VzW2pdLkl0ZW0yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWV0c1tpLCBqXSA9IG1lZXRzW2osIGldID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIExpbmVHcmFwaCA9IG5ldyBHcmFwaChtZWV0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEtub3dsZWRnZVxyXG4gICAge1xyXG4gICAgICAgIERpY3Rpb25hcnk8VGVtcGxhdGUsIFRlbXBsYXRlS25vd2xlZGdlPiBfdGVtcGxhdGVMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxUZW1wbGF0ZSwgVGVtcGxhdGVLbm93bGVkZ2U+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaEtub3dsZWRnZSBHcmFwaEtub3dsZWRnZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgVGVtcGxhdGVLbm93bGVkZ2UgdGhpc1tUZW1wbGF0ZSB0ZW1wbGF0ZV1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUZW1wbGF0ZUtub3dsZWRnZSBwO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfdGVtcGxhdGVMb29rdXAuVHJ5R2V0VmFsdWUodGVtcGxhdGUsIG91dCBwKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwID0gbmV3IFRlbXBsYXRlS25vd2xlZGdlKHRlbXBsYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGVtcGxhdGVMb29rdXBbdGVtcGxhdGVdID0gcDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgS25vd2xlZGdlKEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcmFwaEtub3dsZWRnZSA9IG5ldyBHcmFwaEtub3dsZWRnZShnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBsb25nIEdldEVkZ2VDb2xvckxpc3QoQm9hcmQgYm9hcmQsIGludCBlZGdlSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYm9hcmRbR3JhcGhLbm93bGVkZ2UuRWRnZXNbZWRnZUluZGV4XS5JdGVtMV0gJiBib2FyZFtHcmFwaEtub3dsZWRnZS5FZGdlc1tlZGdlSW5kZXhdLkl0ZW0yXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGxvbmcgR2V0RWRnZUNvbG9yTGlzdChMaXN0PGxvbmc+IHN0YWNrcywgaW50IGVkZ2VJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdGFja3NbR3JhcGhLbm93bGVkZ2UuRWRnZXNbZWRnZUluZGV4XS5JdGVtMV0gJiBzdGFja3NbR3JhcGhLbm93bGVkZ2UuRWRnZXNbZWRnZUluZGV4XS5JdGVtMl07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVHJlZTxUPiAgd2hlcmUgVCA6IFRyZWU8VD5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVCBQYXJlbnQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgVCBUaGlzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxUPiBDaGlsZHJlbiB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFRyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGhpcyA9IChUKXRoaXM7XHJcbiAgICAgICAgICAgIENoaWxkcmVuID0gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlbW92ZUNoaWxkKFQgY2hpbGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDaGlsZHJlbi5SZW1vdmUoY2hpbGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgQWRkQ2hpbGQoVCBjaGlsZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNoaWxkLlBhcmVudCA9IFRoaXM7XHJcbiAgICAgICAgICAgIENoaWxkcmVuLkFkZChjaGlsZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEdldERlcHRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkZXB0aCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjaGlsZCBpbiBDaGlsZHJlbilcclxuICAgICAgICAgICAgICAgIGRlcHRoID0gTWF0aC5NYXgoZGVwdGgsIGNoaWxkLkdldERlcHRoKCkgKyAxKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZXB0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIFRyYXZlcnNlKEFjdGlvbjxULCBUPiBvbkRlc2NlbnQsIGludCBtYXhEZXB0aCA9IGludC5NYXhWYWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRyYXZlcnNlSW50ZXJuYWwoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxULCBUPilvbkRlc2NlbnQsIG1heERlcHRoLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgVHJhdmVyc2VJbnRlcm5hbChBY3Rpb248VCwgVD4gb25EZXNjZW50LCBpbnQgbWF4RGVwdGgsIGludCBkZXB0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkZXB0aCA+PSBtYXhEZXB0aCAtIDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY2hpbGQgaW4gQ2hpbGRyZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG9uRGVzY2VudChUaGlzLCBjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5UcmF2ZXJzZUludGVybmFsKChnbG9iYWw6OlN5c3RlbS5BY3Rpb248VCwgVD4pb25EZXNjZW50LCBtYXhEZXB0aCwgZGVwdGggKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFR1cGxlPEdyYXBoLCBEaWN0aW9uYXJ5PGludCwgVD4+IEJ1aWxkR3JhcGgoaW50IG1heERlcHRoID0gaW50Lk1heFZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gMDtcclxuICAgICAgICAgICAgdmFyIHZlcnRleExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PFQsIGludD4oKTtcclxuICAgICAgICAgICAgdmFyIHRyZWVMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxpbnQsIFQ+KCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlcyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PigpO1xyXG5cclxuICAgICAgICAgICAgVHJhdmVyc2UoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxULCBUPikoKHBhcmVudCwgY2hpbGQpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBwO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2ZXJ0ZXhMb29rdXAuVHJ5R2V0VmFsdWUocGFyZW50LCBvdXQgcCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcCA9IHZlcnRpY2VzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4TG9va3VwW3BhcmVudF0gPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVMb29rdXBbcF0gPSBwYXJlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2VzW3BdID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGludCBjO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2ZXJ0ZXhMb29rdXAuVHJ5R2V0VmFsdWUoY2hpbGQsIG91dCBjKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjID0gdmVydGljZXMrKztcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhMb29rdXBbY2hpbGRdID0gYztcclxuICAgICAgICAgICAgICAgICAgICB0cmVlTG9va3VwW2NdID0gY2hpbGQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2VzW2NdID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGVkZ2VzW3BdLkFkZChjKTtcclxuICAgICAgICAgICAgfSksIG1heERlcHRoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2ZXJ0aWNlcyA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cmVlTG9va3VwWzBdID0gKFQpdGhpcztcclxuICAgICAgICAgICAgICAgIGVkZ2VzWzBdID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZWRnZVdlaWdodHMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdmVydGljZXM7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgdmVydGljZXM7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWRnZXNbaV0uQ29udGFpbnMoaikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgxKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlZGdlc1tqXS5Db250YWlucyhpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVdlaWdodHMuQWRkKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUdXBsZTxHcmFwaCwgRGljdGlvbmFyeTxpbnQsIFQ+PihuZXcgR3JhcGgoZWRnZVdlaWdodHMpLCB0cmVlTG9va3VwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgTWV0YUtub3dsZWRnZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaW50IEluZmluaXR5ID0gaW50Lk1heFZhbHVlO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgRXhpc3RzKHRoaXMgb2JqZWN0IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbyAhPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IE5hdHVyYWxzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhYmxlLlJhbmdlKDAsIEluZmluaXR5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBJbnRlcnZhbChpbnQgZmlyc3QsIGludCBsYXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmFibGUuUmFuZ2UoZmlyc3QsIGxhc3QgLSBmaXJzdCArIDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQ/IFRyeVBhcnNlSW50KHRoaXMgc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgeDtcclxuICAgICAgICAgICAgaWYgKGludC5UcnlQYXJzZShzLCBvdXQgeCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGRvdWJsZT8gVHJ5UGFyc2VEb3VibGUodGhpcyBzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGRvdWJsZSB4O1xyXG4gICAgICAgICAgICBpZiAoZG91YmxlLlRyeVBhcnNlKHMsIG91dCB4KSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB4O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIERlZ3JlZUNvbmRpdGlvbih0aGlzIEdyYXBoIGcsIEJvYXJkIGIsIEZ1bmM8TGlzdDxpbnQ+LCBpbnQ+IG1pc3NpbmdFZGdlcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRGVncmVlQ29uZGl0aW9uKGcsIGIuU3RhY2tzLCBiLlBvdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgRGVncmVlQ29uZGl0aW9uKHRoaXMgR3JhcGggZywgTGlzdDxsb25nPiBzdGFja3MsIGxvbmcgcG90LCBGdW5jPExpc3Q8aW50PiwgaW50PiBtaXNzaW5nRWRnZXMgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG1pc3NpbmdFZGdlcyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgbWlzc2luZ0VkZ2VzID0gWSA9PiAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9yR3JhcGhzID0gR2V0Q29sb3JHcmFwaHMoc3RhY2tzLCBwb3QpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIFggaW4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihnLlZlcnRpY2VzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBnLkVkZ2VzT24oWCkgLSBtaXNzaW5nRWRnZXMoWCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGUgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oY29sb3JHcmFwaHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGludD4pKGNnID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudDxpbnQ+KGNnLFgpIC8gMikpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IGUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PGludD4+IEdldENvbG9yR3JhcGhzKExpc3Q8bG9uZz4gc3RhY2tzLCBsb25nIHBvdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHBvdC5FbnVtZXJhdGVCaXRzKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGFscGhhID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oR19hbHBoYShhbHBoYSwgc3RhY2tzKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBHX2FscGhhKGludCBhbHBoYSwgTGlzdDxsb25nPiBzdGFja3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8bG9uZz4oc3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGJvb2w+KShzdGFjayA9PiBzdGFjay5Jc0JpdFNldChhbHBoYSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IGRfSChpbnQgYWxwaGEsIElFbnVtZXJhYmxlPGxvbmc+IHN0YWNrc0luSClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGxvbmc+KHN0YWNrc0luSCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBib29sPikoc3RhY2sgPT4gc3RhY2suSXNCaXRTZXQoYWxwaGEpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBTdXJwbHVzKHRoaXMgQm9hcmQgYm9hcmQsIEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TdW08Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEdldENvbG9yR3JhcGhzKGJvYXJkLlN0YWNrcywgYm9hcmQuUG90KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoY2cgPT4gY2cuQ291bnQgLyAyKSkgLSBnLkU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBTdXJwbHVzKHRoaXMgQm9hcmQgYm9hcmQsIEdyYXBoIGcsIExpc3Q8aW50PiB2ZXJ0aWNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oR2V0Q29sb3JHcmFwaHMoYm9hcmQuU3RhY2tzLCBib2FyZC5Qb3QpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShjZyA9PiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uQ291bnQ8aW50PihjZyx2ZXJ0aWNlcykgLyAyKSkgLSBnLkVkZ2VzT24odmVydGljZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFRvQ29uc29sZSh0aGlzIHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTW92ZSBNYXBNb3ZlKFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBmLCBNb3ZlIG1vdmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWFwcGVkTW92ZSA9IG5ldyBNb3ZlKCkgeyBTdGFjayA9IG1vdmUuU3RhY2sgfTtcclxuICAgICAgICAgICAgdmFyIG0gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEJvYXJkLkFwcGx5TWFwcGluZyhmLCBuZXdbXSB7IG1vdmUuQWRkZWQsIG1vdmUuUmVtb3ZlZCB9KSk7XHJcblxyXG4gICAgICAgICAgICBtYXBwZWRNb3ZlLkFkZGVkID0gbVswXTtcclxuICAgICAgICAgICAgbWFwcGVkTW92ZS5SZW1vdmVkID0gbVsxXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXBwZWRNb3ZlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGU7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBBbGdvcml0aG1zO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTWluZFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBib29sIFN0b3BBbmFseXNpc09uQnJlYWtlcldpbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgRmluZENsZWFuZXN0V2luIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBOZWFybHlDb2xvcmFibGVPbmx5IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBTdXBlcmFidW5kYW50T25seSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBNaW5Qb3QgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWF4UG90IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgQm9hcmQgQnJlYWtlcldvbkJvYXJkIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBUb3RhbFBvc2l0aW9ucyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgTGlzdDxJQm9hcmRBbmFseXplcj4gQm9hcmRBbmFseXNpc1BpcGVsaW5lIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBLbm93bGVkZ2UgS25vd2xlZGdlIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIE1pbmQoR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEZpbmRDbGVhbmVzdFdpbiA9IHRydWU7XHJcbiAgICAgICAgICAgIFN1cGVyYWJ1bmRhbnRPbmx5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgTmVhcmx5Q29sb3JhYmxlT25seSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBNYXhQb3QgPSBNZXRhS25vd2xlZGdlLkluZmluaXR5O1xyXG4gICAgICAgICAgICBLbm93bGVkZ2UgPSBuZXcgS25vd2xlZGdlKGcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgQm9hcmRBbmFseXNpc1BpcGVsaW5lID0gbmV3IExpc3Q8SUJvYXJkQW5hbHl6ZXI+KCk7XHJcbiAgICAgICAgICAgIEJvYXJkQW5hbHlzaXNQaXBlbGluZS5BZGQobmV3IENvbG9yaW5nQW5hbHl6ZXIoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRCb2FyZEFuYWx5emVyKElCb2FyZEFuYWx5emVyIGFuYWx5emVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQm9hcmRBbmFseXNpc1BpcGVsaW5lLkFkZChhbmFseXplcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKFRlbXBsYXRlIHRlbXBsYXRlLCBBY3Rpb248VGhvdWdodFByb2dyZXNzPiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUb3RhbFBvc2l0aW9ucyA9IDA7XHJcbiAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIEVuc3VyZVN3YXBBbmFseXplckV4aXN0ZW5jZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1pbmltdW1Db2xvckNvdW50ID0gTWF0aC5NYXgoTWluUG90LCB0ZW1wbGF0ZS5TaXplcy5NYXgoKSk7XHJcbiAgICAgICAgICAgIHZhciBtYXhpbXVtQ29sb3JDb3VudCA9IE1hdGguTWluKE1heFBvdCwgdGVtcGxhdGUuU2l6ZXMuU3VtKCkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvdW5kQXRMZWFzdE9uZUJvYXJkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvckNvdW50IGluIE1ldGFLbm93bGVkZ2UuSW50ZXJ2YWwobWluaW11bUNvbG9yQ291bnQsIG1heGltdW1Db2xvckNvdW50KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFRob3VnaHRQcm9ncmVzcygpIHsgSXNJbml0aWFsVGhvdWdodCA9IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KEdlbmVyYXRlQWxsQm9hcmRzKHRlbXBsYXRlLCBjb2xvckNvdW50LCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlRob3VnaHRQcm9ncmVzcz4pcHJvZ3Jlc3MpKTtcclxuICAgICAgICAgICAgICAgIGlmIChmb3VuZEF0TGVhc3RPbmVCb2FyZCAmJiBib2FyZHMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBUb3RhbFBvc2l0aW9ucyArPSBib2FyZHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEF0TGVhc3RPbmVCb2FyZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJyZWFrZXJXaW4gPSAhQW5hbHl6ZShib2FyZHMsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuVGhvdWdodFByb2dyZXNzPilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnJlYWtlcldpbiAmJiBTdG9wQW5hbHlzaXNPbkJyZWFrZXJXaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIEtub3dsZWRnZVt0ZW1wbGF0ZV0uUHJvbW90ZShjb2xvckNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oS25vd2xlZGdlW3RlbXBsYXRlXS5Mb3N0Qm9hcmRzKSA8PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBBbmFseXplKExpc3Q8Qm9hcmQ+IGJvYXJkcywgQWN0aW9uPFRob3VnaHRQcm9ncmVzcz4gcHJvZ3Jlc3MgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHdpbkxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYW5hbHl6ZXIgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5JQm9hcmRBbmFseXplcj4oQm9hcmRBbmFseXNpc1BpcGVsaW5lLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLklCb2FyZEFuYWx5emVyLCBib29sPikoYSA9PiAhYS5Jc0tub3dsZWRnZURlcGVuZGVudCkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2h1bmsgPSBuZXcgTGlzdDxCb2FyZD4oKTtcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oICAgICAgICAgICAgICAgIGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkLCBib29sPikoYiA9PiBhbmFseXplci5BbmFseXplKEtub3dsZWRnZSwgYikpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KSgocmVtb3ZlZCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaHVuay5BZGQocmVtb3ZlZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay5Db3VudCA+IDEwMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFRob3VnaHRQcm9ncmVzcygpIHsgQm9hcmRzUmVtb3ZlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KGNodW5rKSwgV2luTGVuZ3RoID0gd2luTGVuZ3RoIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNodW5rLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFRob3VnaHRQcm9ncmVzcygpIHsgQm9hcmRzUmVtb3ZlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KGNodW5rKSwgV2luTGVuZ3RoID0gd2luTGVuZ3RoIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIga25vd2xlZGdlRGVwZW5kZW50QW5hbHl6ZXJzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5JQm9hcmRBbmFseXplcj4oQm9hcmRBbmFseXNpc1BpcGVsaW5lLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLklCb2FyZEFuYWx5emVyLCBib29sPikoYSA9PiBhLklzS25vd2xlZGdlRGVwZW5kZW50KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoYm9hcmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2luTGVuZ3RoKys7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYm9hcmRzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhbmFseXplciBpbiBrbm93bGVkZ2VEZXBlbmRlbnRBbmFseXplcnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbkFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KCAgICAgICAgICAgICAgICAgICAgYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGJvb2w+KShiID0+IGFuYWx5emVyLkFuYWx5emUoS25vd2xlZGdlLCBiKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4pKChyZW1vdmVkKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVGhvdWdodFByb2dyZXNzKCkgeyBCb2FyZHNSZW1vdmVkID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4ocmVtb3ZlZCksIFdpbkxlbmd0aCA9IHdpbkxlbmd0aCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChib2FyZHMuQ291bnQgPT0gY291bnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGIgaW4gYm9hcmRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBLbm93bGVkZ2VbYi5UZW1wbGF0ZS5WYWx1ZV1bYi5Db2xvckNvdW50XS5BZGRMb3NzKGIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IEtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5lYXJseUNvbG9yYWJsZSA9IEVudW1lcmFibGUuUmFuZ2UoMCwgS25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkxpbmVHcmFwaC5OKS5BbGwoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoZSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgYm9vbD4pKGIgPT4gQ29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2UsIGIsIGUpKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmVhcmx5Q29sb3JhYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdE9yRGVmYXVsdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgYm9vbD4pKGIgPT4gZy5EZWdyZWVDb25kaXRpb24oYikgJiYgQ29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2UsIGIsIDApKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChCcmVha2VyV29uQm9hcmQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGJvb2w+KShiID0+IENvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoS25vd2xlZGdlLCBiLCAwKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgRW5zdXJlU3dhcEFuYWx5emVyRXhpc3RlbmNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuSUJvYXJkQW5hbHl6ZXI+KEJvYXJkQW5hbHlzaXNQaXBlbGluZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5JQm9hcmRBbmFseXplciwgYm9vbD4pKGEgPT4gYSBpcyBTd2FwQW5hbHl6ZXIpKSlcclxuICAgICAgICAgICAgICAgIEJvYXJkQW5hbHlzaXNQaXBlbGluZS5BZGQobmV3IFN3YXBBbmFseXplcihGaW5kQ2xlYW5lc3RXaW4sIGZhbHNlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBIYXNoU2V0PEJvYXJkPiBHZW5lcmF0ZUFsbEJvYXJkcyhUZW1wbGF0ZSB0ZW1wbGF0ZSwgaW50IGNvbG9yQ291bnQsIEFjdGlvbjxUaG91Z2h0UHJvZ3Jlc3M+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBib2FyZHMgPSBuZXcgSGFzaFNldDxCb2FyZD4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgdGVtcGxhdGUuU2l6ZXMuQ291bnQpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgcG90U2V0ID0gRW51bWVyYWJsZS5SYW5nZSgwLCBjb2xvckNvdW50KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHBvdCA9IHBvdFNldC5Ub0ludDY0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZml4ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGludCxpbnQ+KHZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBNYXRoLkFicyh0ZW1wbGF0ZS5TaXplc1t2XSAtIGNvbG9yQ291bnQgLyAyKSkpLkZpcnN0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYm9hcmRzQ2h1bmsgPSBuZXcgTGlzdDxCb2FyZD4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGFzc2lnbm1lbnRTZXRzIGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KHZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KSh2ID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2ID09IGZpeClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxpbnQ+KHBvdFNldCx0ZW1wbGF0ZS5TaXplc1t2XSkuVG9MaXN0KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KHBvdFNldCwgdGVtcGxhdGUuU2l6ZXNbdl0pO1xyXG4gICAgICAgICAgICB9KSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2V0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihhc3NpZ25tZW50U2V0cyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG90YWxDb2xvcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihzZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KShzZXQgPT4gc2V0KSkuRGlzdGluY3QoKS5Db3VudCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRvdGFsQ29sb3JzIDwgY29sb3JDb3VudClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sbG9uZz4oc2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgbG9uZz4pKGxpc3QgPT4gbGlzdC5Ub0ludDY0KCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3VwZXJBYnVuZGFudCA9IEtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaC5EZWdyZWVDb25kaXRpb24oc3RhY2tzLCBwb3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkID0gbmV3IEJvYXJkKHN0YWNrcywgcG90KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoU3VwZXJhYnVuZGFudE9ubHkgJiYgIXN1cGVyQWJ1bmRhbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgYm9hcmRzLkFkZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICBib2FyZHNDaHVuay5BZGQoYm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChib2FyZHNDaHVuay5Db3VudCA+IDEwMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFRob3VnaHRQcm9ncmVzcygpIHsgQm9hcmRzQWRkZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihib2FyZHNDaHVuayksIFdpbkxlbmd0aCA9IC0xIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBib2FyZHNDaHVuay5DbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoYm9hcmRzQ2h1bmsuQ291bnQgPiAwICYmIHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVGhvdWdodFByb2dyZXNzKCkgeyBCb2FyZHNBZGRlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KGJvYXJkc0NodW5rKSwgV2luTGVuZ3RoID0gLTEgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYm9hcmRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGludCBUcmVlTm9kZU51bWJlciA9IDE7XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEtub3dsZWRnZVRyZWU+IEVudW1lcmF0ZUtub3dsZWRnZVRyZWVzKFRlbXBsYXRlIHRlbXBsYXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlS25vd2xlZGdlID0gS25vd2xlZGdlW3RlbXBsYXRlXTtcclxuICAgICAgICAgICAgdmFyIGNvbG9yQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oTWV0YUtub3dsZWRnZS5OYXR1cmFscygpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKG4gPT4gdGVtcGxhdGVLbm93bGVkZ2UuS25vd2xlZGdlRXhpc3RzKG4pICYmICF0ZW1wbGF0ZUtub3dsZWRnZS5Lbm93bGVkZ2VFeGlzdHMobiArIDEpKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuQm9hcmRLbm93bGVkZ2U+LGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLktub3dsZWRnZVRyZWU+KHRlbXBsYXRlS25vd2xlZGdlW2NvbG9yQ291bnRdLkVudW1lcmF0ZUJvYXJkS25vd2xlZGdlKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuQm9hcmRLbm93bGVkZ2U+LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5Lbm93bGVkZ2VUcmVlPikoa3ZwID0+IEdlbmVyYXRlS25vd2xlZGdlVHJlZShrdnAuS2V5KSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgS25vd2xlZGdlVHJlZSBHZW5lcmF0ZUtub3dsZWRnZVRyZWUoQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUcmVlTm9kZU51bWJlciA9IDE7XHJcbiAgICAgICAgICAgIHZhciBzZWVuQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTxCb2FyZCwgVHVwbGU8aW50LCBCb2FyZD4+KCk7XHJcbiAgICAgICAgICAgIHZhciBrbm93bGVkZ2VUcmVlID0gbmV3IEtub3dsZWRnZVRyZWUoKTtcclxuICAgICAgICAgICAgRmlsbEtub3dsZWRnZVRyZWUoa25vd2xlZGdlVHJlZSwgYm9hcmQsIHNlZW5DYWNoZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ga25vd2xlZGdlVHJlZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdm9pZCBGaWxsS25vd2xlZGdlVHJlZShLbm93bGVkZ2VUcmVlIGtub3dsZWRnZVRyZWUsIEJvYXJkIGJvYXJkLCBEaWN0aW9uYXJ5PEJvYXJkLCBUdXBsZTxpbnQsIEJvYXJkPj4gc2VlbkNhY2hlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAga25vd2xlZGdlVHJlZS5Cb2FyZCA9IGJvYXJkLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGtub3dsZWRnZVRyZWUuTnVtYmVyID0gVHJlZU5vZGVOdW1iZXIrKztcclxuXHJcbiAgICAgICAgICAgIHZhciBrbm93bGVkZ2UgPSBLbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdW2JvYXJkXTtcclxuICAgICAgICAgICAgaWYgKGtub3dsZWRnZS5FeGlzdHMoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtub3dsZWRnZS5SZWFzb24gIT0gXCJnb29kIHN3YXBcIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrbm93bGVkZ2VUcmVlLk5vdGUgPSBrbm93bGVkZ2UuUmVhc29uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFR1cGxlPGludCwgQm9hcmQ+IHNlZW5Cb2FyZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VlbkNhY2hlLlRyeUdldFZhbHVlKGJvYXJkLCBvdXQgc2VlbkJvYXJkKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtub3dsZWRnZVRyZWUuTm90ZSA9IFwic2FtZSBhcyAjXCIgKyBzZWVuQm9hcmQuSXRlbTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0ga25vd2xlZGdlLkJvYXJkLkZpbmRQZXJtdXRhdGlvbihib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9ycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQm9hcmQuQXBwbHlNYXBwaW5nKGYsIG5ld1tdIHsga25vd2xlZGdlLkNvbG9yUGFpci5JdGVtMSwga25vd2xlZGdlLkNvbG9yUGFpci5JdGVtMiB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yUGFpciA9IG5ldyBUdXBsZTxpbnQsIGludD4oY29sb3JzWzBdLCBjb2xvcnNbMV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgc3dhcCBpbiBrbm93bGVkZ2UuU3dhcHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcEJvYXJkID0gYm9hcmQuQ2xvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vdmVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlLGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZT4oc3dhcC5JdGVtMiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmUsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZT4pKG0gPT4gTWV0YUtub3dsZWRnZS5NYXBNb3ZlKGYsIG0pKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBCb2FyZC5Eb01vdmVDb21iaW5hdGlvbihtb3Zlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRLbm93bGVkZ2VUcmVlID0ga25vd2xlZGdlVHJlZS5BZGRDaGlsZChzd2FwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRLbm93bGVkZ2VUcmVlLkNvbG9yUGFpciA9IGNvbG9yUGFpcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRmlsbEtub3dsZWRnZVRyZWUoY2hpbGRLbm93bGVkZ2VUcmVlLCB0ZW1wQm9hcmQsIHNlZW5DYWNoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcInNvbWV0aGluZyB3ZW50IHdyb25nIGluIGJ1aWxkaW5nIHNlYXJjaCB0cmVlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZWVuQ2FjaGVbYm9hcmRdID0gbmV3IFR1cGxlPGludCwgQm9hcmQ+KGtub3dsZWRnZVRyZWUuTnVtYmVyLCBib2FyZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHVwbGU8R3JhcGgsIERpY3Rpb25hcnk8aW50LCBLZXlWYWx1ZVBhaXI8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPj4sIERpY3Rpb25hcnk8VHVwbGU8aW50LCBpbnQ+LCBUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4+PiBHZW5lcmF0ZVRlbXBsYXRlS25vd2xlZGdlR3JhcGgoVGVtcGxhdGUgdGVtcGxhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVLbm93bGVkZ2UgPSBLbm93bGVkZ2VbdGVtcGxhdGVdO1xyXG4gICAgICAgICAgICB2YXIgY29sb3JDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihNZXRhS25vd2xlZGdlLk5hdHVyYWxzKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikobiA9PiB0ZW1wbGF0ZUtub3dsZWRnZS5Lbm93bGVkZ2VFeGlzdHMobikgJiYgIXRlbXBsYXRlS25vd2xlZGdlLktub3dsZWRnZUV4aXN0cyhuICsgMSkpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZXh0VmVydGV4SUQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdmVydGV4TG9va3VwID0gbmV3IERpY3Rpb25hcnk8Qm9hcmQsIGludD4oKTtcclxuICAgICAgICAgICAgdmFyIHN3YXBMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxUdXBsZTxpbnQsIGludD4sIFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPj4oKTtcclxuICAgICAgICAgICAgdmFyIGJvYXJkTG9va3VwID0gbmV3IERpY3Rpb25hcnk8aW50LCBLZXlWYWx1ZVBhaXI8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPj4oKTtcclxuICAgICAgICAgICAgdmFyIG91dEVkZ2VzID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIHRlbXBsYXRlS25vd2xlZGdlW2NvbG9yQ291bnRdLkVudW1lcmF0ZUJvYXJkS25vd2xlZGdlKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZlcnRleExvb2t1cFtrdnAuS2V5XSA9IG5leHRWZXJ0ZXhJRDtcclxuICAgICAgICAgICAgICAgIGJvYXJkTG9va3VwW25leHRWZXJ0ZXhJRF0gPSBrdnA7XHJcbiAgICAgICAgICAgICAgICBvdXRFZGdlc1tuZXh0VmVydGV4SURdID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgbmV4dFZlcnRleElEKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHRlbXBsYXRlS25vd2xlZGdlLkxvc3RCb2FyZHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZlcnRleExvb2t1cFtiXSA9IG5leHRWZXJ0ZXhJRDtcclxuICAgICAgICAgICAgICAgIGJvYXJkTG9va3VwW25leHRWZXJ0ZXhJRF0gPSBuZXcgS2V5VmFsdWVQYWlyPEJvYXJkLCBCb2FyZEtub3dsZWRnZT4oYiwgbmV3IEJvYXJkS25vd2xlZGdlKGIsIFwiYnJlYWtlciB3aW5zXCIpKTtcclxuICAgICAgICAgICAgICAgIG91dEVkZ2VzW25leHRWZXJ0ZXhJRF0gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICBuZXh0VmVydGV4SUQrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGt2cCBpbiB0ZW1wbGF0ZUtub3dsZWRnZVtjb2xvckNvdW50XS5FbnVtZXJhdGVCb2FyZEtub3dsZWRnZSgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa3ZwLlZhbHVlLlJlYXNvbiA9PSBcImdvb2Qgc3dhcFwiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gdmVydGV4TG9va3VwW2t2cC5LZXldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGt2cC5WYWx1ZS5Cb2FyZC5GaW5kUGVybXV0YXRpb24oa3ZwLktleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9ycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQm9hcmQuQXBwbHlNYXBwaW5nKGYsIG5ld1tdIHsga3ZwLlZhbHVlLkNvbG9yUGFpci5JdGVtMSwga3ZwLlZhbHVlLkNvbG9yUGFpci5JdGVtMiB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yUGFpciA9IG5ldyBUdXBsZTxpbnQsIGludD4oY29sb3JzWzBdLCBjb2xvcnNbMV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgc3dhcCBpbiBrdnAuVmFsdWUuU3dhcHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcEJvYXJkID0ga3ZwLktleS5DbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW92ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmUsZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPihzd2FwLkl0ZW0yLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZSwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPikobSA9PiBNZXRhS25vd2xlZGdlLk1hcE1vdmUoZiwgbSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcEJvYXJkLkRvTW92ZUNvbWJpbmF0aW9uKG1vdmVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gdmVydGV4TG9va3VwW3RlbXBCb2FyZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dEVkZ2VzW3ZdLkFkZCh3KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3YXBMb29rdXBbbmV3IFR1cGxlPGludCwgaW50Pih2LCB3KV0gPSBzd2FwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVkZ2VXZWlnaHRzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG5leHRWZXJ0ZXhJRDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBuZXh0VmVydGV4SUQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3V0RWRnZXNbaV0uQ29udGFpbnMoaikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgxKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvdXRFZGdlc1tqXS5Db250YWlucyhpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVdlaWdodHMuQWRkKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUdXBsZTxHcmFwaCwgRGljdGlvbmFyeTxpbnQsIEtleVZhbHVlUGFpcjxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+PiwgRGljdGlvbmFyeTxUdXBsZTxpbnQsIGludD4sIFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPj4+KG5ldyBHcmFwaChlZGdlV2VpZ2h0cyksIGJvYXJkTG9va3VwLCBzd2FwTG9va3VwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUG90S25vd2xlZGdlXHJcbiAgICB7XHJcbiAgICAgICAgRGljdGlvbmFyeTxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+IF9ib2FyZExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PEJvYXJkLCBCb2FyZEtub3dsZWRnZT4oKTtcclxuICAgICAgICBEaWN0aW9uYXJ5PHN0cmluZywgRGljdGlvbmFyeTxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+PiBfaW1wcm92ZW1lbnRMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIERpY3Rpb25hcnk8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPj4oKTtcclxuICAgICAgICBIYXNoU2V0PEJvYXJkPiBfbG9zdEJvYXJkcyA9IG5ldyBIYXNoU2V0PEJvYXJkPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IENvbG9yQ291bnQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFR1cGxlPGludCwgaW50Pj4gQ29sb3JQYWlycyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8Qm9hcmQ+IExvc3RCb2FyZHMgeyBnZXQgeyByZXR1cm4gX2xvc3RCb2FyZHM7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm9hcmRLbm93bGVkZ2UgdGhpc1tCb2FyZCBib2FyZF0gXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgICAgZ2V0IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBCb2FyZEtub3dsZWRnZSBiO1xyXG4gICAgICAgICAgICAgICAgX2JvYXJkTG9va3VwLlRyeUdldFZhbHVlKGJvYXJkLCBvdXQgYik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYjtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIERpY3Rpb25hcnk8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPiBJbXByb3ZlbWVudExvb2t1cChzdHJpbmcgcmVhc29uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRGljdGlvbmFyeTxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+IGxvb2t1cDtcclxuICAgICAgICAgICAgaWYgKCFfaW1wcm92ZW1lbnRMb29rdXAuVHJ5R2V0VmFsdWUocmVhc29uLCBvdXQgbG9va3VwKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9va3VwID0gbmV3IERpY3Rpb25hcnk8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPigpO1xyXG4gICAgICAgICAgICAgICAgX2ltcHJvdmVtZW50TG9va3VwW3JlYXNvbl0gPSBsb29rdXA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsb29rdXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBCb2FyZEtub3dsZWRnZSB0aGlzW3N0cmluZyByZWFzb24sIEJvYXJkIGJvYXJkXVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEJvYXJkS25vd2xlZGdlIGI7XHJcbiAgICAgICAgICAgICAgICBJbXByb3ZlbWVudExvb2t1cChyZWFzb24pLlRyeUdldFZhbHVlKGJvYXJkLCBvdXQgYik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSW1wcm92ZW1lbnRMb29rdXAocmVhc29uKVtib2FyZF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFBvdEtub3dsZWRnZShpbnQgY29sb3JDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbG9yQ291bnQgPSBjb2xvckNvdW50O1xyXG4gICAgICAgICAgICBTZXR1cENvbG9yUGFpcnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBCb2FyZEtub3dsZWRnZSBBZGRXaW4oQm9hcmQgYm9hcmQsIHN0cmluZyByZWFzb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIga25vd2xlZGdlID0gbmV3IEJvYXJkS25vd2xlZGdlKGJvYXJkLCByZWFzb24pO1xyXG4gICAgICAgICAgICBfYm9hcmRMb29rdXBbYm9hcmRdID0ga25vd2xlZGdlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGtub3dsZWRnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBCb2FyZEtub3dsZWRnZSBBZGRXaW4oQm9hcmQgYm9hcmQsIHN0cmluZyByZWFzb24sIGludCB3aW5EZXB0aCwgVHVwbGU8aW50LCBpbnQ+IGNvbG9yUGFpciwgTGlzdDxUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4+IGdvb2RTd2FwcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBrbm93bGVkZ2UgPSBuZXcgQm9hcmRLbm93bGVkZ2UoYm9hcmQsIHJlYXNvbikgeyBEZXB0aCA9IHdpbkRlcHRoLCBDb2xvclBhaXIgPSBjb2xvclBhaXIsIFN3YXBzID0gZ29vZFN3YXBzIH07XHJcbiAgICAgICAgICAgIF9ib2FyZExvb2t1cFtib2FyZF0gPSBrbm93bGVkZ2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ga25vd2xlZGdlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEJvYXJkS25vd2xlZGdlIEFkZEltcHJvdmVtZW50KEJvYXJkIGJvYXJkLCBzdHJpbmcgcmVhc29uLCBpbnQgd2luRGVwdGgsIFR1cGxlPGludCwgaW50PiBjb2xvclBhaXIsIExpc3Q8VHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+PiBnb29kU3dhcHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIga25vd2xlZGdlID0gbmV3IEJvYXJkS25vd2xlZGdlKGJvYXJkLCByZWFzb24pIHsgRGVwdGggPSB3aW5EZXB0aCwgQ29sb3JQYWlyID0gY29sb3JQYWlyLCBTd2FwcyA9IGdvb2RTd2FwcyB9O1xyXG4gICAgICAgICAgICB0aGlzW3JlYXNvbiwgYm9hcmRdID0ga25vd2xlZGdlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGtub3dsZWRnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZExvc3MoQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9sb3N0Qm9hcmRzLkFkZChiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU2V0dXBDb2xvclBhaXJzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbG9yUGFpcnMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcbiAgICAgICAgICAgIHZhciBjb2xvcnMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIENvbG9yQ291bnQpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xvcnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGNvbG9ycy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIENvbG9yUGFpcnMuQWRkKG5ldyBUdXBsZTxpbnQsIGludD4oY29sb3JzW2ldLCBjb2xvcnNbal0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENvcHlJbnRvKFBvdEtub3dsZWRnZSBwb3RLbm93bGVkZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIF9ib2FyZExvb2t1cClcclxuICAgICAgICAgICAgICAgIHBvdEtub3dsZWRnZS5BZGRXaW4oa3ZwLktleSwga3ZwLlZhbHVlLlJlYXNvbiwga3ZwLlZhbHVlLkRlcHRoLCBrdnAuVmFsdWUuQ29sb3JQYWlyLCBrdnAuVmFsdWUuU3dhcHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEtleVZhbHVlUGFpcjxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+PiBFbnVtZXJhdGVCb2FyZEtub3dsZWRnZSgpXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeURlc2NlbmRpbmc8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuQm9hcmRLbm93bGVkZ2U+LGludD4oX2JvYXJkTG9va3VwLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLkJvYXJkS25vd2xlZGdlPiwgaW50PikoeCA9PiB4LlZhbHVlLkRlcHRoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTbGltU3dhcEFuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgS25vd2xlZGdlIF9rbm93bGVkZ2U7XHJcbiAgICAgICAgRGljdGlvbmFyeTxpbnQsIEJvYXJkPiBfYm9hcmRMb29rdXA7XHJcbiAgICAgICAgRGljdGlvbmFyeTxCb2FyZCwgaW50PiBfYm9hcmRJRExvb2t1cDtcclxuICAgICAgICBEaWN0aW9uYXJ5PGludCwgTGlzdDxMaXN0PFNvcnRlZEludExpc3Q+Pj4gX3NocnVicyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxMaXN0PFNvcnRlZEludExpc3Q+Pj4oKTtcclxuICAgICAgICBib29sIF91c2VTaHJ1YnM7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTbGltU3dhcEFuYWx5emVyKEtub3dsZWRnZSBrbm93bGVkZ2UsIERpY3Rpb25hcnk8aW50LCBCb2FyZD4gYm9hcmRMb29rdXAsIERpY3Rpb25hcnk8Qm9hcmQsIGludD4gYm9hcmRJRExvb2t1cCwgYm9vbCB1c2VTaHJ1YnMgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9rbm93bGVkZ2UgPSBrbm93bGVkZ2U7XHJcbiAgICAgICAgICAgIF9ib2FyZExvb2t1cCA9IGJvYXJkTG9va3VwO1xyXG4gICAgICAgICAgICBfYm9hcmRJRExvb2t1cCA9IGJvYXJkSURMb29rdXA7XHJcbiAgICAgICAgICAgIF91c2VTaHJ1YnMgPSB1c2VTaHJ1YnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKGludCBib2FyZElELCBTb3J0ZWRJbnRMaXN0IHdvbkJvYXJkSURzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFfdXNlU2hydWJzKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFuYWx5emVTaHJ1YkZyZWUoYm9hcmRJRCwgd29uQm9hcmRJRHMpO1xyXG5cclxuICAgICAgICAgICAgTGlzdDxMaXN0PFNvcnRlZEludExpc3Q+PiBzaHJ1YjtcclxuICAgICAgICAgICAgaWYgKCFfc2hydWJzLlRyeUdldFZhbHVlKGJvYXJkSUQsIG91dCBzaHJ1YikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSW5pdGlhbGl6ZVNocnVicyhib2FyZElELCB3b25Cb2FyZElEcyk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JQYWlyTGlzdCBpbiBzaHJ1YilcclxuICAgICAgICAgICAge1xyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlNvcnRlZEludExpc3Q+KCAgICAgICAgICAgICAgICBjb2xvclBhaXJMaXN0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU29ydGVkSW50TGlzdCwgYm9vbD4pKGJyYW5jaExpc3QgPT4gYnJhbmNoTGlzdC5JbnRlcnNlY3RzKHdvbkJvYXJkSURzKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5Tb3J0ZWRJbnRMaXN0PikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbG9yUGFpckxpc3QuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBBbmFseXplU2hydWJGcmVlKGludCBib2FyZElELCBTb3J0ZWRJbnRMaXN0IHdvbkJvYXJkSURzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJvYXJkID0gX2JvYXJkTG9va3VwW2JvYXJkSURdO1xyXG4gICAgICAgICAgICB2YXIgcG90S25vd2xlZGdlID0gX2tub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF07XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JQYWlyIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeURlc2NlbmRpbmc8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LGludD4ocG90S25vd2xlZGdlLkNvbG9yUGFpcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBpbnQ+KShwYWlyID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihDaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkVudW1lcmF0ZUV4YWN0bHlPbmVJbnRlcnNlY3RlcnMoYm9hcmQsIHBhaXIpKSAlIDIpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBicmFuY2ggaW4gQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5FbnVtZXJhdGVCcmFuY2hlcyhib2FyZCwgY29sb3JQYWlyKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBFeGlzdHMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHN3YXAgaW4gYnJhbmNoKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9hcmQuRG9Nb3ZlQ29tYmluYXRpb24oc3dhcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZElEID0gX2JvYXJkSURMb29rdXBbYm9hcmRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2FyZC5Eb01vdmVDb21iaW5hdGlvbihzd2FwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b25Cb2FyZElEcy5Db250YWlucyhjaGlsZElEKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghd2lubmluZ1N3YXBFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIEluaXRpYWxpemVTaHJ1YnMoaW50IGJvYXJkSUQsIFNvcnRlZEludExpc3Qgd29uQm9hcmRJRHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2hydWIgPSBuZXcgTGlzdDxMaXN0PFNvcnRlZEludExpc3Q+PigpO1xyXG4gICAgICAgICAgICBfc2hydWJzW2JvYXJkSURdID0gc2hydWI7XHJcblxyXG4gICAgICAgICAgICB2YXIgYm9hcmQgPSBfYm9hcmRMb29rdXBbYm9hcmRJRF07XHJcbiAgICAgICAgICAgIHZhciBwb3RLbm93bGVkZ2UgPSBfa25vd2xlZGdlW2JvYXJkLlRlbXBsYXRlLlZhbHVlXVtib2FyZC5Db2xvckNvdW50XTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvclBhaXIgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5RGVzY2VuZGluZzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4saW50Pihwb3RLbm93bGVkZ2UuQ29sb3JQYWlycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGludD4pKHBhaXIgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KENocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuRW51bWVyYXRlRXhhY3RseU9uZUludGVyc2VjdGVycyhib2FyZCwgcGFpcikpICUgMikpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sb3JQYWlyTGlzdCA9IG5ldyBMaXN0PFNvcnRlZEludExpc3Q+KCk7XHJcbiAgICAgICAgICAgICAgICBzaHJ1Yi5BZGQoY29sb3JQYWlyTGlzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBicmFuY2ggaW4gQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5FbnVtZXJhdGVCcmFuY2hlcyhib2FyZCwgY29sb3JQYWlyKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnJhbmNoTGlzdCA9IG5ldyBTb3J0ZWRJbnRMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwRXhpc3RzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzd2FwIGluIGJyYW5jaClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvYXJkLkRvTW92ZUNvbWJpbmF0aW9uKHN3YXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRJRCA9IF9ib2FyZElETG9va3VwW2JvYXJkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9hcmQuRG9Nb3ZlQ29tYmluYXRpb24oc3dhcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod29uQm9hcmRJRHMuQ29udGFpbnMoY2hpbGRJRCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmFuY2hMaXN0LkFkZChjaGlsZElEKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghd2lubmluZ1N3YXBFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclBhaXJMaXN0LkFkZChicmFuY2hMaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU29ydGVkSW50TGlzdFxyXG4gICAge1xyXG4gICAgICAgIGludFtdIF9kYXRhO1xyXG4gICAgICAgIGludCBfbGVuZ3RoO1xyXG5cclxuICAgICAgICBwdWJsaWMgU29ydGVkSW50TGlzdChpbnQgaW5pdGlhbENhcGFjaXR5ID0gMTYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZGF0YSA9IG5ldyBpbnRbaW5pdGlhbENhcGFjaXR5XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZChpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gQXJyYXkuQmluYXJ5U2VhcmNoPGludD4oX2RhdGEsIDAsIF9sZW5ndGgsIHgpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgRW5zdXJlQ2FwYWNpdHkoKTtcclxuXHJcbiAgICAgICAgICAgIGkgPSB+aTtcclxuICAgICAgICAgICAgaWYgKGkgPCBfbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgQXJyYXkuQ29weShfZGF0YSwgaSwgX2RhdGEsIGkgKyAxLCBfbGVuZ3RoIC0gaSk7XHJcblxyXG4gICAgICAgICAgICBfZGF0YVtpXSA9IHg7XHJcbiAgICAgICAgICAgIF9sZW5ndGgrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKGludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFycmF5LkJpbmFyeVNlYXJjaDxpbnQ+KF9kYXRhLCAwLCBfbGVuZ3RoLCB4KSA+PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSW50ZXJzZWN0cyhTb3J0ZWRJbnRMaXN0IG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGogPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGsgPSBBcnJheS5CaW5hcnlTZWFyY2g8aW50PihvdGhlci5fZGF0YSwgaiwgb3RoZXIuX2xlbmd0aCAtIGosIF9kYXRhW2ldKTtcclxuICAgICAgICAgICAgICAgIGlmIChrID49IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICBqID0gfms7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBFbnN1cmVDYXBhY2l0eSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2xlbmd0aCA+PSBfZGF0YS5MZW5ndGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IGludFsyICogX2RhdGEuTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoX2RhdGEsIGRhdGEsIF9kYXRhLkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBfZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCb2FyZExleGlmaWVyXHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIERpY3Rpb25hcnk8c3RyaW5nLCBUdXBsZTxzdHJpbmcsIFBlcm11dGF0aW9uPj4gX2xvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgVHVwbGU8c3RyaW5nLCBQZXJtdXRhdGlvbj4+KCk7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihsb25nW10gc3MsIG91dCBQZXJtdXRhdGlvbiBwcCwgaW50IG1heFBvdCA9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxpc3RzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oc3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsID0+IGwuVG9TZXQoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgcG90ID0gbWF4UG90O1xyXG4gICAgICAgICAgICBpZiAocG90IDw9IDApXHJcbiAgICAgICAgICAgICAgICBwb3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihsaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PikobCA9PiBsKSkuRGlzdGluY3QoKS5Db3VudCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGxpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikocyA9PiBzLkNvdW50IDw9IHBvdCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gVG9MZXhPcmRlcihzdHJpbmcuSm9pbihcInxcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sc3RyaW5nPihzdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIHN0cmluZz4pKHMgPT4gc3RyaW5nLkpvaW48aW50PihcIlwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8aW50LGludD4ocywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHggPT4geCkpKSkpKSwgb3V0IHBwLCBtYXhQb3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHN0cmluZyBUb0xleE9yZGVyKHN0cmluZyBzdGFja3NTdHJpbmcsIG91dCBQZXJtdXRhdGlvbiBwcCwgaW50IG1heFBvdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBzdGFja3NTdHJpbmcgKyBcIjtcIiArIG1heFBvdDtcclxuICAgICAgICAgICAgVHVwbGU8c3RyaW5nLCBQZXJtdXRhdGlvbj4gdHVwO1xyXG4gICAgICAgICAgICBpZiAoX2xvb2t1cC5UcnlHZXRWYWx1ZShrZXksIG91dCB0dXApKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwcCA9IHR1cC5JdGVtMjtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0dXAuSXRlbTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBwID0gbnVsbDtcclxuICAgICAgICAgICAgc3RyaW5nIGxleFNtYWxsZXN0O1xyXG4gICAgICAgICAgICB2YXIgc3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihzdGFja3NTdHJpbmcuU3BsaXQoJ3wnKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikocyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxjaGFyLGludD4ocy5Ub0NoYXJBcnJheSgpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGNoYXIsIGludD4pKGMgPT4gaW50LlBhcnNlKGMuVG9TdHJpbmcoKSkpKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBsZXhTbWFsbGVzdCA9IHN0YWNrc1N0cmluZztcclxuXHJcbiAgICAgICAgICAgIHZhciBwb3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihzdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKGwgPT4gbCkpLkRpc3RpbmN0KCkuQ291bnQoKTtcclxuICAgICAgICAgICAgaWYgKG1heFBvdCA+IDApXHJcbiAgICAgICAgICAgICAgICBwb3QgPSBtYXhQb3Q7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgcCBpbiBQZXJtdXRhdGlvbi5FbnVtZXJhdGVBbGwocG90KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBlcm11dGVkU3RyaW5nID0gc3RyaW5nLkpvaW4oXCJ8XCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LHN0cmluZz4oc3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBzdHJpbmc+KShzID0+IHN0cmluZy5Kb2luPGludD4oXCJcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4ocywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGEgPT4gcFthXSkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHggPT4geCkpKSkpKTtcclxuICAgICAgICAgICAgICAgIGlmIChwZXJtdXRlZFN0cmluZy5Db21wYXJlVG8obGV4U21hbGxlc3QpIDw9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV4U21hbGxlc3QgPSBwZXJtdXRlZFN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICBwcCA9IHA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF9sb29rdXBba2V5XSA9IG5ldyBUdXBsZTxzdHJpbmcsIFBlcm11dGF0aW9uPihsZXhTbWFsbGVzdCwgcHApO1xyXG4gICAgICAgICAgICByZXR1cm4gbGV4U21hbGxlc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBzdGF0aWMgY2xhc3MgSGFzaGluZ1xyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGludCBNYXhMZW5ndGggPSAzMjtcclxuICAgICAgICBzdGF0aWMgTGlzdDx1bG9uZz4gX207XHJcblxyXG4gICAgICAgIHN0YXRpYyBIYXNoaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9tID0gbmV3IExpc3Q8dWxvbmc+KE1heExlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgUk5HID0gbmV3IFJhbmRvbShEYXRlVGltZS5Ob3cuTWlsbGlzZWNvbmQpO1xyXG4gICAgICAgICAgICB2YXIgYiA9IG5ldyBieXRlWzhdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBNYXhMZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUk5HLk5leHRCeXRlcyhiKTtcclxuICAgICAgICAgICAgICAgIF9tLkFkZChCaXRDb252ZXJ0ZXIuVG9VSW50NjQoYiwgMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBIYXNoKHVsb25nW10gbGlzdCwgaW50IGxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIGhhc2ggPSBsaXN0WzBdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGhhc2ggKz0gX21baSAtIDFdICogbGlzdFtpXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KShoYXNoID4+IDMyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mc1xyXG57XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgUHJvb2ZCdWlsZGVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbU1pbmQgTWluZCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxQcm9vZkNhc2U+IENhc2VzIHsgZ2V0OyBwcm90ZWN0ZWQgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgVXNlUGVybXV0YXRpb25zIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFByb29mQnVpbGRlcihTdXBlclNsaW1NaW5kIG1pbmQsIGJvb2wgdXNlUGVybXV0YXRpb25zID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNaW5kID0gbWluZDtcclxuICAgICAgICAgICAgVXNlUGVybXV0YXRpb25zID0gdXNlUGVybXV0YXRpb25zO1xyXG4gICAgICAgICAgICBFeHRyYWN0Q2FzZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXh0cmFjdENhc2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENhc2VzID0gbmV3IExpc3Q8UHJvb2ZDYXNlPigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNhc2VOdW1iZXIgPSAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9yYWJsZUNhc2UgPSBuZXcgUHJvb2ZDYXNlKE1pbmQsIDAsIE1pbmQuQ29sb3JhYmxlQm9hcmRzKTtcclxuICAgICAgICAgICAgQ2FzZXMuQWRkKGNvbG9yYWJsZUNhc2UpO1xyXG4gICAgICAgICAgICBjYXNlTnVtYmVyKys7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVtYWluaW5nQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oTWluZC5Ob25Db2xvcmFibGVCb2FyZHMpO1xyXG4gICAgICAgICAgICB2YXIgd29uQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oTWluZC5Db2xvcmFibGVCb2FyZHMpO1xyXG4gICAgICAgICAgICB3aGlsZSAocmVtYWluaW5nQm9hcmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb29mQ2FzZSA9IG5ldyBQcm9vZkNhc2UoTWluZCwgY2FzZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICBDYXNlcy5BZGQocHJvb2ZDYXNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYWRkZWRCb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBib2FyZCBpbiByZW1haW5pbmdCb2FyZHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhib2FyZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gd29uQm9hcmRzLkNvbnRhaW5zKG5ldyBTdXBlclNsaW1Cb2FyZChib2FyZC5fdHJhY2UsIGJjLkFscGhhLCBiYy5CZXRhLCBiYy5SZXNwb25zZSwgYm9hcmQuX3N0YWNrQ291bnQpKSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEJvYXJkcy5BZGQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBib2FyZCBpbiBhZGRlZEJvYXJkcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9vZkNhc2UuQWRkQm9hcmQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdvbkJvYXJkcy5BZGQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbWFpbmluZ0JvYXJkcy5SZW1vdmUoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNhc2VOdW1iZXIrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgaW50IEdldEhhbmRsZWRDYXNlTnVtYmVyKFN1cGVyU2xpbUJvYXJkIGIsIEJyZWFrZXJDaG9pY2VJbmZvIGJjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkQm9hcmQgPSBuZXcgU3VwZXJTbGltQm9hcmQoYi5fdHJhY2UsIGJjLkFscGhhLCBiYy5CZXRhLCBiYy5SZXNwb25zZSwgYi5fc3RhY2tDb3VudCk7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuUHJvb2ZDYXNlPihDYXNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5Qcm9vZkNhc2UsIGJvb2w+KShjYyA9PiBjYy5Cb2FyZHMuQ29udGFpbnMoY2hpbGRCb2FyZCkpKSkgKyAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IHN0cmluZyBXcml0ZVByb29mKCk7XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEdldEFydGljbGUodGhpcyBzdHJpbmcgbGV0dGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3dpdGNoIChsZXR0ZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJYXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYW5cIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJZXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlpcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgTGlzdGlmeTxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IHN0cmluZ3MsIHN0cmluZyBjb25uZWN0b3IgPSBcImFuZFwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxsID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8VD4oc3RyaW5ncyk7XHJcbiAgICAgICAgICAgIGlmIChsbC5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgIGlmIChsbC5Db3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxsWzBdLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29ubmVjdG9yICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW48VD4oXCIsIFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8VD4obGwsbGwuQ291bnQgLSAxKSkgKyBcIiBcIiArIGNvbm5lY3RvciArIFwiIFwiICsgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5MYXN0PFQ+KGxsKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbjxUPihcIiwgXCIsIGxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFdvcmRpZnkodGhpcyBpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImZpcnN0XCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2Vjb25kXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidGhpcmRcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJmb3VydGhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJmaWZ0aFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNpeHRoXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2V2ZW50aFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImVpZ2h0aFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5pbnRoXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidGVudGhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTA6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZWxldmVudGhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChuICsgMSkgKyBcIi10aFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxUPiBFeGNlcHQ8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBsaXN0LCBUIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8VD4obGlzdCxuZXdbXSB7IHQgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBNYXhJbmRleDxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IGxpc3QsIEZ1bmM8VCwgaW50PiB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtYXhJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgbWF4ID0gaW50Lk1pblZhbHVlO1xyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIGxpc3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB2ID0gdmFsdWUodCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodiA+IG1heClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXggPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgIG1heEluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXhJbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8VD4gRGlzdGluY3Q8VCwgUz4odGhpcyBJRW51bWVyYWJsZTxUPiBsaXN0LCBGdW5jPFQsIFM+IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRpc3RpbmN0ID0gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gbGlzdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxUPihkaXN0aW5jdCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBib29sPikodHQgPT4gdmFsdWUodHQpLkVxdWFscyh2YWx1ZSh0KSkpKSlcclxuICAgICAgICAgICAgICAgICAgICBkaXN0aW5jdC5BZGQodCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkaXN0aW5jdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuQXJiaXRyYXJ5TWF4RGVncmVlXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvVGV4KHRoaXMgU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXIgbWF0Y2hlciwgTGlzdDxMaXN0PGludD4+IGxpc3RzLCBpbnQgbGlzdFNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hlci5OYW1lID09IFwiKlwiKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiXCIsIEVudW1lcmFibGUuUmVwZWF0PHN0cmluZz4oXCJcXFxcd2lsZFwiLCBsaXN0U2l6ZSkpICsgXCIgXCI7XHJcblxyXG4gICAgICAgICAgICBpbnQgaTtcclxuICAgICAgICAgICAgaWYgKCFpbnQuVHJ5UGFyc2UobWF0Y2hlci5OYW1lLCBvdXQgaSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI/XCI7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW48aW50PihcIlwiLCBsaXN0c1tpXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRBY3RpdmVMaXN0SW5kZXgodGhpcyBpbnQgaSwgU3VwZXJTbGltQm9hcmQgYiwgaW50IG1heFBvdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8bG9uZz4oYi5TdGFja3MuVmFsdWUsaSArIDEpLkNvdW50KChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGJvb2w+KShzcyA9PiBzcy5Qb3B1bGF0aW9uQ291bnQoKSA8IG1heFBvdCkpIC0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuTWF4RGVncmVlVGhyZWVcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3RyaW5nIEFscGhhYmV0ID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWlwiO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1hZWih0aGlzIFN1cGVyU2xpbUJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihib2FyZC5TdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgc3RyaW5nPilUb1hZWikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gVG8wMTIodGhpcyBTdXBlclNsaW1Cb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGludD4oYm9hcmQuU3RhY2tzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGludD4pVG8wMTIpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHggPT4geCA+PSAwKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0NvbXBhY3RlZFBhcnRpdGlvbklkKHRoaXMgU3VwZXJTbGltQm9hcmQgYm9hcmQsIExpc3Q8TGlzdDxpbnQ+PiBwYXJ0aXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeHl6ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KGJvYXJkLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KVRvWFlaKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHh5ei5Ub1BhcnRpdGlvbklkKHBhcnRpdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1BhcnRpdGlvbklkKHRoaXMgU3VwZXJTbGltQm9hcmQgYm9hcmQsIExpc3Q8TGlzdDxpbnQ+PiBwYXJ0aXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeHl6ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KGJvYXJkLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KShzdGFjayA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gc3RhY2suVG9YWVooKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocy5MZW5ndGggPD0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiKlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICAgICAgfSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHh5ei5Ub1BhcnRpdGlvbklkKHBhcnRpdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1BhcnRpdGlvbklkKHRoaXMgTGlzdDxzdHJpbmc+IHh5eiwgTGlzdDxMaXN0PGludD4+IHBhcnRpdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwcCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KHBhcnRpdGlvbiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikocGFydCA9PiBwYXJ0Lk1pbigpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcHAuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGwgPSBBbHBoYWJldFtpXS5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGogaW4gcHBbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgeHl6W2pdID0gbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiXCIsIHh5eik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1hZWih0aGlzIGxvbmcgc3RhY2spXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHN0YWNrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiWFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIllcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJaXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgVG8wMTIodGhpcyBsb25nIHN0YWNrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN0YWNrID4gNilcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgcmV0dXJuICgoaW50KXN0YWNrIC8gMikgLSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0WFlaSW5kZXgodGhpcyBpbnQgaSwgU3VwZXJTbGltQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8bG9uZz4oYi5TdGFja3MuVmFsdWUsaSArIDEpLkNvdW50KChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGJvb2w+KShzcyA9PiBzcy5Qb3B1bGF0aW9uQ291bnQoKSA9PSAyKSkgLSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9UZXgodGhpcyBTZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlciBtYXRjaGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3dpdGNoIChtYXRjaGVyLk5hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIqXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXFxcXHdpbGQgXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiMFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIxXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiWVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIjJcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJaXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiITBcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcXFxcYmFye3tYfX1cIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIhMVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlxcXFxiYXJ7e1l9fVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIiEyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXFxcXGJhcnt7Wn19XCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBcIj9cIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUHJvb2ZDYXNlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbU1pbmQgTWluZCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxTdXBlclNsaW1Cb2FyZD4gQm9hcmRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEJyZWFrZXJXaW4geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ2FzZU51bWJlciB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBTdXBlcmFidW5kYW50IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFByb29mQ2FzZShTdXBlclNsaW1NaW5kIG1pbmQsIGludCBjYXNlTnVtYmVyLCBMaXN0PFN1cGVyU2xpbUJvYXJkPiBib2FyZHMgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTWluZCA9IG1pbmQ7XHJcbiAgICAgICAgICAgIENhc2VOdW1iZXIgPSBjYXNlTnVtYmVyO1xyXG4gICAgICAgICAgICBCb2FyZHMgPSBib2FyZHM7XHJcbiAgICAgICAgICAgIGlmIChCb2FyZHMgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIEJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkQm9hcmQoU3VwZXJTbGltQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCb2FyZHMuQWRkKGJvYXJkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlcztcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN1cGVyU2xpbUJvYXJkXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIExhenk8bG9uZ1tdPiBTdGFja3MgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHVsb25nW10gX3RyYWNlO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgX2xlbmd0aDtcclxuICAgICAgICBwdWJsaWMgaW50IF9zdGFja0NvdW50O1xyXG4gICAgICAgIGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVHVwbGU8U3VwZXJTbGltQm9hcmQsIEJpamVjdGlvbjxpbnQsIFQ+PiBDcmVhdGU8VD4oTGlzdDxMaXN0PFQ+PiBsaXN0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwb3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LFQ+KGxpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4pKGwgPT4gbCkpLkRpc3RpbmN0KCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBudW1iZXJpbmcgPSBBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzLkJpamVjdGlvbkV4dGVuc2lvbnMuTnVtYmVyT2JqZWN0czxUPihwb3QpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGludExpc3RzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihsaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikobCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KG51bWJlcmluZy5BcHBseShsKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHRyYWNlID0gbmV3IHVsb25nW3BvdC5Db3VudF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgdHJhY2VbaV0gPSBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oaW50TGlzdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShsbCA9PiBsbC5Db250YWlucyhpKSkpLlRvVUludDY0KCk7XHJcblxyXG4gICAgICAgICAgICBwb3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8VCx1bG9uZz4ocG90LChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIHVsb25nPikoYyA9PiB0cmFjZVtwb3QuSW5kZXhPZihjKV0pKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgbnVtYmVyaW5nID0gQWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlcy5CaWplY3Rpb25FeHRlbnNpb25zLk51bWJlck9iamVjdHM8VD4ocG90KTtcclxuXHJcbiAgICAgICAgICAgIEFycmF5LlNvcnQ8dWxvbmc+KHRyYWNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUdXBsZTxTdXBlclNsaW1Cb2FyZCwgQmlqZWN0aW9uPGludCwgVD4+KG5ldyBTdXBlclNsaW1Cb2FyZCh0cmFjZSwgbGlzdHMuQ291bnQpLCBudW1iZXJpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBTdXBlclNsaW1Cb2FyZCBGcm9tTGlzdHMoTGlzdDxMaXN0PGludD4+IGxpc3RzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHBvdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KGxpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KShsID0+IGwpKS5EaXN0aW5jdCgpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgdHJhY2UgPSBuZXcgdWxvbmdbcG90LkNvdW50XTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB0cmFjZVtpXSA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuSW5kaWNlc1doZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihsaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKGxsID0+IGxsLkNvbnRhaW5zKGkpKSkuVG9VSW50NjQoKTtcclxuXHJcbiAgICAgICAgICAgIEFycmF5LlNvcnQ8dWxvbmc+KHRyYWNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdXBlclNsaW1Cb2FyZCh0cmFjZSwgbGlzdHMuQ291bnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUb0xpc3RTdHJpbmdJbkxleE9yZGVyKGludCBtYXhQb3QgPSAtMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFBlcm11dGF0aW9uIHBwO1xyXG4gICAgICAgICAgICByZXR1cm4gVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihvdXQgcHAsIG1heFBvdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRvTGlzdFN0cmluZ0luTGV4T3JkZXIob3V0IFBlcm11dGF0aW9uIHBwLCBpbnQgbWF4UG90ID0gLTEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQm9hcmRMZXhpZmllci5Ub0xpc3RTdHJpbmdJbkxleE9yZGVyKFN0YWNrcy5WYWx1ZSwgb3V0IHBwLCBtYXhQb3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbUJvYXJkKHVsb25nW10gdHJhY2UsIGludCBzdGFja0NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3RyYWNlID0gdHJhY2U7XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSBfdHJhY2UuTGVuZ3RoO1xyXG4gICAgICAgICAgICBfc3RhY2tDb3VudCA9IHN0YWNrQ291bnQ7XHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IEhhc2hpbmcuSGFzaChfdHJhY2UsIF9sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgTWFrZUxhenlTdGFja3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1Cb2FyZCh1bG9uZ1tdIHRyYWNlLCBpbnQgaSwgaW50IGosIHVsb25nIHN3YXAsIGludCBzdGFja0NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3RyYWNlID0gbmV3IHVsb25nW3RyYWNlLkxlbmd0aF07XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBrID0gMDsgayA8IHRyYWNlLkxlbmd0aDsgaysrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyB2ID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChrID09IGkgfHwgayA9PSBqKVxyXG4gICAgICAgICAgICAgICAgICAgIHYgPSB0cmFjZVtrXSBeIHN3YXA7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IHRyYWNlW2tdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh2ID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgcSA9IF9sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHEgPiAwICYmIF90cmFjZVtxIC0gMV0gPiB2KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxLS07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChxIDwgX2xlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuQ29weShfdHJhY2UsIHEgPDwgMywgX3RyYWNlLCAocSArIDEpIDw8IDMsIChfbGVuZ3RoIC0gcSkgPDwgMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RyYWNlW3FdID0gdjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2xlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfc3RhY2tDb3VudCA9IHN0YWNrQ291bnQ7XHJcbiAgICAgICAgICAgIE1ha2VMYXp5U3RhY2tzKCk7XHJcblxyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoaW5nLkhhc2goX3RyYWNlLCBfbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQZXJtdXRhdGlvbiBHZXRQZXJtdXRhdGlvbihpbnQgaSwgaW50IGosIHVsb25nIHN3YXApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PHVsb25nPihfdHJhY2UpO1xyXG5cclxuICAgICAgICAgICAgdFtpXSA9IHRbaV0gXiBzd2FwO1xyXG4gICAgICAgICAgICB0W2pdID0gdFtqXSBeIHN3YXA7XHJcblxyXG4gICAgICAgICAgICBpZiAodFtpXSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgdFtpXSA9IGludC5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRbal0gPT0gMClcclxuICAgICAgICAgICAgICAgIHRbal0gPSBpbnQuTWF4VmFsdWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VxdWVuY2UgPSB0LlppcChFbnVtZXJhYmxlLlJhbmdlKDAsIHQuQ291bnQpLCAodHIsIGlpKSA9PiBuZXcgeyBUID0gdHIsIEkgPSBpaSB9KS5PcmRlckJ5PHVsb25nPih2ID0+IHYuVCkuU2VsZWN0PGludD4odiA9PiB2LkkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJtdXRhdGlvbihzZXF1ZW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltQm9hcmQgUGVybXV0ZShQZXJtdXRhdGlvbiBwLCBMaXN0PGludD4gaW5kaWNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0cmFjZSA9IG5ldyB1bG9uZ1tfdHJhY2UuTGVuZ3RoXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwZXJtdXRlZEluZGljZXMgPSBwLkFwcGx5PGludD4oaW5kaWNlcyk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3RyYWNlLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbiA9IF90cmFjZVtpXTtcclxuICAgICAgICAgICAgICAgIHZhciBtID0gX3RyYWNlW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgaW5kaWNlcy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIG0gJj0gfigxVUwgPDwgaW5kaWNlc1tqXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBpbmRpY2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChuICYgKDFVTCA8PCBpbmRpY2VzW2pdKSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSB8PSAoMVVMIDw8IHBlcm11dGVkSW5kaWNlc1tqXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdHJhY2VbaV0gPSBtO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBBcnJheS5Tb3J0PHVsb25nPih0cmFjZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFN1cGVyU2xpbUJvYXJkKHRyYWNlLCBfc3RhY2tDb3VudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE1ha2VMYXp5U3RhY2tzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN0YWNrcyA9IG5ldyBMYXp5PGxvbmdbXT4oKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBuZXcgbG9uZ1tfc3RhY2tDb3VudF07XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJhY2VCaXRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF90cmFjZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzx1bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KSh0ID0+IHQuVG9TZXQoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgYyA9IDA7IGMgPCB0cmFjZUJpdHMuQ291bnQ7IGMrKylcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiB0cmFjZUJpdHNbY10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNbaV0gfD0gMUwgPDwgYztcclxuICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyhvYmogYXMgU3VwZXJTbGltQm9hcmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKFN1cGVyU2xpbUJvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwgfHwgX2xlbmd0aCAhPSBvdGhlci5fbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBpZiAoX3RyYWNlW2ldICE9IG90aGVyLl90cmFjZVtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwifFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4oU3RhY2tzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIHN0cmluZz4pKGwgPT4gc3RyaW5nLkpvaW48aW50PihcIlwiLCBsLlRvU2V0KCkpKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBCaXRMZXZlbEdlbmVyYXRpb247XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3VwZXJTbGltQ29sb3JpbmdBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIEdyYXBoIF9saW5lR3JhcGg7XHJcbiAgICAgICAgRnVuYzxTdXBlclNsaW1Cb2FyZCwgaW50LCBsb25nPiBfZ2V0RWRnZUNvbG9yTGlzdDtcclxuXHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbUNvbG9yaW5nQW5hbHl6ZXIoR3JhcGggbGluZUdyYXBoLCBGdW5jPFN1cGVyU2xpbUJvYXJkLCBpbnQsIGxvbmc+IGdldEVkZ2VDb2xvckxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfbGluZUdyYXBoID0gbGluZUdyYXBoO1xyXG4gICAgICAgICAgICBfZ2V0RWRnZUNvbG9yTGlzdCA9IGdldEVkZ2VDb2xvckxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKFN1cGVyU2xpbUJvYXJkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2xpbmVHcmFwaC5Jc0Nob29zYWJsZShFbnVtZXJhYmxlLlJhbmdlKDAsIF9saW5lR3JhcGguTikuU2VsZWN0PGxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgbG9uZz4pKGUgPT4gX2dldEVkZ2VDb2xvckxpc3QoYiwgZSkpKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgICBwdWJsaWMgYm9vbCBDb2xvcmFibGVXaXRob3V0RWRnZShTdXBlclNsaW1Cb2FyZCBiLCBpbnQgZWRnZUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9saW5lR3JhcGguSXNDaG9vc2FibGUoRW51bWVyYWJsZS5SYW5nZSgwLCBfbGluZUdyYXBoLk4pLlNlbGVjdDxsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGxvbmc+KShlID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlID09IGVkZ2VJbmRleClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9nZXRFZGdlQ29sb3JMaXN0KGIsIGUpO1xyXG4gICAgICAgICAgICB9KSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoU3VwZXJTbGltQm9hcmQgYiwgb3V0IERpY3Rpb25hcnk8aW50LCBsb25nPiBjb2xvcmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJc0Nob29zYWJsZShFbnVtZXJhYmxlLlJhbmdlKDAsIF9saW5lR3JhcGguTikuU2VsZWN0PGxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgbG9uZz4pKGUgPT4gX2dldEVkZ2VDb2xvckxpc3QoYiwgZSkpKS5Ub0xpc3QoKSwgb3V0IGNvbG9yaW5nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emVXaXRob3V0RWRnZShTdXBlclNsaW1Cb2FyZCBiLCBvdXQgRGljdGlvbmFyeTxpbnQsIGxvbmc+IGNvbG9yaW5nLCBpbnQgZWRnZUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIElzQ2hvb3NhYmxlKEVudW1lcmFibGUuUmFuZ2UoMCwgX2xpbmVHcmFwaC5OKS5TZWxlY3Q8bG9uZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBsb25nPikoZSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZSA9PSBlZGdlSW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBfZ2V0RWRnZUNvbG9yTGlzdChiLCBlKTtcclxuICAgICAgICAgICAgfSkpLlRvTGlzdCgpLCBvdXQgY29sb3JpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNDaG9vc2FibGUoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBvdXQgRGljdGlvbmFyeTxpbnQsIGxvbmc+IGNvbG9yaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29sb3JpbmcgPSBuZXcgRGljdGlvbmFyeTxpbnQsIGxvbmc+KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBJc0Nob29zYWJsZShhc3NpZ25tZW50LCAwLCBjb2xvcmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJvb2wgSXNDaG9vc2FibGUoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBpbnQgdiwgRGljdGlvbmFyeTxpbnQsIGxvbmc+IGNvbG9yaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHYgPj0gX2xpbmVHcmFwaC5OKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9ycyA9IGFzc2lnbm1lbnRbdl07XHJcbiAgICAgICAgICAgIHdoaWxlIChjb2xvcnMgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gY29sb3JzICYgLWNvbG9ycztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgTGlzdDxsb25nPihhc3NpZ25tZW50KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuZWlnaGJvciBpbiBfbGluZUdyYXBoLl9sYXRlck5laWdoYm9ycy5WYWx1ZVt2XSlcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50Q29weVtuZWlnaGJvcl0gJj0gfmNvbG9yO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChJc0Nob29zYWJsZShhc3NpZ25tZW50Q29weSwgdiArIDEsIGNvbG9yaW5nKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcmluZ1t2XSA9IGNvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbG9ycyBePSBjb2xvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN1cGVyU2xpbVN3YXBBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnQgTGFzdFdpbkNoaWxkQ291bnQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgYm9vbCBQcm9vZkZpbmRpbmdNb2RlIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBib29sIFdlYWtseUZpeGFibGUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBHYW1lVHJlZUluZm8+IFdpblRyZWVJbmZvIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBHYW1lVHJlZUluZm8+IExvc3NUcmVlSW5mbyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgdWxvbmdbXSBfZml4ZXJSZXNwb25zZXM7XHJcbiAgICAgICAgaW50IF9maXhlclJlc3BvbnNlQ291bnQ7XHJcbiAgICAgICAgRGljdGlvbmFyeTx1bG9uZywgTGlzdDxMaXN0PHVsb25nPj4+IF9icmVha2VyQ2hvaWNlc0NhY2hlID0gbmV3IERpY3Rpb25hcnk8dWxvbmcsIExpc3Q8TGlzdDx1bG9uZz4+PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltU3dhcEFuYWx5emVyKGludCBuLCBib29sIHByb29mRmluZGluZ01vZGUgPSBmYWxzZSwgYm9vbCB3ZWFrbHlGaXhhYmxlID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZml4ZXJSZXNwb25zZXMgPSBuZXcgdWxvbmdbODE5Ml07XHJcbiAgICAgICAgICAgIFByb29mRmluZGluZ01vZGUgPSBwcm9vZkZpbmRpbmdNb2RlO1xyXG4gICAgICAgICAgICBXZWFrbHlGaXhhYmxlID0gd2Vha2x5Rml4YWJsZTtcclxuICAgICAgICAgICAgaWYgKFByb29mRmluZGluZ01vZGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFdpblRyZWVJbmZvID0gbmV3IERpY3Rpb25hcnk8U3VwZXJTbGltQm9hcmQsIEdhbWVUcmVlSW5mbz4oKTtcclxuICAgICAgICAgICAgICAgIExvc3NUcmVlSW5mbyA9IG5ldyBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBHYW1lVHJlZUluZm8+KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoU3VwZXJTbGltQm9hcmQgYm9hcmQsIEhhc2hTZXQ8U3VwZXJTbGltQm9hcmQ+IHdvbkJvYXJkcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQcm9vZkZpbmRpbmdNb2RlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFuYWx5emVGb3JQcm9vZkludGVybmFsKGJvYXJkLCB3b25Cb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEFuYWx5emVJbnRlcm5hbChib2FyZCwgd29uQm9hcmRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICBcclxuICAgICAgICBib29sIEFuYWx5emVJbnRlcm5hbChTdXBlclNsaW1Cb2FyZCBib2FyZCwgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4gd29uQm9hcmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBib2FyZC5fbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGJvYXJkLl9sZW5ndGg7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGJvYXJkLl90cmFjZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IGJvYXJkLl90cmFjZVtqXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3dhcHBhYmxlID0geCBeIHk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYnJlYWtlckNob2ljZSBpbiBHZXRCcmVha2VyQ2hvaWNlcyhzd2FwcGFibGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwRXhpc3RzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBHZXRGaXhlclJlc3BvbnNlcyhicmVha2VyQ2hvaWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgayA9IDE7IGsgPCBfZml4ZXJSZXNwb25zZUNvdW50OyBrKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChXZWFrbHlGaXhhYmxlICYmIF9maXhlclJlc3BvbnNlc1trXS5Qb3B1bGF0aW9uQ291bnQoKSA+IDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkQm9hcmQgPSBuZXcgU3VwZXJTbGltQm9hcmQoYm9hcmQuX3RyYWNlLCBpLCBqLCBfZml4ZXJSZXNwb25zZXNba10sIGJvYXJkLl9zdGFja0NvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b25Cb2FyZHMuQ29udGFpbnMoY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbm5pbmdTd2FwRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQW5hbHl6ZUZvclByb29mSW50ZXJuYWwoU3VwZXJTbGltQm9hcmQgYm9hcmQsIEhhc2hTZXQ8U3VwZXJTbGltQm9hcmQ+IHdvbkJvYXJkcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB3aW5JbmZvID0gbmV3IEdhbWVUcmVlSW5mbygpO1xyXG4gICAgICAgICAgICBXaW5UcmVlSW5mb1tib2FyZF0gPSB3aW5JbmZvO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxvc3NJbmZvID0gbmV3IEdhbWVUcmVlSW5mbygpO1xyXG4gICAgICAgICAgICBMb3NzVHJlZUluZm9bYm9hcmRdID0gbG9zc0luZm87XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JQYWlycyA9IG5ldyBMaXN0PFR1cGxlPGludCwgaW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBib2FyZC5fbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBib2FyZC5fbGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JQYWlycy5BZGQobmV3IFR1cGxlPGludCwgaW50PihpLCBqKSk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY3AgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PixpbnQ+KGNvbG9yUGFpcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBpbnQ+KShjcCA9PiAoYm9hcmQuX3RyYWNlW2NwLkl0ZW0xXSBeIGJvYXJkLl90cmFjZVtjcC5JdGVtMl0pLlBvcHVsYXRpb25Db3VudCgpKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gY3AuSXRlbTE7XHJcbiAgICAgICAgICAgICAgICB2YXIgaiA9IGNwLkl0ZW0yO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB4ID0gYm9hcmQuX3RyYWNlW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSBib2FyZC5fdHJhY2Vbal07XHJcbiAgICAgICAgICAgICAgICB2YXIgc3dhcHBhYmxlID0geCBeIHk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBicmVha2VyQ2hvaWNlIGluIEdldEJyZWFrZXJDaG9pY2VzKHN3YXBwYWJsZSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwRXhpc3RzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIEdldEZpeGVyUmVzcG9uc2VzKGJyZWFrZXJDaG9pY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDEsIF9maXhlclJlc3BvbnNlQ291bnQgLSAxKS5TZWxlY3Q8dWxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgdWxvbmc+KShrID0+IF9maXhlclJlc3BvbnNlc1trXSkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzx1bG9uZywgaW50PikoZnIgPT4gZnIuUG9wdWxhdGlvbkNvdW50KCkpKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcmVzcG9uc2UgaW4gcmVzcG9uc2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFdlYWtseUZpeGFibGUgJiYgcmVzcG9uc2UuUG9wdWxhdGlvbkNvdW50KCkgPiAyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBTdXBlclNsaW1Cb2FyZChib2FyZC5fdHJhY2UsIGksIGosIHJlc3BvbnNlLCBib2FyZC5fc3RhY2tDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b25Cb2FyZHMuQ29udGFpbnMoY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbkluZm8uQWRkKGJyZWFrZXJDaG9pY2UsIGksIGosIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9zc0luZm8uQWRkKGJyZWFrZXJDaG9pY2UsIGksIGosIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5uaW5nU3dhcEV4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbkluZm8uQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBMYXN0V2luQ2hpbGRDb3VudCA9IHN3YXBwYWJsZS5Qb3B1bGF0aW9uQ291bnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBHZXRGaXhlclJlc3BvbnNlcyhMaXN0PHVsb25nPiBwb3NzaWJsZU1vdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VDb3VudCA9IDEgPDwgcG9zc2libGVNb3Zlcy5Db3VudDtcclxuICAgICAgICAgICAgdmFyIHRhYmxlTGVuZ3RoID0gX2ZpeGVyUmVzcG9uc2VzLkxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKHRhYmxlTGVuZ3RoIDw9IF9maXhlclJlc3BvbnNlQ291bnQpXHJcbiAgICAgICAgICAgICAgICB0YWJsZUxlbmd0aCAqPSAyO1xyXG4gICAgICAgICAgICBpZiAodGFibGVMZW5ndGggPiBfZml4ZXJSZXNwb25zZXMuTGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VzID0gbmV3IHVsb25nW3RhYmxlTGVuZ3RoXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdWJzZXQgPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAoc3Vic2V0IDwgX2ZpeGVyUmVzcG9uc2VDb3VudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gMFVMO1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBzdWJzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSB8PSBwb3NzaWJsZU1vdmVzW0ludDMyVXNhZ2UuR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KV07XHJcblxyXG4gICAgICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VzW3N1YnNldF0gPSByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIHN1YnNldCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PExpc3Q8dWxvbmc+PiBHZXRCcmVha2VyQ2hvaWNlcyh1bG9uZyBzd2FwcGFibGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PExpc3Q8dWxvbmc+PiBjaG9pY2VzO1xyXG4gICAgICAgICAgICBpZiAoIV9icmVha2VyQ2hvaWNlc0NhY2hlLlRyeUdldFZhbHVlKHN3YXBwYWJsZSwgb3V0IGNob2ljZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0cyA9IHN3YXBwYWJsZS5HZXRCaXRzKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydGl0aW9ucyA9IEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuR2V0UGFydGl0aW9ucyhiaXRzLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIGNob2ljZXMgPSBuZXcgTGlzdDxMaXN0PHVsb25nPj4ocGFydGl0aW9ucy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBwYXJ0aXRpb25zKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaG9pY2UgPSBuZXcgTGlzdDx1bG9uZz4ocGFydGl0aW9uLkNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjaG9pY2VzLkFkZChjaG9pY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydCBpbiBwYXJ0aXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IDBVTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gcGFydClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggfD0gYml0c1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZS5BZGQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9icmVha2VyQ2hvaWNlc0NhY2hlW3N3YXBwYWJsZV0gPSBjaG9pY2VzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hvaWNlcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGV4dC5SZWd1bGFyRXhwcmVzc2lvbnM7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBUZW1wbGF0ZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gU2l6ZXMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZW1wbGF0ZShMaXN0PGludD4gc2l6ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTaXplcyA9IHNpemVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRlbXBsYXRlKHN0cmluZyBzLCBHcmFwaCBnKVxyXG4gICAgICAgIHsgfVxyXG4gICAgICAgIC8vcHVibGljIFRlbXBsYXRlKHN0cmluZyBzLCBHcmFwaCBnKVxyXG4gICAgICAgIC8vICAgIDogdGhpcyhSZWdleC5TcGxpdChzID8/IFwiXCIsIEBcIlxcVytcIikuU2VsZWN0KCh4LCB2KSA9PlxyXG4gICAgICAgIC8vICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICB2YXIgeHggPSB4LlRvTG93ZXIoKTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICBpZiAoeHguU3RhcnRzV2l0aChcImRcIikpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgcmV0dXJuIGcuRGVncmVlKHYpICsgKHguTGVuZ3RoID4gMSA/IHh4LlN1YnN0cmluZygxKS5UcnlQYXJzZUludCgpLlZhbHVlIDogMCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBpZiAoeHguU3RhcnRzV2l0aChcInBcIikpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgcmV0dXJuIGcuRGVncmVlKHYpIC0gKHguTGVuZ3RoID4gMSA/IHh4LlN1YnN0cmluZygxKS5UcnlQYXJzZUludCgpLlZhbHVlIDogMCk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgICAgcmV0dXJuIHh4LlRyeVBhcnNlSW50KCkuVmFsdWU7XHJcbiAgICAgICAgLy8gICAgICAgIH0pLlRvTGlzdCgpKVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKG8gYXMgVGVtcGxhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKFRlbXBsYXRlIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIXQuRXhpc3RzKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4oU2l6ZXMsdC5TaXplcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxpbnQsaW50PihTaXplcyxTaXplcy5Db3VudCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh0LCBzKSA9PiAzMSAqIHQgKyBzKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbjxpbnQ+KFwiLFwiLCBTaXplcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGltcGxpY2l0IG9wZXJhdG9yIFRlbXBsYXRlKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZW1wbGF0ZShzLCBudWxsKTtcclxuICAgICAgICAgICAgLy9yZXR1cm4gbmV3IFRlbXBsYXRlKFJlZ2V4LlNwbGl0KHMgPz8gXCJcIiwgQFwiXFxEK1wiKS5TZWxlY3QoTWV0YUtub3dsZWRnZS5UcnlQYXJzZUludCkuV2hlcmUoeCA9PiB4Lkhhc1ZhbHVlKS5TZWxlY3QoeCA9PiB4LlZhbHVlKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRlbXBsYXRlS25vd2xlZGdlXHJcbiAgICB7XHJcbiAgICAgICAgRGljdGlvbmFyeTxpbnQsIFBvdEtub3dsZWRnZT4gX3BvdExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PGludCwgUG90S25vd2xlZGdlPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgVGVtcGxhdGUgVGVtcGxhdGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEJvYXJkPiBMb3N0Qm9hcmRzIHsgZ2V0IHsgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5Qb3RLbm93bGVkZ2UsZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oX3BvdExvb2t1cC5WYWx1ZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuUG90S25vd2xlZGdlLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+PikocGsgPT4gcGsuTG9zdEJvYXJkcykpLkRpc3RpbmN0KCk7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgUG90S25vd2xlZGdlIHRoaXNbaW50IGNvbG9yQ291bnRdXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUG90S25vd2xlZGdlIHA7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV9wb3RMb29rdXAuVHJ5R2V0VmFsdWUoY29sb3JDb3VudCwgb3V0IHApKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHAgPSBuZXcgUG90S25vd2xlZGdlKGNvbG9yQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9wb3RMb29rdXBbY29sb3JDb3VudF0gPSBwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGVtcGxhdGVLbm93bGVkZ2UoVGVtcGxhdGUgdGVtcGxhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUHJvbW90ZShpbnQgY29sb3JDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXNbY29sb3JDb3VudF0uQ29weUludG8odGhpc1tjb2xvckNvdW50ICsgMV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBLbm93bGVkZ2VFeGlzdHMoaW50IGNvbG9yQ291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX3BvdExvb2t1cC5Db250YWluc0tleShjb2xvckNvdW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2xvd0JvYXJkIDogSUVudW1lcmFibGU8bG9uZz5cclxuICAgIHtcclxuI2lmIERFQlVHXHJcbiAgICAgICAgcHVibGljIExpc3Q8c3RyaW5nPiBTdGFja1N0cmluZ3MgeyBnZXQgeyByZXR1cm4gU3RhY2tzLlNlbGVjdChzID0+IHMuVG9TZXRTdHJpbmcoKSkuVG9MaXN0KCk7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUG90U3RyaW5nIHsgZ2V0IHsgcmV0dXJuIFBvdC5Ub1NldFN0cmluZygpOyB9IH1cclxuI2VuZGlmXHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGxvbmc+IFN0YWNrcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBpbnQgX2hhc2hDb2RlO1xyXG4gICAgICAgIExpc3Q8aW50PiBQb3RTZXQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIExpc3Q8VHVwbGU8aW50LCBpbnQ+PiBEZWdyZWVzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBMaXN0PGludD4gRGVncmVlQ2hhbmdlSW5kaWNlcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFRlbXBsYXRlIFRlbXBsYXRlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbG9uZyBQb3QgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBDb2xvckNvdW50IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHVybiBUdXJuIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTiB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTW92ZSBMYXN0TW92ZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgbG9uZyB0aGlzW2ludCB4XSB7IGdldCB7IHJldHVybiBTdGFja3NbeF07IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgU2xvd0JvYXJkKExpc3Q8bG9uZz4gc3RhY2tzLCBsb25nIHBvdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN0YWNrcyA9IHN0YWNrcztcclxuICAgICAgICAgICAgUG90ID0gcG90O1xyXG4gICAgICAgICAgICBUdXJuID0gVHVybi5GaXhlcjtcclxuICAgICAgICAgICAgTiA9IFN0YWNrcy5Db3VudDtcclxuICAgICAgICAgICAgVGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxpbnQ+KFN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBpbnQ+KShzID0+IHMuUG9wdWxhdGlvbkNvdW50KCkpKS5Ub0xpc3QoKSk7XHJcblxyXG4gICAgICAgICAgICBQb3RTZXQgPSBQb3QuVG9TZXQoKTtcclxuICAgICAgICAgICAgQ29sb3JDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihQb3RTZXQpO1xyXG4gICAgICAgICAgICBEZWdyZWVzID0gbmV3IExpc3Q8VHVwbGU8aW50LCBpbnQ+PigpO1xyXG4gICAgICAgICAgICBEZWdyZWVDaGFuZ2VJbmRpY2VzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICBDb21wdXRlSGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQ29tcHV0ZUhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IChpbnQpKE4pO1xyXG4gICAgICAgICAgICBVcGRhdGVIYXNoKHJlZiBfaGFzaENvZGUsIChsb25nKShUdXJuKSk7XHJcblxyXG4gICAgICAgICAgICBEZWdyZWVzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIERlZ3JlZUNoYW5nZUluZGljZXMuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgIERlZ3JlZXMuQWRkUmFuZ2UoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50Pj4oUG90U2V0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+PikoYyA9PiBuZXcgVHVwbGU8aW50LCBpbnQ+KGMsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8bG9uZz4oU3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGJvb2w+KShzID0+IHMuSXNCaXRTZXQoYykpKSkpKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGJvb2w+KSh4ID0+IHguSXRlbTIgPiAwKSkuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikoeCA9PiB4Lkl0ZW0yKSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByZXZpb3VzRGVncmVlID0gLTE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRGVncmVlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVncmVlID0gRGVncmVlc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBVcGRhdGVIYXNoKHJlZiBfaGFzaENvZGUsIGRlZ3JlZS5JdGVtMik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRlZ3JlZS5JdGVtMiAhPSBwcmV2aW91c0RlZ3JlZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBEZWdyZWVDaGFuZ2VJbmRpY2VzLkFkZChpKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0RlZ3JlZSA9IGRlZ3JlZS5JdGVtMjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRGVncmVlQ2hhbmdlSW5kaWNlcy5BZGQoRGVncmVlcy5Db3VudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBVcGRhdGVIYXNoKHJlZiBpbnQgaGFzaCwgbG9uZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGhhc2ggPSAoaW50KSgxMDAgKiBoYXNoICsgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTWFrZU1vdmUoTW92ZSBtb3ZlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGFzdE1vdmUgPSBtb3ZlO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1vdmUuU3RhY2sgPj0gMClcclxuICAgICAgICAgICAgICAgIFN0YWNrc1ttb3ZlLlN0YWNrXSA9IFN0YWNrc1ttb3ZlLlN0YWNrXS5GbGlwQml0cyhtb3ZlLkFkZGVkLCBtb3ZlLlJlbW92ZWQpO1xyXG5cclxuICAgICAgICAgICAgVHVybiA9IE90aGVyVHVybihUdXJuKTtcclxuXHJcbiAgICAgICAgICAgIENvbXB1dGVIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9Nb3ZlQ29tYmluYXRpb24oSUVudW1lcmFibGU8TW92ZT4gbW92ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbW92ZSBpbiBtb3ZlcylcclxuICAgICAgICAgICAgICAgIFN0YWNrc1ttb3ZlLlN0YWNrXSA9IFN0YWNrc1ttb3ZlLlN0YWNrXS5GbGlwQml0cyhtb3ZlLkFkZGVkLCBtb3ZlLlJlbW92ZWQpO1xyXG5cclxuICAgICAgICAgICAgQ29tcHV0ZUhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU2xvd0JvYXJkIENsb25lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjbG9uZSA9IG5ldyBTbG93Qm9hcmQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8bG9uZz4oU3RhY2tzKSwgUG90KTtcclxuICAgICAgICAgICAgY2xvbmUuVHVybiA9IFR1cm47XHJcbiAgICAgICAgICAgIGNsb25lLkxhc3RNb3ZlID0gTGFzdE1vdmU7XHJcbiAgICAgICAgICAgIGNsb25lLl9oYXNoQ29kZSA9IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgICAgIGNsb25lLkNvbXB1dGVIYXNoQ29kZSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKG9iaiBhcyBTbG93Qm9hcmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKFNsb3dCb2FyZCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoVHVybiAhPSBvdGhlci5UdXJuKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoTiAhPSBvdGhlci5OKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxsb25nPihTdGFja3Msb3RoZXIuU3RhY2tzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFR1cm4gPT0gRml4ZXJCcmVha2VyLlR1cm4uRml4ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKExhc3RNb3ZlLlN0YWNrID09IG90aGVyLkxhc3RNb3ZlLlN0YWNrICYmXHJcbiAgICAgICAgICAgICAgICAgICAoTGFzdE1vdmUuQWRkZWQgPT0gb3RoZXIuTGFzdE1vdmUuQWRkZWQgJiYgTGFzdE1vdmUuUmVtb3ZlZCA9PSBvdGhlci5MYXN0TW92ZS5SZW1vdmVkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgTGFzdE1vdmUuQWRkZWQgPT0gb3RoZXIuTGFzdE1vdmUuUmVtb3ZlZCAmJiBMYXN0TW92ZS5SZW1vdmVkID09IG90aGVyLkxhc3RNb3ZlLkFkZGVkKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBGaW5kUGVybXV0YXRpb24ob3RoZXIpICE9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IEZpbmRQZXJtdXRhdGlvbihTbG93Qm9hcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PixpbnQ+KERlZ3JlZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBpbnQ+KSh4ID0+IHguSXRlbTIpKS5TZXF1ZW5jZUVxdWFsKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PixpbnQ+KG90aGVyLkRlZ3JlZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBpbnQ+KSh4ID0+IHguSXRlbTIpKSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHZhciBtYXBwaW5nUGFpcnMgPSBuZXcgTGlzdDxUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRGVncmVlQ2hhbmdlSW5kaWNlcy5Db3VudCAtIDE7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvbWFpbiA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb2RvbWFpbiA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gRGVncmVlQ2hhbmdlSW5kaWNlc1tpXTsgaiA8IERlZ3JlZUNoYW5nZUluZGljZXNbaSArIDFdOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluLkFkZChEZWdyZWVzW2pdLkl0ZW0xKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2RvbWFpbi5BZGQob3RoZXIuRGVncmVlc1tqXS5JdGVtMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbWFwcGluZ1BhaXJzLkFkZChuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KGRvbWFpbiwgY29kb21haW4pKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4sZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PixnbG9iYWw6OlN5c3RlbS5MaW5xLkVudW1lcmFibGVJbnN0YW5jZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+Pj4obWFwcGluZ1BhaXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGdsb2JhbDo6U3lzdGVtLkxpbnEuRW51bWVyYWJsZUluc3RhbmNlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+PikobXAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oUGVybXV0YXRpb24uRW51bWVyYXRlQWxsKG1wLkl0ZW0yLkNvdW50KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4pKHAgPT4gbmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PihtcC5JdGVtMSwgcC5BcHBseTxpbnQ+KG1wLkl0ZW0yKSkpKSkpXHJcbilcclxuLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4sIGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KShtYXBwaW5nID0+IEZsYXR0ZW5NYXBwaW5nKG1hcHBpbmcpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5GaXJzdE9yRGVmYXVsdCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBib29sPikobWFwcGluZyA9PiBTZXF1ZW5jZUVxdWFsUGVybXV0ZWQobWFwcGluZywgb3RoZXIpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gRmxhdHRlbk1hcHBpbmcoSUVudW1lcmFibGU8VHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+PiBtYXBwaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4saW50PihtYXBwaW5nLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKHggPT4geC5JdGVtMSkpLlRvTGlzdCgpLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PixpbnQ+KG1hcHBpbmcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PikoeCA9PiB4Lkl0ZW0yKSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBTZXF1ZW5jZUVxdWFsUGVybXV0ZWQoVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IG1hcHBpbmcsIFNsb3dCb2FyZCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgU3RhY2tzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwZXJtdXRlZFN0YWNrID0gQXBwbHlNYXBwaW5nKG1hcHBpbmcsIFN0YWNrc1tpXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGVybXV0ZWRTdGFjayAhPSBvdGhlci5TdGFja3NbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoVHVybiA9PSBGaXhlckJyZWFrZXIuVHVybi5GaXhlcilcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKExhc3RNb3ZlLlN0YWNrICE9IG90aGVyLkxhc3RNb3ZlLlN0YWNrKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG91cnMgPSBuZXdbXSB7IExhc3RNb3ZlLkFkZGVkLCBMYXN0TW92ZS5SZW1vdmVkIH07XHJcbiAgICAgICAgICAgIHZhciB0aGVpcnMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzkpPT57X285LkFkZChvdGhlci5MYXN0TW92ZS5BZGRlZCk7X285LkFkZChvdGhlci5MYXN0TW92ZS5SZW1vdmVkKTtyZXR1cm4gX285O30pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5FcXVhbDxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQXBwbHlNYXBwaW5nKG1hcHBpbmcsIG91cnMpKSx0aGVpcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGxvbmcgQXBwbHlNYXBwaW5nKFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBtYXBwaW5nLCBsb25nIHN0YWNrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFwcGx5TWFwcGluZyhtYXBwaW5nLCBzdGFjay5Ub1NldCgpKS5Ub0ludDY0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gQXBwbHlNYXBwaW5nKFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBtYXBwaW5nLCBJRW51bWVyYWJsZTxpbnQ+IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihzZXQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShjID0+IG1hcHBpbmcuSXRlbTJbbWFwcGluZy5JdGVtMS5JbmRleE9mKGMpXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gQXBwbHlJbnZlcnNlTWFwcGluZyhUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgSUVudW1lcmFibGU8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oc2V0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYyA9PiBtYXBwaW5nLkl0ZW0xW21hcHBpbmcuSXRlbTIuSW5kZXhPZihjKV0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEV4YWN0bHlFcXVhbChTbG93Qm9hcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKFR1cm4gIT0gb3RoZXIuVHVybilcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKE4gIT0gb3RoZXIuTilcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKFBvdCAhPSBvdGhlci5Qb3QpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGxvbmc+KFN0YWNrcyxvdGhlci5TdGFja3MpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoVHVybiA9PSBGaXhlckJyZWFrZXIuVHVybi5GaXhlcilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoTGFzdE1vdmUuU3RhY2sgPT0gb3RoZXIuTGFzdE1vdmUuU3RhY2sgJiZcclxuICAgICAgICAgICAgICAgICAgIChMYXN0TW92ZS5BZGRlZCA9PSBvdGhlci5MYXN0TW92ZS5BZGRlZCAmJiBMYXN0TW92ZS5SZW1vdmVkID09IG90aGVyLkxhc3RNb3ZlLlJlbW92ZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICBMYXN0TW92ZS5BZGRlZCA9PSBvdGhlci5MYXN0TW92ZS5SZW1vdmVkICYmIExhc3RNb3ZlLlJlbW92ZWQgPT0gb3RoZXIuTGFzdE1vdmUuQWRkZWQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFR1cm4gT3RoZXJUdXJuKFR1cm4gdHVybilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAxIC0gdHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxsb25nPiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTdGFja3MuR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcInxcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KFN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KSh4ID0+IHguVG9TZXRTdHJpbmdTbWFsbCgpKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUb1RleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KFN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBpbnQsIHN0cmluZz4pKChzdGFjaywgaSkgPT4gXCIkTCh2X1wiICsgKGkgKyAxKSArIFwiKSA9IFwiICsgc3RhY2suVG9TZXRTdHJpbmcoKS5SZXBsYWNlKFwie1wiLCBcIlxcXFx7XCIpLlJlcGxhY2UoXCJ9XCIsIFwiXFxcXH1cIikgKyBcIiRcIikpLkpvaW5QcmV0dHkoXCIsIFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEdlbmVyaWNFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNodWZmbGU8VD4odGhpcyBJTGlzdDxUPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJuZyA9IG5ldyBSYW5kb20oRGF0ZVRpbWUuTm93Lk1pbGxpc2Vjb25kKTtcclxuICAgICAgICAgICAgaW50IG4gPSBsaXN0LkNvdW50O1xyXG4gICAgICAgICAgICB3aGlsZSAobiA+IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG4tLTtcclxuICAgICAgICAgICAgICAgIGludCBrID0gcm5nLk5leHQobiArIDEpO1xyXG4gICAgICAgICAgICAgICAgVCB2YWx1ZSA9IGxpc3Rba107XHJcbiAgICAgICAgICAgICAgICBsaXN0W2tdID0gbGlzdFtuXTtcclxuICAgICAgICAgICAgICAgIGxpc3Rbbl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNodWZmbGVBbGwodGhpcyBJTGlzdDxJTGlzdD4gbGlzdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcm5nID0gbmV3IFJhbmRvbShEYXRlVGltZS5Ob3cuTWlsbGlzZWNvbmQpO1xyXG4gICAgICAgICAgICBpbnQgbiA9IGxpc3RzWzBdLkNvdW50O1xyXG4gICAgICAgICAgICB3aGlsZSAobiA+IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG4tLTtcclxuICAgICAgICAgICAgICAgIGludCBrID0gcm5nLk5leHQobiArIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBsaXN0IGluIGxpc3RzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGxpc3Rba107XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdFtrXSA9IGxpc3Rbbl07XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdFtuXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gRW5MaXN0PFQ+KHRoaXMgVCB0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxUPigpLChfbzEwKT0+e19vMTAuQWRkKHQpO3JldHVybiBfbzEwO30pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEluZGljZXNXaGVyZTxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IHNvdXJjZSwgRnVuYzxULCBib29sPiBjb25kaXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2godmFyIHQgaW4gc291cmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKHQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBpO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgRmlyc3RJbmRleDxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IHNvdXJjZSwgRnVuYzxULCBib29sPiBjb25kaXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIHNvdXJjZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbih0KSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEpvaW5QcmV0dHkodGhpcyBJRW51bWVyYWJsZTxzdHJpbmc+IHNvdXJjZSwgc3RyaW5nIHNlcGFyYXRvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8c3RyaW5nPihzb3VyY2UpO1xyXG4gICAgICAgICAgICBpZiAoY291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICBpZiAoY291bnQgPT0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PHN0cmluZz4oc291cmNlKTtcclxuICAgICAgICAgICAgaWYgKGNvdW50ID09IDIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FbGVtZW50QXQ8c3RyaW5nPihzb3VyY2UsMCkgKyBcIiBhbmQgXCIgKyBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkVsZW1lbnRBdDxzdHJpbmc+KHNvdXJjZSwxKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihzZXBhcmF0b3IsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxzdHJpbmc+KHNvdXJjZSxjb3VudCAtIDEpKSArIFwiIGFuZCBcIiArIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRWxlbWVudEF0PHN0cmluZz4oc291cmNlLGNvdW50IC0gMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBSZW1vdmVBbGw8VD4odGhpcyBMaXN0PFQ+IGxpc3QsIEZ1bmM8VCwgYm9vbD4gcHJlZGljYXRlLCBBY3Rpb248VD4gb25SZW1vdmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJlbW92ZWQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gbGlzdC5Db3VudCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJlZGljYXRlKGxpc3RbaV0pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlZChsaXN0W2ldKTtcclxuICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBsaXN0LlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlbW92ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZztcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlcjtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHcmFwaFxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyBSYW5kb20gUk5HID0gbmV3IFJhbmRvbShEYXRlVGltZS5Ob3cuTWlsbGlzZWNvbmQpO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBDYWNoZUhpdHM7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIE5vZGVzVmlzaXRlZDtcclxuXHJcbiAgICAgICAgYm9vbFssXSBfYWRqYWNlbnQ7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF9uZWlnaGJvcnM7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF9jb21wbGVtZW50TmVpZ2hib3JzO1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfb3V0TmVpZ2hib3JzO1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfaW5OZWlnaGJvcnM7XHJcbiAgICAgICAgcHVibGljIExhenk8TGlzdDxMaXN0PGludD4+PiBfbGF0ZXJOZWlnaGJvcnM7XHJcbiAgICAgICAgTGlzdDxpbnQ+IF92ZXJ0aWNlcztcclxuICAgICAgICBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX2luZGVwZW5kZW50U2V0cztcclxuICAgICAgICBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX21heGltYWxJbmRlcGVuZGVudFNldHM7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF9pbmRlcGVuZGVudFR3b1NldHM7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF9pbmRlcGVuZGVudFRocmVlU2V0cztcclxuICAgICAgICBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX3ZlcnRleFN1YnNldHM7XHJcbiAgICAgICAgTGF6eTxpbnQ+IF9lO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IE4geyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBFIHsgZ2V0IHsgcmV0dXJuIF9lLlZhbHVlOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2xbLF0gQWRqYWNlbnQgeyBnZXQgeyByZXR1cm4gX2FkamFjZW50OyB9IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCB0aGlzW2ludCB4LCBpbnQgeV1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfYWRqYWNlbnRbeCwgeV07IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sWyxdIERpcmVjdGVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQ7XHJcbiAgICAgICAgICAgIHByaXZhdGUgc2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBWZXJ0ZXhXZWlnaHQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gTmVpZ2hib3JzIHsgZ2V0IHsgcmV0dXJuIF9uZWlnaGJvcnMuVmFsdWU7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gQ29tcGxlbWVudE5laWdoYm9ycyB7IGdldCB7IHJldHVybiBfY29tcGxlbWVudE5laWdoYm9ycy5WYWx1ZTsgfSB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBPdXROZWlnaGJvcnMgeyBnZXQgeyByZXR1cm4gX291dE5laWdoYm9ycy5WYWx1ZTsgfSB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBJbk5laWdoYm9ycyB7IGdldCB7IHJldHVybiBfaW5OZWlnaGJvcnMuVmFsdWU7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gVmVydGljZXMgeyBnZXQgeyByZXR1cm4gX3ZlcnRpY2VzOyB9IH1cclxuICAgICAgICBwdWJsaWMgTGF6eTxpbnRbXT4gRGVncmVlU2VxdWVuY2UgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExhenk8aW50W10+IEluRGVncmVlU2VxdWVuY2UgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExhenk8aW50W10+IE91dERlZ3JlZVNlcXVlbmNlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMYXp5PGludFtdPiBOb2RlSW52YXJpYW50T25lIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMYXp5PGludFtdPiBOb2RlSW52YXJpYW50VHdvIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIFRyYW5zaXRpdmVQYXJ0aXRpb24gVHJhbnNpdGl2ZVBhcnRpdGlvbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBFZGdlV2VpZ2h0c1dpdGhNdWx0aXBsaWNpdHkgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IEluZGVwZW5kZW50U2V0cyB7IGdldCB7IHJldHVybiBfaW5kZXBlbmRlbnRTZXRzLlZhbHVlOyB9IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IE1heGltYWxJbmRlcGVuZGVudFNldHMgeyBnZXQgeyByZXR1cm4gX21heGltYWxJbmRlcGVuZGVudFNldHMuVmFsdWU7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGggRnJvbU91dE5laWdoYm9yTGlzdHMoRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gb3V0TmVpZ2hib3JzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIE4gPSBvdXROZWlnaGJvcnMuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgZWRnZVdlaWdodHMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dE5laWdoYm9yc1tpXS5Db250YWlucyhqKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVdlaWdodHMuQWRkKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG91dE5laWdoYm9yc1tqXS5Db250YWlucyhpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVdlaWdodHMuQWRkKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChlZGdlV2VpZ2h0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGgoTGlzdDxpbnQ+IGVkZ2VXZWlnaHRzLCBMaXN0PGludD4gdmVydGV4V2VpZ2h0ID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE4gPSAoaW50KSgoMSArIE1hdGguU3FydCgxICsgOCAqIGVkZ2VXZWlnaHRzLkNvdW50KSkgLyAyKTtcclxuICAgICAgICAgICAgVmVydGV4V2VpZ2h0ID0gdmVydGV4V2VpZ2h0O1xyXG5cclxuICAgICAgICAgICAgX3ZlcnRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBOKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgX2FkamFjZW50ID0gbmV3IGJvb2xbTiwgTl07XHJcbiAgICAgICAgICAgIERpcmVjdGVkID0gbmV3IGJvb2xbTiwgTl07XHJcblxyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2VXZWlnaHRzW2tdICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWRqYWNlbnRbaSwgal0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWRqYWNlbnRbaiwgaV0gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2VXZWlnaHRzW2tdID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpcmVjdGVkW2ksIGpdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2VXZWlnaHRzW2tdIDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpcmVjdGVkW2osIGldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGgoYm9vbFssXSBhZGphY2VudCwgTGlzdDxpbnQ+IHZlcnRleFdlaWdodCA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfYWRqYWNlbnQgPSBhZGphY2VudDtcclxuICAgICAgICAgICAgTiA9IF9hZGphY2VudC5HZXRVcHBlckJvdW5kKDApICsgMTtcclxuICAgICAgICAgICAgVmVydGV4V2VpZ2h0ID0gdmVydGV4V2VpZ2h0O1xyXG5cclxuICAgICAgICAgICAgX3ZlcnRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBOKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgRGlyZWN0ZWQgPSBuZXcgYm9vbFtOLCBOXTtcclxuXHJcbiAgICAgICAgICAgIEluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgSW5pdGlhbGl6ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZSA9IG5ldyBMYXp5PGludD4oKCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgZSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIFNldHVwTmVpZ2hib3JzKCk7XHJcbiAgICAgICAgICAgIEluaXRpYWxpemVMYXp5TG9hZGVycygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBTZXR1cE5laWdoYm9ycygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfbmVpZ2hib3JzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZWlnaGJvcnMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9ycy5BZGQobmV3IExpc3Q8aW50PigpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnNbaV0uQWRkKGopO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmVpZ2hib3JzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBfY29tcGxlbWVudE5laWdoYm9ycyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5uID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbm4uQWRkKG5ldyBMaXN0PGludD4oKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9IGogJiYgIV9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5uW2ldLkFkZChqKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm47XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgX291dE5laWdoYm9ycyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5laWdoYm9ycyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIG5laWdoYm9ycy5BZGQobmV3IExpc3Q8aW50PigpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtpLCBqXSAmJiBEaXJlY3RlZFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9yc1tpXS5BZGQoaik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5laWdoYm9ycztcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBfaW5OZWlnaGJvcnMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZWlnaGJvcnMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnMuQWRkKG5ldyBMaXN0PGludD4oKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0gJiYgRGlyZWN0ZWRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnNbal0uQWRkKGkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZWlnaGJvcnM7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgX2xhdGVyTmVpZ2hib3JzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXRlciA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oTmVpZ2hib3JzLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF0ZXIuQWRkKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8aW50PihOZWlnaGJvcnNbaV0sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikobiA9PiBuID4gaSkpLlRvTGlzdCgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhdGVyO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBUcmFuc2l0aXZlUGFydGl0aW9uID0gbmV3IFRyYW5zaXRpdmVQYXJ0aXRpb24oX3ZlcnRpY2VzKTtcclxuXHJcbiAgICAgICAgICAgIERlZ3JlZVNlcXVlbmNlID0gbmV3IExhenk8aW50W10+KCgpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBuZXcgaW50W05dO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgc1t2XSA9IERlZ3JlZSh2KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIEluRGVncmVlU2VxdWVuY2UgPSBuZXcgTGF6eTxpbnRbXT4oKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBuZXcgaW50W05dO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIHNbdl0gPSBJbkRlZ3JlZSh2KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBPdXREZWdyZWVTZXF1ZW5jZSA9IG5ldyBMYXp5PGludFtdPigoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IG5ldyBpbnRbTl07XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgc1t2XSA9IE91dERlZ3JlZSh2KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBOb2RlSW52YXJpYW50T25lID0gbmV3IExhenk8aW50W10+KCgpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBuZXcgaW50W05dO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcCA9IG5ldyBpbnRbTl07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzW3ZdID0gRGVncmVlU2VxdWVuY2UuVmFsdWVbdl07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrID0gMztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGs7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bbdl0gPSAoaW50KSgoc1t2XSA8PCAxMyB8IHNbdl0gPj4gMTkpIF4gMHhmZjAwZmYwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBOZWlnaGJvcnNbdl0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bbdl0gKz0gc1t3XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc1t2XSA9IHNwW3ZdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIE5vZGVJbnZhcmlhbnRUd28gPSBuZXcgTGF6eTxpbnRbXT4oKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBuZXcgaW50W05dO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNbdl0gPSBEZWdyZWVTZXF1ZW5jZS5WYWx1ZVt2XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gTmVpZ2hib3JzW3ZdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc1t2XSArPSAzICogRGVncmVlU2VxdWVuY2UuVmFsdWVbd107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgeiBpbiBOZWlnaGJvcnNbd10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh6ICE9IHYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc1t2XSArPSA3ICogRGVncmVlU2VxdWVuY2UuVmFsdWVbel07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2b2lkIEluaXRpYWxpemVMYXp5TG9hZGVycygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfaW5kZXBlbmRlbnRTZXRzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oSW5kZXBlbmRlbnRTZXRzSW5TdWJncmFwaCgwKSksIHRydWUpO1xyXG4gICAgICAgICAgICBfaW5kZXBlbmRlbnRUd29TZXRzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfaW5kZXBlbmRlbnRTZXRzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc2V0ID0+IHNldC5Db3VudCA9PSAyKSkuVG9MaXN0KCksIHRydWUpO1xyXG4gICAgICAgICAgICBfaW5kZXBlbmRlbnRUaHJlZVNldHMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF9pbmRlcGVuZGVudFNldHMuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzZXQgPT4gc2V0LkNvdW50ID09IDMpKS5Ub0xpc3QoKSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIF92ZXJ0ZXhTdWJzZXRzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PiBMaXN0VXRpbGl0eS5HZW5lcmF0ZVN1Ymxpc3RzPGludD4oX3ZlcnRpY2VzKSk7XHJcbiAgICAgICAgICAgIF9tYXhpbWFsSW5kZXBlbmRlbnRTZXRzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PiBMaXN0VXRpbGl0eS5NYXhpbWFsRWxlbWVudHM8aW50PihfaW5kZXBlbmRlbnRTZXRzLlZhbHVlKSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIEVxdWFsaXR5IGFuZCBJc29tb3JwaGlzbVxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiIFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsc3RyaW5nPihHZXRFZGdlV2VpZ2h0cygpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgc3RyaW5nPikoeCA9PiB4LlRvU3RyaW5nKCkpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRvU3RyaW5nKCkuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgSCA9IG9iaiBhcyBHcmFwaDtcclxuICAgICAgICAgICAgaWYgKEggPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKE4gIT0gSC5OKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChFICE9IEguRSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtpLCBqXSAhPSBIW2ksIGpdKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciA9PShHcmFwaCBBLCBHcmFwaCBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChvYmplY3QpQSA9PSBudWxsICYmIChvYmplY3QpQiA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgICAgICAgICAob2JqZWN0KUEgIT0gbnVsbCAmJiAob2JqZWN0KUIgIT0gbnVsbCAmJiBBLkVxdWFscyhCKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yICE9KEdyYXBoIEEsIEdyYXBoIEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gIShBID09IEIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggUGVybXV0ZVZlcnRpY2VzKFBlcm11dGF0aW9uIHApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYWRqYWNlbnQgPSBuZXcgYm9vbFtOLCBOXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbcFtpXSwgcFtqXV0gPSBfYWRqYWNlbnRbaSwgal07XHJcblxyXG4gICAgICAgICAgICBMaXN0PGludD4gdmVydGV4V2VpZ2h0ID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKFZlcnRleFdlaWdodCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHQgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHAgPSBwLkludmVyc2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0LkFkZChWZXJ0ZXhXZWlnaHRbcHBbdl1dKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChhZGphY2VudCwgdmVydGV4V2VpZ2h0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIE1heWJlSXNvbW9ycGhpYyhHcmFwaCBBLCBHcmFwaCBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEEuTiAhPSBCLk4pIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKEEuRSAhPSBCLkUpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIEEuVHJhbnNpdGl2ZVBhcnRpdGlvbi5SZWZpbmUoQS5EZWdyZWVTZXF1ZW5jZS5WYWx1ZSwgMSk7XHJcbiAgICAgICAgICAgIEIuVHJhbnNpdGl2ZVBhcnRpdGlvbi5SZWZpbmUoQi5EZWdyZWVTZXF1ZW5jZS5WYWx1ZSwgMSk7XHJcblxyXG4gICAgICAgICAgICBBLlRyYW5zaXRpdmVQYXJ0aXRpb24uUmVmaW5lKEEuTm9kZUludmFyaWFudE9uZS5WYWx1ZSwgMik7XHJcbiAgICAgICAgICAgIEIuVHJhbnNpdGl2ZVBhcnRpdGlvbi5SZWZpbmUoQi5Ob2RlSW52YXJpYW50T25lLlZhbHVlLCAyKTtcclxuXHJcbiAgICAgICAgICAgIEEuVHJhbnNpdGl2ZVBhcnRpdGlvbi5SZWZpbmUoQS5Ob2RlSW52YXJpYW50VHdvLlZhbHVlLCAzKTtcclxuICAgICAgICAgICAgQi5UcmFuc2l0aXZlUGFydGl0aW9uLlJlZmluZShCLk5vZGVJbnZhcmlhbnRUd28uVmFsdWUsIDMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFBLlRyYW5zaXRpdmVQYXJ0aXRpb24uRXF1YWxzKEIuVHJhbnNpdGl2ZVBhcnRpdGlvbikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzb21vcnBoaWMoR3JhcGggQSwgR3JhcGggQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghTWF5YmVJc29tb3JwaGljKEEsIEIpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEEuQ29udGFpbnMoQiwgaW5kdWNlZDogdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBJc29tb3JwaGlzbUNvbXBhcmVyIDogSUVxdWFsaXR5Q29tcGFyZXI8R3JhcGg+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoR3JhcGggeCwgR3JhcGggeSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdyYXBoLklzb21vcnBoaWMoeCwgeSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHVibGljIGludCBHZXRIYXNoQ29kZShHcmFwaCBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnMoR3JhcGggQSwgYm9vbCBpbmR1Y2VkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRhaW5zKEEsIGluZHVjZWQsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgZ2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBpbnQsIGludCwgYm9vbD4pKChfLCBfXywgX19fLCBfX19fKSA9PiB0cnVlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWlucyhHcmFwaCBBLCBib29sIGluZHVjZWQsIEZ1bmM8R3JhcGgsIEdyYXBoLCBpbnQsIGludCwgYm9vbD4gY29uZGl0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKE4gPCBBLk4pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0YXUgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250YWlucyhBLCBpbmR1Y2VkLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgaW50LCBpbnQsIGJvb2w+KWNvbmRpdGlvbiwgbmV3IGludFtBLk5dLCB0YXUsIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBDb250YWlucyhHcmFwaCBBLCBib29sIGluZHVjZWQsIEZ1bmM8R3JhcGgsIEdyYXBoLCBpbnQsIGludCwgYm9vbD4gY29uZGl0aW9uLCBpbnRbXSB0YXUsIExpc3Q8aW50PiBwbGFjZWQsIGludCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHYgPT0gQS5OKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW1hZ2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4ocGxhY2VkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodSA9PiB0YXVbdV0pKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh0ID0+IHQpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHJlcXVpcmVkTmVpZ2hib3JzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oQS5OZWlnaGJvcnNbdl0uSW50ZXJzZWN0aW9uU29ydGVkKHBsYWNlZCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh1ID0+IHRhdVt1XSkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHQgPT4gdCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgY2FuZGlkYXRlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGludD4oVmVydGljZXMsaW1hZ2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHcgPT4gQS5EZWdyZWUodikgPD0gRGVncmVlKHcpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh3ID0+IGluZHVjZWQgPyBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8aW50PihyZXF1aXJlZE5laWdoYm9ycyxBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uPGludD4oTmVpZ2hib3JzW3ddLGltYWdlcykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVxdWlyZWROZWlnaGJvcnMuU3Vic2V0RXF1YWxTb3J0ZWQoTmVpZ2hib3JzW3ddKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodyA9PiBjb25kaXRpb24odGhpcywgQSwgdywgdikpKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjYW5kaWRhdGUgaW4gY2FuZGlkYXRlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGF1W3ZdID0gY2FuZGlkYXRlO1xyXG4gICAgICAgICAgICAgICAgcGxhY2VkLkFkZCh2KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoQ29udGFpbnMoQSwgaW5kdWNlZCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGludCwgaW50LCBib29sPiljb25kaXRpb24sIHRhdSwgcGxhY2VkLCB2ICsgMSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgcGxhY2VkLlJlbW92ZUF0KHBsYWNlZC5Db3VudCAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWluc0luZHVjZWQoR3JhcGggQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250YWlucyhBLCBpbmR1Y2VkOiB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zSW5kdWNlZE9sZChHcmFwaCBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKE4gPCBBLk4pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciB2ZXJ0ZXhTZXRzID0gX3ZlcnRleFN1YnNldHMuVmFsdWU7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdmVydGljZXMgaW4gdmVydGV4U2V0cylcclxuICAgICAgICAgICAgICAgIGlmIChHcmFwaC5Jc29tb3JwaGljKEluZHVjZWRTdWJncmFwaCh2ZXJ0aWNlcyksIEEpKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPExpc3Q8aW50Pj4gRW51bWVyYXRlQ29ubmVjdGVkT3JkZXJpbmdzKExpc3Q8aW50PiBpbml0aWFsVmVydGljZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGludD4oVmVydGljZXMsaW5pdGlhbFZlcnRpY2VzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZG9uZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKERlZ3JlZUluU3ViZ3JhcGgodiwgaW5pdGlhbFZlcnRpY2VzKSA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZlcnRpY2VzLkFkZCh2KTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgb3JkZXJpbmcgaW4gRW51bWVyYXRlQ29ubmVjdGVkT3JkZXJpbmdzKGluaXRpYWxWZXJ0aWNlcykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KG9yZGVyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmVydGljZXMuUmVtb3ZlQXQoaW5pdGlhbFZlcnRpY2VzLkNvdW50IC0gMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkb25lKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGluaXRpYWxWZXJ0aWNlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzU3Bhbm5pbmdTdWJncmFwaE9mKEdyYXBoIEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoTiAhPSBBLk4pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0gJiYgIUFbaSwgal0pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gRXhwb3J0XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBHZXRFZGdlV2VpZ2h0cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RWRnZVdlaWdodHMobmV3IGludFtdIHsgfSwgbmV3IFR1cGxlPGludCwgaW50PltdIHsgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGggSW5kdWNlZFN1YmdyYXBoKExpc3Q8aW50PiBzdWJncmFwaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8aW50PiB2ZXJ0ZXhXZWlnaHQgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoVmVydGV4V2VpZ2h0ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZlcnRleFdlaWdodCA9IG5ldyBMaXN0PGludD4oc3ViZ3JhcGguQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gc3ViZ3JhcGgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0LkFkZChWZXJ0ZXhXZWlnaHRbdl0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKEdldEVkZ2VXZWlnaHRzKHN1YmdyYXBoKSwgdmVydGV4V2VpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBHZXRFZGdlV2VpZ2h0cyhMaXN0PGludD4gc3ViZ3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbiA9IHN1YmdyYXBoLkNvdW50O1xyXG4gICAgICAgICAgICB2YXIgdyA9IG5ldyBMaXN0PGludD4obik7XHJcblxyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdy5BZGQoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbc3ViZ3JhcGhbaV0sIHN1YmdyYXBoW2pdXSB8fCBfYWRqYWNlbnRbc3ViZ3JhcGhbal0sIHN1YmdyYXBoW2ldXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgd1trXSA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IEdldEVkZ2VXZWlnaHRzKGJvb2xbLF0gYWRqYWNlbnQsIGJvb2xbLF0gZGlyZWN0ZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RWRnZVdlaWdodHMoYWRqYWNlbnQsIGRpcmVjdGVkLCBuZXcgaW50W10geyB9LCBuZXcgVHVwbGU8aW50LCBpbnQ+W10geyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8aW50PiBHZXRFZGdlV2VpZ2h0cyhJRW51bWVyYWJsZTxpbnQ+IHJlbW92ZWRWZXJ0aWNlcywgSUVudW1lcmFibGU8VHVwbGU8aW50LCBpbnQ+PiByZW1vdmVkRWRnZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RWRnZVdlaWdodHMoX2FkamFjZW50LCBEaXJlY3RlZCwgcmVtb3ZlZFZlcnRpY2VzLCByZW1vdmVkRWRnZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxpbnQ+IEdldEVkZ2VXZWlnaHRzKGJvb2xbLF0gYWRqYWNlbnQsIGJvb2xbLF0gZGlyZWN0ZWQsIElFbnVtZXJhYmxlPGludD4gcmVtb3ZlZFZlcnRpY2VzLCBJRW51bWVyYWJsZTxUdXBsZTxpbnQsIGludD4+IHJlbW92ZWRFZGdlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB3ID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHcuQWRkKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGludD4ocmVtb3ZlZFZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gdiA9PSBpIHx8IHYgPT0gaikpICYmICFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4+KHJlbW92ZWRFZGdlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGJvb2w+KShlID0+IGUuSXRlbTEgPT0gaSAmJiBlLkl0ZW0yID09IGogfHwgZS5JdGVtMSA9PSBqICYmIGUuSXRlbTIgPT0gaSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkamFjZW50W2ksIGpdIHx8IGFkamFjZW50W2osIGldKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3W2tdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3RlZFtqLCBpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3W2tdID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgTGlzdDxzdHJpbmc+IERvdENvbG9ycyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxzdHJpbmc+KCksKF9vMTEpPT57X28xMS5BZGQoXCJjYWRldGJsdWVcIik7X28xMS5BZGQoXCJicm93blwiKTtfbzExLkFkZChcImRvZGdlcmJsdWVcIik7X28xMS5BZGQoXCJ0dXJxdW9pc2VcIik7X28xMS5BZGQoXCJvcmNoaWRcIik7X28xMS5BZGQoXCJibHVlXCIpO19vMTEuQWRkKFwicmVkXCIpO19vMTEuQWRkKFwiZ3JlZW5cIik7X28xMS5BZGQoXCJ5ZWxsb3dcIik7X28xMS5BZGQoXCJjeWFuXCIpO19vMTEuQWRkKFwibGltZWdyZWVuXCIpO19vMTEuQWRkKFwicGlua1wiKTtfbzExLkFkZChcIm9yYW5nZVwiKTtfbzExLkFkZChcImdvbGRlbnJvZFwiKTtfbzExLkFkZChcImFxdWFtYXJpbmVcIik7X28xMS5BZGQoXCJibGFja1wiKTtyZXR1cm4gX28xMTt9KTtcclxuXHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IExpc3Q8c3RyaW5nPiBUaWt6Q29sb3JzID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PHN0cmluZz4oKSwoX28xMik9PntfbzEyLkFkZChcImJsdWVcIik7X28xMi5BZGQoXCJyZWRcIik7X28xMi5BZGQoXCJncmVlblwiKTtfbzEyLkFkZChcIk9yY2hpZFwiKTtfbzEyLkFkZChcInllbGxvd1wiKTtfbzEyLkFkZChcImN5YW5cIik7X28xMi5BZGQoXCJUdXJxdW9pc2VcIik7X28xMi5BZGQoXCJDYWRldEJsdWVcIik7X28xMi5BZGQoXCJMaW1lR3JlZW5cIik7X28xMi5BZGQoXCJicm93blwiKTtfbzEyLkFkZChcInBpbmtcIik7X28xMi5BZGQoXCJvcmFuZ2VcIik7X28xMi5BZGQoXCJDZXJ1bGVhblwiKTtfbzEyLkFkZChcIkdvbGRlbnJvZFwiKTtfbzEyLkFkZChcIkFxdWFtYXJpbmVcIik7X28xMi5BZGQoXCJibGFja1wiKTtyZXR1cm4gX28xMjt9KTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUb0RvdFdpdGhGYWN0b3JzKGJvb2wgbGFiZWxFZGdlcyA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmYWN0b3JzID0gRmFjdG9yKCk7XHJcbiAgICAgICAgICAgIHZhciBjb2xvclJhbmdlcyA9IG5ldyBMaXN0PElFbnVtZXJhYmxlPGludD4+KCk7XHJcbiAgICAgICAgICAgIGludCBsYXN0ID0gMDtcclxuICAgICAgICAgICAgdmFyIEcgPSBHcmFwaHMuRW1wdHk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBmYWN0b3IgaW4gZmFjdG9ycylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29sb3JSYW5nZXMuQWRkKEVudW1lcmFibGUuUmFuZ2UobGFzdCwgZmFjdG9yLk4pKTtcclxuICAgICAgICAgICAgICAgIGxhc3QgKz0gZmFjdG9yLk47XHJcblxyXG4gICAgICAgICAgICAgICAgRyAqPSBmYWN0b3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJncmFwaCBHIHtcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJvdmVybGFwID0gZmFsc2U7XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwic3BsaW5lcz10cnVlO1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcInNlcD0wLjM7XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwibm9kZVtmb250c2l6ZT0yMCwgc3R5bGU9Ym9sZCwgY29sb3I9YmxhY2s7IHNoYXBlPWNpcmNsZSwgcGVud2lkdGg9MV07XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiZWRnZVtzdHlsZT1ib2xkLCBjb2xvcj1ibGFjaywgcGVud2lkdGg9Ml07XCIpO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChpbnQgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBjb2xvckluZGV4ID0gY29sb3JSYW5nZXMuU2VsZWN0KChyLCBpKSA9PiBuZXcgeyByYW5nZSA9IHIsIGluZGV4ID0gaSB9KS5GaXJzdChwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8aW50PihwLnJhbmdlLHYpKS5pbmRleCAlIERvdENvbG9ycy5Db3VudDtcclxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IHYuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoc3RyaW5nLkZvcm1hdChAXCJ7MH0gW2xhYmVsID0gXCJcInsyfVwiXCIsIHN0eWxlID0gZmlsbGVkLCBmaWxsY29sb3IgPSBcIlwiezF9XCJcIl07XCIsIHYsIERvdENvbG9yc1tjb2xvckluZGV4XSwgbGFiZWwpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRy5fYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFiZWxFZGdlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoc3RyaW5nLkZvcm1hdChAXCJ7MH0gLS0gezF9IFtsYWJlbCA9IFwiXCJ7Mn1cIlwiXVwiLCBpLCBqLCBrKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoc3RyaW5nLkZvcm1hdChcInswfSAtLSB7MX1cIiwgaSwgaikpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIn1cIik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2IuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVG9Eb3RGb3JUaWt6KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZmFjdG9ycyA9IEZhY3RvcigpO1xyXG4gICAgICAgICAgICB2YXIgY29sb3JSYW5nZXMgPSBuZXcgTGlzdDxJRW51bWVyYWJsZTxpbnQ+PigpO1xyXG4gICAgICAgICAgICBpbnQgbGFzdCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBHID0gR3JhcGhzLkVtcHR5O1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZmFjdG9yIGluIGZhY3RvcnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbG9yUmFuZ2VzLkFkZChFbnVtZXJhYmxlLlJhbmdlKGxhc3QsIGZhY3Rvci5OKSk7XHJcbiAgICAgICAgICAgICAgICBsYXN0ICs9IGZhY3Rvci5OO1xyXG5cclxuICAgICAgICAgICAgICAgIEcgKj0gZmFjdG9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiZ3JhcGggRyB7XCIpO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChpbnQgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBjb2xvckluZGV4ID0gY29sb3JSYW5nZXMuU2VsZWN0KChyLCBpKSA9PiBuZXcgeyByYW5nZSA9IHIsIGluZGV4ID0gaSB9KS5GaXJzdChwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8aW50PihwLnJhbmdlLHYpKS5pbmRleCAlIFRpa3pDb2xvcnMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKHN0cmluZy5Gb3JtYXQoQFwiezB9IFtsYWJlbCA9IFwiXCJcIlwiLCBzdHlsZSA9IFwiXCJkcmF3LCBjaXJjbGUsIGZpbGw9ezF9XCJcIl07XCIsIHYsIFRpa3pDb2xvcnNbY29sb3JJbmRleF0pKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEcuX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKHN0cmluZy5Gb3JtYXQoXCJ7MH0gLS0gezF9XCIsIGksIGopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIn1cIik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2IuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE9wZXJhdGlvbnNcclxuICAgICAgICBib29sIElzUHJvcGVyRmFjdG9yKExpc3Q8aW50PiBzdWJzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc3Vic2V0LkNvdW50IDw9IDApIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoc3Vic2V0LkNvdW50ID49IE4pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXN0ID0gTGlzdFV0aWxpdHkuRGlmZmVyZW5jZTxpbnQ+KF92ZXJ0aWNlcywgc3Vic2V0KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwYWlycyA9IGZyb20gaSBpbiBzdWJzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSBqIGluIHJlc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0IG5ldyBUdXBsZTxpbnQsIGludD4oaSwgaik7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFpciBpbiBwYWlycylcclxuICAgICAgICAgICAgICAgIGlmICghX2FkamFjZW50W3BhaXIuSXRlbTEsIHBhaXIuSXRlbTJdKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEdyYXBoPiBGYWN0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHByb3BlckZhY3RvcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfdmVydGV4U3Vic2V0cy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHZlcnRpY2VzID0+IElzUHJvcGVyRmFjdG9yKHZlcnRpY2VzKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgbWF4aW1hbEZhY3RvciA9IExpc3RVdGlsaXR5Lk1heGltYWxFbGVtZW50czxpbnQ+KHByb3BlckZhY3RvcnMpWzBdO1xyXG4gICAgICAgICAgICBpZiAobWF4aW1hbEZhY3Rvci5Db3VudCA8PSAwKSByZXR1cm4gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PEdyYXBoPigpLChfbzEzKT0+e19vMTMuQWRkKENsb25lKCkpO3JldHVybiBfbzEzO30pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3QgPSBMaXN0VXRpbGl0eS5EaWZmZXJlbmNlPGludD4oX3ZlcnRpY2VzLCBtYXhpbWFsRmFjdG9yKTtcclxuICAgICAgICAgICAgdmFyIG1heEZhY3RvciA9IEluZHVjZWRTdWJncmFwaChtYXhpbWFsRmFjdG9yKTtcclxuICAgICAgICAgICAgdmFyIHJlc3RHcmFwaCA9IEluZHVjZWRTdWJncmFwaChyZXN0KTtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaD4obWF4RmFjdG9yLkZhY3RvcigpLHJlc3RHcmFwaC5GYWN0b3IoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBDbG9uZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKEdldEVkZ2VXZWlnaHRzKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggQ29tcGxlbWVudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYWRqYWNlbnQgPSBuZXcgYm9vbFtOLCBOXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBqKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBhZGphY2VudFtpLCBqXSA9ICFfYWRqYWNlbnRbaSwgal07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKGFkamFjZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIFJlbW92ZVZlcnRleChpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzdWJncmFwaCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oVmVydGljZXMpO1xyXG4gICAgICAgICAgICBzdWJncmFwaC5SZW1vdmUodik7XHJcbiAgICAgICAgICAgIHJldHVybiBJbmR1Y2VkU3ViZ3JhcGgoc3ViZ3JhcGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggUmVtb3ZlRWRnZShUdXBsZTxpbnQsIGludD4gZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoR2V0RWRnZVdlaWdodHMobmV3IGludFtdIHsgfSwgbmV3IFR1cGxlPGludCwgaW50PltdIHsgZSB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBSZW1vdmVFZGdlKGludCB2MSwgaW50IHYyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlbW92ZUVkZ2UobmV3IFR1cGxlPGludCwgaW50Pih2MSwgdjIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEFkZEVkZ2UoaW50IHYxLCBpbnQgdjIsIGJvb2wgZGlyZWN0ZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IENsb25lKCk7XHJcbiAgICAgICAgICAgIGcuX2FkamFjZW50W3YxLCB2Ml0gPSBnLl9hZGphY2VudFt2MiwgdjFdID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKGRpcmVjdGVkKVxyXG4gICAgICAgICAgICAgICAgZy5EaXJlY3RlZFt2MSwgdjJdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoZy5HZXRFZGdlV2VpZ2h0cygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgVHVwbGU8aW50LCBpbnQ+IEdldEFyYml0cmFyeUVkZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUdXBsZTxpbnQsIGludD4oaSwgaik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgTGlzdDxUdXBsZTxpbnQsIGludD4+IEdldEVkZ2VUdXBsZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHR1cGxlcyA9IG5ldyBMaXN0PFR1cGxlPGludCwgaW50Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGlyZWN0ZWRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dXBsZXMuQWRkKG5ldyBUdXBsZTxpbnQsIGludD4oaSwgaikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dXBsZXMuQWRkKG5ldyBUdXBsZTxpbnQsIGludD4oaiwgaSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0dXBsZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBEaXNqb2ludFVuaW9uKEdyYXBoIEgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgbiA9IE4gKyBILk47XHJcblxyXG4gICAgICAgICAgICB2YXIgYWRqYWNlbnQgPSBuZXcgYm9vbFtuLCBuXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBhZGphY2VudFtpLCBqXSA9IF9hZGphY2VudFtpLCBqXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgSC5OOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IEguTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGFkamFjZW50W04gKyBpLCBOICsgal0gPSBIW2ksIGpdO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChhZGphY2VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBKb2luKEdyYXBoIEgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgRyA9IERpc2pvaW50VW5pb24oSCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgSC5OOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRy5fYWRqYWNlbnRbaSwgTiArIGpdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBHLl9hZGphY2VudFtOICsgaiwgaV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRy5Jbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBHO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggQWRkRWRnZShpbnQgeCwgaW50IHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgRyA9IENsb25lKCk7XHJcbiAgICAgICAgICAgIEcuX2FkamFjZW50W3gsIHldID0gdHJ1ZTtcclxuICAgICAgICAgICAgRy5fYWRqYWNlbnRbeSwgeF0gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgRy5Jbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBHO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggQXR0YWNoTmV3VmVydGV4KHBhcmFtcyBpbnRbXSBuZWlnaGJvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQXR0YWNoTmV3VmVydGV4KChJTGlzdDxpbnQ+KW5laWdoYm9ycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBBdHRhY2hOZXdWZXJ0ZXgoSUxpc3Q8aW50PiBuZWlnaGJvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYWRqYWNlbnQgPSBuZXcgYm9vbFtOICsgMSwgTiArIDFdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBhZGphY2VudFtpLCBqXSA9IF9hZGphY2VudFtpLCBqXTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuZWlnaGJvciBpbiBuZWlnaGJvcnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGFkamFjZW50W04sIG5laWdoYm9yXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBhZGphY2VudFtuZWlnaGJvciwgTl0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKGFkamFjZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBvcGVyYXRvciArKEdyYXBoIEEsIEdyYXBoIEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5EaXNqb2ludFVuaW9uKEIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIG9wZXJhdG9yICooR3JhcGggQSwgR3JhcGggQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBLkpvaW4oQik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggb3BlcmF0b3IgKihpbnQgaywgR3JhcGggQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBHID0gQS5DbG9uZSgpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IGs7IGkrKylcclxuICAgICAgICAgICAgICAgIEcgKz0gQTtcclxuXHJcbiAgICAgICAgICAgIEcuSW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gRztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBTcXVhcmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBDbG9uZSgpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBWZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhaXIgaW4gQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8aW50PihOZWlnaGJvcnNbdl0sTmVpZ2hib3JzW3ZdKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFpci5JdGVtMSAhPSBwYWlyLkl0ZW0yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnLl9hZGphY2VudFtwYWlyLkl0ZW0xLCBwYWlyLkl0ZW0yXSA9IGcuX2FkamFjZW50W3BhaXIuSXRlbTIsIHBhaXIuSXRlbTFdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGcuQ2xvbmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIEVkZ2VzXHJcbiAgICAgICAgcHVibGljIGludCBTaXplXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgdCArPSBPdXREZWdyZWUoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBNYXhEZWdyZWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgbWF4ID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IE1hdGguTWF4KG1heCwgRGVncmVlKGkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWluRGVncmVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IG1pbiA9IGludC5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IE1hdGguTWluKG1pbiwgRGVncmVlKGkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWluO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWF4T3V0RGVncmVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IG1heCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBtYXggPSBNYXRoLk1heChtYXgsIE91dERlZ3JlZShpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IE1heEluRGVncmVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IG1heCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBtYXggPSBNYXRoLk1heChtYXgsIEluRGVncmVlKGkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1JlZ3VsYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKE4gPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihOZWlnaGJvcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShuID0+IG4uQ291bnQgPT0gTmVpZ2hib3JzWzBdLkNvdW50KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IERlZ3JlZShpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZWlnaGJvcnNbdl0uQ291bnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgT3V0RGVncmVlKGludCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE91dE5laWdoYm9yc1t2XS5Db3VudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBJbkRlZ3JlZShpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJbk5laWdoYm9yc1t2XS5Db3VudDsgICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBEZWdyZWVJblN1YmdyYXBoKGludCB2LCBMaXN0PGludD4gc3ViZ3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uQ291bnRTb3J0ZWQoTmVpZ2hib3JzW3ZdLCBzdWJncmFwaCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IE5laWdoYm9yc0luU3ViZ3JhcGgoaW50IHYsIExpc3Q8aW50PiBzdWJncmFwaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Tb3J0ZWQoTmVpZ2hib3JzW3ZdLCBzdWJncmFwaCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IFN1bU92ZXJTdWJncmFwaE5laWdoYm9ycyhpbnQgdiwgTGlzdDxpbnQ+IHN1YmdyYXBoLCBpbnRbXSBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGludD4oTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uU29ydGVkKE5laWdoYm9yc1t2XSwgc3ViZ3JhcGgpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodyA9PiBnW3ddKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRnVuYzxpbnQsIGludD4gR2V0RGVncmVlTWludXNLRnVuYyhpbnQgaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB2ID0+IERlZ3JlZSh2KSAtIGs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEVkZ2VzT24oTGlzdDxpbnQ+IEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgZWRnZXMgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEEuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IEEuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W0FbaV0sIEFbal1dKSBlZGdlcysrO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVkZ2VzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBFZGdlSW5kaWNlc09uKExpc3Q8aW50PiBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGVkZ2VJbmRpY2VzID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQS5Db250YWlucyhpKSAmJiBBLkNvbnRhaW5zKGopKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRnZUluZGljZXMuQWRkKGspO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVkZ2VJbmRpY2VzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IEVkZ2VzQmV0d2VlbihMaXN0PGludD4gQSwgTGlzdDxpbnQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaW50ZXJzZWN0aW9uID0gTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uPGludD4oQSwgQik7XHJcbiAgICAgICAgICAgIEEgPSBMaXN0VXRpbGl0eS5EaWZmZXJlbmNlPGludD4oQSwgQik7XHJcblxyXG4gICAgICAgICAgICBpbnQgZWRnZXMgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEEuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgQi5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbQVtpXSwgQltqXV0pIGVkZ2VzKys7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZWRnZXMgKyBFZGdlc09uKGludGVyc2VjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBJbmRlcGVuZGVudCBzZXRzXHJcbiAgICAgXHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxpbnQ+PiBJbmRlcGVuZGVudFNldHNJblN1YmdyYXBoKGludCBmaXJzdFZlcnRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChmaXJzdFZlcnRleCA+PSBOKSByZXR1cm4gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PExpc3Q8aW50Pj4oKSwoX28xNCk9PntfbzE0LkFkZChuZXcgTGlzdDxpbnQ+KCkpO3JldHVybiBfbzE0O30pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHN1YmdyYXBoU2V0cyA9IEluZGVwZW5kZW50U2V0c0luU3ViZ3JhcGgoZmlyc3RWZXJ0ZXggKyAxKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlVuaW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihzdWJncmFwaFNldHMsU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oc3ViZ3JhcGhTZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc2V0ID0+IElzSW5kZXBlbmRlbnRPZihmaXJzdFZlcnRleCwgc2V0KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShzZXQgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmlnZ2VyID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX28xNSk9PntfbzE1LkFkZChmaXJzdFZlcnRleCk7cmV0dXJuIF9vMTU7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlnZ2VyLkFkZFJhbmdlKHNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpZ2dlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJvb2wgSXNJbmRlcGVuZGVudE9mKGludCB2LCBMaXN0PGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gc2V0KSBpZiAodyA9PSB2IHx8IF9hZGphY2VudFt3LCB2XSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ2xpcXVlKExpc3Q8aW50PiBzdWJzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN1YnNldC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgc3Vic2V0LkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfYWRqYWNlbnRbc3Vic2V0W2ldLCBzdWJzZXRbal1dKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNJbmRlcGVuZGVudChMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdWJzZXQuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IHN1YnNldC5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbc3Vic2V0W2ldLCBzdWJzZXRbal1dKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNDb21wbGV0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSXNDbGlxdWUoX3ZlcnRpY2VzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNDbGlxdWVOdW1iZXJBdExlYXN0KGludCBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGsgPiBfdmVydGljZXMuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzZXQgaW4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihfdmVydGljZXMsIGspKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoSXNDbGlxdWUoc2V0KSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBJbmRlcGVuZGVuY2VOdW1iZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEluZGVwZW5kZW5jZU51bWJlcihWZXJ0aWNlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5kZXBlbmRlbmNlTnVtYmVyKElFbnVtZXJhYmxlPGludD4gc3ViZ3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5NYXg8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF9pbmRlcGVuZGVudFNldHMuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGludD4pKEkgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbkNvdW50PGludD4oSSxzdWJncmFwaCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBNYXhpbXVtSW5kZXBlbmRlbnRTdWJzZXQoSUVudW1lcmFibGU8aW50PiBzdWJncmFwaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gSW5kZXBlbmRlbmNlTnVtYmVyKHN1YmdyYXBoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF9pbmRlcGVuZGVudFNldHMuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShJID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudDxpbnQ+KEksc3ViZ3JhcGgpID09IGkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxMaXN0PGludD4+IEVudW1lcmF0ZU1heGltYWxJbmRlcGVuZGVudFNldHMoTGlzdDxpbnQ+IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVCcm9uS2VyYm9zY2goc2V0LCBuZXcgTGlzdDxpbnQ+KCksIG5ldyBMaXN0PGludD4oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8TGlzdDxpbnQ+PiBFbnVtZXJhdGVNYXhpbWFsSW5kZXBlbmRlbnRTZXRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVCcm9uS2VyYm9zY2goVmVydGljZXMsIG5ldyBMaXN0PGludD4oKSwgbmV3IExpc3Q8aW50PigpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPExpc3Q8aW50Pj4gRW51bWVyYXRlQnJvbktlcmJvc2NoKExpc3Q8aW50PiBQLCBMaXN0PGludD4gUiwgTGlzdDxpbnQ+IFgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoUC5Db3VudCA9PSAwICYmIFguQ291bnQgPT0gMClcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KFIpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBQQyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oUCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgWEMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KFgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB1ID0gVG9taXRhUGl2b3QoUCwgWCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxpbnQ+KFAsQ29tcGxlbWVudE5laWdoYm9yc1t1XSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgUi5BZGQodik7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNldCBpbiBFbnVtZXJhdGVCcm9uS2VyYm9zY2goQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbjxpbnQ+KFBDLENvbXBsZW1lbnROZWlnaGJvcnNbdl0pLCBSLCBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uPGludD4oWEMsQ29tcGxlbWVudE5laWdoYm9yc1t2XSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gc2V0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBSLlJlbW92ZSh2KTtcclxuICAgICAgICAgICAgICAgICAgICBQQy5SZW1vdmUodik7XHJcbiAgICAgICAgICAgICAgICAgICAgWEMuQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgVG9taXRhUGl2b3QoTGlzdDxpbnQ+IFAsIExpc3Q8aW50PiBYKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1heCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgYmVzdCA9IC0xO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdSBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbmNhdDxpbnQ+KFAsWCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuID0gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbkNvdW50PGludD4oQ29tcGxlbWVudE5laWdoYm9yc1t1XSxQKTtcclxuICAgICAgICAgICAgICAgIGlmIChuID4gbWF4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgYmVzdCA9IHU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBiZXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBGaW5kQ2hpQ29sb3JpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgSyA9IDA7IEsgPCBpbnQuTWF4VmFsdWU7IEsrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBGaW5kS0NvbG9yaW5nKFZlcnRpY2VzLCBLKTtcclxuICAgICAgICAgICAgICAgIGlmIChjICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBGaW5kS0NvbG9yaW5nKExpc3Q8aW50PiBzdWJncmFwaCwgaW50IEspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc3ViZ3JhcGguQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIGlmIChLIDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBJIGluIEVudW1lcmF0ZU1heGltYWxJbmRlcGVuZGVudFNldHMoc3ViZ3JhcGgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IEZpbmRLQ29sb3JpbmcoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkRpZmZlcmVuY2U8aW50PihzdWJncmFwaCxJKSwgSyAtIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGMgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjLkluc2VydCgwLCBJKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gTGlzdCBjb2xvcmluZ1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IE1heENvbG9yYWJsZVN1YnNldChMaXN0PGxvbmc+IGFzc2lnbm1lbnQsIExpc3Q8aW50PiBzdWJzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF4Q29sb3JhYmxlU3Vic2V0KGFzc2lnbm1lbnQsIDAsIHN1YnNldCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgTWF4Q29sb3JhYmxlU3Vic2V0KExpc3Q8bG9uZz4gYXNzaWdubWVudCwgaW50IHYsIExpc3Q8aW50PiBzdWJzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodiA+PSBzdWJzZXQuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBtYXggPSBNYXhDb2xvcmFibGVTdWJzZXQoYXNzaWdubWVudCwgdiArIDEsIHN1YnNldCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JzID0gYXNzaWdubWVudFtzdWJzZXRbdl1dO1xyXG4gICAgICAgICAgICB3aGlsZSAoY29sb3JzICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGNvbG9ycyAmIC1jb2xvcnM7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IExpc3Q8bG9uZz4oYXNzaWdubWVudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbmVpZ2hib3IgaW4gX2xhdGVyTmVpZ2hib3JzLlZhbHVlW3N1YnNldFt2XV0pXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudENvcHlbbmVpZ2hib3JdICY9IH5jb2xvcjtcclxuXHJcbiAgICAgICAgICAgICAgICBtYXggPSBNYXRoLk1heChtYXgsIDEgKyBNYXhDb2xvcmFibGVTdWJzZXQoYXNzaWdubWVudENvcHksIHYgKyAxLCBzdWJzZXQpKTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXggPj0gc3Vic2V0LkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbG9ycyBePSBjb2xvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1heDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgR3JlZWR5Q29sb3IoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yaW5nID0gbmV3IGxvbmdbTl07XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHN1YnNldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvc3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxpbnQsbG9uZz4oTmVpZ2hib3JzW3ZdLDBMLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBpbnQsIGxvbmc+KSgobCwgeCkgPT4gbCB8IGNvbG9yaW5nW3hdKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sb3JzID0gYXNzaWdubWVudFt2XSAmIH5sb3N0O1xyXG4gICAgICAgICAgICAgICAgY29sb3Jpbmdbdl0gPSBjb2xvcnMgJiAtY29sb3JzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxsb25nPihjb2xvcmluZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBib29sPikoYyA9PiBjICE9IDApKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ2hvb3NhYmxlKExpc3Q8bG9uZz4gYXNzaWdubWVudCwgTGlzdDxpbnQ+IHN1YnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJc0Nob29zYWJsZShhc3NpZ25tZW50LCAwLCBzdWJzZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBib29sIElzQ2hvb3NhYmxlKExpc3Q8bG9uZz4gYXNzaWdubWVudCwgaW50IHYsIExpc3Q8aW50PiBzdWJzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodiA+PSBzdWJzZXQuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvcnMgPSBhc3NpZ25tZW50W3N1YnNldFt2XV07XHJcbiAgICAgICAgICAgIHdoaWxlIChjb2xvcnMgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gY29sb3JzICYgLWNvbG9ycztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgTGlzdDxsb25nPihhc3NpZ25tZW50KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuZWlnaGJvciBpbiBfbGF0ZXJOZWlnaGJvcnMuVmFsdWVbc3Vic2V0W3ZdXSlcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50Q29weVtuZWlnaGJvcl0gJj0gfmNvbG9yO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChJc0Nob29zYWJsZShhc3NpZ25tZW50Q29weSwgdiArIDEsIHN1YnNldCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29sb3JzIF49IGNvbG9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ2hvb3NhYmxlKExpc3Q8bG9uZz4gYXNzaWdubWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJc0Nob29zYWJsZShhc3NpZ25tZW50LCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9vbCBJc0Nob29zYWJsZShMaXN0PGxvbmc+IGFzc2lnbm1lbnQsIGludCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHYgPj0gTilcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9ycyA9IGFzc2lnbm1lbnRbdl07XHJcbiAgICAgICAgICAgIHdoaWxlIChjb2xvcnMgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gY29sb3JzICYgLWNvbG9ycztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgTGlzdDxsb25nPihhc3NpZ25tZW50KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuZWlnaGJvciBpbiBfbGF0ZXJOZWlnaGJvcnMuVmFsdWVbdl0pXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudENvcHlbbmVpZ2hib3JdICY9IH5jb2xvcjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoSXNDaG9vc2FibGUoYXNzaWdubWVudENvcHksIHYgKyAxKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb2xvcnMgXj0gY29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNDbGlxdWVDb3ZlcmluZyhMaXN0PGxvbmc+IGFzc2lnbm1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIF9pbmRlcGVuZGVudFR3b1NldHMuVmFsdWUpIFxyXG4gICAgICAgICAgICAgICAgaWYgKChhc3NpZ25tZW50W3NldFswXV0gJiBhc3NpZ25tZW50W3NldFsxXV0pICE9IDApIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBDaGVja0ZHQ2hvb3NhYmxlKEZ1bmM8aW50LCBpbnQ+IGYsIEZ1bmM8aW50LCBpbnQ+IGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcG90ID0gRW51bWVyYWJsZS5SYW5nZSgwLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxpbnQ+KFZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBnKHYpKSkgLSAxKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIGZpcnN0ID0gRW51bWVyYWJsZS5SYW5nZSgwLCBmKDApKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIEwgaW4gQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PigoKElFbnVtZXJhYmxlPElFbnVtZXJhYmxlPExpc3Q8aW50Pj4+KShuZXdbXSB7IChuZXdbXSB7IGZpcnN0IH0pIH0pKSxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNraXA8aW50PihWZXJ0aWNlcywxKS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KSh2ID0+IExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4ocG90LCBmKHYpKSkpKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBMTCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihMKTtcclxuICAgICAgICAgICAgICAgIGlmICghSXNHQ29sb3JhYmxlKExMLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pZykpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIExMO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgSXNHQ29sb3JhYmxlKExpc3Q8TGlzdDxpbnQ+PiBMLCBGdW5jPGludCwgaW50PiBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yaW5nIGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KFZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KSh2ID0+IExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4oTFt2XSwgZyh2KSkpKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChJc1Byb3BlckNvbG9yaW5nKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihjb2xvcmluZykpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIElzUHJvcGVyQ29sb3JpbmcoTGlzdDxMaXN0PGludD4+IGNvbG9yaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgdiA9IDA7IHYgPCBOOyB2KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IHcgPSB2ICsgMTsgdyA8IE47IHcrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV9hZGphY2VudFt2LCB3XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uQ291bnQ8aW50Pihjb2xvcmluZ1t2XSxjb2xvcmluZ1t3XSkgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE9ubGluZSBsaXN0IGNvbG9yaW5nXHJcbiAgICAgICAgcHVibGljIGludCBNaWMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1pYyA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzZXQgaW4gRW51bWVyYXRlTWF4aW1hbEluZGVwZW5kZW50U2V0cygpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGludD4oc2V0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBEZWdyZWUodikpKTtcclxuICAgICAgICAgICAgICAgIG1pYyA9IE1hdGguTWF4KG1pYywgdCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtaWM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzT25saW5lRkNob29zYWJsZShGdW5jPGludCwgaW50PiBmKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTm9kZXNWaXNpdGVkID0gMDtcclxuICAgICAgICAgICAgQ2FjaGVIaXRzID0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBmVHJhY2UgPSBuZXcgaW50W05dO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICBmVHJhY2Vbdl0gPSBmKHYpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNhY2hlID0gbmV3IERpY3Rpb25hcnk8T25saW5lQ2hvaWNlSGFzaEdyYXBoLCBib29sPigpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIElzT25saW5lRkNob29zYWJsZShmVHJhY2UsIEVudW1lcmFibGUuUmVwZWF0PGludD4oMSwgTikuVG9BcnJheSgpLCBjYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJvb2wgSXNPbmxpbmVGQ2hvb3NhYmxlKGludFtdIGYsIGludFtdIGcsIERpY3Rpb25hcnk8T25saW5lQ2hvaWNlSGFzaEdyYXBoLCBib29sPiBjYWNoZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCsrO1xyXG5cclxuICAgICAgICAgICAgT25saW5lQ2hvaWNlSGFzaEdyYXBoIGtleSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgaW50W10gZ0Nsb25lID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHZhciBsaXZlVmVydGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihnLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50LCBpbnQ+KSgodiwgaSkgPT4gdiA+IDAgPyBpIDogLTEpKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShpID0+IGkgPj0gMCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgZnJlZWJpZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGludD4obGl2ZVZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gRGVncmVlSW5TdWJncmFwaCh2LCBsaXZlVmVydGljZXMpIDwgZlt2XSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGZyZWViaWVzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdDbG9uZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGdDbG9uZSA9IG5ldyBpbnRbZy5MZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoZywgZ0Nsb25lLCBnLkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gZnJlZWJpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZ1t2XSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgbGl2ZVZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludCwgaW50PikoKHYsIGkpID0+IHYgPiAwID8gaSA6IC0xKSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaSA9PiBpID49IDApKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGZyZWViaWVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxpbnQ+KGxpdmVWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IERlZ3JlZUluU3ViZ3JhcGgodiwgbGl2ZVZlcnRpY2VzKSA8IGZbdl0pKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGxpdmVWZXJ0aWNlcy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZ290byBkb25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxpbnQ+KGxpdmVWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IGZbdl0gPD0gMCkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGdvdG8gZG9uZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAga2V5ID0gbmV3IE9ubGluZUNob2ljZUhhc2hHcmFwaChmLCBnKTtcclxuICAgICAgICAgICAgYm9vbCBjYWNoZWRSZXN1bHQ7XHJcbiAgICAgICAgICAgIGlmIChjYWNoZS5UcnlHZXRWYWx1ZShrZXksIG91dCBjYWNoZWRSZXN1bHQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDYWNoZUhpdHMrKztcclxuXHJcbiAgICAgICAgICAgICAgICBrZXkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gY2FjaGVkUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgZ290byBkb25lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXBlbmRlbnRTZXRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX2luZGVwZW5kZW50U2V0cy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNldCA9PiBzZXQuQ291bnQgPj0gMSAmJiBMaXN0VXRpbGl0eS5TdWJzZXRFcXVhbFNvcnRlZChzZXQsIGxpdmVWZXJ0aWNlcykpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBWIGluIExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4obGl2ZVZlcnRpY2VzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFYuQ291bnQgPD0gMSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGluZGVwZW5kZW50U2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNzID0+IExpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkKFYsIHNzKSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIFYpXHJcbiAgICAgICAgICAgICAgICAgICAgZlt2XS0tO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtYXhpbWFsSW5kZXBlbmRlbnRTZXRzID0gTGlzdFV0aWxpdHkuTWF4aW1hbEVsZW1lbnRzU29ydGVkKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGluZGVwZW5kZW50U2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNldCA9PiBMaXN0VXRpbGl0eS5TdWJzZXRFcXVhbFNvcnRlZChzZXQsIFYpKSkuVG9MaXN0KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjaG9vc2FibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBDIGluIG1heGltYWxJbmRlcGVuZGVudFNldHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gQylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ1t2XS0tO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjaG9vc2FibGUgPSBJc09ubGluZUZDaG9vc2FibGUoZiwgZywgY2FjaGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBDKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnW3ZdKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaG9vc2FibGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIFYpXHJcbiAgICAgICAgICAgICAgICAgICAgZlt2XSsrO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghY2hvb3NhYmxlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGdvdG8gZG9uZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICBkb25lOlxyXG5cclxuICAgICAgICAgICAgaWYgKGdDbG9uZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgQXJyYXkuQ29weShnQ2xvbmUsIGcsIGcuTGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChrZXkgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSByZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAjcmVnaW9uIG9ubGluZSAoZjpnKS1jaG9vc2FiaWxpdHlcclxuICAgICAgICBwdWJsaWMgYm9vbCBJc09ubGluZUZHQ2hvb3NhYmxlKEZ1bmM8aW50LCBpbnQ+IGYsIEZ1bmM8aW50LCBpbnQ+IGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOb2Rlc1Zpc2l0ZWQgPSAwO1xyXG4gICAgICAgICAgICBDYWNoZUhpdHMgPSAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNhY2hlID0gbmV3IERpY3Rpb25hcnk8T25saW5lQ2hvaWNlSGFzaEdyYXBoLCBib29sPigpO1xyXG4gICAgICAgICAgICByZXR1cm4gSXNPbmxpbmVGR0Nob29zYWJsZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihfdmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IGYodikpKS5Ub0FycmF5KCksIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KF92ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gZyh2KSkpLlRvQXJyYXkoKSwgY2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBib29sIElzT25saW5lRkdDaG9vc2FibGUoaW50W10gZiwgaW50W10gZywgRGljdGlvbmFyeTxPbmxpbmVDaG9pY2VIYXNoR3JhcGgsIGJvb2w+IGNhY2hlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTm9kZXNWaXNpdGVkKys7XHJcbiAgICAgICAgICAgIE9ubGluZUNob2ljZUhhc2hHcmFwaCBrZXkgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGludFtdIGdDbG9uZSA9IG5ldyBpbnRbZy5MZW5ndGhdO1xyXG4gICAgICAgICAgICBBcnJheS5Db3B5KGcsIGdDbG9uZSwgZy5MZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ1t2XSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5lZWQgPSBnW3ZdICsgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TdW08aW50PihOZWlnaGJvcnNbdl0sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh3ID0+IGdbd10pKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZlt2XSA+PSBuZWVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ1t2XSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWNoYW5nZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBsaXZlVmVydGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuSW5kaWNlc1doZXJlPGludD4oZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IHYgPiAwKSkpO1xyXG4gICAgICAgICAgICBpZiAobGl2ZVZlcnRpY2VzLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBnb3RvIGRvbmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGludD4obGl2ZVZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gZlt2XSA8IGdbdl0pKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBnb3RvIGRvbmU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGtleSA9IG5ldyBPbmxpbmVDaG9pY2VIYXNoR3JhcGgoZiwgZyk7XHJcbiAgICAgICAgICAgIGJvb2wgY2FjaGVkUmVzdWx0O1xyXG4gICAgICAgICAgICBpZiAoY2FjaGUuVHJ5R2V0VmFsdWUoa2V5LCBvdXQgY2FjaGVkUmVzdWx0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2FjaGVIaXRzKys7XHJcblxyXG4gICAgICAgICAgICAgICAga2V5ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNhY2hlZFJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGdvdG8gZG9uZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGluZGVwZW5kZW50U2V0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF9pbmRlcGVuZGVudFNldHMuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzZXQgPT4gc2V0LkNvdW50ID49IDEgJiYgTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQoc2V0LCBsaXZlVmVydGljZXMpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgViBpbiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KGxpdmVWZXJ0aWNlcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChWLkNvdW50IDw9IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihpbmRlcGVuZGVudFNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzcyA9PiBMaXN0VXRpbGl0eS5TdWJzZXRFcXVhbFNvcnRlZChWLCBzcykpKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBWKVxyXG4gICAgICAgICAgICAgICAgICAgIGZbdl0tLTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4aW1hbEluZGVwZW5kZW50U2V0cyA9IExpc3RVdGlsaXR5Lk1heGltYWxFbGVtZW50c1NvcnRlZChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihpbmRlcGVuZGVudFNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzZXQgPT4gTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQoc2V0LCBWKSkpLlRvTGlzdCgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2hvb3NhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgQyBpbiBtYXhpbWFsSW5kZXBlbmRlbnRTZXRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIEMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdbdl0tLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2hvb3NhYmxlID0gSXNPbmxpbmVGR0Nob29zYWJsZShmLCBnLCBjYWNoZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIEMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdbdl0rKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNob29zYWJsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gVilcclxuICAgICAgICAgICAgICAgICAgICBmW3ZdKys7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFjaG9vc2FibGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZ290byBkb25lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvbmU6XHJcblxyXG4gICAgICAgICAgICBpZiAoZ0Nsb25lICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBBcnJheS5Db3B5KGdDbG9uZSwgZywgZy5MZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGtleSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgY2FjaGVba2V5XSA9IHJlc3VsdDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gT3JpZW50YXRpb25zXHJcbiAgICAgICAgcHVibGljIGludCBEaXJlY3Rpb24oVHVwbGU8aW50LCBpbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIV9hZGphY2VudFtlLkl0ZW0xLCBlLkl0ZW0yXSlcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIERpcmVjdGVkW2UuSXRlbTIsIGUuSXRlbTFdID8gLTEgOiAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBib29sIE1hdGNoZXNPdXRNaW51c0luKExpc3Q8aW50PiBvdXRNaW51c0luKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGludD4oX3ZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gT3V0RGVncmVlKHYpIC0gSW5EZWdyZWUodikgPT0gb3V0TWludXNJblt2XSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgTWVtb2l6ZUV1bGVyaWFuU3ViZ3JhcGhDb3VudGluZyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8R3JhcGg+IFNwYW5uaW5nT3V0TWludXNJblN1YmdyYXBocyhMaXN0PGludD4gb3V0TWludXNJbiwgTGlzdDxUdXBsZTxpbnQsIGludD4+IGVkZ2VzLCBEaWN0aW9uYXJ5PE9yaWVudGF0aW9uSGFzaEdyYXBoLCBMaXN0PEdyYXBoPj4gc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTm9kZXNWaXNpdGVkKys7XHJcblxyXG4gICAgICAgICAgICB2YXIgZ3JhcGhzID0gbmV3IExpc3Q8R3JhcGg+KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8aW50PihfdmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBvdXRNaW51c0luW3ZdID4gT3V0RGVncmVlKHYpIHx8IC1vdXRNaW51c0luW3ZdID4gSW5EZWdyZWUodikpKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBncmFwaHM7XHJcblxyXG4gICAgICAgICAgICB2YXIga2V5ID0gbmV3IE9yaWVudGF0aW9uSGFzaEdyYXBoKHRoaXMsIG91dE1pbnVzSW4pO1xyXG5cclxuICAgICAgICAgICAgaWYgKE1lbW9pemVFdWxlcmlhblN1YmdyYXBoQ291bnRpbmcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIExpc3Q8R3JhcGg+IHNwYW5uZXJzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZS5UcnlHZXRWYWx1ZShrZXksIG91dCBzcGFubmVycykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FjaGVIaXRzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNwYW5uZXJzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZWRnZXMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGNoZXNPdXRNaW51c0luKG91dE1pbnVzSW4pKVxyXG4gICAgICAgICAgICAgICAgICAgIGdyYXBocy5BZGQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyYXBocztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkxhc3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+PihlZGdlcyk7XHJcblxyXG4gICAgICAgICAgICBlZGdlcy5SZW1vdmUoZSk7XHJcbiAgICAgICAgICAgIHZhciBnID0gUmVtb3ZlRWRnZShlKTtcclxuXHJcbiAgICAgICAgICAgIGdyYXBocy5BZGRSYW5nZShnLlNwYW5uaW5nT3V0TWludXNJblN1YmdyYXBocyhvdXRNaW51c0luLCBlZGdlcywgc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3V0TWludXNJblByaW1lID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihvdXRNaW51c0luKTtcclxuICAgICAgICAgICAgdmFyIHYxID0gZS5JdGVtMTtcclxuICAgICAgICAgICAgdmFyIHYyID0gZS5JdGVtMjtcclxuXHJcbiAgICAgICAgICAgIGlmIChEaXJlY3Rpb24oZSkgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgb3V0TWludXNJblByaW1lW2UuSXRlbTFdLS07XHJcbiAgICAgICAgICAgICAgICBvdXRNaW51c0luUHJpbWVbZS5JdGVtMl0rKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG91dE1pbnVzSW5QcmltZVtlLkl0ZW0xXSsrO1xyXG4gICAgICAgICAgICAgICAgb3V0TWludXNJblByaW1lW2UuSXRlbTJdLS07XHJcblxyXG4gICAgICAgICAgICAgICAgdjEgPSBlLkl0ZW0yO1xyXG4gICAgICAgICAgICAgICAgdjIgPSBlLkl0ZW0xO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBncmFwaHMuQWRkUmFuZ2UoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaD4oZy5TcGFubmluZ091dE1pbnVzSW5TdWJncmFwaHMob3V0TWludXNJblByaW1lLCBlZGdlcywgc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaD4pKGdyYXBoID0+IGdyYXBoLkFkZEVkZ2UodjEsIHYyLCB0cnVlKSkpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChNZW1vaXplRXVsZXJpYW5TdWJncmFwaENvdW50aW5nKVxyXG4gICAgICAgICAgICAgICAgc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlW2tleV0gPSBncmFwaHM7XHJcblxyXG4gICAgICAgICAgICBlZGdlcy5BZGQoZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBncmFwaHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PEdyYXBoPiBTcGFubmluZ0V1bGVyaWFuU3ViZ3JhcGhzKExpc3Q8VHVwbGU8aW50LCBpbnQ+PiBlZGdlcywgRGljdGlvbmFyeTxPcmllbnRhdGlvbkhhc2hHcmFwaCwgTGlzdDxHcmFwaD4+IHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTcGFubmluZ091dE1pbnVzSW5TdWJncmFwaHMoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihuZXcgaW50W05dKSwgZWRnZXMsIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENvdW50U3Bhbm5pbmdFdWxlcmlhblN1YmdyYXBocyhvdXQgaW50IGV2ZW4sIG91dCBpbnQgb2RkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2FjaGVIaXRzID0gMDtcclxuICAgICAgICAgICAgTm9kZXNWaXNpdGVkID0gMDtcclxuICAgICAgICAgICAgdmFyIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PE9yaWVudGF0aW9uSGFzaEdyYXBoLCBMaXN0PEdyYXBoPj4oKTtcclxuICAgICAgICAgICAgdmFyIGVkZ2VzID0gR2V0RWRnZVR1cGxlcygpO1xyXG5cclxuICAgICAgICAgICAgZXZlbiA9IDA7XHJcbiAgICAgICAgICAgIG9kZCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBnIGluIFNwYW5uaW5nRXVsZXJpYW5TdWJncmFwaHMoZWRnZXMsIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChnLlNpemUgJSAyID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbisrO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIG9kZCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENvdW50U3Bhbm5pbmdFdWxlcmlhblN1YmdyYXBoc1VzaW5nVmVydGljZXMoTGlzdDxpbnQ+IHZlcnRpY2VzLCBvdXQgaW50IGV2ZW4sIG91dCBpbnQgb2RkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2FjaGVIaXRzID0gMDtcclxuICAgICAgICAgICAgTm9kZXNWaXNpdGVkID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmICh2ZXJ0aWNlcyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdmVydGljZXMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlID0gbmV3IERpY3Rpb25hcnk8T3JpZW50YXRpb25IYXNoR3JhcGgsIExpc3Q8R3JhcGg+PigpO1xyXG4gICAgICAgICAgICB2YXIgZWRnZXMgPSBHZXRFZGdlVHVwbGVzKCk7XHJcblxyXG4gICAgICAgICAgICBldmVuID0gMDtcclxuICAgICAgICAgICAgb2RkID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGcgaW4gU3Bhbm5pbmdFdWxlcmlhblN1YmdyYXBocyhlZGdlcywgc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGcuRGVncmVlKHYpIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZy5TaXplICUgMiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW4rKztcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBvZGQrKztcclxuXHJcbiAgICAgICAgICAgIHNraXA6IDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBDb3VudFNwYW5uaW5nRXVsZXJpYW5TdWJncmFwaHNVc2luZ0VkZ2VzKExpc3Q8VHVwbGU8aW50LCBpbnQ+PiBlZGdlcywgb3V0IGludCBldmVuLCBvdXQgaW50IG9kZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENhY2hlSGl0cyA9IDA7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCA9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoZWRnZXMgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGVkZ2VzID0gbmV3IExpc3Q8VHVwbGU8aW50LCBpbnQ+PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PE9yaWVudGF0aW9uSGFzaEdyYXBoLCBMaXN0PEdyYXBoPj4oKTtcclxuICAgICAgICAgICAgdmFyIGVkZ2VUdXBsZXMgPSBHZXRFZGdlVHVwbGVzKCk7XHJcblxyXG4gICAgICAgICAgICBldmVuID0gMDtcclxuICAgICAgICAgICAgb2RkID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGcgaW4gU3Bhbm5pbmdFdWxlcmlhblN1YmdyYXBocyhlZGdlVHVwbGVzLCBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBlZGdlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWcuX2FkamFjZW50W2UuSXRlbTEsIGUuSXRlbTJdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGcuU2l6ZSAlIDIgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBldmVuKys7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgb2RkKys7XHJcblxyXG4gICAgICAgICAgICBza2lwOiA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEdyYXBoPiBFbnVtZXJhdGVPcmllbnRhdGlvbnMoRnVuYzxpbnQsIGludD4gcmVxdWlyZWRJbmRlZ3JlZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnYWluID0gbmV3IGludFtOXTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpbk5laWdoYm9yTGlzdCBpbiBFbnVtZXJhdGVPcmllbnRhdGlvbnNGb3IoMCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KXJlcXVpcmVkSW5kZWdyZWUsIGdhaW4pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWRqYWNlbnQgPSBuZXcgYm9vbFtOLCBOXTtcclxuICAgICAgICAgICAgICAgIHZhciBkaXJlY3RlZCA9IG5ldyBib29sW04sIE5dO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5OZWlnaGJvckxpc3QuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGluTmVpZ2hib3JMaXN0LkNvdW50IC0gMSAtIGk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIGluTmVpZ2hib3JMaXN0W2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbdiwgd10gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGphY2VudFt3LCB2XSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RlZFt3LCB2XSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3V0TmVpZ2hib3JzID0gTGlzdFV0aWxpdHkuRGlmZmVyZW5jZTxpbnQ+KF9sYXRlck5laWdoYm9ycy5WYWx1ZVt2XSwgaW5OZWlnaGJvckxpc3RbaV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGphY2VudFt2LCB3XSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkamFjZW50W3csIHZdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGVkW3YsIHddID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5ldyBHcmFwaChHZXRFZGdlV2VpZ2h0cyhhZGphY2VudCwgZGlyZWN0ZWQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PExpc3Q8aW50Pj4+IEVudW1lcmF0ZU9yaWVudGF0aW9uc0ZvcihpbnQgdiwgRnVuYzxpbnQsIGludD4gcmVxdWlyZWRJbmRlZ3JlZSwgaW50W10gZ2FpbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2ID49IE4gLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2Fpblt2XSA8IHJlcXVpcmVkSW5kZWdyZWUodikpXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBlbHNlIFxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaW5zIGluIExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4oX2xhdGVyTmVpZ2hib3JzLlZhbHVlW3ZdKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zLkNvdW50IDwgcmVxdWlyZWRJbmRlZ3JlZSh2KSAtIGdhaW5bdl0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3V0cyA9IExpc3RVdGlsaXR5LkRpZmZlcmVuY2U8aW50PihfbGF0ZXJOZWlnaGJvcnMuVmFsdWVbdl0sIGlucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB4IGluIG91dHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhaW5beF0rKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG8gaW4gRW51bWVyYXRlT3JpZW50YXRpb25zRm9yKHYgKyAxLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pcmVxdWlyZWRJbmRlZ3JlZSwgZ2FpbikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvLkFkZChpbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG87XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgeCBpbiBvdXRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYWluW3hdLS07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEdyYXBoPiBFbnVtZXJhdGVPcmllbnRhdGlvbnMoYm9vbCBmYXN0ID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdW5kaXJlY3RlZFdlaWdodHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihHZXRFZGdlV2VpZ2h0cygpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodyA9PiBNYXRoLkFicyh3KSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgZWRnZUluZGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50Pih1bmRpcmVjdGVkV2VpZ2h0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludCwgaW50PikoKHcsIGkpID0+IHcgIT0gMCA/IGkgOiAtMSkpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHggPT4geCA+IDApKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB1bmRpcmVjdGVkID0gbmV3IEdyYXBoKHVuZGlyZWN0ZWRXZWlnaHRzKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBsaXN0IGluIExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4oZWRnZUluZGljZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2VpZ2h0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHVuZGlyZWN0ZWRXZWlnaHRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50LCBpbnQ+KSgodywgaSkgPT4gbGlzdC5Db250YWlucyhpKSA/IC13IDogdykpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgR3JhcGgod2VpZ2h0cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEdlbmVyYXRlUmFuZG9tT3JpZW50YXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHVuZGlyZWN0ZWRXZWlnaHRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oR2V0RWRnZVdlaWdodHMoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHcgPT4gTWF0aC5BYnModykpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIGVkZ2VJbmRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4odW5kaXJlY3RlZFdlaWdodHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh3LCBpKSA9PiB3ICE9IDAgPyBpIDogLTEpKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh4ID0+IHggPiAwKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGlzdCA9IG5ldyBMaXN0PGludD4oRSAvIDIpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBlZGdlSW5kaWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJORy5OZXh0KDIpID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5BZGQoaSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciB3ZWlnaHRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4odW5kaXJlY3RlZFdlaWdodHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh3LCBpKSA9PiBsaXN0LkNvbnRhaW5zKGkpID8gLXcgOiB3KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKHdlaWdodHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8R3JhcGg+IEVudW1lcmF0ZUFjeWNsaWNPcmllbnRhdGlvbnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZUFjeWNsaWNPcmllbnRhdGlvbnMoMCwgbmV3IERpY3Rpb25hcnk8aW50LExpc3Q8aW50Pj4oTikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBJRW51bWVyYWJsZTxHcmFwaD4gRW51bWVyYXRlQWN5Y2xpY09yaWVudGF0aW9ucyhpbnQgaSwgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gb3V0TmVpZ2hib3JzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGkgPj0gTilcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBGcm9tT3V0TmVpZ2hib3JMaXN0cyhvdXROZWlnaGJvcnMpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZWlnaGJvcnMgPSBOZWlnaGJvcnNJblN1YmdyYXBoKGksIEVudW1lcmFibGUuUmFuZ2UoMCwgaSkuVG9MaXN0KCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5laWdoYm9ycy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZSA9IENsb25lT3V0TmVpZ2hib3JzKG91dE5laWdoYm9ycyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lW2ldID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBnIGluIEVudW1lcmF0ZUFjeWNsaWNPcmllbnRhdGlvbnMoaSArIDEsIGNsb25lKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRlZE5laWdoYm9ycyA9IFRvcG9sb2dpY2FsU29ydChpLCBuZWlnaGJvcnMsIG91dE5laWdoYm9ycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGQgaW4gRW51bWVyYXRlTGVnYWxEaXJlY3Rpb25Bc3NpZ25tZW50cyhpLCBzb3J0ZWROZWlnaGJvcnMsIG91dE5laWdoYm9ycykpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xvbmUgPSBDbG9uZU91dE5laWdoYm9ycyhvdXROZWlnaGJvcnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVbaV0gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihkLkVudW1lcmF0ZUJpdHMoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGIgPT4gc29ydGVkTmVpZ2hib3JzW3NvcnRlZE5laWdoYm9ycy5Db3VudCAtIDEgLSBiXSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRGlmZmVyZW5jZTxpbnQ+KG5laWdoYm9ycyxjbG9uZVtpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZVt2XS5BZGQoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZyBpbiBFbnVtZXJhdGVBY3ljbGljT3JpZW50YXRpb25zKGkgKyAxLCBjbG9uZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gQ2xvbmVPdXROZWlnaGJvcnMoRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gb3V0TmVpZ2hib3JzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNsb25lID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+KG91dE5laWdoYm9ycy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIG91dE5laWdoYm9ycylcclxuICAgICAgICAgICAgICAgIGNsb25lW2t2cC5LZXldID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihrdnAuVmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBMaXN0PGludD4gVG9wb2xvZ2ljYWxTb3J0KGludCBpLCBMaXN0PGludD4gdmVydGljZXMsIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IG91dE5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbk5laWdoYm9yQ291bnQgPSBuZXcgaW50W2ldO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIG91dE5laWdoYm9ycylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2ZXJ0aWNlcy5Db250YWlucyhrdnAuS2V5KSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkludGVyc2VjdDxpbnQ+KGt2cC5WYWx1ZSx2ZXJ0aWNlcykpXHJcbiAgICAgICAgICAgICAgICAgICAgaW5OZWlnaGJvckNvdW50W3ZdKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBzb3J0ZWQgPSBuZXcgTGlzdDxpbnQ+KGkpO1xyXG4gICAgICAgICAgICB2YXIgc291cmNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8aW50Pih2ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IGluTmVpZ2hib3JDb3VudFt2XSA9PSAwKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoc291cmNlcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW3NvdXJjZXMuQ291bnQgLSAxXTtcclxuICAgICAgICAgICAgICAgIHNvdXJjZXMuUmVtb3ZlQXQoc291cmNlcy5Db3VudCAtIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNvcnRlZC5BZGQoc291cmNlKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuSW50ZXJzZWN0PGludD4ob3V0TmVpZ2hib3JzW3NvdXJjZV0sdmVydGljZXMpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGluTmVpZ2hib3JDb3VudFt2XS0tO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbk5laWdoYm9yQ291bnRbdl0gPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlcy5BZGQodik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3J0ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIElFbnVtZXJhYmxlPGxvbmc+IEVudW1lcmF0ZUxlZ2FsRGlyZWN0aW9uQXNzaWdubWVudHMoaW50IGksIExpc3Q8aW50PiBzb3J0ZWROZWlnaGJvcnMsIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IG91dE5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgZCA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgYW5jZXN0b3JMaXN0cyA9IEdldEFuY2VzdG9yTGlzdHMoaSwgb3V0TmVpZ2hib3JzKTtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBkO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkLkFsbFNldChzb3J0ZWROZWlnaGJvcnMuQ291bnQpKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGQgPSBDbG9zdXJlKGQgKyAxLCBzb3J0ZWROZWlnaGJvcnMsIGFuY2VzdG9yTGlzdHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvbmcgQ2xvc3VyZShsb25nIGQsIExpc3Q8aW50PiBzb3J0ZWROZWlnaGJvcnMsIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IGFuY2VzdG9yTGlzdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZG9uZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCFkb25lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkb25lID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciB2IGluIHNvcnRlZE5laWdoYm9ycylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdkJpdCA9IHNvcnRlZE5laWdoYm9ycy5Db3VudCAtIDEgLSBzb3J0ZWROZWlnaGJvcnMuSW5kZXhPZih2KTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkludGVyc2VjdDxpbnQ+KGFuY2VzdG9yTGlzdHNbdl0sc29ydGVkTmVpZ2hib3JzKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3Qml0ID0gc29ydGVkTmVpZ2hib3JzLkNvdW50IC0gMSAtIHNvcnRlZE5laWdoYm9ycy5JbmRleE9mKHcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC5Jc0JpdFNldCh3Qml0KSAmJiAhZC5Jc0JpdFNldCh2Qml0KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGQuU2V0Qml0KHZCaXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gR2V0QW5jZXN0b3JMaXN0cyhpbnQgaSwgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gb3V0TmVpZ2hib3JzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFuY2VzdG9yTGlzdHMgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4oaSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCB2ID0gMDsgdiA8IGk7IHYrKylcclxuICAgICAgICAgICAgICAgIGFuY2VzdG9yTGlzdHNbdl0gPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzE2KT0+e19vMTYuQWRkKHYpO3JldHVybiBfbzE2O30pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgd2hpbGUgKCFkb25lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkb25lID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCB2ID0gMDsgdiA8IGk7IHYrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBvdXROZWlnaGJvcnNbdl0pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodyA+PSBpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGFuY2VzdG9yTGlzdHNbd10uQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2VzdG9yTGlzdHNbd10gPSBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50PihhbmNlc3Rvckxpc3RzW3ddLGFuY2VzdG9yTGlzdHNbdl0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFuY2VzdG9yTGlzdHNbd10uQ291bnQgPiBjKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFuY2VzdG9yTGlzdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBDbGFzc2ljIEFsZ29yaXRobXNcclxuICAgICAgICBwdWJsaWMgRXF1aXZhbGVuY2VSZWxhdGlvbjxpbnQ+IEZpbmRGYWN0b3JzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlcXVpdmFsZW5jZVJlbGF0aW9uID0gbmV3IEFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlcXVpdmFsZW5jZVJlbGF0aW9uLkFkZEVsZW1lbnQoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcXVpdmFsZW5jZVJlbGF0aW9uLlJlbGF0ZShpLCBqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVxdWl2YWxlbmNlUmVsYXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBFcXVpdmFsZW5jZVJlbGF0aW9uPGludD4gRmluZENvbXBvbmVudHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGVxdWl2YWxlbmNlUmVsYXRpb24gPSBuZXcgQWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248aW50PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVxdWl2YWxlbmNlUmVsYXRpb24uQWRkRWxlbWVudChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXF1aXZhbGVuY2VSZWxhdGlvbi5SZWxhdGUoaSwgaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlcXVpdmFsZW5jZVJlbGF0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgRXF1aXZhbGVuY2VSZWxhdGlvbjxpbnQ+IEZpbmRDb21wb25lbnRzKExpc3Q8aW50PiB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGVxdWl2YWxlbmNlUmVsYXRpb24gPSBuZXcgQWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248aW50PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVxdWl2YWxlbmNlUmVsYXRpb24uQWRkRWxlbWVudCh2W2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCB2LkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFt2W2ldLCB2W2pdXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXF1aXZhbGVuY2VSZWxhdGlvbi5SZWxhdGUodltpXSwgdltqXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlcXVpdmFsZW5jZVJlbGF0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3B1YmxpYyBMaXN0PExpc3Q8aW50Pj4gRmluZFN0cm9uZ0NvbXBvbmVudHNUYXJqYW4oKVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vICAgIHZhciBzdHJvbmdDb21wb25lbnRzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyAgICB2YXIgaW5kaWNlcyA9IEVudW1lcmFibGUuUmVwZWF0KC0xLCBOKS5Ub0FycmF5KCk7XHJcbiAgICAgICAgLy8gICAgdmFyIGxvd2xpbmsgPSBFbnVtZXJhYmxlLlJlcGVhdCgtMSwgTikuVG9BcnJheSgpO1xyXG4gICAgICAgIC8vICAgIHZhciBTID0gbmV3IFN0YWNrPGludD4oKTtcclxuICAgICAgICAvLyAgICB2YXIgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAvLyAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgLy8gICAge1xyXG4gICAgICAgIC8vICAgICAgICBpZiAoaW5kaWNlc1t2XSA8IDApXHJcbiAgICAgICAgLy8gICAgICAgICAgICBTdHJvbmdDb25uZWN0KHYsIHJlZiBpbmRleCwgaW5kaWNlcywgbG93bGluaywgUywgc3Ryb25nQ29tcG9uZW50cyk7XHJcbiAgICAgICAgLy8gICAgfVxyXG5cclxuICAgICAgICAvLyAgICByZXR1cm4gc3Ryb25nQ29tcG9uZW50cztcclxuICAgICAgICAvL31cclxuICAgICAgICAvL3ZvaWQgU3Ryb25nQ29ubmVjdChpbnQgdiwgcmVmIGludCBpbmRleCwgaW50W10gaW5kaWNlcywgaW50W10gbG93bGluaywgU3RhY2s8aW50PiBTLCBMaXN0PExpc3Q8aW50Pj4gc3Ryb25nQ29tcG9uZW50cylcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICBpbmRpY2VzW3ZdID0gaW5kZXg7XHJcbiAgICAgICAgLy8gICAgbG93bGlua1t2XSA9IGluZGV4O1xyXG4gICAgICAgIC8vICAgIGluZGV4Kys7XHJcbiAgICAgICAgLy8gICAgUy5QdXNoKHYpO1xyXG5cclxuICAgICAgICAvLyAgICBmb3JlYWNoICh2YXIgdyBpbiBPdXROZWlnaGJvcnNbdl0pXHJcbiAgICAgICAgLy8gICAge1xyXG4gICAgICAgIC8vICAgICAgICBpZiAoaW5kaWNlc1t3XSA8IDApXHJcbiAgICAgICAgLy8gICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgIFN0cm9uZ0Nvbm5lY3QodywgcmVmIGluZGV4LCBpbmRpY2VzLCBsb3dsaW5rLCBTLCBzdHJvbmdDb21wb25lbnRzKTtcclxuICAgICAgICAvLyAgICAgICAgICAgIGxvd2xpbmtbdl0gPSBNYXRoLk1pbihsb3dsaW5rW3ZdLCBsb3dsaW5rW3ddKTtcclxuICAgICAgICAvLyAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICBlbHNlIGlmIChTLkNvbnRhaW5zKHcpKVxyXG4gICAgICAgIC8vICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBsb3dsaW5rW3ZdID0gTWF0aC5NaW4obG93bGlua1t2XSwgaW5kaWNlc1t3XSk7XHJcbiAgICAgICAgLy8gICAgICAgIH1cclxuICAgICAgICAvLyAgICB9XHJcblxyXG4gICAgICAgIC8vICAgIGlmIChsb3dsaW5rW3ZdID09IGluZGljZXNbdl0pXHJcbiAgICAgICAgLy8gICAge1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgY29tcG9uZW50ID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgIC8vICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICB2YXIgdyA9IFMuUG9wKCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBjb21wb25lbnQuQWRkKHcpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgICAgIGlmICh3ID09IHYpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy8gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgICAgIHN0cm9uZ0NvbXBvbmVudHMuQWRkKGNvbXBvbmVudCk7XHJcbiAgICAgICAgLy8gICAgfVxyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IENvbXB1dGVEaWFtZXRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnRbLF0gZGlzdGFuY2U7XHJcbiAgICAgICAgICAgIGludFssXSBuZXh0O1xyXG4gICAgICAgICAgICBGbG95ZFdhcnNoYWxsKG91dCBkaXN0YW5jZSwgb3V0IG5leHQpO1xyXG4gICAgICAgICAgICBpbnQgZGlhbWV0ZXIgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBWZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlW3YsIHddID4gZGlhbWV0ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyID0gZGlzdGFuY2Vbdiwgd107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkaWFtZXRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZsb3lkV2Fyc2hhbGwob3V0IGludFssXSBkaXN0YW5jZSwgb3V0IGludFssXSBuZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGlzdGFuY2UgPSBuZXcgaW50W04sIE5dO1xyXG4gICAgICAgICAgICBuZXh0ID0gbmV3IGludFtOLCBOXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VbaSwgal0gPSBpbnQuTWF4VmFsdWUgLyAzO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09IGopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlW2ksIGpdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKmlmIChEaXJlY3RlZFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlW2ksIGpdID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEaXJlY3RlZFtqLCBpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlW2osIGldID0gMTsqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VbaSwgal0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVtqLCBpXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIG5leHRbaSwgal0gPSAtMTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDwgTjsgaysrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZVtpLCBrXSArIGRpc3RhbmNlW2ssIGpdIDwgZGlzdGFuY2VbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlW2ksIGpdID0gZGlzdGFuY2VbaSwga10gKyBkaXN0YW5jZVtrLCBqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRbaSwgal0gPSBrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxpbnQ+IEZsb3lkV2Fyc2hhbGxTaG9ydGVzdFBhdGgoaW50IHYsIGludCB3LCBpbnRbLF0gZGlzdGFuY2UsIGludFssXSBuZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRpc3RhbmNlW3YsIHddID09IGludC5NYXhWYWx1ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5leHRbdiwgd10gPT0gLTEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3W10geyB2LCB3IH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5VbmlvbjxpbnQ+KEZsb3lkV2Fyc2hhbGxTaG9ydGVzdFBhdGgodiwgbmV4dFt2LCB3XSwgZGlzdGFuY2UsIG5leHQpLFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2tpcDxpbnQ+KEZsb3lkV2Fyc2hhbGxTaG9ydGVzdFBhdGgobmV4dFt2LCB3XSwgdywgZGlzdGFuY2UsIG5leHQpLDEpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9wdWJsaWMgTGlzdDxpbnQ+IEZpbmRTaG9ydGVzdEN5Y2xlKClcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB2YXIgc2hvcnRlc3RMZW5ndGggPSBpbnQuTWF4VmFsdWU7XHJcbiAgICAgICAgLy8gICAgdmFyIHNob3J0ZXN0Q3ljbGUgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgIC8vICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAvLyAgICB7XHJcbiAgICAgICAgLy8gICAgICAgIHZhciBkaXN0YW5jZSA9IG5ldyBpbnRbTl07XHJcbiAgICAgICAgLy8gICAgICAgIHZhciBwYXJlbnQgPSBFbnVtZXJhYmxlLlJlcGVhdCgtMSwgTikuVG9BcnJheSgpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgdmFyIHZpc2l0ZWQgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgLy8gICAgICAgIHZhciBsZWF2ZXMgPSBuZXcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuUXVldWU8aW50PigpO1xyXG4gICAgICAgIC8vICAgICAgICBsZWF2ZXMuRW5xdWV1ZSh2KTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgIHdoaWxlIChsZWF2ZXMuQ291bnQgPiAwKVxyXG4gICAgICAgIC8vICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICB2YXIgeCA9IGxlYXZlcy5EZXF1ZXVlKCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICB2aXNpdGVkLkFkZCh4KTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICBmb3JlYWNoICh2YXIgeSBpbiBOZWlnaGJvcnNbeF0pXHJcbiAgICAgICAgLy8gICAgICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgaWYgKHkgPT0gcGFyZW50W3hdKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgaWYgKCF2aXNpdGVkLkNvbnRhaW5zKHkpKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgcGFyZW50W3ldID0geDtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VbeV0gPSBkaXN0YW5jZVt4XSArIDE7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIGxlYXZlcy5FbnF1ZXVlKHkpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICBlbHNlIGlmIChkaXN0YW5jZVt4XSArIGRpc3RhbmNlW3ldICsgMSA8IHNob3J0ZXN0TGVuZ3RoKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgc2hvcnRlc3RMZW5ndGggPSBkaXN0YW5jZVt4XSArIGRpc3RhbmNlW3ldICsgMTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgc2hvcnRlc3RDeWNsZS5DbGVhcigpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSB4O1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICB3aGlsZSAodyAhPSAtMSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRlc3RDeWNsZS5BZGQodyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB3ID0gcGFyZW50W3ddO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICBpZiAoeSAhPSB2KVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB3ID0geTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICh3ICE9IC0xKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0ZXN0Q3ljbGUuSW5zZXJ0KDAsIHcpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBwYXJlbnRbd107XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgIH1cclxuICAgICAgICAvLyAgICB9XHJcblxyXG4gICAgICAgIC8vICAgIHJldHVybiBzaG9ydGVzdEN5Y2xlO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEdyYXBoc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggRShpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgobmV3IGJvb2xbbiwgbl0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIEsoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRShuKS5Db21wbGVtZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggUChpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBHID0gRShuKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuIC0gMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgRyA9IEcuQWRkRWRnZShpLCBpICsgMSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBTdGFyKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIEcgPSBFKG4pO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIEcgPSBHLkFkZEVkZ2UoMCwgaSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBDKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFAobikuQWRkRWRnZShuIC0gMSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggRGlhbW9uZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEUoMikgKiBLKDIpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggQnVsbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEsoMykuQXR0YWNoTmV3VmVydGV4KDEpLkF0dGFjaE5ld1ZlcnRleCgyKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIEtpdGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBEaWFtb25kLkF0dGFjaE5ld1ZlcnRleCgxKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIERhcnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBEaWFtb25kLkF0dGFjaE5ld1ZlcnRleCgyKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIENoYWlyXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gUCg0KS5BdHRhY2hOZXdWZXJ0ZXgoMik7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBFbXB0eVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIG5ldyBHcmFwaChuZXcgYm9vbFswLCAwXSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBQYXdcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBQKDQpLkFkZEVkZ2UoMCwgMik7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBIXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gUCg0KS5BdHRhY2hOZXdWZXJ0ZXgoMSkuQXR0YWNoTmV3VmVydGV4KDIpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBIYXNoR3JhcGhcclxuICAgIHtcclxuICAgICAgICBieXRlW10gX3ZhbHVlcztcclxuICAgICAgICBMaXN0PGludD4gX291dE1pbnVzSW47XHJcbiAgICAgICAgaW50IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgcHVibGljIEhhc2hHcmFwaChHcmFwaCBnLCBMaXN0PGludD4gb3V0TWludXNJbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF92YWx1ZXMgPSBuZXcgYnl0ZVtnLk4gKiAoZy5OIC0gMSkgLyAyXTtcclxuICAgICAgICAgICAgX291dE1pbnVzSW4gPSBvdXRNaW51c0luO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGcuTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBnLk47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSAoYnl0ZSkoZ1tpLCBqXSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgICAgICAgICBfdmFsdWVzW2tdID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnW2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGFzaENvZGUgKz0gMSA8PCAoayAlIDMyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBvdXRNaW51c0luKVxyXG4gICAgICAgICAgICAgICAgX2hhc2hDb2RlID0gX2hhc2hDb2RlICogMzMgKyBpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb3RoZXIgPSBvYmogYXMgSGFzaEdyYXBoO1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8aW50Pihfb3V0TWludXNJbixvdGhlci5fb3V0TWludXNJbikgJiYgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGJ5dGU+KF92YWx1ZXMsb3RoZXIuX3ZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBIZXJlZGl0YXJ5Q2xhc3NFbnVtZXJhdGlvblxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBTaXplQ29tcGFyZXIgX3NpemVDb21wYXJlciA9IG5ldyBTaXplQ29tcGFyZXIoKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxHcmFwaD4gRW51bWVyYXRlQ2xhc3MocGFyYW1zIEdyYXBoW10gZXhjbHVkZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlQ2xhc3MoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoPihleGNsdWRlZCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxHcmFwaD4gRW51bWVyYXRlQ2xhc3MoTGlzdDxHcmFwaD4gZXhjbHVkZWQsIGludCBtYXhWZXJ0aWNlcyA9IGludC5NYXhWYWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGV4Y2x1ZGVkLlNvcnQoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGludD4pKChnMSwgZzIpID0+IGcxLk4uQ29tcGFyZVRvKGcyLk4pKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZXhjbHVkZWQuQ291bnQgPiAwICYmIGV4Y2x1ZGVkWzBdLk4gPD0gMSkgeWllbGQgYnJlYWs7XHJcbiAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgR3JhcGgobmV3IExpc3Q8aW50PigpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsYXN0TGV2ZWwgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8R3JhcGg+KCksKF9vMTcpPT57X28xNy5BZGQobmV3IEdyYXBoKG5ldyBMaXN0PGludD4oKSkpO3JldHVybiBfbzE3O30pO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGxhc3RMZXZlbC5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TGV2ZWwgPSBuZXcgTGlzdDxHcmFwaD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgRyBpbiBsYXN0TGV2ZWwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTGlzdDxMaXN0PGludD4+IG5laWdoYm9yU2V0cztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEcuSXNDb21wbGV0ZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JTZXRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihFbnVtZXJhYmxlLlJhbmdlKDAsIEcuTikuVG9MaXN0KCkpLF9zaXplQ29tcGFyZXIpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvclNldHMgPSBMaXN0VXRpbGl0eS5HZW5lcmF0ZVN1Ymxpc3RzPGludD4oRW51bWVyYWJsZS5SYW5nZSgwLCBHLk4pLlRvTGlzdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG5laWdoYm9yU2V0IGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KG5laWdoYm9yU2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKGwgPT4gbC5Db3VudCA+IDApKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBIID0gRy5BdHRhY2hOZXdWZXJ0ZXgobmVpZ2hib3JTZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaD4oY3VycmVudExldmVsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgYm9vbD4pKFcgPT4gR3JhcGguSXNvbW9ycGhpYyhILCBXKSkpKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaD4oZXhjbHVkZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBib29sPikoVyA9PiBILkNvbnRhaW5zSW5kdWNlZChXKSkpKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMZXZlbC5BZGQoSCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBIO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudExldmVsLkNvdW50ID4gMCAmJiBjdXJyZW50TGV2ZWxbMF0uTiA+PSBtYXhWZXJ0aWNlcykgeWllbGQgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBsYXN0TGV2ZWwgPSBjdXJyZW50TGV2ZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNsYXNzIFNpemVDb21wYXJlciA6IElFcXVhbGl0eUNvbXBhcmVyPExpc3Q8aW50Pj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhMaXN0PGludD4geCwgTGlzdDxpbnQ+IHkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB4LkNvdW50ID09IHkuQ291bnQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgR2V0SGFzaENvZGUoTGlzdDxpbnQ+IG9iailcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5Db3VudC5HZXRIYXNoQ29kZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEh5cGVyZ3JhcGg8VD5cclxuICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgIHtcclxuICAgICAgICBTb3J0ZWRMaXN0Q29tcGFyZXIgX2xpc3RDb21wYXJlciA9IG5ldyBTb3J0ZWRMaXN0Q29tcGFyZXIoKTtcclxuICAgICAgICBwdWJsaWMgSGFzaFNldDxMaXN0PFQ+PiBFIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSHlwZXJncmFwaChMaXN0PExpc3Q8VD4+IGVkZ2VzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlZGdlcyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBlZGdlcylcclxuICAgICAgICAgICAgICAgICAgICBlLlNvcnQoKTtcclxuICAgICAgICAgICAgICAgIEUgPSBuZXcgSGFzaFNldDxMaXN0PFQ+PihlZGdlcywgX2xpc3RDb21wYXJlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgRSA9IG5ldyBIYXNoU2V0PExpc3Q8VD4+KF9saXN0Q29tcGFyZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEh5cGVyZ3JhcGg8VD4gTWluKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGFpbkhlYWRzID0gbmV3IExpc3Q8TGlzdDxUPj4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzZXQgaW4gRSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlbW92ZWQgPSBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGNoYWluSGVhZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoaGVhZCA9PiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQ8VD4oc2V0LGhlYWQpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVtb3ZlZCA+IDAgfHwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKGhlYWQgPT4gIUFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbFNvcnRlZDxUPihoZWFkLHNldCkpKSlcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbkhlYWRzLkFkZChzZXQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEh5cGVyZ3JhcGg8VD4oY2hhaW5IZWFkcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSHlwZXJncmFwaDxUPiBUcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgSCA9IG5ldyBIeXBlcmdyYXBoPFQ+KEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxMaXN0PFQ+PigpLChfbzE4KT0+e19vMTguQWRkKG5ldyBMaXN0PFQ+KCkpO3JldHVybiBfbzE4O30pKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIEUpXHJcbiAgICAgICAgICAgICAgICBIID0gSC5Qcm9kdWN0KEVkZ2VIeXBlcmdyYXBoKGUpKS5NaW4oKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBIO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSHlwZXJncmFwaDxUPiBFZGdlSHlwZXJncmFwaChMaXN0PFQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEh5cGVyZ3JhcGg8VD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8VCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikodiA9PiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkVuTGlzdDxUPih2KSkpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBIeXBlcmdyYXBoPFQ+IFVuaW9uKEh5cGVyZ3JhcGg8VD4gb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEh5cGVyZ3JhcGg8VD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5VbmlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEUsb3RoZXIuRSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEh5cGVyZ3JhcGg8VD4gUHJvZHVjdChIeXBlcmdyYXBoPFQ+IG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIeXBlcmdyYXBoPFQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihFLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikoZV9pID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KG90aGVyLkUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KShlX2ogPT4gTGlzdFV0aWxpdHkuVW5pb248VD4oZV9pLCBlX2opKSkuVG9MaXN0KCkpKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjbGFzcyBTb3J0ZWRMaXN0Q29tcGFyZXIgOiBJRXF1YWxpdHlDb21wYXJlcjxMaXN0PFQ+PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKExpc3Q8VD4geCwgTGlzdDxUPiB5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KHgseSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgR2V0SGFzaENvZGUoTGlzdDxUPiBsaXN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bmNoZWNrZWRcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgaGFzaCA9IDE5O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB4IGluIGxpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2ggPSBoYXNoICogMzEgKyB4LkdldEhhc2hDb2RlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoYXNoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuSW5kZXBlbmRlbmNlUmF0aW9cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBNaW5vckZpbmRlclxyXG4gICAge1xyXG4gICAgICAgIC8vIFRPRE86IHJlcGxhY2UgbmFpdmUgaW1wbGVtZW50YXRpb24gb2YgdGhpcyB3aXRoIGZhc3QgdmVyc2lvbiBpZiBuZWNlc3NhcnkuXHJcbiAgICAgICAgLy8gYWxzbywgfEp8IGlzIGhhcmRjb2RlZCB0byAzLCB3aGljaCBpcyBhbGwgd2UgbmVlZCBub3cuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+Pj4+IEZpbmRXaXRoSihHcmFwaCBnLCBMaXN0PGludD4gSilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChKLkNvdW50ICE9IDMpXHJcbiAgICAgICAgICAgICAgICB5aWVsZCBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0cmlwbGUgaW4gRW51bWVyYXRlQ29ubmVjdGVkVGhyZWVQYXJ0UGFydGl0aW9ucyhnLCBKKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGcuSW5kZXBlbmRlbmNlTnVtYmVyKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KHRyaXBsZS5JdGVtMSxKKSkgPCA0KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGcuSW5kZXBlbmRlbmNlTnVtYmVyKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KHRyaXBsZS5JdGVtMixKKSkgPCA0KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGcuSW5kZXBlbmRlbmNlTnVtYmVyKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KHRyaXBsZS5JdGVtMyxKKSkgPCA0KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGcuRWRnZXNCZXR3ZWVuKHRyaXBsZS5JdGVtMSwgdHJpcGxlLkl0ZW0yKSA8PSAwICYmIGcuSW5kZXBlbmRlbmNlTnVtYmVyKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KHRyaXBsZS5JdGVtMSx0cmlwbGUuSXRlbTIpLEopKSA8IDUpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZy5FZGdlc0JldHdlZW4odHJpcGxlLkl0ZW0xLCB0cmlwbGUuSXRlbTMpIDw9IDAgJiYgZy5JbmRlcGVuZGVuY2VOdW1iZXIoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4oQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4odHJpcGxlLkl0ZW0xLHRyaXBsZS5JdGVtMyksSikpIDwgNSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmIChnLkVkZ2VzQmV0d2Vlbih0cmlwbGUuSXRlbTIsIHRyaXBsZS5JdGVtMykgPD0gMCAmJiBnLkluZGVwZW5kZW5jZU51bWJlcihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50PihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTIsdHJpcGxlLkl0ZW0yKSxKKSkgPCA1KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8VHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+PigpLChfbzE5KT0+e19vMTkuQWRkKG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih0cmlwbGUuSXRlbTEpLCBnLk1heGltdW1JbmRlcGVuZGVudFN1YnNldChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTEsSikpKSk7X28xOS5BZGQobmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHRyaXBsZS5JdGVtMiksIGcuTWF4aW11bUluZGVwZW5kZW50U3Vic2V0KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KHRyaXBsZS5JdGVtMixKKSkpKTtfbzE5LkFkZChuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4odHJpcGxlLkl0ZW0zKSwgZy5NYXhpbXVtSW5kZXBlbmRlbnRTdWJzZXQoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4odHJpcGxlLkl0ZW0zLEopKSkpO3JldHVybiBfbzE5O30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8VHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4sIExpc3Q8aW50Pj4+IEVudW1lcmF0ZUNvbm5lY3RlZFRocmVlUGFydFBhcnRpdGlvbnMoR3JhcGggZywgTGlzdDxpbnQ+IEopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcmVzdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGludD4oZy5WZXJ0aWNlcyxKKS5Ub0xpc3QoKTtcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5TaHVmZmxlPGludD4oICAgICAgICAgICAgcmVzdCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBmaXJzdCBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihyZXN0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZmlyc3QuQWRkKEpbMF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PihnLkZpbmRDb21wb25lbnRzKGZpcnN0KS5HZXRFcXVpdmFsZW5jZUNsYXNzZXMoKSkgIT0gMSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdDIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxpbnQ+KHJlc3QsZmlyc3QpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNlY29uZCBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihyZXN0MikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kLkFkZChKWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KGcuRmluZENvbXBvbmVudHMoc2Vjb25kKS5HZXRFcXVpdmFsZW5jZUNsYXNzZXMoKSkgIT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aGlyZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGludD4ocmVzdDIsc2Vjb25kKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlyZC5BZGQoSlsyXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PihnLkZpbmRDb21wb25lbnRzKHRoaXJkKS5HZXRFcXVpdmFsZW5jZUNsYXNzZXMoKSkgIT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4sIExpc3Q8aW50Pj4oZmlyc3QsIHNlY29uZCwgdGhpcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgSW50MzJVc2FnZVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IFVJbnQzMiBEZUJydWlqbk11bHRpcGxpZXIgPSAweDA3N0NCNTMxVTtcclxuICAgICAgICBzdGF0aWMgaW50W10gRGVCcnVpam5Mb29rdXAgPSBuZXcgaW50WzMyXSB7IDAsIDEsIDI4LCAyLCAyOSwgMTQsIDI0LCAzLCAzMCwgMjIsIDIwLCAxNSwgMjUsIDE3LCA0LCA4LCAzMSwgMjcsIDEzLCAyMywgMjEsIDE5LCAxNiwgNywgMjYsIDEyLCAxOCwgNiwgMTEsIDUsIDEwLCA5IH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTGVhc3RTaWduaWZpY2FudEJpdCh0aGlzIGludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwW3VuY2hlY2tlZCgodWludCkoeCAmIC14KSAqIERlQnJ1aWpuTXVsdGlwbGllciA+PiAyNyldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiBpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0geCAmIC14O1xyXG4gICAgICAgICAgICB4IF49IG07XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFt1bmNoZWNrZWQoKHVpbnQpbSAqIERlQnJ1aWpuTXVsdGlwbGllciA+PiAyNyldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgUG9wdWxhdGlvbkNvdW50KHRoaXMgdWludCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHEgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoYiA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHErKztcclxuICAgICAgICAgICAgICAgIGIgJj0gYiAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IFRvU2V0KHRoaXMgdWludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG9uQml0cyA9IG5ldyBMaXN0PGludD4oMTApO1xyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbHNiID0geCAmICgwIC0geCk7XHJcbiAgICAgICAgICAgICAgICBvbkJpdHMuQWRkKERlQnJ1aWpuTG9va3VwW3VuY2hlY2tlZChsc2IgKiBEZUJydWlqbk11bHRpcGxpZXIgPj4gMjcpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCBePSBsc2I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvbkJpdHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgSW50NjRVc2FnZVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IFVJbnQ2NCBEZUJydWlqbk11bHRpcGxpZXIgPSAweDA3RURENUU1OUE0RTI4QzI7XHJcbiAgICAgICAgc3RhdGljIGludFtdIERlQnJ1aWpuTG9va3VwID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNjMsICAwLCA1OCwgIDEsIDU5LCA0NywgNTMsICAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNjAsIDM5LCA0OCwgMjcsIDU0LCAzMywgNDIsICAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNjEsIDUxLCAzNywgNDAsIDQ5LCAxOCwgMjgsIDIwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNTUsIDMwLCAzNCwgMTEsIDQzLCAxNCwgMjIsICA0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNjIsIDU3LCA0NiwgNTIsIDM4LCAyNiwgMzIsIDQxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNTAsIDM2LCAxNywgMTksIDI5LCAxMCwgMTMsIDIxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNTYsIDQ1LCAyNSwgMzEsIDM1LCAxNiwgIDksIDEyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNDQsIDI0LCAxNSwgIDgsIDIzLCAgNywgIDYsICA1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBJbnQ2NFtdIEJpdE1hc2sgPSBuZXcgSW50NjRbNjRdO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBJbnQ2NFtdIE5vdEJpdE1hc2sgPSBuZXcgSW50NjRbNjRdO1xyXG5cclxuICAgICAgICBzdGF0aWMgSW50NjRVc2FnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoIChpbnQgYml0IGluIEVudW1lcmFibGUuUmFuZ2UoMCwgNjQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBCaXRNYXNrW2JpdF0gPSAoKEludDY0KTEpIDw8IGJpdDtcclxuICAgICAgICAgICAgICAgIE5vdEJpdE1hc2tbYml0XSA9IH4oKChJbnQ2NCkxKSA8PCBiaXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIERpY3Rpb25hcnk8bG9uZywgbG9uZz4gR2VuZXJhdGVQYWlyTWFza3MoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWFza01hcCA9IG5ldyBEaWN0aW9uYXJ5PGxvbmcsIGxvbmc+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hc2tNYXBbQml0TWFza1tpXSB8IEJpdE1hc2tbal1dID0gQml0TWFza1tqXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1hc2tNYXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEludDY0IENsZWFyQml0KHRoaXMgSW50NjQgeCwgaW50IGJpdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB4ICYgTm90Qml0TWFza1tiaXRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJbnQ2NCBTZXRCaXQodGhpcyBJbnQ2NCB4LCBpbnQgYml0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHggfCBCaXRNYXNrW2JpdF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNCaXRTZXQodGhpcyBJbnQ2NCB4LCBpbnQgYml0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICh4ICYgQml0TWFza1tiaXRdKSAhPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJbnQ2NCBGbGlwQml0cyh0aGlzIEludDY0IHgsIGludCBiaXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4geCBeIEJpdE1hc2tbYml0XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJbnQ2NCBGbGlwQml0cyh0aGlzIEludDY0IHgsIGludCBiaXQxLCBpbnQgYml0MilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB4IF4gKEJpdE1hc2tbYml0MV0gfCBCaXRNYXNrW2JpdDJdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJbnQ2NCBGbGlwQml0cyh0aGlzIEludDY0IHgsIHBhcmFtcyBpbnRbXSBiaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGJpdHMgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiB4O1xyXG5cclxuICAgICAgICAgICAgSW50NjQgbWFzayA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiaXQgaW4gYml0cylcclxuICAgICAgICAgICAgICAgIG1hc2sgfD0gQml0TWFza1tiaXRdO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHggXiBtYXNrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTGVhc3RTaWduaWZpY2FudEJpdCh0aGlzIEludDY0IGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbdW5jaGVja2VkKChVSW50NjQpKGIgJiAtYikgKiBEZUJydWlqbk11bHRpcGxpZXIgPj4gNTgpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiBJbnQ2NCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSB4ICYgLXg7XHJcbiAgICAgICAgICAgIHggXj0gbTtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwWygoVUludDY0KW0gKiBEZUJydWlqbk11bHRpcGxpZXIpID4+IDU4XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFBvcHVsYXRpb25Db3VudCh0aGlzIEludDY0IGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgcSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChiID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcSsrO1xyXG4gICAgICAgICAgICAgICAgYiAmPSBiIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFBvcHVsYXRpb25Db3VudCh0aGlzIHVsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB1bG9uZyBrMSA9IDB4NTU1NTU1NTU1NTU1NTU1NVVMO1xyXG4gICAgICAgICAgICBjb25zdCB1bG9uZyBrMiA9IDB4MzMzMzMzMzMzMzMzMzMzM1VMO1xyXG4gICAgICAgICAgICBjb25zdCB1bG9uZyBrNCA9IDB4MGYwZjBmMGYwZjBmMGYwZlVMO1xyXG4gICAgICAgICAgICB4ID0geCAtICgoeCA+PiAxKSAmIGsxKTtcclxuICAgICAgICAgICAgeCA9ICh4ICYgazIpICsgKCh4ID4+IDIpICYgazIpO1xyXG4gICAgICAgICAgICB4ID0gKHggKyAoeCA+PiA0KSkgJiBrNDtcclxuICAgICAgICAgICAgeCA9ICh4ICogMHgwMTAxMDEwMTAxMDEwMTAxVUwpID4+IDU2O1xyXG4gICAgICAgICAgICByZXR1cm4gKGludCl4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1bG9uZyBSaWdodEZpbGxUb01TQih0aGlzIHVsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMTtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDI7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiA0O1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gODtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDE2O1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMzI7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvQml0U3RyaW5nKHRoaXMgSW50NjQgeCwgaW50IGxlbmd0aCA9IDY0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiXCIsIEVudW1lcmFibGUuUmFuZ2UoMCwgbGVuZ3RoKS5TZWxlY3Q8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIHN0cmluZz4pKGJpdCA9PiB4LklzQml0U2V0KGJpdCkgPyBcIjFcIiA6IFwiMFwiKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gVG9TZXQodGhpcyBJbnQ2NCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG9uQml0cyA9IG5ldyBMaXN0PGludD4oMTApO1xyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgb25CaXRzLkFkZChHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvbkJpdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBUb1NldCh0aGlzIFVJbnQ2NCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG9uQml0cyA9IG5ldyBMaXN0PGludD4oMTApO1xyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbHNiID0geCAmICgwIC0geCk7XHJcbiAgICAgICAgICAgICAgICBvbkJpdHMuQWRkKERlQnJ1aWpuTG9va3VwW3VuY2hlY2tlZChsc2IgKiBEZUJydWlqbk11bHRpcGxpZXIgPj4gNTgpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCBePSBsc2I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvbkJpdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gRW51bWVyYXRlQml0cyh0aGlzIEludDY0IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbHNiID0gR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBsc2I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgVG9JbnQ2NChwYXJhbXMgaW50W10gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIGJpdHMpXHJcbiAgICAgICAgICAgICAgICB0b3RhbCB8PSBCaXRNYXNrW2JpdF07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgVG9JbnQ2NCh0aGlzIElFbnVtZXJhYmxlPGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiaXQgaW4gc2V0KVxyXG4gICAgICAgICAgICAgICAgdG90YWwgfD0gQml0TWFza1tiaXRdO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVsb25nIFRvVUludDY0KHRoaXMgSUVudW1lcmFibGU8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiaXQgaW4gc2V0KVxyXG4gICAgICAgICAgICAgICAgdG90YWwgfD0gMVVMIDw8IGJpdDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PGludD4+IEV4cGFuZEludG9MaXN0cyh0aGlzIExpc3Q8SW50NjQ+IHhzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHhzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoeCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHguVG9TZXQoKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvU2V0U3RyaW5nKHRoaXMgSW50NjQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB4LlRvU2V0KCkuVG9TZXRTdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvU2V0U3RyaW5nU21hbGwodGhpcyBJbnQ2NCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwifFwiLCBzdHJpbmcuSm9pbjxpbnQ+KFwiXCIsIHguVG9TZXQoKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEFsbFNldCh0aGlzIEludDY0IHgsIGludCBpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICh4IF4gKHggKyAxKSkuSXNCaXRTZXQoaSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8bG9uZz4gR2V0Qml0cyh0aGlzIGxvbmcgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzZXRCaXRzID0gbmV3IExpc3Q8bG9uZz4oKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvbmcgbHNiID0geCAmIC14O1xyXG5cclxuICAgICAgICAgICAgICAgIHNldEJpdHMuQWRkKGxzYik7XHJcblxyXG4gICAgICAgICAgICAgICAgeCBePSBsc2I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZXRCaXRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PHVsb25nPiBHZXRCaXRzKHRoaXMgdWxvbmcgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzZXRCaXRzID0gbmV3IExpc3Q8dWxvbmc+KDE2KTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVsb25nIGxzYiA9IHggJiAoMCAtIHgpO1xyXG4gICAgICAgICAgICAgICAgc2V0Qml0cy5BZGQobHNiKTtcclxuICAgICAgICAgICAgICAgIHggXj0gbHNiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2V0Qml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvU2V0U3RyaW5nKHRoaXMgSUVudW1lcmFibGU8SW50NjQ+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ7XCIgKyBzdHJpbmcuSm9pbihcIiwgXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihsaXN0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIHN0cmluZz4pKGwgPT4gbC5Ub1NldFN0cmluZygpKSkpICsgXCJ9XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1NldFN0cmluZyh0aGlzIElFbnVtZXJhYmxlPGludD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIntcIiArIHN0cmluZy5Kb2luPGludD4oXCIsIFwiLCBsaXN0KSArIFwifVwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57IFxyXG4gICAgcHVibGljIGNsYXNzIExhenk8VD5cclxuICAgIHtcclxuICAgICAgICBGdW5jPFQ+IF9jcmVhdG9yO1xyXG4gICAgICAgIFQgX3ZhbHVlID0gZGVmYXVsdChUKTtcclxuICAgICAgICBvYmplY3QgX3Rva2VuID0gbmV3IG9iamVjdCgpO1xyXG5cclxuICAgICAgICBwdWJsaWMgVCBWYWx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdmFsdWUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NrIChfdG9rZW4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3ZhbHVlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdmFsdWUgPSBfY3JlYXRvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3ZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGF6eShGdW5jPFQ+IGNyZWF0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY3JlYXRvciA9IGNyZWF0b3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGF6eShGdW5jPFQ+IGNyZWF0b3IsIGJvb2wgdGhyZWFkU2FmZSlcclxuICAgICAgICAgICAgOiB0aGlzKGNyZWF0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRm9yZ2V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKF90b2tlbilcclxuICAgICAgICAgICAgICAgIF92YWx1ZSA9IGRlZmF1bHQoVCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGltcGxpY2l0IG9wZXJhdG9yIFQoTGF6eTxUPiBkYSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYS5WYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIE9uZUZhY3Rvcml6YXRpb25zT2ZDb21wbGV0ZUdyYXBoXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnRbXT4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIGxpc3QgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4gLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0IHw9IDFMIDw8IGk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JpbmcgPSBuZXcgaW50W24gKiAobiAtIDEpIC8gMl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDE7IGkrKylcclxuICAgICAgICAgICAgICAgIGNvbG9yaW5nW2ldID0gaTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsaXN0cyA9IG5ldyBsb25nW25dO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3RzW2ldID0gbGlzdCBeICgxIDw8IChpIC0gMSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByaW9yTmVpZ2hib3JzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVPbmVGYWN0b3JpemF0aW9ucygxLCAyLCBuLCBsaXN0cywgY29sb3JpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPGludFtdPiBFbnVtZXJhdGVPbmVGYWN0b3JpemF0aW9ucyhpbnQgaSwgaW50IGosIGludCBuLCBsb25nW10gbGlzdHMsIGludFtdIGNvbG9yaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGkgPj0gbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvcHkgPSBuZXcgaW50W2NvbG9yaW5nLkxlbmd0aF07XHJcbiAgICAgICAgICAgICAgICBBcnJheS5Db3B5KGNvbG9yaW5nLCBjb3B5LCBjb2xvcmluZy5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGNvcHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaiA+PSBuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgb2YgaW4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoaSArIDEsIGkgKyAyLCBuLCBsaXN0cywgY29sb3JpbmcpKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBvZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjIGluIChsaXN0c1tpXSAmIGxpc3RzW2pdKS5FbnVtZXJhdGVCaXRzKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbaV0gPSBsaXN0c1tpXS5DbGVhckJpdChjKTtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0c1tqXSA9IGxpc3RzW2pdLkNsZWFyQml0KGMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb2xvcmluZ1tpICogbiAtIGkgKiAoaSArIDEpIC8gMiArIGogLSBpIC0gMV0gPSBjO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvZiBpbiBFbnVtZXJhdGVPbmVGYWN0b3JpemF0aW9ucyhpLCBqICsgMSwgbiwgbGlzdHMsIGNvbG9yaW5nKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG9mO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsaXN0c1tpXSA9IGxpc3RzW2ldLlNldEJpdChjKTtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0c1tqXSA9IGxpc3RzW2pdLlNldEJpdChjKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0U2lnblN1bShpbnQgbiwgb3V0IGludCBwbHVzLCBvdXQgaW50IG1pbnVzLCBBY3Rpb248aW50LCBpbnQ+IHByb2dyZXNzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcGx1cyA9IDA7XHJcbiAgICAgICAgICAgIG1pbnVzID0gMDtcclxuXHJcbiAgICAgICAgICAgIGludCBsaXN0ID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuIC0gMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdCB8PSAxIDw8IGk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb2YgPSBuZXcgaW50W24sIG5dO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIG9mWzAsIGldID0gb2ZbaSwgMF0gPSBpIC0gMTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsaXN0cyA9IG5ldyBpbnRbbl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdHNbaV0gPSBsaXN0IF4gKDEgPDwgKGkgLSAxKSk7XHJcblxyXG4gICAgICAgICAgICBpbnQgdGVybSA9IG4gKiAobiAtIDEpICUgNCA9PSAwID8gMSA6IC0xO1xyXG5cclxuICAgICAgICAgICAgRG9TaWduU3VtKDEsIDIsIG4sIGxpc3RzLCBvZiwgcmVmIHRlcm0sIHJlZiBwbHVzLCByZWYgbWludXMsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248aW50LCBpbnQ+KXByb2dyZXNzKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwbHVzIC0gbWludXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBEb1Rlcm0oaW50IHRlcm0sIHJlZiBpbnQgcGx1cywgcmVmIGludCBtaW51cywgQWN0aW9uPGludCwgaW50PiBwcm9ncmVzcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0ZXJtID4gMClcclxuICAgICAgICAgICAgICAgIHBsdXMrKztcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgbWludXMrKztcclxuXHJcbiAgICAgICAgICAgIGlmICgocGx1cyArIG1pbnVzKSAlIDEwMDAwMDAgPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MocGx1cywgbWludXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBEb1NpZ25TdW0oaW50IGksIGludCBqLCBpbnQgbiwgaW50W10gbGlzdHMsIGludFssXSBvZiwgcmVmIGludCB0ZXJtLCByZWYgaW50IHBsdXMsIHJlZiBpbnQgbWludXMsIEFjdGlvbjxpbnQsIGludD4gcHJvZ3Jlc3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBuIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRG9UZXJtKHRlcm0sIHJlZiBwbHVzLCByZWYgbWludXMsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248aW50LCBpbnQ+KXByb2dyZXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gbGlzdHNbaV0gJiBsaXN0c1tqXTtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB4ICYgLXg7XHJcbiAgICAgICAgICAgICAgICAgICAgeCBePSBjO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RzW2ldIF49IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbal0gXj0gYztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgb2ZbaSwgal0gPSBvZltqLCBpXSA9IGM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWN0b3IgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDwgaTsgaysrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWN0b3IgKj0gMSB8ICgoYyAtIG9mW2ssIGpdKSA+PiAzMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgayA9IDA7IGsgPCBqOyBrKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY3RvciAqPSAxIHwgKChjIC0gb2ZbaSwga10pID4+IDMxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGVybSAqPSBmYWN0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGogPj0gbiAtIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERvU2lnblN1bShpICsgMSwgaSArIDIsIG4sIGxpc3RzLCBvZiwgcmVmIHRlcm0sIHJlZiBwbHVzLCByZWYgbWludXMsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248aW50LCBpbnQ+KXByb2dyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERvU2lnblN1bShpLCBqICsgMSwgbiwgbGlzdHMsIG9mLCByZWYgdGVybSwgcmVmIHBsdXMsIHJlZiBtaW51cywgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxpbnQsIGludD4pcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRlcm0gKj0gZmFjdG9yO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsaXN0c1tpXSBePSBjO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RzW2pdIF49IGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIE9uRmFjdG9yaXphdGlvbnNPZkNvbXBsZXRlR3JhcGhcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludFtdPiBFbnVtZXJhdGVPbmVGYWN0b3JpemF0aW9ucyhpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgbGlzdCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDE7IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3QgfD0gMUwgPDwgaTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvcmluZyA9IG5ldyBpbnRbbiAqIChuIC0gMSkgLyAyXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuIC0gMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgY29sb3JpbmdbaV0gPSBpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxpc3RzID0gbmV3IGxvbmdbbl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsaXN0c1tpXSA9IGxpc3QgXiAoMSA8PCAoaSAtIDEpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb2xvcmluZ1tpICogbiAtIGkgKiAoaSArIDEpIC8gMl0gPSBpIC0gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZU9uZUZhY3Rvcml6YXRpb25zKDEsIDIsIG4sIGxpc3RzLCBjb2xvcmluZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8aW50W10+IEVudW1lcmF0ZU9uZUZhY3Rvcml6YXRpb25zKGludCBpLCBpbnQgaiwgaW50IG4sIGxvbmdbXSBsaXN0cywgaW50W10gY29sb3JpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29weSA9IG5ldyBpbnRbY29sb3JpbmcuTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoY29sb3JpbmcsIGNvcHksIGNvbG9yaW5nLkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gY29weTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChqID49IG4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvZiBpbiBFbnVtZXJhdGVPbmVGYWN0b3JpemF0aW9ucyhpICsgMSwgaSArIDIsIG4sIGxpc3RzLCBjb2xvcmluZykpXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG9mO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGMgaW4gKGxpc3RzW2ldICYgbGlzdHNbal0pLkVudW1lcmF0ZUJpdHMoKSlcclxuICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgY2xhc3MgT25saW5lQ2hvaWNlSGFzaEdyYXBoXHJcbiAgICB7XHJcbiAgICAgICAgaW50W10gX2Y7XHJcbiAgICAgICAgaW50W10gX2c7XHJcbiAgICAgICAgaW50IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgcHVibGljIE9ubGluZUNob2ljZUhhc2hHcmFwaChpbnRbXSBmLCBpbnRbXSBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2YgPSAoaW50W10pZi5DbG9uZSgpO1xyXG4gICAgICAgICAgICBfZyA9IChpbnRbXSlnLkNsb25lKCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9nLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2dbaV0gPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBfZltpXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIF9mKVxyXG4gICAgICAgICAgICAgICAgX2hhc2hDb2RlID0gX2hhc2hDb2RlICogMzMgKyBpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgaSBpbiBfZylcclxuICAgICAgICAgICAgICAgIF9oYXNoQ29kZSA9IF9oYXNoQ29kZSAqIDMzICsgaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG90aGVyID0gb2JqIGFzIE9ubGluZUNob2ljZUhhc2hHcmFwaDtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4oX2csb3RoZXIuX2cpICYmIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KF9mLG90aGVyLl9mKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIE9yaWVudGF0aW9uSGFzaEdyYXBoXHJcbiAgICB7XHJcbiAgICAgICAgYnl0ZVtdIF92YWx1ZXM7XHJcbiAgICAgICAgTGlzdDxpbnQ+IF9vdXRNaW51c0luO1xyXG4gICAgICAgIGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBPcmllbnRhdGlvbkhhc2hHcmFwaChHcmFwaCBnLCBMaXN0PGludD4gb3V0TWludXNJbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF92YWx1ZXMgPSBuZXcgYnl0ZVtnLk4gKiAoZy5OIC0gMSkgLyAyXTtcclxuICAgICAgICAgICAgX291dE1pbnVzSW4gPSBvdXRNaW51c0luO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGcuTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBnLk47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSAoYnl0ZSkoZ1tpLCBqXSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgICAgICAgICBfdmFsdWVzW2tdID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnW2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGFzaENvZGUgKz0gMSA8PCAoayAlIDMyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBvdXRNaW51c0luKVxyXG4gICAgICAgICAgICAgICAgX2hhc2hDb2RlID0gX2hhc2hDb2RlICogMzMgKyBpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb3RoZXIgPSBvYmogYXMgT3JpZW50YXRpb25IYXNoR3JhcGg7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KF9vdXRNaW51c0luLG90aGVyLl9vdXRNaW51c0luKSAmJiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8Ynl0ZT4oX3ZhbHVlcyxvdGhlci5fdmFsdWVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuUG9seW5vbWlhbHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZhY3RvcmVkUmF0aW9uYWxcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgc3RhdGljIEZhY3RvcmVkUmF0aW9uYWwgWmVybyA9IG5ldyBGYWN0b3JlZFJhdGlvbmFsKCkgeyBTaWduID0gMCB9O1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IFNpZ247XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBLO1xyXG5cclxuICAgICAgICBwdWJsaWMgRmFjdG9yZWRSYXRpb25hbCgpIHsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRmFjdG9yZWRSYXRpb25hbChpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2diA9IG5ldyBpbnRbMTFdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBqaiA9IDA7IGpqIDw9IDEwOyBqaisrKVxyXG4gICAgICAgICAgICAgICAgdnZbampdID0gUG93ZXIoMiwgamopO1xyXG5cclxuICAgICAgICAgICAgU2lnbiA9IE1hdGguU2lnbigoZGVjaW1hbCluKTtcclxuICAgICAgICAgICAgbiAqPSBTaWduO1xyXG5cclxuICAgICAgICAgICAgSyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKG4gPiAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBLLkFkZCgwKTtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gUHJpbWVOdW1iZXJzLkdldChpKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuICUgcCA9PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEtbaV0rKztcclxuICAgICAgICAgICAgICAgICAgICBuIC89IHA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEZhY3RvcmVkUmF0aW9uYWwgb3BlcmF0b3IgKihGYWN0b3JlZFJhdGlvbmFsIGZpLCBGYWN0b3JlZFJhdGlvbmFsIGZpMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaWduID0gZmkuU2lnbiAqIGZpMi5TaWduO1xyXG4gICAgICAgICAgICB2YXIgayA9IG5ldyBMaXN0PGludD4oTWF0aC5NYXgoZmkuSy5Db3VudCwgZmkyLksuQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzaWduICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTWF0aC5NYXgoZmkuSy5Db3VudCwgZmkyLksuQ291bnQpOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgay5BZGQoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBmaS5LLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrW2ldICs9IGZpLktbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBmaTIuSy5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICAgICAga1tpXSArPSBmaTIuS1tpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGYWN0b3JlZFJhdGlvbmFsKCkgeyBLID0gaywgU2lnbiA9IHNpZ24gfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRmFjdG9yZWRSYXRpb25hbCBvcGVyYXRvciAvKEZhY3RvcmVkUmF0aW9uYWwgZmksIEZhY3RvcmVkUmF0aW9uYWwgZmkyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpZ24gPSBmaS5TaWduICogZmkyLlNpZ247XHJcbiAgICAgICAgICAgIHZhciBrID0gbmV3IExpc3Q8aW50PihNYXRoLk1heChmaS5LLkNvdW50LCBmaTIuSy5Db3VudCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNpZ24gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBNYXRoLk1heChmaS5LLkNvdW50LCBmaTIuSy5Db3VudCk7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrLkFkZCgwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IGZpLksuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtbaV0gKz0gZmkuS1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IGZpMi5LLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrW2ldIC09IGZpMi5LW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZhY3RvcmVkUmF0aW9uYWwoKSB7IEsgPSBrLCBTaWduID0gc2lnbiB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVG9SYXRpb25hbChvdXQgaW50IHRvcCwgb3V0IGludCBib3R0b20pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoSyA9PSBudWxsIHx8IFNpZ24gPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdG9wID0gMDtcclxuICAgICAgICAgICAgICAgIGJvdHRvbSA9IDE7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRvcCA9IFNpZ247XHJcbiAgICAgICAgICAgIGJvdHRvbSA9IDE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgSy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoS1tpXSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wICo9IFBvd2VyKFByaW1lTnVtYmVycy5HZXQoaSksIEtbaV0pO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbSAqPSBQb3dlcihQcmltZU51bWJlcnMuR2V0KGkpLCAtS1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBQb3dlcihpbnQgcCwgaW50IGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IDE7XHJcbiAgICAgICAgICAgIHdoaWxlIChrID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSAxO1xyXG4gICAgICAgICAgICAgICAgdmFyIG4gPSBwO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGUgPD0gayA+PiAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG4gKj0gbjtcclxuICAgICAgICAgICAgICAgICAgICBlIDw8PSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGsgLT0gZTtcclxuICAgICAgICAgICAgICAgIG0gKj0gbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlBvbHlub21pYWxzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHcmFwaFBvbHlub21pYWxcclxuICAgIHtcclxuICAgICAgICBBbGdvcml0aG1zLkdyYXBoIF9nO1xyXG4gICAgICAgIExpc3Q8TGlzdDxpbnQ+PiBfcHJpb3JOZWlnaGJvcnM7XHJcbiAgICAgICAgTm9ybWFsaXplciBfbm9ybWFsaXplcjtcclxuICAgICAgICBTaWduTG9va3VwIF9zaWduTG9va3VwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBHcmFwaFBvbHlub21pYWwoQWxnb3JpdGhtcy5HcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2cgPSBnO1xyXG4gICAgICAgXHJcbiAgICAgICAgICAgIF9wcmlvck5laWdoYm9ycyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgdyA9IDA7IHcgPCBfZy5OOyB3KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9wcmlvck5laWdoYm9ycy5BZGQobmV3IExpc3Q8aW50PigpKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IHYgPSAwOyB2IDwgdzsgdisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnW3YsIHddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcHJpb3JOZWlnaGJvcnNbd10uQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEdldENvZWZmaWNpZW50KGludFtdIHBvd2VyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX25vcm1hbGl6ZXIgPSBuZXcgTm9ybWFsaXplcihwb3dlcik7XHJcblxyXG4gICAgICAgICAgICB2YXIgYSA9IG5ldyBpbnRbcG93ZXIuTGVuZ3RoXTtcclxuICAgICAgICAgICAgbG9uZyB0b3AgPSAwTDtcclxuICAgICAgICAgICAgbG9uZyBib3R0b20gPSAxTDtcclxuICAgICAgICAgICAgdmFyIHBhcnRpYWxQcm9kdWN0ID0gbmV3IEZhY3RvcmVkUmF0aW9uYWwoKSB7IEsgPSBuZXcgTGlzdDxpbnQ+KCksIFNpZ24gPSAxIH07XHJcbiAgICAgICAgICAgIFN1bVRlcm1zKDAsIGEsIHBvd2VyLCByZWYgcGFydGlhbFByb2R1Y3QsIHJlZiB0b3AsIHJlZiBib3R0b20pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpKHRvcCAvIGJvdHRvbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEdldFNpZ25TdW0oaW50W10gcG93ZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfc2lnbkxvb2t1cCA9IG5ldyBTaWduTG9va3VwKHBvd2VyKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhID0gbmV3IGludFtwb3dlci5MZW5ndGhdO1xyXG4gICAgICAgICAgICB2YXIgc3VtID0gMDtcclxuICAgICAgICAgICAgdmFyIHBhcnRpYWxQcm9kdWN0ID0gMTtcclxuICAgICAgICAgICAgU3VtU2lnbnMoMCwgYSwgcG93ZXIsIHJlZiBwYXJ0aWFsUHJvZHVjdCwgcmVmIHN1bSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3VtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBTdW1TaWducyhpbnQgdywgaW50W10gYSwgaW50W10gcG93ZXIsIHJlZiBpbnQgcGFydGlhbFByb2R1Y3QsIHJlZiBpbnQgc3VtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHcgPT0gcG93ZXIuTGVuZ3RoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdW0gKz0gcGFydGlhbFByb2R1Y3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8PSBwb3dlclt3XTsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFbd10gPSBqO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ByaW9yTmVpZ2hib3JzW3ddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ICo9IF9zaWduTG9va3VwLlNpZ25bYVt2XSwgYVt3XV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsUHJvZHVjdCAqPSBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIFN1bVNpZ25zKHcgKyAxLCBhLCBwb3dlciwgcmVmIHBhcnRpYWxQcm9kdWN0LCByZWYgc3VtKTtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsUHJvZHVjdCAvPSBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIFN1bVRlcm1zKGludCB3LCBpbnRbXSBhLCBpbnRbXSBwb3dlciwgcmVmIEZhY3RvcmVkUmF0aW9uYWwgcGFydGlhbFByb2R1Y3QsIHJlZiBsb25nIHRvcCwgcmVmIGxvbmcgYm90dG9tKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHcgPT0gcG93ZXIuTGVuZ3RoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IHBhcnRpYWxQcm9kdWN0IC8gX25vcm1hbGl6ZXIuR2V0KGEpO1xyXG4gICAgICAgICAgICAgICAgaW50IHRvcDI7XHJcbiAgICAgICAgICAgICAgICBpbnQgYm90dG9tMjtcclxuICAgICAgICAgICAgICAgIHIuVG9SYXRpb25hbChvdXQgdG9wMiwgb3V0IGJvdHRvbTIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRvcCA9IHRvcCAqIGJvdHRvbTIgKyBib3R0b20gKiB0b3AyO1xyXG4gICAgICAgICAgICAgICAgYm90dG9tID0gYm90dG9tICogYm90dG9tMjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZ2NkID0gR0NEKHRvcCwgYm90dG9tKTtcclxuICAgICAgICAgICAgICAgIHRvcCAvPSBnY2Q7XHJcbiAgICAgICAgICAgICAgICBib3R0b20gLz0gZ2NkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPD0gcG93ZXJbd107IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhW3ddID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBuZXcgRmFjdG9yZWRSYXRpb25hbCgpIHsgSyA9IG5ldyBMaXN0PGludD4oKSwgU2lnbiA9IDEgfTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfcHJpb3JOZWlnaGJvcnNbd10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgKj0gX25vcm1hbGl6ZXIuRmFjdG9yZWREaWZmZXJlbmNlW2Fbdl0sIGFbd11dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5TaWduID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsUHJvZHVjdCAqPSBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIFN1bVRlcm1zKHcgKyAxLCBhLCBwb3dlciwgcmVmIHBhcnRpYWxQcm9kdWN0LCByZWYgdG9wLCByZWYgYm90dG9tKTtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsUHJvZHVjdCAvPSBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb25nIEdDRChsb25nIHgsIGxvbmcgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgdG1wO1xyXG4gICAgICAgICAgICB4ID0gTWF0aC5BYnMoeCk7XHJcbiAgICAgICAgICAgIHkgPSBNYXRoLkFicyh5KTtcclxuICAgICAgICAgICAgd2hpbGUgKHggPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0bXAgPSB4O1xyXG4gICAgICAgICAgICAgICAgeCA9IHkgJSB4O1xyXG4gICAgICAgICAgICAgICAgeSA9IHRtcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4geTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBHcmFwaFBvbHlub21pYWxFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0Q29lZmZpY2llbnQodGhpcyBBbGdvcml0aG1zLkdyYXBoIGcsIGludFtdIHBvd2VyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGdwID0gbmV3IEdyYXBoUG9seW5vbWlhbChnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGdwLkdldENvZWZmaWNpZW50KHBvd2VyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldFNpZ25TdW0odGhpcyBBbGdvcml0aG1zLkdyYXBoIGcsIGludFtdIHBvd2VyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGdwID0gbmV3IEdyYXBoUG9seW5vbWlhbChnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGdwLkdldFNpZ25TdW0ocG93ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Qb2x5bm9taWFsc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTm9ybWFsaXplclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBGYWN0b3JlZFJhdGlvbmFsWyxdIEZhY3RvcmVkRGlmZmVyZW5jZTtcclxuICAgICAgICBwdWJsaWMgRmFjdG9yZWRSYXRpb25hbFssXSBJbnNpZGVQcm9kdWN0O1xyXG5cclxuICAgICAgICBwdWJsaWMgTm9ybWFsaXplcihpbnRbXSBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IGhlaWdodC5NYXgoKTtcclxuXHJcbiAgICAgICAgICAgIEZhY3RvcmVkRGlmZmVyZW5jZSA9IG5ldyBGYWN0b3JlZFJhdGlvbmFsW20gKyAxLCBtICsgMV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDw9IG07IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDw9IG07IGorKylcclxuICAgICAgICAgICAgICAgICAgICBGYWN0b3JlZERpZmZlcmVuY2VbaSwgal0gPSBuZXcgRmFjdG9yZWRSYXRpb25hbChpIC0gaik7XHJcblxyXG4gICAgICAgICAgICBJbnNpZGVQcm9kdWN0ID0gbmV3IEZhY3RvcmVkUmF0aW9uYWxbaGVpZ2h0Lkxlbmd0aCwgbSArIDFdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGhlaWdodC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPD0gaGVpZ2h0W2ldOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgSW5zaWRlUHJvZHVjdFtpLCBqXSA9IG5ldyBGYWN0b3JlZFJhdGlvbmFsKCkgeyBLID0gbmV3IExpc3Q8aW50PigpLCBTaWduID0gMSB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDw9IGhlaWdodFtpXTsgaysrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gailcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgSW5zaWRlUHJvZHVjdFtpLCBqXSAqPSBGYWN0b3JlZERpZmZlcmVuY2Vbaiwga107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRmFjdG9yZWRSYXRpb25hbCBHZXQoaW50W10gYSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBub3JtYWxpemVyID0gbmV3IEZhY3RvcmVkUmF0aW9uYWwoKSB7IEsgPSBuZXcgTGlzdDxpbnQ+KCksIFNpZ24gPSAxIH07XHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBhLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplciAqPSBJbnNpZGVQcm9kdWN0W2ksIGFbaV1dO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlBvbHlub21pYWxzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgUHJpbWVOdW1iZXJzXHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIExpc3Q8aW50PiBfcHJpbWVzID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX28yMCk9PntfbzIwLkFkZCgyKTtfbzIwLkFkZCgzKTtfbzIwLkFkZCg1KTtfbzIwLkFkZCg3KTtfbzIwLkFkZCgxMSk7X28yMC5BZGQoMTMpO19vMjAuQWRkKDE3KTtfbzIwLkFkZCgxOSk7cmV0dXJuIF9vMjA7fSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldChpbnQgaSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpID49IF9wcmltZXMuQ291bnQpXHJcbiAgICAgICAgICAgICAgICBDb21wdXRlTW9yZVByaW1lcyhpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBfcHJpbWVzW2ldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgQ29tcHV0ZU1vcmVQcmltZXMoaW50IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IE1hdGguTWF4KGksIDIgKiBfcHJpbWVzLkNvdW50KTtcclxuICAgICAgICAgICAgdmFyIHAgPSBfcHJpbWVzW19wcmltZXMuQ291bnQgLSAxXSArIDI7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoX3ByaW1lcy5Db3VudCA8PSBtKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoSXNQcmltZShwKSlcclxuICAgICAgICAgICAgICAgICAgICBfcHJpbWVzLkFkZChwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIElzUHJpbWUoaW50IHApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IoaW50IGsgPSAwOyBfcHJpbWVzW2tdICogX3ByaW1lc1trXSA8PSBwOyBrKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChwICUgX3ByaW1lc1trXSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlBvbHlub21pYWxzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTaWduTG9va3VwXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGludFssXSBTaWduO1xyXG4gICAgICAgIHB1YmxpYyBTaWduTG9va3VwKGludFtdIGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0gaGVpZ2h0Lk1heCgpO1xyXG5cclxuICAgICAgICAgICAgU2lnbiA9IG5ldyBpbnRbbSArIDEsIG0gKyAxXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPD0gbTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPD0gbTsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIFNpZ25baSwgal0gPSBNYXRoLlNpZ24oKGRlY2ltYWwpKGkgLSBqKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTdWJzZXRFbnVtZXJhdG9yIDogSUVudW1lcmFibGU8SW50NjQ+XHJcbiAgICB7XHJcbiAgICAgICAgaW50IF9zZXRTaXplO1xyXG4gICAgICAgIGludCBfc3Vic2V0U2l6ZTtcclxuXHJcbiAgICAgICAgcHVibGljIFN1YnNldEVudW1lcmF0b3IoaW50IHNldFNpemUsIGludCBzdWJzZXRTaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3NldFNpemUgPSBzZXRTaXplO1xyXG4gICAgICAgICAgICBfc3Vic2V0U2l6ZSA9IHN1YnNldFNpemU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIElFbnVtZXJhYmxlPGxvbmc+IE1lbWJlcnNcclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhdG9yPEludDY0PiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRW51bWVyYXRvcihfc2V0U2l6ZSwgX3N1YnNldFNpemUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIElFbnVtZXJhYmxlIE1lbWJlcnNcclxuXHJcbiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBFbnVtZXJhdG9yIDogSUVudW1lcmF0b3I8SW50NjQ+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBib29sIF9pc0ZpcnN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgaW50IF9zZXRTaXplO1xyXG4gICAgICAgICAgICBpbnQgX3N1YnNldFNpemU7XHJcblxyXG4gICAgICAgICAgICBJbnQ2NCBfY3VycmVudDtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBFbnVtZXJhdG9yKGludCBzZXRTaXplLCBpbnQgc3Vic2V0U2l6ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3NldFNpemUgPSBzZXRTaXplO1xyXG4gICAgICAgICAgICAgICAgX3N1YnNldFNpemUgPSBzdWJzZXRTaXplO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjcmVnaW9uIElFbnVtZXJhdG9yPGxvbmc+IE1lbWJlcnNcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBsb25nIEN1cnJlbnRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9jdXJyZW50OyB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gSURpc3Bvc2FibGUgTWVtYmVyc1xyXG5cclxuICAgICAgICAgICAgcHVibGljIHZvaWQgRGlzcG9zZSgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBJRW51bWVyYXRvciBNZW1iZXJzXHJcblxyXG4gICAgICAgICAgICBvYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yLkN1cnJlbnRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEN1cnJlbnQ7IH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGJvb2wgTW92ZU5leHQoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2lzRmlyc3QpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9zdWJzZXRTaXplID4gX3NldFNpemUpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2N1cnJlbnQgPSAoKDEgPDwgX3N1YnNldFNpemUpIC0gMSkgPDwgKF9zZXRTaXplIC0gX3N1YnNldFNpemUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfaXNGaXJzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEludDY0IGxzYiA9IF9jdXJyZW50ICYgLV9jdXJyZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsc2IgPiAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jdXJyZW50ID0gX2N1cnJlbnQgXiBsc2IgXiAobHNiID4+IDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBJbnQ2NCBoaWdoID0gX2N1cnJlbnQgJiAoX2N1cnJlbnQgKyAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGlnaCA9PSAwKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgSW50NjQgbG93ID0gX2N1cnJlbnQgXiBoaWdoO1xyXG4gICAgICAgICAgICAgICAgbG93ID0gKGxvdyA8PCAyKSArIDM7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKChsb3cgJiBoaWdoKSA9PSAwKSBsb3cgPDw9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgX2N1cnJlbnQgPSBoaWdoIF4gbG93O1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgdm9pZCBSZXNldCgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9pc0ZpcnN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVHJhbnNpdGl2ZVBhcnRpdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PFBhcnQ+IFBhcnRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBUcmFuc2l0aXZlUGFydGl0aW9uKExpc3Q8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBQYXJ0cyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxQYXJ0PigpLChfbzIxKT0+e19vMjEuQWRkKG5ldyBQYXJ0KCkgeyBTZXQgPSBzZXQsIFNjb3JlcyA9IG5ldyBMaXN0PGludD4oKSB9KTtyZXR1cm4gX28yMTt9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlZmluZShpbnRbXSBzY29yZSwgaW50IHNjb3JlTnVtYmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFBhcnRzWzBdLlNjb3Jlcy5Db3VudCA+PSBzY29yZU51bWJlcilcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHZhciByZWZpbmVkID0gbmV3IExpc3Q8UGFydD4oUGFydHMuQ291bnQpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydCBpbiBQYXJ0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IFJlZmluZVBhcnQocGFydCwgc2NvcmUpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGt2cCBpbiBtYXApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBuZXcgUGFydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHAuU2V0ID0ga3ZwLlZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHAuU2NvcmVzID0gbmV3IExpc3Q8aW50PihwYXJ0LlNjb3Jlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5TY29yZXMuQWRkKGt2cC5LZXkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZWZpbmVkLkFkZChwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgUGFydHMgPSByZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gUmVmaW5lUGFydChQYXJ0IHBhcnQsIGludFtdIHNjb3JlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1hcCA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBwYXJ0LlNldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBzY29yZVt2XTtcclxuICAgICAgICAgICAgICAgIExpc3Q8aW50PiBsO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuVHJ5R2V0VmFsdWUoeCwgb3V0IGwpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGwgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwW3hdID0gbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsLkFkZCh2KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1hcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRwID0gb2JqIGFzIFRyYW5zaXRpdmVQYXJ0aXRpb247XHJcbiAgICAgICAgICAgIGlmICh0cCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnQgaW4gUGFydHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gdHAuRmluZFBhcnRXaXRoU2NvcmVzKHBhcnQuU2NvcmVzKTtcclxuICAgICAgICAgICAgICAgIGlmIChwID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwLlNldC5Db3VudCAhPSBwYXJ0LlNldC5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYmFzZS5HZXRIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgUGFydCBGaW5kUGFydFdpdGhTY29yZXMoTGlzdDxpbnQ+IHNjb3JlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0IGluIFBhcnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4ocGFydC5TY29yZXMsIHNjb3JlcykpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsYXNzIFBhcnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBMaXN0PGludD4gU2V0IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgICAgcHVibGljIExpc3Q8aW50PiBTY29yZXMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVW5wZXJtdXRlZEFzc2lnbm1lbnRFbnVtZXJhdG9yIDogSUVudW1lcmFibGU8TGlzdDxJbnQ2ND4+XHJcbiAgICB7XHJcbiAgICAgICAgaW50IF92ZXJ0ZXhDb3VudDtcclxuICAgICAgICBGdW5jPGludCwgaW50PiBfZjtcclxuICAgICAgICBpbnQgX3BvdFNpemU7XHJcbiAgICAgICAgaW50IF9zdGFydDtcclxuICAgICAgICBpbnQgX3N0ZXA7XHJcblxyXG4gICAgICAgIERpY3Rpb25hcnk8bG9uZywgbG9uZz4gX3BhaXJNYXNrVG9CYWRNYXNrO1xyXG5cclxuICAgICAgICBwdWJsaWMgVW5wZXJtdXRlZEFzc2lnbm1lbnRFbnVtZXJhdG9yKGludCB2ZXJ0ZXhDb3VudCwgRnVuYzxpbnQsIGludD4gZiwgaW50IHBvdFNpemUsIGludCBzdGFydCA9IDAsIGludCBzdGVwID0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF92ZXJ0ZXhDb3VudCA9IHZlcnRleENvdW50O1xyXG4gICAgICAgICAgICBfZiA9IGY7XHJcbiAgICAgICAgICAgIF9wb3RTaXplID0gcG90U2l6ZTtcclxuICAgICAgICAgICAgX3N0YXJ0ID0gc3RhcnQ7XHJcbiAgICAgICAgICAgIF9zdGVwID0gc3RlcDtcclxuXHJcbiAgICAgICAgICAgIF9wYWlyTWFza1RvQmFkTWFzayA9IEludDY0VXNhZ2UuR2VuZXJhdGVQYWlyTWFza3MoX3BvdFNpemUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhdG9yPExpc3Q8bG9uZz4+IEdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+PihHZXRFbnVtZXJhYmxlKF92ZXJ0ZXhDb3VudCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+LCBpbnQsIGJvb2w+KSgobGlzdCwgaSkgPT4gKGkgLSBfc3RhcnQpICUgX3N0ZXAgPT0gMCkpLkdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPExpc3Q8bG9uZz4+IEdldEVudW1lcmFibGVSZWN1cnNpdmUoaW50IHZlcnRleENvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHZlcnRleENvdW50ID09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+PihBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkVuTGlzdDxsb25nPigoKChsb25nKTEgPDwgX2YoMCkpIC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPj4oR2V0RW51bWVyYWJsZVJlY3Vyc2l2ZSh2ZXJ0ZXhDb3VudCAtIDEpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4+PikobGlzdCA9PiBHZXRFeHRlbnNpb25zKGxpc3QpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PGxvbmc+PiBHZXRFbnVtZXJhYmxlKGludCB2ZXJ0ZXhDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIElFbnVtZXJhYmxlPExpc3Q8bG9uZz4+IGVudW1lcmFibGUgPSBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkVuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4+KEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRW5MaXN0PGxvbmc+KCgoKGxvbmcpMSA8PCBfZigwKSkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+PihlbnVtZXJhYmxlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4+PikobGlzdCA9PiBHZXRFeHRlbnNpb25zKGxpc3QpKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZW51bWVyYWJsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPExpc3Q8bG9uZz4+IEdldEV4dGVuc2lvbnMoTGlzdDxsb25nPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJlc3RyaWN0ZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGxvbmcsIGxvbmc+PihfcGFpck1hc2tUb0JhZE1hc2ssKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8bG9uZywgbG9uZz4sIGJvb2w+KShrdnAgPT4gSXNSZXN0cmljdGVkKGt2cC5LZXksIGxpc3QpKSk7XHJcblxyXG4gICAgICAgICAgICBpbnQgc2l6ZSA9IF9mKGxpc3QuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZyb20gc3Vic2V0IGluIG5ldyBTdWJzZXRFbnVtZXJhdG9yKF9wb3RTaXplLCBzaXplKVxyXG4gICAgICAgICAgICAgICAgICAgd2hlcmUgcmVzdHJpY3RlZC5BbGwoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8bG9uZywgbG9uZz4sIGJvb2w+KShrdnAgPT4gKHN1YnNldCAmIGt2cC5LZXkpICE9IGt2cC5WYWx1ZSkpXHJcbiAgICAgICAgICAgICAgICAgICBzZWxlY3QgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8bG9uZz4obGlzdCxuZXdbXSB7IHN1YnNldCB9KS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgSXNSZXN0cmljdGVkKGxvbmcgcCwgTGlzdDxsb25nPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHggaW4gbGlzdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbiA9IHggJiBwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvbiAhPSAwICYmIGludGVyc2VjdGlvbiAhPSB4KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhYmxlLkdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuVXRpbGl0eVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRXF1aXZhbGVuY2VSZWxhdGlvbjxUPlxyXG4gICAge1xyXG4gICAgICAgIERpY3Rpb25hcnk8VCwgTm9kZT4gX25vZGVMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxULCBOb2RlPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRFbGVtZW50KFQgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExvb2t1cE5vZGUodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZWxhdGUoVCB4LCBUIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbnggPSBMb29rdXBOb2RlKHgpO1xyXG4gICAgICAgICAgICB2YXIgbnkgPSBMb29rdXBOb2RlKHkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHhSb290ID0gRmluZChueCk7XHJcbiAgICAgICAgICAgIHZhciB5Um9vdCA9IEZpbmQobnkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHhSb290ID09IHlSb290KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYgKHhSb290LlJhbmsgPCB5Um9vdC5SYW5rKVxyXG4gICAgICAgICAgICAgICAgeFJvb3QuUGFyZW50ID0geVJvb3Q7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHhSb290LlJhbmsgPiB5Um9vdC5SYW5rKVxyXG4gICAgICAgICAgICAgICAgeVJvb3QuUGFyZW50ID0geFJvb3Q7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeVJvb3QuUGFyZW50ID0geFJvb3Q7XHJcbiAgICAgICAgICAgICAgICB4Um9vdC5SYW5rKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFyZVJlbGF0ZWQoVCB4LCBUIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbnggPSBMb29rdXBOb2RlKHgpO1xyXG4gICAgICAgICAgICB2YXIgbnkgPSBMb29rdXBOb2RlKHkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEZpbmQobngpID09IEZpbmQobnkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPFQ+IEdldEVxdWl2YWxlbmNlQ2xhc3MoVCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG54ID0gTG9va3VwTm9kZSh4KTtcclxuICAgICAgICAgICAgdmFyIHhSb290ID0gRmluZChueCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGU+KF9ub2RlTG9va3VwLlZhbHVlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGUsIGJvb2w+KShub2RlID0+IEZpbmQobm9kZSkgPT0geFJvb3QpKS5TZWxlY3Q8VD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlLCBUPikobm9kZSA9PiBub2RlLlQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxUPj4gR2V0RXF1aXZhbGVuY2VDbGFzc2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkdyb3VwQnk8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlLGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZT4oX25vZGVMb29rdXAuVmFsdWVzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZSwgZ2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlPikobm9kZSA9PiBGaW5kKG5vZGUpKSkuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkxpbnEuRW51bWVyYWJsZUluc3RhbmNlPFQ+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5MaW5xLkdyb3VwaW5nPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZSwgZ2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlPiwgZ2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8VD4+KShncm91cCA9PiBncm91cC5TZWxlY3Q8VD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlLCBUPikobm9kZSA9PiBub2RlLlQpKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTm9kZSBGaW5kKE5vZGUgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChuLlBhcmVudCAhPSBuKVxyXG4gICAgICAgICAgICAgICAgbi5QYXJlbnQgPSBGaW5kKG4uUGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuLlBhcmVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIE5vZGUgTG9va3VwTm9kZShUIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOb2RlIG5vZGU7XHJcbiAgICAgICAgICAgIGlmICghX25vZGVMb29rdXAuVHJ5R2V0VmFsdWUodCwgb3V0IG5vZGUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbmV3IE5vZGUoKTtcclxuICAgICAgICAgICAgICAgIG5vZGUuUGFyZW50ID0gbm9kZTtcclxuICAgICAgICAgICAgICAgIG5vZGUuUmFuayA9IDA7XHJcbiAgICAgICAgICAgICAgICBub2RlLlQgPSB0O1xyXG5cclxuICAgICAgICAgICAgICAgIF9ub2RlTG9va3VwW3RdID0gbm9kZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjbGFzcyBOb2RlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgTm9kZSBQYXJlbnQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IFJhbmsgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICAgICBwdWJsaWMgVCBUIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBGYWN0b3JhZGljXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEZhY3RvcmFkaWMobG9uZyB2YWx1ZSwgaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBWYWx1ZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgRGlnaXRzID0gbmV3IExpc3Q8aW50PihuKTtcclxuICAgICAgICAgICAgRGlnaXRzLkFkZCgwKTtcclxuXHJcbiAgICAgICAgICAgIGludCBpID0gMTtcclxuICAgICAgICAgICAgd2hpbGUgKHZhbHVlID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRGlnaXRzLkFkZCgoaW50KSh2YWx1ZSAlICsraSkpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSAvIGk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaSA9IERpZ2l0cy5Db3VudDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIERpZ2l0cy5BZGQoMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRmFjdG9yYWRpYyhQZXJtdXRhdGlvbiBwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRGlnaXRzID0gbmV3IExpc3Q8aW50PihwLk4pO1xyXG5cclxuICAgICAgICAgICAgTGlzdDxpbnQ+IGVsZW1lbnRzID0gbmV3IExpc3Q8aW50PihwLk4pO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHAuTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuQWRkKGkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwLk47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRGlnaXRzLkFkZChlbGVtZW50cy5JbmRleE9mKHBbaV0pKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLlJlbW92ZShwW2ldKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRGlnaXRzLlJldmVyc2UoKTtcclxuXHJcbiAgICAgICAgICAgIFZhbHVlID0gMDtcclxuICAgICAgICAgICAgaW50IG4gPSAxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IERpZ2l0cy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBWYWx1ZSArPSBEaWdpdHNbaV0gKiBuO1xyXG4gICAgICAgICAgICAgICAgbiAqPSAoaSArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gRGlnaXRzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQ7XHJcbiAgICAgICAgICAgIHByaXZhdGUgc2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGxvbmcgVmFsdWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDtcclxuICAgICAgICAgICAgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuVXRpbGl0eVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEZsb3dzXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgQmlwYXJ0aXRlTWF4aW11bU1hdGNoaW5nKGludCBuLCBMaXN0PExpc3Q8aW50Pj4gYWRqYWNlbmNpZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2FwYWNpdHkgPSBuZXcgaW50W24gKyAyLCBuICsgMl07XHJcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gMTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsbyA9IDI7XHJcbiAgICAgICAgICAgIHZhciBybyA9IGxvICsgYWRqYWNlbmNpZXMuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGFkamFjZW5jaWVzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhcGFjaXR5W3NvdXJjZSwgbG8gKyBpXSA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGogaW4gYWRqYWNlbmNpZXNbaV0pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FwYWNpdHlbbG8gKyBpLCBybyArIGpdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXBhY2l0eVtybyArIGosIHRhcmdldF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTWF4RmxvdyhjYXBhY2l0eSwgc291cmNlLCB0YXJnZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTWF4RmxvdyhpbnRbLF0gY2FwYWNpdHksIGludCBzb3VyY2UsIGludCB0YXJnZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZvcmRGdWxrZXJzb24oY2FwYWNpdHksIHNvdXJjZSwgdGFyZ2V0KS5NYXhGbG93KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjbGFzcyBGb3JkRnVsa2Vyc29uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgX247XHJcbiAgICAgICAgICAgIGludCBfc291cmNlO1xyXG4gICAgICAgICAgICBpbnQgX3RhcmdldDtcclxuICAgICAgICAgICAgaW50WyxdIF9jYXBhY2l0eTtcclxuICAgICAgICAgICAgaW50WyxdIF9mbG93O1xyXG5cclxuICAgICAgICAgICAgcHVibGljIEZvcmRGdWxrZXJzb24oaW50WyxdIGNhcGFjaXR5LCBpbnQgc291cmNlLCBpbnQgdGFyZ2V0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfY2FwYWNpdHkgPSBjYXBhY2l0eTtcclxuICAgICAgICAgICAgICAgIF9zb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgICAgICBfdGFyZ2V0ID0gdGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgICAgIF9uID0gY2FwYWNpdHkuR2V0TGVuZ3RoKDApO1xyXG4gICAgICAgICAgICAgICAgX2Zsb3cgPSBuZXcgaW50W19uLCBfbl07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgTWF4RmxvdygpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXRoID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX28yMik9PntfbzIyLkFkZCgwKTtyZXR1cm4gX28yMjt9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZG9uZSA9ICFGaW5kQXVnbWVudGluZ1BhdGgocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBBZGRGbG93KHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBFbnVtZXJhYmxlLlJhbmdlKDAsIF9uKS5TdW0oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShpID0+IF9mbG93W19zb3VyY2UsIGldKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJvb2wgRmluZEF1Z21lbnRpbmdQYXRoKExpc3Q8aW50PiBwYXRoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGFzdCA9IHBhdGhbcGF0aC5Db3VudCAtIDFdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsYXN0ID09IF90YXJnZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGogaW4gT3V0TmVpZ2hib3JzKGxhc3QpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXRoLkNvbnRhaW5zKGopKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5BZGQoaik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0F1Z21lbnRpbmcgPSBGaW5kQXVnbWVudGluZ1BhdGgocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXVnbWVudGluZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBhdGguUmVtb3ZlKGopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSUVudW1lcmFibGU8aW50PiBPdXROZWlnaGJvcnMoaW50IGkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgX247IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2NhcGFjaXR5W2ksIGpdIC0gX2Zsb3dbaSwgal0gPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gajtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdm9pZCBBZGRGbG93KExpc3Q8aW50PiBwYXRoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2FpbiA9IEZpbmRHYWluKHBhdGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcGF0aC5Db3VudCAtIDE7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfZmxvd1twYXRoW2ldLCBwYXRoW2kgKyAxXV0gKz0gZ2FpbjtcclxuICAgICAgICAgICAgICAgICAgICBfZmxvd1twYXRoW2kgKyAxXSwgcGF0aFtpXV0gPSAtX2Zsb3dbcGF0aFtpXSwgcGF0aFtpICsgMV1dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbnQgRmluZEdhaW4oTGlzdDxpbnQ+IHBhdGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBnYWluID0gaW50Lk1heFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcGF0aC5Db3VudCAtIDE7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBnYWluID0gTWF0aC5NaW4oZ2FpbiwgX2NhcGFjaXR5W3BhdGhbaV0sIHBhdGhbaSArIDFdXSAtIF9mbG93W3BhdGhbaV0sIHBhdGhbaSArIDFdXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdhaW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuVXRpbGl0eVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIExpbnFFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxUdXBsZTxULCBUPj4gQ2FydGVzaWFuUHJvZHVjdDxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IGEsIElFbnVtZXJhYmxlPFQ+IGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPixnbG9iYWw6OlN5c3RlbS5UdXBsZTxULCBUPj4oQ2FydGVzaWFuUHJvZHVjdDxUPihuZXdbXSB7IGEsIGIgfSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPiwgZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8VCwgVD4+KShzID0+IG5ldyBUdXBsZTxULCBUPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkVsZW1lbnRBdDxUPihzLDApLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkVsZW1lbnRBdDxUPihzLDEpKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPElFbnVtZXJhYmxlPFQ+PiBDYXJ0ZXNpYW5Qcm9kdWN0PFQ+KHRoaXMgSUVudW1lcmFibGU8SUVudW1lcmFibGU8VD4+IHNlcXVlbmNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIElFbnVtZXJhYmxlPElFbnVtZXJhYmxlPFQ+PiBlbXB0eVByb2R1Y3QgPSBuZXdbXSB7IEVudW1lcmFibGUuRW1wdHk8VD4oKSB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+Pj4oXHJcbnNlcXVlbmNlcywgICAgICAgICAgICAgIGVtcHR5UHJvZHVjdCxcclxuKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+Pj4pKCAgICAgICAgICAgICAgKGFjY3VtdWxhdG9yLCBzZXF1ZW5jZSkgPT5cclxuICAgICAgICAgICAgICAgIGZyb20gYWNjc2VxIGluIGFjY3VtdWxhdG9yXHJcbiAgICAgICAgICAgICAgICBmcm9tIGl0ZW0gaW4gc2VxdWVuY2VcclxuICAgICAgICAgICAgICAgIHNlbGVjdCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbmNhdDxUPihhY2NzZXEsbmV3W10geyBpdGVtIH0pKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPElFbnVtZXJhYmxlPFQ+PiBDYXJ0ZXNpYW5Qcm9kdWN0PFQ+KHRoaXMgSUVudW1lcmFibGU8TGlzdDxUPj4gc2VxdWVuY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSUVudW1lcmFibGU8SUVudW1lcmFibGU8VD4+IGVtcHR5UHJvZHVjdCA9IG5ld1tdIHsgRW51bWVyYWJsZS5FbXB0eTxUPigpIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4+KFxyXG5zZXF1ZW5jZXMsICAgICAgICAgICAgICBlbXB0eVByb2R1Y3QsXHJcbihnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+Pj4pKCAgICAgICAgICAgICAgKGFjY3VtdWxhdG9yLCBzZXF1ZW5jZSkgPT5cclxuICAgICAgICAgICAgICAgIGZyb20gYWNjc2VxIGluIGFjY3VtdWxhdG9yXHJcbiAgICAgICAgICAgICAgICBmcm9tIGl0ZW0gaW4gc2VxdWVuY2VcclxuICAgICAgICAgICAgICAgIHNlbGVjdCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbmNhdDxUPihhY2NzZXEsbmV3W10geyBpdGVtIH0pKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPFQ+IENvbmNhdDxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IGUsIFQgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBlKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHY7XHJcbiAgICAgICAgICAgIHlpZWxkIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8VD4gRGlzdGluY3Q8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBzb3VyY2UsIEZ1bmM8VCwgVCwgYm9vbD4gYXJlRXF1YWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeWllbGRlZCA9IG5ldyBMaXN0PFQ+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBzb3VyY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxUPih5aWVsZGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGJvb2w+KSh4ID0+ICFhcmVFcXVhbCh4LCB0KSkpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkZWQuQWRkKHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiB0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBMaXN0VXRpbGl0eVxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyBjbGFzcyBMaXN0VXRpbGl0eUdlbmVyaWM8VD5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0YXRpYyBIYXNoU2V0PFQ+IF9zZXQgPSBuZXcgSGFzaFNldDxUPigpO1xyXG4gICAgICAgICAgICBzdGF0aWMgRGljdGlvbmFyeTxULCBpbnQ+IF9tdWx0aVNldCA9IG5ldyBEaWN0aW9uYXJ5PFQsIGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBJbnRlcnNlY3Rpb24oSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PFQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGluQiA9IF9zZXQ7XHJcbiAgICAgICAgICAgICAgICBpbkIuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBCKVxyXG4gICAgICAgICAgICAgICAgICAgIGluQi5BZGQodCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbiA9IG5ldyBMaXN0PFQ+KGluQi5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkIuQ29udGFpbnModCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5BZGQodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludGVyc2VjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgSW50ZXJzZWN0aW9uQ291bnQoSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGluQiA9IF9zZXQ7XHJcbiAgICAgICAgICAgICAgICBpbkIuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBCKVxyXG4gICAgICAgICAgICAgICAgICAgIGluQi5BZGQodCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluQi5Db250YWlucyh0KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY291bnQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBEaWZmZXJlbmNlKElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChBID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PFQ+KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIEIgPSBuZXcgTGlzdDxUPigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbkIgPSBfc2V0O1xyXG4gICAgICAgICAgICAgICAgaW5CLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQilcclxuICAgICAgICAgICAgICAgICAgICBpbkIuQWRkKHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkaWZmZXJlbmNlID0gbmV3IExpc3Q8VD4oaW5CLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbkIuQ29udGFpbnModCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2UuQWRkKHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBkaWZmZXJlbmNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gVW5pb24oTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChBID09IG51bGwgJiYgQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKEEgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQjtcclxuICAgICAgICAgICAgICAgIGlmIChCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEE7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGluQiA9IF9zZXQ7XHJcbiAgICAgICAgICAgICAgICBpbkIuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChUIHQgaW4gQilcclxuICAgICAgICAgICAgICAgICAgICBpbkIuQWRkKHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB1bmlvbiA9IG5ldyBMaXN0PFQ+KEIpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoVCB0IGluIEEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbkIuQ29udGFpbnModCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaW9uLkFkZCh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5pb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBVbmlvbihMaXN0PFQ+IEEsIFQgYilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVuaW9uID0gbmV3IExpc3Q8VD4oQSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXVuaW9uLkNvbnRhaW5zKGIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHVuaW9uLkFkZChiKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5pb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBNdWx0aVNldEludGVyc2VjdGlvbihJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8VD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5CID0gX211bHRpU2V0O1xyXG4gICAgICAgICAgICAgICAgaW5CLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLlRyeUdldFZhbHVlKHQsIG91dCBjb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGluQlt0XSA9IGNvdW50ICsgMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJzZWN0aW9uID0gbmV3IExpc3Q8VD4oaW5CLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGluQi5UcnlHZXRWYWx1ZSh0LCBvdXQgY291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uLkFkZCh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5CW3RdID0gY291bnQgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW50ZXJzZWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIGludCBNdWx0aVNldEludGVyc2VjdGlvbkNvdW50KElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbkIgPSBfbXVsdGlTZXQ7XHJcbiAgICAgICAgICAgICAgICBpbkIuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBCKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBjb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBpbkIuVHJ5R2V0VmFsdWUodCwgb3V0IGNvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5CW3RdID0gY291bnQgKyAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBjb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBpbkIuVHJ5R2V0VmFsdWUodCwgb3V0IGNvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQlt0XSA9IGNvdW50IC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIHNvcnRlZCBsaXN0c1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBEaWZmZXJlbmNlU29ydGVkPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxUPihBKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBDID0gbmV3IExpc3Q8VD4oTWF0aC5NYXgoNCwgQS5Db3VudCAtIEIuQ291bnQpKTtcclxuICAgICAgICAgICAgaW50IGogPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEEuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGogPCBCLkNvdW50ICYmIEFbaV0uQ29tcGFyZVRvKEJbal0pID4gMClcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGogPj0gQi5Db3VudCB8fCBBW2ldLkNvbXBhcmVUbyhCW2pdKSA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgQy5BZGQoQVtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IEludGVyc2VjdGlvblNvcnRlZDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PFQ+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgQyA9IG5ldyBMaXN0PFQ+KE1hdGguTWluKEEuQ291bnQsIEIuQ291bnQpKTtcclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICBpbnQgaiA9IDA7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IEEuQ291bnQgJiYgaiA8IEIuQ291bnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb21wYXJlID0gQVtpXS5Db21wYXJlVG8oQltqXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmUgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBDLkFkZChBW2ldKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmUgPj0gMClcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgSW50ZXJzZWN0aW9uQ291bnRTb3J0ZWQ8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICAgICAgd2hlcmUgVCA6IElDb21wYXJhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICBpbnQgaiA9IDA7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IEEuQ291bnQgJiYgaiA8IEIuQ291bnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb21wYXJlID0gQVtpXS5Db21wYXJlVG8oQltqXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmUgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmUgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZSA+PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGorKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IFVuaW9uU29ydGVkPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRGlmZmVyZW5jZVNvcnRlZDxUPihBLEIpO1xyXG4gICAgICAgICAgICBsaXN0LkFkZFJhbmdlKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5EaWZmZXJlbmNlU29ydGVkPFQ+KEIsQSkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgRXF1YWxTb3J0ZWQ8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICAgICAgd2hlcmUgVCA6IElDb21wYXJhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5Db3VudCA9PSBCLkNvdW50ICYmIEludGVyc2VjdGlvbkNvdW50U29ydGVkPFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU3Vic2V0RXF1YWxTb3J0ZWQ8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICAgICAgd2hlcmUgVCA6IElDb21wYXJhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSW50ZXJzZWN0aW9uQ291bnRTb3J0ZWQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBTdWJzZXRTb3J0ZWQ8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICAgICAgd2hlcmUgVCA6IElDb21wYXJhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5Db3VudCA8IEIuQ291bnQgJiYgSW50ZXJzZWN0aW9uQ291bnRTb3J0ZWQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PFQ+PiBNYXhpbWFsRWxlbWVudHNTb3J0ZWQ8VD4odGhpcyBMaXN0PExpc3Q8VD4+IEEpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBBLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8TGlzdDxUPj4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjaGFpbkhlYWRzID0gbmV3IExpc3Q8TGlzdDxUPj4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzZXQgaW4gQSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlbW92ZWQgPSBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGNoYWluSGVhZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoaGVhZCA9PiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQ8VD4oaGVhZCxzZXQpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSgoeCkgPT4geyB9ICkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZWQgPiAwIHx8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oY2hhaW5IZWFkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShoZWFkID0+ICFBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQ8VD4oc2V0LGhlYWQpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5IZWFkcy5BZGQoc2V0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNoYWluSGVhZHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIGludCBzcGVjaWZpY1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IERpZmZlcmVuY2VTb3J0ZWQodGhpcyBMaXN0PGludD4gQSwgTGlzdDxpbnQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgQyA9IG5ldyBMaXN0PGludD4oTWF0aC5NYXgoNCwgQS5Db3VudCAtIEIuQ291bnQpKTtcclxuICAgICAgICAgICAgaW50IGogPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEEuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGogPCBCLkNvdW50ICYmIEFbaV0gPiBCW2pdKVxyXG4gICAgICAgICAgICAgICAgICAgIGorKztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaiA+PSBCLkNvdW50IHx8IEFbaV0gPCBCW2pdKVxyXG4gICAgICAgICAgICAgICAgICAgIEMuQWRkKEFbaV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IEludGVyc2VjdGlvblNvcnRlZCh0aGlzIExpc3Q8aW50PiBBLCBMaXN0PGludD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBDID0gbmV3IExpc3Q8aW50PihNYXRoLk1pbihBLkNvdW50LCBCLkNvdW50KSk7XHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuICAgICAgICAgICAgaW50IGogPSAwO1xyXG5cclxuICAgICAgICAgICAgaW50IGFjID0gQS5Db3VudDtcclxuICAgICAgICAgICAgaW50IGJjID0gQi5Db3VudDtcclxuICAgICAgICAgICAgd2hpbGUgKGkgPCBhYyAmJiBqIDwgYmMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBhID0gQVtpXTtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gQltqXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYSA9PSBiKVxyXG4gICAgICAgICAgICAgICAgICAgIEMuQWRkKGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGEgPD0gYilcclxuICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICBpZiAoYSA+PSBiKVxyXG4gICAgICAgICAgICAgICAgICAgIGorKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBJbnRlcnNlY3Rpb25Db3VudFNvcnRlZCh0aGlzIExpc3Q8aW50PiBBLCBMaXN0PGludD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIGludCBqID0gMDtcclxuXHJcbiAgICAgICAgICAgIGludCBhYyA9IEEuQ291bnQ7XHJcbiAgICAgICAgICAgIGludCBiYyA9IEIuQ291bnQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChpIDwgYWMgJiYgaiA8IGJjKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYSA9IEFbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IEJbal07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGEgPT0gYilcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGEgPD0gYilcclxuICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICBpZiAoYSA+PSBiKVxyXG4gICAgICAgICAgICAgICAgICAgIGorKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gVW5pb25Tb3J0ZWQodGhpcyBMaXN0PGludD4gQSwgTGlzdDxpbnQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGlzdCA9IEEuRGlmZmVyZW5jZVNvcnRlZChCKTtcclxuICAgICAgICAgICAgbGlzdC5BZGRSYW5nZShCLkRpZmZlcmVuY2VTb3J0ZWQoQSkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgRXF1YWxTb3J0ZWQodGhpcyBMaXN0PGludD4gQSwgTGlzdDxpbnQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5Db3VudCA9PSBCLkNvdW50ICYmIEludGVyc2VjdGlvbkNvdW50U29ydGVkKEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU3Vic2V0RXF1YWxTb3J0ZWQodGhpcyBMaXN0PGludD4gQSwgTGlzdDxpbnQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSW50ZXJzZWN0aW9uQ291bnRTb3J0ZWQoQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBTdWJzZXRTb3J0ZWQodGhpcyBMaXN0PGludD4gQSwgTGlzdDxpbnQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5Db3VudCA8IEIuQ291bnQgJiYgSW50ZXJzZWN0aW9uQ291bnRTb3J0ZWQoQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PGludD4+IE1heGltYWxFbGVtZW50c1NvcnRlZCh0aGlzIExpc3Q8TGlzdDxpbnQ+PiBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBBLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNoYWluSGVhZHMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIEEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZW1vdmVkID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGNoYWluSGVhZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShoZWFkID0+IGhlYWQuU3Vic2V0RXF1YWxTb3J0ZWQoc2V0KSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVtb3ZlZCA+IDAgfHwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGNoYWluSGVhZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShoZWFkID0+ICFzZXQuU3Vic2V0RXF1YWxTb3J0ZWQoaGVhZCkpKSlcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbkhlYWRzLkFkZChzZXQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hhaW5IZWFkcztcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IE11bHRpU2V0SW50ZXJzZWN0aW9uPFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eUdlbmVyaWM8VD4uTXVsdGlTZXRJbnRlcnNlY3Rpb24oQSwgQik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBNdWx0aVNldEludGVyc2VjdGlvbkNvdW50PFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eUdlbmVyaWM8VD4uTXVsdGlTZXRJbnRlcnNlY3Rpb25Db3VudChBLCBCKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBNdWx0aVNldEVxdWFsPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5Db3VudCA9PSBCLkNvdW50ICYmIE11bHRpU2V0SW50ZXJzZWN0aW9uQ291bnQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBNdWx0aVNldFN1YnNldEVxdWFsPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTXVsdGlTZXRJbnRlcnNlY3Rpb25Db3VudDxUPihBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIE11bHRpU2V0U3Vic2V0PFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5Db3VudCA8IEIuQ291bnQgJiYgTXVsdGlTZXRJbnRlcnNlY3Rpb25Db3VudDxUPihBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIEJpbm9taWFsQ29lZmZpY2llbnQobG9uZyBuLCBsb25nIGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoayA8IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb25nIG1heCA9IE1hdGguTWF4KGssIG4gLSBrKTtcclxuICAgICAgICAgICAgbG9uZyBtaW4gPSBNYXRoLk1pbihrLCBuIC0gayk7XHJcblxyXG4gICAgICAgICAgICBsb25nIHJlc3VsdCA9IDE7XHJcbiAgICAgICAgICAgIHdoaWxlIChuID4gbWF4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKj0gbjtcclxuICAgICAgICAgICAgICAgIG4tLTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2hpbGUgKG1pbiA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCAvPSBtaW47XHJcblxyXG4gICAgICAgICAgICAgICAgbWluLS07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1N0cmluZzxUPihMaXN0PFQ+IEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAoVCB0IGluIEEpXHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRGb3JtYXQoXCJ7MH0sIFwiLCB0LlRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNiLlRvU3RyaW5nKCkuVHJpbUVuZCgnICcsICcsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gRGlmZmVyZW5jZTxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHlHZW5lcmljPFQ+LkRpZmZlcmVuY2UoQSwgQik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gSW50ZXJzZWN0aW9uPFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eUdlbmVyaWM8VD4uSW50ZXJzZWN0aW9uKEEsIEIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgSW50ZXJzZWN0aW9uQ291bnQ8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5R2VuZXJpYzxUPi5JbnRlcnNlY3Rpb25Db3VudChBLCBCKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBVbmlvbjxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5R2VuZXJpYzxUPi5VbmlvbihBLCBCKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBVbmlvbjxUPih0aGlzIExpc3Q8VD4gQSwgVCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5R2VuZXJpYzxUPi5VbmlvbihBLCBiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBFcXVhbDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPT0gQi5Db3VudCAmJiBJbnRlcnNlY3Rpb25Db3VudDxUPihBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFN1YnNldEVxdWFsPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSW50ZXJzZWN0aW9uQ291bnQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBTdWJzZXQ8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBLkNvdW50IDwgQi5Db3VudCAmJiBJbnRlcnNlY3Rpb25Db3VudDxUPihBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8VD4+IE1heGltYWxFbGVtZW50czxUPih0aGlzIExpc3Q8TGlzdDxUPj4gQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQS5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2hhaW5IZWFkcyA9IG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIEEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZW1vdmVkID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKGhlYWQgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsPFQ+KGhlYWQsc2V0KSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZWQgPiAwIHx8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oY2hhaW5IZWFkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShoZWFkID0+ICFBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWw8VD4oc2V0LGhlYWQpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5IZWFkcy5BZGQoc2V0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNoYWluSGVhZHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxUPj4gR2VuZXJhdGVTdWJsaXN0czxUPih0aGlzIExpc3Q8VD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8TGlzdDxUPj4gc3VibGlzdHMgPSBuZXcgTGlzdDxMaXN0PFQ+PigpO1xyXG4gICAgICAgICAgICBzdWJsaXN0cy5BZGQobmV3IExpc3Q8VD4oKSk7XHJcblxyXG4gICAgICAgICAgICBMaXN0PFQ+IGNsb25lID0gbmV3IExpc3Q8VD4obGlzdCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoY2xvbmUuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUIGhlYWQgPSBjbG9uZVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgY291bnQgPSBzdWJsaXN0cy5Db3VudDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBMaXN0PFQ+IHVuaW9uID0gbmV3IExpc3Q8VD4oc3VibGlzdHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHVuaW9uLkFkZChoZWFkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3VibGlzdHMuQWRkKHVuaW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjbG9uZS5SZW1vdmVBdCgwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN1Ymxpc3RzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8VD4+IEdlbmVyYXRlU3VibGlzdHM8VD4odGhpcyBMaXN0PFQ+IGxpc3QsIGludCBzaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxMaXN0PFQ+PiBzdWJsaXN0cyA9IG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcbiAgICAgICAgICAgIGludCBuID0gbGlzdC5Db3VudDtcclxuICAgICAgICAgICAgZm9yZWFjaCAoTGlzdDxib29sPiBpbk91dCBpbiBFbnVtZXJhdGVTaG9ydExleChuLCBzaXplKSlcclxuICAgICAgICAgICAgICAgIHN1Ymxpc3RzLkFkZChFeHRyYWN0U3VibGlzdDxUPihsaXN0LCBpbk91dCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN1Ymxpc3RzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PFQ+PiBFbnVtZXJhdGVTdWJsaXN0czxUPih0aGlzIExpc3Q8VD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBuID0gbGlzdC5Db3VudDtcclxuICAgICAgICAgICAgZm9yZWFjaCAoTGlzdDxib29sPiBpbk91dCBpbiBFbnVtZXJhdGVTaG9ydExleChuKSlcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBFeHRyYWN0U3VibGlzdDxUPihsaXN0LCBpbk91dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8VD4+IEVudW1lcmF0ZVN1Ymxpc3RzPFQ+KHRoaXMgTGlzdDxUPiBsaXN0LCBpbnQgc2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBuID0gbGlzdC5Db3VudDtcclxuICAgICAgICAgICAgZm9yZWFjaCAoTGlzdDxib29sPiBpbk91dCBpbiBFbnVtZXJhdGVTaG9ydExleChuLCBzaXplKSlcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBFeHRyYWN0U3VibGlzdDxUPihsaXN0LCBpbk91dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gTmV4dFN1Ymxpc3Q8VD4oTGlzdDxUPiBsaXN0LCBpbnQgc2l6ZSwgcmVmIExpc3Q8Ym9vbD4gc3RhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgbiA9IGxpc3QuQ291bnQ7XHJcbiAgICAgICAgICAgIGJvb2wgYXJlTW9yZSA9IE5leHRTaG9ydExleChuLCBzaXplLCByZWYgc3RhdGUpO1xyXG5cclxuICAgICAgICAgICAgTGlzdDxUPiBzdWJsaXN0ID0gRXh0cmFjdFN1Ymxpc3Q8VD4obGlzdCwgc3RhdGUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFhcmVNb3JlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdWJsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIExpc3Q8VD4gRXh0cmFjdFN1Ymxpc3Q8VD4oTGlzdDxUPiBsaXN0LCBMaXN0PGJvb2w+IGluT3V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxUPiBzdWJsaXN0ID0gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpbk91dC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5PdXRbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgc3VibGlzdC5BZGQobGlzdFtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdWJsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8Ym9vbD4+IEVudW1lcmF0ZVNob3J0TGV4KGludCBuLCBpbnQgaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGsgPSBNYXRoLk1heCgwLCBrKTtcclxuXHJcbiAgICAgICAgICAgIExpc3Q8Ym9vbD4gbGlzdCA9IG5ldyBMaXN0PGJvb2w+KG4pO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGs7IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3QuQWRkKHRydWUpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gazsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3QuQWRkKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGRvXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBsaXN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdoaWxlIChOZXh0U2FtZVRydWVDb3VudChsaXN0LCBrKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8Ym9vbD4+IEVudW1lcmF0ZVNob3J0TGV4KGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBuZXcgTGlzdDxib29sPihuKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0LkFkZChmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICBkb1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbGlzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoTmV4dChsaXN0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8Ym9vbD4+IEVudW1lcmF0ZVNob3J0TGV4Tm9uZW1wdHkoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBrID0gMTsgayA8PSBuOyBrKyspXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbGlzdCBpbiBFbnVtZXJhdGVTaG9ydExleChuLCBrKSlcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIE5leHRTaG9ydExleChpbnQgbiwgaW50IGssIHJlZiBMaXN0PGJvb2w+IHN0YXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN0YXRlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGsgPSBNYXRoLk1heCgwLCBrKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IG5ldyBMaXN0PGJvb2w+KG4pO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBrOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuQWRkKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IGs7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuQWRkKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gayA+IDAgJiYgayA8IG47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBOZXh0U2FtZVRydWVDb3VudChzdGF0ZSwgayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBOZXh0KExpc3Q8Ym9vbD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB0cnVlQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGJvb2w+KCgoSUVudW1lcmFibGU8Ym9vbD4pbGlzdCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Ym9vbCwgYm9vbD4pKGIgPT4gYikpO1xyXG4gICAgICAgICAgICBpZiAodHJ1ZUNvdW50ID09IGxpc3QuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpbnQgZmlyc3RIb2xlID0gRmluZEZpcnN0SG9sZShsaXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmaXJzdEhvbGUgPj0gbGlzdC5Db3VudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0cnVlQ291bnQgKyAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdFtpXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gdHJ1ZUNvdW50ICsgMTsgaSA8IGxpc3QuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBsaXN0W2ldID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsaXN0W2ZpcnN0SG9sZV0gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGludCBpbml0aWFsVHJ1ZXMgPSB0cnVlQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gZmlyc3RIb2xlOyBpIDwgbGlzdC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0W2ldKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsVHJ1ZXMtLTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGluaXRpYWxUcnVlczsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RbaV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluaXRpYWxUcnVlczsgaSA8IGZpcnN0SG9sZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RbaV0gPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBOZXh0U2FtZVRydWVDb3VudChMaXN0PGJvb2w+IGxpc3QsIGludCB0cnVlQ291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgZmlyc3RIb2xlID0gRmluZEZpcnN0SG9sZShsaXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmaXJzdEhvbGUgPj0gbGlzdC5Db3VudClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGxpc3RbZmlyc3RIb2xlXSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpbnQgaW5pdGlhbFRydWVzID0gdHJ1ZUNvdW50O1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gZmlyc3RIb2xlOyBpIDwgbGlzdC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdFtpXSlcclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsVHJ1ZXMtLTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpbml0aWFsVHJ1ZXM7IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3RbaV0gPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gaW5pdGlhbFRydWVzOyBpIDwgZmlyc3RIb2xlOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0W2ldID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBpbnQgRmluZEZpcnN0SG9sZShMaXN0PGJvb2w+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChpIDwgbGlzdC5Db3VudCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChsaXN0W2ldICYmICFsaXN0W2kgKyAxXSlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpICsgMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gaW50IGJhc2VkXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIE5leHRTaG9ydExleChpbnQgbiwgaW50IGssIHJlZiBpbnRbXSBzdGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBrID0gTWF0aC5NYXgoMCwgayk7XHJcblxyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSBuZXcgaW50W25dO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBrOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVbaV0gPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBrIDw9IDAgfHwgayA+PSBuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBib29sIGRvbmUgPSAhTmV4dFNhbWVPbkNvdW50KHN0YXRlLCBrKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkb25lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGs7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZVtpXSA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IGs7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVbaV0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZG9uZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIE5leHRTYW1lT25Db3VudChpbnRbXSBsaXN0LCBpbnQgdHJ1ZUNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGZpcnN0SG9sZSA9IEZpbmRGaXJzdEhvbGUobGlzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmlyc3RIb2xlID49IGxpc3QuTGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgbGlzdFtmaXJzdEhvbGVdID0gMTtcclxuXHJcbiAgICAgICAgICAgIGludCBpbml0aWFsT25lcyA9IHRydWVDb3VudDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGZpcnN0SG9sZTsgaSA8IGxpc3QuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGluaXRpYWxPbmVzIC09IGxpc3RbaV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5pdGlhbE9uZXM7IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3RbaV0gPSAxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gaW5pdGlhbE9uZXM7IGkgPCBmaXJzdEhvbGU7IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3RbaV0gPSAwO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgaW50IEZpbmRGaXJzdEhvbGUoaW50W10gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGkgPCBsaXN0Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChsaXN0W2ldID09IDEgJiYgbGlzdFtpICsgMV0gPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpICsgMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBwYXJ0aXRpb25zXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PExpc3Q8aW50Pj4+IEVudW1lcmF0ZVBhcnRpdGlvbnNVbm9yZGVyZWQoaW50W10gc2l6ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KEVudW1lcmF0ZVBhcnRpdGlvbnMoc2l6ZXMsIDApLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGJvb2w+KSgoYWEsIGJiKSA9PiBQYXJ0aWFsT3JkZXIuRW1iZWRzPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihhYSwgYmIsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGFydGlhbE9yZGVyUmVzdWx0PikoKGEsIGIpID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5FcXVhbDxpbnQ+KGEsYikgPyBuZXcgUGFydGlhbE9yZGVyUmVzdWx0KCkgeyBBdE1vc3QgPSB0cnVlLCBBdExlYXN0ID0gdHJ1ZSB9IDogbmV3IFBhcnRpYWxPcmRlclJlc3VsdCgpKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxMaXN0PGludD4+PiBFbnVtZXJhdGVQYXJ0aXRpb25zKGludFtdIHNpemVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZVBhcnRpdGlvbnMoc2l6ZXMsIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8TGlzdDxpbnQ+Pj4gRW51bWVyYXRlUGFydGl0aW9ucyhpbnRbXSBzaXplcywgaW50IGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRsZXNzID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzaXplcy5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNpemVzW2ldIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY2hpbGRsZXNzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgc2l6ZXNbaV0tLTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydGl0aW9uIGluIEVudW1lcmF0ZVBhcnRpdGlvbnMoc2l6ZXMsIGl0ZW0gKyAxKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0aXRpb25baV0uQWRkKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBwYXJ0aXRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2l6ZXNbaV0rKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNoaWxkbGVzcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpdGlvbiA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2l6ZXMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGl0aW9uLkFkZChuZXcgTGlzdDxpbnQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBwYXJ0aXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIHN0cnVjdCBQYXJ0aWFsT3JkZXJSZXN1bHRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgYm9vbCBBdE1vc3Q7XHJcbiAgICAgICAgcHVibGljIGJvb2wgQXRMZWFzdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFBhcnRpYWxPcmRlclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBFbWJlZHM8VD4oTGlzdDxUPiBBLCBMaXN0PFQ+IEIsIEZ1bmM8VCwgVCwgUGFydGlhbE9yZGVyUmVzdWx0PiBvcmRlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBLkNvdW50ID4gQi5Db3VudClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuID0gQS5Db3VudCArIEIuQ291bnQ7XHJcbiAgICAgICAgICAgIHZhciBhZGphY2VuY2llcyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oQS5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYSBpbiBBKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IEIuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gb3JkZXIoYSwgQltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5BdE1vc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9ycy5BZGQoaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYWRqYWNlbmNpZXMuQWRkKG5laWdoYm9ycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBGbG93cy5CaXBhcnRpdGVNYXhpbXVtTWF0Y2hpbmcobiwgYWRqYWNlbmNpZXMpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFBlcm11dGF0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFBlcm11dGF0aW9uKEZhY3RvcmFkaWMgZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzZXF1ZW5jZSA9IG5ldyBMaXN0PGludD4oZi5EaWdpdHMuQ291bnQpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGYuRGlnaXRzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZS5BZGQoaSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGYuRGlnaXRzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBqID0gZi5EaWdpdHNbZi5EaWdpdHMuQ291bnQgLSAxIC0gaV0gKyBpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlLkluc2VydChpLCBzZXF1ZW5jZVtqXSk7XHJcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZS5SZW1vdmVBdChqICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFNlcXVlbmNlID0gc2VxdWVuY2U7XHJcbiAgICAgICAgICAgIE4gPSBTZXF1ZW5jZS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQZXJtdXRhdGlvbihMaXN0PGludD4gc2VxdWVuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTZXF1ZW5jZSA9IG5ldyBMaXN0PGludD4oc2VxdWVuY2UpO1xyXG4gICAgICAgICAgICBOID0gU2VxdWVuY2UuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgaGFzaCA9IG5ldyBEaWN0aW9uYXJ5PGludCwgYm9vbD4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAoaW50IGkgaW4gc2VxdWVuY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChoYXNoLkNvbnRhaW5zS2V5KGkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJUaGUgc3VwcGxpZWQgc2VxdWVuY2UgaGFzIGR1cGxpY2F0ZXMuXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMCB8fCBpID4gTiAtIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlRoZSBzdXBwbGllZCBzZXF1ZW5jZSBoYXMgZWxlbWVudHMgdGhhdCBhcmUgb3V0IG9mIHJhbmdlLlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBoYXNoW2ldID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8VD4gQXBwbHk8VD4oTGlzdDxUPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGxpc3QgPT0gbnVsbCB8fCBsaXN0LkNvdW50ICE9IE4pXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiVGhlIHBlcm11dGF0aW9uIGNhbm5vdCBiZSBhcHBsaWVkIHRvIHRoZSBnaXZlbiBsaXN0LlwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwZXJtdXRlZExpc3QgPSBuZXcgTGlzdDxUPihOKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcGVybXV0ZWRMaXN0LkFkZChsaXN0W3RoaXNbaV1dKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwZXJtdXRlZExpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUGVybXV0YXRpb24gSW52ZXJzZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2VxdWVuY2UgPSBuZXcgaW50W05dO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZVt0aGlzW2ldXSA9IGk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcm11dGF0aW9uKG5ldyBMaXN0PGludD4oc2VxdWVuY2UpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgUGVybXV0YXRpb24gb3BlcmF0b3IgKihQZXJtdXRhdGlvbiBwMSwgUGVybXV0YXRpb24gcDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocDEgPT0gbnVsbCB8fCBwMiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICBpZiAocDEuTiAhPSBwMi5OKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIllvdSB0cmllZCB0byBtdWx0aXBseSBwZXJtdXRhdGlvbnMgb2YgZGlmZmVyZW50IHNldHMuXCIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNlcXVlbmNlID0gbmV3IExpc3Q8aW50PihwMi5OKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcDIuTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2UuQWRkKHAxW3AyW2ldXSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcm11dGF0aW9uKHNlcXVlbmNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciA9PShQZXJtdXRhdGlvbiBwMSwgUGVybXV0YXRpb24gcDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoKG9iamVjdClwMSA9PSBudWxsICYmIChvYmplY3QpcDIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoKG9iamVjdClwMSA9PSBudWxsIHx8IChvYmplY3QpcDIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwMS5FcXVhbHMocDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yICE9KFBlcm11dGF0aW9uIHAxLCBQZXJtdXRhdGlvbiBwMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAhKHAxID09IHAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG9iaiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFRvU3RyaW5nKCkgPT0gb2JqLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIihcIiArIHN0cmluZy5Kb2luPGludD4oXCIgXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KFNlcXVlbmNlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoaSA9PiBpICsgMSkpKSArIFwiKVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVG9TdHJpbmcoKS5HZXRIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxQZXJtdXRhdGlvbj4gRW51bWVyYXRlQWxsKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gQ291bnRpbmcuRmFjdG9yaWFsKG4pO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsb25nIGkgPSAwOyBpIDwgY291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgUGVybXV0YXRpb24obmV3IEZhY3RvcmFkaWMoaSwgbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCB0aGlzW2ludCBpXVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBTZXF1ZW5jZVtpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBTZXF1ZW5jZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0O1xyXG4gICAgICAgICAgICBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgTlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0O1xyXG4gICAgICAgICAgICBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTYWZlQ29sbGVjdGlvbjxUPiA6IElDb2xsZWN0aW9uPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgaW50IF9jb3VudDtcclxuICAgICAgICBOb2RlIF9maXJzdDtcclxuICAgICAgICBOb2RlIF9sYXN0O1xyXG5cclxuICAgICAgICBwdWJsaWMgU2FmZUNvbGxlY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2ZpcnN0ID0gbmV3IE5vZGUoKTtcclxuICAgICAgICAgICAgX2xhc3QgPSBfZmlyc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGQoVCBpdGVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2xhc3QuTmV4dCA9IG5ldyBOb2RlKCkgeyBJdGVtID0gaXRlbSB9O1xyXG4gICAgICAgICAgICBfbGFzdCA9IF9sYXN0Lk5leHQ7XHJcbiAgICAgICAgICAgIF9jb3VudCsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xlYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2ZpcnN0Lk5leHQgPSBudWxsO1xyXG4gICAgICAgICAgICBfbGFzdCA9IF9maXJzdDtcclxuICAgICAgICAgICAgX2NvdW50ID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKFQgaXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBGaW5kUHJldmlvdXNOb2RlKGl0ZW0pICE9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDb3B5VG8oVFtdIGFycmF5LCBpbnQgYXJyYXlJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gX2ZpcnN0O1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHQgPSBub2RlLk5leHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGFycmF5W2FycmF5SW5kZXgrK10gPSBuZXh0Lkl0ZW07XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbmV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBDb3VudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9jb3VudDsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNSZWFkT25seVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBSZW1vdmUoVCBpdGVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBGaW5kUHJldmlvdXNOb2RlKGl0ZW0pO1xyXG4gICAgICAgICAgICBpZiAobm9kZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5leHQgPSBub2RlLk5leHQ7XHJcbiAgICAgICAgICAgIGlmIChuZXh0ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICAgICBub2RlLk5leHQgPSBuZXh0Lk5leHQ7XHJcbiAgICAgICAgICAgIF9jb3VudC0tO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxUPiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gX2ZpcnN0O1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHQgPSBub2RlLk5leHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV4dC5JdGVtO1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5leHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvciBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTm9kZSBGaW5kUHJldmlvdXNOb2RlKFQgaXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gX2ZpcnN0O1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHQgPSBub2RlLk5leHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChFcXVhbGl0eUNvbXBhcmVyPFQ+LkRlZmF1bHQuRXF1YWxzKG5leHQuSXRlbSwgaXRlbSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcblxyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5leHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xhc3MgTm9kZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIFQgSXRlbTtcclxuICAgICAgICAgICAgcHVibGljIE5vZGUgTmV4dDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuVXRpbGl0eVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2VxdWVuY2VHZW5lcmFsaXplcjxUPlxyXG4gICAge1xyXG4gICAgICAgIGludCBfbGVuZ3RoO1xyXG4gICAgICAgIExpc3Q8VD4gX2FscGhhYmV0O1xyXG4gICAgICAgIExpc3Q8TWF0Y2hlcj4gX21hdGNoZXJzID0gbmV3IExpc3Q8TWF0Y2hlcj4oKTtcclxuICAgICAgICBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBfZ2VuZXJhbGl6ZXJzO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2VxdWVuY2VHZW5lcmFsaXplcihpbnQgbGVuZ3RoLCBMaXN0PFQ+IGFscGhhYmV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2xlbmd0aCA9IGxlbmd0aDtcclxuICAgICAgICAgICAgX2FscGhhYmV0ID0gYWxwaGFiZXQ7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBhbHBoYWJldClcclxuICAgICAgICAgICAgICAgIEFkZE1hdGNoZXIodC5Ub1N0cmluZygpLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBib29sPikodHQgPT4gdC5FcXVhbHModHQpKSk7XHJcblxyXG4gICAgICAgICAgICBBZGRNYXRjaGVyKFwiKlwiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBib29sPikodHQgPT4gdHJ1ZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkTWF0Y2hlcihzdHJpbmcgbmFtZSwgRnVuYzxULCBib29sPiBtYXRjaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9tYXRjaGVycy5BZGQobmV3IE1hdGNoZXIoKSB7IE5hbWUgPSBuYW1lLCBNYXRjaCA9IG1hdGNoIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVmVjdG9yQ29tcGFyZXIgX3ZlY3RvckNvbXBhcmVyID0gbmV3IFZlY3RvckNvbXBhcmVyKCk7XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxNYXRjaGVyPj4gR2VuZXJhbGl6ZShMaXN0PExpc3Q8VD4+IGV4YW1wbGVzLCBMaXN0PExpc3Q8VD4+IG5vbkV4YW1wbGVzLCBib29sIG1vc3RHZW5lcmFsID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCdWlsZE1hdGNoZXJMYXR0aWNlKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9zc2libGVzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZXhhbXBsZSBpbiBleGFtcGxlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFzTWF0Y2hlckluZGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxULGludD4oZXhhbXBsZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBpbnQ+KSh0ID0+IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRmlyc3RJbmRleDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPFQ+Lk1hdGNoZXI+KF9tYXRjaGVycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPFQ+Lk1hdGNoZXIsIGJvb2w+KShtID0+IG0uTmFtZSA9PSB0LlRvU3RyaW5nKCkpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgcG9zc2libGVzLkFkZFJhbmdlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGFzTWF0Y2hlckluZGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGkgPT4gX2dlbmVyYWxpemVyc1tpXSkpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikodiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHYpKSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwb3NzaWJsZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihwb3NzaWJsZXMsX3ZlY3RvckNvbXBhcmVyKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBub25FeGFtcGxlIGluIG5vbkV4YW1wbGVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXNNYXRjaGVySW5kaWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PFQsaW50Pihub25FeGFtcGxlLChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGludD4pKHQgPT4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5GaXJzdEluZGV4PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8VD4uTWF0Y2hlcj4oX21hdGNoZXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8VD4uTWF0Y2hlciwgYm9vbD4pKG0gPT4gbS5OYW1lID09IHQuVG9TdHJpbmcoKSkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBwb3NzaWJsZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4ocG9zc2libGVzLFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGFzTWF0Y2hlckluZGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGkgPT4gX2dlbmVyYWxpemVyc1tpXSkpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikodiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHYpKSksIF92ZWN0b3JDb21wYXJlcikuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBnZW5lcmFsaXphdGlvbnMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGV4YW1wbGVzKTtcclxuICAgICAgICAgICAgd2hpbGUgKHJlbWFpbmluZy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmRlcmVkID0gcG9zc2libGVzLlNlbGVjdChwcCA9PiBuZXcge1ZlY3RvciA9IHBwLCBDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihyZW1haW5pbmcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikociA9PiBJc01hdGNoKHIsIHBwKSkpfSkuT3JkZXJCeURlc2NlbmRpbmc8aW50Pih4eCA9PiB4eC5Db3VudCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4ZXJzID0gb3JkZXJlZC5UYWtlV2hpbGUoeHggPT4geHguQ291bnQgPT0gb3JkZXJlZFswXS5Db3VudCkuT3JkZXJCeURlc2NlbmRpbmc8aW50Pih4eCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxpbnQ+KHh4LlZlY3RvciwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludCwgaW50PikoKHRvdGFsLCB4KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9tYXRjaGVyc1t4XS5OYW1lID09IFwiKlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvdGFsICogX2FscGhhYmV0LkNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX21hdGNoZXJzW3hdLk5hbWUuU3RhcnRzV2l0aChcIiFcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG90YWwgKiAoX2FscGhhYmV0LkNvdW50IC0gMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYmVzdCA9IG1vc3RHZW5lcmFsID8gbWF4ZXJzLkZpcnN0KCkuVmVjdG9yIDogbWF4ZXJzLkxhc3QoKS5WZWN0b3I7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGdlbmVyYWxpemF0aW9ucy5BZGQoYmVzdCk7XHJcbkFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oICAgICAgICAgICAgICAgIHJlbWFpbmluZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShyID0+IElzTWF0Y2gociwgYmVzdCkpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKCh4KSA9PiB7IH0pKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPFQ+Lk1hdGNoZXI+PihnZW5lcmFsaXphdGlvbnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPFQ+Lk1hdGNoZXI+PikobCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyPihsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyPikoaSA9PiBfbWF0Y2hlcnNbaV0pKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsYXNzIFZlY3RvckNvbXBhcmVyIDogSUVxdWFsaXR5Q29tcGFyZXI8TGlzdDxpbnQ+PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKExpc3Q8aW50PiB4LCBMaXN0PGludD4geSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KHgseSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgR2V0SGFzaENvZGUoTGlzdDxpbnQ+IGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVuY2hlY2tlZFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBoYXNoID0gMTc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHggaW4gbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaCA9IGhhc2ggKiAyMyArIHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoYXNoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEJ1aWxkTWF0Y2hlckxhdHRpY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2dlbmVyYWxpemVycyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgX21hdGNoZXJzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9nZW5lcmFsaXplcnNbaV0gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8VD4oX2FscGhhYmV0LChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGJvb2w+KShhID0+IF9tYXRjaGVyc1tpXS5NYXRjaChhKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaiA9IDA7IGogPCBfbWF0Y2hlcnMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsPFQ+KG1hdGNoZXMsU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxUPihfYWxwaGFiZXQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgYm9vbD4pKGEgPT4gX21hdGNoZXJzW2pdLk1hdGNoKGEpKSkuVG9MaXN0KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ2VuZXJhbGl6ZXJzW2ldLkFkZChqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBJc01hdGNoKExpc3Q8VD4gdmVjdG9yLCBMaXN0PGludD4gbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdmVjdG9yLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghX21hdGNoZXJzW21baV1dLk1hdGNoKHZlY3RvcltpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBNYXRjaGVyXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcbiAgICAgICAgICAgIHB1YmxpYyBGdW5jPFQsIGJvb2w+IE1hdGNoO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLldvcmRHYW1lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBBY2Nlc3NpYmlsaXR5Q2hlY2tlclxyXG4gICAge1xyXG4gICAgICAgIExpc3Q8Y2hhcj4gX2FscGhhYmV0O1xyXG4gICAgICAgIHB1YmxpYyBBY2Nlc3NpYmlsaXR5Q2hlY2tlcihJRW51bWVyYWJsZTxjaGFyPiBhbHBoYWJldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9hbHBoYWJldCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGNoYXI+KGFscGhhYmV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQWNjZXNzaWJsZShzdHJpbmcgdywgTGlzdDxzdHJpbmc+IFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciBjIGluIF9hbHBoYWJldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdvb2RDaG9pY2VBbHdheXNFeGlzdHMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzd2FwcGVycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGNoYXI+KF9hbHBoYWJldCxuZXdbXSB7IGMgfSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciBwYXJ0aXRpb24gaW4gRW51bWVyYXRlUGFydGl0aW9ucyh3LCBzd2FwcGVycykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdvb2RDaG9pY2VFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgY2hvaWNlIGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5HZW5lcmF0ZVN1Ymxpc3RzPGludD4oRW51bWVyYWJsZS5SYW5nZSgwLCBwYXJ0aXRpb24uQ291bnQpLlRvTGlzdCgpKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaG9pY2UuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHd3ID0gTWFrZU1vdmUodywgcGFydGl0aW9uLCBjaG9pY2UsIHN3YXBwZXJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFMuQ29udGFpbnMod3cpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29kQ2hvaWNlRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWdvb2RDaG9pY2VFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29kQ2hvaWNlQWx3YXlzRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZ29vZENob2ljZUFsd2F5c0V4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxMaXN0PGludD4+PiBFbnVtZXJhdGVQYXJ0aXRpb25zKHN0cmluZyB3LCBMaXN0PGNoYXI+IHN3YXBwZXJzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNoYXJzID0gdy5Ub0NoYXJBcnJheSgpO1xyXG4gICAgICAgICAgICB2YXIgaW5kaWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8Y2hhcj4oY2hhcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Y2hhciwgYm9vbD4pKGMgPT4gc3dhcHBlcnMuQ29udGFpbnMoYykpKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5kZXhQYXJ0aXRpb25zID0gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5HZXRQYXJ0aXRpb25zKGluZGljZXMuQ291bnQpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaW5kZXhQYXJ0aXRpb24gaW4gaW5kZXhQYXJ0aXRpb25zKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydGl0aW9uID0gbmV3IExpc3Q8TGlzdDxpbnQ+PihpbmRleFBhcnRpdGlvbi5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaW5kZXhQYXJ0IGluIGluZGV4UGFydGl0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oaW5kZXhQYXJ0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoaSA9PiBpbmRpY2VzW2ldKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGl0aW9uLkFkZChwYXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gcGFydGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHJpbmcgTWFrZU1vdmUoc3RyaW5nIHcsIExpc3Q8TGlzdDxpbnQ+PiBwYXJ0aXRpb24sIExpc3Q8aW50PiBjaG9pY2UsIExpc3Q8Y2hhcj4gc3dhcHBlcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hhcnMgPSB3LlRvQ2hhckFycmF5KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBqIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxpbnQsaW50PihjaG9pY2UsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KShpID0+IHBhcnRpdGlvbltpXSkpKVxyXG4gICAgICAgICAgICAgICAgY2hhcnNbal0gPSBzd2FwcGVyc1sxIC0gc3dhcHBlcnMuSW5kZXhPZihjaGFyc1tqXSldO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBzdHJpbmcoY2hhcnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLldvcmRHYW1lXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQm94aWZpY2F0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFR1cGxlPExpc3Q8TGlzdDxUPj4sIExpc3Q8TGlzdDxUPj4+PiBTcGxpdDxUPihMaXN0PExpc3Q8VD4+IGFsbFBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaHVua3MgPSBuZXcgTGlzdDxUdXBsZTxMaXN0PExpc3Q8VD4+LCBMaXN0PExpc3Q8VD4+Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGFsbFBvaW50cyk7XHJcbiAgICAgICAgICAgIGludCBuID0gYWxsUG9pbnRzWzBdLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHBvaW50cy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBiZXN0VCA9IDE7XHJcbiAgICAgICAgICAgICAgICBpbnQgYmVzdFNwbGl0ID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBzcGxpdCA9IDE7IHNwbGl0IDwgbiAtIDE7IHNwbGl0KyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxUPihwLHNwbGl0KS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByaWdodCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ta2lwPFQ+KHAsc3BsaXQpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gQmluYXJ5KDEsIHBvaW50cy5Db3VudCAtIDEsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoaSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihsZWZ0LGkpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoKGwxLCBsMikgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KGwxLGwyKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocmlnaHQsaSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KSgobDEsIGwyKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4obDEsbDIpKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW4gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGxlZnRzLHJpZ2h0cyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSh0dXAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8VD4odHVwLkl0ZW0xLHR1cC5JdGVtMikuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsbEV4aXN0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihzcGFuLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KHBwLHApKSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbGxFeGlzdCA/IDEgOiAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9KSkgLSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCA+PSBiZXN0VClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID4gYmVzdFQgfHwgTWF0aC5BYnMobi8yIC0gc3BsaXQpIDwgTWF0aC5BYnMobi8yIC0gYmVzdFNwbGl0KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFQgPSB0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFNwbGl0ID0gc3BsaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGwgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxUPihwLGJlc3RTcGxpdCkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciByID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNraXA8VD4ocCxiZXN0U3BsaXQpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGwsYmVzdFQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoKGwxLCBsMikgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KGwxLGwyKSkpKTtcclxuICAgICAgICAgICAgICAgIHZhciBycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocixiZXN0VCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KSgobDEsIGwyKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4obDEsbDIpKSkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGxzLHJzKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKHR1cCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbmNhdDxUPih0dXAuSXRlbTEsdHVwLkl0ZW0yKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNodW5rcy5BZGQobmV3IFR1cGxlPExpc3Q8TGlzdDxUPj4sIExpc3Q8TGlzdDxUPj4+KGxzLCBycykpO1xyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KCAgICAgICAgICAgICAgICBwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KHBwLHApKSkpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKCh4KSA9PiB7IH0pKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNodW5rcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PExpc3Q8TGlzdDxUPj4+PiBTcGxpdE11bHRpd2F5PFQ+KExpc3Q8TGlzdDxUPj4gYWxsUG9pbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNodW5rcyA9IG5ldyBMaXN0PExpc3Q8TGlzdDxMaXN0PFQ+Pj4+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9pbnRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihhbGxQb2ludHMpO1xyXG4gICAgICAgICAgICBpbnQgbiA9IGFsbFBvaW50c1swXS5Db3VudDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChwb2ludHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgYmVzdFQgPSAxO1xyXG4gICAgICAgICAgICAgICAgTGlzdDxpbnQ+IGJlc3RTcGxpdCA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgc3BsaXQgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgbikuVG9MaXN0KCkpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGwgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGludCxpbnQ+KGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh4ID0+IHgpKS5Ub0xpc3QoKSkpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChFeHRyYWN0UmFuZ2VzPFQ+KHNwbGl0LCBwb2ludHNbMF0pLkNvdW50IDw9IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IEJpbmFyeSgxLCBwb2ludHMuQ291bnQgLSAxLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGkgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYW5nZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsaSkuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikocCA9PiBFeHRyYWN0UmFuZ2VzPFQ+KHNwbGl0LCBwKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2VWYWx1ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+PihyYW5nZXMsRW51bWVyYWJsZS5SYW5nZSgwLCByYW5nZXNbMF0uQ291bnQpLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKF9fID0+IG5ldyBMaXN0PExpc3Q8VD4+KCkpKS5Ub0xpc3QoKSxcclxuKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4+KSggICAgICAgICAgICAgICAgICAgICAgICAgICAgKHVuaW9uLCBuZXh0KSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlppcDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KHVuaW9uLG5leHQsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikoKEEsIEIpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNvbmNhdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEEsQiksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KSgobDEsIGwyKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4obDEsbDIpKSkpKSkuVG9MaXN0KCkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihyYW5nZVZhbHVlcyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKGxsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4obGwpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFuID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihjcCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikobGwgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixUPihsbCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4+KShwcCA9PiBwcCkpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGxFeGlzdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oc3BhbiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHBwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihwcCxwKSkpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWxsRXhpc3QgPyAxIDogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpIC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPiBiZXN0VClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RUID0gdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFNwbGl0ID0gc3BsaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciByciA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cyxiZXN0VCkuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikocCA9PiBFeHRyYWN0UmFuZ2VzPFQ+KGJlc3RTcGxpdCwgcCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciBycnYgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+PihycixFbnVtZXJhYmxlLlJhbmdlKDAsIHJyWzBdLkNvdW50KS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KShfXyA9PiBuZXcgTGlzdDxMaXN0PFQ+PigpKSkuVG9MaXN0KCksXHJcbihnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+PikoICAgICAgICAgICAgICAgICAgICAodW5pb24sIG5leHQpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuWmlwPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4odW5pb24sbmV4dCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KSgoQSwgQikgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ29uY2F0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQSxCKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKChsMSwgbDIpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihsMSxsMikpKSkpKS5Ub0xpc3QoKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihycnYpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikobGwgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixUPihsbCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4+KShwcCA9PiBwcCkpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2h1bmtzLkFkZChycnYpO1xyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KCAgICAgICAgICAgICAgICBwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KHBwLHApKSkpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKCh4KSA9PiB7IH0pKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNodW5rcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBMaXN0PExpc3Q8VD4+IEV4dHJhY3RSYW5nZXM8VD4oTGlzdDxpbnQ+IHN0b3BzLCBMaXN0PFQ+IGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcmFuZ2VzID0gbmV3IExpc3Q8TGlzdDxUPj4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHN0b3AgaW4gc3RvcHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJhbmdlcy5BZGQobC5HZXRSYW5nZShsZWZ0LCBzdG9wIC0gbGVmdCArIDEpKTtcclxuICAgICAgICAgICAgICAgIGxlZnQgPSBzdG9wICsgMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGxlZnQgPCBsLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmFuZ2VzLkFkZChsLkdldFJhbmdlKGxlZnQsIGwuQ291bnQgLSBsZWZ0KSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8TGlzdDxUPj4+IEJveGlmeTxUPihMaXN0PExpc3Q8VD4+IHBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBib3hlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KShwID0+IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRW5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBib3hDb250YWluZXJzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4oYm94ZXMsYm94ZXMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4sIGJvb2w+KShwYWlyID0+ICFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihwYWlyLkl0ZW0xLHBhaXIuSXRlbTIpKSkuU2VsZWN0KHBhaXIgPT4gbmV3IHsgUGFpciA9IHBhaXIsIEJveGVkVW5pb24gPSBCb3hDb250YWluZXI8VD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihwYWlyLkl0ZW0xLHBhaXIuSXRlbTIpLlRvTGlzdCgpKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZ3Jvd24gPSBib3hDb250YWluZXJzLkZpcnN0T3JEZWZhdWx0KGJjID0+IENvbnRhaW5zQm94Q29udGFpbmVyPFQ+KHBvaW50cywgYmMuQm94ZWRVbmlvbikpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyb3duID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYm94ZXMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBib3hlcy5SZW1vdmUoZ3Jvd24uUGFpci5JdGVtMSk7XHJcbiAgICAgICAgICAgICAgICBib3hlcy5SZW1vdmUoZ3Jvd24uUGFpci5JdGVtMik7XHJcbiAgICAgICAgICAgICAgICBib3hlcy5BZGQoZ3Jvd24uQm94ZWRVbmlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJveGVzLkNvdW50ID09IGNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYm94ZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxMaXN0PFQ+Pj4gUHJlZml4Qm94aWZ5PFQ+KExpc3Q8TGlzdDxUPj4gcG9pbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFsbFBvaW50cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzKTtcclxuICAgICAgICAgICAgdmFyIGJveGVzID0gbmV3IExpc3Q8TGlzdDxMaXN0PFQ+Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IEJpbmFyeSgxLCBwb2ludHMuQ291bnQgLSAxLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGkgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBDb250YWluc0JveDxUPihhbGxQb2ludHMsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cyxpKS5Ub0xpc3QoKSkgPyAxIDogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJveGVzLkFkZChCb3hDb250YWluZXI8VD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLHQpLlRvTGlzdCgpKSk7XHJcbiAgICAgICAgICAgICAgICBwb2ludHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNraXA8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsdCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9pbnRzLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBib3hlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBDb250YWluc0JveDxUPihMaXN0PExpc3Q8VD4+IGFsbFBvaW50cywgTGlzdDxMaXN0PFQ+PiBwb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYm94ID0gQm94Q29udGFpbmVyPFQ+KHBvaW50cyk7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250YWluc0JveENvbnRhaW5lcjxUPihhbGxQb2ludHMsIGJveCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBDb250YWluc0JveENvbnRhaW5lcjxUPihMaXN0PExpc3Q8VD4+IGFsbFBvaW50cywgTGlzdDxMaXN0PFQ+PiBib3hDb250YWluZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihib3hDb250YWluZXIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGFsbFBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwcCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4ocHAscCkpKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8VD4+IEJveENvbnRhaW5lcjxUPihMaXN0PExpc3Q8VD4+IHBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8VD4oRW51bWVyYWJsZS5SYW5nZSgwLCBwb2ludHNbMF0uQ291bnQpLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoaSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sVD4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgVD4pKHAgPT4gcFtpXSkpLkRpc3RpbmN0KCkuVG9MaXN0KCkpKVxyXG4pXHJcbiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KShlID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PFQ+KGUpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0JveDxUPihMaXN0PExpc3Q8VD4+IHBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBwb2ludHMuQ291bnQgPT0gQm94Q29udGFpbmVyPFQ+KHBvaW50cykuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0JveFN0cmluZzxUPihMaXN0PExpc3Q8VD4+IHBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcIiAqIFwiLCBFbnVtZXJhYmxlLlJhbmdlKDAsIHBvaW50c1swXS5Db3VudCkuU2VsZWN0PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBzdHJpbmc+KShpID0+IFwie1wiICsgc3RyaW5nLkpvaW48VD4oXCIsXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixUPihwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBUPikocCA9PiBwW2ldKSkuRGlzdGluY3QoKSkgKyBcIn1cIikpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvTXVsdGlDaHVua1N0cmluZzxUPihMaXN0PExpc3Q8TGlzdDxUPj4+IG11bHRpQ2h1bmspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCIgKiBcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sc3RyaW5nPihtdWx0aUNodW5rLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBzdHJpbmc+KShjaHVuayA9PiBUb0xpc3RPZkxpc3RzU3RyaW5nPFQ+KGNodW5rKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvQ2h1bmtTdHJpbmc8VD4oVHVwbGU8TGlzdDxMaXN0PFQ+PiwgTGlzdDxMaXN0PFQ+Pj4gY2h1bmspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVG9MaXN0T2ZMaXN0c1N0cmluZzxUPihjaHVuay5JdGVtMSkgKyBcIiAqIFwiICsgVG9MaXN0T2ZMaXN0c1N0cmluZzxUPihjaHVuay5JdGVtMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgc3RyaW5nIFRvTGlzdE9mTGlzdHNTdHJpbmc8VD4oTGlzdDxMaXN0PFQ+PiBsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwie1wiICsgc3RyaW5nLkpvaW4oXCIsXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixzdHJpbmc+KGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBzdHJpbmc+KShzbCA9PiBcIntcIiArIHN0cmluZy5Kb2luPFQ+KFwiLFwiLCBzbCkgKyBcIn1cIikpKSArIFwifVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGludCBCaW5hcnkoaW50IGZpcnN0LCBpbnQgbGFzdCwgRnVuYzxpbnQsIGludD4gdGFyZ2V0RGlyZWN0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxlZnQgPSBmaXJzdCAtIDE7XHJcbiAgICAgICAgICAgIHZhciByaWdodCA9IGxhc3QgKyAxO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHJpZ2h0IC0gbGVmdCA+PSAyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgbWlkZGxlID0gbGVmdCArIChyaWdodCAtIGxlZnQpIC8gMjtcclxuICAgICAgICAgICAgICAgIGludCBkaXJlY3Rpb24gPSB0YXJnZXREaXJlY3Rpb24obWlkZGxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1pZGRsZTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSBtaWRkbGU7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IG1pZGRsZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGxlZnQgPCBmaXJzdClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdCAtIDE7XHJcbiAgICAgICAgICAgIGlmIChyaWdodCA+IGxhc3QpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGFzdCArIDE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbGVmdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXI7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRmFzdEFjY2Vzc2liaWxpdHlDaGVja2VyXHJcbiAgICB7XHJcbiAgICAgICAgdWxvbmdbXSBfZml4ZXJSZXNwb25zZXM7XHJcbiAgICAgICAgaW50IF9maXhlclJlc3BvbnNlQ291bnQ7XHJcbiAgICAgICAgRGljdGlvbmFyeTx1bG9uZywgTGlzdDxMaXN0PHVsb25nPj4+IF9icmVha2VyQ2hvaWNlc0NhY2hlID0gbmV3IERpY3Rpb25hcnk8dWxvbmcsIExpc3Q8TGlzdDx1bG9uZz4+PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgRmFzdEFjY2Vzc2liaWxpdHlDaGVja2VyKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VzID0gbmV3IHVsb25nWzEgPDwgKChuICsgMSkgPj4gMSldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNBY2Nlc3NpYmxlKEZhc3RXb3JkIGJvYXJkLCBIYXNoU2V0PEZhc3RXb3JkPiB3b25Cb2FyZHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJvYXJkLl9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgYm9hcmQuX2xlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gYm9hcmQuX3RyYWNlW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gYm9hcmQuX3RyYWNlW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzd2FwcGFibGUgPSB4IF4geTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBicmVha2VyQ2hvaWNlIGluIEdldEJyZWFrZXJDaG9pY2VzKHN3YXBwYWJsZSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBFeGlzdHMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdldEZpeGVyUmVzcG9uc2VzKGJyZWFrZXJDaG9pY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBrID0gMTsgayA8IF9maXhlclJlc3BvbnNlQ291bnQ7IGsrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkQm9hcmQgPSBuZXcgRmFzdFdvcmQoYm9hcmQuX3RyYWNlLCBpLCBqLCBfZml4ZXJSZXNwb25zZXNba10sIGJvYXJkLl9zdGFja0NvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b25Cb2FyZHMuQ29udGFpbnMoY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbm5pbmdTd2FwRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgR2V0Rml4ZXJSZXNwb25zZXMoTGlzdDx1bG9uZz4gcG9zc2libGVNb3ZlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maXhlclJlc3BvbnNlQ291bnQgPSAxIDw8IHBvc3NpYmxlTW92ZXMuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3Vic2V0ID0gMTtcclxuICAgICAgICAgICAgd2hpbGUgKHN1YnNldCA8IF9maXhlclJlc3BvbnNlQ291bnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IDBVTDtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gc3Vic2V0O1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgfD0gcG9zc2libGVNb3Zlc1tJbnQzMlVzYWdlLkdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCldO1xyXG5cclxuICAgICAgICAgICAgICAgIF9maXhlclJlc3BvbnNlc1tzdWJzZXRdID0gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICBzdWJzZXQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBMaXN0PExpc3Q8dWxvbmc+PiBHZXRCcmVha2VyQ2hvaWNlcyh1bG9uZyBzd2FwcGFibGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PExpc3Q8dWxvbmc+PiBjaG9pY2VzO1xyXG4gICAgICAgICAgICBpZiAoIV9icmVha2VyQ2hvaWNlc0NhY2hlLlRyeUdldFZhbHVlKHN3YXBwYWJsZSwgb3V0IGNob2ljZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0cyA9IHN3YXBwYWJsZS5HZXRCaXRzKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydGl0aW9ucyA9IEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuR2V0UGFydGl0aW9ucyhiaXRzLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIGNob2ljZXMgPSBuZXcgTGlzdDxMaXN0PHVsb25nPj4ocGFydGl0aW9ucy5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0aXRpb24gaW4gcGFydGl0aW9ucylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hvaWNlID0gbmV3IExpc3Q8dWxvbmc+KHBhcnRpdGlvbi5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hvaWNlcy5BZGQoY2hvaWNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnQgaW4gcGFydGl0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSAwVUw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIHBhcnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4IHw9IGJpdHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2UuQWRkKHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfYnJlYWtlckNob2ljZXNDYWNoZVtzd2FwcGFibGVdID0gY2hvaWNlcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNob2ljZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWVcclxue1xyXG4gICAgcHVibGljIGFic3RyYWN0IGNsYXNzIFRhcnBpdEVudW1lcmF0b3JcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IExpc3Q8Y2hhcj4gQWxwaGFiZXQgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8Y2hhcj4oKSwoX28yMyk9PntfbzIzLkFkZCgneCcpO19vMjMuQWRkKCd5Jyk7X28yMy5BZGQoJ3onKTtyZXR1cm4gX28yMzt9KTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzUGVybXV0YXRpb25DbG9zZWQoTGlzdDxzdHJpbmc+IFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4sc3RyaW5nPihFbnVtZXJhdGVBbHBoYWJldFBlcm11dGF0aW9ucyhTKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8c3RyaW5nPiwgc3RyaW5nPikoVCA9PiBzdHJpbmcuSm9pbihcIixcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PHN0cmluZyxzdHJpbmc+KFQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBzdHJpbmc+KShzID0+IHMpKSkpKS5EaXN0aW5jdCgpLkNvdW50KCkgPT0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxzdHJpbmc+IFJlbW92ZVBlcm11dGF0aW9uUmVkdW5kYW5jaWVzKExpc3Q8c3RyaW5nPiBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGhhc2ggPSBuZXcgSGFzaFNldDxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgIHZhciBwZXJtdXRlZExpc3RzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4+KEVudW1lcmF0ZUFscGhhYmV0UGVybXV0YXRpb25zKFMpKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBTLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGhhc2guQWRkKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxzdHJpbmc+LHN0cmluZz4ocGVybXV0ZWRMaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8c3RyaW5nPiwgc3RyaW5nPikobCA9PiBsW2ldKSkuT3JkZXJCeTxzdHJpbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgc3RyaW5nPikocyA9PiBzKSkuRmlyc3QoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxzdHJpbmc+KGhhc2gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PHN0cmluZz4gUmVvcmRlckFscGhhYmV0QnlPY2N1cmVuY2VSYXRlKExpc3Q8c3RyaW5nPiBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxzdHJpbmc+KFMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBzdHJpbmc+KShzID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaGFycyA9IHMuVG9DaGFyQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gQWxwaGFiZXQuU2VsZWN0KGMgPT4gbmV3IHsgQyA9IGMsIFJhdGUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGNoYXI+KGNoYXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGNoYXIsIGJvb2w+KShjYyA9PiBjYyA9PSBjKSkgfSkuT3JkZXJCeURlc2NlbmRpbmc8aW50PihkID0+IGQuUmF0ZSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHMuUmVwbGFjZShwWzBdLkMsICdYJykuUmVwbGFjZShwWzFdLkMsICdZJykuUmVwbGFjZShwWzJdLkMsICdaJykuVG9Mb3dlcigpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0pKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxzdHJpbmc+PiBFbnVtZXJhdGVBbHBoYWJldFBlcm11dGF0aW9ucyhMaXN0PHN0cmluZz4gUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB1cHBlcmVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLHN0cmluZz4oUywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT4gcy5Ub1VwcGVyKCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBlcm11dGF0aW9uIGluIFBlcm11dGF0aW9uLkVudW1lcmF0ZUFsbCgzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBwZXJtdXRhdGlvbi5BcHBseTxjaGFyPihBbHBoYWJldCk7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLHN0cmluZz4odXBwZXJlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT4gcy5SZXBsYWNlKCdYJywgcFswXSkuUmVwbGFjZSgnWScsIHBbMV0pLlJlcGxhY2UoJ1onLCBwWzJdKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgSUVudW1lcmFibGU8TGlzdDxzdHJpbmc+PiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0cygpO1xyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgR2VuZXJhdGVNaW5pbWFsVGFycGl0cyhBY3Rpb248TGlzdDxzdHJpbmc+PiBmb3VuZFRhcnBpdCkgeyB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXI7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRmFzdFdvcmRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgdWxvbmdbXSBfdHJhY2U7XHJcbiAgICAgICAgcHVibGljIGludCBfbGVuZ3RoO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgX3N0YWNrQ291bnQ7XHJcbiAgICAgICAgaW50IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgcHVibGljIEZhc3RXb3JkKHVsb25nW10gdHJhY2UsIGludCBzdGFja0NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3RyYWNlID0gdHJhY2U7XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSBfdHJhY2UuTGVuZ3RoO1xyXG4gICAgICAgICAgICBfc3RhY2tDb3VudCA9IHN0YWNrQ291bnQ7XHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IEhhc2hpbmcuSGFzaChfdHJhY2UsIF9sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZhc3RXb3JkKHVsb25nW10gdHJhY2UsIGludCBpLCBpbnQgaiwgdWxvbmcgc3dhcCwgaW50IHN0YWNrQ291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdHJhY2UgPSBuZXcgdWxvbmdbdHJhY2UuTGVuZ3RoXTtcclxuICAgICAgICAgICAgX2xlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDwgdHJhY2UuTGVuZ3RoOyBrKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVsb25nIHYgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGsgPT0gaSB8fCBrID09IGopXHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IHRyYWNlW2tdIF4gc3dhcDtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB2ID0gdHJhY2Vba107XHJcblxyXG4gICAgICAgICAgICAgICAgaW50IHEgPSBfbGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHEgPiAwICYmIF90cmFjZVtxIC0gMV0gPiB2KVxyXG4gICAgICAgICAgICAgICAgICAgIHEtLTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocSA8IF9sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuQ29weShfdHJhY2UsIHEgPDwgMywgX3RyYWNlLCAocSArIDEpIDw8IDMsIChfbGVuZ3RoIC0gcSkgPDwgMyk7XHJcbiAgICAgICAgICAgICAgICBfdHJhY2VbcV0gPSB2O1xyXG5cclxuICAgICAgICAgICAgICAgIF9sZW5ndGgrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgX3N0YWNrQ291bnQgPSBzdGFja0NvdW50O1xyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoaW5nLkhhc2goX3RyYWNlLCBfbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyhvYmogYXMgRmFzdFdvcmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKEZhc3RXb3JkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwgfHwgX2xlbmd0aCAhPSBvdGhlci5fbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBpZiAoX3RyYWNlW2ldICE9IG90aGVyLl90cmFjZVtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQml0TGV2ZWxHZW5lcmF0aW9uO1xyXG51c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlcjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBGYXN0V29yZEdlbmVyYXRvclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PEZhc3RXb3JkPiBHZW5lcmF0ZVdvcmRzKGludCBsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgd29yZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDx1bG9uZ1tdLGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KFRoZUVudW1lcmF0aW9uTWFjaGluZS5FbnVtZXJhdGUoRW51bWVyYWJsZS5SZXBlYXQ8aW50PigxLCBsZW5ndGgpLCAzKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzx1bG9uZ1tdLCBnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPikodHJhY2UgPT4gbmV3IEZhc3RXb3JkKHRyYWNlLCBsZW5ndGgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3b3JkcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgVGhlRW51bWVyYXRpb25NYWNoaW5lXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPHVsb25nW10+IEVudW1lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX3Vsb25nLlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyB1bG9uZ1twb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PHVsb25nPltwb3RTaXplXTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX3Vsb25nLlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdWxvbmcgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyBkYyA9ICh1bG9uZykofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50LCByLCAwLCAwLCBjLCBkYyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTx1bG9uZ1tdPiBFbnVtZXJhdGUoTGlzdDx1bG9uZz4gc2l6ZXMsIHVsb25nW10gYXNzaWdubWVudCwgTGlzdDx1bG9uZz5bXSByLCBpbnQgaSwgdWxvbmcgbGFzdCwgdWxvbmcgY2FyZSwgdWxvbmcgZG9udENhcmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVsb25nIHg7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGcgPSAodWxvbmcpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcSA9ICh1bG9uZykofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gKHVsb25nKSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gKHVsb25nKShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgeTIgPSAodWxvbmcpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSAodWxvbmcpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyB1bG9uZ1thc3NpZ25tZW50Lkxlbmd0aF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gYXNzaWdubWVudENvcHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9ICh1bG9uZykofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGEgaW4gRW51bWVyYXRlKHNpemVzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG51c2luZyBBbGdvcml0aG1zO1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgV29yZEVudW1lcmF0b3JcclxuICAgIHtcclxuICAgICAgICBMaXN0PGNoYXI+IF9hbHBoYWJldDtcclxuXHJcbiAgICAgICAgcHVibGljIFdvcmRFbnVtZXJhdG9yKHBhcmFtcyBjaGFyW10gYWxwaGFiZXQpIDogdGhpcygoKElFbnVtZXJhYmxlPGNoYXI+KWFscGhhYmV0KSkgeyB9XHJcbiAgICAgICAgcHVibGljIFdvcmRFbnVtZXJhdG9yKElFbnVtZXJhYmxlPGNoYXI+IGFscGhhYmV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2FscGhhYmV0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Y2hhcj4oYWxwaGFiZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPHN0cmluZz4gRW51bWVyYXRlV29yZHMoaW50IGxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGNoYXI+LHN0cmluZz4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Y2hhcj4oRW51bWVyYWJsZS5SZXBlYXQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGNoYXI+PihfYWxwaGFiZXQsIGxlbmd0aCkpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Y2hhcj4sIHN0cmluZz4pKGNoYXJzID0+IG5ldyBzdHJpbmcoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0FycmF5PGNoYXI+KGNoYXJzKSkpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQXNzaWdubWVudHNfdWxvbmdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8dWxvbmdbXT4gR2VuZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUsIGludCBjb3VudEVzdGltYXRlID0gMjA0OClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX3Vsb25nLlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50cyA9IG5ldyBMaXN0PHVsb25nW10+KGNvdW50RXN0aW1hdGUpO1xyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyB1bG9uZ1twb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8dWxvbmc+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX3Vsb25nLlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB1bG9uZyBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgdWxvbmcgZGMgPSAodWxvbmcpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ25tZW50cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEdlbmVyYXRlKExpc3Q8dWxvbmc+IHNpemVzLCBMaXN0PHVsb25nW10+IGFzc2lnbm1lbnRzLCB1bG9uZ1tdIGFzc2lnbm1lbnQsIExpc3Q8dWxvbmc+W10gciwgaW50IGksIHVsb25nIGxhc3QsIHVsb25nIGNhcmUsIHVsb25nIGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKHVsb25nKShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9ICh1bG9uZykofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKHVsb25nKSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAodWxvbmcpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSAodWxvbmcpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9ICh1bG9uZykoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IHVsb25nW2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudHMuQWRkKGFzc2lnbm1lbnRDb3B5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodWxvbmcpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnRzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPHVsb25nW10+IEVudW1lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX3Vsb25nLlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IHVsb25nW3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDx1bG9uZz5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfdWxvbmcuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIHVsb25nIGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICB1bG9uZyBkYyA9ICh1bG9uZykofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTx1bG9uZ1tdPiBFbnVtZXJhdGUoTGlzdDx1bG9uZz4gc2l6ZXMsIHVsb25nW10gYXNzaWdubWVudCwgTGlzdDx1bG9uZz5bXSByLCBpbnQgaSwgdWxvbmcgbGFzdCwgdWxvbmcgY2FyZSwgdWxvbmcgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAodWxvbmcpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKHVsb25nKSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAodWxvbmcpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9ICh1bG9uZykoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKHVsb25nKShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAodWxvbmcpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyB1bG9uZ1thc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0eWllbGQgcmV0dXJuIGFzc2lnbm1lbnRDb3B5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9ICh1bG9uZykofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciBhIGluIEVudW1lcmF0ZShzaXplcywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKSlcclxuXHRcdFx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQXNzaWdubWVudHNfbG9uZ1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxsb25nW10+IEdlbmVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplLCBpbnQgY291bnRFc3RpbWF0ZSA9IDIwNDgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc19sb25nLlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50cyA9IG5ldyBMaXN0PGxvbmdbXT4oY291bnRFc3RpbWF0ZSk7XHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IGxvbmdbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PGxvbmc+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX2xvbmcuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIGxvbmcgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIGxvbmcgZGMgPSAobG9uZykofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICBHZW5lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbm1lbnRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgR2VuZXJhdGUoTGlzdDxsb25nPiBzaXplcywgTGlzdDxsb25nW10+IGFzc2lnbm1lbnRzLCBsb25nW10gYXNzaWdubWVudCwgTGlzdDxsb25nPltdIHIsIGludCBpLCBsb25nIGxhc3QsIGxvbmcgY2FyZSwgbG9uZyBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKGxvbmcpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKGxvbmcpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9IChsb25nKSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKGxvbmcpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IChsb25nKShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKGxvbmcpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAobG9uZykoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKGxvbmcpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyBsb25nW2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudHMuQWRkKGFzc2lnbm1lbnRDb3B5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IChsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9IChsb25nKSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlKHNpemVzLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IChsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGxvbmdbXT4gRW51bWVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfbG9uZy5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyBsb25nW3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDxsb25nPltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc19sb25nLlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICBsb25nIGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICBsb25nIGRjID0gKGxvbmcpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8bG9uZ1tdPiBFbnVtZXJhdGUoTGlzdDxsb25nPiBzaXplcywgbG9uZ1tdIGFzc2lnbm1lbnQsIExpc3Q8bG9uZz5bXSByLCBpbnQgaSwgbG9uZyBsYXN0LCBsb25nIGNhcmUsIGxvbmcgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9IChsb25nKShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9IChsb25nKSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAobG9uZykoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IChsb25nKSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAobG9uZykoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKGxvbmcpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAobG9uZykoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKGxvbmcpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyBsb25nW2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYXNzaWdubWVudENvcHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAobG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAobG9uZykofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciBhIGluIEVudW1lcmF0ZShzaXplcywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKSlcclxuXHRcdFx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IChsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBBc3NpZ25tZW50c191aW50XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PHVpbnRbXT4gR2VuZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUsIGludCBjb3VudEVzdGltYXRlID0gMjA0OClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX3VpbnQuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRzID0gbmV3IExpc3Q8dWludFtdPihjb3VudEVzdGltYXRlKTtcclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgdWludFtwb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8dWludD5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfdWludC5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgdWludCBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgdWludCBkYyA9ICh1aW50KSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIEdlbmVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnRzLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXNzaWdubWVudHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBHZW5lcmF0ZShMaXN0PHVpbnQ+IHNpemVzLCBMaXN0PHVpbnRbXT4gYXNzaWdubWVudHMsIHVpbnRbXSBhc3NpZ25tZW50LCBMaXN0PHVpbnQ+W10gciwgaW50IGksIHVpbnQgbGFzdCwgdWludCBjYXJlLCB1aW50IGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWludCB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAodWludCkoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAodWludCkofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKHVpbnQpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAodWludCkofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKHVpbnQpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSAodWludCkoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAodWludCkoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IHVpbnRbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50cy5BZGQoYXNzaWdubWVudENvcHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVpbnQpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKHVpbnQpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnRzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVpbnQpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8dWludFtdPiBFbnVtZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191aW50LlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IHVpbnRbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PHVpbnQ+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX3VpbnQuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIHVpbnQgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIHVpbnQgZGMgPSAodWludCkofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTx1aW50W10+IEVudW1lcmF0ZShMaXN0PHVpbnQ+IHNpemVzLCB1aW50W10gYXNzaWdubWVudCwgTGlzdDx1aW50PltdIHIsIGludCBpLCB1aW50IGxhc3QsIHVpbnQgY2FyZSwgdWludCBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVpbnQgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKHVpbnQpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKHVpbnQpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKHVpbnQpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9ICh1aW50KShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSAodWludCkoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAodWludCkoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IHVpbnRbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHRcdHlpZWxkIHJldHVybiBhc3NpZ25tZW50Q29weTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9ICh1aW50KSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGEgaW4gRW51bWVyYXRlKHNpemVzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpKVxyXG5cdFx0XHRcdFx0XHRcdHlpZWxkIHJldHVybiBhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVpbnQpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEFzc2lnbm1lbnRzX3VzaG9ydFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDx1c2hvcnRbXT4gR2VuZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUsIGludCBjb3VudEVzdGltYXRlID0gMjA0OClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX3VzaG9ydC5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudHMgPSBuZXcgTGlzdDx1c2hvcnRbXT4oY291bnRFc3RpbWF0ZSk7XHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IHVzaG9ydFtwb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8dXNob3J0Pltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc191c2hvcnQuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIHVzaG9ydCBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgdXNob3J0IGRjID0gKHVzaG9ydCkofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICBHZW5lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbm1lbnRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgR2VuZXJhdGUoTGlzdDx1c2hvcnQ+IHNpemVzLCBMaXN0PHVzaG9ydFtdPiBhc3NpZ25tZW50cywgdXNob3J0W10gYXNzaWdubWVudCwgTGlzdDx1c2hvcnQ+W10gciwgaW50IGksIHVzaG9ydCBsYXN0LCB1c2hvcnQgY2FyZSwgdXNob3J0IGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdXNob3J0IHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9ICh1c2hvcnQpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKHVzaG9ydCkofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICh1c2hvcnQpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9ICh1c2hvcnQpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSAodXNob3J0KShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKHVzaG9ydCkoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IHVzaG9ydFthc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRzLkFkZChhc3NpZ25tZW50Q29weSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodXNob3J0KSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9ICh1c2hvcnQpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnRzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTx1c2hvcnRbXT4gRW51bWVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfdXNob3J0LlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IHVzaG9ydFtwb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8dXNob3J0Pltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc191c2hvcnQuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIHVzaG9ydCBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgdXNob3J0IGRjID0gKHVzaG9ydCkofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTx1c2hvcnRbXT4gRW51bWVyYXRlKExpc3Q8dXNob3J0PiBzaXplcywgdXNob3J0W10gYXNzaWdubWVudCwgTGlzdDx1c2hvcnQ+W10gciwgaW50IGksIHVzaG9ydCBsYXN0LCB1c2hvcnQgY2FyZSwgdXNob3J0IGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdXNob3J0IHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9ICh1c2hvcnQpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKHVzaG9ydCkofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICh1c2hvcnQpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9ICh1c2hvcnQpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9ICh1c2hvcnQpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAodXNob3J0KSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAodXNob3J0KShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgdXNob3J0W2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYXNzaWdubWVudENvcHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodXNob3J0KSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9ICh1c2hvcnQpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgYSBpbiBFbnVtZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYykpXHJcblx0XHRcdFx0XHRcdFx0eWllbGQgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodXNob3J0KSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBBc3NpZ25tZW50c19ieXRlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGJ5dGVbXT4gR2VuZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUsIGludCBjb3VudEVzdGltYXRlID0gMjA0OClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX2J5dGUuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRzID0gbmV3IExpc3Q8Ynl0ZVtdPihjb3VudEVzdGltYXRlKTtcclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgYnl0ZVtwb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8Ynl0ZT5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfYnl0ZS5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgYnl0ZSBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgYnl0ZSBkYyA9IChieXRlKSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIEdlbmVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnRzLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXNzaWdubWVudHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBHZW5lcmF0ZShMaXN0PGJ5dGU+IHNpemVzLCBMaXN0PGJ5dGVbXT4gYXNzaWdubWVudHMsIGJ5dGVbXSBhc3NpZ25tZW50LCBMaXN0PGJ5dGU+W10gciwgaW50IGksIGJ5dGUgbGFzdCwgYnl0ZSBjYXJlLCBieXRlIGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYnl0ZSB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAoYnl0ZSkoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAoYnl0ZSkofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKGJ5dGUpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAoYnl0ZSkofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKGJ5dGUpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSAoYnl0ZSkoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9IChieXRlKSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAoYnl0ZSkoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IGJ5dGVbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50cy5BZGQoYXNzaWdubWVudENvcHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKGJ5dGUpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKGJ5dGUpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnRzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKGJ5dGUpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8Ynl0ZVtdPiBFbnVtZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc19ieXRlLlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IGJ5dGVbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PGJ5dGU+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX2J5dGUuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIGJ5dGUgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIGJ5dGUgZGMgPSAoYnl0ZSkofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxieXRlW10+IEVudW1lcmF0ZShMaXN0PGJ5dGU+IHNpemVzLCBieXRlW10gYXNzaWdubWVudCwgTGlzdDxieXRlPltdIHIsIGludCBpLCBieXRlIGxhc3QsIGJ5dGUgY2FyZSwgYnl0ZSBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJ5dGUgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKGJ5dGUpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKGJ5dGUpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9IChieXRlKSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKGJ5dGUpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IChieXRlKShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSAoYnl0ZSkoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9IChieXRlKSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAoYnl0ZSkoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IGJ5dGVbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHRcdHlpZWxkIHJldHVybiBhc3NpZ25tZW50Q29weTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IChieXRlKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9IChieXRlKSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGEgaW4gRW51bWVyYXRlKHNpemVzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpKVxyXG5cdFx0XHRcdFx0XHRcdHlpZWxkIHJldHVybiBhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKGJ5dGUpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJpdE9wZXJhdGlvbnNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVsb25nIFRvX3Vsb25nKHRoaXMgSUVudW1lcmFibGU8aW50PiBiaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgeCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiaXQgaW4gYml0cylcclxuICAgICAgICAgICAgICAgIHggfD0gMVVMIDw8IGJpdDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1c2hvcnQgVG9fdXNob3J0KHRoaXMgSUVudW1lcmFibGU8aW50PiBiaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdXNob3J0IHggPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIGJpdHMpXHJcbiAgICAgICAgICAgICAgICB4IHw9ICh1c2hvcnQpKDEgPDwgYml0KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBieXRlIFRvX2J5dGUodGhpcyBJRW51bWVyYWJsZTxpbnQ+IGJpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBieXRlIHggPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIGJpdHMpXHJcbiAgICAgICAgICAgICAgICB4IHw9IChieXRlKSgxIDw8IGJpdCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyB1bG9uZyBSaWdodEZpbGxUb01TQih0aGlzIHVsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMTtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDI7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiA0O1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gODtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDE2O1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMzI7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1c2hvcnQgUmlnaHRGaWxsVG9NU0IodGhpcyB1c2hvcnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHggfD0gKHVzaG9ydCkoeCA+PiAxKTtcclxuICAgICAgICAgICAgeCB8PSAodXNob3J0KSh4ID4+IDIpO1xyXG4gICAgICAgICAgICB4IHw9ICh1c2hvcnQpKHggPj4gNCk7XHJcbiAgICAgICAgICAgIHggfD0gKHVzaG9ydCkoeCA+PiA4KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJ5dGUgUmlnaHRGaWxsVG9NU0IodGhpcyBieXRlIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB4IHw9IChieXRlKSh4ID4+IDEpO1xyXG4gICAgICAgICAgICB4IHw9IChieXRlKSh4ID4+IDIpO1xyXG4gICAgICAgICAgICB4IHw9IChieXRlKSh4ID4+IDQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cdH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJpdFVzYWdlX3VpbnRcclxuICAgIHtcclxuICAgICAgICBjb25zdCB1aW50IERlQnJ1aWpuTXVsdGlwbGllciA9IDB4MDc3Q0I1MzFVO1xyXG4gICAgICAgIHN0YXRpYyBpbnRbXSBEZUJydWlqbkxvb2t1cCA9IG5ldyBpbnRbMzJdIHsgMCwgMSwgMjgsIDIsIDI5LCAxNCwgMjQsIDMsIDMwLCAyMiwgMjAsIDE1LCAyNSwgMTcsIDQsIDgsIDMxLCAyNywgMTMsIDIzLCAyMSwgMTksIDE2LCA3LCAyNiwgMTIsIDE4LCA2LCAxMSwgNSwgMTAsIDkgfTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgRXh0cmFjdCh0aGlzIHVpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFsoeCAqIERlQnJ1aWpuTXVsdGlwbGllcikgPj4gMjddO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTGVhc3RTaWduaWZpY2FudEJpdCh0aGlzIHVpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFsoKHggJiAofnggKyAxKSkgKiBEZUJydWlqbk11bHRpcGxpZXIpID4+IDI3XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgdWludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSB4ICYgKH54ICsgMSk7XHJcbiAgICAgICAgICAgIHggXj0gbTtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwWyhtICogRGVCcnVpam5NdWx0aXBsaWVyKSA+PiAyN107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBQb3B1bGF0aW9uQ291bnQodGhpcyB1aW50IGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgcSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChiID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcSsrO1xyXG4gICAgICAgICAgICAgICAgYiAmPSBiIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gVG9TZXQodGhpcyB1aW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb25CaXRzID0gbmV3IExpc3Q8aW50PigxMCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICBvbkJpdHMuQWRkKEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9uQml0cztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1aW50IFJpZ2h0RmlsbFRvTVNCKHRoaXMgdWludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDE7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAyO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gNDtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDg7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxNjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVpbnQgVG9fdWludCh0aGlzIElFbnVtZXJhYmxlPGludD4gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVpbnQgeCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiaXQgaW4gYml0cylcclxuICAgICAgICAgICAgICAgIHggfD0gMVUgPDwgYml0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVpbnQgT3IodGhpcyB1aW50W10gY29sb3JHcmFwaCwgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwVTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IG9mZnNldDsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgfD0gY29sb3JHcmFwaFtpXTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBUcnVlRm9yQWxsQml0SW5kaWNlcyh0aGlzIHVpbnQgeCwgRnVuYzxpbnQsIGJvb2w+IHByZWRpY2F0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghcHJlZGljYXRlKEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQml0VXNhZ2VfbG9uZ1xyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IFVJbnQ2NCBEZUJydWlqbk11bHRpcGxpZXIgPSAweDA3RURENUU1OUE0RTI4QzI7XHJcbiAgICAgICAgc3RhdGljIGludFtdIERlQnJ1aWpuTG9va3VwID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNjMsICAwLCA1OCwgIDEsIDU5LCA0NywgNTMsICAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNjAsIDM5LCA0OCwgMjcsIDU0LCAzMywgNDIsICAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNjEsIDUxLCAzNywgNDAsIDQ5LCAxOCwgMjgsIDIwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNTUsIDMwLCAzNCwgMTEsIDQzLCAxNCwgMjIsICA0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNjIsIDU3LCA0NiwgNTIsIDM4LCAyNiwgMzIsIDQxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNTAsIDM2LCAxNywgMTksIDI5LCAxMCwgMTMsIDIxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNTYsIDQ1LCAyNSwgMzEsIDM1LCAxNiwgIDksIDEyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNDQsIDI0LCAxNSwgIDgsIDIzLCAgNywgIDYsICA1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEV4dHJhY3QodGhpcyBsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbKChVSW50NjQpeCAqIERlQnJ1aWpuTXVsdGlwbGllcikgPj4gNThdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTGVhc3RTaWduaWZpY2FudEJpdCh0aGlzIGxvbmcgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFt1bmNoZWNrZWQoKFVJbnQ2NCkoeCAmIC14KSAqIERlQnJ1aWpuTXVsdGlwbGllciA+PiA1OCldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiBsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IHggJiAteDtcclxuICAgICAgICAgICAgeCBePSBtO1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbKChVSW50NjQpbSAqIERlQnJ1aWpuTXVsdGlwbGllcikgPj4gNThdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgUG9wdWxhdGlvbkNvdW50KHRoaXMgbG9uZyBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHEgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoYiA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHErKztcclxuICAgICAgICAgICAgICAgIGIgJj0gYiAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBQb3B1bGF0aW9uQ291bnREZW5zZSh0aGlzIGxvbmcgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHggPSB4IC0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NTU1NTU1NTU1TCk7XHJcbiAgICAgICAgICAgIHggPSAoeCAmIDB4MzMzMzMzMzMzMzMzMzMzM0wpICsgKCh4ID4+IDIpICYgMHgzMzMzMzMzMzMzMzMzMzMzTCk7XHJcbiAgICAgICAgICAgIHggPSAoeCArICh4ID4+IDQpKSAmIDB4MGYwZjBmMGYwZjBmMGYwZkw7XHJcbiAgICAgICAgICAgIHggPSAoeCAqIDB4MDEwMTAxMDEwMTAxMDEwMUwpID4+IDU2O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpeDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IFRvU2V0KGxvbmcgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvbkJpdHMgPSBuZXcgTGlzdDxpbnQ+KDEwKTtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAgICAgIG9uQml0cy5BZGQoR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb25CaXRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgUmlnaHRGaWxsVG9NU0IodGhpcyBsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMTtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDI7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiA0O1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gODtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDE2O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBUb19sb25nKHRoaXMgSUVudW1lcmFibGU8aW50PiBiaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyB4ID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBiaXRzKVxyXG4gICAgICAgICAgICAgICAgeCB8PSAxTCA8PCBiaXQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBPcih0aGlzIGxvbmdbXSBjb2xvckdyYXBoLCBpbnQgb2Zmc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IDBMO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gb2Zmc2V0OyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHJlc3VsdCB8PSBjb2xvckdyYXBoW2ldO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFRydWVGb3JBbGxCaXRJbmRpY2VzKHRoaXMgbG9uZyB4LCBGdW5jPGludCwgYm9vbD4gcHJlZGljYXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVkaWNhdGUoR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRWZWN0b3JzX3Vsb25nXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gRnJvbUJpdFZlY3Rvcih0aGlzIExpc3Q8dWxvbmc+IG4pIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBuZXcgTGlzdDxpbnQ+KDY0KTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA2NDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9ICh1bG9uZykoMVVMIDw8IGkpO1xyXG4gICAgICAgICAgICAgICAgaW50IG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChiICYgbltqXSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSArPSAxIDw8IGo7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdi5BZGQobSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PHVsb25nPiBUb0JpdFZlY3RvcihJRW51bWVyYWJsZTxpbnQ+IHcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4odyk7XHJcbiAgICAgICAgICAgIHZhciBuID0gbmV3IExpc3Q8dWxvbmc+KCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyBtID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciB6ZXJvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2W2ldICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHplcm8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2W2ldICYgMSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSB8PSAodWxvbmcpKDFVTCA8PCBpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdltpXSA+Pj0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBuLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoemVybylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgSW5jcmVtZW50KHRoaXMgTGlzdDx1bG9uZz4gbiwgdWxvbmcgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKHVsb25nKShtICYgbltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAodWxvbmcpKG0gXiBuW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtID0gdDE7XHJcbiAgICAgICAgICAgICAgICBuW2ldID0gdDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRGVjcmVtZW50KHRoaXMgTGlzdDx1bG9uZz4gbiwgdWxvbmcgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKHVsb25nKShtICYgfm5baV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gKHVsb25nKShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1bG9uZyBaZXJvZXModGhpcyBMaXN0PHVsb25nPiBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgbSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbSB8PSBuW2ldO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICh1bG9uZyl+bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWxvbmcgR3JlYXRlclRoYW4odGhpcyBMaXN0PHVsb25nPiBuLCBMaXN0PHVsb25nPiBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgYSA9IDA7XHJcbiAgICAgICAgICAgIHVsb25nIGIgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gTWF0aC5NYXgobi5Db3VudCwgay5Db3VudCkgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gay5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBhIHw9IG5baV07XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpID49IG4uQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSBrW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGEgfD0gKHVsb25nKSh+YiAmIG5baV0gJiB+a1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSAodWxvbmcpKH5hICYgfm5baV0gJiBrW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuICh1bG9uZykoYSAmIH5iKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJpdFZlY3RvcnNfbG9uZ1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IEZyb21CaXRWZWN0b3IodGhpcyBMaXN0PGxvbmc+IG4pIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBuZXcgTGlzdDxpbnQ+KDY0KTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA2NDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IChsb25nKSgxTCA8PCBpKTtcclxuICAgICAgICAgICAgICAgIGludCBtID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbi5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYiAmIG5bal0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gMSA8PCBqO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHYuQWRkKG0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxsb25nPiBUb0JpdFZlY3RvcihJRW51bWVyYWJsZTxpbnQ+IHcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4odyk7XHJcbiAgICAgICAgICAgIHZhciBuID0gbmV3IExpc3Q8bG9uZz4oKTtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvbmcgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgemVybyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHYuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodltpXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB6ZXJvID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgodltpXSAmIDEpICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gfD0gKGxvbmcpKDFMIDw8IGkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2W2ldID4+PSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG4uQWRkKG0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh6ZXJvKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBJbmNyZW1lbnQodGhpcyBMaXN0PGxvbmc+IG4sIGxvbmcgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKGxvbmcpKG0gJiBuW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9IChsb25nKShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERlY3JlbWVudCh0aGlzIExpc3Q8bG9uZz4gbiwgbG9uZyBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDEgPSAobG9uZykobSAmIH5uW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9IChsb25nKShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIFplcm9lcyh0aGlzIExpc3Q8bG9uZz4gbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgbSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbSB8PSBuW2ldO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChsb25nKX5tO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIEdyZWF0ZXJUaGFuKHRoaXMgTGlzdDxsb25nPiBuLCBMaXN0PGxvbmc+IGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIGEgPSAwO1xyXG4gICAgICAgICAgICBsb25nIGIgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gTWF0aC5NYXgobi5Db3VudCwgay5Db3VudCkgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gay5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBhIHw9IG5baV07XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpID49IG4uQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSBrW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGEgfD0gKGxvbmcpKH5iICYgbltpXSAmIH5rW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBiIHw9IChsb25nKSh+YSAmIH5uW2ldICYga1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAobG9uZykoYSAmIH5iKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJpdFZlY3RvcnNfdWludFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IEZyb21CaXRWZWN0b3IodGhpcyBMaXN0PHVpbnQ+IG4pIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBuZXcgTGlzdDxpbnQ+KDMyKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAzMjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9ICh1aW50KSgxVSA8PCBpKTtcclxuICAgICAgICAgICAgICAgIGludCBtID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbi5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYiAmIG5bal0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gMSA8PCBqO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHYuQWRkKG0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDx1aW50PiBUb0JpdFZlY3RvcihJRW51bWVyYWJsZTxpbnQ+IHcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4odyk7XHJcbiAgICAgICAgICAgIHZhciBuID0gbmV3IExpc3Q8dWludD4oKTtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVpbnQgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgemVybyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHYuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodltpXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB6ZXJvID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgodltpXSAmIDEpICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gfD0gKHVpbnQpKDFVIDw8IGkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2W2ldID4+PSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG4uQWRkKG0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh6ZXJvKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBJbmNyZW1lbnQodGhpcyBMaXN0PHVpbnQ+IG4sIHVpbnQgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKHVpbnQpKG0gJiBuW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9ICh1aW50KShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERlY3JlbWVudCh0aGlzIExpc3Q8dWludD4gbiwgdWludCBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDEgPSAodWludCkobSAmIH5uW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9ICh1aW50KShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1aW50IFplcm9lcyh0aGlzIExpc3Q8dWludD4gbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVpbnQgbSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbSB8PSBuW2ldO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICh1aW50KX5tO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1aW50IEdyZWF0ZXJUaGFuKHRoaXMgTGlzdDx1aW50PiBuLCBMaXN0PHVpbnQ+IGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IGEgPSAwO1xyXG4gICAgICAgICAgICB1aW50IGIgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gTWF0aC5NYXgobi5Db3VudCwgay5Db3VudCkgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gay5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBhIHw9IG5baV07XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpID49IG4uQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSBrW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGEgfD0gKHVpbnQpKH5iICYgbltpXSAmIH5rW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBiIHw9ICh1aW50KSh+YSAmIH5uW2ldICYga1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodWludCkoYSAmIH5iKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJpdFZlY3RvcnNfdXNob3J0XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gRnJvbUJpdFZlY3Rvcih0aGlzIExpc3Q8dXNob3J0PiBuKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gbmV3IExpc3Q8aW50PigxNik7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMTY7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSAodXNob3J0KSgxIDw8IGkpO1xyXG4gICAgICAgICAgICAgICAgaW50IG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChiICYgbltqXSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSArPSAxIDw8IGo7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdi5BZGQobSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PHVzaG9ydD4gVG9CaXRWZWN0b3IoSUVudW1lcmFibGU8aW50PiB3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHcpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IG5ldyBMaXN0PHVzaG9ydD4oKTtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVzaG9ydCBtID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciB6ZXJvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2W2ldICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHplcm8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2W2ldICYgMSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSB8PSAodXNob3J0KSgxIDw8IGkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2W2ldID4+PSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG4uQWRkKG0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh6ZXJvKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBJbmNyZW1lbnQodGhpcyBMaXN0PHVzaG9ydD4gbiwgdXNob3J0IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9ICh1c2hvcnQpKG0gJiBuW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9ICh1c2hvcnQpKG0gXiBuW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtID0gdDE7XHJcbiAgICAgICAgICAgICAgICBuW2ldID0gdDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRGVjcmVtZW50KHRoaXMgTGlzdDx1c2hvcnQ+IG4sIHVzaG9ydCBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDEgPSAodXNob3J0KShtICYgfm5baV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gKHVzaG9ydCkobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdXNob3J0IFplcm9lcyh0aGlzIExpc3Q8dXNob3J0PiBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdXNob3J0IG0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIG0gfD0gbltpXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodXNob3J0KX5tO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1c2hvcnQgR3JlYXRlclRoYW4odGhpcyBMaXN0PHVzaG9ydD4gbiwgTGlzdDx1c2hvcnQ+IGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1c2hvcnQgYSA9IDA7XHJcbiAgICAgICAgICAgIHVzaG9ydCBiID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IE1hdGguTWF4KG4uQ291bnQsIGsuQ291bnQpIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID49IGsuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSBuW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA+PSBuLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0ga1tpXTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhIHw9ICh1c2hvcnQpKH5iICYgbltpXSAmIH5rW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBiIHw9ICh1c2hvcnQpKH5hICYgfm5baV0gJiBrW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuICh1c2hvcnQpKGEgJiB+Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRWZWN0b3JzX2J5dGVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBGcm9tQml0VmVjdG9yKHRoaXMgTGlzdDxieXRlPiBuKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gbmV3IExpc3Q8aW50Pig4KTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA4OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gKGJ5dGUpKDEgPDwgaSk7XHJcbiAgICAgICAgICAgICAgICBpbnQgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG4uQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGIgJiBuW2pdKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtICs9IDEgPDwgajtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2LkFkZChtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8Ynl0ZT4gVG9CaXRWZWN0b3IoSUVudW1lcmFibGU8aW50PiB3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHcpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IG5ldyBMaXN0PGJ5dGU+KCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBieXRlIG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHplcm8gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZbaV0gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgemVybyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHZbaV0gJiAxKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtIHw9IChieXRlKSgxIDw8IGkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2W2ldID4+PSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG4uQWRkKG0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh6ZXJvKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBJbmNyZW1lbnQodGhpcyBMaXN0PGJ5dGU+IG4sIGJ5dGUgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKGJ5dGUpKG0gJiBuW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9IChieXRlKShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERlY3JlbWVudCh0aGlzIExpc3Q8Ynl0ZT4gbiwgYnl0ZSBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDEgPSAoYnl0ZSkobSAmIH5uW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9IChieXRlKShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBieXRlIFplcm9lcyh0aGlzIExpc3Q8Ynl0ZT4gbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJ5dGUgbSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbSB8PSBuW2ldO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChieXRlKX5tO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBieXRlIEdyZWF0ZXJUaGFuKHRoaXMgTGlzdDxieXRlPiBuLCBMaXN0PGJ5dGU+IGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBieXRlIGEgPSAwO1xyXG4gICAgICAgICAgICBieXRlIGIgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gTWF0aC5NYXgobi5Db3VudCwgay5Db3VudCkgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gay5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBhIHw9IG5baV07XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpID49IG4uQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSBrW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGEgfD0gKGJ5dGUpKH5iICYgbltpXSAmIH5rW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBiIHw9IChieXRlKSh+YSAmIH5uW2ldICYga1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoYnl0ZSkoYSAmIH5iKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZztcclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBHcmFwaENob29zYWJpbGl0eV91aW50XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzRkNob29zYWJsZSh0aGlzIElHcmFwaF91aW50IGdyYXBoLCBGdW5jPGludCwgaW50PiBmLCBvdXQgTGlzdDxMaXN0PGludD4+IGJhZEFzc2lnbm1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIG5vZGVzVmlzaXRlZCwgY2FjaGVIaXRzO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JhcGguSXNGQ2hvb3NhYmxlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PilmLCBvdXQgYmFkQXNzaWdubWVudCwgb3V0IG5vZGVzVmlzaXRlZCwgb3V0IGNhY2hlSGl0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0ZDaG9vc2FibGUodGhpcyBJR3JhcGhfdWludCBncmFwaCwgRnVuYzxpbnQsIGludD4gZiwgb3V0IExpc3Q8TGlzdDxpbnQ+PiBiYWRBc3NpZ25tZW50LCBvdXQgbG9uZyBub2Rlc1Zpc2l0ZWQsIG91dCBsb25nIGNhY2hlSGl0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhZEFzc2lnbm1lbnQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgbm9kZXNWaXNpdGVkID0gMDtcclxuICAgICAgICAgICAgY2FjaGVIaXRzID0gMDtcclxuICAgICAgICAgICAgdmFyIGxpdmVWZXJ0ZXhCaXRzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBncmFwaC5OKS5Ub191aW50KCk7XHJcbiAgICAgICAgICAgIHZhciBzaXplcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KGdyYXBoLlZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBmKHYpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBtYXhMaXN0U2l6ZSA9IHNpemVzLk1heCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChpbnQgcG90U2l6ZSA9IG1heExpc3RTaXplOyBwb3RTaXplIDwgZ3JhcGguTjsgcG90U2l6ZSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL3ZhciBjYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PEJpdExldmVsR2VuZXJhdGlvbi5IYXNoZWRBc3NpZ25tZW50X3VpbnQsIGJvb2w+KCk7XHJcbiAgICAgICAgICAgICAgICBEaWN0aW9uYXJ5PEJpdExldmVsR2VuZXJhdGlvbi5IYXNoZWRBc3NpZ25tZW50X3VpbnQsIGJvb2w+IGNhY2hlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JHcmFwaCBpbiBCaXRMZXZlbEdlbmVyYXRpb24uQXNzaWdubWVudHNfdWludC5FbnVtZXJhdGUoc2l6ZXMsIHBvdFNpemUpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3RTaXplID4gbWF4TGlzdFNpemUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1aW50IHh4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4eCB8PSBjb2xvckdyYXBoW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4eC5Qb3B1bGF0aW9uQ291bnQoKSA8PSBpICsgMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGNvbG9yR3JhcGguTGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChjb2xvckdyYXBoW2ldICYgY29sb3JHcmFwaFtqXSkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yIGluIGNvbG9yR3JhcGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JhcGguSXNJbmRlcGVuZGVudChjb2xvcikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFncmFwaC5Jc0Nob29zYWJsZShjb2xvckdyYXBoLCBsaXZlVmVydGV4Qml0cywgMCwgY2FjaGUsIHJlZiBub2Rlc1Zpc2l0ZWQsIHJlZiBjYWNoZUhpdHMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFkQXNzaWdubWVudCA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gZ3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBiaXQgPSAxVSA8PCB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoYml0ICYgY29sb3JHcmFwaFtpXSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5BZGQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFkQXNzaWdubWVudC5BZGQobGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2tpcDogO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0Nob29zYWJsZSh0aGlzIElHcmFwaF91aW50IGdyYXBoLCB1aW50W10gY29sb3JHcmFwaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgbm9kZXNWaXNpdGVkLCBjYWNoZUhpdHM7XHJcbiAgICAgICAgICAgIHJldHVybiBncmFwaC5Jc0Nob29zYWJsZShjb2xvckdyYXBoLCBvdXQgbm9kZXNWaXNpdGVkLCBvdXQgY2FjaGVIaXRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0Nob29zYWJsZSh0aGlzIElHcmFwaF91aW50IGdyYXBoLCB1aW50W10gY29sb3JHcmFwaCwgb3V0IGxvbmcgbm9kZXNWaXNpdGVkLCBvdXQgbG9uZyBjYWNoZUhpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBub2Rlc1Zpc2l0ZWQgPSAwO1xyXG4gICAgICAgICAgICBjYWNoZUhpdHMgPSAwO1xyXG4gICAgICAgICAgICAvL3ZhciBjYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PEJpdExldmVsR2VuZXJhdGlvbi5IYXNoZWRBc3NpZ25tZW50X3VpbnQsIGJvb2w+KCk7XHJcbiAgICAgICAgICAgIERpY3Rpb25hcnk8Qml0TGV2ZWxHZW5lcmF0aW9uLkhhc2hlZEFzc2lnbm1lbnRfdWludCwgYm9vbD4gY2FjaGUgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGdyYXBoLklzQ2hvb3NhYmxlKGNvbG9yR3JhcGgsIEVudW1lcmFibGUuUmFuZ2UoMCwgZ3JhcGguTikuVG9fdWludCgpLCAwLCBjYWNoZSwgcmVmIG5vZGVzVmlzaXRlZCwgcmVmIGNhY2hlSGl0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBJc0Nob29zYWJsZSh0aGlzIElHcmFwaF91aW50IGdyYXBoLCB1aW50W10gY29sb3JHcmFwaCwgdWludCBsaXZlVmVydGV4Qml0cywgaW50IGMsIERpY3Rpb25hcnk8Qml0TGV2ZWxHZW5lcmF0aW9uLkhhc2hlZEFzc2lnbm1lbnRfdWludCwgYm9vbD4gY2FjaGUsIHJlZiBsb25nIG5vZGVzVmlzaXRlZCwgcmVmIGxvbmcgY2FjaGVIaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbm9kZXNWaXNpdGVkKys7XHJcblxyXG4gICAgICAgICAgICBncmFwaC5CZUdyZWVkeShjb2xvckdyYXBoLCByZWYgbGl2ZVZlcnRleEJpdHMsIGMpO1xyXG4gICAgICAgICAgICBpZiAobGl2ZVZlcnRleEJpdHMgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoKGxpdmVWZXJ0ZXhCaXRzICYgfmNvbG9yR3JhcGguT3IoYykpICE9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvL2Jvb2wgY2FjaGVkUmVzdWx0O1xyXG4gICAgICAgICAgICAvL3ZhciBrZXkgPSBuZXcgQml0TGV2ZWxHZW5lcmF0aW9uLkhhc2hlZEFzc2lnbm1lbnRfdWludChjb2xvckdyYXBoLCBjLCBsaXZlVmVydGV4Qml0cyk7XHJcbiAgICAgICAgICAgIC8vaWYgKGNhY2hlLlRyeUdldFZhbHVlKGtleSwgb3V0IGNhY2hlZFJlc3VsdCkpXHJcbiAgICAgICAgICAgIC8ve1xyXG4gICAgICAgICAgICAvLyAgICBjYWNoZUhpdHMrKztcclxuICAgICAgICAgICAgLy8gICAgcmV0dXJuIGNhY2hlZFJlc3VsdDtcclxuICAgICAgICAgICAgLy99XHJcblxyXG4gICAgICAgICAgICB2YXIgY2hvb3NhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBWID0gY29sb3JHcmFwaFtjXSAmIGxpdmVWZXJ0ZXhCaXRzO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgQyBpbiBncmFwaC5NYXhpbWFsSW5kZXBlbmRlbnRTdWJzZXRzKFYpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgbGl2ZVZlcnRleEJpdHMgXiBDLCBjICsgMSwgY2FjaGUsIHJlZiBub2Rlc1Zpc2l0ZWQsIHJlZiBjYWNoZUhpdHMpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNob29zYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vY2FjaGVba2V5XSA9IGNob29zYWJsZTtcclxuICAgICAgICAgICAgcmV0dXJuIGNob29zYWJsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEJlR3JlZWR5KHRoaXMgSUdyYXBoX3VpbnQgZ3JhcGgsIHVpbnRbXSBjb2xvckdyYXBoLCByZWYgdWludCBsaXZlVmVydGV4Qml0cywgaW50IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aGlsZSh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxCaXRzID0gbGl2ZVZlcnRleEJpdHM7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0cyA9IGxpdmVWZXJ0ZXhCaXRzO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gYml0cyAmICh+Yml0cyArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJpdHMgXj0gYml0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IGM7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChiaXQgJiBjb2xvckdyYXBoW2ldKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yQ291bnQgPiBncmFwaC5EZWdyZWVJblNldChiaXQuRXh0cmFjdCgpLCBsaXZlVmVydGV4Qml0cykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpdmVWZXJ0ZXhCaXRzIF49IGJpdDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGl2ZVZlcnRleEJpdHMgPT0gb3JpZ2luYWxCaXRzKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgR3JhcGhDaG9vc2FiaWxpdHlfbG9uZ1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0ZDaG9vc2FibGUodGhpcyBJR3JhcGhfbG9uZyBncmFwaCwgRnVuYzxpbnQsIGludD4gZiwgb3V0IExpc3Q8TGlzdDxpbnQ+PiBiYWRBc3NpZ25tZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFkQXNzaWdubWVudCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGl2ZVZlcnRleEJpdHMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIGdyYXBoLk4pLlRvX2xvbmcoKTtcclxuICAgICAgICAgICAgdmFyIHNpemVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oZ3JhcGguVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IGYodikpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIG1heExpc3RTaXplID0gc2l6ZXMuTWF4KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBwb3RTaXplID0gbWF4TGlzdFNpemU7IHBvdFNpemUgPCBncmFwaC5OOyBwb3RTaXplKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvckdyYXBoIGluIEJpdExldmVsR2VuZXJhdGlvbi5Bc3NpZ25tZW50c19sb25nLkVudW1lcmF0ZShzaXplcywgcG90U2l6ZSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvdFNpemUgPiBtYXhMaXN0U2l6ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4eCA9IDBMO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHh4IHw9IGNvbG9yR3JhcGhbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHh4LlBvcHVsYXRpb25Db3VudCgpIDw9IGkgKyAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgY29sb3JHcmFwaC5MZW5ndGg7IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNvbG9yR3JhcGhbaV0gJiBjb2xvckdyYXBoW2pdKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3IgaW4gY29sb3JHcmFwaClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChncmFwaC5Jc0luZGVwZW5kZW50KGNvbG9yKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFncmFwaC5Jc0Nob29zYWJsZShjb2xvckdyYXBoLCBsaXZlVmVydGV4Qml0cywgMCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWRBc3NpZ25tZW50ID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBncmFwaC5WZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMUwgPDwgdjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGJpdCAmIGNvbG9yR3JhcGhbaV0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuQWRkKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhZEFzc2lnbm1lbnQuQWRkKGxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNraXA6IDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNDaG9vc2FibGUodGhpcyBJR3JhcGhfbG9uZyBncmFwaCwgbG9uZ1tdIGNvbG9yR3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgRW51bWVyYWJsZS5SYW5nZSgwLCBncmFwaC5OKS5Ub19sb25nKCksIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX2xvbmcgZ3JhcGgsIGxvbmdbXSBjb2xvckdyYXBoLCBsb25nIHN1YnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBncmFwaC5Jc0Nob29zYWJsZShjb2xvckdyYXBoLCBzdWJzZXQsIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgSXNDaG9vc2FibGUodGhpcyBJR3JhcGhfbG9uZyBncmFwaCwgbG9uZ1tdIGNvbG9yR3JhcGgsIGxvbmcgbGl2ZVZlcnRleEJpdHMsIGludCBjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ3JhcGguQmVHcmVlZHkoY29sb3JHcmFwaCwgcmVmIGxpdmVWZXJ0ZXhCaXRzLCBjKTtcclxuICAgICAgICAgICAgaWYgKGxpdmVWZXJ0ZXhCaXRzID09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKChsaXZlVmVydGV4Qml0cyAmIH5jb2xvckdyYXBoLk9yKGMpKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNob29zYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgViA9IGNvbG9yR3JhcGhbY10gJiBsaXZlVmVydGV4Qml0cztcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIEMgaW4gZ3JhcGguTWF4aW1hbEluZGVwZW5kZW50U3Vic2V0cyhWKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyYXBoLklzQ2hvb3NhYmxlKGNvbG9yR3JhcGgsIGxpdmVWZXJ0ZXhCaXRzIF4gQywgYyArIDEpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNob29zYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaG9vc2FibGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBCZUdyZWVkeSh0aGlzIElHcmFwaF9sb25nIGdyYXBoLCBsb25nW10gY29sb3JHcmFwaCwgcmVmIGxvbmcgbGl2ZVZlcnRleEJpdHMsIGludCBjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbEJpdHMgPSBsaXZlVmVydGV4Qml0cztcclxuICAgICAgICAgICAgICAgIHZhciBiaXRzID0gbGl2ZVZlcnRleEJpdHM7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoYml0cyAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSBiaXRzICYgLWJpdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgYml0cyBePSBiaXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvckNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gYzsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGJpdCAmIGNvbG9yR3JhcGhbaV0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvckNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3JDb3VudCA+IGdyYXBoLkRlZ3JlZUluU2V0KGJpdC5FeHRyYWN0KCksIGxpdmVWZXJ0ZXhCaXRzKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGl2ZVZlcnRleEJpdHMgXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsaXZlVmVydGV4Qml0cyA9PSBvcmlnaW5hbEJpdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc1N1YnNldFR3b0NvbG9yYWJsZShCaXRHcmFwaF9sb25nIGcsIGxvbmcgc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBuZXcgaW50W2cuTl07XHJcbiAgICAgICAgICAgIHZhciBxID0gbmV3IGludFtnLk5dO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxlZnRvdmVyID0gc2V0O1xyXG4gICAgICAgICAgICB2YXIgcyA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChsZWZ0b3ZlciAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IGxlZnRvdmVyLkxlYXN0U2lnbmlmaWNhbnRCaXQoKTtcclxuICAgICAgICAgICAgICAgIHFbc10gPSByO1xyXG4gICAgICAgICAgICAgICAgY1tyXSA9IDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHM7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHMgPD0gZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IHFbcysrXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGcuTmVpZ2hib3JzSW5TZXQodiwgc2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG4gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSBuICYgLW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gYml0LkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjW3ddID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHFbKytlXSA9IHc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjW3ddID0gMyAtIGNbdl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY1t3XSAhPSAzIC0gY1t2XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuIF49IGJpdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnRvdmVyIF49ICgxTCA8PCB2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIlxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBIYXNoZWRBc3NpZ25tZW50X3Vsb25nXHJcbiAgICB7XHJcbiAgICAgICAgdWxvbmdbXSBfYXNzaWdubWVudDsgXHJcbiAgICAgICAgaW50IF9sZW5ndGg7XHJcblx0XHRpbnQgX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgSGFzaGVkQXNzaWdubWVudF91bG9uZyh1bG9uZ1tdIGFzc2lnbm1lbnQsIGludCBpbmRleCwgdWxvbmcgb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfYXNzaWdubWVudCA9IG5ldyB1bG9uZ1thc3NpZ25tZW50Lkxlbmd0aCAtIGluZGV4XTtcclxuICAgICAgICAgICAgX2xlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gaW5kZXg7IGkgPCBhc3NpZ25tZW50Lkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9ICh1bG9uZykoYXNzaWdubWVudFtpXSAmIG9uKTtcclxuICAgICAgICAgICAgICAgIGlmICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2lnbm1lbnRbX2xlbmd0aF0gPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIF9sZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQXJyYXkuU29ydDx1bG9uZz4oX2Fzc2lnbm1lbnQsIDAsIF9sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgX2hhc2hDb2RlID0gSGFzaChfYXNzaWdubWVudCwgX2xlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgSGFzaCh1bG9uZ1tdIGxpc3QsIGludCBsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyBoYXNoID0gNTM4MTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGhhc2ggPSAodWxvbmcpKGxpc3RbaV0gKyAoaGFzaCA8PCA1KSArIGhhc2gpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpaGFzaDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyhvYmogYXMgSGFzaGVkQXNzaWdubWVudF91bG9uZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoSGFzaGVkQXNzaWdubWVudF91bG9uZyBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsIHx8IF9sZW5ndGggIT0gb3RoZXIuX2xlbmd0aClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaWYgKF9hc3NpZ25tZW50W2ldICE9IG90aGVyLl9hc3NpZ25tZW50W2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBIYXNoZWRBc3NpZ25tZW50X3VpbnRcclxuICAgIHtcclxuICAgICAgICB1aW50W10gX2Fzc2lnbm1lbnQ7IFxyXG4gICAgICAgIGludCBfbGVuZ3RoO1xyXG5cdFx0aW50IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgcHVibGljIEhhc2hlZEFzc2lnbm1lbnRfdWludCh1aW50W10gYXNzaWdubWVudCwgaW50IGluZGV4LCB1aW50IG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2Fzc2lnbm1lbnQgPSBuZXcgdWludFthc3NpZ25tZW50Lkxlbmd0aCAtIGluZGV4XTtcclxuICAgICAgICAgICAgX2xlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gaW5kZXg7IGkgPCBhc3NpZ25tZW50Lkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9ICh1aW50KShhc3NpZ25tZW50W2ldICYgb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHggIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfYXNzaWdubWVudFtfbGVuZ3RoXSA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgX2xlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBBcnJheS5Tb3J0PHVpbnQ+KF9hc3NpZ25tZW50LCAwLCBfbGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IEhhc2goX2Fzc2lnbm1lbnQsIF9sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IEhhc2godWludFtdIGxpc3QsIGludCBsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyBoYXNoID0gNTM4MTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGhhc2ggPSAodWxvbmcpKGxpc3RbaV0gKyAoaGFzaCA8PCA1KSArIGhhc2gpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpaGFzaDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyhvYmogYXMgSGFzaGVkQXNzaWdubWVudF91aW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhIYXNoZWRBc3NpZ25tZW50X3VpbnQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbCB8fCBfbGVuZ3RoICE9IG90aGVyLl9sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGlmIChfYXNzaWdubWVudFtpXSAhPSBvdGhlci5fYXNzaWdubWVudFtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSGFzaGVkQXNzaWdubWVudF91c2hvcnRcclxuICAgIHtcclxuICAgICAgICB1c2hvcnRbXSBfYXNzaWdubWVudDsgXHJcbiAgICAgICAgaW50IF9sZW5ndGg7XHJcblx0XHRpbnQgX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgSGFzaGVkQXNzaWdubWVudF91c2hvcnQodXNob3J0W10gYXNzaWdubWVudCwgaW50IGluZGV4LCB1c2hvcnQgb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfYXNzaWdubWVudCA9IG5ldyB1c2hvcnRbYXNzaWdubWVudC5MZW5ndGggLSBpbmRleF07XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluZGV4OyBpIDwgYXNzaWdubWVudC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAodXNob3J0KShhc3NpZ25tZW50W2ldICYgb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHggIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfYXNzaWdubWVudFtfbGVuZ3RoXSA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgX2xlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBBcnJheS5Tb3J0PHVzaG9ydD4oX2Fzc2lnbm1lbnQsIDAsIF9sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgX2hhc2hDb2RlID0gSGFzaChfYXNzaWdubWVudCwgX2xlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgSGFzaCh1c2hvcnRbXSBsaXN0LCBpbnQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgaGFzaCA9IDUzODE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBoYXNoID0gKHVsb25nKShsaXN0W2ldICsgKGhhc2ggPDwgNSkgKyBoYXNoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KWhhc2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIEhhc2hlZEFzc2lnbm1lbnRfdXNob3J0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhIYXNoZWRBc3NpZ25tZW50X3VzaG9ydCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsIHx8IF9sZW5ndGggIT0gb3RoZXIuX2xlbmd0aClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaWYgKF9hc3NpZ25tZW50W2ldICE9IG90aGVyLl9hc3NpZ25tZW50W2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBIYXNoZWRBc3NpZ25tZW50X2J5dGVcclxuICAgIHtcclxuICAgICAgICBieXRlW10gX2Fzc2lnbm1lbnQ7IFxyXG4gICAgICAgIGludCBfbGVuZ3RoO1xyXG5cdFx0aW50IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgcHVibGljIEhhc2hlZEFzc2lnbm1lbnRfYnl0ZShieXRlW10gYXNzaWdubWVudCwgaW50IGluZGV4LCBieXRlIG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2Fzc2lnbm1lbnQgPSBuZXcgYnl0ZVthc3NpZ25tZW50Lkxlbmd0aCAtIGluZGV4XTtcclxuICAgICAgICAgICAgX2xlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gaW5kZXg7IGkgPCBhc3NpZ25tZW50Lkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IChieXRlKShhc3NpZ25tZW50W2ldICYgb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHggIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfYXNzaWdubWVudFtfbGVuZ3RoXSA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgX2xlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBBcnJheS5Tb3J0PGJ5dGU+KF9hc3NpZ25tZW50LCAwLCBfbGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IEhhc2goX2Fzc2lnbm1lbnQsIF9sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IEhhc2goYnl0ZVtdIGxpc3QsIGludCBsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1bG9uZyBoYXNoID0gNTM4MTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGhhc2ggPSAodWxvbmcpKGxpc3RbaV0gKyAoaGFzaCA8PCA1KSArIGhhc2gpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpaGFzaDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyhvYmogYXMgSGFzaGVkQXNzaWdubWVudF9ieXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhIYXNoZWRBc3NpZ25tZW50X2J5dGUgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbCB8fCBfbGVuZ3RoICE9IG90aGVyLl9sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGlmIChfYXNzaWdubWVudFtpXSAhPSBvdGhlci5fYXNzaWdubWVudFtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIGNsYXNzIE1heGltYWxuZGVwZW5kZW50U2V0U2VhcmNoaW5nXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGxvbmc+IEdlbmVyYXRlTWF4aW1hbEluZGVwZW5kZW50U3Vic2V0cyhCaXRHcmFwaF9sb25nIGcsIGxvbmcgc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBuZXcgaW50WzY0XTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuID0gc2V0LlBvcHVsYXRpb25Db3VudERlbnNlKCk7XHJcbiAgICAgICAgICAgIHZhciBEID0gbmV3IGxvbmdbbl07XHJcblxyXG4gICAgICAgICAgICB2YXIgcSA9IHNldDtcclxuICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdCA9IHEgJiAtcTtcclxuICAgICAgICAgICAgICAgIHZhciB2ID0gYml0LkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkW3ZdID0gZy5EZWdyZWVJblNldCh2LCBzZXQpO1xyXG4gICAgICAgICAgICAgICAgRFtkW3ZdXSB8PSBiaXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgcSBePSBiaXQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBiaXRzID0gbmV3IGxvbmdbbl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRFtqXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJpdCA9IERbal0gJiAtRFtqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYml0c1tuIC0gMSAtIGldID0gYml0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBiaXQuRXh0cmFjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxID0gZy5OZWlnaGJvcnNJblNldCh2LCBzZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGIuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERbZFt4XV0gXj0gYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbeF0tLTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERbZFt4XV0gfD0gYjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxIF49IGI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldCBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERbal0gXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBHZW5lcmF0ZU1heGltYWxJbmRlcGVuZGVudFN1YnNldHMoZywgYml0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgTGlzdDxsb25nPiBHZW5lcmF0ZU1heGltYWxJbmRlcGVuZGVudFN1YnNldHMoQml0R3JhcGhfbG9uZyBnLCBsb25nW10gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtaXMgPSBuZXcgTGlzdDxsb25nPig4KTtcclxuICAgICAgICAgICAgbWlzLkFkZCgwTCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZWFybGllciA9IDBMO1xyXG4gICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGJpdHMuTGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiaXQgPSBiaXRzW2pdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHYgPSBiaXQuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IG1pcy5Db3VudDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IG1pc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTiA9IGcuTmVpZ2hib3JzSW5TZXQodiwgbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE4gPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pc1tpXSB8PSBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtcCA9IG0gJiB+TjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1wcCA9IG1wIHwgYml0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcSA9IE47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gZWFybGllciAmIH5tcHA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHEgJiAtcTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gYi5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHFxID0gZy5OZWlnaGJvcnNJblNldCh3LCBsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChxcSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYiA9IHFxICYgLXFxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6ID0gYmIuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZy5OZWlnaGJvcnNJblNldCh6LCBtcHApID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXEgXj0gYmI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcSBePSBiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgWCA9IGcuTmVpZ2hib3JzSW5TZXQodiwgZWFybGllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBYICYgfk47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHEgJiAtcTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gYi5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGcuTmVpZ2hib3JzSW5TZXQodywgbXApICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWCBePSBiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcSBePSBiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoWCAhPSBOKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgWiA9IDBMO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKFogPCBOKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFogPSAoWiAtIFgpICYgWDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChaICYgTikgPT0gWilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZy5Jc0luZGVwZW5kZW50KFopKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1tID0gbXAgfCBaO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBlYXJsaWVyICYgfm1tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBOICYgflo7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHEgJiAtcTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSBiLkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxcSA9IGcuTmVpZ2hib3JzSW5TZXQodywgbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChxcSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmIgPSBxcSAmIC1xcTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6ID0gYmIuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnLk5laWdoYm9yc0luU2V0KHosIG1tKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gbm90TWF4aW1hbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxcSBePSBiYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSBePSBiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG5ub3RNYXhpbWFsOiA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pcy5BZGQoKG0gfCBiaXQpICYgfk4pO1xyXG5za2lwOiA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGVhcmxpZXIgfD0gYml0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWlzO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBMZXhpY29ncmFwaGljYWxseUZpcnN0Q29udGFpbmluZyhCaXRHcmFwaF9sb25nIGcsIGxvbmcgc2V0LCBsb25nIFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzZXQgXj0gUztcclxuICAgICAgICAgICAgd2hpbGUgKHNldCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0ID0gc2V0ICYgLXNldDtcclxuICAgICAgICAgICAgICAgIHZhciB2ID0gYml0LkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZy5OZWlnaGJvcnNJblNldCh2LCBTKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIFMgfD0gYml0O1xyXG5cclxuICAgICAgICAgICAgICAgIHNldCBePSBiaXQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIFBhcmVudChCaXRHcmFwaF9sb25nIGcsIGxvbmcgc2V0LCBsb25nIExGTUlTLCBsb25nIFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYSA9IExGTUlTICYgflM7XHJcbiAgICAgICAgICAgIHZhciBiaXQgPSBhICYgLWE7XHJcbiAgICAgICAgICAgIHZhciB2ID0gYml0LkV4dHJhY3QoKTtcclxuICAgICAgICAgICAgdmFyIE4gPSBnLk5laWdoYm9yc0luU2V0KHYsIFMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIExleGljb2dyYXBoaWNhbGx5Rmlyc3RDb250YWluaW5nKGcsIHNldCwgKFMgfCBiaXQpIF4gTik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgTGF0ZXIoQml0R3JhcGhfbG9uZyBnLCBsb25nIHNldCwgbG9uZyBMRk1JUywgaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcSA9IGcuTmVpZ2hib3JzSW5TZXQodiwgc2V0IF4gTEZNSVMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVhcmxpZXIgPSAoKDFMIDw8IHYpIC0gMSkgJiBMRk1JUztcclxuICAgICAgICAgICAgdmFyIGxhdGVyID0gMEw7XHJcbiAgICAgICAgICAgIHdoaWxlIChzZXQgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdCA9IHEgJiAtcTtcclxuICAgICAgICAgICAgICAgIHZhciB3ID0gYml0LkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZy5OZWlnaGJvcnNJblNldCh3LCBlYXJsaWVyKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGxhdGVyIHw9IGJpdDtcclxuXHJcbiAgICAgICAgICAgICAgICBxIF49IGJpdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxhdGVyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhpY3NMYXllclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQVJHQlxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQVJHQiBCYXNpY1BhbGV0dGUoaW50IHEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocSA9PSAtMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQVJHQigyNTUsIDI1NSwgMjU1KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBGcm9tSFNMKDAuNiArIChkb3VibGUpUmV2ZXJzZUJpdHMoKHVpbnQpcSkgLyBNYXRoLlBvdygyLjBmLCAzMiksIDEuMCwgMC42NSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEFSR0IgRnJvbUZyYWN0aW9uYWwoZG91YmxlIGEsIGRvdWJsZSByLCBkb3VibGUgZywgZG91YmxlIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFSR0IoKGludCkoYSAqIDI1NSksIChpbnQpKHIgKiAyNTUpLCAoaW50KShnICogMjU1KSwgKGludCkoYiAqIDI1NSkpOyBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQVJHQiBGcm9tSFNMKGRvdWJsZSBoLCBkb3VibGUgcywgZG91YmxlIGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aGlsZSAoaCA+IDEuMClcclxuICAgICAgICAgICAgICAgIGggLT0gMS4wO1xyXG4gICAgICAgICAgICB3aGlsZSAocyA+IDEuMClcclxuICAgICAgICAgICAgICAgIHMgLT0gMS4wO1xyXG4gICAgICAgICAgICB3aGlsZSAobCA+IDEuMClcclxuICAgICAgICAgICAgICAgIGwgLT0gMS4wO1xyXG5cclxuICAgICAgICAgICAgaWYgKHMgPT0gMC4wKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZyb21GcmFjdGlvbmFsKDEuMCwgbCwgbCwgbCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcSA9IGwgPCAwLjUgPyBsICogKDEuMCArIHMpIDogbCArIHMgLSBsICogcztcclxuICAgICAgICAgICAgdmFyIHAgPSAyLjAgKiBsIC0gcTtcclxuICAgICAgICAgICAgdmFyIHIgPSBIdWVUb1JnYihwLCBxLCBoICsgMS4wIC8gMy4wKTtcclxuICAgICAgICAgICAgdmFyIGcgPSBIdWVUb1JnYihwLCBxLCBoKTtcclxuICAgICAgICAgICAgdmFyIGIgPSBIdWVUb1JnYihwLCBxLCBoIC0gMS4wIC8gMy4wKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBGcm9tRnJhY3Rpb25hbCgxLjAsIHIsIGcsIGIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGRvdWJsZSBIdWVUb1JnYihkb3VibGUgcCwgZG91YmxlIHEsIGRvdWJsZSB0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHQgPCAwLjApIHQgKz0gMS4wZjtcclxuICAgICAgICAgICAgaWYgKHQgPiAxLjApIHQgLT0gMS4wO1xyXG4gICAgICAgICAgICBpZiAodCA8IDEuMCAvIDYuMCkgcmV0dXJuIHAgKyAocSAtIHApICogNi4wICogdDtcclxuICAgICAgICAgICAgaWYgKHQgPCAxLjAgLyAyLjApIHJldHVybiBxO1xyXG4gICAgICAgICAgICBpZiAodCA8IDIuMCAvIDMuMCkgcmV0dXJuIHAgKyAocSAtIHApICogKDIuMCAvIDMuMCAtIHQpICogNi4wO1xyXG4gICAgICAgICAgICByZXR1cm4gcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB1aW50IFJldmVyc2VCaXRzKHVpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVpbnQgeSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMzI7IGkrKylcclxuICAgICAgICAgICAgICAgIHkgfD0gKHVpbnQpKCh4ICYgKDEgPDwgaSkpIDw8ICgzMSAtIDIgKiBpKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgQSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBSIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IEcgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgQiB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBBUkdCKGludCBhLCBpbnQgciwgaW50IGcsIGludCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQSA9IGE7XHJcbiAgICAgICAgICAgIFIgPSByO1xyXG4gICAgICAgICAgICBHID0gZztcclxuICAgICAgICAgICAgQiA9IGI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBBUkdCKGludCByLCBpbnQgZywgaW50IGIpXHJcbiAgICAgICAgICAgIDogdGhpcygyNTUsIHIsIGcsIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChcInswfSx7MX0sezJ9LHszfVwiLCBBLCBSLCBHLCBCKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEdyYXBoaWNzTGF5ZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEJveFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQm94IEVtcHR5ID0gbmV3IEJveCgwLCAwKTtcclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBUb3AgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgTGVmdCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBXaWR0aCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBIZWlnaHQgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFggeyBnZXQgeyByZXR1cm4gTGVmdDsgfSB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBZIHsgZ2V0IHsgcmV0dXJuIFRvcDsgfSB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBSaWdodCB7IGdldCB7IHJldHVybiBMZWZ0ICsgV2lkdGg7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgQm90dG9tIHsgZ2V0IHsgcmV0dXJuIFRvcCArIEhlaWdodDsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBCb3goZG91YmxlIGxlZnQsIGRvdWJsZSB0b3ApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMZWZ0ID0gbGVmdDtcclxuICAgICAgICAgICAgVG9wID0gdG9wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgQm94KGRvdWJsZSBsZWZ0LCBkb3VibGUgdG9wLCBkb3VibGUgd2lkdGgsIGRvdWJsZSBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMZWZ0ID0gbGVmdDtcclxuICAgICAgICAgICAgVG9wID0gdG9wO1xyXG4gICAgICAgICAgICBXaWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICBIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBJbmZsYXRlKGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExlZnQgLT0geDtcclxuICAgICAgICAgICAgVG9wIC09IHk7XHJcbiAgICAgICAgICAgIFdpZHRoICs9IDIgKiB4O1xyXG4gICAgICAgICAgICBIZWlnaHQgKz0gMiAqIHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMZWZ0IDw9IHggJiYgeCA8PSBSaWdodCAmJlxyXG4gICAgICAgICAgICAgICAgICAgVG9wIDw9IHkgJiYgeSA8PSBCb3R0b207XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKEJveCBib3gpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGVmdCA8PSBib3guTGVmdCAmJiBib3guUmlnaHQgPD0gUmlnaHQgJiZcclxuICAgICAgICAgICAgICAgICAgIFRvcCA8PSBib3guVG9wICYmIGJveC5Cb3R0b20gPD0gQm90dG9tO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhpY3NMYXllclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRm9udFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTmFtZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBTaXplIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEZvbnQoc3RyaW5nIG5hbWUsIGludCBzaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTmFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgIFNpemUgPSBzaXplO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uSU87XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG5cclxuLy8vIDxzdW1tYXJ5PlxyXG4vLy8gQyMgaW1wbGVtZW50YXRpb24gb2YgQVNDSUk4NSBlbmNvZGluZy4gXHJcbi8vLyBCYXNlZCBvbiBDIGNvZGUgZnJvbSBodHRwOi8vd3d3LnN0aWxsaHEuY29tL2NnaS1iaW4vY3Zzd2ViL2FzY2lpODUvXHJcbi8vLyA8L3N1bW1hcnk+XHJcbi8vLyA8cmVtYXJrcz5cclxuLy8vIEplZmYgQXR3b29kXHJcbi8vLyBodHRwOi8vd3d3LmNvZGluZ2hvcnJvci5jb20vYmxvZy9hcmNoaXZlcy8wMDA0MTAuaHRtbFxyXG4vLy8gPC9yZW1hcmtzPlxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBBc2NpaTg1XHJcbiAgICB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBQcmVmaXggbWFyayB0aGF0IGlkZW50aWZpZXMgYW4gZW5jb2RlZCBBU0NJSTg1IHN0cmluZywgdHJhZGl0aW9uYWxseSAnPH4nXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFByZWZpeE1hcmsgPSBcIlwiO1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gU3VmZml4IG1hcmsgdGhhdCBpZGVudGlmaWVzIGFuIGVuY29kZWQgQVNDSUk4NSBzdHJpbmcsIHRyYWRpdGlvbmFsbHkgJ34+J1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTdWZmaXhNYXJrID0gXCJcIjtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIE1heGltdW0gbGluZSBsZW5ndGggZm9yIGVuY29kZWQgQVNDSUk4NSBzdHJpbmc7IFxyXG4gICAgICAgIC8vLyBzZXQgdG8gemVybyBmb3Igb25lIHVuYnJva2VuIGxpbmUuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgaW50IExpbmVMZW5ndGggPSAwO1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gQWRkIHRoZSBQcmVmaXggYW5kIFN1ZmZpeCBtYXJrcyB3aGVuIGVuY29kaW5nLCBhbmQgZW5mb3JjZSB0aGVpciBwcmVzZW5jZSBmb3IgZGVjb2RpbmdcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBib29sIEVuZm9yY2VNYXJrcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwcml2YXRlIGNvbnN0IGludCBfYXNjaWlPZmZzZXQgPSAzMztcclxuICAgICAgICBwcml2YXRlIGJ5dGVbXSBfZW5jb2RlZEJsb2NrID0gbmV3IGJ5dGVbNV07XHJcbiAgICAgICAgcHJpdmF0ZSBieXRlW10gX2RlY29kZWRCbG9jayA9IG5ldyBieXRlWzRdO1xyXG4gICAgICAgIHByaXZhdGUgdWludCBfdHVwbGUgPSAwO1xyXG4gICAgICAgIHByaXZhdGUgaW50IF9saW5lUG9zID0gMDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSB1aW50W10gcG93ODUgPSB7IDg1ICogODUgKiA4NSAqIDg1LCA4NSAqIDg1ICogODUsIDg1ICogODUsIDg1LCAxIH07XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gRGVjb2RlcyBhbiBBU0NJSTg1IGVuY29kZWQgc3RyaW5nIGludG8gdGhlIG9yaWdpbmFsIGJpbmFyeSBkYXRhXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzXCI+QVNDSUk4NSBlbmNvZGVkIHN0cmluZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPmJ5dGUgYXJyYXkgb2YgZGVjb2RlZCBiaW5hcnkgZGF0YTwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgYnl0ZVtdIERlY29kZShzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChFbmZvcmNlTWFya3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghcy5TdGFydHNXaXRoKFByZWZpeE1hcmspIHwgIXMuRW5kc1dpdGgoU3VmZml4TWFyaykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIkFTQ0lJODUgZW5jb2RlZCBkYXRhIHNob3VsZCBiZWdpbiB3aXRoICdcIiArIFByZWZpeE1hcmsgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIicgYW5kIGVuZCB3aXRoICdcIiArIFN1ZmZpeE1hcmsgKyBcIidcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHN0cmlwIHByZWZpeCBhbmQgc3VmZml4IGlmIHByZXNlbnRcclxuICAgICAgICAgICAgaWYgKHMuU3RhcnRzV2l0aChQcmVmaXhNYXJrKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcyA9IHMuU3Vic3RyaW5nKFByZWZpeE1hcmsuTGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocy5FbmRzV2l0aChTdWZmaXhNYXJrKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcyA9IHMuU3Vic3RyaW5nKDAsIHMuTGVuZ3RoIC0gU3VmZml4TWFyay5MZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbXMgPSBuZXcgTGlzdDxieXRlPigpO1xyXG4gICAgICAgICAgICBpbnQgY291bnQgPSAwO1xyXG4gICAgICAgICAgICBib29sIHByb2Nlc3NDaGFyID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoIChjaGFyIGMgaW4gcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChjKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3onOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlRoZSBjaGFyYWN0ZXIgJ3onIGlzIGludmFsaWQgaW5zaWRlIGFuIEFTQ0lJODUgYmxvY2suXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWNvZGVkQmxvY2tbMF0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGVjb2RlZEJsb2NrWzFdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RlY29kZWRCbG9ja1syXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWNvZGVkQmxvY2tbM10gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtcy5BZGRSYW5nZShfZGVjb2RlZEJsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0NoYXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXFxuJzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdcXHInOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1xcdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXFwwJzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdcXGYnOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1xcYic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDaGFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjIDwgJyEnIHx8IGMgPiAndScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJCYWQgY2hhcmFjdGVyICdcIiArIGMgKyBcIicgZm91bmQuIEFTQ0lJODUgb25seSBhbGxvd3MgY2hhcmFjdGVycyAnIScgdG8gJ3UnLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzQ2hhciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzQ2hhcilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfdHVwbGUgKz0gKCh1aW50KShjIC0gX2FzY2lpT2Zmc2V0KSAqIHBvdzg1W2NvdW50XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPT0gX2VuY29kZWRCbG9jay5MZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVCbG9jaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtcy5BZGRSYW5nZShfZGVjb2RlZEJsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3R1cGxlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBzb21lIGJ5dGVzIGxlZnQgb3ZlciBhdCB0aGUgZW5kLi5cclxuICAgICAgICAgICAgaWYgKGNvdW50ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJUaGUgbGFzdCBibG9jayBvZiBBU0NJSTg1IGRhdGEgY2Fubm90IGJlIGEgc2luZ2xlIGJ5dGUuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY291bnQtLTtcclxuICAgICAgICAgICAgICAgIF90dXBsZSArPSBwb3c4NVtjb3VudF07XHJcbiAgICAgICAgICAgICAgICBEZWNvZGVCbG9jayhjb3VudCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbXMuQWRkKF9kZWNvZGVkQmxvY2tbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbXMuVG9BcnJheSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBFbmNvZGVzIGJpbmFyeSBkYXRhIGludG8gYSBwbGFpbnRleHQgQVNDSUk4NSBmb3JtYXQgc3RyaW5nXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJiYVwiPmJpbmFyeSBkYXRhIHRvIGVuY29kZTwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPkFTQ0lJODUgZW5jb2RlZCBzdHJpbmc8L3JldHVybnM+XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBFbmNvZGUoYnl0ZVtdIGJhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU3RyaW5nQnVpbGRlciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKChpbnQpKGJhLkxlbmd0aCAqIChfZW5jb2RlZEJsb2NrLkxlbmd0aCAvIF9kZWNvZGVkQmxvY2suTGVuZ3RoKSkpO1xyXG4gICAgICAgICAgICBfbGluZVBvcyA9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoRW5mb3JjZU1hcmtzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBBcHBlbmRTdHJpbmcoc2IsIFByZWZpeE1hcmspO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbnQgY291bnQgPSAwO1xyXG4gICAgICAgICAgICBfdHVwbGUgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoIChieXRlIGIgaW4gYmEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA+PSBfZGVjb2RlZEJsb2NrLkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3R1cGxlIHw9IGI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90dXBsZSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQXBwZW5kQ2hhcihzYiwgJ3onKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRW5jb2RlQmxvY2soc2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBfdHVwbGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfdHVwbGUgfD0gKHVpbnQpKGIgPDwgKDI0IC0gKGNvdW50ICogOCkpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIHNvbWUgYnl0ZXMgbGVmdCBvdmVyIGF0IHRoZSBlbmQuLlxyXG4gICAgICAgICAgICBpZiAoY291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFbmNvZGVCbG9jayhjb3VudCArIDEsIHNiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKEVuZm9yY2VNYXJrcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQXBwZW5kU3RyaW5nKHNiLCBTdWZmaXhNYXJrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc2IuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBFbmNvZGVCbG9jayhTdHJpbmdCdWlsZGVyIHNiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRW5jb2RlQmxvY2soX2VuY29kZWRCbG9jay5MZW5ndGgsIHNiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBFbmNvZGVCbG9jayhpbnQgY291bnQsIFN0cmluZ0J1aWxkZXIgc2IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gX2VuY29kZWRCbG9jay5MZW5ndGggLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2VuY29kZWRCbG9ja1tpXSA9IChieXRlKSgoX3R1cGxlICUgODUpICsgX2FzY2lpT2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIF90dXBsZSAvPSA4NTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjaGFyIGMgPSAoY2hhcilfZW5jb2RlZEJsb2NrW2ldO1xyXG4gICAgICAgICAgICAgICAgQXBwZW5kQ2hhcihzYiwgYyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgRGVjb2RlQmxvY2soKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRGVjb2RlQmxvY2soX2RlY29kZWRCbG9jay5MZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIERlY29kZUJsb2NrKGludCBieXRlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYnl0ZXM7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2RlY29kZWRCbG9ja1tpXSA9IChieXRlKShfdHVwbGUgPj4gMjQgLSAoaSAqIDgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIEFwcGVuZFN0cmluZyhTdHJpbmdCdWlsZGVyIHNiLCBzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChMaW5lTGVuZ3RoID4gMCAmJiAoX2xpbmVQb3MgKyBzLkxlbmd0aCA+IExpbmVMZW5ndGgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfbGluZVBvcyA9IDA7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmQoJ1xccicpO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kKCdcXG4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9saW5lUG9zICs9IHMuTGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZChzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBBcHBlbmRDaGFyKFN0cmluZ0J1aWxkZXIgc2IsIGNoYXIgYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZChjKTtcclxuICAgICAgICAgICAgX2xpbmVQb3MrKztcclxuICAgICAgICAgICAgaWYgKExpbmVMZW5ndGggPiAwICYmIChfbGluZVBvcyA+PSBMaW5lTGVuZ3RoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2xpbmVQb3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kKCdcXHInKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZCgnXFxuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBQb2x5Z29uQ29udGFpbmVyXHJcbiAgICB7XHJcbiAgICAgICAgSUxpc3Q8Qm94PiBfZG90cztcclxuICAgICAgICBCb3ggX2JvdW5kaW5nQm94O1xyXG5cclxuICAgICAgICBwdWJsaWMgUG9seWdvbkNvbnRhaW5lcihJTGlzdDxCb3g+IGRvdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZG90cyA9IGRvdHM7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWlueCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWluPGdsb2JhbDo6R3JhcGhpY3NMYXllci5Cb3g+KF9kb3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhpY3NMYXllci5Cb3gsIGRvdWJsZT4pKGRvdCA9PiBkb3QuWCkpO1xyXG4gICAgICAgICAgICB2YXIgbWF4eCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWF4PGdsb2JhbDo6R3JhcGhpY3NMYXllci5Cb3g+KF9kb3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhpY3NMYXllci5Cb3gsIGRvdWJsZT4pKGRvdCA9PiBkb3QuWCkpO1xyXG4gICAgICAgICAgICB2YXIgbWlueSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWluPGdsb2JhbDo6R3JhcGhpY3NMYXllci5Cb3g+KF9kb3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhpY3NMYXllci5Cb3gsIGRvdWJsZT4pKGRvdCA9PiBkb3QuWSkpO1xyXG4gICAgICAgICAgICB2YXIgbWF4eSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWF4PGdsb2JhbDo6R3JhcGhpY3NMYXllci5Cb3g+KF9kb3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhpY3NMYXllci5Cb3gsIGRvdWJsZT4pKGRvdCA9PiBkb3QuWSkpO1xyXG5cclxuICAgICAgICAgICAgX2JvdW5kaW5nQm94ID0gbmV3IEJveChtaW54LCBtaW55LCBtYXh4IC0gbWlueCwgbWF4eSAtIG1pbnkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnMoQm94IGRvdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghX2JvdW5kaW5nQm94LkNvbnRhaW5zKGRvdCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29udGFpbnMgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGogPSBfZG90cy5Db3VudCAtIDE7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9kb3RzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICgoX2RvdHNbaV0uWSA8PSBkb3QuWSAmJiBkb3QuWSA8IF9kb3RzW2pdLlkgfHwgX2RvdHNbal0uWSA8PSBkb3QuWSAmJiBkb3QuWSA8IF9kb3RzW2ldLlkpICYmICBkb3QuWCA8IChfZG90c1tqXS5YIC0gX2RvdHNbaV0uWCkgKiAoZG90LlkgLSBfZG90c1tpXS5ZKSAvIChfZG90c1tqXS5ZIC0gX2RvdHNbaV0uWSkgKyBfZG90c1tpXS5YKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zID0gIWNvbnRhaW5zO1xyXG5cclxuICAgICAgICAgICAgICAgIGogPSBpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29udGFpbnM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlJ1bnRpbWUuU2VyaWFsaXphdGlvbjtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIFtEYXRhQ29udHJhY3QoTmFtZSA9IFwiVmVjdG9yXCIpXVxyXG4gICAgcHVibGljIGNsYXNzIFNlcmlhbGl6YXRpb25WZWN0b3JcclxuICAgIHtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFg7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBZO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvblZlY3RvcigpIHsgfVxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uVmVjdG9yKFZlY3RvciB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgWCA9IHYuWDtcclxuICAgICAgICAgICAgWSA9IHYuWTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBbRGF0YUNvbnRyYWN0KE5hbWUgPSBcIlZlcnRleFwiKV1cclxuICAgIHB1YmxpYyBjbGFzcyBTZXJpYWxpemF0aW9uVmVydGV4XHJcbiAgICB7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25WZWN0b3IgTG9jYXRpb247XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBMYWJlbDtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgZmxvYXQgUGFkZGluZztcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFN0eWxlO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvblZlcnRleCgpIHsgfVxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uVmVydGV4KFZlcnRleCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTG9jYXRpb24gPSBuZXcgU2VyaWFsaXphdGlvblZlY3Rvcih2LkxvY2F0aW9uKTtcclxuICAgICAgICAgICAgTGFiZWwgPSB2LkxhYmVsO1xyXG4gICAgICAgICAgICBQYWRkaW5nID0gdi5QYWRkaW5nO1xyXG4gICAgICAgICAgICBTdHlsZSA9IHYuU3R5bGUgPz8gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBbRGF0YUNvbnRyYWN0KE5hbWUgPSBcIkVkZ2VcIildXHJcbiAgICBwdWJsaWMgY2xhc3MgU2VyaWFsaXphdGlvbkVkZ2VcclxuICAgIHtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgaW50IEluZGV4VjE7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIGludCBJbmRleFYyO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBFZGdlLk9yaWVudGF0aW9ucyBPcmllbnRhdGlvbjtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgZmxvYXQgVGhpY2tuZXNzO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTXVsdGlwbGljaXR5O1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgU3R5bGU7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBMYWJlbDtcclxuXHJcbiAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25FZGdlKCkgeyB9XHJcbiAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25FZGdlKEVkZ2UgZSwgTGlzdDxWZXJ0ZXg+IHZlcnRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSW5kZXhWMSA9IHZlcnRpY2VzLkluZGV4T2YoZS5WMSk7XHJcbiAgICAgICAgICAgIEluZGV4VjIgPSB2ZXJ0aWNlcy5JbmRleE9mKGUuVjIpO1xyXG4gICAgICAgICAgICBPcmllbnRhdGlvbiA9IGUuT3JpZW50YXRpb247XHJcbiAgICAgICAgICAgIFRoaWNrbmVzcyA9IGUuVGhpY2tuZXNzO1xyXG4gICAgICAgICAgICBNdWx0aXBsaWNpdHkgPSBlLk11bHRpcGxpY2l0eTtcclxuICAgICAgICAgICAgU3R5bGUgPSBlLlN0eWxlID8/IFwiXCI7XHJcbiAgICAgICAgICAgIExhYmVsID0gZS5MYWJlbCA/PyBcIlwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKFN0eWxlID09IFwiXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChPcmllbnRhdGlvbiA9PSBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgIFN0eWxlID0gZS5TdHlsZSA9IFwicG9zdFwiO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoT3JpZW50YXRpb24gPT0gRWRnZS5PcmllbnRhdGlvbnMuQmFja3dhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgU3R5bGUgPSBlLlN0eWxlID0gXCJwcmVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFtEYXRhQ29udHJhY3QoTmFtZSA9IFwiR3JhcGhcIildXHJcbiAgICBwdWJsaWMgY2xhc3MgU2VyaWFsaXphdGlvbkdyYXBoXHJcbiAgICB7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIExpc3Q8U2VyaWFsaXphdGlvblZlcnRleD4gVmVydGljZXM7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIExpc3Q8U2VyaWFsaXphdGlvbkVkZ2U+IEVkZ2VzO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTmFtZTtcclxuXHJcbiAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25HcmFwaCgpIHsgfVxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uR3JhcGgoR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpHcmFwaHMuVmVydGV4LGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25WZXJ0ZXg+KGcuVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVydGV4LCBnbG9iYWw6OkdyYXBocy5TZXJpYWxpemF0aW9uVmVydGV4PikodiA9PiBuZXcgU2VyaWFsaXphdGlvblZlcnRleCh2KSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBFZGdlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6R3JhcGhzLkVkZ2UsZ2xvYmFsOjpHcmFwaHMuU2VyaWFsaXphdGlvbkVkZ2U+KGcuRWRnZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuRWRnZSwgZ2xvYmFsOjpHcmFwaHMuU2VyaWFsaXphdGlvbkVkZ2U+KShlID0+IG5ldyBTZXJpYWxpemF0aW9uRWRnZShlLCBnLlZlcnRpY2VzKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBOYW1lID0gZy5OYW1lO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG51c2luZyBTeXN0ZW0uSU87XHJcbnVzaW5nIFN5c3RlbS5SdW50aW1lLlNlcmlhbGl6YXRpb247XHJcbnVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgVXRpbGl0eVxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gZ2VvbWV0cnkgc3R1ZmZcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEJveCBSb3RhdGVBcm91bmRQb2ludChCb3ggdiwgQm94IGNlbnRlciwgZG91YmxlIGFuZ2xlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBjZW50ZXIuWCArICh2LlggLSBjZW50ZXIuWCkgKiBNYXRoLkNvcyhhbmdsZSkgLSAodi5ZIC0gY2VudGVyLlkpICogTWF0aC5TaW4oYW5nbGUpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGNlbnRlci5ZICsgKHYuWCAtIGNlbnRlci5YKSAqIE1hdGguU2luKGFuZ2xlKSArICh2LlkgLSBjZW50ZXIuWSkgKiBNYXRoLkNvcyhhbmdsZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJveCh4LCB5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yIFJvdGF0ZUFyb3VuZFBvaW50KFZlY3RvciB2LCBWZWN0b3IgY2VudGVyLCBkb3VibGUgYW5nbGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IGNlbnRlci5YICsgKHYuWCAtIGNlbnRlci5YKSAqIE1hdGguQ29zKGFuZ2xlKSAtICh2LlkgLSBjZW50ZXIuWSkgKiBNYXRoLlNpbihhbmdsZSk7XHJcbiAgICAgICAgICAgIHZhciB5ID0gY2VudGVyLlkgKyAodi5YIC0gY2VudGVyLlgpICogTWF0aC5TaW4oYW5nbGUpICsgKHYuWSAtIGNlbnRlci5ZKSAqIE1hdGguQ29zKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHgsIHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IgUG9sYXJUb1JlY3Rhbmd1bGFyKGRvdWJsZSByLCBkb3VibGUgdGhldGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihyICogTWF0aC5Db3ModGhldGEpLCByICogTWF0aC5TaW4odGhldGEpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBIYXZlSW50ZXJzZWN0aW9uKEJveCBzdGFydDEsIEJveCBlbmQxLCBCb3ggc3RhcnQyLCBCb3ggZW5kMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkZW5vbSA9ICgoZW5kMS5YIC0gc3RhcnQxLlgpICogKGVuZDIuWSAtIHN0YXJ0Mi5ZKSkgLSAoKGVuZDEuWSAtIHN0YXJ0MS5ZKSAqIChlbmQyLlggLSBzdGFydDIuWCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRlbm9tID09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgbnVtZXIgPSAoKHN0YXJ0MS5ZIC0gc3RhcnQyLlkpICogKGVuZDIuWCAtIHN0YXJ0Mi5YKSkgLSAoKHN0YXJ0MS5YIC0gc3RhcnQyLlgpICogKGVuZDIuWSAtIHN0YXJ0Mi5ZKSk7XHJcbiAgICAgICAgICAgIHZhciByID0gbnVtZXIgLyBkZW5vbTtcclxuICAgICAgICAgICAgdmFyIG51bWVyMiA9ICgoc3RhcnQxLlkgLSBzdGFydDIuWSkgKiAoZW5kMS5YIC0gc3RhcnQxLlgpKSAtICgoc3RhcnQxLlggLSBzdGFydDIuWCkgKiAoZW5kMS5ZIC0gc3RhcnQxLlkpKTtcclxuICAgICAgICAgICAgdmFyIHMgPSBudW1lcjIgLyBkZW5vbTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyIDwgMCB8fCByID4gMSB8fCBzIDwgMCB8fCBzID4gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIC8vI3JlZ2lvbiBzdHJpbmcgc3R1ZmZcclxuICAgICAgICAvL3B1YmxpYyBzdGF0aWMgc3RyaW5nIENvbXByZXNzKHN0cmluZyBzKVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vICAgIHZhciB1bmNvbXByZXNzZWQgPSBFbmNvZGluZy5Vbmljb2RlLkdldEJ5dGVzKHMpO1xyXG4gICAgICAgIC8vICAgIHZhciBjb21wcmVzc2VkID0gUXVpY2tMWi5jb21wcmVzcyh1bmNvbXByZXNzZWQpO1xyXG4gICAgICAgIC8vICAgIHJldHVybiBDb252ZXJ0LlRvQmFzZTY0U3RyaW5nKGNvbXByZXNzZWQpO1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICAvL3B1YmxpYyBzdGF0aWMgc3RyaW5nIERlY29tcHJlc3Moc3RyaW5nIHMpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgdmFyIGNvbXByZXNzZWQgPSBDb252ZXJ0LkZyb21CYXNlNjRTdHJpbmcocyk7XHJcbiAgICAgICAgLy8gICAgdmFyIHVuY29tcHJlc3NlZCA9IFF1aWNrTFouZGVjb21wcmVzcyhjb21wcmVzc2VkKTtcclxuICAgICAgICAvLyAgICByZXR1cm4gRW5jb2RpbmcuVW5pY29kZS5HZXRTdHJpbmcodW5jb21wcmVzc2VkLCAwLCB1bmNvbXByZXNzZWQuTGVuZ3RoKTtcclxuICAgICAgICAvL31cclxuICAgICAgICAvLyNlbmRyZWdpb25cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgR3JhcGhpY3NMYXllcjtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFZlY3RvclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBWZWN0b3IoZG91YmxlIHgsIGRvdWJsZSB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX1ggPSB4O1xyXG4gICAgICAgICAgICBfWSA9IHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIExlbmd0aFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLlNxcnQoX1ggKiBfWCArIF9ZICogX1kpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBOb3JtYWxpemUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IExlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIF9YID0gX1ggLyBsZW5ndGg7XHJcbiAgICAgICAgICAgIF9ZID0gX1kgLyBsZW5ndGg7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbGVuZ3RoID4gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgRG90KFZlY3RvciB2ZWN0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX1ggKiB2ZWN0b3IuX1ggKyBfWSAqIHZlY3Rvci5fWTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgRGlzdGFuY2UoVmVjdG9yIHZlY3RvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZG91YmxlKU1hdGguU3FydChNYXRoLlBvdyh2ZWN0b3IuX1ggLSBfWCwgMikgKyBNYXRoLlBvdyh2ZWN0b3IuX1kgLSBfWSwgMikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3Igb3BlcmF0b3IgKyhWZWN0b3IgYSwgVmVjdG9yIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihhLl9YICsgYi5fWCwgYS5fWSArIGIuX1kpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3Igb3BlcmF0b3IgLShWZWN0b3IgYSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKC1hLl9YLCAtYS5fWSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvciBvcGVyYXRvciAtKFZlY3RvciBhLCBWZWN0b3IgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKGEuX1ggLSBiLl9YLCBhLl9ZIC0gYi5fWSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvciBvcGVyYXRvciAqKFZlY3RvciBhLCBkb3VibGUgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKGEuX1ggKiBiLCBhLl9ZICogYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvciBvcGVyYXRvciAqKFZlY3RvciBhLCBpbnQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKGEuX1ggKiBiLCBhLl9ZICogYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghKG9iaiBpcyBWZWN0b3IpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgVmVjdG9yIHYgPSAoVmVjdG9yKW9iajtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHModik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoVmVjdG9yIHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX1ggPT0gdi5fWCAmJiBfWSA9PSB2Ll9ZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVG9TdHJpbmcoKS5HZXRIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yID09KFZlY3RvciBhLCBWZWN0b3IgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLkVxdWFscyhiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShWZWN0b3IgYSwgVmVjdG9yIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gIShhID09IGIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbXBsaWNpdCBvcGVyYXRvciBCb3goVmVjdG9yIHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJveCh2LlgsIHYuWSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIihcIiArIF9YICsgXCIsIFwiICsgX1kgKyBcIilcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgWFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfWDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX1ggPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX1k7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9ZID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvdWJsZSBfWDtcclxuICAgICAgICBkb3VibGUgX1k7XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgR3JhcGhzO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uSU87XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc0NvcmVcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBDb21wYWN0U2VyaWFsaXplclxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGludCBTY2FsZSA9IDEwMDAwO1xyXG4gICAgICAgIGNvbnN0IHN0cmluZyBQcmVmaXggPSBcIndlYmdyYXBoOlwiO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgTG9va3NMaWtlQVNlcmlhbGl6ZWRHcmFwaChzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAhc3RyaW5nLklzTnVsbE9yRW1wdHkocykgJiYgcy5TdGFydHNXaXRoKFByZWZpeCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBTZXJpYWxpemUoR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBieXRlcyA9IFNlcmlhbGl6ZVRvQnl0ZUFycmF5KGcpO1xyXG4gICAgICAgICAgICB2YXIgY29tcHJlc3NlZCA9IFF1aWNrTFouY29tcHJlc3MoYnl0ZXMpO1xyXG4gICAgICAgICAgICB2YXIgQXNjaWk4NSA9IG5ldyBBc2NpaTg1KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcmVmaXggKyBBc2NpaTg1LkVuY29kZShjb21wcmVzc2VkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBieXRlW10gU2VyaWFsaXplVG9CeXRlQXJyYXkoR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBieXRlcyA9IG5ldyBMaXN0PGJ5dGU+KCk7XHJcbiAgICAgICAgICAgIGJ5dGVzLkFkZCgoYnl0ZSlnLlZlcnRpY2VzLkNvdW50KTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gZy5WZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkUmFuZ2UoQml0Q29udmVydGVyLkdldEJ5dGVzKChVSW50MTYpTWF0aC5Sb3VuZCh2LlggKiBTY2FsZSkpKTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEJpdENvbnZlcnRlci5HZXRCeXRlcygoVUludDE2KU1hdGguUm91bmQodi5ZICogU2NhbGUpKSk7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGRSYW5nZShCaXRDb252ZXJ0ZXIuR2V0Qnl0ZXMoKFVJbnQxNilNYXRoLlJvdW5kKHYuUGFkZGluZyAqIFNjYWxlKSkpO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkUmFuZ2UoR2V0Qnl0ZXModi5MYWJlbCkpO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkUmFuZ2UoR2V0Qnl0ZXModi5TdHlsZSA/PyBcIlwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEJpdENvbnZlcnRlci5HZXRCeXRlcygoVUludDE2KWcuRWRnZXMuQ291bnQpKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZy5FZGdlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkKChieXRlKShnLlZlcnRpY2VzLkluZGV4T2YoZS5WMSkpKTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZCgoYnl0ZSkoZy5WZXJ0aWNlcy5JbmRleE9mKGUuVjIpKSk7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGQoKGJ5dGUpZS5NdWx0aXBsaWNpdHkpO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkKChieXRlKWUuT3JpZW50YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkUmFuZ2UoQml0Q29udmVydGVyLkdldEJ5dGVzKChVSW50MTYpTWF0aC5Sb3VuZChlLlRoaWNrbmVzcyAqIDEwMCkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBlLkxhYmVsID8/IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB2YXIgaGFja2VkU3R5bGUgPSAoZS5TdHlsZSA/PyBcIlwiKSArIFwifn58fnx+flwiICsgbGFiZWw7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGRSYW5nZShHZXRCeXRlcyhoYWNrZWRTdHlsZSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYnl0ZXMuVG9BcnJheSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBEZXNlcmlhbGl6ZShzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgQXNjaWk4NSA9IG5ldyBBc2NpaTg1KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29tcHJlc3NlZCA9IEFzY2lpODUuRGVjb2RlKHMuU3Vic3RyaW5nKFByZWZpeC5MZW5ndGgpKTtcclxuICAgICAgICAgICAgICAgIHZhciBieXRlcyA9IFF1aWNrTFouZGVjb21wcmVzcyhjb21wcmVzc2VkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBEZXNlcmlhbGl6ZUZyb21CeXRlQXJyYXkoYnl0ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKGV4Lk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBHcmFwaCBEZXNlcmlhbGl6ZUZyb21CeXRlQXJyYXkoYnl0ZVtdIGJ5dGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBuID0gUmVhZEJ5dGUoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICB2YXIgdmVydGljZXMgPSBuZXcgTGlzdDxWZXJ0ZXg+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IChkb3VibGUpUmVhZFVJbnQxNihieXRlcywgcmVmIG9mZnNldCkgLyBTY2FsZTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKGRvdWJsZSlSZWFkVUludDE2KGJ5dGVzLCByZWYgb2Zmc2V0KSAvIFNjYWxlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSAoZmxvYXQpUmVhZFVJbnQxNihieXRlcywgcmVmIG9mZnNldCkgLyBTY2FsZTtcclxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IFJlYWRTdHJpbmcoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gUmVhZFN0cmluZyhieXRlcywgcmVmIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcy5BZGQobmV3IFZlcnRleCh4LCB5KSB7IFBhZGRpbmcgPSBwYWRkaW5nLCBMYWJlbCA9IGxhYmVsLCBTdHlsZSA9IHN0eWxlIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZSA9IFJlYWRVSW50MTYoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICB2YXIgZWRnZXMgPSBuZXcgTGlzdDxFZGdlPigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGU7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHYxID0gUmVhZEJ5dGUoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHYyID0gUmVhZEJ5dGUoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG11bHRpcGxpY2l0eSA9IFJlYWRCeXRlKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIHZhciBvcmllbnRhdGlvbiA9IChFZGdlLk9yaWVudGF0aW9ucylSZWFkQnl0ZShieXRlcywgcmVmIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpY2tuZXNzID0gKGZsb2F0KVJlYWRVSW50MTYoYnl0ZXMsIHJlZiBvZmZzZXQpIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gUmVhZFN0cmluZyhieXRlcywgcmVmIG9mZnNldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZWRnZXMuQWRkKG5ldyBFZGdlKHZlcnRpY2VzW3YxXSwgdmVydGljZXNbdjJdKSB7IE11bHRpcGxpY2l0eSA9IG11bHRpcGxpY2l0eSwgT3JpZW50YXRpb24gPSBvcmllbnRhdGlvbiwgVGhpY2tuZXNzID0gdGhpY2tuZXNzLCBTdHlsZSA9IHN0eWxlIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKHZlcnRpY2VzLCBlZGdlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYnl0ZSBSZWFkQnl0ZShieXRlW10gYnl0ZXMsIHJlZiBpbnQgb2Zmc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ5dGVzW29mZnNldCsrXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBVSW50MTYgUmVhZFVJbnQxNihieXRlW10gYnl0ZXMsIHJlZiBpbnQgb2Zmc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBCaXRDb252ZXJ0ZXIuVG9VSW50MTYoYnl0ZXMsIG9mZnNldCk7XHJcbiAgICAgICAgICAgIG9mZnNldCArPSAyO1xyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBVSW50MzIgUmVhZFVJbnQzMihieXRlW10gYnl0ZXMsIHJlZiBpbnQgb2Zmc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBCaXRDb252ZXJ0ZXIuVG9VSW50MzIoYnl0ZXMsIG9mZnNldCk7XHJcbiAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBieXRlW10gR2V0N0JpdEVuY29kZWRJbnQoaW50IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJ5dGVzID0gbmV3IExpc3Q8Ynl0ZT4oKTtcclxuICAgICAgICAgICAgdWludCBudW0gPSAodWludCl2YWx1ZTtcclxuICAgICAgICAgICAgd2hpbGUgKG51bSA+PSAxMjhVKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGQoKGJ5dGUpKG51bSB8IDEyOFUpKTtcclxuICAgICAgICAgICAgICAgIG51bSA+Pj0gNztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBieXRlcy5BZGQoKGJ5dGUpbnVtKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBieXRlcy5Ub0FycmF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgaW50IFJlYWQ3Qml0RW5jb2RlZEludChieXRlW10gYnl0ZXMsIHJlZiBpbnQgb2Zmc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IG51bTEgPSAwO1xyXG4gICAgICAgICAgICBpbnQgbnVtMiA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChudW0yICE9IDM1KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBieXRlIG51bTMgPSBSZWFkQnl0ZShieXRlcywgcmVmIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICBudW0xIHw9ICgoaW50KW51bTMgJiAoaW50KXNieXRlLk1heFZhbHVlKSA8PCBudW0yO1xyXG4gICAgICAgICAgICAgICAgbnVtMiArPSA3O1xyXG4gICAgICAgICAgICAgICAgaWYgKCgoaW50KW51bTMgJiAxMjgpID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbihcImJhZCA3LWJpdCBlbmNvZGVkIGludFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBieXRlW10gR2V0Qnl0ZXMoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSBuZXcgTGlzdDxieXRlPigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciBjIGluIHMuVG9DaGFyQXJyYXkoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkUmFuZ2UoQml0Q29udmVydGVyLkdldEJ5dGVzKGMpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGIgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5SZXZlcnNlPGJ5dGU+KCgoSUVudW1lcmFibGU8Ynl0ZT4pR2V0N0JpdEVuY29kZWRJbnQoYnl0ZXMuQ291bnQpKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkluc2VydCgwLCBiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJ5dGVzLlRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHN0cmluZyBBU0NJSSA9IFwiICFcXFwiIyQlJlxcJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXFxcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9flwiO1xyXG4gICAgICAgIHN0YXRpYyBzdHJpbmcgUmVhZFN0cmluZyhieXRlW10gYnl0ZXMsIHJlZiBpbnQgb2Zmc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IFJlYWQ3Qml0RW5jb2RlZEludChieXRlcywgcmVmIG9mZnNldCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcyA9IFwiXCI7XHJcbiAgICAgICAgICAgIHdoaWxlKGxlbmd0aC0tID4gMCkgcyArPSBBU0NJSVtieXRlc1tvZmZzZXQrK10gLSAzMl07XHJcbiAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIE1vcmVMaW5xO1xyXG51c2luZyBHcmFwaHM7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzQ29yZVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEdyYXBoSU9cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0FkamFjZW5jeU1hdHJpeCh0aGlzIExpc3Q8aW50PiBlZGdlV2VpZ2h0cywgYm9vbCBpc0RpcmVjdGVkID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbiA9IChpbnQpKCgxICsgTWF0aC5TcXJ0KDEgKyA4ICogZWRnZVdlaWdodHMuQ291bnQpKSAvIDIpO1xyXG4gICAgICAgICAgICB2YXIgbSA9IG5ldyBjaGFyW24sIG5dO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBldyA9IGVkZ2VXZWlnaHRzW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0RpcmVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbVtpLCBqXSA9IG1baiwgaV0gPSAnMCc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXcgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbVtpLCBqXSA9ICcxJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXcgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbVtqLCBpXSA9ICcxJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbVtpLCBqXSA9IG1baiwgaV0gPSBldyAhPSAwID8gJzEnIDogJzAnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIG1baSwgaV0gPSAnMCc7XHJcblxyXG4gICAgICAgICAgICB2YXIgcyA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBzICs9IG1baSwgal07XHJcbiAgICAgICAgICAgICAgICBzICs9IEVudmlyb25tZW50Lk5ld0xpbmU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RhdGljIEdyYXBocy5HcmFwaCBHcmFwaEZyb21HcmFwaDYoc3RyaW5nIGdyYXBoNilcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB2YXIgdyA9IEdldEVkZ2VXZWlnaHRzKGdyYXBoNik7XHJcbiAgICAgICAgLy8gICAgdmFyIGggPSBuZXcgQ2hvb3NhYmlsaXR5LkdyYXBoKHcpO1xyXG5cclxuICAgICAgICAvLyAgICB2YXIgZyA9IG5ldyBHcmFwaHMuR3JhcGgoaCwgaC5HZXRTcHJpbmdzTGF5b3V0KDEyKSwgZmFsc2UpO1xyXG4gICAgICAgIC8vICAgIGcuTmFtZSA9IGdyYXBoNjtcclxuICAgICAgICAvLyAgICByZXR1cm4gZztcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RhdGljIEdyYXBocy5HcmFwaCBHcmFwaEZyb21FZGdlV2VpZ2h0U3RyaW5nKHN0cmluZyBzKVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vICAgIHZhciBpc0RpcmVjdGVkID0gcy5Db250YWlucyhcIi0xXCIpO1xyXG5cclxuICAgICAgICAvLyAgICB2YXIgcGFydHMgPSBzLlNwbGl0KCcgJyk7XHJcbiAgICAgICAgLy8gICAgdmFyIGVkZ2VXZWlnaHRzID0gcGFydHMuV2hlcmUocCA9PiAhcC5TdGFydHNXaXRoKFwiW1wiKSkuU2VsZWN0KHggPT4gaW50LlBhcnNlKHgpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgLy8gICAgTGlzdDxpbnQ+IHZlcnRleFdlaWdodHMgPSBudWxsO1xyXG4gICAgICAgIC8vICAgIHZhciB2d3AgPSBwYXJ0cy5GaXJzdE9yRGVmYXVsdChwID0+IHAuU3RhcnRzV2l0aChcIltcIikpO1xyXG4gICAgICAgIC8vICAgIGlmICh2d3AgIT0gbnVsbClcclxuICAgICAgICAvLyAgICAgICAgdmVydGV4V2VpZ2h0cyA9IHZ3cC5UcmltKCdbJykuVHJpbSgnXScpLlNwbGl0KCcsJykuU2VsZWN0KHggPT4gaW50LlBhcnNlKHgpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgLy8gICAgdmFyIGggPSBuZXcgQ2hvb3NhYmlsaXR5LkdyYXBoKGVkZ2VXZWlnaHRzLCB2ZXJ0ZXhXZWlnaHRzKTtcclxuXHJcbiAgICAgICAgLy8gICAgcmV0dXJuIG5ldyBHcmFwaHMuR3JhcGgoaCwgaC5HZXRTcHJpbmdzTGF5b3V0KDEyKSwgaXNEaXJlY3RlZCk7XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIC8vcHVibGljIHN0YXRpYyBMaXN0PGludD4gR2V0RWRnZVdlaWdodHMoc3RyaW5nIGdyYXBoNilcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB2YXIgY2hhcnMgPSBncmFwaDYuVG9DaGFyQXJyYXkoKTtcclxuXHJcbiAgICAgICAgLy8gICAgdmFyIGJ5dGVzID0gVVRGOEVuY29kaW5nLlVURjguR2V0Qnl0ZXMoY2hhcnMpO1xyXG5cclxuICAgICAgICAvLyAgICB2YXIgTiA9IGJ5dGVzWzBdIC0gNjM7XHJcbiAgICAgICAgLy8gICAgdmFyIGggPSBOICogKE4gLSAxKSAvIDI7XHJcbiAgICAgICAgLy8gICAgdmFyIHcgPSBieXRlcy5Ta2lwKDEpLlNlbGVjdE1hbnkoYiA9PiBMb3c2KChieXRlKShiIC0gNjMpKSkuVGFrZShoKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgLy8gICAgdmFyIHAgPSBSb3dUb0NvbHVtblBlcm11dGF0aW9uKE4pLlRvTGlzdCgpO1xyXG4gICAgICAgIC8vICAgIHZhciB3cCA9IG5ldyBMaXN0PGludD4oaCk7XHJcblxyXG4gICAgICAgIC8vICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcC5Db3VudDsgaSsrKVxyXG4gICAgICAgIC8vICAgICAgICB3cC5BZGQod1twW2ldXSk7XHJcblxyXG4gICAgICAgIC8vICAgIHJldHVybiB3cDtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RhdGljIGJvb2xbLF0gR2V0QWRqYWNlbmN5TWF0cml4KHN0cmluZyBhZGphY2VuY3lMaXN0U3RyaW5nKVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShhZGphY2VuY3lMaXN0U3RyaW5nKSlcclxuICAgICAgICAvLyAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIC8vICAgIHRyeVxyXG4gICAgICAgIC8vICAgIHtcclxuICAgICAgICAvLyAgICAgICAgdmFyIGxpbmVzID0gYWRqYWNlbmN5TGlzdFN0cmluZy5TcGxpdChuZXdbXSB7IEVudmlyb25tZW50Lk5ld0xpbmUgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICB2YXIgYWRqYWNlbmN5TGlzdCA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PigpO1xyXG4gICAgICAgIC8vICAgICAgICBmb3JlYWNoICh2YXIgbGluZSBpbiBsaW5lcy5XaGVyZShsID0+IGwuQ29udGFpbnMoXCI6XCIpKSlcclxuICAgICAgICAvLyAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgdmFyIGNodW5rcyA9IGxpbmUuU3BsaXQoJzonLCAnLCcpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgICAgIGFkamFjZW5jeUxpc3RbaW50LlBhcnNlKGNodW5rc1swXSldID0gY2h1bmtzLlNraXAoMSkuU2VsZWN0KGMgPT4gaW50LlBhcnNlKGMpKS5Ub0xpc3QoKTtcclxuICAgICAgICAvLyAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgICAgICAgdmFyIG1pbiA9IGFkamFjZW5jeUxpc3QuTWluKGt2cCA9PiBrdnAuS2V5KTtcclxuICAgICAgICAvLyAgICAgICAgdmFyIG1heCA9IGFkamFjZW5jeUxpc3QuTWF4KGt2cCA9PiBrdnAuS2V5KTtcclxuICAgICAgICAvLyAgICAgICAgdmFyIE4gPSBtYXggKyAxIC0gbWluO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgdmFyIGFkamFjZW5jeU1hdHJpeCA9IG5ldyBib29sW04sIE5dO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgZm9yZWFjaCAodmFyIGt2cCBpbiBhZGphY2VuY3lMaXN0KVxyXG4gICAgICAgIC8vICAgICAgICAgICAgZm9yZWFjaCAodmFyIG5laWdoYm9yIGluIGt2cC5WYWx1ZSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICBhZGphY2VuY3lNYXRyaXhba3ZwLktleSAtIG1pbiwgbmVpZ2hib3IgLSBtaW5dID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgIHJldHVybiBhZGphY2VuY3lNYXRyaXg7XHJcbiAgICAgICAgLy8gICAgfVxyXG4gICAgICAgIC8vICAgIGNhdGNoIHsgfVxyXG5cclxuICAgICAgICAvLyAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9HcmFwaDYodGhpcyBHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGcuR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3RyaW5nIEFTQ0lJID0gXCIgIVxcXCIjJCUmXFwnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xcXFxdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+XCI7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9HcmFwaDYodGhpcyBMaXN0PGludD4gdylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuID0gKGludCkoKDEgKyBNYXRoLlNxcnQoMSArIDggKiB3LkNvdW50KSkgLyAyKTtcclxuICAgICAgICAgICAgaWYgKG4gPiA2MilcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbihcImkgaGF2ZSB5ZXQgdG8gd3JpdGUvcmVhZCBncmFwaDYgZmlsZXMgd2l0aCBtb3JlIHRoYW4gNjIgdmVydGljZXMuXCIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHAgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KFJvd1RvQ29sdW1uUGVybXV0YXRpb24obikpO1xyXG4gICAgICAgICAgICB2YXIgd3AgPSBuZXcgTGlzdDxpbnQ+KHcuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB3cC5BZGQoTWF0aC5BYnMod1twLkluZGV4T2YoaSldKSk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAod3AuQ291bnQgJSA2ICE9IDApXHJcbiAgICAgICAgICAgICAgICB3cC5BZGQoMCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYmIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvQXJyYXk8Ynl0ZT4oTW9yZUxpbnEuTW9yZUVudW1lcmFibGUuUHJlcGVuZDxieXRlPih3cC5CYXRjaDxpbnQsIGJ5dGU+KDYsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PiwgYnl0ZT4pKGJpdHMgPT4gKGJ5dGUpKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGludCwgaW50PixpbnQ+KE1vcmVMaW5xLk1vcmVFbnVtZXJhYmxlLkluZGV4PGludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5SZXZlcnNlPGludD4oYml0cykpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGludCwgaW50PiwgaW50PikocGFpciA9PiBwYWlyLlZhbHVlIDw8IHBhaXIuS2V5KSkuU3VtKCkgKyA2MykpKSwoYnl0ZSkobiArIDYzKSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCJcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Ynl0ZSxzdHJpbmc+KGJiLChnbG9iYWw6OlN5c3RlbS5GdW5jPGJ5dGUsIHN0cmluZz4pKGIgPT4gQVNDSUlbYiAtIDMyXS5Ub1N0cmluZygpKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPGludD4gUm93VG9Db2x1bW5QZXJtdXRhdGlvbihpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuIC0gMTsgaisrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IHg7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4gLSAxIC0gajsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiB5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB5ICs9IDEgKyBqICsgaTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB4ICs9IDIgKyBqO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBMb3c2KGJ5dGUgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSA1OyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiAoYiAmICgxIDw8IGkpKSA+PiBpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIjcmVnaW9uIExpY2Vuc2UgYW5kIFRlcm1zXHJcbi8vIE1vcmVMSU5RIC0gRXh0ZW5zaW9ucyB0byBMSU5RIHRvIE9iamVjdHNcclxuLy8gQ29weXJpZ2h0IChjKSAyMDA4LTIwMTEgSm9uYXRoYW4gU2tlZXQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIFxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4vLyBcclxuLy8gICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4vLyBcclxuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4jZW5kcmVnaW9uXHJcblxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG5cclxubmFtZXNwYWNlIE1vcmVMaW5xXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgcGFydGlhbCBjbGFzcyBNb3JlRW51bWVyYWJsZVxyXG4gICAge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gQmF0Y2hlcyB0aGUgc291cmNlIHNlcXVlbmNlIGludG8gc2l6ZWQgYnVja2V0cy5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8dHlwZXBhcmFtIG5hbWU9XCJUU291cmNlXCI+VHlwZSBvZiBlbGVtZW50cyBpbiA8cGFyYW1yZWYgbmFtZT1cInNvdXJjZVwiLz4gc2VxdWVuY2UuPC90eXBlcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic291cmNlXCI+VGhlIHNvdXJjZSBzZXF1ZW5jZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNpemVcIj5TaXplIG9mIGJ1Y2tldHMuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+QSBzZXF1ZW5jZSBvZiBlcXVhbGx5IHNpemVkIGJ1Y2tldHMgY29udGFpbmluZyBlbGVtZW50cyBvZiB0aGUgc291cmNlIGNvbGxlY3Rpb24uPC9yZXR1cm5zPlxyXG4gICAgICAgIC8vLyA8cmVtYXJrcz4gVGhpcyBvcGVyYXRvciB1c2VzIGRlZmVycmVkIGV4ZWN1dGlvbiBhbmQgc3RyZWFtcyBpdHMgcmVzdWx0cyAoYnVja2V0cyBhbmQgYnVja2V0IGNvbnRlbnQpLjwvcmVtYXJrcz5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPElFbnVtZXJhYmxlPFRTb3VyY2U+PiBCYXRjaDxUU291cmNlPih0aGlzIElFbnVtZXJhYmxlPFRTb3VyY2U+IHNvdXJjZSwgaW50IHNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQmF0Y2g8VFNvdXJjZSxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFRTb3VyY2U+Pihzb3VyY2UsIHNpemUsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VFNvdXJjZT4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VFNvdXJjZT4+KSh4ID0+IHgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gQmF0Y2hlcyB0aGUgc291cmNlIHNlcXVlbmNlIGludG8gc2l6ZWQgYnVja2V0cyBhbmQgYXBwbGllcyBhIHByb2plY3Rpb24gdG8gZWFjaCBidWNrZXQuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHR5cGVwYXJhbSBuYW1lPVwiVFNvdXJjZVwiPlR5cGUgb2YgZWxlbWVudHMgaW4gPHBhcmFtcmVmIG5hbWU9XCJzb3VyY2VcIi8+IHNlcXVlbmNlLjwvdHlwZXBhcmFtPlxyXG4gICAgICAgIC8vLyA8dHlwZXBhcmFtIG5hbWU9XCJUUmVzdWx0XCI+VHlwZSBvZiByZXN1bHQgcmV0dXJuZWQgYnkgPHBhcmFtcmVmIG5hbWU9XCJyZXN1bHRTZWxlY3RvclwiLz4uPC90eXBlcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic291cmNlXCI+VGhlIHNvdXJjZSBzZXF1ZW5jZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNpemVcIj5TaXplIG9mIGJ1Y2tldHMuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJyZXN1bHRTZWxlY3RvclwiPlRoZSBwcm9qZWN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggYnVja2V0LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPkEgc2VxdWVuY2Ugb2YgcHJvamVjdGlvbnMgb24gZXF1YWxseSBzaXplZCBidWNrZXRzIGNvbnRhaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBjb2xsZWN0aW9uLjwvcmV0dXJucz5cclxuICAgICAgICAvLy8gPHJlbWFya3M+IFRoaXMgb3BlcmF0b3IgdXNlcyBkZWZlcnJlZCBleGVjdXRpb24gYW5kIHN0cmVhbXMgaXRzIHJlc3VsdHMgKGJ1Y2tldHMgYW5kIGJ1Y2tldCBjb250ZW50KS48L3JlbWFya3M+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxUUmVzdWx0PiBCYXRjaDxUU291cmNlLCBUUmVzdWx0Pih0aGlzIElFbnVtZXJhYmxlPFRTb3VyY2U+IHNvdXJjZSwgaW50IHNpemUsXHJcbiAgICAgICAgICAgIEZ1bmM8SUVudW1lcmFibGU8VFNvdXJjZT4sIFRSZXN1bHQ+IHJlc3VsdFNlbGVjdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJhdGNoSW1wbDxUU291cmNlLFRSZXN1bHQ+KHNvdXJjZSwgc2l6ZSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUU291cmNlPiwgVFJlc3VsdD4pcmVzdWx0U2VsZWN0b3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgSUVudW1lcmFibGU8VFJlc3VsdD4gQmF0Y2hJbXBsPFRTb3VyY2UsIFRSZXN1bHQ+KHRoaXMgSUVudW1lcmFibGU8VFNvdXJjZT4gc291cmNlLCBpbnQgc2l6ZSxcclxuICAgICAgICAgICAgRnVuYzxJRW51bWVyYWJsZTxUU291cmNlPiwgVFJlc3VsdD4gcmVzdWx0U2VsZWN0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUU291cmNlW10gYnVja2V0ID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIHNvdXJjZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ1Y2tldCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldCA9IG5ldyBUU291cmNlW3NpemVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGJ1Y2tldFtjb3VudCsrXSA9IGl0ZW07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGJ1Y2tldCBpcyBmdWxseSBidWZmZXJlZCBiZWZvcmUgaXQncyB5aWVsZGVkXHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgIT0gc2l6ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QgaXMgbmVjZXNzYXJ5IHNvIGJ1Y2tldCBjb250ZW50cyBhcmUgc3RyZWFtZWQgdG9vXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gcmVzdWx0U2VsZWN0b3IoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8VFNvdXJjZSxUU291cmNlPihidWNrZXQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VFNvdXJjZSwgVFNvdXJjZT4pKHggPT4geCkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBidWNrZXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgY291bnQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIGxhc3QgYnVja2V0IHdpdGggYWxsIHJlbWFpbmluZyBlbGVtZW50c1xyXG4gICAgICAgICAgICBpZiAoYnVja2V0ICE9IG51bGwgJiYgY291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gcmVzdWx0U2VsZWN0b3IoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPFRTb3VyY2U+KGJ1Y2tldCxjb3VudCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8gUXVpY2tMWiBkYXRhIGNvbXByZXNzaW9uIGxpYnJhcnlcclxuLy8gQ29weXJpZ2h0IChDKSAyMDA2LTIwMTEgTGFzc2UgTWlra2VsIFJlaW5ob2xkXHJcbi8vIGxhckBxdWlja2x6LmNvbVxyXG4vL1xyXG4vLyBRdWlja0xaIGNhbiBiZSB1c2VkIGZvciBmcmVlIHVuZGVyIHRoZSBHUEwgMSwgMiBvciAzIGxpY2Vuc2UgKHdoZXJlIGFueXRoaW5nIFxyXG4vLyByZWxlYXNlZCBpbnRvIHB1YmxpYyBtdXN0IGJlIG9wZW4gc291cmNlKSBvciB1bmRlciBhIGNvbW1lcmNpYWwgbGljZW5zZSBpZiBzdWNoIFxyXG4vLyBoYXMgYmVlbiBhY3F1aXJlZCAoc2VlIGh0dHA6Ly93d3cucXVpY2tsei5jb20vb3JkZXIuaHRtbCkuIFRoZSBjb21tZXJjaWFsIGxpY2Vuc2UgXHJcbi8vIGRvZXMgbm90IGNvdmVyIGRlcml2ZWQgb3IgcG9ydGVkIHZlcnNpb25zIGNyZWF0ZWQgYnkgdGhpcmQgcGFydGllcyB1bmRlciBHUEwuXHJcbi8vXHJcbi8vIE9ubHkgYSBzdWJzZXQgb2YgdGhlIEMgbGlicmFyeSBoYXMgYmVlbiBwb3J0ZWQsIG5hbWVseSBsZXZlbCAxIGFuZCAzIG5vdCBpbiBcclxuLy8gc3RyZWFtaW5nIG1vZGUuIFxyXG4vL1xyXG4vLyBWZXJzaW9uOiAxLjUuMCBmaW5hbFxyXG5cclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbnN0YXRpYyBjbGFzcyBRdWlja0xaXHJcbntcclxuICAgIHB1YmxpYyBjb25zdCBpbnQgUUxaX1ZFUlNJT05fTUFKT1IgPSAxO1xyXG4gICAgcHVibGljIGNvbnN0IGludCBRTFpfVkVSU0lPTl9NSU5PUiA9IDU7XHJcbiAgICBwdWJsaWMgY29uc3QgaW50IFFMWl9WRVJTSU9OX1JFVklTSU9OID0gMDtcclxuXHJcbiAgICAvLyBTdHJlYW1pbmcgbW9kZSBub3Qgc3VwcG9ydGVkXHJcbiAgICBwdWJsaWMgY29uc3QgaW50IFFMWl9TVFJFQU1JTkdfQlVGRkVSID0gMDtcclxuXHJcbiAgICAvLyBCb3VuZHMgY2hlY2tpbmcgbm90IHN1cHBvcnRlZCAgVXNlIHRyeS4uLmNhdGNoIGluc3RlYWRcclxuICAgIHB1YmxpYyBjb25zdCBpbnQgUUxaX01FTU9SWV9TQUZFID0gMDtcclxuXHJcbiAgICAvLyBEZWNyZWFzZSBRTFpfUE9JTlRFUlNfMyB0byBpbmNyZWFzZSBsZXZlbCAzIGNvbXByZXNzaW9uIHNwZWVkLiBEbyBub3QgZWRpdCBhbnkgb3RoZXIgdmFsdWVzIVxyXG4gICAgcHJpdmF0ZSBjb25zdCBpbnQgSEFTSF9WQUxVRVMgPSA0MDk2O1xyXG4gICAgcHJpdmF0ZSBjb25zdCBpbnQgTUlOT0ZGU0VUID0gMjtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IFVOQ09ORElUSU9OQUxfTUFUQ0hMRU4gPSA2O1xyXG4gICAgcHJpdmF0ZSBjb25zdCBpbnQgVU5DT01QUkVTU0VEX0VORCA9IDQ7XHJcbiAgICBwcml2YXRlIGNvbnN0IGludCBDV09SRF9MRU4gPSA0O1xyXG4gICAgcHJpdmF0ZSBjb25zdCBpbnQgREVGQVVMVF9IRUFERVJMRU4gPSA5O1xyXG4gICAgcHJpdmF0ZSBjb25zdCBpbnQgUUxaX1BPSU5URVJTXzEgPSAxO1xyXG4gICAgcHJpdmF0ZSBjb25zdCBpbnQgUUxaX1BPSU5URVJTXzMgPSAxNjtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBpbnQgaGVhZGVyTGVuKGJ5dGVbXSBzb3VyY2UpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuICgoc291cmNlWzBdICYgMikgPT0gMikgPyA5IDogMztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGludCBzaXplRGVjb21wcmVzc2VkKGJ5dGVbXSBzb3VyY2UpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGhlYWRlckxlbihzb3VyY2UpID09IDkpXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VbNV0gfCAoc291cmNlWzZdIDw8IDgpIHwgKHNvdXJjZVs3XSA8PCAxNikgfCAoc291cmNlWzhdIDw8IDI0KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VbMl07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBpbnQgc2l6ZUNvbXByZXNzZWQoYnl0ZVtdIHNvdXJjZSlcclxuICAgIHtcclxuICAgICAgICBpZiAoaGVhZGVyTGVuKHNvdXJjZSkgPT0gOSlcclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZVsxXSB8IChzb3VyY2VbMl0gPDwgOCkgfCAoc291cmNlWzNdIDw8IDE2KSB8IChzb3VyY2VbNF0gPDwgMjQpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZVsxXTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHdyaXRlX2hlYWRlcihieXRlW10gZHN0LCBpbnQgbGV2ZWwsIGJvb2wgY29tcHJlc3NpYmxlLCBpbnQgc2l6ZV9jb21wcmVzc2VkLCBpbnQgc2l6ZV9kZWNvbXByZXNzZWQpXHJcbiAgICB7XHJcbiAgICAgICAgZHN0WzBdID0gKGJ5dGUpKDIgfCAoY29tcHJlc3NpYmxlID8gMSA6IDApKTtcclxuICAgICAgICBkc3RbMF0gfD0gKGJ5dGUpKGxldmVsIDw8IDIpO1xyXG4gICAgICAgIGRzdFswXSB8PSAoMSA8PCA2KTtcclxuICAgICAgICBkc3RbMF0gfD0gKDAgPDwgNCk7XHJcbiAgICAgICAgZmFzdF93cml0ZShkc3QsIDEsIHNpemVfZGVjb21wcmVzc2VkLCA0KTtcclxuICAgICAgICBmYXN0X3dyaXRlKGRzdCwgNSwgc2l6ZV9jb21wcmVzc2VkLCA0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ5dGVbXSBjb21wcmVzcyhieXRlW10gc291cmNlLCBpbnQgbGV2ZWwgPSAxKVxyXG4gICAge1xyXG4gICAgICAgIGludCBzcmMgPSAwO1xyXG4gICAgICAgIGludCBkc3QgPSBERUZBVUxUX0hFQURFUkxFTiArIENXT1JEX0xFTjtcclxuICAgICAgICB1aW50IGN3b3JkX3ZhbCA9IDB4ODAwMDAwMDA7XHJcbiAgICAgICAgaW50IGN3b3JkX3B0ciA9IERFRkFVTFRfSEVBREVSTEVOO1xyXG4gICAgICAgIGJ5dGVbXSBkZXN0aW5hdGlvbiA9IG5ldyBieXRlW3NvdXJjZS5MZW5ndGggKyA0MDBdO1xyXG4gICAgICAgIGludFssXSBoYXNodGFibGU7XHJcbiAgICAgICAgaW50W10gY2FjaGV0YWJsZSA9IG5ldyBpbnRbSEFTSF9WQUxVRVNdO1xyXG4gICAgICAgIGJ5dGVbXSBoYXNoX2NvdW50ZXIgPSBuZXcgYnl0ZVtIQVNIX1ZBTFVFU107XHJcbiAgICAgICAgYnl0ZVtdIGQyO1xyXG4gICAgICAgIGludCBmZXRjaCA9IDA7XHJcbiAgICAgICAgaW50IGxhc3RfbWF0Y2hzdGFydCA9IChzb3VyY2UuTGVuZ3RoIC0gVU5DT05ESVRJT05BTF9NQVRDSExFTiAtIFVOQ09NUFJFU1NFRF9FTkQgLSAxKTtcclxuICAgICAgICBpbnQgbGl0cyA9IDA7XHJcblxyXG4gICAgICAgIGlmIChsZXZlbCAhPSAxICYmIGxldmVsICE9IDMpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIkMjIHZlcnNpb24gb25seSBzdXBwb3J0cyBsZXZlbCAxIGFuZCAzXCIpO1xyXG5cclxuICAgICAgICBpZiAobGV2ZWwgPT0gMSlcclxuICAgICAgICAgICAgaGFzaHRhYmxlID0gbmV3IGludFtIQVNIX1ZBTFVFUywgUUxaX1BPSU5URVJTXzFdO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgaGFzaHRhYmxlID0gbmV3IGludFtIQVNIX1ZBTFVFUywgUUxaX1BPSU5URVJTXzNdO1xyXG5cclxuICAgICAgICBpZiAoc291cmNlLkxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGJ5dGVbMF07XHJcblxyXG4gICAgICAgIGlmIChzcmMgPD0gbGFzdF9tYXRjaHN0YXJ0KVxyXG4gICAgICAgICAgICBmZXRjaCA9IHNvdXJjZVtzcmNdIHwgKHNvdXJjZVtzcmMgKyAxXSA8PCA4KSB8IChzb3VyY2Vbc3JjICsgMl0gPDwgMTYpO1xyXG5cclxuICAgICAgICB3aGlsZSAoc3JjIDw9IGxhc3RfbWF0Y2hzdGFydClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgoY3dvcmRfdmFsICYgMSkgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNyYyA+IHNvdXJjZS5MZW5ndGggPj4gMSAmJiBkc3QgPiBzcmMgLSAoc3JjID4+IDUpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGQyID0gbmV3IGJ5dGVbc291cmNlLkxlbmd0aCArIERFRkFVTFRfSEVBREVSTEVOXTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZV9oZWFkZXIoZDIsIGxldmVsLCBmYWxzZSwgc291cmNlLkxlbmd0aCwgc291cmNlLkxlbmd0aCArIERFRkFVTFRfSEVBREVSTEVOKTtcclxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uQXJyYXkuQ29weShzb3VyY2UsIDAsIGQyLCBERUZBVUxUX0hFQURFUkxFTiwgc291cmNlLkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGN3b3JkX3B0ciwgKGludCkoKGN3b3JkX3ZhbCA+PiAxKSB8IDB4ODAwMDAwMDApLCA0KTtcclxuICAgICAgICAgICAgICAgIGN3b3JkX3B0ciA9IGRzdDtcclxuICAgICAgICAgICAgICAgIGRzdCArPSBDV09SRF9MRU47XHJcbiAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAweDgwMDAwMDAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobGV2ZWwgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGhhc2ggPSAoKGZldGNoID4+IDEyKSBeIGZldGNoKSAmIChIQVNIX1ZBTFVFUyAtIDEpO1xyXG4gICAgICAgICAgICAgICAgaW50IG8gPSBoYXNodGFibGVbaGFzaCwgMF07XHJcbiAgICAgICAgICAgICAgICBpbnQgY2FjaGUgPSBjYWNoZXRhYmxlW2hhc2hdIF4gZmV0Y2g7XHJcbiAgICAgICAgICAgICAgICBjYWNoZXRhYmxlW2hhc2hdID0gZmV0Y2g7XHJcbiAgICAgICAgICAgICAgICBoYXNodGFibGVbaGFzaCwgMF0gPSBzcmM7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlID09IDAgJiYgaGFzaF9jb3VudGVyW2hhc2hdICE9IDAgJiYgKHNyYyAtIG8gPiBNSU5PRkZTRVQgfHwgKHNyYyA9PSBvICsgMSAmJiBsaXRzID49IDMgJiYgc3JjID4gMyAmJiBzb3VyY2Vbc3JjXSA9PSBzb3VyY2Vbc3JjIC0gM10gJiYgc291cmNlW3NyY10gPT0gc291cmNlW3NyYyAtIDJdICYmIHNvdXJjZVtzcmNdID09IHNvdXJjZVtzcmMgLSAxXSAmJiBzb3VyY2Vbc3JjXSA9PSBzb3VyY2Vbc3JjICsgMV0gJiYgc291cmNlW3NyY10gPT0gc291cmNlW3NyYyArIDJdKSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gKChjd29yZF92YWwgPj4gMSkgfCAweDgwMDAwMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlW28gKyAzXSAhPSBzb3VyY2Vbc3JjICsgM10pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQgZiA9IDMgLSAyIHwgKGhhc2ggPDwgNCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdCArIDBdID0gKGJ5dGUpKGYgPj4gMCAqIDgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3QgKyAxXSA9IChieXRlKShmID4+IDEgKiA4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdCArPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQgb2xkX3NyYyA9IHNyYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IHJlbWFpbmluZyA9ICgoc291cmNlLkxlbmd0aCAtIFVOQ09NUFJFU1NFRF9FTkQgLSBzcmMgKyAxIC0gMSkgPiAyNTUgPyAyNTUgOiAoc291cmNlLkxlbmd0aCAtIFVOQ09NUFJFU1NFRF9FTkQgLSBzcmMgKyAxIC0gMSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VbbyArIHNyYyAtIG9sZF9zcmNdID09IHNvdXJjZVtzcmNdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VbbyArIHNyYyAtIG9sZF9zcmNdID09IHNvdXJjZVtzcmNdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChzb3VyY2VbbyArIChzcmMgLSBvbGRfc3JjKV0gPT0gc291cmNlW3NyY10gJiYgKHNyYyAtIG9sZF9zcmMpIDwgcmVtYWluaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IG1hdGNobGVuID0gc3JjIC0gb2xkX3NyYztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2ggPDw9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGxlbiA8IDE4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgZiA9IChoYXNoIHwgKG1hdGNobGVuIC0gMikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0ICsgMF0gPSAoYnl0ZSkoZiA+PiAwICogOCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3QgKyAxXSA9IChieXRlKShmID4+IDEgKiA4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzdCArPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFzdF93cml0ZShkZXN0aW5hdGlvbiwgZHN0LCBoYXNoIHwgKG1hdGNobGVuIDw8IDE2KSwgMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3QgKz0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmZXRjaCA9IHNvdXJjZVtzcmNdIHwgKHNvdXJjZVtzcmMgKyAxXSA8PCA4KSB8IChzb3VyY2Vbc3JjICsgMl0gPDwgMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpdHMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpdHMrKztcclxuICAgICAgICAgICAgICAgICAgICBoYXNoX2NvdW50ZXJbaGFzaF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdF0gPSBzb3VyY2Vbc3JjXTtcclxuICAgICAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAoY3dvcmRfdmFsID4+IDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNyYysrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRzdCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGZldGNoID0gKChmZXRjaCA+PiA4KSAmIDB4ZmZmZikgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmZXRjaCA9IHNvdXJjZVtzcmNdIHwgKHNvdXJjZVtzcmMgKyAxXSA8PCA4KSB8IChzb3VyY2Vbc3JjICsgMl0gPDwgMTYpO1xyXG5cclxuICAgICAgICAgICAgICAgIGludCBvLCBvZmZzZXQyO1xyXG4gICAgICAgICAgICAgICAgaW50IG1hdGNobGVuLCBrLCBtLCBiZXN0X2sgPSAwO1xyXG4gICAgICAgICAgICAgICAgYnl0ZSBjO1xyXG4gICAgICAgICAgICAgICAgaW50IHJlbWFpbmluZyA9ICgoc291cmNlLkxlbmd0aCAtIFVOQ09NUFJFU1NFRF9FTkQgLSBzcmMgKyAxIC0gMSkgPiAyNTUgPyAyNTUgOiAoc291cmNlLkxlbmd0aCAtIFVOQ09NUFJFU1NFRF9FTkQgLSBzcmMgKyAxIC0gMSkpO1xyXG4gICAgICAgICAgICAgICAgaW50IGhhc2ggPSAoKGZldGNoID4+IDEyKSBeIGZldGNoKSAmIChIQVNIX1ZBTFVFUyAtIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIGMgPSBoYXNoX2NvdW50ZXJbaGFzaF07XHJcbiAgICAgICAgICAgICAgICBtYXRjaGxlbiA9IDA7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQyID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBRTFpfUE9JTlRFUlNfMyAmJiBjID4gazsgaysrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG8gPSBoYXNodGFibGVbaGFzaCwga107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChieXRlKWZldGNoID09IHNvdXJjZVtvXSAmJiAoYnl0ZSkoZmV0Y2ggPj4gOCkgPT0gc291cmNlW28gKyAxXSAmJiAoYnl0ZSkoZmV0Y2ggPj4gMTYpID09IHNvdXJjZVtvICsgMl0gJiYgbyA8IHNyYyAtIE1JTk9GRlNFVClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc291cmNlW28gKyBtXSA9PSBzb3VyY2Vbc3JjICsgbV0gJiYgbSA8IHJlbWFpbmluZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0rKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChtID4gbWF0Y2hsZW4pIHx8IChtID09IG1hdGNobGVuICYmIG8gPiBvZmZzZXQyKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0MiA9IG87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGxlbiA9IG07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0X2sgPSBrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbyA9IG9mZnNldDI7XHJcbiAgICAgICAgICAgICAgICBoYXNodGFibGVbaGFzaCwgYyAmIChRTFpfUE9JTlRFUlNfMyAtIDEpXSA9IHNyYztcclxuICAgICAgICAgICAgICAgIGMrKztcclxuICAgICAgICAgICAgICAgIGhhc2hfY291bnRlcltoYXNoXSA9IGM7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNobGVuID49IDMgJiYgc3JjIC0gbyA8IDEzMTA3MSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgb2Zmc2V0ID0gc3JjIC0gbztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgdSA9IDE7IHUgPCBtYXRjaGxlbjsgdSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSBzb3VyY2Vbc3JjICsgdV0gfCAoc291cmNlW3NyYyArIHUgKyAxXSA8PCA4KSB8IChzb3VyY2Vbc3JjICsgdSArIDJdIDw8IDE2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaCA9ICgoZmV0Y2ggPj4gMTIpIF4gZmV0Y2gpICYgKEhBU0hfVkFMVUVTIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBoYXNoX2NvdW50ZXJbaGFzaF0rKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaHRhYmxlW2hhc2gsIGMgJiAoUUxaX1BPSU5URVJTXzMgLSAxKV0gPSBzcmMgKyB1O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3JjICs9IG1hdGNobGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9ICgoY3dvcmRfdmFsID4+IDEpIHwgMHg4MDAwMDAwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGxlbiA9PSAzICYmIG9mZnNldCA8PSA2MylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGRzdCwgb2Zmc2V0IDw8IDIsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3QrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobWF0Y2hsZW4gPT0gMyAmJiBvZmZzZXQgPD0gMTYzODMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBkc3QsIChvZmZzZXQgPDwgMikgfCAxLCAyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHN0ICs9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNobGVuIDw9IDE4ICYmIG9mZnNldCA8PSAxMDIzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFzdF93cml0ZShkZXN0aW5hdGlvbiwgZHN0LCAoKG1hdGNobGVuIC0gMykgPDwgMikgfCAob2Zmc2V0IDw8IDYpIHwgMiwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdCArPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChtYXRjaGxlbiA8PSAzMylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGRzdCwgKChtYXRjaGxlbiAtIDIpIDw8IDIpIHwgKG9mZnNldCA8PCA3KSB8IDMsIDMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3QgKz0gMztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFzdF93cml0ZShkZXN0aW5hdGlvbiwgZHN0LCAoKG1hdGNobGVuIC0gMykgPDwgNykgfCAob2Zmc2V0IDw8IDE1KSB8IDMsIDQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3QgKz0gNDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGl0cyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0XSA9IHNvdXJjZVtzcmNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9IChjd29yZF92YWwgPj4gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjKys7XHJcbiAgICAgICAgICAgICAgICAgICAgZHN0Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKHNyYyA8PSBzb3VyY2UuTGVuZ3RoIC0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgoY3dvcmRfdmFsICYgMSkgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZmFzdF93cml0ZShkZXN0aW5hdGlvbiwgY3dvcmRfcHRyLCAoaW50KSgoY3dvcmRfdmFsID4+IDEpIHwgMHg4MDAwMDAwMCksIDQpO1xyXG4gICAgICAgICAgICAgICAgY3dvcmRfcHRyID0gZHN0O1xyXG4gICAgICAgICAgICAgICAgZHN0ICs9IENXT1JEX0xFTjtcclxuICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9IDB4ODAwMDAwMDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdF0gPSBzb3VyY2Vbc3JjXTtcclxuICAgICAgICAgICAgc3JjKys7XHJcbiAgICAgICAgICAgIGRzdCsrO1xyXG4gICAgICAgICAgICBjd29yZF92YWwgPSAoY3dvcmRfdmFsID4+IDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAoKGN3b3JkX3ZhbCAmIDEpICE9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjd29yZF92YWwgPSAoY3dvcmRfdmFsID4+IDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBjd29yZF9wdHIsIChpbnQpKChjd29yZF92YWwgPj4gMSkgfCAweDgwMDAwMDAwKSwgQ1dPUkRfTEVOKTtcclxuICAgICAgICB3cml0ZV9oZWFkZXIoZGVzdGluYXRpb24sIGxldmVsLCB0cnVlLCBzb3VyY2UuTGVuZ3RoLCBkc3QpO1xyXG4gICAgICAgIGQyID0gbmV3IGJ5dGVbZHN0XTtcclxuICAgICAgICBTeXN0ZW0uQXJyYXkuQ29weShkZXN0aW5hdGlvbiwgZDIsIGRzdCk7XHJcbiAgICAgICAgcmV0dXJuIGQyO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIGZhc3Rfd3JpdGUoYnl0ZVtdIGEsIGludCBpLCBpbnQgdmFsdWUsIGludCBudW1ieXRlcylcclxuICAgIHtcclxuICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG51bWJ5dGVzOyBqKyspXHJcbiAgICAgICAgICAgIGFbaSArIGpdID0gKGJ5dGUpKHZhbHVlID4+IChqICogOCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYnl0ZVtdIGRlY29tcHJlc3MoYnl0ZVtdIHNvdXJjZSlcclxuICAgIHtcclxuICAgICAgICBpbnQgbGV2ZWw7XHJcbiAgICAgICAgaW50IHNpemUgPSBzaXplRGVjb21wcmVzc2VkKHNvdXJjZSk7XHJcbiAgICAgICAgaW50IHNyYyA9IGhlYWRlckxlbihzb3VyY2UpO1xyXG4gICAgICAgIGludCBkc3QgPSAwO1xyXG4gICAgICAgIHVpbnQgY3dvcmRfdmFsID0gMTtcclxuICAgICAgICBieXRlW10gZGVzdGluYXRpb24gPSBuZXcgYnl0ZVtzaXplXTtcclxuICAgICAgICBpbnRbXSBoYXNodGFibGUgPSBuZXcgaW50WzQwOTZdO1xyXG4gICAgICAgIGJ5dGVbXSBoYXNoX2NvdW50ZXIgPSBuZXcgYnl0ZVs0MDk2XTtcclxuICAgICAgICBpbnQgbGFzdF9tYXRjaHN0YXJ0ID0gc2l6ZSAtIFVOQ09ORElUSU9OQUxfTUFUQ0hMRU4gLSBVTkNPTVBSRVNTRURfRU5EIC0gMTtcclxuICAgICAgICBpbnQgbGFzdF9oYXNoZWQgPSAtMTtcclxuICAgICAgICBpbnQgaGFzaDtcclxuICAgICAgICB1aW50IGZldGNoID0gMDtcclxuXHJcbiAgICAgICAgbGV2ZWwgPSAoc291cmNlWzBdID4+IDIpICYgMHgzO1xyXG5cclxuICAgICAgICBpZiAobGV2ZWwgIT0gMSAmJiBsZXZlbCAhPSAzKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJDIyB2ZXJzaW9uIG9ubHkgc3VwcG9ydHMgbGV2ZWwgMSBhbmQgM1wiKTtcclxuXHJcbiAgICAgICAgaWYgKChzb3VyY2VbMF0gJiAxKSAhPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYnl0ZVtdIGQyID0gbmV3IGJ5dGVbc2l6ZV07XHJcbiAgICAgICAgICAgIFN5c3RlbS5BcnJheS5Db3B5KHNvdXJjZSwgaGVhZGVyTGVuKHNvdXJjZSksIGQyLCAwLCBzaXplKTtcclxuICAgICAgICAgICAgcmV0dXJuIGQyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICg7IDsgKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGN3b3JkX3ZhbCA9PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAodWludCkoc291cmNlW3NyY10gfCAoc291cmNlW3NyYyArIDFdIDw8IDgpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNikgfCAoc291cmNlW3NyYyArIDNdIDw8IDI0KSk7XHJcbiAgICAgICAgICAgICAgICBzcmMgKz0gNDtcclxuICAgICAgICAgICAgICAgIGlmIChkc3QgPD0gbGFzdF9tYXRjaHN0YXJ0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsZXZlbCA9PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KSB8IChzb3VyY2Vbc3JjICsgM10gPDwgMjQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKChjd29yZF92YWwgJiAxKSA9PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1aW50IG1hdGNobGVuO1xyXG4gICAgICAgICAgICAgICAgdWludCBvZmZzZXQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9IGN3b3JkX3ZhbCA+PiAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA9PSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc2ggPSAoKGludClmZXRjaCA+PiA0KSAmIDB4ZmZmO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDIgPSAodWludCloYXNodGFibGVbaGFzaF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoZmV0Y2ggJiAweGYpICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGxlbiA9IChmZXRjaCAmIDB4ZikgKyAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSBzb3VyY2Vbc3JjICsgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB1aW50IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGZldGNoICYgMykgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IChmZXRjaCAmIDB4ZmYpID4+IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNobGVuID0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChmZXRjaCAmIDIpID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAoZmV0Y2ggJiAweGZmZmYpID4+IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNobGVuID0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChmZXRjaCAmIDEpID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAoZmV0Y2ggJiAweGZmZmYpID4+IDY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNobGVuID0gKChmZXRjaCA+PiAyKSAmIDE1KSArIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoZmV0Y2ggJiAxMjcpICE9IDMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAoZmV0Y2ggPj4gNykgJiAweDFmZmZmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGxlbiA9ICgoZmV0Y2ggPj4gMikgJiAweDFmKSArIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAoZmV0Y2ggPj4gMTUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGxlbiA9ICgoZmV0Y2ggPj4gNykgJiAyNTUpICsgMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDIgPSAodWludCkoZHN0IC0gb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3QgKyAwXSA9IGRlc3RpbmF0aW9uW29mZnNldDIgKyAwXTtcclxuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdCArIDFdID0gZGVzdGluYXRpb25bb2Zmc2V0MiArIDFdO1xyXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0ICsgMl0gPSBkZXN0aW5hdGlvbltvZmZzZXQyICsgMl07XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDM7IGkgPCBtYXRjaGxlbjsgaSArPSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdCArIGldID0gZGVzdGluYXRpb25bb2Zmc2V0MiArIGldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRzdCArPSAoaW50KW1hdGNobGVuO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA9PSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZldGNoID0gKHVpbnQpKGRlc3RpbmF0aW9uW2xhc3RfaGFzaGVkICsgMV0gfCAoZGVzdGluYXRpb25bbGFzdF9oYXNoZWQgKyAyXSA8PCA4KSB8IChkZXN0aW5hdGlvbltsYXN0X2hhc2hlZCArIDNdIDw8IDE2KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGxhc3RfaGFzaGVkIDwgZHN0IC0gbWF0Y2hsZW4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0X2hhc2hlZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNoID0gKGludCkoKChmZXRjaCA+PiAxMikgXiBmZXRjaCkgJiAoSEFTSF9WQUxVRVMgLSAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2h0YWJsZVtoYXNoXSA9IGxhc3RfaGFzaGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNoX2NvdW50ZXJbaGFzaF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShmZXRjaCA+PiA4ICYgMHhmZmZmIHwgKHVpbnQpKGRlc3RpbmF0aW9uW2xhc3RfaGFzaGVkICsgM10gPDwgMTYpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAodWludCkoc291cmNlW3NyY10gfCAoc291cmNlW3NyYyArIDFdIDw8IDgpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZldGNoID0gKHVpbnQpKHNvdXJjZVtzcmNdIHwgKHNvdXJjZVtzcmMgKyAxXSA8PCA4KSB8IChzb3VyY2Vbc3JjICsgMl0gPDwgMTYpIHwgKHNvdXJjZVtzcmMgKyAzXSA8PCAyNCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGFzdF9oYXNoZWQgPSBkc3QgLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRzdCA8PSBsYXN0X21hdGNoc3RhcnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0XSA9IHNvdXJjZVtzcmNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGRzdCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHNyYyArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9IGN3b3JkX3ZhbCA+PiAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChsYXN0X2hhc2hlZCA8IGRzdCAtIDMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RfaGFzaGVkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgZmV0Y2gyID0gZGVzdGluYXRpb25bbGFzdF9oYXNoZWRdIHwgKGRlc3RpbmF0aW9uW2xhc3RfaGFzaGVkICsgMV0gPDwgOCkgfCAoZGVzdGluYXRpb25bbGFzdF9oYXNoZWQgKyAyXSA8PCAxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoID0gKChmZXRjaDIgPj4gMTIpIF4gZmV0Y2gyKSAmIChIQVNIX1ZBTFVFUyAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaHRhYmxlW2hhc2hdID0gbGFzdF9oYXNoZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoX2NvdW50ZXJbaGFzaF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoID0gKHVpbnQpKGZldGNoID4+IDggJiAweGZmZmYgfCAodWludCkoc291cmNlW3NyYyArIDJdIDw8IDE2KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoID0gKHVpbnQpKGZldGNoID4+IDggJiAweGZmZmYgfCAodWludCkoc291cmNlW3NyYyArIDJdIDw8IDE2KSB8ICh1aW50KShzb3VyY2Vbc3JjICsgM10gPDwgMjQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGRzdCA8PSBzaXplIC0gMSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjd29yZF92YWwgPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IENXT1JEX0xFTjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9IDB4ODAwMDAwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdF0gPSBzb3VyY2Vbc3JjXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHN0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjd29yZF92YWwgPSBjd29yZF92YWwgPj4gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlc3RpbmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gfVxyXG4gIiwidXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEdyYXBocztcclxudXNpbmcgR3JhcGhpY3NMYXllcjtcclxudXNpbmcgTmV3dG9uc29mdC5Kc29uO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIEdyYXBoc0NvcmU7XHJcblxyXG5uYW1lc3BhY2UgVGVzdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQXBwXHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIEhUTUxFbGVtZW50IF9zYWdlQ29udGFpbmVyO1xyXG4gICAgICAgIHN0YXRpYyBIVE1MTElFbGVtZW50IF9uZXdTaGVldFRhYjtcclxuICAgICAgICBzdGF0aWMgc3RyaW5nIF9jdXJyZW50VGFiQ2FudmFzO1xyXG4gICAgICAgIHN0YXRpYyBpbnQgX3RhYklEID0gMTtcclxuXHJcbiAgICAgICAgc3RhdGljIERpY3Rpb25hcnk8c3RyaW5nLCBUYWJDYW52YXM+IF9jYW52YXNMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFRhYkNhbnZhcz4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIE1haW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgV2luZG93Lk9uTG9hZCArPSBPbldpbmRvd0xvYWQ7XHJcbiAgICAgICAgICAgIFdpbmRvdy5PblJlc2l6ZSArPSBPblJlc2l6ZTtcclxuICAgICAgICAgICAgV2luZG93Lk9uRGV2aWNlT3JpZW50YXRpb24gKz0gT25EZXZpY2VPcmllbnRhdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIE9uRGV2aWNlT3JpZW50YXRpb24oRXZlbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE9uTGF5b3V0Q2hhbmdlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBPblJlc2l6ZShFdmVudCBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgT25MYXlvdXRDaGFuZ2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIE9uTGF5b3V0Q2hhbmdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0YyA9IEN1cnJlbnRUYWJDYW52YXM7XHJcbiAgICAgICAgICAgIGlmICh0YyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdGMuT25MYXlvdXRDaGFuZ2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIE9uV2luZG93TG9hZChFdmVudCBlZWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBXaW5kb3cuQWRkRXZlbnRMaXN0ZW5lcihcImNvcHlcIiwgKEFjdGlvbjxFdmVudD4pKChFdmVudCBlKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKGUuVGFyZ2V0IGlzIEhUTUxTcGFuRWxlbWVudCkgfHwgKGUuVGFyZ2V0IGlzIEhUTUxBbmNob3JFbGVtZW50KSlcclxuICAgICAgICAgICAgICAgICAgICBlLlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGMgPSBfY2FudmFzTG9va3VwW19jdXJyZW50VGFiQ2FudmFzXTtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gdGMuR3JhcGhDYW52YXMuRG9Db3B5KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KHMpKVxyXG4gICAgICAgICAgICAgICAgICAgIGUuVG9EeW5hbWljKCkuY2xpcGJvYXJkRGF0YS5zZXREYXRhKFwiVGV4dFwiLCBzKTtcclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgV2luZG93LkFkZEV2ZW50TGlzdGVuZXIoXCJwYXN0ZVwiLCAoQWN0aW9uPEV2ZW50PikoKEV2ZW50IGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGUuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gZS5Ub0R5bmFtaWMoKS5jbGlwYm9hcmREYXRhLmdldERhdGEoXCJUZXh0XCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRjID0gX2NhbnZhc0xvb2t1cFtfY3VycmVudFRhYkNhbnZhc107XHJcbiAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Eb1Bhc3RlKHMgPz8gXCJcIik7XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIGpRdWVyeS5Eb2N1bWVudC5PbihcImtleWRvd25cIiwgKEFjdGlvbjxLZXlib2FyZEV2ZW50PilPbktleURvd24pO1xyXG4gICAgICAgICAgICBqUXVlcnkuRG9jdW1lbnQuT24oXCJjb250ZXh0bWVudVwiLCBcIi5JQW1BR3JhcGhDYW52YXNcIiwgKEFjdGlvbjxFdmVudD4pKChFdmVudCBlKSA9PiB7IGUuUHJldmVudERlZmF1bHQoKTsgfSkpO1xyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBTYWdlXHJcbiAgICAgICAgICAgIF9zYWdlQ29udGFpbmVyID0gRG9jdW1lbnQuR2V0RWxlbWVudEJ5SWQoXCJTYWdlQ29udGFpbmVyXCIpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VNYW51YWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VNYW51YWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VHcmFwaDZcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VHcmFwaDYoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VTcGFyc2U2XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlU3BhcnNlNigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNocm9tYXRpY051bWJlclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNocm9tYXRpY051bWJlcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNocm9tYXRpY1BvbHlub21pYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDaHJvbWF0aWNQb2x5bm9taWFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ29sb3JpbmdcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDb2xvcmluZygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUluZGVwZW5kZW50U2V0XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSW5kZXBlbmRlbnRTZXQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1BlcmZlY3RcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1BlcmZlY3QoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VNYXRjaGluZ1BvbHlub21pYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VNYXRjaGluZ1BvbHlub21pYWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VQYXRod2lkdGhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VQYXRod2lkdGgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VUcmVld2lkdGhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VUcmVld2lkdGgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VUdXR0ZVBvbHlub21pYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VUdXR0ZVBvbHlub21pYWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VWZXJ0ZXhDb3ZlclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVZlcnRleENvdmVyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ2xpcXVlQ29tcGxleFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNsaXF1ZUNvbXBsZXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDbGlxdWVNYXhpbXVtXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQ2xpcXVlTWF4aW11bSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNsaXF1ZU51bWJlclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNsaXF1ZU51bWJlcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNsaXF1ZVBvbHlub21pYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDbGlxdWVQb2x5bm9taWFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQnJpZGdlc1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUJyaWRnZXMoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VHb21vcnlIdVRyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VHb21vcnlIdVRyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VSYW5kb21TcGFubmluZ1RyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VSYW5kb21TcGFubmluZ1RyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VBcGV4VmVydGljZXNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VBcGV4VmVydGljZXMoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0FwZXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0FwZXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0FyY1RyYW5zaXRpdmVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0FyY1RyYW5zaXRpdmUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0FzdGVyb2lkYWxUcmlwbGVGcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNBc3Rlcm9pZGFsVHJpcGxlRnJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQmljb25uZWN0ZWRcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0JpY29ubmVjdGVkKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNCaXBhcnRpdGVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0JpcGFydGl0ZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQmxvY2tHcmFwaFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQmxvY2tHcmFwaCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQ2FydGVzaWFuUHJvZHVjdFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQ2FydGVzaWFuUHJvZHVjdCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzRGlzdGFuY2VSZWd1bGFyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNEaXN0YW5jZVJlZ3VsYXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0VkZ2VUcmFuc2l0aXZlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNFZGdlVHJhbnNpdGl2ZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzRXZlbkhvbGVGcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNFdmVuSG9sZUZyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0ZvcmVzdFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzRm9yZXN0KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNIYWxmVHJhbnNpdGl2ZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzSGFsZlRyYW5zaXRpdmUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0xpbmVHcmFwaFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzTGluZUdyYXBoKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNMb25nQW50aWhvbGVGcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNMb25nQW50aWhvbGVGcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNMb25nSG9sZUZyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0xvbmdIb2xlRnJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzT2RkSG9sZUZyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc09kZEhvbGVGcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNPdmVyZnVsbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzT3ZlcmZ1bGwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1BhcnRpYWxDdWJlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNQYXJ0aWFsQ3ViZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzUHJpbWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1ByaW1lKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNTZW1pU3ltbWV0cmljXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNTZW1pU3ltbWV0cmljKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNTcGxpdFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzU3BsaXQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1N0cm9uZ2x5UmVndWxhclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzU3Ryb25nbHlSZWd1bGFyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNUcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNUcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNUcmlhbmdsZUZyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1RyaWFuZ2xlRnJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzV2Vha2x5Q2hvcmRhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzV2Vha2x5Q2hvcmRhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZU9kZEdpcnRoXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlT2RkR2lydGgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VGcmFjdGlvbmFsQ2hyb21hdGljSW5kZXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VGcmFjdGlvbmFsQ2hyb21hdGljSW5kZXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VIYXNQZXJmZWN0TWF0Y2hpbmdcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VIYXNQZXJmZWN0TWF0Y2hpbmcoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VLaXJjaGhvZmZTeW1hbnppa1BvbHlub21pYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VLaXJjaGhvZmZTeW1hbnppa1BvbHlub21pYWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMb3Zhc3pUaGV0YVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUxvdmFzelRoZXRhKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTWF0Y2hpbmdcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VNYXRjaGluZygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZU1heGltdW1BdmVyYWdlRGVncmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTWF4aW11bUF2ZXJhZ2VEZWdyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VTZWlkZWxBZGphY2VuY3lNYXRyaXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VTZWlkZWxBZGphY2VuY3lNYXRyaXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VOZXR3b3JreEdyYXBoXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTmV0d29ya3hHcmFwaCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUFkamFjZW5jeU1hdHJpeFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUFkamFjZW5jeU1hdHJpeCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUluY2lkZW5jZU1hdHJpeFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUluY2lkZW5jZU1hdHJpeCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZURpc3RhbmNlTWF0cml4XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRGlzdGFuY2VNYXRyaXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VLaXJjaGhvZmZNYXRyaXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VLaXJjaGhvZmZNYXRyaXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VEZW5zaXR5XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRGVuc2l0eSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZU9yZGVyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlT3JkZXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VTaXplXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlU2l6ZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUF2ZXJhZ2VEZWdyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VBdmVyYWdlRGVncmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRGVncmVlU2VxdWVuY2VcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VEZWdyZWVTZXF1ZW5jZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUN5Y2xlQmFzaXNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDeWNsZUJhc2lzKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQWxsUGF0aHNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VBbGxQYXRocygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVRyaWFuZ2xlc0NvdW50XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlVHJpYW5nbGVzQ291bnQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VTcGVjdHJ1bVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVNwZWN0cnVtKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRWlnZW52ZWN0b3JzXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRWlnZW52ZWN0b3JzKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRWlnZW5zcGFjZXNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VFaWdlbnNwYWNlcygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUF1dG9tb3JwaGlzbUdyb3VwXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQXV0b21vcnBoaXNtR3JvdXAoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1ZlcnRleFRyYW5zaXRpdmVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1ZlcnRleFRyYW5zaXRpdmUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDYW5vbmljYWxMYWJlbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNhbm9uaWNhbExhYmVsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNDYXlsZXlcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0NheWxleSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzRXVsZXJpYW5cIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0V1bGVyaWFuKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNQbGFuYXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1BsYW5hcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzUmVndWxhclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzUmVndWxhcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQ2hvcmRhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQ2hvcmRhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQ2lyY3VsYW50XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNDaXJjdWxhbnQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0ludGVydmFsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNJbnRlcnZhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzR2FsbGFpVHJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzR2FsbGFpVHJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQ2xpcXVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNDbGlxdWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0N5Y2xlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNDeWNsZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzSW5kZXBlbmRlbnRTZXRcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0luZGVwZW5kZW50U2V0KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNUcmFuc2l0aXZlbHlSZWR1Y2VkXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNUcmFuc2l0aXZlbHlSZWR1Y2VkKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNFcXVpdGFibGVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0VxdWl0YWJsZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUVjY2VudHJpY2l0eVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUVjY2VudHJpY2l0eSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZVJhZGl1c1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVJhZGl1cygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZURpYW1ldGVyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRGlhbWV0ZXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VHaXJ0aFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUdpcnRoKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRWRnZUNvbm5lY3Rpdml0eVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUVkZ2VDb25uZWN0aXZpdHkoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VWZXJ0ZXhDb25uZWN0aXZpdHlcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VWZXJ0ZXhDb25uZWN0aXZpdHkoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0hhbWlsdG9uaWFuXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNIYW1pbHRvbmlhbigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNoYXJhY3RlcmlzdGljUG9seW5vbWlhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNoYXJhY3RlcmlzdGljUG9seW5vbWlhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUdlbnVzXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlR2VudXMoKSkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gTGF5b3V0XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUxheW91dFNwcmluZ3NcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMYXlvdXRTcHJpbmcoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMYXlvdXRSYW5rZWRcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMYXlvdXRSYW5rZWQoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMYXlvdXRSYW5kb21cIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMYXlvdXRFeHRlbmRSYW5kb21seSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUxheW91dENpcmN1bGFyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTGF5b3V0Q2lyY3VsYXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMYXlvdXRUcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTGF5b3V0VHJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUxheW91dEdyYXBoVml6XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTGF5b3V0R3JhcGh2aXooKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMYXlvdXRQbGFuYXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMYXlvdXRQbGFuYXIoKSkpO1xyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiLk5hbWVkR3JhcGhcIikuT24oXCJjbGlja1wiLCAoQWN0aW9uPEV2ZW50PikoKEV2ZW50IGVlKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMb2FkTmFtZWRHcmFwaCgoKEhUTUxFbGVtZW50KWVlLkN1cnJlbnRUYXJnZXQpLlRleHRDb250ZW50KTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIE5ld1RhYigpO1xyXG4gICAgICAgICAgICBBZGROZXdTaGVldFRhYigpO1xyXG5cclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIi5uYXYtdGFic1wiKS5PbihcImNsaWNrXCIsIFwiYVwiLCAoQWN0aW9uPEV2ZW50PikoKEV2ZW50IGVlKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlZS5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFqUXVlcnkuVGhpcy5IYXNDbGFzcyhcIm5ldy1zaGVldC1hbmNob3JcIikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBqUXVlcnkuVGhpcy5Ub0R5bmFtaWMoKTtcclxuICAgICAgICAgICAgICAgICAgICBfY3VycmVudFRhYkNhbnZhcyA9IGVlLlRhcmdldC5BczxIVE1MQW5jaG9yRWxlbWVudD4oKS5IcmVmO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBDdXJyZW50VGFiQ2FudmFzLkNhbnZhcztcclxuICAgICAgICAgICAgICAgICAgICBkLnRhYihcInNob3dcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIubmV3LXNoZWV0LWFuY2hvclwiKS5PbihcImNsaWNrXCIsIChBY3Rpb248RXZlbnQ+KSgoRXZlbnQgZWUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVlLlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBOZXdUYWIoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgQWRkTmV3U2hlZXRUYWIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRhYkNvbnRyb2wgPSBEb2N1bWVudC5HZXRFbGVtZW50QnlJZChcIlRhYkNvbnRyb2xcIik7XHJcbiAgICAgICAgICAgIF9uZXdTaGVldFRhYiA9IG5ldyBIVE1MTElFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIF9uZXdTaGVldFRhYi5JZCA9IFwibmV3LXNoZWV0XCI7XHJcblxyXG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gbmV3IEhUTUxBbmNob3JFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIGFuY2hvci5DbGFzc05hbWUgPSBcIm5ldy1zaGVldC1hbmNob3JcIjtcclxuICAgICAgICAgICAgYW5jaG9yLlRleHRDb250ZW50ID0gXCIrXCI7XHJcbiAgICAgICAgICAgIGFuY2hvci5IcmVmID0gXCIjXCI7XHJcblxyXG4gICAgICAgICAgICBfbmV3U2hlZXRUYWIuQXBwZW5kQ2hpbGQoYW5jaG9yKTtcclxuICAgICAgICAgICAgdGFiQ29udHJvbC5BcHBlbmRDaGlsZChfbmV3U2hlZXRUYWIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIE5ld1RhYihzdHJpbmcgbmFtZSA9IG51bGwsIEdyYXBoIEcgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KG5hbWUpKVxyXG4gICAgICAgICAgICAgICAgbmFtZSA9IFwic2hlZXQgXCIgKyBfdGFiSUQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FudmFzID0gbmV3IEhUTUxDYW52YXNFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIGNhbnZhcy5JZCA9IFwiVGFiXCIgKyBfdGFiSUQ7XHJcbiAgICAgICAgICAgIGNhbnZhcy5XaWR0aCA9IChpbnQpKFdpbmRvdy5Jbm5lcldpZHRoKTtcclxuICAgICAgICAgICAgY2FudmFzLkhlaWdodCA9IChpbnQpKFdpbmRvdy5Jbm5lckhlaWdodCk7XHJcbiAgICAgICAgICAgIGNhbnZhcy5DbGFzc05hbWUgPSBcIklBbUFHcmFwaENhbnZhc1wiO1xyXG5cclxuICAgICAgICAgICAgY2FudmFzLk9uU2hvdyArPSBkZWxlZ2F0ZSBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FudmFzLldpZHRoID0gY2FudmFzLlBhcmVudEVsZW1lbnQuQ2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuSGVpZ2h0ID0gY2FudmFzLlBhcmVudEVsZW1lbnQuQ2xpZW50SGVpZ2h0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKEcgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIEcgPSBuZXcgR3JhcGgoKTtcclxuICAgICAgICAgICAgdmFyIGdyYXBoQ2FudmFzID0gbmV3IEdyYXBoQ2FudmFzKEcpO1xyXG4gICAgICAgICAgICB2YXIgdGMgPSBuZXcgVGFiQ2FudmFzKGNhbnZhcywgZ3JhcGhDYW52YXMpO1xyXG4gICAgICAgICAgICB0Yy5JbnZhbGlkYXRlKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGFiUGFuZSA9IG5ldyBIVE1MRGl2RWxlbWVudCgpO1xyXG4gICAgICAgICAgICB0YWJQYW5lLkNsYXNzTmFtZSA9IFwidGFiLXBhbmUgYWN0aXZlXCI7XHJcbiAgICAgICAgICAgIHRhYlBhbmUuSWQgPSBcIlRhYlwiICsgX3RhYklEO1xyXG4gICAgICAgICAgICB0YWJQYW5lLkFwcGVuZENoaWxkKGNhbnZhcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGFiQ29udHJvbENvbnRlbnQgPSBEb2N1bWVudC5HZXRFbGVtZW50QnlJZChcIlRhYkNvbnRyb2xDb250ZW50XCIpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY2hpbGQgaW4gdGFiQ29udHJvbENvbnRlbnQuQ2hpbGRyZW4pXHJcbiAgICAgICAgICAgICAgICBjaGlsZC5DbGFzc05hbWUgPSBcInRhYi1wYW5lXCI7XHJcbiAgICAgICAgICAgIHRhYkNvbnRyb2xDb250ZW50LkFwcGVuZENoaWxkKHRhYlBhbmUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRhYiA9IG5ldyBIVE1MTElFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIHRhYi5DbGFzc05hbWUgPSBcImFjdGl2ZVwiO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIGFuY2hvciA9IG5ldyBIVE1MQW5jaG9yRWxlbWVudCgpO1xyXG4gICAgICAgICAgICBhbmNob3IuU2V0QXR0cmlidXRlKFwiZGF0YS10b2dnbGVcIiwgXCJ0YWJcIik7XHJcbiAgICAgICAgICAgIGFuY2hvci5UZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgICAgIGFuY2hvci5IcmVmID0gXCIjVGFiXCIgKyBfdGFiSUQ7XHJcbiAgICAgICAgICAgIF9jYW52YXNMb29rdXBbYW5jaG9yLkhyZWZdID0gdGM7XHJcbiAgICAgICAgICAgIF9jdXJyZW50VGFiQ2FudmFzID0gYW5jaG9yLkhyZWY7XHJcblxyXG4gICAgICAgICAgICB0YWIuQXBwZW5kQ2hpbGQoYW5jaG9yKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0YWJDb250cm9sID0gRG9jdW1lbnQuR2V0RWxlbWVudEJ5SWQoXCJUYWJDb250cm9sXCIpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY2hpbGQgaW4gdGFiQ29udHJvbC5DaGlsZHJlbilcclxuICAgICAgICAgICAgICAgIGNoaWxkLkNsYXNzTmFtZSA9IFwibmFyZlwiO1xyXG4gICAgICAgICAgICB0YWJDb250cm9sLkluc2VydEJlZm9yZSh0YWIsIF9uZXdTaGVldFRhYik7XHJcblxyXG4gICAgICAgICAgICBfdGFiSUQrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVGFiQ2FudmFzIEN1cnJlbnRUYWJDYW52YXMgeyBnZXQgeyByZXR1cm4gX2NhbnZhc0xvb2t1cFtfY3VycmVudFRhYkNhbnZhc107IH0gfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBPbktleURvd24oS2V5Ym9hcmRFdmVudCBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRjID0gQ3VycmVudFRhYkNhbnZhcztcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZS5LZXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJmXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuRG9ab29tRml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiLVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLkRvWm9vbSgtMSwgbmV3IEJveCgwLjUsIDAuNSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIitcIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Eb1pvb20oMSwgbmV3IEJveCgwLjUsIDAuNSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImlcIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Ub2dnbGVWZXJ0ZXhJbmRpY2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiSVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLlJvdGF0ZVZlcnRleEluZGljZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJqXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuVG9nZ2xlRWRnZUluZGljZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJKXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuUm90YXRlRWRnZUluZGljZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuRG9SZXZlcnNlU2VsZWN0ZWRFZGdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJcIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Eb1JvdGF0ZVNlbGVjdGVkRWRnZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ5XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuQ3RybEtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuRG9SZWRvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwielwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLkN0cmxLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLkRvVW5kbygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEFza1NhZ2Uoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gQXBwZW5kU2FnZURpdihzKTtcclxuXHJcbiAgICAgICAgICAgIFNjcmlwdC5Xcml0ZShcInNhZ2VjZWxsLm1ha2VTYWdlY2VsbCh7XFxcImlucHV0TG9jYXRpb25cXFwiOiBcXFwiZGl2LmNvbXB1dGVcXFwiLCBoaWRlOiBbXFxcInBlcm1hbGlua1xcXCIsIFxcXCJmdWxsU2NyZWVuXFxcIl0sIGF1dG9ldmFsOmZhbHNlfSk7XCIpO1xyXG4gICAgICAgICAgICBTY3JpcHQuV3JpdGUoXCIkKFxcXCIjU2FnZU1vZGFsXFxcIikubW9kYWwoJ3Nob3cnKTtcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQXNrU2FnZUF1dG8oc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHBlbmRTYWdlRGl2KHMpO1xyXG5cclxuICAgICAgICAgICAgU2NyaXB0LldyaXRlKFwic2FnZWNlbGwubWFrZVNhZ2VjZWxsKHtcXFwiaW5wdXRMb2NhdGlvblxcXCI6IFxcXCJkaXYuY29tcHV0ZVxcXCIsIGhpZGU6IFtcXFwicGVybWFsaW5rXFxcIiwgXFxcImV2YWxCdXR0b25cXFwiLCBcXFwiZnVsbFNjcmVlblxcXCIsIFxcXCJlZGl0b3JcXFwiXSwgYXV0b2V2YWw6dHJ1ZX0pO1wiKTtcclxuICAgICAgICAgICAgU2NyaXB0LldyaXRlKFwiJChcXFwiI1NhZ2VNb2RhbFxcXCIpLm1vZGFsKCdzaG93Jyk7XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBhc3luYyBUYXNrPHN0cmluZz4gQXNrU2FnZUFzeW5jKEdyYXBoIEcsIHN0cmluZyBzYWdlQ29kZUFib3V0RylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKFwiRyA9IEdyYXBoKCdcIiArIEcuR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIHNhZ2VDb2RlQWJvdXRHKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgVGFzazxzdHJpbmc+IEFza1NhZ2VBc3luYyhzdHJpbmcgc2FnZUNvZGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gRG9jdW1lbnQuR2V0RWxlbWVudEJ5SWQoXCJTYWdlU2VjcmV0T3V0cHV0SG9sZVwiKTtcclxuICAgICAgICAgICAgb3V0cHV0LlRleHRDb250ZW50ID0gXCJ3b3JraW5nXCI7XHJcbiAgICAgICAgICAgIEFwcGVuZFNhZ2VEaXYoc2FnZUNvZGUpO1xyXG5cclxuICAgICAgICAgICAgU2NyaXB0LldyaXRlKFwic2FnZWNlbGwubWFrZVNhZ2VjZWxsKHtcXFwiaW5wdXRMb2NhdGlvblxcXCI6IFxcXCJkaXYuY29tcHV0ZVxcXCIsIGhpZGU6IFtcXFwicGVybWFsaW5rXFxcIiwgXFxcImV2YWxCdXR0b25cXFwiLCBcXFwiZnVsbFNjcmVlblxcXCIsIFxcXCJlZGl0b3JcXFwiXSwgYXV0b2V2YWw6dHJ1ZSwgb3V0cHV0TG9jYXRpb246XFxcIiNTYWdlU2VjcmV0T3V0cHV0SG9sZVxcXCJ9KTtcIik7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoIW91dHB1dC5UZXh0Q29udGVudC5Db250YWlucyhcIkFjY2VwdGVkOlwiKSlcclxuICAgICAgICAgICAgICAgIGF3YWl0IFRhc2suRGVsYXkoMTAwKTtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXNwb25zZSA9IG91dHB1dC5UZXh0Q29udGVudDtcclxuICAgICAgICAgICAgaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KHJlc3BvbnNlKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImZsaWJibGVcIjtcclxuXHJcbiAgICAgICAgICAgIHZhciBzcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3RPckRlZmF1bHQ8c3RyaW5nPihyZXNwb25zZS5TcGxpdChuZXdbXSB7IEVudmlyb25tZW50Lk5ld0xpbmUgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBib29sPikobGluZSA9PiBsaW5lLkNvbnRhaW5zKFwiQWNjZXB0ZWQ6XCIpKSk7XHJcbiAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShzcykpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmbGFiYmxlXCI7XHJcblxyXG4gICAgICAgICAgICBzcyA9IHNzLlN1YnN0cmluZyhzcy5JbmRleE9mKFwidGV4dC9wbGFpblwiKSArIFwidGV4dC9wbGFpblwiLkxlbmd0aCArIDMpO1xyXG4gICAgICAgICAgICBzcyA9IHNzLlN1YnN0cmluZygwLCBzcy5JbmRleE9mKFwiXFxcIlwiKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSFRNTERpdkVsZW1lbnQgQXBwZW5kU2FnZURpdihzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfc2FnZUNvbnRhaW5lci5DaGlsZEVsZW1lbnRDb3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICBfc2FnZUNvbnRhaW5lci5SZW1vdmVDaGlsZChfc2FnZUNvbnRhaW5lci5DaGlsZHJlblswXSk7XHJcbiAgICAgICAgICAgIHZhciBkaXYgPSBuZXcgSFRNTERpdkVsZW1lbnQoKTtcclxuICAgICAgICAgICAgZGl2LkNsYXNzTmFtZSA9IFwiY29tcHV0ZVwiO1xyXG4gICAgICAgICAgICBkaXYuVGV4dENvbnRlbnQgPSBzO1xyXG4gICAgICAgICAgICBfc2FnZUNvbnRhaW5lci5BcHBlbmRDaGlsZChkaXYpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRpdjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBHcmFwaGljc0xheWVyO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgVGVzdFxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEhlbHBlckV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0NvbG9yKHRoaXMgQVJHQiBhcmdiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJyZ2JhKHswfSx7MX0sezJ9LHszOjAuMDB9KVwiLCBhcmdiLlIsIGFyZ2IuRywgYXJnYi5CLCBhcmdiLkEgLyAyNTUuMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBUZXN0XHJcbntcclxuICAgIGNsYXNzIExheW91dEFuaW1hdGlvblxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGludCBTdGVwcyA9IDEwMDtcclxuXHJcbiAgICAgICAgQWN0aW9uIF91cGRhdGU7XHJcbiAgICAgICAgQWN0aW9uIF9maW5hbFVwZGF0ZTtcclxuICAgICAgICBMaXN0PEdyYXBocy5WZWN0b3I+IF9sYXlvdXQ7XHJcbiAgICAgICAgZG91YmxlW10gX3hzdGVwO1xyXG4gICAgICAgIGRvdWJsZVtdIF95c3RlcDtcclxuICAgICAgICBpbnQgX3N0ZXAgPSAwO1xyXG4gICAgICAgIEdyYXBocy5HcmFwaCBfRztcclxuXHJcbiAgICAgICAgcHVibGljIExheW91dEFuaW1hdGlvbihBY3Rpb24gdXBkYXRlLCBBY3Rpb24gZmluYWxVcGRhdGUsIExpc3Q8R3JhcGhzLlZlY3Rvcj4gbGF5b3V0LCBHcmFwaHMuR3JhcGggRylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9HID0gRztcclxuICAgICAgICAgICAgX3VwZGF0ZSA9IHVwZGF0ZTtcclxuICAgICAgICAgICAgX2ZpbmFsVXBkYXRlID0gZmluYWxVcGRhdGU7XHJcbiAgICAgICAgICAgIF9sYXlvdXQgPSBsYXlvdXQ7XHJcblxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3hzdGVwID0gbmV3IGRvdWJsZVtfbGF5b3V0LkNvdW50XTtcclxuICAgICAgICAgICAgICAgIF95c3RlcCA9IG5ldyBkb3VibGVbX2xheW91dC5Db3VudF07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sYXlvdXQuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfeHN0ZXBbaV0gPSAoX2xheW91dFtpXS5YIC0gX0cuVmVydGljZXNbaV0uWCkgLyBTdGVwcztcclxuICAgICAgICAgICAgICAgICAgICBfeXN0ZXBbaV0gPSAoX2xheW91dFtpXS5ZIC0gX0cuVmVydGljZXNbaV0uWSkgLyBTdGVwcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luYyBUYXNrIEFuaW1hdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUoX3N0ZXAgPCBTdGVwcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRG9TdGVwKCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBUYXNrLkRlbGF5KDEwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBEb1N0ZXAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGF5b3V0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9HLlZlcnRpY2VzW2ldLlggKz0gX3hzdGVwW2ldO1xyXG4gICAgICAgICAgICAgICAgX0cuVmVydGljZXNbaV0uWSArPSBfeXN0ZXBbaV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF91cGRhdGUoKTtcclxuICAgICAgICAgICAgX3N0ZXArKztcclxuICAgICAgICAgICAgaWYgKF9zdGVwID49IFN0ZXBzKVxyXG4gICAgICAgICAgICAgICAgT25GaW5pc2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25GaW5pc2goKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGF5b3V0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9HLlZlcnRpY2VzW2ldLlggPSBfbGF5b3V0W2ldLlg7XHJcbiAgICAgICAgICAgICAgICBfRy5WZXJ0aWNlc1tpXS5ZID0gX2xheW91dFtpXS5ZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9maW5hbFVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVW5pb25GaW5kVHJhY2tlZFJvb3RzPFQ+IDogVW5pb25GaW5kPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxOb2RlPiBfcm9vdHMgPSBuZXcgTGlzdDxOb2RlPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8Tm9kZT4gRmluZEFsbEV4Y2VwdChJRW51bWVyYWJsZTxOb2RlPiBub2RlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXMuVW5pb25GaW5kPFQ+Lk5vZGU+KF9yb290cyxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXMuVW5pb25GaW5kPFQ+Lk5vZGUsZ2xvYmFsOjpBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzLlVuaW9uRmluZDxUPi5Ob2RlPihub2RlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXMuVW5pb25GaW5kPFQ+Lk5vZGUsIGdsb2JhbDo6QWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlcy5VbmlvbkZpbmQ8VD4uTm9kZT4pKG4gPT4gRmluZChuKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFJvb3RBZGRlZChOb2RlIG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfcm9vdHMuQWRkKG4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgUm9vdFJlbW92ZWQoTm9kZSBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3Jvb3RzLlJlbW92ZShuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDaHJvbmljbGVkQnJhbmNoIDogSUVudW1lcmFibGU8SUVudW1lcmFibGU8TW92ZT4+XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGludCBBbHBoYSB7Z2V0OyBwcml2YXRlIHNldDt9XHJcbiAgICAgICAgcHVibGljIGludCBCZXRhIHtnZXQ7IHByaXZhdGUgc2V0O31cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IFN3YXBDb21wb25lbnRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQ2hyb25pY2xlZEJyYW5jaChMaXN0PGludD4gUywgaW50IGFscGhhLCBpbnQgYmV0YSwgTGlzdDxMaXN0PGludD4+IHBhcnRpdGlvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBbHBoYSA9IGFscGhhO1xyXG4gICAgICAgICAgICBCZXRhID0gYmV0YTtcclxuICAgICAgICAgICAgU3dhcENvbXBvbmVudHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4ocGFydGl0aW9ucywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHAsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShpID0+IFNbaV0pKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhdG9yPElFbnVtZXJhYmxlPE1vdmU+PiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Ym9vbD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmU+PihMaXN0VXRpbGl0eS5FbnVtZXJhdGVTaG9ydExleE5vbmVtcHR5KFN3YXBDb21wb25lbnRzLkNvdW50KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Ym9vbD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPj4pKGNmID0+IEVudW1lcmF0ZU1vdmVzKGNmKSkpLkdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPE1vdmU+IEVudW1lcmF0ZU1vdmVzKExpc3Q8Ym9vbD4gY2YpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNmLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2ZbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHMgaW4gU3dhcENvbXBvbmVudHNbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5ldyBNb3ZlKCkgeyBBZGRlZCA9IEFscGhhLCBSZW1vdmVkID0gQmV0YSwgU3RhY2sgPSBzIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvciBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDb2xvcmluZ0FuYWx5emVyIDogSUJvYXJkQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlYXNvbiB7IGdldCB7IHJldHVybiBcImNvbG9yIGFsbFwiOyB9IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0tub3dsZWRnZURlcGVuZGVudCB7IGdldCB7IHJldHVybiBmYWxzZTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGluZUdyYXBoID0ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkxpbmVHcmFwaDtcclxuICAgICAgICAgICAgdmFyIGNhbkNvbG9yID0gbGluZUdyYXBoLklzQ2hvb3NhYmxlKEVudW1lcmFibGUuUmFuZ2UoMCwgbGluZUdyYXBoLk4pLlNlbGVjdDxsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGxvbmc+KShlID0+IGtub3dsZWRnZS5HZXRFZGdlQ29sb3JMaXN0KGJvYXJkLCBlKSkpLlRvTGlzdCgpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYW5Db2xvcilcclxuICAgICAgICAgICAgICAgIGtub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF0uQWRkV2luKGJvYXJkLCBSZWFzb24pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNhbkNvbG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIENvbG9yYWJsZVdpdGhvdXRFZGdlKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBpbnQgZWRnZUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbG9yYWJsZVdpdGhvdXRFZGdlKGtub3dsZWRnZSwgYm9hcmQuU3RhY2tzLCBlZGdlSW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIENvbG9yYWJsZVdpdGhvdXRFZGdlKEtub3dsZWRnZSBrbm93bGVkZ2UsIExpc3Q8bG9uZz4gc3RhY2tzLCBpbnQgZWRnZUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxnID0ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkxpbmVHcmFwaDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsZy5Jc0Nob29zYWJsZShFbnVtZXJhYmxlLlJhbmdlKDAsIGxnLk4pLlNlbGVjdDxsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGxvbmc+KShlID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlID09IGVkZ2VJbmRleClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtub3dsZWRnZS5HZXRFZGdlQ29sb3JMaXN0KHN0YWNrcywgZSk7XHJcbiAgICAgICAgICAgIH0pKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIENvbW1vbkNvbG9yQW5hbHl6ZXIgOiBJQm9hcmRBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUmVhc29uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gXCJjb21tb24gY29sb3JcIjsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNLbm93bGVkZ2VEZXBlbmRlbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb21tb25Db2xvciA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGxvbmcsbG9uZz4oYm9hcmQuU3RhY2tzLC0xTCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgbG9uZywgbG9uZz4pKCh0LCBzKSA9PiB0ICYgcykpICE9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29tbW9uQ29sb3IpXHJcbiAgICAgICAgICAgICAgICBrbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdLkFkZFdpbihib2FyZCwgUmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb21tb25Db2xvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3dhcEFuYWx5emVyIDogSUJvYXJkQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBib29sIEZpbmRDbGVhbmVzdFdpbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgYm9vbCBEb1N1cGVyYWJ1bmRhbnRDaGVjayB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgc3RyaW5nIFJlYXNvbiB7IGdldCB7IHJldHVybiBcImdvb2Qgc3dhcFwiOyB9IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0tub3dsZWRnZURlcGVuZGVudCB7IGdldCB7IHJldHVybiB0cnVlOyB9IH1cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBzdHJpbmcgQ2hpbGRSZWFzb24geyBnZXQgeyByZXR1cm4gc3RyaW5nLkVtcHR5OyB9IH1cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBib29sIElzQ2hpbGRCb2FyZEJldHRlcihLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZCwgQm9hcmQgY2hpbGRCb2FyZCkgeyByZXR1cm4gZmFsc2U7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFN3YXBBbmFseXplcihib29sIGZpbmRDbGVhbmVzdFdpbiA9IHRydWUsIGJvb2wgc3VwZXJhYnVuZGFudE9ubHkgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRmluZENsZWFuZXN0V2luID0gZmluZENsZWFuZXN0V2luO1xyXG4gICAgICAgICAgICBEb1N1cGVyYWJ1bmRhbnRDaGVjayA9IHN1cGVyYWJ1bmRhbnRPbmx5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwb3RLbm93bGVkZ2UgPSBrbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdO1xyXG4gICAgICAgICAgICB2YXIgZ3JhcGhLbm93bGVkZ2UgPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgYm9hcmRLbm93bGVkZ2UgPSBwb3RLbm93bGVkZ2VbYm9hcmRdO1xyXG4gICAgICAgICAgICBpZiAoYm9hcmRLbm93bGVkZ2UuRXhpc3RzKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciB3aW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIHdpbkRlcHRoID0gTWV0YUtub3dsZWRnZS5JbmZpbml0eTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yUGFpciBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnlEZXNjZW5kaW5nPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PixpbnQ+KHBvdEtub3dsZWRnZS5Db2xvclBhaXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikocGFpciA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5FbnVtZXJhdGVFeGFjdGx5T25lSW50ZXJzZWN0ZXJzKGJvYXJkLCBwYWlyKSkgJSAyKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xvclBhaXJXaW5EZXB0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBzID0gbmV3IExpc3Q8VHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+PigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGltcHJvdmluZ1N3YXBzID0gbmV3IExpc3Q8VHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+PigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBpbXByb3ZpbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYnJhbmNoIGluIENocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuRW51bWVyYXRlQnJhbmNoZXMoYm9hcmQsIGNvbG9yUGFpcikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+IHdpbm5pbmdTd2FwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4gaW1wcm92aW5nU3dhcCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBicmFuY2hXaW5EZXB0aCA9IE1ldGFLbm93bGVkZ2UuSW5maW5pdHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzd2FwIGluIGJyYW5jaClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gYm9hcmQuQ2xvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRCb2FyZC5Eb01vdmVDb21iaW5hdGlvbihzd2FwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEb1N1cGVyYWJ1bmRhbnRDaGVjayAmJiAhZ3JhcGhLbm93bGVkZ2UuR3JhcGguRGVncmVlQ29uZGl0aW9uKGNoaWxkQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRCb2FyZEtub3dsZWRnZSA9IHBvdEtub3dsZWRnZVtjaGlsZEJvYXJkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkQm9hcmRLbm93bGVkZ2UuRXhpc3RzKCkgJiYgY2hpbGRCb2FyZEtub3dsZWRnZS5EZXB0aCArIDEgPCBicmFuY2hXaW5EZXB0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmNoV2luRGVwdGggPSBjaGlsZEJvYXJkS25vd2xlZGdlLkRlcHRoICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwID0gbmV3IFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPihicmFuY2guU3dhcENvbXBvbmVudHMsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZT4oc3dhcCksIGNoaWxkQm9hcmRLbm93bGVkZ2UuUmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUZpbmRDbGVhbmVzdFdpbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChJc0NoaWxkQm9hcmRCZXR0ZXIoa25vd2xlZGdlLCBib2FyZCwgY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcHJvdmluZ1N3YXAgPSBuZXcgVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+KGJyYW5jaC5Td2FwQ29tcG9uZW50cywgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPihzd2FwKSwgQ2hpbGRSZWFzb24gKyBcIiBiZXR0ZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGFpcldpbkRlcHRoID0gTWF0aC5NYXgoY29sb3JQYWlyV2luRGVwdGgsIGJyYW5jaFdpbkRlcHRoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbm5pbmdTd2FwLkV4aXN0cygpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBzLkFkZCh3aW5uaW5nU3dhcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcHJvdmluZ1N3YXBzLkFkZCh3aW5uaW5nU3dhcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbXByb3ZpbmdTd2FwLkV4aXN0cygpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wcm92aW5nU3dhcHMuQWRkKGltcHJvdmluZ1N3YXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcHJvdmluZ1N3YXBBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3JQYWlyV2luRGVwdGggPCB3aW5EZXB0aClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbkRlcHRoID0gY29sb3JQYWlyV2luRGVwdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3RLbm93bGVkZ2UuQWRkV2luKGJvYXJkLCBSZWFzb24sIHdpbkRlcHRoLCBjb2xvclBhaXIsIHdpbm5pbmdTd2Fwcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUZpbmRDbGVhbmVzdFdpbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGltcHJvdmluZ1N3YXBBbHdheXNFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG90S25vd2xlZGdlLkFkZEltcHJvdmVtZW50KGJvYXJkLCBDaGlsZFJlYXNvbiwgY29sb3JQYWlyV2luRGVwdGgsIGNvbG9yUGFpciwgaW1wcm92aW5nU3dhcHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gd2luO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBLaWVyc3RlYWRBbmFseXplciA6IElCb2FyZEFuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZWFzb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBcInJ1biBraWVyc3RlYWRcIjsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNLbm93bGVkZ2VEZXBlbmRlbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJc0tpZXJzdGVhZChrbm93bGVkZ2UsIGJvYXJkLCB0cnVlLCBSZWFzb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzS2llcnN0ZWFkKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBib29sIGVuZm9yY2VEZWdyZWVSZXF1aXJlbWVudCA9IGZhbHNlLCBzdHJpbmcgcmVhc29uID0gXCJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxpbnQ+KEVudW1lcmF0ZUtpZXJzdGVhZEVkZ2VJbmRpY2VzKGtub3dsZWRnZSwgYm9hcmQsIGVuZm9yY2VEZWdyZWVSZXF1aXJlbWVudCwgcmVhc29uKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGludD4gRW51bWVyYXRlS2llcnN0ZWFkRWRnZUluZGljZXMoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIGJvb2wgZW5mb3JjZURlZ3JlZVJlcXVpcmVtZW50ID0gZmFsc2UsIHN0cmluZyByZWFzb24gPSBcIlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuR3JhcGg7XHJcbiAgICAgICAgICAgIHZhciBpbnRlcm5hbFZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxpbnQ+KGcuVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBnLkRlZ3JlZSh2KSA+PSAyKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZWRnZUluZGV4IGluIGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5FZGdlSW5kaWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuRWRnZXNbZWRnZUluZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChpbnRlcm5hbFZlcnRpY2VzLkNvbnRhaW5zKGUuSXRlbTEpICYmIGludGVybmFsVmVydGljZXMuQ29udGFpbnMoZS5JdGVtMikpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKElzS2llcnN0ZWFkKGtub3dsZWRnZSwgYm9hcmQsIGVkZ2VJbmRleCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga25vd2xlZGdlW2JvYXJkLlRlbXBsYXRlLlZhbHVlXVtib2FyZC5Db2xvckNvdW50XS5BZGRXaW4oYm9hcmQsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGVkZ2VJbmRleDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzS2llcnN0ZWFkKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBpbnQgZWRnZUluZGV4LCBib29sIGVuZm9yY2VEZWdyZWVSZXF1aXJlbWVudCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG9yZGVyaW5nIGluIGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5Db25uZWN0ZWRPcmRlcmluZ3MuVmFsdWVba25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkVkZ2VzW2VkZ2VJbmRleF1dKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGVudWx0aW1hdGUgPSBvcmRlcmluZ1tvcmRlcmluZy5Db3VudCAtIDJdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVuZm9yY2VEZWdyZWVSZXF1aXJlbWVudCAmJiBib2FyZC5TdGFja3NbcGVudWx0aW1hdGVdLlBvcHVsYXRpb25Db3VudCgpIDw9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaC5EZWdyZWUocGVudWx0aW1hdGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChJc0tpZXJzdGVhZChrbm93bGVkZ2UsIGJvYXJkLCBlZGdlSW5kZXgsIG9yZGVyaW5nKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzS2llcnN0ZWFkKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBpbnQgZWRnZUluZGV4LCBMaXN0PGludD4gb3JkZXJpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZ24gPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZ24uTGluZUdyYXBoLklzQ2hvb3NhYmxlKEVudW1lcmFibGUuUmFuZ2UoMCwgZ24uTGluZUdyYXBoLk4pLlNlbGVjdDxsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGxvbmc+KShlID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlID09IGVkZ2VJbmRleClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVkZ2UgPSBnbi5FZGdlc1tlXTtcclxuICAgICAgICAgICAgICAgIHZhciBqID0gTWF0aC5NYXgob3JkZXJpbmcuSW5kZXhPZihlZGdlLkl0ZW0xKSwgb3JkZXJpbmcuSW5kZXhPZihlZGdlLkl0ZW0yKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJpb3JTdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGxvbmc+KGJvYXJkLlN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBpbnQsIGJvb2w+KSgoc3RhY2ssIGkpID0+IG9yZGVyaW5nLkluZGV4T2YoaSkgPCBqKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbG9uZyBhbGxvd2VkTGlzdCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IGtub3dsZWRnZS5HZXRFZGdlQ29sb3JMaXN0KGJvYXJkLCBlKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhbHBoYSBpbiBsaXN0LkVudW1lcmF0ZUJpdHMoKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTWV0YUtub3dsZWRnZS5kX0goYWxwaGEsIHByaW9yU3RhY2tzKSAlIDIgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dlZExpc3QgPSBhbGxvd2VkTGlzdC5TZXRCaXQoYWxwaGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBhbGxvd2VkTGlzdDtcclxuICAgICAgICAgICAgfSkpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgS25vd2xlZGdlVHJlZSA6IFRyZWU8S25vd2xlZGdlVHJlZT5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+IFN3YXAgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFR1cGxlPGludCwgaW50PiBDb2xvclBhaXIgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgQm9hcmQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTm90ZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBOdW1iZXIgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgS25vd2xlZGdlVHJlZSBBZGRDaGlsZChUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4gc3dhcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IG5ldyBLbm93bGVkZ2VUcmVlKCkgeyBTd2FwID0gc3dhcCB9O1xyXG4gICAgICAgICAgICBBZGRDaGlsZChjaGlsZCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFJlZHVjdGlvbkFuYWx5emVyIDogSUJvYXJkQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlYXNvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIFwicmVkdWNpYmxlXCI7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzS25vd2xlZGdlRGVwZW5kZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaDtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5FZGdlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBNYXRoLk1pbihlLkl0ZW0xLCBlLkl0ZW0yKTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gTWF0aC5NYXgoZS5JdGVtMSwgZS5JdGVtMik7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbW1vbiA9IGJvYXJkLlN0YWNrc1t4XSAmIGJvYXJkLlN0YWNrc1t5XTtcclxuICAgICAgICAgICAgICAgIHZhciBzdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxsb25nPihib2FyZC5TdGFja3MpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYyBpbiBjb21tb24uRW51bWVyYXRlQml0cygpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrc1t4XSA9IGJvYXJkLlN0YWNrc1t4XS5DbGVhckJpdChjKTtcclxuICAgICAgICAgICAgICAgICAgICBzdGFja3NbeV0gPSBib2FyZC5TdGFja3NbeV0uQ2xlYXJCaXQoYyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnLkRlZ3JlZUNvbmRpdGlvbihzdGFja3MsIGJvYXJkLlBvdCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGludD4pKFggPT4gWC5Db250YWlucyh4KSAmJiBYLkNvbnRhaW5zKHkpID8gMSA6IDApKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF0uQWRkV2luKGJvYXJkLCBzdHJpbmcuRm9ybWF0KFwiY29sb3IgezB9ezF9IHdpdGggezJ9XCIsIHggKyAxLCB5ICsgMSwgYykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlO1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQWxnb3JpdGhtcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2xpbU1pbmQgOiBJTWluZFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBib29sIFN0b3BBbmFseXNpc09uQnJlYWtlcldpbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgTmVhcmx5Q29sb3JhYmxlT25seSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgU3VwZXJhYnVuZGFudE9ubHkgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWluUG90IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE1heFBvdCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIEJvYXJkIEJyZWFrZXJXb25Cb2FyZCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgVG90YWxQb3NpdGlvbnMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIEtub3dsZWRnZSBLbm93bGVkZ2UgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIENvbG9yaW5nQW5hbHl6ZXIgQ29sb3JpbmdBbmFseXplciB7Z2V0OyBzZXQ7fVxyXG4gICAgICAgIFNsaW1Td2FwQW5hbHl6ZXIgU3dhcEFuYWx5emVyIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBEaWN0aW9uYXJ5PGludCwgQm9hcmQ+IEJvYXJkTG9va3VwIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBEaWN0aW9uYXJ5PEJvYXJkLCBpbnQ+IEJvYXJkSURMb29rdXAgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIExpc3Q8aW50PiBSZW1haW5pbmdCb2FyZElEcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgU29ydGVkSW50TGlzdCBXb25Cb2FyZElEcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgaW50IE5leHRCb2FyZElEIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFNsaW1NaW5kKEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdXBlcmFidW5kYW50T25seSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBOZWFybHlDb2xvcmFibGVPbmx5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIE1heFBvdCA9IE1ldGFLbm93bGVkZ2UuSW5maW5pdHk7XHJcbiAgICAgICAgICAgIEtub3dsZWRnZSA9IG5ldyBLbm93bGVkZ2UoZyk7XHJcblxyXG4gICAgICAgICAgICBDb2xvcmluZ0FuYWx5emVyID0gbmV3IENvbG9yaW5nQW5hbHl6ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoVGVtcGxhdGUgdGVtcGxhdGUsIEFjdGlvbjxUdXBsZTxzdHJpbmcsIGludD4+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJvYXJkTG9va3VwID0gbmV3IERpY3Rpb25hcnk8aW50LCBCb2FyZD4oKTtcclxuICAgICAgICAgICAgQm9hcmRJRExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PEJvYXJkLCBpbnQ+KCk7XHJcbiAgICAgICAgICAgIFdvbkJvYXJkSURzID0gbmV3IFNvcnRlZEludExpc3QoKTtcclxuICAgICAgICAgICAgU3dhcEFuYWx5emVyID0gbmV3IFNsaW1Td2FwQW5hbHl6ZXIoS25vd2xlZGdlLCBCb2FyZExvb2t1cCwgQm9hcmRJRExvb2t1cCk7XHJcblxyXG4gICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWluaW11bUNvbG9yQ291bnQgPSBNYXRoLk1heChNaW5Qb3QsIHRlbXBsYXRlLlNpemVzLk1heCgpKTtcclxuICAgICAgICAgICAgdmFyIG1heGltdW1Db2xvckNvdW50ID0gTWF0aC5NaW4oTWF4UG90LCB0ZW1wbGF0ZS5TaXplcy5TdW0oKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm91bmRBdExlYXN0T25lQm9hcmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yQ291bnQgaW4gTWV0YUtub3dsZWRnZS5JbnRlcnZhbChtaW5pbXVtQ29sb3JDb3VudCwgbWF4aW11bUNvbG9yQ291bnQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBHZW5lcmF0ZUFsbEJvYXJkcyh0ZW1wbGF0ZSwgY29sb3JDb3VudCwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5UdXBsZTxzdHJpbmcsIGludD4+KXByb2dyZXNzKTtcclxuICAgICAgICAgICAgICAgIGlmIChmb3VuZEF0TGVhc3RPbmVCb2FyZCAmJiBCb2FyZExvb2t1cC5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIFRvdGFsUG9zaXRpb25zID0gQm9hcmRMb29rdXAuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEF0TGVhc3RPbmVCb2FyZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBSZW1haW5pbmdCb2FyZElEcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQm9hcmRMb29rdXAuS2V5cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJyZWFrZXJXaW4gPSAhQW5hbHl6ZSgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLlR1cGxlPHN0cmluZywgaW50Pj4pcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJyZWFrZXJXaW4gJiYgU3RvcEFuYWx5c2lzT25CcmVha2VyV2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBLbm93bGVkZ2VbdGVtcGxhdGVdLlByb21vdGUoY29sb3JDb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KEtub3dsZWRnZVt0ZW1wbGF0ZV0uTG9zdEJvYXJkcykgPD0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQW5hbHl6ZShBY3Rpb248VHVwbGU8c3RyaW5nLCBpbnQ+PiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgd2luTGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciB0b3RhbEJvYXJkcyA9IFJlbWFpbmluZ0JvYXJkSURzLkNvdW50O1xyXG4gICAgICAgICAgICB2YXIgbGFzdFAgPSAtMTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBSZW1haW5pbmdCb2FyZElEcy5Db3VudCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBSZW1haW5pbmdCb2FyZElEc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IEJvYXJkTG9va3VwW2lkXTtcclxuICAgICAgICAgICAgICAgIGlmIChDb2xvcmluZ0FuYWx5emVyLkFuYWx5emUoS25vd2xlZGdlLCBiKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBSZW1haW5pbmdCb2FyZElEcy5SZW1vdmVBdChpKTtcclxuICAgICAgICAgICAgICAgICAgICBXb25Cb2FyZElEcy5BZGQoaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gMTAwICogKHRvdGFsQm9hcmRzIC0gUmVtYWluaW5nQm9hcmRJRHMuQ291bnQpIC8gdG90YWxCb2FyZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwID4gbGFzdFApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUdXBsZTxzdHJpbmcsIGludD4oXCJGaW5kaW5nIGFsbCBjb2xvcmFibGUgcG9zaXRpb25zLi4uXCIsIHApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQID0gcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2hpbGUgKFJlbWFpbmluZ0JvYXJkSURzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2luTGVuZ3RoKys7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gUmVtYWluaW5nQm9hcmRJRHMuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IFJlbWFpbmluZ0JvYXJkSURzLkNvdW50IC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gUmVtYWluaW5nQm9hcmRJRHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiID0gQm9hcmRMb29rdXBbaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChTd2FwQW5hbHl6ZXIuQW5hbHl6ZShpZCwgV29uQm9hcmRJRHMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVtYWluaW5nQm9hcmRJRHMuUmVtb3ZlQXQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFdvbkJvYXJkSURzLkFkZChpZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSAxMDAgKiAodG90YWxCb2FyZHMgLSBSZW1haW5pbmdCb2FyZElEcy5Db3VudCkgLyB0b3RhbEJvYXJkcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwID4gbGFzdFApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFR1cGxlPHN0cmluZywgaW50PihzdHJpbmcuRm9ybWF0KFwiRmluZGluZyBhbGwgezB9IG1vdmUgd2lucy4uLlwiLCB3aW5MZW5ndGgpLCBwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFAgPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChSZW1haW5pbmdCb2FyZElEcy5Db3VudCA9PSBjb3VudClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaWQgaW4gUmVtYWluaW5nQm9hcmRJRHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IEJvYXJkTG9va3VwW2lkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgS25vd2xlZGdlW2IuVGVtcGxhdGUuVmFsdWVdW2IuQ29sb3JDb3VudF0uQWRkTG9zcyhiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBnID0gS25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkdyYXBoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmVhcmx5Q29sb3JhYmxlID0gRW51bWVyYWJsZS5SYW5nZSgwLCBLbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuTGluZUdyYXBoLk4pLkFsbCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShlID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGludD4oUmVtYWluaW5nQm9hcmRJRHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaWQgPT4gQ29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2UsIEJvYXJkTG9va3VwW2lkXSwgZSkpKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZWFybHlDb2xvcmFibGUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGludD4oUmVtYWluaW5nQm9hcmRJRHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaWQgPT4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBCb2FyZExvb2t1cFtpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGcuRGVncmVlQ29uZGl0aW9uKGIpICYmIENvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoS25vd2xlZGdlLCBiLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPikoaWQgPT4gQm9hcmRMb29rdXBbaWRdKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLkZpcnN0T3JEZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQnJlYWtlcldvbkJvYXJkID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBCb2FyZExvb2t1cFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oUmVtYWluaW5nQm9hcmRJRHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaWQgPT4gQ29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2UsIEJvYXJkTG9va3VwW2lkXSwgMCkpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBHZW5lcmF0ZUFsbEJvYXJkcyhUZW1wbGF0ZSB0ZW1wbGF0ZSwgaW50IGNvbG9yQ291bnQsIEFjdGlvbjxUdXBsZTxzdHJpbmcsIGludD4+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBib2FyZHMgPSBuZXcgSGFzaFNldDxCb2FyZD4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgdGVtcGxhdGUuU2l6ZXMuQ291bnQpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgcG90U2V0ID0gRW51bWVyYWJsZS5SYW5nZSgwLCBjb2xvckNvdW50KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHBvdCA9IHBvdFNldC5Ub0ludDY0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZml4ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGludCxpbnQ+KHZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBNYXRoLkFicyh0ZW1wbGF0ZS5TaXplc1t2XSAtIGNvbG9yQ291bnQgLyAyKSkpLkZpcnN0KCk7XHJcbiAgICAgICAgICAgIHZhciBsYXN0UCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudCA9IDA7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGludCxsb25nPih2ZXJ0aWNlcywxTCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50LCBsb25nPikoKHgsIHYpID0+IFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2ID09IGZpeClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4ICogTGlzdFV0aWxpdHkuQmlub21pYWxDb2VmZmljaWVudChwb3RTZXQuQ291bnQsIHRlbXBsYXRlLlNpemVzW3ZdKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhc3NpZ25tZW50U2V0cyBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+Pih2ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikodiA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodiA9PSBmaXgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRW5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8aW50Pihwb3RTZXQsdGVtcGxhdGUuU2l6ZXNbdl0pLlRvTGlzdCgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50Pihwb3RTZXQsIHRlbXBsYXRlLlNpemVzW3ZdKTtcclxuICAgICAgICAgICAgfSkpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNldHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYXNzaWdubWVudFNldHMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvdGFsQ29sb3JzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4oc2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+Pikoc2V0ID0+IHNldCkpLkRpc3RpbmN0KCkuQ291bnQoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0b3RhbENvbG9ycyA8IGNvbG9yQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGxvbmc+KHNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGxvbmc+KShsaXN0ID0+IGxpc3QuVG9JbnQ2NCgpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFN1cGVyYWJ1bmRhbnRPbmx5ICYmICFLbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuR3JhcGguRGVncmVlQ29uZGl0aW9uKHN0YWNrcywgcG90KSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYm9hcmQgPSBuZXcgQm9hcmQoc3RhY2tzLCBwb3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IGJvYXJkcy5Db3VudDtcclxuICAgICAgICAgICAgICAgIGJvYXJkcy5BZGQoYm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChib2FyZHMuQ291bnQgPiBjb3VudClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBCb2FyZExvb2t1cFtOZXh0Qm9hcmRJRF0gPSBib2FyZDtcclxuICAgICAgICAgICAgICAgICAgICBCb2FyZElETG9va3VwW2JvYXJkXSA9IE5leHRCb2FyZElEO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBOZXh0Qm9hcmRJRCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gKGludCkoMTAwICogY3VycmVudCAvIHRvdGFsKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocCA+IGxhc3RQKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFR1cGxlPHN0cmluZywgaW50PihcIkZpbmRpbmcgYWxsIHBvc2l0aW9ucy4uLlwiLCBwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQID0gcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY3VycmVudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR2FtZVRyZWUgOiBUcmVlPEdhbWVUcmVlPlxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1Cb2FyZCBCb2FyZCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNDb2xvcmFibGUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzU3VwZXJhYnVuZGFudCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNGaXhlcldpbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBHYW1lVHJlZUluZGV4IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IFNhbWVBc0luZGV4IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgQnJlYWtlckNob2ljZUluZm8gSW5mbyB7Z2V0OyBzZXQ7fVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRDaGlsZChHYW1lVHJlZSB0cmVlLCBCcmVha2VyQ2hvaWNlSW5mbyBpbmZvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHJlZS5JbmZvID0gaW5mbztcclxuICAgICAgICAgICAgQWRkQ2hpbGQodHJlZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnZyA9IG9iaiBhcyBHYW1lVHJlZTtcclxuICAgICAgICAgICAgaWYgKGdnID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZ2cuQm9hcmQuRXF1YWxzKEJvYXJkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJvYXJkLkdldEhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR2FtZVRyZWVJbmZvIDogTGlzdDxCcmVha2VyQ2hvaWNlSW5mbz5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGQoTGlzdDx1bG9uZz4gYnJlYWtlckNob2ljZSwgaW50IGksIGludCBqLCB1bG9uZyBmaXhlclJlc3BvbnNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQWRkKG5ldyBCcmVha2VyQ2hvaWNlSW5mbygpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFBhcnRpdGlvbiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHVsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihicmVha2VyQ2hvaWNlLChnbG9iYWw6OlN5c3RlbS5GdW5jPHVsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGNob2ljZSA9PiBjaG9pY2UuVG9TZXQoKSkpLlRvTGlzdCgpLFxyXG4gICAgICAgICAgICAgICAgQWxwaGEgPSBpLFxyXG4gICAgICAgICAgICAgICAgQmV0YSA9IGosXHJcbiAgICAgICAgICAgICAgICBSZXNwb25zZSA9IGZpeGVyUmVzcG9uc2UsXHJcbiAgICAgICAgICAgICAgICBTd2FwVmVydGljZXMgPSBmaXhlclJlc3BvbnNlLlRvU2V0KClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBCcmVha2VyQ2hvaWNlSW5mb1xyXG4gICAge1xyXG4gICAgICAgICBwdWJsaWMgaW50IEFscGhhIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgcHVibGljIGludCBCZXRhIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBQYXJ0aXRpb24geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICBwdWJsaWMgdWxvbmcgUmVzcG9uc2UgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IFN3YXBWZXJ0aWNlcyB7IGdldDsgc2V0OyB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHcmVlZHlXaW5GaWx0ZXIgOiBJV2luRmlsdGVyXHJcbiAgICB7XHJcbiAgICAgICAgU3VwZXJTbGltU3dhcEFuYWx5emVyIF9zd2FwQW5hbHl6ZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmVlZHlXaW5GaWx0ZXIoU3VwZXJTbGltU3dhcEFuYWx5emVyIHN3YXBBbmFseXplcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9zd2FwQW5hbHl6ZXIgPSBzd2FwQW5hbHl6ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgSUVudW1lcmFibGU8aW50PiBGaWx0ZXIoTGlzdDxTdXBlclNsaW1Cb2FyZD4gUiwgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4gVylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihSLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShiID0+IF9zd2FwQW5hbHl6ZXIuQW5hbHl6ZShiLCBXKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnNcclxue1xyXG4gICAgcHVibGljIGFic3RyYWN0IGNsYXNzIFBlcm11dGF0aW9uQXdhcmVQcm9vZkJ1aWxkZXIgOiBQcm9vZkJ1aWxkZXJcclxuICAgIHtcclxuICAgICAgICBwcm90ZWN0ZWQgRGljdGlvbmFyeTxTdXBlclNsaW1Cb2FyZCwgTGlzdDxUdXBsZTxQZXJtdXRhdGlvbiwgU3VwZXJTbGltQm9hcmQ+Pj4gX3Blcm11dGF0aW9uTGlua2VkO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBwdWJsaWMgUGVybXV0YXRpb25Bd2FyZVByb29mQnVpbGRlcihTdXBlclNsaW1NaW5kIG1pbmQsIGJvb2wgdXNlUGVybXV0YXRpb25zID0gZmFsc2UpXHJcbiAgICAgICAgICAgIDogYmFzZShtaW5kLCB1c2VQZXJtdXRhdGlvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIEV4dHJhY3RDYXNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDYXNlcyA9IG5ldyBMaXN0PFByb29mQ2FzZT4oKTtcclxuXHJcbiAgICAgICAgICAgIF9wZXJtdXRhdGlvbkxpbmtlZCA9IG5ldyBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBMaXN0PFR1cGxlPFBlcm11dGF0aW9uLCBTdXBlclNsaW1Cb2FyZD4+PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIE1pbmQuQ29sb3JhYmxlQm9hcmRzWzBdLlN0YWNrcy5WYWx1ZS5MZW5ndGgpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgcGVybXV0YXRpb25zID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24+KFBlcm11dGF0aW9uLkVudW1lcmF0ZUFsbChpbmRpY2VzLkNvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FzZU51bWJlciA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JhYmxlQ2FzZSA9IG5ldyBQcm9vZkNhc2UoTWluZCwgMCwgTWluZC5Db2xvcmFibGVCb2FyZHMpO1xyXG4gICAgICAgICAgICBDYXNlcy5BZGQoY29sb3JhYmxlQ2FzZSk7XHJcbiAgICAgICAgICAgIGNhc2VOdW1iZXIrKztcclxuXHJcbiAgICAgICAgICAgIHZhciByZW1haW5pbmdCb2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihNaW5kLk5vbkNvbG9yYWJsZUJvYXJkcyxNaW5kLkJyZWFrZXJXb25Cb2FyZHMpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgd29uQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oTWluZC5Db2xvcmFibGVCb2FyZHMpO1xyXG4gICAgICAgICAgICB3aGlsZSAocmVtYWluaW5nQm9hcmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb29mQ2FzZSA9IG5ldyBQcm9vZkNhc2UoTWluZCwgY2FzZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICBDYXNlcy5BZGQocHJvb2ZDYXNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYWRkZWRSb290Qm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWRkZWRCb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBib2FyZCBpbiByZW1haW5pbmdCb2FyZHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGVkQm9hcmRzLkNvbnRhaW5zKGJvYXJkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmVlSW5mbyA9IE1pbmQuR2V0V2luVHJlZUluZm8oYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4pKGJjID0+IG5ldyBTdXBlclNsaW1Cb2FyZChib2FyZC5fdHJhY2UsIGJjLkFscGhhLCBiYy5CZXRhLCBiYy5SZXNwb25zZSwgYm9hcmQuX3N0YWNrQ291bnQpKSkuRGlzdGluY3QoKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihjaGlsZEJvYXJkcyx3b25Cb2FyZHMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRSb290Qm9hcmRzLkFkZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkQm9hcmRzLkFkZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wZXJtdXRhdGlvbkxpbmtlZFtib2FyZF0gPSBuZXcgTGlzdDxUdXBsZTxQZXJtdXRhdGlvbiwgU3VwZXJTbGltQm9hcmQ+PigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFVzZVBlcm11dGF0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHAgaW4gcGVybXV0YXRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYiA9IGJvYXJkLlBlcm11dGUocCwgaW5kaWNlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvbkJvYXJkcy5Db250YWlucyhwYikgfHwgYWRkZWRCb2FyZHMuQ29udGFpbnMocGIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsb3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNiIGluIGNoaWxkQm9hcmRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3b25Cb2FyZHMuQ29udGFpbnMoY2IuUGVybXV0ZShwLCBpbmRpY2VzKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGVybXV0YXRpb25MaW5rZWRbYm9hcmRdLkFkZChuZXcgVHVwbGU8UGVybXV0YXRpb24sIFN1cGVyU2xpbUJvYXJkPihwLCBwYikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEJvYXJkcy5BZGQocGIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYm9hcmQgaW4gYWRkZWRSb290Qm9hcmRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb29mQ2FzZS5BZGRCb2FyZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJvYXJkIGluIGFkZGVkQm9hcmRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvbkJvYXJkcy5BZGQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbWFpbmluZ0JvYXJkcy5SZW1vdmUoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNhc2VOdW1iZXIrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKE1pbmQuQnJlYWtlcldvbkJvYXJkcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBncm91cCBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkdyb3VwQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxib29sPihNaW5kLkJyZWFrZXJXb25Cb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gTWluZC5Jc1N1cGVyYWJ1bmRhbnQoYikpKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbG9zdENhc2UgPSBuZXcgUHJvb2ZDYXNlKE1pbmQsIGNhc2VOdW1iZXIsIGdyb3VwLlRvTGlzdCgpKSB7IEJyZWFrZXJXaW4gPSB0cnVlLCBTdXBlcmFidW5kYW50ID0gZ3JvdXAuS2V5IH07XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FzZXMuQWRkKGxvc3RDYXNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIGludCBHZXRIYW5kbGVkQ2FzZU51bWJlcihTdXBlclNsaW1Cb2FyZCBiLCBCcmVha2VyQ2hvaWNlSW5mbyBiYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IFN1cGVyU2xpbUJvYXJkKGIuX3RyYWNlLCBiYy5BbHBoYSwgYmMuQmV0YSwgYmMuUmVzcG9uc2UsIGIuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICBpZiAoQ2FzZXNbMF0uQm9hcmRzLkNvbnRhaW5zKGNoaWxkQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuSW5kaWNlc1doZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLlByb29mQ2FzZT4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ta2lwPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLlByb29mQ2FzZT4oQ2FzZXMsMSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuUHJvb2ZDYXNlLCBib29sPikoY2MgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oY2MuQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4+KShiYiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlVuaW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KG5ld1tdIHsgYmIgfSxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oX3Blcm11dGF0aW9uTGlua2VkW2JiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KSh0dXAgPT4gdHVwLkl0ZW0yKSkpKSkuQ29udGFpbnMoY2hpbGRCb2FyZCkpKSkgKyAyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNtYXJ0RmlsdGVyIDogSVdpbkZpbHRlclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBJRW51bWVyYWJsZTxpbnQ+IEZpbHRlcihMaXN0PFN1cGVyU2xpbUJvYXJkPiBSLCBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPiBXKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxDb2xvclBhaXJPdXRjb21lPiBBbmFseXplKFN1cGVyU2xpbUJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yUGFpcnMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYm9hcmQuX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgYm9hcmQuX2xlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGFpcnMuQWRkKG5ldyBUdXBsZTxpbnQsIGludD4oaSwgaikpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4saW50Pihjb2xvclBhaXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikoY3AgPT4gKGJvYXJkLl90cmFjZVtjcC5JdGVtMV0gXiBib2FyZC5fdHJhY2VbY3AuSXRlbTJdKS5Qb3B1bGF0aW9uQ291bnQoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkNvbG9yUGFpck91dGNvbWU+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Db2xvclBhaXJPdXRjb21lPikoY3AgPT4gbmV3IENvbG9yUGFpck91dGNvbWUoKSB7IENvbG9ycyA9IGNwLCBGaXhlck91dGNvbWVzID0gQW5hbHl6ZUNvbG9yUGFpcihjcCwgYm9hcmQpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPEZpeGVyT3V0Y29tZT4gQW5hbHl6ZUNvbG9yUGFpcihUdXBsZTxpbnQsIGludD4gY29sb3JzLCBTdXBlclNsaW1Cb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gY29sb3JzLkl0ZW0xO1xyXG4gICAgICAgICAgICB2YXIgaiA9IGNvbG9ycy5JdGVtMjtcclxuXHJcbiAgICAgICAgICAgIHZhciB4ID0gYm9hcmQuX3RyYWNlW2ldO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGJvYXJkLl90cmFjZVtqXTtcclxuICAgICAgICAgICAgdmFyIHN3YXBwYWJsZSA9IHggXiB5O1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJyZWFrZXJDaG9pY2UgaW4gR2V0QnJlYWtlckNob2ljZXMoc3dhcHBhYmxlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgR2V0Rml4ZXJSZXNwb25zZXMoYnJlYWtlckNob2ljZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2VzID0gRW51bWVyYWJsZS5SYW5nZSgxLCBfZml4ZXJSZXNwb25zZUNvdW50IC0gMSkuU2VsZWN0PHVsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIHVsb25nPikoayA9PiBfZml4ZXJSZXNwb25zZXNba10pKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzx1bG9uZywgYm9vbD4pKGZyID0+IGZyLlBvcHVsYXRpb25Db3VudCgpIDw9IDEpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IEZpeGVyT3V0Y29tZSgpIHsgQnJlYWtlckNob2ljZSA9IGJyZWFrZXJDaG9pY2UsIEV4aXRzID0gcmVzcG9uc2VzLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzx1bG9uZywgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4pKHJlc3BvbnNlID0+IG5ldyBTdXBlclNsaW1Cb2FyZChib2FyZC5fdHJhY2UsIGksIGosIHJlc3BvbnNlLCBib2FyZC5fc3RhY2tDb3VudCkpKS5Ub0xpc3QoKSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIGd1dHNcclxuICAgICAgICB1bG9uZ1tdIF9maXhlclJlc3BvbnNlcyA9IG5ldyB1bG9uZ1s4MTkyXTtcclxuICAgICAgICBpbnQgX2ZpeGVyUmVzcG9uc2VDb3VudDtcclxuICAgICAgICBEaWN0aW9uYXJ5PHVsb25nLCBMaXN0PExpc3Q8dWxvbmc+Pj4gX2JyZWFrZXJDaG9pY2VzQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTx1bG9uZywgTGlzdDxMaXN0PHVsb25nPj4+KCk7XHJcbiAgICAgICAgdm9pZCBHZXRGaXhlclJlc3BvbnNlcyhMaXN0PHVsb25nPiBwb3NzaWJsZU1vdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VDb3VudCA9IDEgPDwgcG9zc2libGVNb3Zlcy5Db3VudDtcclxuICAgICAgICAgICAgdmFyIHRhYmxlTGVuZ3RoID0gX2ZpeGVyUmVzcG9uc2VzLkxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKHRhYmxlTGVuZ3RoIDw9IF9maXhlclJlc3BvbnNlQ291bnQpXHJcbiAgICAgICAgICAgICAgICB0YWJsZUxlbmd0aCAqPSAyO1xyXG4gICAgICAgICAgICBpZiAodGFibGVMZW5ndGggPiBfZml4ZXJSZXNwb25zZXMuTGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VzID0gbmV3IHVsb25nW3RhYmxlTGVuZ3RoXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdWJzZXQgPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAoc3Vic2V0IDwgX2ZpeGVyUmVzcG9uc2VDb3VudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gMFVMO1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBzdWJzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSB8PSBwb3NzaWJsZU1vdmVzW0ludDMyVXNhZ2UuR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KV07XHJcblxyXG4gICAgICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VzW3N1YnNldF0gPSByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIHN1YnNldCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PExpc3Q8dWxvbmc+PiBHZXRCcmVha2VyQ2hvaWNlcyh1bG9uZyBzd2FwcGFibGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PExpc3Q8dWxvbmc+PiBjaG9pY2VzO1xyXG4gICAgICAgICAgICBpZiAoIV9icmVha2VyQ2hvaWNlc0NhY2hlLlRyeUdldFZhbHVlKHN3YXBwYWJsZSwgb3V0IGNob2ljZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0cyA9IHN3YXBwYWJsZS5HZXRCaXRzKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydGl0aW9ucyA9IEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuR2V0UGFydGl0aW9ucyhiaXRzLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIGNob2ljZXMgPSBuZXcgTGlzdDxMaXN0PHVsb25nPj4ocGFydGl0aW9ucy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBwYXJ0aXRpb25zKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaG9pY2UgPSBuZXcgTGlzdDx1bG9uZz4ocGFydGl0aW9uLkNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjaG9pY2VzLkFkZChjaG9pY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydCBpbiBwYXJ0aXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IDBVTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gcGFydClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggfD0gYml0c1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZS5BZGQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9icmVha2VyQ2hvaWNlc0NhY2hlW3N3YXBwYWJsZV0gPSBjaG9pY2VzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hvaWNlcztcclxuICAgICAgICB9IFxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN1cGVyU2xpbU1pbmQgOiBJTWluZFxyXG4gICAge1xyXG4gICAgICAgIExpc3Q8U3VwZXJTbGltQm9hcmQ+IF9yZW1haW5pbmdCb2FyZHM7XHJcbiAgICAgICAgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4gX3dvbkJvYXJkcztcclxuICAgICAgICBTdXBlclNsaW1Td2FwQW5hbHl6ZXIgX3N3YXBBbmFseXplcjtcclxuICAgICAgICBTdXBlclNsaW1Db2xvcmluZ0FuYWx5emVyIF9jb2xvcmluZ0FuYWx5emVyO1xyXG4gICAgICAgIEdyYXBoIF9ncmFwaDtcclxuICAgICAgICBHcmFwaCBfbGluZUdyYXBoO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PFR1cGxlPGludCwgaW50Pj4gX2VkZ2VzO1xyXG4gICAgICAgIGludCBfdG90YWxQb3NpdGlvbnM7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWluUG90IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE1heFBvdCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSGFzTm9uU3VwZXJhYnVuZGFudEJvYXJkVGhhdElzTmVhcmx5Q29sb3JhYmxlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgVG90YWxQb3NpdGlvbnMgeyBnZXQgeyByZXR1cm4gX3RvdGFsUG9zaXRpb25zOyB9IH1cclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltQm9hcmQgQnJlYWtlcldvbkJvYXJkIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gQm9hcmRDb3VudHMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBCb2FyZENvdW50c0xpc3QgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgT25seUNvbnNpZGVyTmVhcmx5Q29sb3JhYmxlQm9hcmRzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBFeGNsdWRlTm9uTmVhcmx5Q29sb3JhYmxlTm9uU3VwZXJhYnVuZGFudEJvYXJkcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBNaXNzaW5nRWRnZUluZGV4IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBTdXBlcmFidW5kYW50T25seSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgVGhpbmtIYXJkZXIgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIFBlcmZvcm1Db21wbGV0ZUFuYWx5c2lzIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbUNvbG9yaW5nQW5hbHl6ZXIgQ29sb3JpbmdBbmFseXplciB7IGdldCB7IHJldHVybiBfY29sb3JpbmdBbmFseXplcjsgfSB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8U3VwZXJTbGltQm9hcmQ+IE5vbkNvbG9yYWJsZUJvYXJkcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxTdXBlclNsaW1Cb2FyZD4gQ29sb3JhYmxlQm9hcmRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFN1cGVyU2xpbUJvYXJkPiBCcmVha2VyV29uQm9hcmRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPiBGaXhlcldvbkJvYXJkcyB7IGdldCB7IHJldHVybiBfd29uQm9hcmRzOyB9IH1cclxuICAgICAgICBwdWJsaWMgRGljdGlvbmFyeTxpbnQsIExpc3Q8U3VwZXJTbGltQm9hcmQ+PiBCb2FyZHNPZkRlcHRoIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgRXh0cmFQc2kgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIElXaW5GaWx0ZXIgV2luRmlsdGVyIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbU1pbmQoR3JhcGggZywgYm9vbCBwcm9vZkZpbmRpbmdNb2RlID0gZmFsc2UsIGJvb2wgd2Vha2x5Rml4YWJsZSA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2dyYXBoID0gZztcclxuICAgICAgICAgICAgQnVpbGRMaW5lR3JhcGgoKTtcclxuXHJcbiAgICAgICAgICAgIF9jb2xvcmluZ0FuYWx5emVyID0gbmV3IFN1cGVyU2xpbUNvbG9yaW5nQW5hbHl6ZXIoX2xpbmVHcmFwaCwgR2V0RWRnZUNvbG9yTGlzdCk7XHJcbiAgICAgICAgICAgIF9zd2FwQW5hbHl6ZXIgPSBuZXcgU3VwZXJTbGltU3dhcEFuYWx5emVyKGcuTiwgcHJvb2ZGaW5kaW5nTW9kZSwgcHJvb2ZGaW5kaW5nTW9kZSB8fCB3ZWFrbHlGaXhhYmxlKTtcclxuICAgICAgICAgICAgX3dvbkJvYXJkcyA9IG5ldyBIYXNoU2V0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcblxyXG4gICAgICAgICAgICBNaXNzaW5nRWRnZUluZGV4ID0gLTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKFRlbXBsYXRlIHRlbXBsYXRlLCBBY3Rpb248VHVwbGU8c3RyaW5nLCBpbnQ+PiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfd29uQm9hcmRzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIF9yZW1haW5pbmdCb2FyZHMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgQm9hcmRDb3VudHNMaXN0ID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBudWxsO1xyXG4gICAgICAgICAgICBOb25Db2xvcmFibGVCb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgQ29sb3JhYmxlQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChXaW5GaWx0ZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIFdpbkZpbHRlciA9IG5ldyBHcmVlZHlXaW5GaWx0ZXIoX3N3YXBBbmFseXplcik7XHJcblxyXG4gICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWluaW11bUNvbG9yQ291bnQgPSBNYXRoLk1heChNaW5Qb3QsIHRlbXBsYXRlLlNpemVzLk1heCgpKTtcclxuICAgICAgICAgICAgdmFyIG1heGltdW1Db2xvckNvdW50ID0gTWF0aC5NaW4oTWF4UG90LCB0ZW1wbGF0ZS5TaXplcy5TdW0oKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm91bmRBdExlYXN0T25lQm9hcmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGZpeGVyV2luID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yIChpbnQgY29sb3JDb3VudCA9IG1pbmltdW1Db2xvckNvdW50OyBjb2xvckNvdW50IDw9IG1heGltdW1Db2xvckNvdW50OyBjb2xvckNvdW50KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEdlbmVyYXRlQWxsQm9hcmRzKHRlbXBsYXRlLCBjb2xvckNvdW50LCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLlR1cGxlPHN0cmluZywgaW50Pj4pcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKE9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTWlzc2luZ0VkZ2VJbmRleCA+PSAwKVxyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiggICAgICAgICAgICAgICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShiID0+ICFOZWFybHlDb2xvcmFibGVGb3JFZGdlKGIsIE1pc3NpbmdFZGdlSW5kZXgpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oICAgICAgICAgICAgICAgICAgICAgICAgX3JlbWFpbmluZ0JvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBib29sPikoYiA9PiAhTmVhcmx5Q29sb3JhYmxlRm9yU29tZUVkZ2UoYikpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kQXRMZWFzdE9uZUJvYXJkICYmIF9yZW1haW5pbmdCb2FyZHMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBfdG90YWxQb3NpdGlvbnMgPSBfcmVtYWluaW5nQm9hcmRzLkNvdW50ICsgX3dvbkJvYXJkcy5Db3VudDtcclxuICAgICAgICAgICAgICAgIGZvdW5kQXRMZWFzdE9uZUJvYXJkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmaXhlcldpbiAmPSBBbmFseXplKChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8c3RyaW5nLCBpbnQ+Pilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmaXhlcldpbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQW5hbHl6ZShBY3Rpb248VHVwbGU8c3RyaW5nLCBpbnQ+PiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgd2luTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgdmFyIHRvdGFsQm9hcmRzID0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudDtcclxuICAgICAgICAgICAgdmFyIGxhc3RQID0gLTE7XHJcblxyXG4gICAgICAgICAgICBCb2FyZHNPZkRlcHRoID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PFN1cGVyU2xpbUJvYXJkPj4oKTtcclxuICAgICAgICAgICAgQm9hcmRDb3VudHMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIEJvYXJkQ291bnRzTGlzdC5BZGQoQm9hcmRDb3VudHMpO1xyXG4gICAgICAgICAgICBCb2FyZENvdW50cy5BZGQoX3JlbWFpbmluZ0JvYXJkcy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IF9yZW1haW5pbmdCb2FyZHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoX2NvbG9yaW5nQW5hbHl6ZXIuQW5hbHl6ZShiKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzLlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIF93b25Cb2FyZHMuQWRkKGIpO1xyXG4gICAgICAgICAgICAgICAgICAgIENvbG9yYWJsZUJvYXJkcy5BZGQoYik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSAxMDAgKiAodG90YWxCb2FyZHMgLSBfcmVtYWluaW5nQm9hcmRzLkNvdW50KSAvIHRvdGFsQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwID4gbGFzdFApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVHVwbGU8c3RyaW5nLCBpbnQ+KFwiRmluZGluZyBhbGwgY29sb3JhYmxlIHBvc2l0aW9ucy4uLlwiLCBwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQID0gcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEJvYXJkc09mRGVwdGhbd2luTGVuZ3RoXSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KF93b25Cb2FyZHMpO1xyXG4gICAgICAgICAgICBCb2FyZENvdW50cy5BZGQoX3JlbWFpbmluZ0JvYXJkcy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbm9uU3VwZXJhYnVuZGFudEJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IF9yZW1haW5pbmdCb2FyZHMuQ291bnQgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBfcmVtYWluaW5nQm9hcmRzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFJc1N1cGVyYWJ1bmRhbnQoYikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcyAmJiBNaXNzaW5nRWRnZUluZGV4ID49IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBIYXNOb25TdXBlcmFidW5kYW50Qm9hcmRUaGF0SXNOZWFybHlDb2xvcmFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFQZXJmb3JtQ29tcGxldGVBbmFseXNpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9yZW1haW5pbmdCb2FyZHMuUmVtb3ZlQXQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9uU3VwZXJhYnVuZGFudEJvYXJkcy5BZGQoYik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSAxMDAgKiAodG90YWxCb2FyZHMgLSBfcmVtYWluaW5nQm9hcmRzLkNvdW50KSAvIHRvdGFsQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwID4gbGFzdFApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVHVwbGU8c3RyaW5nLCBpbnQ+KFwiRmluZGluZyBhbGwgbm9uLXN1cGVyYWJ1bmRhbnQgcG9zaXRpb25zLi4uXCIsIHApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFAgPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG5vblN1cGVyYWJ1bmRhbnRCb2FyZHMuQ291bnQgPiAwICYmICFTdXBlcmFidW5kYW50T25seSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFPbmx5Q29uc2lkZXJOZWFybHlDb2xvcmFibGVCb2FyZHMgJiYgIUV4Y2x1ZGVOb25OZWFybHlDb2xvcmFibGVOb25TdXBlcmFidW5kYW50Qm9hcmRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gbm9uU3VwZXJhYnVuZGFudEJvYXJkc1swXTtcclxuICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmRzLkFkZFJhbmdlKG5vblN1cGVyYWJ1bmRhbnRCb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVBlcmZvcm1Db21wbGV0ZUFuYWx5c2lzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChFeGlzdHNOZWFybHlDb2xvcmFibGVCb2FyZEZvckVhY2hFZGdlKG5vblN1cGVyYWJ1bmRhbnRCb2FyZHMpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgSGFzTm9uU3VwZXJhYnVuZGFudEJvYXJkVGhhdElzTmVhcmx5Q29sb3JhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBub25TdXBlcmFidW5kYW50Qm9hcmRzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZHMuQWRkUmFuZ2Uobm9uU3VwZXJhYnVuZGFudEJvYXJkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFQZXJmb3JtQ29tcGxldGVBbmFseXNpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBCb2FyZENvdW50cy5BZGQoX3JlbWFpbmluZ0JvYXJkcy5Db3VudCk7XHJcbiAgICAgICAgICAgIE5vbkNvbG9yYWJsZUJvYXJkcy5BZGRSYW5nZShfcmVtYWluaW5nQm9hcmRzKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChfcmVtYWluaW5nQm9hcmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudDtcclxuICAgICAgICAgICAgICAgIHdpbkxlbmd0aCsrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBib2FyZEluZGljZXNUb0FkZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeURlc2NlbmRpbmc8aW50LGludD4oV2luRmlsdGVyLkZpbHRlcihfcmVtYWluaW5nQm9hcmRzLCBfd29uQm9hcmRzKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHggPT4geCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHdvbkJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oX3JlbWFpbmluZ0JvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBpbnQsIGJvb2w+KSgoYiwgaSkgPT4gYm9hcmRJbmRpY2VzVG9BZGQuQ29udGFpbnMoaSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHdvbkJvYXJkcylcclxuICAgICAgICAgICAgICAgICAgICBfd29uQm9hcmRzLkFkZChiKTtcclxuICAgICAgICAgICAgICAgIEJvYXJkc09mRGVwdGhbd2luTGVuZ3RoXSA9IHdvbkJvYXJkcztcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBib2FyZEluZGljZXNUb0FkZClcclxuICAgICAgICAgICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzLlJlbW92ZUF0KGkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gMTAwICogKHRvdGFsQm9hcmRzIC0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudCkgLyB0b3RhbEJvYXJkcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAocCA+IGxhc3RQKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFR1cGxlPHN0cmluZywgaW50PihzdHJpbmcuRm9ybWF0KFwiRmluZGluZyBhbGwgezB9IG1vdmUgd2lucy4uLlwiLCB3aW5MZW5ndGgpLCBwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQID0gcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgQm9hcmRDb3VudHMuQWRkKF9yZW1haW5pbmdCb2FyZHMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfcmVtYWluaW5nQm9hcmRzLkNvdW50ID09IGNvdW50KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZHMuQWRkUmFuZ2UoX3JlbWFpbmluZ0JvYXJkcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChCcmVha2VyV29uQm9hcmQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gX3JlbWFpbmluZ0JvYXJkc1swXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcyAmJiBNaXNzaW5nRWRnZUluZGV4ID49IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChFeGlzdHNOZWFybHlDb2xvcmFibGVCb2FyZEZvckVhY2hFZGdlKF9yZW1haW5pbmdCb2FyZHMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdE9yRGVmYXVsdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihfcmVtYWluaW5nQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShiID0+IF9jb2xvcmluZ0FuYWx5emVyLkNvbG9yYWJsZVdpdGhvdXRFZGdlKGIsIDApKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQnJlYWtlcldvbkJvYXJkID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KF9yZW1haW5pbmdCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gX2NvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoYiwgMCkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIE5lYXJseUNvbG9yYWJsZUZvckVkZ2UoU3VwZXJTbGltQm9hcmQgYm9hcmQsIGludCBlZGdlSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2NvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoYm9hcmQsIGVkZ2VJbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIEV4aXN0c05lYXJseUNvbG9yYWJsZUJvYXJkRm9yRWFjaEVkZ2UoTGlzdDxTdXBlclNsaW1Cb2FyZD4gYm9hcmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmFibGUuUmFuZ2UoMCwgX2xpbmVHcmFwaC5OKS5BbGwoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoZSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gTmVhcmx5Q29sb3JhYmxlRm9yRWRnZShiLCBlKSkpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBOZWFybHlDb2xvcmFibGVGb3JTb21lRWRnZShTdXBlclNsaW1Cb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhYmxlLlJhbmdlKDAsIF9saW5lR3JhcGguTikuQW55KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGUgPT4gTmVhcmx5Q29sb3JhYmxlRm9yRWRnZShib2FyZCwgZSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgTG9va0F0U3VwZXJhYnVuZGFuY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHBhY2tzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBfbGluZUdyYXBoLk4pLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+PikoZSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KF9yZW1haW5pbmdCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gX2NvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoYiwgZSkpKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgZ29vZFBhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4+KHBhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiwgYm9vbD4pKHBhY2sgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4ocGFjaywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBib29sPikoc3NiID0+IElzU3VwZXJhYnVuZGFudChzc2IpKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzU3VwZXJhYnVuZGFudChTdXBlclNsaW1Cb2FyZCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgc3Vic2V0ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGludCB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChzdWJzZXQgPCAoMVVMIDw8IGIuX3N0YWNrQ291bnQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGIuX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsICs9IChzdWJzZXQgJiBiLl90cmFjZVtpXSkuUG9wdWxhdGlvbkNvdW50KCkgLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBlID0gX2dyYXBoLkVkZ2VzT24oc3Vic2V0LlRvU2V0KCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRvdGFsIDwgZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgc3Vic2V0Kys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChFeHRyYVBzaSA+IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG90YWwgPj0gX2dyYXBoLkUgKyBFeHRyYVBzaTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBDb21wdXRlQWJ1bmRhbmNlU3VycGx1cyhTdXBlclNsaW1Cb2FyZCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHRvdGFsID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBiLl9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IGIuX3RyYWNlW2ldLlBvcHVsYXRpb25Db3VudCgpIC8gMjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbCAtIF9ncmFwaC5FO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxpbnQ+IENvbXB1dGVNYXRjaGluZ0FidW5kYW5jZVNoYWRvdyhTdXBlclNsaW1Cb2FyZCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNoYWRvdyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIHVsb25nIHN1YnNldCA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChzdWJzZXQgPCAoMVVMIDw8IGIuX3N0YWNrQ291bnQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgZTtcclxuICAgICAgICAgICAgICAgIGlmICghSXNNYXRjaGluZ0FidW5kYW50KGIsIHN1YnNldCwgb3V0IGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIHNoYWRvdy5BZGQoZSk7XHJcbiAgICAgICAgICAgICAgICBzdWJzZXQrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2hhZG93LlNvcnQoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzaGFkb3c7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIElzTWF0Y2hpbmdBYnVuZGFudChTdXBlclNsaW1Cb2FyZCBiLCB1bG9uZyBzdWJzZXQsIG91dCBpbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGUgPSBfZ3JhcGguRWRnZXNPbihzdWJzZXQuVG9TZXQoKSk7XHJcblxyXG4gICAgICAgICAgICBpbnQgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGIuX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmMgPSAoc3Vic2V0ICYgYi5fdHJhY2VbaV0pLlRvU2V0KCk7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBfbGluZUdyYXBoLkluZGVwZW5kZW5jZU51bWJlcihfZ3JhcGguRWRnZUluZGljZXNPbih2YykpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWwgPj0gZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgR2VuZXJhdGVBbGxCb2FyZHMoVGVtcGxhdGUgdGVtcGxhdGUsIGludCBjb2xvckNvdW50LCBBY3Rpb248VHVwbGU8c3RyaW5nLCBpbnQ+PiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUdXBsZTxzdHJpbmcsIGludD4oXCJGaW5kaW5nIGFsbCBwb3NpdGlvbnMuLi5cIiwgMCkpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQml0TGV2ZWxHZW5lcmF0aW9uLkFzc2lnbm1lbnRzX3Vsb25nLkdlbmVyYXRlKHRlbXBsYXRlLlNpemVzLCBjb2xvckNvdW50KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBuZXcgU3VwZXJTbGltQm9hcmQodCwgdGVtcGxhdGUuU2l6ZXMuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgX3JlbWFpbmluZ0JvYXJkcy5BZGQoYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQnVpbGRMaW5lR3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gX2dyYXBoLkFkamFjZW50O1xyXG4gICAgICAgICAgICBpbnQgbiA9IGFkamFjZW50LkdldFVwcGVyQm91bmQoMCkgKyAxO1xyXG5cclxuICAgICAgICAgICAgX2VkZ2VzID0gbmV3IExpc3Q8VHVwbGU8aW50LCBpbnQ+PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlcy5BZGQobmV3IFR1cGxlPGludCwgaW50PihpLCBqKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWVldHMgPSBuZXcgYm9vbFtfZWRnZXMuQ291bnQsIF9lZGdlcy5Db3VudF07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2VkZ2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBfZWRnZXMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2VkZ2VzW2ldLkl0ZW0xID09IF9lZGdlc1tqXS5JdGVtMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZWRnZXNbaV0uSXRlbTEgPT0gX2VkZ2VzW2pdLkl0ZW0yIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlc1tpXS5JdGVtMiA9PSBfZWRnZXNbal0uSXRlbTEgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2VkZ2VzW2ldLkl0ZW0yID09IF9lZGdlc1tqXS5JdGVtMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVldHNbaSwgal0gPSBtZWV0c1tqLCBpXSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBfbGluZUdyYXBoID0gbmV3IEdyYXBoKG1lZXRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvbmcgR2V0RWRnZUNvbG9yTGlzdChTdXBlclNsaW1Cb2FyZCBiLCBpbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2MSA9IF9lZGdlc1tlXS5JdGVtMTtcclxuICAgICAgICAgICAgdmFyIHYyID0gX2VkZ2VzW2VdLkl0ZW0yO1xyXG4gICAgICAgICAgICB2YXIgc3RhY2tzID0gYi5TdGFja3MuVmFsdWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RhY2tzW3YxXSAmIHN0YWNrc1t2Ml07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR2FtZVRyZWVJbmZvIEdldFdpblRyZWVJbmZvKFN1cGVyU2xpbUJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9zd2FwQW5hbHl6ZXIuV2luVHJlZUluZm9bYm9hcmRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IF9nYW1lVHJlZUluZGV4O1xyXG4gICAgICAgIHB1YmxpYyBHYW1lVHJlZSBCdWlsZEdhbWVUcmVlKFN1cGVyU2xpbUJvYXJkIGJvYXJkLCBib29sIHdpbiA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2VlbkJvYXJkcyA9ICBuZXcgRGljdGlvbmFyeTxTdXBlclNsaW1Cb2FyZCwgaW50PigpO1xyXG4gICAgICAgICAgICBfZ2FtZVRyZWVJbmRleCA9IDE7XHJcbiAgICAgICAgICAgIHJldHVybiBCdWlsZEdhbWVUcmVlKGJvYXJkLCBzZWVuQm9hcmRzLCB3aW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2FtZVRyZWUgQnVpbGRHYW1lVHJlZShTdXBlclNsaW1Cb2FyZCBib2FyZCwgRGljdGlvbmFyeTxTdXBlclNsaW1Cb2FyZCwgaW50PiBzZWVuQm9hcmRzLCBib29sIHdpbiA9IHRydWUsIGludCBkZXB0aCA9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzZWVuQm9hcmRzW2JvYXJkXSA9IF9nYW1lVHJlZUluZGV4O1xyXG4gICAgICAgICAgICB2YXIgdHJlZSA9IG5ldyBHYW1lVHJlZSgpIHsgQm9hcmQgPSBib2FyZCwgSXNGaXhlcldpbiA9IHdpbiB9O1xyXG4gICAgICAgICAgICB0cmVlLklzQ29sb3JhYmxlID0gX2NvbG9yaW5nQW5hbHl6ZXIuQW5hbHl6ZShib2FyZCk7XHJcbiAgICAgICAgICAgIHRyZWUuSXNTdXBlcmFidW5kYW50ID0gd2luIHx8IElzU3VwZXJhYnVuZGFudChib2FyZCk7XHJcbiAgICAgICAgICAgIHRyZWUuR2FtZVRyZWVJbmRleCA9IF9nYW1lVHJlZUluZGV4O1xyXG4gICAgICAgICAgICBfZ2FtZVRyZWVJbmRleCsrO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRyZWUuSXNDb2xvcmFibGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJlZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdHJlZS5Jc1N1cGVyYWJ1bmRhbnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJlZTtcclxuXHJcbiAgICAgICAgICAgIEdhbWVUcmVlSW5mbyB0cmVlSW5mbztcclxuICAgICAgICAgICAgaWYgKHdpbilcclxuICAgICAgICAgICAgICAgIF9zd2FwQW5hbHl6ZXIuV2luVHJlZUluZm8uVHJ5R2V0VmFsdWUoYm9hcmQsIG91dCB0cmVlSW5mbyk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIF9zd2FwQW5hbHl6ZXIuTG9zc1RyZWVJbmZvLlRyeUdldFZhbHVlKGJvYXJkLCBvdXQgdHJlZUluZm8pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRyZWVJbmZvICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb2NhbFNlZW5Cb2FyZHMgPSBuZXcgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiYyBpbiB0cmVlSW5mbylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBTdXBlclNsaW1Cb2FyZChib2FyZC5fdHJhY2UsIGJjLkFscGhhLCBiYy5CZXRhLCBiYy5SZXNwb25zZSwgYm9hcmQuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbFNlZW5Cb2FyZHMuQ29udGFpbnMoY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU2VlbkJvYXJkcy5BZGQoY2hpbGRCb2FyZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghd2luICYmIHNlZW5Cb2FyZHMuQ29udGFpbnNLZXkoY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRUcmVlID0gQnVpbGRHYW1lVHJlZShjaGlsZEJvYXJkLCBzZWVuQm9hcmRzLCB3aW4sIGRlcHRoICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZS5BZGRDaGlsZChjaGlsZFRyZWUsIGJjKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRyZWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3ViVGVtcGxhdGVBbmFseXplciA6IElCb2FyZEFuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxUZW1wbGF0ZT4gU3ViVGVtcGxhdGVzIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZWFzb24geyBnZXQgeyByZXR1cm4gXCJzdWIgdGVtcGxhdGVcIjsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzS25vd2xlZGdlRGVwZW5kZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdWJUZW1wbGF0ZUFuYWx5emVyKHBhcmFtcyBUZW1wbGF0ZVtdIHN1YlRlbXBsYXRlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN1YlRlbXBsYXRlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlRlbXBsYXRlPihzdWJUZW1wbGF0ZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0ZW1wbGF0ZSBpbiBTdWJUZW1wbGF0ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBjb2xvcjtcclxuICAgICAgICAgICAgICAgIGludCB4O1xyXG4gICAgICAgICAgICAgICAgaWYgKENvbnRhaW5zU3ViZXJhYnVuZGFudFN1YlN0YWNrc0Fib3ZlVGVtcGxhdGUoa25vd2xlZGdlLCBib2FyZCwgdGVtcGxhdGUsIG91dCBjb2xvciwgb3V0IHgpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF0uQWRkV2luKGJvYXJkLCBzdHJpbmcuRm9ybWF0KFwic2V0IEwoezB9KSA9IEwoezB9KSAtIHsxfVwiLCB4ICsgMSwgY29sb3IpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBDb250YWluc1N1YmVyYWJ1bmRhbnRTdWJTdGFja3NBYm92ZVRlbXBsYXRlKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBUZW1wbGF0ZSB0ZW1wbGF0ZSwgb3V0IGludCBjb2xvciwgb3V0IGludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29sb3IgPSAtMTtcclxuICAgICAgICAgICAgeCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgZyA9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaDtcclxuICAgICAgICAgICAgdmFyIHN0YWNrU2V0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGJvYXJkLlN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHMgPT4gcy5Ub1NldCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBiaWdzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBzdGFja1NldHMuQ291bnQpLkNvdW50KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gc3RhY2tTZXRzW2ldLkNvdW50ID4gdGVtcGxhdGUuU2l6ZXNbaV0pKTtcclxuICAgICAgICAgICAgaWYgKGJpZ3MgPD0gMCB8fCBiaWdzID4gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzaHJpbmthYmxlID0gRW51bWVyYWJsZS5SYW5nZSgwLCBzdGFja1NldHMuQ291bnQpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gc3RhY2tTZXRzW2ldLkNvdW50ID09IHRlbXBsYXRlLlNpemVzW2ldICsgMSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBpZiAoc2hyaW5rYWJsZS5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgeCA9IHNocmlua2FibGVbMF07XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oc3RhY2tTZXRzW3hdKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhY2tTZXRzW3hdLlJlbW92ZShjKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZy5EZWdyZWVDb25kaXRpb24oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sbG9uZz4oc3RhY2tTZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBsb25nPikocyA9PiBzLlRvSW50NjQoKSkpLlRvTGlzdCgpLCBib2FyZC5Qb3QpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gYztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzdGFja1NldHNbeF0uQWRkKGMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBGYXN0VGFycGl0RW51bWVyYXRvciA6IFRhcnBpdEVudW1lcmF0b3JcclxuICAgIHtcclxuICAgICAgICBMaXN0PEZhc3RXb3JkPiBfd29yZHM7XHJcbiAgICAgICAgRmFzdEFjY2Vzc2liaWxpdHlDaGVja2VyIF9hY2Nlc3NpYmlsaXR5Q2hlY2tlcjtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgTGlzdDxGYXN0V29yZD4gRW1wdHlMaXN0ID0gbmV3IExpc3Q8RmFzdFdvcmQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBGYXN0VGFycGl0RW51bWVyYXRvcihpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF93b3JkcyA9IG5ldyBGYXN0V29yZEdlbmVyYXRvcigpLkdlbmVyYXRlV29yZHMobik7XHJcbiAgICAgICAgICAgIF9hY2Nlc3NpYmlsaXR5Q2hlY2tlciA9IG5ldyBGYXN0QWNjZXNzaWJpbGl0eUNoZWNrZXIobik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBHZW5lcmF0ZU1pbmltYWxUYXJwaXRzKEFjdGlvbjxMaXN0PHN0cmluZz4+IGZvdW5kVGFycGl0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR2VuZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3QoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4+KShsID0+IGZvdW5kVGFycGl0KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQsc3RyaW5nPihsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQsIHN0cmluZz4pKHMgPT4gV29yZGlmeShzKSkpLlRvTGlzdCgpKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgR2VuZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3QoQWN0aW9uPExpc3Q8RmFzdFdvcmQ+PiBmb3VuZFRhcnBpdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdlbmVyYXRlTWluaW1hbFRhcnBpdHNGYXN0SW4oX3dvcmRzLCBuZXcgTGlzdDxGYXN0V29yZD4oKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4+KWZvdW5kVGFycGl0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgR2VuZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3RJbihMaXN0PEZhc3RXb3JkPiBTLCBMaXN0PEZhc3RXb3JkPiBtdXN0SGF2ZXMsIEFjdGlvbjxMaXN0PEZhc3RXb3JkPj4gZm91bmRUYXJwaXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZXhjbHVkZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBleHRlbmRlZE11c3RIYXZlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KG11c3RIYXZlcyk7XHJcbiAgICAgICAgICAgIHZhciBUID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oUyxtdXN0SGF2ZXMpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gVClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIFcgPSBSdW5Fc2NhcGUoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oUyxuZXdbXSB7IHcgfSksIGV4dGVuZGVkTXVzdEhhdmVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoVyAhPSBudWxsICYmIFcuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBHZW5lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdEluKFcsIGV4dGVuZGVkTXVzdEhhdmVzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPj4pZm91bmRUYXJwaXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGV4dGVuZGVkTXVzdEhhdmVzLkFkZCh3KTsgICAgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghZXhjbHVkZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIG11c3RIYXZlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgVyA9IFJ1bkVzY2FwZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihTLG5ld1tdIHsgdyB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFcuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhjbHVkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFleGNsdWRlZClcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZFRhcnBpdChTKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxGYXN0V29yZD4gUnVuRXNjYXBlKElFbnVtZXJhYmxlPEZhc3RXb3JkPiBTLCBMaXN0PEZhc3RXb3JkPiBtdXN0SGF2ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgVCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KFMpO1xyXG4gICAgICAgICAgICB2YXIgUiA9IG5ldyBIYXNoU2V0PEZhc3RXb3JkPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihfd29yZHMsVCkpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KG11c3RIYXZlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkLCBib29sPikodyA9PiBfYWNjZXNzaWJpbGl0eUNoZWNrZXIuSXNBY2Nlc3NpYmxlKHcsIFIpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVzY2FwZXJzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oVCxtdXN0SGF2ZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQsIGJvb2w+KSh3ID0+IF9hY2Nlc3NpYmlsaXR5Q2hlY2tlci5Jc0FjY2Vzc2libGUodywgUikpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBlc2NhcGVycylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBULlJlbW92ZSh3KTtcclxuICAgICAgICAgICAgICAgICAgICBSLkFkZCh3KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZXNjYXBlcnMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PEZhc3RXb3JkPiBSdW5Fc2NhcGUoSUVudW1lcmFibGU8RmFzdFdvcmQ+IFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gUnVuRXNjYXBlKFMsIEVtcHR5TGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHJpbmcgV29yZGlmeShGYXN0V29yZCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHN0ID0gbmV3IGxvbmdbYi5fc3RhY2tDb3VudF07XHJcbiAgICAgICAgICAgIHZhciB0cmFjZUJpdHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDx1bG9uZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYi5fdHJhY2UsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8dWxvbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikodCA9PiB0LlRvU2V0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgYyA9IDA7IGMgPCB0cmFjZUJpdHMuQ291bnQ7IGMrKylcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIHRyYWNlQml0c1tjXSlcclxuICAgICAgICAgICAgICAgICAgICBzdFtpXSB8PSAxTCA8PCBjO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luPGNoYXI+KFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsY2hhcj4oc3QsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgY2hhcj4pKHMgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuICd4JztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gJ3onO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiAnPyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIGVudW5tZXJhYmxlIHdheVxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBJRW51bWVyYWJsZTxMaXN0PHN0cmluZz4+IEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4+KEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdCgpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4+KShsaXN0ID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQsc3RyaW5nPihsaXN0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQsIHN0cmluZz4pV29yZGlmeSkuVG9MaXN0KCkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxMaXN0PEZhc3RXb3JkPj4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHNGYXN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBleHBsb3JlZCA9IG5ldyBIYXNoU2V0PExpc3Q8RmFzdFdvcmQ+PihuZXcgU29ydGVkTGlzdENvbXBhcmVyKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHNGYXN0SW4oX3dvcmRzLCBleHBsb3JlZCwgbmV3IExpc3Q8RmFzdFdvcmQ+KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxGYXN0V29yZD4+IEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdEluKExpc3Q8RmFzdFdvcmQ+IFMsIEhhc2hTZXQ8TGlzdDxGYXN0V29yZD4+IGV4cGxvcmVkLCBMaXN0PEZhc3RXb3JkPiBtdXN0SGF2ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZXhjbHVkZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIFMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBXID0gUnVuRXNjYXBlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KFMsbmV3W10geyB3IH0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChXLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZXhjbHVkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWw8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4obXVzdEhhdmVzLFcpICYmICFleHBsb3JlZC5Db250YWlucyhXKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgVFAgaW4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHNGYXN0SW4oVywgZXhwbG9yZWQsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KG11c3RIYXZlcykpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gVFA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZXhwbG9yZWQuQWRkKFcpO1xyXG4gICAgICAgICAgICAgICAgbXVzdEhhdmVzLkFkZCh3KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFleGNsdWRlZClcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihTKTtcclxuICAgICAgICB9IFxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgY2xhc3MgU29ydGVkTGlzdENvbXBhcmVyIDogSUVxdWFsaXR5Q29tcGFyZXI8TGlzdDxGYXN0V29yZD4+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoTGlzdDxGYXN0V29yZD4geCwgTGlzdDxGYXN0V29yZD4geSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPih4LHkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IEdldEhhc2hDb2RlKExpc3Q8RmFzdFdvcmQ+IGxpc3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVuY2hlY2tlZFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBoYXNoID0gMTk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHggaW4gbGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaCA9IGhhc2ggKiAzMSArIHguR2V0SGFzaENvZGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc2g7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFJlZmVyZW5jZVRhcnBpdEVudW1lcmF0b3IgOiBUYXJwaXRFbnVtZXJhdG9yXHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxzdHJpbmc+IF93b3JkcztcclxuICAgICAgICBBY2Nlc3NpYmlsaXR5Q2hlY2tlciBfYWNjZXNzaWJpbGl0eUNoZWNrZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBSZWZlcmVuY2VUYXJwaXRFbnVtZXJhdG9yKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3dvcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8c3RyaW5nPihuZXcgV29yZEVudW1lcmF0b3IoQWxwaGFiZXQpLkVudW1lcmF0ZVdvcmRzKG4pKTtcclxuICAgICAgICAgICAgX2FjY2Vzc2liaWxpdHlDaGVja2VyID0gbmV3IEFjY2Vzc2liaWxpdHlDaGVja2VyKEFscGhhYmV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBJRW51bWVyYWJsZTxMaXN0PHN0cmluZz4+IEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzZWVuID0gbmV3IEhhc2hTZXQ8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHNJbihfd29yZHMsIHNlZW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxzdHJpbmc+PiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0c0luKExpc3Q8c3RyaW5nPiBTLCBIYXNoU2V0PHN0cmluZz4gc2VlbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBleGNsdWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgVCBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4+KFMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8c3RyaW5nPj4pKHcgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8c3RyaW5nPihTLG5ld1tdIHsgdyB9KS5Ub0xpc3QoKSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgVyA9IFJ1bkVzY2FwZShUKTtcclxuICAgICAgICAgICAgICAgIGlmIChXLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZXhjbHVkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBHZW5lcmF0ZVNpbXBsZUtleShXKTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWVuLkNvbnRhaW5zKGtleSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgc2Vlbi5BZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBUUCBpbiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0c0luKFcsIHNlZW4pKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBUUDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFleGNsdWRlZClcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8c3RyaW5nLHN0cmluZz4oUywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT4gcykpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxzdHJpbmc+IFJ1bkVzY2FwZShMaXN0PHN0cmluZz4gUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBUID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8c3RyaW5nPihTKTtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBSID0gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkRpZmZlcmVuY2U8c3RyaW5nPihfd29yZHMsVCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8c3RyaW5nPihULChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgYm9vbD4pKHcgPT4gX2FjY2Vzc2liaWxpdHlDaGVja2VyLklzQWNjZXNzaWJsZSh3LCBSKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248c3RyaW5nPikoKHgpID0+IHsgfSkpIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBUO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RyaW5nIEdlbmVyYXRlU2ltcGxlS2V5KExpc3Q8c3RyaW5nPiBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiLFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8c3RyaW5nLHN0cmluZz4oUywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT4gcykpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCaXRHcmFwaF9sb25nIDogSUdyYXBoX2xvbmdcclxuICAgIHtcclxuICAgICAgICBpbnRbXSBfdmVydGljZXM7XHJcbiAgICAgICAgbG9uZ1tdIF9uZWlnaGJvcmhvb2Q7XHJcblxyXG4gICAgICAgIHB1YmxpYyBCaXRHcmFwaF9sb25nKExpc3Q8aW50PiBlZGdlV2VpZ2h0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuID0gKGludCkoKDEgKyBNYXRoLlNxcnQoMSArIDggKiBlZGdlV2VpZ2h0cy5Db3VudCkpIC8gMik7XHJcbiAgICAgICAgICAgIF92ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgbikuVG9BcnJheSgpO1xyXG5cclxuICAgICAgICAgICAgX25laWdoYm9yaG9vZCA9IG5ldyBsb25nW25dO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlCaXQgPSAxTCA8PCBpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqQml0ID0gMUwgPDwgajtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2VXZWlnaHRzW2tdICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbmVpZ2hib3Job29kW2ldIHw9IGpCaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9uZWlnaGJvcmhvb2Rbal0gfD0gaUJpdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgQml0R3JhcGhfbG9uZyhpbnQgbiwgbG9uZ1tdIG5laWdoYm9yaG9vZClcclxuICAgICAgICB7XHJcblx0XHRcdF92ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgbikuVG9BcnJheSgpO1xyXG5cdFx0XHRfbmVpZ2hib3Job29kID0gbmVpZ2hib3Job29kO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IE4geyBnZXQgeyByZXR1cm4gX3ZlcnRpY2VzLkxlbmd0aDsgfSB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPGludD4gVmVydGljZXMgeyBnZXQgeyByZXR1cm4gX3ZlcnRpY2VzOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNJbmRlcGVuZGVudChsb25nIHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXQuVHJ1ZUZvckFsbEJpdEluZGljZXMoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaSA9PiAoX25laWdoYm9yaG9vZFtpXSAmIHNldCkgPT0gMCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBEZWdyZWUoaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX25laWdoYm9yaG9vZFt2XS5Qb3B1bGF0aW9uQ291bnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBEZWdyZWVJblNldChpbnQgdiwgbG9uZyBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKF9uZWlnaGJvcmhvb2Rbdl0gJiBzZXQpLlBvcHVsYXRpb25Db3VudCgpO1xyXG4gICAgICAgIH1cclxuXHRcdHB1YmxpYyBsb25nIE5laWdoYm9yc0luU2V0KGludCB2LCBsb25nIHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfbmVpZ2hib3Job29kW3ZdICYgc2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8bG9uZz4gTWF4aW1hbEluZGVwZW5kZW50U3Vic2V0cyhsb25nIHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3Q8bG9uZz4oOCk7XHJcbiAgICAgICAgICAgIEJyb25LZXJib3NjaChzZXQsIDBMLCAwTCwgbGlzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBCcm9uS2VyYm9zY2gobG9uZyBQLCBsb25nIFIsIGxvbmcgWCwgTGlzdDxsb25nPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFAgPT0gMCAmJiBYID09IDApXHJcbiAgICAgICAgICAgICAgICBsaXN0LkFkZChSKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdSA9IFRvbWl0YVBpdm90KFAsIFgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHEgPSBQICYgKCgxTCA8PCB1KSB8IF9uZWlnaGJvcmhvb2RbdV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpdCA9IHEgJiAtcTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGJpdC5FeHRyYWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vbiA9IH4oYml0IHwgX25laWdoYm9yaG9vZFt2XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIEJyb25LZXJib3NjaChQICYgbm9uLCBSIHwgYml0LCBYICYgbm9uLCBsaXN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcSBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgUCBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgWCB8PSBiaXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBUb21pdGFQaXZvdChsb25nIFAsIGxvbmcgWClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtaW4gPSBpbnQuTWF4VmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBiZXN0ID0gLTE7XHJcbiAgICAgICAgICAgIHZhciBxID0gUCB8IFg7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0ID0gcSAmIC1xO1xyXG4gICAgICAgICAgICAgICAgdmFyIHUgPSBiaXQuRXh0cmFjdCgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBuID0gKChiaXQgfCBfbmVpZ2hib3Job29kW3VdKSAmIFApLlBvcHVsYXRpb25Db3VudCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG4gPCBtaW4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluID0gbjtcclxuICAgICAgICAgICAgICAgICAgICBiZXN0ID0gdTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBxIF49IGJpdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJlc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQml0R3JhcGhfdWludCA6IElHcmFwaF91aW50XHJcbiAgICB7XHJcbiAgICAgICAgaW50W10gX3ZlcnRpY2VzO1xyXG4gICAgICAgIHVpbnRbXSBfbmVpZ2hib3Job29kO1xyXG5cclxuICAgICAgICBwdWJsaWMgQml0R3JhcGhfdWludChMaXN0PGludD4gZWRnZVdlaWdodHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbiA9IChpbnQpKCgxICsgTWF0aC5TcXJ0KDEgKyA4ICogZWRnZVdlaWdodHMuQ291bnQpKSAvIDIpO1xyXG4gICAgICAgICAgICBfdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIG4pLlRvQXJyYXkoKTtcclxuXHJcbiAgICAgICAgICAgIF9uZWlnaGJvcmhvb2QgPSBuZXcgdWludFtuXTtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBpQml0ID0gMVUgPDwgaTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgakJpdCA9IDFVIDw8IGo7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlZGdlV2VpZ2h0c1trXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX25laWdoYm9yaG9vZFtpXSB8PSBqQml0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbmVpZ2hib3Job29kW2pdIHw9IGlCaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIEJpdEdyYXBoX3VpbnQoaW50IG4sIHVpbnRbXSBuZWlnaGJvcmhvb2QpXHJcbiAgICAgICAge1xyXG5cdFx0XHRfdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIG4pLlRvQXJyYXkoKTtcclxuXHRcdFx0X25laWdoYm9yaG9vZCA9IG5laWdoYm9yaG9vZDtcclxuXHRcdH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBOIHsgZ2V0IHsgcmV0dXJuIF92ZXJ0aWNlcy5MZW5ndGg7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxpbnQ+IFZlcnRpY2VzIHsgZ2V0IHsgcmV0dXJuIF92ZXJ0aWNlczsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzSW5kZXBlbmRlbnQodWludCBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0LlRydWVGb3JBbGxCaXRJbmRpY2VzKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gKF9uZWlnaGJvcmhvb2RbaV0gJiBzZXQpID09IDApKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVncmVlKGludCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9uZWlnaGJvcmhvb2Rbdl0uUG9wdWxhdGlvbkNvdW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVncmVlSW5TZXQoaW50IHYsIHVpbnQgc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChfbmVpZ2hib3Job29kW3ZdICYgc2V0KS5Qb3B1bGF0aW9uQ291bnQoKTtcclxuICAgICAgICB9XHJcblx0XHRwdWJsaWMgdWludCBOZWlnaGJvcnNJblNldChpbnQgdiwgdWludCBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX25laWdoYm9yaG9vZFt2XSAmIHNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPHVpbnQ+IE1heGltYWxJbmRlcGVuZGVudFN1YnNldHModWludCBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGlzdCA9IG5ldyBMaXN0PHVpbnQ+KDgpO1xyXG4gICAgICAgICAgICBCcm9uS2VyYm9zY2goc2V0LCAwVSwgMFUsIGxpc3QpO1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQnJvbktlcmJvc2NoKHVpbnQgUCwgdWludCBSLCB1aW50IFgsIExpc3Q8dWludD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQID09IDAgJiYgWCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgbGlzdC5BZGQoUik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHUgPSBUb21pdGFQaXZvdChQLCBYKTtcclxuICAgICAgICAgICAgICAgIHZhciBxID0gUCAmICgoMVUgPDwgdSkgfCBfbmVpZ2hib3Job29kW3VdKTtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSBxICYgKH5xICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBiaXQuRXh0cmFjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBub24gPSB+KGJpdCB8IF9uZWlnaGJvcmhvb2Rbdl0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBCcm9uS2VyYm9zY2goUCAmIG5vbiwgUiB8IGJpdCwgWCAmIG5vbiwgbGlzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHEgXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgIFAgXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgIFggfD0gYml0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgVG9taXRhUGl2b3QodWludCBQLCB1aW50IFgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWluID0gaW50Lk1heFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgYmVzdCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgcSA9IFAgfCBYO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdCA9IHEgJiAofnEgKyAxKTtcclxuICAgICAgICAgICAgICAgIHZhciB1ID0gYml0LkV4dHJhY3QoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgbiA9ICgoYml0IHwgX25laWdoYm9yaG9vZFt1XSkgJiBQKS5Qb3B1bGF0aW9uQ291bnQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChuIDwgbWluKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgYmVzdCA9IHU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcSBePSBiaXQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBiZXN0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxuXHJcbnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbDtcclxudXNpbmcgU3lzdGVtLlJ1bnRpbWUuU2VyaWFsaXphdGlvbjtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEVkZ2UgOiBHcmFwaGljc0xheWVyLklQYWludGFibGUsIElIaXR0YWJsZVxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkZvbnQgTGFiZWxGb250ID0gbmV3IEdyYXBoaWNzTGF5ZXIuRm9udChcIlRpbWVzIE5ldyBSb21hblwiLCAxOCk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuQVJHQiBMYWJlbEJydXNoQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDEyMCwgMCwgMCwgMjU1KTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5Gb250IEluZGV4Rm9udCA9IG5ldyBHcmFwaGljc0xheWVyLkZvbnQoXCJTeXN0ZW1cIiwgOCk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuQVJHQiBJbmRleEJydXNoQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDIwMCwgMjAwLCAwLCAwKTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBQYXJlbnRJbmRleCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBJbmRleEFuZ2xlIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGVudW0gT3JpZW50YXRpb25zXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOb25lLFxyXG4gICAgICAgICAgICBGb3J3YXJkLFxyXG4gICAgICAgICAgICBCYWNrd2FyZFxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgRWRnZShWZXJ0ZXggdjEsIFZlcnRleCB2MilcclxuICAgICAgICAgICAgOiB0aGlzKHYxLCB2MiwgT3JpZW50YXRpb25zLk5vbmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEVkZ2UoVmVydGV4IHYxLCBWZXJ0ZXggdjIsIE9yaWVudGF0aW9ucyBvcmllbnRhdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9WMSA9IHYxO1xyXG4gICAgICAgICAgICBfVjIgPSB2MjtcclxuICAgICAgICAgICAgX09yaWVudGF0aW9uID0gb3JpZW50YXRpb247XHJcbiAgICAgICAgICAgIF9NdWx0aXBsaWNpdHkgPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEVkZ2UoU2VyaWFsaXphdGlvbkVkZ2UgZSwgTGlzdDxWZXJ0ZXg+IHZlcnRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVjEgPSB2ZXJ0aWNlc1tlLkluZGV4VjFdO1xyXG4gICAgICAgICAgICBWMiA9IHZlcnRpY2VzW2UuSW5kZXhWMl07XHJcbiAgICAgICAgICAgIE9yaWVudGF0aW9uID0gZS5PcmllbnRhdGlvbjtcclxuICAgICAgICAgICAgVGhpY2tuZXNzID0gZS5UaGlja25lc3M7XHJcbiAgICAgICAgICAgIE11bHRpcGxpY2l0eSA9IGUuTXVsdGlwbGljaXR5O1xyXG4gICAgICAgICAgICBTdHlsZSA9IGUuU3R5bGU7XHJcbiAgICAgICAgICAgIExhYmVsID0gZS5MYWJlbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFBhaW50KEdyYXBoaWNzTGF5ZXIuSUdyYXBoaWNzIGcsIGludCB3aWR0aCwgaW50IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfVjEgPT0gX1YyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyBEcmF3IHNlbGYgbG9vcC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXhSYWRpdXMxID0gTWF0aC5NYXgoX1YxLkxvY2FsQm91bmRzLldpZHRoLCBfVjEuTG9jYWxCb3VuZHMuSGVpZ2h0KSAvIDI7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4UmFkaXVzMiA9IE1hdGguTWF4KF9WMi5Mb2NhbEJvdW5kcy5XaWR0aCwgX1YyLkxvY2FsQm91bmRzLkhlaWdodCkgLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3MgPSAoX1YyLlggLSBfVjEuWCkgLyBNYXRoLlNxcnQoKF9WMi5YIC0gX1YxLlgpICogKF9WMi5YIC0gX1YxLlgpICsgKF9WMi5ZIC0gX1YxLlkpICogKF9WMi5ZIC0gX1YxLlkpKTtcclxuICAgICAgICAgICAgICAgIGNvcyA9IE1hdGguTWluKE1hdGguTWF4KGNvcywgLTEpLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2luID0gKF9WMi5ZIC0gX1YxLlkpIC8gTWF0aC5TcXJ0KChfVjIuWCAtIF9WMS5YKSAqIChfVjIuWCAtIF9WMS5YKSArIChfVjIuWSAtIF9WMS5ZKSAqIChfVjIuWSAtIF9WMS5ZKSk7XHJcbiAgICAgICAgICAgICAgICBzaW4gPSBNYXRoLk1pbihNYXRoLk1heChzaW4sIC0xKSwgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5BY29zKGNvcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX1YxLlkgPiBfVjIuWSlcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IC1hbmdsZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZG91YmxlLklzTmFOKGFuZ2xlKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFuZ2xlU3RlcCA9IE1hdGguUEkgLyAyLjAgLyBfTXVsdGlwbGljaXR5O1xyXG4gICAgICAgICAgICAgICAgdmFyIGV2ZW5Nb2RpZmllciA9IChfTXVsdGlwbGljaXR5ICUgMiA9PSAwKSA/IDAuNSA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgR3JhcGhpY3NMYXllci5Cb3ggdG9wU3RhcnQgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3goMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBHcmFwaGljc0xheWVyLkJveCB0b3BGaW5pc2ggPSBuZXcgR3JhcGhpY3NMYXllci5Cb3goMCwgMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IC0oX011bHRpcGxpY2l0eSAtIDEpIC8gMjsgaSA8IE1hdGguQ2VpbGluZygoX011bHRpcGxpY2l0eSArIDEpIC8gMi4wKTsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGFydEFuZ2xlID0gYW5nbGUgKyBhbmdsZVN0ZXAgKiAoaSAtIGV2ZW5Nb2RpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmlzaEFuZ2xlID0gYW5nbGUgLSBhbmdsZVN0ZXAgKiAoaSAtIGV2ZW5Nb2RpZmllcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IExvY2FsVG9HbG9iYWwoX1YxLkxvY2F0aW9uICsgVXRpbGl0eS5Qb2xhclRvUmVjdGFuZ3VsYXIobWF4UmFkaXVzMSArIDAuMDEsIHN0YXJ0QW5nbGUpLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmluaXNoID0gTG9jYWxUb0dsb2JhbChfVjIuTG9jYXRpb24gLSBVdGlsaXR5LlBvbGFyVG9SZWN0YW5ndWxhcihtYXhSYWRpdXMyICsgMC4wMSwgZmluaXNoQW5nbGUpLCB3aWR0aCwgaGVpZ2h0KTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcFN0YXJ0ID0gc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcEZpbmlzaCA9IGZpbmlzaDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGcuRHJhd0xpbmUoX3BlbkNvbG9yLCBzdGFydCwgZmluaXNoLCBfdGhpY2tuZXNzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoX09yaWVudGF0aW9uICE9IE9yaWVudGF0aW9ucy5Ob25lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb2ludHMgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3hbM107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9PcmllbnRhdGlvbiA9PSBPcmllbnRhdGlvbnMuRm9yd2FyZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzd2VlcCA9IF9WMi5Mb2NhdGlvbiAtIFV0aWxpdHkuUG9sYXJUb1JlY3Rhbmd1bGFyKG1heFJhZGl1czIgKyAwLjAyNWYsIGFuZ2xlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1swXSA9IExvY2FsVG9HbG9iYWwoVXRpbGl0eS5Sb3RhdGVBcm91bmRQb2ludChzd2VlcCwgX1YyLkxvY2F0aW9uLCBNYXRoLlBJIC8gMTgwLjAgKiAxMC4wKSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1sxXSA9IExvY2FsVG9HbG9iYWwoX1YyLkxvY2F0aW9uIC0gVXRpbGl0eS5Qb2xhclRvUmVjdGFuZ3VsYXIobWF4UmFkaXVzMiArIDAuMDA1ZiwgYW5nbGUpLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzWzJdID0gTG9jYWxUb0dsb2JhbChVdGlsaXR5LlJvdGF0ZUFyb3VuZFBvaW50KHN3ZWVwLCBfVjIuTG9jYXRpb24sIC1NYXRoLlBJIC8gMTgwLjAgKiAxMC4wKSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKF9PcmllbnRhdGlvbiA9PSBPcmllbnRhdGlvbnMuQmFja3dhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3dlZXAgPSBfVjEuTG9jYXRpb24gKyBVdGlsaXR5LlBvbGFyVG9SZWN0YW5ndWxhcihtYXhSYWRpdXMxICsgMC4wMjVmLCBhbmdsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbMF0gPSBMb2NhbFRvR2xvYmFsKFV0aWxpdHkuUm90YXRlQXJvdW5kUG9pbnQoc3dlZXAsIF9WMS5Mb2NhdGlvbiwgTWF0aC5QSSAvIDE4MC4wICogMTAuMCksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbMV0gPSBMb2NhbFRvR2xvYmFsKF9WMS5Mb2NhdGlvbiArIFV0aWxpdHkuUG9sYXJUb1JlY3Rhbmd1bGFyKG1heFJhZGl1czEgKyAwLjAwNWYsIGFuZ2xlKSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1syXSA9IExvY2FsVG9HbG9iYWwoVXRpbGl0eS5Sb3RhdGVBcm91bmRQb2ludChzd2VlcCwgX1YxLkxvY2F0aW9uLCAtTWF0aC5QSSAvIDE4MC4wICogMTAuMCksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZy5GaWxsUG9seWdvbihuZXcgR3JhcGhpY3NMYXllci5BUkdCKDAsIDAsIDApLCBwb2ludHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IExhYmVsO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShsYWJlbCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJveCA9IGcuTWVhc3VyZVN0cmluZyhsYWJlbCwgTGFiZWxGb250KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KHRvcFN0YXJ0LlggKyAodG9wRmluaXNoLlggLSB0b3BTdGFydC5YKSAvIDIgLSBib3guV2lkdGggLyAyIC0gMC43NSAqIGJveC5XaWR0aCAqIHNpbiwgdG9wU3RhcnQuWSArICh0b3BGaW5pc2guWSAtIHRvcFN0YXJ0LlkpIC8gMiAtIGJveC5IZWlnaHQgLyAyICsgMC43NSAqIGJveC5IZWlnaHQgKiBjb3MsIGJveC5XaWR0aCwgYm94LkhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZy5EcmF3U3RyaW5nKGxhYmVsLCBMYWJlbEZvbnQsIExhYmVsQnJ1c2hDb2xvciwgYm91bmRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoX3Nob3dJbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KHRvcFN0YXJ0LlggKyAodG9wRmluaXNoLlggLSB0b3BTdGFydC5YKSAvIDIsIHRvcFN0YXJ0LlkgKyAodG9wRmluaXNoLlkgLSB0b3BTdGFydC5ZKSAvIDIsIDEwLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN4ID0gKGJvdW5kcy5MZWZ0ICsgYm91bmRzLlJpZ2h0KSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN5ID0gKGJvdW5kcy5Cb3R0b20gKyBib3VuZHMuVG9wKSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLk1heChib3VuZHMuV2lkdGgsIGJvdW5kcy5IZWlnaHQpIC8gMiArIDU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJiID0gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KGN4ICsgciAqIE1hdGguQ29zKEluZGV4QW5nbGUpIC0gNSwgY3kgKyByICogTWF0aC5TaW4oSW5kZXhBbmdsZSkgLSA1LCAxMCwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIGcuRHJhd1N0cmluZyhQYXJlbnRJbmRleC5Ub1N0cmluZygpLCBJbmRleEZvbnQsIEluZGV4QnJ1c2hDb2xvciwgYmIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHcmFwaGljc0xheWVyLkJveCBMb2NhbFRvR2xvYmFsKFZlY3RvciBsb2NhbCwgaW50IHdpZHRoLCBpbnQgaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaGljc0xheWVyLkJveCh3aWR0aCAqIGxvY2FsLlgsIGhlaWdodCAqIGxvY2FsLlkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSGl0KGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIE1lZXRzKEVkZ2Ugb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX1YxID09IG90aGVyLlYxIHx8XHJcbiAgICAgICAgICAgICAgICAgICBfVjIgPT0gb3RoZXIuVjEgfHxcclxuICAgICAgICAgICAgICAgICAgIF9WMSA9PSBvdGhlci5WMiB8fFxyXG4gICAgICAgICAgICAgICAgICAgX1YyID09IG90aGVyLlYyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIFZlcnRleCBWMVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfVjE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9WMSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgVmVydGV4IFYyXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9WMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX1YyID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBPcmllbnRhdGlvbnMgT3JpZW50YXRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX09yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfT3JpZW50YXRpb24gPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBVcGRhdGVTdHlsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIFVwZGF0ZVN0eWxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChTdHlsZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgU3R5bGUgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuICAgICAgICAgICAgU3R5bGUgPSBzYi5Ub1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIGZsb2F0IFRoaWNrbmVzc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpY2tuZXNzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfdGhpY2tuZXNzID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljc0xheWVyLkFSR0IgQ29sb3JcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0NvbG9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfQ29sb3IgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIF9wZW5Db2xvciA9IF9Db2xvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNTZWxlY3RlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfSXNTZWxlY3RlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IF9Jc1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBfSXNTZWxlY3RlZCA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIENvbG9yID0gX0lzU2VsZWN0ZWQgPyBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDUwLCAyMDUsIDUwKSA6IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBpbnQgTXVsdGlwbGljaXR5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9NdWx0aXBsaWNpdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9NdWx0aXBsaWNpdHkgPSBNYXRoLk1heCgxLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgU3R5bGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3N0eWxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUuQ29udGFpbnMoXCJ+fnx+fH5+XCIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IHN0eWxlLlNwbGl0KG5ldyBzdHJpbmdbXSB7IFwifn58fnx+flwiIH0sIFN0cmluZ1NwbGl0T3B0aW9ucy5Ob25lKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMuTGVuZ3RoID49IDIpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IHBhcnRzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBMYWJlbCA9IHBhcnRzWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUuU3RhcnRzV2l0aChcIitcIikgJiYgIXN0cmluZy5Jc051bGxPckVtcHR5KF9zdHlsZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgX3N0eWxlICs9IFwiLCBcIiArIHN0eWxlLlRyaW1TdGFydCgnKycpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIF9zdHlsZSA9IHN0eWxlLlRyaW1TdGFydCgnKycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIExhYmVsIHsgZ2V0OyBzZXQ7IH1cclxuICAgXHJcbiAgICAgICAgVmVydGV4IF9WMTtcclxuICAgICAgICBWZXJ0ZXggX1YyO1xyXG4gICAgICAgIE9yaWVudGF0aW9ucyBfT3JpZW50YXRpb247XHJcbiAgICAgICAgZmxvYXQgX3RoaWNrbmVzcyA9IDQ7XHJcbiAgICAgICAgR3JhcGhpY3NMYXllci5BUkdCIF9Db2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMCwgMCwgMCk7XHJcbiAgICAgICAgR3JhcGhpY3NMYXllci5BUkdCIF9wZW5Db2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMCwgMCwgMCk7XHJcbiAgICAgICAgYm9vbCBfSXNTZWxlY3RlZDtcclxuICAgICAgICBpbnQgX011bHRpcGxpY2l0eTtcclxuICAgICAgICBzdHJpbmcgX3N0eWxlO1xyXG4gICAgICAgIGJvb2wgX3Nob3dJbmRleCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFRvZ2dsZUluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9zaG93SW5kZXggPSAhX3Nob3dJbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgUm90YXRlSW5kZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSW5kZXhBbmdsZSArPSBNYXRoLlBJIC8gMTY7XHJcbiAgICAgICAgICAgIGlmIChJbmRleEFuZ2xlID49IDIgKiBNYXRoLlBJKVxyXG4gICAgICAgICAgICAgICAgSW5kZXhBbmdsZSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdyYXBoIDogR3JhcGhpY3NMYXllci5JUGFpbnRhYmxlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IHN0cmluZyBHcmFwaEV4dGVuc2lvbiA9IFwiLmdyYXBoXCI7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IHN0cmluZyBFZGdlV2VpZ2h0RXh0ZW5zaW9uID0gXCIuZWRnZSB3ZWlnaHRcIjtcclxuXHJcbiAgICAgICAgTGlzdDxWZXJ0ZXg+IF92ZXJ0aWNlcyA9IG5ldyBMaXN0PFZlcnRleD4oKTtcclxuICAgICAgICBMaXN0PEVkZ2U+IF9lZGdlcyA9IG5ldyBMaXN0PEVkZ2U+KCk7XHJcbiAgICAgICAgb2JqZWN0IF9Nb2RpZnlMaXN0c1Rva2VuID0gbmV3IG9iamVjdCgpO1xyXG5cclxuICAgICAgICBzdHJpbmcgX0ZpbGVOYW1lID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNEaXJlY3RlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6R3JhcGhzLkVkZ2U+KF9lZGdlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5FZGdlLCBib29sPikoZSA9PiBlLk9yaWVudGF0aW9uICE9IEVkZ2UuT3JpZW50YXRpb25zLk5vbmUpKTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8SUhpdHRhYmxlPiBTZWxlY3RlZEl0ZW1zXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkSXRlbXMgPSBuZXcgTGlzdDxJSGl0dGFibGU+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gU2VsZWN0ZWRWZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy5BZGQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gU2VsZWN0ZWRFZGdlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy5BZGQoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZEl0ZW1zO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxWZXJ0ZXg+IFNlbGVjdGVkVmVydGljZXNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KF92ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsIGJvb2w+KSh2ID0+IHYuSXNTZWxlY3RlZCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxFZGdlPiBTZWxlY3RlZEVkZ2VzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpHcmFwaHMuRWRnZT4oX2VkZ2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLkVkZ2UsIGJvb2w+KShlID0+IGUuSXNTZWxlY3RlZCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5Cb3ggQm91bmRpbmdSZWN0YW5nbGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IGRvdWJsZS5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHQgPSBkb3VibGUuTWluVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IGRvdWJsZS5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm90dG9tID0gZG91YmxlLk1pblZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gTWF0aC5NaW4obGVmdCwgdi5Mb2NhbEJvdW5kcy5MZWZ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSBNYXRoLk1heChyaWdodCwgdi5Mb2NhbEJvdW5kcy5SaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IE1hdGguTWluKHRvcCwgdi5Mb2NhbEJvdW5kcy5Ub3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3R0b20gPSBNYXRoLk1heChib3R0b20sIHYuTG9jYWxCb3VuZHMuQm90dG9tKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGhpY3NMYXllci5Cb3gobGVmdCwgdG9wLCByaWdodCAtIGxlZnQsIGJvdHRvbSAtIHRvcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljc0xheWVyLkJveCBTZWxlY3RlZEJvdW5kaW5nUmVjdGFuZ2xlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN2ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpHcmFwaHMuVmVydGV4PihTZWxlY3RlZFZlcnRpY2VzKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdi5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBCb3VuZGluZ1JlY3RhbmdsZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IGRvdWJsZS5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHQgPSBkb3VibGUuTWluVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IGRvdWJsZS5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm90dG9tID0gZG91YmxlLk1pblZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBzdilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSBNYXRoLk1pbihsZWZ0LCB2LkxvY2FsQm91bmRzLkxlZnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodCA9IE1hdGguTWF4KHJpZ2h0LCB2LkxvY2FsQm91bmRzLlJpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gTWF0aC5NaW4odG9wLCB2LkxvY2FsQm91bmRzLlRvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbSA9IE1hdGguTWF4KGJvdHRvbSwgdi5Mb2NhbEJvdW5kcy5Cb3R0b20pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaGljc0xheWVyLkJveChsZWZ0LCB0b3AsIHJpZ2h0IC0gbGVmdCwgYm90dG9tIC0gdG9wKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTmFtZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfRmlsZU5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9GaWxlTmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxWZXJ0ZXg+IFZlcnRpY2VzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF92ZXJ0aWNlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8RWRnZT4gRWRnZXNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2VkZ2VzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBQYXJhbWV0ZXJzRGlydHkgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUGFyYW1ldGVyc0RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaChTZXJpYWxpemF0aW9uR3JhcGggZylcclxuICAgICAgICAgICAgOiB0aGlzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF92ZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25WZXJ0ZXgsZ2xvYmFsOjpHcmFwaHMuVmVydGV4PihnLlZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25WZXJ0ZXgsIGdsb2JhbDo6R3JhcGhzLlZlcnRleD4pKHYgPT4gbmV3IFZlcnRleCh2KSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBfZWRnZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkdyYXBocy5TZXJpYWxpemF0aW9uRWRnZSxnbG9iYWw6OkdyYXBocy5FZGdlPihnLkVkZ2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25FZGdlLCBnbG9iYWw6OkdyYXBocy5FZGdlPikoZSA9PiBuZXcgRWRnZShlLCBfdmVydGljZXMpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIE5hbWUgPSBnLk5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGgoSUVudW1lcmFibGU8VmVydGV4PiB2ZXJ0aWNlcywgSUVudW1lcmFibGU8RWRnZT4gZWRnZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdmVydGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KHZlcnRpY2VzKTtcclxuICAgICAgICAgICAgX2VkZ2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpHcmFwaHMuRWRnZT4oZWRnZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoKEFsZ29yaXRobXMuR3JhcGggZywgTGlzdDxWZWN0b3I+IHBvc2l0aW9uLCBib29sIGRpcmVjdGVkID0gdHJ1ZSlcclxuICAgICAgICAgICAgOiB0aGlzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChnLlZlcnRleFdlaWdodCAhPSBudWxsICYmIGcuVmVydGV4V2VpZ2h0LkNvdW50ID09IGcuTilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3ZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oZy5WZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6R3JhcGhzLlZlcnRleD4pKHYgPT4gbmV3IFZlcnRleChwb3NpdGlvblt2XS5YLCBwb3NpdGlvblt2XS5ZLCBnLlZlcnRleFdlaWdodFt2XS5Ub1N0cmluZygpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3ZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oZy5WZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6R3JhcGhzLlZlcnRleD4pKHYgPT4gbmV3IFZlcnRleChwb3NpdGlvblt2XS5YLCBwb3NpdGlvblt2XS5ZKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9lZGdlcyA9IG5ldyBMaXN0PEVkZ2U+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGcuTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBnLk47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZy5EaXJlY3RlZFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlcy5BZGQobmV3IEVkZ2UoX3ZlcnRpY2VzW2ldLCBfdmVydGljZXNbal0sIEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZy5BZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlcy5BZGQobmV3IEVkZ2UoX3ZlcnRpY2VzW2pdLCBfdmVydGljZXNbaV0sIEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZy5BZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlcy5BZGQobmV3IEVkZ2UoX3ZlcnRpY2VzW2ldLCBfdmVydGljZXNbal0sIEVkZ2UuT3JpZW50YXRpb25zLk5vbmUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFBhaW50KEdyYXBoaWNzTGF5ZXIuSUdyYXBoaWNzIGcsIGludCB3aWR0aCwgaW50IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUGFyYW1ldGVyc0RpcnR5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBncmFwaCA9IG5ldyBBbGdvcml0aG1zLkdyYXBoKEdldEVkZ2VXZWlnaHRzKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuID0gVmVydGljZXMuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgVmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmVydGljZXNbaV0uSXNVbml2ZXJzYWwgPSBncmFwaC5EZWdyZWUoaSkgPT0gbiAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBhcmFtZXRlcnNEaXJ0eSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBqaiA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdi5QYXJlbnRJbmRleCA9IGpqKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdi5QYWludChnLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBqaiA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5QYXJlbnRJbmRleCA9IGpqKys7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5QYWludChnLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBHZXRFZGdlV2VpZ2h0cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgd2VpZ2h0cyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3ZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IF92ZXJ0aWNlcy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEVkZ2UgZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRWRnZUV4aXN0cyhfdmVydGljZXNbaV0sIF92ZXJ0aWNlc1tqXSwgb3V0IGUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzLkFkZCgxKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChFZGdlRXhpc3RzKF92ZXJ0aWNlc1tqXSwgX3ZlcnRpY2VzW2ldLCBvdXQgZSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5PcmllbnRhdGlvbiA9PSBFZGdlLk9yaWVudGF0aW9ucy5Ob25lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cy5BZGQoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHMuQWRkKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzLkFkZCgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHdlaWdodHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBNb2RpZnlPcmllbnRhdGlvbihMaXN0PGludD4gZWRnZVdlaWdodHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3ZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IF92ZXJ0aWNlcy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3ID0gZWRnZVdlaWdodHNba107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3ICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IEdldEVkZ2UoX3ZlcnRpY2VzW2ldLCBfdmVydGljZXNbal0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuVjEgPT0gX3ZlcnRpY2VzW2ldICYmIGUuVjIgPT0gX3ZlcnRpY2VzW2pdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodyA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5PcmllbnRhdGlvbiA9IEVkZ2UuT3JpZW50YXRpb25zLkJhY2t3YXJkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuT3JpZW50YXRpb24gPSBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHcgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuT3JpZW50YXRpb24gPSBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuT3JpZW50YXRpb24gPSBFZGdlLk9yaWVudGF0aW9ucy5CYWNrd2FyZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBQYXJhbWV0ZXJzRGlydHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgR3JhcGggQ2xvbmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHMgPSBHcmFwaHNDb3JlLkNvbXBhY3RTZXJpYWxpemVyLlNlcmlhbGl6ZSh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIGcgPSBHcmFwaHNDb3JlLkNvbXBhY3RTZXJpYWxpemVyLkRlc2VyaWFsaXplKHMpO1xyXG4gICAgICAgICAgICBpZiAoZyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgZy5QYXJhbWV0ZXJzRGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShcImNsb25lIGlzIG51bGxcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElIaXR0YWJsZSBIaXRUZXN0KGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHYuSGl0KHgsIHkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZWRnZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLkhpdCh4LCB5KSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBVbnNlbGVjdEFsbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBVbnNlbGVjdEFsbFZlcnRpY2VzKCk7XHJcbiAgICAgICAgICAgIFVuc2VsZWN0QWxsRWRnZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVuc2VsZWN0QWxsVmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgdi5Jc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBVbnNlbGVjdEFsbEVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9lZGdlcylcclxuICAgICAgICAgICAgICAgIGUuSXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2VsZWN0RWRnZXMoSUVudW1lcmFibGU8RWRnZT4gZWRnZXMsIGJvb2wgc3ltbWV0cmljRGlmZmVyZW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFVuc2VsZWN0QWxsVmVydGljZXMoKTtcclxuICAgICAgICAgICAgaWYgKCFzeW1tZXRyaWNEaWZmZXJlbmNlKVxyXG4gICAgICAgICAgICAgICAgVW5zZWxlY3RBbGxFZGdlcygpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZWRnZXMpXHJcbiAgICAgICAgICAgICAgICBlLklzU2VsZWN0ZWQgPSBzeW1tZXRyaWNEaWZmZXJlbmNlID8gIWUuSXNTZWxlY3RlZCA6IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZWxlY3RWZXJ0aWNlcyhJRW51bWVyYWJsZTxWZXJ0ZXg+IHZlcnRpY2VzLCBib29sIHN5bW1ldHJpY0RpZmZlcmVuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBVbnNlbGVjdEFsbEVkZ2VzKCk7XHJcbiAgICAgICAgICAgIGlmICghc3ltbWV0cmljRGlmZmVyZW5jZSlcclxuICAgICAgICAgICAgICAgIFVuc2VsZWN0QWxsVmVydGljZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgdi5Jc1NlbGVjdGVkID0gc3ltbWV0cmljRGlmZmVyZW5jZSA/ICF2LklzU2VsZWN0ZWQgOiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZWxlY3RPYmplY3RzKExpc3Q8R3JhcGhpY3NMYXllci5Cb3g+IHNlbGVjdGlvblBvaW50cywgYm9vbCBzeW1tZXRyaWNEaWZmZXJlbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgUG9seWdvbkNvbnRhaW5lcihzZWxlY3Rpb25Qb2ludHMuVG9BcnJheSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdmVydGljZXNJblBvbHlnb24gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oX3ZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlcnRleCwgYm9vbD4pKHYgPT4gYm91bmRzLkNvbnRhaW5zKG5ldyBHcmFwaGljc0xheWVyLkJveCh2LlgsIHYuWSkpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHZlcnRpY2VzSW5Qb2x5Z29uLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTZWxlY3RWZXJ0aWNlcyh2ZXJ0aWNlc0luUG9seWdvbiwgc3ltbWV0cmljRGlmZmVyZW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVkZ2VzSGl0dGluZ1BvbHlnb24gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6R3JhcGhzLkVkZ2U+KF9lZGdlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5FZGdlLCBib29sPikoZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzZWxlY3Rpb25Qb2ludHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gc2VsZWN0aW9uUG9pbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IHNlbGVjdGlvblBvaW50c1soaSArIDEpICUgc2VsZWN0aW9uUG9pbnRzLkNvdW50XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoVXRpbGl0eS5IYXZlSW50ZXJzZWN0aW9uKHN0YXJ0LCBlbmQsIGUuVjEuTG9jYXRpb24sIGUuVjIuTG9jYXRpb24pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBTZWxlY3RFZGdlcyhlZGdlc0hpdHRpbmdQb2x5Z29uLCBzeW1tZXRyaWNEaWZmZXJlbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCB7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgQWRkVmVydGV4KFZlcnRleCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9zaG93VmVydGV4SW5kaWNlcylcclxuICAgICAgICAgICAgICAgIHYuVG9nZ2xlSW5kZXgoKTtcclxuICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICBfdmVydGljZXMuQWRkKHYpO1xyXG5cclxuICAgICAgICAgICAgUGFyYW1ldGVyc0RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIFJlbW92ZVZlcnRleChWZXJ0ZXggdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvcnMgPSBGaW5kTmVpZ2hib3JzKHYpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgeCBpbiBuZWlnaGJvcnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFJlbW92ZUVkZ2UodiwgeCk7XHJcbiAgICAgICAgICAgICAgICBSZW1vdmVFZGdlKHgsIHYpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgIF92ZXJ0aWNlcy5SZW1vdmUodik7XHJcblxyXG4gICAgICAgICAgICBQYXJhbWV0ZXJzRGlydHkgPSBuZWlnaGJvcnMuQ291bnQgPiAwO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5laWdoYm9ycy5Db3VudCA+IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEFkZEVkZ2UoVmVydGV4IHYxLCBWZXJ0ZXggdjIsIGludCBtdWx0aXBsaWNpdHkgPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFkZEVkZ2UodjEsIHYyLCBFZGdlLk9yaWVudGF0aW9ucy5Ob25lLCBtdWx0aXBsaWNpdHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBBZGRFZGdlKFZlcnRleCB2MSwgVmVydGV4IHYyLCBFZGdlLk9yaWVudGF0aW9ucyBvcmllbnRhdGlvbiwgaW50IG11bHRpcGxpY2l0eSA9IDEsIGZsb2F0IHRoaWNrbmVzcyA9IDMsIHN0cmluZyBzdHlsZSA9IFwiXCIsIHN0cmluZyBsYWJlbCA9IFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodjEgPT0gdjIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vdCBhbGxvd2luZyBzZWxmLWxvb3BzIGZvciBub3cuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghRWRnZUV4aXN0cyh2MSwgdjIpICYmICFFZGdlRXhpc3RzKHYyLCB2MSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlZGdlID0gbmV3IEVkZ2UodjEsIHYyLCBvcmllbnRhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZS5NdWx0aXBsaWNpdHkgPSBtdWx0aXBsaWNpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZS5UaGlja25lc3MgPSB0aGlja25lc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZS5TdHlsZSA9IHN0eWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2UuTGFiZWwgPSBsYWJlbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3Nob3dFZGdlSW5kaWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZS5Ub2dnbGVJbmRleCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9lZGdlcy5BZGQoZWRnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgUGFyYW1ldGVyc0RpcnR5ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFJlbW92ZUVkZ2UoVmVydGV4IHYxLCBWZXJ0ZXggdjIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PEVkZ2U+IHRvUmVtb3ZlO1xyXG5cclxuICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvUmVtb3ZlID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkdyYXBocy5FZGdlPihfZWRnZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuRWRnZSwgYm9vbD4pKGUgPT4gZS5WMSA9PSB2MSAmJiBlLlYyID09IHYyKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIHRvUmVtb3ZlKVxyXG4gICAgICAgICAgICAgICAgX2VkZ2VzLlJlbW92ZShlKTtcclxuXHJcbiAgICAgICAgICAgIFBhcmFtZXRlcnNEaXJ0eSA9IHRvUmVtb3ZlLkNvdW50ID4gMDtcclxuICAgICAgICAgICAgcmV0dXJuIHRvUmVtb3ZlLkNvdW50ID4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgRWRnZUV4aXN0cyhWZXJ0ZXggdjEsIFZlcnRleCB2MilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVkZ2UgZWRnZTtcclxuICAgICAgICAgICAgcmV0dXJuIEVkZ2VFeGlzdHModjEsIHYyLCBvdXQgZWRnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEVkZ2VFeGlzdHMoVmVydGV4IHYxLCBWZXJ0ZXggdjIsIG91dCBFZGdlIGVkZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlZGdlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZSA9IGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuVjEgPT0gdjEgJiYgZS5WMiA9PSB2MiAmJiAoZS5PcmllbnRhdGlvbiA9PSBFZGdlLk9yaWVudGF0aW9ucy5Ob25lIHx8IGUuT3JpZW50YXRpb24gPT0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5WMSA9PSB2MiAmJiBlLlYyID09IHYxICYmIGUuT3JpZW50YXRpb24gPT0gRWRnZS5PcmllbnRhdGlvbnMuQmFja3dhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRWRnZSBHZXRFZGdlKFZlcnRleCB2MSwgVmVydGV4IHYyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9lZGdlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5WMSA9PSB2MSAmJiBlLlYyID09IHYyIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuVjEgPT0gdjIgJiYgZS5WMiA9PSB2MSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGggSW5kdWNlZFN1YmdyYXBoKExpc3Q8VmVydGV4PiB2ZXJ0aWNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbmR1Y2VkID0gbmV3IEdyYXBoKCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgaW5kdWNlZC5BZGRWZXJ0ZXgodik7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdjEgaW4gaW5kdWNlZC5WZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYyIGluIGluZHVjZWQuVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRWRnZSBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChFZGdlRXhpc3RzKHYxLCB2Miwgb3V0IGUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmR1Y2VkLkFkZEVkZ2UodjEsIHYyLCBlLk9yaWVudGF0aW9uICE9IEVkZ2UuT3JpZW50YXRpb25zLk5vbmUgPyBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkIDogRWRnZS5PcmllbnRhdGlvbnMuTm9uZSwgZS5NdWx0aXBsaWNpdHksIGUuVGhpY2tuZXNzLCBlLlN0eWxlLCBlLkxhYmVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGluZHVjZWQuQ2xvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERpc2pvaW50VW5pb24oR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGcuVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICBBZGRWZXJ0ZXgodik7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBnLkVkZ2VzKVxyXG4gICAgICAgICAgICAgICAgQWRkRWRnZShlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQWRkRWRnZShFZGdlIGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBZGRFZGdlKGUuVjEsIGUuVjIsIGUuT3JpZW50YXRpb24sIE1hdGguTWF4KDEsIGUuTXVsdGlwbGljaXR5KSwgZS5UaGlja25lc3MsIGUuU3R5bGUsIGUuTGFiZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8VmVydGV4PiBGaW5kTmVpZ2hib3JzKFZlcnRleCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG5laWdoYm9ycyA9IG5ldyBMaXN0PFZlcnRleD4oKTtcclxuXHJcbiAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuVjEgPT0gdilcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzLkFkZChlLlYyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5WMiA9PSB2KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnMuQWRkKGUuVjEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmVpZ2hib3JzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVHJhbnNsYXRlKFZlY3RvciBvZmZzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHYuWCArPSBvZmZzZXQuWDtcclxuICAgICAgICAgICAgICAgICAgICB2LlkgKz0gb2Zmc2V0Llk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgX3Nob3dWZXJ0ZXhJbmRpY2VzO1xyXG4gICAgICAgIGJvb2wgX3Nob3dFZGdlSW5kaWNlcztcclxuICAgICAgICBwdWJsaWMgdm9pZCBUb2dnbGVFZGdlSW5kaWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfc2hvd0VkZ2VJbmRpY2VzID0gIV9zaG93RWRnZUluZGljZXM7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhIGluIEVkZ2VzKVxyXG4gICAgICAgICAgICAgICAgYS5Ub2dnbGVJbmRleCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVG9nZ2xlVmVydGV4SW5kaWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfc2hvd1ZlcnRleEluZGljZXMgPSAhX3Nob3dWZXJ0ZXhJbmRpY2VzO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYSBpbiBWZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIGEuVG9nZ2xlSW5kZXgoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgR3JhcGhpY3NMYXllcjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIEdyYXBoc0NvcmU7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHcmFwaENhbnZhcyA6IEdyYXBoaWNzTGF5ZXIuSVBhaW50YWJsZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBldmVudCBBY3Rpb248R3JhcGg+IEdyYXBoTW9kaWZpZWQ7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxzdHJpbmc+IE5hbWVNb2RpZmllZDtcclxuXHJcbiAgICAgICAgY29uc3QgaW50IERlZmF1bHRCYXNlVmlld1NjYWxlID0gODAwO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgQmFzZVZpZXdTY2FsZSA9IERlZmF1bHRCYXNlVmlld1NjYWxlO1xyXG4gICAgICAgIGNvbnN0IGludCBNYXhab29tU2NhbGUgPSA2MDAwO1xyXG4gICAgICAgIGRvdWJsZSBab29tRGVsdGEgPSAwLjE1O1xyXG4gICAgICAgIGRvdWJsZSBNaW5ab29tID0gMC4xNTtcclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0Wm9vbURlbHRhKGRvdWJsZSBkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgWm9vbURlbHRhID0gZDtcclxuICAgICAgICAgICAgTWluWm9vbSA9IGQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIF96b29tRml0TmV4dFBhaW50O1xyXG4gICAgICAgIGJvb2wgX3NuYXBUb0dyaWQgPSB0cnVlO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZG91YmxlIF9ncmlkU3RlcCA9IDAuMDQ7XHJcbiAgICAgICAgYm9vbCBfZHJhd0dyaWQgPSB0cnVlO1xyXG4gICAgICAgIHB1YmxpYyBib29sIFNuYXBUb0dyaWQgeyBnZXQgeyByZXR1cm4gX3NuYXBUb0dyaWQ7IH0gc2V0IHsgdmFyIG5lZWRSZWRyYXcgPSB2YWx1ZSAmJiAhX3NuYXBUb0dyaWQ7IF9zbmFwVG9HcmlkID0gdmFsdWU7IGlmIChuZWVkUmVkcmF3KSBJbnZhbGlkYXRlKCk7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgR3JpZFN0ZXAgeyBnZXQgeyByZXR1cm4gX2dyaWRTdGVwOyB9IHNldCB7IHZhciBuZWVkUmVkcmF3ID0gU25hcFRvR3JpZCAmJiB2YWx1ZSAhPSBfZ3JpZFN0ZXA7IF9ncmlkU3RlcCA9IHZhbHVlOyBpZiAobmVlZFJlZHJhdykgSW52YWxpZGF0ZSgpOyB9IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBEcmF3R3JpZCB7IGdldCB7IHJldHVybiBfZHJhd0dyaWQ7IH0gc2V0IHsgdmFyIG5lZWRSZWRyYXcgPSBfZHJhd0dyaWQgIT0gdmFsdWU7IF9kcmF3R3JpZCA9IHZhbHVlOyBpZiAobmVlZFJlZHJhdykgSW52YWxpZGF0ZSgpOyB9IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBIYXNQYWludGVkIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBHcmFwaCBfZ3JhcGg7XHJcblxyXG4gICAgICAgIGludCBXaWR0aCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgaW50IEhlaWdodCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgICNyZWdpb24gZHJhZ2dpbmcgdmVydGV4IHZhcmlhYmxlc1xyXG4gICAgICAgIFZlcnRleCBfRHJhZ2dlZFZlcnRleCA9IG51bGw7XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIGRyYWdnaW5nIHNlbGVjdGlvbiB2YXJpYWJsZXNcclxuICAgICAgICBMaXN0PEJveD4gX3NlbGVjdGlvblBvaW50cyA9IG5ldyBMaXN0PEJveD4oKTtcclxuICAgICAgICBvYmplY3QgX1NlbGVjdGlvblBvaW50c1Rva2VuID0gbmV3IG9iamVjdCgpO1xyXG4gICAgICAgIGJvb2wgX2NvbnRyb2xXYXNEb3duO1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBjaGlsZHJlbiBpdGVtc1xyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBHcmFwaCB7IGdldCB7IHJldHVybiBfZ3JhcGg7IH0gfVxyXG4gICAgICAgIElDYW52YXMgX2NhbnZhcztcclxuICAgICAgICBwdWJsaWMgSUNhbnZhcyBDYW52YXMgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2NhbnZhczsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2NhbnZhcyA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIF9jYW52YXMuTW91c2VNb3ZlZCArPSBPbk1vdXNlTW92ZTtcclxuICAgICAgICAgICAgICAgIF9jYW52YXMuTW91c2VCdXR0b25Eb3duICs9IE9uTW91c2VEb3duO1xyXG4gICAgICAgICAgICAgICAgX2NhbnZhcy5Nb3VzZUJ1dHRvblVwICs9IE9uTW91c2VVcDtcclxuICAgICAgICAgICAgICAgIF9jYW52YXMuTW91c2VCdXR0b25Eb3VibGVDbGlja2VkICs9IE9uTW91c2VEb3VibGVDbGljaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIGRvdWJsZSBab29tXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IF9ab29tKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBfWm9vbSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gKGludCkoX1pvb20gKiBCYXNlVmlld1NjYWxlKTtcclxuICAgICAgICAgICAgICAgIGlmIChzY2FsZSA+IE1heFpvb21TY2FsZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZSA9IE1heFpvb21TY2FsZTtcclxuICAgICAgICAgICAgICAgICAgICBfWm9vbSA9IHNjYWxlIC8gQmFzZVZpZXdTY2FsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBWaWV3U2NhbGUgPSBzY2FsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IFZpZXdTY2FsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdmlld1NjYWxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByb3RlY3RlZCBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IF92aWV3U2NhbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIF92aWV3U2NhbGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0VtcHR5IHsgZ2V0IHsgcmV0dXJuIF9ncmFwaC5WZXJ0aWNlcy5Db3VudCA8PSAwOyB9IH1cclxuXHJcbiAgICAgICAgU3RhdGVzIF9zdGF0ZSA9IFN0YXRlcy5JZGxlO1xyXG4gICAgICAgIGludCBfdmlld1NjYWxlID0gRGVmYXVsdEJhc2VWaWV3U2NhbGU7XHJcbiAgICAgICAgZG91YmxlIF9ab29tID0gMS4wO1xyXG4gICAgICAgIEZ1bmM8c3RyaW5nLCBHcmFwaD4gX3NlY29uZGFyeUNvbnZlcnRlcjtcclxuXHJcbiAgICAgICAgTGlzdDxIaXN0b3JpY2FsR3JhcGg+IF9oaXN0b3J5ID0gbmV3IExpc3Q8SGlzdG9yaWNhbEdyYXBoPigpO1xyXG4gICAgICAgIGludCBfaGlzdG9yeUluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEFSR0IgU2VsZWN0aW9uUGVuQ29sb3IgPSBuZXcgQVJHQigwLCAwLCAyNTUpO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBBUkdCIEdyaWRQZW5Db2xvciA9IG5ldyBBUkdCKDc1LCAwLCAxMCwgMCk7XHJcblxyXG4gICAgICAgIGVudW0gU3RhdGVzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJZGxlLFxyXG4gICAgICAgICAgICBEcmFnZ2luZ1ZlcnRleCxcclxuICAgICAgICAgICAgRHJhZ2dpbmdTZWxlY3Rpb25SZWdpb24sXHJcbiAgICAgICAgICAgIERyYWdnaW5nU2VsZWN0ZWRWZXJ0aWNlc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEFSR0IgQmFja2dyb3VuZENvbG9yID0gbmV3IEFSR0IoMHhmNywgMHhmNywgMHhmNyk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaENhbnZhcyhHcmFwaCBncmFwaCwgIEZ1bmM8c3RyaW5nLCBHcmFwaD4gc2Vjb25kYXJ5Q29udmVydGVyID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9ncmFwaCA9IGdyYXBoICE9IG51bGwgPyBncmFwaCA6IG5ldyBHcmFwaCgpO1xyXG4gICAgICAgICAgICBfc2Vjb25kYXJ5Q29udmVydGVyID0gc2Vjb25kYXJ5Q29udmVydGVyO1xyXG4gICAgICAgICAgICBfaGlzdG9yeS5BZGQobmV3IEhpc3RvcmljYWxHcmFwaCgpIHsgR3JhcGggPSBfZ3JhcGguQ2xvbmUoKSwgWm9vbSA9IF9ab29tLCBWaWV3U2NhbGUgPSBfdmlld1NjYWxlIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgSW52YWxpZGF0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQ2FudmFzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBDYW52YXMuSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgR3JhcGhDaGFuZ2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfaGlzdG9yeS5Db3VudCAtIF9oaXN0b3J5SW5kZXggLSAxID4gMClcclxuICAgICAgICAgICAgICAgIF9oaXN0b3J5LlJlbW92ZVJhbmdlKF9oaXN0b3J5SW5kZXggKyAxLCBfaGlzdG9yeS5Db3VudCAtIF9oaXN0b3J5SW5kZXggLSAxKTtcclxuXHJcbiAgICAgICAgICAgIF9oaXN0b3J5LkFkZChuZXcgSGlzdG9yaWNhbEdyYXBoKCkgeyBHcmFwaCA9IF9ncmFwaC5DbG9uZSgpLCBab29tID0gX1pvb20sIFZpZXdTY2FsZSA9IF92aWV3U2NhbGUgfSk7XHJcbiAgICAgICAgICAgIF9oaXN0b3J5SW5kZXggPSBfaGlzdG9yeS5Db3VudCAtIDE7XHJcblxyXG4gICAgICAgICAgICBpZiAoR3JhcGhNb2RpZmllZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgR3JhcGhNb2RpZmllZChHcmFwaCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBEb1VuZG8oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9oaXN0b3J5SW5kZXggPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIF9oaXN0b3J5SW5kZXgtLTtcclxuICAgICAgICAgICAgT2JleUhpc3RvcnkoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBfaGlzdG9yeUluZGV4ID4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgRG9SZWRvKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfaGlzdG9yeUluZGV4ID49IF9oaXN0b3J5LkNvdW50IC0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIF9oaXN0b3J5SW5kZXgrKztcclxuICAgICAgICAgICAgT2JleUhpc3RvcnkoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBfaGlzdG9yeUluZGV4IDwgX2hpc3RvcnkuQ291bnQgLSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBPYmV5SGlzdG9yeSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZ3JhcGggPSBfaGlzdG9yeVtfaGlzdG9yeUluZGV4XS5HcmFwaC5DbG9uZSgpO1xyXG4gICAgICAgICAgICBWaWV3U2NhbGUgPSBfaGlzdG9yeVtfaGlzdG9yeUluZGV4XS5WaWV3U2NhbGU7XHJcbiAgICAgICAgICAgIFpvb20gPSBfaGlzdG9yeVtfaGlzdG9yeUluZGV4XS5ab29tO1xyXG4gICAgICAgICAgICBfZ3JhcGguUGFyYW1ldGVyc0RpcnR5ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChHcmFwaE1vZGlmaWVkICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBHcmFwaE1vZGlmaWVkKEdyYXBoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gYWN0aW9uc1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFNhdmUoc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZ3JhcGguTmFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiOy8vIF9ncmFwaC5TZXJpYWxpemUoKTtcclxuICAgICAgICB9XHJcbiAgICAgXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9ab29tKGludCBhbW91bnQsIEJveCBsb2NhdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB3aWR0aCA9IFdpZHRoO1xyXG4gICAgICAgICAgICBpbnQgaGVpZ2h0ID0gSGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgdmFyIG9sZENlbnRlciA9IG5ldyBWZWN0b3IoKGRvdWJsZSl3aWR0aCAvIChkb3VibGUpX3ZpZXdTY2FsZSAqIGxvY2F0aW9uLlgsIChkb3VibGUpaGVpZ2h0IC8gKGRvdWJsZSlfdmlld1NjYWxlICogbG9jYXRpb24uWSk7XHJcblxyXG4gICAgICAgICAgICBab29tID0gTWF0aC5NYXgoTWluWm9vbSwgX1pvb20gKyBab29tRGVsdGEgKiBhbW91bnQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNlbnRlciA9IG5ldyBWZWN0b3IoKGRvdWJsZSl3aWR0aCAvIChkb3VibGUpX3ZpZXdTY2FsZSAqIGxvY2F0aW9uLlgsIChkb3VibGUpaGVpZ2h0IC8gKGRvdWJsZSlfdmlld1NjYWxlICogbG9jYXRpb24uWSk7XHJcblxyXG4gICAgICAgICAgICBfZ3JhcGguVHJhbnNsYXRlKGNlbnRlciAtIG9sZENlbnRlcik7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb1pvb21GaXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9ncmFwaC5WZXJ0aWNlcy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBab29tID0gMTtcclxuICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50IHdpZHRoID0gV2lkdGg7XHJcbiAgICAgICAgICAgIGludCBoZWlnaHQgPSBIZWlnaHQ7XHJcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBfZ3JhcGguU2VsZWN0ZWRCb3VuZGluZ1JlY3RhbmdsZTtcclxuICAgICAgICAgICAgdmFyIGMgPSBuZXcgVmVjdG9yKGJvdW5kcy5MZWZ0ICsgYm91bmRzLldpZHRoIC8gMiwgYm91bmRzLlRvcCArIGJvdW5kcy5IZWlnaHQgLyAyKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhY3R1YWwgPSBNYXRoLk1pbih3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgWm9vbSA9IDAuOSAqIGFjdHVhbCAvIE1hdGguTWF4KGJvdW5kcy5XaWR0aCwgYm91bmRzLkhlaWdodCkgLyBCYXNlVmlld1NjYWxlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNlbnRlciA9IG5ldyBWZWN0b3IoKGRvdWJsZSl3aWR0aCAvIChkb3VibGUpX3ZpZXdTY2FsZSAqIDAuNSwgKGRvdWJsZSloZWlnaHQgLyAoZG91YmxlKV92aWV3U2NhbGUgKiAwLjUpO1xyXG4gICAgICAgICAgICBfZ3JhcGguVHJhbnNsYXRlKGNlbnRlciAtIGMpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9EZWxldGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX2dyYXBoLlNlbGVjdGVkVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlJlbW92ZVZlcnRleCh2KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKF9ncmFwaC5TZWxlY3RlZEVkZ2VzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2dyYXBoLlNlbGVjdGVkRWRnZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlJlbW92ZUVkZ2UoZS5WMSwgZS5WMik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb1JldmVyc2VTZWxlY3RlZEVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfZ3JhcGguU2VsZWN0ZWRFZGdlcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9ncmFwaC5TZWxlY3RlZEVkZ2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvbyA9IGUuT3JpZW50YXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9vID09IEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9vID0gRWRnZS5PcmllbnRhdGlvbnMuQmFja3dhcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob28gPT0gRWRnZS5PcmllbnRhdGlvbnMuQmFja3dhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9vID0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZS5PcmllbnRhdGlvbiA9IG9vO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb1JvdGF0ZVNlbGVjdGVkRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9ncmFwaC5TZWxlY3RlZEVkZ2VzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2dyYXBoLlNlbGVjdGVkRWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9vID0gZS5PcmllbnRhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob28gPT0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgb28gPSBFZGdlLk9yaWVudGF0aW9ucy5CYWNrd2FyZDtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbyA9PSBFZGdlLk9yaWVudGF0aW9ucy5CYWNrd2FyZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgb28gPSBFZGdlLk9yaWVudGF0aW9ucy5Ob25lO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9vID09IEVkZ2UuT3JpZW50YXRpb25zLk5vbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9vID0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZS5PcmllbnRhdGlvbiA9IG9vO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb0N1dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEb0NvcHkoKTtcclxuICAgICAgICAgICAgRG9EZWxldGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRG9Db3B5KGJvb2wgdmVyYm9zZSA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGggPSAgX2dyYXBoLkluZHVjZWRTdWJncmFwaChfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wYWN0U2VyaWFsaXplci5TZXJpYWxpemUoaCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgdm9pZCBEb1Bhc3RlKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR3JhcGggZyA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChzLkNvbnRhaW5zKFwidGlrenBpY3R1cmVcIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vZyA9IFRlWENvbnZlcnRlci5Gcm9tVGlreihzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChDb21wYWN0U2VyaWFsaXplci5Mb29rc0xpa2VBU2VyaWFsaXplZEdyYXBoKHMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnID0gQ29tcGFjdFNlcmlhbGl6ZXIuRGVzZXJpYWxpemUocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL2cgPSBHcmFwaC5EZXNlcmlhbGl6ZShzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGcgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2dyYXBoLkRpc2pvaW50VW5pb24oZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8c3RyaW5nPihzLlRyaW0oKS5TcGxpdCgnICcpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgYm9vbD4pKHggPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5TdGFydHNXaXRoKFwiW1wiKSB8fCBpbnQuVHJ5UGFyc2UoeCwgb3V0IGQpO1xyXG4gICAgICAgICAgICAgICAgfSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2cgPSBHcmFwaElPLkdyYXBoRnJvbUVkZ2VXZWlnaHRTdHJpbmcocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGcgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5EaXNqb2ludFVuaW9uKGcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2cgPSBHcmFwaElPLkdyYXBoRnJvbUdyYXBoNihzLlRyaW0oKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW1wdHkgPSBfZ3JhcGguVmVydGljZXMuQ291bnQgPD0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLkRpc2pvaW50VW5pb24oZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW1wdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOYW1lTW9kaWZpZWQoZy5OYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvQ29tcGxlbWVudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYxID0gX2dyYXBoLlNlbGVjdGVkVmVydGljZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYyID0gX2dyYXBoLlNlbGVjdGVkVmVydGljZXNbal07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlZGdlRXhpc3RzID0gX2dyYXBoLkVkZ2VFeGlzdHModjEsIHYyKSB8fCBfZ3JhcGguRWRnZUV4aXN0cyh2MiwgdjEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWRnZUV4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5SZW1vdmVFZGdlKHYxLCB2Mik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5SZW1vdmVFZGdlKHYyLCB2MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5BZGRFZGdlKHYxLCB2Mik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcblxyXG4gICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBEb1NxdWFyZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBHcmFwaCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZlcnRleE1hcCA9IG5ldyBEaWN0aW9uYXJ5PFZlcnRleCwgVmVydGV4PigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfZ3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICB2YXIgdyA9IG5ldyBWZXJ0ZXgodi5YLCB2LlksIHYuTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgIGcuQWRkVmVydGV4KHcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZlcnRleE1hcFt2XSA9IHc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9ncmFwaC5WZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHEgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlVuaW9uPGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oX2dyYXBoLkZpbmROZWlnaGJvcnModiksbmV3W10geyB2IH0pLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcS5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IHEuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGcuQWRkRWRnZSh2ZXJ0ZXhNYXBbcVtpXV0sIHZlcnRleE1hcFtxW2pdXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBEb0xpbmVHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBHcmFwaCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVkZ2VUb0NsaXF1ZU1hcCA9IG5ldyBEaWN0aW9uYXJ5PEVkZ2UsIExpc3Q8VmVydGV4Pj4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2dyYXBoLkVkZ2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2xpcXVlID0gbmV3IExpc3Q8VmVydGV4PigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZS5NdWx0aXBsaWNpdHk7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IG5ldyBWZXJ0ZXgoKGUuVjEuWCArIGUuVjIuWCkgLyAyLCAoZS5WMS5ZICsgZS5WMi5ZKSAvIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGcuQWRkVmVydGV4KHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIHYuTGFiZWwgPSBlLkxhYmVsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgb3RoZXIgaW4gY2xpcXVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnLkFkZEVkZ2Uob3RoZXIsIHYpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbGlxdWUuQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGVkZ2VUb0NsaXF1ZU1hcFtlXSA9IGNsaXF1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZ3JhcGguRWRnZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgX2dyYXBoLkVkZ2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9ncmFwaC5FZGdlc1tpXS5NZWV0cyhfZ3JhcGguRWRnZXNbal0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYxIGluIGVkZ2VUb0NsaXF1ZU1hcFtfZ3JhcGguRWRnZXNbaV1dKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdjIgaW4gZWRnZVRvQ2xpcXVlTWFwW19ncmFwaC5FZGdlc1tqXV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5BZGRFZGdlKHYxLCB2Mik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9Db250cmFjdFNlbGVjdGVkU3ViZ3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gX2dyYXBoLlNlbGVjdGVkVmVydGljZXM7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZC5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyIHggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkF2ZXJhZ2U8Z2xvYmFsOjpHcmFwaHMuVmVydGV4PihzZWxlY3RlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsIGRvdWJsZT4pKHogPT4gei5YKSk7XHJcbiAgICAgICAgICAgIHZhciB5ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BdmVyYWdlPGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oc2VsZWN0ZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVydGV4LCBkb3VibGU+KSh6ID0+IHouWSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbnRyYWN0ZWRWZXJ0ZXggPSBuZXcgVmVydGV4KHgsIHkpO1xyXG4gICAgICAgICAgICBfZ3JhcGguQWRkVmVydGV4KGNvbnRyYWN0ZWRWZXJ0ZXgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5laWdoYm9ycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsZ2xvYmFsOjpHcmFwaHMuVmVydGV4PihzZWxlY3RlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpHcmFwaHMuVmVydGV4Pj4pKHYgPT4gX2dyYXBoLkZpbmROZWlnaGJvcnModikpKS5EaXN0aW5jdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG5laWdoYm9yIGluIG5laWdoYm9ycylcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5BZGRFZGdlKGNvbnRyYWN0ZWRWZXJ0ZXgsIG5laWdoYm9yKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHNlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLlJlbW92ZVZlcnRleCh2KTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9JbmRleExhYmVsaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gbmV3IEFsZ29yaXRobXMuR3JhcGgoX2dyYXBoLkdldEVkZ2VXZWlnaHRzKCkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZ3JhcGguVmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlc1tpXS5MYWJlbCA9IGkuVG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvRGVncmVlTGFiZWxpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBuZXcgQWxnb3JpdGhtcy5HcmFwaChfZ3JhcGguR2V0RWRnZVdlaWdodHMoKSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9ncmFwaC5WZXJ0aWNlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzW2ldLkxhYmVsID0gZy5EZWdyZWUoaSkuVG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvSW5EZWdyZWVMYWJlbGluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBBbGdvcml0aG1zLkdyYXBoKF9ncmFwaC5HZXRFZGdlV2VpZ2h0cygpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2dyYXBoLlZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXNbaV0uTGFiZWwgPSBnLkluRGVncmVlKGkpLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb091dERlZ3JlZUxhYmVsaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gbmV3IEFsZ29yaXRobXMuR3JhcGgoX2dyYXBoLkdldEVkZ2VXZWlnaHRzKCkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZ3JhcGguVmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlc1tpXS5MYWJlbCA9IGcuT3V0RGVncmVlKGkpLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb091dERlZ3JlZVBsdXNPbmVMYWJlbGluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBBbGdvcml0aG1zLkdyYXBoKF9ncmFwaC5HZXRFZGdlV2VpZ2h0cygpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2dyYXBoLlZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXNbaV0uTGFiZWwgPSAoZy5PdXREZWdyZWUoaSkgKyAxKS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9DbGVhckxhYmVscyhzdHJpbmcgcyA9IFwiXCIsIElFbnVtZXJhYmxlPGludD4gdmVydGljZXMgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHZlcnRpY2VzID09IG51bGwgfHwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHZlcnRpY2VzKSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIF9ncmFwaC5WZXJ0aWNlcy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiB2ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlc1t2XS5MYWJlbCA9IHM7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9TbmFwVG9HcmlkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChHcmlkU3RlcCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX2dyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2LlggPSAoZmxvYXQpKF9ncmlkU3RlcCAqIE1hdGguUm91bmQodi5YIC8gX2dyaWRTdGVwKSk7XHJcbiAgICAgICAgICAgICAgICB2LlkgPSAoZmxvYXQpKF9ncmlkU3RlcCAqIE1hdGguUm91bmQodi5ZIC8gX2dyaWRTdGVwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICB2b2lkIFBhaW50R3JpZChJR3JhcGhpY3MgZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghRHJhd0dyaWQgfHwgR3JpZFN0ZXAgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHZhciB4ID0gMC4wO1xyXG4gICAgICAgICAgICB3aGlsZSAoeCA8PSBXaWR0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZy5EcmF3TGluZShHcmlkUGVuQ29sb3IsIHgsIDAsIHgsIEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB4ICs9IEdyaWRTdGVwICogX3ZpZXdTY2FsZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHkgPSAwLjA7XHJcbiAgICAgICAgICAgIHdoaWxlICh5IDw9IEhlaWdodClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZy5EcmF3TGluZShHcmlkUGVuQ29sb3IsIDAsIHksIFdpZHRoLCB5KTtcclxuICAgICAgICAgICAgICAgIHkgKz0gR3JpZFN0ZXAgKiBfdmlld1NjYWxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJSGl0dGFibGUgR2V0SGl0KGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfZ3JhcGguSGl0VGVzdCh4LCB5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNsYXNzIEhpc3RvcmljYWxHcmFwaFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIEdyYXBoIEdyYXBoIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgICAgcHVibGljIGludCBWaWV3U2NhbGUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICAgICBwdWJsaWMgZG91YmxlIFpvb20geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUGFpbnQoR3JhcGhpY3NMYXllci5JR3JhcGhpY3MgZywgaW50IHdpZHRoLCBpbnQgaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHdpZHRoID09IDAgfHwgaGVpZ2h0ID09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgV2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgICAgIEhlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoU25hcFRvR3JpZClcclxuICAgICAgICAgICAgICAgICAgICBEb1NuYXBUb0dyaWQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBnLkNsZWFyKEJhY2tncm91bmRDb2xvcik7XHJcbiAgICAgICAgICAgICAgICBQYWludEdyaWQoZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLlBhaW50KGcsIF92aWV3U2NhbGUsIF92aWV3U2NhbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX3N0YXRlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLklkbGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nVmVydGV4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGlvblJlZ2lvbjpcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTGlzdDxCb3g+IHNlbGVjdGlvblBvaW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKF9TZWxlY3Rpb25Qb2ludHNUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Qb2ludHMgPSBuZXcgTGlzdDxCb3g+KF9zZWxlY3Rpb25Qb2ludHMuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwIGluIF9zZWxlY3Rpb25Qb2ludHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblBvaW50cy5BZGQobmV3IEJveChwLlggKiBfdmlld1NjYWxlLCBwLlkgKiBfdmlld1NjYWxlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblBvaW50cy5Db3VudCA+IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5EcmF3TGluZXMoU2VsZWN0aW9uUGVuQ29sb3IsIHNlbGVjdGlvblBvaW50cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCB7IH1cclxuXHJcbiAgICAgICAgICAgIEhhc1BhaW50ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKF96b29tRml0TmV4dFBhaW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfem9vbUZpdE5leHRQYWludCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgRG9ab29tRml0KCk7XHJcbiAgICAgICAgICAgICAgICBEb1pvb20oNCwgbmV3IEdyYXBoaWNzTGF5ZXIuQm94KDAuNSwgMC41KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE9uTW91c2VNb3ZlKGRvdWJsZSBYLCBkb3VibGUgWSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gWCAvIF92aWV3U2NhbGU7XHJcbiAgICAgICAgICAgIHZhciB5ID0gWSAvIF92aWV3U2NhbGU7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKF9zdGF0ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuSWRsZTpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nVmVydGV4OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX0RyYWdnZWRWZXJ0ZXguWCA9IF9EcmFnZ2VkVmVydGV4LkRyYWdPZmZzZXQuWCArIHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9EcmFnZ2VkVmVydGV4LlkgPSBfRHJhZ2dlZFZlcnRleC5EcmFnT2Zmc2V0LlkgKyB5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGlvblJlZ2lvbjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKF9TZWxlY3Rpb25Qb2ludHNUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGVjdGlvblBvaW50cy5BZGQobmV3IEJveCh4LCB5KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nU2VsZWN0ZWRWZXJ0aWNlczpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LlggPSB2LkRyYWdPZmZzZXQuWCArIHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LlkgPSB2LkRyYWdPZmZzZXQuWSArIHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBUb2dnbGVFZGdlSW5kaWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZ3JhcGguVG9nZ2xlRWRnZUluZGljZXMoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJvdGF0ZVZlcnRleEluZGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcztcclxuICAgICAgICAgICAgaWYgKHguQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHggPSBfZ3JhcGguVmVydGljZXM7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYSBpbiB4KVxyXG4gICAgICAgICAgICAgICAgYS5Sb3RhdGVJbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUm90YXRlRWRnZUluZGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBfZ3JhcGguU2VsZWN0ZWRFZGdlcztcclxuICAgICAgICAgICAgaWYgKHguQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHggPSBfZ3JhcGguRWRnZXM7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYSBpbiB4KVxyXG4gICAgICAgICAgICAgICAgYS5Sb3RhdGVJbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0SW5kZXgoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzO1xyXG4gICAgICAgICAgICBpZiAoeC5Db3VudCA9PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdiA9IHhbMF07XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IF9ncmFwaC5WZXJ0aWNlcy5JbmRleE9mKHYpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgIT0gbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXMuUmVtb3ZlKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuID49IF9ncmFwaC5WZXJ0aWNlcy5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlcy5BZGQodik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG4gPCBpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzLkluc2VydChuLCB2KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzLkluc2VydChuLCB2KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IF9ncmFwaC5TZWxlY3RlZEVkZ2VzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkuQ291bnQgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IHlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBfZ3JhcGguRWRnZXMuSW5kZXhPZih2KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPSBuKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLkVkZ2VzLlJlbW92ZSh2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPj0gX2dyYXBoLkVkZ2VzLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguRWRnZXMuQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG4gPCBpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguRWRnZXMuSW5zZXJ0KG4sIHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLkVkZ2VzLkluc2VydChuLCB2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVG9nZ2xlVmVydGV4SW5kaWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZ3JhcGguVG9nZ2xlVmVydGV4SW5kaWNlcygpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgT25Nb3VzZURvd24oZG91YmxlIFgsIGRvdWJsZSBZLCBHcmFwaGljc0xheWVyLk1vdXNlQnV0dG9uIGJ1dHRvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jb250cm9sV2FzRG93biA9IENhbnZhcy5Jc0NvbnRyb2xLZXlEb3duO1xyXG5cclxuICAgICAgICAgICAgdmFyIHggPSBYIC8gX3ZpZXdTY2FsZTtcclxuICAgICAgICAgICAgdmFyIHkgPSBZIC8gX3ZpZXdTY2FsZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvID0gR2V0SGl0KHgsIHkpO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChfc3RhdGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLklkbGU6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uID09IE1vdXNlQnV0dG9uLkxlZnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGVjdGlvblBvaW50cy5DbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxlY3Rpb25Qb2ludHMuQWRkKG5ldyBCb3goeCwgeSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGF0ZSA9IFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGlvblJlZ2lvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG8gaXMgVmVydGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKFZlcnRleClvKS5Jc1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoVmVydGV4IHYgaW4gX2dyYXBoLlNlbGVjdGVkVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuRHJhZ09mZnNldCA9IG5ldyBCb3godi5YIC0geCwgdi5ZIC0geSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGF0ZSA9IFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGVkVmVydGljZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9EcmFnZ2VkVmVydGV4ID0gKFZlcnRleClvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRHJhZ2dlZFZlcnRleC5EcmFnT2Zmc2V0ID0gbmV3IEJveChfRHJhZ2dlZFZlcnRleC5YIC0geCwgX0RyYWdnZWRWZXJ0ZXguWSAtIHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhdGUgPSBTdGF0ZXMuRHJhZ2dpbmdWZXJ0ZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobyBpcyBFZGdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJ1dHRvbiA9PSBNb3VzZUJ1dHRvbi5SaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG8gaXMgVmVydGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobyBpcyBFZGdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1ZlcnRleDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nU2VsZWN0aW9uUmVnaW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBPbk1vdXNlVXAoZG91YmxlIFgsIGRvdWJsZSBZLCBHcmFwaGljc0xheWVyLk1vdXNlQnV0dG9uIGJ1dHRvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gWCAvIF92aWV3U2NhbGU7XHJcbiAgICAgICAgICAgIHZhciB5ID0gWSAvIF92aWV3U2NhbGU7XHJcblxyXG4gICAgICAgICAgICB2YXIgbyA9IEdldEhpdCh4LCB5KTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoX3N0YXRlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5JZGxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdWZXJ0ZXg6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uID09IE1vdXNlQnV0dG9uLkxlZnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGF0ZSA9IFN0YXRlcy5JZGxlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTbmFwVG9HcmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvU25hcFRvR3JpZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nU2VsZWN0aW9uUmVnaW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbiA9PSBNb3VzZUJ1dHRvbi5MZWZ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhdGUgPSBTdGF0ZXMuSWRsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaXN0PEJveD4gc2VsZWN0aW9uUG9pbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jayAoX1NlbGVjdGlvblBvaW50c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblBvaW50cyA9IG5ldyBMaXN0PEJveD4oX3NlbGVjdGlvblBvaW50cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25Qb2ludHMuQ291bnQgPiAyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlNlbGVjdE9iamVjdHMoc2VsZWN0aW9uUG9pbnRzLCBfY29udHJvbFdhc0Rvd24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FudmFzLlNlbGVjdGVkT2JqZWN0cyA9IF9ncmFwaC5TZWxlY3RlZEl0ZW1zLkNhc3Q8b2JqZWN0PigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdTZWxlY3RlZFZlcnRpY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbiA9PSBNb3VzZUJ1dHRvbi5MZWZ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhdGUgPSBTdGF0ZXMuSWRsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgT25Nb3VzZURvdWJsZUNsaWNrKGRvdWJsZSBYLCBkb3VibGUgWSwgR3JhcGhpY3NMYXllci5Nb3VzZUJ1dHRvbiBidXR0b24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IFggLyBfdmlld1NjYWxlO1xyXG4gICAgICAgICAgICB2YXIgeSA9IFkgLyBfdmlld1NjYWxlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG8gPSBHZXRIaXQoeCwgeSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZ3JhcGhDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChfc3RhdGUgPT0gU3RhdGVzLklkbGUgJiYgIUNhbnZhcy5Jc0NvbnRyb2xLZXlEb3duKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uID09IE1vdXNlQnV0dG9uLkxlZnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gbmV3IFZlcnRleCh4LCB5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9ncmFwaC5BZGRWZXJ0ZXgodikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFwaENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvIGlzIFZlcnRleClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmRWZXJ0ZXggPSAoVmVydGV4KW87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2dyYXBoLkFkZEVkZ2UodiwgZW5kVmVydGV4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFwaENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYnV0dG9uID09IE1vdXNlQnV0dG9uLlJpZ2h0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvIGlzIFZlcnRleClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZ3JhcGguUmVtb3ZlVmVydGV4KChWZXJ0ZXgpbykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFwaENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGdyYXBoQ2hhbmdlZClcclxuICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgWm9vbUZpdE5leHRQYWludCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfem9vbUZpdE5leHRQYWludCA9IHRydWU7XHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG51c2luZyBTeXN0ZW0uQ29tcG9uZW50TW9kZWw7XHJcbnVzaW5nIFN5c3RlbS5SdW50aW1lLlNlcmlhbGl6YXRpb247XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBWZXJ0ZXggOiBHcmFwaGljc0xheWVyLklQYWludGFibGUsIElIaXR0YWJsZVxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkZvbnQgTGFiZWxGb250ID0gbmV3IEdyYXBoaWNzTGF5ZXIuRm9udChcIlRpbWVzIE5ldyBSb21hblwiLCAxMik7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuRm9udCBJbmRleEZvbnQgPSBuZXcgR3JhcGhpY3NMYXllci5Gb250KFwiU3lzdGVtXCIsIDgpO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgTGFiZWxCcnVzaENvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigwLCAwLCAwKTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIEluZGV4QnJ1c2hDb2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMjAwLCAyMDAsIDAsIDApO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgQm91bmRhcnlQZW5Db2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMCwgMCwgMCk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuQVJHQiBCb3VuZGFyeVNlbGVjdGVkUGVuQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDI1NSwgMCwgMjU1LCAwKTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgaW50IEJvdW5kYXJ5U2VsZWN0ZWRQZW5XaWR0aCA9IDI7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgRGVmYXVsdEZpbGxCcnVzaENvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigxMjAsIDAsIDAsIDApO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgVW5pdmVyc2FsVmVydGV4RmlsbEJydXNoQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDEyMCwgMCwgMCwgMjU1KTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIFNlbGVjdGVkRmlsbEJydXNoQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDI1NSwgMCwgMjU1LCAxMjcpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IFBhcmVudEluZGV4IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIEluZGV4QW5nbGUgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVmVydGV4KGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICAgICAgOiB0aGlzKHgsIHksIFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFZlcnRleChWZWN0b3IgdilcclxuICAgICAgICAgICAgOiB0aGlzKHYsIFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFZlcnRleChWZWN0b3Igdiwgc3RyaW5nIGxhYmVsKVxyXG4gICAgICAgICAgICA6IHRoaXModi5YLCB2LlksIGxhYmVsKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZXJ0ZXgoZG91YmxlIHgsIGRvdWJsZSB5LCBzdHJpbmcgbGFiZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfTG9jYXRpb24gPSBuZXcgVmVjdG9yKHgsIHkpO1xyXG4gICAgICAgICAgICBfbGFiZWwgPSBsYWJlbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZXJ0ZXgoU2VyaWFsaXphdGlvblZlcnRleCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTG9jYXRpb24gPSBuZXcgVmVjdG9yKHYuTG9jYXRpb24uWCwgdi5Mb2NhdGlvbi5ZKTtcclxuICAgICAgICAgICAgTGFiZWwgPSB2LkxhYmVsO1xyXG4gICAgICAgICAgICBQYWRkaW5nID0gdi5QYWRkaW5nO1xyXG4gICAgICAgICAgICBTdHlsZSA9IHYuU3R5bGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIFBhaW50KEdyYXBoaWNzTGF5ZXIuSUdyYXBoaWNzIGcsIGludCB3aWR0aCwgaW50IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBDb21wdXRlQm91bmRzKGcsIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShfbGFiZWwpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQ29sb3IuRXF1YWxzKGRlZmF1bHQoR3JhcGhpY3NMYXllci5BUkdCKSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKElzVW5pdmVyc2FsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnLkZpbGxFbGxpcHNlKFVuaXZlcnNhbFZlcnRleEZpbGxCcnVzaENvbG9yLCBib3VuZHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGcuRmlsbEVsbGlwc2UoQ29sb3IsIGJvdW5kcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZy5EcmF3RWxsaXBzZShfSXNTZWxlY3RlZCA/IEJvdW5kYXJ5U2VsZWN0ZWRQZW5Db2xvciA6IEJvdW5kYXJ5UGVuQ29sb3IsIGJvdW5kcywgX0lzU2VsZWN0ZWQgPyBCb3VuZGFyeVNlbGVjdGVkUGVuV2lkdGggOiAxKTtcclxuICAgICAgICAgICAgICAgIGcuRHJhd1N0cmluZyhfbGFiZWwsIExhYmVsRm9udCwgTGFiZWxCcnVzaENvbG9yLCBib3VuZHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKENvbG9yLkVxdWFscyhkZWZhdWx0KEdyYXBoaWNzTGF5ZXIuQVJHQikpKVxyXG4gICAgICAgICAgICAgICAgICAgIGcuRmlsbEVsbGlwc2UoSXNVbml2ZXJzYWwgPyBVbml2ZXJzYWxWZXJ0ZXhGaWxsQnJ1c2hDb2xvciA6IERlZmF1bHRGaWxsQnJ1c2hDb2xvciwgYm91bmRzKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBnLkZpbGxFbGxpcHNlKENvbG9yLCBib3VuZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZy5EcmF3RWxsaXBzZShfSXNTZWxlY3RlZCA/IEJvdW5kYXJ5U2VsZWN0ZWRQZW5Db2xvciA6IEJvdW5kYXJ5UGVuQ29sb3IsIGJvdW5kcywgX0lzU2VsZWN0ZWQgPyBCb3VuZGFyeVNlbGVjdGVkUGVuV2lkdGggOiAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKF9zaG93SW5kZXgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjeCA9IChib3VuZHMuTGVmdCArIGJvdW5kcy5SaWdodCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN5ID0gKGJvdW5kcy5Cb3R0b20gKyBib3VuZHMuVG9wKSAvIDI7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IE1hdGguTWF4KGJvdW5kcy5XaWR0aCwgYm91bmRzLkhlaWdodCkgLyAyICsgNTtcclxuICAgICAgICAgICAgICAgIHZhciBiYiA9IG5ldyBHcmFwaGljc0xheWVyLkJveChjeCArIHIgKiBNYXRoLkNvcyhJbmRleEFuZ2xlKSAtIDUsIGN5ICsgciAqIE1hdGguU2luKEluZGV4QW5nbGUpIC0gNSwgMTAsIDEwKTtcclxuICAgICAgICAgICAgICAgIGcuRHJhd1N0cmluZyhQYXJlbnRJbmRleC5Ub1N0cmluZygpLCBJbmRleEZvbnQsIEluZGV4QnJ1c2hDb2xvciwgYmIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBIaXQoZG91YmxlIHgsIGRvdWJsZSB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGhpdCA9IF9Mb2NhbEJvdW5kcy5Db250YWlucyh4LCB5KTtcclxuICAgICAgICAgICAgcmV0dXJuIGhpdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljc0xheWVyLkJveCBDb21wdXRlQm91bmRzKEdyYXBoaWNzTGF5ZXIuSUdyYXBoaWNzIGcsIGludCB3aWR0aCwgaW50IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdyYXBoaWNzTGF5ZXIuQm94IGJvdW5kcztcclxuXHJcbiAgICAgICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoX2xhYmVsKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSBnLk1lYXN1cmVTdHJpbmcoX2xhYmVsLCBMYWJlbEZvbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJvdW5kcyA9IG5ldyBHcmFwaGljc0xheWVyLkJveChYICogd2lkdGggLSBzaXplLldpZHRoIC8gMiwgWSAqIGhlaWdodCAtIHNpemUuSGVpZ2h0IC8gMiwgc2l6ZS5XaWR0aCwgc2l6ZS5IZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm91bmRzID0gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KFggKiB3aWR0aCwgWSAqIGhlaWdodCwgMCwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJvdW5kcy5JbmZsYXRlKF9wYWRkaW5nICogd2lkdGgsIF9wYWRkaW5nICogaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIF9Mb2NhbEJvdW5kcyA9IG5ldyBHcmFwaGljc0xheWVyLkJveChib3VuZHMuWCAvIHdpZHRoLCBib3VuZHMuWSAvIGhlaWdodCwgYm91bmRzLldpZHRoIC8gd2lkdGgsIGJvdW5kcy5IZWlnaHQgLyBoZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJvdW5kcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljc0xheWVyLkFSR0IgQ29sb3IgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IE1vZGlmaWVyIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBYXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Mb2NhdGlvbi5YO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfTG9jYXRpb24uWCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0xvY2F0aW9uLlk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9Mb2NhdGlvbi5ZID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZWN0b3IgTG9jYXRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0xvY2F0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfTG9jYXRpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBMYWJlbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfbGFiZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBfbGFiZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIF9sYWJlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZmxvYXQgUGFkZGluZ1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfcGFkZGluZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IF9wYWRkaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBfcGFkZGluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5Cb3ggTG9jYWxCb3VuZHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0xvY2FsQm91bmRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1NlbGVjdGVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Jc1NlbGVjdGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gX0lzU2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIF9Jc1NlbGVjdGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljc0xheWVyLkJveCBEcmFnT2Zmc2V0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9EcmFnT2Zmc2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfRHJhZ09mZnNldCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFN0eWxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9TdHlsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLlN0YXJ0c1dpdGgoXCIrXCIpICYmICFzdHJpbmcuSXNOdWxsT3JFbXB0eShfU3R5bGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIF9TdHlsZSArPSBcIiwgXCIgKyB2YWx1ZS5UcmltU3RhcnQoJysnKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBfU3R5bGUgPSB2YWx1ZS5UcmltU3RhcnQoJysnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNVbml2ZXJzYWwgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBWZWN0b3IgX0xvY2F0aW9uO1xyXG4gICAgICAgIEdyYXBoaWNzTGF5ZXIuQm94IF9EcmFnT2Zmc2V0ID0gR3JhcGhpY3NMYXllci5Cb3guRW1wdHk7XHJcbiAgICAgICAgc3RyaW5nIF9sYWJlbDtcclxuICAgICAgICBzdHJpbmcgX1N0eWxlO1xyXG4gICAgICAgIGJvb2wgX0lzU2VsZWN0ZWQ7XHJcblxyXG4gICAgICAgIGZsb2F0IF9wYWRkaW5nID0gMi4wZiAvIDEwMC4wZjtcclxuICAgICAgICBHcmFwaGljc0xheWVyLkJveCBfTG9jYWxCb3VuZHMgPSBHcmFwaGljc0xheWVyLkJveC5FbXB0eTtcclxuICAgICAgICBib29sIF9zaG93SW5kZXggPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBSb3RhdGVJbmRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJbmRleEFuZ2xlICs9IE1hdGguUEkgLyAxNjtcclxuICAgICAgICAgICAgaWYgKEluZGV4QW5nbGUgPj0gMiAqIE1hdGguUEkpXHJcbiAgICAgICAgICAgICAgICBJbmRleEFuZ2xlID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgVG9nZ2xlSW5kZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3Nob3dJbmRleCA9ICFfc2hvd0luZGV4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5EcmF3aW5nO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgVGVzdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JhcGhpY3MgOiBJR3JhcGhpY3NcclxuICAgIHtcclxuICAgICAgICBIVE1MQ2FudmFzRWxlbWVudCBfY2FudmFzO1xyXG4gICAgICAgIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCBfY29udGV4dDtcclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoaWNzKEhUTUxDYW52YXNFbGVtZW50IGNhbnZhcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jYW52YXMgPSBjYW52YXM7XHJcbiAgICAgICAgICAgIF9jb250ZXh0ID0gY2FudmFzLkdldENvbnRleHQoXCIyZFwiKS5BczxDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbGVhcihBUkdCIGFyZ2IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5GaWxsU3R5bGUgPSBhcmdiLlRvQ29sb3IoKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuR2xvYmFsQWxwaGEgPSBhcmdiLkEgLyAyNTUuMGY7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkNsZWFyUmVjdCgwLCAwLCBfY2FudmFzLldpZHRoLCBfY2FudmFzLkhlaWdodCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZpbGxSZWN0KDAsIDAsIF9jYW52YXMuV2lkdGgsIF9jYW52YXMuSGVpZ2h0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdMaW5lKEFSR0IgYXJnYiwgQm94IHAxLCBCb3ggcDIsIGRvdWJsZSB3aWR0aCA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2VTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5MaW5lV2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgX2NvbnRleHQuR2xvYmFsQWxwaGEgPSBNYXRoLk1pbigxLjBmLCBNYXRoLk1heCgwLjBmLCBhcmdiLkEgLyAyNTUuMGYpKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuQmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lk1vdmVUbyhwMS5YLCBwMS5ZKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuTGluZVRvKHAyLlgsIHAyLlkpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd0xpbmUoQVJHQiBhcmdiLCBkb3VibGUgeDEsIGRvdWJsZSB5MSwgZG91YmxlIHgyLCBkb3VibGUgeTIsIGRvdWJsZSB3aWR0aCA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEcmF3TGluZShhcmdiLCBuZXcgQm94KHgxLCB5MSksIG5ldyBCb3goeDIsIHkyKSwgd2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3TGluZXMoQVJHQiBhcmdiLCBJRW51bWVyYWJsZTxCb3g+IHBvaW50cywgZG91YmxlIHdpZHRoID0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LlN0cm9rZVN0eWxlID0gYXJnYi5Ub0NvbG9yKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lkdsb2JhbEFscGhhID0gYXJnYi5BIC8gMjU1LjBmO1xyXG4gICAgICAgICAgICBfY29udGV4dC5MaW5lV2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgX2NvbnRleHQuQmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHBvaW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lk1vdmVUbyhiLlgsIGIuWSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5MaW5lVG8oYi5YLCBiLlkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9jb250ZXh0LlN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBGaWxsUG9seWdvbihBUkdCIGFyZ2IsIElFbnVtZXJhYmxlPEJveD4gcG9pbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuRmlsbFN0eWxlID0gYXJnYi5Ub0NvbG9yKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lkdsb2JhbEFscGhhID0gYXJnYi5BIC8gMjU1LjBmO1xyXG4gICAgICAgICAgICBfY29udGV4dC5CZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdmFyIGZpcnN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGIgaW4gcG9pbnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3QpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQuTW92ZVRvKGIuWCwgYi5ZKTtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LkxpbmVUbyhiLlgsIGIuWSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX2NvbnRleHQuRmlsbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3RWxsaXBzZShBUkdCIGFyZ2IsIEJveCBib3VuZHMsIGRvdWJsZSB3aWR0aCA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2VTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5HbG9iYWxBbHBoYSA9IGFyZ2IuQSAvIDI1NS4wZjtcclxuICAgICAgICAgICAgX2NvbnRleHQuQmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkFyYyhib3VuZHMuTGVmdCArIGJvdW5kcy5XaWR0aCAvIDIsIGJvdW5kcy5Ub3AgKyBib3VuZHMuSGVpZ2h0IC8gMiwgYm91bmRzLldpZHRoIC8gMiwgMCwgMiAqIE1hdGguUEkpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRmlsbEVsbGlwc2UoQVJHQiBhcmdiLCBCb3ggYm91bmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuQmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZpbGxTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5HbG9iYWxBbHBoYSA9IGFyZ2IuQSAvIDI1NS4wZjtcclxuICAgICAgICAgICAgX2NvbnRleHQuQXJjKGJvdW5kcy5MZWZ0ICsgYm91bmRzLldpZHRoIC8gMiwgYm91bmRzLlRvcCArIGJvdW5kcy5IZWlnaHQgLyAyLCBib3VuZHMuV2lkdGggLyAyLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZpbGwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd1N0cmluZyhzdHJpbmcgcywgRm9udCBmb250LCBBUkdCIGFyZ2IsIEJveCBib3VuZHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5Gb250ID0gZm9udC5OYW1lICsgXCIgXCIgKyBmb250LlNpemUgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LlN0cm9rZVN0eWxlID0gYXJnYi5Ub0NvbG9yKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lkdsb2JhbEFscGhhID0gYXJnYi5BIC8gMjU1LjBmO1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2VUZXh0KHMsIChpbnQpYm91bmRzLlgsIChpbnQpYm91bmRzLlkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgQm94IE1lYXN1cmVTdHJpbmcoc3RyaW5nIHMsIEZvbnQgZm9udClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZvbnQgPSBmb250Lk5hbWUgKyBcIiBcIiArIGZvbnQuU2l6ZSArIFwicHhcIjtcclxuICAgICAgICAgICAgdmFyIG1ldHJpY3MgPSBfY29udGV4dC5NZWFzdXJlVGV4dChzKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQm94KDAsIDAsIG1ldHJpY3MuV2lkdGgsIG1ldHJpY3MuRW1IZWlnaHRBc2NlbnQgKyBtZXRyaWNzLkVtSGVpZ2h0RGVzY2VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR29vZG5lc3NBbmFseXplciA6IFN3YXBBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBzdHJpbmcgQ2hpbGRSZWFzb24geyBnZXQgeyByZXR1cm4gXCJnb29kbmVzcyBpbmNyZWFzZWRcIjsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHb29kbmVzc0FuYWx5emVyKGJvb2wgZmluZENsZWFuZXN0V2luID0gdHJ1ZSlcclxuICAgICAgICAgICAgOiBiYXNlKGZpbmRDbGVhbmVzdFdpbilcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgYm9vbCBJc0NoaWxkQm9hcmRCZXR0ZXIoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIEJvYXJkIGNoaWxkQm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4oTWV0YUtub3dsZWRnZS5HZXRDb2xvckdyYXBocyhjaGlsZEJvYXJkLlN0YWNrcywgY2hpbGRCb2FyZC5Qb3QpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShjID0+IGMuQ291bnQpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHkgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KE1ldGFLbm93bGVkZ2UuR2V0Q29sb3JHcmFwaHMoYm9hcmQuU3RhY2tzLCBib2FyZC5Qb3QpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShjID0+IGMuQ291bnQpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTdGFuZGFyZERldmlhdGlvbih4KSA8IFN0YW5kYXJkRGV2aWF0aW9uKHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZG91YmxlIE1lYW4oTGlzdDxpbnQ+IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4geC5TdW0oKSAvIHguQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb3VibGUgTWVkaWFuKExpc3Q8aW50PiB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxpbnQsaW50Pih4LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYSA9PiBhKSkuRWxlbWVudEF0KHguQ291bnQgLyAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvdWJsZSBTdGFuZGFyZERldmlhdGlvbihMaXN0PGludD4geClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtdSA9IE1lYW4oeCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5TcXJ0KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGludD4oeCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGRvdWJsZT4pKGEgPT4gKGEgLSBtdSkgKiAoYSAtIG11KSkpIC8geC5Db3VudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb3VibGUgQWJzb2x1dGVEZXZpYXRpb24oTGlzdDxpbnQ+IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbXUgPSBNZWRpYW4oeCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TdW08aW50Pih4LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZG91YmxlPikoYSA9PiBNYXRoLkFicyhtdSAtIGEpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIFB1c2hMZWZ0T3JkZXJpbmcoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIEJvYXJkIGNoaWxkQm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IEdldFZlY3RvcnMoY2hpbGRCb2FyZCk7XHJcbiAgICAgICAgICAgIHZhciB5ID0gR2V0VmVjdG9ycyhib2FyZCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE1hdGguTWluKHguQ291bnQsIHkuQ291bnQpOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gQ29tcGFyZVZlY3RvcnMoeFtpXSwgeVtpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGMgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGMgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHguQ291bnQgPCB5LkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxMaXN0PGludD4+IEdldFZlY3RvcnMoQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnlEZXNjZW5kaW5nPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4oTWV0YUtub3dsZWRnZS5HZXRDb2xvckdyYXBocyhiLlN0YWNrcywgYi5Qb3QpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShjID0+IGMuQ291bnQpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBDb21wYXJlVmVjdG9ycyhMaXN0PGludD4geCwgTGlzdDxpbnQ+IHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoeC5Db3VudCA+IHkuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIGlmICh4LkNvdW50IDwgeS5Db3VudClcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB4LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh4W2ldIDwgeVtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIGlmICh4W2ldID4geVtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG51c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuQXJiaXRyYXJ5TWF4RGVncmVlO1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBBcmJpdHJhcnlEZWdyZWVQcm9vZkJ1aWxkZXIgOiBQZXJtdXRhdGlvbkF3YXJlUHJvb2ZCdWlsZGVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGJvb2wgVXNlV2lsZENhcmRzIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgc3RyaW5nIF9maWd1cmVUaWt6O1xyXG4gICAgICAgIGludCBfbWF4UG90O1xyXG4gICAgICAgIExpc3Q8aW50PiBfYWN0aXZlSW5kaWNlcztcclxuICAgICAgICBMaXN0PGludD4gX2FjdGl2ZUxpc3RTaXplcztcclxuICAgICAgICBMaXN0PGludD4gX3Bvc3NpYmxlTGlzdEluZGljZXM7XHJcbiAgICAgICAgTGlzdDxMaXN0PGludD4+IF9wb3NzaWJsZUxpc3RzO1xyXG4gICAgICAgIExpc3Q8U3VwZXJTbGltQm9hcmQ+IF9hbGxCb2FyZHM7XHJcbiAgICAgICAgU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+LlZlY3RvckNvbXBhcmVyIF9zZXF1ZW5jZUNvbXBhcmVyO1xyXG4gICAgICAgIFNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50PiBfc2VxdWVuY2VHZW5lcmFsaXplcjtcclxuICAgICAgICBEaWN0aW9uYXJ5PHN0cmluZywgc3RyaW5nPiBfb3JkZXJGaWx0ZXIgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz4oKTtcclxuICAgICAgICBib29sIF9pc1dpbjtcclxuXHJcbiAgICAgICAgcHVibGljIEFyYml0cmFyeURlZ3JlZVByb29mQnVpbGRlcihTdXBlclNsaW1NaW5kIG1pbmQsIHN0cmluZyBmaWd1cmVUaWt6ID0gXCJcIiwgYm9vbCB1c2VQZXJtdXRhdGlvbnMgPSBmYWxzZSlcclxuICAgICAgICAgICAgOiBiYXNlKG1pbmQsIHVzZVBlcm11dGF0aW9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maWd1cmVUaWt6ID0gZmlndXJlVGlrejtcclxuICAgICAgICAgICAgX21heFBvdCA9IG1pbmQuTWF4UG90O1xyXG4gICAgICAgICAgICBVc2VXaWxkQ2FyZHMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBXcml0ZVByb29mKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcblxyXG4gICAgICAgICAgICBfaXNXaW4gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5Qcm9vZkNhc2U+KENhc2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLlByb29mQ2FzZSwgYm9vbD4pKGMgPT4gIWMuQnJlYWtlcldpbikpO1xyXG4gICAgICAgXHJcbiAgICAgICAgICAgIEFkZEZpZ3VyZShzYik7XHJcbiAgICAgICAgICAgIEJlZ2luUHJvb2Yoc2IpO1xyXG4gICAgICAgICAgICBHZW5lcmF0ZVBvc3NpYmxlTGlzdHMoKTtcclxuICAgICAgICAgICAgR2VuZXJhbGl6ZUFsbEJvYXJkcyhzYik7XHJcblxyXG4gICAgICAgICAgICB2YXIgd29uQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGNhc2VOdW1iZXIgPSAxOyBjYXNlTnVtYmVyIDw9IENhc2VzLkNvdW50OyBjYXNlTnVtYmVyKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gQ2FzZXNbY2FzZU51bWJlciAtIDFdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLHN0cmluZz4oYy5Cb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgc3RyaW5nPikoYiA9PiBiLlRvTGlzdFN0cmluZ0luTGV4T3JkZXIoX21heFBvdCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgTGlzdDxTdXBlclNsaW1Cb2FyZD4gdGhpc0NsYWltQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhc2VOdW1iZXIgPiAxICYmICFjLkJyZWFrZXJXaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0NsYWltQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4+KShiID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVW5pb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4obmV3W10geyBiIH0sU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KF9wZXJtdXRhdGlvbkxpbmtlZFtiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KSh0dXAgPT4gdHVwLkl0ZW0yKSkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0NsYWltQm9hcmRzID0gYm9hcmRzO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghYy5CcmVha2VyV2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHdvbkJvYXJkcy5BZGRSYW5nZSh0aGlzQ2xhaW1Cb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0aGlzQ2xhaW1Cb2FyZHNUZXggPSBHZW5lcmFsaXplQm9hcmRzKHRoaXNDbGFpbUJvYXJkcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiaWdza2lwXCIpO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShzdHJpbmcuRm9ybWF0KFwiXFxcXGNhc2V7e3swfX19e3skQiQgaXMgb25lIG9mIHRoZSB7MX0gZm9sbG93aW5nIGJvYXJkczpcXG4gXCIgKyB0aGlzQ2xhaW1Cb2FyZHNUZXggKyBcIi59fVwiLGNhc2VOdW1iZXIsIHRoaXNDbGFpbUJvYXJkcy5Db3VudCkpO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiaWdza2lwXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjLkJyZWFrZXJXaW4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYy5TdXBlcmFidW5kYW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiTm8gc2luZ2xlIEtlbXBlIGV4Y2hhbmdlIGdldHMgZnJvbSB0aGVzZSBib2FyZHMgdG8gYSBwcmV2aW91cyBjYXNlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJUaGVzZSBib2FyZHMgYXJlIG5vdCBzdXBlcmFidW5kYW50LlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNhc2VOdW1iZXIgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkluIGFsbCB0aGVzZSBjYXNlcywgJEgkIGlzIGltbWVkaWF0ZWx5IGNvbG9yYWJsZSBmcm9tIHRoZSBsaXN0cy5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3dhcENvdW50R3JvdXBzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Hcm91cEJ5PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsaW50Pihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgaW50PikoYiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihNaW5kLkdldFdpblRyZWVJbmZvKGIpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKHRpID0+IHRpLlN3YXBWZXJ0aWNlcy5Db3VudCkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHN3YXBDb3VudEdyb3VwIGluIHN3YXBDb3VudEdyb3VwcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzd2FwQ291bnRHcm91cC5LZXkgPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkVhY2ggb2YgdGhlIGZvbGxvd2luZyBib2FyZHMgY2FuIGJlIGhhbmRsZWQgYnkgYSBzaW5nbGUgS2VtcGUgY2hhbmdlIHRoYXQgaGFzIGFuIGVuZHBvaW50IGF0IGluZmluaXR5LlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiBzd2FwQ291bnRHcm91cClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQZXJtdXRhdGlvbiBwcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdFN0cmluZyA9IGIuVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihvdXQgcHApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJlZUluZm8gPSBNaW5kLkdldFdpblRyZWVJbmZvKGIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbHBoYSA9IE1hdGguTWluKHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkFscGhhXSwgcHBbU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQmV0YV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiZXRhID0gTWF0aC5NYXgocHBbU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQWxwaGFdLCBwcFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKS5CZXRhXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuR3JvdXBCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50Pikoc3MgPT4gc3MuU3dhcFZlcnRpY2VzWzBdKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQ2hlY2tQZXJtdXRhdGlvbkdvb2ROZXNzKGFscGhhLCBiZXRhLCBsaXN0U3RyaW5nLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50Pikoc3MgPT4gc3MuU3dhcFZlcnRpY2VzWzBdKSkuRGlzdGluY3QoKS5Ub0xpc3QoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJ0aGVyZSBpcyBiYWRuZXNzIGhlcmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIiRcXFxcS197XCIgKyBhbHBoYSArIFwiXCIgKyBiZXRhICsgXCIsXFxcXGluZnR5fShcIiArIGxpc3RTdHJpbmcgKyBcIixcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8aW50Pihncm91cHMuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgaW50PikoZ2cgPT4gZ2cuS2V5KSkuU2VsZWN0PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBpbnQ+KShnZyA9PiBnZy5LZXkuR2V0QWN0aXZlTGlzdEluZGV4KGIsIF9tYXhQb3QpICsgMSkpLG51bGwpICsgXCIpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcUmlnaHRhcnJvdyAkIFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KGdyb3Vwcy5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBpbnQ+KShnZyA9PiBnZy5LZXkpKS5TZWxlY3Q8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5MaW5xLkdyb3VwaW5nPGludCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4sIHN0cmluZz4pKGdnID0+IFwiJFwiICsgR2V0Q2hpbGRCb2FyZE5hbWUoYiwgZ2cuRmlyc3QoKSkgKyBcIiQgKENhc2UgXCIgKyBHZXRIYW5kbGVkQ2FzZU51bWJlcihiLCBnZy5GaXJzdCgpKSArIFwiKVwiKSksbnVsbCkgKyBcIi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3Blcm11dGF0aW9uTGlua2VkW2JdLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiRnJlZSBieSB2ZXJ0ZXggcGVybXV0YXRpb246IFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixzdHJpbmc+KF9wZXJtdXRhdGlvbkxpbmtlZFtiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIHN0cmluZz4pKHBwcCA9PiBcIiRcIiArIHBwcC5JdGVtMSArIFwiXFxcXFJpZ2h0YXJyb3cgXCIgKyBwcHAuSXRlbTIuVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihfbWF4UG90KSArIFwiJFwiKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJpZ3NraXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN3YXBDb3VudEdyb3VwLktleSA9PSAyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJpZ3NraXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiRWFjaCBvZiB0aGUgZm9sbG93aW5nIGJvYXJkcyBjYW4gYmUgaGFuZGxlZCBieSBhIHNpbmdsZSBLZW1wZSBjaGFuZ2UuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGIgaW4gc3dhcENvdW50R3JvdXApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGVybXV0YXRpb24gcHA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RTdHJpbmcgPSBiLlRvTGlzdFN0cmluZ0luTGV4T3JkZXIob3V0IHBwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxwaGEgPSBNYXRoLk1pbihwcFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKS5BbHBoYV0sIHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkJldGFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmV0YSA9IE1hdGguTWF4KHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkFscGhhXSwgcHBbU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQmV0YV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0b3ZlciA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFDaGVja1Blcm11dGF0aW9uR29vZE5lc3MoYWxwaGEsIGJldGEsIGxpc3RTdHJpbmcsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+Pikoc3MgPT4gc3MuU3dhcFZlcnRpY2VzKSkuRGlzdGluY3QoKS5Ub0xpc3QoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJ0aGVyZSBpcyBiYWRuZXNzIGhlcmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChsZWZ0b3Zlci5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tbW9uZXN0U3dhcHBlciA9IEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLk1heEluZGV4PGludD4oRW51bWVyYWJsZS5SYW5nZSgwLCBiLl9zdGFja0NvdW50KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihsZWZ0b3ZlciwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvbnRhaW5zKHYpKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZWRBbGwgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGxlZnRvdmVyLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ29udGFpbnMoY29tbW9uZXN0U3dhcHBlcikpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4oaGFuZGxlZEFsbCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPT0gMSA/IC0xIDogU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkV4Y2VwdDxpbnQ+KGJjLlN3YXBWZXJ0aWNlcyxjb21tb25lc3RTd2FwcGVyKSkpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIkXFxcXEtfe1wiICsgYWxwaGEgKyBcIlwiICsgYmV0YSArIFwiLFwiICsgKGNvbW1vbmVzdFN3YXBwZXIuR2V0QWN0aXZlTGlzdEluZGV4KGIsIF9tYXhQb3QpICsgMSkgKyBcIn0oXCIgKyBsaXN0U3RyaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaW5nbGUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0T3JEZWZhdWx0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db3VudCA9PSAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW5nbGUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIixcXFxcaW5mdHlcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihoYW5kbGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPiAxKSkuQ291bnQoKSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIsXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PGludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihoYW5kbGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPiAxKSkuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKGJjID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpKSkuU2VsZWN0PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkV4Y2VwdDxpbnQ+KGJjLlN3YXBWZXJ0aWNlcyxjb21tb25lc3RTd2FwcGVyKSkuR2V0QWN0aXZlTGlzdEluZGV4KGIsIF9tYXhQb3QpICsgMSkpLG51bGwpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiKVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcUmlnaHRhcnJvdyAkIFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPT0gMSA/IC0xIDogU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkV4Y2VwdDxpbnQ+KGJjLlN3YXBWZXJ0aWNlcyxjb21tb25lc3RTd2FwcGVyKSkpKS5TZWxlY3Q8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBzdHJpbmc+KShiYyA9PiBcIiRcIiArIEdldENoaWxkQm9hcmROYW1lKGIsIGJjKSArIFwiJCAoQ2FzZSBcIiArIEdldEhhbmRsZWRDYXNlTnVtYmVyKGIsIGJjKSArIFwiKVwiKSksbnVsbCkgKyBcIi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiYyBpbiBoYW5kbGVkQWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdG92ZXIuUmVtb3ZlKGJjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfcGVybXV0YXRpb25MaW5rZWRbYl0uQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJGcmVlIGJ5IHZlcnRleCBwZXJtdXRhdGlvbjogXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LHN0cmluZz4oX3Blcm11dGF0aW9uTGlua2VkW2JdLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiwgc3RyaW5nPikocHBwID0+IFwiJFwiICsgcHBwLkl0ZW0xICsgXCJcXFxcUmlnaHRhcnJvdyBcIiArIHBwcC5JdGVtMi5Ub0xpc3RTdHJpbmdJbkxleE9yZGVyKF9tYXhQb3QpICsgXCIkXCIpKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJpZ3NraXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBFbmRQcm9vZihzYik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2IuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQ2hlY2tQZXJtdXRhdGlvbkdvb2ROZXNzKGludCBhbHBoYSwgaW50IGJldGEsIHN0cmluZyBzdGFja3NTdHJpbmcsIExpc3Q8aW50PiBzd2FwVmVydGljZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihzdGFja3NTdHJpbmcuU3BsaXQoJ3wnKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikocyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxjaGFyLGludD4ocy5Ub0NoYXJBcnJheSgpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGNoYXIsIGludD4pKGMgPT4gaW50LlBhcnNlKGMuVG9TdHJpbmcoKSkpKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9ycyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vNik9PntfbzYuQWRkKGFscGhhKTtfbzYuQWRkKGJldGEpO3JldHVybiBfbzY7fSk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHN3YXBWZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudDxpbnQ+KGNvbG9ycyxzdGFja3Nbdl0pICE9IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkRpYWdub3N0aWNzLkRlYnVnZ2VyLkJyZWFrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0cmluZyBHZXRDaGlsZEJvYXJkTmFtZShTdXBlclNsaW1Cb2FyZCBiLCBCcmVha2VyQ2hvaWNlSW5mbyBiYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IFN1cGVyU2xpbUJvYXJkKGIuX3RyYWNlLCBiYy5BbHBoYSwgYmMuQmV0YSwgYmMuUmVzcG9uc2UsIGIuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGRCb2FyZC5Ub0xpc3RTdHJpbmdJbkxleE9yZGVyKF9tYXhQb3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBHZW5lcmFsaXplQWxsQm9hcmRzKFN0cmluZ0J1aWxkZXIgc2IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfYWxsQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihNaW5kLkNvbG9yYWJsZUJvYXJkcyxNaW5kLk5vbkNvbG9yYWJsZUJvYXJkcyksTWluZC5CcmVha2VyV29uQm9hcmRzKSk7XHJcbiAgICAgICAgICAgIF9zZXF1ZW5jZUNvbXBhcmVyID0gbmV3IFNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5WZWN0b3JDb21wYXJlcigpO1xyXG4gICAgICAgICAgICBfc2VxdWVuY2VHZW5lcmFsaXplciA9IG5ldyBTZXF1ZW5jZUdlbmVyYWxpemVyPGludD4oX2FjdGl2ZUluZGljZXMuQ291bnQsIF9wb3NzaWJsZUxpc3RJbmRpY2VzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhbGxCb2FyZHNUZXggPSBHZW5lcmFsaXplQm9hcmRzKF9hbGxCb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKE1pbmQuT25seUNvbnNpZGVyTmVhcmx5Q29sb3JhYmxlQm9hcmRzKVxyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIldlIG5lZWQgdG8gaGFuZGxlIGFsbCBib2FyZHMgdGhhdCBhcmUgbmVhcmx5IGNvbG9yYWJsZSBmb3IgZWRnZSAkZSQgdXAgdG8gcGVybXV0YXRpb24gb2YgY29sb3JzLCBzbyBpdCB3aWxsIHN1ZmZpY2UgdG8gaGFuZGxlIHRoZSBmb2xsb3dpbmcgXCIgKyBfYWxsQm9hcmRzLkNvdW50ICsgXCIgYm9hcmRzOiBcIiArIGFsbEJvYXJkc1RleCArIFwiLlwiKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIldlIG5lZWQgdG8gaGFuZGxlIGFsbCBib2FyZHMgdXAgdG8gcGVybXV0YXRpb24gb2YgY29sb3JzLCBzbyBpdCB3aWxsIHN1ZmZpY2UgdG8gaGFuZGxlIHRoZSBmb2xsb3dpbmcgXCIgKyBfYWxsQm9hcmRzLkNvdW50ICsgXCIgYm9hcmRzOiBcIiArIGFsbEJvYXJkc1RleCArIFwiLlwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChNaW5kLkJyZWFrZXJXb25Cb2FyZHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVW5mb3J0dW5hdGVseSwgdGhlIGZvbGxvd2luZyBcIiArIE1pbmQuQnJlYWtlcldvbkJvYXJkcy5Db3VudCArICBcIiBib2FyZHMgY2Fubm90IGJlIGhhbmRsZWQ6IFwiICsgR2VuZXJhbGl6ZUJvYXJkcyhNaW5kLkJyZWFrZXJXb25Cb2FyZHMpICsgXCIuXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHJpbmcgR2VuZXJhbGl6ZUJvYXJkcyhMaXN0PFN1cGVyU2xpbUJvYXJkPiBib2FyZHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoVXNlV2lsZENhcmRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhhbXBsZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShiID0+IFRvTGlzdEluZGljZXMoYikpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciBub25FeGFtcGxlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8aW50PihFbnVtZXJhYmxlLlJlcGVhdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX3Bvc3NpYmxlTGlzdEluZGljZXMsIF9hY3RpdmVJbmRpY2VzLkNvdW50KSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGxsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4obGwpKSkuRXhjZXB0KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGV4YW1wbGVzLF9zZXF1ZW5jZUNvbXBhcmVyKSwgX3NlcXVlbmNlQ29tcGFyZXIpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBnZW5lcmFsaXplZCA9IF9zZXF1ZW5jZUdlbmVyYWxpemVyLkdlbmVyYWxpemUoZXhhbXBsZXMsIG5vbkV4YW1wbGVzLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcj4sc3RyaW5nPihnZW5lcmFsaXplZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXI+LCBzdHJpbmc+KShnZyA9PiBcIiRcIiArIHN0cmluZy5Kb2luKFwifFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcixzdHJpbmc+KGdnLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyLCBpbnQsIHN0cmluZz4pKChfLCBpKSA9PiBfLlRvVGV4KF9wb3NzaWJsZUxpc3RzLCBfYWN0aXZlTGlzdFNpemVzW2ldKSkpKSArIFwiJFwiKSksXCJhbmRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxzdHJpbmc+KGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBzdHJpbmc+KShiID0+IGIuVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihfbWF4UG90KSkpLk9yZGVyQnk8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHggPT4geCkpLlNlbGVjdDxzdHJpbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgc3RyaW5nPikocyA9PiBcIiRcIiArIHMgKyBcIiRcIikpLFwiYW5kXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxpbnQ+IFRvTGlzdEluZGljZXMoU3VwZXJTbGltQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihiLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGwgPT4gbC5Ub1NldCgpKSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzID0+IHMuQ291bnQgPCBfbWF4UG90KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KHN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikocyA9PiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkZpcnN0SW5kZXg8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF9wb3NzaWJsZUxpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc3MgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4oc3MscykpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBHZW5lcmF0ZVBvc3NpYmxlTGlzdHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KE1pbmQuQ29sb3JhYmxlQm9hcmRzWzBdLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGwgPT4gbC5Ub1NldCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIF9hY3RpdmVJbmRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oc3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikocyA9PiBzLkNvdW50IDwgX21heFBvdCkpKTtcclxuICAgICAgICAgICAgX2FjdGl2ZUxpc3RTaXplcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGludD4oc3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShzID0+IHMuQ291bnQpKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShjID0+IGMgPCBfbWF4UG90KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG90ID0gRW51bWVyYWJsZS5SYW5nZSgwLCBfbWF4UG90KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgX3Bvc3NpYmxlTGlzdHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkRpc3RpbmN0PGludD4oX2FjdGl2ZUxpc3RTaXplcykuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYyA9PiBjKSkuVG9MaXN0KCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4pKGMgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4ocG90LGMpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIF9wb3NzaWJsZUxpc3RJbmRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBfcG9zc2libGVMaXN0cy5Db3VudCkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RhdGljIHZvaWQgQmVnaW5Qcm9vZihTdHJpbmdCdWlsZGVyIHNiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiZWdpbntwcm9vZn1cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RhdGljIHZvaWQgRW5kUHJvb2YoU3RyaW5nQnVpbGRlciBzYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcZW5ke3Byb29mfVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQWRkRmlndXJlKFN0cmluZ0J1aWxkZXIgc2IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZmlndXJlSUQgPSBcImZpZzpcIiArIEd1aWQuTmV3R3VpZCgpLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJlZ2lue2ZpZ3VyZX1cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcY2VudGVyaW5nXCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKF9maWd1cmVUaWt6KTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxjYXB0aW9ue1ZlcnRpY2VzIGFyZSBvcmRlcmVkIGFzIGxhYmVsZWQufVxcXFxsYWJlbHtcIiArIGZpZ3VyZUlEICsgXCJ9XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGVuZHtmaWd1cmV9XCIpO1xyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiZWdpbntsZW19XCIpO1xyXG4gICAgICAgICAgICBpZiAoX2lzV2luKVxyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlRoZSBncmFwaCBpbiBGaWd1cmUgXFxcXHJlZntcIiArIGZpZ3VyZUlEICsgXCJ9IGlzIHJlZHVjaWJsZS5cIik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJUaGUgZ3JhcGggaW4gRmlndXJlIFxcXFxyZWZ7XCIgKyBmaWd1cmVJRCArIFwifSBpcyBub3QgcmVkdWNpYmxlLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxlbmR7bGVtfVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5NYXhEZWdyZWVUaHJlZTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIE1heGltdW1EZWdyZWVUaHJlZVByb29mQnVpbGRlciA6IFBlcm11dGF0aW9uQXdhcmVQcm9vZkJ1aWxkZXJcclxuICAgIHtcclxuICAgICAgICBzdHJpbmcgX2ZpZ3VyZVRpa3o7XHJcbiAgICAgICAgcHVibGljIE1heGltdW1EZWdyZWVUaHJlZVByb29mQnVpbGRlcihTdXBlclNsaW1NaW5kIG1pbmQsIHN0cmluZyBmaWd1cmVUaWt6ID0gXCJcIilcclxuICAgICAgICAgICAgOiBiYXNlKG1pbmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZmlndXJlVGlreiA9IGZpZ3VyZVRpa3o7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFdyaXRlUHJvb2YoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IE1pbmQuQ29sb3JhYmxlQm9hcmRzWzBdLlRvWFlaKCkuTGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgYWxsQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KE1pbmQuQ29sb3JhYmxlQm9hcmRzLE1pbmQuTm9uQ29sb3JhYmxlQm9hcmRzKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29tcGFyZXIgPSBuZXcgU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+LlZlY3RvckNvbXBhcmVyKCk7XHJcbiAgICAgICAgICAgIHZhciBzZyA9IG5ldyBTZXF1ZW5jZUdlbmVyYWxpemVyPGludD4obGVuZ3RoLCBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzcpPT57X283LkFkZCgwKTtfbzcuQWRkKDEpO19vNy5BZGQoMik7cmV0dXJuIF9vNzt9KSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgem90MiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGFsbEJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGIgPT4gYi5UbzAxMigpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBleGFtcGxlczIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihhbGxCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShiID0+IGIuVG8wMTIoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5vbkV4YW1wbGVzMiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8aW50PihFbnVtZXJhYmxlLlJlcGVhdDxnbG9iYWw6OlN5c3RlbS5MaW5xLkVudW1lcmFibGVJbnN0YW5jZTxpbnQ+PihFbnVtZXJhYmxlLlJhbmdlKDAsIDMpLCBsZW5ndGgpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikobGwgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihsbCkpKS5FeGNlcHQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oem90Mixjb21wYXJlciksIGNvbXBhcmVyKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBnZW5lcmFsaXplZDIgPSBzZy5HZW5lcmFsaXplKGV4YW1wbGVzMiwgbm9uRXhhbXBsZXMyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHZhciBhbGxCb2FyZHNYWVogPSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyPixzdHJpbmc+KGdlbmVyYWxpemVkMiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXI+LCBzdHJpbmc+KShnZyA9PiBcIiRcIiArIHN0cmluZy5Kb2luKFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyLHN0cmluZz4oZ2csKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXIsIHN0cmluZz4pKF8gPT4gXy5Ub1RleCgpKSkpICsgXCIkXCIpKSxcIm9yXCIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuICAgICAgICAgICAgdmFyIGZpZ3VyZUlEID0gXCJmaWc6XCIgKyBHdWlkLk5ld0d1aWQoKS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiZWdpbntmaWd1cmV9XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGNlbnRlcmluZ1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShfZmlndXJlVGlreik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcY2FwdGlvbntTb2xpZCB2ZXJ0aWNlcyBoYXZlIGxpc3RzIG9mIHNpemUgMyBhbmQgdGhlIGxhYmVsZWQgdmVydGljZXMgaGF2ZSBsaXN0cyBvZiBzaXplIDIufVxcXFxsYWJlbHtcIiArIGZpZ3VyZUlEICsgXCJ9XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGVuZHtmaWd1cmV9XCIpO1xyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiZWdpbntsZW19XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVGhlIGdyYXBoIGluIEZpZ3VyZSBcXFxccmVme1wiICsgZmlndXJlSUQgKyBcIn0gaXMgcmVkdWNpYmxlLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxlbmR7bGVtfVwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsZXR0ZXJzID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PHN0cmluZz4oKSwoX284KT0+e19vOC5BZGQoXCJYXCIpO19vOC5BZGQoXCJZXCIpO19vOC5BZGQoXCJaXCIpO3JldHVybiBfbzg7fSk7XHJcbiAgICAgICAgICAgIHZhciBzdHJpbmdMZW5ndGggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGxvbmc+KE1pbmQuQ29sb3JhYmxlQm9hcmRzWzBdLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBib29sPikoc3MgPT4gc3MuUG9wdWxhdGlvbkNvdW50KCkgPT0gMikpO1xyXG4gICAgICAgICAgICB2YXIgcm5nID0gbmV3IFJhbmRvbShEYXRlVGltZS5Ob3cuTWlsbGlzZWNvbmQpO1xyXG4gICAgICAgICAgICB2YXIgcmFuZG9tU3RyaW5nID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdHJpbmdMZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHJhbmRvbVN0cmluZyArPSBsZXR0ZXJzW3JuZy5OZXh0KDMpXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByYW5kb21TdHJpbmcyID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdHJpbmdMZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHJhbmRvbVN0cmluZzIgKz0gbGV0dGVyc1tybmcuTmV4dCgzKV07XHJcblxyXG4gICAgICAgICAgICB2YXIgcmFuZG9tU3RyaW5nMyA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RyaW5nTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICByYW5kb21TdHJpbmczICs9IGxldHRlcnNbcm5nLk5leHQoMyldO1xyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kKFwiXFxcXGJlZ2lue3Byb29mfVwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkxldCAkWCA9IFxcXFx7MCwxXFxcXH0kLCAkWSA9IFxcXFx7MCwyXFxcXH0kIGFuZCAkWiA9IFxcXFx7MSwyXFxcXH0kLiBUaGVuIHdpdGggdGhlIHZlcnRleCBvcmRlcmluZyBpbiBGaWd1cmUgXFxcXHJlZntcIiArIGZpZ3VyZUlEICsgXCJ9LCBhIHN0cmluZyBzdWNoIGFzIFwiICsgcmFuZG9tU3RyaW5nICsgXCIsIFwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcInJlcHJlc2VudHMgYSBwb3NzaWJsZSBsaXN0IGFzc2lnbm1lbnQgb24gJFYoSCkkIGFyaXNpbmcgZnJvbSBhICQzJC1lZGdlLWNvbG9yaW5nIG9mICRHLUUoSCkkLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkJ5IGFuICRYJC1LZW1wZSBjaGFuZ2UsIHdlIG1lYW4gZmxpcHBpbmcgY29sb3JzICQwJCBhbmQgJDEkIG9uIGEgdHdvLWNvbG9yZWQgcGF0aCBpbiAkRy1FKEgpJC4gIFdlIGNhbGwgc3VjaCBhIHBhdGggYW4gJFgkLXBhdGguIFwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkFueSBlbmRwb2ludCBvZiBhbiAkWCQtcGF0aCBpbiAkSCQgbXVzdCBlbmQgYXQgYSAkWSQgb3IgJFokIHZlcnRleC4gIFRoZSBtZWFuaW5ncyBvZiAkWSQtS2VtcGUgY2hhbmdlLCAkWiQtS2VtcGUgY2hhbmdlLCAkWSQtcGF0aCBhbmQgJFokLXBhdGggYXJlIGFuYWxvZ291cy5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJOb3RlIHRoYXQgaWYgdGhlcmUgYXJlIGFuIG9kZCBudW1iZXIgb2YgJFkkJ3MgYW5kICRaJCdzLCB0aGVuIGF0IGxlYXN0IG9uZSAkWCQtcGF0aCBoYXMgb25seSBvbmUgZW5kcG9pbnQgaW4gJEgkLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIldlIHVzZSBzaG9ydGhhbmQgbm90YXRpb24gbGlrZSAkXFxcXEtfe1gsIDJ9KFwiICsgcmFuZG9tU3RyaW5nICsgXCIsNSw2KSBcXFxcUmlnaHRhcnJvdyBcIiArIHJhbmRvbVN0cmluZzIgKyBcIixcIiArIHJhbmRvbVN0cmluZzMgKyBcIiQgKENhc2UgMSkuXCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVGhpcyBtZWFucyB0aGUgJFgkLUtlbXBlIGNoYW5nZSBvbiBcIiArIHJhbmRvbVN0cmluZyArIFwiIHN0YXJ0aW5nIGF0IHRoZSBzZWNvbmQgdmVydGV4IGFuZCBlbmRpbmcgYXQgdGhlIGZpZnRoIGFuZCBzaXh0aCByZXN1bHQgaW4gYm9hcmRzIFwiICsgcmFuZG9tU3RyaW5nMiArIFwiIGFuZCBcIiArIHJhbmRvbVN0cmluZzMgKyBcIiByZXNwZWN0aXZlbHkgYW5kIHRoZXNlIGFyZSBoYW5kbGVkIGJ5IENhc2UgMS5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJUaGUgJFxcXFxpbmZ0eSQgc3ltYm9sIG1lYW5zIHN0YXJ0aW5nIChvciBlbmRpbmcpIG91dHNpZGUgJEgkLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKE1pbmQuT25seUNvbnNpZGVyTmVhcmx5Q29sb3JhYmxlQm9hcmRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiV2UgbmVlZCB0byBoYW5kbGUgYWxsIGJvYXJkcyB0aGF0IGFyZSBuZWFybHkgY29sb3JhYmxlIGZvciBlZGdlICRlJCB1cCB0byBwZXJtdXRhdGlvbnMgb2YgJFxcXFx7WCxZLFpcXFxcfSQsIHNvIGl0IHdpbGwgc3VmZmljZSB0byBoYW5kbGUgYWxsIGJvYXJkcyBvZiB0aGUgZm9ybSBcIiArIGFsbEJvYXJkc1hZWiArIFwiLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJXZSBuZWVkIHRvIGhhbmRsZSBhbGwgYm9hcmRzIHVwIHRvIHBlcm11dGF0aW9ucyBvZiAkXFxcXHtYLFksWlxcXFx9JCwgc28gaXQgd2lsbCBzdWZmaWNlIHRvIGhhbmRsZSBhbGwgYm9hcmRzIG9mIHRoZSBmb3JtIFwiICsgYWxsQm9hcmRzWFlaICsgXCIuXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgIHZhciB3b25Cb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgY2FzZU51bWJlciA9IDE7IGNhc2VOdW1iZXIgPD0gQ2FzZXMuQ291bnQ7IGNhc2VOdW1iZXIrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBDYXNlc1tjYXNlTnVtYmVyIC0gMV07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkcyA9IGMuQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgTGlzdDxTdXBlclNsaW1Cb2FyZD4gdGhpc0NsYWltQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhc2VOdW1iZXIgPiAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNDbGFpbUJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+PikoYiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlVuaW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KG5ld1tdIHsgYiB9LFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihfcGVybXV0YXRpb25MaW5rZWRbYl0sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPikodHVwID0+IHR1cC5JdGVtMikpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNDbGFpbUJvYXJkcyA9IGJvYXJkcztcclxuXHJcbiAgICAgICAgICAgICAgICB3b25Cb2FyZHMuQWRkUmFuZ2UodGhpc0NsYWltQm9hcmRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgem90ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4odGhpc0NsYWltQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoYiA9PiBiLlRvMDEyKCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciBleGFtcGxlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHRoaXNDbGFpbUJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGIgPT4gYi5UbzAxMigpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9uRXhhbXBsZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oRW51bWVyYWJsZS5SZXBlYXQ8Z2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8aW50Pj4oRW51bWVyYWJsZS5SYW5nZSgwLCAzKSwgbGVuZ3RoKSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGxsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4obGwpKSkuRXhjZXB0KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHpvdCxjb21wYXJlciksIGNvbXBhcmVyKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZ2VuZXJhbGl6ZWQgPSBzZy5HZW5lcmFsaXplKGV4YW1wbGVzLCBub25FeGFtcGxlcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm9hcmRzWFlaID0gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcj4sc3RyaW5nPihnZW5lcmFsaXplZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXI+LCBzdHJpbmc+KShnZyA9PiBcIiRcIiArIHN0cmluZy5Kb2luKFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyLHN0cmluZz4oZ2csKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXIsIHN0cmluZz4pKF8gPT4gXy5Ub1RleCgpKSkpICsgXCIkXCIpKSxcIm9yXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmlnc2tpcFwiKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoc3RyaW5nLkZvcm1hdChcIlxcXFxjYXNle3t7MH19fXt7JEIkIGlzIG9uZSBvZiBcIiArIGJvYXJkc1hZWiArIFwiLn19XCIsIGNhc2VOdW1iZXIpKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmlnc2tpcFwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYXNlTnVtYmVyID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJJbiBhbGwgdGhlc2UgY2FzZXMsICRIJCBpcyBpbW1lZGlhdGVseSBjb2xvcmFibGUgZnJvbSB0aGUgbGlzdHMuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZml4R3JvdXBzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Hcm91cEJ5PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsc3RyaW5nPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgc3RyaW5nPikoYiA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpeExldHRlciA9ICgobG9uZykoKDEgPDwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQWxwaGEpIHwgKDEgPDwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQmV0YSkpKS5Ub1hZWigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpeExldHRlcjtcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBmaXhHcm91cCBpbiBmaXhHcm91cHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3RoZXJzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8c3RyaW5nPihsZXR0ZXJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXJzLlJlbW92ZShmaXhHcm91cC5LZXkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN3YXBDb3VudEdyb3VwcyA9IGZpeEdyb3VwLkdyb3VwQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBpbnQ+KShiID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWF4PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KE1pbmQuR2V0V2luVHJlZUluZm8oYiksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikodGkgPT4gdGkuU3dhcFZlcnRpY2VzLkNvdW50KSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHN3YXBDb3VudEdyb3VwIGluIHN3YXBDb3VudEdyb3VwcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN3YXBDb3VudEdyb3VwLktleSA9PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHN3YXBDb3VudEdyb3VwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuR3JvdXBCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50Pikoc3MgPT4gc3MuU3dhcFZlcnRpY2VzWzBdKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIkXFxcXEtfe1wiICsgZml4R3JvdXAuS2V5ICsgXCIsXFxcXGluZnR5fShcIiArIGIuVG9YWVooKSArIFwiLFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxpbnQ+KGdyb3Vwcy5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBpbnQ+KShnZyA9PiBnZy5LZXkpKS5TZWxlY3Q8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5MaW5xLkdyb3VwaW5nPGludCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4sIGludD4pKGdnID0+IGdnLktleS5HZXRYWVpJbmRleChiKSArIDEpKSxudWxsKSArIFwiKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxSaWdodGFycm93ICRcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihncm91cHMuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgaW50PikoZ2cgPT4gZ2cuS2V5KSkuU2VsZWN0PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBzdHJpbmc+KShnZyA9PiBcIiRcIiArIEdldENoaWxkQm9hcmROYW1lKGIsIGdnLkZpcnN0KCkpICsgXCIkXCIpKSxudWxsKSArIFwiKCBDYXNlIFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8saW50Pih0cmVlSW5mbywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBHZXRIYW5kbGVkQ2FzZU51bWJlcihiLCBiYykpKS5EaXN0aW5jdCgpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHh4ID0+IHh4KSkpICsgXCIpLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9wZXJtdXRhdGlvbkxpbmtlZFtiXS5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixzdHJpbmc+KF9wZXJtdXRhdGlvbkxpbmtlZFtiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIHN0cmluZz4pKHBwcCA9PiBcIiRcIiArIHBwcC5JdGVtMSArIFwiXFxcXFJpZ2h0YXJyb3cgXCIgKyBwcHAuSXRlbTIuVG9YWVooKSArIFwiJFwiKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN3YXBDb3VudEdyb3VwLktleSA9PSAyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHN3YXBDb3VudEdyb3VwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnRvdmVyID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGxlZnRvdmVyLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1vbmVzdFN3YXBwZXIgPSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5NYXhJbmRleDxpbnQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgYi5fc3RhY2tDb3VudCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4obGVmdG92ZXIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db250YWlucyh2KSkpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlZEFsbCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4obGVmdG92ZXIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db250YWlucyhjb21tb25lc3RTd2FwcGVyKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4oaGFuZGxlZEFsbCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPT0gMSA/IC0xIDogU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkV4Y2VwdDxpbnQ+KGJjLlN3YXBWZXJ0aWNlcyxjb21tb25lc3RTd2FwcGVyKSkpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiJFxcXFxLX3tcIiArIGZpeEdyb3VwLktleSArIFwiLFwiICsgKGNvbW1vbmVzdFN3YXBwZXIuR2V0WFlaSW5kZXgoYikgKyAxKSArIFwifShcIiArIGIuVG9YWVooKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpbmdsZSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3RPckRlZmF1bHQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID09IDEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW5nbGUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIsXFxcXGluZnR5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihoYW5kbGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPiAxKSkuQ291bnQoKSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiLFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID4gMSkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRXhjZXB0PGludD4oYmMuU3dhcFZlcnRpY2VzLGNvbW1vbmVzdFN3YXBwZXIpKSkpLlNlbGVjdDxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKGJjID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpLkdldFhZWkluZGV4KGIpICsgMSkpLG51bGwpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIilcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxSaWdodGFycm93ICRcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID09IDEgPyAtMSA6IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpKSkuU2VsZWN0PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgc3RyaW5nPikoYmMgPT4gXCIkXCIgKyBHZXRDaGlsZEJvYXJkTmFtZShiLCBiYykgKyBcIiRcIikpLG51bGwpICsgXCIoQ2FzZSBcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBHZXRIYW5kbGVkQ2FzZU51bWJlcihiLCBiYykpKS5EaXN0aW5jdCgpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHh4ID0+IHh4KSkpICsgXCIpLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYmMgaW4gaGFuZGxlZEFsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0b3Zlci5SZW1vdmUoYmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3Blcm11dGF0aW9uTGlua2VkW2JdLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LHN0cmluZz4oX3Blcm11dGF0aW9uTGlua2VkW2JdLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiwgc3RyaW5nPikocHBwID0+IFwiJFwiICsgcHBwLkl0ZW0xICsgXCJcXFxcUmlnaHRhcnJvdyBcIiArIHBwcC5JdGVtMi5Ub1hZWigpICsgXCIkXCIpKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxlbmR7cHJvb2Z9XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2IuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0cmluZyBHZXRDaGlsZEJvYXJkTmFtZShTdXBlclNsaW1Cb2FyZCBiLCBCcmVha2VyQ2hvaWNlSW5mbyBiYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IFN1cGVyU2xpbUJvYXJkKGIuX3RyYWNlLCBiYy5BbHBoYSwgYmMuQmV0YSwgYmMuUmVzcG9uc2UsIGIuX3N0YWNrQ291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGRCb2FyZC5Ub1hZWigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcbnVzaW5nIEdyYXBocztcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBHcmFwaHNDb3JlO1xyXG51c2luZyBBbGdvcml0aG1zO1xyXG5cclxubmFtZXNwYWNlIFRlc3Rcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRhYkNhbnZhcyA6IElDYW52YXNcclxuICAgIHtcclxuICAgICAgICBib29sIF9jdHJsRG93bjtcclxuICAgICAgICBzdHJpbmcgX3RpdGxlO1xyXG4gICAgICAgIHB1YmxpYyBIVE1MQ2FudmFzRWxlbWVudCBDYW52YXMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoQ2FudmFzIEdyYXBoQ2FudmFzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBzdGF0aWMgTGlzdDxBUkdCPiBDb2xvcnMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8QVJHQj4oKSwoX28yNCk9PntfbzI0LkFkZChuZXcgQVJHQigyNTUsIDAsIDApKTtfbzI0LkFkZChuZXcgQVJHQigwLCAwLCAyNTUpKTtfbzI0LkFkZChuZXcgQVJHQigwLCAyNTUsIDApKTtfbzI0LkFkZChuZXcgQVJHQigyNTUsIDI1NSwgMCkpO19vMjQuQWRkKG5ldyBBUkdCKDk1LCAxNTgsIDE2MCkpO19vMjQuQWRkKG5ldyBBUkdCKDEzOSwgNjksIDE5KSk7X28yNC5BZGQobmV3IEFSR0IoMzAsIDE0NCwgMjU1KSk7X28yNC5BZGQobmV3IEFSR0IoNjQsIDIyNCwgMjA4KSk7X28yNC5BZGQobmV3IEFSR0IoMjE4LCAxMTIsIDIxNCkpO3JldHVybiBfbzI0O30pO1xyXG5cclxuICAgICAgICBwdWJsaWMgVGFiQ2FudmFzKEhUTUxDYW52YXNFbGVtZW50IGNhbnZhcywgR3JhcGhDYW52YXMgZ3JhcGhDYW52YXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcmFwaENhbnZhcyA9IGdyYXBoQ2FudmFzO1xyXG4gICAgICAgICAgICBDYW52YXMgPSBjYW52YXM7XHJcbiAgICAgICAgICAgIEdyYXBoQ2FudmFzLkNhbnZhcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBDYW52YXMuT25EYmxDbGljayArPSBPbk1vdXNlRG91YmxlQ2xpY2s7XHJcbiAgICAgICAgICAgIENhbnZhcy5Pbk1vdXNlRG93biArPSBPbk1vdXNlQnV0dG9uRG93bjtcclxuICAgICAgICAgICAgQ2FudmFzLk9uTW91c2VVcCArPSBPbk1vdXNlQnV0dG9uVXA7XHJcbiAgICAgICAgICAgIENhbnZhcy5Pbk1vdXNlTW92ZSArPSBPbk1vdXNlTW92ZTtcclxuXHJcbiAgICAgICAgICAgIENhbnZhcy5PblRvdWNoQ2FuY2VsICs9IE9uVG91Y2hDYW5jZWw7XHJcbiAgICAgICAgICAgIENhbnZhcy5PblRvdWNoRW5kICs9IE9uVG91Y2hFbmQ7XHJcbiAgICAgICAgICAgIENhbnZhcy5PblRvdWNoRW50ZXIgKz0gT25Ub3VjaEVudGVyO1xyXG4gICAgICAgICAgICBDYW52YXMuT25Ub3VjaExlYXZlICs9IE9uVG91Y2hMZWF2ZTtcclxuICAgICAgICAgICAgQ2FudmFzLk9uVG91Y2hNb3ZlICs9IE9uVG91Y2hNb3ZlO1xyXG4gICAgICAgICAgICBDYW52YXMuT25Ub3VjaFN0YXJ0ICs9IE9uVG91Y2hTdGFydDtcclxuXHJcbiAgICAgICAgICAgIENhbnZhcy5PbkxvYWQgPSBPbkxvYWQ7XHJcblxyXG4gICAgICAgICAgICBHcmFwaENhbnZhcy5HcmFwaE1vZGlmaWVkICs9IE9uR3JhcGhNb2RpZmllZDtcclxuICAgICAgICAgICAgR3JhcGhDYW52YXMuTmFtZU1vZGlmaWVkICs9IE9uTmFtZU1vZGlmaWVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgT25MYXlvdXRDaGFuZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2FudmFzLldpZHRoID0gV2luZG93LklubmVyV2lkdGg7XHJcbiAgICAgICAgICAgIENhbnZhcy5IZWlnaHQgPSBXaW5kb3cuSW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25OYW1lTW9kaWZpZWQoc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUaXRsZSA9IG5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIHRvdWNoXHJcbiAgICAgICAgdm9pZCBPblRvdWNoQ2FuY2VsKFRvdWNoRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgICAgICB2b2lkIE9uVG91Y2hFbmQoVG91Y2hFdmVudDxIVE1MQ2FudmFzRWxlbWVudD4gZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChNb3VzZUJ1dHRvblVwICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBNb3VzZUJ1dHRvblVwKGUuTGF5ZXJYLCBlLkxheWVyWSwgTW91c2VCdXR0b24uTGVmdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZvaWQgT25Ub3VjaEVudGVyKFRvdWNoRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgICAgICB2b2lkIE9uVG91Y2hMZWF2ZShUb3VjaEV2ZW50PEhUTUxDYW52YXNFbGVtZW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICAgICAgdm9pZCBPblRvdWNoTW92ZShUb3VjaEV2ZW50PEhUTUxDYW52YXNFbGVtZW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKE1vdXNlTW92ZWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIE1vdXNlTW92ZWQoZS5MYXllclgsIGUuTGF5ZXJZKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdm9pZCBPblRvdWNoU3RhcnQoVG91Y2hFdmVudDxIVE1MQ2FudmFzRWxlbWVudD4gZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChNb3VzZUJ1dHRvbkRvd24gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uRG93bihlLkxheWVyWCwgZS5MYXllclksIE1vdXNlQnV0dG9uLkxlZnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gU2FnZVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1hbnVhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZShcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2hyb21hdGljUG9seW5vbWlhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jaHJvbWF0aWNfcG9seW5vbWlhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHcmFwaDYoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ3JhcGg2X3N0cmluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTcGFyc2U2KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNwYXJzZTZfc3RyaW5nKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNocm9tYXRpY051bWJlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jaHJvbWF0aWNfbnVtYmVyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNocm9tYXRpY1F1YXNpc3ltbWV0cmljRnVuY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2hyb21hdGljX3F1YXNpc3ltbWV0cmljX2Z1bmN0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNocm9tYXRpY1N5bW1ldHJpY0Z1bmN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNocm9tYXRpY19zeW1tZXRyaWNfZnVuY3Rpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlQ29sb3JpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yaW5nID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLmNvbG9yaW5nKClcIik7XHJcbiAgICAgICAgICAgIHZhciBjYyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oY29sb3JpbmcuU3BsaXQobmV3W10geyBcIl0sXCIgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHMgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLGludD4ocy5SZXBsYWNlKFwiW1wiLCBcIlwiKS5SZXBsYWNlKFwiXVwiLCBcIlwiKS5SZXBsYWNlKFwiIFwiLCBcIlwiKS5SZXBsYWNlKEVudmlyb25tZW50Lk5ld0xpbmUsIFwiXCIpLlJlcGxhY2UoXCJcXFxcblwiLCBcIlwiKS5TcGxpdCgnLCcpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgaW50PikoeCA9PiBpbnQuUGFyc2UoeCkpKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciB2IGluIEdyYXBoQ2FudmFzLkdyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRmlyc3RJbmRleDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oY2MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShsID0+IGwuQ29udGFpbnMoaSkpKTtcclxuICAgICAgICAgICAgICAgIHYuQ29sb3IgPSBDb2xvcnNbYyAlIENvbG9ycy5Db3VudF07XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ29udmV4aXR5UHJvcGVydGllcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jb252ZXhpdHlfcHJvcGVydGllcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VIYXNIb21vbW9ycGhpc21UbygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5oYXNfaG9tb21vcnBoaXNtX3RvKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUluZGVwZW5kZW50U2V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb2xvcmluZyA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5pbmRlcGVuZGVudF9zZXQoKVwiKTtcclxuICAgICAgICAgICAgdmFyIGNjID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLGludD4oY29sb3JpbmcuUmVwbGFjZShcIltcIiwgXCJcIikuUmVwbGFjZShcIl1cIiwgXCJcIikuUmVwbGFjZShcIiBcIiwgXCJcIikuUmVwbGFjZShFbnZpcm9ubWVudC5OZXdMaW5lLCBcIlwiKS5SZXBsYWNlKFwiXFxcXG5cIiwgXCJcIikuU3BsaXQoJywnKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGludD4pKHggPT4gaW50LlBhcnNlKHgpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBHcmFwaENhbnZhcy5HcmFwaC5WZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHYuQ29sb3IgPSBWZXJ0ZXguRGVmYXVsdEZpbGxCcnVzaENvbG9yO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gY2MpXHJcbiAgICAgICAgICAgICAgICBHcmFwaENhbnZhcy5HcmFwaC5WZXJ0aWNlc1t2XS5Db2xvciA9IENvbG9yc1sxXTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSW5kZXBlbmRlbnRTZXRPZlJlcHJlc2VudGF0aXZlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pbmRlcGVuZGVudF9zZXRfb2ZfcmVwcmVzZW50YXRpdmVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzUGVyZmVjdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19wZXJmZWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1hdGNoaW5nUG9seW5vbWlhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tYXRjaGluZ19wb2x5bm9taWFsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1pbm9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1pbm9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVBhdGh3aWR0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5wYXRod2lkdGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmFua0RlY29tcG9zaXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFua19kZWNvbXBvc2l0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRvcG9sb2dpY2FsTWlub3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudG9wb2xvZ2ljYWxfbWlub3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVHJlZXdpZHRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRyZWV3aWR0aCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUdXR0ZVBvbHlub21pYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudHV0dGVfcG9seW5vbWlhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VWZXJ0ZXhDb3ZlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY29sb3JpbmcgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcudmVydGV4X2NvdmVyKClcIik7XHJcbiAgICAgICAgICAgIHZhciBjYyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxpbnQ+KGNvbG9yaW5nLlJlcGxhY2UoXCJbXCIsIFwiXCIpLlJlcGxhY2UoXCJdXCIsIFwiXCIpLlJlcGxhY2UoXCIgXCIsIFwiXCIpLlJlcGxhY2UoRW52aXJvbm1lbnQuTmV3TGluZSwgXCJcIikuUmVwbGFjZShcIlxcXFxuXCIsIFwiXCIpLlNwbGl0KCcsJyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBpbnQ+KSh4ID0+IGludC5QYXJzZSh4KSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB2LkNvbG9yID0gVmVydGV4LkRlZmF1bHRGaWxsQnJ1c2hDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGNjKVxyXG4gICAgICAgICAgICAgICAgR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXNbdl0uQ29sb3IgPSBDb2xvcnNbMV07XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUJpcGFydGl0ZUNvbG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJpcGFydGl0ZV9jb2xvcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VCaXBhcnRpdGVTZXRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJpcGFydGl0ZV9zZXRzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdyYXBoNlN0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ncmFwaDZfc3RyaW5nKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzRGlyZWN0ZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZGlyZWN0ZWQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSm9pbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5qb2luKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNwYXJzZTZTdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3BhcnNlNl9zdHJpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVG9EaXJlY3RlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50b19kaXJlY3RlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUb1VuZGlyZWN0ZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudG9fdW5kaXJlY3RlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VXcml0ZVRvRXBzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLndyaXRlX3RvX2VwcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVDb21wbGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZV9jb21wbGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUNsaXF1ZU1heGltdW0oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yaW5nID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLmNsaXF1ZV9tYXhpbXVtKClcIik7XHJcbiAgICAgICAgICAgIHZhciBjYyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxpbnQ+KGNvbG9yaW5nLlJlcGxhY2UoXCJbXCIsIFwiXCIpLlJlcGxhY2UoXCJdXCIsIFwiXCIpLlJlcGxhY2UoXCIgXCIsIFwiXCIpLlJlcGxhY2UoRW52aXJvbm1lbnQuTmV3TGluZSwgXCJcIikuUmVwbGFjZShcIlxcXFxuXCIsIFwiXCIpLlNwbGl0KCcsJyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBpbnQ+KSh4ID0+IGludC5QYXJzZSh4KSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB2LkNvbG9yID0gVmVydGV4LkRlZmF1bHRGaWxsQnJ1c2hDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGNjKVxyXG4gICAgICAgICAgICAgICAgR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXNbdl0uQ29sb3IgPSBDb2xvcnNbMV07XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZU51bWJlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVfbnVtYmVyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZVBvbHlub21pYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlX3BvbHlub21pYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc0NvbnRhaW5pbmdWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlc19jb250YWluaW5nX3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVzR2V0Q2xpcXVlQmlwYXJ0aXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfZ2V0X2NsaXF1ZV9iaXBhcnRpdGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc0dldE1heENsaXF1ZUdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfZ2V0X21heF9jbGlxdWVfZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc01heGltYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlc19tYXhpbWFsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZXNNYXhpbXVtKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfbWF4aW11bSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVzTnVtYmVyT2YoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlc19udW1iZXJfb2YoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc1ZlcnRleENsaXF1ZU51bWJlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVzX3ZlcnRleF9jbGlxdWVfbnVtYmVyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUJvdW5kZWRPdXRkZWdyZWVPcmllbnRhdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ib3VuZGVkX291dGRlZ3JlZV9vcmllbnRhdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VCcmlkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJyaWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVncmVlQ29uc3RyYWluZWRTdWJncmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWdyZWVfY29uc3RyYWluZWRfc3ViZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR29tb3J5SHVUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdvbW9yeV9odV90cmVlKCkucGxvdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNaW5pbXVtT3V0ZGVncmVlT3JpZW50YXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubWluaW11bV9vdXRkZWdyZWVfb3JpZW50YXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlT3JpZW50YXRpb25zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm9yaWVudGF0aW9ucygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VSYW5kb21TcGFubmluZ1RyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGVkZ2VzID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLnJhbmRvbV9zcGFubmluZ190cmVlKClcIik7XHJcbiAgICAgICAgICAgIHZhciBlZSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oZWRnZXMuU3BsaXQobmV3W10geyBcIiksXCIgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHMgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLGludD4ocy5SZXBsYWNlKFwiW1wiLCBcIlwiKS5SZXBsYWNlKFwiXVwiLCBcIlwiKS5SZXBsYWNlKFwiKFwiLFwiXCIpLlJlcGxhY2UoXCIpXCIsIFwiXCIpLlJlcGxhY2UoXCIgXCIsIFwiXCIpLlJlcGxhY2UoRW52aXJvbm1lbnQuTmV3TGluZSwgXCJcIikuUmVwbGFjZShcIlxcXFxuXCIsIFwiXCIpLlJlcGxhY2UoXCJcXFxcblwiLFwiXCIpLlNwbGl0KCcsJyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBpbnQ+KSh4ID0+IGludC5QYXJzZSh4KSkpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBHcmFwaENhbnZhcy5HcmFwaC5WZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHYuQ29sb3IgPSBWZXJ0ZXguRGVmYXVsdEZpbGxCcnVzaENvbG9yO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgZSBpbiBHcmFwaENhbnZhcy5HcmFwaC5FZGdlcylcclxuICAgICAgICAgICAgICAgIGUuQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDAsIDAsIDApO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB2MSA9IEdyYXBoQ2FudmFzLkdyYXBoLlZlcnRpY2VzW2VbMF1dO1xyXG4gICAgICAgICAgICAgICAgdmFyIHYyID0gR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXNbZVsxXV07XHJcblN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpHcmFwaHMuRWRnZT4oXHJcbiAgICAgICAgICAgICAgICBHcmFwaENhbnZhcy5HcmFwaC5FZGdlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5FZGdlLCBib29sPikoeCA9PiB4LlYxID09IHYxICYmIHguVjIgPT0gdjIgfHwgeC5WMSA9PSB2MiAmJiB4LlYyID09IHYxKSkuQ29sb3IgPSBDb2xvcnNbMV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3Bhbm5pbmdUcmVlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zcGFubmluZ190cmVlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTdHJvbmdPcmllbnRhdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdHJvbmdfb3JpZW50YXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlQXBleFZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb2xvcmluZyA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5hcGV4X3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgICAgIHZhciBjYyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxpbnQ+KGNvbG9yaW5nLlJlcGxhY2UoXCJbXCIsIFwiXCIpLlJlcGxhY2UoXCJdXCIsIFwiXCIpLlJlcGxhY2UoXCIgXCIsIFwiXCIpLlJlcGxhY2UoRW52aXJvbm1lbnQuTmV3TGluZSwgXCJcIikuUmVwbGFjZShcIlxcXFxuXCIsIFwiXCIpLlNwbGl0KCcsJyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBpbnQ+KSh4ID0+IGludC5QYXJzZSh4KSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB2LkNvbG9yID0gVmVydGV4LkRlZmF1bHRGaWxsQnJ1c2hDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGNjKVxyXG4gICAgICAgICAgICAgICAgR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXNbdl0uQ29sb3IgPSBDb2xvcnNbMV07XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0FwZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfYXBleCgpXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNBcmNUcmFuc2l0aXZlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2FyY190cmFuc2l0aXZlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQXN0ZXJvaWRhbFRyaXBsZUZyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfYXN0ZXJvaWRhbF90cmlwbGVfZnJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIFxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0JpY29ubmVjdGVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2JpY29ubmVjdGVkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQmlwYXJ0aXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2JpcGFydGl0ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0Jsb2NrR3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfYmxvY2tfZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDYXJ0ZXNpYW5Qcm9kdWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2NhcnRlc2lhbl9wcm9kdWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzRGlzdGFuY2VSZWd1bGFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2Rpc3RhbmNlX3JlZ3VsYXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNFZGdlVHJhbnNpdGl2ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19lZGdlX3RyYW5zaXRpdmUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNFdmVuSG9sZUZyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZXZlbl9ob2xlX2ZyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNGb3Jlc3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZm9yZXN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzSGFsZlRyYW5zaXRpdmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfaGFsZl90cmFuc2l0aXZlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzTGluZUdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2xpbmVfZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNMb25nQW50aWhvbGVGcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2xvbmdfYW50aWhvbGVfZnJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0xvbmdIb2xlRnJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19sb25nX2hvbGVfZnJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc09kZEhvbGVGcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX29kZF9ob2xlX2ZyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNPdmVyZnVsbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19vdmVyZnVsbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1BhcnRpYWxDdWJlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3BhcnRpYWxfY3ViZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1ByaW1lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3ByaW1lKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzU2VtaVN5bW1ldHJpYygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19zZW1pX3N5bW1ldHJpYygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1NwbGl0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3NwbGl0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzU3Ryb25nbHlSZWd1bGFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3N0cm9uZ2x5X3JlZ3VsYXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNUcmlhbmdsZUZyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfdHJpYW5nbGVfZnJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1dlYWtseUNob3JkYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfd2Vha2x5X2Nob3JkYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlT2RkR2lydGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcub2RkX2dpcnRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvcmVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvcmVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUZyYWN0aW9uYWxDaHJvbWF0aWNJbmRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5mcmFjdGlvbmFsX2Nocm9tYXRpY19pbmRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VIYXNQZXJmZWN0TWF0Y2hpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaGFzX3BlcmZlY3RfbWF0Y2hpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSWhhcmFaZXRhRnVuY3Rpb25JbnZlcnNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmloYXJhX3pldGFfZnVuY3Rpb25faW52ZXJzZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VLaXJjaGhvZmZTeW1hbnppa1BvbHlub21pYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcua2lyY2hob2ZmX3N5bWFuemlrX3BvbHlub21pYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTG92YXN6VGhldGEoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubG92YXN6X3RoZXRhKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1hZ25pdHVkZUZ1bmN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1hZ25pdHVkZV9mdW5jdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNYXRjaGluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tYXRjaGluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNYXhpbXVtQXZlcmFnZURlZ3JlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tYXhpbXVtX2F2ZXJhZ2VfZGVncmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1vZHVsYXJEZWNvbXBvc2l0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1vZHVsYXJfZGVjb21wb3NpdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VQZXJmZWN0TWF0Y2hpbmdzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnBlcmZlY3RfbWF0Y2hpbmdzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNlaWRlbEFkamFjZW5jeU1hdHJpeCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zZWlkZWxfYWRqYWNlbmN5X21hdHJpeCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VOZXR3b3JreEdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm5ldHdvcmt4X2dyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlncmFwaEdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlncmFwaF9ncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUb0RpY3Rpb25hcnkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudG9fZGljdGlvbmFyeSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb3B5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvcHkoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRXhwb3J0VG9GaWxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmV4cG9ydF90b19maWxlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFkamFjZW5jeU1hdHJpeCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hZGphY2VuY3lfbWF0cml4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUluY2lkZW5jZU1hdHJpeCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pbmNpZGVuY2VfbWF0cml4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURpc3RhbmNlTWF0cml4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc3RhbmNlX21hdHJpeCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VXZWlnaHRlZEFkamFjZW5jeU1hdHJpeCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy53ZWlnaHRlZF9hZGphY2VuY3lfbWF0cml4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUtpcmNoaG9mZk1hdHJpeCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5raXJjaGhvZmZfbWF0cml4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUhhc0xvb3BzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmhhc19sb29wcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBbGxvd3NMb29wcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hbGxvd3NfbG9vcHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWxsb3dMb29wcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hbGxvd19sb29wcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMb29wcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5sb29wcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMb29wRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubG9vcF9lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VOdW1iZXJPZkxvb3BzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm51bWJlcl9vZl9sb29wcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMb29wVmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubG9vcF92ZXJ0aWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSZW1vdmVMb29wcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yZW1vdmVfbG9vcHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSGFzTXVsdGlwbGVFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5oYXNfbXVsdGlwbGVfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWxsb3dzTXVsdGlwbGVFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hbGxvd3NfbXVsdGlwbGVfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWxsb3dNdWx0aXBsZUVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFsbG93X211bHRpcGxlX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU11bHRpcGxlRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubXVsdGlwbGVfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTmFtZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5uYW1lKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzSW1tdXRhYmxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2ltbXV0YWJsZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VXZWlnaHRlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy53ZWlnaHRlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBbnRpc3ltbWV0cmljKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFudGlzeW1tZXRyaWMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVuc2l0eSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZW5zaXR5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU9yZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm9yZGVyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNpemUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2l6ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBZGRWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBZGRWZXJ0aWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hZGRfdmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVsZXRlVmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlbGV0ZV92ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVsZXRlVmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVsZXRlX3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUhhc1ZlcnRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5oYXNfdmVydGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJhbmRvbVZlcnRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yYW5kb21fdmVydGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJhbmRvbVZlcnRleEl0ZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnJhbmRvbV92ZXJ0ZXhfaXRlcmF0b3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmFuZG9tRWRnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yYW5kb21fZWRnZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSYW5kb21FZGdlSXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFuZG9tX2VkZ2VfaXRlcmF0b3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVmVydGV4Qm91bmRhcnkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudmVydGV4X2JvdW5kYXJ5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNldFZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNldF92ZXJ0aWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHZXRWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ2V0X3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHZXRWZXJ0aWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5nZXRfdmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVmVydGV4SXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudmVydGV4X2l0ZXJhdG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU5laWdoYm9ySXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubmVpZ2hib3JfaXRlcmF0b3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTmVpZ2hib3JzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm5laWdoYm9ycygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNZXJnZVZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1lcmdlX3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFkZEVkZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX2VkZ2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWRkRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN1YmRpdmlkZUVkZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZGl2aWRlX2VkZ2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3ViZGl2aWRlRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZGl2aWRlX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlbGV0ZUVkZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVsZXRlX2VkZ2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVsZXRlRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVsZXRlX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlbGV0ZU11bHRpZWRnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWxldGVfbXVsdGllZGdlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNldEVkZ2VMYWJlbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zZXRfZWRnZV9sYWJlbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VIYXNFZGdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmhhc19lZGdlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VCb3VuZGFyeSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2JvdW5kYXJ5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VJdGVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2l0ZXJhdG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VzSW5jaWRlbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWRnZXNfaW5jaWRlbnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZUxhYmVsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VfbGFiZWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZUxhYmVscygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2xhYmVscygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSZW1vdmVNdWx0aXBsZUVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnJlbW92ZV9tdWx0aXBsZV9lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGVhcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGVhcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWdyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVncmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUF2ZXJhZ2VEZWdyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYXZlcmFnZV9kZWdyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVncmVlSGlzdG9ncmFtKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlZ3JlZV9oaXN0b2dyYW0oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVncmVlSXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVncmVlX2l0ZXJhdG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlZ3JlZVNlcXVlbmNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlZ3JlZV9zZXF1ZW5jZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSYW5kb21TdWJncmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yYW5kb21fc3ViZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWRkQ2xpcXVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFkZF9jbGlxdWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWRkQ3ljbGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX2N5Y2xlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFkZFBhdGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX3BhdGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ29tcGxlbWVudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jb21wbGVtZW50KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxpbmVHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5saW5lX2dyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRvU2ltcGxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRvX3NpbXBsZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXNqb2ludFVuaW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc2pvaW50X3VuaW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVVuaW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnVuaW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJlbGFiZWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmVsYWJlbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWdyZWVUb0NlbGwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVncmVlX3RvX2NlbGwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3ViZ3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNTdWJncmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19zdWJncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDYXJ0ZXNpYW5Qcm9kdWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNhcnRlc2lhbl9wcm9kdWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRlbnNvclByb2R1Y3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudGVuc29yX3Byb2R1Y3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTGV4aWNvZ3JhcGhpY1Byb2R1Y3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubGV4aWNvZ3JhcGhpY19wcm9kdWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN0cm9uZ1Byb2R1Y3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3Ryb25nX3Byb2R1Y3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzanVuY3RpdmVQcm9kdWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc2p1bmN0aXZlX3Byb2R1Y3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRXVsZXJpYW5PcmllbnRhdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ldWxlcmlhbl9vcmllbnRhdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFdWxlcmlhbkNpcmN1aXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZXVsZXJpYW5fY2lyY3VpdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDeWNsZUJhc2lzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmN5Y2xlX2Jhc2lzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFsbFBhdGhzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFsbF9wYXRocygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUcmlhbmdsZXNDb3VudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50cmlhbmdsZXNfY291bnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3BlY3RydW0oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3BlY3RydW0oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWlnZW52ZWN0b3JzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVpZ2VudmVjdG9ycygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFaWdlbnNwYWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5laWdlbnNwYWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbHVzdGVyVHJpYW5nbGVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsdXN0ZXJfdHJpYW5nbGVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsdXN0ZXJpbmdBdmVyYWdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsdXN0ZXJpbmdfYXZlcmFnZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbHVzdGVyaW5nQ29lZmYoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2x1c3RlcmluZ19jb2VmZigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbHVzdGVyVHJhbnNpdGl2aXR5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsdXN0ZXJfdHJhbnNpdGl2aXR5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN6ZWdlZEluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnN6ZWdlZF9pbmRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb2Fyc2VzdEVxdWl0YWJsZVJlZmluZW1lbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29hcnNlc3RfZXF1aXRhYmxlX3JlZmluZW1lbnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQXV0b21vcnBoaXNtR3JvdXAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYXV0b21vcnBoaXNtX2dyb3VwKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzVmVydGV4VHJhbnNpdGl2ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc192ZXJ0ZXhfdHJhbnNpdGl2ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0lzb21vcnBoaWMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfaXNvbW9ycGhpYygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDYW5vbmljYWxMYWJlbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jYW5vbmljYWxfbGFiZWwoKS5wbG90KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ2F5bGV5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2NheWxleSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0V1bGVyaWFuKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2V1bGVyaWFuKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzUGxhbmFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3BsYW5hcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0NpcmN1bGFyUGxhbmFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2NpcmN1bGFyX3BsYW5hcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1JlZ3VsYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfcmVndWxhcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0Nob3JkYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfY2hvcmRhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0NpcmN1bGFudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jaXJjdWxhbnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNJbnRlcnZhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19pbnRlcnZhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0dhbGxhaVRyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZ2FsbGFpX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDbGlxdWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfY2xpcXVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ3ljbGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfY3ljbGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNJbmRlcGVuZGVudFNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19pbmRlcGVuZGVudF9zZXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNUcmFuc2l0aXZlbHlSZWR1Y2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3RyYW5zaXRpdmVseV9yZWR1Y2VkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzRXF1aXRhYmxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2VxdWl0YWJsZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VCcmVhZHRoRmlyc3RTZWFyY2goKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYnJlYWR0aF9maXJzdF9zZWFyY2goKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVwdGhGaXJzdFNlYXJjaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZXB0aF9maXJzdF9zZWFyY2goKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTGV4QkZTKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxleF9CRlMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2VudHJhbGl0eUJldHdlZW5uZXNzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNlbnRyYWxpdHlfYmV0d2Vlbm5lc3MoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2VudHJhbGl0eUNsb3NlbmVzcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jZW50cmFsaXR5X2Nsb3NlbmVzcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXN0YW5jZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaXN0YW5jZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXN0YW5jZUFsbFBhaXJzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc3RhbmNlX2FsbF9wYWlycygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXN0YW5jZXNEaXN0cmlidXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGlzdGFuY2VzX2Rpc3RyaWJ1dGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFY2NlbnRyaWNpdHkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWNjZW50cmljaXR5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJhZGl1cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yYWRpdXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2VudGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNlbnRlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaWFtZXRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaWFtZXRlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXN0YW5jZUdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc3RhbmNlX2dyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdpcnRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdpcnRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVBlcmlwaGVyeSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5wZXJpcGhlcnkoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvcnRlc3RQYXRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNob3J0ZXN0X3BhdGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvcnRlc3RQYXRoTGVuZ3RoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNob3J0ZXN0X3BhdGhfbGVuZ3RoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3J0ZXN0UGF0aHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2hvcnRlc3RfcGF0aHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvcnRlc3RQYXRoTGVuZ3RocygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zaG9ydGVzdF9wYXRoX2xlbmd0aHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvcnRlc3RQYXRoQWxsUGFpcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2hvcnRlc3RfcGF0aF9hbGxfcGFpcnMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlV2llbmVySW5kZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcud2llbmVyX2luZGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUF2ZXJhZ2VEaXN0YW5jZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hdmVyYWdlX2Rpc3RhbmNlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ29ubmVjdGVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2Nvbm5lY3RlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb25uZWN0ZWRDb21wb25lbnRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbm5lY3RlZF9jb21wb25lbnRzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvbm5lY3RlZENvbXBvbmVudHNOdW1iZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29ubmVjdGVkX2NvbXBvbmVudHNfbnVtYmVyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvbm5lY3RlZENvbXBvbmVudHNTdWJncmFwaHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29ubmVjdGVkX2NvbXBvbmVudHNfc3ViZ3JhcGhzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvbm5lY3RlZENvbXBvbmVudENvbnRhaW5pbmdWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29ubmVjdGVkX2NvbXBvbmVudF9jb250YWluaW5nX3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb25uZWN0ZWRDb21wb25lbnRzU2l6ZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29ubmVjdGVkX2NvbXBvbmVudHNfc2l6ZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQmxvY2tzQW5kQ3V0VmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYmxvY2tzX2FuZF9jdXRfdmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQmxvY2tzQW5kQ3V0c1RyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYmxvY2tzX2FuZF9jdXRzX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDdXRFZGdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2N1dF9lZGdlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ3V0VmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2N1dF92ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZUN1dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2N1dCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VWZXJ0ZXhDdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudmVydGV4X2N1dCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VGbG93KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmZsb3coKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZURpc2pvaW50UGF0aHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWRnZV9kaXNqb2ludF9wYXRocygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VWZXJ0ZXhEaXNqb2ludFBhdGhzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnZlcnRleF9kaXNqb2ludF9wYXRocygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFZGdlQ29ubmVjdGl2aXR5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VfY29ubmVjdGl2aXR5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVZlcnRleENvbm5lY3Rpdml0eSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy52ZXJ0ZXhfY29ubmVjdGl2aXR5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRyYW5zaXRpdmVDbG9zdXJlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRyYW5zaXRpdmVfY2xvc3VyZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUcmFuc2l0aXZlUmVkdWN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRyYW5zaXRpdmVfcmVkdWN0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1pblNwYW5uaW5nVHJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5taW5fc3Bhbm5pbmdfdHJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTcGFubmluZ1RyZWVzQ291bnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3Bhbm5pbmdfdHJlZXNfY291bnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRG9taW5hdG9yVHJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kb21pbmF0b3JfdHJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRFbWJlZGRpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X2VtYmVkZGluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHZXRFbWJlZGRpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ2V0X2VtYmVkZGluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VGYWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5mYWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHZXRQb3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ2V0X3BvcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRQb3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X3BvcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRQbGFuYXJQb3NpdGlvbnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X3BsYW5hcl9wb3NpdGlvbnMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICBcclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0RyYXduRnJlZU9mRWRnZUNyb3NzaW5ncygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19kcmF3bl9mcmVlX29mX2VkZ2VfY3Jvc3NpbmdzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxhdGV4T3B0aW9ucygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5sYXRleF9vcHRpb25zKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNldExhdGV4T3B0aW9ucygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zZXRfbGF0ZXhfb3B0aW9ucygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMYXlvdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubGF5b3V0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR3JhcGhwbG90KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdyYXBocGxvdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VQbG90KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnBsb3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvdygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zaG93KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVBsb3QzZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5wbG90M2QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2hvdzNkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNob3czZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHcmFwaHZpelN0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ncmFwaHZpel9zdHJpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR3JhcGh2aXpUb0ZpbGVOYW1lZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ncmFwaHZpel90b19maWxlX25hbWVkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN0ZWluZXJUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnN0ZWluZXJfdHJlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFZGdlRGlzam9pbnRTcGFubmluZ1RyZWVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VfZGlzam9pbnRfc3Bhbm5pbmdfdHJlZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRmVlZGJhY2tWZXJ0ZXhTZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZmVlZGJhY2tfdmVydGV4X3NldCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNdWx0aXdheUN1dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tdWx0aXdheV9jdXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTWF4Q3V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1heF9jdXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTG9uZ2VzdFBhdGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubG9uZ2VzdF9wYXRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRyYXZlbGluZ1NhbGVzbWFuUHJvYmxlbSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50cmF2ZWxpbmdfc2FsZXNtYW5fcHJvYmxlbSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0hhbWlsdG9uaWFuKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2hhbWlsdG9uaWFuKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUhhbWlsdG9uaWFuQ3ljbGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaGFtaWx0b25pYW5fY3ljbGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSGFtaWx0b25pYW5QYXRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmhhbWlsdG9uaWFuX3BhdGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTXVsdGljb21tb2RpdHlGbG93KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm11bHRpY29tbW9kaXR5X2Zsb3coKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzam9pbnRSb3V0ZWRQYXRocygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaXNqb2ludF9yb3V0ZWRfcGF0aHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRG9taW5hdGluZ1NldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kb21pbmF0aW5nX3NldCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTdWJncmFwaFNlYXJjaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdWJncmFwaF9zZWFyY2goKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3ViZ3JhcGhTZWFyY2hDb3VudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdWJncmFwaF9zZWFyY2hfY291bnQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3ViZ3JhcGhTZWFyY2hJdGVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdWJncmFwaF9zZWFyY2hfaXRlcmF0b3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2hhcmFjdGVyaXN0aWNQb2x5bm9taWFsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNoYXJhY3RlcmlzdGljX3BvbHlub21pYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR2VudXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ2VudXMoKVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gTGF5b3V0XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlTGF5b3V0U3ByaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X3NwcmluZygpXCIpO1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25zID0gU2NhbGUoRXh0cmFjdFBvaW50cyhsYXlvdXQpKTtcclxuICAgICAgICAgICAgYXdhaXQgTGF5b3V0R3JhcGgocG9zaXRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dFJhbmtlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGF5b3V0ID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLmxheW91dF9yYW5rZWQoKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dEV4dGVuZFJhbmRvbWx5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X2V4dGVuZF9yYW5kb21seSgpXCIpO1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25zID0gU2NhbGUoRXh0cmFjdFBvaW50cyhsYXlvdXQpKTtcclxuICAgICAgICAgICAgYXdhaXQgTGF5b3V0R3JhcGgocG9zaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlTGF5b3V0Q2lyY3VsYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5sYXlvdXRfY2lyY3VsYXIoKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dFRyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5sYXlvdXRfdHJlZSgpXCIpO1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25zID0gU2NhbGUoRXh0cmFjdFBvaW50cyhsYXlvdXQpKTtcclxuICAgICAgICAgICAgYXdhaXQgTGF5b3V0R3JhcGgocG9zaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlTGF5b3V0R3JhcGh2aXooKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5sYXlvdXRfZ3JhcGh2aXooKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VMYXlvdXRQbGFuYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5sYXlvdXRfcGxhbmFyKClcIik7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBTY2FsZShFeHRyYWN0UG9pbnRzKGxheW91dCkpO1xyXG4gICAgICAgICAgICBhd2FpdCBMYXlvdXRHcmFwaChwb3NpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxvYWROYW1lZEdyYXBoKHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGEgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKFwiRyA9IGdyYXBocy5cIiArIG5hbWUgKyBcIigpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFkamFjZW5jeV9tYXRyaXgoKS5zdHIoKVwiKTtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoXCJHID0gZ3JhcGhzLlwiICsgbmFtZSArIFwiKClcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubGF5b3V0KClcIik7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBTY2FsZShFeHRyYWN0UG9pbnRzKGxheW91dCkpO1xyXG4gICAgICAgICAgICB2YXIgYWRqID0gUGFyc2VBZGphY2VuY3lNYXRyaXgoYSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBBbGdvcml0aG1zLkdyYXBoKGFkaik7XHJcblxyXG4gICAgICAgICAgICBBcHAuTmV3VGFiKG5hbWUsIG5ldyBHcmFwaHMuR3JhcGgoZywgcG9zaXRpb25zLCBmYWxzZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIExpc3Q8VmVjdG9yPiBTY2FsZShJRW51bWVyYWJsZTxWZWN0b3I+IHBvc2l0aW9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpHcmFwaHMuVmVjdG9yPihwb3NpdGlvbnMpO1xyXG4gICAgICAgICAgICB2YXIgbWluWCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWluPGdsb2JhbDo6R3JhcGhzLlZlY3Rvcj4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZWN0b3IsIGRvdWJsZT4pKHAgPT4gcC5YKSk7XHJcbiAgICAgICAgICAgIHZhciBtaW5ZID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5NaW48Z2xvYmFsOjpHcmFwaHMuVmVjdG9yPihsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlY3RvciwgZG91YmxlPikocCA9PiBwLlkpKTtcclxuICAgICAgICAgICAgdmFyIG1heFggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkdyYXBocy5WZWN0b3I+KGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVjdG9yLCBkb3VibGU+KShwID0+IHAuWCkpO1xyXG4gICAgICAgICAgICB2YXIgbWF4WSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWF4PGdsb2JhbDo6R3JhcGhzLlZlY3Rvcj4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZWN0b3IsIGRvdWJsZT4pKHAgPT4gcC5ZKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdyA9IG1heFggLSBtaW5YO1xyXG4gICAgICAgICAgICB2YXIgaCA9IG1heFkgLSBtaW5ZO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6R3JhcGhzLlZlY3RvcixnbG9iYWw6OkdyYXBocy5WZWN0b3I+KHBvc2l0aW9ucywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZWN0b3IsIGdsb2JhbDo6R3JhcGhzLlZlY3Rvcj4pKHAgPT4gbmV3IFZlY3RvcigwLjEgKyAwLjggKiAocC5YIC0gbWluWCkgLyB3LCAwLjEgKyAwLjggKiAocC5ZIC0gbWluWSkgLyBoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXN5bmMgVGFzayBMYXlvdXRHcmFwaChMaXN0PFZlY3Rvcj4gcG9zaXRpb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU25hcFBvc2l0aW9uc1RvR3JpZChwb3NpdGlvbnMpO1xyXG4gICAgICAgICAgICB2YXIgYSA9IG5ldyBMYXlvdXRBbmltYXRpb24oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgR3JhcGhDYW52YXMuSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0sICgpID0+IEdyYXBoQ2FudmFzLkludmFsaWRhdGUoKSwgcG9zaXRpb25zLCBHcmFwaENhbnZhcy5HcmFwaCk7XHJcblxyXG4gICAgICAgICAgICBHcmFwaENhbnZhcy5TbmFwVG9HcmlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGF3YWl0IGEuQW5pbWF0ZSgpO1xyXG4gICAgICAgICAgICBHcmFwaENhbnZhcy5TbmFwVG9HcmlkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU25hcFBvc2l0aW9uc1RvR3JpZChMaXN0PFZlY3Rvcj4gcG9zaXRpb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3NpdGlvbnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb25zW2ldLlggPSAoZmxvYXQpKEdyYXBoQ2FudmFzLl9ncmlkU3RlcCAqIE1hdGguUm91bmQocG9zaXRpb25zW2ldLlggLyBHcmFwaENhbnZhcy5fZ3JpZFN0ZXApKTtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uc1tpXS5ZID0gKGZsb2F0KShHcmFwaENhbnZhcy5fZ3JpZFN0ZXAgKiBNYXRoLlJvdW5kKHBvc2l0aW9uc1tpXS5ZIC8gR3JhcGhDYW52YXMuX2dyaWRTdGVwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25HcmFwaE1vZGlmaWVkKEdyYXBocy5HcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBPbkxvYWQoRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VNb3ZlKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY3RybERvd24gPSBlLkN0cmxLZXk7XHJcbiAgICAgICAgICAgIGlmIChNb3VzZU1vdmVkICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBNb3VzZU1vdmVkKGUuTGF5ZXJYLCBlLkxheWVyWSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VCdXR0b25Eb3duKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY3RybERvd24gPSBlLkN0cmxLZXk7XHJcbiAgICAgICAgICAgLy8gQ2FudmFzLlNldENhcHR1cmUodHJ1ZSk7ICAvLyBjaHJvbWUgZG9lcyBub3Qgc2VlbSB0byBzdXBwb3J0IHRoaXMsIHdoYXQ/XHJcblxyXG4gICAgICAgICAgICBpZiAoZS5TaGlmdEtleSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uRG91YmxlQ2xpY2tlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uRG91YmxlQ2xpY2tlZChlLkxheWVyWCwgZS5MYXllclksIGUuQnV0dG9uID09IDAgPyBNb3VzZUJ1dHRvbi5MZWZ0IDogTW91c2VCdXR0b24uUmlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uRG93biAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uRG93bihlLkxheWVyWCwgZS5MYXllclksIGUuQnV0dG9uID09IDAgPyBNb3VzZUJ1dHRvbi5MZWZ0IDogTW91c2VCdXR0b24uUmlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VCdXR0b25VcChNb3VzZUV2ZW50PEhUTUxDYW52YXNFbGVtZW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2N0cmxEb3duID0gZS5DdHJsS2V5O1xyXG4gICAgICAgICAgIC8vIENhbnZhcy5TZXRDYXB0dXJlKGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKGUuU2hpZnRLZXkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uVXAgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uVXAoZS5MYXllclgsIGUuTGF5ZXJZLCBlLkJ1dHRvbiA9PSAwID8gTW91c2VCdXR0b24uTGVmdCA6IE1vdXNlQnV0dG9uLlJpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlLkN0cmxLZXkgJiYgZS5BbHRLZXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFwcC5Bc2tTYWdlKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25Nb3VzZURvdWJsZUNsaWNrKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0Q2xpcGJvYXJkVGV4dChzdHJpbmcgdGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEdldENsaXBib2FyZFRleHQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0NvbnRyb2xLZXlEb3duXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2N0cmxEb3duOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8b2JqZWN0PiBTZWxlY3RlZE9iamVjdHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEludmFsaWRhdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGdyYXBoaWNzID0gbmV3IEdyYXBoaWNzKENhbnZhcyk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2FudmFzLlBhaW50KGdyYXBoaWNzLCBDYW52YXMuV2lkdGgsIENhbnZhcy5IZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUaXRsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF90aXRsZTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3RpdGxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBldmVudCBBY3Rpb248ZG91YmxlLCBkb3VibGU+IE1vdXNlTW92ZWQ7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxkb3VibGUsIGRvdWJsZSwgTW91c2VCdXR0b24+IE1vdXNlQnV0dG9uVXA7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxkb3VibGUsIGRvdWJsZSwgTW91c2VCdXR0b24+IE1vdXNlQnV0dG9uRG93bjtcclxuICAgICAgICBwdWJsaWMgZXZlbnQgQWN0aW9uPGRvdWJsZSwgZG91YmxlLCBNb3VzZUJ1dHRvbj4gTW91c2VCdXR0b25Eb3VibGVDbGlja2VkO1xyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8VmVjdG9yPiBFeHRyYWN0UG9pbnRzKHN0cmluZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGogPSB4LkluZGV4T2YoXCJbXCIsIGkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGogPCAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGogPSB4LkluZGV4T2YoXCIoXCIsIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqIDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBqID0geC5JbmRleE9mKFwiXVwiLCBpKTtcclxuICAgICAgICAgICAgICAgIGlmIChqIDwgMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBqID0geC5JbmRleE9mKFwiKVwiLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaiA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSB4LlN1YnN0cmluZyhpLCBqIC0gaSkuU3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgVmVjdG9yKGRvdWJsZS5QYXJzZShwWzBdLlRyaW0oJ1snLCAnXScsICcoJywgJyknKSksIGRvdWJsZS5QYXJzZShwWzFdLlRyaW0oJ1snLCAnXScsICcoJywgJyknKSkpO1xyXG4gICAgICAgICAgICAgICAgaSA9IGo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sWyxdIFBhcnNlQWRqYWNlbmN5TWF0cml4KHN0cmluZyBhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJpdHMgPSBhLlJlcGxhY2UoXCInXCIsIFwiXCIpLlNwbGl0KG5ld1tdIHsgXCIsXCIsIFwiXFxcXFxcXFxuXCIsIFwiW1wiLCBcIl1cIiwgXCIgXCIgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyk7XHJcbiAgICAgICAgICAgIHZhciBuID0gKGludClNYXRoLlNxcnQoYml0cy5MZW5ndGgpO1xyXG4gICAgICAgICAgICB2YXIgYWRqID0gbmV3IGJvb2xbbiwgbl07XHJcblxyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIGJpdHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGFkaltpIC8gbiwgaSAlIG5dID0gYiA9PSBcIjFcIjtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFkajtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0KfQo=
